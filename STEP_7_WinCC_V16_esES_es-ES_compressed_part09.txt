d IP ni a un controlador IO.

Consulte también
Agregar una CPU sin especificar (Página 43)

Sugerencia: configuración rápida de sistemas IO
Si el sistema IO tiene muchos dispositivos IO, asigne todos los dispositivos IO posicionados
mediante Drag & Drop a un controlador IO en un solo paso.

Requisitos
El controlador IO y los dispositivos IO están posicionados en la vista de redes.

Asignar dispositivos IO a un sistema IO
Proceda del siguiente modo:
1. Elija un factor de zoom apropiado de manera que pueda ver tantos dispositivos IO como
sea posible en la vista de redes.
2. Disponga los dispositivos IO en dos filas como máximo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3145

Configuración de dispositivos y redes
1.4 Crear configuraciones
3. Seleccione todas las interfaces IO con el puntero del ratón (no los dispositivos). Esto sólo
resultará si empieza a tirar del puntero del ratón fuera del primer dispositivo IO y suelta el
botón del ratón en el último dispositivo IO (selección con lazo).

4. Elija en el menú contextual "Asignar a controlador IO nuevo" y seleccione en el cuadro de
diálogo siguiente la interfaz IO correspondiente del controlador IO.

5. Los dispositivos IO se conectan automáticamente en red con el controlador IO y forman
conjuntamente un sistema IO.
Nota
Con un sistema IO resaltado puede hacer doble clic en un dispositivo IO en el catálogo de
hardware y agregar así rápidamente otros dispositivos IO. De este modo, el dispositivo IO
es incluido automáticamente en el sistema IO resaltado.

Interconectar puertos
Cuando un dispositivo IO está asignado a un controlador IO, todavía no se ha especificado
cómo están interconectados los puertos.

3146

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Una interconexión de puertos no es necesaria para poder utilizar la funcionalidad Ethernet/
PROFINET, pero ofrece las ventajas siguientes:
● Con la interconexión de puertos se especifica una topología teórica. Basándose en una
comparación online-offline es posible realizar una comparación teórica-real en los
dispositivos que soporten esta funcionalidad.
● Solo en la comunicación IRT: si se ha configurado una interconexión de puertos, STEP 7
puede determinar el ancho de banda necesario con más precisión. Por norma general, esto
comporta un aumento del rendimiento.
Asegúrese de que con la interconexión de puertos no se creen estructuras en anillo no
permitidas.
Es aconsejable utilizar la interconexión de puertos únicamente para aquellos dispositivos que
soporten la configuración de topología.

Interconectar puertos en la ventana de inspección
Para interconectar los puertos, proceda del siguiente modo:
1. Seleccione el dispositivo Ethernet/PROFINET o la interfaz Ethernet/PROFINET.
2. Navegue hasta la propiedad de puerto "Interconexión de puertos".
Con la interfaz Ethernet/PROFINET seleccionada, este ajuste se encuentra en la ventana
de inspección del modo siguiente: Propiedades > General > Opciones avanzadas >Puerto
[...] > Interconexión de puertos.
3. En el apartado "Puerto local" se encuentran los ajustes relacionados con el puerto local.
Así, p. ej., para conductores de fibra óptica aquí pueden ajustarse las denominaciones de
los cables.
En el punto "Puerto interlocutor" haga clic en el triángulo negro del campo "Puerto
interlocutor" para visualizar y seleccionar los puertos interlocutores disponibles.
4. Si se trata de una interconexión de puertos con el medio cobre y los dispositivos soportan
la comunicación IRT, también se podrán ajustar la longitud del cable y el tiempo de
propagación de señal.
Si la interfaz Ethernet/PROFINET no estaba conectada en red, se conectará automáticamente
con esta acción. En las propiedades de la subred es posible especificar si debe utilizarse dicha
subred para la conexión en red o no.
Nota
Interconexión entre un puerto eléctrico y uno óptico
Si desea interconectar un puerto eléctrico con uno óptico debe distinguir entre comunicación
RT e IRT:
● En la comunicación RT no es necesario configurar un convertidor de medio.
● En la comunicación IRT es necesario realizar la interconexión utilizando un convertidor de
medio.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3147

Configuración de dispositivos y redes
1.4 Crear configuraciones

Información sobre la vigilancia del puerto interlocutor
Después de interconectar dos puertos entre sí, en un campo de texto de la sección "Puerto
interlocutor" se ofrece información sobre la vigilancia del puerto interlocutor. Pueden aparecer
las siguientes indicaciones:
● No es posible vigilar el puerto interlocutor.
● Vigilando puerto interlocutor.
Si como puerto interlocutor se elige, p. ej., un puerto desactivado, no es posible vigilarlo. En tal
caso no es posible vigilar la topología teórica ni el tiempo de propagación de señal. El
dispositivo solo se puede sustituir con una Micro Memory Card.

Consulte también
Sinopsis (Página 324)
Resumen de las propiedades de la CPU (Página 1024)

Ajustar tiempo de ciclo de emisión
Requisitos para modificar el tiempo de ciclo de emisión en el dispositivo PROFINET
El dispositivo PROFINET debe ser un controlador IO como maestro Sync o no puede estar
configurado ningún IRT (Isochronous Realtime) en el sistema IO.
Si el dispositivo PROFINET no es un controlador IO como maestro Sync, para ajustar el tiempo
de ciclo de emisión deben cumplirse los requisitos siguientes:
● No debe haber configurado ningún dispositivo como esclavo Sync o maestro Sync en el
sistema IO.
● Ningún dispositivo del sistema IO debe estar sincronizado.
Si IRT está configurado con un controlador IO como maestro Sync, el tiempo de ciclo de
emisión puede ajustarse en el dispositivo o en el dominio Sync.

Procedimiento
Para ajustar el tiempo de ciclo de emisión en el dispositivo PROFINET, proceda del siguiente
modo:
1. Seleccione el controlador PROFINET IO en la vista de dispositivos o de redes.
2. Modifique el valor del intervalo de actualización más pequeño posible en las propiedades
de la interfaz PROFINET, en "Interfaz PROFINET > Opciones avanzadas > Configuración
en tiempo real > Comunicación IO > Tiempo de ciclo de emisión".
El tiempo de ciclo de emisión es válido para todos los dispositivos PROFINET del sistema IO.
Si se ajusta la función de sincronización a un valor distinto de "Sin sincronizar", también es

3148

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
posible ajustar el tiempo de ciclo de emisión en el dominio Sync, es decir, de forma centralizada
en el sistema PROFINET IO:
1. Seleccione el sistema IO a través de la subred PROFINET.
2. En las propiedades del dominio Sync, modifique el valor del tiempo de ciclo de emisión en
"Administración de dominios > Dominios Sync > Dominio_Sync_1 > Tiempo de ciclo de
emisión".

Ajustar el tiempo de actualización
Tiempo de actualización
Dentro de este intervalo de tiempo, el controlador IO/dispositivo IO suministra datos nuevos a
un dispositivo IO/controlador IO en el sistema PROFINET IO. El tiempo de actualización se
puede configurar por separado para cada dispositivo IO; dicho tiempo determina el intervalo
con que se envían los datos del controlador IO al dispositivo IO (salidas), así como del
dispositivo IO al controlador IO (entradas).
En el ajuste predeterminado, STEP 7 calcula el tiempo de actualización automáticamente para
cada dispositivo IO del sistema PROFINET IO, teniendo en cuenta el volumen de datos que
deben intercambiarse y el tiempo de ciclo de emisión ajustado.

Ajustar el tiempo de actualización
Si no se quiere calcular el tiempo de actualización automáticamente, es posible modificar el
ajuste.
Para modificar el tiempo de actualización en la ventana de inspección, proceda del siguiente
modo:
1. Seleccione en la vista de redes o de dispositivos la interfaz PROFINET del dispositivo IO.
2. Determine el tiempo de actualización en "Opciones avanzadas > Configuración en tiempo
real > Ciclo IO" en las propiedades de la interfaz. El tiempo de actualización se puede
determinar de dos formas diferentes:
– Cálculo automático del tiempo de actualización óptimo.
– Tiempo de actualización ajustable con selección de diferentes valores de la lista
desplegable.
3. Si desea que la relación entre tiempo de ciclo de emisión y tiempo de actualización se
mantenga constante, active la opción "Adaptar el tiempo de actualización si se modifica el
tiempo de ciclo de emisión".
Con esta opción se asegura que el tiempo de actualización ajustado no sea más corto que
el tiempo de ciclo de emisión.
También es posible realizar este ajuste directamente en la tabla de comunicación E/S a través
de la lista desplegable de la columna "Modo de tiempo de actualización".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3149

Configuración de dispositivos y redes
1.4 Crear configuraciones
El ajuste manual del tiempo de ciclo de emisión puede conducir a errores si el ancho de banda
disponible es insuficiente o si se rebasan otros límites o capacidades funcionales (p. ej. si se
han configurado demasiados dispositivos).
Nota
Si el modo de tiempo de actualización se cambia de "Ajustable" a "Automático", el valor
calculado automáticamente del tiempo de actualización sobrescribirá el registrado
manualmente.

No es posible determinar el tiempo de actualización
STEP 7 determina el desarrollo del intercambio cíclico de datos a partir de la información de
configuración (propiedades del controlador IO, propiedades de los dispositivos IO, número y
tipo de dispositivos IO, coherencia de datos de usuario cíclicos...). Durante este proceso, los
datos cíclicos se comprimen en tramas y se envían/reciben sucesivamente en intervalos
temporales calculados.
El número y tamaño máximos de las tramas así como el número máximo disponible de
intervalos deben ser suficientes para acoger todos los datos. Además, todos los dispositivos
PROFINET deben soportar el intervalo de transmisión/recepción resultante.
Si se han rebasado los límites del número de datos de usuario cíclicos o tramas o de los
intervalos de tiempo disponibles, STEP 7 no podrá calcular el tiempo de actualización.
Tampoco es posible hacerlo si no hay una base común para el intervalo de transmisión/
recepción.
En caso de existir un motivo que impida calcular el tiempo de actualización, STEP 7 notifica la
causa al compilar la configuración hardware.
Medidas para solucionar el problema:
● Reduzca el número de dispositivos IO
● Reduzca el número de módulos dentro de los dispositivos IO
● En caso de utilizar un IE/PB Link: reduzca el número de esclavos DP detrás del IE/PB Link
● Utilice un controlador IO o IE/PB Link más potente
● Aumente el tiempo de ciclo de emisión
– Para RT: en las propiedades del controlador IO
– Para IRT: en las propiedades del dominio Sync
● Compruebe que haya una base común para el intervalo de envío/recepción en las
propiedades de los dispositivos IO ('MinDeviceIntervall' y las posibles reducciones).
Sustituya los dispositivos IO que no sean adecuados. Las propiedades de los dispositivos
están guardadas en el archivo GSD del dispositivo IO.

3150

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Con configuración IRT:
– Compruebe si los puertos del maestro Sync y los esclavos Sync están interconectados.
– Compruebe el orden de los dispositivos IO: entre el maestro Sync y un esclavo Sync no
puede haber ningún dispositivo no sincronizado
(Ejemplo de una configuración errónea: maestro Sync --- dispositivo no sincronizado --esclavo Sync).
– Compruebe que no haya configurado más de un maestro Sync.
– Compruebe el ancho de banda restante para datos RT. Es posible que el ancho de
banda disponible para la transmisión de datos RT esté restringido por la comunicación
IRT en la misma subred Ethernet.
● En caso de utilizar I-devices:
Es posible que el tiempo de ciclo de emisión ajustado no pueda utilizarse junto con la
configuración de I-Device existente.
– Configure el I-device sin I-devices subordinados y active el ajuste "Parametrización de
la interfaz PN por el controlador IO de nivel superior".
– Modifique el tiempo de ciclo de emisión del controlador IO a un valor par (... 0,250, 0,500,
1,000, ...).
Identificación de los dispositivos IO afectados:
Los dispositivos IO afectados para los que no es posible calcular el tiempo de actualización
aparecen marcados en la tabla "Comunicación E/S" del sistema PROFINET IO, en la vista de
redes. En la columna "Tiempo de actualización" no aparece ningún valor para los dispositivos
IO afectados (entrada "-").

Ajustar el tiempo de supervisión de respuesta
Tiempo de supervisión de respuesta
Para dispositivos PROFINET IO es posible configurar un tiempo de supervisión de respuesta.
Si el dispositivo IO no recibe datos de entrada o salida (datos IO) del controlador IO dentro del
tiempo de supervisión de respuesta, éste pasa al estado seguro.
El tiempo de supervisión de respuesta no se introduce directamente, sino como "Número de
ciclos de actualización aceptados sin datos IO". Esto facilita el ajuste, porque el tiempo de
actualización puede ser más breve o más largo dependiendo de la capacidad de rendimiento
del dispositivo IO y del ajuste.
A partir del "Número de ciclos de actualización aceptados sin datos IO" se calcula
automáticamente el tiempo de supervisión de respuesta resultante.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3151

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configurar tiempo de supervisión de respuesta
Para definir el tiempo de supervisión de respuesta, proceda del siguiente modo:
1. Seleccione en la vista de redes o de dispositivos la interfaz PROFINET del dispositivo IO.
2. Navegue hasta "Opciones avanzadas > Configuración en tiempo real > Ciclo IO" de las
propiedades de la interfaz.
3. Seleccione el número deseado de ciclos en la lista desplegable "Lanzar supervisión de
respuesta tras # ciclos con datos IO ausentes".
A continuación se calcula automáticamente el tiempo de supervisión de respuesta en base al
factor especificado. No debe superar los 1,92 segundos.
Nota
El ajuste predeterminado debe cambiarse únicamente en los siguientes casos:
● durante la fase de puesta en marcha
● para la configuración de sistemas S7-1500R/H
Configurar el tiempo de supervisión de respuesta en sistemas S7-1500R/H
Si se han configurado módulos para los dispositivos IO y se compila el proyecto, en la ventana
de inspección aparece un mensaje de error sobre el tiempo de supervisión de respuesta.
Ajuste el tiempo de supervisión de respuesta indicado en el mensaje de error.

Ancho de banda calculado para datos IO cíclicos
Ancho de banda calculado para datos IO cíclicos
El sistema vigila el mantenimiento del ancho de banda máximo disponible para datos IO
cíclicos. El ancho de banda máximo depende del tiempo de ciclo de emisión. Si los tiempos de
ciclo de emisión son mayores o iguales a 1 ms, el ancho de banda máximo es de 0,5 ms. Si los
tiempos de ciclo de emisión son menores, se reduce el ancho de banda máximo disponible.
El ancho de banda realmente necesario para datos IO cíclicos es definido por el sistema
atendiendo al número de dispositivos IO y módulos IO configurados. Además, el ancho de
banda necesario depende del tiempo de actualización utilizado.
Por regla general, el ancho de banda calculado aumenta en caso de:
● un número mayor de dispositivos IO
● un número mayor de módulos IO
● tiempos de actualización más cortos.

3152

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ancho de banda máximo para datos IO cíclicos dependiendo del tiempo de ciclo de emisión
La tabla siguiente muestra cómo se comporta el ancho de banda máximo disponible para datos
IO cíclicos en función del tiempo de ciclo de emisión:
Tiempo de ciclo de emisión

Ancho de banda máximo para datos IO cíclicos

250 µs – 468,75 µs

<< 125 µs

500 µs – 968,75 µs

= Tiempo de ciclo de emisión / 2

1 – 4 ms

= 500 µs*

*: para sistemas redundantes rigen anchos de banda máximos más pequeños:
● para S7-1500H = 250 µs
● para S7-1500R = 125 µs

Definir opciones de puerto
Definición de opciones de puerto
Modificar los ajustes de conexión para el puerto PROFINET IO
Los ajustes predeterminados para los puertos de una interfaz PROFINET están definidos de
forma que por lo general está garantizado un intercambio de datos sin problemas.
En caso necesario, los ajustes se pueden modificar. Seguidamente se describen las
posibilidades de ajuste.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3153

Configuración de dispositivos y redes
1.4 Crear configuraciones

Posibilidades de ajuste de la velocidad de transferencia/dúplex
Se pueden realizar los siguientes ajustes de "Velocidad de transferencia/dúplex" en función
del dispositivo seleccionado:
● Ajuste automático
Ajuste predeterminado recomendando para el puerto. La configuración de la transferencia
con el puerto interlocutor se "negocia" automáticamente. En el ajuste predeterminado se
activa también automáticamente la opción "Activar autonegotiation".
● TP/ITP con x Mbits/s dúplex (semidúplex)
Ajuste de la velocidad de transferencia y del modo dúplex/semidúplex. El efecto depende
de la opción ajustada "Activar autonegotiation":
– Autonegotiation activada
Es posible utilizar tanto cable cruzado como no cruzado. Con este ajuste se vigila el
puerto.
– Autonegotiation desactivada
Asegúrese de utilizar los cables correctos (cable Patch o Cross). El puerto también se
vigila con este ajuste.
● Desactivado
En función del tipo de dispositivo, en la lista desplegable aparece la opción "desactivado".
Así, por ejemplo, tiene la posibilidad de prohibir el acceso a través de un puerto no utilizado
por motivos de seguridad. Con este ajuste no se generan eventos de diagnóstico.

Opción "Vigilar"
La opción "Vigilar" activa/desactiva el diagnóstico de puerto. Solo es posible activar la
vigilancia si el dispositivo soporta dicha función.
A continuación se explica lo que se vigila cuando la vigilancia está activada durante el
funcionamiento del dispositivo, independientemente de si el puerto está interconectado o no:
● Se vigila el estado del enlace, es decir, se genera un diagnóstico en caso de fallo del enlace
(p. ej. en caso de rotura de hilo o conector desenchufado). En los puertos de fibra óptica
(FO) se vigila la reserva del sistema, de modo que se obtiene un diagnóstico de
mantenimiento graduado.
● Se vigilan los ajustes de medios, es decir, se genera un diagnóstico cuando durante el
funcionamiento el ajuste del puerto local (velocidad de transferencia / dúplex) no coincide
con el ajuste del puerto interlocutor.
● Si el puerto está interconectado: Se vigila la longitud del cable/el tiempo de propagación de
señal, es decir, se genera un diagnóstico cuando durante el funcionamiento la longitud de
cable o el tiempo de propagación de señal determinado localmente no coincide con el
determinado por el interlocutor.
Desactivar la vigilancia

3154

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En los siguientes casos no es aconsejable tener la vigilancia activada:
● En el puerto local está activada la opción "Interlocutores alternativos", p. ej. para un docking
port de una docking station (cambiador de herramientas). En este caso, un cambio de
estado del enlace forma parte del funcionamiento normal.
● El puerto interlocutor pertenece a un dispositivo no PROFINET. Solo los puertos de
dispositivos PROFINET transfieren sus ajustes de puertos como velocidad de
transferencia, ajustes dúplex, etc.
● El puerto local está conectado a un convertidor de medio (componente de red pasivo con
diferentes tiempos de propagación de señal para frames Ethernet).
● En el puerto local está activada la opción "Fin de la detección de topología" en los ajustes
de los límites.
Vigilancia de la topología teórica
La opción "Vigilar" no tiene vinculada ninguna vigilancia para el cumplimiento de la topología
teórica. Es decir, la opción "Vigilancia" no influye en el hecho de si las propiedades
configuradas para las interfaces y los puertos, como nombre de dispositivo, nombre de puerto
y longitud de cable, no coinciden con los ajustes actuales.
El cumplimiento de la topología teórica se comprueba automáticamente cuando se
interconecta el puerto local con un puerto interlocutor; en este caso, el puerto interlocutor no
puede estar desactivado. Las propiedades del puerto indican si se vigila la topología teórica o
si dicha vigilancia no es posible (interconexión de puertos, puerto interlocutor, consulte la
figura de ①).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3155

Configuración de dispositivos y redes
1.4 Crear configuraciones













①
②

3156

Indica si el dispositivo puede comprobar las propiedades reales del puerto del interlocutor comparándolas con sus
propiedades configuradas. El cumplimiento de la topología teórica se comprueba automáticamente cuando se
interconecta el puerto local con un puerto interlocutor.
Ajuste de la vigilancia de Link down, ajustes de medios y longitud de línea/tiempo de propagación de señal. El puerto
local compara en tiempo de ejecución los ajustes propios con los ajustes del puerto del interlocutor.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Opción "Activar autonegotiation"
El ajuste de autonegotiation sólo es modificable si se ha seleccionado un medio específico
(p. ej. TP 100 Mbit/s dúplex). De las propiedades del módulo depende que un medio específico
se pueda ajustar o no.
Si se ha desactivado la autonegotiation, se fuerza el ajuste fijo del puerto, de manera similar
a como se requiere p. ej. en caso de arranque preferente del dispositivo IO.
Hay que procurar realizar los mismos ajustes en el puerto interlocutor, porque en esta opción
los parámetros operativos de la red conectada no se reconocen y, en consecuencia, la
velocidad de transferencia de datos y el modo de transferencia no se pueden ajustar
óptimamente.
Nota
Cuando hay un puerto local interconectado, STEP 7 realiza el ajuste del puerto interlocutor
siempre y cuando soporte este ajuste. Si el puerto interlocutor no soporta este ajuste, se
genera un mensaje de error.

Opciones de puerto para el uso de la interfaz PROFINET GBIT
La interfaz PROFINET (X3) de la CPU 1518-4 PN/DP soporta una velocidad de transferencia
máxima de 1000 Mbits/s (GBIT).
Para alcanzar dicha velocidad de transferencia son necesarios los requisitos siguientes:
● Firmware de CPU versión V1.7 o superior.
● Las estaciones de la misma subred PROFINET también deben soportar la velocidad de
transferencia de 1000 Mbits/s.
● La infraestructura de la red (cable de red y cajas) debe corresponderse con la categoría
CAT 5e o superior.
● Las opciones de puertos de la interfaz PROFINET X3 se configuran de la manera siguiente:
– "Velocidad de transferencia / dúplex": Automático
– "Autonegotiation": Activado

Consulte también
Normas de cableado con autonegotiation desactivada (Página 3158)
Limitaciones en el puerto (Página 3159)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3157

Configuración de dispositivos y redes
1.4 Crear configuraciones

Normas de cableado con autonegotiation desactivada
Requisitos
Se han realizado los ajustes siguientes p. ej. para acelerar el tiempo de arranque del
dispositivo IO para el puerto correspondiente:
● Velocidad de transferencia fija
● Autonegotiation incl. autocrossing desactivada
De ese modo, durante el arranque se prescinde del tiempo de negociación de la velocidad de
transferencia.
Si ha desactivado Autonegotiation, debe observar las normas de cableado.

Normas de cableado con autonegotiation desactivada
Los dispositivos PROFINET tienen los dos tipos de puertos siguientes:
Tipo de puerto

Dispositivos PROFINET

Observación

Switchport con asignación de pi‐ En dispositivos IO: puerto 2
Asignación de pines cruzada sig‐
nes cruzada
En CPUs S7 con 2 puertos: puer‐ nifica que la asignación de pines
de los puertos para envío y re‐
to 1 y puerto 2
cepción se intercambian interna‐
mente entre los dispositivos
PROFINET afectados.
Puerto de terminal con asigna‐
ción de pines no cruzada

-

En dispositivos IO: puerto 1
En CPUs S7 con un puerto: puer‐
to 1

Validez de las normas de cableado
Las normas de cableado descritas en el siguiente apartado son aplicables exclusivamente a
aquellos casos en los que se ha definido un ajuste de puerto fijo.

3158

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Normas para el cableado
Varios dispositivos IO pueden conectarse en línea con un cable de red (ambos conectores con
cableado uno a uno). Para ello se conecta el puerto 2 (P2) del dispositivo IO con el puerto 1
(P1) del siguiente dispositivo IO. En el gráfico siguiente se representa un ejemplo con dos
dispositivos IO.
6ZLWFKR
GLVSRVLWLYR352),1(7

3

'LVSRVLWLYR,2

3

3
&DEOH3DWFK

'LVSRVLWLYR,2

3

3

3

&DEOH3DWFK

3XHUWRGHVZLWFK
3XHUWRGHWHUPLQDO

Limitaciones en el puerto
Requisitos
Para poder trabajar con "boundaries" (limitaciones), el dispositivo correspondiente debe
soportar los ajustes de limitaciones. Si el dispositivo no soporta limitaciones para PROFINET,
los parámetros correspondientes están desactivados, como es el caso, p. ej., de la CPU 1215C
V3.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3159

Configuración de dispositivos y redes
1.4 Crear configuraciones

Activar Boundaries
Se entiende por limitaciones los límites para transferir determinados frames en Ethernet. Es
posible activar las siguientes limitaciones en un puerto:
● "Fin del registro de dispositivos accesibles"
No se transfieren los frames DCP para el registro de dispositivos accesibles. Los
dispositivos que están detrás de este puerto ya no se visualizan en "Dispositivos
accesibles" del árbol del proyecto. La CPU ya no puede acceder a dichos dispositivos.
Para esta función, el dispositivo debe contar con más de un puerto.
● "Fin de la detección de topología"
No se transfieren los frames LLDP (Link Layer Discovery Protocol) para la detección de
topología.
● "Fin del dominio Sync"
No se transfieren frames Sync que se transmiten dentro de un dominio Sync para
sincronizar los dispositivos.
Si se opera p. ej. un dispositivo PROFINET con más de dos puertos en un anillo, es preciso
impedir la inserción de frames Sync en el anillo activando una limitación Sync (en los
puertos no incluidos en el anillo).
Para esta función, el dispositivo debe contar con más de un puerto.
Otro ejemplo: si se quieren utilizar varios dominios Sync, hay que configurar una limitación
de dominio Sync para el puerto que está conectado con un dispositivo PROFINET del otro
dominio Sync.

Restricciones
Hay que tener en cuenta las siguientes restricciones:
● Las casillas de verificación solo están operativas si el puerto soporta la correspondiente
característica.
● Si se ha determinado un puerto interlocutor para el puerto, las siguientes casillas de
verificación no están operativas:
– "Fin del registro de dispositivos accesibles"
– "Fin de la detección de topología"

Activar la sustitución de dispositivo sin medio de almacenamiento extraíble
Sustitución de un dispositivo IO sin medio de almacenamiento extraíble
A menudo es necesario sustituir dispositivos IO en los sistemas de automatización.
Habitualmente, se asigna un nombre de dispositivo a los dispositivos IO al insertar el medio de
almacenamiento extraíble o la programadora. El controlador IO identifica el dispositivo IO
mediante estos nombres de dispositivos.
En determinadas condiciones, los dispositivos IO también pueden recibir su nombre sin tener
que insertar un medio de almacenamiento extraíble (p. ej. Memory Card) o sin una PG. Para
ello, el controlador IO analiza las relaciones de vecindad entre los diferentes dispositivos IO y
el controlador IO mediante mecanismos Ethernet (protocolo LLDP; Link Layer Discovery
Protocol). A partir de estas relaciones de vecindad, el controlador IO reconoce qué dispositivo
IO se ha sustituido y le asigna el nombre de dispositivo configurado.

3160

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● Ya se ha configurado la interconexión de puertos.
● Los dispositivos IO que intervienen en el sistema de automatización tienen que permitir la
sustitución del dispositivo sin un medio de almacenamiento extraíble (protocolo LLDP).
Nota
Para sustituir los dispositivos utilice solo dispositivos IO nuevos o, antes de la puesta en
marcha, ponga los dispositivos IO parametrizados en el estado de suministro.
En el caso de las CPU S7-1500 a partir de la versión de firmware V1.5, no es necesario volver
a poner los dispositivos IO parametrizados al estado de suministro. La condición es que la
opción "Permitir sobrescribir el nombre de dispositivo de todos los dispositivos IO asignados"
esté activada en el controlador IO (área "Opciones avanzadas > Opciones de interfaz" de las
propiedades de la interfaz PROFINET).

Procedimiento
Con el fin de activar la sustitución de un dispositivo IO sin el medio de almacenamiento
extraíble, proceda del siguiente modo:
1. Seleccione en la vista de dispositivos o redes la interfaz PROFINET del controlador IO
correspondiente.
2. Active en las propiedades de la interfaz en "Configuración avanzada > Opciones de
interfaz" la casilla de verificación "Permitir sustitución de dispositivo sin medio de
almacenamiento extraíble".
La opción "Permitir sustitución de dispositivo sin medio de almacenamiento extraíble" permite
una puesta en servicio automática, es decir, el sistema IO puede ponerse en servicio con los
dispositivos IO sin asignarles previamente un nombre de dispositivo.

Dispositivos IO sin funcionalidad correspondiente
Si algunos dispositivos IO del sistema de automatización no son compatibles con la sustitución
del dispositivo sin medio de almacenamiento extraíble, el dispositivo IO emite el aviso
correspondiente. Sin embargo, es posible utilizar la funcionalidad, siempre y cuando se
cumplan todas las condiciones siguientes:
● En el controlador IO superior está activada la función "Sustitución de dispositivos sin medio
de almacenamiento extraíble".
● El dispositivo IO soporta el protocolo LLDP.
● Como mínimo un "vecino" del dispositivo IO soporta
– como controlador IO la función "Sustitución de dispositivos sin medio de
almacenamiento extraíble" o
– como dispositivo IO también el protocolo LLDP.
Si se configura el entorno del dispositivo IO de modo que para la "Sustitución de dispositivos
sin medio de almacenamiento extraíble" se cumplan las condiciones anteriormente descritas,
es posible utilizar la función, aun si el dispositivo IO no soporta directamente la funcionalidad.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3161

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
Asignar el nombre de dispositivo y la dirección IP (Página 3121)
Componentes con la función de sustitución de dispositivo sin medio de almacenamiento
extraíble (http://support.automation.siemens.com/WW/view/es/36752540)

Conexión de un esclavo DP a un sistema PROFINET IO a través de un IE/PB Link
Requisitos
● STEP 7 V12 o superior
● CPU S7-1500 versión de firmware 1.7 o superior
● CPU ET 200SP versión de firmware 1.7 o superior
● Controlador por software S7-1500
● CPU S7-300/400

Procedimiento para conectar un esclavo DP a través de IE/PB Link
Para conectar un esclavo DP a un sistema PROFINET IO en STEP 7 a través de un IE/PB Link,
proceda del siguiente modo:
1. Arrastre con Drag & Drop una CPU PROFINET (p. ej. 1513-1 PN) desde el catálogo de
hardware hasta la vista de redes de STEP 7.
2. Con Drag & Drop, arrastre un IE/PB Link PN IO desde el catálogo de hardware hasta la vista
de redes de STEP 7. Encontrará el IE/PB Link PN IO en Componentes de red > Gateways >
IE/PB Link PN IO.
3. Asigne el IE/PB Link PN IO a la CPU.
4. Arrastre con Drag & Drop un módulo de interfaz PROFIBUS (p. ej. IM155-6 DP HF) desde
el catálogo de hardware hasta la vista de redes.
5. Asigne el módulo de interfaz al IE/PB Link.

6. Seleccione el IE/PB Link PN IO en la vista de redes de STEP 7.

3162

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
7. En el área "Transiciones de red" de la ventana de inspección, seleccione la opción
"Transición de red como proxy PROFINET IO".

8. En el área "Número de dispositivo PROFINET" es posible asignar un número de dispositivo
PROFINET al esclavo DP.
Si se ha activado la casilla de verificación "Número de dispositivo = Dirección PB" (ajuste
predeterminado), STEP 7 asigna automáticamente el número de dispositivo de acuerdo
con la dirección PROFIBUS del esclavo. Además, el usuario ya no tiene que corregir el
número de dispositivo cuando cambia la dirección PROFIBUS.

Consulte también
Configuración con IE/PB-Link PN IO (Página 3116)

Recomendaciones de instalación para optimizar PROFINET
Optimizar PROFINET con RT
PROFINET permite una comunicación de alto rendimiento en todos los niveles.
En la siguiente figura se observa un ejemplo de una topología PROFINET optimizada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3163

Configuración de dispositivos y redes
1.4 Crear configuraciones
'LUHFFLµQGHIDEULFDFLµQ
3*3&

3*3&

3*3&

6ZLWFK

(WKHUQHWGHRILFLQD

+0,

6

6

352),%86

(76

352),1(7,QGXVWULDO(WKHUQHW

(763

(703

(763

(703

(7SUR

Al diseñar la topología de red PN, asegúrese de distribuir las diferentes aplicaciones de
automatización en ramas propias de la red, a fin de disponer de suficiente reserva de ancho de
banda para futuras ampliaciones.
● Cuando se integran dispositivos Ethernet estándar en la topología de red o se utiliza la
comunicación Ethernet estándar, se debe tener en cuenta la carga de la red debida a
Ethernet estándar y, si es necesario, modificar la topología de red (ancho de banda máx.
100 Mbits/s).
● Para la comunicación con redes superiores con una elevada cantidad de datos, a ser
posible utilice vías directas a la infraestructura de red superior.
Tenga en cuenta la directiva de instalación de la organización de usuarios de PROFIBUS.

3164

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Instalar PROFINET con IRT
Tenga en cuenta las reglas siguientes para instalar y utilizar un sistema PROFINET IO en el
modo IRT. Estas reglas sirven para garantizar el funcionamiento correcto del sistema
PROFINET IO.
● Si se utiliza IRT, es necesario configurar la topología. De este modo se calculan con
exactitud el tiempo de actualización, el ancho de banda y otros parámetros.
● Si quiere usar varios dominios Sync, configure un límite Sync para el puerto que está
conectado a un dispositivo PROFINET de otro dominio Sync.
● En un dominio Sync no se puede configurar más de un maestro Sync en cada caso.
● Un sistema PROFINET IO no puede pertenecer a más de un dominio Sync.
● Si configura dispositivos PROFINET en un dominio Sync y desea sincronizarlos con IRT,
los dispositivos PROFINET en cuestión deben ser compatibles con la comunicación IRT.
● Si es posible, utilice el mismo dispositivo PROFINET como controlador PROFINET IO y
maestro Sync.
● Si se sincroniza solo una parte de los dispositivos PROFINET de un sistema PROFINET IO,
tenga en cuenta lo siguiente: Asigne a los dispositivos PROFINET que no participen en la
comunicación IRT la clase RT "RT" y la función de sincronización "no sincronizado" en el
dominio Sync.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3165

Configuración de dispositivos y redes
1.4 Crear configuraciones

Aplicaciones para CPU con varias interfaces PROFINET IO
● Acoplamiento de máquinas: la configuración incluye máquinas situadas en líneas IO
separadas. A través de las interfaces PROFINET IO X2 es posible establecer una
comunicación en tiempo real entre las CPU. Para ello, utilice las funcionalidades de I-device
o de shared I-device.
La figura siguiente muestra un ejemplo de configuración en el que 2 máquinas están
acopladas en una relación de I-device a través de la interfaz X2.
6ZLWFK

;FRPR
FRQWURODGRU,2

;FRPR
GLVSRVLWLYR,2

$FRSODPLHQWR

0£TXLQD

0£TXLQD

● Reparto de las tareas de automatización:
– Para tareas de automatización con exigentes requisitos de rendimiento y determinística,
utilice PROFINET con IRT a través de la interfaz X1.
– Para otras tareas que se puedan ejecutar con RT, utilice la interfaz X2.
Si en una de las CPU siguientes se utiliza la interfaz X2 como interfaz PROFINET IO, puede
haber repercusiones sobre el rendimiento:
● CPU 1515(F)‑2 PN
● CPU 1515T-2 PN
● CPU 1516(F)-3 PN/DP
● CPU 1516(F)pro-2 PN
Encontrará más información en el manual de funciones Tiempos de ciclo y tiempos de
reacción.

Solapamiento topológico de sistemas IO en aplicaciones multicontrolador
En una configuración con varios controladores IO, las cargas de red de todos los sistemas
PROFINET IO involucrados se suman a rutas de uso compartido.

3166

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para evitar cargas de comunicación altas en aplicaciones multicontrolador, atienda las
recomendaciones siguientes:
● Evite las rutas de uso compartido por varios sistemas IO.
La figura siguiente muestra una configuración con dos sistemas PROFINET IO que utilizan
rutas comunes.
&RQWURODGRU,2

&RQWURODGRU,2

'LVSRVLWLYR,2

'LVSRVLWLYR,2



①

Ruta de uso compartido

En la figura siguiente, ninguno de los dos sistemas PROFINET IO comparte rutas.
'LVSRVLWLYR,2

&RQWURODGRU,2

&RQWURODGRU,2

'LVSRVLWLYR,2

● Si no es posible la separación: Incremente el tiempo de actualización de los dispositivos IO
involucrados.

Directivas de instalación de la organización de usuarios de PROFIBUS
Encontrará la directiva de instalación en Internet.

Limitación del flujo de datos en la red
Limitar el flujo de datos en la red para interfaces PROFINET
La función "Limitar el flujo de datos en la red" limita a un valor máximo la carga de red de la
comunicación Ethernet estándar que fluye de la interfaz a la red. La comunicación cíclica en
tiempo real (RT/IRT) no se ve afectada.
En un sistema PROFINET IO, una comunicación Ethernet estándar puede provocar cargas de
red críticas. Todos los dispositivos del sistema PROFINET IO deberían soportar la "Limitación
del flujo de datos en la red".
Si utiliza dispositivos que introducen una gran cantidad de comunicación Ethernet estándar en
el sistema PROFINET IO, deberá ajustar la topología en caso necesario.
En función de las interfaces, es posible activar o desactivar la función "Limitar el flujo de datos
en la red". Si la interfaz X1 de una CPU S7-1500 se utiliza como controlador IO o como I-device,
la función "Limitar el flujo de datos en la red" siempre está activada. Ejemplo: Si la interfaz X1
de una CPU S7-1500 no se utiliza como controlador IO o como I-device, dicha función puede
activarse o desactivarse.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3167

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ventajas de la limitación del flujo de datos
● Dividir el ancho de banda para la comunicación Ethernet estándar entre los dispositivos:
en las redes PROFINET, la comunicación en tiempo real cíclica y la comunicación Ethernet
estándar comparten la misma red. De ahí que para la comunicación Ethernet estándar
quede únicamente un ancho de banda limitado. La limitación del flujo de datos garantiza
que el ancho de banda restante para la comunicación Ethernet estándar no lo ocupe un
único dispositivo, sino que se pueda repartir entre varios dispositivos.
● Filtrar picos en el flujo de datos:
la limitación de la entrada de datos filtra picos de carga de la comunicación Ethernet
estándar (p. ej, de Open User Communication, accesos del servidor web).
● Limitar los problemas del flujo de datos:
cuando las aplicaciones de un dispositivo generan un exceso de datos, no se reenvían a la
red PROFINET. Las repercusiones negativas (p. ej., pérdida de datos, interrupción de la
comunicación) quedan restringidas al dispositivo y sus interlocutores. Los demás
dispositivos no se ven afectados.

Ajustar la limitación del flujo de datos en la red para una CPU
Para ajustar la limitación del flujo de datos en la red ("Limitación de la entrada de datos en la
red"), proceda del siguiente modo:
1. Seleccione la interfaz de la CPU en la vista de redes de STEP 7.
2. En la ventana de inspección, desplácese hasta "Propiedades" > "General" > "Opciones
avanzadas" > "Opciones de interfaz".
3. Active o desactive la casilla de verificación "Limitar el flujo de datos en la red".

1.4.10.3

Uso de archivos GSD

Archivos GSD para dispositivos IO
Información básica sobre archivos GSD de dispositivos IO
Las propiedades de los dispositivos PROFINET IO no están guardadas en un archivo de texto
basado en palabras clave (como en los esclavos PROFIBUS DP), sino en un archivo XML cuya
estructura y cuyas reglas son determinadas por un esquema GSDML.

3168

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
El lenguaje para la descripción de los archivos GSD es GSDML (Generic Station Description
Markup Language). Se define con el esquema GSDML. Un esquema GSDML contiene reglas
de validez que permiten p. ej. comprobar la sintaxis de un archivo GSD. Los fabricantes de
dispositivos IO de PROFIBUS International compran esquemas GSDML (en forma de archivos
de esquema).
Las ampliaciones de funciones en el ámbito de PROFINET IO repercuten en las
especificaciones GSDML y el correspondiente esquema. La ampliación de funciones genera
una nueva versión de la especificación y del esquema.

Nombres de los archivos GSD para dispositivos IO
El nombre de un archivo GSD para dispositivos IO puede ser, por ejemplo:
"GSDML-V1.0-Siemens-ET200S-20030616.xml"
Componente del nombre

Explicación

GSDML

Cadena de caracteres con la que empieza cada
archivo GSD para dispositivos IO

V1.0

Versión del esquema GSDML

Siemens

Fabricante

ET200S

Nombre del dispositivo

20030616

Identificación de la versión (fecha)

.xml

Extensión del archivo

Versionado de los archivos GSD para dispositivos IO
La información de versión de los archivos GSD para dispositivos PROFINET IO consta de dos
partes:
● Versión del esquema GSDML: De este modo se establece qué lenguaje utiliza un archivo
GSD.
● Versión en forma de fecha: La edición de los archivos GSD se incrementa cuando p. ej. se
ha subsanado un error o se ha introducido una ampliación de funciones.
Las ampliaciones de funciones pueden requerir una nueva versión del esquema GSDML. Es
posible que una versión nueva del esquema GSDML sólo se soporte de manera limitada.

Instalar archivo GSD
Introducción
En un archivo GSD (archivo de descripción del dispositivo) se encuentran almacenadas todas
las propiedades de un dispositivo IO. Si desea configurar un dispositivo IO que no aparece en
el catálogo de hardware, es necesario instalar el archivo GSD suministrado por el fabricante.
Los dispositivos IO instalados a partir de archivos GSD se muestran en el catálogo de
hardware y pueden seleccionarse y configurarse.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3169

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● El editor de hardware y redes está cerrado.
● Se tiene acceso a los archivos GSD necesarios en un directorio del disco duro.

Procedimiento
Para instalar un archivo GSD, proceda del siguiente modo:
1. Elija el comando "Administrar archivos de descripción de dispositivos" del menú
"Opciones".
2. En la ficha "GSD instalados" seleccione el directorio en el que se encuentran los archivos
GSD.
3. Seleccione uno o varios de los archivos GSD que aparecen en la lista.
4. Haga clic en el botón "Instalar". Ahora se instalan los archivos GSD seleccionados.
5. Para crear un archivo de informe de la instalación, haga clic en el botón "Guardar archivo
de informe".
Los posibles problemas que puedan aparecer durante la instalación pueden repasarse con
el archivo de informe.
6. Haga clic en "Cerrar". Recibirá una notificación informándole de que los dispositivos IO de
los archivos GSD instalados se han incorporado al catálogo de hardware. Esta operación
puede requerir unos segundos.
Así pues, con la instalación de un archivo GSD se ha agregado al catálogo de hardware el
dispositivo IO descrito en el mismo.

Resultado
Los dispositivos IO nuevos instalados con los archivos GSD se encuentran en "Otros
dispositivos de campo > PROFINET IO" del catálogo de hardware.
Los archivos GSD se guardan siempre con el proyecto, es decir, toda la información relevante
para la representación del dispositivo (incluidos los iconos) están disponibles también en el
proyecto guardado.

Consulte también
Resumen del editor de hardware y redes (Página 9)

Borrar archivo GSD
Introducción
Es posible borrar esclavos DP instalados mediante archivos GSD. Una vez borrados, ya no se
mostrarán en el catálogo de hardware.

3170

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● El editor de hardware y redes está cerrado.
● Hay dispositivos IO instalados mediante archivos GSD en el catálogo de hardware, en
"Otros dispositivos de campo > PROFINET".

Procedimiento
Para borrar un archivo GSD, proceda del siguiente modo:
1. Elija el comando "Administrar archivos de descripción de dispositivos" del menú
"Opciones".
2. En la ficha "GSD instalados" seleccione el directorio en el que se encuentra el archivo GSD.
3. De los archivos GSD que se muestran en la lista, seleccione el que debe borrarse.
4. Haga clic en el botón "Borrar".
El archivo GSD seleccionado se borra, y el dispositivo IO ya no se encuentra en el catálogo de
hardware.

Buscar archivos GSD no utilizados
Introducción
Si se agrega un componente de hardware basado en GSD a la configuración hardware, se
agregarán también diferentes archivos GSD a los datos de proyecto. Al borrar el componente
de hardware basado en GSD de la configuración, los archivos GSD permanecen en la base de
datos del proyecto. Estos archivos GSD ya no se necesitan en el proyecto, siempre que el
correspondiente componente de hardware basado en GSD no vuelva a utilizarse en la
configuración hardware. Los archivos que ya no se necesitan en el proyecto pueden buscarse
y borrarse.

Requisitos
● Debe haber un proyecto abierto.
● El proyecto no puede estar online.
● El proyecto no puede estar protegido contra escritura.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3171

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento
Para borrar archivos GSD no utilizados, proceda del siguiente modo:
1. Elija el comando "Administrar archivos de descripción de dispositivos" del menú
"Opciones".
2. Haga clic en el botón "Buscar GSD no utilizados" de la ficha "GSD del proyecto".
Nota
Los archivos GSD no utilizados solo están disponibles si se ha agregado a la configuración
como mínimo un componente de hardware basado en GSD y se ha eliminado a
continuación. Los archivos GSD no utilizados de las librerías del proyecto también se tienen
en cuenta en la búsqueda. Los componentes de hardware basados en GSD que se siguen
utilizando en la configuración no cuentan como no utilizados.
Los componentes de hardware basados en GSD que están instalados e incluidos en el
catálogo de hardware, pero que hasta el momento no se han utilizado en la configuración
hardware, no han depositado ningún archivo GSD no utilizado en el proyecto.
3. Si se encuentran archivos GSD innecesarios en los datos del proyecto, pueden borrarse.
Haga clic para ello en el botón "Borrar".
Los archivos GSD innecesarios se borran de los datos del proyecto. El componente de
hardware basado en GSD sigue estando disponible en el catálogo de hardware y puede volver
a agregarse a la configuración en caso necesario. De hacerlo, los archivos GSD necesarios
volverían a copiarse en los datos del proyecto.
Nota
Si un componente de hardware basado en GSD se borra con "Opciones > Administrar archivos
de descripción de dispositivos > GSD instalados", se borrará del catálogo de hardware. Sin
embargo, es posible que los archivos GSD no utilizados de este componente de hardware
sigan formando parte de los datos del proyecto y pueden borrarse utilizando la función para
buscar los archivos GSD no utilizados.
ATENCIÓN
Acciones que no pueden deshacerse
Si se borran los archivos GSD que no se utilizan, se borrará también la pila de acciones que
pueden deshacerse. En este caso, ya no será posible deshacer la acción de borrar archivos
GSD no utilizados ni tampoco todas las acciones anteriores.

3172

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Cambiar la versión de un archivo GSD
Cambiar la versión de un archivo GSD
La versión del archivo GSD para dispositivos IO se puede cambiar:
● Solo para el dispositivo IO actual
● Para todos los dispositivos IO apropiados del sistema IO
● Para todos los dispositivos IO apropiados de todo el proyecto
Primero se muestran todos los archivos GSD disponibles para el dispositivo IO actual. Los
archivos GSD visualizados se distinguen solo por la versión. El archivo GSD utilizado
actualmente está seleccionado.

Requisitos
● Los datos E/S son iguales para todos los dispositivos IO en los que debe modificarse la
versión.
● La referencia no ha cambiado.
● El número de submódulos es el mismo.
● Los datos de parametrización no han cambiado.
● En los slots no debe haber ningún módulo o submódulo que no esté aceptado por el nuevo
archivo GSD.

Procedimiento
Para modificar la versión de uno o varios dispositivos IO, proceda del siguiente modo:
1. Seleccione el dispositivo IO para cuyo archivo GSD desee modificar la versión.
2. Haga clic en el botón "Modificar versión" de "General > Información del catálogo" en las
propiedades del dispositivo IO.
Se abre el cuadro de diálogo "Modificar versión".
3. Seleccione la revisión GSD que quiera utilizar en la tabla "Versiones disponibles".
4. Elija en "Utilizar la versión marcada para" los dispositivos cuya versión sea necesario
cambiar.
– Solo para el dispositivo IO actual
– Para todos los dispositivos IO apropiados del sistema IO
– Para todos los dispositivos IO apropiados del proyecto
5. Haga clic en el botón "Aplicar".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3173

Configuración de dispositivos y redes
1.4 Crear configuraciones

1.4.10.4

Configuraciones especiales PROFINET

Particularidades con S7-300/400/1500 y estaciones PC
Asignaciones de direcciones y nombres para dispositivos PROFINET
En este capítulo se explican las convenciones de direcciones y nombres que se aplican a los
dispositivos PROFINET.

Direcciones IP
Todos los dispositivos PROFINET operan con el protocolo TCP/IP y por ello precisan una
dirección IP para funcionar con Ethernet.
Las direcciones IP se establecen en las propiedades de los módulos. Si la red forma parte de
una red corporativa Ethernet existente, solicite estos datos al administrador de red.
Las direcciones IP de los dispositivos IO se asignan automáticamente y por lo general se
asignan a los dispositivos IO durante el arranque de la CPU. Las direcciones IP de los
dispositivos IO siempre tienen la misma máscara de subred que el controlador IO, y se asignan
en orden creciente empezando por la dirección IP del controlador IO.

Nombre del dispositivo
Para que sea posible acceder a un dispositivo IO desde un controlador IO, es necesario que
el dispositivo tenga nombre. En PROFINET se ha elegido este procedimiento porque es más
sencillo manejar nombres que direcciones IP complejas.
El nombre del dispositivo se deriva automáticamente del nombre configurado del dispositivo
(CPU, CP o IM):
● El nombre del dispositivo PROFINET se compone del nombre del dispositivo (p. ej. de la
CPU), del nombre de la interfaz (sólo si hay varias interfaces PROFINET) y, opcionalmente,
del nombre del sistema IO:
<nombre de la CPU>.<nombre de la interfaz>.<nombre del sistema IO>
Este nombre no se puede modificar directamente. El nombre de dispositivo PROFINET se
modifica indirectamente, cambiando el nombre de la CPU, del CP o del IM correspondiente
en las propiedades generales del módulo. El nombre de dispositivo PROFINET se visualiza
también p. ej. en la lista de los dispositivos accesibles. Si desea ajustar el nombre de
dispositivo PROFINET independientemente del nombre del módulo, debe desactivar la
opción "Generar automáticamente nombre de dispositivo PROFINET".
● Se genera un "nombre convertido" a partir del nombre de dispositivo PROFINET. Se trata
del nombre de dispositivo que se carga realmente en el dispositivo.
El nombre del dispositivo PROFINET se convierte únicamente si no cumple con las
exigencias de la IEC 61158-6-10. Este nombre tampoco se puede modificar directamente.

Número de dispositivo
Además del nombre de dispositivo, al insertar un dispositivo IO también se asigna
automáticamente un número de dispositivo que se puede cambiar.

3174

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Mediante este número de dispositivo se puede identificar un dispositivo IO en el programa de
usuario, p. ej. mediante la instrucción "LOG_GEO". En el programa de usuario el nombre del
dispositivo permanece oculto, a diferencia de lo que ocurre con el número de dispositivo.

Número de dispositivos en una subred PROFINET
En una subred PROFINET se vigila el número máximo permitido de dispositivos durante la
configuración.

Información importante sobre el tiempo de ciclo de emisión
Tiempo de ciclo de emisión: intervalo de actualización más breve posible
El tiempo de ciclo de emisión indica el periodo entre dos ciclos de comunicación consecutivos.
Es el intervalo de emisión más pequeño posible para el intercambio de datos. Los tiempos de
actualización calculados son un múltiplo del tiempo de ciclo de emisión.

Requisitos para modificar el tiempo de ciclo de emisión
En los dispositivos no sincronizados o cuando el dispositivo es un controlador IO como
maestro Sync, el tiempo de ciclo de emisión se ajusta en el dispositivo. En los dispositivos
sincronizados (maestro Sync, esclavo Sync), el tiempo de ciclo de emisión se ajusta en el
dominio Sync.
El tiempo de ciclo de emisión no se puede modificar en el dispositivo si este no es un
controlador IO como maestro Sync y en el sistema IO hay como mínimo un dispositivo que es
esclavo Sync o maestro Sync. En este caso, solo se muestra el tiempo de ciclo de emisión que
se ha seleccionado en las propiedades del dominio de sincronización correspondiente. Para
modificarlo tiene que llamar a las propiedades del dominio Sync correspondiente (botón
"Configuración del dominio").
Es posible modificar el tiempo de ciclo de emisión en el dispositivo si ninguno de los
dispositivos del sistema IO está sincronizado o si el dispositivo es un controlador IO como
maestro Sync. Puede consultar los tiempos de actualización resultantes de los diferentes
dispositivos IO en la tabla de comunicación IO o en las propiedades de los diferentes
dispositivos IO.

Influencia del tiempo de ciclo de emisión en el ancho de banda máximo posible para datos IO cíclicos
En la tabla siguiente se muestra cómo influye el tiempo de ciclo de emisión en el ancho de
banda máximo disponible para los datos IO cíclicos:
Tiempo de ciclo de emisión

Ancho de banda máximo para datos IO cíclicos

250 µs – 468,75 µs

<< 125 µs

500 µs – 968,75 µs

= tiempo de ciclo de emisión / 2

1 – 4 ms

= 500 µs

El tiempo de ciclo de emisión influye en el tiempo de actualización en dispositivos IO que tienen
activadas las opciones "Automático" y "Ajustable" (con la opción "Adaptar el tiempo de
actualización si se modifica el tiempo de ciclo de emisión" activada).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3175

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los dispositivos IO que tienen activada la opción "Ajustar factor" pueden originar
incoherencias en la configuración. En caso necesario tiene que adaptar posteriormente el
tiempo de actualización de estos dispositivos IO.

Ajustar tiempo de ciclo de emisión
Requisitos para modificar el tiempo de ciclo de emisión en el dispositivo PROFINET
El dispositivo PROFINET debe ser un controlador IO como maestro Sync o no puede estar
configurado ningún IRT (Isochronous Realtime) en el sistema IO.
Si el dispositivo PROFINET no es un controlador IO como maestro Sync, para ajustar el tiempo
de ciclo de emisión deben cumplirse los requisitos siguientes:
● No debe haber configurado ningún dispositivo como esclavo Sync o maestro Sync en el
sistema IO.
● Ningún dispositivo del sistema IO debe estar sincronizado.
Si IRT está configurado con un controlador IO como maestro Sync, el tiempo de ciclo de
emisión puede ajustarse en el dispositivo o en el dominio Sync.

Procedimiento
Para ajustar el tiempo de ciclo de emisión en el dispositivo PROFINET, proceda del siguiente
modo:
1. Seleccione el controlador PROFINET IO en la vista de dispositivos o de redes.
2. Modifique el valor del intervalo de actualización más pequeño posible en las propiedades
de la interfaz PROFINET, en "Interfaz PROFINET > Opciones avanzadas > Configuración
en tiempo real > Comunicación IO > Tiempo de ciclo de emisión".
El tiempo de ciclo de emisión es válido para todos los dispositivos PROFINET del sistema IO.
Si se ajusta la función de sincronización a un valor distinto de "Sin sincronizar", también es
posible ajustar el tiempo de ciclo de emisión en el dominio Sync, es decir, de forma centralizada
en el sistema PROFINET IO:
1. Seleccione el sistema IO a través de la subred PROFINET.
2. En las propiedades del dominio Sync, modifique el valor del tiempo de ciclo de emisión en
"Administración de dominios > Dominios Sync > Dominio_Sync_1 > Tiempo de ciclo de
emisión".

Consulte también
Configurar PROFINET IO con IRT (Página 3184)

Ajuste de tiempos de ciclo de emisión impares
Las CPUs S7-1500 soportan tiempos de ciclo de emisión pares e impares.
Tiempos de ciclo de emisión pares: 0,25 ms, 0,5 ms, 1 ms, 2 ms, ...
Tiempos de ciclo de emisión impares: 0,375 ms, 0,75 ms, 1,125 ms, ...

3176

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para dispositivos IO que no soportan el tiempo de ciclo de emisión rápido de la CPU (es decir,
del controlador IO) o que no soportan tiempos de ciclo de emisión impares, la CPU "adapta" el
tiempo de ciclo de emisión de los dispositivos. P. ej., puede ocurrir que la CPU (controlador IO)
trabaje con un tiempo de ciclo de emisión de 875 μs, que otro dispositivo IO conectado trabaje
igualmente con 875 μs, y que otro lo haga con 2 ms.

Reglas
● La adaptación del tiempo de ciclo de emisión solo funciona con dispositivos IO no
sincronizados (clase RT: "RT").
● Para dispositivos IO sincronizados (clase RT: "IRT") se aplica un tiempo de ciclo de emisión
unificado que se configura en el dominio Sync. El tiempo de actualización corresponde en
este caso al del ciclo de emisión.
● Para dispositivos IO que tengan configurada la opción de tiempo de actualización
"Automático", STEP 7 configura un tiempo de actualización mínimo de 2 ms, es decir, con
esta opción no son posibles tiempos de actualización menores de 2 ms.

Ejemplo
Un sistema maestro PROFINET IO consta de los componentes siguientes:
● Controlador IO: CPU 1516-3 PN/DP (6ES7 516-3AN00-0AB0)
● Dispositivo IO 1: ET200MP (6ES7 155-5AA00-0AB0) con un módulo DI
● Dispositivo IO 2: ET200S (6ES7 151-3BA23-0AB0 V6.0) con un módulo DI
El dispositivo IO 2 no soporta el tiempo de ciclo de emisión impar (aquí: 0,875 ms).
1. Asigne los dispositivos IO al controlador IO.
2. Para el dispositivo IO 1 ajuste la función de sincronización "Esclavo Sync" (ventana de
inspección, área Interfaz PROFINET > Opciones avanzadas > Configuración en tiempo
real > Sincronización).
3. Para el controlador IO, configure de igual modo la función de sincronización "Maestro Sync".
4. Interconecte los puertos del controlador IO y del dispositivo IO 1 (p. ej. en la vista
topológica).
5. El dispositivo IO 2 permanece sin sincronizar; está configurada la opción de tiempo de
actualización "Automático".
6. En el dominio Sync (propiedades de la subred), configure el tiempo de ciclo de emisión de
0,875 ms. Todos los dispositivos del dominio Sync tendrán ese tiempo de ciclo de emisión
o ese tiempo de actualización.
El dispositivo IO 2 no sincronizado recibe automáticamente un tiempo de actualización de 2
ms.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3177

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración con un controlador IO externo
Configuración con un controlador IO externo
Los CP, que se pueden usar como controladores IO externos, soportan gran variedad de
posibilidades de comunicación y, como consecuencia, no están "predeterminados" para su
uso como controladores IO.
Si utiliza un controlador IO externo (p. ej., CP 443-1 Advanced), deberá agregar un sistema IO
después de enchufar el controlador IO.

Los dispositivos IO deseados se pueden arrastrar desde el catálogo de hardware y soltar en
este sistema PROFINET IO.

Configuración con la estación PC SIMATIC
Configuración con estaciones SIMATIC PC
Una "estación PC" es un PC con tarjetas de comunicación y componentes de software en una
solución de automatización con SIMATIC.
Gracias al uso de tarjetas de comunicación y componentes de software apropiados es posible
utilizar una estación PC como controlador PROFINET IO.
Las aplicaciones PC en la estación PC tienen las siguientes posibilidades de acceso al
controlador PROFINET IO:
● Como cliente OPC a través del servidor OPC PROFINET IO
● Directamente mediante la interfaz de usuario PROFINET IO (interfaz de programación IOBase)

3178

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En un momento dado las aplicaciones PC sólo pueden usar una de estas posibilidades de
acceso (secuencia Open/Close).
Funciones

Servidor OPC

Interfaz de programación BaseRTE

Leer y escribir datos IO

Sí

Sí

Leer y escribir registros

Sí

Sí

Recibir y acusar alarmas

No

Sí

En la imagen siguiente se muestra una estación PC con los componentes descritos.
3&
$SOLFDFLµQ3&
FOLHQWH23&

$SOLFDFLµQ3&

$SOLFDFLµQ
6HUYLGRU23&
352),1(7,2

,QWHUID]GH
SURJUDPDFLµQ
,2%DVH

,QWHUID]GH
SURJUDPDFLµQ

,QGXVWULDO(WKHUQHW

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3179

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración en la vista de redes
En la imagen siguiente se muestra una estación PC con un servidor OPC y una aplicación PC.
A través de la interfaz Ethernet insertada de un CP 1612, la estación PC se transforma en un
controlador IO con dispositivos IO conectados. Además, se ha utilizado IE/PB-Link como
transición de red de PROFINET a PROFIBUS.

IO-Routing con CP 1604 / 1616 / 1626 y CP 1616 onboard
CP como router PROFINET IO: significado práctico
Es posible utilizar una estación PC con los CP 1604 / 1616 / 1626 como router PROFINET IO
utilizando el CP correspondiente al mismo tiempo como dispositivo PROFINET IO y como
controlador PROFINET IO. Con este routing IO se intercambian datos de proceso entre dos
sistemas PROFINET IO. Si existe la configuración correspondiente, el CP puede garantizar
que, por ejemplo, un elemento del plano de control tenga acceso a determinadas entradas o
salidas del nivel de proceso.
En una configuración típica, el CP desempeña al mismo tiempo las funciones siguientes:
● Dispositivo PROFINET IO para un controlador PROFINET IO superior del plano de control
● Controlador PROFINET IO con dispositivos IO conectados para el nivel de proceso inferior

Asignar área de transferencia de configuración "TM" (área de routing IO)
En el área "Modo de operación" de la configuración seleccione "Dispositivo IO".
Acto seguido aparece el área de parametrización adicional "Comunicación de dispositivo I",
que permite definir la configuración correspondiente para el routing IO. Una vez allí en la tabla
"Área de transferencia" se asignan las áreas de datos para el intercambio de datos al
controlador IO superior.

3180

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En el caso que nos ocupa existen las opciones siguientes en la columna "Tipo".
● CD: Dispositivo controlador
Seleccione esta opción para definir un área de transferencia entre el controlador IO y el
dispositivo IO. Observe en este punto el resto de informaciones que aparecen en la Ayuda
en pantalla del área "Configuración de PROFINET IO".
● TM: routing IO (mapeo del módulo de transferencia)
Seleccione esta opción para el caso de aplicación del router IO. En la ventana de
inspección dentro del área "Modo de operación / Comunicación de dispositivo I" aparece un
área de parametrización adicional con el nombre que se acaba de definir. En esta área de
parametrización puede verse la asignación de routing IO en la tabla de routing IO.
● F-PS: PROFIsafe
Seleccione esta opción para configurar un área de transferencia PROFIsafe. El área de
transferencia PROFIsafe es bidireccional y ocupa dos filas en la tabla de áreas de
transferencia. La longitud de las áreas de transferencia PROFIsafe está limitada a 8 bytes
de datos de usuario tanto para la entrada como para la salida.

Tabla de routing IO
Las áreas de routing IO representan en el sistema IO de orden superior los datos enrutados
entre los sistemas IO inferior y superior.
Registre las áreas de transferencia de los dispositivos IO del sistema IO inferior en la tabla de
routing IO, según corresponda.
La tabla contiene las columnas siguientes:
Parámetro

Significado

TM-Offset

Offset relativo al primer bit del área de routing IO.
Los datos tienen el formato <byte>.<bit>
Ejemplo: 0.5

Dispositivo/módulo (slot)

Datos del nombre del dispositivo PROFINET del dispositivo
IO junto con su módulo y slot.
El cuadro de diálogo muestra las áreas de transferencia de
los dispositivos IO configurados en el sistema IO inferior.

Tipo IO

Seleccione el tipo IO en la lista desplegable.
Esta selección solo es posible en un área de routing IO del
tipo "Input", y solo si como "Dispositivo/módulo (slot)" se ha
seleccionado un módulo mixto.
En ese caso se puede elegir si se leen las entradas (Input) o
se releen las salidas (Output).

Principio

Dirección inicial (Offset) en el área de datos del área de
transferencia del sistema IO inferior.
Los datos tienen el formato <byte>.<bit>
Ejemplo: 0.0

Fin

Dirección final (Offset) en el área de datos del área de trans‐
ferencia del sistema IO inferior.
Los datos tienen el formato <byte>.<bit>
Ejemplo: 8.0

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3181

Configuración de dispositivos y redes
1.4 Crear configuraciones

Diagnóstico de dispositivos PROFINET
Diagnóstico de dispositivos PROFINET
En PROFIBUS DP dispone de los mismos procedimientos de diagnóstico que con PROFINET
IO. El procedimiento es idéntico. El análisis de la información de diagnóstico mediante las
instrucciones avanzadas varía ligeramente para la periferia descentralizada en el programa de
usuario de una CPU S7-300/400.
En PROFINET IO se aplica una estructura de cualquier fabricante para los registros con
información sobre el diagnóstico. La información sobre el diagnóstico se genera sólo para los
canales averiados.
Mediante las listas de estado del sistema (SZL) y las instrucciones avanzadas "RALRM" y
"RDREC" puede consultar el estado de los sistemas PROFINET IO y la información sobre el
diagnóstico en un programa de usuario S7:
● Con el fin de obtener una visión general del estado del sistema PROFINET IO, lea p. ej. la
lista de estado del sistema 0x0X91 con "RDSYSST".
● Para leer los registros de diagnóstico (Records) directamente de un módulo averiado,
utilice la instrucción avanzada "RDREC" (leer registro). Podrá consultar toda la información
del error relacionada con el estado.
● Para leer registros de diagnóstico relacionados con un evento (es decir, causados por el OB
de error), use en el OB de error correspondiente la instrucción avanzada "RALRM" (leer la
información adicional de la alarma).
Las instrucciones avanzadas "RALRM" y "RDREC" se pueden utilizar también con PROFIBUS
DP.
Puede consultar aquí (http://support.automation.siemens.com/WW/view/es/19289930) la
información sobre las listas de estado del sistema y los registros de diagnóstico que se han
definido para PROFINET IO y la estructura de estos registros.

Configuración de la comunicación IRT
Introducción: Isochronous Realtime Ethernet
Introducción: Isochronous Realtime Ethernet
IRT es un procedimiento de transferencia en el que se sincronizan los dispositivos PROFINET
con extrema precisión.
Un maestro Sync marca el tiempo de ciclo con el que se sincronizan los esclavos Sync. Un
controlador IO y un dispositivo IO pueden tener la función del maestro Sync.
El maestro y los esclavos Sync siempre forman parte de un dominio Sync. En un dominio Sync
se reserva el ancho de banda para la comunicación IRT. Es posible la comunicación Real Time
y Non Real Time (comunicación TCP/IP) fuera del ancho de banda reservado.

3182

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Intervalos de tiempo del ciclo de comunicación
El ciclo de comunicación se divide en tres intervalos de tiempo que se muestran en el gráfico
siguiente:
,57

57

157

&LFOR
WLHPSRGHFLFORGHHPLVLµQ

&RPXQLFDFLµQ
&RPXQLFDFLµQ

'DWRV,57

,57

57

157

&LFOR
WLHPSRGHFLFORGHHPLVLµQ

&LFORQ

&RPXQLFDFLµQHQ
WLHPSRUHDO

&RPXQLFDFLµQ
HVW£QGDU

'DWRV57

'DWRV7&3,3

7LHPSRGH
FLFORGH
HPLVLµQ

● Datos IRT (comunicación sincronizada)
Puede reservar este intervalo de tiempo en función del tiempo de ciclo de emisión en pasos
determinados. En este intervalo de tiempo se transmiten únicamente datos IRT.
● Datos RT (comunicación Real Time)
En este intervalo de tiempo se transmiten los datos RT cíclicos. Los datos RT se priorizan
en comparación con los datos TCP/IP "normales". Los datos TCP/IP o los telegramas
Ethernet pueden tener una prioridad de 1 a 7. Los datos RT tienen la prioridad 6.
● Datos TCP/IP (comunicación estándar)
La comunicación estándar (TCP/IP, etc.) se transmite en el intervalo restante del ciclo de
comunicación.

Ámbitos de aplicación de IRT
PROFINET con IRT es especialmente adecuado para:
● Alto rendimiento y determinismo con grandes cantidades de datos en lo que respecta a la
comunicación de datos de usuario (datos productivos)
● Alto rendimiento también con muchos dispositivos con topología en línea en lo que respecta
a la comunicación de datos de usuario (datos productivos)
● Transmisión en paralelo de datos productivos y datos TCP/IP a través de una línea, incluso
si el número de datos es muy elevado, con garantía de la transmisión de los datos
productivos mediante reserva del ancho de banda para la transmisión.

Consulte también
Procedimiento básico para la configuración de IRT (Página 3184)
Configurar PROFINET IO con IRT (Página 3184)
Dominio Sync (Página 3186)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3183

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento básico para la configuración de IRT
Procedimiento para la configuración de IRT
Si quiere ampliar a IRT en una instalación con PROFINET IO, realice los tres pasos siguientes:
1. Configure los dispositivos PROFINET IO. Los dispositivos PROFINET deben ser
compatibles con IRT.
2. Defina el maestro Sync con el que deben sincronizarse los demás dispositivos. Tiene que
configurar un dominio Sync con un maestro Sync y, al menos, un esclavo Sync.
3. Cargue la configuración en los dispositivos que intervienen.

Crear una configuración de PROFINET IO para IRT
Para la configuración de IRT es necesario que exista una configuración PROFINET IO, es
decir, debe haber configuradas una o más estaciones con controlador IO y dispositivos IO.
En la Task Card "Información" puede ver qué componentes son adecuados para la
comunicación IRT, tan pronto como haya seleccionado los componentes correspondientes en
el catálogo de hardware.
Sólo se reúnen los requisitos para una comunicación IRT que funciona si se configura un
sistema PROFINET IO con componentes compatibles con IRT.

Configurar PROFINET IO con IRT
Introducción
Para aumentar la precisión del intercambio cíclico de datos con IRT en PROFINET IO,
configure en primer lugar los dispositivos PROFINET IO. Estos dispositivos PROFINET deben
ser compatibles con IRT. Seguidamente, defina el maestro Sync con el que deben
sincronizarse los demás dispositivos. Para ello se debe configurar un dominio Sync con un
maestro Sync y, al menos, un esclavo Sync.

Requisitos
● Se dispone de un sistema IO con un controlador IO y, por lo menos, un dispositivo IO.
● Todos los dispositivos que intervienen son compatibles con IRT.

Procedimiento
Con el fin de configurar IRT para un sistema IO existente, proceda del siguiente modo:
1. Seleccione la interfaz PROFINET del controlador IO.
2. En la ventana de inspección, vaya a "Opciones avanzadas > Configuración en tiempo real
> Sincronización"
3. En "Función de sincronización", asigne al controlador IO la función de maestro Sync.
4. A continuación, seleccione las interfaces PROFINET del dispositivo IO correspondiente.

3184

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
5. En la ventana de inspección, vaya a "Opciones avanzadas > Configuración en tiempo real
> Sincronización".
6. Una vez allí, active la clase RT "IRT". Seguidamente, y de manera automática, se asigna al
dispositivo IO la función de sincronización "Esclavo Sync".
7. El botón "Dominio Sync" permite comprobar y corregir la configuración en todo momento.
8. Interconecte los puertos entre los esclavos Sync y el maestro Sync.
O
1. En la vista de redes, resalte el sistema PROFINET IO.
2. Haga clic en el sistema PROFINET IO.
3. En la ventana de inspección, vaya al dispositivo del dominio Sync deseado.
4. Efectúe todos los ajustes necesarios directamente en las tablas:
– Seleccione un sistema IO.
– Ajuste la función de sincronización "Maestro Sync" en el controlador IO.
– En el dispositivo IO, cambie la clase RT a "IRT". Con ello se asigna automáticamente al
dispositivo IO la función de sincronización "Esclavo Sync".
5. Interconecte los puertos entre los esclavos Sync y el maestro Sync.
Ahora puede cargar la configuración con PROFINET IRT en los dispositivos que intervienen.
Nota
Asignación automática de un maestro Sync
También es posible configurar simplemente un I-Device o un dispositivo IO como esclavo Sync
cambiando la clase RT de RT a IRT. El controlador IO asignado al I-device o dispositivo IO se
configura automáticamente como maestro Sync.
Si ha configurado el controlador IO como esclavo Sync, este ajuste no se sobrescribirá. El
controlador IO no cambia automáticamente de esclavo Sync a maestro Sync.
Si se han asignado varios controladores IO al dispositivo IO como Shared Device, el
controlador IO se seleccionará automáticamente como maestro Sync que tiene asignada la
interfaz del dispositivo IO.
Nota
Conmutación entre RT e IRT
En sistemas IO de estructura jerárquica la comunicación IRT puede combinarse con la
comunicación RT, pero no pueden tener lugar en ambos sistemas IO al mismo tiempo: Si en
el I-device está activada la opción "Parametrización de la interfaz PN y sus puertos en el
controlador IO de nivel superior", el I-device puede utilizar la comunicación IRT en el
controlador IO de nivel superior. Si esta opción está desactivada , el sistema IO subordinado
puede utilizar la comunicación IRT, pero en el I-device no es posible cambiar entre RT e IRT.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3185

Configuración de dispositivos y redes
1.4 Crear configuraciones

Dominio Sync
Dominio Sync
Para la sincronización de dispositivos PROFINET IO, es necesario un dominio Sync. El
dominio Sync garantiza que todos los dispositivos que pertenecen a este dominio se
comuniquen con la misma base de tiempo.
Para la comunicación IRT se requiere un tiempo de ciclo de sincronización para todos los
dispositivos PROFINET en un dominio Sync para la distribución de una base de tiempo común.
Con esta sincronización básica se logra la ejecución simultánea del ciclo de transmisión de los
dispositivos PROFINET en un dominio Sync. El maestro Sync (generalmente, un controlador
IO) genera el tiempo de sincronización común y define la base de tiempo con la que se
sincronizan los demás esclavos Sync (generalmente, dispositivos IO).
Si falla el maestro Sync y no se ha configurado ningún maestro Sync redundante, la
comunicación de los dispositivos IRT retorna a calidad RT.

Procesos en segundo plano durante la configuración de un sistema IO
Si configura un controlador IO y lo conecta en red con una subred Ethernet, automáticamente
se asignará al dominio Sync predeterminado de la subred Ethernet. El dominio Sync
predeterminado siempre está disponible. El controlador IO funciona sin sincronizar.
Si asigna al sistema IO del controlador IO otro dispositivo IO, el dispositivo IO se asignará
automáticamente al dominio Sync del controlador IO.

Consulte también
Trabajar con dominios Sync (Página 3186)
Configuración del maestro Sync redundante (Página 3190)

Trabajar con dominios Sync
Trabajar con dominios Sync
Todos los componentes que forman parte de la comunicación IRT tienen que pertenecer a un
dominio Sync.
Un dominio Sync es un grupo de dispositivos PROFINET que se sincronizan con un tiempo de
ciclo común. Un dispositivo tiene la función del maestro Sync (generador de impulsos) y los
demás tienen la función de esclavos Sync.

Dominio Sync predeterminado
Si ha creado una subred Ethernet, se crea automáticamente un dominio Sync especial: el
dominio Sync predeterminado. Todos los dispositivos PROFINET que configura para la subred
Ethernet pertenecen de forma automática a este dominio Sync.
Las figuran siguientes explican esta relación:

3186

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones


(WKHUQHW

①

Dominio predeterminado; siempre disponible
&DW£ORJRGH
&DW£ORJR
%XVFDU!









,2


,2


,2


,2


(WKHUQHW

①
②

Dominio predeterminado; siempre disponible
Los sistemas PROFINET IO recién configurados se encuentran primeramente en el dominio predeterminado.

Editar las propiedades de los dominios Sync
Editar las propiedades de los dominios Sync
A continuación se explica cómo definir los nombres y el tiempo de ciclo de emisión de un
dominio Sync. Además puede aprender cómo se define un dominio Sync como dominio
predeterminado.

Requisitos
● En el proyecto se ha creado al menos un dispositivo IO.
● Ya existe al menos un dominio Sync.

Edición de un Dominio Sync
Para cambiar el nombre de un dominio Sync, adaptar el tiempo de ciclo de emisión o definirlo
como dominio predeterminado, proceda del siguiente modo:
1. Seleccione la subred Ethernet en la vista de redes en la que se ha creado el dominio Sync.
2. Abra las propiedades de la subred Ethernet.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3187

Configuración de dispositivos y redes
1.4 Crear configuraciones
3. Seleccione en la navegación local la entrada "Administración de dominios > Dominios Sync
> <Nombre del dominio Sync>".
4. Realice los cambios:
– Introduzca el nombre deseado del dominio Sync en el campo de entrada "Nombre del
dominio Sync".
– Seleccione el tiempo de ciclo de emisión en la lista desplegable "Tiempo de ciclo de
emisión".
– Active la casilla de verificación "Dominio predeterminado" si quiere definir un dominio
Sync como el dominio predeterminado.

Anchos de banda para las diferentes clases RT
Junto a la configuración de nombre y tiempo de ciclo de emisión, se muestran también los
anchos de banda disponibles y los anchos de banda calculados para las diferentes clases RT
dentro de un dominio Sync.
Para ello, seleccione la sección "Detalles" en la navegación local dentro del nombre del
dominio Sync.

Consulte también
Uso del ancho de banda para controladores IO sincronizados (Página 3188)

Uso del ancho de banda para controladores IO sincronizados
Uso del ancho de banda
Aquí se ajusta el tiempo de emisión que corresponde a los datos IO cíclicos (datos en tiempo
real por RT) y a los demás datos (datos por TCP/IP o UDP/IP, datos RT).
Con ello se determina el uso del ancho de banda (capacidad de transmisión).
Datos IO cíclicos por IRT
Los datos IO cíclicos se envían por IRT (Isochronous real time).
IRT dispone de determinados intervalos de tiempo exclusivos.
Intervalo de tiempo reservado para IRT
La duración de los intervalos de tiempo reservados (ranuras de tiempo) se determina por
selección en la lista desplegable.
Todos los demás datos se transfieren en el tiempo que falta hasta que empiece el siguiente
tiempo de ciclo de emisión.
Elija una de las siguientes opciones:
● 25 % de datos IO cíclicos como máximo. Mayoría de datos no cíclicos (datos por TCP/IP o
UDP/IP)
● 37,5 % de datos IO cíclicos como máximo. Mayoría de datos no cíclicos (datos por TCP/IP
o UDP/IP)

3188

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● 50 % de datos IO cíclicos como máximo. Proporción equilibrada
● 90 % de datos IO cíclicos como máximo. Mayoría de datos cíclicos (datos por IRT)

Consulte también
Configurar IRT con el máximo rendimiento (Página 3301)

Definir los dispositivos de un dominio Sync
Definir los dispositivos de un dominio Sync
Todos los componentes que forman parte de la comunicación IRT tienen que pertenecer a un
dominio Sync. A continuación se explica cómo definir los dispositivos de un dominio Sync.

Requisitos
Ya están configurados los sistemas PROFINET IO que se encuentran en el dominio
predeterminado.

Incluir un dispositivo nuevo en el dominio Sync
Para asignar dispositivos a un dominio Sync, proceda del siguiente modo:
1. Seleccione la subred Ethernet en la vista de redes en la que se ha creado el dominio Sync.
2. Abra las propiedades de la subred Ethernet.
3. Seleccione en la navegación local la entrada "Administración de dominios > Dominios Sync
> <Nombre del dominio Sync> > Dispositivos".
4. En la tabla "Estación / Sistema IO" haga clic en la tabla "Agregar dispositivos".
Se abre el cuadro de diálogo "Seleccionar sistema IO".
5. Seleccione todos los dispositivos que quiere asignar al dominio Sync y haga clic en
"Aceptar".
Los sistemas IO seleccionados se eliminan del dominio Sync original y se asignan al dominio
Sync actual.

Eliminar un dispositivo de un dominio Sync
Para eliminar un dispositivo de un dominio Sync, proceda del siguiente modo:
1. Seleccione la subred Ethernet en la vista de redes en la que se ha creado el dominio Sync.
2. Abra las propiedades de la subred Ethernet.
3. Seleccione en la navegación local la entrada "Administración de dominios > Dominios Sync
> <Nombre del dominio Sync> > Dispositivos".
4. Seleccione en la tabla "Estación / Sistema IO" el dispositivo que quiere eliminar del dominio
Sync y presione <Supr>.
Se borra el dispositivo y se vuelve a asignar al dominio predeterminado.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3189

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración del maestro Sync redundante
Para dispositivos PROFINET IO en modo IRT es posible configurar un maestro Sync
redundante.
Ejemplo: una CPU S7-1500 puede ser configurada como maestro Sync y un Scalance 6GK5
201-3BH00-2BA3 V5.0 puede ser configurado como maestro Sync redundante.

Funcionamiento
Un maestro Sync redundante pertenece al mismo dominio Sync que el maestro Sync
"primario". En caso de fallo del maestro Sync primario, impide que falle la comunicación en el
dominio Sync.
Tanto el maestro Sync como el maestro Sync redundante envían telegramas Sync. Un esclavo
Sync se sincroniza con el telegrama Sync del maestro Sync. Si el maestro Sync falla,
automáticamente un esclavo Sync se sincroniza con los telegramas Sync del maestro Sync
redundante.

Reglas
● La función de maestro Sync redundante está asignada a un solo dispositivo del dominio
Sync.
● En el dominio Sync hay solo dispositivos IRT con la opción "IRT de alto rendimiento".
● Entre el maestro Sync y el maestro Sync redundante hay como máximo 2 dispositivos.

Procedimiento
Para configurar un maestro Sync redundante, proceda del modo siguiente:
1. En la vista de dispositivos o de redes seleccione el dispositivo que desee configurar como
maestro redundante.
2. En "Interfaz PROFINET > Configuración avanzada > Configuración en tiempo real >
Sincronización > Función de sincronización", seleccione la opción "Maestro Sync
redundante".

Reglas y notas sobre las configuraciones IRT
Las siguientes reglas y notas se refieren a configuraciones de PROFINET. Aquí encontrará
otras recomendaciones de configuración para la optimización del sistema PROFINET.

3190

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configurar PROFINET con IRT
Tenga en cuenta las reglas siguientes para instalar y utilizar un sistema PROFINET IO en el
modo IRT. Estas reglas sirven para garantizar el funcionamiento correcto del sistema
PROFINET IO.
● Si se utiliza IRT, es necesario configurar la topología. Para ello, se calculan con exactitud
el tiempo de actualización, el ancho de banda y otros parámetros.
● Si quiere usar varios dominios Sync, configure un límite del dominio Sync para el puerto que
está conectado con un dispositivo PROFINET de los demás dominios Sync.
● En un dominio Sync sólo puede configurar un maestro Sync.
● Un sistema PROFINET IO sólo puede pertenecer a un único dominio Sync.
● Si configura dispositivos PROFINET en un dominio Sync y quiere sincronizarlos con IRT,
los dispositivos PROFINET en cuestión deben ser compatibles con la comunicación IRT.
● Si es posible, utilice el mismo dispositivo PROFINET como controlador PROFINET IO y
maestro Sync.
● Si se sincroniza sólo una parte de los dispositivos PROFINET de un sistema PROFINET IO,
tenga en cuenta lo siguiente: Coloque fuera del dominio Sync los dispositivos PROFINET
que no participen en la comunicación IRT.
● Tanto los sistemas IO de nivel superior como los subordinados pueden utilizar
simultáneamente comunicación RT. La comunicación IRT puede combinarse con
comunicación RT, pero no puede tener lugar en ambos sistemas IO al mismo tiempo: Si en
el I-device está activada la opción "Parametrización de la interfaz PN y sus puertos en el
controlador IO de nivel superior", el I-device puede utilizar la comunicación IRT en el
controlador IO de nivel superior. Si esta opción está desactivada, el sistema IO subordinado
puede utilizar comunicación IRT.

Consulte también
Configurar IRT con el máximo rendimiento (Página 3301)

Configuración del modo isócrono
¿Qué es el modo isócrono?
¿Para qué sirve el modo isócrono?
Si el transporte público de cercanías circulara tan rápido como fuera posible y los tiempos de
parada se redujeran al mínimo más absoluto, los pasajeros a menudo sólo verías los faroles
de cola rojos. Sin embargo, la duración total del viaje viene determinada por los ciclos
correspondientes del tren, autobús o metro, pues todo va mejor con unos ciclos bien
sintonizados. Lo mismo es válido para la técnica de automatización descentralizada. No sólo
cuentan los ciclos rápidos, sino que la sintonización y sincronización de los diferentes ciclos
consiguen el caudal óptimo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3191

Configuración de dispositivos y redes
1.4 Crear configuraciones

Just in Time
5HORMGHOVLVWHPD

&38

352),1(7

(7

6\VWHPWDNW

5HORMGHOVLVWHPD
El tiempo de respuesta rápido y fiable de un modo isócrono se basa en que todos los datos se
ponen a disposición Just in Time. Para ello, el ciclo PROFINET IO equidistante marca el tiempo
de ciclo.

Empleo del modo isócrono
Empleo del modo isócrono
Con la propiedad de sistema "Modo isócrono" pueden detectarse valores medidos y datos de
proceso en un ciclo de reloj del sistema fijo. En el mismo ciclo de reloj del sistema se produce
el procesamiento de señales hasta la conmutación al "borne de salida". De esta manera el
modo isócrono contribuye a lograr una gran calidad del control, y por tanto a mejorar la
precisión de fabricación. Con el modo isócrono se reducen drásticamente las posibilidades de
oscilación de los tiempos de reacción del proceso. El procesamiento en tiempo asegurado
puede utilizarse para un ciclo de máquina mayor.

3192

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En general, el modo isócrono puede utilizarse donde sea necesario registrar sincrónicamente
valores medidos, coordinar movimientos y definir y realizar simultáneamente reacciones de
procesos.

Secuencia temporal de la sincronización
Desde la lectura de los datos de entrada hasta la emisión de los datos de salida
A continuación va a explicarse el principio del proceso de ejecución de todos los componentes
involucrados en la sincronización:
● Lectura isócrona de los datos de entrada
● Transporte de los datos de entrada vía subred PROFINET hasta el controlador IO (CPU)
● Procesamiento posterior en la aplicación isócrona de la CPU
● Transporte de los datos de salida vía subred PROFINET hasta el dispositivo IO de salida
● Emisión isócrona de los datos de salida

$SOLFDFLµQ

&38

7UDQVSRUWHGHGDWRVGHHQWUDGD
DOFRQWURODGRU,2

352),1(7

7,

'LVSRVLWLYR

72

'LVSRVLWLYR

7B'&

3URFHVR

T_DC

7UDQVSRUWHGHGDWRVGHVDOLGDDO
GLVSRVLWLYR,2

3URFHVR

Ciclo de datos (Time_DataCycle)

TI

Tiempo de lectura de los datos de entrada

TO

Tiempo para emitir los datos de salida

Para que todos los datos de entrada estén preparados para ser transportados por la línea
PROFINET IO en el momento de empezar el próximo ciclo PROFINET IO correspondiente, el
ciclo de lectura de la periferia empieza anticipadamente con un tiempo de preprocesamiento
TI. TI es el "flash" para las entradas; en ese instante se leen todas las entradas sincronizadas. TI
es necesario para compensar la conversión analógico-digital, los tiempos de bus de fondo y
otros elementos similares. El tiempo de preprocesamiento TI puede ser ajustado
automáticamente por STEP 7, aplicarse de los ajustes del OB de alarma de sincronismo
correspondiente o bien ser configurado por el usuario. Es recomendable hacer que STEP 7
determine automáticamente el tiempo de preprocesamiento TI.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3193

Configuración de dispositivos y redes
1.4 Crear configuraciones
La línea PROFINET IO transporta los datos de entrada al controlador IO. Una vez transcurrido
un tiempo de retardo parametrizable se llama el OB de alarma de sincronismo (OB 61, OB 62,
OB 63 u OB 64). El programa de usuario en el OB de alarma de sincronismo determina la
reacción del proceso y prepara los datos de salida a tiempo para el comienzo del próximo ciclo
de datos. La longitud del ciclo de datos es configurada siempre por el usuario.
TO es la compensación debida al bus de fondo y a la conversión digital-analógica dentro del
dispositivo. TO es el "flash" para las salidas; en ese instante se emiten las salidas
sincronizadas. El tiempo TO puede ser ajustado automáticamente por STEP 7, aplicarse de los
ajustes del OB de alarma de sincronismo correspondiente o bien ser configurado por el
usuario. Es recomendable hacer que STEP 7 determine automáticamente el tiempo TO.

Periferia descentralizada isócrona y no isócrona
Es posible combinar periferia descentralizada isócrona con periferia descentralizada no
isócrona en un controlador IO.

El valor Ti
Efecto de TI
El efecto de TIse dilucida en la figura siguiente:
7B'&

7B'&

7UDQVPLVLµQGHODV
HQWUDGDVVDOLGDV

7LHPSRVGHHMHFXFLµQ
LQWHUQRVFRPRODFRQYHUVLµQ
DQDOµJLFRGLJLWDOHWF
7,

T_DC

Ciclo de datos

TI

Tiempo de lectura de los datos de entrada

Proceso
Para que, en el momento de iniciarse el nuevo tiempo de ciclo del sistema, sea posible
transferir al controlador IO un estado coherente de las entradas, el proceso de lectura debe
avanzarse en el tiempo TI. Para un módulo de entrada determinado, el tiempo TI abarca, como
mínimo, el tiempo de preparación y conversión de señales en los módulos electrónicos y el
tiempo de transferencia al módulo de interfaz en el bus de fondo del dispositivo IO.
En la instalación se consigue que los valores se lean simultáneamente poniendo el TI de todos
los módulos de entrada leídos en modo isócrono al mismo valor, que es mayor o igual al TI

3194

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
mínimo más grande de todos los módulos de entrada isócronos. Con la configuración
predeterminada, STEP 7 asegura de que se ajuste un TI mínimo común.

El valor To
Efecto de TO
El efecto se dilucida en la siguiente figura:
7B'&

7B'&

7UDQVPLVLµQGHODVHQWUDGDVVDOLGDV

7LHPSRVGHHMHFXFLµQLQWHUQRVFRPROD
FRQYHUVLµQGLJLWDODQDOµJLFRHWF
72

T_DC

Ciclo de datos

TO

Momento de emisión de los datos de salida

Proceso
Para que, en el momento de iniciarse el reloj del sistema, sea posible transferir al proceso un
estado coherente de las salidas, la emisión desde el borne no se produce hasta el momento TO
después del último toque. El tiempo TO abarca para un módulo de salida determinado, como
mínimo, el tiempo de transferencia del controlador IO al dispositivo IO (vía PROFINET IO) y en
el dispositivo IO la transferencia de las salidas del módulo de interfaz al módulo electrónico
(bus de fondo) (en alguna ocasión más el tiempo para la conversión digital-analógico).
Para que se escriban los valores simultáneamente en la instalación debe ajustarse el TO de
todos los módulos de salidas isócronos al mismo valor. Este valor debe ser superior o igual al
TO mínimo más grande de todos los módulos de salida isócronos. STEP 7 calcula
automáticamente el TO común mínimo posible.

El OB de alarma de sincronismo (OB 6x)
Para conectar en modo isócrono el programa de usuario utilice el OB de alarma de sincronismo
(p. ej. OB 61).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3195

Configuración de dispositivos y redes
1.4 Crear configuraciones

Llamada del OB de alarma de sincronismo
El OB de alarma de sincronismo se dispara a través del ciclo de reloj del sistema; en concreto,
a través de un tiempo de retardo configurable posterior al ciclo de reloj del sistema. El efecto
se dilucida en la siguiente figura:
7B'&

7B'&

7LHPSRGHUHWDUGR

2%[

'LVSRVLWLYR,2

'LVSRVLWLYR,2

7UDQVPLVLµQGHODV
HQWUDGDVVDOLGDV

T_DC

7B'&

7UDQVPLVLµQGHODV
HQWUDGDVVDOLGDV

Ciclo de datos

Tiempo de retardo
STEP 7 calcula primero automáticamente un valor adecuado para el tiempo de retardo. El
tiempo de retardo compensa el tiempo de transferencia de las entradas de los I-devices
isócronos al controlador IO a través de la red PROFINET IO. La ejecución del OB 6x está
relacionada con el ciclo de reloj del sistema y el tiempo de retardo configurado. Si es necesario,
el usuario puede corregir manualmente el tiempo de retardo. Por ejemplo, puede reducirse el
tiempo de retardo para ejecutar desde el momento del arranque del OB 6x partes del programa
que no acceden a la periferia isócrona. De este modo se gana tiempo de ejecución para el
programa de usuario isócrono.

Conexión de la periferia isócrona al OB de alarma de sincronismo
Se accede a la periferia isócrona a través de la memoria imagen parcial de proceso, es decir,
las direcciones de los módulos isócronos deben estar en una memoria imagen parcial de
proceso.
Los accesos a la periferia isócrona deben programarse mediante las instrucciones SYNC_PI
y SYNC_PO dentro del OB de alarma de sincronismo.
Llame la instrucción SYNC_PI al inicio del OB 6x, siempre que se haya seleccionado la
configuración automática del tiempo de retardo. Llame la instrucción SYNC_PO al final del OB
6x.

T_DC, ciclo de aplicación y tiempo de ciclo de emisión
El tiempo T_DC designa el tiempo de un ciclo de datos, es decir, el tiempo mínimo posible para
la lectura, procesamiento y emisión de los datos (modelo EVA). T_DC es siempre un múltiplo
del tiempo de ciclo de emisión.
Si para un dispositivo IO está activado IRT, T_DC es igual al tiempo de ciclo de emisión. El
tiempo de actualización se corresponde con el tiempo de ciclo de emisión.
El tiempo de aplicación es un múltiplo del ciclo de datos. Puede ser idéntico al ciclo de datos
si el tiempo de ejecución del OB de alarma de sincronismo es suficientemente corto.

3196

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ejecución del programa según el modelo EVA con ciclo corto
La característica principal del modelo EVA con factor de ciclo de aplicación = 1 es que los datos
de E/S se procesan completamente dentro de un ciclo de reloj del sistema T_DC. Con este
modelo se logran los tiempos de reacción más cortos.

Procesamiento del programa según el modelo EVA con tiempo largo
Distintivo del modelo EVA con factor de ciclo de aplicación > 1
Si el tiempo de ejecución del OB de sincronismo es mayor que un ciclo de datos T_DC, la salida
debe retardarse un ciclo de aplicación (OB 6x). Por ese motivo, en este modelo EVA la salida
se efectúa antes de la entrada.
A continuación se deben llamar las instrucciones SYNC_PI y SYNC_PO en la ventana de
ejecución del primer ciclo de datos (sólo está disponible en ella si el factor de ciclo de aplicación
> 1).
Se denomina ventana de ejecución el periodo en que es posible llamar las instrucciones
SYNC_PI o SYNC_PO; es decir, desde que se han transferido los datos cíclicos mediante
PROFINET hasta justo antes de que termine el ciclo de datos T_DC.
El procesamiento restante del programa de usuario en el OB 6x se realiza en el ciclo o los ciclos
de datos posteriores.
)DFWRUGHFLFORGHDSOLFDFLµQ[7B'&
7B'&
IDVH

7B'&
IDVH
9HQWDQDGHHMHFXFLµQ

)DFWRUGHFLFORGHDSOLFDFLµQ[7B'&
7B'&
IDVH

7B'&
IDVH
9HQWDQDGHHMHFXFLµQ

2%[
7LHPSRGHUHWDUGR

2%[
7LHPSRGHUHWDUGR

,

9

6)&ರ6<1&B3,ರ

4
6)&ರ6<1&B32ರ

La figura muestra el transcurso de las señales con factor de ciclo de aplicación = 2 (ciclo de
aplicación = 2 x ciclo de datos) desde el registro (E) hasta la salida (A) de los valores del
proceso, pasando por el procesamiento (V) en el controlador IO. STEP 7 calcula el tiempo de
retardo. Durante este tiempo, los datos de entrada leídos están de camino en PROFINET IO.
Este modelo es especialmente adecuado para periferias de configuración extensa con un
programa de usuario extenso en el OB 6x. Este modelo permite tiempos de cálculo más largos
para procesar los datos de entrada y determinar los datos de salida correspondientes.
El tiempo de procesamiento constante desde el "borne de entrada" hasta el "borne de salida"
es TI + (factor de ciclo de aplicación + 1) x T_DC + TO. Es posible asegurar TI + (2 x factor de
ciclo de aplicación + 1) x T_DC + TO como tiempo de reacción del proceso.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3197

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración del modo isócrono
Introducción
A continuación va a describirse cómo configurar el modo isócrono de un módulo utilizando
como dispositivos IO las nuevas familias de periferia descentralizada ET 200MP. El
procedimiento descrito también es válido para otros sistemas de periferia descentralizada (p.
ej. ET 200S o ET 200SP).
El controlador IO es una CPU S7-1500.

Requisitos
● La vista de redes está abierta.
● Hay instalada una CPU S7-1500 (p. ej. CPU 1516-3 PN/DP).
● Hay instalado un dispositivo de periferia descentralizada (p. ej. IM 155-5 PN HF) y está
conectado en red con la CPU.
● Se cumplen todos los requisitos para una configuración IRT, es decir:
– Los puertos de la CPU y del IM están interconectados entre sí;
– El IM tiene configurado "IRT" como clase "RT" (área "Opciones avanzadas >
Configuración en tiempo real > Sincronización").

Procedimiento
Para crear una conexión isócrona de la periferia y el programa de usuario, proceda del
siguiente modo:
1. Seleccione el dispositivo de periferia descentralizada (el IM 155-5 PN HF) en la vista de
redes y cambie a la vista de dispositivos.
2. Inserte un módulo de periferia que pueda funcionar en modo isócrono (módulo con la
extensión de nombre "HF", p. ej. DI 16X24VDC HF - 6ES7 521-1BH00).
3. En la ventana de inspección del módulo de periferia seleccionado, desplácese hasta el área
"Direcciones E/S".
4. En el área "Direcciones E/S" realice la configuración siguiente:
– Active la opción "Modo isócrono".
– Seleccione una memoria imagen parcial de proceso, p. ej. Memoria imagen parcial de
proceso 1.
– Haga clic en la lista desplegable "OB asignado" y después haga clic en el botón "Agregar
objeto".
Se abre un cuadro de diálogo para seleccionar los módulos de organización.
– Seleccione el OB "Synchronous Cycle" y confirme con "Aceptar".
Si hay asignación automática de números, se genera y abre el OB 61. En la ventana de
inspección está seleccionada el área "Modo isócrono", lo que permite continuar la
configuración del ciclo de aplicación y del tiempo de retardo y comenzar la programación
del OB en la parte de instrucciones.

3198

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
5. Agregue otros dispositivos IO que necesite, conéctelos en red e interconéctelos, y adecue
la configuración y los ajustes del modo isócrono.
6. Para acceder a informaciones sobre los anchos de banda calculados o para adaptar el
tiempo de ciclo de emisión, seleccione la subred y desplácese hasta el área
correspondiente de administración del dominio Sync en la ventana de inspección.

Configuración del modo isócrono
Introducción
A continuación va a describirse cómo configurar el modo isócrono de un módulo utilizando
como dispositivos IO las nuevas familias de periferia descentralizada ET 200MP. El
procedimiento descrito también es válido para otros sistemas de periferia descentralizada (p.
ej. ET 200S o ET 200SP).
El controlador IO es una CPU S7-300/400.

Requisitos
● La vista de redes está abierta.
● Hay instalada una CPU S7-300/400 (p. ej. CPU 319-3 PN/DP).
● Hay instalado un dispositivo de periferia descentralizada (p. ej. IM 155-5 PN HF) y está
conectado en red con la CPU.
● Se cumplen todos los requisitos para una configuración IRT, es decir:
– Los puertos de la CPU y del IM están interconectados entre sí;
– Está configurada la función de sincronización de la interfaz PROFINET "Maestro Sync"
(Propiedades de la CPU, área "Interfaz PROFINET > Opciones avanzadas >
Configuración en tiempo real > Sincronización").
– El IM tiene configurado "IRT" como clase "RT" (área "Interfaz PROFINET > Opciones
avanzadas > Configuración en tiempo real > Sincronización").

Procedimiento
Para crear una conexión isócrona de la periferia y el programa de usuario, proceda del
siguiente modo:
1. Seleccione la CPU y desplácese en la ventana de inspección hasta el área "Alarmas >
Alarmas de sincronismo".
2. Seleccione el dispositivo de periferia descentralizada (el IM 155-5 PN HF) en la vista de
redes y cambie a la vista de dispositivos.
3. Inserte al menos un módulo de periferia que pueda funcionar en modo isócrono (módulo
con la extensión de nombre "HF", p. ej. DI 16X24VDC HF - 6ES7 521-1BH00).
4. Asigne al módulo de periferia una memoria imagen parcial de proceso (ventana de
inspección, área "Direcciones E/S").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3199

Configuración de dispositivos y redes
1.4 Crear configuraciones
5. En la vista de dispositivos o en la vista de redes seleccione los IM y desplácese en la
ventana de inspección hasta el área "Interfaz PROFINET > Opciones avanzadas > Modo
isócrono".
– Active la opción "Modo isócrono".
– Si desea cambiar el tiempo de ciclo de emisión o el ciclo de aplicación haga clic en el link
verde situado junto a los campos correspondientes. Entrará en el dominio Sync, donde
la configuración se puede modificar de forma centralizada.
– Para los tiempos Ti/To, seleccione si deben calcularse automáticamente los tiempos
mínimos o si deben configurarse manualmente. Con configuración manual es posible
modificar los valores Ti/To.
– En la vista predeterminada de los módulos: Active la opción "Modo isócrono" para los
módulos que deban funcionar en dicho modo.
6. Agregue otros dispositivos IO que necesite, conéctelos en red e interconéctelos, y adecue
la configuración y los ajustes del modo isócrono.
7. Para acceder a informaciones sobre los anchos de banda calculados o para adaptar el
tiempo de ciclo de emisión, seleccione la subred y desplácese hasta el área
correspondiente de administración del dominio Sync en la ventana de inspección.

Configuración del modo isócrono en la subred
Introducción
Las propiedades de la subred ofrecen, junto con las del dominio Sync y las características
MRP, un resumen de la configuración del modo isócrono.

Requisitos
Hay configurado un sistema PROFINET IO con controlador IO y dispositivos IO.

Procedimiento
Para mostrar las características de modo isócrono de la subred, proceda del siguiente modo:
1. Seleccione la subred.
2. En las propiedades, seleccione el área "Modo isócrono".

Configuración de la vista general del modo isócrono
CPU

Selección de la CPU (controlador IO) de la subred

Aplicación isócrona

Selección de un OB de la CPU seleccionada, asignado a un
sistema IO

Detalles de la aplicación isócrona

3200

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ciclo de aplicación

Visualización del ciclo de aplicación (múltiplo del ciclo de da‐
tos). Para S7-300/400, ajuste el tiempo en las propiedades de
la CPU; para S7-1500 ajuste el tiempo en las propiedades del
OB de sincronismo.

Tiempo de retardo

Visualización del tiempo transcurrido entre el ciclo de reloj del
sistema y el arranque del OB de alarma de sincronismo (p. ej.
OB 61).

Tiempo de ciclo de emisión

Visualización del periodo entre dos intervalos consecutivos pa‐
ra comunicación IRT o RT

N.º del sistema IO

Visualización del N.º del sistema PROFINET IO asignado al OB

Memoria imagen parcial de proceso

Visualización de los números de la memoria imagen parcial de
proceso asignados al OB del sistema PROFINET IO.

Valores Ti/To en el OB
Valores Ti/To automáticos

Si está activada esta opción, STEP 7 calcula un valor Ti y un
valor To adecuados para todos los módulos que funcionan sin‐
crónicamente y que están asignados al OB. En la tabla de dis‐
positivos IO y módulos se puede hacer referencia a estos va‐
lores Ti/To comunes (valores Ti/To = del OB).

Tiempo Ti

Tiempo de lectura de los datos de entrada isócronos.

Tiempo To

Tiempo de emisión de los datos de salida isócronos

Dispositivos IO o módulos
Tabla de valores Ti/To:

El funcionamiento isócrono puede activarse y desactivarse in‐
dividualmente para cada dispositivo IO y para cada módulo de
los mismos.
Valores Ti/To: Son posibles tres configuraciones:
● Automático: Ti/To se calculan automáticamente.
● Manual: Ti/To pueden editarse.
● Desde el OB: El OB acepta los valores Ti/To.
Ti, To: Solo pueden editarse en configuración "Manual".
TiMín./TiMáx.: tiempos Ti mínimo y máximo.
ToMín./ToMáx.: tiempos To mínimo y máximo.
Intervalo: tiempo predeterminado para valores Ti/To.

Reglas, requisitos y condiciones marco
Lo que debe tenerse en cuenta para la configuración del modo isócrono
Para configurar el modo isócrono tenga en cuenta las indicaciones siguientes:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3201

Configuración de dispositivos y redes
1.4 Crear configuraciones

Componentes e interfaces PROFINET
● El modo isócrono sólo es posible con las interfaces integradas en la CPU. En las CPU
S7-1500 con dos interfaces PROFINET, solo puede utilizarse la interfaz X1 para modo
isócrono. No es posible el modo isócrono con los CP S7-1500 y los CM S7-1500.
● Sólo es posible un funcionamiento isócrono total de "terminal" a "terminal" si todos los
componentes de una cadena soportan la propiedad de sistema "Modo isócrono". Al
seleccionar el módulo en el catálogo asegúrese de que el campo de información del módulo
contenga el término "modo isócrono".
● Si un dispositivo está funcionando en modo isócrono (es decir, p. ej. tiene asignada la
función de esclavo Sync.), en el dispositivo IO debe haber al menos un módulo o un
submódulo que funcione en modo isócrono.

Modo isócrono de varias líneas
● Actualmente no es posible un funcionamiento isócrono que abarque varias líneas.

Memorias imagen parciales de proceso
● La periferia isócrona sólo puede procesarse en memorias imagen parcial de proceso. Si no
se utilizan memorias imagen parcial de proceso, no es posible una transmisión de datos
coherente e isócrona. Se supervisa el cumplimiento de los recursos disponibles, ya que el
número de dispositivos IO y el número de bytes en el sistema IO están limitados en cada
memoria imagen parcial de proceso.
● Las direcciones de la periferia isócrona deben estar en una memoria imagen parcial de
proceso.
● La memoria imagen parcial de proceso para periferia isócrona también puede incluir
periferia no isócrona.
● S7-300/400: Es posible que haya más de una memoria imagen parcial de proceso para un
OB de alarma de sincronismo o para un sistema IO.
● S7-1500: Puede haber una y solo una memoria imagen parcial de proceso para un OB de
alarma de sincronismo o para un sistema IO. Solo pueden estar en la misma memoria
imagen parcial de proceso los módulos o submódulos de un mismo sistema IO o de un
mismo OB de alarma de sincronismo

Temporizadores
● Cuando está activado el modo isócrono, el tiempo de actualización calculado por STEP 7
siempre es igual al tiempo de ciclo de emisión. No es posible modificar manualmente el
tiempo de actualización.
● El tiempo del ciclo de aplicación está limitado a 32 ms.
● El tiempo de retardo para el OB de alarma de sincronismo debe estar entre 0 y (ciclo de
datos - 1 μs).

3202

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración de dispositivos I
Funcionalidad I-device
Funcionalidad I-device
La funcionalidad "I-device" (dispositivo IO inteligente) de una CPU permite intercambiar datos
de forma determinista con un controlador IO y, por consiguiente, emplear la CPU como una
unidad inteligente de preprocesamiento de procesos parciales, por ejemplo. En este caso, el
I-device está integrado como dispositivo IO a un controlador IO de nivel superior.
El preprocesamiento queda asegurado por el programa de usuario en la CPU. Los valores de
proceso registrados en la periferia centralizada o descentralizada (PROFINET IO o
PROFIBUS DP) son preprocesados por el programa de usuario y puestos a disposición de la
CPU o del CP de un equipo de nivel superior a través de la interfaz de un dispositivo
PROFINET IO.
6,0$7,&&38&3
&RQWURODGRU,2
GHQLYHOVXSHULRU
,QGXVWULDO(WKHUQHW352),1(7,2
SHM(7
'LVSRVLWLYR,2

SHM(7
'LVSRVLWLYR,2

6,0$7,&&38&3
FRPRGLVSRVLWLYR,
'LVSRVLWLYR,2
3URJUDPDGHXVXDULR
3UHSURFHVDPLHQWRLQWHOLJ

3HULIHULD
FHQWUDOL]DGDGHVFHQWUDOL
]DGD

Convención relativa al nombre "I-device"
En adelante, una CPU o un CP con la funcionalidad I-device se denominará simplemente "Idevice".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3203

Configuración de dispositivos y redes
1.4 Crear configuraciones

Propiedades y ventajas del I-device
Campos de aplicación
Campos de aplicación del I-Device:
● Procesamiento distribuido
Una tarea de automatización compleja puede repartirse entre unidades/procesos parciales
menores. De este modo, resultan procesos abarcables que generan tareas parciales
simplificadas.
● Desacoplamiento de procesos parciales
Los procesos complicados, ampliamente distribuidos y voluminosos pueden dividirse en
varios procesos parciales con interfaces abarcables gracias al uso de I-Devices. Estos
procesos parciales, a su vez, se pueden almacenar en proyectos individuales que
posteriormente se agrupan en un proyecto global.
● Protección de Know-how
Partes de la instalación ya sólo pueden suministrarse con un archivo GSD en lugar de con
un proyecto para la descripción de la interfaz del I-Device. Por lo tanto, el know-how del
programa de usuario ya no tiene que ser revelado.

Propiedades
Propiedades del I-Device:
● Desacoplamiento de proyectos
Las personas que crean y utilizan un I-Device pueden tener proyectos de automatización
completamente separados. La interfaz entre los proyectos la constituye el archivo GSD. De
este modo es posible el acoplamiento con controladores IO estándar a través de una
interfaz estandarizada.
● Comunicación en tiempo real
El dispositivo I se pone a disposición de un sistema PROFINET IO determinista mediante
una interfaz PROFINET IO, con lo que es compatible con la comunicación en tiempo real
RT (Real Time).

Ventajas
El I-Device ofrece las ventajas siguientes:
● Acoplamiento sencillo de controladores IO sin herramientas de software adicionales.
● Comunicación en tiempo real entre CPUs SIMATIC y con controladores IO estándar.
● Gracias a la distribución de la capacidad de procesamiento entre varios I-Devices, es
posible reducir el rendimiento necesario de las diferentes CPU y, por supuesto, del
controlador IO.
● Menor carga de comunicación gracias al procesamiento local de los datos de proceso.
● Claridad gracias al procesamiento de tareas parciales en CPUs o proyectos separados.

3204

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Intercambio de datos entre el sistema IO de nivel superior y el subordinado
Introducción
En el capítulo siguiente se presenta el intercambio de datos entre el sistema IO de nivel
superior y el subordinado.

Áreas de transferencia
En las áreas de transferencia se preparan los datos para la comunicación entre el controlador
IO y el dispositivo I. Un área de transferencia contiene una unidad informativa que se
intercambia de forma coherente entre el controlador IO y el dispositivo I.
Las áreas de transferencia de aplicación son una interfaz con el programa de usuario de la
CPU del I-device. Las entradas se procesan en el programa de usuario y las salidas son el
resultado de un procesamiento en el programa de usuario.
En la figura siguiente se representa el intercambio de datos entre el sistema IO de nivel
superior y el subordinado. Las diferentes relaciones de comunicación se explican a
continuación con cifras.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3205

Configuración de dispositivos y redes
1.4 Crear configuraciones
&RQWURODGRU,2GHQLYHOVXSHULRU
3URJUDPDGHXVXDULR




,GHYLFH

'LVSRVLWLYR
,2


3URJUDPDGHXVXDULR





'LUHFFLRQHV,2FHQWUDOL]DGDV
'LUHFFLRQHV,2GHVFHQWUDOL]DGDV

'LVSRVLWLYR,2

UHDVGHWUDQVIHUHQFLD

① Intercambio de datos entre un controlador IO de nivel superior y un dispositivo IO normal
Los controladores IO y los dispositivos IO intercambian datos vía PROFINET.

② Intercambio de datos entre un controlador IO de nivel superior y un I-device
El controlador IO y el I-device intercambian datos vía PROFINET.
El intercambio de datos entre un controlador IO de nivel superior y un I-device se basa en la
relación tradicional entre controlador IO y dispositivo IO.
Para el controlador IO de nivel superior, las áreas de transferencia del I-device representan
submódulos de un equipo preconfigurado.
Los datos de salida del controlador IO son los datos de entrada del I-device. De forma análoga,
los datos de entrada del controlador IO son los datos de salida del I-device.

3206

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

③ Relación de transferencia entre el programa de usuario y el área de transferencia
El programa de usuario y el área de transferencia de aplicación intercambian datos de entrada
y salida por esta vía.

④ Relación de transferencia entre el área de transferencia y la periferia del I-device
En la actualidad no es compatible con la configuración.

⑤ Intercambio de datos entre el programa de usuario y la periferia del I-device
El programa de usuario y la periferia centralizada y descentralizada intercambian datos de
entrada y salida por esta vía.

⑥ Intercambio de datos entre el I-device y un dispositivo IO subordinado
El I-device y sus dispositivos IO intercambian datos por esta vía. Los datos se transfieren vía
PROFINET.

Configurar direcciones de diagnóstico
Introducción
En la asignación de direcciones de diagnóstico para PROFINET IO, recuerde que se asignan
direcciones de diagnóstico IO tanto al controlador IO como al I-device.
&38[31'3FRPRFRQWURODGRU,2

&38[31'3FRPR,GHYLFH

352),1(7

'LUHFFLRQHVGHGLDJQµVWLFR

'LUHFFLRQHVGHGLDJQµVWLFR

Direcciones de diagnóstico
En las direcciones de diagnóstico se distingue entre direcciones de diagnóstico en el
controlador IO y en el I-device:
● Direcciones de diagnóstico en el controlador IO
A través de las direcciones de diagnóstico asignadas al controlador IO, este recibe
información sobre el estado del dispositivo IO o sobre una interrupción del bus.
● Direcciones de diagnóstico en el I-device
A través de las direcciones de diagnóstico asignadas al I-device, este recibe información
sobre el estado del controlador IO o sobre una interrupción del bus.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3207

Configuración de dispositivos y redes
1.4 Crear configuraciones
Al crear la configuración entre controlador e I-device, STEP 7 asigna automáticamente
direcciones de diagnóstico a las CPU. La descripción siguiente muestra cómo modificar las
direcciones de diagnóstico predefinidas.
Sugerencia: Para obtener una vista general de todas las direcciones asignadas a la CPU,
incluidas las direcciones de diagnóstico, seleccione el área "Sinóptico de direcciones" en la
ventana de inspección de la CPU seleccionada.

Direcciones de diagnóstico de la comunicación del I-device
En el I-device se muestra una tabla con las direcciones de diagnóstico de la comunicación del
I-device. El identificador de la dirección de diagnóstico se compone del nombre del PLC y del
área de transferencia con el número de subslot más bajo. Si con el modo de operación de la
interfaz PROFINET se activa en el I-device la parametrización de la interfaz PN desde el
controlador IO de nivel superior, se mostrarán también las direcciones de diagnóstico de la
interfaz PROFINET y sus puertos. Las direcciones de diagnóstico utilizadas pueden editarse
en la tabla.

La tabla solo se muestra si el controlador IO es una CPU 300/400:
Controlador IO

Visualización de las direcciones de diagnóstico

CPU 300/400

Direcciones locales del I-device

CPU 1200/1500

No hay visualización

Requisitos
● Se encuentra en la vista de redes.
● Se ha creado un sistema IO con controlador IO e I-device.

3208

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento
Para editar las direcciones de diagnóstico para la comunicación del I-device, proceda del
siguiente modo:
1. Seleccione el controlador IO o el I-device.
2. Seleccione la fila con el modo de operación "I-device" en la tabla de comunicación E/S.
3. Edite las direcciones de diagnóstico en "Propiedades > Comunicación de I-device >
Dirección de diagnóstico de la comunicación" en la ventana de inspección.
O:
1. Seleccione el I-device.
2. Edite las direcciones de diagnóstico en "Propiedades > Interfaz PROFINET > Modo de
operación > Comunicación de I-device > Dirección de diagnóstico de la comunicación" en
la ventana de inspección.
Pueden seleccionarse y editarse los campos con los valores de las direcciones de diagnóstico,
tanto para el dispositivo como para el controlador.

Información adicional
Para obtener más información sobre direcciones de diagnóstico, consulte los manuales de
cada una de las CPUs S7.

Configurar un I-Device
Introducción
En principio hay dos posibilidades para realizar la configuración:
● Configurar un I-device dentro de un proyecto
● Configurar un I-device que se utiliza en otro proyecto o que se utiliza en otro sistema de
ingeniería.
Si configura un I-device para otro proyecto u otro sistema de ingeniería, STEP 7 se lo permitirá
si exporta un I-device configurado a un archivo GSD. Puede importar el archivo GSD en el otro
proyecto o en el otro sistema de ingeniería, al igual que otros archivos GSD. En este archivo
GSD se guardan, entre otras cosas, las áreas de transferencia para el intercambio de datos.

Configurar un I-device dentro de un proyecto
1. Arrastre un controlador PROFINET IO desde el catálogo de hardware a la vista de redes
mediante la función de arrastrar y soltar.
2. Arrastre un controlador PROFINET IO, que se pueda parametrizar como dispositivo IO,
desde el catálogo de hardware a la vista de redes mediante la función de arrastrar y soltar.
Este dispositivo se parametriza como I-device (p. ej., CPU 319-3 PN/DP, FW 3.2).
3. Seleccione la interfaz PROFINET del I-device.
4. En la ventana de inspección, seleccione en la navegación local la entrada "Modo de
operación" y active la casilla de verificación "Dispositivo IO".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3209

Configuración de dispositivos y redes
1.4 Crear configuraciones
5. En la lista desplegable "Controlador IO asignado" puede seleccionar ahora el controlador
IO.
Cuando haya seleccionado el controlador IO, podrá apreciar la interconexión y el sistema
IO entre ambos dispositivos en la vista de redes.
6. En la casilla de verificación "Parametrizar interfaz PN desde el controlador IO de nivel
superior" puede definir si la interfaz y sus puertos son parametrizados por el propio I-Device
o si lo hace el controlador IO de nivel superior.
Si utiliza el I-device con un sistema IO subordinado, la interfaz PROFINET (p. ej.,
parámetros de puerto) del I-device no puede parametrizarse desde el controlador IO de
nivel superior.
7. Configure las áreas de transferencia. Se trata de áreas de periferia a través de las cuales
el I-device intercambia datos con el controlador IO de nivel superior. Las áreas de
transferencia se encuentran en la navegación local en el apartado "Comunicación de IDevice".
– Haga clic en el primer campo de la columna "Áreas de transferencia". STEP 7 asigna un
nombre predeterminado que se puede modificar.
– Seleccione el tipo de relación de comunicación, por ejemplo CD para "Relación de
comunicación controlador-dispositivo".
– Las direcciones se establecen automáticamente; si es necesario, corrija las direcciones
y defina la longitud del área de transferencia que debe transferirse de forma coherente.
8. Para cada área de transferencia se genera una entrada individual en la navegación local.
Si selecciona una de estas entradas, puede adaptar o corregir y comentar los detalles del
área de transferencia.
Si la CPU es compatible con esta funcionalidad, también puede activar la opción "Mapeo de
direcciones bidireccional". En este caso se establecen de forma automática áreas de
direcciones "en dirección contraria", de forma que las CPU ocupan simétricamente las
áreas de entradas y salidas.

Configurar un I-device con ayuda de un archivo GSD
Si utiliza el I-device en otro proyecto o si el I-device se usa en otro sistema de ingeniería,
configure el controlador IO de nivel superior y el I-device de la forma antes descrita. A
continuación será necesario exportar el I-device como archivo GSD. El archivo GSD generado
es el sustituto del I-device configurado en otro proyecto.
Observe la descripción sobre la Exportación de archivos GSD (Página 3211).
Nota
Módulo de transferencia PROFIsafe del tipo "F-PS"
Si se ha enchufado un módulo de transferencia PROFIsafe del tipo "F-PS", el I-device no
puede asignarse a ningún controlador IO de este proyecto. Hay que exportar un archivo GSD.
Con este archivo GSD pueden configurarse todos los parámetros de PROFIsafe en el otro
proyecto y el I-device puede utilizarse en un controlador IO compatible con PROFIsafe.

3210

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
Configurar el I-Device como Shared Device (Página 3258)
Asignación múltiple de controladores IO (Página 3213)

Exportar el I-device como archivo GSD
Introducción
Si desea utilizar un I-device en otro proyecto o si el I-device debe usarse en otro sistema de
ingeniería, el I-device debe exportarse como archivo GSD. El archivo GSD contiene la
descripción del I-device y puede importarse y utilizarse a continuación en el nuevo proyecto.

Requisitos
● Se ha configurado un I-device con comunicación de I-device y área de transferencia.
● Las modificaciones realizadas en el hardware se han compilado.

Procedimiento
Para exportar un I-device como archivo GSD, proceda del siguiente modo:
1. Seleccione el I-device o su interfaz PROFINET en el editor de hardware y redes.
2. En la ventana de inspección, seleccione el comando "Exportar" en "Modo de operación >
Comunicación de I-device" de la interfaz PROFINET. Se abre el cuadro de diálogo para
exportar el I-device como archivo GSD.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3211

Configuración de dispositivos y redes
1.4 Crear configuraciones
3. Ahora es posible definir el nombre y una descripción para el representante del I-device y
modificar la ruta de almacenamiento del archivo GSD.

Designación: la designación es un texto que se utiliza como parte del nombre del archivo
GSD. Esta designación permite identificar después fácilmente el archivo GSD. El ajuste
predeterminado es el nombre del PLC del proyecto actual.
Nota
En una posterior importación del archivo GSD a otro proyecto, para cada I-device importado
con una nueva designación se crea una entrada nueva en el catálogo de hardware. Si la
designación ya existe en el catálogo de hardware, el I-device simplemente se agrega como
otra versión de un I-device ya existente.
Descripción: aquí se puede editar la descripción. Después de importar el archivo GSD a
otro proyecto, este texto aparece en el campo "Descripción" del I-device, en el catálogo de
hardware. El ajuste predeterminado es la descripción del PLC del proyecto actual.
Ruta: aquí se introduce el lugar en el que debe guardarse el archivo GSD. Seleccione una
ruta que pueda volver a encontrar fácilmente.
4. Haga clic en el botón "Exportar". Ahora el I-device se exporta como archivo GSD.
El I-device se ha exportado como archivo GSD y ya puede utilizarse en otro proyecto.

Composición del nombre del archivo GSD exportado
El nombre del archivo GSD no puede elegirse libremente, pues debe seguir un esquema
definido. Solo es posible modificar la parte del nombre que ayudará a encontrar el I-device en
el catálogo de hardware después de importar el archivo GSD. La composición del nombre para
el archivo GSD exportado se explica en el ejemplo siguiente:
El nombre de un archivo GSD exportado para I-devices puede ser, por ejemplo:
"GSDML-V2.32-#Siemens-PreConf_PLC_23-20170208-140313.xml"

3212

Componente del
nombre

¿Editable?

Explicación

GSDML

No

Secuencia de caracteres con la que empieza todo archivo
GSD para I-devices

V2.32

No

Versión del esquema GSDML

Siemens

No

Fabricante

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Componente del
nombre

¿Editable?

Explicación

PreConf

No

Identificación para archivo GSD de la función de exportación

PLC_23

Sí

Designación modificable del dispositivo. Este nombre permi‐
te encontrar el I-device en el catálogo de hardware del otro
proyecto tras una importación.

20170208

No

Identificación de la versión en forma de fecha con el formato
año-mes-día (YYYYMMDD). Como referencia se utiliza la
fecha del sistema.

140313

No

Identificación de la versión en forma de hora con el formato
hora-minuto-segundo (hhmmss). Como referencia se utiliza
la hora UTC del sistema.

.xml

No

Extensión del archivo

Importación del archivo GSD exportado a otro proyecto
Para importar el archivo GSD con el I-device exportado, instale el archivo GSD tal como se
describe en otro punto. Después de seleccionar e instalar el archivo GSD con el esclavo I en
"Opciones > Administrar archivos de descripción de dispositivos > GSDs instalados",
encontrará el I-device en "Otros dispositivos de campo > PROFINET IO" dentro del catálogo
de hardware, con el nombre indicado como designación en el cuadro de diálogo de
exportación. Los I-devices que tengan el mismo nombre se ajustarán como versiones del
mismo dispositivo en el catálogo de hardware. Las diferentes versiones se identifican por el
número de versión en el nombre del archivo y, en su caso, por tener una descripción distinta.
Para visualizar estas versiones utilice la lista desplegable "Versión" tras seleccionar el I-device.
Los I-devices seleccionados pueden arrastrarse a la configuración igual que otros dispositivos
del catálogo de hardware, utilizando la función Drag & Drop.
Los archivos GSD se guardan siempre con el proyecto, es decir, toda la información relevante
para la representación del dispositivo (incluidos los iconos) están disponibles también en el
proyecto guardado.

Consulte también
Configurar un I-Device (Página 3209)

Asignación múltiple de controladores IO
Introducción
Si en un PLC S7-1500 existen varias interfaces PROFINET IO con funcionalidad I-device, a
dicho dispositivo pueden asignarse varios controladores IO.
A partir STEP 7 V14 es evidente que para un I-device hay más de un controlador IO de nivel
superior: en la vista de redes aparece para dichos dispositivos el enlace "asignación múltiple".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3213

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ejemplos de interfaces PROFINET IO con funcionalidad I-device:
● CPU S7-1500, en particular las que tengan dos interfaces PROFINET IO (p. ej., CPU
1518-4 PN/DP, CPU 1517-3 PN/DP soportan PROFINET IO (y funcionalidad I-device) en
las interfaces X1 y X2)
● CM 1542-1
A continuación se describen los efectos de una asignación múltiple.

Configuración de un dispositivo con asignación a varios controladores IO
A continuación va a mostrarse con un ejemplo de configuración el efecto que tiene la
asignación de un I-device a varios controladores IO.
1. Arrastre varios controladores PROFINET IO (p. ej. CPU 1518-4 PN/DP) desde el catálogo
de hardware a la vista de redes mediante la función de arrastrar y soltar.
2. Arrastre un controlador PROFINET IO que se pueda parametrizar también como
dispositivo IO desde el catálogo de hardware a la vista de redes mediante la función de
arrastrar y soltar (p. ej. CPU 1518-4 PN/DP). También es posible agregar un CM 1542-1 a
esta estación y parametrizar la interfaz PROFINET como dispositivo IO.
3. Seleccione la interfaz PROFINET de un módulo.
4. En la ventana de inspección, seleccione en la navegación local la entrada "Modo de
operación" y active la casilla de verificación "Dispositivo IO".
5. En la lista desplegable "Controlador IO asignado" puede seleccionar ahora el controlador
IO.
6. Repita los pasos 3 y 4 para otras interfaces PROFINET.
Cuando haya seleccionado el controlador IO o la interfaz PROFINET IO del controlador IO,
podrá visualizar en la vista de redes la interconexión y el sistema IO entre ambos
dispositivos.
Al asignar otra interfaz PROFINET IO a otro controlador IO, en el dispositivo aparece el
enlace "Asignación múltiple" en lugar del nombre del controlador IO de nivel superior.
Si se hace clic en ese enlace aparece la selección de controladores IO asignados, y
haciendo clic sobre uno de dichos controladores IO la vista se centra en dicho dispositivo.

Los restantes ajustes (otra parametrización de la interfaz IO, configuración de las áreas de
transferencia) solo se ven afectadas por esta ampliación funcional en la medida en que una
identificación más clara facilita la selección de los dispositivos o los sistemas IO también con
las CPU con varias interfaces PROFINET IO.
Si las interfaces se han asignado exactamente a una subred S7, en dicha subred existen varios
sistemas IO.
Haciendo clic sobre la subred se visualiza la selección del sistema IO que se destaca.

3214

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Condiciones límite al emplear I-devices
Condiciones marco
Cuando se emplean I-Devices deben observarse algunas condiciones marco en casos
especiales.

Ancho de banda
El volumen de direcciones de las áreas de transferencia configuradas se traduce en el ancho
de banda útil del I-Device:
Ancho de banda de las áreas de transferencia + ancho de banda del sistema IO subordinado
= ancho de banda total utilizado en el I-Device.
Si el área de direcciones de las áreas de transferencia es demasiado grande, no queda
suficiente ancho de banda para el sistema IO subordinado para poder conseguir tiempos de
actualización breves.
Sugerencia: Mantenga el área de direccionamiento de las áreas de transferencia lo más
pequeña posible.

Reglas para la comunicación RT e IRT
Los sistemas IO con I-devices también son aptos para establecer aplicaciones en tiempo real
con comunicación RT. A continuación se da por supuesto que se trata de un sistema
jerárquico, compuesto por un controlador IO de nivel superior al que se ha asignado un IDevice (sistema IO de nivel superior). A su vez, se han asignado dispositivos IO al I-Device
(sistema IO subordinado). Rige la regla siguiente:
Tanto el sistema IO de nivel superior como el subordinado son compatibles con la
comunicación RT. Es posible utilizar a la vez la comunicación RT para ambos sistemas IO.
La comunicación IRT puede combinarse con la comunicación RT. Sin embargo, la
comunicación IRT no puede tener lugar en ambos sistemas IO al mismo tiempo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3215

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ejemplo:
● Si en el I-Device está activada la opción "Parametrización de la interfaz PN y sus puertos
en el controlador IO de nivel superior", el I-Device puede funcionar en el controlador IO de
nivel superior con la clase RT "IRT". Para el sistema IO de nivel inferior del I-Device no es
posible en este caso una comunicación IRT.
● Si en el I-Device está desactivada la opción "Parametrización de la interfaz PN y sus
puertos en el controlador IO de nivel superior", el I-Device debe funcionar en el controlador
IO de nivel superior con la clase RT "RT". Para el sistema IO de nivel inferior es posible la
comunicación IRT.
Si configura el I-Device en un sistema IO con la clase RT "RT", no se pueden ajustar tiempos
de ciclo de emisión impares.

Reglas para el acceso a los datos
● El controlador IO de nivel superior puede acceder a las áreas de transferencia cuando el IDevice está en RUN.
● En la CPU I-Device sólo se puede acceder a las áreas de transferencia de aplicación.
– El acceso a áreas de transferencia de aplicación de entrada es posible, si el controlador
IO de nivel superior está en RUN.
– El acceso a áreas de transferencia de aplicación de entrada es posible,
independientemente del estado operativo del controlador IO de nivel superior.

Parámetros de dirección IP y nombre de dispositivo
Igual que cualquier otro dispositivo IO, un I-Device también necesita parámetros de dirección
IP / nombres de dispositivo para poder comunicarse a través de PROFINET. Los parámetros
de dirección IP constan de tres partes: la dirección IP propiamente dicha, la máscara de subred
y la dirección del router (gateway).
Los parámetros de dirección IP / nombres de dispositivo de un I-device pueden asignarse de
dos modos distintos: desde el proyecto o directamente en el dispositivo.
Ajustar la dirección IP / el nombre de dispositivo en el proyecto:
● Los parámetros de dirección IP / el nombre de dispositivo se asignan de forma fija durante
la configuración (en el proyecto del I-Device) en STEP 7. Este método es el estándar.

3216

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajustar la dirección IP / el nombre de dispositivo en el dispositivo:
● Parámetros de dirección IP / nombre de dispositivo vía DCP: Los parámetros de dirección
IP / el nombre de dispositivo se asignan mediante DCP (Discovery and Configuration
Protocol). Existen dos formas de hacerlo:
– Mediante una herramienta de configuración como PST o STEP 7 (vía dispositivos
accesibles).
– A través del controlador IO de nivel superior.
● Parámetros de dirección IP / nombre de dispositivo vía programa de usuario: Los
parámetros de dirección IP se asignan en el programa de usuario de la CPU del I-Device
(a través de la instrucción "IP_CONFIG").
Nota
Visualización de la topología
Si el nombre de dispositivo y los parámetros de dirección IP de un I-device se ajustan
directament en el dispositivo, el I-device puede aparecer varias veces en el editor
topológico.

Diagnóstico y respuesta a alarmas
Diagnóstico y respuesta a alarmas
Las CPU S7 disponen de múltiples funciones de diagnóstico y alarma que, por ejemplo,
notifican errores o fallos en los sistemas IO subordinados. Dichos avisos de diagnóstico
reducen los tiempos de parada y facilitan la localización y solución de errores.

Diagnóstico del I-Device en el controlador IO de nivel superior y en el I-Device
El controlador IO de nivel superior y la CPU del I-Device disponen de los siguientes
mecanismos para diagnosticar el estado de cada interlocutor:
● OB de extracción/inserción (OB 83) para alarma "Return-of-Submodule" (recuperación de
submódulo)
● OB de error de ejecución del programa (OB 85) para, por ejemplo, errores de transferencia
de la memoria imagen de proceso (sólo S7-300/400)
● OB de fallo del rack (OB 86) para fallo de aparatos de ampliación, sistemas IO o dispositivos
de periferia descentralizada (fallo de estación, recuperación de la estación)
● OB de error de acceso a la periferia (OB 122), opcional en S7-1500
● Tratamiento de errores local (sólo S7-1500)
Nota
Los avisos de diagnóstico de la periferia pueden procesarse en el programa de usuario de
la CPU I-Device y, desde allí, transferirse al controlador IO de nivel superior por medio de
las áreas de transferencia.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3217

Configuración de dispositivos y redes
1.4 Crear configuraciones

Cambio del estado operativo y fallo/recuperación de la estación
En la tabla siguiente se muestran las consecuencias que puede tener un cambio del estado
operativo o un fallo de una CPU (I-Device, controlador IO) sobre la(s) otra(s).
Tenga en cuenta que una CPU S7-1500, en caso de errores en el acceso directo a las áreas
de transferencia (p. ej. porque la otra CPU pasa a STOP) llama al OB 122, si está disponible.
Pero, a diferencia de una CPU S7-300/400, esta CPU no pasa a STOP si el OB 122 no está
disponible. Además, con una CPU S7-1500 tiene la posibilidad de realizar el tratamiento de
errores local dentro del bloque en el que ha aparecido el error. Esta circunstancia se refleja de
forma abreviada en la tabla mediante la fórmula "Llamada del OB 122".

3218

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Eventos
Estado inicial

Evento

Comportamiento del I-Device

Comportamiento de controla‐
dores de nivel superior

Ambas CPU están en
RUN (controlador IO de
nivel superior e I-Devi‐
ce).

La CPU I-Device pasa a STOP

/

S7-300/400/1500: código de
error en RET_VAL al actuali‐
zar la memoria imagen de
proceso con la instrucción
UPDAT_PI o UPDAT_PO.
Al acceder directamente a las
áreas de transferencia hacia
el I-Device se llama al
OB 122 (opcional en
S7-1500).
S7-300/400: si está configu‐
rada la llamada del OB85 en
caso de error de acceso a la
periferia, en la transferencia
de la memoria imagen de pro‐
ceso del sistema al I-Device
se produce la llamada al
OB 85.

La CPU I-Device está en La CPU I-Device arranca
STOP, el controlador IO
de nivel superior está en
RUN.

S7-300/400/1500: llamada del
OB 100 (arranque).

S7-300/400/1500: llamada
del OB 83: para todas las
áreas de transferencia al IDevice.

Llamada del OB 83 para áreas
de transferencia de entrada al
controlador IO de nivel superior. Hasta la llamada del OB 83,
Hasta la llamada del OB 83, al al acceder directamente a las
áreas de transferencia al Iacceder directamente a las
Device se sigue llamando al
áreas de transferencia de en‐
trada al controlador IO de nivel OB 122.
superior se producen errores
de acceso: Llamada del
OB 122.

S7-300/400: Si está configu‐
rada la llamada del OB85 en
caso de error de acceso a la
S7-300/400: si está configura‐ periferia, hasta la llamada del
da la llamada del OB85 en caso OB 83 se sigue llamando al
de error de acceso a la perife‐ OB 85 en la transferencia de
ria, hasta la llamada del OB 83 la memoria imagen de proce‐
se sigue llamando al OB 85 en so del sistema al I-Device.
la transferencia de la memoria
imagen de proceso del sistema
al controlador IO de nivel supe‐
rior.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3219

Configuración de dispositivos y redes
1.4 Crear configuraciones
Estado inicial

Evento

Comportamiento del I-Device

Comportamiento de controla‐
dores de nivel superior

Ambas CPU están en
RUN (controlador IO de
nivel superior e I-Devi‐
ce).

El controlador IO de nivel supe‐
rior pasa a STOP

/
S7-300/400/1500: código de
error en RET_VAL al actualizar
la memoria imagen de proceso
con la instrucción UPDAT_PI o
UPDAT_PO.
Al acceder directamente a las
áreas de transferencia de en‐
trada al controlador IO de nivel
superior se produce la llamada
al OB 122.
Nota: Es posible seguir acce‐
diendo a las áreas de transfe‐
rencia de salida.
S7-300/400: si está configura‐
da la llamada del OB85 en caso
de error de acceso a la perife‐
ria, en la transferencia de la
memoria imagen de proceso
de las áreas de transferencia
de entrada del sistema al con‐
trolador IO de nivel superior se
produce la llamada al OB 85.

El controlador IO de ni‐
vel superior está en
STOP, la CPU I-Device
está en RUN

El controlador IO de nivel supe‐
rior arranca

S7-300/400/1500: Llamada del Llamada del OB 100 (arran‐
que).
OB 83 para áreas de transfe‐
rencia de entrada al controla‐
dor IO de nivel superior.
Hasta la llamada del OB 83, al
acceder directamente a las
áreas de transferencia de en‐
trada al controlador IO de nivel
superior se produce la llamada
al OB 122.
S7-300/400: si está configura‐
da la llamada del OB85 en caso
de error de acceso a la perife‐
ria, en la transferencia de la
memoria imagen de proceso
de las áreas de transferencia
de entrada del sistema al con‐
trolador IO de nivel superior se
produce la llamada al OB 85.

3220

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Estado inicial

Evento

Comportamiento del I-Device

Comportamiento de controla‐
dores de nivel superior

Ambas CPU están en
RUN (controlador IO de
nivel superior e I-Devi‐
ce).

Fallo de estación I-Device, p. ej.
por interrupción de bus

S7-300/400/1500: Si el I-Devi‐
ce sigue funcionando sin cone‐
xión al bus: Llamada del OB 86
(fallo de estación).

S7-300/400/1500: Llamada
del OB 86 (fallo de estación).

Al acceder directamente a las
áreas de transferencia al con‐
trolador IO de nivel superior se
produce la llamada al OB 122.

áreas de transferencia hacia
el I-Device se llama al
OB 122.

Código de error en RET_VAL
al actualizar la memoria ima‐
Código de error en RET_VAL al gen de proceso con la instruc‐
actualizar la memoria imagen
ción UPDAT_PI o UP‐
de proceso con la instrucción
DAT_PO.
UPDAT_PI o UPDAT_PO.
Al acceder directamente a las

S7-300/400: si está configura‐
da la llamada del OB85 en caso
de error de acceso a la perife‐
ria, en la transferencia de la
memoria imagen de proceso
de las áreas de transferencia
del sistema al controlador IO de
nivel superior se produce la lla‐
mada al OB 85.
La conexión de bus entre el con‐
trolador IO y el I-Device se resta‐
blece y el I-Device es reincorpo‐
rado al tráfico de datos de usua‐
La conexión de comuni‐ rio por el controlador IO.
cación entre el controla‐
dor IO y el I-Device está
interrumpida (interrup‐
ción de bus).
Ambas CPU están en
RUN (controlador IO de
nivel superior e I-Devi‐
ce).

S7-300/400/1500: observe la
advertencia bajo esta tabla so‐
bre las particularidades al
arrancar el I-Device.
Llamada del OB 86 (recupera‐
ción de estación).
Llamada del OB 83 para las
áreas de transferencia de en‐
trada al controlador IO de nivel
superior.
Hasta la llamada del OB 83, al
acceder directamente a las
áreas de transferencia de en‐
trada al controlador IO de nivel
superior se produce la llamada
al OB 122.

S7-300/400: si está configu‐
rada la llamada del OB85 en
caso de error de acceso a la
periferia, en la transferencia
de la memoria imagen de pro‐
ceso de las áreas de transfe‐
rencia del sistema al I-Device
se produce la llamada al
OB 85.
S7-300/400/1500: Llamada
del OB 86 (recuperación de la
estación).
Hasta la llamada del OB 86,
al acceder directamente a las
áreas de transferencia al IDevice se llama al OB 122.
S7-300/400: si está configu‐
rada la llamada del OB85 en
caso de error de acceso a la
periferia, en la transferencia
de la memoria imagen de pro‐
ceso de las áreas de transfe‐
rencia del sistema al I-Device
se produce la llamada al
OB 85.

S7-300/400: si está configura‐
da la llamada del OB85 en caso
de error de acceso a la perife‐
ria, en la transferencia de la
memoria imagen de proceso
de las áreas de transferencia
de entrada del sistema al con‐
trolador IO de nivel superior se
produce la llamada al OB 85.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3221

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nota
Particularidades al arrancar el I-Device
A diferencia del aviso de la recuperación de estación de los dispositivos IO en el controlador
IO que está completamente incluido en una llamada del OB 86, la notificación de la
recuperación de estación de un controlador IO de nivel superior en el I-Device se divide en 2
partes:
1. Llamada del OB 86: Se ajustan los valores iniciales para las salidas del I-Device. Sin
embargo, los valores de entrada aún no son válidos, lo serán con la llamada del OB 86 en
el controlador IO de nivel superior.
2. Llamada del OB 83 para cada área de transferencia de entrada. Con esta llamada se indica
la validez de un área de transferencia de entrada. El arranque del I-Device sólo se
considerará finalizado cuando se haya llamado al OB 83 para las áreas de transferencia de
entrada. Este paso puede retrasarse significativamente o incluso suspenderse en las
siguientes situaciones:
– El controlador IO de nivel superior está en STOP: Al OB 83 se llama sólo en la transición
de STOP→RUN del controlador IO de nivel superior.
– La comunicación del IRT se ha interrumpido, p. ej. porque falla el maestro Sync, a causa
de errores de topología, etc.: el OB 83 sólo arranca cuando se ha restaurado la
comunicación IRT.

Consulte también
OB de cambio de módulo (OB 83) (Página 933)
OB de fallo del rack (OB 86) (Página 943)
OB de error de acceso a la periferia (OB 122) (Página 963)
OB de error de ejecución del programa (OB 85) (Página 939)

Diagnóstico online de los dispositivos I
En principio el diagnóstico online de los I-Devices no se diferencia del diagnóstico online de los
dispositivos IO "normales".

Visualización del estado de diagnóstico al establecer una conexión online
En función del dispositivo que haya seleccionado al establecer una conexión online, se
muestra la información siguiente:
● Ha seleccionado el controlador IO de nivel superior:
En el árbol del proyecto se muestra el estado de diagnóstico del I-Device en el controlador
IO en la carpeta "Periferia descentralizada". En el árbol del proyecto no se muestra el
estado de diagnóstico del I-Device.
● Ha seleccionado el I-Device que se ha asignado a este controlador IO.
En el árbol del proyecto se muestra el estado de diagnóstico del I-Device. No se muestra
el estado de diagnóstico del I-Device que se encuentra bajo el controlador IO en la carpeta
"Periferia descentralizada".

3222

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Vista Online y diagnóstico
En función del dispositivo que haya seleccionado al iniciar la vista Online y diagnóstico, se
muestra la información siguiente:
● Ha seleccionado el controlador IO de nivel superior y está conectado online con este
dispositivo:
La vista Online y diagnóstico muestra los datos de diagnóstico del I-Device desde el punto
de vista del controlador IO de nivel superior. La visualización se corresponde con la de un
controlador IO "normal".
● Ha seleccionado el I-Device que se ha asignado a este controlador IO y está conectado
online con este dispositivo:
La vista Online y diagnóstico muestra los datos de diagnóstico del I-Device desde el punto
de vista local, es decir, desde el punto de vista del I-Device. La visualización se
corresponde con la de un dispositivo IO "normal".

Visualización en la lista de los dispositivos accesibles
En la lista de los dispositivos accesibles se muestra el I-Device como una CPU "normal".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3223

Configuración de dispositivos y redes
1.4 Crear configuraciones

Dispositivos IO que cambian en funcionamiento
Docking Station - Dispositivos IO que cambian en funcionamiento
Uso de dispositivos IO que cambian durante el funcionamiento ("puerto interlocutor cambiante") en una
Docking Station
En la siguiente figura se representa una célula de automatización con un Docking System y
varias Docking Units.

352),1(7
,QGXVWULDO(WKHUQHW
'RFNLQJ6\VWHP
6&$/$1&(;

'RFNLQJ8QLW
(7SUR

'RFNLQJ8QLW
(7SUR

&RQWURODGRU,2

Figura 1-128

(7SUR

(7SUR

'RFNLQJ8QLW

'RFNLQJ8QLW

(7SUR

(76

Dispositivos IO cambiantes (puertos interlocutores) en una Docking Station

Requisitos aplicativos
Al crear un Docking System con dispositivos IO que cambian durante el funcionamiento deben
observarse los siguientes aspectos:
● En la configuración, los dispositivos IO de todas las Docking Units deben estar
desactivados por defecto.
● En cada momento solo puede haber una Docking Unit activa, es decir, que solo pueden
estar activos los dispositivos IO de una unidad. Todos los dispositivos IO de las otras
Docking Units deben estar desactivados o deben desactivarse antes de poder activar los
dispositivos IO de una Docking Unit. Esto se logra con la instrucción "D_ACT_DP".

3224

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Para activar una Docking Unit se establece una conexión física con ella y con sus
dispositivos IO y a continuación se conectan (Power ON) todos los dispositivos IO. Al
mismo tiempo se deben activar en el programa de usuario todos los dispositivos IO de esa
Docking Unit mediante la instrucción "D_ACT_DP".
● Una vez recibida la respuesta "Dispositivo IO activado", acceda al dispositivo IO con el
comando de acceso directo a periferia.
● Llame la instrucción "D_ACT_DP" para activar y desactivar el dispositivo IO, a ser posible
al comienzo del ciclo del OB 1.

Campo de aplicación de dispositivos IO que cambian durante el funcionamiento
La funcionalidad PROFINET de dispositivos IO que cambian durante el funcionamiento
("puerto interlocutor cambiante") puede utilizarse p. ej. para el cambio de herramientas en
robots. Algunas herramientas típicas son p. ej.:
● Pinzas de soldar y
● Herramientas de fijación de piezas de producción
Nota
Número de dispositivos IO que cambian durante el funcionamiento ("puerto interlocutor
cambiante") - Número de Docking Units
Para obtener tiempos de cambio de herramienta lo más cortos posible es necesario
observar los siguientes puntos, que varían en función de la CPU o del CP utilizados:
● Solo pueden realizar un arranque optimizado los dispositivos IO configurados con la
funcionalidad PROFINET "Arranque priorizado". El número de dispositivos IO
configurados con esta funcionalidad PROFINET está limitado.
● Solo se puede activar al mismo tiempo un número determinado de dispositivos IO (en
función de los recursos disponibles de la instrucción "D_ACT_DP"), por lo que una
Docking Unit no debería contener más del número correspondiente de dispositivos IO.
Si en una Docking Unit funcionan más dispositivos IO, deberán activarse sucesivamente
uno tras otro, lo cual prolongará el tiempo necesario.
Ejemplo: Una CPU S7 319-3 PN/DP puede manejar como máximo 32 dispositivos IO con
arranque priorizado y puede activar al mismo tiempo 8 dispositivos IO por cada instrucción
"D_ACT_DP".
Por ello, para una aplicación optimizada en el tiempo una Docking Unit no debería contener
más de 8 dispositivos IO y en todas las Docking Units cambiantes no deberían utilizarse
más de 32 dispositivos IO.

Limitaciones en la interconexión
En los siguientes casos no es posible realizar una interconexión con un puerto interlocutor:
● El puerto interlocutor tiene un tipo de cable no apto. En tal caso hay que insertar el
convertidor de medios desde el catálogo.
● El puerto interlocutor está bloqueado (desactivado).
● Los dos puertos a interconectar pertenecen a la misma interfaz (solo es posible
interconectar puertos de diferentes interfaces en una estación).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3225

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Está intentando establecer una conexión en anillo con un módulo que no es apto para la
redundancia.
● Si los dos puertos a interconectar pertenecen a diferentes subredes Ethernet.
● El puerto de una interfaz PROFINET de un controlador IO no se puede configurar
directamente con la función de cambio de dispositivo IO durante el funcionamiento ("puerto
interlocutor cambiante").

Configurar Docking Units en un Docking System
Configurar Docking Units en un Docking System
Para configurar varias Docking Units en un Docking System, proceda del siguiente modo:
1. Configure la configuración hardware de la forma habitual; considere los dispositivos IO que
se corresponden con los partner cambiantes como dispositivos IO normales.
2. Abra en la ventana de inspección las propiedades del puerto en el que quiere usar los
dispositivos IO cambiantes (puertos interlocutores cambiantes).
3. En "General > Interfaz PROFINET > Opciones avanzadas > Puerto RJ45 100 Mbits [Xn Pm]
> Interconexión de puertos", active la casilla de verificación "Interlocutores alternativos".
4. Inserte el partner alternativo en la tabla de la forma descrita en el capítulo "Interconectar
puertos".

Consulte también
Interconectar puertos con puertos partner cambiantes (Página 3226)
Optimizar los tiempos de arranque (Página 3228)

Interconectar puertos con puertos partner cambiantes
Requisitos
● Todos los dispositivos que intervienen admiten la configuración de topología
● Si el controlador IO, los dispositivos IO cambiantes (Docking Unit) y el switch (Docking
System) en el que funcionan los dispositivos IO admiten esta funcionalidad.
● Si la Docking Unit está conectada con un switch compatible con la funcionalidad
PROFINET "Arranque priorizado" (p. ej. de la familia SCALANCE X200IRT).

Ejemplo
● Controlador IO: CPU 416-3 PN/DP, CPU 1516‑3 PN/DP
● Docking System: Scalance X-200IRT
● Docking Units (dispositivos IO cambiantes): p. ej., 2 x ET 200pro (IM 154-4)

3226

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento
En la descripción del procedimiento se presupone la configuración del ejemplo citado
anteriormente. Para interconectar los puertos, proceda del siguiente modo:
1. Conecte entre sí todas las interfaces PROFINET de los dispositivos en la vista de redes.
2. Seleccione en la vista de redes o dispositivos el Docking System (el Scalance X200 IRT)
cuyo puerto desea interconectar.
3. Abra las propiedades del dispositivo en la ventana de inspección.
4. En la lista desplegable "Puerto interlocutor" que se encuentra en "Propiedades > Interfaz
PROFINET > Opciones avanzadas > Puerto RJ45 100 Mbit [Xn Pm] > Interconexión de
puertos", seleccione el puerto interlocutor para la CPU (controlador IO).
Los puertos de la CPU y del Docking System (Scalance) están interconectados entre sí.
5. El Docking System sigue seleccionado: Seleccione ahora para cualquier otro puerto no
interconectado los puertos interlocutores para los dispositivos IO:
– Active la casilla de verificación "Interlocutor alternativo".
Se muestra una tabla de los puertos interlocutores.
– Dentro de la tabla, haga clic en la línea "<Agregar interlocutor alternativo...> para abrir
una lista desplegable.
En ella se muestran todos los dispositivos con sus puertos no interconectados para su
selección.
– Seleccione el puerto para la primera Docking Unit.
– Haga clic en la fila siguiente de la tabla y seleccione otro puerto interlocutor alternativo
adicional.
– Repita los pasos arriba mencionados hasta que todos los puertos interlocutores
necesarios estén registrados en la tabla.
Nota
Uso de un CP 1243-1 (WAN-CP)
Si se usa una CPU S7-1200 con CP 1243-1, se sigue el procedimiento anterior, pero en lugar
de la interfaz PROFINET del controlador IO se utiliza la interfaz Ethernet del CP.
Nota
Exportación CAx de una configuración PROFINET para proyectos de cambiadores de
herramientas
Si hay una configuración PROFINET con la casilla de verificación "Interlocutor alternativo"
activada, debe tenerse en cuenta lo siguiente a la hora de exportar datos CAx: el ajuste
"Interlocutor alternativo" no se soporta para la exportación. Esto significa que en una posterior
reimportación faltará este ajuste o bien la conexión topológica.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3227

Configuración de dispositivos y redes
1.4 Crear configuraciones

Interconexión de varios dispositivos IO con dispositivos IO que pueden cambiarse en funcionamiento
Los dispositivos IO de una Docking Unit interconectados en línea con dispositivos IO que
pueden cambiar en funcionamiento ("interlocutores alternativos") se configuran de la forma
habitual con el puerto del dispositivo IO cambiante, es decir, el dispositivo IO interconectado
en línea no tiene entonces ningún puerto interlocutor cambiante.

Borrar el puerto interlocutor
Para eliminar la interconexión del puerto interlocutor que cambia en funcionamiento, proceda
del siguiente modo:
1. En la tabla de interlocutores alternativos, haga clic en la fila en la que está registrado el
puerto interlocutor alternativo que se desea eliminar y expanda la lista de selección de
puertos alternativos (triángulo negro).
2. En la lista, seleccione la entrada "Cualquier interlocutor".
El puerto interlocutor alternativo se elimina de la tabla.

Consulte también
¿Qué es el arranque priorizado? (Página 3228)

Optimizar los tiempos de arranque
¿Qué es el arranque priorizado?
Definición
El arranque preferente, también denominado "Fast Start-Up" o "arranque rápido", designa las
funciones de PROFINET IO para acelerar el arranque de dispositivos IO en un sistema
PROFINET IO con comunicación RT e IRT. Estas reducen el tiempo que necesitan los
dispositivos IO configurados para retornar al intercambio cíclico de datos de usuario en los
siguientes casos:
● Después de un corte de alimentación
● Después de recuperarse la estación
● Después de la activación de dispositivos IO

Ventajas
La funcionalidad PROFINET "Arranque preferente" permite disponer de aplicaciones
PROFINET IO con cambio permanente de piezas de máquinas o herramientas y de sus
dispositivos IO. Los tiempos de espera de varios segundos entre las secuencias del
rearranque se minimizan por optimización. Con ello se acelera el proceso de fabricación con
dispositivos IO cambiantes, p. ej. en aplicaciones con cambiadores de herramientas, y permite
una mayor rentabilidad de la producción.
La funcionalidad PROFINET "Arranque preferente" también aporta un importante aumento del
rendimiento en aplicaciones en las que se requiere un tiempo de arranque reducido de los

3228

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
dispositivos IO después de "Power ON", después de un fallo de la estación y su posterior
recuperación, o al activar los dispositivos IO.

Propiedades
Las siguientes propiedades están disponibles con la funcionalidad PROFINET "Arranque
preferente".
● Disponibilidad para la comunicación de los dispositivos IO (periferia descentralizada) hasta
un mínimo de 500 ms.
● Puede utilizar el arranque preferente para dispositivos IO (periferia descentralizada) tanto
con comunicación RT como IRT.

Tiempos de arranque
La duración del tiempo de arranque de un dispositivo IO (periferia descentralizada) con la
funcionalidad PROFINET "Arranque preferente" depende de los siguientes aspectos:
● De los dispositivos IO utilizados (periferia descentralizada)
● De la extensión de la periferia del dispositivo IO (periferia descentralizada)
● De los módulos utilizados del dispositivo IO (periferia descentralizada)
● Del controlador IO utilizado
● Del switch utilizado
● Ajuste de puertos
● Del cableado
● Clase RT configurada del dispositivo IO
Nota
Arranque preferente después del primer arranque
El arranque preferente de los dispositivos IO no está disponible hasta después de la primera
parametrización del dispositivo IO en cuestión en el primer arranque del sistema
PROFINET IO. También en caso de reponer una pieza o después de "Reset to factory
Settings" (restablecimiento de los ajustes de fábrica), el primer arranque es un arranque
estándar en los dispositivos IO configurados de la forma correspondiente.
Nota
En las siguientes situaciones, es posible que se produzcan tiempos de arranque de hasta 8 s
a pesar del arranque preferente:
● Un dispositivo IO se desacopla y se acopla nuevamente en 8 s.
● En una estación de acoplamiento se acoplan varios dispositivos IO físicos como dispositivo
IO con un nombre de dispositivo específico y una configuración IP determinada (p. ej., una
estación de acoplamiento para un sistema de transporte sin conductor).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3229

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para conseguir el tiempo de arranque mínimo posible de 500 ms, deben aplicarse las
siguientes medidas:
● Ajuste de los puertos en el dispositivo IO
● Cableado en función de los dispositivos PROFINET interconectados
● Medidas en el programa de usuario

Ajustar el arranque priorizado
Requisitos
La funcionalidad PROFINET "Arranque priorizado" sólo puede activarse en los dispositivos IO
(periferia descentralizada) en los siguientes casos:
● El controlador IO utilizado puede priorizar dispositivos IO específicos en el arranque.
● El dispositivo IO utilizado admite la priorización.
Nota
Arranque priorizado
En el caso de un arranque acelerado (arranque priorizado) deben cumplirse en especial los
requisitos referentes al ajuste de la interfaz PROFINET y del cableado para conseguir los
tiempos de arranque mínimos posibles.

Procedimiento
1. Seleccione en la vista de redes o dispositivos el dispositivo IO cuyo arranque debe
acelerarse.
2. Abra en la ventana de inspección las propiedades del dispositivo IO.
3. Vaya a "Interfaz PROFINET > Opciones avanzadas > Opciones de interfaz".
4. Active la casilla de verificación "Activar arranque priorizado".
5. Cargue la configuración en el controlador IO.
Observación:
En dispositivos en que puede configurarse el modo de operación DP, la casilla de verificación
descrita anteriormente se encuentra en "Interfaz PROFINET > Modo de operación". Son de
este tipo de dispositivos, por ejemplo el CP 1616 para estaciones PC.
Nota
Número de dispositivos IO (periferia descentralizada) con arranque priorizado
Dentro de un sistema PROFINET IO sólo puede utilizarse un número máximo de dispositivos
IO con la funcionalidad PROFINET "Arranque priorizado". El número depende del controlador
IO utilizado.

3230

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
Optimizar los ajustes de los puertos en el dispositivo IO y el controlador IO (Página 3231)

Optimizar los ajustes de los puertos en el dispositivo IO y el controlador IO
Optimizar los ajustes de los puertos en el dispositivo IO y el controlador IO
En caso de cableado con CU, durante el arranque del dispositivo IO se comprueba el medio de
transferencia y la opción dúplex.
Estas comprobaciones requieren algún tiempo, que se puede reducir gracias a la
configuración precisa de estas opciones. Asegúrese de que la configuración realizada se
corresponde con las condiciones reales (uso de los cables correctos).

Adaptar las propiedades del puerto local y del puerto interlocutor
Con el fin de adaptar los ajustes del puerto local y del puerto interlocutor, proceda del siguiente
modo:
1. Seleccione primero el puerto local y después el puerto interlocutor y realice los siguientes
pasos con ambos puertos.
2. En las propiedades de cada puerto adapte en "Opciones de puerto" el ajuste "Medio de
transmisión/dúplex". Utilice el ajuste "TP 100 Mbit/s dúplex".
3. En "Opciones de puerto" desactive la casilla de verificación "Activar autonegotiation" en
ambos puertos.

Configuración de redundancia de medios
Información importante sobre la redundancia de medios
Posibilidades de la redundancia de medios
Hay disponibles diferentes posibilidades que aumentan la disponibilidad de la red de una red
Industrial Ethernet con topologías en línea ópticas o eléctricas:
● Interconexión de redes
● Conexión en paralelo de rutas de transmisión
● Concentración de una topología en línea en una topología en anillo

Redundancia de medios en topologías en anillo
Los dispositivos de topologías en anillo pueden ser switches externos y/o los switches
integrados de módulos de comunicación.
Para instalar una topología en anillo con redundancia de medios tiene que agrupar los dos
extremos libres de una topología en red con forma de línea en un dispositivo. La concentración
de la topología en línea en una topología en anillo se realiza mediante dos puertos (puertos en

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3231

Configuración de dispositivos y redes
1.4 Crear configuraciones
anillo) de un dispositivo en el anillo. Este dispositivo es el administrador de redundancia. Los
demás dispositivos del anillo son los clientes de la redundancia.
En la imagen siguiente se muestra la interconexión en forma de anillo de los dispositivos IO:

7HOHJUDPDVGHSUXHED

$GPLQLVWUDGRUGH
UHGXQGDQFLD

&OLHQWHVGHUHGXQGDQFLD

7HOHJUDPDVGHSUXHED

los dos puertos en anillo de un dispositivo son los puertos que generan la conexión a los dos
dispositivos vecinos en una topología en anillo. En la configuración de cada dispositivo se
puede seleccionar y definir el puerto en anillo.
Antes de realizar la concentración física del anillo, cargue la configuración en cada dispositivo.

Funciones de la redundancia de medios en una topología en anillo
Si el anillo se interrumpe en algún punto, se vuelven a configurar automáticamente las rutas de
datos entre los dispositivos individuales. Después de la reconfiguración, se puede volver a
acceder a los dispositivos en la topología recién creada.
En el administrador de redundancia se separan los dos puertos en anillo si el funcionamiento
en red no presenta interrupciones, con el fin de que no circulen tramas de datos. Desde el
punto de vista de la transmisión de datos, la topología en anillo se convierte en una línea. El
administrador de redundancia vigila la topología en anillo, y envía tramas de prueba desde el
puerto en anillo 1 y el puerto en anillo 2. Estas tramas recorren el anillo en ambas direcciones
hasta que llegan al otro puerto del administrador de redundancia.
La causa de la interrupción del anillo puede ser un fallo de la conexión entre dos dispositivos
o el fallo de un dispositivo en el anillo.
Si no circulan hasta el otro puerto en anillo las tramas de prueba del administrador de
redundancia al interrumpirse el anillo, este administrador interconecta ambos puertos en anillo.
En esta ruta sustitutiva se vuelve a crear una conexión que funciona entre todos los
dispositivos existentes con la forma de una topología en red con apariencia de línea.
En cuanto se elimina la interrupción, se vuelven a utilizar las vías de transmisión originales, se
separan el uno del otro los dos puertos en anillo del administrador de redundancia y se informa
a los clientes de redundancia acerca del cambio. Ahora, el tráfico de datos vuelve a funcionar
como antes de la interrupción.

3232

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimientos de la redundancia de medios
En STEP 7 puede utilizar el procedimiento de la redundancia de medios MRP (Media
Redundancy Protocol) para las topologías en anillo, ya que pueden participar hasta 50
dispositivos por anillo.
Además, existen también el procedimiento de redundancia de medios en tiempo real MRPD
(Media Redundancy with Planned Duplication of frames).

Tiempo de reconfiguración
El tiempo que transcurre entre la interrupción del anillo y el restablecimiento de una topología
lineal operativa (con reconstrucción de la tablas de direcciones) recibe el nombre de tiempo de
reconfiguración. Suele ser inferior a 200 ms.
Si el tiempo de supervisión de respuesta de un dispositivo IO es menor que el tiempo de
reconfiguración del anillo, existe el riesgo de que se interrumpa la comunicación hacia el
dispositivo IO (fallo de estación).
Recomendación: durante la configuración, elija el tiempo de supervisión de respuesta de un
dispositivo IO superior a los 200 ms (en las propiedades del dispositivo IO: Interfaz PROFINET
> Opciones avanzadas > Configuración en tiempo real).

Consulte también
Media Redundancy Protocol (MRP) (Página 3233)
Configurar la redundancia de medios (Página 3236)
Media Redundancy with Planned Duplication of frames (MRPD) (Página 3239)
Administración de dominios MRP (Página 3241)

Media Redundancy Protocol (MRP)
Media Redundancy Protocol (MRP)
El procedimiento "MRP" funciona de acuerdo con el Media Redundancy Protocol (MRP), que
se especifica en la norma IEC 62439-2.

Requisitos
● Todos los dispositivos del anillo soportan el procedimiento MRP.
● Se han respetado las normas descritas más abajo para la topología. STEP 7 supervisa las
reglas durante la compilación y emite los avisos correspondientes.

Topología
La figura siguiente muestra una posible topología para dispositivos en un anillo con MRP. Los
dispositivos dentro del óvalo ensombrecido están dentro del dominio de la redundancia.
Ejemplo de una topología en anillo con el método de redundancia de medios MRP:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3233

Configuración de dispositivos y redes
1.4 Crear configuraciones
+0,

3*3&

(763

6
&3$GYDQFHG
6ZLWFK
6&$/$1&(
;

352),1(7,QGXVWULDO(WKHUQHW

3&&3

6

(703

6

(7SUR

Para la topología en anillo con redundancia de medios según el método MRP rigen las
siguientes reglas:
● Todos los dispositivos tienen que estar conectados entre sí mediante puertos en anillo.
● Todos los dispositivos del anillo pertenecen al mismo dominio de redundancia.
● Un dispositivo del anillo es el administrador de redundancia.
– Un único dispositivo cumple la función de "administrador". Ningún otro dispositivo puede
cumplir la función de "administrador". O bien:
– Varios dispositivos del anillo cumplen la función de "administrador (auto)". En este caso,
los dispositivos con la función de "administrador (auto)" negocian entre sí quién será
realmente el administrador de redundancia. En este caso ningún dispositivo puede
cumplir la función de "administrador".
● Todos los demás dispositivos pertenecientes al anillo son clientes de redundancia.
● Pueden reunirse en un anillo como máximo 50 dispositivos.
Los dispositivos no aptos para MRP pueden integrarse en el anillo con un switch SCALANCE X
o un PC con CP 1616, por ejemplo.

Regla para cargar los dispositivos de un dominio MRP
Al cargar dispositivos de un dominio MRP, si existe una configuración MRP no válida puede
ocurrir que circulen frames y que se produzca un fallo de la red.
Ejemplo: se modifican las funciones MRP de varios dispositivos y la configuración se carga
sucesivamente en los dispositivos involucrados. Pueden generarse configuraciones que
violen las reglas mencionadas anteriormente, p. ej., en un momento pueden existir
simultáneamente en el anillo dispositivos con la función de "administrador" y con la función de
"administrador (auto)".

3234

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para que una configuración MRP no válida no produzca un fallo de la red, antes de efectuar la
carga es necesario deshacer el anillo. Proceda del siguiente modo:
1. Deshaga el anillo.
2. Cargue desde el proyecto la configuración MRP que sea coherente y no contenga fallos en
todos los dispositivos que intervienen, y asegúrese de que los dispositivos se hallan en
intercambio de datos (es decir, que se han creado las relaciones de aplicación (AR)).
3. Cierre el anillo.

Condiciones
MRP y RT
El modo RT es posible cuando se utiliza MRP.
Nota
La comunicación RT se interrumpe (fallo de estación), si el tiempo de reconfiguración del anillo
es superior al tiempo de supervisión de respuesta seleccionado para los dispositivos IO. Por
esta razón, seleccione un tiempo de supervisión de respuesta suficientemente grande para los
dispositivos IO.
MRP y IRT
El modo IRT no es posible junto con MRP.
Si desea utilizar en un anillo la redundancia de medios junto con IRT, utilice exclusivamente
dispositivos que soporten el procedimiento MRPD.
MRP y TCP/IP (Open User Communication a través, p. ej., de TSEND, acceso a la red a través
de HTTP, ...)
La comunicación TCP/IP es posible junto con MRP, dado que se vuelven a enviar, si fuera
necesario, los paquetes de datos perdidos.
MRP y arranque priorizado
Si se configura MRP en un anillo, en los dispositivos que intervienen no es posible utilizar la
función "Arranque priorizado" en aplicaciones PROFINET.
Si desea utilizar la función "Arranque preferente" para un dispositivo, el mismo no puede
formar parte del anillo.

Consulte también
Configurar la redundancia de medios (Página 3236)
Información importante sobre la redundancia de medios (Página 3231)
Configuración de anillos múltiples (Página 3242)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3235

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configurar la redundancia de medios
Configurar MRP
Para crear una configuración PROFINET IO con MRP en STEP 7, proceda del siguiente modo:
1. Cree un anillo en la vista topológica mediante la interconexión de los puertos. En primer
lugar, interconecte los dispositivos en una topología en línea. Conecte el puerto no ocupado
del último dispositivo de la línea con el puerto no ocupado del primer dispositivo.
En el siguiente ejemplo se muestra una CPU 1516-3 PN/DP y dos módulos de interfaz IM
155-6 PN HF interconectados en un anillo en la vista topológica de STEP 7.

2. En la vista de redes, seleccione el sistema PROFINET IO.
3. En la ventana de inspección, desplácese hasta "Propiedades" > "General" > "PROFINET"
> "Dominios MRP", campo "Interconexión de anillo".
En este campo se muestran todos los anillos topológicos en el sistema IO con los dominios
MRP correspondientes.

3236

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
4. En el campo "Interconexión de anillo", seleccione el anillo creado anteriormente.
La tabla que se muestra a continuación muestra todos los dispositivos PROFINET del anillo.
5. Ajuste la función de redundancia de medio de los dispositivos PROFINET en la columna
"Función MRP".
Si los dispositivos se interconectan, las funciones MRP estarán ajustadas inicialmente a
"No es dispositivo del anillo" en todos los dispositivos. Esta configuración no es coherente.
Existen las siguientes posibilidades: Las funciones MRP pueden asignarse manualmente
de acuerdo con las reglas de configuraciones MRP (consulte las posibilidades de ajuste
"Redundancia de medio"). Para que sea STEP 7 quien asigne automáticamente las
funciones MRP; consulte el apartado siguiente.

Configuración de MRP automática
También es posible asignar automáticamente las funciones de redundancia de medio de los
dispositivos PROFINET del anillo.
Para que se asignen automáticamente las funciones de redundancia de medio, haga clic en el
botón "Configurar MRP automáticamente". STEP 7 asigna automáticamente una función de
redundancia de medio a cada dispositivo del anillo. Tras la configuración automática de MRP
pueden modificarse las funciones de redundancia de medio en la columna de funciones MRP
de la forma habitual.

Posibilidades de ajuste de la "Redundancia de medios"
Función de redundancia de medios
Según sea el dispositivo utilizado, están disponibles las funciones "Manager", "Manager
(Auto)", "Client" y "No es estación del anillo".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3237

Configuración de dispositivos y redes
1.4 Crear configuraciones
Reglas:
● Un anillo solo puede tener un dispositivo que tenga la función "Manager". No se permiten
más dispositivos con la función "Manager" o "Manager (Auto)". Los demás dispositivos
pueden tener únicamente la función "Client".
● Si un anillo no tiene un dispositivo con la función "Manager", entonces el anillo debe
disponer de como mínimo un dispositivo con la función "Manager (auto)". Puede haber
tantos dispositivos con la función "Client" como se desee.
Puerto en anillo 1 / Puerto en anillo 2
Seleccione aquí el puerto que quiera configurar como puerto en anillo 1 o como puerto en
anillo 2. La lista desplegable muestra la selección de los puertos posibles para cada tipo de
dispositivo. Si los puertos vienen definidos de fábrica, los campos aparecen desactivados.
Si usa la puesta en marcha de un nivel (solo dispositivos Siemens con funciones MRP
asignadas automáticamente en el anillo, tras hacer clic en "Configurar MRP
automáticamente"), utilice los puertos en anillo preajustados de STEP 7.

Alarmas de diagnóstico
Active la casilla de verificación "Alarmas de diagnóstico", si deben emitirse alarmas de
diagnóstico para el estado de MRP en la CPU local. Se pueden emitir las siguientes alarmas
de diagnóstico:
● Fallos de cableado o de puerto
Si se producen los siguientes fallos en los puertos en anillo se generan alarmas de
diagnóstico:
– Un vecino del puerto en anillo no soporta MRP.
– Un puerto en anillo está conectado a uno que no lo es.
– Un puerto en anillo está conectado al puerto en anillo de otro dominio MRP.
● Interrupción / recuperación (solo administrador de redundancia)
En caso de interrupción del anillo y de recuperación de la configuración original, el
administrador de redundancia genera alarmas de diagnóstico. La aparición de estas dos
alarmas en un plazo de 0,2 segundos indica que se ha interrumpido el anillo.
En el programa de usuario existe la posibilidad de reaccionar a estos eventos programando la
reacción correspondiente en el OB de alarma de diagnóstico (OB 82).

Sugerencia: Borrar dominios MRP innecesarios
Si desea borrar dominios MRP que ya no necesita porque ya no contienen dispositivos, por
ejemplo, seleccione el área "Dominios MRP" en los sistemas PROFINET IO seleccionados.
1. Navegue hasta la primera tabla. Es la tabla en la que se selecciona el dominio
predeterminado.
2. Seleccione la fila que contiene el dominio MRP que desea borrar y pulse la tecla <Supr>.
Es posible borrar todos los dominios MRP excepto el predeterminado.

3238

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
Configuración de anillos múltiples (Página 3242)
Media Redundancy Protocol (MRP) (Página 3233)
Información importante sobre la redundancia de medios (Página 3231)
Administración de dominios MRP (Página 3241)

Media Redundancy with Planned Duplication of frames (MRPD)
Ampliación de MRP "Media Redundancy with Planned Duplication of frames" (MRPD)
La ampliación de MRP "Media Redundancy with Planned Duplication of frames" (MRPD)
aporta la ventaja de que, en caso de fallo de un dispositivo o un cable del anillo, el resto de
dispositivos siguen recibiendo datos IO sin interrupción y con tiempos de actualización breves.
MRPD se basa en IRT y MRP. Para conseguir una redundancia de medio con tiempos de
actualización cortos, los dispositivos PROFINET que participan en el anillo envían sus datos
en ambos sentidos. Los dispositivos reciben dichos datos en los dos puertos en anillo, de modo
que se suprime el tiempo de reconfiguración del anillo.

Requisitos para la redundancia de medio con MRPD
● Todos los dispositivos del anillo deben soportar MRPD; p. ej., módulo de interfaz IM
155-6 PN HS a partir de la versión de firmware V4.0, Scalance X300 a partir de V4.0.
También los dispositivos (terminales) del switch que intercambian cíclicamente datos IRT
con un componente del anillo deben soportar MRPD.
Para saber si un dispositivo soporta MRPD consulte el texto informativo del dispositivo en
el catálogo de hardware de STEP 7 (dispositivos y redes).
● Ya ha configurado MRP en todos los dispositivos del anillo. Los dispositivos que no se
encuentran en el anillo tienen asignada la función MRP "No es estación del anillo".
● Ya ha configurado IRT en todos los componentes participantes.

Configurar MRPD
No es necesario activar expresamente MRPD en STEP 7. En cuanto se cumplen los requisitos
de MRPD, la función queda disponible automáticamente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3239

Configuración de dispositivos y redes
1.4 Crear configuraciones

Niveles de redundancia de dispositivos IO con MRPD
El nivel de redundancia de un dispositivo IO indica hasta qué punto se ve afectada la
comunicación en tiempo real en caso de una interrupción de la red entre un dispositivo IO y su
controlador IO.
● Redundancia completa: No se ve afectada, ya que el controlador IO y el dispositivo IO se
encuentran en el mismo anillo.
● Redundancia parcial:
– Si la interrupción se produce en una parte no redundante (línea) entre el dispositivo IO
y el controlador IO, la comunicación en tiempo real se ve afectada.
– Si la interrupción se produce en la parte redundante (anillo), la comunicación en tiempo
real no se ve afectada.
● Sin redundancia: No existen rutas redundantes entre el dispositivo IO y su controlador IO,
por lo que la comunicación se ve siempre afectada.
La siguiente figura muestra los niveles de redundancia de los dispositivos IO en un ejemplo de
configuración con MRPD. Los tres dispositivos IO del anillo y el switch tienen el nivel de
redundancia "Redundancia completa". El dispositivo 4 tiene el nivel de redundancia
"Redundancia parcial", dado que la conexión entre el switch y el dispositivo IO no es
redundante.








①
②
③
④





Controlador IO en anillo
Dispositivo IO en anillo con nivel de redundancia "Redundancia completa"
Switch en anillo con nivel de redundancia "Redundancia completa"
Dispositivo IO con cable de derivación conectado en el anillo y nivel de redundancia "Redun‐
dancia parcial"

En STEP 7 se visualizan los niveles de redundancia además de otras propiedades del dominio
Sync:
Administración de dominios > Dominios Sync > ... > Dispositivos.

Ejemplo de aplicación: arquitectura de una topología de anillo sobre la base de "MRPD"
Pulsando el enlace siguiente se descargará un ejemplo de aplicación de la arquitectura de una
topología de anillo basada en MRPD:

3240

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
https://support.industry.siemens.com/cs/ww/es/view/109744035 (http://
support.automation.siemens.com/WW/view/es/109744035)

Consulte también
Información importante sobre la redundancia de medios (Página 3231)

Administración de dominios MRP
Las configuraciones para redundancia de medios pueden controlarse y ajustarse de forma
centralizada.

Requisitos
● Los componentes que intervienen tienen que ser compatibles con el Media Redundancy
Protocol (MRP).
● Los dispositivos deben estar configurados e interconectados topológicamente.

Procedimiento
Para abrir el dominio MRP, proceda del siguiente modo:
1. Seleccione una interfaz PROFINET cualquiera y, en la ventana de inspección, seleccione
el área "Opciones avanzadas > Redundancia de medios".
2. Haga clic en el botón "Ajustes del dominio".
O bien:
1. Seleccione la subred o el sistema IO.
2. En la ventana de inspección desplácese hasta el área "PROFINET > Administración de
dominios > Dominios MRP".
Aquí se puede determinar de forma centralizada qué dominio MRP va a ser el dominio
predeterminado; se pueden modificar los nombres de todos los dominios y revisar funciones
de redundancia y puertos en anillo.
Para cada dominio MRP se ofrece un resumen donde se muestra cuántas interfaces
PROFINET hay interconectadas en el anillo, cuántas interfaces PROFINET están fuera del
anillo, y el número de administradores de redundancia y de clientes de redundancia.
Pueden mostrarse agrupados los dispositivos del anillo, con sus nombres, el dominio MRP
correspondiente, la función de redundancia de medios y los puertos en anillo utilizados.
● Dominios MRP
La lista muestra los dominios MRP existentes en el sistema IO seleccionado.
● <Nombre del dominio MRP>
La lista muestra el número de interfaces PROFINET y de dispositivos con las
correspondientes funciones de redundancia para el dominio MRP seleccionado.
● Dispositivos
La lista muestra todos los dispositivos configurados del sistema IO seleccionado.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3241

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
Información importante sobre la redundancia de medios (Página 3231)
Configurar la redundancia de medios (Página 3236)

Configuración de anillos múltiples
Anillos múltiples
Los anillos múltiples se emplean para lograr una mayor disponibilidad de las redes
PROFINET IO con topología en estrella.
En una configuración de anillo múltiple, de un mismo switch parten varias líneas PROFINET
(topología en estrella). Las diferentes líneas PROFINET van de dispositivo IO a dispositivo IO.
Desde el último dispositivo IO de cada línea hay cables PROFINET que van de nuevo al switch,
conformando así varios anillos.
El switch actúa como administrador. El administrador debe tener dos puertos en anillo para
cada anillo. Son posibles varios anillos. P. ej., un SCALANCE X414 de versión de firmware
V3.10 o superior soporta hasta 4 anillos.
El administrador vigila cada anillo por separado: comprueba para cada anillo concreto (un
dominio MRP) si el trayecto de transferencia está intacto. Para ello utiliza una instancia MRP
en cada caso. Para cada anillo conectado se requiere una instancia MRP (STEP 7 la configura
automáticamente).
$UPDULR
&RQWURODGRU,2

$QLOOR053

6DOD

3242

6ZLWFK

3*3&

$QLOOR053Q

6DOD

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
Soportan anillos múltiples como administrador los dispositivos siguientes:
● SCALANCE X300 a partir de la versión V4.0
● SCALANCE X414 a partir de la versión V3.10

Reglas para la configuración de anillos múltiples
● Funciones MRP en anillos múltiples:
– Los dispositivos que pertenezcan a todos los anillos deben poseer la función MRP en
cada instancia, introducida en el atributo "SupportedMultipleRole" del archivo GSD.
– Los switches de la serie SCALANCE X300 a partir de V4.0 (solo mediante GSDML) y el
switch X414 a partir de la versión 3.10 permiten la función MRP "Manager" para anillos
múltiples.
● Si el dispositivo que pertenece a todos los anillos posee la función "Manager" en un anillo,
no debe haber ningún dispositivo con la función "Manager (Auto)" en ese anillo.

Configuración de anillos múltiples
Para ajustar una configuración MRP con anillos múltiples, proceda del siguiente modo:
1. En la vista topológica, interconecte los puertos en anillo de los dispositivos que deban
formar parte de un dominio MRP para formar un anillo.
2. En la vista de redes, seleccione el sistema PROFINET IO.
3. En la ventana de inspección, desplácese hasta "Propiedades" > "General" > "PROFINET"
> "Dominios MRP", campo "Interconexión de anillo".
En este campo se muestran todos los anillos topológicos en el sistema IO con los dominios
MRP correspondientes.
4. En el campo "Interconexiones del anillo", seleccione uno de los anillos creados
anteriormente.
La tabla que se muestra a continuación muestra todos los dispositivos PROFINET del anillo
seleccionado.
5. Ajuste la función de redundancia de medio de los dispositivos PROFINET en la columna de
funciones MRP.

Adaptar las funciones MRP predeterminadas
Si los dispositivos de la configuración de ejemplo se interconectan tal como se explica más
adelante, las funciones MRP estarán ajustadas inicialmente a "No es dispositivo del anillo" en
todos los dispositivos.
Esta configuración no es coherente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3243

Configuración de dispositivos y redes
1.4 Crear configuraciones
Existen las siguientes posibilidades:
● Las funciones MRP pueden asignarse manualmente de acuerdo con las reglas descritas
para configuraciones MRP. Para ello, edite las propiedades del sistema PROFINET IO,
área "Dominios MRP > Interconexiones del anillo".
● Puede configurar que sea STEP 7 quien asigne automáticamente las funciones MRP.
En ambos casos, seleccione un anillo MRP configurado (en el área "Dominios MRP >
Interconexiones del anillo") y haga clic en el botón "Configurar MRP de forma automática".
Repita la operación para todos los anillos MRP configurados.
Seguidamente, los anillos tienen asignados nuevos dominios MRP y las funciones e instancias
MRP están establecidas. La configuración es coherente.

Ejemplo de anillos múltiples
La figura siguiente muestra un ejemplo de configuración de anillos múltiples con dos anillos, ①
y ②.





En el ejemplo, el switch 1 forma parte de dos anillos MRP. El anillo 1 está formado por switch
1 y PLC 1, y el anillo 2 por switch 1 y dispositivo IO 1.
El administrador está en la intersección de los anillos 1 y 2. El administrador vigila ambos
anillos por separado. Para ello utiliza dos instancias MRP.
Una instancia MRP controla si todos los dispositivos del anillo 1 son accesibles y otra instancia
vigila si todos los dispositivos del anillo 2 son accesibles (en el ejemplo, un dispositivo en cada
caso).
Es posible configurar cada instancia MRP por separado.
La figura siguiente muestra las dos instancias MRP en el administrador (interfaz PROFINET
del switch). En el ejemplo, la instancia MRP 1 controla si los dispositivos del dominio MRP
"mrpdomain-1" son accesibles. La instancia MRP 2 se encarga de vigilar los dispositivos del
dominio MRP "mrpdomain-2".

3244

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

La figura siguiente muestra el anillo 1 (mrpdomain‑1). Los dispositivos que participan en
mrpdomain‑1 son la interfaz PROFINET de la CPU como "Client" y la instancia MRP 1 de la
interfaz PROFINET del switch como "Manager".

La figura siguiente muestra el anillo 2 (mrpdomain-2). Los dispositivos que participan en
mrpdomain‑2 son la interfaz PROFINET del dispositivo IO como "Client" y la instancia MRP 2
de la interfaz PROFINET del switch como "Manager".
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3245

Configuración de dispositivos y redes
1.4 Crear configuraciones

Sugerencia: Borrar dominios MRP innecesarios
Si desea borrar dominios MRP que ya no necesita, porque ya no contienen dispositivos, por
ejemplo, seleccione el área "Dominios MRP" con el sistema PROFINET IO marcado.
1. Navegue hasta la primera tabla. Es la tabla en la que se selecciona el dominio
predeterminado.
2. Seleccione la fila que contiene el dominio MRP que desea borrar y pulse la tecla <Supr>.
Es posible borrar todos los dominios MRP excepto el predeterminado.

Consulte también
Configurar la redundancia de medios (Página 3236)
Media Redundancy Protocol (MRP) (Página 3233)

3246

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración de PROFIenergy
Resumen de PROFIenergy
Ahorro de energía con PROFIenergy
PROFIenergy es una interfaz de datos basada en PROFINET que permite desconectar cargas
de forma coordinada y centralizada durante pausas independientemente del fabricante y del
equipo. De esta manera se pretende suministrar al proceso únicamente la energía
absolutamente necesaria. La mayoría de la energía es ahorrada por el proceso, el dispositivo
PROFINET solo contribuye al potencial de ahorro con algunos vatios.
3DXVD

&RQVXPRGHHQHUJ¯D

3DXVD

7LHPSR

Figura 1-129

Ahorro de energía en pausas con PROFIenergy

Principios básicos
La desconexión de los dispositivos PROFINET o de los módulos de potencia se efectúa
mediante comandos especiales en el programa de usuario del controlador PROFINET IO. Y no
será necesario utilizar hardware adicional, los dispositivos PROFINET interpretan
directamente los comandos de PROFIenergy.

Funcionamiento
Al principio y final de pausas, el responsable de la instalación activa o desactiva la función de
pausa de la instalación; a continuación, el controlador IO envía el comando de PROFIenergy
"Start_Pause" o "End_Pause" a los dispositivos PROFINET. El dispositivo interpreta
posteriormente el contenido del comando de PROFIenergy y se desconecta/se vuelve a
conectar.
A través de otras funciones adicionales de PROFIenergy se puede consultar información de
los dispositivos durante las pausas. El usuario puede aprovecharlas para transmitir el
comando "Start_Pause" o "End_Pause" a tiempo.

Instrucciones PROFIenergy para controladores IO
Para controlar y supervisar las funciones de PROFIenergy se necesitan dos instrucciones.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3247

Configuración de dispositivos y redes
1.4 Crear configuraciones
Con la instrucción PE_START_END se activa o desactiva de manera muy sencilla el estado de
reposo de los dispositivos PROFINET. La activación o desactivación se realiza mediante un
flanco entrante o un flanco saliente. La instrucción PE_START_END proporciona una interfaz
sencilla para ejecutar los comandos de PROFIenergy Start_Pause y End_Pause.
Con la instrucción PE_CMD pueden transferirse todos los comandos de PROFIenergy,
incluidos Start_Pause y End_Pause. Mediante los restantes comandos se pueden consultar,
por ejemplo, el estado actual de los dispositivos PROFINET o el comportamiento durante las
pausas. La instrucción PE_CMD permite un manejo cómodo de todas las funciones de
PROFIenergy.

Instrucción de PROFIenergy para dispositivos I
Con la instrucción PE_I_DEV se puede ejecutar PROFIenergy también en dispositivos I. Esta
instrucción recibe comandos de PROFIenergy en el dispositivo I y los pasa al programa de
usuario para ser procesados. Una vez que el comando ha sido procesado por el programa de
usuario, este vuelve a llamar la instrucción PE_I_DEV para enviar el acuse al controlador IO.
Para estas respuestas, el usuario dispone para cada comando de una instrucción auxiliar que
proporciona a la instrucción los datos de respuesta.
Las instrucciones se encuentran en la Task Card "Instrucciones" del editor de programas de
STEP 7.
Encontrará un ejemplo de aplicación en Internet (http://support.automation.siemens.com/WW/
view/es/41986454) en el portal Service & Support.

Configuración y programación
Las funciones se pueden integrar fácilmente en las instalaciones existentes. Para aplicar
PROFIenergy, en general no es necesaria una configuración (excepciones en "Véase
también"). Sin embargo, será necesario realizar algunas ampliaciones en el programa de
usuario:
● Antes de emitir el comando "Start_Pause", el usuario debe asegurarse de que la instalación
se encuentra en un estado seguro y apto para una pausa.
● Se deberá programar un control del tiempo restante para iniciar la pausa de los dispositivos
y para volver a conectar las estaciones a tiempo que están paradas (en función de los
tiempos necesarios de conexión y anticipación que requiere el dispositivo PROFINET
correspondiente).
● Se deben evaluar los mensajes de error de la instrucción PE_CMD y programar la
respuesta requerida en cada caso (p. ej. cancelación o continuación de otros comandos a
dispositivos PROFINET subordinados).

Consulte también
Configuración de PROFIenergy en ET 200S (Página 3249)
Ejemplo de aplicación de PROFIenergy (https://support.industry.siemens.com/cs/us/en/view/
109478388)
Ahorrar energía con SIMATIC S7 y SIMATIC HMI (TIA Portal) (https://
support.industry.siemens.com/cs/ww/es/view/58235225)

3248

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración de PROFIenergy en ET 200S
El sistema de periferia descentralizada ET 200S presenta una particularidad: En determinados
módulos de interfaz pueden configurarse cuáles son los grupos de potencial o los módulos de
potencia del dispositivo IO que están activados para PROFIenergy.

Particularidades con módulos de interfaz ET 200S HF V7.0 y ET 200S FO V7.0
Se puede configurar el comportamiento inicial de los módulos de potencia (p. ej. el módulo de
potencia PM-E DC24V/8A RO que puede conectarse) para los dispositivos IO mencionados,
de manera que no sea necesario conmutar el dispositivo al modo de ahorro de energía en el
programa de arranque mediante las instrucciones de PROFIenergy PE_Start_Ende_ Pause.
Active la función de ahorro de energía en las propiedades del módulo de potencia (área
Parámetros del módulo, sección "PROFIenergy").
Tenga en cuenta que para aplicar las funciones de PROFIenergy es necesario adoptar ciertas
precauciones en el programa de usuario.

Reglas
La posibilidad de configuración descrita más arriba no está disponible en los dispositivos ET
200S que han sido incorporados al catálogo de hardware mediante archivos GSDML.

Consulte también
Resumen de PROFIenergy (Página 3247)

Configuración de PROFIenergy con I-devices
Un requisito que deben cumplir las pausas controladas por programa para ahorrar energía en
dispositivos PROFINET es que estos admitan el protocolo PROFIenergy.
Solamente si un dispositivo PROFINET (dispositivo IO) admite el protocolo PROFIenergy, un
controlador IO podrá enviar comandos PE a dicho dispositivo IO para, por ejemplo, iniciar o
finalizar pausas.
Si un dispositivo IO admite el protocolo PROFIenergy, dicha propiedad está depositada en su
archivo GSD PROFINET, y por tanto está disponible para un sistema de ingeniería para la
configuración.
A partir de STEP 7 V13 Service Pack 1, para las CPU S7-1500 como dispositivos IO
inteligentes (I-devices) es posible configurar que cada área de transferencia admita
PROFIenergy.
Si para un área de transferencia se ha activado la opción "Activar la comunicación
PROFIenergy" y se importa a otro proyecto el archivo GSD PROFINET generado con ella, es
posible tratar un I-device como PE-Entity.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3249

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● STEP 7 a partir de V13 Service Pack 1
● S7-15XX-CPU, versión de firmware 1.7 o superiores como I-device configurado con áreas
de transferencia
● El programa de usuario en el esclavo I maneja comandos de PROFIenergy
Explicación: en el caso de los I-devices hay que desprogramar las funciones de
PROFIenergy en el programa de usuario con la instrucción "PE_I_DEV" y los bloques
auxiliares correspondientes; el funcionamiento es diferente al de los dispositivos IO, en los
que el firmware pone a disposición esta funcionalidad. Así pues, solo está permitido activar
el soporte de PROFIenergy para áreas de transferencia si el programa de usuario del
esclavo I tiene está realizado de la forma adecuada.

Activación de PROFIenergy para áreas de transferencia de I-devices
Para parametrizar el soporte de PROFIenergy, proceda del modo siguiente:
1. Seleccione la interfaz PROFINET (X1) de la CPU.
2. En la navegación local seleccione el área de transferencia deseada, p. ej..
Modo de operación > Comunicación de I-device > Área de transferencia_1.
3. Active la casilla de verificación "Activar la comunicación PROFIenergy".
Una vez completada la configuración del I-device, genere el archivo GSD para el I-device e
impórtelo al proyecto para el controlador IO. El archivo GSD generado es compatible con la
versión GSD 2.31 y contiene una entrada que especifica que el I-device soporta el perfil
PROFIenergy.
Para direccionar el I-device, p. ej. para el comando PE "PE_START_END", se utiliza la ID de
hardware del área de transferencia del I-device compatible con PROFIenergy.
Para direccionar el controlador IO para el comando PE "PE_I_DEV" se utiliza la ID de hardware
del área de transferencia que recibe los datos para PROFIenergy en el controlador IO.

Configuración de Shared Devices
Información importante sobre los Shared Devices
Funcionalidad de 'Shared Device'
En instalaciones de mayor tamaño o de distribución extensa suelen utilizarse numerosos
controladores IO.
Sin la función "Shared Device", cada módulo de periferia de un dispositivo IO está asignado al
mismo controlador IO. Por tanto, si unos sensores que se encuentran muy próximos en el
espacio deben suministrar datos a diferentes controladores IO, se necesitarán varios
dispositivos IO.
La función "Shared Device" permite repartir los módulos o submódulos de un dispositivo IO
entre varios controladores IO. Esta distribución hace posible realizar conceptos de
automatización flexibles. Así, por ejemplo, se ofrece la posibilidad de agrupar módulos de
periferia que se encuentren cerca en un único dispositivo IO.

3250

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones








①
②







PROFINET
Asignación lógica

Principio
El acceso a los submódulos del Shared Device se reparte entre los diferentes controladores
IO. Cada submódulo del Shared Device está asignado exclusivamente a un controlador IO.

Requisitos
● STEP 7 a partir de V12 Service Pack 1
● CPU S7-1500 FW 1.1 o superior / CPU ET 200SP como controlador IO o CPU S7-300/400
como controlador IO
● CPU S7-1200 FW 4.1 o superior
● CPU S7-300/400 (STEP 7 TIA Portal a partir de V13 SP1)
● El dispositivo IO soporta la función Shared Device, p. ej., el módulo de interfaz IM 155-5 PN
ST
● Con configuración GSD del dispositivo IO: El archivo GSD para la configuración del
dispositivo IO está instalado

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3251

Configuración de dispositivos y redes
1.4 Crear configuraciones
Observaciones:
● Una CPU S7-1500 configurada como I-device puede utilizarse como Shared Device a partir
del firmware V1.5. El I-device debe integrarse en el sistema IO del controlador IO mediante
una importación de GSD.
● Una CPU S7-300 o una CPU S7-400 configuradas como I-device se pueden utilizar como
Shared Device con la siguiente condición:
El archivo GSD PROFINET para el I-device debe exportarse desde STEP 7 (V5.5 y
superiores) o desde STEP 7 (TIA Portal) y luego importarse a STEP 7 (TIA Portal).

Configuración del acceso
Para conseguir que los módulos o submódulos de un dispositivo IO se puedan asignar a
diferentes controladores IO, el dispositivo IO debe estar presente en varios proyectos. Para
cada controlador IO se necesita un proyecto propio.
A través del parámetro "Shared Device" del módulo de interfaz se determina a qué módulos o
submódulos tiene acceso el controlador IO:
● si el controlador IO local tiene acceso al módulo configurado, seleccione en la lista el
nombre del controlador IO.
● Si el controlador IO que debe tener acceso al módulo configurado no es el controlador IO
local sino el perteneciente a otro proyecto, seleccione la entrada "---".
Si cada módulo o submódulo está asignado a un controlador IO en un proyecto y solo uno, la
configuración es coherente en cuanto al acceso.

Módulo o submódulo asignado a otro controlador IO
A continuación se tratarán las consecuencias del ajuste "---" del parámetro "Shared Device"
desde el punto de vista del controlador IO local.
En este caso, el controlador IO local no tiene acceso al módulo configurado de esta forma. En
particular, esto significa lo siguiente:
● No hay intercambio de datos con el módulo o el submódulo
● No hay recepción de alarmas y diagnósticos, es decir, no se muestra el estado de
diagnóstico en la vista online
● No hay parametrización del módulo o submódulo

Ajuste de las características de tiempo real
STEP 7 calcula la carga de comunicación y con ella los tiempos de actualización resultantes.
Para que sea posible un cálculo en configuraciones Shared Device, debe introducir el número
de controladores IO externos al proyecto en el proyecto cuya interfaz PROFINET del Shared
Device esté asignada al controlador IO.
El número máximo de controladores IO para el Shared Device depende del dispositivo. Este
número se guarda en el archivo GSD del Shared Device.
En el caso de una CPU S7-1500 como controlador IO se puede ajustar un tiempo de ciclo de
emisión muy corto. El tiempo de ciclo de emisión puede ser más corto que el tiempo de ciclo
más corto soportado por el Shared Device. En este caso, el controlador IO hace funcionar el

3252

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Shared Device con un tiempo de ciclo de emisión soportado por este (adaptación del tiempo
de ciclo de emisión).
Ejemplo:
Una CPU S7-1500 soporta tiempos de ciclo de emisión a partir de 0,25 ms. Un dispositivo IO
configurado soporta asimismo tiempos de ciclo de emisión a partir de 0,25 ms, y otro los
soporta a partir de 1 ms. En este caso tiene la posibilidad de ajustar para la CPU el tiempo de
ciclo de emisión corto de 0,25 ms. La CPU hace funcionar el dispositivo IO "lento" con el tiempo
de ciclo de emisión de, p. ej., 1 ms.
Si no configura con STEP 7 uno de los controladores IO con acceso al Shared Device, esta
función no es posible. En este caso debe leer en STEP 7 el tiempo de ciclo de emisión común
en las propiedades del Shared Device e introducirlo en la herramienta de ingeniería para el
controlador IO.

Reglas para la configuración
● Los controladores IO que utilizan el Shared Device se crean en diferentes proyectos. En
cada proyecto hay que asegurarse de que el Shared Device esté configurado de forma
idéntica en cada estación. Solo un controlador IO puede tener pleno acceso a un
submódulo a la vez. Las incoherencias en la configuración provocan fallos en el Shared
Device.
● Las direcciones de E/S de un módulo o submódulo solamente se pueden editar si un
módulo o submódulo está asignado al controlador IO en el mismo proyecto.
● Un Shared Device debe tener en cada proyecto los mismos parámetros IP y el mismo
nombre de dispositivo.
● El tiempo de ciclo de emisión debe ser igual en todos los controladores IO que tengan
acceso al Shared Device.
● La ID de subred S7 a la que está conectado el Shared Device debe ser la misma en todos
los proyectos.
● Solamente cuando la interfaz PROFINET del Shared Device está asignada al controlador
IO local son posibles las siguientes funciones:
– Modo IRT
– Arranque priorizado
– Parametrización de las propiedades del puerto

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3253

Configuración de dispositivos y redes
1.4 Crear configuraciones

Condiciones marco
Puesto que una configuración de Shared Device se distribuye entre varios proyectos, resultan
las siguientes condiciones marco:
● En la vista de direcciones de cada controlador IO que tiene acceso a un Shared Device
faltan las direcciones de los módulos o submódulos que no están asignados a este
controlador IO.
● Los módulos o submódulos no asignados no se incluyen en el cálculo del volumen de
recursos para el Shared Device durante la comprobación de coherencia. Por tanto, el
usuario debe verificar por sí mismo que no se supere el número máximo de submódulos o
la cantidad máxima de datos IO cíclicos para el Shared Device.
Nota
Si con el Shared Device solo hay asignado un submódulo a un controlador IO, el nombre
del submódulo no se mostrará en el display de la CPU. El número de submódulos
configurados solo se muestra en el display de la CPU si se ha asignado más de un
submódulo.
● STEP 7 no detecta errores de configuración como la asignación de un módulo o submódulo
a varios controladores IO.
● Las CPU que se cargan con una configuración de Shared Device no tienen información de
que el dispositivo IO es un Shared Device. Los módulos o submódulos que están asignados
a otros controladores IO y, por tanto, a otras CPU, no están presentes en la configuración
cargada. Estos módulos o submódulos no se muestran, por tanto, ni en el servidor web de
la CPU ni en la pantalla de la CPU.

Consulte también
Mostrar controladores IO que accedan a módulos de un Shared Device (Página 3617)
Configurar el I-Device como Shared Device (Página 3258)

Configurar un Shared Device (configuración GSD)
A continuación se describe cómo se configura un sistema de periferia descentralizada como
Shared Device con STEP 7 V12, Service Pack 1 o superior.
En principio, es posible una configuración "distribuida" con diferentes herramientas de
ingeniería para distintas familias de controladores IO. Sin embargo, la descripción del
procedimiento está orientada exclusivamente a STEP 7 V12, Service Pack 1. La descripción
se limita a dos controladores IO de la familia S7-1500 que comparten un Shared Device.
Se crean dos proyectos (Shared Device 1 y Shared Device 2) con un controlador IO cada uno
(PLC1 y PLC2). El Shared Device debe crearse en los dos proyectos, aunque físicamente se
trate de un único dispositivo IO.

3254

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● STEP 7 a partir de V12 Service Pack 1
● En el contexto de STEP 7 V12, Service Pack 1: solo CPU 15XX a partir de FW 1.1
configurable como controlador IO (no la CPU 31X, CPU 41X o CPU 12XX).
● En el contexto de otros controladores IO que deban tener acceso a un Shared Device: la
correspondiente herramienta de ingeniería, p. ej. STEP 7 V5.5, Service Pack 3 para CPU
31x-3 PN/DP.
●

El dispositivo IO soporta la función Shared Device, p. ej., el módulo de interfaz IM 155-5 PN
ST V2.0.

● El archivo GSD para la configuración del dispositivo IO como Shared Device está instalado.

Procedimiento: crear el proyecto 1
Para crear el primer proyecto con un Shared Device, proceda del siguiente modo:
1. Inicie STEP 7.
2. Cree un proyecto nuevo con el nombre "Shared Device 1".
3. Inserte en la vista de redes una CPU 1513-1 PN desde el catálogo de hardware. Asigne el
nombre "PLC1".
4. Inserte un dispositivo IO con la función "Shared Device" desde el catálogo de hardware
(catálogo de hardware: Otros dispositivos de campo > PROFINET IO > I/O).
5. Asigne al dispositivo IO el controlador IO "PLC1".
6. Haga doble clic en el dispositivo IO e inserte todos los módulos y submódulos necesarios
desde el catálogo de hardware a la tabla con la vista de dispositivos.
7. Parametrice los módulos.
8. Guarde el proyecto.

Procedimiento: crear proyecto 2
Para crear el segundo proyecto con un Shared Device, proceda del siguiente modo:
1. Inicie STEP 7 otra vez.
Se abre una nueva instancia de STEP 7.
2. Cree un nuevo proyecto con el nombre "Shared Device 2" en la nueva instancia.
3. Inserte en la vista de redes una CPU 1513-1 PN. Asigne el nombre "PLC2".
4. Copie el dispositivo IO del proyecto "Shared Device 1" e insértelo en la vista de red del
proyecto "Shared Device 2".
5. Asigne al dispositivo IO el controlador IO "PLC2".
6. Guarde el proyecto.
Los dos proyectos tienen ahora un dispositivo IO de idéntica estructura, que en el siguiente
paso se debe parametrizar para los diferentes accesos a los controladores IO.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3255

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento: parametrizar accesos al Shared Device
Los módulos y submódulos que se insertan en el Shared Device se asignan automáticamente
a la CPU local. Para cambiar la asignación, proceda del siguiente modo:
1. Marque el módulo de interfaz en la vista de redes o en la vista de dispositivos del proyecto
"Shared Device 1".
2. Seleccione el área "Shared Device" en la ventana de inspección.
Una tabla muestra para todos los módulos configurados qué CPU tiene acceso al
correspondiente módulo o submódulo. El ajuste predeterminado para todos los módulos y
submódulos es que el acceso lo tiene la CPU local.
3. Para todos los módulos o submódulos que deban permanecer en el área de direcciones de
la CPU local, deje el ajuste "PLC1".
Para todos los módulos o submódulos que deben estar en el área de direcciones de la CPU
del proyecto "Shared Device 2" ("PLC2"), seleccione el ajuste "---". Esto significa que un
controlador IO fuera del proyecto debe tener acceso al módulo o submódulo.
4. Marque el módulo de interfaz en la vista de redes o en la vista de dispositivos del proyecto
"Shared Device 2".
5. Seleccione el área "Shared Device" en la ventana de inspección.
Una tabla muestra para todos los módulos configurados qué CPU tiene acceso al
correspondiente módulo o submódulo.
6. Para todos los módulos o submódulos que deben estar en el área de direcciones de la CPU
del proyecto "Shared Device 1" ("PLC1"), seleccione el ajuste "---".
7. A continuación, compruebe si para cada módulo o submódulo de ambos proyectos los
ajustes para el acceso son "complementarios". Esto significa que cuando la CPU local tiene
acceso en un proyecto, en el otro proyecto debe estar ajustada la opción "---" y viceversa.
Particularidad: La opción "---" para la interfaz PROFINET y, con ello, también para los
puertos hace que los correspondientes parámetros se desactiven y no se puedan modificar.
Los parámetros de la interfaz PROFINET y los parámetros de puerto solamente pueden
editarse en el proyecto en el que la interfaz PROFINET está asignada a la CPU local.
Independientemente de esto, los puertos se pueden interconectar en los dos proyectos.
8. Compruebe si están ajustados los mismos parámetros de dirección IP y los mismos
nombres de dispositivo para el Shared Device en todos los proyectos.
Compruebe si en todos los proyectos está ajustada la misma ID de subred S7 para la
subred a la que está conectado el Shared Device (propiedades de subred, área "General"
de la ventana de inspección).
Nota
Si realiza cambios en el Shared Device: ¡traslade a cada proyecto los cambios realizados
en el Shared Device! ¡Tenga en cuenta que nunca puede acceder más de un controlador
IO a un módulo o submódulo!

3256

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento: adaptar la configuración en tiempo real
Para garantizar que todos los controladores IO y Shared Devices funcionen con el tiempo de
ciclo de emisión adecuado y que debido a la carga por comunicaciones los tiempos de
actualización se calculen correctamente, se deben adaptar y comprobar los siguientes ajustes:
1. Seleccione el proyecto cuyo controlador IO tiene acceso a la interfaz PROFINET y a los
puertos del Shared Device.
2. Marque el módulo de interfaz del Shared Device en la vista de redes.
3. En la ventana de inspección, vaya al área "Interfaz PROFINET > Opciones avanzadas >
Configuración en tiempo real > Ciclo IO".
4. En el área "Shared Device", ajuste el número de controladores IO externos al proyecto. El
número máximo depende del dispositivo IO (especificación en archivo GSD).
5. Para cada controlador IO que tenga acceso a módulos o submódulos del Shared Device,
debe ajustarse el mismo tiempo de ciclo de emisión:
– Si configura el controlador IO con STEP 7 (TIA Portal):
Abra el proyecto correspondiente.
Seleccione la interfaz PROFINET del controlador IO.
Elija en la ventana de inspección el área "Opciones avanzadas > Configuración en
tiempo real > Comunicación IO" y ajuste el mismo tiempo de ciclo de emisión.
– Si configura el controlador IO con otra herramienta de ingeniería:
Seleccione la interfaz PROFINET del Shared Device en STEP 7 (TIA Portal) y lea el
tiempo de ciclo de emisión en el Shared Device (área "Opciones avanzadas >
Configuración en tiempo real").
Introduzca en la herramienta de ingeniería el tiempo de ciclo de emisión leído.
– Particularidad: si configura en STEP 7 (TIA Portal o V5.5) todos los controladores IO que
tienen acceso al Shared Device, en el controlador IO también se podrán ajustar tiempos
de ciclo de emisión más cortos de los que admite el Shared Device (adaptación del
tiempo de ciclo de emisión).

Compilar y cargar
Las configuraciones de los distintos controladores IO se deben compilar y cargar
sucesivamente en las CPU.
Debido a la configuración distribuida en proyectos separados, STEP 7 no notifica errores de
coherencia en caso de parametrización incorrecta del acceso. Ejemplos de parametrización
incorrecta del acceso:
● Varios controladores IO tienen acceso al mismo módulo
● Los parámetros de dirección IP o los tiempos de ciclo de emisión no son idénticos
Estos fallos solo tienen efecto durante el funcionamiento y se notifican, p. ej., como errores de
configuración.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3257

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configurar el I-Device como Shared Device
A continuación se describe como caso especial cómo configurar una S7-1500 como I-Device
con STEP 7 V13 o superior y utilizarla después en dos proyectos como Shared Device.
En principio, aquí también es posible una configuración "distribuida" con diferentes
herramientas de ingeniería para distintas familias de controladores IO. El procedimiento
descrito a continuación está orientado a STEP 7 V13 y se limita a una configuración con dos
controladores IO de la familia S7-1500 que comparten las áreas de transferencia de un IDevice como Shared Device. El propio I-device también es una CPU S7-1500.
Primero se describe el concepto general.
En los siguientes apartados se explica el procedimiento paso a paso a partir de un ejemplo: Se
crean tres proyectos con un controlador IO cada uno (PLC-I-Device, PLC_1 y PLC_2).
PLC-I-Device se utiliza para configurar el I-device. La variante GSD PROFINET de PLC-IDevice se utiliza en los proyectos PLC_1 y PLC_2 para poder asignar las áreas de
transferencia en el correspondiente controlador IO de nivel superior.

Concepto de Shared I-device
Para introducir el concepto de Shared I-device hay que explicar dos funciones:
● La función de un fabricante (p. ej. un fabricante de máquinas): configura y programa un Idevice que asume una tarea de automatización determinada. Como interfaz de periferia
con el operador de la máquina se definen áreas de transferencia que pueden asignarse a
distintos controladores IO. Para la conexión a controladores IO de nivel superior, el
fabricante proporciona un archivo GSD PROFINET y abre el acceso a las áreas de
transferencia a través de las cuales se puede acceder al I-Device.
● La función del operador: utiliza el I-Device como variante GSD PROFINET durante la
configuración de su sistema PROFINET IO y al hacerlo determina las direcciones E/S con
las que los controladores IO acceden a las áreas de transferencia.

Vista del fabricante
Una CPU S7-1500 se parametriza como I-device con periferia centralizada y descentralizada.
Son importantes los ajustes siguientes:
● áreas de transferencia deseadas
● número de controladores IO con acceso a este I-device (en el caso de Shared Device
siempre mayor que 1).
Particularidad: el I-device se configura sin controlador IO de nivel superior. De este modo, solo
se dispone de las direcciones E/S locales del área de transferencia (= "Dirección en el Idevice") para crear el programa de usuario con el que se editarán las direcciones del área de
transferencia.
El I-Device, totalmente configurado a excepción de la conexión con el controlador IO de nivel
superior, se carga en la CPU S7-1500.
De la configuración del I-Device se exporta un archivo GSD PROFINET.

3258

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Vista de operador
El archivo GSD PROFINET creado a partir de la configuración del I-device debe instalarse en
todos los sistemas de ingeniería que intervengan en la configuración de un sistema
PROFINET IO con este Shared I-device. Si todos los usos de este I-Device se han configurado
con STEP 7 V13, es suficiente instalar el archivo GSD en STEP 7.
Cada uno de los controladores IO de orden superior con área de transferencia de Shared Idevice asignada en un proyecto propio.
El I-Device se configura como variante GSD en el sistema PROFINET IO para los proyectos
implicados. En STEP 7 V13, después de la instalación este I-Device se encuentra en "Otros
dispositivos de campo > PROFINET IO > PLCs y CPs".
Para cada asignación entre el Shared I-device y un controlador IO de orden superior que se
repartan las áreas de transferencia se requiere un proyecto propio.
La siguiente figura muestra la asignación del Shared I-device al controlador IO de orden
superior PLC_1.
Para cada controlador IO de orden superior hay que crear un proyecto propio con el mismo
Shared I-device y permitir al controlador IO el acceso al área de transferencia parcial deseada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3259

Configuración de dispositivos y redes
1.4 Crear configuraciones

En cada uno de los proyectos implicados se determina qué áreas de transferencia están
asignadas exclusivamente al controlador IO de nivel superior (valor predeterminado: todas).
Las áreas de transferencia restantes se ajustan a "---" (no asignadas). Este ajuste provoca que
el controlador IO local no tenga acceso a esta área de transferencia y, por lo tanto, pueda
asignarse a otro controlador IO en otro proyecto.

3260

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Las direcciones desde el punto de vista del controlador IO se adaptan en la vista general de
dispositivos. La vista general de dispositivos se abre haciendo doble clic en el I-device.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3261

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● STEP 7 V13 o superior
● En el contexto de STEP 7 a partir de V13: solo CPU 15XX a partir de FW 1.5 configurable
como Shared I-device (no una CPU 31X, CPU 41X o CPU 12XX).
● En el contexto de otros controladores IO que deban tener acceso a un Shared I-device: la
correspondiente herramienta de ingeniería, p. ej. STEP 7 V5.5, Service Pack 3 para CPU
31x-3 PN/DP.

Procedimiento: crear el proyecto PLC-I-device
Para crear el proyecto con un Shared I-device, proceda del siguiente modo:
1. Inicie STEP 7.
2. Cree un proyecto con el nombre "PLC-I-Device".
3. Inserte en la vista de redes una CPU 1518-4 PN/DP desde el catálogo de hardware. Asigne
el nombre "PLC-I-Device".
4. Haga doble clic en el dispositivo IO y configure todos los módulos y submódulos necesarios.

3262

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
5. Parametrice los módulos.
Especialmente para la CPU son necesarios los siguientes ajustes en el área de la interfaz
PROFINET [X1]:
– Active la opción "Dispositivo IO" en el área "Modo de operación".
– Configure las áreas de transferencia en el área "Modo de operación" > "Configuración
de I-device". La columna "Dirección en el controlador IO" queda vacía, dado que no se
ha asignado ningún controlador IO.
Nota: para convertir un área de entrada en un área de salida y viceversa, se debe ir al
área de transferencia correspondiente.

– Seleccione el número de controladores IO que pueden acceder al Shared I-Device
durante el funcionamiento (área "Modo de operación" > "Configuración en tiempo real",
apartado "Shared Device").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3263

Configuración de dispositivos y redes
1.4 Crear configuraciones
6. Guarde el proyecto.
7. Haga clic en el botón "Exportar" (área "Modo de operación" > "Configuración de I-Device",
apartado "Exportar archivo de descripción del dispositivo (GSD)").
Si no se cambia el nombre en el cuadro de diálogo Exportar, el archivo GSD tendrá, p. ej.,
un nombre de tipo "GSDML-V2.31-#Siemens-PreConf_PLC-I-Device-20130925-123456".

Procedimiento: crear el proyecto PLC_1
Para crear el primer proyecto con un Shared I-Device, proceda del siguiente modo:
1. Inicie STEP 7.
2. Instale el archivo GSD PROFINET de la exportación de la CPU I-Device (PLC-I-Device).
3. Cree un nuevo proyecto con el nombre "PLC_1".
4. Inserte en la vista de redes una CPU 1516-3 PN/DP. El nombre de la CPU debe ser
"PLC_1".
5. Inserte el I-Device del catálogo de hardware (catálogo de hardware: Otros dispositivos de
campo > PROFINET IO > PLCs y CPs).
6. Asigne al I-Device el controlador IO "PLC_1".
7. En las propiedades del I-Device, seleccione el área "Shared Device".
En la tabla, todas las áreas de transferencia y la interfaz PROFINET están asignadas al
controlador IO local (PLC_1).
8. Determine a qué áreas de transferencia no debe tener acceso la CPU PLC_1. Para esas
áreas, seleccione la entrada "---". Esas áreas de transferencia están previstas para PLC_2.
9. Guarde el proyecto.

Procedimiento: crear el proyecto PLC_2
Para crear el segundo proyecto con un Shared Device, proceda del siguiente modo:
1. Inicie STEP 7 otra vez.
Se abre una nueva instancia de STEP 7.
2. Cree un proyecto con el nombre "PLC_2" en la nueva instancia.
3. Inserte en la vista de redes una CPU 1516-3 PN/DP. Asigne el nombre "PLC_2".
4. Inserte el I-Device del catálogo de hardware (catálogo de hardware: Otros dispositivos de
campo > PROFINET IO > PLCs y CPs).
5. Asigne al I-Device el controlador IO "PLC_2".
6. Adapte los accesos a las áreas de transferencia como en el proyecto PLC_1. Asegúrese de
que no se produzca ninguna doble asignación.
7. Adapte los parámetros de subred e interfaz PROFINET. Puesto que el Shared I-Device es
el mismo dispositivo en varios proyectos, estos datos deben coincidir.
8. Guarde el proyecto.
Ambos proyectos tienen ahora un Shared I-Device de idéntica estructura. Los accesos a los
controladores IO y los parámetros de la interfaz PROFINET deben comprobarse en el
siguiente paso en los diferentes proyectos.

3264

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Resumen: parametrizar accesos al Shared Device
Las áreas de transferencia se asignan automáticamente al controlador IO local. Para cambiar
la asignación, proceda del siguiente modo:
1. En la vista de redes del proyecto "PLC_1", haga clic en el dispositivo "PLC_I-Device" y
seleccione el área "Shared Device".
2. Una tabla muestra qué CPU tiene acceso a cada una de las áreas de transferencia
configuradas. El ajuste predeterminado para todos los módulos y submódulos es que el
acceso lo tiene la CPU local.
3. Para todas las áreas de transferencia que deban permanecer en el área de direcciones de
la CPU local, deje el ajuste "PLC_1".
Para todas las áreas de transferencia que deban estar en el área de direcciones de la CPU
"PLC_2" del proyecto "PLC_2", seleccione el ajuste "---". Esto significa que un controlador
IO fuera del proyecto debe tener acceso al área de transferencia.
4. Proceda de forma análoga con los demás proyectos.
5. A continuación, compruebe si para cada módulo o submódulo de ambos proyectos los
ajustes para el acceso son "complementarios". Esto significa que cuando la CPU local tiene
acceso en un proyecto, en el otro proyecto debe estar ajustada la opción "---" y viceversa.
Particularidad: La opción "---" para la interfaz PROFINET y, con ello, también para los
puertos hace que los correspondientes parámetros se desactiven y no se puedan modificar.
Los parámetros de la interfaz PROFINET y los parámetros de puerto solamente pueden
editarse en el proyecto en el que la interfaz PROFINET está asignada a la CPU local.
Independientemente de esto, los puertos se pueden interconectar en los dos proyectos.
6. Compruebe si están ajustados los mismos parámetros de dirección IP y los mismos
nombres de dispositivo para el Shared Device en todos los proyectos.
Compruebe si en todos los proyectos está ajustada la misma ID de subred S7 para la
subred a la que está conectado el Shared Device (propiedades de subred, área "General"
de la ventana de inspección).
Nota
Si realiza cambios en el I-Device (p. ej., cambios en el número o la longitud de las áreas de
transferencia):
Vuelva a exportar el I-Device como archivo GSD. Vuelva a instalar el archivo GSD en cada
proyecto que utilice el I-Device como Shared Device. Tenga en cuenta que nunca puede
acceder más de un controlador IO a un área de transferencia.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3265

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento: adaptar la configuración en tiempo real
Para garantizar que todos los controladores IO y Shared Devices funcionen con el tiempo de
ciclo de emisión adecuado y que debido a la carga por comunicaciones los tiempos de
actualización se calculen correctamente, se deben adaptar y comprobar los siguientes ajustes:
1. Para cada controlador IO que tenga acceso a módulos o submódulos del Shared Device,
debe ajustarse el mismo tiempo de ciclo de emisión:
– Si configura el controlador IO con STEP 7 (TIA Portal):
Abra el proyecto correspondiente.
Seleccione la interfaz PROFINET del controlador IO.
Elija en la ventana de inspección el área "Opciones avanzadas > Configuración en
tiempo real > Comunicación IO" y ajuste el mismo tiempo de ciclo de emisión.
– Si configura el controlador IO con otra herramienta de ingeniería:
Seleccione la interfaz PROFINET del Shared Device en STEP 7 (TIA Portal) y lea el
tiempo de ciclo de emisión en el Shared Device (área "Opciones avanzadas >
Configuración en tiempo real").
Introduzca en la herramienta de ingeniería el tiempo de ciclo de emisión leído.
– Particularidad: si configura en STEP 7 (TIA Portal o V5.5) todos los controladores IO que
tienen acceso al Shared I-Device, en el controlador IO también se podrán ajustar
tiempos de ciclo de emisión más cortos que los que admite el Shared Device
(adaptación del tiempo de ciclo de emisión).

Compilar y cargar
Las configuraciones de los distintos controladores IO se deben compilar y cargar
sucesivamente en las CPU.
Debido a la configuración distribuida en proyectos separados, STEP 7 no notifica errores de
coherencia en caso de parametrización incorrecta del acceso. Ejemplos de parametrización
incorrecta del acceso:
● Varios controladores IO tienen acceso al mismo módulo
● Los parámetros de dirección IP o los tiempos de ciclo de emisión no son idénticos
Estos fallos solo tienen efecto durante el funcionamiento y se notifican, p. ej., como errores de
configuración.

Consulte también
Configurar un I-Device (Página 3209)
Información importante sobre los Shared Devices (Página 3250)

3266

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Shared Input/Shared Output interna del módulo (MSI/MSO)
Introducción
En este capítulo se describe la funcionalidad "Shared Input/Shared Output interna del módulo
(MSI/MSO)" para los módulos de periferia S7-1500 que operan en un ET 200MP conectado a
PROFINET.

Funcionalidad "Shared Input/Shared Output interna del módulo"
La funcionalidad "Shared Input interna del módulo (MSI)" permite que un módulo de entrada
ponga sus datos de entrada a disposición de hasta cuatro controladores IO. Cada controlador
puede tener acceso de lectura a los mismos canales.
La funcionalidad "Shared Output interna del módulo (MSO)" permite que un módulo de salida
ponga sus datos de salida a disposición de hasta cuatro controladores IO. El controlador IO
tiene acceso de escritura. Los demás controladores IO pueden tener acceso de lectura a los
mismos canales.
La figura siguiente muestra la funcionalidad MSI/MSO.




















①
②
③
④
⑤

CPU 1516-3 PN/DP como controlador IO
CPU 1511-1 PN como controlador IO
Módulo E/S con MSI/MSO
Acceso de lectura a los canales del módulo E/S
Acceso de escritura a los canales del módulo E/S (solo en MSO)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3267

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ventajas de MSI/MSO
La funcionalidad "Shared Input/Shared Output interna del módulo" ofrece las siguientes
ventajas:
● Lectura en tiempo real en varias CPUs
● Menos costes gracias al ahorro de dispositivos IO y módulos adicionales
● Menos necesidad de espacio gracias al ahorro de dispositivos IO y módulos adicionales
● Menos carga de comunicación al suprimirse la comunicación CPU-CPU
● No es necesario ningún trabajo adicional de programación para la comunicación CPU-CPU

Requisitos para el uso de MSI/MSO
Tenga en cuenta los siguientes requisitos:
● El uso de MSI/MSO solo es posible en PROFINET IO.
● Software de configuración: STEP 7 (TIA Portal) V12 SP1 y superiores con archivo GSD.
● El módulo de interfaz IM 155-5 PN ST y los módulos soportan MSI/MSO a partir de la
versión de firmware V2.0.0.

Condiciones para el uso de MSI/MSO
Tenga en cuenta las siguientes condiciones marco:
● En los módulos con grupos de canales no es posible utilizar MSI/MSO.
● Los módulos con MSI/MSO no se pueden utilizar en modo isócrono.

Submódulos MSI
En la configuración MSI de un módulo de entrada se copian los valores de entrada de todos los
canales en un submódulo base y en hasta tres submódulos MSI adicionales. De este modo los
canales del módulo están disponibles con valores de entrada idénticos en el submódulo base
y en los submódulos MSI. Los submódulos pueden asignarse a hasta cuatro controladores IO
si el módulo se utiliza en un Shared Device. Cada controlador IO puede tener acceso de lectura
a los mismos canales.
La figura siguiente ilustra un módulo de entradas digitales con el submódulo base y tres
submódulos MSI. Cada submódulo está asignado a un controlador IO. El diagnóstico y la
parametrización del módulo de entradas digitales también son posibles a través del submódulo
base del controlador IO 1.

3268

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

&RQWURODGRU,2


&RQWURODGRU,2


&RQWURODGRU,2


&RQWURODGRU,2


6XEPµGXOR
EDVH

6XEPµGXOR
06,

6XEPµGXOR
06,

6XEPµGXOR
06,

9DORUHVGHHQWUDGD

0µGXOR',

&DQDOHVQ

Información de calidad del submódulo MSI (Quality Information, QI)
El significado de la información de calidad depende del submódulo en cuestión.
En el submódulo base (= submódulo 1), la información de calidad 0 indica que el valor es
erróneo.
En un submódulo MSI (submódulos 2 a 4), la información de calidad 0 indica que el valor es
erróneo o que el submódulo base aún no se ha parametrizado (no está listo para el
funcionamiento).

Submódulos MSO
En la configuración MSO de un módulo de salida se copian los valores de salida de todos los
canales del módulo de un submódulo base en hasta tres submódulos MSO adicionales. De
este modo los canales del módulo están disponibles con valores idénticos en el submódulo
base y en los submódulos MSO. Los submódulos MSO pueden asignarse a hasta cuatro
controladores IO si el módulo se utiliza en un Shared Device.
● El controlador IO al que está asignado el submódulo base tiene acceso de escritura a las
salidas del módulo. En consecuencia, el submódulo base ocupa direcciones de salida en
la memoria imagen de proceso del controlador IO.
● Los controladores IO a los que están asignados los submódulos MSO tienen acceso de
lectura a las salidas del módulo. En consecuencia, los submódulos MSO ocupan
direcciones de entrada en la memoria imagen de proceso del controlador IO.
La figura siguiente ilustra un módulo de salidas digitales con el submódulo base y tres
submódulos MSO. Cada submódulo está asignado a un controlador IO. El diagnóstico y la
parametrización del módulo de salidas digitales también son posibles a través del submódulo
base del controlador IO 1.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3269

Configuración de dispositivos y redes
1.4 Crear configuraciones

&RQWURODGRU,2


&RQWURODGRU,2


&RQWURODGRU,2


&RQWURODGRU,2


6XEPµGXOR
EDVH

6XEPµGXOR
062

6XEPµGXOR
062

6XEPµGXOR
062

9DORUHVGHVDOLGD

0µGXOR'2

&DQDOHVQ

Información de calidad del submódulo MSO (Quality Information, QI)
El significado de la información de calidad depende del submódulo en cuestión.
En el submódulo base (= submódulo 1), la información de calidad 0 indica que el valor es
erróneo.
En un submódulo MSO (=submódulos 2 a 4), el la información de calidad 0 indica que el valor
es erróneo o que se ha producido uno de los siguientes errores:
● El submódulo base todavía no está parametrizado (no está operativo).
● Se ha interrumpido la conexión entre el controlador IO y el submódulo base.
● El controlador IO del submódulo base está en estado STOP o DESCONEXIÓN.

Configuración de módulos de periferia con submódulos MSI/MSO
Requisitos
● Software de configuración STEP 7 V12 Service Pack 1 o superior
● Archivo GSD para módulos de periferia con MSI/MSO.
● El dispositivo IO soporta MSI/MSO (p. ej. IM 155-5 PN ST a partir de la versión de firmware
V2.0.0)

3270

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Procedimiento
1. Inserte un módulo de interfaz IM 155-5 PN ST V2.0 o superior en la vista de redes de
STEP 7.
2. Haga doble clic en el dispositivo IO.
Ahora se encuentra en la vista de dispositivos.
3. Coloque los módulos con MSI/MSO del catálogo de hardware en un slot adecuado.
4. Configure los módulos tal y como se describe en la información del producto
correspondiente al módulo.

Crear un proyecto de maquinaria de serie
Sinopsis
Introducción
Los proyectos de maquinaria de serie son proyectos de STEP 7 que utilizan un conjunto de
funciones innovadoras para configurar y poner en servicio con facilidad soluciones de
automatización flexibles para maquinaria de serie o modular.
En este caso, una configuración hardware compuesta por una CPU S7-1500 como controlador
IO y un número cualquiera de dispositivos IO conectados representa un "maestro del sistema
PROFINET IO". Dicho maestro tiene una configuración máxima de la que se derivan diferentes
opciones para distintas máquinas de serie con diferentes variantes de configuración del
sistema IO, por ejemplo.

Flexibilización en todos los niveles
Los proyectos de maquinaria de serie presentan las siguientes características centrales:
● A partir de un solo proyecto (maestro de sistema IO) con configuración máxima es posible
cargar diferentes variantes de una máquina de serie (opciones de sistema IO). El proyecto
de maquinaria de serie contempla todas las variantes (opciones) del sistema IO.
● Una opción de sistema IO puede integrarse localmente en una red existente utilizando
medios simples.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3271

Configuración de dispositivos y redes
1.4 Crear configuraciones
La flexibilidad se da en varios aspectos:
● Mediante una configuración adecuada es posible realizar una adaptación local de los
parámetros de dirección IP del controlador IO con herramientas sencillas. Esto permite
integrar una máquina de serie en diferentes instalaciones sin grandes complicaciones o
bien incorporarla a una red.
Los sistemas IO que tienen esta característica se denominan sistemas IO de múltiples
aplicaciones.
● Mediante una configuración y programación adecuadas es posible utilizar localmente
opciones de sistema IO con estructuras distintas que se diferencian entre sí en cuanto a la
selección de los dispositivos IO utilizados o a la disposición de los mismos.
Puesto que la configuración concreta del sistema IO se controla desde el programa de
usuario, esta variante se denomina control de configuración de sistemas IO.
● Independientemente de las funciones descritas anteriormente, una configuración y
programación adecuadas permiten utilizar en un solo proyecto diferentes opciones de
estación para dispositivos centralizados o unidades de la periferia descentralizada. Los
dispositivos pueden ser diferentes en cuanto a la selección y disposición de los módulos.
Puesto que la configuración concreta de la estación se controla desde el programa de
usuario, esta variante se denomina también control de configuración.

Sistemas PROFINET IO de múltiples aplicaciones
Información importante sobre sistemas IO de múltiples aplicaciones
Soluciones de automatización de múltiples aplicaciones
Para una solución de automatización flexible, como en el caso de la maquinaria de serie,
existen los siguientes casos de aplicación típicos:
● La máquina (y por consiguiente el sistema PROFINET IO) se utiliza varias veces en las
instalaciones de los clientes.
● La máquina se utiliza en diferentes instalaciones de distintos clientes.
Para ello, la solución de automatización debe cumplir los requisitos siguientes:
● Un proyecto (configuración y programa) puede cargarse sin cambios en diferentes
máquinas del mismo tipo.
● Localmente solo son necesarias algunas adaptaciones sencillas para integrar la máquina
en una infraestructura de red existente.
La figura siguiente muestra cómo se carga una solución de automatización con un sistema IO
de múltiples aplicaciones en diferentes sistemas de automatización y, seguidamente, cómo se
adapta localmente un sistema de automatización a la infraestructura de red existente.

3272

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

,QJHQLHU¯D

$GDSWDFLµQORFDO

67(3

+HUUDPLHQWD+0,367

7,$




0

0

0

352),1(7

①
②

Cargar configuración con un sistema IO de múltiples aplicaciones
Ajustar la dirección IP y el nombre de dispositivo de forma local en el controlador IO

Principio
Los componentes de automatización para una máquina incluyen un sistema PROFINET IO,
compuesto de un controlador IO (interfaz PROFINET de una CPU) y los dispositivos IO
asignados a él.
El ajuste "Sistema IO de múltiples aplicaciones" en el sistema IO convierte un proyecto STEP
7 en un "proyecto de maquinaria de serie".
Con el ajuste "Sistema IO de múltiples aplicaciones" en el sistema IO, STEP 7 realiza diversos
ajustes y comprobaciones de la configuración. Con estos ajustes se consigue que el sistema
IO esté autocontenido y no existan dependencias de componentes externos al sistema IO.

Requisitos
● STEP 7 V13 o superior
● CPU S7-1500 o CPU ET 200SP a partir de la versión de firmware V1.5 como controlador IO

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3273

Configuración de dispositivos y redes
1.4 Crear configuraciones

Reglas
Para los sistemas IO de múltiples aplicaciones se aplican las siguientes reglas:
● Ningún dispositivo IO puede estar configurado como Shared Device.
● Los puertos de los dispositivos deben estar interconectados.
Los dispositivos para los que no puede configurarse ninguna interconexión de puertos,
como p. ej. módulo de interfaz IM 154-6 IWLAN (ET200pro PN), no se pueden utilizar con
STEP 7 V13 como dispositivo IO en el sistema IO de múltiples aplicaciones.
● Si un dispositivo IO conectado al sistema IO de múltiples aplicaciones es un I-device (CPU
como dispositivo IO "inteligente"):
Si el I-device tiene un sistema IO subordinado, es posible conectar este sistema IO
subordinado a la misma interfaz PROFINET que el controlador IO de nivel superior. En todo
caso, solo es posible una aplicación múltiple de uno de los dos sistemas IO, según las
reglas siguientes:
"Parametrización de la interfaz PN por el controlador IO de nivel superior" (en el I-device) =
sí: el sistema IO de nivel superior es de múltiples aplicaciones.
"Parametrización de la interfaz PN por el controlador IO de nivel superior" (en el I-device) =
no: el sistema IO subordinado es de múltiples aplicaciones.





①
②

I-device conectado al sistema IO de múltiples aplicaciones. La interfaz PROFINET funciona como dispositivo IO.
Un sistema IO subordinado del I-device está conectado también a esta interfaz PROFINET.

● Si está configurado MRP (Media Redundancy Protocol):
–

Todos los dispositivos IO del sistema IO de múltiples aplicaciones deben pertenecer al
mismo dominio MRP.

● Si está configurado IRT (Isochronous Real Time):
– Todos los dispositivos IO del sistema IO de múltiples aplicaciones deben pertenecer al
mismo dominio Sync.
– El dominio Sync no debe contener otros dispositivos IO.
● Los IE/PB Links no pueden operarse con STEP 7 V13 como dispositivo IO conectado al
sistema IO de múltiples aplicaciones.
A partir de la versión V13 SP1 de STEP 7, los IE/PB Links con versión de firmware V3 o
superior pueden operarse en el sistema IO de múltiples aplicaciones.

Configuración
En las propiedades del sistema IO se define si una configuración se puede usar varias veces.

3274

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los demás ajustes de parámetros de los dispositivos configurados se establecen
automáticamente en STEP 7 y se comprueban durante la compilación.

Condiciones marco
Para evitar que un proyecto de maquinaria de serie tenga dependencias de otros dispositivos
externos a la máquina, tenga en cuenta lo siguiente:
● Un proyecto de maquinaria de serie consta de un controlador IO y los dispositivos IO
correspondientes. Por ello, en el proyecto de maquinaria de serie debe configurarse solo
una CPU como controlador IO y los dispositivos IO correspondientes.
● No utilice para la comunicación conexiones bilaterales, sino solamente conexiones
unilaterales o conexiones no especificadas si es necesario.
Explicación: para configurar la comunicación en un proyecto de STEP 7 básicamente hay
que ajustar los parámetros de dirección IP en el proyecto. Sin embargo, este procedimiento
no es válido para sistemas IO de múltiples aplicaciones, pues los parámetros de dirección
IP del controlador IO y de los dispositivos IO asignados se asignan en la ubicación
definitiva. Es decir, en el momento de realizar la configuración se desconocen los
parámetros de dirección IP.
Si, a pesar de todo, desea configurar la comunicación con los dispositivos en PROFINET,
p. ej. para un coordinador centralizado, solo podrá utilizar los mecanismos de comunicación
que permitan una asignación dinámica de los parámetros de dirección IP en el programa de
usuario.
Ejemplo: Open User Communication
Si el dispositivo está configurado como punto final activo (iniciador de la conexión), por
ejemplo, los parámetros de dirección IP pueden guardarse en un bloque de datos. El bloque
de datos no recibirá los parámetros de dirección IP válidos actualmente hasta el instante de
la puesta en marcha. Para este tipo dinámico de parametrización de la dirección IP no
existe soporte del sistema, es decir, si se cambia la configuración del sistema no se adaptan
automáticamente los parámetros de dirección IP.
Encontrará la descripción sobre el manejo de instrucciones relacionadas con la Open User
Communication bajo esta misma palabra clave en la Ayuda en pantalla de STEP 7.

Consulte también
Conexiones no especificadas (Página 227)
Especificar una conexión no especificada (Página 254)
Crear una conexión: sinopsis (Página 231)

Configurar un sistema IO de múltiples aplicaciones
Requisitos
● CPU S7-1500 a partir de la versión de firmware V1.5 como controlador IO

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3275

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento
Para crear un proyecto de maquinaria de serie, proceda del siguiente modo:
1. Cree un proyecto.
2. Configure una CPU S7-1500 con versión de firmware V1.5 o superior como controlador IO.
3. Configure los dispositivos IO necesarios y asigne los dispositivos IO al controlador IO.
4. Configure la interconexión de puertos entre los dispositivos.
5. Seleccione el sistema IO de manera que pueda editar las propiedades en la ventana de
inspección.
6. Active la casilla de verificación "Sistema IO de múltiples aplicaciones" en el apartado
"General" de la ventana de inspección.

Resultado: STEP 7 establece los siguientes ajustes:
● El nombre de dispositivo del controlador IO (CPU) del proyecto de maquinaria de serie está
fijado en "Permitir adaptar el nombre de dispositivo PROFINET directamente en el
dispositivo". El controlador IO (CPU) carece al principio de nombre de dispositivo
PROFINET.
● El protocolo IP del controlador IO (CPU) está ajustado de manera permanente a "Ajustar
dirección IP en el dispositivo". La CPU carece al principio de dirección IP.
● La opción "Permitir sustitución de dispositivo sin medio de almacenamiento extraíble" se
activa automáticamente. Esta opción hace posible una puesta en servicio automática. En
tal caso, no es necesario que un técnico de puesta en marcha asigne localmente nombres
de dispositivo a los dispositivos IO. El controlador IO asigna nombre de dispositivo y
dirección IP a los dispositivos IO durante el arranque en función de la topología teórica y
otros ajustes.
● El nombre de de dispositivo de los dispositivos IO está fijado en "Generar automáticamente
el nombre del dispositivo PROFINET" (a partir del nombre configurado del dispositivo IO
configurado).
● El protocolo IP de los dispositivos IO está fijado en "Ajustar dirección IP en el proyecto". Los
dispositivos IO carecen al principio de dirección IP. Si un dispositivo IO no es un sistema de
periferia descentralizada típico (p. ej. un sistema ET 200), sino otro dispositivo, como p. ej.
un dispositivo HMI, cambie la opción a "Ajustar dirección IP en el dispositivo"; véase abajo.
● El número de dispositivo para los dispositivos IO se asigna automáticamente y se utiliza
localmente para hacer que la dirección IP sea unívoca.

3276

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para que el controlador IO pueda modificar más adelante el nombre de dispositivo en el
operador, debe activarse en la CPU la opción "Permitir sobrescribir el nombre de dispositivo de
todos los dispositivos IO asignados" (área "Opciones avanzadas > Opciones de interfaces" de
las propiedades de la interfaz PROFINET).
Esta opción está desactivada por defecto.
La figura siguiente muestra los ajustes de dirección IP y nombre de dispositivo PROFINET
descritos anteriormente.

31'HYQDPHQRQH!
,3DGGUHVVQRQH!



352),1(7

31'HYQDPHLRG
,3DGGUHVVQRQH!
'HYQR

①
②

31'HYQDPHLRG
,3DGGUHVVQRQH!
'HYQR



Después de cargar la configuración del proyecto de maquinaria de serie, el controlador IO no
tiene nombre de dispositivo ni dirección IP.
Después de la carga, los dispositivos IO tienen un nombre y un número de dispositivo, pero no
tienen dirección IP.

Cómo recibe un dispositivo IO una dirección IP localmente
A continuación se explican las opciones "Ajustar dirección IP en el proyecto" y "Ajustar
dirección IP en el dispositivo", que pueden configurarse por lo general en un sistema IO de
múltiples aplicaciones.
Si se ha ajustado la opción "Sistema IO de múltiples aplicaciones" en el sistema IO, STEP 7
activará automáticamente la opción "Ajustar dirección IP en el proyecto" en los dispositivos IO.
En ese caso, el dispositivo IO recibe del controlador IO una dirección IP derivada de la
dirección IP del controlador IO ajustada localmente (consulte el siguiente capítulo). Esta
opción resulta útil si el dispositivo IO es un dispositivo de campo, p. ej. ET 200MP, ET 200SP
u otro sistema de periferia descentralizada.
Si el dispositivo IO no es un dispositivo de campo "normal" sino, p. ej., un dispositivo HMI con
sistema operativo Windows, la opción "Ajustar dirección IP en el proyecto" descrita
anteriormente no funciona. En tal caso, seleccione la opción "Ajustar dirección IP en el
dispositivo". La dirección IP debe asignarse localmente en el dispositivo y el propio usuario
debe asegurarse de que esta dirección concuerde con las direcciones IP de los demás
dispositivos IO y con la dirección IP del controlador IO.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3277

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
Adaptar un sistema IO localmente (Página 3278)

Adaptar un sistema IO localmente
Para adaptar la máquina cargada con el proyecto de maquinaria de serie, son necesarios unos
pocos pasos de adaptación.
Localmente solo deben adaptarse el nombre de dispositivo y la dirección IP del controlador IO.
Los nombres de dispositivo y las direcciones IP de los dispositivos IO se derivan de estas
adaptaciones. En este ejemplo se describen las repercusiones de los ajustes locales para dos
módulos de máquina concretos.
Los ajustes locales pueden realizarse, p. ej., con el display de la CPU, herramientas de puesta
en servicio como Primary Setup Tool (PST) o PRONETA. Para estos ajustes no se necesita
programadora con STEP 7.

Requisitos
● La máquina se ha cargado con un proyecto de maquinaria de serie (consulte Configurar un
sistema IO de múltiples aplicaciones (Página 3275)).
● El display está operativo o la herramienta deseada para asignar la dirección IP y el nombre
de dispositivo está presente (p. ej. herramienta PST, STEP 7).
● Los puertos del controlador IO y los dispositivos IO están interconectados de acuerdo con
la configuración.

Procedimiento
Tenga en cuenta las condiciones marco y las instrucciones para poner en marcha una
S7-1500. Encontrará una referencia al manual de sistema S7-1500, en el que se describe la
puesta en servicio, en "Consulte también".
Para adaptar una maquinaria de serie localmente, proceda del siguiente modo:
1. Integre la máquina en la red.
2. Conecte el dispositivo a la CPU para asignar la dirección IP y el nombre de dispositivo, p.
ej. una programadora o un PC con el software adecuado.
3. Asigne al controlador IO el nombre de dispositivo y la dirección IP deseados.
Durante el arranque, el controlador IO (CPU) asigna a los dispositivos IO el nombre de
dispositivo PROFINET adaptado y una dirección IP unívoca.
Para la asignación se aplican las siguientes reglas:
● Los nombres de los dispositivos IO se derivan de la concatenación de los siguientes
componentes de nombre, separados por un punto:
<Nombre del dispositivo IO configurado en el proyecto de maquinaria de serie>.<Nombre
del controlador IO respectivo ajustado en el dispositivo>
● Las direcciones IP de los dispositivos IO se derivan de la dirección IP del controlador IO
correspondiente, configurada localmente, y del número de dispositivo (suma).

3278

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nota
Tenga en cuenta que durante la asignación no pueden crearse en la subred direcciones IP
duplicadas. En tal caso, el controlador IO no asigna una nueva dirección IP.
En la siguiente figura se ha asignado el nombre de dispositivo "m1" y la dirección IP
192.168.1.10 al controlador IO de la primera máquina.
Se ha asignado el nombre de dispositivo "m2" y la dirección IP 192.168.1.20 a la segunda
máquina.
Los nombres de dispositivo y direcciones IP obtenidos de este modo pueden consultarse en la
figura.

31'HYQDPHP
,3DGGU

31'HYQDPHP
,3DGGU





352),1(7

31'HYQDPHLRGP
,3DGGU
'HYQR

①
②

31'HYQDPHLRGP
,3DGGU
'HYQR



31'HYQDPHLRGP
,3DGGU
'HYQR

31'HYQDPHLRGP
,3DGGU
'HYQR



Ajuste del nombre de dispositivo y la dirección IP en el controlador IO
Tras el arranque, los dispositivos IO tienen un nombre de dispositivo actualizado (<Nombre de dispositivo configu‐
rado>.<Nombre de dispositivo del controlador IO>) y una dirección IP adaptada (= <Dirección IP del controlador IO>
+ <Número de dispositivo>)

Consulte también
Configurar un sistema IO de múltiples aplicaciones (Página 3275)
Manual de sistema S7-1500 (http://support.automation.siemens.com/WW/view/es/59191792)

Permitir sobrescribir el nombre del dispositivo PROFINET
Con las CPU S7-1500 a partir de la versión de firmware V1.5 existe la posibilidad de
sobrescribir nombres de dispositivo PROFINET de dispositivos IO durante el arranque de la
CPU. Esta opción reduce el esfuerzo necesario a la hora de cambiar un dispositivo, por
ejemplo en la puesta en marcha automática.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3279

Configuración de dispositivos y redes
1.4 Crear configuraciones

Funcionamiento de la opción "Permitir sobrescribir el nombre de dispositivo de todos los dispositivos IO
asignados".
Si está activada la opción "Permitir sobrescribir el nombre de dispositivo de todos los
dispositivos IO asignados", el controlador IO (CPU) puede sobrescribir los nombres de
dispositivo PROFINET de los dispositivos IO en el sistema IO.
Los sistemas IO de múltiples aplicaciones solo pueden operarse si esta opción está activada.
Antes de sobrescribir, el controlador IO comprueba si el tipo de dispositivo IO coincide con el
tipo configurado.
En una puesta en marcha parcial (algunos de los dispositivos IO no están disponibles o están
puenteados) no es posible utilizar esta opción.
PRECAUCIÓN
Fallo en la puesta en marcha parcial
Si en una puesta en marcha parcial o en caso de cableado erróneo se han asignado
incorrectamente los nombres de dispositivo, estos deberán borrarse manualmente después
de corregir el cableado con el fin de conseguir una asignación correcta.
ADVERTENCIA
Nombres de dispositivo PROFINET erróneos por configuración debido a dispositivos
conectados erróneamente
Esto puede provocar un funcionamiento incorrecto, con peligro de muerte, lesiones graves o
daños materiales, según el tipo de periferia conectada, si se introducen nombres de
dispositivo PROFINET erróneos debido a dispositivos conectados erróneamente.
Para evitar este tipo de riesgos, al sustituir un dispositivo compruebe siempre que esté
conectado el dispositivo de sustitución adecuado y que la interconexión de puertos se
corresponda con la topología prevista.
Si la opción "Permitir sobrescribir el nombre de dispositivo de todos los dispositivos IO
asignados" no está activada, el controlador IO no podrá sobrescribir los nombres de los
dispositivos IO. En este caso, tras cambiar un nombre de dispositivo PROFINET en la
configuración, o en caso de cambiar un dispositivo, p. ej., deberá asignar manualmente el
nombre de dispositivo PROFINET al dispositivo IO o borrar el nombre de dispositivo de los
dispositivos IO antes de una puesta en marcha automática.

Típica fuente de peligro
En principio, al sustituir un dispositivo IO ("supuesto normal"), se asegura hasta cierto punto
que la conexión del dispositivo sustituido se realice de acuerdo con la interconexión de puertos
configurada.
La siguiente figura muestra un supuesto en el que se confunden las conexiones de dos líneas
PROFINET de idéntica estructura en dos switchports. Dado que el controlador IO asigna los
nombres de dispositivo en función de la topología prevista, la conexión incorrecta de los
dispositivos puede tener graves efectos en la asignación de nombres.
En este caso, al controlarse actuadores de distinta naturaleza, pueden producirse situaciones
de peligro en la instalación.

3280

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones


,2'

$
%



,2'



,2'

$
%



,2'


①
②
③
④
⑤

Switch con líneas PROFINET conectadas
Dispositivo A, nombre de dispositivo "IOD-1": controla el motor 1
Dispositivo B, nombre de dispositivo "IOD-10": controla el motor 10
El dispositivo A controla el motor 10.
El dispositivo B controla el motor 1.

Procedimiento
Para modificar la opción "Permitir sobrescribir el nombre de dispositivo de todos los
dispositivos IO asignados", proceda del siguiente modo:
1. Seleccione en la vista de redes o en la vista de dispositivos la interfaz PROFINET de la CPU
para la que desee cambiar esta opción.
2. Seleccione el área "Opciones avanzadas > Opciones de interfaz".
3. Modifique la opción.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3281

Configuración de dispositivos y redes
1.4 Crear configuraciones

Control de configuración (configuración futura) para sistemas PROFINET IO
Información importante sobre el control de configuración de sistemas IO
El control de configuración de sistemas IO permite crear a partir de un proyecto de maquinaria
de serie varias versiones concretas de maquinaria de serie.
Hay flexibilidad para variar la configuración de un sistema IO para una aplicación determinada,
siempre que la configuración real derive de la configuración prevista. Por ello, la configuración
prevista representa la cantidad máxima de todas las configuraciones reales que pueden
derivarse de ella.
La figura siguiente muestra a modo de ejemplo cómo de un proyecto de maquinaria de serie
se derivan dos sistemas PROFINET IO con un número distinto de sistemas IO.

,26\VWHP0DVWHU

6LVWHPD,2RSFLµQ

,2'HYB ,2'HYB ,2'HYB ,2'HYB ,2'HYB

6LVWHPD,2RSFLµQ

,2'HYB

,2'HYB ,2'HYB

Los apartados siguientes explican cómo configurar y programar un sistema PROFINET IO
para poder poner en servicio localmente, p. ej., una maquinaria de serie sin necesidad de
software de configuración.

Concepto
El principio del control de configuración ya se conoce a nivel de dispositivo para el uso flexible
de módulos ("configuración futura"). Tanto para la periferia centralizada como para la
descentralizada existe la posibilidad de derivar configuraciones distintas a partir de una sola
configuración principal.

3282

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Con las CPU S7-1500 a partir de la versión de firmware V1.7, este principio se aplica también
a nivel de sistemas IO. Es posible suprimir o agregar estaciones (dispositivos IO) de un sistema
PROFINET IO en una instalación concreta, así como variar el orden de las estaciones.
El control de configuración de dispositivos y el control de configuración de sistemas IO pueden
combinarse; las funciones son independientes entre sí.
Es posible utilizar variantes que difieran de la configuración máxima prevista de un sistema IO.
En un proyecto de maquinaria de serie es posible preparar un conjunto de dispositivos IO para
adaptarlo con flexibilidad, mediante el control de configuración, a diferentes niveles de
configuración.
Existen las siguientes posibilidades de variación:
● Variación del número de dispositivos IO implicados
Los dispositivos IO opcionales para el control de configuración se incorporan a la
configuración transfiriendo un juego de datos determinado con la configuración deseada en
el programa de usuario.
● Variación del orden de los dispositivos IO implicados
La interconexión de puertos de los dispositivos IO se adapta a la topología utilizada
transfiriendo un juego de datos determinado con la topología deseada en el programa de
usuario.
La figura siguiente muestra cómo manejar dos configuraciones distintas mediante un
dispositivo IO que se ha identificado como opcional en la vista de redes de STEP 7.
● Configuración sin dispositivo IO opcional:
en este caso, con ayuda de la instrucción "ReconfigIOSystem" se transfiere a la interfaz
PROFINET un juego de datos que contiene la información de que no debe incorporarse a
la configuración ningún dispositivo IO opcional.
● Configuración con dispositivo IO opcional:
en este caso, con ayuda de la instrucción "ReconfigIOSystem" se transfiere a la interfaz
PROFINET un juego de datos que incorpora a la configuración el dispositivo IO opcional.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3283

Configuración de dispositivos y redes
1.4 Crear configuraciones

3/&B
&38

IO-Device_1
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

3/&B
&38

IO-Device_1
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...

3/&B
&38

IO-Device_1
IM 155-6 PN...

①
②
③

IO-Device_2
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...



IO-Device_3
IM 155-6 PN...




Definido por parametrización: IO-Device_2 es el dispositivo IO opcional
Configuración sin dispositivo IO opcional
Configuración con dispositivo IO opcional

Resumen: Procedimiento básico
Para la aplicación de un concepto de maquinaria de serie cabe distinguir las fases siguientes:
1. Fase de ingeniería: crear proyecto de maquinaria de serie y cargarlo en la máquina o
instalación concreta:
– Configurar completamente todos los dispositivos IO (opciones) que hayan sido
necesarios alguna vez en una máquina o instalación concreta.
– Parametrizar como opcionales los dispositivos IO que se hayan eliminado en máquinas
o instalaciones concretas.
– Preparar el programa de usuario con la posibilidad de realizar in situ la elección deseada
sobre la configuración real, mediante interruptor o dispositivo HMI.
2. Fase de puesta en servicio: preparar para el servicio una máquina o instalación concreta:
– integrar localmente en la red la máquina o instalación (ver Adaptar localmente sistemas
IO de múltiples aplicaciones).
– Con la posibilidad de selección configurada, elegir la configuración existente del sistema
IO.

3284

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parametrización de dispositivos IO opcionales
Requisitos
● CPU S7-1500 a partir de la versión de firmware V1.7 como controlador IO
● STEP 7 V13 SP1 o superior
● Se han tenido en cuenta las reglas (Página 3296) de configuración y funcionamiento de un
proyecto de maquinaria de serie.

Interconexión de puertos para dispositivos IO opcionales
A partir de STEP 7 V15.1 no es necesaria la interconexión de puertos para dispositivos IO
opcionales.
En los siguientes casos es imprescindible una interconexión de puertos entre los dispositivos
del sistema IO que se van a adaptar mediante el programa de usuario.
● Ha configurado IRT.
● Ha configurado MRP.
● Utiliza STEP 7 <= V15.

Procedimiento
Para parametrizar un dispositivo IO como opcional, proceda del modo siguiente:
1. Cree un proyecto.
2. Configure una CPU S7-1500 con versión de firmware V1.7 o superior como controlador IO.
3. Configure los dispositivos IO necesarios y asigne los dispositivos IO al controlador IO.
4. Seleccione el dispositivo IO que desea marcar como opcional.
5. Seleccione el área "Interfaz PROFINET [X1] > Opciones avanzadas".
6. Active la opción "Dispositivo IO opcional".

7. Repita los pasos 4 a 6 para todos los dispositivos IO que desee parametrizar como
opcionales.
8. Cargue la configuración en la CPU.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3285

Configuración de dispositivos y redes
1.4 Crear configuraciones
Resultado: una vez cargada la configuración, el comportamiento del sistema es el siguiente:
● La CPU está preparada para el control de configuración del sistema IO.
● Todos los dispositivos IO están desactivados.
● Con independencia de si la configuración se adapta en el programa de usuario (agregar
dispositivos IO opcionales) o de si no se realiza ningún cambio en la configuración cargada:
En el programa de usuario hay que llamar la instrucción "ReconfigIOSystem" y comunicar
al sistema la configuración actual.
Si no se llama la instrucción "ReconfigIOSystem", el sistema no está operativo.
Consulte más información sobre el procedimiento en Activación de dispositivos IO
opcionales en el programa (Página 3286).

Parametrización rápida en la tabla "Comunicación E/S"
En la ficha "Comunicación E/S" se configura si un dispositivo IO es opcional o no.
En una columna adicional "Dispositivo IO opcional" existe una casilla de verificación activable
individualmente para cada dispositivo IO, que indica si un dispositivo IO es opcional o no. Aquí
se puede adaptar la configuración de forma centralizada.

Activación de dispositivos IO opcionales en el programa
Requisitos
● CPU S7-1500 a partir de la versión de firmware V1.7 como controlador IO.
● STEP 7 V13 SP1.
● Se ha parametrizado como opcional al menos un dispositivo IO.
● Se han tenido en cuenta las reglas (Página 3296) de configuración y funcionamiento de un
proyecto de maquinaria de serie.

Procedimiento
Tenga en cuenta las indicaciones y reglas para la puesta en servicio de un sistema S7-1500
contenidas en la documentación de SIMATIC S7-1500.
La descripción de procedimiento que sigue comprende solo los pasos necesarios para
comprender la activación de un dispositivo IO opcional mediante control del programa.
Para activar o desactivar dispositivos IO opcionales, incluirlos en la configuración y activarlos
en el programa de usuario, proceda del siguiente modo:
1. Cree un juego de datos como se describe aquí.
2. Llame la instrucción "ReconfigIOSystem" y seleccione el modo 1 para desactivar todos los
dispositivos IO.
Si pone la CPU en estado STOP o POWER OFF para reestructurar la instalación (p. ej. para
agregar un dispositivo IO opcional), no es necesario desactivar explícitamente con
"ReconfigIOSystem" y modo 1. En este caso, es decir, tras una transición STOP-RUN y tras
una transición POWER OFF > POWER ON, todos los dispositivos IO están desactivados
automáticamente.

3286

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
3. Si ha llevado la instalación a un estado seguro que permita reestructurarla sin peligro:
Componga la instalación de acuerdo con su caso de aplicación. Enchufe los dispositivos IO
opcionales necesario en los lugares previstos para ello en la configuración (observar el
orden) o bien elimine los dispositivos IO opcionales que ya no necesite.
4. Cablee los dispositivos IO.
5. Arranque el sistema S7-1500 y llame de nuevo la instrucción "ReconfigIOSystem". Elija el
modo 2 para transferir el juego de datos CTRLREC.
6. Una vez transferido con éxito el juego de datos, llame de nuevo la instrucción
"ReconfigIOSystem". Elija el modo 3 para activar todos los dispositivos IO
correspondientes a la configuración actual.

Resultado
La CPU activa los dispositivos IO siguientes:
● Todos los dispositivos IO que no se han parametrizado como dispositivos IO opcionales.
● todos los dispositivos IO opcionales indicados en el juego de datos de control (CTRLREC).
Los dispositivos IO siguientes permanecen desactivados:
● Docking Units (dispositivos IO que cambian en funcionamiento).
● Los dispositivos IO opcionales que no se indican en el juego de datos de control.
Nota
Llame la instrucción "ReconfigIOSystem" en todos los modos con el mismo juego de datos de
control (CTRLREC).
Si utiliza juegos de datos diferentes en los diversos modos, se produce una adaptación
incoherente de la configuración, lo que produce mensajes de error de difícil interpretación.

Ejemplo: Estructura del juego de datos para activación de un dispositivo IO
El dispositivo IO "IO-Device_2" debe ser el único activado en el programa de usuario. Para ello
simplemente se requiere el identificador de hardware de "IO-Device_2".
Recomendación: utilice las constantes de sistema de los identificadores de hardware en lugar
de los valores absolutos, tal como se muestra en este ejemplo. Con este procedimiento, el
contenido del DB no se ve afectado por los cambios de los identificadores de hardware como
consecuencia de una modificación de la configuración.
El juego de datos debe depositarse en un bloque de datos y transferirse a la interfaz
PROFINET del controlador IO en el programa de usuario, mediante la instrucción
"ReconfigIOSystem".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3287

Configuración de dispositivos y redes
1.4 Crear configuraciones

3/&B
&38

IO-Device_1
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...




3/&B
&38

①
②

IO-Device_1
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...

IO-Device_2 está parametrizado como dispositivo IO opcional.
Después de transferir el juego de datos y de activar la configuración con la instrucción "Recon‐
figIOSystem", IO-Device_2 se ha incorporado a la configuración e interviene en el intercambio
de datos con el controlador IO.

Creación del bloque de datos
En este ejemplo el juego de datos de control está creado en un bloque de datos. El bloque de
datos está estructurado de la siguiente manera:
Línea 2: Definición de array: array del tipo Word con 4 elementos. El tipo de datos permitido es
Array of Word .
Línea 3: versión del juego de datos (actual: V1.0).
Línea 4: número de dispositivos IO opcionales que activar (en este caso: 1).
Línea 5: Lista de identificadores de hardware de los dispositivos IO, aquí agregada como
constante del sistema.
Línea 6: Número de interconexiones de puertos activados en el programa de usuario (en este
caso: 0).
Línea 7: otros juegos de datos (opcional).

3288

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Reglas sobre la secuencia de llamada de "ReconfigIOSystem"
● Asigne a la instrucción "ReconfigIOSystem" siempre el mismo juego de datos de control
(parámetro de entrada "CTRLREC").
● Secuencia de llamada tras transición POWER OFF -> POWER ON:
– Llamada a ReconfigIOSystem con modo 1 (opcional).
– Llamada a ReconfigIOSystem con modo 2 (obligatoria, incluso sin reconfiguración).
– Llamada a ReconfigIOSystem con modo 3 (obligatoria).
● Secuencia de llamada tras transición STOP > RUN:
– Llamada a ReconfigIOSystem con modo 1 (opcional).
– Llamada a ReconfigIOSystem con modo 2 (obligatoria, aunque la configuración se haya
cambiado en STOP. En caso contrario, no es necesaria).
– Llamada a ReconfigIOSystem con modo 3 (obligatoria).
● Secuencia de llamada con reconfiguración en RUN:
– Llamada a ReconfigIOSystem con modo 1 (obligatoria).
– Llamada a ReconfigIOSystem con modo 2 (obligatoria).
– Llamada a ReconfigIOSystem con modo 3 (obligatoria).

Explicaciones y consejos sobre las reglas
● Si en el juego de datos de control o en el bloque de datos no se indica un dispositivo IO
parametrizado como opcional, dicho dispositivo IO no forma parte de la configuración y no
participa en el intercambio de datos con la CPU.
● Aunque no se active ningún dispositivo IO opcional y se opere con la configuración cargada
sin realizar una reconfiguración, es necesario observar el procedimiento descrito en el
apartado anterior y transferir el juego de datos de control a la CPU.
El juego de datos de control tiene una estructura sencilla con las variables siguientes:
– Versión (High Byte =1, Low Byte = 0)
– número de dispositivos opcionales que activar = 0
– Número de interconexiones de puertos activados en el programa de usuario = 0
● Tras una transición STOP > RUN y tras una transición POWER OFF > POWER ON, todos
los dispositivos IO están desactivados automáticamente. Por ello, para que el control de
configuración funcione correctamente no se necesita llamar ReconfigIOSystem con modo
1.
Si utiliza su proyecto como modelo de validez general para la programación del control de
configuración, le recomendamos que antes de cada reconfiguración llame a
ReconfigIOSystem con modo 1. Posteriormente podrá utilizar el modelo también para
reconfiguraciones en estado operativo RUN.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3289

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Puesta en marcha de sistemas IO de grandes dimensiones (más de 8 dispositivos IO
opcionales) con uso simultáneo de IRT:
Para mantener tiempos de arranque reducidos al activar los dispositivos IO opcionales
(ReconfigIOSystem, modo 3), observe el consejo siguiente: compruebe los números de los
dispositivos IO. Los números de dispositivo deben seguir la interconexión topológica en
orden ascendente a partir del controlador IO. Cuanto más lejos esté un dispositivo IO del
controlador IO en la topología, es decir, cuantos más dispositivos IO haya entre el
controlador IO y el dispositivo IO en cuestión, mayor debe ser el número de dispositivo.
Los números de dispositivo se ajustan en el área "Direcciones Ethernet - PROFINET" de la
ventana de inspección estando seleccionada la interfaz PROFINET.
Ejemplo de asignación de números de dispositivo en una topología en línea:
3/&B
&38

IO-Device_1
IM 155-6 PN...

1

IO-Device_4
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

2

3

4

● La CPU procesa la instrucción "ReconfigIOSystem" para transferir el juego de datos de
control de modo asíncrono.
Si llama a la instrucción en el programa de arranque es necesario llamar repetidamente a
"ReconfigIOSystem" en un bucle hasta que los parámetros de salida "BUSY" o "DONE"
indiquen que se ha transferido el juego de datos.
Sugerencia: Para programar el bucle utilice el lenguaje de programación SCL con la
instrucción REPEAT ... UNTIL.
REPEAT
"ReconfigIOSystem"(REQ := "start_config_ctrl",
MODE := 1,
LADDR := 64,
CTRLREC := "myCTRLREC".ArrMachineConfig0,
DONE => "conf_DONE",
BUSY => "conf_BUSY",
ERROR => "conf_ERROR",
STATUS => "conf_STATUS");
UNTIL NOT "conf_BUSY"
END_REPEAT;

Información adicional
Puede consultar información sobre la estructura básica del juego de datos y sobre el uso de la
instrucción "ReconfigIOSystem" aquí.

Consulte también
Parametrización de dispositivos IO opcionales (Página 3285)

Parametrización de ubicación flexible de dispositivos IO
El apartado siguiente muestra cómo establecer los requisitos para cambiar el orden de
dispositivos IO en un sistema PROFINET IO.

3290

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Esta función también es posible con dispositivos IO opcionales. Para facilitar la
representación, a continuación se representa una configuración máxima sin dispositivos IO
opcionales.

Concepto
Una aplicación típica de un proyecto de maquinaria de serie consiste en componer, a partir de
un conjunto de diversas partes de instalación, una instalación general que solo se diferencie
por la diferente disposición espacial relativa entre las partes: p. ej., en sistemas de transporte.
Cada parte de la instalación consta de una unidad funcional entre la parte mecánica (carriles
o cintas transportadoras) y la eléctrica (alimentación, dispositivo IO con módulos de periferia,
sensores, actuadores, motores, conexión PROFINET para intercambio de datos con el
controlador central, etc.).
La figura siguiente muestra cómo cambiando dos segmentos de carril se genera un sistema de
transporte nuevo adaptado a las condiciones locales mediante un desvío antepuesto.

([LW
0

0

0

0
7UDFN
6WDWLRQ

0

0

([LW

0

0
7UDFN
6WDWLRQ

Desde el punto de vista de la automatización interesa la implementación de un orden flexible
de los distintos dispositivos IO en un proyecto que ya no se modificará in situ.
El orden de los dispositivos IO está definido por la interconexión de puertos. En las
propiedades de los puertos de los dispositivos IO es posible configurar el puerto interlocutor,
y por tanto el dispositivo subsiguiente que está conectado al puerto local correspondiente. Si
el puerto interlocutor debe definirlo el programa de usuario, como puerto interlocutor puede
elegirse la opción "Interlocutor activado por programa de usuario"
La figura siguiente muestra la configuración inicial del sistema de transporte anterior, que
permite modificar mediante el programa de usuario el orden de los dispositivos IO conectados.
En el ejemplo, la secuencia de IO-Device_2 y IO-Device_3 se controla a través del programa
de usuario.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3291

Configuración de dispositivos y redes
1.4 Crear configuraciones

3/&B
&38

IO-Device_1
IM 155-6 PN...

p1

3/&B
&38

p2

p1

IO-Device_1
IM 155-6 PN...

p1

IO-Device_3
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

p2

p1

p2

p2

p1

p1

IO-Device_4
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...

p2

p1

IO-Device_4
IM 155-6 PN...

p2

p1

Para determinar qué configuración de puertos interlocutores elegir, anote para cada
dispositivo y para cada puerto de cada dispositivo qué interlocutor puede interconectarse.
● Si en diferentes configuraciones previstas el interlocutor es siempre el mismo, seleccione
el puerto interlocutor para ese interlocutor.
● Si en diferentes configuraciones varían los interlocutores, elija "Configurar interlocutor por
programa de usuario".
Para el ejemplo de la figura anterior se obtienen las configuraciones de puertos siguientes:

3292

Dispositivo

Puerto local

Ajuste del puerto interlocu‐ Explicación
tor

PLC_1

p1

p1 (IO-Device_1)

Interlocutor de PLC_1 en puerto 1
es IO-Device_1 (siempre)

IO-Device_1

p1

p1 (PLC_1)

Interlocutor de IO-Device_1 en
puerto 1 es PLC_1 (siempre)

IO-Device_1

p2

Interlocutor activado por
programa de usuario

Interlocutor de IO-Device_1 en
puerto 2 es IO-Device_2 o IO-De‐
vice_3 => Configurar interlocutor
por programa de usuario

IO-Device_2

p1

Interlocutor activado por
programa de usuario

Interlocutor de IO-Device_2 en
puerto 1 es IO-Device_1 o IO-De‐
vice_3 => Configurar interlocutor
por programa de usuario

IO-Device_2

p2

Interlocutor activado por
programa de usuario

Interlocutor de IO-Device_2 en
puerto 2 es IO-Device_3 o IO-De‐
vice_4 => Configurar interlocutor
por programa de usuario

IO-Device_3

p1

Interlocutor activado por
programa de usuario

Interlocutor de IO-Device_3 en
puerto 1 es IO-Device_2 o IO-De‐
vice_1 => Configurar interlocutor
por programa de usuario

IO-Device_3

p2

Interlocutor activado por
programa de usuario

Interlocutor de IO-Device_3 en
puerto 2 es IO-Device_4 o IO-De‐
vice_2 => Configurar interlocutor
por programa de usuario

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dispositivo

Puerto local

Ajuste del puerto interlocu‐ Explicación
tor

IO-Device_4

p1

Interlocutor activado por
programa de usuario

Interlocutor de IO-Device_4 en
puerto 1 es IO-Device_3 o IO-De‐
vice_2 => Configurar interlocutor
por programa de usuario

IO-Device_4

p2

Cualquier interlocutor

No hay previsto interlocutor en
puerto 2

Requisitos
● CPU S7-1500 a partir de la versión de firmware V1.7 como controlador IO.
● STEP 7 V13 SP1 o superior.
● Se han tenido en cuenta las reglas (Página 3296) de configuración y funcionamiento de un
proyecto de maquinaria de serie.

Procedimiento
Para configurar el interlocutor de un puerto para una interconexión controlada por programa,
proceda del modo siguiente:
1. Seleccione la interfaz PROFINET del dispositivo (controlador IO o dispositivo IO) cuyo
puerto desee configurar.
2. En las propiedades de la interfaz PROFINET elija el área "Interconexión de puertos"
(Opciones avanzadas > Puerto [...] > Interconexión de puertos).
3. En la lista desplegable seleccione como puerto interlocutor "Configurar interlocutor por
programa de usuario".
4. Repita los pasos 1 a 3 para cada puerto que vaya a interconectarse mediante el programa
de usuario.

Consulte también
Adaptar en el programa la ubicación de dispositivos IO (Página 3293)

Adaptar en el programa la ubicación de dispositivos IO
Requisitos
● CPU S7-1500 a partir de la versión de firmware V1.7 como controlador IO.
● Al menos un puerto interlocutor se ha parametrizado como "Interlocutor activado por
programa de usuario".
● Se han tenido en cuenta las reglas (Página 3296) de configuración y funcionamiento de un
proyecto de maquinaria de serie.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3293

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento
El procedimiento es el correspondiente a la activación de dispositivos IO opcionales.
Lo único necesario es ampliar la estructura del juego de datos para la asignación de puertos
controlada por programa. Dicha ampliación se describe en los apartados siguientes.

Ejemplo: Estructura del juego de datos para asignación de puertos interlocutores
Para elaborar el juego de datos se necesitan los identificadores de hardware de los puertos.
El juego de datos debe depositarse en un bloque de datos y transferirse a la interfaz
PROFINET del controlador IO en el programa de usuario, mediante la instrucción
"ReconfigIOSystem".
Como el parámetro de entrada RECORD de la instrucción "ReconfigIOSystem" tiene el tipo de
datos VARIANT, primero es necesario crear un tipo de datos para el bloque de datos.
En los apartados siguientes se explica la estructura del tipo de datos PLC y la estructura del
bloque de datos basado en el mismo.

Seleccionar configuración derivada
Para la configuración elegida a continuación se muestra cómo debe crearse el juego de datos
para que el programa de usuario interconecte los dispositivos IO en el orden previsto.

3/&B
&38

IO-Device_1
IM 155-6 PN...

p1

p1

p2

p1

IO-Device_4
IM 155-6 PN...

IO-Device_2
IM 155-6 PN...

IO-Device_3
IM 155-6 PN...

p2

p1

p2

p1

Un requisito es la configuración flexible del apartado anterior (Página 3290) con los ajustes
descritos para los puertos interlocutores correspondientes.
Los puertos interlocutores en la configuración derivada concreta están definidos, por lo que es
posible denominar los identificadores de hardware de los puertos que intervienen.
La tabla siguiente contiene solo los dispositivos cuyos puertos puede determinar el programa
de usuario. Estos son los únicos dispositivos relevantes para crear el juego de datos.
Dispositivo

Puerto local

Ajuste del puerto interlocu‐ Puerto interlocutor de la configura‐
tor
ción elegida

IO-Device_1

p2 = puerto 2

Interlocutor activado por
programa de usuario

Puerto 1 de IO-Device_3

Interlocutor activado por
programa de usuario

Puerto 2 de IO-Device_3

Interlocutor activado por
programa de usuario

Puerto 1 de IO-Device_4

Identificador de
hardware: 251
IO-Device_2

p1 = puerto 1
Identificador de
hardware: 281

IO-Device_2

p2 = puerto 2
Identificador de
hardware: 311

3294

Identificador de hardware: 261

Identificador de hardware: 291

Identificador de hardware: 321

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Creación del bloque de datos
Para la configuración derivada se explica aquí a modo de ejemplo la estructura del bloque de
datos "DB-IO-SYSTEM-Port-Interconnections".
Este bloque de datos se utiliza al llamar la instrucción "ReconfigIOSystem" en el parámetro de
entrada "CTRLREC".
En lugar de los valores absolutos para los identificadores de hardware de los puertos, aquí se
utilizan las constantes de sistema de los identificadores de hardware.
El bloque de datos está estructurado de la siguiente manera:
Línea 2: declaración de un Array of Word (solo es posible este tipo de datos).
Línea 3: versión del juego de datos de control: V1.0.
Línea 4: número de dispositivos IO opcionales: 0.
Línea 5: número de interconexiones de puertos especificadas: 3.
Línea 6: interconexión de puertos 1, puerto local.
Línea 7: interconexión de puertos 1, puerto interlocutor.
Línea 8: interconexión de puertos 2, puerto local.
Línea 9: interconexión de puertos 2, puerto interlocutor.
Línea 10: interconexión de puertos 3, puerto local.
Línea 11: interconexión de puertos 3, puerto interlocutor.

No se ha indicado la interconexión en el bloque de datos
Si en las propiedades del puerto ha parametrizado el puerto interlocutor como "Configurar
interlocutor por programa de usuario" y no se indica dicho puerto ni en el juego de datos ni en
el bloque de datos, la CPU activa para dicho puerto la configuración "Cualquier interlocutor".
Si no se transfiere ningún juego de datos, la CPU activa la configuración "Cualquier
interlocutor" para todas las asignaciones controladas por programa.
Para configuraciones IRT no está permitida la configuración "Cualquier interlocutor".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3295

Configuración de dispositivos y redes
1.4 Crear configuraciones

Información adicional
Puede consultar información sobre la estructura básica del juego de datos y sobre el uso de la
instrucción "ReconfigIOSystem" aquí.

Comportamiento del sistema y reglas
A continuación se explica cómo se comporta un sistema IO en funcionamiento cuya
configuración está controlada por programa de usuario.
Además se explican las reglas y restricciones que deben tenerse en cuenta para la
configuración máxima prevista en el proyecto de maquinaria de serie.

Comportamiento del sistema
● Diagnóstico del sistema:
Cuando un dispositivo IO está desactivado, se muestra como "desactivado" en la vista de
diagnóstico del sistema (vista online u Online & Diagnóstico)
● Vista topológica:
Vista offline: Como esté configurada. Los puertos cuyo puerto interlocutor se parametrizó
como "Configurar interlocutor por programa de usuario" no muestran ninguna
interconexión.
Vista online: Los puertos y las interconexiones con dispositivos IO desactivados se
representan en un tono verde distinto al de los puertos e interconexiones seguros de
dispositivos IO activados.
● Representación en el servidor web:
Los nombres de dispositivos se muestran como están configurados (Propiedades >
General > Información del proyecto).
El nombre de dispositivo PROFINET asignado se muestra para la CPU en la página web
"Comunicación", ficha "Parámetros".
Parámetros de dirección IP: Los parámetros de dirección IP actualmente asignados se
muestran en la página web "Información del módulo".
Topología: En el servidor web la topología actual se muestra tal como está tras ser
adaptada por el programa de usuario. El servidor web muestra los dispositivos IO
parametrizados como opcionales como dispositivos IO "desactivados".

Reglas
Se aplican las reglas para proyectos de maquinaria de serie descritas aquí (Página 3272).

3296

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para sistemas IO con control de configuración se aplican las reglas adicionales siguientes:
● Si configura MRP (Media Redundancy Protocol):
No está permitido interconectar mediante programa de usuario los puertos parametrizados
como puertos en anillo.
Sin embargo, los dispositivos con puertos en anillo (dispositivos de un dominio MRP)
pueden ser dispositivos IO opcionales.
● Si configura Docking Systems (= dispositivos IO que cambian en funcionamiento):
Ni la Docking Station ni el primer dispositivo IO de una Docking Unit pueden ser dispositivos
IO opcionales.
No está permitido interconectar mediante programa de usuario los puertos de las Docking
Units.
● Si configura IRT:
La secuencia de los dispositivos IO sincronizados ("dispositivos IRT") debe definirse por
configuración y no está permitido que cambie en las diferentes versiones de una
maquinaria de serie. No está permitido interconectar mediante programa de usuario los
puertos de dispositivos IRT.
Es posible parametrizar como dispositivos IO opcionales dispositivos IRT de una línea.
Además también es posible interconectar mediante el programa de usuario dispositivos RT
que, p. ej., estén "colgados" de dicha línea a través de un puerto conmutado (ver figura).
3/&B
&38

IRT

IRT

IRT

RT

Performance Upgrade
Introducción
Performance Upgrade
Performance Upgrade aplica la Application Class "High Performance" de la especificación
PROFINET V2.3.
Performance Upgrade incorpora una serie de medidas que mejoran PROFINET con IRT en los
aspectos siguientes:
● Reducción de los retardos en tiempo de ejecución de los dispositivos IO
● Aumento del ancho de banda para datos IO cíclicos
● Reducción del ancho de banda necesario de los telegramas PROFINET
● Reducción del tiempo de ciclo de emisión

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3297

Configuración de dispositivos y redes
1.4 Crear configuraciones
Las mejoras conseguidas por Performance Upgrade permiten utilizar el sistema PROFINET IO
con más dispositivos manteniendo el tiempo de ciclo de emisión o bien reducir el tiempo de
ciclo de emisión manteniendo el número de dispositivos.
Hasta ahora, con PROFINET era posible alcanzar tiempos de ciclo de emisión de 250 µs.
Con Performance Upgrade, ahora se alcanzan tiempos de ciclo de emisión isócronos de hasta
125 µs con los métodos Fast Forwarding, Dynamic Frame Packing y Fragmentation. Los
tiempos de ciclo de emisión cortos siguen permitiendo una comunicación estándar.
Performance Upgrade sirve de ayuda para adaptar aplicaciones muy exigentes a la velocidad
y los tiempos de ciclo de emisión.

Dynamic Frame Packing
Dynamic Frame Packing
Hasta ahora se envían frames PROFINET IO individuales para cada dispositivo PROFINET
IO.
La ampliación de rendimiento utiliza para topologías en línea el método Dynamic Frame
Packing, que se basa en el procedimiento marco totalizador. En el procedimiento marco
totalizador, un frame contiene los datos de usuario de todos los dispositivos de una línea.
Además, en el Dynamic Frame Packing cada dispositivo IO recoge sus datos de usuario del
frame y reenvía el resto. De este modo, el frame se reduce de dispositivo IO en dispositivo IO.
Dynamic Frame Packing mejora el aprovechamiento del ancho de banda en una topología en
línea.
La figura siguiente muestra el funcionamiento del método Dynamic Frame Packing tomando
como ejemplo un frame que contiene los datos de usuario de 3 dispositivos IO.

3298

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones













①
②

El frame PROFINET IO contiene los datos de usuario de los 3 dispositivos IO (verde, azul,
naranja).
El frame PROFINET IO alcanza el primer dispositivo IO. El dispositivo IO recoge sus datos de
usuario (verde) del frame y reenvía el resto del frame.

③
④

El frame PROFINET IO contiene los datos de usuario de dos dispositivos IO (azul, naranja).

⑤
⑥

El frame PROFINET IO contiene los datos de usuario de un dispositivo IO (naranja).

El frame PROFINET IO alcanza el segundo dispositivo IO. El dispositivo IO recoge sus datos de
usuario (azul) del frame y reenvía el resto del frame.
El frame PROFINET IO alcanza el último dispositivo IO. El dispositivo IO recoge el frame com‐
pleto, incluidos los datos de usuario (naranja).

Grupos DFP
Dynamic Frame Packing agrupa automáticamente en grupos DFP los dispositivos IO que
soportan Performance Upgrade. Para que puedan agruparse en un grupo DFP, los
dispositivos IO deben estar situados sucesivamente en una línea y tener el mismo tiempo de
actualización y el mismo tiempo de supervisión de respuesta. En cuanto se rebasa el tamaño
máximo de frames para el grupo DFP o se alcanza el número máximo de miembros que puede
tener un grupo DFP, Dynamic Frame Packing abre automáticamente un grupo DFP nuevo.
STEP 7 muestra los grupos DFP en el campo "Dispositivos IO" de "Administración de
dominios" > "Dominios Sync" > "Nombre del dominio Sync" > "Dispositivo".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3299

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nota
Dynamic Frame Packing con tiempos de supervisión de respuesta grandes
Si para un dispositivo IO se ajusta el parámetro "Ciclos de actualización aceptados sin datos
IO" a más de 31, Dynamic Frame Packing no incorpora este dispositivo IO a un grupo DFP.

Fragmentación
Fragmentación
La transferencia de un frame Ethernet estándar completo con datos TCP/IP dura como
máximo 125 µs. Esto hace que no sea posible reducir a voluntad el tiempo de ciclo para datos
PROFINET IO.
Performance Upgrade utiliza el método de fragmentación, que descompone los telegramas
TCP/IP en telegramas parciales. Estos telegramas se transmiten al dispositivo de destino a lo
largo de varios ciclos de emisión y una vez en él se recompone de nuevo el telegrama TCP/IP.
Aplicando la fragmentación es posible reducir el tiempo de ciclo a valores inferiores a 250 µs.
Con ciclos de emisión cortos el ancho de banda necesario para datos TCP/IP es menor. El uso
del ancho de banda para datos IO cíclicos aumenta, es decir, que en el mismo tiempo se
pueden transferir más datos IO cíclicos.
La figura siguiente muestra el funcionamiento del método de fragmentación.
wV


wV

0D[7&3,3WHOHJUDP

0D[7&3,3WHOHJUDP


wV

wV

wV



7HLO

①
②
③

3300

7HLO

7HLO

Un frame Ethernet estándar con datos TCP/IP tiene como mínimo 125 µs.
Con fragmentación, el frame Ethernet estándar se descompone en telegramas parciales
Los telegramas parciales se dividen en varios tiempos de ciclo de emisión cortos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Fast Forwarding
Fast Forwarding
Para distinguir si un telegrama debe reenviarse o utilizarse, un dispositivo PROFINET IO
necesita la ID del frame. Hasta ahora, el dispositivo IO no recibía la ID del frame hasta pasados
1440 ns.
Performance Upgrade utiliza el método Fast Forwarding, según el cual la ID de frame está
situada más adelante en el telegrama. El tiempo de tránsito por el dispositivo se reduce a 320
ns.
Con Fast Forwarding se reduce el tiempo de tránsito de los frames en el sistema PROFINET
IO. En las topologías en línea, en anillo y de árbol es donde más se notan las ventajas en el
rendimiento.
La figura siguiente compara el tránsito de un frame PROFINET IO a través de un dispositivo IO
con Fast Forwarding y sin Fast Forwarding.



QV

VLQ)DVW)RUZDUGLQJ
,'



,'

QV
,'

FRQ)DVW)RUZDUGLQJ
,'

①
②

,'

,'

Inicio:
● Ambos frames PROFINET alcanzan el dispositivo IO.
Los dispositivos IO comienzan a comprobar las ID de los frames.
Al cabo de 320 ns:
● Sin Fast Forwarding: el dispositivo IO continúa comprobando la ID del frame PROFINET.

③

● Con Fast Forwarding: el dispositivo IO recibe del frame PROFINET la ID del frame y reenvía
el frame.
Al cabo de 1440 ns:
● Sin Fast Forwarding: el dispositivo IO recibe del frame PROFINET la ID del frame y reenvía
el frame.
● El frame PROFINET con Fast Forwarding tiene "ventaja" frente al frame PROFINET sin Fast
Forwarding.

Configurar IRT con el máximo rendimiento
Las aplicaciones de gama alta con comunicación IO exigen los máximos requisitos de
rendimiento en lo que respecta al procesamiento de IO, p. ej., el control de palas de
aerogenerador (Converter Control).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3301

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para utilizar la comunicación IRT del sistema PROFINET IO con el máximo rendimiento, active
la opción "Permitir alto rendimiento".
La activación de la opción "Permitir alto rendimiento" tiene las repercusiones siguientes:
● Pueden ajustarse tiempos de ciclo de emisión de 188 µs y 125 µs (en la CPU 1518).
● Puede ajustarse un mayor uso del ancho de banda para datos IO cíclicos.
● Pueden utilizarse la opción "Permite utilizar 'Fast Forwarding'".

Requisitos
● CPU S7-1500 con versión de firmware V2.0 o superior

Activar "Permitir alto rendimiento"
Para activar "Permitir alto rendimiento", proceda del siguiente modo:
1. Seleccione el sistema PROFINET IO en la vista de redes de STEP 7.
2. En la ventana de inspección, navegue hasta "Propiedades" > "General" > "PROFINET" >
"Administración de dominios" > "Dominios Sync" > "Nombre del dominio Sync".
3. Active la opción "Permitir alto rendimiento".

Utilizar más ancho de banda para datos IO cíclicos
Requisitos: Se ha activado "Permitir alto rendimiento".
Para ajustar un mayor ancho de banda para datos IO cíclicos en el sistema PROFINET IO,
proceda del siguiente modo:
1. Seleccione el sistema IO en la vista de redes de STEP 7.
2. En la ventana de inspección, navegue hasta "Propiedades" > "General" > "PROFINET" >
"Administración de dominios" > "Dominios Sync" > "Nombre del dominio Sync" > "Detalles".
3. En la lista desplegable seleccione "90 % de datos IO cíclicos como máximo. Mayoría de
datos IO cíclicos."

3302

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nota
Uso de ancho de banda en modo isócrono
Si el sistema PROFINET IO opera en modo isócrono, evite usar el ajuste del uso de ancho de
banda "90% de datos IO cíclicos como máximo. Mayoría de datos IO cíclicos".

Ajustar tiempos de ciclo de emisión pequeños
Requisitos: Se ha activado "Permitir alto rendimiento".
1. Seleccione el sistema PROFINET IO en la vista de redes de STEP 7.
2. En la ventana de inspección, navegue hasta "Propiedades" > "General" > "PROFINET" >
"Administración de dominios" > "Dominios Sync" > "Nombre del dominio Sync".
3. Seleccione el tiempo de ciclo de emisión en la lista desplegable "Tiempo de ciclo de
emisión".

Requisitos del método de fragmentación (CPU 1518-4 PN/DP)
Utilizando las siguientes combinaciones de ajustes de tiempos de ciclo de emisión y ancho de
banda, los dispositivos del sistema IO emplearán el método de fragmentación:
● Tiempo de ciclo de emisión de 125 µs: se utiliza siempre la fragmentación, sea cual sea el
ajuste del ancho de banda.
● Tiempo de ciclo de emisión de 188 µs: se utiliza la fragmentación con el ajuste del ancho
de banda "50% de datos IO cíclicos como máximo. Proporción equilibrada" y "90% de datos
IO cíclicos como máximo. Mayoría de datos IO cíclicos".
La interfaz PROFINET IO del controlador soporta la fragmentación cuando están desactivados
todos los puertos menos uno.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3303

Configuración de dispositivos y redes
1.4 Crear configuraciones

Permitir Fast Forwarding
Requisitos:
● El dispositivo PROFINET IO debe soportar el método Fast Forwarding.
● Se ha activado "Permitir alto rendimiento".
● La interfaz PROFINET IO soporta Fast Forwarding cuando están desactivados todos los
puertos menos uno.
Para permitir Fast Forwarding, proceda del siguiente modo:
1. Seleccione el sistema PROFINET IO en la vista de redes de STEP 7.
2. En la ventana de inspección, navegue hasta "Propiedades" > "General" > "PROFINET" >
"Administración de dominios" > "Dominios Sync" > "Nombre del dominio Sync".
3. Active la opción "Permite utilizar 'Fast Forwarding'".
Nota
Fast Forwarding e IPv6
El funcionamiento de Fast Forwarding no es compatible con IPv6.
En cuanto un dispositivo IO de la subred utiliza una dirección IPv6 ya no está permitido activar
"Fast Forwarding".

Optimizar los ajustes de puertos para tiempos de ciclo de emisión pequeños
Es posible optimizar todavía más el uso del ancho de banda en el sistema PROFINET IO
utilizando cables con una longitud < 20 m entre los dispositivos o ajustando un tiempo de
propagación de señal pequeño (máx. 0,12 µs).
Para configurar en STEP 7 cables con una longitud < 20 m o el correspondiente tiempo de
propagación de señal, proceda del siguiente modo:
1. Seleccione el puerto en la vista topológica de STEP 7.
2. En la ventana de inspección, navegue hasta el campo "Puerto del interlocutor" en
"Interconexión de puertos".
3. Active la opción "Longitud de cable" (ajuste predeterminado) o "Tiempo de propagación de
señal".
4. En la lista desplegable elija "< 20 m" o introduzca el tiempo de propagación de señal.

Consulte también
Reglas y notas sobre las configuraciones IRT (Página 3190)
Uso del ancho de banda para controladores IO sincronizados (Página 3188)

3304

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ejemplo de configuración para IRT con el máximo rendimiento
La figura siguiente muestra una configuración de ejemplo que permite conseguir el máximo
rendimiento.
&3831'3

,031+6

,031+6

,031+6

El puerto 2 de la interfaz X1 y los puertos de los módulos de interfaz de la línea utilizan el ajuste
siguiente: material de cobre, longitud de cable < 20 m.
El puerto 2 de la interfaz X1 y los puertos de los módulos de interfaz de la línea utilizan el ajuste
siguiente: material de cobre, longitud de cable < 20 m.
A través de las interfaces X2 y X3 de la CPU puede establecer una conexión PG con la CPU.

Utilice los ajustes siguientes para el dominio Sync:
● Active la opción "Permitir alto rendimiento".
● Ajuste el tiempo de ciclo de emisión a 125 µs.
● Ajuste el uso del ancho de banda a "90% de datos IO cíclicos como máximo. Mayoría de
datos IO cíclicos."
● Active la opción "Permite utilizar 'Fast Forwarding'".

Comunicación Ethernet estándar con IRT con máximo rendimiento
La comunicación Ethernet estándar también es posible en un sistema PROFINET IO con
máximo rendimiento. Recuerde que desde el punto de vista del controlador IO hay que
disponer primero los dispositivos IRT, y los dispositivos Ethernet estándar al final de la línea.
Con una gran afluencia de datos en la comunicación Ethernet estándar es conveniente
descargar la red separando la comunicación Ethernet estándar de la comunicación cíclica en
tiempo real. Ejemplo: Para el sistema PROFINET IO rápido utilice la interfaz X1, y para la
comunicación Ethernet estándar la interfaz X2.

Mantenimiento con juegos de datos Asset Management
Información importante sobre la administración de componentes con PROFINET
No cabe imaginar que las máquinas e instalaciones se manejen sin tener conocimientos
detallados de sus dispositivos y componentes.
Por ello, el mantenimiento necesita datos, a ser posible completos y actualizados.
PROFIBUS & PROFINET International (PI) ha atendido el deseo de lograr mayor
transparencia respecto a los datos proporcionados por los componentes de las instalaciones:
los datos de identificación y mantenimiento, acreditados desde la época de PROFIBUS, se han
ampliado nuevamente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3305

Configuración de dispositivos y redes
1.4 Crear configuraciones
La actual especificación PROFINET satisface este deseo definiendo un juego de datos
especial: el Asset Management Record (AMR).
El objetivo de esta definición es que se puedan registrar online todos los componentes de una
instalación que precisan mantenimiento, no solo aquellos componentes que se pueden
direccionar y a los que se puede acceder mediante el modelo de dispositivos PROFINET
(dispositivo/módulo/submódulo). De este modo, ahora PROFINET también accede a
componentes ajenos a PROFINET.

Componentes en general y juegos de datos Asset Management
Los componentes (hardware y software/firmware) forman parte de una máquina, p. ej., una
soldadora láser, o de una instalación.
Gran parte de los componentes de dispositivos ya es identificable en el contexto de PROFINET
mediante acreditadas funciones I&M o mediante los correspondientes juegos de datos (I&M0
a I&M5): el dispositivo propiamente dicho, así como sus módulos y submódulos. Es decir,
todos los componentes que son direccionables mediante el modelo de dispositivos
PROFINET.
Los componentes que no son direccionables mediante el modelo de dispositivos PROFINET
pero cuyos datos deben poderse registrar online para la operación y el mantenimiento son
identificables mediante funciones de administración de componentes. Estos datos de
administración de componentes (abreviado: datos AM) están depositados con una estructura
definida en un juego de datos especial, el Asset Management Record (AMR) mencionado
anteriormente.
La guía PROFINET "Identification & Maintenance Functions" distingue entre funciones I&M
(datos I&M) y funciones Asset Management (datos AM): En los apartados siguientes se
tratarán exclusivamente los datos AM.
Entre los componentes que es posible leer adicionalmente online mediante juegos de datos
Asset Management se encuentran tanto componentes de hardware (p. ej., módulos de bus de
fondo de un dispositivo) como componentes de firmware (p. ej., una regulación de
accionamientos con versiones propias).

Ejemplos de aplicación
La lectura de Asset Management Records durante la instalación o durante el funcionamiento
permite, p. ej., leer la información siguiente:
● ¿Se están utilizando solo equipos habilitados (Whitelist-Check)?
● Es inminente una actualización de firmware. Obtenga una visión general rápida: ¿Qué
dispositivos o componentes se ven afectados y es necesario actualizar?

Poner a disposición datos Asset Management:
El concepto de administración de componentes de dispositivos PROFINET prevé que los
fabricantes de dispositivos PROFINET se encarguen de que los componentes de
automatización que no sean PROFINET se pongan a disposición a través de un Asset
Management Record. Este juego de datos (Record) está asignado al dispositivo PROFINET.
A diferencia de un dispositivo IO "estándar", con los I-devices incumbe a su configurador
proporcionar el juego de datos Asset Management. En este caso los componentes son los

3306

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
módulos centrales del I-device. Estos módulos centrales no son visibles desde el controlador
IO de nivel superior de PROFINET; el controlador IO de nivel superior solo "ve" las áreas de
transferencia a través de las que intercambia datos IO con el I-device.
El principio de esta puesta a disposición se explica en el capítulo siguiente.

Leer datos Asset Management
El juego de datos Asset Management tiene el índice 0xF880, y el usuario del juego de datos,
p. ej., una herramienta o programa para evaluar los datos, lo lee con mecanismos PROFINET
estándar.
Así, por ejemplo, un programa de usuario en el controlador IO S7-1500 puede leer el AMR de
un dispositivo IO mediante la instrucción RDREC (índice 0xF880).
No es posible escribir en este juego de datos.

Información adicional
En la documentación del dispositivo correspondiente puede consultar si un dispositivo
PROFINET es compatible con datos Asset Management y en qué medida, es decir, si
proporciona un AMR.

Contenido y estructura de un juego de datos Asset Management
Estructura básica del juego de datos Asset Management
Primero se dará una visión general de cómo está estructurado el juego de datos. En la tabla
siguiente se describe el marco en el que se integran los bloques de datos Asset Management.
Cada bloque de datos representa un componente, p. ej., un bloque de terminales.
Elemento de la estructura de
datos

Denominación según IEC
61158-6-10

Codificación

Tipo de datos/longitud
en bytes

Encabezado AssetManage‐
mentData

BlockType

0x0035

UINT / 2

BlockLength

Número de bytes, sin contar
los bytes para BlockType y
BlockLength

UINT / 2

BlockVersion

0x0100

UINT / 2

NumbersOfEntries

Número de AssetManage‐
mentBlocks

UINT / 2

AssetManagementBlock 1

Consulte la tabla siguiente

AssetManagementInfo
AssetManagementBlocks (n)

AssetManagementBlock 2
...
AssetManagementBlock n

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3307

Configuración de dispositivos y redes
1.4 Crear configuraciones

Estructura de bloques Asset Management
Cada AssetManagementBlock contiene datos de identificación e información de localización
para un componente. Un AssetManagementBlock tiene una subestructura que se explica a
continuación a grandes rasgos.
En el encabezado de un AssetManagementBlock está codificado cuál de las tres posibles
combinaciones de datos AM contiene el juego de datos. Los dispositivos proporcionan un tipo
de bloque (BlockType) adecuado a los distintos tipos de dispositivos:
● dispositivos complejos con información sobre hardware y firmware (BlockType
"AM_Fullinformation")
● dispositivos con información sobre hardware (BlockType "AM_HardwareOnlyInformation")
● dispositivos con información sobre firmware (BlockType "AM_FirmwareOnlyInformation")
Esta distinción permite una estructura de datos eficiente debajo del encabezado; pese a ello,
el juego de datos puede alcanzar un tamaño considerable (máx. 64 kbytes, en función del
número de componentes que proporcione el dispositivo IO).
Tabla 1-166 Estructura del AssetManagenentBlock
Elemento de la estructu‐
ra de datos

Denominación según IEC
61158-6-10

Codificación

Tipo de datos/
longitud en bytes

Encabezado del Asset‐
ManagementBlock

BlockType

0x0036 (AM_FullInformation)

UINT / 2

0x0037 (AM_FirmwareOnlyInforma‐
tion)
0x0038 (AM_HardwareOnlyInforma‐
tion)

3308

BlockLength

Número de bytes, sin contar los bytes
para BlockType y BlockLength

UINT / 2

BlockVersion

0x0100

UINT / 2

Padding

0x0000 (byte de relleno)

USINT / 1

Padding

0x0000 (byte de relleno)

USINT / 1

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Elemento de la estructu‐
ra de datos

Denominación según IEC
61158-6-10

Codificación

AssetManagementBlock

IM_UniqueIdentifier

Unique Identifier (UUID) generado por Array of Byte / 16
el fabricante conforme a ISO/IEC
9834-8. Se utiliza como clave de refe‐
rencia para identificar unívocamente
el componente.

(Estructura en función
del BlockType; en este
caso, por ejemplo, para
AM_Fullinformation)

Tipo de datos/
longitud en bytes

Ejemplo: 550c5300d34a-22b4-11d3-5533991111b3
AM_Location

Descripción de la posición del compo‐ Array of Byte / 16
nente:
Orientado por slots ("Slot- and Subs‐
lotNumber format") o jerárquicamente
("Twelve level tree format")
Consulte la descripción siguiente

IM_Annotation

Notación específica del fabricante

Array of Char / 64

Ejemplo: "Terminal block, Type
xyz123
".
Se utilizan siempre 64 bytes; si la se‐
cuencia de caracteres es más corta se
rellena con espacios.
IM_OrderID

Referencia específica del fabricante
Ejemplo: "6ES7
131-6BF00-0BA0

Array of Char / 64

".

Se utilizan siempre 64 bytes; si la se‐
cuencia de caracteres es más corta se
rellena con espacios.
AM_SoftwareRevision

Versión de software específica del fa‐
(no con AM_HardwareOnlyInforma‐ bricante
tion)
Ejemplo: "V6.3.8
".

Array of Char / 64

Se utilizan siempre 64 bytes; si la se‐
cuencia de caracteres es más corta se
rellena con espacios.
Si el componente es compatible con
IM_Software_Revision, AM_Software‐
Revision está rellena con espacios.
AM_HardwareRevision
(no con AM_FirmwareOnlyInforma‐
tion)

Versión de hardware específica del fa‐ Array of Char / 64
bricante
Ejemplo: "A4

".

Se utilizan siempre 64 bytes; si la se‐
cuencia de caracteres es más corta se
rellena con espacios.
IM_Serial_Number

Número de producción unívoco espe‐
cífico del fabricante.

Array of Char / 16

Los caracteres proceden del rango vi‐
sible (0x20 ... 0x7E), sin caracteres de
control.
Ejemplo: "A78C-1C82

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

".

3309

Configuración de dispositivos y redes
1.4 Crear configuraciones
Elemento de la estructu‐
ra de datos

Denominación según IEC
61158-6-10

Codificación

Tipo de datos/
longitud en bytes

Se utilizan siempre 16 bytes; si la se‐
cuencia de caracteres es más corta se
rellena con espacios.
IM_Software_Revision

Versión de software, sigue una estruc‐
(no con AM_HardwareOnlyInforma‐ tura estricta (prefijo de versión de soft‐
ware, p. ej., "V", cifras para ampliación
tion)
funcional, cifras para BugFix, cifras pa‐
ra Internal Change).
Ejemplo: 'V' 0x01 0x2 0x3

Array of Byte / 4
Prefijo (caracte‐
res "V", "R", "P",
"U" o "T"), des‐
pués 3 caracte‐
res de "0" a "9"

Si AM_SoftwareRevision está relleno
con espacios, debe evaluarse IM_Soft‐
ware_Revision.
Si el componente no es compatible
con ningún software, la codificación es
'V' 0x00 0x00 0x00.
AM_DeviceIdentification

Identificación del dispositivo; la estruc‐ Array of Byte / 8
tura está organizada de la manera si‐
guiente:
AM_DeviceIdentification.DeviceSubID
(en SIEMENS, p. ej., 0x0000)
AM_DeviceIdentification.DeviceID
(ID de dispositivo del fabricante,
0x0000 a 0xFFFF)
AM_DeviceIdentification.VendorID
(Ejemplo para componentes Siemens:
0x002A)
AM_DeviceIdentification.Organiza‐
tion: Ejemplo para componentes Sie‐
mens: 0x0000 (PROFINET)

AM_TypeIdentification

Identificación de tipo asignada al fabri‐ UINT / 2
cante:
0x0000: sin especificar
0x0001: controlador (PLC)
0x0002: basado en PC
0x0003: módulo E/S, submódulo E/S
0x0004: módulo / submódulo de comu‐
nicación
0x0005: módulo / submódulo de inter‐
faz
0x0006: componentes de red activos
0c0007: Media attached Unit (adapta‐
dor de bus)
0x0100 a 0x7FF: específico del fabri‐
cante

IM_Hardware_Revision
(no con AM_FirmwareOnlyInforma‐
tion)

3310

Versión de hardware (0x0000 a
0xFFFF)

UINT / 2

Ejemplo: 0x0003

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Elemento de la estructu‐
ra de datos

Denominación según IEC
61158-6-10

Codificación

Tipo de datos/
longitud en bytes

Si AM_HardwareRevision está relleno
con espacios, debe evaluarse
IM_Hardware_Revision.

AM_Location
La administración de componentes en PROFINET es compatible con dos formatos para
codificar la posición de un componente:
● Formato orientado por slots ("Slot- and SubslotNumber format")
● Jerárquico, es decir, formato orientado por niveles ("Twelve Level Tree format" o,
abreviado, formato LT)
Los componentes que forman parte del dispositivo PROFINET utilizan el formato orientado por
slots. Estos componentes están unidos a los módulos y submódulos PROFINET.
Los componentes que se encuentran fuera del dispositivo PROFINET utilizan el formato
jerárquico (formato LT) para la codificación de la posición de un componente.
Estos componentes se localizan por su nivel dentro del árbol (Level Tree). Los niveles del árbol
comienzan con Level 0. El valor de Level 0 informa sobre la proximidad al dispositivo
PROFINET:
● Si el componente está conectado a un módulo que puede direccionarse mediante el modelo
de dispositivos PROFINET, Level 0 tiene el valor 0. Los niveles siguientes (Level 1 hasta
Level 3) tienen los significados de número de slot, número de subslot y número de canal.
Si a este componente se conectan otros componentes se utiliza el Level 4 siguiente. El
límite se alcanza en Level 11.
● Si el componente pertenece al dispositivo PROFINET pero no está conectado a un módulo
que puede direccionarse mediante el modelo de dispositivos PROFINET, Level 0 tiene un
valor entre 1 y 0x1FF. Un ejemplo de un componente así es una fuente de alimentación en
el dispositivo PROFINET. Si esa fuente de alimentación tiene conectado otro componente,
p. ej., un sensor, para localizar el sensor se utiliza el siguiente nivel del árbol (Level 1).
● Si el componente se encuentra fuera del dispositivo PROFINET pero pertenece a la
máquina en la que está integrado el dispositivo PROFINET, Level 0 tiene un valor entre
0x200 y 0x3FE.
El valor 0x3FF para un nivel del árbol indica que dicho nivel no se utiliza. Es decir, no hay
ningún otro componente conectado. En este caso todos los restantes niveles más profundos
del árbol hasta Level 11 deben tener el mismo valor.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3311

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ejemplo de AM_Location orientada por slots
Tanto un rack como los bloques de terminales que se encuentran en él suministran datos AM.
En la figura pueden verse las asignaciones de slots.
3RUWDPµGXORV

%ORTXHGH
WHUPLQDOHV

%ORTXHGH
WHUPLQDOHV

%ORTXHGH
WHUPLQDOHV

0µGXOR(6
$

0µGXOR(6
%

0µGXOR(6
&

6ORW

6ORW

6ORW

Figura 1-130

Ejemplo de componentes con codificación AM_Location orientada por slots

Para tratar el rack como un componente, AM_Location se codifica del modo siguiente:
Bits 0 – 7: AM_Location.Structure = 0x02 (codificación "Slot- and SubslotNumber format")
Bits 8 – 15: AM_Location.Reserved1 = 0x00 (byte de relleno)
Bits 16 – 31: AM_Location.BeginSlotNumber = 2 (el componente "rack" comienza a partir del
slot 2)
Bits 32 – 47: AM_Location.BeginSubslotNumber = 0xFFFF (el componente comprende todos
los subslots del slot 2; si no es así, indique el n.º del subslot en el que empieza el componente)
Bits 48 – 63: AM_Location.EndSlotNumber = 4 (el componente termina en el slot 4)
Bits 64 – 79: AM_Location.EndSubslotNumber = 0xFFFF (el componente comprende todos los
subslots del slot 4; si no es así, indique el n.º del subslot en el que termina el componente)
Bits 80 – 95: AM_Location.Reserved2 = 0x0000 (byte de relleno)
Bits 96 – 111: AM_Location.Reserved3 = 0x0000
Bit 112 – 127: AM_Location.Reserved4 = 0x0000

3312

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ejemplo de AM_Location orientada por niveles
Un módulo E/S (slot 5, subslot 1, canal 1) tiene conectado un sensor complejo. A su vez hay
dos sensores simples conectados al sensor complejo. El módulo es direccionable dentro del
modelo de dispositivos PROFINET, por lo que Level 0 tiene el valor 0x0000. El siguiente nivel
(Level 1) está definido por el slot asignado; después siguen los restantes niveles para subslot
y canal y, en su caso, otros niveles subordinados.
6ORW
0µGXOR(6

6XEVORW
&DQDO

6HQVRUFRPSOHMR


6HQVRU


Figura 1-131

6HQVRU


Ejemplo de componentes con codificación AM_Location jerárquica

Codificación detallada para el ejemplo:
Bits 0 – 7: AM_Location.Structure = 0x01 (formato LT)
Bits 8 – 17: AM_Location.Level0 = 0x000 (los componentes asignados a los módulos tienen
siempre el valor 0x000 en Level 0)
Bits 18 – 27: AM_Location.Level1 = 0x005 (slot 5)
Bits 28 – 37: AM_Location.Level2 = 0x001 (subslot 1)
Bits 38 – 47: AM_Location.Level3 = 0x001 (canal 1)
Bits 48 – 57: AM_Location.Level4 = 0x3FF (codificación para "Level no utilizado")
Bits 58 – 67: AM_Location.Level5 = 0x3FF (codificación para "Level no utilizado")
...
Bits 118 – 127: AM_Location.Level11 = 0x3FF (codificación para "Level no utilizado")
Notación utilizada en la figura para la codificación LT del sensor complejo: 0.5.1.1
Se aplica en correspondencia a los demás sensores:
Codificación LT para sensor simple 1 en el sensor complejo: 0.5.1.1.1
Codificación LT para el segundo sensor simple 2 en el sensor complejo: 0.5.1.1.2

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3313

Configuración de dispositivos y redes
1.4 Crear configuraciones

Juego de datos Asset Management para I-devices
Con STEP 7 (TIA Portal) V15 o superior y con CPU S7-1500 con versión de firmware V2.5 o
superior es posible componer un juego de datos Asset Management mediante el programa de
usuario. Configuradas como I-devices, estas CPU proporcionan después a un controlador IO
invocante los datos de módulos enchufados centralmente como componentes.
"CPU S7-1500" se refiere también a las variantes de CPU S7-1500F, S7-1500T, S7-1500C, a
los controladores por software S7-1500 y a las CPU S7-1500pro y ET 200SP.

Juegos de datos Asset Management para I-devices
Los I-devices representan generalmente máquinas. El controlador PROFINET IO al que está
asignado el I-device solo ve la interfaz PROFINET (configurada como dispositivo IO) y las
áreas de transferencia del I-device configuradas por el fabricante de la máquina. Los módulos
locales del I-device no son visibles o no son accesibles desde el controlador IO.
Mediante un juego de datos Asset Management compuesto por el programa de usuario del Idevice, el controlador IO asignado puede leer los módulos centrales como componentes del Idevice.
0£TXLQD,GHYLFH
(MHFXFLµQLQWHUQD
,QWHUID]31
0µGXORVXEPµGXOR

&38

,2

,2

,2

UHDGHWUDQVIHUHQFLD
0µGXORVXEPµGXOR
UHDGHWUDQVIHUHQFLD
0µGXORVXEPµGXOR

UHDGHWUDQVIHUHQFLD
0µGXORVXEPµGXOR

Figura 1-132

3314

Componentes de un I-device

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● CPU S7-1500 con versión de firmware V2.5 o superior, configurada como I-device
● STEP 7 (TIA Portal) V15 o superior
● En caso de que un controlador IO deba leer el juego de datos Asset Management:
El controlador IO está programado de forma adecuada para leer un juego de datos Asset
Management.
Para un controlador IO SIMATIC se llama, p. ej., una instrucción de lectura (RDREC) con
índice del juego de datos 0xF880; la instrucción direcciona un submódulo cualquiera del Idevice, p. ej., el primer submódulo configurado del área de transferencia.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3315

Configuración de dispositivos y redes
1.4 Crear configuraciones

Procedimiento básico
Para crear las condiciones necesarias para que un I-device proporcione sus módulos locales
como juego de datos Asset Management a un controlador IO invocante, se requieren
básicamente los pasos siguientes:
1. Realizar ajustes en las propiedades de la interfaz PROFINET de la CPU:
– Activar el modo de operación "Dispositivo IO"
– Activar la opción "Activar Asset Management mediante programa de usuario"
Solo cuando está activada esta opción la interfaz PROFINET transmite al programa de
usuario del I-device una petición de un controlador IO para leer el juego de datos Asset
Management.

Figura 1-133

Activar Asset Management mediante juego de datos

2. Diseñe la sección del programa para componer el juego de datos Asset Management. La
sección del programa recopila los datos I&M0 necesarios de los módulos centrales
conectados y los deposita en los campos previstos al efecto en la estructura del juego de
datos Asset Management.
3. Diseñe la sección del programa para coordinar la puesta a disposición del juego de datos:
Llame para ello la instrucción PRVREC (Provide Record) conforme al patrón siguiente en
los modos correspondientes:
– Llamada cíclica (p. ej., en el OB de ciclo) de la instrucción PRVREC con modo 0 para
detectar la solicitud del juego de datos AM.
– Cuando se ha detectado la solicitud del juego de datos AM, en un segundo el programa
debe confirmar a PRVREC que se ha detectado la solicitud. Es decir, PRVREC debe
llamarse con el modo 2, concretamente con el juego de datos AM solicitado. Si el Idevice no respeta el marco temporal, da una confirmación negativa de la solicitud del
juego de datos del controlador IO.
Particularidad para la parametrización de la llamada de PRVREC: Debe llamarse
PRVREC con F_ID = 0; de este modo se codifica que se trata de un juego de datos
específico del dispositivo IO. Por tanto, los parámetros de salida SLOT y SUBSLOT
devuelven el valor 0.
– En un plazo de 10 segundos debe estar preparado el juego de datos AM y haberse
efectuado la llamada a PRVREC con modo 3 (respuesta positiva al controlador IO con
puesta a disposición del juego de datos AM). Si el I-device no respeta el marco temporal,
da una confirmación negativa de la solicitud del juego de datos del controlador IO.

3316

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Encontrará una descripción detallada de la instrucción PRVREC y de los posibles códigos
de error para evaluar la función en la Ayuda en pantalla de STEP 7 (TIA Portal).

Composición del juego de datos Asset Management
Existen varias posibilidades de componer el juego de datos Asset Management para un Idevice:
● Recomendación: Recomendación: Siemens Industry Online Support proporciona una
aplicación que ayuda a componer el juego de datos Asset‑Management.
El área de datos del juego de datos Asset Management está dividida en dos partes. La
primera parte es un área determinada automáticamente que comprime en un bloque Asset
Management los datos IM0 de los slots del I-device. La segunda parte consta de los
bloques Asset Management específicos del usuario. Los bloques Asset Management
específicos del usuario se configuran basándose en estructuras de juegos de datos Asset
Management preestablecidas, se rellenan con información y se ponen a disposición de la
aplicación.
La aplicación realiza las siguiente funciones:
– La aplicación determina el tamaño necesario de todos los bloques Asset Management
y genera un nuevo bloque de datos en la memoria de carga de la CPU.
– La aplicación parametriza el bloque de datos según las especificaciones de un juego de
datos Asset Management y lo rellena con los bloques Asset Management determinados
automáticamente y transmitidos por el usuario.
– La aplicación pone este juego de datos Asset Management a disposición del controlador
IO de nivel superior.
Encontrará una descripción de la aplicación en este ejemplo de aplicación
● Cree su propio juego de datos Asset Management.
A continuación se describe cómo componer un juego de datos Asset Management para un
I-device.
El concepto prevé que para cada módulo enchufado centralmente se determinen los datos
I&M y que con esa información se rellene el juego de datos Asset Management. Los datos
I&M0 de un módulo contienen información básica sobre el módulo, como identificador del
fabricante, referencia, número de serie, versión de hardware y versión de firmware. Son los
datos que también se necesitan en el juego de datos AM para un componente.

Determinar datos I&M de módulos enchufados centralmente
La estructura central consta de una fuente de alimentación opcional enchufada (slot 0),
seguida de la CPU como I-device (slot 1) y de los demás módulos sin dejar huecos libres, p. ej.,
módulos digitales, módulos analógicos, etc. (a partir del slot 2).
Los datos I&M se determinan con la instrucción "Get_IM_Data" para los módulos enchufados,
con excepción de la CPU:
Para parametrizar la instrucción "Get_IM_Data" es imprescindible conocer el identificador de
hardware (parámetro de entrada LADDR). El identificador de hardware de cada slot ocupado
se determina con la instrucción "GEO2LOG" (Determinar la ID de hardware a partir del slot).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3317

Configuración de dispositivos y redes
1.4 Crear configuraciones
Resumen de los pasos principales:
1. Determine en un bucle los identificadores de hardware de los módulos enchufados
utilizando la instrucción "GEO2LOG".
2. Para cada identificador de hardware determinado especifique los datos I&M con la
instrucción "Get_IM_Data" y guarde esos datos en un bloque de datos que se direcciona
con el parámetro de entrada DATA. Para depositar los datos utilice ARRAY of BYTE, que
equivale a la descripción de los contenidos del juego de datos AM del capítulo anterior.

Formar juego de datos AM con los datos I&M determinados
Las explicaciones que siguen se basan en la descripción de la estructura básica del juego de
datos AM; consulte el capítulo anterior.
Como cada módulo de un S7-1500 contiene información de hardware y de firmware, para el
BlockType asignado hay que elegir la codificación para "AM_Fullinformation".
Sobre los tipos de datos utilizados:
● IM_Annotation, IM_OrderID, AM_SoftwareRevisen y AM_HardwareRevision: Characters
(UTF-8)
● IM_SeriaNumber: Charcters ("caracteres ASCII"), excepto los caracteres para (0x7F)
● No deben utilizarse tipos de datos String: necesitan bytes adicionales, por lo que no
satisfacen las convenciones de la norma PROFINET 61158-6-10 Application layer protocol
specification
El AM_FullInformationBlock se forma para cada módulo de la manera siguiente:
Tabla 1-167 AM_FullInformationBlock para módulos
Elemento del juego de
datos

Descripción

IM_UniqueIdentifier

Genere una (pseudo) UUID aleatoria (valor hash) según ISO 9834-8 de la manera siguiente:
● Genere un valor hash de 8 bytes mediante los datos I&M0 del módulo (a partir del slot 2)
Utilice el algoritmo Fowler-Noll-Vo (abreviado: FNV); un algoritmo para generar valores de
dispersión (valores hash) mediante campos de datos, véase el código de ejemplo
correspondiente en Internet o en Online Support.
● Genere un valor hash de 8 bytes mediante los datos I&M0 de la CPU
(utilice el algoritmo Fowler-Noll-Vo (abreviado: FNV) como se ha descrito anteriormente)
● IM_UniqueIdentifier:
Bytes 0 a 7: valor hash de datos I&M0 del módulo
Bytes 8 a 15: valor hash para datos I&M0 de la CPU
Adaptaciones necesarias a ISO 9834-8:
Byte 8, bit 7 debe estar puesto a 1, y byte 8, bit 6 a 0 (resultado de la operación lógica Y con 0011
1111, a continuación operación lógica O con 1000 0000)
Byte 6, bits 4 a 7 deben estar puestos a 0100 (resultado de la operación lógica Y con 0000 1111,
después operación lógica O con 0001 0000)
Como este algoritmo está basado tanto en los datos I&M0 de la CPU como de los módulos, genera
un IM_UniqueIdentifier constante para cada módulo. Si cambia la configuración cambiará también
el IM_UniqueIdentifier.

AM_Location

3318

Byte 0 = 0x02 (codificación orientada por slots), consulte la descripción en el capítulo anterior.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Elemento del juego de
datos

Descripción

IM_Annotation

Ejemplo: "S7-1500 module" y rellene los bytes restantes de IM_Annotation con espacios (0x20).

IM_OrderID

Copie 20 bytes de los datos I&M0 del módulo (empezando por offset 2 de los datos I&M0), rellene
los 44 bytes restantes con espacios (0x20)

AM_SoftwareRevision

Rellene el campo con 64 espacios (0x20)

AM_HardwareRevi‐
sion

Rellene el campo con 64 espacios (0x20)

IM_SerialNumber

Copie los 16 bytes de los datos I&M0 del módulo (empezando por offset 22 de los datos I&M0)

IM_SoftwareRevision

Copie los 4 bytes de los datos I&M0 del módulo (empezando por offset 40 de los datos I&M0)

AM_DeviceIdentifica‐
tion

Bytes 0, 1, 2, 6, 7 = 0x00
Byte 3 = 0x2A (Vendor = Siemens)
Byte 4 = 01, Byte 5 = DeviceID (p. ej., CPU 15xx = 0x0E)

AM_TypeIdentification

Copie los 2 bytes de los datos I&M0 del módulo (empezando por offset 48 de los datos I&M0)

IM_HardwareRevision

Copie los 2 bytes de los datos I&M0 del módulo (empezando por offset 38 de los datos I&M0)

Configurar la comunicación directa entre CPU S7-1500
Introducción
Este capítulo describe la función de comunicación directa.

Funcionamiento
A partir de la versión de firmware V2.8, la CPU S7-1500 soporta la comunicación directa con
otras CPU S7-1500.
En la comunicación directa, una CPU S7-1500 proporciona cíclicamente datos de usuario del
área de periferia (E/S) a varios interlocutores. La comunicación directa se basa en PROFINET
con IRT y modo isócrono.
La transferencia se realiza a través de áreas de transferencia.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3319

Configuración de dispositivos y redes
1.4 Crear configuraciones

Comunicación directa entre dos CPU S7-1500 (1:1)
La figura siguiente muestra la comunicación directa entre dos CPU S7-1500. Las áreas de
transferencia de salida de la CPU S7-1500 emisora se corresponden con las áreas de
transferencia de entrada de la CPU S7-1500 receptora.
&386 HPLVRU

&386 UHFHSWRU

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR






UHDVGHWUDQVIHUHQFLDGHVDOLGD
UHDVGHWUDQVIHUHQFLDGHHQWUDGD
5HODFLµQGHFRPXQLFDFLµQSDUDFRPXQLFDFLµQGLUHFWD

①
②

Relación de transferencia entre el programa de usuario y el área de transferencia. El programa de usuario y las áreas
de transferencia intercambian datos de entrada y salida por esta vía.

Relación de comunicación para la comunicación directa. Las relaciones de comunicación se configuran en STEP 7.
En las propiedades de las relaciones de comunicación se crean las áreas de transferencia para la comunicación
directa.
Figura 1-134
Comunicación directa entre dos CPU S7-1500 (1:1)

3320

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Comunicación directa con varios receptores (1:n)
La figura siguiente muestra la comunicación directa con varias CPU S7-1500. La CPU S7-1500
emisora proporciona los datos de sus áreas de transferencia de salida a varias CPU S7-1500.
Cada CPU S7-1500 receptora posee sus propias áreas de transferencia de entrada.
&386 HPLVRU

&386 UHFHSWRU

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR







&386 UHFHSWRU
3URJUDPDGHXVXDULR




&386 UHFHSWRUQ
3URJUDPDGHXVXDULR

UHDVGHWUDQVIHUHQFLDGHVDOLGD
UHDVGHWUDQVIHUHQFLDGHHQWUDGD
5HODFLµQGHFRPXQLFDFLµQSDUDFRPXQLFDFLµQGLUHFWD

①
②

Relación de transferencia entre el programa de usuario y el área de transferencia. El programa de usuario y las áreas
de transferencia intercambian datos de entrada y salida por esta vía.

Relación de comunicación para la comunicación directa. Las relaciones de comunicación se configuran en STEP 7.
En las propiedades de las relaciones de comunicación se crean las áreas de transferencia para la comunicación
directa.
Figura 1-135
Comunicación directa con varios receptores (1:n)

Aplicaciones
● Comunicación IO determinista e isócrona entre varias CPU S7-1500

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3321

Configuración de dispositivos y redes
1.4 Crear configuraciones

Propiedades de la comunicación directa
● Siempre isócrono
● Soporta MRPD en la configuración MRP
● Sin intercambio de datos acíclico por mecanismos de juegos de datos PROFINET
● Sin alarmas PROFINET
● Recursos disponibles:
– Longitud de datos máxima para comunicación directa: 3075 bytes, incluido cualificador
de datos de usuario
– Longitud de datos máxima para un área de transferencia: 1024 bytes, sin cualificador de
datos de usuario
– Número máximo de áreas de transferencia del emisor: 128
– Número máximo de áreas de transferencia del receptor: 512, distribuidas en un máximo
de 64 frames PROFINET con capacidad de recepción y hasta 64 CPU emisoras

Opciones de diagnóstico del receptor
Cambio de estado operativo del emisor:
● Cuando el emisor cambia de RUN a STOP, el receptor se comporta del siguiente modo:
– Las instrucciones "SYNC_PI" y "SYNC_PO" devuelven un mensaje de error cuando se
sincroniza la memoria imagen de proceso en el parámetro RET_VAL.
– Con acceso directo de periferia a las áreas de transferencia de entrada de la
comunicación directa se llama el OB 122 "Error de acceso a la periferia", en caso de que
exista.
– Aviso de diagnóstico entrante "Fallo de datos I/O en componente de hardware"
● Cuando el emisor cambia de STOP a RUN, el receptor se comporta del siguiente modo:
– Llamada del OB 83 "Presencia de módulo" para áreas de transferencia de entrada de la
comunicación directa.
– Hasta la llamada del OB 83 se llama el OB 122, en caso de que exista.
– Aviso de diagnóstico saliente "Fallo de datos I/O en componente de hardware"

3322

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Fallo de la estación / retorno de la estación del emisor:
● Cuando el emisor falla, p. ej., por una interrupción del bus, el receptor se comporta del
siguiente modo:
– Llamada del OB 86 "Fallo del rack"
– Las instrucciones "SYNC_PI" y "SYNC_PO" devuelven un mensaje de error cuando se
sincroniza la memoria imagen de proceso en el parámetro RET_VAL.
– Con acceso directo de periferia a las áreas de transferencia de entrada de la
comunicación directa se llama el OB 122 "Error de acceso a la periferia", en caso de que
exista.
● Cuando después de un fallo de la estación retorna el emisor, p. ej., porque se ha
restablecido la conexión de bus, el receptor se comporta del siguiente modo:
– Llamada del OB 86 "Fallo del rack"

Configurar la comunicación directa entre dos CPU S7-1500
A continuación se explica cómo configurar la comunicación directa entre dos controladores IO.
Primero se crea la relación de comunicación para la comunicación directa. Después se
configuran las áreas de transferencia para la conexión.

Requisitos
● STEP 7 con versión V16 o superior
● Dos CPU S7-1500 con versión de firmware V2.8 o superior
● IRT está configurado:
– ambas CPU se encuentran en un dominio Sync.
– Una CPU es maestro Sync, la otra CPU es esclavo Sync.
– Los puertos están interconectados.

Crear una relación de comunicación para la comunicación directa
Para crear la relación de comunicación para la comunicación directa entre dos CPU S7-1500,
proceda del siguiente modo:
1. Seleccione la interfaz PROFINET X1 de la CPU S7-1500 emisora.
2. Vaya a la tabla de la vista de redes, ficha "Comunicación E/S".
En la columna "Interlocutor 1" se muestra la interfaz PROFINET X1 de la CPU.
3. En la columna "Interlocutor 2" de "<Soltar aquí o seleccionar dispositivo>" de la lista
desplegable, seleccione como interlocutor de conexión la interfaz PROFINET del
interlocutor de comunicación.
Tenga en cuenta el sentido de la comunicación:
– ←: el interlocutor es emisor
– →: el interlocutor es receptor

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3323

Configuración de dispositivos y redes
1.4 Crear configuraciones
Se ha creado la relación de comunicación para la comunicación directa entre las dos CPU
S7-1500.

Figura 1-136

Relación de comunicación para la comunicación directa

Configurar áreas de transferencia para comunicación directa
Para configurar un área de transferencia para la comunicación directa, proceda del siguiente
modo:
1. Seleccione la relación de comunicación para la comunicación directa.

Figura 1-137

Relación de comunicación para la comunicación directa

2. En las propiedades de la relación de comunicación vaya a "General" > "Comunicación
directa" > "Áreas de transferencia".
3. Cree una nueva área de transferencia haciendo doble clic en "<Agregar nuevo>". Asigne al
área de transferencia un nombre descriptivo.
Se ha creado un área de transferencia para la comunicación directa.

Figura 1-138

Área de transferencia para la comunicación directa

El sentido de comunicación del área de transferencia está definido por la relación de
comunicación. No es posible cambiar el sentido de comunicación del área de transferencia.

3324

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Editar área de transferencia
Ajuste las propiedades del área de transferencia en "General" > "Comunicación directa" >
"Nombre del área de transferencia" > "Detalle del área de transferencia".

Figura 1-139

Propiedades del área de transferencia

Tabla 1-168 Vista general de los ajustes de las áreas de transferencia
Parámetro

Local

Interlocutor

Dirección inicial

Ajuste la dirección inicial de las áreas de
transferencia de entrada o salida en la
CPU local.

Ajuste la dirección inicial de las áreas de
transferencia de entrada o salida en la
CPU del interlocutor.

Bloque de organización

Asigne el área de transferencia a un OB
de alarma de sincronismo o al OB "MC
Servo".

Asigne el área de transferencia a un OB
de alarma de sincronismo o al OB "MC
Servo".

Memoria imagen de proceso

Seleccione una memoria imagen par‐
cial del proceso, p. ej., PPI 1.
Si ha asignado como bloque de organi‐
zación "MC-Servo", STEP 7 ajusta au‐
tomáticamente "TPA OB Servo" como
memoria imagen del proceso.

Seleccione una memoria imagen par‐
cial del proceso, p. ej., PPI 1.
Si ha asignado como bloque de organi‐
zación "MC-Servo", STEP 7 ajusta au‐
tomáticamente "TPA OB Servo" como
memoria imagen del proceso.

Longitud de datos [byte]

Configure el tamaño del área de trans‐
ferencia.

-

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3325

Configuración de dispositivos y redes
1.4 Crear configuraciones

Cargar la configuración en los dispositivos
Reglas:
● Cargue la configuración en todas las CPU intervinientes.
● Si se realizan cambios en la configuración de la comunicación directa es necesario cargar
dichos cambios en todas las CPU intervinientes.

Configurar comunicación directa entre varios controladores IO
A continuación se explica cómo configurar la comunicación directa entre varias CPU S7-1500.
Primero se crean las relaciones de comunicación para la comunicación directa. Después se
configuran las áreas de transferencia para las relaciones de comunicación.

Requisitos
● STEP 7 con versión V16 o superior
● CPU S7-1500 con versión de firmware V2.8 o superior
● IRT está configurado:
– Todas las CPU se encuentran en un dominio Sync.
– Una CPU es maestro Sync, las otras CPU son esclavos Sync.
– Los puertos están interconectados.

Crear relaciones de comunicación para comunicación directa
Para crear la conexión para la comunicación directa entre varias CPU S7-1500, proceda del
siguiente modo:
1. Seleccione la interfaz PROFINET X1 de la CPU emisora.
2. Vaya a la tabla de la vista de redes, ficha "Comunicación E/S".
En la columna "Interlocutor 1" se muestra la interfaz PROFINET X1 de la CPU.
3. En la columna "Interlocutor 2" de "<Soltar aquí o seleccionar dispositivo>" de la lista
desplegable, seleccione la interfaz PROFINET del interlocutor de comunicación.
Tenga en cuenta el sentido de la comunicación:
– ←: el interlocutor de conexión es emisor
– →: el interlocutor de conexión es receptor
Se ha creado la conexión para la comunicación directa entre las dos CPU S7-1500.
4. Repita el paso 3 para cada uno de los restantes controladores IO receptores.
Se han creado las conexiones para la comunicación directa entre la CPU emisora y las CPU
receptoras.

3326

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Figura 1-140

Conexión para comunicación directa con varias CPU S7-1500

Configurar áreas de transferencia para comunicación directa
El gráfico siguiente muestra la secuencia en una configuración de áreas de transferencia.

(PLVRU

5HFHSWRU

5HFHSWRU


5HFHSWRUQ

①
②

Primero se configura el área de transferencia entre el emisor y un receptor. Dicha área de transferencia se configura
en la interfaz PROFINET del emisor.

Después se configuran las áreas de transferencia entre el emisor y los restantes receptores. Dichas áreas de
transferencia se configuran en las interfaces PROFINET de los receptores.
Figura 1-141
Secuencia de configuración de áreas de transferencia con varios receptores

Para configurar un área de transferencia para la comunicación directa, proceda del siguiente
modo:
1. Seleccione la interfaz PROFINET X1 de la CPU emisora y cambie a la tabla de la vista, ficha
"Comunicación E/S".
2. En la tabla de la vista de redes seleccione una relación de comunicación para la
comunicación directa entre el emisor y el receptor 1.
3. En las propiedades de la conexión E/S vaya a "General" > "Comunicación directa" > "Áreas
de transferencia".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3327

Configuración de dispositivos y redes
1.4 Crear configuraciones
4. Cree una nueva área de transferencia haciendo doble clic en "<Agregar nuevo>". Asigne al
área de transferencia un nombre descriptivo.
Se ha configurado un área de transferencia para la comunicación directa entre el emisor y
el receptor 1.

Figura 1-142

Área de transferencia para la comunicación directa

5. A continuación seleccione la interfaz PROFINET de un receptor para el que no se haya
creado todavía un área de transferencia, p. ej., receptor 2.
6. En la tabla de la vista de redes cambie a "Comunicación E/S".
Se muestra la relación de comunicación para la comunicación directa con el emisor.

Figura 1-143

Conexión para comunicación directa en el receptor 2

7. Seleccione la relación de comunicación.
8. En las propiedades vaya a "General" > "Comunicación directa" > "Áreas de transferencia".
9. Cree una nueva área de transferencia haciendo doble clic en "<Agregar nuevo>". Asigne al
área de transferencia un nombre descriptivo.
Se ha configurado un área de transferencia para la comunicación directa.

3328

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
10.Seleccione el área de transferencia.
11.En "Dirección del interlocutor" seleccione como área de transferencia de salida el área de
direcciones existente en el emisor.

Figura 1-144

Área de transferencia para la comunicación directa de varios controladores IO

Se ha configurado un área de transferencia para la comunicación directa entre el receptor 2
y el emisor.

Editar área de transferencia
Ajuste las propiedades del área de transferencia en "General" > "Comunicación directa" >
"Nombre del área de transferencia" > "Detalle del área de transferencia".

Figura 1-145

Propiedades del área de transferencia

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3329

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tabla 1-169 Vista general de los ajustes de las áreas de transferencia
Parámetro

Local

Interlocutor

Dirección inicial

Ajuste la dirección inicial de las áreas de
transferencia de entrada o salida en la
CPU local.

Ajuste la dirección inicial de las áreas de
transferencia de entrada o salida en la
CPU del interlocutor.

Bloque de organización

Asigne el área de transferencia a un OB
de alarma de sincronismo o al OB "MC
Servo".

Asigne el área de transferencia a un OB
de alarma de sincronismo o al OB "MC
Servo".

Memoria imagen de proceso

Seleccione una memoria imagen par‐
cial del proceso, p. ej., PPI 1.
Si ha asignado como bloque de organi‐
zación "MC-Servo", STEP 7 ajusta au‐
tomáticamente "TPA OB Servo" como
memoria imagen del proceso.

Seleccione una memoria imagen par‐
cial del proceso, p. ej., PPI 1.
Si ha asignado como bloque de organi‐
zación "MC-Servo", STEP 7 ajusta au‐
tomáticamente "TPA OB Servo" como
memoria imagen del proceso.

Longitud de datos [byte]

Configure el tamaño del área de trans‐
ferencia.

-

Cargar configuración en el dispositivo
Reglas:
● Cargue la configuración en todas las CPU intervinientes.
● Si se realizan cambios en la configuración de la comunicación directa es necesario cargar
dichos cambios en todas las CPU intervinientes.

1.4.11

Acoplamiento de bus con acoplador PN/PN

1.4.11.1

Campo de aplicación y función

Campo de aplicación
El acoplador PN/PN sirve para interconectar dos subredes Ethernet e intercambiar datos entre
ellas. Pueden emplearse datos de usuario mediante áreas de direcciones de entrada o salida
o bien registros. El tamaño máximo de los datos de entrada y salida transferibles es de 1024
bytes. La repartición entre datos de entrada y datos de salida es aleatoria, de modo que
pueden configurarse, p. ej. 800 bytes de datos de entrada y 200 bytes de datos de salida.
El acoplador PN/PN es un dispositivo con dos interfaces PROFINET, cada una de las cuales
se conecta a una subred.
En la configuración, este acoplador PN/PN único se convierte en dos dispositivos IO, uno para
cada estación con su subred. La otra parte del acoplador PN/PN, en cada caso, se denomina
interlocutor acoplado. Cuando se finaliza la configuración, ambas partes se juntan.

3330

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
&RQWURODGRU,2
6

'LVSRVLWLYR,2
(76

23

$FRSODGRU3131

6ZLWFK

'LVSRVLWLYR,2
(76

3*

6ZLWFK

&RQWURODGRU,2
6

6ZLWFK

352),1(7,QGXVWULDO(WKHUQHW

Figura 1-146

Acoplamiento de dos subredes PROFINET IO con un acoplador PN/PN

Información adicional
Encontrará más información relacionada con el tema "Acoplador PN/PN" en el Service &
Support de Internet (http://support.automation.siemens.com/WW/view/es/44319532).

1.4.11.2

Acoplar subredes Ethernet

Acoplar subredes Ethernet con un acoplador PN/PN
El dispositivo normalizado acoplador PN/PN permite acoplar subredes Ethernet entre sí.
Para acoplar subredes Ethernet, proceda del siguiente modo:
1. Cree las subredes Ethernet.
2. Seleccione los aparatos de campo normalizados en el catálogo de hardware. En la carpeta
"PROFINET IO" encontrará el acoplador PN/PN como módulo de cabecera.
3. Arrastre los componentes X1 y X2 de la versión deseada del acoplador PN/PN hasta la vista
de redes mediante Drag & Drop. Los componentes forman un dispositivo, pero se muestran
por separado para manejarlos mejor.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3331

Configuración de dispositivos y redes
1.4 Crear configuraciones
4. Conecte la interfaz Ethernet del acoplador PN/PN X1 con la primera subred Ethernet.
5. Conecte la interfaz Ethernet del acoplador PN/PN X2 con la segunda subred Ethernet.
Ahora, las subredes Ethernet están acopladas mediante los dos componentes del
acoplador PN/PN.

1.4.12

Integración de herramientas externas

1.4.12.1

Integración de herramientas externas a S7

Introducción
Para configurar dispositivos descentralizados es posible utilizar herramientas externas a
STEP 7 ("Device Tools") con una interfaz de llamada especial (Tool Calling Interface). Dichos
dispositivos también se denominan "aptos para TCI".
El volumen de suministro de estas herramientas excede las posibilidades de la configuración
GSD, p. ej. ofrecen posibilidades avanzadas de entradas gráficas.
Se consideran los siguientes dispositivos descentralizados:
● Esclavos PROFIBUS DP
● Módulos dentro de un esclavo DP
● Dispositivos PROFINET IO
● Módulos dentro de un dispositivo IO
Nota
Garantía y responsabilidad
Siemens no asume responsabilidad alguna por el software de terceros (Device Tools) al que
se acceda mediante TCI (Tool Calling Interface) ni por la correcta interacción con los
correspondientes dispositivos.

3332

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
La interfaz de llamada de la herramienta satisface la especificación TCI. Esta interfaz de
llamada permite transferir parámetros y comandos al dispositivo descentralizado.
Estas herramientas deben instalarse utilizando los programas de instalación suministrados por
el fabricante. La única excepción la constituye la Device Tool "S7-PCT" (Port Configuration
Tool) para módulos maestros IO-Link y dispositivos IO-Link, que se suministra con STEP 7.
Particularidad: después de la instalación, la herramienta no se visualiza en la lista de software
instalado ni en la lista de productos de software del proyecto.
El archivo GSD del dispositivo descentralizado que va a configurarse con la Device Tool tiene
que estar instalado.

Inicio de la Device Tool
El comando para iniciar Device Tool se encuentra en el menú contextual del dispositivo apto
para TCI de la vista de dispositivos gráfica y en forma de tabla: "Iniciar Device Tool".

Consulte también
Inicio de SIMATIC S7-PCT (Página 3333)
Utilizar archivos GSD (Página 3051)

1.4.12.2

Inicio de SIMATIC S7-PCT

Introducción
Con STEP 7 se instala la Device Tool "S7-PCT" (Port Configuration Tool).
Dicha herramienta permite parametrizar puertos de módulos IO-Link como 4SI IO-Link
(S7-1200, ET 200S) o 4IOL+8DI+4DO (ET 200eco PN).

Requisitos
Ha configurado la correspondiente CPU, el esclavo DP o el dispositivo IO con un módulo IOLink.

Procedimiento
Para iniciar la herramienta a través de la vista gráfica de dispositivos, proceda del siguiente
modo:
1. Seleccione el módulo IO-Link en la vista de dispositivos.
2. Seleccione el comando "Iniciar Device Tool" del menú contextual.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3333

Configuración de dispositivos y redes
1.4 Crear configuraciones
O BIEN, para iniciar desde la vista de dispositivos en forma de tabla, proceda del siguiente
modo:
1. Seleccione el módulo IO-Link en la vista de dispositivos.
2. Disponga las áreas en el área de trabajo de modo que se vea la vista de dispositivos en
forma de tabla (se encuentra entre la vista de dispositivos y la ventana de inspección).
3. Seleccione la fila con el módulo IO-Link en la vista de dispositivos.
4. Seleccione el comando "Iniciar Device Tool" del menú contextual.

Resultado
La herramienta se inicia y permite configurar los puertos.

Consulte también
Integración de herramientas externas a S7 (Página 3332)

1.4.13

Cargar la configuración

1.4.13.1

Introducción a la carga de una configuración
Para poner en marcha un dispositivo es necesario que en la PG/el PC se hayan guardado
idénticas configuraciones que en los dispositivos conectados. La sincronización entre PG/PC
y los dispositivos conectados se realiza cargando una configuración. Los datos de
configuración pueden cargarse en dos sentidos:
● de la PG/el PC al dispositivo
● del dispositivo a una PG/un PC

Consulte también
Carga de una configuración en un dispositivo (Página 3334)
Generalidades sobre la carga en la PG/el PC (Página 3335)

1.4.13.2

Carga de una configuración en un dispositivo

Carga de la configuración de hardware
Si se ha insertado y configurado un dispositivo nuevo en el proyecto o si se ha modificado una
configuración de hardware existente, primero hay que cargar la configuración actual en el
dispositivo. De este modo se garantiza que tanto la PG/el PC como el dispositivo físico tengan
la misma configuración. Utilice para ello el comando de menú "Online > Cargar en dispositivo".
En la primera carga se carga por completo la configuración hardware. En los procesos de
carga posteriores se cargan únicamente los cambios en la configuración hardware.

3334

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para cargar la configuración de hardware existen las posibilidades siguientes:
● Cargar en la vista de dispositivos o redes
● Cargar en el árbol del proyecto
● Cargar en un nodo accesible
ADVERTENCIA
Realizar el proceso de carga solo en STOP
En caso de una parametrización errónea, existe la posibilidad de que se produzca un
comportamiento imprevisto de la máquina o del proceso después de cargar. Una CPU debe
pasar obligatoriamente al estado operativo STOP para el proceso de carga con el fin de
impedir que se dañe la instalación o se lesionen personas.

Particularidades de la carga de aplicaciones isócronas
Las aplicaciones isócronas tienen una parte de configuración hardware y otra de software.
Ejemplo: Si en la configuración hardware se cambia el número de un sistema IO, el tiempo de
retardo o la asignación de una memoria imagen parcial de proceso de la periferia isócrona, se
influye en los parámetros del OB de alarma de sincronismo y, por tanto, en la parte de software.
En aplicaciones isócronas debe cargarse siempre el proyecto completo (hardware y software).
En caso de carga parcial (hardware y software independientemente en momentos distintos)
pueden generarse incoherencias que, p. ej., obstaculicen el arranque de la CPU o provoquen
que la aplicación no funcione en modo isócrono.

1.4.13.3

Carga de una configuración en la PG/el PC

Generalidades sobre la carga en la PG/el PC
Introducción
Si va a una instalación con su programadora o PC y no está disponible el proyecto STEP 7 con
el que se creó su configuración, cargue la configuración en su programadora o PC, p. ej. en un
proyecto nuevo. Utilice para ello el comando de menú "Online > Cargar el dispositivo como
nueva estación (hardware y software)".
La carga de un dispositivo en su programadora se efectúa básicamente a través de la lista de
dispositivos accesibles en el árbol del proyecto. Es posible cargar varios dispositivos a la vez
en el proyecto mediante selección múltiple.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3335

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
● La configuración hardware del dispositivo debe haberse creado en el TIA Portal V12 o
superior. Si la configuración hardware existente en el dispositivo se creó con una versión
anterior, no podrá cargarse y deberá actualizarse.
● Los módulos de GSD (ML), HSP o Service Packs del dispositivo deben estar instalados en
la PG/el PC en el TIA Portal.
● Debe haber un proyecto abierto. Puede tratarse de un proyecto nuevo (vacío) o de un
proyecto existente.
● El proyecto abierto se encuentra en modo offline.

Volumen de carga
La lista siguiente muestra un resumen de los componentes cargables de una configuración:
● El dispositivo (p. ej. una CPU) con todos los módulos de periferia y todos los ajustes de
parámetros
● Sistemas maestros PROFIBUS y todos los ajustes relevantes para PROFIBUS
● Sistemas PROFINET IO y todos los ajustes relevantes para PROFINET
● I-devices y esclavos I
● Ajustes para la comunicación directa
Después de cargar una CPU se cargan automáticamente los demás módulos incluidos en el
área de direcciones de la CPU.
Las siguientes conexiones se incluyen en la carga de la configuración:
● Conexiones S7 (también enrutadas) en redes PB/IE mixtas, también a través de interfaces
IE-CP o PB-CM. Las conexiones S7 se aplican automáticamente como unilaterales cuando
se carga la configuración del dispositivo, aunque la conexión S7 se hubiera configurado
bilateralmente en el proyecto original. Si ambos interlocutores están cargados, la conexión
se agrupa otra vez en la siguiente compilación.
● Conexiones TCP a través de una interfaz Ethernet propia de la CPU, conexiones UDP/
ISOonTCP, conexiones TCP, UDP, ISO e ISOonTCP a través de una interfaz IE-CP
● Conexiones a través de la parametrización de la conexión OUC para proyectos STEP 7 V13
o superior
Nota
La configuración hardware cargada en la programadora o el PC no es idéntica a la
configuración cargada originalmente en el dispositivo. Tenga en cuenta al respecto la
información adicional sobre la carga, especialmente en lo relativo a los datos de configuración
cargados parcialmente en caso de comunicación entre dispositivos.
No es posible la carga de sistemas de PC como, por ejemplo, WinAC o PC-based Automation.

3336

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Carga de determinadas configuraciones de dispositivo
Información sobre la carga
Al cargar en la programadora o PC se transfieren al proyecto todos los parámetros
configurados en el dispositivo. Si la CPU está conectada a una subred, se cargan todos los
parámetros del dispositivo y la CPU se muestra como conectada en red en la vista de redes.
Nota
Las CPU en las que se ha restablecido la configuración de fábrica carecen de configuración
hardware, por lo que en tal caso no se carga nada en el menú "Online" después de "Cargar en
PG/PC".

Carga de configuraciones S7-300/400
Para evitar conflictos durante la carga de un dispositivo en un proyecto existente, deben
cumplirse las siguientes reglas:
● Los nombres de dispositivo de CPU, esclavos PROFIBUS (esclavos DP, esclavos I) y
dispositivos PROFINET (dispositivos IO, I-devices) deben ser unívocos.
● Combinación de nombre de red, ID de subred y dirección IP/DP unívoca para todos los
módulos.
Si se produce un conflicto, se cancela la carga y se emite un aviso que informa sobre los
problemas que hayan surgido. En tal caso se puede adaptar el proyecto como corresponda o
bien reinstalar componentes que falten y volver a realizar la carga.
Las configuraciones de avisos no se cargan en la PG/el PC.

Carga de configuraciones S7-1200/1500
Tenga en cuenta lo siguiente al realizar la carga:
● No es posible cargar CPU S7-1200 con versión de firmware V1.0.
● No es posible cargar alarmas de diagnóstico del dispositivo del S7-1200. Para volver a
generar las alarmas de diagnóstico del dispositivo del S7-1200 en la programadora o el PC
es necesario compilar de nuevo la configuración hardware.
● Los comentarios de módulos de S7-1200/1500 se cargan en la PG/el PC desde el
dispositivo si está ajustado el idioma del proyecto que también se utilizó al realizar la carga
en el dispositivo. Si se desea, se puede deseleccionar la carga de los comentarios.
Nota
Todos los tipos de sistemas PC, como WinAC, Embedded Controller, CP 1616 o CP en PC, no
permiten cargar en la programadora o PC.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3337

Configuración de dispositivos y redes
1.4 Crear configuraciones

Carga de periferia descentralizada
Se cargan las siguientes funcionalidades y ajustes de la periferia descentralizada:
● Sistemas maestros DP/sistemas IO con los correspondientes maestros DP/controladores
IO (CPU y CP), esclavos DP/dispositivos IO, los módulos utilizados y sus
parametrizaciones y propiedades, como p. ej. configuración futura, byte de estado o SYNC/
FREEZE
● Conexión de memorias imagen parciales de proceso (IPP) a bloques de organización (OB).
Esto se aplica a las propiedades de módulos y OBs
● Alarmas de proceso configuradas con las propiedades correspondientes
● Sistemas maestros DP con esclavo I
● CP como esclavo I PROFIBUS o I-Device PROFINET
● Comunicación directa
Las relaciones maestro-esclavo entre esclavo I/I-Device y maestro DP/controlador IO
asignado solo se establecen en el proyecto si tanto el maestro como el esclavo se han cargado
en la PG. Es indiferente si se carga primero el maestro DP/controlador IO o el esclavo I/IDevice. En cuanto ambos dispositivos están cargados, se restablecen también las relaciones
maestro-esclavo/controlador-dispositivo.

Carga de subredes y dispositivos con MPI, PROFIBUS, Ethernet y PtP
Para la carga de subredes y puntos finales de conexiones para MPI, PROFIBUS, Ethernet y
PtP con sus propiedades de conexión respectivas, se aplican las siguientes particularidades:
● Si se carga un dispositivo con interfaz PROFIBUS, los parámetros de bus del dispositivo
difieren al principio de los ajustes del proyecto original. Solo cuando se han cargado todos
los dispositivos implicados y no hay más dispositivos en el mismo bus, los parámetros de
bus coinciden con el proyecto original.
● Los dispositivos de comunicación pasivos que no estén conectados con un sistema
maestro o IO correspondiente como esclavos DP o dispositivos IO, no participan en el
intercambio de datos. En consecuencia, no se cargan.
● En caso de configuraciones entre dispositivos deben cargarse todos los dispositivos
afectados. Al compilar el proyecto aparece una advertencia para los dispositivos de red que
faltan. Igualmente, la información de enrutado que falte por no haber cargado los
dispositivos de comunicación también se notificará en forma de advertencia durante la
compilación. Si la configuración vuelve a cargarse en el dispositivo desde la PG/el PC, se
obtiene información de enrutado diferente.
Si se compila el proyecto después de cargar dispositivos en la programadora o el PC, STEP
7 comprobará si existen todos los dispositivos para los que se han configurado relaciones de

3338

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
comunicación. Si faltan dispositivos, aparece un aviso indicando el número de dispositivos de
comunicación que faltan.
ATENCIÓN
Comunicación entre dispositivos
Si se carga una configuración en la programadora o el PC con comunicación entre
dispositivos también deben cargarse todos los dispositivos de red correspondientes. Si faltan
dispositivos de red necesarios y la configuración se carga de nuevo en el dispositivo, no
queda garantizado que siga funcionando la comunicación entre dispositivos.

Consulte también
Configurar sistemas de periferia descentralizada (Página 3009)

Carga de configuraciones con servidor web
Información sobre la carga
La configuración hardware de una CPU incluye también los ajustes del servidor web. La carga
de una configuración de servidor web en la programadora o PC está sujeta a algunas
restricciones:
● La asignación de idioma del servidor web e idioma del proyecto en el S7-300/400 no se
carga. Los textos del proyecto no se cargan y se emite un aviso indicando que no se han
asignado idiomas del proyecto. En las CPU S7-1200/1500 los idiomas asignados en STEP
7 se cargan sin restricciones.
● Los datos de la administración de usuarios de S7-1200/1500 pueden cargarse pero no
editarse. Una casilla de verificación permite seleccionar si se desea utilizar los datos
existentes protegidos contra escritura o bien rechazarlos e introducir datos nuevos.
● No se cargan las tablas de observación del servidor web.
No se cargan los archivos fuente de las páginas web definidas por el usuario (páginas HTML,
Java Scripts, etc.). Los bloques de programa generados durante la carga solo pueden editarse
si el propio usuario introduce las propiedades y la página HTML.

Consulte también
Información importante sobre el servidor web (Página 1602)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3339

Configuración de dispositivos y redes
1.4 Crear configuraciones

Carga de configuraciones con PROFIBUS
Información sobre la carga
Un maestro DP se carga en la programadora o el PC. El sistema maestro DP y todos los
esclavos DP conectados se integran en el proyecto. Se mantienen los respectivos ajustes. Si
se ha creado ya una subred PROFIBUS adecuada, los dispositivos cargados con interfaz
PROFIBUS se conectan a la subred existente.
Para poder cargar esclavos normalizados en sistemas maestros DP es imprescindible que los
archivos GSD correspondientes estén instalados en el TIA Portal y estén disponibles en el
catálogo de hardware. Si un archivo GSD necesario no está disponible en la misma versión
que en el dispositivo, se muestran las diferencias en la comprobación de coherencia.
Nota
La comunicación directa en una configuración solo se carga si todos los interlocutores que
intervienen en la comunicación directa se cargan en la PG/el PC.

Modo isócrono
Al cargar sistemas maestros DP con la funcionalidad PROFIBUS "Modo isócrono" activada,
tenga en cuenta lo siguiente:
● Tras cargar del dispositivo a la programadora o el PC, los parámetros de bus y los ajustes
de modo isócrono no son idénticos hasta que no se han cargado todos los dispositivos
relevantes para el cálculo del modo isócrono.
● Solo se soportan sistemas monomaestro con modo isócrono. Por lo tanto, solo se cargan
configuraciones con un solo maestro DP en la subred PROFIBUS.

Esclavo I (esclavo inteligente)
Las relaciones entre maestro DP y esclavo I solo se establecen en el proyecto si tanto el
maestro DP como el esclavo I se han cargado en la programadora. Es indiferente si se carga
primero el maestro DP o el esclavo I. Si se carga el maestro DP desde un sistema maestro DP
con esclavo I enlazado, se cargan el maestro DP y sus esclavos DP. Como comodín para un
esclavo I implicado se carga un proxy de esclavo I.
Para los dispositivos proxy de esclavo I se aplica lo siguiente:
● El maestro DP puede compilarse y cargarse
● Las propiedades se muestran pero no se pueden modificar
● No se realiza el diagnóstico en el árbol del proyecto
En la vista de redes, los dispositivos proxy se representan con un signo de interrogación:
Es posible cargar un maestro DP con proxy de esclavo I conectado desde la programadora o
el PC al dispositivo.

3340

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Reemplazar proxy de esclavo I
Para poder editar el esclavo I en el proyecto, es necesario cargar el esclavo I del dispositivo a
la programadora o el PC. De esta forma, el proxy de esclavo I es sustituido por el esclavo I
completo con sus esclavos DP subordinados.
Para sustituir el proxy de esclavo I por el esclavo I correspondiente puede proceder del
siguiente modo:
● En la barra de menús, elija el comando "Online > Carga del dispositivo como estación
nueva (hardware y software)"
● Con el proxy de esclavo I seleccionado, elija el comando de menú contextual "Cargar de
dispositivo > Hardware y software".
● Seleccionando el botón "Cargar de dispositivo" en la barra de herramientas.
Nota
La sustitución de dispositivos proxy de esclavos I solo es posible si el esclavo I necesario está
disponible en el catálogo de hardware.
Los esclavos I protegidos por contraseña no se cargan.

Consulte también
Configuraciones con PROFIBUS DP (Página 3005)
Utilizar archivos GSD (Página 3051)

Carga de configuraciones con PROFINET
Información sobre la carga
Si se ha marcado una CPU en la lista de dispositivos accesibles y se efectúa una carga en la
PG/el PC, se cargan todos los controladores IO y dispositivos IO pertenecientes a ese
dispositivo con sus sistemas IO. Los ajustes de topología se aplican igualmente. Si existe ya
una red Ethernet adecuada en el proyecto, los dispositivos cargados se integran en la red
existente.
Las relaciones entre controladores IO y I-devices solo se representan en el proyecto si tanto
el controlador IO como el I-device se han cargado en la programadora. Es indiferente si se
carga primero el controlador IO o los I-devices.

Funciones soportadas
Se cargan las siguientes funcionalidades y ajustes:
● Configuraciones PROFINET (RT e IRT) en sistemas IO con los controladores IO (CPU y
CP) y dispositivos IO correspondientes y los módulos utilizados
● Direcciones lógicas y propiedades de interfaces
● Interconexiones de puertos

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3341

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Modo isócrono
● Dominios Sync/MRP
● Función de redundancia "Cliente" o "Administrador" en configuraciones MRP
Nota
Los dominios Sync y MRP vacíos no se incluyen en la carga.

Dispositivos IO basados en GSD
Para la carga de dispositivos IO basados en GSD es imprescindible que los archivos GSD
correspondientes estén instalados en el TIA Portal y estén disponibles en el catálogo de
hardware. Si un archivo GSD necesario no está disponible en la misma versión que en el
dispositivo, se muestran las diferencias en la comprobación de coherencia.

3342

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

I-device (dispositivo inteligente)
Si se carga el controlador IO desde un sistema IO con I-device enlazado, se cargan el
controlador IO y sus dispositivos IO. Como comodín para un I-device implicado se carga un
proxy de I-device. El proxy del I-device carece de parametrización de CPU, incluida la
parametrización del "propio" sistema IO (subordinado). Solamente se carga la interfaz con el
controlador IO de nivel superior.
&38&36,0$7,&
&RQWURODGRU,2

SHM(7
'LVSRVLWLYR,2

SHM(7

,QGXVWULDO(WKHUQHW
352),1(7,2

'LVSRVLWLYR,2
3UR[\GH
,'HYLFH

&38&36,0$7,&
FRPR,GHYLFH
6LVWHPD,2
GHQLYHOVXSHULRU

6LVWHPD,2FDUJDGRFRQ
SUR[\GH,GHYLFH

'LVSRVLWLYR,2
&RQWURODGRU,2
3URJUDPDGHXVXDULR
SUHSURFLQWHOLJHQWH

SHM(7
'LVSRVLWLYR,2

SHM(7

,QGXVWULDO(WKHUQHW
352),1(7,2

'LVSRVLWLYR,2

6LVWHPD,2VXERUGLQDGRQR
FDUJDGR

6LVWHPD,2
VXERUGLQDGR

Para los proxy de I-device se aplica lo siguiente:
● El controlador IO puede compilarse y cargarse.
● Las propiedades se muestran pero no se pueden modificar
● No se realiza el diagnóstico en el árbol del proyecto
En la vista de redes, los dispositivos proxy se representan con un signo de interrogación:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3343

Configuración de dispositivos y redes
1.4 Crear configuraciones
Es posible cargar un controlador IO con proxy de I-device conectado desde la programadora
o el PC al dispositivo.

Sustituir proxy de I-device
Para poder editar el I-device en el proyecto, debe cargarse el I-device del dispositivo en la
programadora o PC. De este modo se sustituye el proxy del I-device por el I-device completo
con sus dispositivos IO subordinados.
Para sustituir el proxy de I-device por el I-device correspondiente puede proceder de uno de
los siguientes modos:
● En la barra de menús, elija el comando "Online > Carga del dispositivo como estación
nueva (hardware y software)"
● Con el proxy de I-device seleccionado, elija el comando de menú contextual "Cargar de
dispositivo > Hardware y software".
● Seleccionando el botón "Cargar de dispositivo" en la barra de herramientas.
Nota
La sustitución de dispositivos proxy I-device solo es posible si el I-device necesario está
disponible en el catálogo de hardware.
Los I-devices protegidos por contraseña no se cargan.
Un proxy de I-device que represente a un I-device de SIMOTION no puede cargarse ni
sustituirse.

Configuraciones con IE/PB-Link
Si existe una de las siguientes configuraciones con IE/PB-Link PN IO como dispositivo
PROFINET IO, se carga toda la configuración con todos los dispositivos PROFIBUS
subordinados:
● CPU/CP de S7-300/400
● Estación PC y sistema maestro PROFIBUS conectado
La configuración completa se compone de:
● CPU
● Configuración de CP
● Sistema PROFINET IO con IE/PB-Link conectado
● Sistema maestro PROFIBUS del IE/PB-Link con esclavos DP conectados
Un ejemplo de configuración se compone de una CPU S7-300 con un CP como controlador
PROFINET IO. En el controlador IO está conectado un IE/PB-Link como dispositivo IO. El IE/
PB-Link, en calidad de maestro PROFIBUS DP, sondea un esclavo PROFIBUS DP, p. ej. ET

3344

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
200L. Si se carga la CPU desde el dispositivo en la programadora o el PC, se carga toda la
configuración.
Nota
Si el IE/PB-Link no se utiliza como proxy de PROFINET IO, sino como transición de red en
modo estándar, dicho IE/PB-Link funciona como módulo central y puede cargarse por
separado.

Carga de Shared Devices
Para la carga de comentarios, se aplica lo siguiente: Si un módulo de entradas y salidas con
la función Shared Input interna del módulo (MSI) o Shared Output interna del módulo (MSO)
solo consta de un submódulo, dicho submódulo no posee comentario propio. En su lugar, se
utiliza el comentario del módulo de entradas y salidas. Solo en caso de división del módulo en
varios submódulos tienen campos de comentarios propios tanto el módulo de entradas y
salidas como todos los submódulos.

Carga de dispositivos HMI
Información sobre la carga
Al cargar dispositivos HMI en la programadora o PC se distingue entre los siguientes casos:
● Los dispositivos HMI conectados con un maestro DP como esclavo DP o con un controlador
IO como dispositivo IO se cargan como esclavo DP o dispositivo IO, respectivamente (por
ejemplo, PP 17-I PROFIsafe).
● Los dispositivos HMI de un sistema maestro como esclavo I o de un sistema IO como Idevice se cargan como proxy de esclavo I o proxy de I-Device (Página 3341) (por ejemplo,
SIMATIC Comfort Panels). El acceso a los ajustes del proxy del dispositivo es de solo
lectura.
● Los dispositivos HMI no se cargan si están conectados a una subred (PROFIBUS o
PROFINET) pero no a un sistema maestro o sistema IO (por ejemplo, KP600 Basic color
DP).

Conexión online de configuraciones cargadas
Se puede pasar a online con el proyecto entero cargado o bien solo con partes del mismo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3345

Configuración de dispositivos y redes
1.5 Mostrar avisos

Requisitos
La configuración hardware cargada del dispositivo a la PG/el PC se ha compilado. Solo
después de una compilación se muestran correctamente los estados de los módulos
centralizados y descentralizados.
Nota
Si se realiza la conexión online antes de la compilación, se muestra el símbolo de diagnóstico
"?" (diagnóstico imposible). En la ventana de inspección se muestra un aviso correspondiente
en "Información > General".

Dependencias
En función de lo completa que haya sido la carga de la configuración hardware en la PG,
existen restricciones para pasar a online y para el diagnóstico:
● Dispositivo cargado completamente con todos los módulos centralizados y
descentralizados respectivos, como esclavos DP o dispositivos IO:
Son posibles la conexión online y el diagnóstico.
● Dispositivo cargado con I-Devices/esclavos I conectados:
– El I-Device/esclavo I no está cargado: es posible la conexión online para el dispositivo
y sus módulos. Para los componentes dependientes no cargados de la configuración se
utilizan proxys de dispositivos con un mínimo soporte de diagnóstico. El estado online
se representa en forma de icono. En la vista Online y diagnóstico se muestra el
diagnóstico estándar. Los datos I&M no se cargan.
– El I-Device/esclavo I también está cargado: la conexión online es posible para todos los
dispositivos, el diagnóstico se soporta por completo.

1.5

Mostrar avisos

1.5.1

Sinopsis del visor de avisos
La función "Visor de avisos" permite emitir avisos asíncronos de eventos de diagnóstico y de
avisos de diagnóstico personalizados, así como avisos de instrucciones ALARM.
Si se produce un desbordamiento de los eventos de diagnóstico, se muestra una indicación.
Una vez solucionado el desbordamiento, se notifican con posterioridad los avisos de tipo
NOTIFY_AP y ALARM_AP. Solo se notifican con posterioridad los eventos de diagnóstico que
continúan activos en el sistema después del desbordamiento. Los eventos aparecidos y
desaparecidos durante el desbordamiento no se notifican con posterioridad (no se trata de un
historial de alarmas).
Además, desde el visor de avisos se puede iniciar el editor de avisos con el comando del menú
contextual "Editar aviso" y crear avisos de diagnóstico definidos por el usuario.

3346

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.5 Mostrar avisos

Símbolos
La siguiente tabla muestra los símbolos y su modo de funcionamiento:
Símbolo

Avisos actuales

Función
Muestra los avisos actualmente pendientes. Los
avisos de acuse obligado se muestran en color
azul.
Muestra los avisos existentes en el fichero.

Fichero de avisos
Borra todos los avisos del fichero (también aun‐
que haya un filtro activo).
Vaciar por completo el fichero de avisos
Exporta el fichero de avisos actual a un archivo en
formato xml.
Exportar fichero
Muestra los avisos en varias líneas.
Multilínea
Congela la visualización de los avisos
Congelar avisos

Acusar aviso(s).

Filtro

1.5.2

Confirma como leído el aviso o los avisos selec‐
cionados. Los avisos pendientes de acuse se
muestran en color azul.
Muestra el filtro del visor de avisos. Si los criterios
de filtrado están activos, el icono correspondiente
irá acompañado de una marca de verificación ver‐
de.

Vista "Avisos actuales"
La vista "Avisos actuales" es una imagen de la memoria de acuse de avisos de la(s) CPU
seleccionada(s).

1.5.3

Estructura de los avisos en la vista "Avisos actuales"
La vista "Avisos actuales" muestra una imagen de la memoria de acuse de avisos de las CPU
seleccionadas. Por cada aviso pendiente se muestra una entrada en la tabla. Los eventos de
un aviso ("Aparecido", "Desaparecido" y "Acusado") se muestran en una fila.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3347

Configuración de dispositivos y redes
1.5 Mostrar avisos

Estructura de la tabla
Todos los atributos de los avisos se pueden representar en forma de columnas. Es posible
mostrar u ocultar las columnas de manera individual y modificar el ancho y el orden de las
columnas. Esta configuración se guarda al cerrar el proyecto.
Las columnas pueden clasificarse en orden ascendente o descendente. Cuáles son las
columnas que se utilizan para la clasificación depende de si está activado o no el botón
"Congelar avisos".
Los avisos se pueden mostrar en una o varias filas. En el modo de visualización de una sola
fila, sólo se muestra la primera fila de los avisos de varias filas.
Los avisos pueden ser tanto de acuse obligado como no de acuse obligado. Las alarmas de
acuse obligado pendientes de acuse se destacan en color azul y se pueden acusar de modo
contextual con el respectivo botón de la barra de herramientas o con el comando del menú
contextual "Acusar aviso(s)".

Consulte también
Ordenar una tabla en el visor de avisos (Página 3352)

1.5.4

Fichero de avisos
En el fichero de avisos se muestran y archivan los avisos por orden cronológico. El tamaño del
fichero (entre 200 y 3000 avisos) se puede establecer con el comando de menú "Opciones >
Configuración > Online y diagnóstico". Cuando se excede el tamaño ajustado del fichero, se
borra el aviso más antiguo.
Los avisos de acuse obligado se muestran en color azul y pueden ser acusados con el
comando del menú contextual "Acusar aviso(s)".
El fichero se actualiza constantemente sin necesidad de guardarlo expresamente.

Consulte también
Vaciar por completo el fichero de avisos (Página 3349)
Exportar el fichero (Página 3349)

1.5.5

Estructura de los avisos en el fichero de avisos
En el fichero de avisos se registran todos los eventos que se han producido en las CPU
seleccionadas. Para cada evento se crea una entrada nueva, que se muestra en la tabla como
fila adicional.

3348

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.5 Mostrar avisos

Estructura de la tabla
Todos los atributos de los avisos se pueden representar en forma de columnas. Es posible
mostrar u ocultar las columnas de manera individual y modificar el ancho y el orden de las
columnas. Esta configuración se guarda al cerrar el proyecto.
Las columnas pueden clasificarse en orden ascendente o descendente. Cuáles son las
columnas que se utilizan para la clasificación depende de si está activado o no el botón
"Congelar avisos".
Los avisos se pueden mostrar en una o varias filas. En el modo de visualización de una sola
fila, sólo se muestra la primera fila de los avisos de varias filas.
Los avisos pueden ser tanto de acuse obligado (avisos de acuse obligado) como no de acuse
obligado. Las alarmas de acuse obligado pendientes de acuse se destacan en color azul y se
pueden acusar de modo contextual con el respectivo botón de la barra de herramientas o con
el comando del menú contextual "Acusar aviso(s)".

Consulte también
Ordenar una tabla en el visor de avisos (Página 3352)

1.5.6

Vaciar por completo el fichero de avisos
El fichero está concebido como búfer en anillo, es decir, cuando está lleno, se borra el aviso
más antiguo del fichero con cada nuevo aviso que entra. Con el icono "Vaciar el fichero por
completo" se borra todo el fichero, independientemente de si hay criterios de filtrado activos o
no para la visualización de determinados avisos.

Procedimiento
Para vaciar el fichero, proceda del siguiente modo:
1. Haga clic en el icono "Vaciar el fichero por completo" de la barra de herramientas del visor
de avisos.

1.5.7

Exportar el fichero
Para archivar avisos, puede exportar el fichero. Proceda del siguiente modo:
1. Cambie al fichero de avisos.
2. Haga clic en el símbolo "Exportar fichero".
3. Elija en el diálogo abierto la ruta de la ubicación a la que desea exportar el fichero.

Resultado
El fichero se guarda como archivo xml en la ubicación indicada por usted.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3349

Configuración de dispositivos y redes
1.5 Mostrar avisos

1.5.8

Recibir avisos
Para ver los avisos, primero debe ajustar la recepción de los avisos de cada CPU.

Procedimiento
Para recibir avisos, proceda de la manera siguiente:
1. Haga doble clic en la carpeta "Online y diagnóstico" de la CPU correspondiente en el árbol
del proyecto.
2. Haga clic en el grupo "Accesos online" de la navegación local.
3. Active la opción "Recibir avisos".
Nota
Si elige este procedimiento, los avisos no se recibirán hasta que no vuelva a establecer una
conexión online con el dispositivo.
O bien:
1. Seleccione la CPU correspondiente en la vista de dispositivos, redes o vista topológica.
2. Elija el comando "Recibir avisos" del menú "Online" o del menú contextual.
O bien:
1. Seleccione la CPU en el árbol del proyecto.
2. Elija el comando "Recibir avisos" del menú "Online" o del menú contextual.
O bien:
1. En la lista desplegable "Mostrar avisos" del visor de avisos seleccione los dispositivos de
los que desea recibir avisos.
– Si no se ha abierto ningún proyecto, el proyecto no contiene ningún dispositivo online o
(aún) no se ha seleccionado ningún dispositivo, se muestra la entrada "Ningún
dispositivo seleccionado".
– Al hacer clic en el nombre del proyecto se seleccionan todos los dispositivos
subordinados y se muestra la entrada "Todos los dispositivos seleccionados".
– Si se seleccionan dispositivos concretos del proyecto, se muestra la entrada "Varios
dispositivos seleccionados".
2. Confirme la selección haciendo clic en la marca de verificación verde situada debajo de la
lista desplegable.
Nota
Si elige uno de los tres procedimientos mencionados anteriormente, debe establecer
primero una conexión online con el dispositivo.

3350

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.5 Mostrar avisos

1.5.9

Congelar avisos
Ofrece una instantánea del visor de avisos, congelando la visualización. Al hacer de nuevo clic
en este botón se activa de nuevo la actualización de los avisos.

El botón "Congelar avisos" no está activado
Los avisos solo pueden clasificarse por las columnas "Fecha" y "Hora". Esta configuración se
guarda al cerrar el proyecto. Los avisos actuales se muestran al principio o al final de la tabla
dependiendo de cuál sea el orden de clasificación.

El botón "Congelar avisos" está activado
Es posible clasificar por cualquier columna de la tabla. Sin embargo, al desactivar de nuevo
este botón se pierde la clasificación configurada.

1.5.10

Acusar avisos
Los avisos de acuse obligado se muestran en color azul.

Procedimiento
Para acusar un aviso, proceda del siguiente modo:
1. Seleccione el o los aviso(s) deseado(s) en la tabla.
2. Haga clic en el botón "Acusar avisos".
Nota
Además, puede seleccionar varios avisos pendientes de acuse simultáneamente. Para
ello, mantenga pulsada la tecla <Ctrl> y seleccione a continuación los avisos deseados en
la tabla.

Resultado
El aviso seleccionado ha sido acusado y se muestra con un estilo de fuente normal.
Nota
En la vista "Avisos actuales" ya no se muestran los avisos acusados que ya han desaparecido.

1.5.11

Estado de los avisos
En función de si se encuentra en la vista "Avisos actuales" o en el fichero de avisos, los avisos
mostrados pueden tener diferentes estados.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3351

Configuración de dispositivos y redes
1.5 Mostrar avisos

Estado de los avisos en la vista "Avisos actuales"
● AP: aviso aparecido
● AAC: aviso aparecido y acusado
● AD: aviso desaparecido
Si se reciben más cambios de señales de los que se pueden enviar (Signal Overflow), en el
estado se muestra una O y el estado se indica en rojo.

Estado de los avisos en el fichero de avisos
● ninguna indicación: sólo para avisos que ha creado el PG/PC y se muestran en la ficha
"Archivo", p. ej. estado de aviso, interrupción de la conexión, cambios del estado operativo
● AP: aviso aparecido
● AC: aviso aparecido y acusado
● D: aviso desaparecido
● L: aviso borrado
Si se reciben más cambios de señales de los que se pueden enviar (Signal Overflow), en el
estado se muestra una O y el estado se indica en rojo.

1.5.12

Ordenar una tabla en el visor de avisos

Clasificar una tabla en orden ascendente o descendente
Para clasificar una tabla en orden ascendente o descendente de una columna, proceda del
siguiente modo:
1. Haga clic en el encabezado de una columna para clasificarla en orden ascendente.
2. Vuelva a hacer clic en el encabezado de la misma columna para clasificarla en orden
descendente.
3. Vuelva a hacer clic por tercera vez en el encabezado de la misma columna para anular la
clasificación.

El botón "Congelar avisos" no está activado
Los avisos solo pueden clasificarse por las columnas "Fecha" y "Hora". Esta configuración se
guarda al cerrar el proyecto.

El botón "Congelar avisos" está activado
Es posible clasificar por cualquier columna de la tabla. Sin embargo, al desactivar de nuevo
este botón se pierde la clasificación configurada.

3352

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.5 Mostrar avisos

1.5.13

Filtrar tablas en el visor de avisos
Se pueden filtrar todas las columnas con la excepción de la columna "Ayuda". Esto es posible
tanto en las vistas "Avisos actuales" y "Fichero de avisos" como en el modo activo (los avisos
se actualizan constantemente) y en el modo "Congelar avisos".
En cuanto se activa un criterio de filtrado, aparece una marca de verificación verde en el icono
del filtro. Si hay un criterio de filtrado definido para una columna, el campo en cuestión se
muestra en color naranja.

Procedimiento
Para filtrar avisos, proceda de la manera siguiente:
1. Indique un criterio de filtrado en el campo.
2. Confirme la entrada efectuada con la tecla Intro o haga clic en otra área para activar el filtro.
Se guarda hasta un total de cinco criterios de filtro por columna en una lista desplegable que
puede seleccionarse si es preciso.
3. Dado el caso, repita la operación para todos los criterios restantes que desee.

Resultado
Solo se muestran los avisos que cumplan el criterio o los criterios configurados.
Si al cerrar el proyecto hay criterios de filtro activados en el visor de avisos, estos se seguirán
mostrando al abrir nuevamente el proyecto (u otro proyecto). Sin embargo, estos ajustes se
pierdan al cerrar el TIA-Portal.

1.5.14

Manejo del teclado en el visor de avisos

Visor de avisos
Función

Combinación de teclas (método abreviado)

Seleccionar todos los avisos

Ctrl+A

Acusar todos los avisos seleccionados

Ctrl+Q

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3353

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

1.6

Información adicional sobre configuraciones

1.6.1

Módulos de comunicación y componentes de red

1.6.1.1

Industrial Ethernet / PROFINET

Configuración
Protección de acceso a módulos / respaldo UDP / sistema de archivos
Referencia
Parametrización de ajustes especiales en el grupo de parámetros "Propiedades > General >
Ajustes"
Dependiendo del tipo de CP, encontrará los siguientes rangos de ajuste, que se describen a
continuación:
● Protección de acceso a módulos
● Respaldo UDP
● Sistema de archivos

Protección de acceso a módulos - Opción "Nivel de protección"
Esta opción permite proteger el CP de accesos involuntarios o no autorizados. En la lista
desplegable pueden seleccionarse las siguientes opciones:
● No bloqueado
● Dependiente del estado
Con este ajuste sólo se puede acceder al CP si la CPU se encuentra en estado STOP.

Desconectar el respaldo de telegramas UDP
El CP guarda en la memoria intermedia los telegramas UDP dependiendo de la carga por
comunicación entre el CP y la CPU.

3354

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Con la opción Respaldo UDP (Desconectar respaldo de telegramas UDP) se puede elegir
entre estos comportamientos:
● desactivado (ajuste predeterminado)
El respaldo de telegramas UDP está activado. Los telegramas UDP recibidos por el CP se
guardan en la memoria intermedia hasta que se transfieren a la CPU.
● activado
El CP transfiere siempre el último telegrama recibido, es decir, el actual, a la CPU. Mientras
no se pueda transmitir ningún telegrama UDP nuevo entre el CP y la CPU debido a la carga
de comunicación actual, en el CP se guarda siempre en la memoria intermedia el último
telegrama que ha llegado.
Al desactivar el respaldo de telegramas UDP se consigue un tiempo de reacción mínimo entre
la llegada del telegrama UDP y su evaluación en la CPU. El comportamiento provocado al
activar la opción puede ser crítico si llega una gran cantidad de telegramas en determinados
casos de aplicación. Si se guardaran de manera intermedia muchos telegramas se podría
producir un desfase temporal no deseado entre los telegramas registrados en la CPU y los
telegramas registrados actualmente en la interfaz Ethernet.

Sistema de archivos (observar las mayúsculas y minúsculas) – Opción con CPs con funciones IT
Activado: En la asignación de nombres de archivo para RAM, el CP distingue entre
mayúsculas y minúsculas dentro del nombre.

Transferencia de datos > 240 bytes
Referencia
Parametrización de ajustes especiales en el grupo de parámetros "Propiedades > General >
Ajustes"
Dependiendo del tipo de CP, encontrará el rango de ajuste "Transferencia de datos > 240
bytes"

Indicaciones sobre la transferencia de datos > 240 bytes
● Los CPs con versiones recientes soportan la transferencia de datos > 240 bytes. Tenga en
cuenta al respecto las indicaciones de la documentación del dispositivo CP Ethernet.
● Recuerde que con esta configuración en una S7-300 se ocupa un recurso de conexión
(conexión libre para funciones S7) de la CPU S7-300. Los recursos de conexión de la CPU
también son ocupados por CPs S7-300 en modo FMS o por programadoras u OPs, p. ej.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3355

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Interfaz Ethernet / PROFINET
Opciones avanzadas
Telegramas Keep Alive para conexiones TCP e ISO on TCP.
Referencia
Parametrización de ajustes especiales para la interfaz PROFINET en el grupo de parámetros
"Propiedades > General > Interfaz PROFINET > Opciones avanzadas > Opciones de interfaz"

Telegramas Keep Alive (solo con conexiones TCP e ISO on TCP)
Aquí se puede ajustar el intervalo de tiempo en el que se enviarán telegramas de señal de vida
(Keep Alive) al interlocutor de una conexión.
El CP Ethernet está configurado para todos los servicios orientados a conexiones de manera
que se envíen telegramas Keep Alive. De este modo se garantiza que las conexiones finalicen
después de que falle un interlocutor y que los recursos de conexión se liberen. El ajuste aquí
efectuado es válido también para todas las conexiones TCP e ISO on TCP que funcionan a
través del CP. Un ajuste orientado a la conexión no es posible.
Rango de valores
● Ajuste predeterminado: 30 segundos
● Valor máximo: consulte la información visualizada en el campo de entrada
● Función desactivada: 0 segundos
Nota
Tenga en cuenta que el mecanismo Keep Alive puede provocar que se mantengan conexiones
subordinadas (p. ej. una conexión telefónica RDSI) aunque no se transfieran datos de usuario
propiamente dichos. Si no desea que esto suceda, proceda siguiendo una de las alternativas
siguientes:
● Desactive el mecanismo Keep Alive (intervalo = 0).
● Ajuste un intervalo de tiempo tan alto que la conexión subordinada finalice tras la ausencia
de datos de usuario antes de que se envíe un telegrama Keep Alive.

Configuración IP
Referencia
Configuración de los parámetros IP en el grupo de parámetros de la interfaz PROFINET o
Ethernet

3356

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Significado
Aquí se especifica la vía o el procedimiento por el cual se determina y asigna la dirección IP de
la interfaz local.
Mediante las variantes ofrecidas es posible asignar "dinámicamente" direcciones IP fuera de
la configuración.
Por medio de la selección realizada se determina también si las conexiones se crean a través
de la configuración o de la interfaz del programa de usuario (instrucción IP_CONFIG).
Las opciones siguientes están disponibles:
● Ajustar la dirección IP en el proyecto
Este es el ajuste estándar para PLC. La dirección IP se establece al conectar el dispositivo
en red. De este modo, la dirección IP queda configurada de forma fija.
Si utiliza esta opción deberá configurar conexiones de comunicación.
● Obtener la dirección IP de un servidor DHCP
Con esta opción se establece que la dirección IP se obtenga de un servidor DHCP durante
el arranque del dispositivo.
– IPv4
El servidor DHCP recibe la dirección MAC de la interfaz o el ID de cliente que puede
configurarse opcionalmente.
Longitud del ID del cliente: 2.. 63 caracteres ASCII imprimibles
– IPv6
El ID de cliente se transfire al servidor DHCP y debe configurarse.
Longitud del ID del cliente: 1.. 128 caracteres ASCII imprimibles
Tenga en cuenta lo siguiente al configurar las conexiones:
Si utiliza DHCP, inicialmente no es posible crear una conexión totalmente especificada
(completa), dado que se desconoce la dirección IP. Por consiguiente, debe seleccionarse
el tipo de conexión "Sin especificar" con establecimiento pasivo.
● Ajustar la dirección IP en el programa de usuario
De este modo se especifica que la dirección IP se establezca a través de la interfaz del
programa de usuario (bloque de función IP_CONFIG). Con ello, la dirección IP puede
suministrarse dinámicamente durante el funcionamiento.
En este caso de uso, las conexiones de comunicación se crean únicamente a través de la
interfaz del programa de usuario. Está excluida la configuración de la conexión (afecta a las
conexiones vía TCP, ISO‑on‑TCP, UDP, ISO-Transport).
● Ajustar dirección IP en el dispositivo
De este modo se especifica que la dirección IP se determine mediante otros servicios fuera
de la configuración.
En este caso de uso está excluida la configuración de la conexión (afecta a las conexiones
vía TCP, ISO‑on‑TCP, UDP, ISO-Transport).
Nota
Si ya ha configurado conexiones de comunicación a través de la interfaz configurada aquí y
elige un ajuste distingo de "Ajustar la dirección IP en el proyecto", aparece un mensaje
indicando que las conexiones configuradas ya no funcionan.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3357

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Sincronización horaria
Sincronización horaria - Procedimiento
Referencia
Configuración del procedimiento de sincronización horaria del módulo en el grupo de
parámetros "Sincronización horaria" en la interfaz PROFINET o en los ajustes de Security.
Para la sincronización horaria del S7‑1200 consulte el capítulo Sincronización horaria en
S7-1200 (Página 3361).
Para configurar la sincronización horaria del IE/PB Link PN IO (V3) consulte el capítulo
Sincronización horaria - IE/PB LINK PN IO (V3) (Página 3363).

Funcionamiento de los procedimientos relacionados con la sincronización horaria
● Procedimiento SIMATIC
Si el procedimiento SIMATIC está activado, el módulo ajusta su hora según los mensajes
horarios MMS (MMS ‑ Manufacturing Message Specifaction).
Los mensajes horarios MMS provienen de un emisor de hora SIMATIC o de una CPU que
se configura como reloj maestro. El módulo (p. ej. CP) puede recibir los mensajes horarios
desde la CPU local o a través de LAN. Existe la posibilidad de ajustar que el módulo reenvíe
la hora recibida.
La ventaja del procedimiento SIMATIC radica en la mayor precisión en comparación con el
procedimiento NTP.
Consulte también Configuración del procedimiento SIMATIC (Página 3358).
● Procedimiento NTP
(NTP ‑ Network Time Protocol)
Con el procedimiento NTP, el módulo envía peticiones de hora a uno o varios servidores
NTP de la subred (LAN). Sobre la base de las respuestas de los servidores se determina
la hora más exacta y fiable y se sincroniza la hora del módulo solicitante. En este caso, los
mensajes de hora MMS que se reciban se ignorarán.
En el procedimiento NTP se transfiere generalmente la hora UTC (Universal Time
Coordinated), que equivale a la hora GMT (Greenwich Mean Time).
La ventaja del procedimiento NTP es la posibilidad de sincronizar la hora más allá de los
límites de la subred.
Consulte también Configuración del procedimiento NTP (Página 3360).

Configuración del procedimiento SIMATIC
Sincronización horaria en el procedimiento SIMATIC
Con el método "SIMATIC" se provoca que el CP reenvíe mensajes de hora MMS cuando los
recibe de un emisor de hora SIMATIC. Es posible recibir los mensajes horarios desde el bus
de fondo o el bus K (CPU S7‑400) o bien a través de LAN.

3358

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

"Adopción de la hora en CP"
El CP puede bien recibir la hora únicamente bien recibir y reenviar la hora.
Si se reenvía la hora debe especificarse el sentido de reenvío.

"Sentido"
Dependiendo de dónde se ha dispuestos el reloj maestro debe considerarse el sentido del
reenvío de la hora.
Si se utilizan varios CPs en la estación, debería considerarse el flujo de mensajes de hora en
función del reloj maestro, ya que con la función aquí descrita es posible acoplar mensajes de
hora de una red a otra. Dentro de una estación solo debe haber un reloj maestro.
Si en una estación hay varios CPs conectados a la misma subred, y si para ellos está activada
la transmisión de la hora, rige: Se encarga de la transmisión el CP con el número de slot más
bajo en cada caso. Todos los CPs restantes configurados para la transmisión de la hora
activan la transmisión automáticamente.
Existen las siguientes posibilidades para ajustar el sentido de reenvío de la hora:
● Automático
El CP recibe el mensaje horario de la LAN o de la estación y lo reenvía a la estación o a la
LAN.
Si se operan varios CPs en la estación, este ajuste automático puede causar colisiones.
Para evitarlo, es posible especificar el sentido de reenvío utilizando las opciones siguientes:
● De estación
El CP recibe el mensaje horario de la estación y lo reenvía a la LAN.
Para ello, debe configurarse una CPU local como reloj maestro o bien otro CP 400 reenvía
mensajes horarios al bus K.
● De LAN
El CP recibe el mensaje horario de la LAN y lo reenvía a la estación.
Para ello, debe configurarse la CPU local como reloj esclavo.
Excepción: CPU 318

"Utilizar hora corregida"
Esta opción permite decidir si debe tomarse en consideración un factor de corrección incluido
en el telegrama horario transferido.
El factor de corrección, que puede ajustarse en un reloj central SICLOCK en unidades de ½
hora, establece una diferencia de tiempo para corregir el ajuste de una zona horaria o cambiar
entre la hora de verano e invierno.
Si esta opción está activada, el CP introduce el factor de corrección en el cálculo de la hora que
se reenviará, por lo que los sistemas postconectados ya no necesitan tener en cuenta este
factor.
Ejemplo:
En el telegrama horario se transmite como hora las 9:21. Además, el telegrama horario
contiene el factor de corrección +2 x 0,5 (= 1h). Por consiguiente, la hora que transmitirá el CP
será 10:21.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3359

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configuración del procedimiento NTP
En la medida de lo posible, elabore antes de la configuración un concepto para la
sincronización horaria. Asegúrese de que solo se utiliza una fuente horaria para cada estación.
Solo tiene sentido una fuente horaria por subred.
Consulte los mecanismos de la sincronización horaria del S7‑1200 en el capítulo
Sincronización horaria en S7-1200 (Página 3361).

NTP ‑ Network Time Protocol
Con el procedimiento NTP, el CP o la CPU envía peticiones de hora a uno o varios servidores
NTP de la subred (LAN). Sobre la base de las respuestas de los servidores se determina la
hora más exacta y fiable y se sincroniza la hora del módulo solicitante. Los mensajes horarios
MMS que se hayan podido recibir se ignoran en este caso.
La ventaja del procedimiento NTP es la posibilidad de sincronizar la hora más allá de los límites
de la subred.
En el procedimiento NTP se transfiere generalmente la hora UTC (Universal Time
Coordinated), que equivale a la hora GMT (Greenwich Mean Time).
Los parámetros descritos a continuación no están disponibles para todos los módulos.

Servidores NTP
Existe la posibilidad de configurar las direcciones IP de hasta cuatro servidores NTP.
Nota
CPU S7‑1500 versión V1.8 o superior: Modificar los servidores NTP desde el programa de
usuario
Para CPU S7‑1500 con la versión de firmware V1.8 o superior existe la posibilidad de modificar
en tiempo de ejecución las direcciones de 4 servidores NTP mediante la instrucción
T_CONFIG (SFB 105). Para ello es imprescindible que se haya configurado como mínimo un
servidor NTP en el grupo de parámetros "Sincronización horaria".
Las direcciones configuradas de los servidores NTP se sobrescriben con las direcciones IP de
los servidores NTP en la instrucción T_CONFIG. Aunque solo se haya configurado 1 servidor
NTP, es posible programar hasta 4 servidores NTP mediante el SFB. En caso necesario, las
direcciones de los servidores NTP pueden modificarse varias veces con T_CONFIG.
La versión de firmware V1.8 para CPU S7‑1500 está disponible con STEP 7 V13.0 SP1 Update
3.

"Zona horaria"
Mediante la configuración de la zona horaria local se puede ajustar la diferencia de tiempo
respecto de la hora UTC.

3360

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

"Intervalo de sincronización"
El intervalo establece el ciclo temporal de las consultas de hora (en segundos). El rango de
valores del intervalo está entre 10 segundos y un día.
Si la opción "Sincronización horaria al minuto completo" está activada, el ciclo se ajusta
automáticamente a 60 segundos.

"Sincronización horaria al minuto completo"
Si la opción está activada, la CPU aplica al cumplirse el minuto la hora sincronizada que el CP
reenvía a la CPU.
Si la opción "Sincronización horaria al minuto completo" está activada, el parámetro "Intervalo
de actualización" se ajusta automáticamente a 60 segundos.

"Aceptar hora de servidores NTP no sincronizados"
Si la opción está activada, el CP también toma la hora de servidores NTP no sincronizados con
estrato ≥ 15.
Si la opción está desactivada, el CP no toma la hora de servidores NTP con estrato ≥ 15. Si el
CP recibe un telegrama de hora de un servidor NTP con estrato ≥ 15, no se ajustará la hora del
CP.

"Reenviar hora a estación"
En el CP 300/400 esta opción está activada por defecto.
Algunas CPUs ofrecen la posibilidad de obtener la hora de forma autónoma de un servidor
NTP. Si la CPU utiliza la sincronización horaria, debería desactivarse la opción aquí descrita
en el CP. De ese modo se evita que la hora obtenida en la CPU directamente del servidor NTP
se sobrescriba con la hora registrada en el CP. Debido al reenvío de la hora del CP a la CPU
podría resultar en este caso una menor exactitud.

Sincronización horaria en S7-1200
Módulos y procedimiento de sincronización
Cuando se emplea una fuente horaria externa, la estación S7-1200 puede utilizar tanto la hora
actual de la CPU como la de un CP.
En S7-1200 no se reenvía la hora de la estación a la subred.
Sincronización horaria vía la CPU
Como procedimiento de sincronización en la CPU solo puede seleccionarse NTP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3361

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Mediante la opción "La CPU sincroniza los módulos del dispositivo" se consigue que todos los
módulos inteligentes de la estación (CM, CP) se sincronicen en un ciclo de sincronización
ajustable de 10 a 86400 segundos (24 horas) con la hora de la CPU.
Nota
Sincronización horaria si se emplea Secure Open User Communication (Secure OUC)
Si la S7-1200 emplea bloques Secure OUC y para la comunicación emplea la interfaz
PROFINET del CP, debe estar activada la opción "La CPU sincroniza los módulos del
dispositivo".
Solo es posible validar estos datos respecto a la vigencia de un certificado si la fecha y hora
son actuales. Si la fecha y hora está fuera de la vigencia, no se produce ninguna comunicación
a través de Secure OUC.
Sincronización horaria mediante un CP de Telecontrol
Es posible elegir entre los procedimientos de sincronización siguientes:
● NTP
NTP solo puede emplearse si se ha desactivado la comunicación por Telecontrol. En este
caso el CP de Telecontrol se usa como interfaz PROFINET avanzada de la CPU.
● Hora del interlocutor
Si se ha activado la comunicación por Telecontrol, el CP acepta automáticamente la hora
del interlocutor de la comunicación.
Nota
Reenvío de la hora a la CPU
Dependiendo de la versión de firmware de los módulos participantes, la hora del CP se reenvía
de diferentes modos a la CPU:
● Reenvío opcional de la hora del CP a la CPU a través de una variable PLC
● Reenvío obligatorio de la hora del CP a la CPU a través del bus de fondo

Reenvío de la hora del CP a la CPU
Nota
Recomendación: Sincronización horaria solo mediante 1 módulo
Sincronice la hora de la estación de una fuente horaria externa con un solo módulo de la
estación, para tener dentro de la estación una hora coherente.
Si la CPU adopta la hora del CP, desactive la sincronización horaria de la CPU.

3362

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
El reenvío de la hora del CP a la CPU depende de la versión de firmware del CP y de la CPU.
Tenga en cuenta el comportamiento siguiente.
● Firmware del CP ≤ V2.1.5
Opcionalmente, con esta versión de firmware la hora del CP puede ponerse a disposición
de la CPU a través de una variable PLC. Si esta variable PLC es leída cíclicamente por la
CPU, esta adopta la hora del CP.
● Firmware del CP ≥ V2.1.7 y firmware de la CPU ≥ V4.2
Si los dos módulos de una estación tienen una de las versiones de firmware descritas, la
hora del CP puede reenviarse automáticamente a la CPU.
Para ello, es imprescindible que en la CPU esté activada la opción "La CPU sincroniza los
módulos del dispositivo" en "Interfaz PROFINET > Sincronización horaria".
En este caso, todos los módulos inteligentes de la estación se sincronizan con la hora de
la CPU.
Puesto que la CPU adopta automáticamente la hora del CP, ya no se requiere la opción de
reenvío a través de la variable PLC.

Sincronización horaria - IE/PB LINK PN IO (V3)
Referencia
Configuración de la sincronización horaria del IE/PB LINK PN IO V3
Es imprescindible que un dispositivo ponga a disposición la hora en la red correspondiente.

Procedimientos de la sincronización horaria
Existe la posibilidad de seleccionar los procedimientos siguientes con diferentes opciones:
● Procedimiento SIMATIC
Si el procedimiento SIMATIC está activado, el LINK ajusta su hora según los telegramas
horarios MMS (MMS ‑ Manufacturing Message Specifaction).
Los mensajes horarios MMS provienen de un emisor de hora SIMATIC o de una CPU que
se configura como reloj maestro. El CP puede recibir los mensajes horarios desde la CPU
local o a través de LAN. Es posible ajustar si el LINK debe reenviar los telegramas horarios
y en qué sentido.
La ventaja del procedimiento SIMATIC radica en la mayor precisión en comparación con el
procedimiento NTP.
● Procedimiento NTP
(NTP ‑ Network Time Protocol)
En el procedimiento NTP, el LINK ajusta su hora según los mensajes horarios provenientes
de un servidor NTP y que un un dispositivo de la red Ethernet pone a disposición. Es posible
ajustar si el LINK simplemente debe aceptar los telegramas horarios de la LAN o si también
debe reenviarlos.
En el procedimiento NTP se transfiere generalmente la hora UTC (Universal Time
Coordinated), que equivale a la hora GMT (Greenwich Mean Time).
La ventaja del procedimiento NTP es la posibilidad de sincronizar la hora más allá de los
límites de la subred.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3363

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configuración de la sincronización horaria
Significado de las opciones:
● Aplicar el procedimiento SIMATIC - reenviar de Ethernet a PROFIBUS
El LINK aplica la hora de la LAN y la reenvía a la red PROFIBUS.
● Aplicar el procedimiento SIMATIC - reenviar de PROFIBUS a Ethernet
El LINK aplica la hora de la red PROFIBUS y la reenvía a la LAN.
● Procedimiento SIMATIC - aplicar hora de la red Ethernet
El LINK aplica la hora del LAN pero no la reenvía.
● Procedimiento SIMATIC - aplicar hora de la red PROFIBUS
El LINK aplica la hora de la red PROFIBUS pero no la reenvía.
● Aplicar el procedimiento NTP - reenviar de Ethernet a PROFIBUS
El LINK aplica la hora de la LAN y la reenvía a la red PROFIBUS.
● Procedimiento NTP - aplicar hora de la red Ethernet
El LINK aplica la hora del LAN pero no la reenvía.

Información adicional
Configuración de red individual
Configuración de red individual
Aquí es posible configurar la red de forma fija si es necesario. La opción predeterminada es
"Configuración automática" que, por norma general, permite comunicarse correctamente.
Si surgen problemas durante la comunicación (p. ej. si no pueden establecerse conexiones o
si se producen fallos frecuentes en la red) es posible que la configuración de red automática
o la seleccionada no sea adecuada. En este caso, elija un ajuste de red adecuado a su
configuración.

Rango de valores y ejemplo de dirección IP
Rango de valores de la dirección IP
La dirección IP consiste en 4 números decimales comprendidos en un rango de valores entre
0 y 255 y separados entre sí por un punto.
Formato: xxx.yyy.zzz.www

3364

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Ejemplo:
141.80.0.16
● Las direcciones siguientes tienen significados especiales (* indica un número cualquiera
entre 0 y 255):
– 127.*.*.* Loopback
– 0.0.0.0 red no especificada
– 255.255.255.255 Broadcast a todos los nodos (sólo válido si se ha seleccionado el
interlocutor "Todos los nodos Broadcast")
– Dirección de host 255 dirección Broadcast para todos los nodos de una red:
en la clase A: xxx.255.255.255
en la clase B: xxx.yyy.255.255
en la clase C: xxx.yyy.zzz.255
● No se permiten:
– Dirección de host 0
en la clase A: xxx.0.0.0
en la clase B: xxx.yyy.0.0
en la clase C: xxx.yyy.zzz.0

Rango de valores y ejemplo de máscara de subred
Rango de valores de la máscara de subred
Para separar la ID de la red de la dirección de host en la dirección IP se introdujo la máscara
de subred.
Dicha máscara consiste en 4 números decimales comprendidos en un rango de valores entre
0 y 255 y separados entre sí por un punto (p. ej. 255.255.0.0).
Los 4 números decimales de la máscara de subred deben incluir en su representación binaria
una secuencia de valores "1" sin espacios partiendo de la izquierda y una secuencia de valores
"0" sin espacios partiendo de la derecha.
Los valores "1" determinan el número de red dentro de la dirección IP. Los valores "0"
determinan la dirección de host dentro de la dirección IP.

Ejemplo:
Valores correctos: 255.255.0.0 D = 1111 1111.1111 1111.0000 0000.0000 0000 B
255.255.128.0 D = 1111 1111.1111 1111.1000 0000.0000 0000 B
255.254.0.0 D = 1111 1111.1111 1110.0000 0000.0000.0000 B
Valor incorrecto: 255.255.1.0 D = 1111 1111.1111 1111.0000 0001.0000 0000 B

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3365

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Relación entre la dirección IP y la máscara de subred
El primer decimal de la dirección IP (desde la izquierda) determina la estructura de la máscara
de subred en cuanto al número de valores "1" (binarios), del siguiente modo ("x" representa la
dirección de host o bien los "0" en la máscara de subred):
● Primer decimal de la dirección IP máscara de subred
clase A: de 0 a 126 255.x.x.x
clase B: de 128 a 191 255.255.x.x
clase C: de 192 a 223 255.255.255.x
Nota
En el primer decimal de la dirección IP también puede introducirse un valor entre 224 y 255.
Sin embargo, no es recomendable porque con estos valores STEP 7 no verifica la dirección.

Relación entre la dirección IP y la dirección de la transición de red
Relación entre la dirección IP y la dirección de la pasarela de red
La dirección IP y la dirección de la pasarela de red solo deben diferir en los lugares en los que
en la máscara de subred hay "0".

Ejemplo:
Se ha introducido: para la máscara de subred 255.255.255.0; para dirección IP 141.30.0.5 y
para la dirección de la pasarela de red 141.30.128.1.

Representación decimal habitual

Representación binaria

Máscara de subred

255.255.255.0

1111 1111.1111 1111.1111 1111.0000
0000

Dirección IP

141.30.0.5

1000 1101.0001 1110.0000 0000.0000
0101

Pasarela de red

141.30.128.1

1000 1101.0001 1110.1000 0000.0000
0001

La dirección IP y la dirección de la pasarela de red solo pueden tener un valor diferente en el
4.º decimal. Pero en el ejemplo hay ya una diferencia en el tercer lugar.
Por tanto, en el ejemplo debe modificarse, alternativamente:
La máscara de subred a: 255.255.0.0 o
La dirección IP a: 141.30.128.5 o
La dirección de la pasarela de red a: 141.30.0.1

3366

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parámetros de puerto
Configuración de red individual para cada puerto
En caso necesario, para cada interfaz (puerto) disponible es posible configurar la red de forma
fija para las propiedades de transferencia. La opción predeterminada es "Configuración
automática" que, por norma general, permite comunicarse correctamente.
Si surgen problemas durante la comunicación (p. ej. si no pueden establecerse conexiones o
si se producen fallos frecuentes en la red) es posible que la configuración de red automática
o la seleccionada no sea adecuada. En este caso, elija un ajuste de red adecuado a su
configuración.

Funcionamiento de la conmutación automática
El CP ofrece en todos los puertos una conexión dúplex de 10/100 Mbits/s con detección
automática (autosensing) y negociación automática (autonegotiation) de la configuración de
red. Estas funciones se ejecutan del siguiente modo tras conectar el CP:
● El CP intenta detectar la velocidad de transferencia utilizada por el interlocutor.
● Si lo consigue, intentará negociar con el interlocutor un modo de operación dúplex óptimo.
● Si la negociación no es posible, el CP utilizará la velocidad de transferencia detectada
anteriormente y el modo semidúplex.
La duración de los pasos descritos es de unos 2 segundos.
Además, la "Configuración automática" incluye un mecanismo de autocrossing;
independientemente de las propiedades del dispositivo partner, podrá utilizar para la conexión
un cable cruzado o no.

Conmutar a la configuración de red individual
En cuanto se realiza una configuración manual, la conmutación automática ya no es efectiva.
Lo mismo es válido para el mecanismo de autocrossing integrado en el CP. Si el dispositivo
partner conectado no soporta el mecanismo de autocrossing, deberá utilizarse un cable
cruzado (en caso de switch) o no (en caso de terminal de datos), según sea el dispositivo
partner.

Posibilidad de selección para "desactivar" un puerto:
En función del tipo de módulo, en la lista desplegable aparecerá la opción "- desactivar -". Así,
por ejemplo, tiene la posibilidad de prohibir el acceso a un puerto no utilizado por motivos de
seguridad.
Consulte también

Información relacionada
Tenga en cuenta las indicaciones adicionales del manual de producto del CP correspondiente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3367

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Tamaño máximo de telegrama / Volumen de datos para dispositivos PROFINET IO
Tamaño de los datos de usuario en el CP 1616
El tamaño de los datos de usuario (datos de proceso) se calcula a partir del tamaño máximo
de telegrama (volumen de datos bruto) menos los valores para los módulos insertados en este
dispositivo IO. El resultado es el volumen de datos neto.
Tabla 1-170 Ejemplo de cálculo de los datos de usuario (bytes) del CP 1616 como dispositivo IO con
módulos homogéneos (p. ej. solo módulos DI)
Bytes

Explicación

1434 Tamaño bruto del telegrama
-16 para el número máximo de módulos insertables
= 1418 Tamaño neto de los datos de usuario

Tabla 1-171 Ejemplo de cálculo de los datos de usuario (bytes) del CP 1616 como dispositivo IO con
módulos heterogéneos (p. ej. DI/DO)
Bytes

Explicación

1434 Tamaño bruto del telegrama
-32 para el doble de módulos insertables como máximo
= 1370 Tamaño neto de los datos de usuario

Tamaño de los datos de usuario en el CP 343-1 (Lean/Standard/Advanced)
El tamaño de los datos de usuario (datos de proceso) se calcula a partir del tamaño máximo
de telegrama (volumen de datos bruto) menos los valores para el CP y la propia interfaz, para
el número de puertos y los módulos insertados en este dispositivo IO. El resultado es el
volumen de datos neto.
Tabla 1-172 Ejemplo de cálculo de los datos de usuario (bytes) del CP 343-1 como dispositivo IO
Bytes

Explicación
548 Tamaño bruto del telegrama
-1 para el propio CP
-1 para la interfaz
-2 para 2 puertos
-32 para el número máximo de módulos insertables

= 512 Tamaño neto de los datos de usuario *
* Si se utilizan menos módulos pero más grandes es posible que aumente el volumen de datos de usuario.

3368

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configuración DNS
Referencia
Configuración de la dirección de servidor DNS en el grupo de parámetros "Configuración DNS"
Un servidor DNS puede ser necesario cuando el propio módulo, un interlocutor de la
comunicación o un servidor de correo electrónico, por ejemplo, debe ser accesible a través del
nombre de host (FQDN).

Servidor DNS para conexiones de correo electrónico
En la configuración de una conexión de correo electrónico hay que especificar la dirección de
un servidor de correo a través del cual se envían los mensajes. La dirección del servidor de
correo puede indicarse como dirección IP o como FQDN.
Si la dirección de servidor se indica como FQDN, habrá que configurar un servidor DNS. En
ese caso la dirección IP del servidor de correo se determina a través del servidor DNS
configurado.

Protección de acceso IP
Protección de acceso IP
Referencia
Parametrización de las propiedades de interfaz en el grupo de parámetros "Propiedades >
General > Protección de acceso IP".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3369

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Resumen
Para la protección de acceso IP pueden parametrizarse las opciones siguientes, según sea el
tipo de CP:
● Opción "Activar servidor web"
El CP le ofrece la función de un servidor web para acceder a través de un navegador web.
Para ello, se almacenan determinadas páginas HTML con información del CP y funciones
de diagnóstico en un área de memoria del CP.
Active esta opción para obtener acceso a dichas páginas HTML. Con ello se habilitará el
puerto 80 del CP.
Por defecto, el acceso a través de un servidor web está activado.
● Opción "Activar servidor FTP"
Elija esta opción si desea permitir los accesos FTP a la estación S7 a través del puerto
20/21 del CP.
Si en la ficha "FTP" se configura el acceso FTP a los DBs file de la CPU, el acceso sólo será
posible si se activa esta opción.
Por defecto, el acceso a través de un servidor FTP por el puerto 20/21 está activado.
● Opción "Activar protección de acceso para comunicación IP"
La interfaz Ethernet ofrece la posibilidad de limitar el acceso al dispositivo local a los
interlocutores que tengan direcciones IP determinadas. De este modo, los interlocutores no
autorizados no podrán acceder a los datos del dispositivo local a través de esta interfaz.
Para ello se puede activar o desactivar la protección de acceso IP así como introducir
direcciones IP determinadas en una lista IP Access Control (IP-ACL).
La protección de acceso IP está desactivada por defecto.
Los intentos de acceso bloqueados se registran en el CP y pueden verse con el diagnóstico
especial en el objeto de diagnóstico "Protección de acceso IP". En los CPs con función TI
se creará además un archivo LOG en el sistema de archivos del CP que se puede ver con
un navegador web.
Siga las instrucciones de manejo del archivo LOG y las indicaciones para cargar los datos
de configuración más adelante.

Protección de acceso IP para interlocutores configurados
Si desea restringir el acceso únicamente a los interlocutores indicados en la configuración,
sólo hay que activar la protección de acceso. En este caso, no es necesario introducir ninguna
dirección IP en la lista.

3370

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Los interlocutores que se toman en consideración son:
● Estaciones con las que se han configurado conexiones.
Lo mismo es válido para conexiones (excepto conexiones S7) en las que el interlocutor está
en una subred distinta.
Sin embargo, tenga en cuenta que, en las conexiones sin especificar cuyas direcciones de
interlocutor permanecen indeterminadas, todas las direcciones IP no introducidas no
estarán autorizadas y, por tanto, se rechazarán. Las conexiones en PROFINET CBA
también se considerarán conexiones sin especificar. Para estas conexiones deberá
introducir explícitamente las direcciones IP en la lista IP Access Control.
● Dispositivos PROFINET IO cuando se utiliza el CP Ethernet como controlador PROFINET
IO;
Las direcciones IP de dispositivos PROFINET IO se introducen dinámicamente en la lista
IP Access Control en estado RUN del CP.
Si el CP pasa al estado STOP, las direcciones IP de los dispositivos PROFINET IO volverán
a borrarse de la lista Access.
● Servidores NTP, servidores SMTP, servidores DNS y servidores DHCP.
Las direcciones IP de servidores NTP, SMTP, DNS y DHCP también se introducirán y
borrarán dinámicamente en los servidores cuando se realicen las consultas pertinentes.
La protección de acceso IP hace referencia a todos los tipos de conexión que se desarrollan
a través del protocolo IP (TCP, ISO on TCP, UDP, S7)
Observación sobre direcciones IP asignadas dinámicamente:
Puesto que cada servicio administra su propia entrada dinámica en la ACL, es posible que la
misma dirección IP aparezca varias veces en el diagnóstico de módulo.

Protección de acceso IP para interlocutores con direcciones IP concretas
Para restringir el acceso a direcciones IP concretas, introduzca dichas direcciones en la lista
IP Access Control. Pueden ser, por ejemplo, las direcciones IP de interlocutores no
especificados en la configuración de conexiones, de programadoras individuales o de
interlocutores en PROFINET CBA.
Las direcciones IP indicadas en la configuración de conexiones están siempre incluidas en las
direcciones IP admitidas y, por tanto, no deben introducirse explícitamente en la IP-ACL.

Ver el archivo LOG con un navegador web
En los CPs con función IT se crea un archivo LOG en el sistema de archivos del CP, que puede
consultarse desde un navegador web. En comparación con el registro en el diagnóstico
especial, el archivo LOG ofrece espacio para hasta 512 entradas.
El archivo LOG no está disponible hasta que se activa la protección de acceso IP por primera
vez.
Encontrará el archivo LOG en formato de archivo HTML en el sistema de archivos del CP, en
el directorio siguiente:
·ram/security/IPLogFile.htm
Otras propiedades:
El archivo LOG se crea como búfer circular; cuando se han registrado más de 512 entradas,
se sobrescriben las entradas existentes, comenzando por la más antigua.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3371

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Las entradas son únicamente cronológicas; no hay ningún otro criterio de clasificación.
Recuerde que esta función solo se soporta en las versiones de firmware más recientes de los
CPs; encontrará más información al respecto en la documentación de los CPs.
En los CPs Advanced a partir de CP 343-1 Advanced (GX30) y CP 443-1 Advanced (GX20) no
se crea el archivo LOG. En ellos, los intentos de acceso fallidos pueden verse directamente en
el diagnóstico web.

Especificación de los derechos de acceso en la lista IP Access Control (IP-ACL)
Referencia
Parametrización de las propiedades de interfaz en el grupo de parámetros "Propiedades >
General > Protección de acceso IP".

Reglas para la introducción de las direcciones IP:
Tenga en cuenta las reglas siguientes al introducir las direcciones IP:
● En cada fila puede introducirse la dirección IP individualmente o como rango.
● También es posible introducir comentarios.
● El número máximo de direcciones que pueden introducirse es de 32
● El número máximo de áreas de direcciones que pueden introducirse es de 10
● No se comprueba si las direcciones introducidas individualmente también están incluidas
en un área de direcciones.
● No se comprueba si un área incluye direcciones no válidas (así, por ejemplo, es posible
indicar direcciones Broadcast aunque no pueden aparecer como dirección IP de un
remitente).
● Los comentarios empiezan con el signo "#"

Ejemplos:
● Dirección IP individual con comentario: 141.80.0.16 #dirección de interlocutor x
● Área de direcciones IP con comentario: 141.80.0.16 - 141.80.0.25 #área de direcciones
para nivel de gestión

Derechos
Los derechos de acceso aquí descritos pueden seleccionarse en la lista IP Access Control con
las correspondientes abreviaciones.

3372

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Tabla 1-173 Derechos de acceso y abreviaciones
Derecho de acceso

Denominación breve

Significado / observación

Acceso a estación

A

Access
Los interlocutores cuya dirección se en‐
cuentre dentro del rango especificado
tienen acceso a la estación asignada al
CP (CP/CPU).
El derecho de acceso está activado im‐
plícitamente para las direcciones IP que
se hayan indicado en la configuración
de la conexión.

Modificación de la lista IP Access Con‐
trol

M

Modify
Los interlocutores cuyas direcciones se
encuentren dentro del rango especifica‐
do tienen derecho de acceso a la lista IP
Access Control. Estos interlocutores
pueden enviar entradas para la lista IP
Access Control al CP vía HTTP.
Al seleccionar este derecho, el "A" tam‐
bién se activa automáticamente.
Notas referentes a las entradas envia‐
das por HTTP:
● Con cada lista enviada por HTTP se
anula la lista enviada anteriormente
por HTTP.
● Con los derechos de acceso
enviados vía HTTP es posible
complementar entradas
configuradas con STEP 7, pero en
ningún caso borrarlas.
● Una lista enviada por HTTP se borra
con un fallo de la tensión de
alimentación en el CP (tensión OFF).
Encontrará información sobre la sinta‐
xis de una lista enviada por HTTP en la
documentación del CP.

Acceso por routing de IP a otra subred IP R

Routing
Los interlocutores cuya dirección se en‐
cuentre dentro del rango especificado
tienen acceso a otras subredes conec‐
tadas al CP.
El derecho de acceso no se activa auto‐
máticamente para las direcciones IP
que se hayan indicado en la configura‐
ción de la conexión. Dado el caso, es
necesario activar este derecho de acce‐
so explícitamente en este punto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3373

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Nota
● Cargar datos de configuración a través de TCP/IP
Tenga en cuenta que al cargar a través de TCP/IP con la protección de acceso activada,
debe incluirse en la IP-ACL la dirección IP de la programadora o el PC desde el que se
carga la configuración. De lo contrario, la PG/el PC será detectado como no autorizado
durante la operación de carga y éste se cancelará.
● Cargar conexiones S7 con posterioridad
Si se cargan con posterioridad conexiones S7 en la estación S7, no se considerarán
automáticamente en la IP-ACL. En este caso habrá que cargar de nuevo toda la
configuración de la estación.
● Aplicar y editar la configuración mediante carga en la PG/el PC
Si pretende editar la configuración de conexiones y ha activado la protección de acceso IP,
en la PG/el PC se requerirá toda la información de la conexión. Por ello, habrá que cargar
los datos de conexión actuales en la PG/el PC. La descarga posterior en la estación S7
requiere a continuación una carga completa de los datos de conexión y de la estación.
Nota
Por medio del diagnóstico especial se puede ver la IP-ACL actual en la estación S7 y, dado el
caso, compararla con la IP-ACL configurada.

Editar derechos de acceso en la administración de usuarios
Referencia
Parametrización de los derechos de usuario en el grupo de parámetros "Propiedades >
General > Administración de usuarios"

Significado de la administración de usuarios
Defina en la administración de usuarios qué derechos deben asignarse a qué usuarios para el
acceso a la estación S7 a través de un navegador web o cliente FTP.
En una lista ordenada alfabéticamente encontrará en Nombre de usuario los usuarios
especificados hasta el momento, para los que se han definido contraseñas.
La entrada "Cualquiera" aparece de forma predeterminada. No puede modificarse. Tampoco
se le puede asignar una contraseña.

3374

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Las entradas de usuario siempre están vinculadas a una contraseña. Excepción: la entrada
"Cualquiera" no está protegida por contraseña.
Nota
La entrada "Cualquiera" no tiene asignado ningún derecho por defecto. De todas formas, es
posible asignarle derechos para fines de servicio.
Sin embargo, hay que tener en cuenta que los derechos asignados al usuario "Cualquiera"
están disponibles para todos los demás usuarios. Por consiguiente, es imprescindible retirar
los derechos una vez terminada la asistencia técnica. En caso contrario, se concede el
derecho de ejecutar servicios sin autorización en cualquier acceso.
Si hay un derecho de acceso activado bajo el usuario "Cualquiera", ello puede reconocerse
porque la casilla de verificación está rellenada al asignar derechos a otro usuario.

Introducir un usuario nuevo
1. Seleccione la primera fila libre de la lista de usuarios.
Se creará una entrada de usuario nuevo con el nivel de acceso "mínimo".
2. Adapte el nombre de usuario propuesto en la columna "Nombre".
3. Dentro de la fila recién creada, haga doble clic en la columna "Nivel de acceso".
Aparecerá el símbolo de la lista desplegable.
4. Haga clic en dicho símbolo.
5. En el cuadro de diálogo que aparece a continuación, defina derechos específicos del
usuario.
6. Confirme la entrada con "Aceptar".
7. Asigne una contraseña nueva en el cuadro de diálogo que aparece.

Modificar derechos de usuario o una contraseña:
1. En la fila de la entrada de usuario deseada, haga doble clic en la columna "Nivel de acceso".
Aparecerá el símbolo de la lista desplegable.
2. Haga clic en dicho símbolo.
3. En el cuadro de diálogo que aparece a continuación, modifique los derechos específicos del
usuario o haga clic en el botón "Contraseña" para asignar una contraseña nueva.
4. Confirme la entrada con "Aceptar".
5. Introduzca la contraseña en el cuadro de diálogo que aparece.

Borrar entradas de usuario
1. En la fila de la entrada de usuario deseada, elija el comando "Borrar" del menú contextual.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3375

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Declaración de variables - Editar la lista de variables
Referencia
Parametrización de las variables configuradas en la CPU en el grupo de parámetros
"Propiedades > General > Declaración de variables"

Significado de la declaración de variables
Para poder acceder a variables de las CPUs a través de un navegador web vía Java Applet es
necesario indicar al CP los nombres, las direcciones y los derechos de acceso de las variables.
En la lista de símbolos de la declaración de variables se pueden ver las variables conocidas en
ese momento con sus nombres simbólicos, los operandos correspondiente y los derechos de
acceso asignados.

Agregar una entrada de variable nueva
1. Haga doble clic en la primera fila vacía de la tabla.
Aparecerá el símbolo de selección por medio de una lista desplegable.
2. Seleccione el símbolo para abrir el visor de estructura para las variables del dispositivo
actual.
3. Elija los símbolos de las variables o los elementos de estructura a los que se debe poder
acceder desde un navegador web.
Observación: los símbolos deben haberse almacenado previamente en el editor de
símbolos.

Borrar una entrada de variable
1. En la fila de la variable que se va a borrar, elija el comando "Borrar" del menú contextual.
Atención:
Nota
no se realiza ninguna consulta de seguridad, la entrada se borra inmediatamente. No es
posible seleccionar varias entradas.

Configurar derechos de acceso - Opción "Escribible"
En el ajuste predeterminado, para las variables solo se otorgan derechos de lectura.
Para asignar los derechos de escritura/lectura para las variables introducidas aquí, proceda
del siguiente modo:
1. Seleccione una o varias variables en la lista de símbolos.
2. Ajuste la opción "Solo lectura" de la forma conveniente para las variables seleccionadas.

3376

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Declaración de variables - Editar la lista de variables (ERPC)
Referencia
Configuración de las variables creadas en la CPU para la aplicación ERPC.
Se selecciona la variable para hacerla accesible para la aplicación ERPC.

Tabla de variables ERPC
En la tabla se muestran las variables PLC configuradas en el proyecto STEP 7 que están
disponibles para la aplicación ERPC. Las variables ERPC que puedan haberse cargado
anteriormente en la estación no se visualizan.
En la tabla se muestra la siguiente información relativa a las variables configuradas para
ERPC:
● Info
Información adicional procedente de la comprobación de modificaciones
Con la comprobación de modificaciones, a las variables ERPC modificadas en el proyecto
STEP 7 después de haberlo guardado la última vez se les dota de la correspondiente
información adicional en la columna "Acerca de" (ver abajo).
● Variable
Nombre de la variable
● Escribible
Los derechos configurados para la comunicación ERPC (leer de la CPU, escribir en la
CPU); en la opción predeterminada solo se asignan derechos de lectura.
● Comentario
Comentarios de las variables ERPC específicos para la comunicación ERPC
Debajo de la tabla:
● Escribible
Activando la opción "Escribible" se elimina la protección contra escritura de las variables
ERPC seleccionadas y se habilitan para operaciones de escritura de la aplicación ERPC.
● Número de variables:
La cantidad total de las variables utilizadas para ERPC.

Selección múltiple de variables
Se puede realizar una selección múltiple de variables en la tabla con las teclas <Mayús> y
<Ctrl>.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3377

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Comprobación de modificaciones
Al abrir la declaración de variables tiene lugar una comprobación de las modificaciones. Las
variables seleccionadas para la aplicación ERPC se comparan con las de la tabla de variables
de la CPU asignada en el proyecto STEP 7 (tabla de variables offline).
Nota
No tiene lugar una comparación con variables ERPC cargadas eventualmente en la estación
desde el proyecto STEP 7 en un momento anterior.
En la columna "Acerca de..." se muestra la información relevante acerca de las diferencias
entre las variables ERPC y la tabla de variables de la CPU.
Indicación en la
columna "Info"

Estado / Información
Variable no modificada

ACC

La variable no se puede editar actualmente. Motivo: El bloque de datos en el que se
utiliza la variable está abierto en este momento.

DEL

Variable borrada de la tabla de variables de la CPU

ADR

Dirección modificada en la tabla de variables de la CPU

TYP

Tipo de datos modificado en la tabla de variables de la CPU
Observación: Si para una variable de la tabla de variables se han modificado la
dirección o el tipo de datos, la información "ADR" se sobrescribe con la información
"TYP".

DEF

Tipo de variable no soportado

UPL

Variable cargada desde la estación.
(tras ejecutar la función de STEP 7 "Cargar en PG")

Si existen entradas del tipo "DEL", "ADR" y "TYP", se tienen que efectuar las correcciones
correspondientes antes de guardar el proyecto STEP 7.

Configuración FTP para el servicio de servidor FTP
CP Ethernet como servidor FTP para los datos de la CPU
Referencia
Registro de datos para la creación automática de una tabla de asignación file en el grupo de
parámetros "Propiedades > General > Configuración FTP".
Los datos recogidos en la tabla de asignación file permiten acceder a bloques de datos de una
o varias CPUs (hasta 4) de una estación S7.

Opción "Activar servidor FTP" (solo en determinados tipos de CP)
Elija esta opción para permitir accesos FTP a la estación S7 a través del puerto 20/21 del CP.
La activación de esta opción es indispensable para activar el acceso FTP en File-DBs de la
CPU con la opción descrita a continuación.

3378

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Por defecto, el acceso a través de un servidor FTP por el puerto 20/21 está activado.

Opción "Utilizar servidor FTP para datos de CPU S7"
Al seleccionar esta opción, la tabla de asignación File aquí configurada se crea al cargar los
datos de configuración en el CP y se almacena en el directorio /config del sistema de archivos
del CP.
Si existe ya un archivo file_db.txt, se sobrescribe.
Nota
Si la seguridad y la opción "Permitir acceso solo vía FTPS" están activadas, rige lo siguiente:
● Los archivos se transfieren codificados.
● El usuario debe tener activados los derechos "FTP: leer archivos (DBs) de la CPU S7" o
"FTP: escribir archivos (DBs) de la CPU S7".
● Si el cortafuegos está activado, los protocolos FTP/FTPS deben estar autorizados.

CP Ethernet como servidor FTP para los datos de la CPU S7
Para transferir datos a través de FTP se crean bloques de datos en la CPU de la estación S7;
debido a la particularidad de su estructura, dichos bloques se denominan aquí DBs file.
En calidad de servidor FTP, el CP Ethernet determina, a partir de una tabla de asignación file
(archivo file_db.txt) con un comando FTP cómo deben reproducirse en archivos (files) los
bloques de datos utilizados en la estación S7 para la transferencia de archivos (files).
La tabla de asignación file se crea y transfiere al CP del siguiente modo:
● Introduciéndola en el grupo de parámetros aquí descrito "Propiedades > Configuración
FTP";
La tabla de asignación file se genera a partir de los datos de la configuración FTP y se carga
automáticamente en el CP junto con los datos de configuración.
● Creando directamente un archivo file_db.txt.
La tabla de asignación file creada de este modo se carga en el CP con un comando FTP.
La tabla de asignación file file_db.txt se almacena en el directorio /config del sistema de
archivos del CP Ethernet.

Consulte también
Configuración y estructura de la lista de configuración FTP (Página 3380)
Estructura de los bloques de datos (File-DB) para servicios FTP - modo FTP-Server
(Página 3381)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3379

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configuración y estructura de la lista de configuración FTP
Configuración y estructura de la lista de configuración FTP para crear la tabla de asignación file
Los campos de la tabla de la configuración FTP tienen el significado y la sintaxis siguientes:
Asignación de títulos en la ta‐ "CPU"
bla de la configuración FTP

"DB"

Significado

N.º del bloque

Asignación de
rack/slot de la
CPU
Seleccionable
por lista desple‐
gable; la entrada
no puede introdu‐
cirse.

Nombre de archivo

Comentario

Nombre de archivo
La entrada puede intro‐ asignado al DB file
ducirse.
Propuesta de nombre
automática. La entra‐
da puede introducirse/
modificarse.

Comentario informal

Ejemplo 1

cpu1 [PLC_1]

20

cpu1_db20.dat

Valores medidos en el
área Instalación1

Ejemplo 2

cpu2 [PLC_2]

35

Cpu2_db35.dat

Valores medidos en el
área Instalación2

Indicaciones relativas a la sintaxis
● Los separadores válidos para las entradas son "espacios".
● Para el nombre de archivo (File Name) de un DB file rige lo siguiente:
– El nombre de archivo empieza por "cpuX" (siendo X=1,2,3 ó 4);
– "cpux" debe estar definido previamente en la asignación de rack/slot de la CPU;
– Longitud: máximo 64 caracteres ("cpuX" inclusive);
● Máximo 100 entradas;
● Caracteres admisibles: letras "A-Z,a-z"; cifras "0-9", "_", "."
Nota
Observe el formato (minúsculas para "cpu" y sin espacios al principio de la línea). De lo
contrario los archivos no se reconocerán.
El tabulador no está permitido como separador.

Consulte también
CP Ethernet como servidor FTP para los datos de la CPU (Página 3378)

3380

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Estructura de los bloques de datos (File-DB) para servicios FTP - modo FTP-Server
Funcionamiento
Para la transmisión de datos mediante FTP hay que crear bloques de datos (File-DBs) en la
CPU de la estación S7. Dichos bloques de datos han de tener una determinada estructura para
que los servicios FTP puedan tratarlos como archivos transmisibles. Constan de los siguientes
sectores
● Sector 1: File-DB-Header (tiene una longitud fija de 20 byte y una estructura fija)
● Sector 2: datos de usuario (longitud y estructura variables)Tipo de datos
"FILE_DB_HEADER"

Tipo de datos "FILE_DB_HEADER"
En la función "Agregar nuevo bloque" se asigna el tipo "FILE_DB_HEADER" directamente a un
bloque de datos.

File-DB-Header para modo de servidor FTP
Observación: el File-DB-Header aquí descrito es prácticamente idéntico al File-DB-Header
descrito para el modo cliente. Las diferencias residen en los parámetros
● WRITE_ACCESS
● FTP_REPLY_CODE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3381

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parámetro
EXIST

Tipo

Valor / Significado

BOOL

El bit EXIST indica si hay
datos válidos en el área de
datos de usuario.

Alimentación
El comando FTP dele pone EXIST=0;
El comando FTP store pone EXIST=1;

El comando FTP retrieve
solo procesa la petición si
EXIST=1.
● 0:
el File-DB no contiene
datos de usuario válidos
("el archivo no existe").
● 1:
el File-DB contiene
datos de usuario válidos
("el archivo existe").
LOCKED

BOOL

El bit LOCKED sirve para la
protección de acceso al Fi‐
le-DB.
● 0:
se puede acceder al
File-DB.
● 1:
el File-DB está
bloqueado.

Los comandos FTP store y retr ponen LO‐
CKED=1 durante la edición.
Para una operación de escritura desde el
programa de usuario rige:
El programa de usuario almacenado en la
CPU S7 puede activar o desactivar LOCKED
para asegurar la coherencia durante un ac‐
ceso de escritura.
Procedimiento recomendado para el progra‐
ma de usuario:
1. Comprobar el bit LOCKED;
si =0
2. Poner el bit WRITEACCESS=0
3. Comprobar el bit LOCKED;
si =0
4. Poner el bit LOCKED=1
5. Escribir datos
6. Poner el bit LOCKED=0

3382

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro
NEW

Tipo

Valor / Significado

Alimentación

BOOL

El bit NEW informa sobre si
los datos se han modificado
desde la última operación
de lectura.

El comando FTP store pone NEW=1 tras la
edición

● 0:
el contenido del File-DB
no ha cambiado desde
la última operación de
escritura. El programa
de usuario de la CPU S7
ha registrado el último
cambio.

El programa de usuario de la CPU S7 tiene
que poner NEW=0 tras la lectura de los da‐
tos, para hacer posible un nuevo store o para
poder borrar el archivo con el comando FTP
dele.

● 1:
el programa de usuario
de la CPU S7 no ha
registrado la última
operación de escritura.
WRITE_ACCESS

BOOL

0:
el cliente FTP de la PG/el
PC no tiene derecho de es‐
critura para los File-DB de
la CPU S7.
1:
el cliente FTP de la PG/el
PC tiene derecho de escri‐
tura para los File-DB de la
CPU S7.

El bit se pone a un valor de inicialización al
configurar el DB.
Recomendación:
A ser posible, el bit debería dejarse inaltera‐
do. En caso especiales es posible una adap‐
tación durante el funcionamiento.

ACT_LENGTH

DINT

Longitud actual del área de La longitud actual se actualiza después de
una operación de escritura.
datos de usuario.
El contenido de este campo
solo es válido si EXIST = 1.

MAX_LENGTH

DINT

Longitud máxima del área
de datos de usuario (longi‐
tud total del DB menos 20
bytes del encabezado).

FTP_REPLY_CODE

DATE_TIME

INT

DATE_AND_TIME

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

La longitud máxima se debería definir al con‐
figurar el DB.
El valor puede ser modificado por el progra‐
ma de usuario también durante el funciona‐
miento.

Este parámetro no tiene re‐ El servidor FTP lo pone a "0".
levancia en el modo de ser‐
vidor FTP.
Fecha y hora de la última
modificación del archivo.
El contenido de este campo
solo es válido si EXIST = 1.

La fecha actual se actualiza después de una
operación de escritura.
Si se utiliza la función "Transmisión de la ho‐
ra", la entrada se corresponde con la hora
transmitida.
Si no se utiliza la función "Transmisión de la
hora", se introduce una hora relativa. La re‐
ferencia es el momento de arranque del CP
IT (el valor de inicialización es 1.1.1994 0.0
horas).

3383

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
CP Ethernet como servidor FTP para los datos de la CPU (Página 3378)

Direcciones E/S
Referencia
Parametrización para las direcciones de entrada/salida en el grupo de parámetros
"Propiedades > General > Direcciones E/S"

Significado
● Entradas, salidas
Asigne una dirección inicial al módulo. (Salidas solo si está seleccionada la opción "Ajuste
de dirección para LOCK/UNLOCK con FETCH/WRITE")
● Opción "Ajuste de dirección para LOCK/UNLOCK con FETCH/WRITE"
Seleccione esta opción si desea utilizar la función de coordinación de acceso con los FCs
LOCK/UNLOCK en modo FETCH/WRITE.
Esta función utiliza la salida de proceso a través del bus de fondo/P. Por ello, en cuanto se
selecciona esta opción también pueden ajustarse las direcciones de salida.

Web
Servidor web del módulo
Opción "Activar servidor web"
El CP le ofrece la función de un servidor web para acceder a través de un navegador web. Para
ello, se almacenan páginas HTML con información y funciones de diagnóstico en un área de
memoria del CP.
Active esta opción para obtener acceso a dichas páginas HTML en el servidor web de la CPU.
Activando la función se habilitará el puerto 80 del CP.
En el ajuste predeterminado, el acceso a través de un servidor web está activado.

3384

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Opciones del diagnóstico web (disponibilidad en función del tipo de CP)
● Opción "Visor de topología"
Esta opción permite visualizar en el servidor web información de topología para las
interfaces PROFINET IO del CP conectadas en red.
Para determinar y almacenar la información de topología se ocupa espacio adicional en el
CP. Por consiguiente, en caso de configuraciones de proyectos complejas con elevadas
exigencias para los recursos de memoria es aconsejable activar esta opción solo
provisionalmente para fines de servicio.
● Opción "Descarga de firmware vía web"
Al activar esta opción se habilita la función para cargar el firmware del CP a través del centro
de descargas del servidor web.
Si la Security está desactivada, esta opción no está sometida a la administración de
usuarios. Por ello, se recomienda habilitar la opción solo en caso necesario.
● Opción "Carga a posteriori de los archivos de idiomas para visores de diagnóstico a través
de web"
Los visores de diagnóstico de los CPs se visualizan con texto claro en el búfer de
diagnóstico web. La visualización es específica del idioma.
Al activar esta opción se habilita la función para recargar los archivos de idiomas que faltan
a través del centro de descargas del servidor web.

Actualización automática / "Intervalo de actualización"
Si se elige la opción "Activar", el CP actualiza las páginas web visualizadas en el intervalo
ajustado.
Rango de valores para el intervalo de actualización 1..999 s

Diagnóstico web en el módulo
Requisitos:
Establezca una conexión física entre la programadora y la estación SIMATIC S7 y ajuste la
interfaz PG/PC de manera que el módulo esté accesible. Encontrará más ayuda en la función
"Ajustar interfaz PG/PC...".

"Inicio del diagnóstico web"
Al hacer clic en el botón "Diagnóstico web" se muestra el resultado del diagnóstico del módulo
en el navegador web. El servidor HTTP integrado del módulo suministra los contenidos.
Inicie el diagnóstico del navegador web en el grupo de parámetros "Propiedades > General >
Diagnóstico web".
● Opción "Acceso vía"
En la lista "Acceso vía" seleccione la interfaz desde la que se activará el CP.
– En la lista desplegable pueden seleccionarse las interfaces disponibles.
– Existe la posibilidad de introducir directamente una dirección IP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3385

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Nota
Con funciones de seguridad activadas (si están disponibles)
Si la opción "Permitir acceso solo vía HTTP" está activada, tenga en cuenta lo siguiente:
● Los datos se transfieren codificados.
● El usuario debe tener activado el derecho "Acceder a diagnóstico web".
● Si el firewall está activado, los protocolos HTTP/HTTPS deben estar autorizados.

SNMP
Opción "Activar SNMP"
Si la opción "Activar SNMP" está activada, se habilita la comunicación vía SNMP, lo que
permite el acceso de lectura y escritura al módulo.
La comunicación conforme a la especificación SNMPv1 o SNMPv3 solo puede seleccionarse
en módulos que soportan funciones de Security:
● SNMPv1
En el módulo se habilita el agente SNMPv1. Para los módulos que soportan las funciones
de Security para SNMPv1 se pueden modificar los Community Strings para acceso de
lectura y escritura.
● SNMPv3
En el módulo se habilita el agente SNMPv3. Dispone de otras posibilidades de
configuración para codificación, autenticación y asignación de derechos para usuarios de
STEP 7.

3386

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Seguridad OPC UA (CP)
Perfiles de seguridad y validación de certificados
Perfiles de seguridad de la aplicación OPC UA
En función del tipo de CP, la aplicación OPC UA del CP soporta los siguientes perfiles de
seguridad de la especificación OPC UA:
● SecurityPolicy
– SecurityPolicy ‑ None
– SecurityPolicy ‑ Basic128Rsa15
Firma y cifrado de 128 bits
– SecurityPolicy ‑ Basic256
Firma y cifrado de 256 bits
– SecurityPolicy [A] ‑ Aes128-Sha256-RsaOaep
Firma y cifrado de 256 bits con RSA-OAEP
– SecurityPolicy [B] ‑ Basic256Sha256
Firma y cifrado de 256 bits (SHA-256)
– SecurityPolicy ‑ Aes256-Sha256-RsaPss
Firma con PSS y cifrado de 256 bits con RSA-OAEP
Las Conformance Units (Signing / Encryption) complementarias tienen el significado
siguiente:
– Firmar
El CP solo permite la comunicación con telegramas firmados.
– Firmar y cifrar
El CP solo permite la comunicación con telegramas firmados y cifrados.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3387

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Validación de certificados
En este grupo de parámetros se ajustan para la aplicación de servidor o cliente las opciones
para comprobar los certificados de los interlocutores de la comunicación.
● Comprobar certificados
El CP comprueba de forma general el certificado del interlocutor de la comunicación,
excepto cuando se ha seleccionado "SecurityPolicy ‑ None".
Si el certificado del interlocutor no fuera válido o no fuera de confianza, se cancela la
comunicación.
Cuando la opción está activada, pueden activarse las dos opciones siguientes para limitar
las rutinas de comprobación.
● Sin validación estricta de certificado
Si la opción está activada, el CP permite la comunicación también en los casos siguientes:
– La dirección IP del interlocutor de la comunicación no es idéntica a la dirección IP de su
certificado.
– El uso indicado en el certificado (cliente o servidor OPC UA) es diferente de la función
(cliente o servidor OPC UA) del interlocutor de la comunicación.
– La hora actual en el CP está fuera de la vigencia del certificado del interlocutor.
Independientemente de estas excepciones, para establecer una conexión deben cumplirse
por lo menos los requisitos siguientes:
– La URI de aplicación enviada por el cliente solicitante debe coincidir con la URI de la
aplicación de servidor del CP.
– Si el certificado del interlocutor no es de confianza, el CP debe tener guardado por lo
menos un certificado autofirmado del interlocutor.
– Si el certificado del interlocutor ha sido expedido por varias CA, todas las CA deben estar
guardadas en la memoria de certificados del CP.
● No comprobar la vigencia
Si la opción está activada, el CP comprueba el certificado del interlocutor de la
comunicación. El CP también permite la comunicación en el caso siguiente:
– La hora actual en el CP está fuera de la vigencia del certificado del interlocutor.
Si ninguna de las tres opciones está activada, no se comprueban los certificados.
Para que tenga lugar la comunicación con aplicaciones de otros fabricantes, observe
especialmente las indicaciones que aparecen en la gestión de certificados sobre la
importación de certificados.

Particularidades para la aplicación de cliente del CP 443-1 OPC UA
Si se utiliza la función de cliente del CP, tenga en cuenta lo siguiente:
El valor que ha programado el usuario para el parámetro "CheckServerCertificate" en la
información de conexión (UASessionConnectInfo) para el bloque de programa del cliente
"UA_Connect" se sobrescribe con los ajustes configurados aquí en el grupo de parámetros
"Validación de certificados". Si el cliente debe comprobar los certificados de un interlocutor de
la comunicación (servidor), puede ignorar el parámetro de UDT "UASessionConnectInfo".
Para comprobar el certificado solo son relevantes los valores configurados del grupo de
parámetros "Validación de certificados".

3388

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

CP 1545-1
CloudConnect
Comunicación con la nube
Protocolos para la conexión a la nube
Para la comunicación con un broker en la nube o un servidor en la nube, el CP soporta los
protocolos siguientes:
● MQTT
Conforme a la versión estándar OASIS 3.1.1

Sistemas en la nube soportados
El CP soporta la conexión a sistemas en la nube que soportan una funcionalidad de broker con
el protocolo MQTT.
La configuración del acceso a la nube ("Operador de la nube") está ajustada a la comunicación
con los siguientes sistemas y servicios en la nube:
● Siemens MindSphere ‑ MindConnect IoT Extension
El CP es Publisher.
● Otra nube
Perfil de otro sistema en la nube, por ejemplo:
– AWS (Amazon) ‑ IoT Core
– Azure (Microsoft) ‑ IoT Hub
– IBM Cloud (IBM) ‑ Watson IoT Platform
El CP puede ser Publisher y Subscriber.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3389

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Interlocutores de la comunicación
● Publisher
Un publisher publica datos en un broker de la nube.
Junto con el CP en calidad de subscriber (solo con comunicación a través de "Otra nube"),
los dispositivos siguientes pueden actuar de publisher:
– CP 1545‑1
– Dispositivo de terceros
Dispositivos de terceros cuya configuración y cuyo formato de datos de usuario de los
mensajes sean compatibles con el CP.
● Subscriber
Un subscriber inicia sesión en un broker en la nube y se suscribe a los datos de un publisher.
Junto con el CP en calidad de publisher, los dispositivos siguientes pueden actuar de
subscriber:
– CP 1545‑1
(solo con comunicación a través de "Otra nube")
– Dispositivo de terceros
Dispositivos de terceros cuya configuración y cuyo formato de datos de usuario de los
mensajes sean compatibles con el CP.
Consulte la compatibilidad en el capítulo Sinopsis de la configuración (Página 3390).

Información sobre la configuración
Sinopsis de la configuración
Configuración del acceso a la nube
1. Cree las variables DB y los bloques de datos necesarios en la CPU local para el acceso de
la aplicación de la nube a la memoria imagen de proceso.
Los puntos de datos configurados de los temas o grupos acceden a variables DB de la CPU;
consulte el capítulo Áreas de operandos y variables (Página 3393).
2. Ante todo, configure para el CP los grupos de parámetros de "Seguridad > Acceso a la
nube" en la ventana de inspección.
Para ello, en los ajustes globales de seguridad debe crearse por lo menos un usuario con
la función "NET Administrator".

3390

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
3. Seguidamente, despliegue el árbol del proyecto:
Estación > Módulos locales > CP 1545-1 > Integración en la nube >
"Temas publicados" / "Temas suscritos" o
"Grupos publicados"
– Haga clic en "Agregar tema" o "Agregar grupo".
– Inserte los puntos de datos en los temas o grupos y configúrelos.
Tenga en cuenta la indicación sobre el nombre del tema, el nombre del punto de datos
y el tipo de datos en el apartado siguiente.
4. Seleccione el tema o grupo y abra el cuadro de diálogo de propiedades con el comando
"Propiedades" del menú contextual.
– Configure el nombre y, opcionalmente, el "autor" y "comentario".
Tenga en cuenta la indicación sobre el nombre del tema en el apartado siguiente.
– Configure la "Quality of Service (QoS)" exigida para temas ("Otra nube"). Consulte a
este respecto el capítulo Quality of Service (QoS) (Página 3403).

Reglas de configuración y recomendaciones
Por lo general, para la transferencia de datos en un sistema jerárquico es recomendable
nombrar los componentes de acuerdo con la estructura jerárquica.
Ejemplo de nombre de un punto de datos que debe transferirse:
"Instalación_1/Parte de la instalación_1/Grupo_1/DB_1_Señal_1"
Reglas de configuración
Observe las siguientes reglas para la configuración:
● Nombre del tema
Dentro de una aplicación en la nube, el nombre de un tema debe ser unívoco.
Esto es válido para todos los publishers y subscribers que intervienen.
● Nombre del punto de datos
Dentro de un tema, el nombre de un punto de datos debe ser unívoco.
Nota
Comprobación de la coherencia de parámetros en publisher y subscriber
Cuando un CP en calidad de subscriber recibe datos de un publisher en tiempo de ejecución,
el subscriber comprueba los siguientes parámetros proporcionados por el publisher en los
datos de usuario cada vez que recibe un valor:
● Nombre del tema
● Nombre del punto de datos
● Tipo de datos
Si estos tres parámetros del publisher son idénticos a los parámetros configurados en el
subscriber, este último escribe los datos recibidos en el bloque de datos de su CPU.
Si estos tres parámetros del publisher no son idénticos a los parámetros configurados en el
subscriber, este último rechaza los datos.
El CP en calidad de subscriber no evalúa el nombre de estación de un publisher.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3391

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Recomendación para la configuración
Dentro de una aplicación en la nube, diferentes publishers pueden publicar datos para varios
subscribers y diferentes subscribers pueden suscribirse a datos de varios publishers. Por lo
general, aunque especialmente en este caso, se recomienda la configuración siguiente:
● Nombre del punto de datos / número de DB
Utilice el número del bloque de datos (DB) al que accede el punto de datos como
componente del nombre del punto de datos.
● Publisher
– Cree un DB independiente para cada posible subscriber en el CP que actúa de publisher.
– Si un CP en calidad de subscriber se suscribe a varios publishers, configure en los
diferentes publishers un número de DB distinto para el DB previsto para cada subscriber.
De este modo se evita que las variables de diferentes publishers tengan el miso nombre
de punto de datos cuando este utiliza el número de DB como componente del nombre.
● Subscriber
Cree un DB independiente para cada publisher en el CP que actúa de subscriber.
Este procedimiento incrementa la claridad a la hora de asignar los datos y reduce la posibilidad
de que se den nombres idénticos.

Transferencia y "QualityCode"
Con los datos de usuario se transfiere también el estado de calidad "QualityCode" de un punto
de datos. El estado indica la validez del valor.
El CP que actúa de publisher establece el estado, que tiene el siguiente rango de valores:
● GOOD
El valor es válido.
● BAD
El valor de la variable no es válido o no es actual. Causas posibles:
– CPU en STOP
– Valor no actual
– Variable no configurada
El valor del estado repercute del siguiente modo en la transferencia:
● Publisher → Nube
La publicación de mensajes del CP en calidad de publisher depende del valor del estado.
● Nube → Subscriber
La recepción de mensajes por parte del CP en calidad de subscriber depende del valor del
estado.
Sin embargo, cuando se recibe un mensaje con el estado "BAD", el valor del CP que actúa
de subscriber no se escribe en la variable DB de la CPU.

3392

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Onboarding en MindConnect IoT Extension
Parámetro Device
Cuando se conecta a Siemens MindSphere ‑ MindConnect IoT Extension, después de que se
establezca la conexión entre el dispositivo y MindConnect IoT Extension, se necesitan dos
parámetros para la identificación del dispositivo en el proceso Onboarding.
● Nombre de Device
El nombre se asigna en el grupo de parámetros "Seguridad > CloudConnect > General" del
CP.
Con este nombre, el CP se registra en el proceso Onboarding.
El nombre de dispositivo aparece en el lugar siguiente de MindConnect IoT Extension:
Device > Device profile > "NAME"
● Tipo de Device
El parámetro no puede configurarse y es fijo, con el string siguiente:
– c8y_MQTTDevice
El parámetro se necesita en MindConnect IoT Extension para determinar el tipo de
dispositivo.
El tipo de dispositivo aparece en el lugar siguiente de MindConnect IoT Extension:
Device > Device profile > "Type"
Encontrará más información sobre cómo crear la IoT Extension en la dirección de Internet:
Link: (https://support.industry.siemens.com/cs/ww/es/ps/15248)

Áreas de operandos y variables
Direccionamiento simbólico de los datos de proceso de la CPU
Los datos de proceso que el CP prepara para los servicios CloudConnect se direccionan
mediante variables en bloques de datos de la CPU.
Para el acceso a los datos de proceso que deben transferirse por la nube hay que crear por lo
menos un DB:
● Bloque de datos
– Cree el bloque como DB global.
– En el cuadro de diálogo de propiedades del DB, active el atributo "DB accesible desde
OPC UA".

Configuración de las variables DB
Para la configuración de las variables DB, recuerde lo siguiente:
● Active la opción "Accesible desde HMI/OPC UA".
● Active la opción "Escribible desde HMI/OPC UA".
Necesario para el acceso de escritura
Encontrará los tipos de datos que pueden utilizarse para la conexión a la nube en el capítulo
Tipos de datos (Página 3395).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3393

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parámetros de los temas o grupos
Configuración de temas o grupos
Configuración con diferentes operadores de la nube
Al seleccionar el operador de la nube se especifica si para la transferencia de datos se
configurarán temas o grupos.
● MindConnect IoT Extension
Es posible crear varios grupos.
Un grupo puede contener varios puntos de datos.
Un grupo equivale a la característica estructural "IoT Extension" en Series. Todos los
grupos se asignan de forma fija al tema estándar "s/us".
● Otra nube
Es posible crear varios temas.
Un tema puede contener varios puntos de datos.

Configuración de los puntos de datos
Insertar puntos de datos en un tema o grupo
Después de crear un tema o grupo, haga clic en la primera fila libre de la tabla (Agregar
variable).
Seleccione la variable DB deseada de un DB de la CPU en el cuadro de diálogo de selección
de objetos. Consulte las variables DB en Áreas de operandos y variables (Página 3393).
La variable DB se incorpora a la tabla como punto de datos, mientras que las propiedades y los
parámetros se muestran debajo.
La tabla lista todos los puntos de datos configurados.

Configurar puntos de datos
● Nombre
Nombre configurado del punto de datos
● Variable
Nombre configurado de la variable DB

3394

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Tipo de datos
Tipo de datos configurado del punto de datos
Consulte los tipos de datos soportados en Tipos de datos (Página 3395).
● Atributo
⇒ Validez: MindConnect IoT Extension
El atributo se incorporará a los datos de usuario como <ADDITIONAL_ATTRIBUTE>;
consulte el capítulo Formato de datos de usuario (Página 3399).
En caso de conexión a IoT Extension, el atributo se interpretará como identificador de las
unidades físicas del punto de datos en cuestión. Las unidades estándar son:
– C = temperatura en grados centígrados
– P = presión en bares
– mm = longitud en milímetros
– km/h = velocidad en km/h
– m/s2 = aceleración en m/s2
– % = tamaño en porcentaje
– %RH = humedad relativa en porcentaje
– A = intensidad en amperios
– V = tensión en voltios
– W = potencia en vatios
– kWh = energía en kilovatios-hora
– VAh = energía aparente en voltamperios-hora
– dBm = nivel de potencia en decibelios-milivatios (relación logarítmica)
– lux = iluminancia en lux (lm/m2)
Es posible que se indiquen otras unidades compuestas del sistema SI como, por ejemplo:
m/h, m/s, m, km, mW, kW, mWh, mA, VArh

Tipos de datos
Tipos de datos soportados
La tabla lista los tipos de datos configurables.
En su caso, compruebe si su broker soporta los tipos de datos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3395

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
<DATAPOINT_TYPE> indica el tipo de datos en el momento de la publicación. Encontrará
información sobre la publicación de datos de usuario y de la variable <DATAPOINT_TYPE> en
el capítulo Formato de datos de usuario (Página 3399).
Tabla 1-174 Tipos de datos que pueden utilizarse para el acceso a la nube
Tipo de datos S7
Tipo (bits)

<DATAPOINT_TYPE>

BOOL (1)

BOOL

BYTE (8)

UINT8

CHAR (8)

CHAR

USINT (8)

UINT8

INT (16)

INT16

UINT (16)

UINT16

WORD (16)

UINT16

REAL (32)

SINGLE_FLOAT

DWORD (32)

UINT32

DINT (32)

INT32

UDINT (32)

UINT32

LREAL (64)

DOUBLE_FLOAT

STRING (2..256) *

S7_STRING *

DATE_AND_TIME (64) *

S7_DT *

DTL (96) *

S7_DTL *

Observaciones
Valores transferidos: 0, 1
Sin WCHAR

Sin WSTRING

* No soporta Siemens MindSphere

Disparo
Disparo
Los disparos definen las condiciones que tienen que cumplirse para que se inicie la
transferencia del valor guardado a la nube o al broker.
En cuanto se cumple la condición de disparo de una variable se transfieren los valores de todos
los puntos de datos de este tema o grupo.

3396

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Para cada variable es posible seleccionar un máximo de dos tipos de disparo:
● Disparo de tiempo
– Cíclico
Transmisión cíclica ‑ configurable en milisegundos
– Hora
Una vez al día / Una vez por semana / Una vez al mes
● Disparo de valor umbral
– Desviación: transferencia en caso de desviación con respecto al último valor guardado
– Valor umbral BAJO: transferencia en caso de rebase por defecto del valor umbral
– Valor umbral ALTO: transferencia en caso de rebase por exceso del valor umbral
– Dentro del rango: transferencia cuando un valor entra en un rango de valores
– Fuera del rango: transferencia cuando un valor sale de un rango de valores
Para cada variable es posible combinar un disparo relacionado con el tiempo y un disparo
relacionado con el valor. Cuando se configuran dos tipos de disparo, ambos tienen los mismo
derechos. En cuanto se cumple una de las dos condiciones de disparo se inicia la transferencia.
No todas las combinaciones de tipos de disparo tienen sentido para todas las variables. Se
soportan las siguientes combinaciones de disparos:
Combinaciones de disparos admisibles
Disparo 1

Disparo 2

Cíclico

Disparo de valor umbral

Hora

‑

Disparo de valor umbral

Cíclico

De los tipos de disparo soportados del tipo de datos correspondiente pueden surgir otras
restricciones; consulte la tabla inferior.

Tipos de disparo
● Cíclico
El valor se transfiere cíclicamente.
● Una vez al día
El valor se transfiere una vez al día a la hora configurada.
● Una vez por semana
El valor se transfiere una vez por semana a la hora configurada.
● Una vez al mes
El valor se transfiere una vez al mes a la hora configurada.
Recuerde:
Si un mes tiene menos días de los indicados en la configuración, el valor no se transfiere.
● Desviación
El valor se transfiere en cuanto se desvía en la cuantía configurada del último valor
guardado en la CPU.
Tenga en cuenta aquí el rango de valores del tipo de datos del punto de datos en cuestión.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3397

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Valor umbral BAJO
El valor se transfiere en cuanto rebasa por defecto el valor configurado.
● Valor umbral ALTO
El valor se transfiere en cuanto rebasa por exceso el valor configurado.
● Dentro del rango
El valor se transfiere en cuanto se encuentra dentro del rango configurado.
● Fuera del rango
El valor se transfiere en cuanto se encuentra fuera del rango configurado.
Los rangos de valores del disparo de valor umbral dependen del tipo de datos del punto de
datos.

Tipos de datos y de disparo
No todos los tipos de datos soportan todos los tipos de disparo. La tabla lista los tipos de datos
configurables e indica los tipos de disparo soportados para cada tipo de datos.
● Se soportan los tipos de disparo marcados con "x".
● Los tipos de disparo marcados con "‑" no se soportan.
Tabla 1-175 Disparos soportados por los tipos de datos
Tipo de datos S7
Tipo (bits)

3398

Disparos soportados
Disparo de tiempo

Disparo de valor umbral

BOOL (1)

x

x (solo valor 0)

BYTE (8)

x

x

CHAR (8)

x

x

USINT (8)

x

x

INT (16)

x

x

UINT (16)

x

x

WORD (16)

x

x

REAL (32)

x

x

DWORD (32)

x

x

DINT (32)

x

x

UDINT (32)

x

x

LREAL (64)

x

x

STRING (1..254)

x

‑

DATE_AND_TIME (64)

x

‑

DTL (96)

x

‑

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Rangos de valores de tipos de datos para disparo de valor umbral
Rangos de valores de los tipos de datos
Para los tipos de disparo "Desviación", "Valor umbral BAJO", "Valor umbral ALTO", "Dentro del
rango" y "Fuera del rango" se configuran valores umbral.
Los tipos de datos adecuados para disparos de valor umbral tienen los siguientes rangos de
valores:
● Bool: 0 / 1
● Byte: 0...255 / -128...+127
● Char: 0...255
● USInt: 0...255
● Int: -32768...+32767
● UInt: 0...65535
● Word: -32768...+32767 / 0...65535
● DInt: -2147483648...+2147483647
● UDInt: 0...4294967295
● DWord: -2147483647...+2147483647 / 0...4294967295
● Real: +1.175495e-38...+3.402823e+38
● LReal: +12.2250738585072014e-308...+1.7976931348623157e+308

Rangos de valores de módulos de entradas analógicas S7
Con un entero positivo (Int: 0...32767), 270 equivale aprox. al 1 % del valor bruto de un módulo
de entradas analógicas S7 (27648 = 100 %).

Formato de datos de usuario
Formato de datos de usuario
Los diferentes sistemas en la nube utilizan formatos distintos para los datos de usuario. En
función del "operador de la nube" configurado, los datos de usuario se emiten en los formatos
siguientes:
● MindConnect IoT Extension
Formato para la conexión a MindSphere (Siemens) / IoT Extension
● JSON
Formato para la conexión a Otra nube
El CP utiliza la codificación de caracteres UTF-8 para formatear los datos de usuario.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3399

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Formato de datos de usuario ‑ MindConnect IoT Extension
Las diferentes claves del mensaje se transfieren en formato CSV.
200,<DATAPOINT_NAME>,<GROUP>,<DATAPOINT_VALUE>,<ADDITIONAL_ATTRIBUTE
>,
<DATAPOINT_QUALITY_CODE>

Formato de datos de usuario ‑ JSON (Otra nube)
Los mensajes relacionados con los diferentes valores de puntos de datos se transfieren como
objeto JSON. La clave "DataItems" tiene como valor un array con el correspondiente número
de objetos.
{
"Timestamp": "<PUBLISH_TIMESTAMP>",
"DataItems":
[
{
"Station": "<STATION_NAME>",
"Variable": "<DATAPOINT_NAME>",
"Type": "<DATAPOINT_TYPE>"
"Value": "<DATAPOINT_VALUE>",
"QualityCode": "<DATAPOINT_QUALITY_CODE>"
}
]
}

Código: sintaxis y significado
Descripción de la sintaxis
La descripción de las diferentes claves se estructura del siguiente modo:
● Nombre
<sintaxis>
Significado
Clave del código
El código de los datos de usuario formateados puede contener las claves siguientes, en
función del formato.
● Sello de tiempo
<PUBLISH_TIMESTAMP>
Significado: momento de la publicación
Ejemplo:
Sintaxis: <PUBLISH_TIMESTAMP>
Da la cadena de caracteres, p. ej.: 2018-08-20T13:58:16.192313634+00:00
● Código de función 200
<200>
Código de función solo para MindConnect IoT Extension

3400

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Estación
<STATION_NAME>
Nombre de estación del punto de datos
Configuración solo en el publisher
● Variable
<DATAPOINT_NAME>
Nombre del punto de datos
Para la configuración de los nombres de puntos de datos tenga en cuenta las indicaciones
sobre configuración coherente en el publisher y el subscriber que aparecen en el
capítulo Sinopsis de la configuración (Página 3390).
● Grupo
<GROUP>
Nombre del grupo
● Tipo de datos
<DATAPOINT_TYPE>
Tipo de datos emitido por el dispositivo para el punto de datos
Consulte la salida de los tipos de datos en el capítulo Áreas de operandos y variables
(Página 3393).
● Valor
<DATAPOINT_VALUE>
Valor del punto de datos
● QualityCode
<DATAPOINT_QUALITY_CODE>
Estado de calidad del valor. Rango de valores:
– GOOD
– BAD
Consulte el significado en el capítulo Sinopsis de la configuración (Página 3390).
● Atributo
<ADDITIONAL_ATTRIBUTE>
Atributo (MindConnect IoT Extension)
Consulte el significado en el capítulo Configuración de los puntos de datos (Página 3394).

Ejemplo de datos de usuario transferidos (JSON)
A continuación encontrará un ejemplo de los datos de usuario transferidos de un tema en
sintaxis JSON.
El tema de la estación S7 "PLC_1" contiene tres variables para los puntos de datos "DP1",
"DP2" y "DP3".
El valor de la clave "DataItems" es un array con los objetos de las tres variables.
{
"Timestamp":"2019-05-03T09:13:46.000000000+00:00",
"DataItems":
[
{
"Station":"PLC_1",
"Variable":"DP1",

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3401

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
"Type":"BOOL"
"Value":"0",
"QualityCode":"GOOD"
},
{
"Station":"PLC_1",
"Variable":"DP2",
"Type":"DOUBLE_FLOAT"
"Value":"0.496043966059748",
"QualityCode":"GOOD"
},
{
"Station":"PLC_1",
"Variable":"DP3",
"Type":"S7_STRING"
"Value":"Abcd99vE",
"QualityCode":"GOOD"
}
]
}

3402

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Cuadro de diálogo de propiedades del tema
Quality of Service (QoS)
Propiedades de un tema ‑ Quality of Service (QoS)
El parámetro es accesible cuando en el área de navegación se despliega el CP debajo de los
módulos locales y se abre el cuadro de diálogo de propiedades de un tema desde el menú
contextual.
● Quality of Service (QoS) exigido
Aquí se define el método de transferencia deseado (Quality of Service) para este tema.
El valor configurado se transmite al interlocutor de la comunicación como exigencia. Si un
broker no cumple el nivel QoS exigido, en la mayoría de los casos elije el nivel que más se
acerca al exigido.
– QoS 0
Transferencia una vez como máximo
El CP envía el tema una vez al broker. El CP no espera ningún acuse.
Si el broker no recibe el tema, se ha perdido.
– QoS 1
Transferencia una vez como mínimo
El CP envía el tema al broker tantas veces como sea necesario hasta que recibe un
paquete PUBACK del broker como acuse de recibo.
– QoS 2
Transferencia exactamente una vez
El CP envía el tema al broker y espera hasta que recibe el acuse de dos niveles del
broker de acuerdo con la especificación.
Esta variante representa el nivel de calidad más alto, pero también supone el esfuerzo
de administración máximo tanto en el cliente como en el servidor.

OPC UA PubSub
Comunicación OPC UA PubSub
Validez
Validez del capítulo:
Descripción general del modelo de comunicación; sin referencia al dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3403

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

El modelo de comunicación OPC UA PubSub
El modelo de comunicación PubSub es la comunicación basada en publisher y subscriber de
acuerdo con la OPC UA Specification Part 14. Al contrario que en la relación de comunicación
fija del modelo cliente-servidor, las relaciones en los sistemas publisher-subscriber son más
flexibles:
● Publisher
Un Publisher no envía directamente a un receptor, sino que publica sus datos.
En OPC UA PubSub, los publishers publican sus datos como "juegos de datos publicados"
junto con los correspondientes metadatos.
● Subscriber
Uno o varios subscribers pueden suscribirse para los datos de los publishers.
En OPC UA PubSub, los subscribers leen los datos publicados por los publishers como
"juegos de datos suscritos".
En función del protocolo de transporte utilizado, la comunicación entre publishers y
subscribers puede llevarse a cabo directamente o bien a través de instancias intermedias. Esto
resulta en dos modelos de comunicación ligeramente diferenciados:
● Comunicación sin broker
Los datos publicados se registran y envían en el propio publisher.
Los subscribers se suscriben directamente a los datos publicados en el publisher.
El protocolo de transporte utilizado es, por ejemplo, UDP, que emplea direcciones Multicast
para el direccionamiento.
● Comunicación basada en broker
Los datos publicados por los publishers se envían a un broker que los almacena de forma
intermedia.
Los subscribers se suscriben al broker para leer los datos publicados.
Los protocolos utilizados pueden ser, por ejemplo, MQTT o AMQP.

Componentes de la comunicación OPC UA PubSub
La figura siguiente muestra algunos de los componentes básicos del modelo de comunicación.
&RQH[LµQ3XE6XE
3XEOLVKHU

7HOHJUDPDHQODFDSDGHWUDQVSRUWH

6XEVFULEHU

1HWZRUN0HVVDJH
(QFDEH]DGR

0HQVDMHGHUHG

:ULWHU*URXS
(QFDEH]DGR

'DWD6HW
0HVVDJH

'DWD6HW:ULWHU

3404

5HDGHU*URXS

'DWD6HW5HDGHU

3XEOLVKHG'DWD6HW
'DWD6HW
FROOHFWLRQ

3LHGHS£JLQD
\ILUPD

6XEVFULEHG'DWD6HW
-XHJRGHGDWRV

'DWD6HW
GLVSDWFKLQJ

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Figura 1-147

Componentes del modelo de comunicación OPC UA PubSub

Los principales componentes del modelo de comunicación PubSub son:
● Publisher
El publisher agrupa en varios pasos los datos que deben enviarse para formar un mensaje
de red.
● PublishedDataSet
Uno o varios datos de proceso (DataSet collection) se agrupan en un juego de datos
publicado con el siguiente contenido:
– Variables
– Metadatos correspondientes
● DataSetWriter
A partir del PublishedDataSet genera un DataSetMessage.
En este paso se define, entre otros, el formato del mensaje (message mapping) "UADP"
(UA Datagram Protocol).
● DataSetMessage
Tiene el siguiente contenido:
– Uno o varios juegos de datos
– Encabezado con metadatos
● WriterGroup
A partir del DataSetMessage genera un mensaje de red.
En este paso se definen otros parámetros para el formato del mensaje (message mapping).
● Mensaje de red
Unidad de transferencia con el siguiente contenido:
– Encabezado, que consta de varias partes.
– Uno o varios DataSetMessages
– Un Security Footer (opcional) y una firma (opcional)
● Telegrama en la capa de transporte
– Encabezado con los datos del perfil de transporte, entre otros.
– Un mensaje de red
● Conexión PubSub
A través de la conexión, los telegramas del publisher se transfieren al subscriber. Los
parámetros importantes son la dirección, la ID de publisher o la URI del perfil de transporte.
● Subscriber
El subscriber se suscribe a uno o varios juegos de datos, los recibe en forma de mensaje
de red, los descomprime en varios pasos y distribuye los juegos de datos.
● ReaderGroup
Administra una lista de DataSetReaders con ajustes comunes.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3405

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● DataSetReader
Recibe los DataSetMessages del mensaje de red y los descifra. Los parámetros cifrados
por el Publisher se evalúan.
● SubscribedDataSet
El contenido del juego de datos recibido se asigna a las variables del subscriber.

Comunicación OPC UA y OPC UA PubSub del CP 1545-1
Validez
Validez del capítulo:
● CP 1545‑1 (6GK7 545‑1GX...)

Comunicación OPC UA del CP
El CP soporta la función de un servidor OPC UA.
En calidad de servidor OPC UA, el CP soporta los mecanismos de seguridad OPC UA.

Comunicación OPC UA PubSub del CP
El CP soporta la comunicación sin broker con las siguientes funciones:
● Función de comunicación:
– OPC UA PubSub vía UDP
● Mapeados:
– UDP transport protocol mapping
– UADP message mapping
El formato de mensaje (message mapping) utilizado por el CP es "UADP" (UA Datagram
Protocol). Encontrará los perfiles soportados conforme a OPC Foundation en el
capítulo OPC UA Profiles (Página 3415).
En calidad de Publisher y Subscriber no se soportan los mecanismos de seguridad OPC UA.

Interlocutor para la comunicación PubSub
Los productos siguientes pueden utilizarse como interlocutores de la comunicación para la
comunicación OPC UA PubSub:
● CP 1545‑1
(OPC UA PubSub vía UDP)
● Dispositivos de terceros con ajustes compatibles
Consulte a este respecto el capítulo AUTOHOTSPOT.

Funcionalidad PubSub del CP
El CP soporta las funciones "Publisher" y "Subscriber".

3406

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Los componentes del mensaje de red tienen la siguiente asignación fija 1:1:1:1 en el CP:
● Publisher
1 Juego de datos publicado ‑ 1 DataSetWriter ‑ 1 WriterGroup ‑ 1 Conexión PubSub
● Subscriber
1 Juego de datos suscrito ‑ 1 DataSetReader ‑ 1 ReaderGroup ‑ 1 Conexión PubSub
La figura muestra esta asignación 1:1:1:1.
3XEOLVKHU
&3

&RQH[LµQ3XE6XE
WHOHJUDPDHQODFDSDGHWUDQVSRUWH
8$'3
1HWZRUN0HVVDJH

6XEVFULEHU
&3

PHQVDMHGHUHG
5HDGHU*URXS

:ULWHU*URXS
'DWD6HW
0HVVDJH

'DWD6HW:ULWHU

3XEOLVKHG'DWD6HW

6XEVFULEHG'DWD6HW
MXHJRGHGDWRV

9DULDEOHV

&38
Figura 1-148

'DWD6HW5HDGHU

'DWD6HW
GLVSDWFKLQJ

&38
Comunicación OPC UA PubSub del CP 1545‑1

La implementación PubSub en otros productos SIMATIC NET puede variar de lo explicado
aquí.

Resumen de la configuración PubSub del CP
La configuración de la estación S7 y sus módulos es un requisito previo imprescindible y no se
trata aquí.
Para la configuración OPC UA PubSub del CP proceda del siguiente modo:
1. Cree las variables necesarias en un bloque de datos de la CPU local para el acceso de la
aplicación OPC UA a la memoria imagen de proceso. Esto sirve tanto si el CP es publisher
como si es subscriber.
Se admiten:
– Variables DB (preferentes)
– Variables PLC
2. En los ajustes globales de seguridad debe crearse por lo menos un usuario con la función
"NET Administrator".
3. Active en el CP las funciones de seguridad y la opción "Activar OPC UA PubSub".
4. Ante todo, configure para el CP los grupos de parámetros de "Seguridad > OPC UA" en la
ventana de inspección.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3407

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
5. Seguidamente, despliegue el árbol del proyecto:
> Estación > Módulos locales > CP 1545-1 > OPC UA PubSub
– Despliegue la entrada "Juegos de datos publicados" o "Juegos de datos suscritos".
– Haga clic en "Agregar juego de datos".
6. Configure el correspondiente juego de datos.
Abra un juego de datos existente para modificar la configuración haciendo doble clic en la
entrada del árbol del proyecto. Todas las propiedades del juego de datos, incluidas las
variables, están disponibles en la ventana de inspección.
Recuerde:
con el comando "Propiedades" del menú contextual del juego de datos en el árbol del
proyecto puede abrirse el cuadro de diálogo de propiedades del juego de datos. Sin
embargo, aquí no están disponibles las variables para la configuración.
7. Configure las variables de los juegos de datos.
– Juegos de datos publicados:
Inserte variables en los juegos de datos.
Las variables de los juegos de datos publicados de los publishers acceden a variables
de la CPU local; consulte el capítulo Acceso a datos de proceso de la CPU
(Página 3410).
– Juegos de datos suscritos:
La información de variables de los juegos de datos suscritos de los subscribers son
importados por otros dispositivos del proyecto STEP 7 o mediante archivos de
configuración de dispositivos de terceros; consulte el capítulo Importación a juegos de
datos suscritos (Página 3412).
8. Guarde y compile las estaciones.

Componentes PubSub y reglas de configuración
La lista siguiente describe algunos componentes de la comunicación PubSub y de las
correspondientes reglas de configuración.
Nota
Coherencia de la configuración
Para algunas reglas de configuración, STEP 7 realiza comprobaciones de coherencia.
Para algunos parámetros se permiten combinaciones distintas. Compruebe usted mismo la
coherencia de la configuración siguiendo las reglas de configuración que se describen a
continuación.
● Conexión PubSub
Las conexiones PubSub no se crean con un editor especial. Se configuran en los juegos de
datos utilizando la dirección UDP Multicast y los demás parámetros del juego de datos.
● Juego de datos publicado
Los juegos de datos publicados de los publishers contienen parámetros y variables.
Los datos publicados de las variables se leen de la CPU local.

3408

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Juego de datos suscrito
Los juegos de datos suscritos de los subscribers contienen parámetros y variables. Los
datos de configuración de los parámetros y las variables son importados por otros
dispositivos del proyecto STEP 7 o por dispositivos ajenos al proyecto.
Los datos suscritos se escriben en variables de la CPU local.
● DataSetWriterId
La DataSetWriterId identifica un DataSetWriter y el correspondiente juego de datos
publicado (asignación fija de DataSetWriter y juego de datos publicado).
– Dentro de un publisher, la DataSetWriterId debe ser unívoca.
– La combinación de PublisherId y DataSetWriterId debe ser unívoca dentro del dominio
OPC.
● WriterGroup / ReaderGroup
Algunos parámetros del WriterGroup y del ReaderGroup pueden configurarse.
Las máscaras pertinentes, en cambio, no pueden configurarse libremente, sino que están
preasignadas; consulte el capítulo Content Masks (Página 3416).
Al realizar la importación de los datos de configuración en juegos de datos suscritos, los
datos de configuración del interlocutor de la comunicación deben corresponderse con la
asignación prescrita de las máscaras.
● WriterGroupId
PublisherId y WriterGroupId identifican un mensaje de red.
La WriterGroupId identifica un WriterGroup. La WriterGroupId tiene el ajuste
predeterminado "1" y debe ser ≥ 1.
– Dentro de un publisher, la WriterGroupId de cada WriterGroup debe ser unívoca.
– La combinación de PublisherId y WriterGroupId debe ser unívoca dentro del dominio
OPC.
● PublisherId
PublisherId y WriterGroupId identifican un mensaje de red.
La PublisherId identifica un publisher. La PublisherId se configura en el juego de datos
publicado y se preasigna en orden ascendente empezando por "1".
Es posible configurar una PublisherId por juego de datos publicado, por WriterGroup, por
CP y para una o varias estaciones.
– Para cada WriterGroup, la PublisherId debe ser unívoca. STEP 7 no comprueba la
coherencia.
– La combinación de PublisherId y WriterGroupId debe ser unívoca dentro del dominio
OPC.
Encontrará información complementaria sobre los parámetros en las ayudas correspondientes
y en los capítulos siguientes.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3409

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Acceso a datos de proceso de la CPU
Direccionamiento simbólico de los datos de proceso de la CPU
Los datos de proceso que el CP prepara para los servicios OPC UA se referencian mediante
variables en la CPU.
ADVERTENCIA
Escribir valores en salidas
● Variables PLC
A la hora de referenciar variables PLC, tenga en cuenta que con un acceso de escritura los
valores es escriben inmediatamente en las salidas de la CPU sin que el programa de
usuario los procese previamente.
La escritura de valores influye de forma directa en el proceso.
● Variables DB
A la hora de referenciar variables DB, los valores escritos no se utilizan hasta que los ha
procesado el programa de usuario.
Para el acceso a los datos de proceso que deben transferirse por medio de servicios OPC UA
hay que crear las variables:
● Tabla de variables PLC
● Bloque de datos
– Cree por lo menos un DB.
Cree el bloque como DB global.
– En el cuadro de diálogo de propiedades del DB, active el atributo "DB accesible desde
OPC UA".

Configuración de las variables DB y PLC
Para que puedan ser utilizadas por los servicios OPC UA, las variables de la CPU deben estar
marcadas del siguiente modo (opciones activadas):
● "Accesible desde HMI/OPC UA"
● "Escribible desde HMI/OPC UA"
Necesario para el acceso de escritura
Encontrará los tipos de datos soportados en el capítulo Tipos de datos para OPC UA PubSub
(Página 3411).

Componentes del nombre de la NodeId
Durante la configuración, recuerde que los nombres siguientes se insertan en la NodeId de una
variable como componente del identificador:
● Nombre de la CPU
● Nombre de la variable DB

3410

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Tipos de datos para OPC UA PubSub
Tipos de datos y áreas de memoria
El CP soporta los tipos de datos indicados a continuación para OPC UA PubSub.
Las variables PLC correspondientes de la CPU se permiten para las áreas de operandos
indicadas en cada caso. Las áreas de memoria tienen las abreviaturas siguientes (nemónica
internacional):
● I = memoria imagen de proceso de las entradas
● Q= memoria imagen de proceso de las salidas
● M = marcas
● DB = bloque de datos
Tabla 1-176 Tipos de datos
Tamaño
[bit], tipo

Rango de valores

1

0/1

Tipo de datos
SIMATIC S7

OPC UA

BOOL

Boolean

Observación

Área de operan‐
dos de la CPU

0 = false

I, Q, M, DB

1 = true
8, UInt8

0 .. 255

BYTE

Byte

8, UInt8

0 .. 255

CHAR

Byte

8, UInt8

0 .. 255

I, Q, M, DB
Caracteres ASCII 32 .. 255, sin
WCHAR

I, Q, M, DB

USINT

Byte

I, Q, M, DB

16, UInt16 0 .. 65535

WORD

UInt16

I, Q, M, DB

16, Int16

INT

Int16

I, Q, M, DB

-32768 .. 32767

32, UInt32 0 .. 4294967295

DWORD

UInt32

I, Q, M, DB

32, Int32

DINT

Int32

I, Q, M, DB

32, UInt32 0 .. 4294967295

UDINT

DInt32

I, Q, M, DB

32, Float

±1.175 495e-38 ..
3.402823e+38

REAL

Float

DB

64, Float

+2.225073858507201
4e-308 ..
+1.797693134862315
8e+308

LREAL

Double

DB

2147483648 ..
2147483647

Encontrará la descripción de la codificación de los tipos de datos en la Ayuda en pantalla de
STEP 7.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3411

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Importación y exportación de juegos de datos
Exportación desde juegos de datos publicados
Exportación de datos del Publisher desde juegos de datos publicados
Si para un CP se han creado y configurado juegos de datos publicados, los datos pueden
ponerse a disposición de otros subscribers para su importación en forma de archivo binario.
Otros subscribers pueden importar los datos a juegos de datos suscritos; consulte el capítulo
Importación a juegos de datos suscritos (Página 3412).
Requisitos para la exportación
● Los juegos de datos publicados están configurados y son coherentes.
● La estación S7 está compilada por completo.
Procedimiento
1. Cree un juego de datos publicado y configúrelo.
Consulte a este respecto el capítulo Comunicación OPC UA y OPC UA PubSub del CP
1545-1 (Página 3406).
2. Compile la estación.
3. En el árbol del proyecto seleccione:
Estación > Módulos locales > CP > OPC UA PubSub > Juegos de datos publicados
4. Seleccione el comando "Exportar configuración del publisher" del menú contextual.
Se exportan los datos de todos los juegos de datos publicados del CP.
5. Guarde el archivo en el directorio de archivos de la estación de ingeniería.
El formato de archivo predeterminado "*.PubCfg" que se utiliza para importar de o a
proyectos STEP 7 (opcional) puede modificarse.

Importación a juegos de datos suscritos
Importación de datos del Publisher a juegos de datos suscritos
Los juegos de datos suscritos se crean como juegos de datos publicados.
Sin embargo, para juegos de datos suscritos se configuran menos parámetros y no se
configuran puntos de datos.
Por motivos de coherencia, en los juegos de datos suscritos solo se utilizan datos de
interlocutores previamente configurados (publisher) importándolos al juego de datos
correspondiente del CP. Los interlocutores (publisher) del CP cuyos datos deben importarse
pueden ser dispositivos del proyecto STEP 7 o bien dispositivos de terceros de fuera del
proyecto STEP 7.
Para la importación, en el editor hay varios botones para diferentes vías de importación
disponibles para juegos de datos suscritos.

3412

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Botones de importación
● Actualizar juego de datos
Repite una importación realizada previamente que se llevó a cabo utilizando la función
"Importar del proyecto". Los del juego de datos suscrito se sobrescriben con los datos
importados al realizar la actualización.
Esta función es de ayuda cuando se realizan cambios en el juego de datos suscrito del
publisher después de que el subscriber ya se haya suscrito a este juego de datos mediante
una importación.
● Examinar
Examina un servidor de la red para buscar información del Publisher.
Este método recurre a las funciones online de STEP 7.
Debe disponer de los datos de dirección y, posiblemente, de autenticación de un servidor
OPC conectado.
● Importar del proyecto
Importa los datos de 1 solo juego de datos de otro dispositivo del proyecto STEP 7.
● Importar desde archivo
Importa los datos de 1 solo juego de datos desde un archivo binario que está almacenado
en el sistema de archivos de la estación de ingeniería.
El formato de archivo predeterminado "*.PubCfg" que se utiliza para importar de o a
proyectos STEP 7 (opcional) puede modificarse.
El archivo puede provenir de un dispositivo situado fuera del proyecto STEP 7.

Importar datos
Para la importación proceda del siguiente modo:
1. Cree un juego de datos suscrito.
En caso necesario, cambie el nombre.
2. Haga clic en uno de los botones de importación.
Se abre un cuadro de diálogo para seleccionar los datos.
3. Seleccione los datos que desee.
– Importar del proyecto
Seleccione el dispositivo y el juego de datos en un cuadro de diálogo.
– Importar desde archivo
Después de seleccionar el archivo, elija el juego de datos que desee del archivo en el
cuadro de diálogo siguiente.
4. Si la importación se realiza correctamente, asigne las variables importadas a las variables
DB de la CPU.
Si se produjeran errores o incoherencias, se mostrarán. Encontrará los tipos de datos
soportados por el CP en el capítulo Tipos de datos para OPC UA PubSub (Página 3411).
Si todavía no ha creado variables en la CPU, puede realizar la asignación más adelante.
5. Finalmente, complete la configuración del juego de datos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3413

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Requisitos para datos importados
Para importar información del Publisher del interlocutor de la comunicación deben cumplirse
los siguientes requisitos:
● La configuración del juego de datos del interlocutor es coherente.
● El archivo tiene una estructura conforme a OPC UA Specification, Part 14,
"PubSubConfigurationDataType Structure".
● Configuración compatible del juego de datos del interlocutor
Los parámetros indicados a continuación deben estar configurados en el juego de datos
importado con los valores requeridos; consulte la tabla.
Si el juego de datos que debe importarse no cumple estos requisitos, la importación se
cancelará.
Tabla 1-177 Configuración requerida de un juego de datos importado
Parámetro

Valor necesario

Diseño del encabezado

"PubSub Publisher UADP CyclicFixed Settings"
Para "Core 2017 Server Facet" Profile consulte OPC UA Profiles
(Página 3415).

NetworkMessageContentMask

= 0x3F

DataSetMessageContentMask

= 0x24

DataSetFieldContentMask

= 0x20

Véase Content Masks (Página 3416)
Véase Content Masks (Página 3416)
Véase Content Masks (Página 3416)
DatasetOffset >= 28

≥ 28

ConfiguredSize

≥5

DatasetOrdering

=1

NetworkMessageNumber

=1

KeyFrameCount

=1

structureDataTypes

null

enumDataTypes

null

simpleDataTypes

null

Información sobre los parámetros
Formación de nombres de parámetros
Formación de nombres de funciones
Algunos nombres de funciones como, por ejemplo, los nombres de conexiones, se forman a
partir del nombre del juego de datos correspondiente y de un sufijo. Cada vez que se crea una
conexión nueva se adjunta al nombre un sufijo correlativo.
Si no se modifican los nombres, la coherencia está garantizada.
Si se modifican los nombres, habrá que asegurarse de que sean unívocos.

3414

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Nombres formados automáticamente
En STEP 7, los nombres de las funciones siguientes se derivan automáticamente del nombre
del juego de datos:
● Conexión
● WriterGroup
● DatasetWriter
● ReaderGroup
● DatasetReader

OPC UA Profiles
Perfiles de la OPC Foundation en Internet
Los perfiles de la OPC Foundation están disponibles en la siguiente página de Internet:
Profiles (https://apps.opcfoundation.org/ProfileReporting)

Perfil de servidor del CP ‑ formato de mensajes de publishers ajenos
El CP utiliza el siguiente perfil de servidor.
Por consiguiente, el encabezado de protocolo de los mensajes de red utilizados por publishers
ajenos también deben seguir la estructura siguiente. Esto se comprueba al importar archivos
binarios en el editor "Juego de datos suscrito".
Perfil de servidor:
● "Core 2017 Server Facet" Profile
Navegue por la página web hasta:
Server Category > Facets > Core Characteristics > Core 2017 Server Facet
Active la opción "Show all existing conformance units".
Navegue hasta:
Conformance Unit "PubSub General" > Name "PubSub Publisher UADP CyclicFixed
Settings"
– URI:
http://opcfoundation.org/UA/PubSub-Layouts/UADP-Cyclic-Fixed
Significado:
Publisher supports encoding NetworkMessages and DataSetMessages with the UADP
Header Layout for periodic data with fixed structure.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3415

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Funciones de comunicación PubSub y perfiles de transporte
CP 1545‑1 (6GK7 545‑1GX00‑...)
● PubSub UDP UADP
Función de comunicación "OPC UA PubSub vía UDP"
– Formato (mappings):
UDP transport protocol mapping + UADP message mapping
– Protocolo de transporte:
Navegue por la página web hasta:
Transport Category > Facets > PubSub > PubSub UDP UADP
URI:
http://opcfoundation.org/UA-Profile/Transport/pubsub-udp-uadp

Content Masks
Las tablas describen el contenido de las máscaras que se muestran en los grupos de
parámetros de los juegos de datos del CP. La explicación se corresponde con el texto original
de la especificación.
Los diferentes bits tienen una asignación fija en el CP.

NetworkMessageContentMask
Define los campos del encabezado de un mensaje de red.
Asignación de bits (hex) de la máscara: 0x3F
Parámetro

3416

N.º de Explicación
bit

Asignación

PublisherId

0

The PublisherId is included in the NetworkMessages.

1

GroupHeader

1

The GroupHeader is included in the NetworkMessages.

1

WriterGroupId

2

The WriterGroupId field is included in the GroupHeader.
The flag is only valid if Bit 1 is set.

1

GroupVersion

3

The GroupVersion field is included in the GroupHeader.
The flag is only valid if Bit 1 is set.

1

NetworkMessage
Number

4

The NetworkMessageNumber field is included in the
GroupHeader.
The field is required if more than one NetworkMessage is
needed to transfer all DataSets of the group.
The flag is only valid if Bit 1 is set.

1

SequenceNumber

5

The SequenceNumber field is included in the GroupHea‐
der.
The flag is only valid if Bit 1 is set.

1

PayloadHeader

6

The PayloadHeader is included in the NetworkMessages.

0

Timestamp

7

The sender timestamp is included in the NetworkMessa‐
ges.

0

PicoSeconds

8

The sender PicoSeconds portion of the timestamp is in‐
cluded in the NetworkMessages.

0

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

N.º de Explicación
bit

Asignación

DataSetClassId

9

The DataSetClassId is included in the NetworkMessages.

0

PromotedFields

10

The PromotedFields are included in the NetworkMessa‐
ges.

0

DataSetMessageContentMask
Describe el contenido del encabezado de DataSetMessage.
Asignación de bits (hex) de la máscara: 0x24
Parámetro

N.º de Explicación
bit

Asignación

TimeStamp

0

If this flag is set, a timestamp shall be included in the Da‐
taSetMessage header.

0

PicoSeconds

1

If this flag is set, a PicoSeconds timestamp field shall be
included in the DataSetMessage header. This flag is ig‐
nored if the HeaderTimestamp flag is not set.

0

Status

2

If this flag is set, the DataSetMessage status is included in
the DataSetMessage header.

1

MajorVersion

3

If this flag is set, the ConfigurationVersion.MajorVersion is
included in the DataSetMessage header.

0

MinorVersion

4

If this flag is set, the ConfigurationVersion.MinorVersion is
included in the DataSetMessage header.

0

SequenceNumber

5

If this flag is set, the DataSetMessageSequenceNumber
is included in the DataSetMessage header.

1

DataSetFieldContentMask
Describe la forma en que se descifran los elementos de datos de un DataSetMessage del
subscriber:
● Como RawData
● Como Variant
● Como DataValue
Con el tipo "DataValue" es posible suministrar información adicional a los elementos de
datos (bits 0..4).
Asignación de bits (hex) de la máscara: 0x20
Puesto que el publisher del CP utiliza el encabezado "UADP CyclicFixed" para cifrar los
DataSetMessages y los NetworkMessages, el bit 5 (RawData) está activado. Todos los

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3417

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
campos de DataSetMessage se interpretan como datos sin formato (estructura) y los bits 0..4
se ignoran.
Parámetro

N.º de Explicación
bit

Asignación

StatusCode

0

The DataValue structure field StatusCode is included in
the DataSetMessages.
If this flag is set, the fields are represented as DataValue.

0

SourceTimestamp

1

The DataValue structure field SourceTimestamp is inclu‐
ded in the DataSetMessages.
If this flag is set, the fields are represented as DataValue.

0

ServerTimestamp

2

The DataValue structure field ServerTimestamp is inclu‐
ded in the DataSetMessages.

0

If this flag is set, the fields are represented as DataValue.
SourcePicoSe‐
conds

3

The DataValue structure field SourcePicoSeconds is in‐
cluded in the DataSetMessages.
If this flag is set, the fields are represented as DataValue.
This flag is ignored if the SourceTimestamp flag is not set.

0

ServerPicoSe‐
conds

4

The DataValue structure field ServerPicoSeconds is in‐
cluded in the DataSetMessages.
If this flag is set, the fields are represented as DataValue.
This flag is ignored if the ServerTimestamp flag is not set.

0

RawData

5

If this flag is set, the values of the DataSet are encoded as
Structure (RawData) and all other field related flags shall
be ignored.
The RawData representation is handled like a Structure
DataType where the DataSet fields are handled like Struc‐
ture fields and fields with Structure DataType are handled
like nested structures. All restrictions for the encoding of
Structure DataTypes also apply to the RawData Field En‐
coding. Fields shall not have an abstract DataType or
shall have a fixed ValueRank. Fields shall have dimen‐
sions defined if the DataType is String or ByteString or if it
is an array. This includes Structure fields with such fields.
The flag shall be ignored and the fields shall be represen‐
ted as Variant if the fields do not fulfil these requirements.

1

Información relacionada
Caracteres permitidos
Caracteres no permitidos
● 0x22 (")
Las comillas no se permiten en principio.
● 0x20 (SP)
Los espacios solo están permitidos dentro del nombre. Los espacios en blanco al principio
y al final se borran automáticamente.

3418

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Caracteres permitidos
Consulte más adelante los juegos de caracteres ASCII.
Parámetro

Caracteres permitidos

Nombre de:

● Caracteres estándar (números y letras)

● Variable DB *

● Caracteres especiales 0x21 .. 0x7E
● Caracteres especiales ≥ 0x80

CloudConnect * ‑ Nombre de:

● Caracteres estándar (números y letras)

● Punto de datos

● Caracteres especiales 0x21 .. 0x7E con excepciones

● Tema / Grupo

–

No se permiten: * : < > ? \ |

● Caracteres especiales ≥ 0x80
OPC UA PubSub ‑ Nombre de:

● Caracteres estándar (números y letras)

● Punto de datos

● Caracteres especiales 0x21 .. 0x7E con excepciones

● Variable

–

No se permiten: * / : < > ? \ |

● Juego de datos

● Caracteres especiales ≥ 0x80

Nombre de:

Caracteres para nombres DNS según RFC1035 y RFC1123:

● Servidor NTP

● Caracteres estándar (números y letras)
En nombres de estación no puede haber cifras solas

● Host
● Estación S7

● 0x2D ( - ) .. 0x2E ( . )

Nombre de aplicación OPC UA

● Caracteres estándar (números y letras)
● Los caracteres especiales siguientes: + - , : . ( ) = ’ @ ; $
_!*

Nombres de usuario, contraseñas

● Caracteres estándar (números y letras)
● Los caracteres especiales siguientes:
–

0x2D ( - )

–

0x2E ( . )

–

0x40 ( @ )

–

0x5F ( _ )

* Mensajes en la nube en formato JSON: para caracteres especiales en nombres de estaciones, temas
y puntos de datos se aplican las secuencias Escape del estándar JSON.

Juegos de caracteres ASCII
Los caracteres ASCII se indican junto con el código hexadecimal y los caracteres
correspondientes.
Caracteres estándar
● 0x30 .. 0x39
0123456789
● 0x41 .. 0x5A
A B C D E F G H I J KL M N O P Q R S T U V W X Y Z
● 0x61 .. 0x7A
abcdefghijklmnopqrstuvwxyz

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3419

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Caracteres especiales < 0x80
● 0x21 .. 0x2F
!"#$%&'()*+,-./
● 0x3A .. 0x40
:;<=>?@
● 0x5B .. 0x60
[\]^_`
● 0x7B .. 0x7E
{|}~
Caracteres especiales ≥ 0x80 (ISO/IEC 8859‑1)
● 0x80, 0x82 .. 0x89, 0x8A .. 0x8C, 0x8E, 0x91 .. 0x9C, 0x9E .. 0x9F
€,ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ
● 0xA1 .. 0xAC, 0xAE .. 0xB5, 0xB8 ..0xBF
¡¢£¤¥¦§¨©ª«¬-®¯°±²³´μ¸¹º»¼½¾¿
● 0xC0 .. 0xFF
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêë
ìíîïðñòóôõö÷øùúûüýþÿ

1.6.1.2

Industrial Ethernet

Configuración FTP
CP como servidor FTP para los datos de la CPU S7
CP como servidor FTP para datos de CPU
Referencia
Válido para los siguientes módulos:
● CP 1543‑1
● CP 1545‑1
Configuración del servicio de comunicación "Servidor FTP":
● Con las funciones de seguridad desactivadas en el grupo de parámetros "Configuración
FTP"
● Con la función de seguridad activada en "Security > Configuración de servidor FTP"

3420

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

CP S7-1500 como servidor FTP
La función aquí descrita permite transferir datos en forma de archivos (files) a bloques de datos
o desde bloques de datos de una estación S7 utilizando los comandos FTP. Es posible utilizar
los comandos FTP usuales para leer, escribir y administrar archivos.
Para la transmisión de datos mediante FTP tiene que crear bloques de datos en la CPU de su
estación S7. Debido a su estructura especial, se denominan File-DB.
Con un comando FTP, el CP en calidad de servidor FTP determina a partir de una tabla de
asignación File cómo deben reproducirse en archivos los bloques de datos utilizados para la
transferencia de archivos en la estación S7.
&OLHQWH)73
3*3&

6HUYLGRU)73
HVWDFLµQ6FRQ&3


7DEODGHDVLJQDFLµQ)LOH
FSXGEGDW
FSXGEGDW


)LOH'%V
'%
'%
'%

Figura 1-149

(QFDEH]DGR
'DWRVGHXVXDULR

CPU S7 con CP como servidor FTP para los datos de la CPU S7

Tabla de asignación File
El CP utilizado como servidor FTP necesita información sobre cómo se deben reproducir en
archivos los bloques de datos usados para la transferencia de archivos en la estación S7.
La tabla de asignación File contiene las entradas siguientes:
● Asignación de la CPU
● asignación de DB
● nombre de archivo

Requisitos en la configuración de la CPU
Cree como File-DBs bloques de datos del tipo "Array of Byte" o "Array of Char".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3421

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
CP 1543‑1 con versión de firmware < V2
Para el CP con firmware V1.x utilice los siguientes ajustes para permitir el acceso FTP:
● En los datos de configuración de la CPU, en "Propiedades > General > Protección":
desactive la opción "Desactivar comunicación PUT/GET".
● En todos los bloques de datos utilizados como File-DB desactive el atributo "Acceso
optimizado al bloque".
Estos dos ajustes ya no son necesarios para el CP 1543‑1 a partir de la versión de firmware V2.

Consulte también
Configuración y estructura de la lista de configuración FTP (Página 3422)
Comandos FTP en el cliente FTP (Página 3423)
Estructura de los bloques de datos (File-DB) para servicios FTP - modo FTP-Server
(Página 3425)

Configuración y estructura de la lista de configuración FTP
Configuración y estructura de la lista de configuración FTP para crear la tabla de asignación File
Los campos de la tabla de la configuración FTP tienen el significado y la sintaxis siguientes:
Asignación de títulos en la ta‐ "CPU"
bla de la configuración FTP

"DB"

Nombre de archivo

Significado

Asignación de la
CPU

N.º del bloque

Nombre de archivo
La entrada puede intro‐ asignado al File-DB
Seleccionable
ducirse.
Propuesta de nombre
por lista desple‐
automática. La entra‐
gable; la entrada
da puede introducirse/
no puede introdu‐
modificarse.
cirse.

Comentario informal

Ejemplo

cpu1 [PLC_1]

20

Valores medidos en el
área Instalación1

cpu1_db20.dat

Comentario

Indicaciones relativas a la sintaxis
● Para el nombre de archivo (File Name) de un File-DB rige lo siguiente:
– El nombre de archivo empieza por "cpuX" (siendo X=1 en S7-1500);
– Longitud: máximo 64 caracteres ("cpuX" inclusive);
Nota
Observe el formato (minúsculas para "cpu" y sin espacios al principio de la línea). De lo
contrario los archivos no se reconocerán.

3422

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
CP como servidor FTP para datos de CPU (Página 3420)

Comandos FTP en el cliente FTP
Un ejemplo de acceso
En la siguiente representación se ve a modo de ejemplo una secuencia de acceso típica en la
ventana MS-DOS:

Cómo utilizan los comandos FTP típicos los comandos FTP admisibles
Consulte en la tabla siguiente qué comandos FTP se pueden ejecutar para el acceso a los FileDBs de la CPU. La tabla muestra también qué comandos FTP se emplean en las consolas de
introducción típicas como, por ejemplo, el prompt de MS-DOS, para estos comandos FTP.
Tabla 1-178 Comandos FTP
Comandos FTP típicos

Comando FTP

Significado

x

User

Iniciar sesión

x

Pass

Autorización por contra‐
seña

Port

Indicación del puerto a
través del que un cliente
desea transmitir datos.

List

Lista de los File-DBs en
la CPU aludida.

open

dir

x

put

x

x

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

get

x

close

del

3423

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Comandos FTP típicos
x

x

x

x

Comando FTP

Significado

Dele

Borra un File-DB, po‐
niendo a "0" el bit EXIST
en el encabezado del Fi‐
le-DB.

Retr

Lee los datos de usuario
que están en el File-DB
indicado en el archivo
especificado del cliente
FTP.

Stor

Trasmite el archivo indi‐
cado desde el cliente
FTP al área de datos de
usuario del File-DB es‐
pecificado.

quit

Finaliza la conexión FTP
actual.

Nota
Los comandos FTP "rename", "append", "rnfr" y "rnto" no se pueden utilizar para File-DBs.

Cómo se procesan comandos FTP en el CP
Para una mejor comprensión de la interfaz FTP destinada a los File-DBs existentes en la CPU,
se explica aquí la secuencia de procesamiento con el ejemplo del comando stor.
El servidor FTP del CP procede del siguiente modo:
1. Identificación del File-DB aludido sobre la base de la entrada en la tabla de asignación File.
2. Comprobación de los bits en el encabezado del File-DB.
El proceso de escritura únicamente se ejecuta cuando se comprueba que:
el bit LOCKED = 0
el bit NEW = 0
el bit WRITEACCESS = 1
3. Escritura del contenido del archivo en el área de datos de usuario del File-DB en la CPU.
Al comienzo del proceso de escritura se activa el bit LOCKED, que se desactiva tras
concluir el proceso de escritura.
4. Una vez concluido el proceso de escritura se activa adicionalmente el bit NEW en el
encabezado del File-DB y se introduce la fecha actual en el campo DATE_TIME.
5. El servidor FTP envía al cliente FTP un aviso relativo al resultado de la transferencia de
archivos.

Modo de transmisión para la transferencia de archivos
La transferencia de archivos tiene lugar exclusivamente en el modo binario. Para ello, tras
iniciar la sesión hay que introducir en la consola de introducción el comando "binary".

3424

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
CP como servidor FTP para datos de CPU (Página 3420)

Estructura de los bloques de datos (File-DB) para servicios FTP - modo FTP-Server
Funcionamiento
Para la transmisión de datos mediante FTP hay que crear bloques de datos (File-DBs) en la
CPU de la estación S7. Dichos bloques de datos han de tener una determinada estructura para
que los servicios FTP puedan tratarlos como archivos transmisibles. Constan de los siguientes
sectores
● Sector 1: File-DB-Header (tiene una longitud fija de 20 byte y una estructura fija)
● Sector 2: datos de usuario (longitud y estructura variables)

DB con variable "FILE_DB_HEADER"
Cree un bloque datos en STEP 7 en "Bloques de datos" > "Agregar nuevo bloque".
Seleccione como tipo de datos de la primera variable en el DB el tipo de datos
"FILE_DB_HEADER". La estructura de parámetros del SDT se crea automáticamente.
Consulte el apartado siguiente sobre los atributos del DB.
CP 1543‑1 con versión de firmware < V2
En todos los bloques de datos utilizados como File-DB desactive el atributo "Acceso
optimizado al bloque".
Si en STEP 7 V14 o superior se utiliza el CP 1543‑1 con versión de firmware V2.0 o superior,
es posible usar la opción "Acceso optimizado al bloque".

File-DB-Header para modo de servidor FTP
Observación: el File-DB-Header aquí descrito es prácticamente idéntico al File-DB-Header
descrito para el modo cliente. Las diferencias residen en los parámetros
● WRITE_ACCESS
● FTP_REPLY_CODE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3425

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parámetro
EXIST

Tipo

Valor / Significado

BOOL

El bit EXIST indica si hay
datos válidos en el área de
datos de usuario.

Alimentación
El comando FTP dele pone EXIST=0;
El comando FTP store pone EXIST=1;

El comando FTP retrieve
solo procesa la petición si
EXIST=1.
● 0:
el File-DB no contiene
datos de usuario válidos
("el archivo no existe").
● 1:
el File-DB contiene
datos de usuario válidos
("el archivo existe").
LOCKED

BOOL

El bit LOCKED sirve para la
protección de acceso al Fi‐
le-DB.
● 0:
se puede acceder al
File-DB.
● 1:
el File-DB está
bloqueado.

Los comandos FTP store y retr ponen LO‐
CKED=1 durante la edición.
Para una operación de escritura desde el
programa de usuario rige:
El programa de usuario almacenado en la
CPU S7 puede activar o desactivar LOCKED
para asegurar la coherencia durante un ac‐
ceso de escritura.
Procedimiento recomendado para el progra‐
ma de usuario:
1. Comprobar el bit LOCKED;
si =0
2. Poner el bit WRITEACCESS=0
3. Comprobar el bit LOCKED;
si =0
4. Poner el bit LOCKED=1
5. Escribir datos
6. Poner el bit LOCKED=0

3426

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro
NEW

Tipo

Valor / Significado

Alimentación

BOOL

El bit NEW informa sobre si
los datos se han modificado
desde la última operación
de lectura.

El comando FTP store pone NEW=1 tras la
edición

● 0:
el contenido del File-DB
no ha cambiado desde
la última operación de
escritura. El programa
de usuario de la CPU S7
ha registrado el último
cambio.

El programa de usuario de la CPU S7 tiene
que poner NEW=0 tras la lectura de los da‐
tos, para hacer posible un nuevo store o para
poder borrar el archivo con el comando FTP
dele.

● 1:
el programa de usuario
de la CPU S7 no ha
registrado la última
operación de escritura.
WRITE_ACCESS

BOOL

0:
el cliente FTP de la PG/el
PC no tiene derecho de es‐
critura para los File-DB de
la CPU S7.
1:
el cliente FTP de la PG/el
PC tiene derecho de escri‐
tura para los File-DB de la
CPU S7.

El bit se pone a un valor de inicialización al
configurar el DB.
Recomendación:
A ser posible, el bit debería dejarse inaltera‐
do. En caso especiales es posible una adap‐
tación durante el funcionamiento.

ACT_LENGTH

DINT

Longitud actual del área de La longitud actual se actualiza después de
una operación de escritura.
datos de usuario.
El contenido de este campo
solo es válido si EXIST = 1.

MAX_LENGTH

DINT

Longitud máxima del área
de datos de usuario (longi‐
tud total del DB menos 20
bytes del encabezado).

FTP_REPLY_CODE

DATE_TIME

INT

DATE_AND_TIME

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

La longitud máxima se debería definir al con‐
figurar el DB.
El valor puede ser modificado por el progra‐
ma de usuario también durante el funciona‐
miento.

Este parámetro no tiene re‐ El servidor FTP lo pone a "0".
levancia en el modo de ser‐
vidor FTP.
Fecha y hora del último
cambio del archivo.
El contenido de este campo
solo es válido si EXIST = 1.

La fecha actual se actualiza después de una
operación de escritura.
Si se utiliza la función "Transmisión de la ho‐
ra", la entrada se corresponde con la hora
transmitida.
Si no se utiliza la función "Transmisión de la
hora", se introduce una hora relativa. La re‐
ferencia es el momento de arranque del CP
IT (el valor de inicialización es 1.1.1994 0:0
horas).

3427

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
CP como servidor FTP para datos de CPU (Página 3420)

CP como cliente FTP para los datos de la CPU S7
Funcionamiento de un cliente FTP
Referencia
Válido para los siguientes módulos:
● CP 1543‑1
● CP 1545‑1

Cliente FTP
Para la transmisión de datos mediante FTP hay que crear bloques de datos (File-DBs) en la
CPU de la estación S7.
El programa de usuario envía peticiones FTP que son ejecutadas por el CP como cliente FTP.
En el programa de usuario se utiliza la instrucción FTP_CMS para establecer la conexión y
transferir datos.
En la petición debe indicarse, entre otros:
● Dirección IP del servidor FTP
● ubicación del archivo en el servidor FTP
● Nombre de archivo
● información de acceso
La ilustración siguiente muestra el funcionamiento si se utiliza la instrucción FTP_CMD.

3428

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
&OLHQWH)73
HVWDFLµQ6FRQ&3


6

6HUYLGRU)73

&RQH[LµQ)73
)LOH'%V

5(75,(9(
'%
'%
'%

(QFDEH]DGR
'DWRVGHXVXDULR

6725(
3URJUDPDGHXVXDULR
&$//)73B&0'

Figura 1-150

CPU con CP como cliente FTP para los datos de la CPU S7

Con el CP 1543‑1 a partir de la versión de firmware V2, en el DB se pueden utilizar también los
tipos de datos "Array of Byte" y "Array of Char" para los datos de usuario.

Requisitos en la configuración de la CPU
CP 1543‑1 con versión de firmware < V2
Si utiliza el CP 1543‑1 con la versión de firmware V1.x, realice los siguientes ajustes para
permitir el acceso FTP:
● En los datos de configuración de la CPU, en "Propiedades > General > Protección":
desactive la opción "Desactivar comunicación PUT/GET".
● En todos los bloques de datos utilizados como File-DB: desactive el atributo "Acceso
optimizado al bloque".
Estos ajustes ya no son necesarios para el CP 1543‑1 a partir de la versión de firmware V2.

FETCH/WRITE
Aplicación de FETCH/WRITE
FETCH/WRITE
Los servicios FETCH/WRITE permiten acceder a áreas de memoria del sistema de la CPU S7.
● FETCH: Leer datos directamente
● WRITE: Escribir datos directamente

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3429

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
El acceso es posible desde los siguientes dispositivos:
● SIMATIC S5
● Estaciones PC SIMATIC
● Dispositivos ajenos
El CP S7-1500 es el servidor de los servicios FETCH/WRITE.
Los siguientes protocolos soportan los servicios FETCH/WRITE:
● TCP
● ISO-on-TCP
● ISO-Transport
Para utilizar los servicios FETCH/WRITE no se requiere ninguna conexión configurada.

Memoria de sistema
A través de FETCH o WRITE puede acceder a las siguientes áreas de operandos en la
memoria del sistema de la CPU S7-1500:
● Bloques de datos (DB)
Tenga en cuenta lo siguiente:
– Para acceder a los DB, el número de DB más alto es el 255.
– En la tabla TSAP del CP, active el parámetro "Direccionamiento S7" para el acceso de
interlocutores S5 o S7.
● Marcas (M)
● Memoria imagen de proceso de las entradas (PAE)
● Memoria imagen de proceso de las salidas (PAA)
● Área de periferia de las entradas (PEW, PED, PEB)
● Área de periferia de las salidas (PAW, PAD, PAB)
● Contadores (Z)
● Temporizadores (T)

Requisitos en la configuración de la CPU
Utilice el ajuste siguiente en los datos de configuración de la CPU para permitir el acceso
FETCH/WRITE:
● Grupo de parámetros "Protección y seguridad > Mecanismos de conexión":
Desactive la opción "Permitir acceso vía comunicación PUT/GET del interlocutor remoto".
Consulte la configuración del CP en el capítulo Configurar el acceso FETCH/WRITE
(Página 3431).

3430

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Acoplamiento con sistemas ajenos
Los servicios FETCH y WRITE soportados en las conexiones de transporte ISO y en las
conexiones ISO-on-TCP o TCP pueden ser utilizados en principio desde cualquier dispositivo
ajeno para el acceso a áreas de memoria del sistema de S7.
Para poder implementar también este acceso, por ejemplo, para aplicaciones de PC, se tiene
que conocer la estructura de PDU para las peticiones. Consulte al respecto el capítulo
Acoplamiento con sistemas de terceros con FETCH/WRITE (Página 3432).

Configurar el acceso FETCH/WRITE
Consulte los mecanismos de FETCH/WRITE en el capítulo Aplicación de FETCH/WRITE
(Página 3429).

FETCH/WRITE
Active esta opción para habilitar el acceso FETCH/WRITE a la CPU S7-1500 a través del CP.
Cree en la tabla una fila para el acceso FETCH/WRITE para cada interlocutor e introduzca las
identificaciones de acceso en una tabla Solo se autorizarán los accesos FETCH/WRITE cuya
identificación coincida con una entrada de la lista.
En función del protocolo utilizado para el acceso FETCH/WRITE se requieren las entradas
siguientes:
● ISO-on-TCP / ISO-Transport
TSAP del interlocutor
● TCP
Número de puerto del interlocutor
Consulte los números de puerto utilizables en el capítulo Configuración de puerto
(Página 3432).

Lista TSAP / lista de puertos TCP
● TSAP
Introduzca el TSAP del interlocutor como string ASCII o, alternativamente, utilice la celda
de la columna "TSAP en formato hex".
Si se realiza la entrada en la columna "TSAP en formato hex", el valor correspondiente de
esta columna se rellenará automáticamente.
● TSAP en formato hex
Introduzca el TSAP del interlocutor como valor hexadecimal o, alternativamente, utilice la
celda de la columna "TSAP".
Si se realiza la entrada en forma de valor hexadecimal, cada carácter del TSAP se
introducirá como número hexadecimal separado por puntos.
Si se realiza la entrada en la columna "TSAP", el valor correspondiente de esta columna se
rellenará automáticamente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3431

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Puerto TCP
Introduzca el número de puerto del interlocutor.
● Direccionamiento S7
Con esta opción se define el modo de direccionamiento a la hora de acceder a DB para la
llamada FETCH/WRITE en la estación SIMATIC S7:
– Opción activada
Direccionamiento S7: Dirección de byte
Este es el ajuste estándar para el acceso de estaciones SIMATIC S7.
– Opción desactivada
Direccionamiento S5: Dirección de palabra
Con este direccionamiento se permite a aplicaciones sin adaptación de direcciones a
acceder a estaciones S5 o S7. Esto es útil, por ejemplo, para aplicaciones S5 existentes
que deben utilizarse tal como están para acceder a estaciones S7.

Configuración de puerto
Configuración de puerto
La tabla siguiente aclara el rango de valores y uso de las direcciones de puerto que se
referencian en las descripciones de conexión de los bloques de programa OUC.
Direcciones de puerto

Aplicación/nota

0

Asignado de forma fija; ¡no puede utilizarse!

1 .. 1023

Los puertos de esta banda no deben utilizarse (well known ports).

1024 .. 49151

Puertos para protocolos específicos de aplicación
2000 .. 5000

Rango en el que STEP 7 busca y asigna direcciones de puerto libres.
Es posible ajustar la dirección de puerto en este rango de forma indi‐
vidual.

5001 .. 49151

¡El sistema utiliza las direcciones de puerto a partir de 5000!
Observación:
Si desea utilizar estas direcciones de puerto, contacte en caso dado a
su administrador del sistema para que compruebe su disponibilidad.

49152 .. 65535

Puertos asignados de forma dinámica
Se recomienda no utilizar estos puertos.

Acoplamiento con sistemas de terceros con FETCH/WRITE
Los servicios FETCH y WRITE pueden ser utilizados desde cualquier dispositivo ajeno para el
acceso a áreas de memoria del sistema de S7.
Para poder implementar también este acceso, por ejemplo, para aplicaciones de PC, se tiene
que conocer la estructura de PDU para las peticiones. Los encabezados específicos de S7 o
S5 necesarios para los telegramas de petición y acuse tienen una longitud predeterminada de
16 bytes. Consulte la estructura en las tablas siguientes.

3432

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Estructura para telegrama WRITE (PDU)
El significado y los valores de los parámetros no ocupados con valores fijos pueden
consultarse en el apartado "Abastecimiento de parámetros" más abajo.
Telegrama de petición WRITE
0

Identificación del sistema

1

Telegrama de acuse WRITE
="S"

0

="5"

1

Identificación del sistema

="S"
="5"

2

Longitud del encabezado
(bytes)

=16 (dec.)

2

Longitud del encabezado

=16 (dec.)

3

Identificación del código OP

=01

3

Identificación del código OP

=01

4

Longitud del código OP

=03

4

Longitud del código OP

=03

5

Código OP

=03

5

Código OP

=04

6

Identificación del bloque ORG

=03

6

Bloque de acuse

=0Fh

7

Longitud del bloque ORG

=08

7

Longitud del bloque de acuse

=03

8

Identificador ORG

8

Bloque de errores

=N.º

9

DBNR

9

Identificación de bloque vacío

=FFh

A

Dirección inicial

Byte High

A

Longitud de bloque vacío

=07

Byte Low

B

Longitud

Byte High

C

Byte Low

D

E

Identificación de bloque vacío

=FFh.

E

F

Longitud de bloque vacío

=02

F

B
C
D

libre

Conjunto de datos con hasta
64 kB

Estructura para telegrama FETCH (PDU)
El significado y los valores de los parámetros no ocupados con valores fijos pueden
consultarse en el apartado "Abastecimiento de parámetros" más abajo.
Telegrama de petición FETCH
0

Identificación del sistema

1

Telegrama de acuse FETCH
="S"

0

="5"

1

Identificación del sistema

="S"
="5"

2

Longitud del encabezado

=0x10

2

Longitud del encabezado

=0x10

3

Identificación del código OP

=0x01

3

Identificación del código OP

=0x01

4

Longitud del código OP

=0x03

4

Longitud del código OP

=0x03

5

Código OP

=0x05

5

Código OP

=0x06

6

Identificación del bloque ORG

=0x03

6

Bloque de acuse

=0x0F

7

Longitud del bloque ORG

=0x08

7

Longitud del bloque de acuse

=0x03

8

Identificador ORG

8

Bloque de errores

=N.º

9

DBNR

9

Identificación de bloque vacío

=0xFF

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3433

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
A

Dirección inicial

B
C

Longitud

D

Byte High

A

Longitud de bloque vacío

Byte Low

B

libre

Byte High

C

Byte Low

D

E

Bloque vacío

=0xFF

E

F

Longitud de bloque vacío

=0x02

F

=0x07

Datos hasta 64 kB, pero solo si
n.º error = 0

Abastecimiento de parámetros
Área de operandos S7
Identificador ORG

DB

M

01H

02H

E

A

03H

04H

Datos de origen/
destino de/en me‐
moria imagen de
proceso de las entra‐
das (IPE)

Datos de origen/
destino de/en me‐
moria imagen de
proceso de las sali‐
das (IPS)

irrelevante

irrelevante

irrelevante

Datos de origen/
Datos de origen/
destino de/en blo‐
destino de/en área
que de datos en me‐ de marcas
moria principal
DBNR

DB del que se toman
los datos de origen o
al que se transfieren
los de destino.

Rango permitido

1...255

Dirección inicial

Número DW a partir
del que se toman o
escriben datos.

N.º de byte de mar‐
cas a partir del que
se toman o escriben
datos.

N.º de byte de entra‐
da a partir del que se
toman o escriben da‐
tos.

N.º de byte de salida
a partir del que se to‐
man o escriben da‐
tos.

Rango permitido

0...2047

Todos los bytes de
marcas que propor‐
ciona una CPU.

0...127

0...127

Longitud

Longitud del conjun‐ Longitud del conjun‐ Longitud del conjun‐ Longitud del conjun‐
to de datos de ori‐
to de datos de ori‐
to de datos de ori‐
to de datos de ori‐
gen/destino en pala‐ gen/destino en bytes gen/destino en bytes gen/destino en bytes
bras

Rango permitido

Hasta 8192 bytes

Área de

Hasta 8192 bytes

1...128

1...128

PI/PQ

C

T

05H

06H

07H

operandos S7
Identificador ORG

Datos de origen/destino
Datos de origen/destino
de/en módulos de periferia de/en células de contador
Para datos de origen, mó‐
dulos de entrada

Datos de origen/destino
de/en células de tempori‐
zador

Para datos de destino, mó‐
dulos de salida
DBNR

3434

irrelevante

irrelevante

irrelevante

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Dirección inicial

N.º de byte de periferia a
partir del que se toman o
escriben datos.

Número de célula de con‐ Número de célula de tem‐
tador a partir del que se to‐ porizador a partir del que
man o escriben datos
se toman o escriben datos.

Rango permitido

0...127: periferia digital

0...255

0...255

128...255: periferia analó‐
gica
Número

Longitud del conjunto de
datos de origen/destino en
bytes

Longitud del conjunto de
datos de origen/destino en
palabras (célula contador
= 1 palabra)

Longitud del conjunto de
datos de origen/destino en
palabras (célula contador
= 1 palabra)

Rango permitido

1...256

1

1

Consulte también
Aplicación de FETCH/WRITE (Página 3429)

1.6.1.3

CP PROFIBUS

Sincronización horaria
Referencia
Configuración de la sincronización horaria de CP PROFIBUS.

Sincronización horaria
Especifique si el CP debe reenviar telegramas horarios o no.
Dependiendo de dónde esté dispuesto el maestro horario se distinguen los dos casos
siguientes:
● Los telegramas horarios proceden de la subred y se reenvían a la estación.
● Los telegramas horarios proceden de la estación y se reenvían a la subred.
En algunos módulos se especifica concretamente el sentido en el que deben reenviar los
telegramas horarios. En módulos en los que el reenvío solo puede activarse o desactivarse
globalmente, el CP puede reenviar los telegramas horarios en cualquier sentido.
Si utiliza varios CPs en la estación, tenga en cuenta que el flujo de telegramas horarios
depende del reloj maestro. Dado que con la función aquí descrita se pueden acoplar
telegramas horarios de una red a otra, pueden producirse conflictos.
Si en una estación existen varios CP conectados a la misma red, solo uno de ellos podrá
reenviar los mensajes de sincronización horaria.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3435

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parametrización de aparatos de campo (routing de registros)
Referencia
Parametrización de las propiedades para CPs PROFIBUS en el grupo de parámetros
"Propiedades > Ajustes > Parametrización de aparatos de campo".

Parametrización de aparatos de campo (routing de registros)
Seleccionando esta opción se puede utilizar el CP como router para registros destinados a
aparatos de campo (esclavos DP). En ese caso, el CP desvía a los aparatos de campo los
registros transferidos por dispositivos que no están conectados directamente al PROFIBUS, y
que, por lo tanto, no tienen acceso directo a los aparatos de campo (esclavos DP).
Una herramienta que genera este tipo de registros para la parametrización de aparatos de
campo es SIMATIC PDM (Process Device Manager).
La función está activada de forma estándar. Dado que la función requiere recursos de memoria
adicionales, puede desconectarse si en general los recursos de memoria del CP se someten
a una carga elevada (conexiones, etc.) y no se requiere la función "Routing de registros".

CPs con funcionalidad DP - Seleccionar el modo de operación
Referencia
Parametrización del modo de operación del CP para PROFIBUS DP en el grupo de parámetros
"Propiedades > General > Modo de operación"

Relación entre el modo de operación CP y la función CP
Encontrará los modos de operación de CP configurables y, con ello, las funciones de CP
posibles en la tabla siguiente:
Modo de opera‐
ción CP

Funciones CP posibles
PG/BuB vía
PROFIBUS

FDL vía
PROFIBUS

Maestro DP

Esclavo DP

Conexiones S7
configuradas

Sin
modo DP

X

X

-

-

X

Modo
maestro DP

X

X

X

-

X

Esclavo DP
activo
(v. abajo)

X

X

-

X

-

Esclavo DP
pasivo
(v. abajo)

-

-

-

X

-

Leyenda: "X" = la función se soporta; "-" = la función no se soporta

3436

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Modo maestro DP / parámetro "Tiempo de retardo DP"
Aquí se puede ajustar un retardo adicional para la actualización de los datos E/S DP. Este
tiempo de retardo es utilizado por el CP PROFIBUS para editar otros protocolos, como las
conexiones FDL.
Los tiempos de reacción DP visualizados no se actualizarán hasta que se ejecute una de las
acciones siguientes:
● se pulse el botón "Recalcular..." o bien
● Seleccionar otro grupo de parámetros
Si se han configurado muchos esclavos DP, el recálculo puede durar varios segundos.

Maestro DP clase 2 (funciones de diagnóstico - solo seleccionable con determinados tipos de CP)
En este modo de operación, el dispositivo puede leer los datos de entrada y salida de cualquier
esclavo DP que no tenga asignado a través del CP PROFIBUS.
De este modo, por ejemplo, se puede registrar una señal de proceso de varios maestros DP,
con lo que se pueden ahorrar sensores en el campo (shared input / shared output).
Típicamente, los dispositivos de programación, diagnóstico o administración trabajan en
calidad de maestro DP clase 2.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3437

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Modo esclavo DP / opción "Test, puesta en servicio y routing" (la función varía según el tipo de CP)
● Opción activada: esclavo DP activo
Active la casilla de verificación si desea realizar con frecuencia funciones de programadora
necesarias para la puesta en marcha y el test, por ejemplo, utilizando esta interfaz. De ese
modo se selecciona el modo de operación "esclavo DP activo" (es decir, la interfaz participa
en la rotación del token de PROFIBUS).
En este caso son posibles las funciones siguientes (la función varía según el tipo de CP):
– Programar (p. ej. cargar)
– Probar (estado/forzar)
– Routing S7 (esclavo I como transición de red)
– Comunicación compatible con S5 (interfaz SEND/RECEIVE)
– Comunicación S7 (solo en modo servidor en conexiones configuradas unilateralmente
sin bloques de comunicación; configuración en el interlocutor)
Nota
Repercusiones especiales del modo de operación "Esclavo DP activo"
● En este modo de operación no se pueden configurar conexiones S7 para el
intercambio de datos a través de bloques de comunicación.
● El tiempo de ciclo puede prolongarse. En aplicaciones críticas y si no se necesitan el
routing S7 ni la funcionalidad de cliente para la comunicación, no debería activarse
esta opción.
● Opción desactivada: esclavo DP pasivo
Si la casilla de verificación "Test, puesta en servicio y routing" no está activada, se
selecciona el modo de operación CP "Esclavo DP pasivo", con lo que la interfaz solo trabaja
como servidor de servicios de comunicación y no participa en la rotación del token de
PROFIBUS.
La funcionalidad de servidor significa que solo el interlocutor (p. ej. PG, OP o sistema de
automatización) puede iniciar la comunicación. Las particularidades siguientes deben
tenerse en cuenta si la opción no está activada:
– No es posible el routing S7.
– La programación y el test son posibles pero lentamente (sin prolongación del tiempo de
ciclo).

El CP soporta varios tipos de esclavo DP
Referencia
Parametrización del tipo de esclavo DP para PROFIBUS DP en el grupo de parámetros
"Propiedades > General > Modo de operación"

3438

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Modo DP
En los CPs que soportan distintos tipos de esclavos DP se puede elegir entre los siguientes
modos DP, dependiendo del tipo de CP:
● Funcionalidad DPV1 (modo de operación predeterminado)
Aquí se incluyen esclavos DP conformes a la norma PROFIBUS DPV0 y DPV1 así como
esclavos DP Siemens.
Este modo de operación presupone determinados tipos de CPU. Para el CP PROFIBUS
tenga en cuenta las indicaciones del manual de producto de CPs S7.
● Compatible con DPV0
Aquí se incluyen esclavos DP conformes a la norma PROFIBUS DPV0; los esclavos DP
conformes a la norma DPV1 sólo pueden utilizarse con restricciones.
● Compatible con S7
Aquí se incluyen esclavos DP conformes a la norma PROFIBUS DPV0 así como esclavos
DP Siemens; los esclavos DP conformes a la norma DPV1 sólo pueden utilizarse con
restricciones.

1.6.1.4

CM/CP PROFIBUS

Configuración de la sincronización horaria
Funciones de sincronización horaria del módulo de comunicación
Mediante los parámetros de la sincronización horaria se especifica la función que desempeña
el módulo de comunicación para reenviar telegramas horarios.
En función del modo de operación del módulo en PROFIBUS pueden ajustarse las siguientes
funciones de sincronización:
● El módulo de comunicación es un dispositivo pasivo en PROFIBUS (p. ej. esclavo DP):
– Esclavo
– Ninguna
● El módulo de comunicación es un dispositivo activo en PROFIBUS:
– Maestro
– Esclavo
– Ninguna

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3439

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Significado de los parámetros
Los parámetros de la sincronización horaria tienen el significado siguiente:
● Tipo de sincronización
El parámetro define la función de sincronización:
– Esclavo
el reloj del CM es sincronizado por otro reloj. Los telegramas de sincronización
provienen de PROFIBUS. Con este tipo de sincronización, el CM reenvía los telegramas
horarios a la estación en un intervalo de tiempo especificado.
Dentro de la estación S7 solo debe haber un reloj esclavo.
– Maestro
El reloj del módulo de comunicación envía telegramas horarios a la red PROFIBUS en
calidad de maestro.
Si está configurado el tipo de sincronización "Maestro", se puede elegir el intervalo de
tiempo para la emisión de los telegramas horarios.
– Ninguna
no hay sincronización.
Si en una red hay más de un módulo con reloj, hay que determinar qué módulo actuará
como reloj maestro y cuál como reloj esclavo para la sincronización horaria. Solo puede
haber un reloj maestro.
● Ciclo de actualización
Este parámetro define, con la función de sincronización "Maestro", el intervalo en el que se
emiten los telegramas horarios a la red.

1.6.1.5

Ajustes de CP independientes de protocolo o de red

Cambio de módulo sin programadora
Referencia
Parametrización de ajustes especiales en el grupo de parámetros "Propiedades > General >
Ajustes"
Dependiendo del tipo de CP, encontrará la posibilidad de ajuste "Cambio de módulo sin
programadora"

Repercusión - almacenamiento seguro a largo plazo en la CPU
Si se ha seleccionado esta opción, el almacenamiento seguro a largo plazo se realiza en la
CPU en lugar del EEPROM del CP. No obstante, tenga en cuenta que el almacenamiento de
larga duración en la CPU solo es a prueba de fallos si la CPU está protegida por pila o por una
SIMATIC Memory Card contra fallos de tensión.

3440

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Demanda de recursos en la CPU
Si se selecciona esta opción se ocuparán más recursos en la CPU. Al cargar los programas de
usuario y los datos de configuración, se notificará si no hay memoria suficiente. La falta de
recursos puede solucionarse utilizando una SIMATIC Memory Card.
Nota
Si hay que suponer que faltarán recursos y no se desea utilizar ninguna SIMATIC Memory
Card, se puede renunciar en principio a esta opción y guardar los datos de configuración en el
CP. Más adelante se puede configurar una SIMATIC Memory Card con los datos de
configuración de modo que la opción "Cambio de módulo sin programadora" esté activada
dentro de la misma. Si seguidamente se inserta la SIMATIC Memory Card en la CPU, será
posible cambiar el CP en todo momento. En este caso, los datos de configuración se cargarán
automáticamente de la CPU o de la SIMATIC Memory Card al arrancar el CP.

Multiplexar conexiones OP / asignar recurso de conexión interno de la CPU
Referencia
Parametrización de ajustes especiales en el grupo de parámetros "Propiedades > General >
Ajustes"
Dependiendo del tipo de CP, encontrará la posibilidad de ajuste "Conexiones OP
multiplexadas"

Modo multiplex
Para conectar TD/OPs o bien dispositivos HMI, es posible optimizar los recursos de conexión
en la CPU S7-300 haciendo que un máximo de 16 dispositivos de este tipo se comuniquen a
través de un solo recurso de conexión de la CPU (modo multiplex).
Si no se emplea el modo multiplex, el número de TD/OPs o dispositivos HMI que pueden
utilizarse depende del número de recursos de conexión disponibles en la CPU utilizada.

Asignar recurso de conexión interno de la CPU
Las conexiones S7 configuradas a través del CP utilizan el mismo canal multiplex asignado a
las conexiones HMI en el modo multiplex. Así pues, si se configuran conexiones S7, se
asignará directamente un recurso de conexión de la CPU.
Nota
Las conexiones de la programadora no funcionan a través del multiplexor; para utilizar una
programadora se asigna siempre un recurso de conexión.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3441

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Nota
Direccionamiento en modo multiplex
En modo multiplex, para las conexiones TD/OP/HMI debe indicarse la asignación de rack/slot
del CP en lugar de la asignación de rack/slot de la CPU en el direccionamiento.
Las aplicaciones (p. ej. ProAgent) que requieren avisos de bloque (Alarm_S: SFC 17 , SFC 18
, SFC 19) no se soportan en modo multiplex.

1.6.1.6

Aclaración sobre conexiones

Window Time e Inactivity Time - Relación
Referencia
Configuración de conexiones ISO-Transport / grupo de parámetros "Propiedades > General >
Dinámica".

Impedir la cancelación de conexiones mediante una sincronización adecuada
La estación interlocutora responde a los telegramas de señal de vida con otro telegrama. Por
ello se envían a la estación interlocutora en el intervalo del Window Time.
Para que no se cancele la conexión involuntariamente, el Inactivity Time debe ser al menos
tres veces mayor que el Window Time.

Opción "Notificación inmediata al detectar una interrupción de la conexión"
Significado
Si se selecciona la opción "Notificación inmediata al detectar una interrupción de la conexión"
se determina que, en caso de que una conexión no esté disponible, la aplicación reciba
inmediatamente una notificación acerca de que una petición de comunicación no puede
ejecutarse (FETCH o WRITE). La notificación se da independientemente de si funciona o no
un intento actual de restablecer la conexión.
Si no se selecciona esta opción, en caso de que una conexión no esté disponible, la aplicación
no recibirá la notificación hasta que haya transcurrido el timeout para la conexión.

3442

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
La opción aquí descrita sólo es relevante y sólo está disponible si se utilizan los dos modos de
operación citados a continuación:
● La conexión está configurada como permanente.
Las conexiones pueden estar configuradas como permanentes (opción de la ficha "Detalles
del establecimiento de conexión"). De este modo, las peticiones pueden transmitirse al
interlocutor con un tiempo de reacción lo más breve posible sin que sea necesario
establecer primero una conexión.
Si la conexión falla, se intentará volver a establecerla. En este estado pueden producirse
retardos hasta que el aviso correspondiente se transmita a la aplicación.
● Se utilizan los tipos de petición FETCH o WRITE (posibilidad de selección en la ficha
"Opciones").
Sólo con estos tipos de petición es necesaria una reacción inmediata en determinados casos
de aplicación si falla la conexión.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3443

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Datos de dirección - conexión de correo electrónico
Parámetros para el envío de correos electrónicos
En "Propiedades > Detalles de dirección" se indican los parámetros que se necesitan para
enviar un correo electrónico. Pueden introducirse los parámetros siguientes:
Parámetro

Descripción

Servidor de correo
electrónico (SMTP)

Dirección del servidor de correo a través del que se envían los co‐ absoluto:140.80.0.4
rreos electrónicos.
simbólico:t-online.de
La dirección IP puede indicarse en formato absoluto o simbólico.

Ejemplo

Para la entrada simbólica rige lo siguiente:
Un nombre válido tiene entre 1 y 64 caracteres; de ellos, 1 carácter
como mínimo debe ser una letra.
Si en la entrada se utilizan uno o varios caracteres ".", rige además:
Un nombre válido debe tener detrás del último "." entre 1 y 63 ca‐
racteres, que solo pueden ser [a-z], [A-Z], [0-9] o [-] y de los cuales
al menos uno debe ser una letra.
Para el formato simbólico es imprescindible que el CP de Internet
conozca la dirección del Domain Name System (DNS). Debe reali‐
zarse una entrada a este respecto en la configuración del CP de
Internet en HW Config; encontrará más información al respecto en
la Ayuda en pantalla correspondiente.
Pueden introducirse 64 caracteres como máximo.
Nombre predetermina‐
do del remitente

Indicación de una dirección que se insertará como dirección del
remitente en el correo electrónico siempre que la información del
remitente (parámetro FROM) esté vacía en el encabezado del co‐
rreo electrónico.

Sta‐
tion2.CPU412@xy.werk2.de

Este dato no suele ser relevante para el envío de mensajes. Sirve
de información para el receptor del correo electrónico. Puesto que
algunos servidores de correo no transmiten peticiones si el campo
del remitente está vacío, es recomendable realizar una entrada.
Pueden introducirse 126 caracteres como máximo.
Nota:
Tenga en cuenta que hay que indicar un nombre predeterminado
del remitente si debe iniciarse un mensaje de test desde el diag‐
nóstico.

3444

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Símbolos en estado offline
Símbolos en estado offline
El estado offline de una conexión se representa del siguiente modo:
Símbolo

Significado / estado de la conexión
Coherente - la configuración de conexiones puede
cargarse.
Incoherente - la configuración de conexiones no
puede cargarse.

Conexión ISO on TCP: TSAP
Formato TSAP
Las conexiones ISO on TCP tienen una longitud de TSAP de entre 1 y 16 bytes. Al realizar la
entrada se muestra automáticamente la longitud actual. Los TSAPs locales y del interlocutor
pueden introducirse como valor hexadecimal o como string ASCII. En caso de una entrada
ASCII, los caracteres introducidos también se visualizan en formato hexadecimal. En caso de
entrada hexadecimal, los caracteres imprimibles se representan como valor ASCII (son
visibles 8 caracteres hexadecimales). Si se introducen caracteres no imprimibles, la
visualización ASCII queda atenuada (no es posible la entrada ASCII) y los caracteres no
imprimibles se representan en forma de punto.
Nota
Longitud TSAP
No deben utilizarse TSAPs con una longitud 1 ó 2, porque ya se utilizan para fines internos.

TSAPs locales y del interlocutor
Los TSAPs locales y del interlocutor pueden ser idénticos, ya que la conexión es unívoca
debido a las distintas direcciones IP. Si hay que configurar más de una conexión entre dos
dispositivos, habrá que diferenciar también los TSAPs.

TSAPs predeterminados
Para configurar los TSAPs locales y del interlocutor hay un valor predeterminado "ISO-onTCP-1" para la primera conexión entre ambos interlocutores (puede cambiarse). Si se
establece una nueva conexión entre los mismos interlocutores, se propone el valor
predeterminado "ISO-on-TCP-2". Si se establece una nueva conexión con otro interlocutor
distinto, se utiliza de nuevo "ISO-on-TCP-1".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3445

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Establecimiento de conexión para FETCH/WRITE
Referencia
Configuración de conexiones ISO-Transport / conexiones ISO-on-TCP / conexiones TCP grupo de parámetros "Propiedades > General > Opciones".

Repercusiones del establecimiento de conexión en FETCH/WRITE
Para el modo de operación FETCH/WRITE tenga en cuenta las indicaciones siguientes:
● Para estaciones S7 rige lo siguiente:
Si debe utilizarse el modo de operación FETCH/WRITE (véase el grupo de parámetros
"Opciones"), hay que desactivar la opción "Establecimiento de conexión activo".
● Para estaciones PC / servidores OPC rige lo siguiente:
Si debe utilizarse el modo de operación FETCH/WRITE (véase el grupo de parámetros
"Opciones"), hay que activar la opción "Establecimiento de conexión activo".

Conexión S7
Parámetros de conexión OPC para vigilancia de tiempo
Timeout para establecimiento de conexión
Si una petición de establecer una conexión no recibe respuesta por parte del interlocutor
dentro del tiempo ajustado aquí, las peticiones OPC se cancelan con un mensaje de error. Se
admiten valores entre 2.000 y 100.000 ms.
Puesto que, según sea la estructura de la red, es posible que se tarde bastante tiempo en
establecer una conexión correctamente, el timeout para el establecimiento de la conexión
debería ser mayor que el timeout para peticiones.
El timeout para el establecimiento de la conexión comienza cuando se realiza la petición de
establecer una conexión. Este instante depende de la configuración del comportamiento del
establecimiento de la conexión (véase más arriba). Hay dos casos posibles:
● Mantener la conexión permanentemente: la intención de establecer una conexión
comienza en este caso con el arranque del servidor OPC para el protocolo S7. El arranque
se inicia conectando un cliente OPC al servidor OPC y examinando el espacio del nombre
S7 y/o agregando y observando activamente un S7 Item.
● Conexión en caso necesario: la intención de establecer una conexión comienza con el
primer acceso a las variables de esta conexión S7.
Si la conexión S7 se interrumpe durante el funcionamiento, se intenta restablecerla. El timeout
para el establecimiento de la conexión se resetea y se inicia de nuevo.

3446

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Timeout para peticiones
Con el timeout para peticiones se vigilan las peticiones de red dirigidas al interlocutor. Si no se
responde a una petición de red dentro del timeout para peticiones, las correspondientes
peticiones OPC se cancelan con un mensaje de error. Se admiten valores entre 1 y 100.000
ms.
El timeout para peticiones comienza cuando se envía una petición de red en el servidor OPC.
Normalmente solo se establece una relación indirecta con peticiones de escritura/lectura/
observación en la interfaz OPC. Se pueden procesar varios OPC Items por petición de red y,
además, en cada petición de red varios clientes OPC pueden encargar los mismos OPC Items.
También hay que tener en cuenta los parámetros "Optimizar accesos de escritura" y
"Optimizar accesos de lectura", porque permiten agrupar varias peticiones OPC en el nivel de
la red.

Parámetros de conexión OPC para estado de la conexión
Notificación inmediata al detectar una interrupción de la conexión
Sólo es activable si la opción "Mantener la conexión de forma permanente" está seleccionada.
Gracias a la notificación inmediata de las conexiones S7 no establecidas en peticiones OPC
se impide que se repitan los timeouts para peticiones.
Funcionamiento: se detecta una interrupción de la conexión y se guarda el estado de la misma.
Si la conexión todavía no está establecida o si se intenta volver a establecer una conexión
interrumpida, las peticiones OPC se responden inmediatamente con una indicación de error
correspondiente. La indicación de error no llega hasta haber transcurrido el tiempo de espera
del timeout para peticiones o conexiones.

Optimizar accesos de escritura, optimizar accesos de lectura
Principio
Para accesos a variables a través de conexiones S7, el servidor OPC ofrece un algoritmo de
optimización para SIMATIC NET, que permite aumentar la velocidad de la transferencia de
datos.
Varias peticiones de acceso a diferentes variables se convierten internamente en un único
acceso al interlocutor. Así se reduce el número de paquetes de datos transportados por la red.
La carga de los paquetes se mejora y la proporción de datos de usuario de un paquete
aumenta.
Esta optimización sirve tanto para accesos de lectura como de escritura y está activada por
defecto. Para el cliente OPC, p. ej. un sistema de manejo o visualización apto para OPC, este
algoritmo de optimización es invisible.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3447

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Informaciones adicionales
Encontrará más detalles en la documentación del servidor OPC:
● Comunicación industrial con PG/PC tomo 1, ID de artículo: 42783968 (http://
support.automation.siemens.com/WW/view/es/42783968)
● Comunicación industrial con PG/PC tomo 2, ID de artículo: 42783660 (http://
support.automation.siemens.com/WW/view/es/42783660)

Opción de conexión S7 unilateral
Significado
Si la casilla de verificación "Unilateral" está activada, para utilizar esta conexión sólo se
admitirán bloques de comunicación unilaterales en el programa de usuario de una CPU S7
(instrucciones "PUT" y "GET"). Unilateral significa que el interlocutor es el servidor de dicha
conexión y que no puede enviar o recibir activamente.
En las conexiones unilaterales no se pueden emplear bloques de comunicación bilaterales
("parejas de bloques"), como "USEND" y "URCV", "BSEND" y "BRCV" o "USTATUS".
Puesto que, por norma general, las posibilidades de comunicación se identifican claramente
por los puntos finales, esta casilla de verificación está preasignada y, dado el caso, no puede
cambiarse.

Ejemplo 1:
La casilla de verificación está atenuada (es decir, no se puede cambiar) y activada con la
configuración siguiente:
● El punto final local de una conexión es una CPU S7-400 o una CPU S7-300 con
comunicación S7 cargable (mediante CP) y el punto final del interlocutor es una CPU
S7-300 sin comunicación S7 cargable.

Ejemplo 2:
La casilla de verificación está atenuada (es decir, no se puede cambiar) y no está activada con
la configuración siguiente:
● El punto final local de una conexión y el punto final del interlocutor son CPUs S7-400
En este caso, STEP 7 crea automáticamente una conexión bilateral. Se introduce una ID
tanto para el punto final local como para el punto final del interlocutor (ID local e ID del
interlocutor).

Servidor OPC - avisos
Avisos de bloque y avisos de diagnóstico
Las opciones sirven de filtro, de modo que determinan selectivamente el tipo de avisos que
pueden entrar a través de las conexiones S7.

3448

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Los avisos de bloque (alarmas) son generados por el interlocutor mediante los bloques
Alarm_8, Alarm_S o Alarm_SQ.
Los avisos de bloque (alarmas) pueden notificarse
● como Conditional Events (eventos condicionados)
● como Simple Events (eventos simples para la compatibilidad con aplicaciones antiguas que
no suelen esperar Conditional Events).
Si se selecciona "Avisos de bloque", el servidor OPC deberá iniciar una sesión en esta
conexión para las alarmas. Las alarmas recibidas se transmiten por la interfaz OPC
Alarms&Events.
Los avisos de diagnóstico se determinan a partir de la lista de estado del sistema (SZL) del
dispositivo S7. Los eventos de diagnóstico que todavía no se han notificado al cliente OPC se
le notifican cuando inicia una sesión para avisos de diagnóstico. Los eventos de diagnóstico no
tienen estado y no hay que acusarlos.
A través de la navegación local se accede a las funciones para ajustar las prioridades de avisos
de alarma individuales y avisos de diagnóstico.

Informaciones adicionales
Encontrará más detalles en la documentación del servidor OPC:
● Comunicación industrial con PG/PC tomo 1, ID de artículo: 42783968 (http://
support.automation.siemens.com/WW/view/es/42783968)
● Comunicación industrial con PG/PC tomo 2, ID de artículo: 42783660 (http://
support.automation.siemens.com/WW/view/es/42783660)

1.6.1.7

IE/PB Link PN IO

Número de dispositivo PROFINET
Referencia
Indicación y parametrización de las propiedades para dispositivos PROFINET IO en el sistema
maestro DP de un IE/PB LINK PN IO en el grupo de parámetros "Propiedades > General >
Número de dispositivo PROFINET".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3449

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parámetros
Para conseguir una correspondencia sencilla, al colocar el esclavo DP en el sistema maestro
DP STEP 7 intenta asignar las mismas cifras para el número de dispositivo y la dirección
PROFIBUS. Por ello, en el ajuste predeterminado está activada la opción "Utilizar la dirección
PROFIBUS como número de dispositivo", siempre que aún no se haya asignado ningún
número de dispositivo que se corresponda con la dirección PROFIBUS actual.
Nota
Números de dispositivo unívocos
Recuerde que los números de dispositivo asignados en el sistema PROFINET IO deben ser
unívocos. También hay que considerar los IO-Devices (esclavos DP) conectados al sistema
maestro DP del IE/PB LINK PN IO .
● Dirección PROFIBUS
Visualización de las direcciones PROFIBUS de los esclavos DP conectados al sistema
maestro DP.
● Nombre
Visualización de los nombres de dispositivo de los esclavos DP conectados al sistema
maestro DP. No puede modificarse aquí.
● Número de dispositivo PROFINET
Visualización y selección del número de dispositivo PROFINET de los esclavos DP
conectados al sistema maestro DP. En el ajuste predeterminado, el número de dispositivo
PROFINET se obtiene a partir de la dirección PROFIBUS.
Si se desactiva la opción "Utilizar dirección PROFIBUS como número de equipo" existe la
posibilidad de modificar el número de dispositivo PROFINET. El rango de valores depende
del controlador IO utilizado.
Si tras especificar el número de dispositivo se vuelve a activar la opción "Utilizar dirección
PROFIBUS como número de equipo", el valor se restaura de la forma correspondiente.
● Utilizar dirección PROFIBUS como número de equipo
Si se desactiva la opción existe la posibilidad de modificar el número de dispositivo
PROFINET.
● Arranque priorizado
Provoca una aceleración del arranque del dispositivo PROFINET IO (en este caso del
esclavo DP como dispositivo PROFINET IO). La opción solo puede seleccionarse si el
controlador soporta el arranque priorizado.
Es posible seleccionar la opción en un máximo de ocho esclavos DP conectados al sistema
maestro DP.

3450

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Modos de operación del IE/PB LINK PN IO
Configuración y visualización del modo de operación
Configuración del modo de operación de la transición de red del IE/PB LINK PN IO y
visualización del modo de operación resultante para PROFIBUS DP.
● Ajuste del modo de operación:
Grupo de parámetros "Propiedades > General > Modo de operación"
● Visualización del modo de operación para PROFIBUS DP:
Grupo de parámetros "Propiedades > General > Interfaz DP/MPI > Modo de operación"

Modos de operación de la transición de red
La transición de red IE/PB LINK PN IO se puede utilizar en los siguientes modos de operación:
● Transición de red como proxy de PROFINET IO
Desde el punto de vista del controlador PROFINET IO conectado a Industrial Ethernet no
hay diferencia en el acceso a dispositivos PROFINET IO conectados a Industrial Ethernet
y a esclavos PROFIBUS DP conectados a PROFIBUS DP.
En este caso, el IE/PB LINK PN IO adopta el papel de proxy (modo de operación DP
"Maestro DP" activo) para los esclavos DP conectados a PROFIBUS DP.
● Transición de red en modo estándar
En este modo de operación existen las siguientes posibilidades de uso
– Comunicación PG/OP
La comunicación PG/OP permite cargar programas y datos de configuración para
realizar funciones de test y diagnóstico, así como para manejar y observar (sistemas
HMI) una instalación.
– Parametrización de aparatos de campo (routing de registros)
El IE/PB LINK PN IO se puede utilizar como Router para bloques de datos dirigidos a
dispositivos de campo (esclavos DP). De este modo, los dispositivos no conectados
directamente a PROFIBUS y que por lo tanto no tienen acceso directo a los dispositivos
de campo (esclavos DP) pueden transmitir bloques de datos a los dispositivos de campo
vía IE/PB LINK PN IO.
Una herramienta que genera este tipo de registros para la parametrización de aparatos
de campo es, por ejemplo, SIMATIC PDM (Process Device Manager).
– Transición de red a un sistema maestro DP con equidistancia
El IE/PB LINK PN IO ejerce de transición de red entre Ethernet y los dispositivos de
campo de un sistema maestro DP. El IE/PB LINK PN IO funciona como dispositivo activo
junto con un maestro DP de un PROFIBUS parametrizado como equidistante.
– Conexiones S7 comunes a varias subredes para modo HMI
El IE/PB LINK PN IO transmite la comunicación a través de conexiones S7.
Este servicio se utiliza, por ejemplo, en aplicaciones HMI (estaciones PC).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3451

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Routing S7 a través de IE/PB LINK PN IO V2.1 (6GK1411‑5AB00)
En los casos siguientes no es posible un routing a través del IE/PB LINK PN IO:
● routing S7 entre dos CPU de S7-1500
● routing S7 de conexiones de programadora con CPU de S7-1200/1500
● routing S7 de conexiones HMI con CPU de S7-1200/1500
Este comportamiento afecta al IE/PB LINK con versión de firmware V2.1 (6GK1 411-5AB00).

Consulte también
Configuración con IE/PB-Link PN IO (Página 3116)

3452

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

1.6.2

Sistemas de identificación

1.6.2.1

Sistemas RFID

Módulos de comunicación
Módulo de comunicación RF120C
Grupo de parámetros "Lectores"
En este grupo de parámetros se pueden configurar todos los parámetros del RF120C
específicos de lector.
Tabla 1-179 Parámetros del grupo "Lector"
Parámetro

Valor del parámetro

Valor predetermina‐
do

Descripción

Avisos de
diagnóstico

Ninguno

Hard errors

Con este parámetro se ajusta si deben notificar‐
se avisos de diagnóstico de hardware.

Hard errors

● Ninguno:
No se generan más alarmas además del
diagnóstico estándar.
● Hard errors:
Los errores graves de hardware se notifican
mediante el diagnóstico S7.

Modo de usuario

Perfil Ident

Perfil Ident

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se selecciona el bloque:
● Perfil de identificación:
En el controlador se utiliza el bloque de
programa para el perfil Ident.

Sistema/dispositivo de
identificación

RF200 general
RF290R
RF300 general
RF380R

RF300 general

Selección del sistema/dispositivo de identifica‐
ción conectado. El grupo de parámetros "Siste‐
ma de identificación" se adapta a la selección
realizada.

RF600
SLG D10S
SLG D11S/D12S
MOBY U
Lector general
Parámetros vía FB / lec‐
tores ópticos

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3453

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Sistema/dispositivo de identificación"
Este grupo de parámetros permite configurar los siguientes parámetros del lector en función
de los parámetros básicos ajustados.
Tabla 1-180 Sinopsis de los "Parámetros del lector"
Para‐
metriza‐
ción del
lector
con "Pa‐
ráme‐
tros bá‐
sicos"

Veloci‐
dad de
trans‐
feren‐
cia

Modo
MOB
Y

Tiem‐
po de
espe‐
ra

Con‐
trol
de
pre‐
sen‐
cia

Re‐
se‐
tear
el
LED
de
error

Po‐
ten‐
cia
HF

Limi‐
ta‐
ción
del al‐
cance

Núme‐
ro
máx.
de
trans‐
ponde‐
dores

RF200
general

✓

-

-

✓

✓

-

-

✓

RF290
R

✓

-

-

✓

✓

✓

-

RF300
general

✓

-

-

✓

✓

-

RF380
R

✓

-

-

✓

✓

RF600

✓

-

-

✓

SLG
D10S

✓

-

-

SLG
D11S/
D12S

✓

-

MOBY
U

✓

Lector
general
Pará‐
metros
vía FB /
lectores
ópticos

3454

Tipo de
trans‐
ponde‐
dor

Tipo
de
lector

Modo
de
ope‐
ra‐
ción
BE‐
RO

Tiem‐
po de
BE‐
RO

Secuencia
de bytes
del pará‐
metro Re‐
set [hex]

✓

-

-

-

-

✓

✓

-

-

-

-

-

✓

✓

-

-

-

-

✓

-

✓

✓

-

-

-

-

✓

-

-

✓

-

✓

-

-

-

✓

✓

✓

-

✓

✓

-

-

-

-

-

✓

✓

✓

-

✓

✓

-

-

-

-

-

✓

✓

✓

-

✓

-

-

-

✓

✓

-

✓

-

-

-

-

-

-

-

-

-

-

-

✓

✓

✓

-

-

-

-

-

-

-

-

-

-

-

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Tabla 1-181 Parámetros del grupo "Sistema/dispositivo de identificación"
Parámetro

Valor del parámetro

Valor predetermina‐
do

Descripción

Velocidad de
transferencia

19,2 kBd

115,2 kBd

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Tenga en cuenta que el valor que se indica aquí
se aplica automáticamente desde la configura‐
ción de los dispositivos conectados.

57,6 kBd
115,2 kBd

Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.
Si hay un lector RFID conectado: tras cambiar la
velocidad de transferencia es necesario desco‐
nectar y volver a conectar el lector (desconectar/
conectar la tensión).
Con un lector óptico conectado: la velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el firmware del lector.
Modo MOBY

RF200/RF300/RF600;
RF200/RF300/
MV400/MV500; MOBY U/ RF600; MV400/
D
MV500; MOBY U/D

Con este parámetro se ajusta el modo de ope‐
ración del módulo de comunicación.

Tiempo de espera

0 - 1400 ms

Tiempo en standby (scanning_time) para el
transpondedor.

0 ms

Si el transpondedor recibe otro comando antes
de que finalice el tiempo en standby, este puede
procesarse inmediatamente. Si el transponde‐
dor recibe un comando una vez finalizado el
tiempo en standby, su procesamiento se retarda
según el "sleep_time" del transpondedor.
Control de presencia

Activado

Activado

Desactivado (campo HF
activado)

Activado = se notifica la presencia de un trans‐
pondedor en cuanto hay uno en el campo de
antena del lector.
Desactivado (campo HF activado) = se suprime
la indicación de presencia en el FB. De todas
formas, la antena del lector sigue conectada
mientras no se desconecte por medio de un co‐
mando.

Desactivado (campo HF
desactivado)

Desactivado (campo HF desactivado) = la ante‐
na solo se conecta cuando se envía un comando
y después vuelve a desconectarse.
Resetear el LED de
error

Activado

Activado

Desactivado

Activado = cada reset del FB provoca el reset del
parpadeo del LED de error en el módulo de co‐
municación.
Desactivado = el LED de error indica siempre el
último error. Solo es posible resetear la indica‐
ción desconectando el módulo de comunicación.

Potencia HF 1)

0,50 ... 5,00

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

1,00

Ajuste de la potencia de salida del lector.

1,25

Los valores seleccionables dependen del dispo‐
sitivo conectado.

3455

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor del parámetro

Valor predetermina‐
do

Descripción

Limitación del alcance

0,2 m

1,5 m

Limitación del alcance de radiación

Número máx. de trans‐ 1 ... 40
pondedores

1

Número de transpondedores esperados en el
campo de la antena.

Tipo de transpondedor

1)

1)

Selección de los tipos de transpondedor utiliza‐
dos. La selección depende del dispositivo co‐
nectado.

Tipo de lector 1)

RF620R ETSI

RF620R ETSI

Selección del lector utilizado.

0,5 m
1,0 m
1,5 m
2,0 m
2,5 m
3,0 m
3,5 m

La selección depende del dispositivo conectado.

Cuando se selecciona un lector se abre el grupo
de parámetros "Tipo de lector". Los parámetros
están descritos en la tabla siguiente.

RF620R FCC
RF620R CMIIT
RF630R ETSI
RF630R FCC
RF630R CMIIT
Modo de operación BE‐ Sin BERO
RO
1 o 2 BEROs
1.er BERO activado, 2.º
BERO desactivado
Sincronización por cone‐
xión de cable

Sin BERO

● Sin BERO
Los lectores no se sincronizan
● 1 o 2 BEROs
Los BERO tienen una combinación lógica O
entre sí. Mientras dure la activación de un
BERO el campo de antena estará conectado.
● 1.er BERO activado, 2.º BERO desactivado
1.er BERO activado, 2.º BERO desactivado
= el primer BERO activa el campo de antena
y el segundo BERO lo desactiva.
Si hay dos BEROs y está parametrizado
"Tiempo de BERO en s", el campo de antena
se desactivará automáticamente si el
segundo BERO no conmuta dentro de este
tiempo de BERO. Si no está parametrizado
"Tiempo de BERO en s", el campo de antena
permanece activado hasta que se activa el
segundo BERO.
● Sincronización por conexión de cable
Activar la sincronización del lector mediante
una conexión por cable (consulte el manual
de configuración, montaje y servicio técnico
de MOBY U).

3456

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor del parámetro

Valor predetermina‐
do

Descripción

Tiempo de BERO

0 ... 255 s

0s

Solo puede ajustarse si el modo de operación
BERO está ajustado a "1.er BERO activado, 2.º
BERO desactivado".
● 0
La vigilancia de tiempo está desactivada.
Para la desconexión de campo se requiere el
2.º BERO
● 1 ... 255 s
Tiempo de conexión para el campo del lector

Secuencia de bytes
del parámetro Reset
[hex]
1)

1)

1)

Representación hexadecimal de la secuencia de
bytes del parámetro Reset del lector.

Encontrará una descripción completa de estos parámetros en los apartados siguientes.

El parámetro "Potencia HF"
Los valores seleccionables dependen del valor indicado en el parámetro "Sistema/dispositivo
de identificación".
● RF290R
– Rango de valores: 0,50 ... 5,00 W
– Valor predeterminado: 1,00 W
● RF380R
– Rango de valores: 0,50 ... 2,00 W
– Valor predeterminado: 1,25 W

El parámetro "Tipo de transpondedor"
Selección de los transpondedores utilizados. La selección depende del valor indicado en el
parámetro "Sistema/dispositivo de identificación". Se pueden seleccionar los siguientes tipos
de transpondedor:
Tabla 1-182 Opciones de selección "Tipo de transpondedor"
Parámetro "Sistema/dispositivo de identificación"

Posibles valores

RF200 general

ISO 15693

RF290R
RF300 general

RF300

RF380R

ISO 15693

SLG D10S

I Code

SLG D11S/D12S

ISO 15693
ISO-FRAM

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3457

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

El parámetro "Secuencia de bytes del parámetro Reset [hex]"
Esta función permite indicar los parámetros de reset en representación hexadecimal. Este
ajuste está dirigido exclusivamente a usuarios profesionales.
Están disponibles los siguientes parámetros de Reset:
Tabla 1-183 Parámetros de Reset
Byte

1

2...5 1)

6

7...8

9

10

11

12

13...14

15

16

Valor

0x04

0x00

0x0A

0x00

scan‐
ning_
time

param

op‐
tion_1

distance_
limiting

multitag

field_on_
control

field_on_
time

1)

En el módulo de comunicación RF180C V2.2 y superior en combinación con MOBY U, el byte 4 está preasignado a la
semana natural y el byte 5, al año.

Grupo de parámetros "Tipo de lector" (solo para RF600)
En el grupo de parámetros "Tipo de lector" se ajustan parámetros específicos para el "Tipo de
lector" seleccionado en "Sistema de identificación".
Tabla 1-184 Parámetros del grupo "Tipo de lector"
Parámetro

Valor del parámetro

Valor predetermina‐
do

Descripción

Perfil inalámbrico

-

-

Selección del respectivo perfil de radiofrecuen‐
cia para ETSI, FCC o CMIT.

Modo Multitag

UID = EPC-ID
(8 bytes)

UID = EPC-ID
(8 bytes)

● UID = EPC-ID (8 bytes)
UID de 8 bytes de los bytes 5-12 de la EPCID de 12 bytes de longitud

UID = Handle-ID
(4 bytes)

● UID = Handle-ID (4 bytes)
UID de 4 bytes como Handle-ID para
accesos a transpondedores con una EPCID de cualquier longitud

UID = 0 (Singletag)

Intelligent Singletag Mode
(ISTM)

Activado

Black list

Activado

Desactivado

Activación o desactivación del algoritmo "Inte‐
lligent Singletag Mode ISTM" 1)

Desactivado

Activación o desactivación de la "Blacklist" 1)

Desactivado
Desactivado

Flujo óptico antena interna
(RF620R)

0 ... B

4

Ajuste del flujo óptico para la antena interna 1) 2)

Antena interna (RF620R)

-

-

Activar/desactivar la antena interna.
En el RF620R solo puede ajustarse una ante‐
na, la interna o la externa.

Potencia de emisión cone‐
xión de antena externa
(RF620R)

0 ... 9

Antena externa (SetAnt nece‐ sario) (RF620R)

3458

4

Ajuste de la potencia de emisión para la antena
externa 1) 2)

-

Activar/desactivar la antena externa.
En el RF620R solo puede ajustarse una ante‐
na, la interna o la externa.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor del parámetro

Valor predetermina‐
do

Descripción

Potencia de emisión ANT 1
(RF630R)

0 ... 9

4

Ajuste de la potencia de emisión para la antena
11) 2)

Potencia de emisión ANT 2
(RF630R)

0 ... 9

4

Ajuste de la potencia de emisión para la antena
21) 2)

Velocidad de comunicación

Detección segura

Detección segura

1)

Desactivado

Activación o desactivación del "Tag Hold" 1)

Desactivado

Activación o desactivación del "Scanning Mo‐
de" 1)

-

Selección de los canales de radiofrecuencia
que deben utilizarse 1)

Detección rápida
Tag Hold

Activado
Desactivado

Scanning Mode

Activado

Asignación de canal (solo
con perfil inalámbrico ETSI)

-

Desactivado

1)

Encontrará más información en el "Manual de parametrización RF620R/RF630R". *

2)

Encontrará los valores de la potencia de emisión y el flujo óptico de las antenas en la tabla siguiente.

* Encontrará el manual de parametrización RF620R/RF630R aquí.
Tabla 1-185 Potencia de emisión y flujo óptico de las antenas
Valor Hex

RF630R
Potencia de
emisión

RF620R
Flujo óptico (antena interna)

RF620R
Potencia de
emisión

ETSI

FCC

CMIIT

dBm / (mW)

dBm / (mW)
ERP

dBm / (mW)
EIRP

dBm / (mW)
ERP

dBm / (mW)

0

18 / (63)

18 / (63)

20 / (100)

18 / (65)

18 / (63)

1

19 / (79)

19 / (79)

21 / (126)

19 / (79)

19 / (79)

...

...

...

...

...

...

4

22 / (158)

22 / (158)

24 / (251)

22 / (158)

22 / (158)

...

...

...

...

...

...

9

27 / (501)

27 / (501)

29 / (794)

27 / (501)

27 / (501)

A

27 / (501)

28 / (631)

30 / (1000)

28 / (631)

27 / (501)

B (...F)

27 / (501)

29 / (794)

31 / (1259)

29 / (794)

27 / (501)

Módulo de comunicación RF170C
Módulo de comunicación para sistemas de identificación - RF170C, RS422/RS232
El módulo RF170C RS422/RS232 es un módulo de comunicación para sistemas de
identificación del sistema de periferia ET 200pro. Existe la posibilidad de montar y utilizar
varios módulos de comunicación RF170C RS422/RS232 en una CPU IM 154-8 y en un módulo
de interfaz IM 154-1 DP, IM 154-2 DP High Feature o IM 154-4 PN High Feature de ET 200pro.
Un RF170C RS422/RS232 permite conectar como máximo dos lectores. Los lectores
conectados se procesan en paralelo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3459

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Los bloques de función FB 45, FC 45 y el bloque de programa para el perfil Ident / perfil
normalizado RFID hacen posible una programación sencilla utilizando las herramientas
SIMATIC S7. Los bloques de función FB 45, FC 45 y el bloque de programa para el perfil Ident /
perfil normalizado RFID pueden utilizarse tanto en S7-300 como en S7-400. Para los
controladores S7-1200 y S7-1500 hay que utilizar el perfil de identificación.
Se accede a los datos del transpondedor a través del direccionamiento normal o del
direccionamiento por filehandler.

Direccionamiento físico del transpondedor
El direccionamiento físico de un transpondedor también se denomina direccionamiento
normal. El usuario crea él mismo la estructura de datos de sus transpondedores. Determina en
qué dirección física se escriben los datos y cuáles. El direccionamiento de la memoria del
transpondedor suele empezar en la dirección 0x0000 y termina en una dirección final
equivalente al tamaño de la memoria del transpondedor.

Direccionamiento del transpondedor por filehandler
En el direccionamiento por filehandler, el usuario indica un nombre de archivo para acceder a
sus datos. El nombre de archivo está compuesto por ocho caracteres ASCII. El filehandler
gestiona por su cuenta los datos de usuario que hay en el transpondedor. El usuario no tiene
que configurar estructuras de datos en el transpondedor.

3460

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Parámetros del módulo"
En este grupo de parámetros se configuran todos los parámetros del RF170C RS422/RS232
relativos al módulo.
Tabla 1-186 Parámetros del grupo "Parámetros del módulo"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Modo de usuario

Perfil Ident/perfil normali‐
zado RFID

Perfil Ident/perfil nor‐ La selección depende del módulo de comunica‐
malizado RFID
ción y del sistema de identificación utilizados.
Con este parámetro se selecciona el bloque:

FB 45 / FC 45

Descripción

● Perfil Ident/perfil normalizado RFID:
En el controlador se utiliza el bloque de
programa para el perfil Ident/perfil
normalizado RFID.

FB 55 / FC 55

● FB 45 / FC 45:
Modo Singletag. En el controlador se utiliza
el FB 45 (PROFIBUS/PROFINET) o la FC 45
(PROFIBUS).
● FB 55 / FC 55:
Modo Multitag. En el controlador se utiliza el
FB 55 (PROFIBUS/PROFINET) o la FC 55
(PROFIBUS).
Modo MOBY

RF200/RF300/RF600;
RF200/RF300/
MV400/MV500; MOBY U/ RF600; MV400/
D
MV500; MOBY U/D
MOBY I/E

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta el modo de ope‐
ración del módulo de comunicación.
● RF200/RF300/RF600; MV400/MV500;
MOBY U/D

MV300
Protocolo Freeport

● MOBY I/E

RF300 Filehandler

● MV300
● Protocolo Freeport
● RF300 Filehandler
Direccionamiento normal: el transpondedor se
direcciona con direcciones físicas.

Velocidad de
transferencia

19,2 kBd
57,6 kBd
115,2 kBd

115,2 kBd

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.
Si hay un lector conectado: tras cambiar la velo‐
cidad de transferencia es necesario desconectar
y volver a conectar el lector (desconectar/conec‐
tar la tensión).
Con un lector óptico conectado: la velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el firmware del lector.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3461

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Diagnóstico

Valor de parámetro

Valor predetermina‐
do

Descripción

Ninguno

Ninguno

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta si deben notificar‐
se avisos de diagnóstico de hardware.

Hard Errors

● Ninguno:
No se generan más alarmas además del
diagnóstico estándar.
● Hard Errors:
Los errores graves de hardware se notifican
mediante el diagnóstico S7.
Supresión del
LED de error

Ninguno

Ninguno

Canal 1

El módulo de comunicación dispone de dos ca‐
nales a los que pueden conectarse lectores /
lectores ópticos. Si solo se utiliza uno de los ca‐
nales, el LED de error del otro canal parpadea
continuamente. La supresión permite desactivar
el LED de error del canal que no se utiliza.

Canal 2

Interfaz

RS232
RS422

3462

Desactivación del LED de error (ERR) de un ca‐
nal.

--

Selección del tipo de interfaz que utiliza el hard‐
ware conectado (lectores / lectores ópticos).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros " Telegrama"
El grupo de parámetros "Telegrama" solo se muestra si se ha seleccionado el valor de
parámetro "Protocolo Freeport" en el parámetro "MOBY Mode" de los parámetros del módulo.
En este grupo de parámetros se configuran todos los parámetros específicos del "Protocolo
Freeport".
Tabla 1-187 Parámetros del grupo "Telegrama"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Bits de datos

7

8

Selección del número de bits en los que se ma‐
pea un carácter.

Sin

Selección de la paridad.

8
Paridad

Sin

Una secuencia de bits de datos puede ampliarse
con un bit de paridad. Con su valor "0" o "1", el bit
de paridad complementa la suma de todos los
bits (bits de datos y bits de paridad) en un estado
definido. Con ello aumenta la seguridad de los
datos.

Impar
Par
Valor fijo 1
Valor fijo 0

● Sin:
Los datos se envían sin bit de paridad.
● Impar:
El bit de paridad se ajusta de modo que la
suma de los bits de datos (incl. bit de
paridad) sea impar con el estado lógico "1".
● Par:
El bit de paridad se ajusta de modo que la
suma de los bits de datos (incl. bit de
paridad) sea par con el estado lógico "1".
● Valor fijo 1:
El bit de paridad se fija al valor "1".
● Valor fijo 0:
El bit de paridad se fija al valor "0".
Bits de parada

1
2

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

1

Selección del número de bits de parada que se‐
ñalan el final de un carácter.
Los bits de parada se adjuntan a todos los ca‐
racteres transferidos en el momento de realizar
la transferencia.

3463

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor de parámetro

Delimitador de fin

Transcurrido el tiempo de
retardo de caracteres

Valor predetermina‐
do

Descripción

Transcurrido el tiem‐ Especificación del delimitador de fin de un tele‐
po de retardo de ca‐ grama recibido:
Tras recibir un número fi‐ racteres
● Transcurrido el tiempo de retardo de
jo de caracteres
caracteres:
El telegrama no tiene ni longitud fija ni
Tras recibir el (los) carác‐
ter(es) de fin:
caracteres de fin definidos. El fin de un
telegrama está determinado por un hueco en
la secuencia de caracteres. El tamaño de
dicho hueco se define mediante el tiempo de
retardo de caracteres.
● Tras recibir un número fijo de caracteres:
La longitud de los telegramas recibidos es
siempre la misma. Cuando se reciben datos,
el fin del telegrama se detecta cuando se ha
recibido el número parametrizado de
caracteres.
● Tras recibir el (los) carácter(es) de fin:
Al final del telegrama hay uno o dos
caracteres de fin definidos. Cuando se
reciben datos, el fin del telegrama se detecta
cuando se ha recibido el carácter de fin
parametrizado.

Número de caracteres
de fin

1

1.er carácter de fin

0...7F / 0...FF

1

Selección del número de caracteres de fin.
Es posible configurar como máximo 2 caracteres
de fin. Cuando se reciben datos, el fin del tele‐
grama se detecta cuando se ha recibido la com‐
binación seleccionada de caracteres de fin.

2

3

Entrada del primer carácter de fin de un máximo
de dos para el criterio de fin "Tras recibir el/los
carácter(es) de fin". El carácter de fin seleccio‐
nado o la combinación seleccionada de caracte‐
res de fin limita la longitud del telegrama en
cuestión.
Depende del parámetro "Bits de datos"

2.º carácter de fin

0...7F / 0...FF

0

Entrada del segundo carácter de fin de un máxi‐
mo de dos para el criterio de fin "Tras recibir el/
los carácter(es) de fin". El carácter de fin selec‐
cionado o la combinación seleccionada de ca‐
racteres de fin limita la longitud del telegrama en
cuestión.
Depende del parámetro "Bits de datos"

3464

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Longitud del telegrama 1...233 / 1...229

233

Entrada de la longitud del telegrama en bytes
para el criterio de fin "Tras recibir un número fijo
de caracteres".

Tiempo de retardo de
caracteres

15

Entrada del tiempo [ms], que puede transcurrir
hasta detectar un fin de telegrama. Selección el
tiempo de retardo de caracteres en función del
comportamiento de envío del interlocutor de la
comunicación. El tiempo de retardo de caracte‐
res está limitado a un valor mínimo que depende
de la velocidad de transferencia de datos.

0...65535

Recuerde que el driver ASCII también realiza
una pausa entre dos telegramas al enviar.

Grupo de parámetros "Direcciones E/S"
Entradas
1. Asigne una dirección inicial al módulo.
2. Si desea asignar el área de direcciones a una memoria imagen parcial de proceso,
seleccione la memoria imagen parcial de proceso que desee en la lista desplegable
"Memoria imagen de proceso".

Salidas
1. Asigne una dirección inicial al módulo.
2. Si desea asignar el área de direcciones a una memoria imagen parcial de proceso,
seleccione la memoria imagen parcial de proceso que desee en la lista desplegable
"Memoria imagen de proceso".
Nota
Las direcciones de entrada y salida deben ser idénticas.

Módulo de comunicación RF180C
Módulo de comunicación para sistemas de identificación - RF180C
El módulo RF180C es un módulo de comunicación para sistemas de identificación para
PROFINET IO.
Un RF180C permite conectar como máximo dos lectores. Los lectores conectados se
procesan en paralelo.
Los bloques de función FB 45, FB 55 y el bloque de programa para el perfil normalizado RFID
hacen posible una programación sencilla utilizando las herramientas SIMATIC S7. Los

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3465

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
bloques de función FB 45, FB 55 y el bloque de programa para el perfil normalizado RFID
pueden utilizarse tanto en S7-300 como en S7-400.
Se accede a los datos del transpondedor a través del direccionamiento normal o del
direccionamiento por filehandler.

Direccionamiento físico del transpondedor
El direccionamiento físico de un transpondedor también se denomina direccionamiento
normal. El usuario crea él mismo la estructura de datos de sus transpondedores. Determina en
qué dirección física se escriben los datos y cuáles. El direccionamiento de la memoria del
transpondedor suele empezar en la dirección 0x0000 y termina en una dirección final
equivalente al tamaño de la memoria del transpondedor.

Direccionamiento del transpondedor por filehandler
En el direccionamiento por filehandler, el usuario indica un nombre de archivo para acceder a
sus datos. El nombre de archivo está compuesto por ocho caracteres ASCII. El filehandler
gestiona por su cuenta los datos de usuario que hay en el transpondedor. El usuario no tiene
que configurar estructuras de datos en el transpondedor.

3466

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Parámetros del módulo"
En este grupo de parámetros se configuran todos los parámetros del RF180C relativos al
módulo.
Tabla 1-188 Parámetros del grupo "Parámetros del módulo"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Modo de usuario

FB 45

FB 45

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se selecciona el bloque:

FB 55
FB 56

● FB 45:
Modo Singletag. En el controlador se utiliza
el FB 45 (PROFIBUS/PROFINET).

Perfil normalizado RFID

● FB 55:
Modo Multitag. En el controlador se utiliza el
FB 55 (PROFIBUS/PROFINET).
● FB 56:
Modo de operación Multitag. En el
controlador se utiliza el FB 56 (PROFIBUS/
PROFINET).
● Perfil normalizado RFID:
En el controlador se utiliza el bloque de
programa para el perfil normalizado RFID.
Modo MOBY

Direccionamiento normal
MOBY I/E
Filehandler MOBY I
RF200/RF300/RF600; di‐
reccionamiento normal
MOBY U/D
Filehandler MOBY U
RF300 Filehandler

RF200/RF300/
RF600; direcciona‐
miento normal
MOBY U/D

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta el modo de ope‐
ración del módulo de comunicación.
● Direccionamiento normal MOBY I/E
● Filehandler MOBY I
● RF200/RF300/RF600; direccionamiento
normal MOBY U/D
● Filehandler MOBY U
● RF300 Filehandler
Direccionamiento normal: el transpondedor se
direcciona con direcciones físicas.
Filehandler: el transpondedor debe formatearse
antes de usarse.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3467

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Velocidad de
transferencia

19,2 kBd

115,2 kBd

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.

57,6 kBd
115,2 kBd

Si hay un lector conectado: tras cambiar la velo‐
cidad de transferencia es necesario desconectar
y volver a conectar el lector (desconectar/conec‐
tar la tensión).
Con un lector óptico conectado: la velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el firmware del lector.
Diagnóstico

Ninguno

Ninguno

Hard Errors

Con este parámetro se ajusta si deben notificar‐
se avisos de diagnóstico de hardware.
● Ninguno:
No se generan más alarmas además del
diagnóstico estándar.

Hard/Soft Errors

● Hard Errors:
Los errores graves de hardware se notifican
mediante el diagnóstico S7.
● Hard/Soft Errors:
Los errores graves de hardware y los errores
que se producen durante la ejecución de
comandos se notifican mediante el
diagnóstico S7.
Supresión del
LED de error

Ninguno
Canal 1
Canal 2

Ninguno

Desactivación del LED de error (ERR) de un ca‐
nal.
El módulo de comunicación dispone de dos ca‐
nales a los que pueden conectarse lectores /
lectores ópticos. Si solo se utiliza uno de los ca‐
nales, el LED de error del otro canal parpadea
continuamente. La supresión permite desactivar
el LED de error del canal que no se utiliza.

Módulo de comunicación ASM 456
Módulo de comunicación para sistemas de identificación - ASM 456
El módulo ASM 456 es un módulo de comunicación para sistemas de identificación para
PROFIBUS DP V1.
Un ASM 456 permite conectar como máximo dos lectores. Los lectores conectados se
procesan en paralelo.
Los bloques de función FB 45, FC 45, FB 55, FC 55, FC 56 y el bloque de programa para el
perfil de identificación / perfil normalizado RFID hacen posible una programación sencilla
utilizando las herramientas SIMATIC S7. Los bloques de función FB 45, FC 45, FB 55, FC 55,
FC 56 y el bloque de programa para el perfil de identificación / perfil normalizado RFID pueden

3468

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
utilizarse tanto en S7-300 como en S7-400. Para los controladores S7-1200 y S7-1500 hay que
utilizar el perfil de identificación.
Se accede a los datos del transpondedor a través del direccionamiento normal o del
direccionamiento por filehandler.

Direccionamiento físico del transpondedor
El direccionamiento físico de un transpondedor también se denomina direccionamiento
normal. El usuario crea él mismo la estructura de datos de sus transpondedores. Determina en
qué dirección física se escriben los datos y cuáles. El direccionamiento de la memoria del
transpondedor suele empezar en la dirección 0x0000 y termina en una dirección final
equivalente al tamaño de la memoria del transpondedor.

Direccionamiento del transpondedor por filehandler
En el direccionamiento por filehandler, el usuario indica un nombre de archivo para acceder a
sus datos. El nombre de archivo está compuesto por ocho caracteres ASCII. El filehandler
gestiona por su cuenta los datos de usuario que hay en el transpondedor. El usuario no tiene
que configurar estructuras de datos en el transpondedor.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3469

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Parámetros específicos del dispositivo"
En este grupo de parámetros se configuran todos los parámetros del ASM 456 relativos al
módulo.
Tabla 1-189 Parámetros del grupo "Parámetros del módulo"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Modo de usuario

Perfil Ident/perfil normali‐
zado RFID

Perfil Ident/perfil nor‐ La selección depende del módulo de comunica‐
malizado RFID
ción y del sistema de identificación utilizados.
Con este parámetro se selecciona el bloque:

FB 45 / FC 45
FB 55 / FC 55
FC 56

Descripción

● Perfil Ident/perfil normalizado RFID:
En el controlador se utiliza el bloque de
programa para el perfil Ident/perfil
normalizado RFID.
● FB 45 / FC 45:
Modo Singletag. En el controlador se utiliza
el FB 45 (PROFIBUS/PROFINET) o la FC 45
(PROFIBUS).
● FB 55 / FC 55:
Modo Multitag. En el controlador se utiliza el
FB 55 (PROFIBUS/PROFINET) o la FC 55
(PROFIBUS).
● FC 56
Filehandler para S7-300 y S7-400

Modo MOBY

RF200/RF300/RF600;
RF200/RF300/
MV400/MV500; MOBY U/ RF600; MV400/
D
MV500; MOBY U/D
RF680R/RF685R

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta el modo de ope‐
ración del módulo de comunicación.

Direccionamiento normal
MOBY I/E

● RF200/RF300/RF600; MV400/MV500;
MOBY U/D

RF300 Filehandler

● RF680R/RF685R

MOBY U Filehandler

● Direccionamiento normal MOBY I/E

MOBY I Filehandler

● RF300 Filehandler
● MOBY U Filehandler
● MOBY I Filehandler
Direccionamiento normal: el transpondedor se
direcciona con direcciones físicas.
Filehandler: el transpondedor debe formatearse
antes de usarse.

3470

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Velocidad de
transferencia

19,2 kBd

115,2 kBd

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.

57,6 kBd
115,2 kBd

Si hay un lector conectado: tras cambiar la velo‐
cidad de transferencia es necesario desconectar
y volver a conectar el lector (desconectar/conec‐
tar la tensión).
Con un lector óptico conectado: la velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el firmware del lector.
Diagnóstico

Ninguno

Ninguno

Hard Errors
Errores de hardware/soft‐
ware de baja prioridad

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Con este parámetro se ajusta si deben notificar‐
se avisos de diagnóstico de hardware.
● Ninguno:
No se generan más alarmas además del
diagnóstico estándar.

Errores de hardware/soft‐
ware de alta prioridad

● Hard Errors:
Los errores graves de hardware se notifican
mediante el diagnóstico S7.
● Errores de hardware/software de baja
prioridad
Los errores graves de hardware y los errores
que se producen durante la ejecución de
comandos se notifican mediante el
diagnóstico S7. El bit "Ext_Diag" no se activa.
● Errores de hardware/software de alta
prioridad
Los errores graves de hardware y los errores
que se producen durante la ejecución de
comandos se notifican mediante el
diagnóstico S7. El bit "Ext_Diag" se activa.
Supresión del
LED de error

Ninguno
Canal 1
Canal 2

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Ninguno

Desactivación del LED de error (ERR) de un ca‐
nal.
El módulo de comunicación dispone de dos ca‐
nales a los que pueden conectarse lectores /
lectores ópticos. Si solo se utiliza uno de los ca‐
nales, el LED de error del otro canal parpadea
continuamente. La supresión permite desactivar
el LED de error del canal que no se utiliza.

3471

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Módulo de comunicación ASM 475
Información importante sobre ASM 475
Introducción
En un rack del SIMATIC S7-300 es posible insertar y operar un máximo de ocho módulos de
interfaz ASM 475. En una configuración con varios racks (máximo cuatro), el ASM 475 puede
insertarse y operarse en cada uno de ellos. De este modo, la configuración máxima de un
SIMATIC S7-300 permite utilizar 32 ASM 475.
Al ASM 475 se le pueden conectar dos SLG (dispositivos de escritura y lectura) como máximo.
Los SLG conectados se procesan en paralelo. La FC 45 hace posible una programación
sencilla utilizando las herramientas de SIMATIC S7.
La FC 45 puede utilizarse tanto en el S7-300 como en el S7-400.
En el S7-400, el ASM 475 se conecta mediante un ET 200M.
Tenga en cuenta que
● el IM 153-1 debe tener como mínimo el n.º MLFB 6ES7 153-1AA03-0XB0 o 6ES7
153-1AA83-0XB0 y
● el IM 153-2 como mínimo el n.º MLFB 6ES7 153-2AA02-0XB0 o 6ES7 153-2AB01-0XB0
El acceso a los datos MDS se realiza mediante direccionamiento normal.

Direccionamiento físico de la MDS (memoria de datos móvil)
El direccionamiento físico de una MDS también se denomina direccionamiento normal. El
usuario crea por sí mismo la estructura de una MDS. Sabe qué datos están escritos en qué
dirección MDS física. El direccionamiento de la memoria MDS comienza normalmente con la
dirección 0000 hex y termina en una dirección final adecuada al tamaño de la MDS.

Direccionamiento Filehandler de la MDS
En el direccionamiento Filehandler, el usuario indica un nombre de archivo para acceder a sus
datos. Dicho nombre consta de ocho caracteres ASCII. El Filehandler administra
independientemente los datos de usuario en la MDS. El usuario no tiene que crear ninguna
estructura de datos en la MDS.
La MDS debe formatearse antes de usarse.

3472

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Módulo de comunicación RF166C
Módulo de comunicación para sistemas de identificación - RF166C
Los módulos de comunicación SIMATIC RF166C han sido diseñados para el uso en todas las
áreas de automatización. El módulo RF166C es un módulo de comunicación para sistemas de
identificación para PROFIBUS DP. Adicionalmente, el módulo de comunicación dispone de
una interfaz Ethernet para fines de servicio y la comunicación OPC UA. Dependiendo del tipo
de dispositivo se podrán conectar 1 o 2 lectores al módulo de comunicación. Los lectores
conectados se procesan en paralelo.
El bloque de función FB 45 y el bloque de programa para el perfil Ident/perfil normalizado RFID
hacen posible una programación sencilla utilizando las herramientas SIMATIC S7. El bloque
de función FB 45 y el bloque de programa para el perfil Ident/perfil normalizado RFID pueden
utilizarse tanto en S7-300 como en S7-400. Para los controladores S7-1200 y S7-1500 hay que
utilizar el perfil de identificación.
Se accede a los datos del transpondedor a través del direccionamiento normal.

Direccionamiento físico del transpondedor
El direccionamiento físico de un transpondedor también se denomina direccionamiento
normal. El usuario crea la estructura de datos de sus transpondedores. Determina en qué
dirección física se escriben los datos y decide cuáles. El direccionamiento de la memoria del
transpondedor suele empezar en la dirección "0x0000" y termina en una dirección final
equivalente al tamaño de la memoria del transpondedor -1.

Grupo de parámetros "Web Based Management"
En este grupo de parámetros se puede iniciar la Web Based Management.
Tabla 1-190 Parámetros del grupo "Web Based Management"
Parámetro

Descripción

Dirección IP

Introduzca en este campo de entrada la dirección IP del módulo de comunicación. Se necesita para
iniciar el Web Based Management del módulo de comunicación.

Web Based Manage‐
ment

Iniciar la Web Based Management (gestión basada en red) del módulo de comunicación.
La Web Based Management (WBM) ofrece amplias funciones para la configuración del módulo de
comunicación.
Requisitos: El módulo de comunicación está conectado a un PC/una PG mediante la interfaz Et‐
hernet. Recuerde que el WBM no puede iniciarse hasta que al módulo de comunicación se le haya
asignado la dirección IP guardada en el proyecto. Es decir, es necesario que se haya asignado el
nombre de dispositivo y la configuración de TIA debe estar cargada en el controlador SIMATIC.

Grupo de parámetros "Parámetros del módulo" de los submódulos
En este grupo de parámetros se pueden configurar todos los parámetros específicos de
módulo de los lectores conectados. Tenga en cuenta que algunos de los parámetros
siguientes son específicos de un módulo. En algunos tipos de módulos no se muestran todos
los parámetros.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3473

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Si no hay ningún dispositivo conectado a la interfaz X21, hay que asignar un módulo vacío
("Empty") a dicha interfaz.
Tabla 1-191 Parámetros del grupo de parámetros "Parámetros del módulo" de los submódulos
Parámetro

Valor de parámetro

Valor predetermina‐
do

Modo de usuario

Perfil Ident/perfil normali‐
zado RFID

Perfil Ident/perfil nor‐ Con este parámetro se selecciona el bloque:
malizado RFID
● Perfil Ident/perfil normalizado RFID:
En el controlador se utiliza el bloque de
programa para el perfil Ident.

FB 45

Descripción

● FB 45:
Modo Singletag. En el controlador se utiliza
el FB 45 (PROFIBUS/PROFINET).
Modo MOBY

RF200/RF300/RF600;
MV400/MV500; direc.
normal MOBY U/D

RF200/RF300/
RF600; MV400/
MV500; direc. nor‐
mal MOBY U/D

Con este parámetro se ajusta el modo de ope‐
ración del módulo de comunicación.
● RF200/RF300/RF600; MV400/MV500;
direc. normal MOBY U/D
Direccionamiento normal: el transpondedor se
direcciona con direcciones físicas.

Velocidad de
transferencia

19,2 kBd
57,6 kBd

115,2 kBd /
921,6 kBd

115,2 kBd
921,6 kBd

Avisos de
diagnóstico

Ninguno
Hard errors
Hard/Soft Errors

La selección depende del sistema Ident utiliza‐
do. Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.
Con un lector óptico conectado: La velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el lector.

Ninguno

Con este parámetro se ajusta el alcance con el
que se notifican los mensajes de alarma de diag‐
nóstico relativos al radar.
● Ninguno:
No se generan más alarmas.
● Hard errors:
Los errores graves de hardware se notifican
mediante el diagnóstico S7.
● Hard/Soft Errors:
Los errores graves de hardware y los errores
que se producen durante la ejecución de
comandos se notifican mediante el
diagnóstico S7.

3474

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Módulo de comunicación RF18xC/RF18xCI
Módulo de comunicación para sistemas de identificación - RF18xC/RF18xCI
Los módulos de comunicación SIMATIC RF185C, RF186C, RF188C, RF186CI y RF188CI han
sido diseñados para el uso en todas las áreas de la automatización. El módulo RF18xC/
RF18xCI es un módulo de comunicación para sistemas de identificación para PROFINET IO
y OPC UA. Dependiendo del tipo de dispositivo se podrán conectar 1, 2 o 4 lectores al módulo
de comunicación. Los lectores conectados se procesan en paralelo. Los módulos de
comunicación RF18xCI disponen adicionalmente de una interfaz IO a la que pueden
conectarse un máximo de 8 entradas o salidas.
El bloque de función FB 45 y el bloque de programa para el perfil Ident/perfil normalizado RFID
hacen posible una programación sencilla utilizando las herramientas SIMATIC S7. El bloque
de función FB 45 y el bloque de programa para el perfil Ident/perfil normalizado RFID pueden
utilizarse tanto en S7-300 como en S7-400. Para los controladores S7-1200 y S7-1500 hay que
utilizar el perfil de identificación.
Se accede a los datos del transpondedor a través del direccionamiento normal.

Direccionamiento físico del transpondedor
El direccionamiento físico de un transpondedor también se denomina direccionamiento
normal. El usuario crea él mismo la estructura de datos de sus transpondedores. Determina en
qué dirección física se escriben los datos y cuáles. El direccionamiento de la memoria del
transpondedor suele empezar en la dirección "0x0000" y termina en una dirección final
equivalente al tamaño de la memoria del transpondedor -1.

Grupo de parámetros "Web Based Management"
En este grupo de parámetros se puede iniciar la Web Based Management.
Tabla 1-192 Parámetros del grupo "Web Based Management"
Parámetro

Descripción

Web Based Manage‐
ment

Iniciar la Web Based Management (gestión basada en red) del módulo de comunicación.
La Web Based Management (WBM) ofrece amplias funciones para la configuración del módulo de
comunicación.
Nota: La WBM no puede iniciarse hasta que se le haya asignado al módulo de comunicación la
dirección IP guardada en el proyecto. Es decir, es necesario que se haya asignado el nombre de
dispositivo y la configuración de TIA debe estar cargada en el controlador SIMATIC.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3475

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Administración de configuración"
En este grupo de parámetros se pueden cargar o guardar datos de configuración.
Tabla 1-193 Parámetros del grupo "Administración de configuración"
Parámetro

Descripción

Nombre de usuario

1)

Nombre de usuario de un usuario creado en el módulo de comunicación
Recuerde que el usuario debe tener los derechos necesarios.

Contraseña

Entrada de la contraseña del usuario

1)

Carga de la configura‐
ción en el dispositivo

Cargar datos de configuración del proyecto STEP 7 en el módulo de comunicación.

Almacenamiento de la Guardar los datos de configuración del módulo de comunicación en el proyecto STEP 7 actual.
configuración en el pro‐
yecto
1)

El nombre de usuario y la contraseña solo deben introducirse si la administración de usuarios de la WBM está activada.

Requisitos
Para poder cargar o guardar datos de configuración deben cumplirse los siguientes requisitos:
● En el parámetro "Interfaz PROFINET [X1]" está registrada la dirección IP correcta del
módulo de comunicación.
● El usuario registrado tiene los derechos necesarios para realizar la descarga o la carga.
Nota
El nombre de usuario y la contraseña solo son necesarios si la administración de usuarios está
activada
Los campos de texto "Nombre de usuario" y "Contraseña" solo deben rellenarse si la
administración de usuarios del CM está activada en la WBM.

Grupo de parámetros "Parámetros del módulo"
En este grupo de parámetros se configuran todos los parámetros del módulo de comunicación
específicos del módulo.
Tabla 1-194 Parámetros del grupo "Parámetros del módulo"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Alarma de diagnóstico

Off

Off

Activar/desactivar los mensajes de diagnóstico
del módulo de comunicación.

On

3476

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Parámetros del módulo" de los submódulos
En este grupo de parámetros se pueden configurar todos los parámetros específicos de
módulo de los lectores conectados.
Tabla 1-195 Parámetros del grupo de parámetros "Parámetros del módulo" de los submódulos
Parámetro

Valor de parámetro

Valor predetermina‐
do

Modo de usuario

Perfil Ident/perfil normali‐
zado RFID

Perfil Ident/perfil nor‐ Con este parámetro se selecciona el bloque:
malizado RFID
● Perfil Ident/perfil normalizado RFID:
En el controlador se utiliza el bloque de
programa para el perfil Ident.

FB 45

Descripción

● FB 45:
Modo Singletag. En el controlador se utiliza
el FB 45 (PROFIBUS/PROFINET).
Modo MOBY

RF200/RF300/RF600;
MV400/MV500; direc.
normal MOBY U/D

RF200/RF300/
RF600; MV400/
MV500; direc. nor‐
mal MOBY U/D

Con este parámetro se ajusta el modo de ope‐
ración del módulo de comunicación.
● RF200/RF300/RF600; MV400/MV500;
direc. normal MOBY U/D
Direccionamiento normal: el transpondedor se
direcciona con direcciones físicas.

Velocidad de
transferencia

19,2 kBd
57,6 kBd
115,2 kBd

115,2 kBd

La selección depende del sistema Ident utiliza‐
do. Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.
Con un lector óptico conectado: La velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el lector.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3477

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Avisos de
diagnóstico

Ninguno

Ninguno

Con este parámetro se ajusta el alcance con el
que se notifican los mensajes de alarma de diag‐
nóstico relativos al radar.

Hard errors
Hard/Soft Errors

● Ninguno:
No se generan más alarmas.
● Hard errors:
Los errores graves de hardware se notifican
mediante el diagnóstico S7.
● Hard/Soft Errors:
Los errores graves de hardware y los errores
que se producen durante la ejecución de
comandos se notifican mediante el
diagnóstico S7.

Modo IO 1)

Entrada

Entrada

Salida
IO-Link

Este parámetro define el modo de la interfaz IO
del módulo de comunicación:
● Entrada:
Entrada digital individual
● Salida:
Salida digital individual
● IO-Link:
Modo para la conexión de un dispositivo IOLink con entradas y salidas digitales.

1)

Este parámetro solo está incluido en los módulos de comunicación CI.

Lector
Lector RF680R/RF685R
Lectores RF680R/RF685R para el rango de UHF
Los lectores UHF SIMATIC RF680R y RF685R han sido diseñados para el uso en la logística
y en la automatización, p. ej. en una línea de producción, pero son igualmente apropiados para
aplicaciones en el sector logístico. Para poder estar a la altura, estos lectores disponen de una
potencia de emisión y un grado de protección elevados (IP65). Los lectores cuentan con
numerosas posibilidades de diagnóstico y pueden procesar transpondedores ISO 18000-6C e
ISO 18000-6B.
El RF685R cuenta con una particularidad: una antena interna adaptativa. Esta aumenta
significativamente la fiabilidad de los procesos de lectura y escritura, incluso en condiciones
difíciles de transmisión inalámbrica.
Los lectores RF680R y RF685R se integran sin problemas en sistemas de automatización
SIMATIC S7 a través de una conexión PROFINET integrada o de la interfaz RS422, y el
módulo de comunicación ASM 456 a través de PROFIBUS. Hay disponibles los bloques de
programación correspondientes. Durante el funcionamiento se puede utilizar una segunda

3478

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
interfaz Ethernet (ambas M12) para el diagnóstico, por lo que no es necesaria ninguna
interrupción con el sistema superior.
La WBM (Web Based Management) permite la puesta en marcha, la configuración y el
diagnóstico de los dispositivos por navegador de Internet. No son necesarias actualizaciones
ni instalaciones adicionales de software de configuración y diagnóstico.

Grupo de parámetros "Web Based Management"
En este grupo de parámetros se puede iniciar la Web Based Management.
Tabla 1-196 Parámetros del grupo "Web Based Management"
Parámetro

Descripción

Web Based Manage‐
ment (WBM)

Iniciar la Web Based Management del lector.
La Web Based Managment ofrece amplias funciones para la configuración de los lectores.
Nota: La WBM no puede iniciarse hasta que se haya establecido o bien la conexión PROFINET
entre la CPU y el lector o bien se le haya asignado al lector la dirección IP guardada en el proyecto.
Es decir, es necesario que se haya asignado el nombre de dispositivo y la configuración de TIA debe
estar cargada en el controlador SIMATIC.

Grupo de parámetros "Parámetros del módulo"
En este grupo de parámetros se pueden configurar todos los parámetros específicos de
módulo de los lectores RF680R/RF685R.
Tabla 1-197 Parámetros del grupo "Parámetros del módulo"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Alarma de punto de
lectura RFID

Off

Off

Activar y desactivar avisos de diagnóstico refe‐
ridos a puntos de lectura.

On

Grupo de parámetros "Administración de configuración"
En este grupo de parámetros se pueden cargar o guardar datos de configuración.
Tabla 1-198 Parámetros del grupo "Administración de configuración"
Parámetro

Descripción

Nombre de usuario

Nombre de usuario de un usuario creado en el lector
Recuerde que el usuario debe tener los derechos necesarios.

Contraseña

Entrada de la contraseña del usuario

Carga de la configura‐
ción en el dispositivo

Cargar datos de configuración del proyecto STEP 7 en el lector.

Almacenamiento de la Guardar los datos de configuración del lector en el proyecto STEP 7 actual.
configuración en el pro‐
yecto

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3479

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Requisitos
Para poder cargar o guardar datos de configuración deben cumplirse los siguientes requisitos:
● En el parámetro "Interfaz PROFINET [X1]" está registrada la dirección IP correcta del lector.
● El nombre de usuario y la contraseña correspondiente están creadas en la WBM.
● El usuario registrado tiene los derechos necesarios para realizar la descarga o la carga.
Nota
El nombre de usuario y la contraseña solo son necesarios si la administración de usuarios está
activada
Los campos de texto "Nombre de usuario" y "Contraseña" solo deben rellenarse si la
administración de usuarios de la WBM está activada.

Grupo de parámetros "Comunicación RFID"
En este grupo de parámetros se puede configurar el rango de direcciones de la comunicación
RFID.
Tabla 1-199 Parámetros del grupo "Comunicación RFID"
Parámetro

Descripción

General

Ajustes generales
Campos de entrada para el nombre de la comunicación y para un comentario

Direcciones E/S

Definición de la dirección E/S del lector ("LADDR")
Este parámetro se utiliza en la variable "IID_HW_CONNECT".

ID de hardware

Definición de la ID de hardware del lector ("ID HW")
Este parámetro se utiliza en la variable "IID_HW_CONNECT".

Grupo de parámetros "Entradas y salidas digitales"
En este grupo de parámetros se puede configurar el rango de direcciones de las entradas y
salidas digitales.
Tabla 1-200 Parámetros del grupo "Entradas y salidas digitales"
Parámetro

Descripción

General

Ajustes generales
Campos de entrada para el nombre de las entradas y salidas digitales y para un comentario

Direcciones E/S

Definición de la dirección E/S de las entradas y salidas digitales
A través del rango de direcciones ajustado (dirección E/S) se puede acceder a las entradas y salidas
digitales configuradas en la WBM del lector.

ID de hardware

3480

Definición de la ID de hardware de las entradas y salidas digitales

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Lector RF610R/RF615R
Lectores RF610R/RF615R para el rango UHF
Los lectores UHF SIMATIC RF610R y RF615R han sido diseñados para el uso en la logística
de producción y la distribución. Para poder estar a la altura, estos lectores disponen de una
potencia de emisión y un grado de protección elevados (IP65). Los lectores cuentan con
numerosas posibilidades de diagnóstico y pueden procesar transpondedores ISO 18000-6C e
ISO 18000-6B.
El lector se integra sin problemas en sistemas de automatización SIMATIC S7 a través de una
conexión PROFINET integrada o de la interfaz RS422, y el módulo de comunicación ASM 456
a través de PROFIBUS. Hay disponibles los bloques de programación correspondientes.
La WBM (Web Based Management) permite la puesta en marcha, la configuración y el
diagnóstico de los dispositivos por navegador de Internet. No son necesarias actualizaciones
ni instalaciones adicionales de software de configuración y diagnóstico.

Grupo de parámetros "Parámetros del módulo"
En este grupo de parámetros se pueden configurar todos los parámetros específicos de
módulo de los lectores RF610R/RF615R.
Tabla 1-201 Parámetros del grupo "Parámetros del módulo"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Alarma de punto de
lectura RFID

Desactivado

Desactivado

Activar y desactivar avisos de diagnóstico refe‐
ridos a puntos de lectura.

1.6.2.2

Activado

Sistemas de lectura ópticos

Lectores ópticos MV400
Lectores ópticos MV400
Los lectores ópticos MV400 han sido diseñados especialmente para reconocer y evaluar una
gran cantidad de códigos legibles por máquinas, letra clara y objetos en la producción
industrial.
Los lectores pueden funcionar tanto en los controladores S7-300, S7-400, S7-1200 y S7-1500
como con diferentes controladores de otros fabricantes. La integración en el controlador se
realiza a través de PROFINET IO (FB79/perfil de identificación), TCP, RS232 o mediante
módulos de comunicación.
Los bloques de función FB 79 y Perfil de identificación hacen posible una programación
sencilla utilizando las herramientas SIMATIC S7.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3481

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Modo de operación"
En este grupo de parámetros se puede configurar el modo de operación de los lectores ópticos
MV400.
Tabla 1-202 Parámetros del grupo "Modo de operación"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Bloque de función

FB79

FB79

Con este parámetro se selecciona el bloque:

Perfil de identificación

● FB79
Configuración de los lectores ópticos con
ayuda del bloque "FB79".
Compatible con el lector "VS130-2";
Controladores compatibles: S7-300 y S7-400
● Perfil de identificación:
Configuración de los lectores ópticos con
ayuda de los bloques Ident.
Compatibles con todos los dispositivos Ident;
Controladores compatibles: S7-300, S7-400,
S7-1200 y S7-1500

Lectores ópticos MV500
Lectores ópticos MV500
Los lectores ópticos MV500 han sido diseñados especialmente para reconocer y evaluar una
gran cantidad de códigos legibles por máquinas, letra clara y objetos en la producción
industrial.
Los lectores pueden funcionar tanto en los controladores S7-300, S7-400, S7-1200 y S7-1500
como con diferentes controladores de otros fabricantes. La integración en el controlador se
realiza a través de PROFINET IO (FB79/perfil de identificación), TCP, RS232 o mediante
módulos de comunicación.
Los bloques de función FB 79 y Perfil de identificación hacen posible una programación
sencilla utilizando las herramientas SIMATIC S7.

3482

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de parámetros "Modo de operación"
En este grupo de parámetros se puede configurar el modo de operación de los lectores ópticos
MV500.
Tabla 1-203 Parámetros del grupo "Modo de operación"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Bloque de función

FB79

FB79

Con este parámetro se selecciona el bloque:

Perfil de identificación

● FB79
Configuración de los lectores ópticos con
ayuda del bloque "FB79".
Compatibles con los lectores "VS130-2" y
"MV400";
Controladores compatibles: S7-300 y S7-400
● Perfil de identificación:
Configuración de los lectores ópticos con
ayuda de los bloques Ident.
Compatibles con todos los dispositivos Ident;
Controladores compatibles: S7-300, S7-400,
S7-1200 y S7-1500

Grupo de parámetros "Web Based Management"
En este grupo de parámetros se puede iniciar la Web Based Management.
Tabla 1-204 Parámetros del grupo "Web Based Management"
Parámetro

Descripción

Web Based Manage‐
ment

Iniciar la Web Based Management del lector.
La Web Based Managment (WBM) ofrece amplias funciones para la configuración del lector.
Nota: La WBM no puede iniciarse hasta que se haya establecido o bien la conexión PROFINET
entre la CPU y el lector o bien se le haya asignado al lector la dirección IP guardada en el proyecto.
Es decir, es necesario que se haya asignado el nombre de dispositivo y la configuración de TIA debe
estar cargada en el controlador SIMATIC.

1.6.3

Periferia descentralizada

1.6.3.1

Sistemas de periferia descentralizada

SIMATIC ET 200 - La solución adecuada para cada aplicación
Con SIMATIC ET 200 es posible elegir entre distintos sistemas de periferia descentralizada.
● Soluciones utilizables en el armario de distribución
● Soluciones sin armario de distribución directamente en la máquina

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3483

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Además, existen componentes utilizables en áreas con riesgo de explosión. Los sistemas
SIMATIC ET 200 con estructura sin armario de distribución se instalan en el interior de una
carcasa de plástico robusta, reforzada con fibra de vidrio y, por ello, están protegidos a prueba
de golpes, son resistentes a la suciedad y estancos al agua.
La estructura modular permite p. ej. escalar y ampliar los sistemas ET 200 fácilmente y a
pequeños pasos. Los módulos adicionales integrados reducen los costes y ofrecen al mismo
tiempo posibilidades de aplicación muy diversas. Es posible elegir entre las más variadas
posibilidades de combinación:
● entradas y salidas digitales y analógicas
● módulos inteligentes con funcionalidad CPU,
● técnica de seguridad,
● componentes neumáticos,
● convertidores de frecuencia
● y diversos módulos tecnológicos.
La comunicación a través de PROFIBUS y PROFINET, la ingeniería única, las posibilidades
de diagnóstico transparente y la conexión óptima a controladores SIMATIC y dispositivos HMI
dan prueba de la universalidad de Totally Integrated Automation.
La tabla siguiente muestra un resumen de las unidades periféricas de uso con armario de
distribución:
Unidad de periferia

Características

ET 200L

● Periferia de bloque digital de bajo coste
● Bloques electrónicos digitales de hasta 32
canales

ET 200M

● Diseño modular con módulos estándar de
SIMATIC S7-300
● Módulos de E/S de seguridad
● Uso en atmósferas potencialmente explosivas
hasta la zona 2, sensores y actuadores hasta
la zona 1
● Alta disponibilidad de la instalación, p. ej.
gracias a que los módulos pueden enchufarse
y desenchufarse durante el funcionamiento.

ET 200MP

● Diseño modular con módulos estándar de
SIMATIC S7-1500
● PROFINET IO isócrono con tiempos de ciclo
de emisión de hasta 250 μs
● Dispositivo IO con interfaz PROFINET IO
● Esclavo DP con interfaz PROFIBUS DP
● Módulos tecnológicos de contaje,
posicionamiento y Time-based IO

3484

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Unidad de periferia

Características

ET 200S

● Diseño altamente modular con conexión a
varios hilos
● Multifuncionalidad gracias a la amplia gama de
módulos
● I-device
● Uso en atmósferas potencialmente explosivas
(zona 2)

ET 200S COMPACT

● Diseño altamente modular con conexión a
varios hilos
● Multifuncionalidad gracias a la amplia gama de
módulos
● Uso en atmósferas potencialmente explosivas
(zona 2)
● DI/DO integradas

ET 200SP

● Módulos compactos
● Cableado fijo con conexión a uno o varios hilos
● Interfaz PROFINET con 3 puertos
● PROFINET IO isócrono con los perfiles
PROFIsafe y PROFIenergy
● I-device
● Módulos de contaje, posicionamiento, pesaje
y medición
● CPU y módulos de seguridad

ET 200iSP

● Diseño modular, con posibilidad de
redundancia
● Diseño robusto y seguro
● Uso en atmósferas potencialmente explosivas
hasta la zona 1/21; puede haber sensores y
actuadores incluso en la zona 0/20
● Alta disponibilidad de la instalación, p. ej.
gracias a que los módulos pueden enchufarse
y desenchufarse durante el funcionamiento.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3485

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
La tabla siguiente muestra un resumen de las unidades de periferia para el uso sin armario de
distribución:
Unidad de periferia

Características

ET 200AL

● Montaje sencillo en cualquier posición y en
espacios reducidos
● Conexión a PROFINET IO, PROFIBUS DP o
ET 200SP
● Elevado grado de protección IP65/IP67
Para temperaturas de -25 °C a
+55 °C, aceleraciones hasta 5 g
● Conexión de sensores y actuadores mediante
el sistema de conexionado M8 y M12

ET 200eco PN

● Periferia de bloque de bajo coste que ahorra
espacio
● Módulos digitales con un máximo de 16
canales (también parametrizables)
● Módulos analógicos, maestro IO-Link y
distribuidor de la tensión de carga
● Conexión PROFINET con switch de 2 puertos
en cada módulo
● Distribución flexible mediante PROFINET en
estructura lineal y/o de estrella directamente
en la instalación

ET 200eco

● Periferia de bloque digital de bajo coste
● Posibilidades de conexión flexibles
● Módulos de seguridad
● Alta disponibilidad de la instalación

ET 200pro

● Diseño modular con carcasa compacta
● Montaje sencillo
● Multifuncionalidad gracias a la amplia gama de
módulos
● I-device
● Alta disponibilidad de la instalación, p. ej.
gracias a que los módulos pueden enchufarse
y desenchufarse durante el funcionamiento.
● Diagnóstico completo

ET 200R

● Especial para uso en robots
● Montaje directo en el chasis
● Resistente a las salpicaduras de soldadura
gracias a la robusta carcasa metálica

3486

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Documentación del ET 200L (http://support.automation.siemens.com/WW/view/es/
1142908/0/es)
Documentación del ET 200S (http://support.automation.siemens.com/WW/view/es/
1144348/0/es)
Documentación del ET 200M (http://support.automation.siemens.com/WW/view/es/
1142798/0/es)
Documentación del ET 200pro (http://support.automation.siemens.com/WW/view/es/
21210852/0/es)
Documentación del ET 200iSP (http://support.automation.siemens.com/WW/view/es/
28930789/0/es)
Documentación del ET 200R (http://support.automation.siemens.com/WW/view/en/
11966255/0/en)
Documentación del ET 200eco PN (http://support.automation.siemens.com/WW/view/es/
29999018/0/es)
Documentación del ET 200eco (http://support.automation.siemens.com/WW/view/es/
12403834/0/es)
Documentación del ET 200SP (http://support.automation.siemens.com/WW/view/es/
84133942/0/es)
Documentación del ET 200MP (http://support.automation.siemens.com/WW/view/es/
86140384/0/es)
Documentación del ET 200AL (http://support.automation.siemens.com/WW/view/es/
95242965/0/es)

1.6.3.2

Configuración de variables HART

Introducción
Un gran número de aparatos de campo HART ponen a disposición magnitudes de medida
adicionales (p. ej. temperatura del sensor). Dichas magnitudes pueden leerse si están bien
ajustadas en la configuración de los aparatos de campo. Por medio de variables HART es
posible aplicar directamente los valores medidos ajustados del aparato de campo al área E/S
del sistema de automatización.
En los módulos HART puede parametrizarse un máximo de 8 variables HART
(independientemente del número de canales configurados), 4 variables HART como máximo
por canal. Las variables HART se asignan a un canal en las propiedades del módulo (área
"Ajuste de variable HART"). Para ello, tenga en cuenta el manual del módulo correspondiente.

Asignación de direcciones
Los módulos HART estándar ocupan 16 bytes de entrada/salida (datos de usuario). Al
configurar variables HART, los módulos ocupan 5 bytes adicionales de datos de entrada para
cada variable HART.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3487

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Si se utilizan las 8 variables HART, el módulo de entrada HART ocupa en total 56 bytes de
entrada/salida (16 bytes + 8 x 5 bytes = 56 bytes).
La configuración "ninguno" no ocupa ningún byte de entrada adicional.

Configuración de variables HART
Para un canal es posible configurar un máximo de 4 variables HART
● PV (Primary Variable)
● SV (Secondary Variable)
● TV (Tertiary Variable)
● QV (Quaternary Variable)
CiR es un comodín y reserva el área de direcciones para una variable HART. Las variables
HART que no se utilizan deben configurarse con el parámetro "ninguno".

Estructura de las variables HART
Cada variable HART ocupa 5 bytes de datos de entrada y tiene la estructura siguiente:
%\WHQ
%\WHQ
%\WHQ
%\WHQ

9DULDEOH+$57

%\WHQ

4XDOLW\&RGH

9DORUHQIRUPDWR+(;

Dependiendo del módulo, el código de calidad puede adoptar diferentes valores. Para ello,
tenga en cuenta el manual del módulo correspondiente.

Consulte también
Documentación de los módulos analógicos HART (http://
support.automation.siemens.com/WW/view/ed/22063748)

1.6.3.3

ET 200iSP

Unidad periférica descentralizada ET 200iSP
Definición
La unidad periférica descentralizada ET 200iSP es un esclavo DP altamente modular y de
seguridad intrínseca con grado de protección IP 30.

3488

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Campo de aplicación
La unidad periférica descentralizada ET 200iSP se puede utilizar en áreas con riesgo de
explosión con atmósferas cargadas de gas o polvo:
Homologación

Estación ET 200iSP*

Entradas y salidas

ATEX

Zona 1, Zona 21

hasta Zona 0, Zona 20 **

IECEx

Zona 2, Zona 22

hasta Zona 0, Zona 20 **

* en combinación con una carcasa apropiada
** en módulo electrónico 2 DO Relay UC60V/2A: hasta Zona 1, Zona 21

Evidentemente, la unidad periférica descentralizada ET 200iSP también se puede utilizar en
áreas seguras.
Los módulos de periferia del ET 200iSP se pueden insertar casi en cualquier combinación
posible, directamente junto al módulo de interfaz que transmite los datos al maestro DP. De
esta manera, es posible adaptar la configuración a las demandas concretas del lugar de
instalación.
Cada ET 200iSP consta de una fuente de energía, un módulo de interfaz y 32 módulos
electrónicos como máximo (p. ej. módulos electrónicos digitales). Tenga en cuenta el consumo
máximo.

Módulos electrónicos y de pines
La unidad periférica ET 200iSP está formada básicamente por varios módulos de pines
pasivos, a los que se enchufan la fuente de alimentación y los módulos electrónicos.
El ET 200iSP se conecta al PROFIBUS RS 485-IS con un conector situado en el módulo de
pines TM‑IM/EM. Cada ET 200iSP es un esclavo DP en el PROFIBUS RS 485‑IS.

Maestro DP
Todos los módulos del ET 200iSP se pueden comunicar con todos los maestros DP que
cumplen la norma IEC 61784‑1:2002 Ed1 CP 3/1 con el protocolo de transferencia "DP" (DP
significa Periferia Descentralizada).

Consulte también
Documentación del ET 200iSP (http://support.automation.siemens.com/WW/view/de/
28930789/0/en)

Asignar canal y variable IEEE
Propiedades
Los módulos electrónicos analógicos 4 AI I 2WIRE/HART, 4 AI I 4WIRE/ HART y 4 AO I HART
soportan hasta 4 variables IEEE.
En la memoria imagen de proceso de las entradas (IPE) hay un máximo de 20 bytes en cada
módulo para las variables IEEE. Así pues, para las 4 variables IEEE hay 4 bloques con 5 bytes
cada uno dentro de la IPE.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3489

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Requisitos
El aparato de campo HART debe soportar el número parametrizado de variables IEEE.

Asignar variables IEEE
Las variables IEEE de los aparatos de campo se asignan a voluntad a los bloques de la IPE.
DVLJQDFLµQILMDGHORVYDORUHVDQDOµJLFRVHQ,3(
DVLJQDFLµQDOHDWRULDGHODVYDULDEOHV,(((HQ,3(

,3(GHXQPµGXORGH
HQWUDGD+$57FRQ
FRQILJXUDFLµQ:
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[
,%[

,%[
,%[
,%[
,%[
,%[

,%[
,%[
,%[
,%[
,%[


3490

SHMPµGXORGH
HQWUDGD+$57

9DORU
DQDOµJLFR
9DORU
DQDOµJLFR
9DORU
DQDOµJLFR
9DORU
DQDOµJLFR

9DORUVHFXQGDULR
9DULDEOH
,(((GHO
FDQDO

$SDUDWRGHFDPSR+$57HQHOFDQDO
9DORUDQDOµJLFR FRUUHVSRQGHD+9

9DULDEOH,((( +9
9DULDEOH,(((
9DULDEOH,(((
9DULDEOH,(((
$SDUDWRGHFDPSR+$57HQHOFDQDO
9DORUDQDOµJLFR FRUUHVSRQGHD+9

9DORUVHFXQGDULR
9DULDEOH
,(((GHO
&DQDO

9DULDEOH,((( +9
9DULDEOH,(((
9DULDEOH,(((
9DULDEOH,(((
$SDUDWRGHFDPSR+$57HQHOFDQDO

9DORUVHFXQGDULR
9DULDEOH
,(((
GHOFDQDO


9DORUDQDOµJLFR FRUUHVSRQGHD+9

9DULDEOH,((( +9
9DULDEOH,(((
9DULDEOH,(((
9DULDEOH,(((
$SDUDWRGHFDPSR+$57HQHOFDQDO

9DORUVHFXQGDULR
9DULDEOH
,(((GHO
FDQDO

9DORUDQDOµJLFR FRUUHVSRQGHD+9

9DULDEOH,((( +9
9DULDEOH,(((
9DULDEOH,(((
9DULDEOH,(((

+9 9DULDEOHSULQFLSDO

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Documentación del ET 200iSP (http://support.automation.siemens.com/WW/view/de/
28930789/0/en)

Parametrizar uniones frías para termopares
Compensación de la temperatura de las uniones frías
Existen varias posibilidades de registrar la temperatura de las uniones frías con el fin de
calcular un valor de temperatura absoluto a partir de la diferencia de temperatura entre unión
fría y punto de medición.
Tabla 1-205 Compensación de la temperatura de las uniones frías
Posibilidad

Explicación

Parámetro Unión fría

Sin compensación

No sólo se registra la temperatura del
Ninguno
punto de medición. La temperatura de la
unión fría (transición de cable Cu a cable
de termopar) influye además en la ten‐
sión termoeléctrica. El valor medido tie‐
ne así un error.

Utilización de una ter‐
morresistencia
Pt 100 Climatiz. para
registrar la tempera‐
tura de las uniones
frías (método idóneo)

Es posible registrar la temperatura de
las uniones frías con una termorresis‐
tencia (Pt 100 Climatiz.). Este valor de
temperatura se distribuye a los módulos
4 AI TC en el ET 200iSP con la respec‐
tiva parametrización y se calcula en los
módulos con el valor de temperatura re‐
gistrado en el punto de medición.
Número de uniones frías: 2

La parametrización del IM152 y del 4
AI TC debe estar sintonizada:
● 4 AI RTD parametrizado en
Pt100 Climatiz. en el slot
correcto;
● 4 AI TC: unión fría: "sí";
seleccionar número de unión fría
"1" ó "2"
● IM 152-1: asignación de la unión
fría a un slot con 4 AI RTD;
selección de un canal;

Compensación inter‐ El módulo de sensores TC (sensor de
● 4 AI TC: número de unión fría
na 4 AI TC
temperatura) se monta en los bornes del
"Interno"
módulo de pines del EM 4 AI TC. El sen‐
sor de temperatura notifica la tempera‐
tura de los bornes al 4 AI TC. Dicho valor
se calcula con el valor medido en el ca‐
nal del módulo electrónico.

Compensación con termorresistencia en el 4 AI RTD
Cuando los termopares conectados a las entradas de los 4 AI TC tienen la misma unión fría,
se compensan con un 4 AI RTD.
Para los canales del módulo 4 AI TC es posible seleccionar "1", "2" o "Interno" como número
de unión fría. Si se selecciona "1" ó "2", se utiliza siempre la misma unión fría (canal RTD) para
los 4 canales.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3491

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parametrización de la unión fría
Las uniones frías para módulos electrónicos 4 AI TC se ajustan con los parámetros siguientes:
Tabla 1-206 Parámetros de la unión fría
Parámetro
Slot de unión fría 1 a slot 2

Módulo
IM 152

Entrada de unión fría 1 a 4 entra‐ IM 152
da de unión fría

Rango de valores
ninguno, 4 a 35

Este parámetro permite asignar hasta 2 slots
(ninguno, 4 a 35) en los que se encuentran
los canales de medición de la temperatura
de referencia (determinación del valor de
compensación).

RTD a canal 0

Con este parámetro se determina el canal
(0/1/2/3) para la medición de la temperatura
de referencia (determinación del valor de
compensación) para el slot asignado.

RTD a canal 1
RTD a canal 2
RTD a canal 3

Unión fría E0 a unión fría E3

4 AI TC

Número de unión fría

4 AI TC

Explicación

Ninguno
sí
1
2
Interno

Este parámetro permite habilitar la utiliza‐
ción de la unión fría.
Con este parámetro se asigna la unión fría
(1, 2) que contiene la temperatura de refe‐
rencia (valor de compensación).

Consulte también
Documentación del ET 200iSP (http://support.automation.siemens.com/WW/view/de/
28930789/0/en)

Principios básicos del sellado de tiempo
Propiedades
El sellado de tiempo con el IM 152 es posible en aplicaciones de clientes que utilizan el FB 62
(FB TIMESTMP).

Funcionamiento
Una señal de entrada modificada se marca con un sello de tiempo y se guarda en un búfer
(registro). Si hay señales con sello de tiempo o un registro está lleno, se genera una alarma de
proceso en el maestro DP. El búfer se evalúa con "Leer registro". En los eventos que influyen
en el sellado de tiempo (comunicación con maestro DP interrumpida, fallo de telegrama del
reloj maestro, etc.) se generan avisos especiales.

3492

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parametrizar
Con la parametrización se define qué datos de usuario del IM 152 se vigilan. En el sellado de
tiempo se trata de las entradas digitales cuyos cambios de señal se vigilan.
Parámetro

Ajuste

Descripción

Sellado de tiempo

● bloqueado

Active el sellado de tiempo para los
canales del módulo electrónico 8 DI
NAMUR.

● habilitado
Evaluación de flancos
evento entrante

● Flanco ascendente
● Flanco descendente

Determine el tipo de cambio de señal
que se marca con un sello de tiempo.

Contaje
Propiedades Contaje
Funciones de contaje
El módulo electrónico 8 DI NAMUR incorpora funciones de contaje parametrizables:
● 2 contadores ascendentes de 16 bits (función de contaje normal) o
● 2 contadores descendentes de 16 bits (función de contaje periódica) o
● 1 contador descendente de 32 bits (función de contaje en cascada)
● Preajuste de una consigna mediante la IPS
● Función PUERTA
● La función de las señales de control de los contadores se puede configurar:
– Configuración de canal 0..1: "Contador", canal 2..7: "DI": se configuran 2 contadores.
Las señales de control de los contadores se han guardado en la IPS (memoria imagen
de proceso de las salidas).
– Configuración de canal 0..1: "Contador", canal 2..7: "Control": se configuran 2
contadores. Las señales de control de los contadores se han guardado en la IPS.
Además son controladas por las entradas digitales del 8 DI NAMUR.

Consulte también
Funcionamiento (Página 3494)
Configurar contadores (Página 3496)
Parametrizar contadores (Página 3498)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3493

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Funcionamiento
Contador ascendente de 16 bits (función de contaje normal)
El rango de contaje es de 0 a 65535.
Con cada impulso de contaje en la entrada digital aumenta el estado del contador en el valor
1. Al alcanzarse el límite de contaje, el estado del contador se pone a 0 y se incrementa
nuevamente a partir de este valor.
En caso de desbordamiento del contador, la salida correspondiente se activa en la IPE.
A través del flanco ascendente de la señal de control Desactivar salida se desactiva la salida
en la IPE. El valor de contaje actual no se altera por ello.
En el contaje hacia delante de 16 bits no se activan salidas en la IPS. Éstas se encuentran en
general desactivadas.
El flanco ascendente de la señal de control Desactivar contador pone el estado del contador
a 0 y desactiva la salida del contador activada.
La señal de control PUERTA detiene el proceso de contaje en un flanco ascendente. No se
vuelven a procesar impulsos de contaje en la entrada digital hasta que llega un flanco
descendente. La señal de control Desactivar contador también funciona con la PUERTA
activada.
9DORUUHDOGHOFRQWDGRU

/¯PLWHGHFRQWDMH

6DOLGDGHO
FRQWDGRUHQ,3(
6H³DOGHFRQWURO
GHVDFWLYDUVDOLGD
6H³DOGHFRQWURO
GHVDFWLYDUFRQWDGRU
6H³DOGHFRQWURO
725
,PSXOVRVHQOD
HQWUDGDGLJLWDO

7LHPSR

7LHPSR

7LHPSR

7LHPSR

7LHPSR

7LHPSR

Contador descendente de 16 bits (función de contaje periódica)
El rango de contaje máximo es de 65535 a 0.

3494

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
En el instante de inicio del contador, el valor real se pone a la consigna predeterminada. Con
cada impulso de contaje se reduce el valor real en 1. Cuando el valor real llega a 0, se activa
la respectiva salida en la IPE y el valor real se pone nuevamente a la consigna predeterminada.
A partir de este valor se vuelve a contar hacia atrás.
El flanco ascendente de la señal de control Desactivar contador pone el valor real a la consigna
predeterminada y desactiva la respectiva salida en la IPE.
A través del flanco ascendente de la señal de control Desactivar salida se desactiva la salida
en la IPE. El valor de contaje actual no se altera por ello.
La señal de control PUERTA detiene el proceso de contaje en un flanco ascendente. Al mismo
tiempo se desactiva la salida asignada en la IPE. No se vuelven a procesar impulsos de contaje
en la entrada digital hasta que llega un flanco descendente. Las señales de control Desactivar
salida y Desactivar contador también funcionan con la PUERTA activada.
La consigna del contador se preajusta y modifica mediante la IPS. La consigna se aplica con
el flanco ascendente de la señal de control Desactivar contador o con un paso por cero del
contador.
9DORUUHDOGHO
FRQWDGRU
&RQVLJQD

6DOLGDGHOFRQWDGRU
HQ,3(
6H³DOGHFRQWURO
'HVDFWLYDUVDOLGD
6H³DOGHFRQWURO
'HVDFWLYDUFRQWDGRU
6H³DOGHFRQWURO
725
,PSXOVRVHQ
(QWUDGDGLJLWDO

7LHPSR

7LHPSR

7LHPSR

7LHPSR

7LHPSR

7LHPSR

Contador descendente de 32 bits (función de contaje en cascada)
El rango de contaje máximo es de 4294967295 a 0.
El funcionamiento es idéntico al del contador descendente de 16 bits. El canal 1 no tiene
ninguna función.

Consulte también
Propiedades Contaje (Página 3493)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3495

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configurar contadores
Procedimiento
1. Arrastre el módulo 8 DI Namur con el ratón desde el catálogo de hardware hasta la unidad
periférica descentralizada ET 200iSP.
2. Seleccione la configuración deseada (canal 0..1: "Contador", canal 2..7: "DI" o "Control").
En las propiedades del módulo (ventana de inspección) se encuentra este ajuste en
"Parámetros > Entradas > Configuración".

Configuración de canal 0..1: "Contador", canal 2..7: "DI"
● Ocupación de las entradas digitales en el módulo electrónico 8 DI NAMUR
Tabla 1-207 Ocupación de las entradas digitales en el canal 0..1: "Contador", canal 2..7: "DI":

3496

Entrada digital

Borne

Ocupación

Canal 0

1, 2

Contador 1

Canal 1

5, 6

Contador 2 (irrelevante con contador descendente de
32 bits)

Canal 2

9, 10

Entrada digital 2

Canal 3

13, 14

Entrada digital 3

Canal 4

3, 4

Entrada digital 4

Canal 5

7, 8

Entrada digital 5

Canal 6

11, 12

Entrada digital 6

Canal 7

15, 16

Entrada digital 7

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Ocupación de la memoria imagen de proceso de las entradas (IPE)
(%[
(%[
(%[
(%[

%LWVD
%LWVD
%LWVD
%LWVD

9DORUUHDOFRQWDGRU
9DORUUHDOFRQWDGRU

%LWVD
%LWVD
%LWVD
%LWVD

&RQVLJDFRQWDGRU
FRQWDGRUGHVFHQGHQWH
GHELWV

       
(%[
6DOLGDGHFRQWDGRU
6DOLGDGHFRQWDGRU
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
)RUPDWR6
       
(%[
(%[

     
QRRFXSDGR
(VWDGRGHYDORUSDUDFDQDOD
%ODVH³DOGHHQWUDGDHVY£OLGD
 %ODVH³DOGHHQWUDGDQRHVY£OLGD

● Ocupación de la memoria imagen de proceso de las salidas (IPS)
%LWVD
%LWVD
%LWVD
%LWVD

$%[
$%[
$%[
$%[

&RQVLJQDFRQWDGRU
&RQVLJQDFRQWDGRU

%LWVD
%LWVD
%LWVD
%LWVD

&RQVLJDFRQWDGRU
FRQWDGRUGHVFHQGHQWH
GHELWV

       
$%[
QRRFXSDGR
QRRFXSDGR
6H³DOGHFRQWURO725
6H³DOGHFRQWURO725
6H³DOGHFRQWUROGHVDFWLYDUFRQWDGRU
6H³DOGHFRQWUROGHVDFWLYDUFRQWDGRU
6H³DOGHFRQWUROGHVDFWLYDUVDOLGDFRQWDGRU
6H³DOGHFRQWUROGHVDFWLYDUVDOLGDFRQWDGRU

Configuración de canal 0..1: "Contador", canal 2..7: "CONTROL"
Esta configuración permite controlar los contadores además con las entradas digitales.
● Ocupación de las entradas digitales en el módulo electrónico 8 DI NAMUR
Encontrará más información sobre la asignación de pines en los Datos técnicos del módulo
electrónico 8 DI NAMUR.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3497

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Tabla 1-208 Ocupación de las entradas digitales en 2 Count/ 6 Control
Entrada digital

Borne

Ocupación

Canal 0

1, 2

Contador 1

Canal 1

5, 6

Contador 2 (irrelevante con contador descendente de
32 bits)

Canal 2

9, 10

Señal de control PUERTA 1

Canal 3

13, 14

Señal de control PUERTA 2

Canal 4

3, 4

Señal de control Desactivar contador 1

Canal 5

7, 8

Señal de control Desactivar contador 2

Canal 6

11, 12

Señal de control Desactivar salida contador 1

Canal 7

15, 16

Señal de control Desactivar salida contador 2

● Ocupación de la memoria imagen de proceso de las entradas (IPE)
La ocupación es idéntica a la configuración 0..1: "Contador", canal 2..7: "DI".
● Ocupación de la memoria imagen de proceso de las salidas (IPS)
La ocupación es idéntica a la configuración 0..1: "Contador", canal 2..7: "DI".

Consulte también
Propiedades Contaje (Página 3493)

Parametrizar contadores
Parámetros de la función de contaje
A continuación se explican sólo los parámetros relevantes para los contadores. Éstos forman
parte de los parámetros del módulo electrónico 8 DI NAMUR y dependen de la configuración
seleccionada:
Tabla 1-209 Parámetros de los contadores
Parámetro

Ajuste

Descripción

Tipo de encoder Entra‐
das de contador

● Canal bloqueado

Para el canal 0 ó 1, seleccione el en‐
coder del respecto contador.

● Encoder NAMUR
● Contacto individual sin conectar

Modo de operación
Contador 1

● Función de contaje normal

Modo de operación
Contador 2

● Función de contaje normal

● Función de contaje periódica

Seleccione el modo de operación del
contador 1.

● Función de contaje en cascada
● Función de contaje periódica
● Función de contaje en cascada

3498

Seleccione el modo de operación del
contador 2. Este parámetro no es re‐
levante si se ha ajustado el paráme‐
tro "Modo de operación Contador 1"
en "Función de contaje en cascada".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Propiedades Contaje (Página 3493)

Medición de frecuencia
Propiedades de la medición de frecuencia
Propiedades
El módulo electrónico 8 DI NAMUR permite medir frecuencias en los canales 0 y 1:
● 2 frecuencímetros de 1 Hz a 5 kHz
● Ventana de medición parametrizable (PUERTA)
● Las señales de los frecuencímetros se leen con las entradas digitales del módulo
electrónico.

Consulte también
Funcionamiento (Página 3499)
Configurar frecuencímetros (Página 3500)
Parametrizar frecuencímetros (Página 3502)

Funcionamiento
Medición de frecuencia
Las frecuencias de señal se determinan a partir de las señales de entrada del canal 0 ó 1 del
módulo electrónico. Para calcular la frecuencia se miden las señales dentro de una ventana de
medición parametrizable.
La frecuencia se representa como valor de 16 bits en formato de coma fija y se introduce en la
IPE.
Los frecuencímetros calculan la frecuencia aplicando la fórmula siguiente:
)UHFXHQFLD>+]@

1¼PHURGHIODQFRVDVFHQGHQWHVHQODHQWUDGDGLJLWDO
9HQWDQDGHPHGLFLµQ>V@

Rebase por exceso de la frecuencia de entrada
Cuando la frecuencia de entrada supera los 5 kHz, se notifica 7FFFH como valor real. Cuando
la frecuencia de entrada es superior a 8 kHz ya no se pueden emitir más valores reales
correctos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3499

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Propiedades de la medición de frecuencia (Página 3499)

Configurar frecuencímetros
Procedimiento
1. Arrastre el módulo 8 DI Namur con el ratón desde el catálogo de hardware hasta la unidad
periférica descentralizada ET 200iSP.
2. Seleccione la configuración deseada (canal 0..1: "Trace", canal 2..7: "DI"). En las
propiedades del módulo (ventana de inspección) se encuentra este ajuste en "Parámetros
> Entradas > Configuración".

Configuración 0..1: "Trace", canal 2..7: "DI"
Ocupación de las entradas digitales en el módulo electrónico 8 DI NAMUR
Entrada digital

Borne

Ocupación

Canal 0

1, 2

Frecuencímetro 1

Canal 1

5, 6

Frecuencímetro 2

Canal 2

9, 10

Entrada digital 2

Canal 3

13, 14

Entrada digital 3

Canal 4

3, 4

Entrada digital 4

Canal 5

7, 8

Entrada digital 5

Canal 6

11, 12

Entrada digital 6

Canal 7

15, 16

Entrada digital 7

Ocupación de la memoria imagen de proceso de las entradas (IPE) en la configuración del
canal 0..1: "Trace", canal 2..7: "DI"

3500

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
(%[
(%[
(%[
(%[

(%[

%LWVD
%LWVD
%LWVD
%LWVD

)UHFXHQF¯PHWUR
)UHFXHQF¯PHWUR

       

QRRFXSDGR
QRRFXSDGR
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
(QWUDGDGLJLWDO
)RUPDWR6
       
(%[
(%[

     
QRRFXSDGR
(VWDGRGHYDORUSDUDFDQDOD
%ODVH³DOGHHQWUDGDHVY£OLGD
 %ODVH³DOGHHQWUDGDQRHVY£OLGD

Ocupación de la memoria imagen de proceso de las salidas (IPS): La IPS no está ocupada.

Consulte también
Propiedades de la medición de frecuencia (Página 3499)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3501

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parametrizar frecuencímetros
Parámetros de frecuencímetros
A continuación se explican sólo los parámetros relevantes para los frecuencímetros. Éstos
forman parte de los parámetros del módulo electrónico 8 DI NAMUR:
Tabla 1-210 Parámetros de los frecuencímetros
Parámetro

Ajuste

Descripción

Tipo de encoder Entra‐
das de frecuencia

● Canal bloqueado

Para el canal 0 ó 1, seleccione el encoder del
respectivo frecuencímetro.

● Encoder NAMUR
● Contacto individual sin
conectar

Ventana de medición
(PUERTA)

● 50 ms
● 200 ms
● 1s

Para el canal 0 ó 1, seleccione la ventana de
medición necesaria.
Para alcanzar una precisión lo más alta po‐
sible en la medición de frecuencia, siga las
reglas siguientes:
● Frecuencias altas (>4kHz): ajustar
ventana de medición baja (50 ms)
● Frecuencias variables/medias: ajustar
ventana de medición media (200 ms)
● Frecuencias bajas (<1kHz): ajustar
ventana de medición alta (1 s)

Consulte también
Propiedades de la medición de frecuencia (Página 3499)

1.6.3.4

ET 200eco PN

Unidad periférica descentralizada ET 200eco PN
Definición
La unidad periférica descentralizada ET 200eco PN es un dispositivo PROFINET IO compacto
con grado de protección IP 65/66 o IP 67 y UL Enclosure Tipo 4x, Indoor use only.

3502

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Campo de aplicación
Los campos de aplicación del ET 200eco PN resultan de sus características especiales.
● La robustez del diseño y el grado de protección IP 65/66 o IP 67 hacen que la unidad de
periferia descentralizada ET 200eco PN sea especialmente apropiada para el uso en
entornos industriales rudos.
● La estructura compacta del ET 200eco PN permite su uso en zonas de espacio reducido.
● La fácil manipulación del ET 200eco PN garantiza una puesta en marcha y un
mantenimiento rápidos.

Propiedades
El ET 200eco PN presenta las siguientes características:
● Switch integrado con 2 puertos
● Servicios Ethernet soportados:
– ping
– arp
– Diagnóstico de red (SNMP)
– LLDP
● Alarmas
– Alarmas de diagnóstico
– Alarmas de mantenimiento
● Diagnóstico de puerto
● Comunicación Isochronous Real-Time
● Arranque priorizado
● Sustitución de dispositivo sin PG
● Redundancia de medios
● Conexión con sensores/actuadores inteligentes mediante el módulo de interfaz IO-Link
Master.

Controlador IO
El ET 200eco PN puede comunicarse con todos los controladores IO que se comportan
conforme a la norma IEC 61158.
El ET 200eco PN es configurable en una CPU con diagnóstico avanzado.

Consulte también
Documentación del ET 200eco PN (http://support.automation.siemens.com/WW/view/en/
29999018)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3503

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Descripción de parámetros de entrada analógica
Diagnóstico de grupo
Con este parámetro se habilita y se bloquea en general el diagnóstico del dispositivo.
Los diagnósticos "Error" y "Error de parametrización" están habilitados siempre, con
independencia del diagnóstico de grupo.

Diagnóstico falta 1L+
Si se habilita este parámetro, se habilita la comprobación de falta de tensión de alimentación.

Diagnóstico cortocircuito de la alimentación del encoder
Si se habilita este parámetro, se genera un diagnóstico en caso de cortocircuito a masa de la
alimentación del encoder con el canal activado. La alimentación del encoder se vigila para los
conectores X1, X3, X5 y X7. No es posible diferenciar en qué conector se produce el
cortocircuito del encoder.

Supresión de frecuencias perturbadoras
Con este parámetro se ajusta el tiempo de integración del dispositivo en función de la selección
de las frecuencias perturbadoras. Seleccione aquí la frecuencia de la tensión de red utilizada.
Supresión de frecuencias perturbadoras desactivada significa 500 Hz, lo que equivale a un
tiempo de integración de 2 ms en un canal de medición.

Unidad de temperatura
Ajuste aquí la unidad en que quiere registrar la temperatura.

Tipo de medición (por canales)
Con este parámetro se ajusta el tipo de medición, p. ej. la tensión. Si no se utiliza un canal, hay
que elegir el ajuste desactivado. Cuando un canal está desactivado, se optimiza el tiempo de
conversión y de integración del canal = 0 s y el tiempo de ciclo.

Rango de medición
Con este parámetro se ajusta el rango del tipo de medición seleccionado.

Coeficiente de temperatura (en RTD, termorresistencia)
El factor de corrección para los coeficientes de temperatura (valor α) indica cuál es el cambio
relativo en la resistencia de un determinado material cuando la temperatura aumenta 1 °C.
Los valores α corresponden a las normas EN 60751, GOST 6651, JIS C 1604 y ASTM E-1137.
El coeficiente de temperatura depende de la composición química del material.

3504

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Alisamiento
Gracias al alisamiento de los valores analógicos, se genera una señal analógica estable para
el procesamiento posterior. El alisamiento de los valores analógicos es aconsejable en caso
de cambios lentos en la señal útil (cambios en los valores medidos), p. ej. en las mediciones
de temperatura.
Los valores medidos se alisan mediante filtrado digital. El alisamiento se consigue haciendo
que el dispositivo calcule valores medios a partir de un número definido de valores analógicos
convertidos (digitalizados).
El alisamiento se parametriza en máximo 4 niveles (ninguno, débil, medio, fuerte). El nivel
determina el número de ciclos de módulos necesarios para calcular el valor medio.
Cuando más fuerte es el alisamiento, más estable es el valor analógico alisado y más tiempo
pasa hasta que llega el valor analógico alisado tras un cambio de señal (véase ejemplo
siguiente).
La figura siguiente muestra tras cuántos ciclos de módulo el valor analógico alisado se
aproxima al 100% en una respuesta indicial, dependiendo del alisamiento ajustado. La figura
se aplica a cualquier cambio de señal en la entrada analógica. El valor de alisamiento indica
el número de ciclos que necesita el módulo para alcanzar el 63% del valor final de los cambios
de señal.

&DPELRGH
VH³DO





 [

[

[









①
②
③

&LFORVGHPµGXOR

Alisamiento débil
Alisamiento medio
Alisamiento fuerte

Diagnóstico Rotura de hilo
Si se habilita este parámetro, se genera el diagnóstico Rotura de hilo cuando se rompe un hilo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3505

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
En caso de rotura de hilo en los rangos de medición 1 a 5 V y 4 a 20 mA, tenga en cuentas las
reglas siguientes:
Parámetro
Rotura de hilo habilitada

Evento

Valor medido

Explicación

1

Rotura de hilo 7FFFH

Diagnóstico Rotura de hilo

Rotura de hilo bloqueada

Rotura de hilo 8000H

Valor medido después de abandonar el
rango de saturación por defecto

1

Rebase por defecto habi‐
litado
Rotura de hilo bloqueada1 Rotura de hilo 8000H
Rebase por defecto blo‐
queado

Aviso de diagnóstico Rebase del límite in‐
ferior
Valor medido después de abandonar el
rango de saturación por defecto

1
Límites del rango de medición para detección de rotura de hilo y rebase por defecto del rango de
medición:

● de 1 a 5: a 0,296 V
● de 4 a 20 mA: a 1,185 mA

Diagnóstico Rebase por defecto
Cuando se habilita este parámetro, se genera el diagnóstico Rebase por defecto si el valor
medido alcanza el rango de rebase por defecto.

Diagnóstico Rebase por exceso
Cuando se habilita este parámetro, se genera el diagnóstico Rebase por exceso si el valor
medido alcanza el rango de rebase por exceso.

Unión fría para termorresistencia (TC)
Si se expone el punto de medición a una temperatura diferente a la de los extremos libres del
termopar (punto de conexión), se genera una tensión entre los extremos libres, la tensión
termoeléctrica. La intensidad de la tensión termoeléctrica depende de la diferencia entre la
temperatura del punto de medición y la temperatura en los extremos libres, así como del tipo
de combinación de materiales con que está hecho el termopar. Como siempre se registra una
diferencia de temperatura con un termopar, los extremos libres en la unión fría deben
mantenerse en una temperatura conocida para poder determinar la temperatura del punto de
medición.
Cuando se ajusta la Compensación interna, se mide la temperatura del punto de medición en
la carcasa de la unidad periférica. Al ajustar la Compensación externa es posible anteponer
una caja de compensación para lograr una mayor exactitud en la medición de temperatura.

Descripción de parámetros salida analógica
Diagnóstico de grupo
Con este parámetro se habilita y se bloquea en general el diagnóstico del dispositivo.

3506

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Los diagnósticos "Error" y "Error de parametrización" están habilitados siempre, con
independencia del diagnóstico de grupo.

Diagnóstico falta 1L+
Si se habilita este parámetro, se habilita la comprobación de falta de tensión de alimentación.

Diagnóstico cortocircuito de la alimentación del encoder
Si se habilita este parámetro, se genera un diagnóstico en caso de cortocircuito a masa de la
alimentación del encoder. Este diagnóstico se habilita cuando se habilita el diagnóstico de
grupo.

Respuesta a STOP de la CPU/el maestro
Seleccione cómo deben reaccionar las salidas del módulo en caso de STOP de la CPU:
● Desconectar
La unidad periférica pasa al estado seguro. La memoria imagen de proceso de las salidas
se borra (=0).
● Mantener último valor
La unidad periférica mantiene el último valor emitido antes del STOP.
● Valor sustitutivo
La unidad periférica emite el valor previamente ajustado para el canal.
Nota
Asegúrese de que la instalación esté siempre en un estado seguro en caso de "Mantener
último valor".

Tipo de salida
Con este parámetro se ajusta el tipo de salida, p. ej. la tensión. Si no se utiliza un canal, hay
que elegir el ajuste Desactivado. Cuando un canal está desactivado, se optimiza el tiempo de
conversión y de integración del canal = 0 s y el tiempo de ciclo.

Rango de salida
Con este parámetro se ajusta el rango de salida del tipo de salida seleccionado.

Diagnóstico Rotura de hilo (en modo de intensidad)
Si se habilita este parámetro, se genera el diagnóstico Rotura de hilo cuando se rompe un hilo.
Este diagnóstico no se reconoce en el área cero.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3507

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Diagnóstico Cortocircuito (en modo de tensión)
Cuando se habilita este parámetro, se genera un diagnóstico en caso de cortocircuito de la
línea de salida. Este diagnóstico no se reconoce en el área cero.

Diagnóstico Sobrecarga
Si se habilita este parámetro, se genera el diagnóstico en caso de sobrecarga.

Valores sustitutivos
En este parámetro se introduce un valor sustitutivo que debe emitir el módulo en caso de STOP
de la CPU. El valor sustitutivo debe situarse en el rango nominal, el rango de saturación por
exceso o el rango de saturación por defecto.

1.6.3.5

ET 200SP

Sistema de periferia descentralizada ET 200SP
Definición
El ET 200SP es un sistema de periferia descentralizada altamente escalable y flexible que
permite conectar las señales del proceso a un controlador central a través de un bus de campo.

Campo de aplicación
El ET 200SP es un sistema de periferia descentralizada multifuncional para diferentes campos
de aplicación. Gracias a su estructura escalable es posible adaptar la configuración
exactamente a las exigencias del proceso.
El ET 200SP está homologado para el grado de protección IP 20 y su montaje está previsto en
un armario de distribución.

Estructura
El ET 200SP se monta sobre un perfil soporte y se compone de:
● un módulo de interfaz que se comunica con todos los controladores IO que se comportan
conforme a la norma PROFINET IEC 61158.
● hasta un máximo de 32 módulos de periferia que se enchufan en BaseUnits pasivas en
cualquier combinación.
● un módulo servidor que cierra la instalación del ET 200SP.

3508

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

ET 200SP con módulo de CPU propio
ET 200SP con CPU propia
El ET 200SP puede estar equipado con una CPU propia, por ejemplo con la CPU1510SP-1 PN
o la CPU 1512SP-1 PN.
A dicha CPU pueden agregarse un máximo de 65 módulos del sistema de automatización
S7-1500.
A este respecto deben tenerse en cuenta las reglas de ampliación del ET 200SP (http://
support.automation.siemens.com/WW/view/es/58649293).

Parámetro Módulo de interfaz
Bytes de estado
Bytes de estado
Si se activa la opción "Bytes de estado", se reservan 4 bytes de datos de entrada para el estado
de la tensión de alimentación de cada módulo de periferia.
















%\WH

















%\WH

       

%\WH

       

%\WH

       

6ORWVGHORVPµGXORVGHSHULIHULD
%LW 
%LW 

)DOWDWHQVLµQGHFDUJDRHOPµGXORGHSHULIHULD
QRH[LVWH
7HQVLµQGHFDUJD\PµGXORGHSHULIHULD
H[LVWHQWHV

Nota
Un módulo de servidor, ya esté insertado o ausente, notifica siempre el bit = 0 para el slot.

Diagnóstico colectivo Falta tensión de alimentación L+
Diagnóstico colectivo Falta tensión de alimentación L+
Este diagnóstico es un diagnóstico agrupado del estado de la tensión de alimentación de todos
los módulos de periferia de un grupo de potencial que reciben tensión a través de BaseUnits
(BaseUnit BU...D clara).
El diagnóstico agrupado se forma a partir de los estados de la tensión de alimentación de los
módulos de periferia enchufados dentro del grupo de potencial.
El diagnóstico agrupado no depende de la habilitación del parámetro "Falta tensión de
alimentación L+" de los módulos de periferia.
El módulo servidor no influye en el diagnóstico agrupado Falta tensión de alimentación L+.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3509

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Requisitos para el funcionamiento correcto del diagnóstico agrupado Falta tensión de alimentación L+:
● En las BaseUnits claras y oscuras tiene que haber enchufados módulos de periferia o BU
Cover.
Si en las BaseUnit claras no hay ningún módulo de periferia enchufado, el módulo de
interfaz no distingue el principio de este grupo de potencial; de este modo, los módulos de
periferia de este grupo de potencial pertenecen al anterior. Como consecuencia, el error
colectivo Falta tensión de alimentación L+ se asignará al grupo de potencial equivocado.
Si se enchufa un módulo de periferia en la BaseUnit clara, el módulo de interfaz detecta el
nuevo grupo de potencial, evalúa nuevamente el estado y, en caso de error, notifica un
nuevo diagnóstico agrupado.
● El módulo servidor tiene que estar enchufado.
Sin embargo, el módulo servidor por sí mismo no influye en el diagnóstico agrupado Falta
tensión de alimentación L+.

Control de configuración con ET 200SP
Principio de funcionamiento
Gracias al control de configuración es posible utilizar diferentes configuraciones (opciones)
reales con una sola configuración del sistema de periferia descentralizada ET 200SP.
El control de configuración permite configurar el sistema de periferia descentralizada ET
200SP con su configuración máxima y utilizarlo aunque falten módulos. Si posteriormente se
añaden algunos módulos, no es necesario configurar de nuevo y, por consiguiente, tampoco
volver a cargar la configuración hardware.
Utilizando el juego de datos de control 196, que se transfiere al módulo de interfaz desde el
programa de usuario, se define una configuración teórica actual.
● En un slot no está el módulo configurado.
– En lugar del módulo de periferia configurado, puede encontrarse una tapa de BU
enchufada en dicho slot. Puesto que en el slot falta el módulo configurado, se habla
también de un "control de configuración con espacios libres".
– En lugar del módulo configurado, en este slot puede haber el módulo que en la
configuración se encuentra a la derecha del módulo ausente. La configuración real
aparece juntada debido al módulo que falta. Como falta el módulo configurado pero no
se producen huecos en la configuración, también se habla de un "control de
configuración sin espacios libres".
● La configuración se amplía con un módulo ya configurado.
– En el control de configuración con espacios libres, la configuración se amplía
enchufando el módulo configurado en el espacio libre correspondiente.
– En el control de configuración sin espacios libres, el módulo configurado se enchufa a
la derecha del último módulo del ET 200SP.

3510

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Requisitos
El parámetro de arranque de CPU "Comparación de configuraciones teórica y real" está
ajustado a "Arranque aunque haya diferencias" (ajuste predeterminado). Este ajuste también
está predeterminado para el parámetro de arranque de los distintos módulos del ET 200SP.

Activación del control de configuración
En las propiedades del módulo de interfaz, active la opción "Permitir la reconfiguración del
dispositivo mediante el programa de usuario" dentro de Parámetros del módulo > General >
Control de configuración. De este modo se activa el control de configuración.

Juego de datos de control 196 para ET 200SP
La figura inferior muestra el bloque de datos 196 para el control de configuración de un ET
200SP con cuatro módulos.
El elemento "block_length" tiene el valor "12".
Si se configura en STEP 7 un ET 200SP con más módulos, aumentará el tamaño del bloque
de datos. Con una configuración máxima de 65 módulos, el juego de datos tiene 134 bytes de
longitud (configuración con módulo de interfaz PN).
En el juego de datos hay dos bytes previstos para cada módulo.
Cada posición de esos dos bytes del juego de datos codifica un módulo respectivamente en la
configuración original con STEP 7:
● "slot_1" e "info_slot_1" (bytes 4 y 5 del juego de datos, véase la figura siguiente)
corresponden al módulo del slot 1 en la configuración con STEP 7.
● "slot_2" e "info_slot_2" (bytes 6 y 7) corresponden al módulo del slot 2 en la configuración
con STEP 7.
● "slot_3" e "info_slot_3" (bytes 8 y 9) corresponden al módulo del slot 3 en la configuración
con STEP 7.
● etc.
Byte "slot_x"
El slot actual está codificado por el número que se ha asignado a "slot_x" (por su valor).
Ejemplos:
● El valor "1" del byte 4 significa que también en la configuración actual se asigna el slot 1
(slot_1 = 1) al módulo que originalmente estaba enchufado en el slot 1.
● El valor "2" del byte 4 significa que en la configuración actual se asigna el slot 2 (slot_1 = 2)
al módulo que originalmente estaba enchufado en el slot 1.
● El valor "3" del byte 4 significa que en la configuración actual se asigna el slot 3 (slot_1 = 3)
al módulo que originalmente estaba enchufado en el slot 1.
● etc.
● El valor "1" del byte 6 significa que en la configuración actual se asigna el slot 1 (slot_2 = 1)
al módulo que originalmente estaba enchufado en el slot 2.
● El valor "2" del byte 6 significa que en la configuración actual se asigna el slot 2 (slot_2 = 2)
al módulo que originalmente estaba enchufado en el slot 2.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3511

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● El valor "3" del byte 6 significa que en la configuración actual se asigna el slot 3 (slot_2 = 3)
al módulo que originalmente estaba enchufado en el slot 2.
● etc.
Si en lugar de un módulo también es posible enchufado una tapa de BU, codifíquela sumando
al slot el número 128 (el bit 7 del byte "slot_x" está activado). Ejemplos:
● El valor "129" en slot_1 significa que también en la configuración actual se asigna el slot 1
al módulo que originalmente estaba enchufado en el slot 1. Además, en lugar de ese
módulo puede utilizarse una tapa de BU. En tal caso, en la configuración real la instalación
tiene enchufado el módulo o una tapa de BU.
● El valor "130" en slot_1 significa que en la configuración actual se asigna el slot 2 al módulo
que originalmente estaba enchufado en el slot 1. Además, en lugar de ese módulo puede
utilizarse una tapa de BU. En tal caso, en la configuración real la instalación tiene
enchufado el módulo o una tapa de BU.
● El valor "131" en slot_1 significa que en la configuración actual se asigna el slot 3 al módulo
que originalmente estaba enchufado en el slot 1. Además, en lugar de ese módulo puede
utilizarse una tapa de BU. En tal caso, en la configuración real la instalación tiene
enchufado el módulo o una tapa de BU.
Byte "info_slot_x"
Si con el módulo se abre un grupo de potencial nuevo, asigne al byte "info_slot_x" el valor 1 (el
bit 0 del byte está activado). Ejemplos:
● El valor "1" en el byte "info_slot_2" significa que con el módulo 2 se abre un grupo de
potencial nuevo.
● El valor "1" en el byte "info_slot_3" significa que con el módulo 3 se abre un grupo de
potencial nuevo.
● El valor "1" en el byte "info_slot_4" significa que con el módulo 4 se abre un grupo de
potencial nuevo.
Excepción: el primer módulo de la configuración original en STEP 7 tiene asignado
automáticamente un grupo de potencial nuevo. Esto último no se codifica en el juego de datos.
En "info_slot_1" se puede introducir cualquier valor.
Los nombres de los componentes del juego de datos de control (por ejemplo "slot_1") se
pueden elegir libremente.
Ejemplo de un juego de datos de control 196 para ET 200SP
La figura siguiente muestra el juego de datos de control 196 para un ET 200SP con cuatro
módulos.
En esta configuración también puede insertarse en el slot 2 el módulo que en la configuración
en STEP 7 estaba enchufado en el slot 2. O también puede haber enchufada una tapa de BU
en el slot 2. Por lo demás no ha cambiado nada respecto a la configuración original.

3512

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Direccionamiento del módulo de interfaz mediante identificador de hardware
Para transferir el juego de datos 196 con la instrucción WRREC hay que introducir el
identificador de hardware del submódulo IM con la extensión "∼Head" como parámetro de
entrada para la instrucción. La constante de sistema de dicho identificador de hardware es, p.
ej., "IO-Device_2∼Head". Las constantes de sistema de un dispositivo seleccionado se
muestran, por ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Juego de datos de relectura 197 para ET 200SP
El juego de datos de relectura 197 sirve para leer la configuración real de una estación (en este
caso una estación ET 200SP).
Este juego de datos de relectura permite comprobar la configuración real del ET 200SP. El
juego de datos de relectura contiene información sobre si existe realmente o no cada uno de
los módulos configurados.
● El valor "1" significa que está enchufado el módulo correcto en el slot previsto.
● El valor "0" codifica las restantes posibilidades (módulo erróneo, slot vacío, tapa de BU).
Detalle de la estructura:
La estructura del bloque de datos corresponde a la configuración original del ET 200SP con
STEP 7.
En el juego de datos hay dos bytes previstos para cada módulo. La posición de esos dos bytes
en el juego de datos corresponde a la posición de un módulo en la configuración original con
STEP 7.
Orden de los bytes:
● "status_slot_1" y "reserve_1" (bytes 4 y 5 del juego de datos) corresponden al módulo del
slot 1 en la configuración,
● "status_slot_2" y "reserve_2" (bytes 6 y 7) corresponden al módulo del slot 2 en la
configuración,

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3513

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● "status_slot_3" y "reserve_3" (bytes 8 y 9) corresponden al módulo del slot 3 en la
configuración,
● etc.
Ejemplo
La configuración original en STEP 7 ha sido modificada por un juego de datos de control 196
(véase el ejemplo más arriba): En la configuración modificada, el módulo 2 puede estar
enchufado en el slot 2 o haber sido sustituido por una tapa de BU.
La figura siguiente muestra el juego de datos de relectura 197, con el que el ET 200SP notifica
que en el slot 2 se encuentra el módulo: el byte "status_slot_2" tiene el valor "1".
Los restantes módulos también existen y están enchufados en los slots correctos.

La figura siguiente muestra el juego de datos de relectura 197, con el que el ET 200SP notifica
que en el slot 2 se utiliza una tapa de BU: el byte "status_slot_2" tiene el valor "0".
Los restantes módulos existen y están enchufados en los slots correctos.

3514

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Leer el juego de datos de relectura 197
La instrucción RDREC permite leer desde el ET 200SP el juego de datos de relectura 197.
RDREC trabaja asíncronamente. Si se llama a RDREC en el OB de arranque, es necesario
llamar varias veces la instrucción en un bucle, hasta que los parámetros de salida "BUSY" o
DONE" indiquen que se ha leído el juego de datos.
Para leer el juego de datos 197 con la instrucción RDREC hay que introducir el identificador de
hardware del submódulo IM con la extensión "∼Head" como parámetro de entrada para la
instrucción. La constante de sistema de dicho identificador de hardware es, p. ej., "IODevice_2∼Head". Las constantes de sistema de un dispositivo seleccionado se muestran, por
ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Información adicional y ejemplos
Encontrará ejemplos concretos del control de configuración en esta descripción de aplicación
(http://support.automation.siemens.com/WW/view/es/29430270).
Encontrará información relacionada con el ET 200SP en los manuales de producto IM 155-6
PN (http://support.automation.siemens.com/WW/view/es/73184046) e IM 155-6 DP (http://
support.automation.siemens.com/WW/view/es/73098660).
Aquí están depositados una librería de los juegos de datos y otros ejemplos de aplicación:
Plantillas para los juegos de datos (http://support.automation.siemens.com/WW/view/es/
29430270)

Consulte también
Control de configuración con ET 200AL (Página 3558)
Control de configuración en ET 200SP con módulos ET 200AL integrados (Página 3515)

Control de configuración en ET 200SP con módulos ET 200AL integrados
ET 200SP con módulos ET 200AL integrados
El control de configuración en ET 200SP y ET 200AL se describe en temas de ayuda
independientes. Véanse al respecto los enlaces de "Véase también".
El procedimiento que se muestra allí también es válido para el control de configuración de un
ET 200SP con módulos AL integrados. Existen diferencias en el juego de datos de control 196
y el juego de datos de relectura 197.
El texto de ayuda siguiente describe el juego de datos de control 196 y el juego de datos de
notificación 197 de un ET 200SP ampliado con módulos ET 200AL.

Juego de datos de control 196
Las dos figuras siguientes muestran partes del juego de datos de control 196 para la
configuración de un ET 200SP ampliado con módulos ET 200AL.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3515

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Sirve de ejemplo la configuración siguiente:
● En el slot 1 "slot_1" se encuentra al módulo "BA Send 1xFC". Este módulo permite integrar
módulos ET 200AL en un ET 200SP. En nuestro ejemplo de configuración hay 16 módulos
AL conectados al BA Send (configuración máxima). Si se utiliza un módulo BA Send, debe
estar enchufados en el slot 1.
● Del slot 2 al 64, todos tienen enchufados módulos ET 200SP.
● En el slot 65 hay enchufado un módulo de servidor.
● En los slots 66 a 81 se encuentran 16 módulos AL.
El ET 200SP con módulos AL integrados configurado originalmente con STEP 7 debe
reconfigurarse a partir del programa de usuario.
La nueva configuración presenta las características siguientes:
● El módulo "BA Send 1xFC" está enchufado en "slot_1_BA-Send" (preasignación fija).
● El módulo 2 "slot_2" no existe en la configuración modificada (valor "0").
● El módulo 3 "slot_3" está enchufado en el slot 2 en la configuración modificada (valor "2").
● El módulo 4 "slot_4" está enchufado en el slot 3 en la configuración modificada (valor "3").
● Desde el slot 5 hasta el slot 81, todos los módulos funcionan con la configuración original
con STEP 7.

Los componentes del juego de datos de control 196 (figura superior):
● block_length: anote aquí la longitud del juego de datos de control (en el ejemplo, 166
bytes). La longitud del bloque de datos de control se calcula con la fórmula "2 x número de
slots + 4".
● block_ID: introduzca aquí el número 196.

3516

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● version: el ET 200SP utiliza la versión 2 del juego de datos de control 196.
● subversion: el ET 200SP utiliza la subversión 0 del juego de datos de control 196.

Los componentes del juego de datos de control 196 (figura superior):
● slot_65_SP: este byte se refiere al módulo de servidor del rack ET 200SP. Desconecta el
bus de fondo del ET 200SP.
● A partir de "slot_66_AL" siguen los 16 módulos ET 200AL configurados: Nuestra
configuración de ejemplo no modifica la configuración mediante STEP 7. El byte
"slot_66_AL" tiene el valor "66", el byte "slot_67_AL" tiene el valor "67", el byte "slot_68_AL"
tiene el valor "68", etc.

Definición del juego de datos de control 196
Para el control de configuración se define un juego de datos de control 196 que contiene una
asignación de slots.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3517

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Byte

Componente

Valor

Explicación

0

block_length

p. ej. 166 con confi‐
guración máxima
con

La longitud del juego de datos se
calcula con la fórmula: 4 + "nú‐
mero de módulos" x 2

Encabeza‐
do

65 módulos ET
200SP y
16 módulos ET
200AL
(con el módulo de in‐
terfaz DP, máximo
33 módulos
ET 200SP y 16 mó‐
dulos ET 200AL)
1

block-ID

196

ID para el juego de datos de con‐
trol 196

2

version

2

Versión 2 del juego de datos de
control 196

3

subversion

0

Subversión 0 del juego de datos
de control 196

4

slot_1_BA-Send

Slot real para el mó‐ Al integrar módulos AL en ET
dulo SP 1
200SP, en el slot 1 tiene que es‐
tar enchufado siempre el módulo
Valor posible:
"BA Send 1xFC".
1

5

info_slot_1_BASend

0o1

El valor "1" significa que con este
módulo se abre un grupo de po‐
tencial nuevo (en este byte no se
evalúa).

6

slot_2

Slot real para módu‐ El módulo SP 2 configurado pue‐
lo SP 2
de estar realmente enchufado en
uno de los slots de 2 a 65 (de 2 a
Valores posibles:
33 con módulo de interfaz DP).
de 2 a 65
(excepto de 66 a 81,
Para los módulos AL están pre‐
reservados para mó‐
vistos los slots 66 a 81 (34 a 49
dulos AL)
con módulo de interfaz DP).
0 (en caso de que
falte el módulo confi‐
gurado 2)

7

info_slot_2

1

Primer slot
para módu‐
los SP
Asignación
para el mó‐
dulo SP 1
configurado
a un slot
real.
Segundo
slot para
módulos SP
Asignación
para el mó‐
dulo SP 2
configurado
a un slot
real.

El valor "1" significa que con este
módulo se abre un grupo de po‐
tencial nuevo
En este byte debe abrirse siem‐
pre un grupo de potencial nuevo,
puesto que BA Send no puede
abrir un grupo de potencial nue‐
vo.

3518

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
8

slot_3

Slot real para módu‐ El módulo SP 3 configurado pue‐
lo SP 3
de estar realmente enchufado en
uno de los slots de 2 a 65 (de 2 a
Valores posibles:
33 con módulo de interfaz DP).
de 2 a 65
(excepto de 66 a 81,
Para los módulos AL están pre‐
reservados para mó‐
vistos los slots 66 a 81 (34 a 49
dulos AL)
con módulo de interfaz DP).
0 (en caso de que
falte el módulo confi‐
gurado 3)

9

info_slot_3

1

Tercer slot
para módu‐
los SP
Asignación
para el mó‐
dulo SP 3
configurado
a un slot
real.

El valor "1" significa que con este
módulo se abre un grupo de po‐
tencial nuevo
.

:

:

:

:

132

slot_65

Slot real para módu‐ El módulo SP 65 configurado
puede estar realmente enchufa‐
lo SP 65
do en uno de los slots de 2 a 65
Valores posibles:
(de 2 a 33 con módulo de interfaz
de 2 a 65
DP).
(excepto de 66 a 81,
reservados para mó‐
Para los módulos AL están pre‐
dulos AL)
vistos los slots 66 a 81 (34 a 49
0 (en caso de que
con módulo de interfaz DP).
falte el módulo confi‐
gurado 65)

133

info_slot_65

0o1

134

slot_66

Slot real para módu‐ El módulo AL 1 configurado pue‐
lo AL 1
de estar realmente enchufado en
uno de los slots de 66 a 81 (de 34
Valores posibles:
a 49 con PROFIBUS).
de 66 a 81

65.º slot pa‐
ra módulos
SP
Asignación
para el mó‐
dulo SP 65
configurado
a un slot
real.

El valor "1" significa que con este
módulo se abre un grupo de po‐
tencial nuevo (el valor no se eva‐
lúa en este slot).

(excepto de 1 a 65,
reservados para mó‐
dulos SP)
0 (en caso de que
falte el módulo AL
configurado 1)
135

info_slot_66

-

Reserva

:

:

:

:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

:

Primer slot
para módu‐
los AL
Asignación
para el mó‐
dulo AL 1
configurado
a un slot
real.

:

3519

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
164

slot_81

Slot real para módu‐ El módulo AL configurado 16
lo AL 16
puede estar realmente enchufa‐
do en uno de los slots de 66 a 81
Valores posibles:
(de 34 a 49 con módulo de inter‐
de 66 a 81
faz DP).
(excepto de 1 a 65,
reservados para mó‐
dulos SP)
0 (en caso de que
falte el módulo AL
configurado 16)

165

info_slot_81

-

16.º slot pa‐
ra módulos
AL
Asignación
para el mó‐
dulo AL 16
configurado
a un slot
real.

Reserva

Reglas
● Si se utiliza el módulo "BA Send 1xFC", debe estar enchufado en el slot 1.
● En los slots 2 a 65 hay enchufados módulos ET 200SP (en los slots 2 a 33 con módulo de
interfaz DP).
● En los slots 66 a 81 hay enchufados módulos AL (en los slots 34 a 49 con módulo de interfaz
DP).
● Si se amplía un ET 200SP con módulos ET 200AL, el primer módulo AL siempre estará
codificado en los bytes 134 y 135 del juego de datos de control, el segundo módulo AL
siempre en los bytes 136 y 137, etc., aunque no conviene que todos los slots SP tengan
enchufados módulos SP. Los slots SP sin ocupar se codifican con el valor "0".

Mensajes de error
Al escribir el juego de datos de control 196, en caso de fallo se devuelven los siguientes
mensajes de error:
Tabla 1-211 Mensajes de error
Código de error

Significado

16#80A2

Error de protocolo DP en Layer 2. Indica un acuse de recibo del
juego de datos que no se ha producido debido al sistema.

16#80B1

Longitud no permitida; la indicación de longitud del juego de datos
196 no es correcta.

16#80B5

Control de configuración no parametrizado.

16#80B2

invalid slot: el slot configurado no está ocupado.

16#80B8

Error de parámetros; el módulo notifica parámetros no válidos.

16#80C5

El esclavo DP o el módulo no está disponible. Indica un acuse de
recibo del juego de datos que no se ha producido debido al sistema.

Juego de datos de relectura 197 para ET 200SP con módulos AL
El juego de datos de relectura 197 permite comprobar la configuración real de un ET 200SP
con módulos AL.

3520

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
El juego de datos 197 es en gran parte similar al juego de datos de relectura 197 para ET
200SP sin módulos AL, aunque es más largo porque también deben codificarse los módulos
AL adicionales.
En el juego de datos hay dos bytes previstos para cada módulo. Cada posición de esos dos
bytes en el juego de datos codifica un módulo en la configuración original con STEP 7.
En la figura siguiente:
● los componentes "status_slot_1" y "reserve_slot_1" (bytes 4 y 5 del juego de datos)
corresponden al módulo del slot 1 en la configuración con STEP 7
● "status_slot_2" y "reserve_slot_2" (bytes 6 y 7) corresponden al módulo del slot 2,
● "status_slot_3" y "reserve_slot_3" (bytes 8 y 9) corresponden al módulo del slot 3,
● etc.
El juego de datos siguiente está estructurado para una configuración con 65 módulos SP y 16
módulos AL. Por ello el elemento "block_length" del juego de datos tiene el valor "166".
Si se configura en STEP 7 un ET 200SP con menos módulos, se acorta el bloque de datos.
El hecho de que en una configuración se utilicen menos módulos SP no influye en la longitud
del juego de datos 197 (en caso de ampliación del ET 200SP con módulos ET 200AL).
El componente "reserve_x" del juego de datos de relectura 197 está reservado para
aplicaciones futuras.
Los nombres de los componentes del juego de datos de relectura (por ejemplo "status_slot_1")
se pueden elegir libremente.
La figura siguiente muestra el inicio del juego de datos de relectura 197 para leer la
configuración real de un ET 200SP con módulos AL.

No se representan los componentes "status_slot_7" a "reserve_81" (configuración máxima de
un ET 200SP con módulo de interfaz PN) ni "status_slot_7" a "reserve_slot_49" (configuración
máxima de un ET 200SP con módulo de interfaz DP).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3521

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Significado de "status_slot_x":
● El valor "1" en status_slot_x significa que el módulo x está enchufado en el slot previsto.
● El valor "0" codifica las restantes posibilidades (módulo erróneo, slot vacío, tapa de BU).
La figura siguiente muestra una parte del juego de datos de respuesta 197 para leer la
configuración real de un ET 200SP con módulos AL (y módulo de interfaz PN). Hasta el slot 65
hay enchufados módulos ET 200SP; después siguen los módulos AL. Por ejemplo, el valor "1"
en el byte "status_slot_66_AL" significa que el primer módulo AL existe realmente en la
instalación y está enchufado en el slot correcto.

Lectura del juego de datos de respuesta 197
La instrucción RDREC lee el juego de datos de respuesta 197 en el ET 200SP. RDREC trabaja
asíncronamente. Si se llama a RDREC en el OB de arranque, es necesario llamar varias veces
la instrucción en un bucle, hasta que los parámetros de salida "BUSY" o DONE" indiquen que
se ha leído el juego de datos.

Información adicional y ejemplos
Encontrará ejemplos concretos del control de configuración en esta descripción de aplicación
(http://support.automation.siemens.com/WW/view/es/29430270).
Encontrará información relacionada con el ET 200SP en los manuales de producto IM 155-6
PN (http://support.automation.siemens.com/WW/view/es/73184046) e IM 155-6 DP (http://
support.automation.siemens.com/WW/view/es/73098660).
Encontrará información relacionada con el ET 200AL aquí (http://
support.automation.siemens.com/WW/view/es/89254863).

Consulte también
Control de configuración con ET 200SP (Página 3510)
Control de configuración con ET 200AL (Página 3558)

3522

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Ampliación de ET 200SP con módulos ET 200AL
Introducción
El ET 200SP es un sistema de periferia descentralizada para montar en un armario eléctrico.
El sistema puede ampliarse con módulos de la serie ET 200AL, ejecutados con grado de
protección IP65/67. Los módulos ET 200AL se pueden montar in situ, por ejemplo a pie de
máquina.

Reglas para slots
Para utilizar módulos del ET 200AL en un ET 200SP con módulo de interfaz se aplican las
reglas siguientes:
● En el slot 1 del ET 200SP debe enchufarse el módulo "BA-Send 1xFC" si es necesario
ampliar el ET 200SP con módulos ET 200AL.
● Los módulos ET 200AL deben configurarse sin dejar huecos libres.
En el procedimiento que se describe más abajo se explica la utilización de módulos del ET
200AL en un ET 200SP con módulo de interfaz.
Para utilizar módulos del ET 200AL en un ET 200SP con CPU se aplican las reglas siguientes:
● El módulo "BA-Send 1xFC" puede enchufarse en los slots 2 a 4 de la CPU ET 200SP.
● Puede enchufarse un módulo de comunicación CM DP como submódulo de la CPU, pero
ocupando el slot 2.

Procedimiento
Para configurar un ET 200SP con módulo de interfaz con módulos ET 200AL, proceda del
siguiente modo:
1. Arrastre un módulo de interfaz (PROFINET o PROFIBUS) de la serie ET 200SP hasta la
vista de redes utilizando la función Drag & Drop.
2. Cambie a la vista de dispositivos. Para ello, haga doble clic en el símbolo del módulo que
se acaba de enchufar.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3523

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
3. Inserte el módulo "BA Send 1xFC" en el slot 1 del ET 200SP.
STEP 7 generará un rack ET-Connection con 16 slots para módulos ET 200AL (figura
siguiente).
Un rack ET-Connection es un rack virtual que permite ver el orden de los módulos ET 200AL
conectados.
Sobre los slots se muestran signos de interrogación porque aún no hay ningún módulo ET
200AL conectado en BA Send.

3524

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
4. Elija en el catálogo de hardware (subcarpeta ET 200AL de la carpeta ET 200SP) el primer
módulo ET 200AL que deba conectarse al ET 200SP: Arrastre dicho módulo mediante Drag
& Drop hasta el slot 1 del rack ET-Connection.
STEP 7 genera una línea que parte de dicho módulo y va hasta el módulo "BA Send 1xFC"
y le asigna los números de slot 66 a 81 (figura siguiente).
Si se configura el ET 200SP con un módulo de interfaz DP, STEP 7 asignará a los módulos
ET 200AL los números de slot 34 a 49.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3525

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
5. A continuación arrastre todos los demás módulos ET 200AL mediante Drag & Drop hasta
los slots libres del rack ET-Connection.
STEP 7 inserta automáticamente la conexión ET-Connection entre los distintos módulos
ET 200AL (bucles verdes).
En la configuración siguiente se han conectado sucesivamente cinco módulos ET 200AL.

6. Complete la configuración del ET 200SP: Arrastre todos los módulos ET 200SP del
catálogo de hardware hasta los slots del ET 200SP.
En el ejemplo de configuración siguiente se han insertado cinco módulos ET 200SP. En el
slot 0 el módulo de interfaz PN, en el slot 1 el módulo "BA Send 1xFC", en los slots 2 y 3 un
módulo de entrada respectivamente, y en el slot 4 un módulo de servidor:

3526

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Control de configuración con ET 200AL (Página 3558)
Sistema de periferia descentralizada ET 200AL (Página 3551)

Parámetro Módulos de salida
Comportamiento de valor sustitutivo
Comportamiento de valor sustitutivo
En el ET 200SP, el comportamiento de valor sustitutivo es definido por el controlador IO para
cada slot.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3527

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
la salida correspondiente se comporta conforme al comportamiento parametrizado del valor
sustitutivo:
● "Desconectar"
● "Aplicar valor sustitutivo"
● "Mantener último valor"
El comportamiento de valor sustitutivo se da en los casos siguientes:
● Controlador IO en STOP
● Fallo del controlador (interrupción de la conexión)
● Actualización del firmware
● Restablecimiento de la configuración de fábrica
● Extracción de varios módulos de periferia al mismo tiempo
● Desactivación del dispositivo IO
● Parada de la estación
– Ausencia del módulo servidor
– Extracción de varios módulos de periferia al mismo tiempo
– Al menos un módulo de periferia está enchufado en una BaseUnit errónea
Nota
Reducir una configuración
Si se reduce la configuración del ET 200SP y se carga en la CPU, los módulos que
todavía existen pero ya no están configurados conservan su comportamiento original en
lo que respecta al valor sustitutivo. Éste es válido hasta que se desconecta la tensión de
alimentación en la BaseUnit BU...D o en el módulo de interfaz.

Parámetro Módulos de entrada
Parámetros de los módulos de entradas digitales
Diagnóstico Falta tensión de alimentación L+
Habilitación del aviso de diagnóstico cuando la tensión de alimentación L+ es insuficiente o
falta.

3528

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Diagnóstico Cortocircuito a masa
Habilitación del diagnóstico cuando aparece un cortocircuito a masa de la alimentación del
sensor.
























0
/

①
②

Alimentación del sensor
Cortocircuito

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3529

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Diagnóstico Cortocircuito a L+
Habilitación del diagnóstico cuando aparece un cortocircuito a L+ de la alimentación del sensor.
























0
/

①
②

Alimentación del sensor
Cortocircuito

Diagnóstico Rotura de hilo
Habilitación del diagnóstico si el cable que va al sensor está interrumpido.

Modo de operación
Determina si un canal está activado o desactivado.

Prolongación del impulso (solo para módulos High Feature)
La prolongación del impulso es una función que modifica una señal de entrada digital. Un
impulso en una entrada digital se prolonga como mínimo hasta la longitud parametrizada. Si el
impulso de entrada ya es más largo que la longitud parametrizada, no se modifica.
La prolongación del impulso se inicia siempre que el estado de la señal de entrada se modifica
y si no hay activa ninguna prolongación del impulso para este canal.

3530

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Grupo de potencial del módulo izquierdo/nuevo grupo de potencial
Determina si el módulo de periferia se encuentra en una BaseUnit con entrada de tensión de
alimentación (nuevo grupo de potencial) o en una BaseUnit sin entrada de tensión de
alimentación (en este caso forma parte del grupo de potencial del módulo izquierdo).

Parámetros de los módulos de entradas analógicas
Falta tensión de alimentación L+
Habilitación del diagnóstico en caso de que falte tensión de alimentación L+ o sea insuficiente.

Unión fría (AI 4xRTD/TC 2-/3-/4-wire HF)
La unión fría puede ser una BaseUnit con sensor de temperatura interno (BU..T) o el canal 0
del módulo de periferia, siempre que este se haya parametrizado como "Termorresistencia
Pt100 climatiz. Celsius".
A continuación se muestra una posible parametrización (consulte también Información
importante sobre el modo de canal de referencia (Página 3534)):
Tabla 1-212 Canal RTD
Ajuste

Descripción

Sin modo de canal de referencia

El valor de temperatura existente en el canal 0 puede utilizarse como valor de
referencia para todo el módulo si los demás canales se configuran en corres‐
pondencia.

Canal de referencia del grupo x

El canal actúa de emisor de la temperatura de la unión fría del grupo x. La
distribución se realiza a través del módulo de interfaz.

Tabla 1-213 Canal TC
Ajuste

Descripción

Canal de referencia del módulo

El canal TC correspondiente utiliza el canal 0 del mismo módulo como tempe‐
ratura de la unión fría. Este debe estar parametrizado como "Termorresistencia
Pt 100 climatiz. Celsius" y "Sin modo de canal de referencia", pues de lo con‐
trario se dispara el diagnóstico Unión fría.

Unión fría interna

La temperatura de la unión fría se lee de un sensor de temperatura interno en
la BaseUnit. En caso de que el tipo de BaseUnit sea incorrecto, se dispara el
diagnóstico Unión fría.

Canal de referencia del grupo x

Con el ajuste "TC" (termopar...), el canal actúa de receptor de la temperatura de
la unión fría del grupo x.

Temperatura de referencia fija

No se compensa la temperatura. La linealización se consigue con una tempe‐
ratura supuesta de la unión fría de 0 °C.

Rebase por exceso
Habilitación del diagnóstico si el valor medido sobrepasa el rango de rebase por exceso.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3531

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Rebase por defecto
Habilitación del diagnóstico si el valor medido es inferior al rango de rebase por defecto.

Rotura de hilo
Habilitación del diagnóstico cuando el módulo no tiene flujo de corriente o o cuando la corriente
es insuficiente para la medición en la entrada parametrizada en correspondencia.

Filtrado
Los diferentes valores medidos se alisan mediante filtrado digital. El filtrado puede ajustarse en
4 niveles, de modo que el factor de filtrado k multiplicado por el tiempo de ciclo del módulo de
periferia equivale a la constante de tiempo del filtro. Cuanto mayor sea el filtrado mayor será
la constante de tiempo del filtro.
La figura siguiente muestra la respuesta indicial con los diferentes factores de filtrado en
función del número de ciclos del módulo.
QLQJXQRN 

G«ELON 

PHGLRN 

IXHUWHN 



5HVSXHVWDLQGLFLDO

 [ [

[

[

















&LFORVGHOPµGXOR

Figura 1-151

Alistamiento con AI 4×RTD/TC 2‑/3‑/4‑wire HF

Supresión de frecuencias perturbadoras
En los módulos de entradas analógicas, suprime las perturbaciones provocadas por la
frecuencia de la red de tensión alterna utilizada.
La frecuencia de la red de tensión alterna puede provocar interferencias en el valor medido,
especialmente al medir en rangos de pequeña tensión y con termopares. Con este parámetro,
el usuario indica la frecuencia de red existente en la instalación.

Valores límite de la alarma de proceso
Si se rebasa el límite superior 1/2 por encima o el límite inferior 1/2 por debajo, el módulo
dispara una alarma de proceso.

3532

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
A continuación se muestran algunos ejemplos de selección de los valores límite 1 y 2.

9DORUO¯PLWHVXSHULRU

9DORUO¯PLWHVXSHULRU

9DORUO¯PLWHVXSHULRU
9DORUO¯PLWHVXSHULRU

9DORUO¯PLWHVXSHULRU

9DORUO¯PLWHVXSHULRU
9DORUO¯PLWHVXSHULRU

9DORUO¯PLWHLQIHULRU
9DORUO¯PLWHVXSHULRU

9DORUO¯PLWHLQIHULRU
9DORUO¯PLWHLQIHULRU

9DORUO¯PLWHLQIHULRU

9DORUPHGLGR

9DORUO¯PLWHLQIHULRU

9DORUPHGLGR

9DORUO¯PLWHLQIHULRU
9DORUO¯PLWHLQIHULRU

9DORUPHGLGR

9DORUO¯PLWHLQIHULRU

9DORUPHGLGR

Valor límite inferior 1/2
Especifique un umbral cuyo rebase por defecto dispare una alarma de proceso.

Valor límite superior 1/2
Especifique un umbral cuyo rebase por exceso dispare una alarma de proceso.

Grupo de potencial del módulo izquierdo/nuevo grupo de potencial
Determina si el módulo de periferia se encuentra en una BaseUnit con entrada de tensión de
alimentación (nuevo grupo de potencial) o en una BaseUnit sin entrada de tensión de
alimentación (en este caso forma parte del grupo de potencial del módulo izquierdo).

Coeficiente de temperatura (tipo de medición Termorresistencia)
El factor de corrección para el coeficiente de temperatura (valor α) indica el cambio relativo de
la resistencia de un determinado material cuando la temperatura aumenta 1 °C.
El coeficiente de temperatura depende de la composición química del material. En Europa se
utiliza un solo valor por tipo de sensor (valor predeterminado).
Los demás valores permiten ajustar el coeficiente de temperatura en función del sensor, con
lo que se consigue una mayor precisión.

Consulte también
Particularidades del AI 4xRTD/TC 2/3/4 hilos HF (Página 3542)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3533

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Información importante sobre el modo de canal de referencia
Un módulo RTD/TC del ET 200SP funciona en modo de canal de referencia cuando un canal
envía la temperatura de referencia a otros canales de la estación. Los canales receptores
utilizan la temperatura de referencia para compensar la temperatura en la medición con
termopares.

Diseño y uso de los termopares
Un termopar consta de dos hilos de diferentes metales o aleaciones que están soldados entre
sí por un extremo. El punto de soldadura se denomina punto de medición.
El otro extremo de los dos hilos está abierto. Este extremo se denomina unión fría.
En el punto de medición se genera una tensión termoeléctrica entre los dos metales o
aleaciones, la cual depende de la temperatura en el punto de medición. Asimismo, en la
transición del termopar a cables de cobre, p. ej., en la unión fría se generan nuevas tensiones
termoeléctricas que falsifican el valor medido propiamente dicho y deben compensarse. Si la
temperatura de la unión fría es de 0 °C no se requiere compensación.
Para compensar la temperatura de la unión fría existen distintas técnicas:
● Temperatura de referencia fija: la unión fría está ajustada de forma fija a una temperatura
determinada, por ejemplo mediante un baño de agua helada a 0 °C (no se requiere
compensación).
● Unión fría interna: la unión fría es el borne de la BaseUnit en la que está enchufado el
módulo analógico. Si se selecciona el tipo de compensación "Unión fría interna" deben
emplearse BaseUnits con medición integrada de la temperatura para compensar la
temperatura de la unión fría. Estas BaseUnits tienen la denominación "BU..T". El módulo
registra la temperatura en la unión fría y determina con ello la temperatura real en el punto
de medición.
● Canal de referencia del grupo x: una termorresistencia externa registra la temperatura en
la unión fría para el grupo x (grupo de canales dentro de una estación). Esto permite
determinar la temperatura real en el punto de medición correspondiente. Para cada grupo
se requiere una termorresistencia externa. Cada termorresistencia se conecta a un canal
del módulo analógico. Dichos canales se denominan emisores (de la temperatura en la
unión fría).
El funcionamiento y los ajustes se describen en el apartado "Distribución de la temperatura
de referencia en la estación".
● Canal de referencia del módulo: el funcionamiento es similar al "Canal de referencia del
grupo x". Se conecta una termorresistencia externa al canal 0 del módulo para medir la
temperatura en la unión fría. Otros canales del mismo módulo utilizan esta temperatura de
referencia para compensar la temperatura.
El funcionamiento y los ajustes se describen en el apartado "Distribución de la temperatura
de referencia en el módulo".
Encontrará información sobre la estructura y el funcionamiento de un termopar en el manual
Procesamiento de valores analógicos (http://support.automation.siemens.com/WW/view/es/
67989094).

3534

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Distribución de la temperatura de referencia en la estación
La temperatura en la unión fría x puede medirse en un canal (emisor de la temperatura de
referencia) con una termorresistencia y enviarse a otros canales de una estación (receptores).
Todos los canales que reciben la temperatura de una unión fría x forman el grupo x.
Para cada grupo se parametriza exactamente un canal como emisor de la temperatura de
referencia.








①
②
③

Termorresistencia en la unión fría
Un canal mide la temperatura en la unión fría y la envía a otros canales dentro de una estación
(emisor del grupo x). El valor de temperatura sirve para compensar la temperatura en la unión
fría.
Los canales del grupo x reciben la temperatura en la unión fría (receptores).

Parametrización de un canal como canal de referencia (emisor del grupo 1)
A continuación se representa la parametrización siguiendo el ejemplo del grupo 1:
1. Abra el proyecto en STEP 7.
2. Seleccione el módulo analógico deseado en la vista de dispositivos (RTD/TC).
3. A continuación, elija un canal que funcione como emisor de la temperatura en la unión fría.
Son necesarios los siguientes ajustes:
"Tipo de medición": "Termorresistencia", por ejemplo "Termorresistencia (conexión a 4
hilos)"
"Rango de medición": "Pt 100 climatiz."
"Unidad de temperatura": "Grados Celsius"
"Unión fría": "Canal de referencia del grupo 1"
La figura siguiente muestra la parametrización.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3535

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

El canal con esta configuración (tipo de medición Termorresistencia) funciona como canal de
referencia del grupo 1 y envía la temperatura medida a todos los canales (tipo de medición
Termopar) que están parametrizados como receptores del grupo 1.
En el apartado siguiente se explica cómo deben parametrizarse los canales que son
receptores del grupo 1.

Parametrización de un canal como receptor del grupo 1
La figura siguiente muestra la parametrización de un canal que recibe la temperatura en la
unión fría del grupo 1.

3536

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Son necesarios los siguientes ajustes:
● "Tipo de medición": "Termopar"
● "Unión fría": "Canal de referencia del grupo 1"

Distribución de la temperatura de referencia en el módulo
El canal 0 de un módulo permite medir la temperatura en una unión fría y utilizar el valor de
temperatura para los canales 1, 2, 3 ... de dicho módulo. En este caso, el valor de temperatura
medido no se envía a canales de otros módulos de la estación (sin modo de canal de
referencia).






①
②
③

Termorresistencia en la unión fría
Un canal mide la temperatura en la unión fría, parámetro "Unión fría": "Sin modo de canal de
referencia"
Los canales del mismo módulo utilizan el valor de temperatura para compensar la temperatura
de la unión fría en la medición con termopares, parámetro "Unión fría": "Canal de referencia del
módulo"

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3537

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parametrización del canal 0 como canal de referencia del módulo
La figura siguiente muestra la parametrización del canal 0 de un módulo que debe utilizarse
para medir la temperatura en la unión fría.

Son necesarios los siguientes ajustes:
● "Tipo de medición": "Termorresistencia", por ejemplo "Termorresistencia (conexión a 4
hilos)"
● "Rango de medición": "Pt 100 climatiz."
● "Unidad de temperatura": "Grados Celsius"
● "Unión fría": "Sin modo de canal de referencia"

3538

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parametrización de un canal que utiliza el canal 0 como referencia
La figura siguiente muestra cómo debe parametrizarse un canal que utiliza el canal 0 de este
módulo como canal de referencia para compensar la temperatura.

Los ajustes siguientes son necesarios para los canales del módulo que compensan la
temperatura de la unión fría mediante el canal 0:
● "Tipo de medición": "Termopar"
● "Unión fría": "Canal de referencia del módulo"

Consulte también
Parámetros de los módulos de entradas analógicas (Página 3531)

Información importante sobre la función de sobremuestreo Oversampling
Para necesidades elevadas en cuanto a potencia y velocidad están disponibles módulos
analógicos de alta velocidad (HS). La principal característica de estos módulos analógicos HS
frente a los módulos analógicos estándar (ST) es que sus tiempos de ciclo son más cortos.
Para lograrlo, los módulos de entradas y salidas disponen de componentes con tiempos de
ciclo y tiempos de conversión extremadamente cortos. Además, toda la arquitectura de estos
módulos está diseñada para un procesamiento rápido de las señales.
Los módulos analógicos HS transforman los valores medidos y los valores de salida en
paralelo. Cada canal del módulo cuenta con un convertidor A/D o D/A propio. Así, el tiempo de
ciclo coincide prácticamente con el tiempo de conversión y es independiente del número de
canales activados. Esto es aplicable tanto para las entradas como para las salidas analógicas.
De este modo es posible utilizar módulos HS en el modo isócrono rápido.
Además del modo isócrono, los módulos analógicos HS también ofrecen ventajas en el modo
no isócrono (libre). Gracias al rápido procesamiento de las señales de proceso, los módulos
analógicos HS son capaces de detectar antes los cambios que se produzcan en los valores de

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3539

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
proceso y reaccionar a dichos eventos con los bloques de programa adecuados (p. ej. bloques
de organización de alarma de proceso o alarma cíclica).

Modo isócrono
Por "modo isócrono" se entiende el acoplamiento síncrono
● de la captura y la salida de señales a través de la periferia descentralizada;
● de la transmisión de señales vía PROFIBUS o PROFINET;
● de la ejecución del programa en el ciclo del PROFIBUS o PROFINET equidistante.
De este modo se obtiene un sistema que captura y procesa sus señales de entrada y emite las
señales de salida en intervalos constantes. El modo isócrono garantiza tiempos de reacción
del proceso altamente reproducibles y definidos, así como un procesamiento de señales
equidistante y síncrono en la periferia descentralizada.
Con el modo isócrono configurado, el sistema de bus y los módulos de periferia funcionan de
forma síncrona. Los datos de entrada y de salida transmitidos están acoplados a una "tarea
isócrona" en la CPU. De este modo los datos de un ciclo son siempre coherentes. Todos los
datos de la memoria imagen de proceso están conexos desde el punto de vista lógico y
temporal. De este modo se excluye casi por completo la posibilidad de jitter en el programa de
usuario debido a una captura de valores de diferente antigüedad.
La reproducibilidad temporal exacta de todos los procesos permite controlar con seguridad
incluso procesos rápidos. El modo isócrono contribuye a lograr una elevada calidad de
regulación y, por tanto, a mejorar la precisión en la fabricación. Al mismo tiempo se reducen
drásticamente las posibles oscilaciones de los tiempos de reacción del proceso. El
procesamiento en tiempo asegurado puede utilizarse para un ciclo de máquina mayor. Los
tiempos de ciclo menores aumentan la velocidad de procesamiento y, por tanto, contribuyen
a reducir los costes del producto.

Oversampling
El empleo de la función de sobremuestreo Oversampling en módulos de entradas o salidas
analógicas requiere una configuración isócrona.
En los módulos de entradas analógicas, el tiempo de ciclo de emisión ajustado se divide en
subciclos equidistantes en el tiempo. Los tiempos de ciclo de emisión pueden dividirse entre
2 y 16 subciclos. Cada subciclo lee un valor medido. En el siguiente tiempo de ciclo de emisión
se copian en el módulo de interfaz (IM) los valores medidos leídos en un ciclo de datos, y un
ciclo más tarde están a disposición de la CPU procesadora.
En los módulos de salidas analógicas, el tiempo de ciclo de emisión ajustado se divide a su vez
en subciclos equidistantes en el tiempo. Los tiempos de ciclo de emisión pueden dividirse entre
2 y 16 subciclos. Cada subciclo emite un valor de salida. En un mismo tiempo de ciclo de
emisión se copian los valores de salida de la CPU en el módulo de interfaz y, un ciclo después,
se escriben en el proceso.
Los valores leídos o emitidos se transfieren a los datos de usuario del módulo analógico. De
este modo el espacio de direcciones del módulo se amplía de 2 bytes de datos de usuario por
canal a 16 x 2 bytes de usuario por canal (con 16 subciclos). Si el tiempo de ciclo de emisión
se divide en menos de 16 subciclos, a la entrada las direcciones no utilizadas se rellenan con
el valor de error 0x7FFF. A la salida, los valores de las direcciones no utilizadas se ignoran.

3540

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Dado que en principio los subciclos deben encontrarse en un tiempo de ciclo de emisión, la
función Oversampling, a diferencia del modelo de 3 ciclos del modo isócrono, necesita un ciclo
adicional para copiar los datos en el módulo de interfaz. De ahí surge un modelo de 5 ciclos.

0RGRLVµFURQR
&LFOR
Q

Q




&38
2%[

,0









Q










&38

Q






,0





Q













6XEFLFORV

①
②
③
④
⑤

El tiempo de ciclo de emisión se divide en subciclos que capturan el valor medido (en este caso:
10 subciclos)
Los valores medidos se copian en el IM.
Los valores medidos se procesan y se emiten los valores de salida.
La CPU copia los valores de salida en el IM.
Los valores de salida se escriben en el proceso.

Mayores tasas de muestreo mediante sobremuestreo
Un dispositivo IO tiene un tiempo de actualización mínimo debido a los módulos configurados.
Dentro de este tiempo de actualización, el dispositivo IO o el controlador IO del sistema
PROFINET IO recibe datos nuevos una única vez.
Respecto a los canales de un único módulo estándar en el dispositivo IO se aplica lo siguiente:
el tiempo de actualización mínimo ("tasa de muestreo") es exactamente el tiempo de ciclo de
emisión.
Si se desea reducir el tiempo de actualización para los canales de un módulo estándar hay que
reducir el tiempo de ciclo de emisión. Algo que solo es posible reducir en cierta medida (p. ej.,
hasta 0,25 ms), dependiendo de las propiedades de los componentes que intervienen y de la
estructura del sistema IO.
Sin embargo, los módulos con función de sobremuestreo (Oversampling) ofrecen la
posibilidad de reducir aún más el tiempo de actualización ("tasa de muestreo") para sus
canales sin que para ello sea necesario reducir el tiempo de ciclo de emisión para todo el
dispositivo IO.
La subdivisión del tiempo de ciclo de emisión en subciclos equidistantes en el tiempo permite
una velocidad de procesamiento aún mayor gracias a las mayores tasas de muestreo.
Ejemplo
En la práctica, la función de sobremuestreo Oversampling se utiliza cuando la instalación
isócrona, debido a los módulos empleados, funciona tan solo con un determinado tiempo de
ciclo de emisión (p. ej. 1 ms) pero los valores de proceso deben muestrearse más rápido.
Mediante la función Oversampling y una subdivisión del tiempo de ciclo de emisión en 4
subciclos, por ejemplo, los valores de proceso pueden muestrearse cada 250 µs.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3541

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Configuración de la función Oversampling
Active la opción "Modo isócrono" en el dispositivo IO utilizado y en los módulos que funcionen
con sincronismo de ciclo y defina los parámetros correspondientes ("Tiempo de ciclo de
emisión", etc.).
En los módulos de entradas analógicas descentralizados (p. ej. AI 2xU/I 2,4-wire HS), el
número de subciclos se define con el parámetro "Tasa de muestreo".
En los módulos de salidas analógicas descentralizados (p. ej. AQ 2xU/I HS), el número de
subciclos se define con el parámetro "Tasa de salida".
Si se configura p. ej. una "tasa de muestreo" de 4 "valores/ciclo" con un tiempo de ciclo de
emisión de 1 ms, el tiempo de ciclo de emisión se dividirá en 4 subciclos y los valores de
proceso se muestrearán cada 250 µs.

Referencia
Encontrará más información en los manuales de producto de los módulos analógicos rápidos
y en el manual de funciones Procesamiento de valores analógicos (http://
support.automation.siemens.com/WW/view/es/67989094).

Particularidades del AI 4xRTD/TC 2/3/4 hilos HF
Uso de sensores Cu10
● Seleccione en la parametrización "Termorresistencia 3 hilos" y "Cu10".
● Cablee el sensor Cu10 según el sistema de conexión a 3 hilos.
● Durante el funcionamiento se lleva a cabo una compensación interna automática de la
resistencia del cable de medición ausente.
Nota
Para garantizar una compensación óptima del cable de Cu10, tenga en cuenta lo siguiente:
● La suma de la resistencia del cable y la resistencia de medición no debe exceder los
31 Ω.
● El cable debe presentar una resistencia máxima de 8 Ω si desea utilizar el rango de
temperatura hasta los 312 °C.
Ejemplo: un cable de Cu de 200 m de longitud con una sección de conductores de 0,5
mm2 tiene aproximadamente 7 Ω. Una sección más pequeña reduce la longitud de cable
permitida en correspondencia.

Uso de resistencias PTC
Los PTC son adecuados para vigilar la temperatura o como dispositivo de protección térmica
de accionamientos complejos o arrollamientos de transformadores.
● Seleccione en la parametrización "Resistencia 2 hilos" y "PTC":
● Conecte el PTC según el sistema de conexión a 2 hilos.
● Utilice resistencias PTC del tipo A (termistor PTC) según DIN/VDE 0660, parte 302.

3542

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Si el diagnóstico "Rebase por exceso/defecto" está habilitado, con valores de resistencia <
18 Ω se genera un diagnóstico "Rebase por defecto del límite inferior" que indica un
cortocircuito.
● Datos del sensor relativos a la resistencia PTC:
Tabla 1-214 Uso de resistencias PTC
Propiedad

Datos técnicos

Observación

Puntos de conmuta‐ Comportamiento al aumentar la temperatura
ción
< 550 Ω
Rango normal:
● SIMATIC S7: bit 0 = "0", bit 2 = "0" (en PAE)
de 550 Ω a 1650 Ω

Rango de preaviso:
● SIMATIC S7: bit 0 = "0", bit 2 = "1" (en PAE)

< 1650 Ω

Rango de reacción:
● SIMATIC S7: bit 0 = "1", bit 2 = "0" (en PAE)

Comportamiento al descender la temperatura
< 750 Ω

Rango de reacción:
● SIMATIC S7: bit 0 = "1", bit 2 = "0" (en PAE)

de 750 Ω a 540 Ω

Rango de preaviso:
● SIMATIC S7: bit 0 = "0", bit 2 = "1" (en PAE)

< 540 Ω

Rango normal:
● SIMATIC S7: bit 0 = "0", bit 2 = "0" (en PAE)

(TNF-5) °C

máx. 550 Ω

(TNF+5) °C

mín. 1330 Ω

(TNF+15) °C

mín. 4000 Ω

Tensión de medi‐
ción

máx. 7,5V

TNF= temperatura nominal de reacción

Tensión en PTC

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3543

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Ocupación de la imagen de proceso de las entradas (PAE) en SIMATIC S7

(%[

       
    

UHVLVWHQFLDPHGLGDYDORUGHUHDFFLµQ
UHVLVWHQFLDPHGLGD!YDORUGHUHDFFLµQ
HQWUHXPEUDOGHSUHDYLVR\YDORUGHUHDFFLµQ

(%[

       
      
FRUWRFLUFXLWR

Figura 1-152

Ocupación de la memoria imagen de proceso de las entradas (PAE)

● Indicaciones de programación
Nota
En la imagen de proceso de las entradas solo son relevantes para la evaluación los bits
0+2. Los bits 0+2 permiten vigilar la temperatura de un motor, por ejemplo.
Los bits 0+2 de la imagen de proceso de las entradas no tienen memoria. Durante la
parametrización, asegúrese de que un motor, por ejemplo, arranque de forma controlada
(mediante un acuse).
Los bits 0+2 no pueden estar activados al mismo tiempo, sino que se activan
sucesivamente.
Por motivos de seguridad, evalúe siempre las entradas de diagnóstico del AI 4×RTD/TC 2-/
3-/4-wire HF, pues en caso de extracción de módulos de periferia, fallo en la tensión de
alimentación del módulo de periferia, rotura de hilo o cortocircuito de los cables de medición
no es posible medir.

3544

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Ejemplo
El diagrama inferior muestra la evolución de la temperatura y los correspondientes puntos de
conmutación.
5>˖@








5DQJR
QRUPDO

5DQJRGH
SUHDYLVR

5DQJRGHUHDFFLµQ

5DQJRGH
SUHDYLVR

5DQJR
QRUPDO

&RUWR
FLUFXLWR

7>r&@

Consulte también
Parámetros de los módulos de entradas analógicas (Página 3531)
Información importante sobre el rango de medición escalable (Página 3545)

Información importante sobre el rango de medición escalable
El rango de medición escalable
El rango de medición escalable es una parte del rango de medición de temperatura de un
módulo de entradas analógicas (p. ej. el módulo ET 200SP "AI 8xRTD/TC 2-wire HF").
En esta parte es posible una mayor resolución de los valores medidos, como si fuera una lupa
que observa con más precisión un rango parcial.
El rango de medición escalable es compatible con los siguientes tipos de medición:
● Termorresistencia (RTD) estándar
● Termopar

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3545

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
El rango de medición escalable no está disponible para los siguientes tipos de medición:
● Tensión
● Resistencia
● Termorresistencia Climatiz.

Posición y resolución del rango de medición escalable
La posición y la resolución del rango de medición escalable pueden parametrizarse
(escalarse):
● Posición: el rango de medición escalable puede desplazarse a lo largo de todo el rango de
medición estándar. Esto permite determinar el rango de temperatura para el que la
aplicación requiere una resolución mayor.
Excepción: el rango de medición escalable no puede desplazarse hasta situarse dentro del
rebase por exceso o defecto del rango de medición estándar (Clipping).
La posición del rango de medición escalable se determina con el parámetro "Centro del
rango de medición" (figura inferior).
● Resolución: es posible ajustar los valores siguientes:
– 2 decimales (0,01 °C)
– 3 decimales (0,001 °C)
La resolución se determina con el parámetro "Resolución del rango de medición" (figura
inferior).
Ejemplo de parametrización
La figura siguiente muestra una parametrización para el módulo ET 200SP "AI 8xRTD/TC
2-,3-,4-wire HF".
En STEP 7 se accede a estos parámetros en el campo de propiedades, mediante General >
AI 4 > Entradas > Canal 0 a canal 3.

3546

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Resistencia del conductor:
El parámetro "Resistencia del conductor" en la parametrización anterior solo está activo si se
ha seleccionado el tipo de medición "Termorresistencia (conexión a 2 hilos)".
Introduzca aquí el valor de resistencia de la línea de conexión de la termorresistencia: un cable
de cobre de 200 metros y una sección de 0,5 mm2 , por ejemplo, tiene un valor de resistencia
de siete ohmios.
Resolución del rango de medición:
En la parametrización anterior se seleccionó una resolución de 0,01 °C (resolución del rango
de medición "2 decimales").
Centro del rango de medición:
El centro del rango de medición está situado en 500 °C.
Con una resolución de 0,01 °C, resulta un rango de medición escalable de 174,88 °C a 825,11
°C.
Con una resolución de 0,01 °C, el rango de medición escalable abarca 650,23 °C.
Máximo (rango de medición escalable):
Este valor representa el límite superior del rango de medición escalable. En el ejemplo anterior,
825,11°C.
El valor es calculado por STEP 7 (con una resolución de 0,001 °C, el límite superior está
situado en 532.511 °C, véase la figura siguiente).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3547

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Mínimo (rango de medición escalable):
Este valor representa el límite inferior del rango de medición escalable. En el ejemplo anterior,
174,88 °C.
El valor es calculado por STEP 7 (con una resolución de 0,001 °C, el límite inferior está situado
en 467.488 °C, véase la figura siguiente).
Mayor resolución:
La figura siguiente muestra una parametrización con una resolución de 0,001 °C (por lo demás
el ejemplo es igual que en la figura anterior):

Con una resolución de 0,001 °C, el rango de medición escalable está situado entre 467,488 y
532,511 °C y abarca 65,023 °C (una décima parte del rango de medición con una resolución
de 0,01 °C).

Rango de medición estándar con una resolución de 0,1 °C
La tabla siguiente muestra el rango de medición estándar para termorresistencias del tipo "Pt
100", valores en grados Celsius.
Pt 100 estándar en °C

Valores decimales

Valores hexadecimales

Rangos

> 1000,0

32767

7FFF

Rebase por exce‐
so

1000,0

10000

2710

:

:

:

Rango de toleran‐
cia

850,1

8501

2135

por encima

850,0

8500

2134

Rango nominal

:

:

:

-200,0

-2000

F830

-200,1

-2001

F82F

:

:

:

-243,0

-2430

F682

< -243,0

-32768

8000

(1 dígito = 0,1 °C)

Rango de toleran‐
cia por debajo
Rebase por defec‐
to

El rango de medición estándar es la base para el rango de medición escalable.

3548

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Existe la posibilidad de ajustar el centro del rango de medición dentro del rango nominal (-200
°C a 850 °C, tabla anterior).
En este caso, para temperaturas que estén por debajo o por encima del centro del rango de
medición ajustado se obtendrán valores medidos en una resolución mayor.
La anchura de este rango alrededor del centro del valor medido depende de la resolución
seleccionada.

Rango de medición escalable con una resolución de 0,01 °C y 0,001 °C
El rango de medición escalable está marcado por los siguientes rangos de valores:
Rango de medición escalable Resolución del rango de medición

Valores hexadeci‐
males

(valores en °C)
2 decimales

3 decimales

Rebase por exceso

> 325,11

> 32,511

7FFF

Límite superior

325,11

32,511

7EFF

Centro del rango de medición 0

0

0

Límite inferior

-325,11

-32,511

8100

Rebase por defecto

< -325,11

< -32,511

8000

El máximo y el mínimo del rango de medición escalable dependen de la resolución
seleccionada:
● 2 decimales, resolución de 0,01 °C:
El límite superior está 325,11 °C por encima del centro del rango de medición ajustado.
El límite inferior está 325,11 °C por debajo del centro del rango de medición ajustado.
Por consiguiente, el rango de medición escalable alrededor del centro del rango de
medición es de 650,22 °C.
● 3 decimales, resolución de 0,001 °C:
El límite superior está 32,511 °C por encima del centro del rango de medición ajustado.
El límite inferior está 32,511 °C por debajo del centro del rango de medición ajustado.
Por consiguiente, el rango de medición escalable alrededor del centro del rango de
medición es de 65,022 °C.

Cálculo de la temperatura
El valor de temperatura se calcula sumando el valor recibido del módulo al centro del rango de
medición.
Ejemplo:
● Se ha ajustado el centro del rango de medición a 500 °C (consulte el ejemplo del apartado
"Ejemplo de parametrización"). Para la resolución se ha seleccionado "2 decimales".
● Se recibe del módulo el valor hexadecimal "0100" en formato S7:
Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

Bit

15

14

13

12

11

10

9

8

7

6

5

4

3

2

1

0

0

0

0

0

0

0

0

1

0

0

0

0

0

0

0

0

● El valor hexadecimal "0100" equivale al valor decimal 256.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3549

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Puesto que se ha seleccionado una resolución de 0,01 °C, el número 256 equivale al valor
de temperatura "2,56 °C".
● Ahora se suman 500 °C y 2,56 °C y se obtiene el valor medido 502,56 °C.

Rango de medición escalable en el rango de medición estándar

5DQJRGHPHGLFLµQ
5DQJRGH
5HEDVHSRU WROHUDQFLDSRU
GHEDMR
GHIHFWR

5HEDVHSRU
GHIHFWR

5HEDVHSRU
H[FHVR




+

5HEDVHSRU
GHIHFWR

+


++())+



!
)))+

&HQWURGHOUDQJRGH
PHGLFLµQ

++())+

5HEDVHSRU
GHIHFWR

+

①
②
③

5DQJRGH
WROHUDQFLDSRU 5HEDVHSRU
HQFLPD
H[FHVR

5DQJRQRPLQDO

5HEDVHSRU
H[FHVR
!
)))+



++$%+

5HEDVHSRU
H[FHVR
!
)))+

Rango de medición escalable con 2 decimales, valores de temperatura en formato S7.
Rango de medición escalable con 3 decimales, valores de temperatura en formato S7.
Rango de medición escalable recortado a la altura del rebase por exceso del rango de medición
estándar ("Clipping").
La suma del centro del rango de medición (p. ej. 750 °C) y el valor medido que suministra el
módulo no debe entrar en el rebase por exceso del rango de medición estándar. Por este motivo,
en el ejemplo anterior el valor máximo que puede suministrar el módulo está limitado a 250 °C.

Clipping
STEP 7 limita el máximo del rango de medición escalable de modo que la suma del centro del
valor medido y el valor medido máximo que puede suministrar el módulo no esté dentro del
rebase por exceso del rango de medición estándar. Del mismo modo, STEP 7 limita también
el mínimo del rango de medición escalable.

3550

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Particularidades del AI 4xRTD/TC 2/3/4 hilos HF (Página 3542)

1.6.3.6

ET 200AL

Sistema de periferia descentralizada ET 200AL
SIMATIC ET 200AL
El sistema de periferia descentralizada SIMATIC ET 200AL es un sistema de periferia
descentralizada altamente escalable y flexible que permite conectar las señales del proceso a
un controlador de nivel superior a través de un bus de campo.

Características
● Conexión a PROFINET, PROFIBUS o integración en ET 200SP / CPU ET 200SP
● Hasta 32 módulos en un ET 200AL
● Integración en ET 200SP / CPU ET 200SP: hasta 16 módulos AT conectables a un ET
200SP
● Conexión de los módulos mediante ET-Connection
● Posibilidad de montaje espacialmente separado
● Anchuras de módulos de 30 y 45 milímetros
● Grado de protección IP65/IP67
● Adecuado para temperaturas de -25 a +55 °C y aceleraciones hasta 5 g
● Montaje en cualquier posición
● Identificación de cables y conexiones mediante colores
● Rotulación de interfaces acorde con CA
● PROFIenergy integrado
● Control de configuración
● Conexión de sensores y actuadores mediante el sistema de conexión M8 y M12

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3551

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Campo de aplicación
El sistema de periferia descentralizada SIMATIC ET 200AL es particularmente adecuado para
ser usado en espacios reducidos, en aplicaciones móviles y en tecnología de montaje y
manipulación. Gracias a su estructura escalable es posible adaptar la configuración
exactamente a las exigencias del proceso.
El sistema de periferia descentralizada SIMATIC ET 200AL cuenta con grado de protección
IP65/IP67 y es adecuado para ser usado de forma descentralizada en una máquina o una línea
de montaje.

Configuración
El sistema de periferia descentralizada SIMATIC ET 200AL consta de los componentes
siguientes:
● Módulos de interfaz (PROFINET/PROFIBUS)
● Módulos de periferia digitales y analógicos
● Módulo de comunicaciones
Después de un módulo de comunicaciones se pueden crear 2 líneas (ET-Connection) de 16
módulos cada una.
Como alternativa se puede configurar una línea con 16 módulos de periferia en el sistema de
periferia descentralizada SIMATIC ET 200SP con BusAdapter BA-Send 1xFC.
El bus de fondo ET‑Connection es por cable. Esto permite lograr distancias espaciales de
hasta 10 m entre los módulos.

3552

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Ejemplo de configuración
La figura siguiente muestra un ejemplo de configuración del sistema de periferia
descentralizada SIMATIC ET 200AL con un módulo de interfaz PROFINET.
















①
②
③
④
⑤
⑥
⑦
⑧
⑨

Módulo de interfaz (PROFINET)
Módulo de entradas/salidas digitales
Módulo de entradas digitales
Módulo de entradas analógicas
Módulo de comunicaciones
Cable PROFINET
Cable de alimentación
Cable ET-Connection

Tapas de cierre
Figura 1-153
Ejemplo de configuración del ET 200AL

Consulte también
Ampliación de ET 200SP con módulos ET 200AL (Página 3523)

Configurar el ET 200AL
Introducción
El ET 200AL es un sistema de periferia descentralizada con grado de protección IP65/67. Por
tanto, está diseñado para ser utilizado in situ, por ejemplo directamente en una máquina (no se
requiere armario eléctrico).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3553

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
El sistema incluye módulos de interfaz y comunicación, así como módulos de entrada y salida.
El ET 200AL ofrece dos aplicaciones:
1. como dispositivo IO o esclavo DP: el módulo de interfaz del sistema está conectado a un
bus de campo (PROFINET o PROFIBUS) y conectado con la interfaz PN o DP de una CPU.
2. como ampliación de un ET 200SP: los módulos ET 200AL están conectados a los ET
200SP a través del módulo "BA Send 1xFC" ("modo mixto").
A continuación se describe cómo configurar un ET 200AL como dispositivo IO o como esclavo
DP (aplicación 1).
Para la aplicación 2, vea el enlace de "Consulte también".

3554

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Procedimiento
Para configurar un ET 200AL en STEP 7, proceda del siguiente modo:
1. Inserte un módulo de interfaz (PROFINET o PROFIBUS) de la serie ET 200AL en la vista
de redes (mediante Drag & Drop desde el catálogo de hardware).
2. Cambie a la vista de dispositivos. Para ello, haga doble clic sobre el módulo de interfaz
recién agregado.
En la vista de dispositivos se muestran el módulo de interfaz y dos racks ET-Connection
(figura siguiente).
Aún no hay asignado ningún número de slot, por lo que sobre los slots aparecen signos de
interrogación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3555

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
3. Seleccione los módulos (de entrada, salida y comunicación) en el catálogo de hardware
(carpeta ET 200AL) y arrástrelos hasta los slots libres (con borde azul, no aparece en la
figura).
En cada rack ET-Connection se pueden colocar hasta 16 módulos ET 200AL (figura
siguiente).
Un rack ET-Connection es un rack virtual que permite ver el orden de los módulos ET 200AL
conectados.

3556

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
4. Después conecte el módulo de interfaz con ambos racks ET-Connection.
Para ello, primero haga clic en una interfaz ET-Connection del módulo de interfaz y,
manteniendo pulsado el botón izquierdo del ratón, trace una línea hasta la conexión ET
izquierda del primer módulo de uno de los dos racks ET-Connection.
Repita la misma operación para la segunda interfaz ET-Connection del módulo de interfaz
y para el segundo rack ET-Connection (en caso de que se utilice).

5. Haciendo doble clic sobre un módulo se accede a las propiedades del mismo, para
configurar sus parámetros.

Reglas
● Los módulos ET 200AL deben configurarse sin dejar huecos libres.
● El primer módulo de un rack ET-Connection debe estar conectado con el módulo de interfaz.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3557

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Consulte también
Sistema de periferia descentralizada ET 200AL (Página 3551)

Control de configuración con ET 200AL
Principio de funcionamiento
El control de configuración permite cambiar con posterioridad la configuración original de un
ET 200AL (realizada con la configuración con STEP 7) mediante un programa de usuario y
operar el ET 200AL con la configuración modificada. Para esta configuración ya no es
necesario STEP 7: A través del programa de usuario se comunica al ET 200AL el slot en el que
está enchufado realmente un módulo configurado.
Para ello se utiliza el juego de datos de control 196. En este juego de datos se codifica qué
módulos faltan en la instalación real en comparación con la configuración con STEP 7 o bien
qué módulos se encuentran en un slot distinto al previsto en la configuración. El control de
configuración no afecta a la parametrización de los módulos (por ejemplo, la emisión de avisos
de diagnóstico).
A continuación, llame la instrucción "WRECC" y escriba el juego de datos en el módulo de
interfaz del ET 200AL.
Este control de configuración permite variar la configuración de un ET 200AL de forma flexible,
siempre que la configuración real derive de la configuración máxima prevista (originalmente
creada con STEP 7).
A continuación se describe la manera de activar el control de configuración y la estructura que
debe tener el juego de datos 196 para ET 200AL.

Requisitos
El parámetro de arranque de CPU "Comparación de configuraciones teórica y real" está
ajustado a "Arranque aunque haya diferencias" (ajuste predeterminado). Este ajuste también
está predeterminado para el parámetro de arranque de los distintos módulos del ET 200AL.

Activación del control de configuración
En las propiedades del módulo de interfaz, active la opción "Permitir la reconfiguración del
dispositivo mediante el programa de usuario" dentro de Parámetros del módulo > General >
Control de configuración. De este modo se activa el control de configuración.

Estructura del juego de datos de control 196
La estructura del bloque de datos corresponde a la configuración original del ET 200AL con
STEP 7.

3558

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
En el juego de datos hay dos bytes previstos para cada módulo. Cada posición de esos dos
bytes en el juego de datos codifica un módulo en la configuración original con STEP 7.
● Los bytes 4 y 5 del juego de datos corresponden al módulo del slot 1 en la configuración
original.
● Los bytes 6 y 7 del juego de datos corresponden al módulo del slot 2 en la configuración
original.
● Los bytes 8 y 9 del juego de datos corresponden al módulo del slot 3 en la configuración
original.
● etc.
El slot actual (real) está codificado por el número que se ha asignado al byte "slot_x" (por su
valor): Ejemplos:
● El valor "2" del byte 6 significa que también en la configuración actual se asigna el slot 2 al
módulo que originalmente estaba enchufado en el slot 2.
● El valor "3" del byte 6 significa que en la configuración actual se asigna el slot 3 al módulo
que originalmente estaba enchufado en el slot 2.
● El valor "4" del byte 6 significa que en la configuración actual se asigna el slot 4 al módulo
que originalmente estaba enchufado en el slot 2.
● etc.

Creación del juego de datos de control 196
La figura siguiente muestra una parte del juego de datos de control 196 para la configuración
de un ET 200AL.
Sirve de ejemplo la configuración siguiente:
● ET-Con1 está enchufado en "slot_1" (predefinido) Los dos submódulos ET-Connection
("ET-Con1" y "ET-Con2") son submódulos del módulo de interfaz del ET 200AL. Estos
módulos están integrados de forma fija en el módulo IM. No es posible enchufarlos
individualmente.
● ET-Con2 está enchufado en "slot_18" (predefinido).
● En esta configuración, en ET-Con1 hay conectados 16 módulos AL (en el juego de datos
siguiente de "slot_2" a "slot_17"). Esta es la configuración máxima.
● En esta configuración, en ET-Con2 hay conectado un módulo AL ("slot_19"). Pero en ETCon2 (al igual que en ET-Con1) podrían conectarse en total 16 módulos electrónicos AL.
El ET 200 AL configurado originalmente con STEP 7 debe reconfigurarse a partir del programa
de usuario.
La nueva configuración presenta las características siguientes:
● ET-Con1 está enchufado en "slot_1" (predefinido)
● El módulo 2 también funciona en el slot 2 en la configuración modificada.
● El módulo 3 no se utiliza.
● El módulo 4 está enchufado ahora en el slot 3.
● El módulo 5 está enchufado ahora en el slot 4.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3559

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● Todos los demás módulos de ET-Con1 no se utilizan.
● ET-Con2 está conectado en "slot_18" (predefinido)
● El módulo de ET-Con2 se utiliza.

3560

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Los componentes del juego de datos de control 196 (ver definición más abajo en el apartado
"juego de datos de control 196"):
● block_length: anote aquí la longitud del juego de datos de control (en el ejemplo, 42 bytes).
La longitud del bloque de datos de control se calcula con la fórmula: 2 x "número de
módulos" + 4.
● block_ID: introduzca aquí el número 196. Este número identifica el juego de datos como
juego de datos para el control de configuración.
● version: el ET200AL utiliza la versión 2 del juego de datos de control 196.
● subversion: el ET200AL utiliza la subversión 1 del juego de datos de control 196.
● slot_1: en el ET 200AL, en el slot 1 se encuentra siempre el submódulo ET-Connection 1.
● reserve_1: este byte no se utiliza (valor "0").
● slot_2: el módulo configurado 2 está enchufado en el slot 2 (valor "2").
● reserve_2: este byte no se utiliza (valor "0").
● slot_3: el módulo configurado 3 no está presente en la configuración actual (valor "0").
● reserve_3: este byte no se utiliza (valor "0").
● slot_4: en la configuración actual el módulo configurado 4 está enchufado en el slot 3 (valor
"3").
● reserve_4: este byte no se utiliza (valor "0").
● slot_5: en la configuración actual el módulo configurado 5 está enchufado en el slot 4 (valor
"4").
● reserve_5: este byte no se utiliza (valor "0").
● slot_6: el módulo configurado 6 no está presente en la configuración actual (valor "0").
● reserve_6: este byte no se utiliza (valor "0").
● slot_7: el módulo configurado 7 no está presente en la configuración actual (valor "0").
● reserve_7: este byte no se utiliza (valor "0").
● etc.
● slot_18: en ET 200AL, en el slot 18 se encuentra siempre el submódulo ET-Connection 2
(valor "18").
● reserve_18: este byte no se utiliza (valor "0").
● slot_19: en la configuración actual el módulo configurado 19 está enchufado en el slot 19
(valor "19").
● reserve_19: este byte no se utiliza. (valor "0")

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3561

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Juego de datos de control 196 para ET 200AL
Para el control de configuración se define un juego de datos de control 196 que contiene una
asignación de slots.
Byte

Elemento

0

Longitud de blo‐ p.ej.
que en bytes
14
para ET 200AL con 5
módulos

Valor

La longitud del juego de datos se
calcula con la fórmula: 4 + (nú‐
mero de módulos x 2) bytes

1

Block-ID

196

ID para el juego de datos de con‐
trol 196

2

Version

2

Versión 2 del juego de datos de
control 196

3

Subversion

1

Subversión 1 del juego de datos
de control 196

4

Módulo configu‐ 1
rado 1
(ET-Connec‐
tion 1)

5

Reserva
para módulo
configurado 1

0

6

Módulo configu‐ Slot real del módulo 2
rado 2
Valores posibles:
2 hasta el número de
módulos (excepto 18)
0 (en caso de que falte
el módulo configurado
2)

7

Reserva
para módulo
configurado 2

0

8

Módulo configu‐ Slot real del módulo 3
rado 3
Valores posibles:
2 hasta el número de
módulos (excepto 18)
0 (en caso de que falte
el módulo configurado
2)

3562

Explicación

ET-Connection 1 está preasigna‐
do al slot 1. Por ello, en el byte 4
debe constar siempre el valor
"1".
Sin utilizar

El módulo configurado 2 puede
estar insertado en la realidad en
uno de los slots de 2 a 34. El slot
18 está reservado para ET-Con
2.
Si el módulo configurado no se
utiliza, en este byte estará activa‐
do el valor "0"

Encabeza‐
do

Asignación
para el mó‐
dulo confi‐
gurado 1
(ET-Con‐
nection 1) al
slot real 1
Asignación
para el mó‐
dulo confi‐
gurado 2 a
un slot real

Sin utilizar

El módulo configurado 3 puede
estar insertado en la realidad en
uno de los slots de 2 a 34. El slot
18 está reservado para ET-Con‐
nection 2.
Si el módulo configurado no se
utiliza, en este byte está activado
el valor "0"

9

Reserva
para módulo
configurado 3

0

Sin utilizar

:

:

:

:

Asignación
para el mó‐
dulo confi‐
gurado 3 a
un slot real

:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
39

Módulo configu‐ 18
rado 18
(ET-Connec‐
tion 2)

ET-Connection 2 ocupa siempre
el slot 18 si en dicho submódulo
hay conectados módulos AT.

Asignación
para el mó‐
dulo confi‐
gurado 18
(ET-Con‐
nection 2) al
slot real 18

40

Reserva
para módulo
configurado 18

0

Sin utilizar

:

:

:

:

:

(Bytes 4
a 70,

Módulo configu‐ Slot real del módulo x
rado x
Valores posibles:

El módulo configurado x puede
estar insertado en la realidad en
uno de los slots de 2 a 34. El slot
18 está reservado para ET-Con 2
(bytes 39 y 40 en el juego de da‐
tos de control)

Asignación
para el mó‐
dulo confi‐
gurado x a
un slot real y

excepto
byte 39)

(Bytes 5
a 71,
excepto
byte 40)

2 hasta el número de
módulos (excepto 18)
0 (en caso de que falte
el módulo configurado
x)
Reserva
para módulo
configurado x

0

Sin utilizar

Reglas
● En el control de configuración ambos submódulos (ET-Connection 1 y ET-Connection 2) se
consideran módulos reales. Limitación: ubicación de ET-Connection 1 siempre en el slot 1
y de ET-Connection 2 siempre en el slot 18.
● En ET 200AL no hay módulos de reserva (como ocurría en ET 200S o en los módulos BU
Cover (tapa) del ET 200SP), por lo que no es posible que esté activado el bit 7 de "slot_x"
(es decir, solo está permitido utilizar los valores de 0 a 127).
● El valor "0" de "slot_x" significa que ese módulo no está enchufado en la configuración
actual.
● En la configuración con STEP 7 no se permite dejar huecos entre los módulos AL.
● Si en la configuración con STEP 7 no se conecta ningún módulo a ET-Con2, ET-Con2 no
estará configurado: De este modo también se acorta el juego de datos 196.
● Si en la configuración con STEP 7 se han conectado a ET-Con1 menos de 16 módulos y
además hay módulos conectados a ET-Con2, los slots no utilizados en ET-Con1 deben
estar en el juego de datos de control 196. Como valor para el slot real se les asigna cero.

Escribir un juego de datos
Transfiera el juego de datos de control al módulo ET 200AL.
Llame la instrucción avanzada WRREC (Escribir juego de datos) y transfiera el juego de datos
de control creado.
Si no se transfiere ningún juego de datos de control, el módulo de interfaz utilizará la
configuración original con STEP 7. En ese caso se aplica: el módulo configurado x está
enchufado en el slot real x.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3563

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Direccionamiento del módulo de interfaz mediante identificador de hardware
Para transferir el juego de datos 196 con la instrucción WRREC hay que introducir el
identificador de hardware del submódulo IM con la extensión "∼Head" como parámetro de
entrada para la instrucción. La constante de sistema de dicho identificador de hardware es, p.
ej., "IO-Device_2∼Head". Las constantes de sistema de un dispositivo seleccionado se
muestran, por ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Mensajes de error
Al escribir el juego de datos de control 196, en caso de fallo se devuelven los siguientes
mensajes de error:
Tabla 1-215 Mensajes de error
Código de error

Significado

16#80A2

Error de protocolo DP en Layer 2. Indica un acuse de recibo del
juego de datos que no se ha producido debido al sistema.

16#80B1

Longitud no permitida; la indicación de longitud del juego de datos
196 no es correcta.

16#80B5

Control de configuración no parametrizado.

16#80B2

invalid slot: el slot configurado no está ocupado.

16#80B8

Error de parámetros; el módulo notifica parámetros no válidos.

16#80C5

El esclavo DP o el módulo no está disponible. Indica un acuse de
recibo del juego de datos que no se ha producido debido al sistema.

Juego de datos de respuesta 197 para ET 200AL
El juego de datos de respuesta 197 sirve para leer la configuración real de una estación (en
este caso una ET 200AL).
Este juego de datos permite comprobar la configuración real del ET 200AL. El juego de datos
de respuesta contiene información sobre si existe realmente o no cada uno de los módulos
configurados.
● El valor "1" significa que está enchufado el módulo correcto en el slot previsto.
● El valor "0" codifica las restantes posibilidades (módulo erróneo, slot vacío, tapa de BU).
Ejemplo:
Con STEP 7 se ha configurado un módulo en el slot 4.
Con ayuda del juego de datos 196, dicho módulo se desplaza en la configuración actual al slot
3.
Si dicho módulo está enchufado realmente en el slot 3, se codifica con el valor "1"
(status_slot_4 = 1).
Detalle de la estructura:
La estructura del bloque de datos corresponde a la configuración original del ET 200AL con
STEP 7.

3564

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
En el juego de datos hay dos bytes previstos para cada módulo. La posición de esos dos bytes
en el juego de datos corresponde a la posición de un módulo en la configuración original con
STEP 7.
Orden de los bytes:
● "status_slot_1_ET_Cont." y "reserve_slot_1_ET-Con1" (bytes 4 y 5 del juego de datos)
corresponden al módulo del slot 1 en la configuración
● "status_slot_2" y "reserve_slot_2" (bytes 6 y 7) corresponden al módulo del slot 2 en la
configuración
● "status_slot_3" y "reserve_slot_3" (bytes 8 y 9) corresponden al módulo del slot 3 en la
configuración
● etc.
Ejemplo
El ET 200AL que se había reconfigurado con el juego de datos de control 196 en el ejemplo de
más arriba devuelve el juego de datos de respuesta 197 siguiente (apartado "Creación del
juego de datos de control 196").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3565

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

A ET-Con1 están conectados realmente los módulos 2, 4 y 5.
Todos los restantes módulos que se habían conectado a ET-Con1 en la configuración con
STEP 7 no están en la configuración actual (conforme a las especificaciones del juego de datos
de control 196 del ejemplo superior).
Hay realmente conectado un módulo a ET-Con2, al igual que en la configuración original con
STEP 7.

3566

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Lectura del juego de datos de respuesta 197
La instrucción RDREC lee el juego de datos de respuesta 197 del ET 200AL. RDREC trabaja
asíncronamente. Si se llama a RDREC en el OB de arranque, es necesario llamar varias veces
la instrucción en un bucle, hasta que los parámetros de salida "BUSY" o DONE" indiquen que
se ha leído el juego de datos.
Para leer el juego de datos 197 con la instrucción RDREC hay que introducir el identificador de
hardware del submódulo IM con la extensión "∼Head" como parámetro de entrada para la
instrucción. La constante de sistema de dicho identificador de hardware es, p. ej., "IODevice_2∼Head". Las constantes de sistema de un dispositivo seleccionado se muestran, por
ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Información adicional y ejemplos
Encontrará información relacionada con el ET 200AL aquí (http://
support.automation.siemens.com/WW/view/es/89254863).
Encontrará ejemplos concretos del control de configuración en esta descripción de aplicación
(http://support.automation.siemens.com/WW/view/es/29430270).
Aquí están depositados una librería de los juegos de datos y otros ejemplos de aplicación:
Plantillas para los juegos de datos (http://support.automation.siemens.com/WW/view/es/
29430270)

Consulte también
Sistema de periferia descentralizada ET 200AL (Página 3551)
Ampliación de ET 200SP con módulos ET 200AL (Página 3523)
Control de configuración con ET 200SP (Página 3510)

1.6.3.7

ET 200MP

Sistema de periferia descentralizada ET 200MP
Definición
El ET 200MP es un sistema de periferia descentralizada escalable y flexible que permite
conectar las señales del proceso a un controlador central a través de un bus de campo.

Campo de aplicación
El ET 200MP es un sistema de periferia descentralizada multifuncional para diferentes campos
de aplicación. Gracias a su estructura escalable es posible adaptar la configuración
exactamente a las exigencias del proceso.
El ET 200MP está homologado para el grado de protección IP 20 y su montaje está previsto en
un armario de distribución.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3567

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Estructura
El ET 200MP se monta sobre un perfil soporte y se compone de:
● un módulo de interfaz que se comunica con todos los controladores IO que se comportan
conforme a la norma PROFINET IEC 61158,
● Pueden conectarse hasta 30 módulos (de alimentación y de periferia, de la gama de
periferia de la S7-1500) a la derecha, junto al módulo de interfaz.
● Si se inserta un módulo de alimentación a la izquierda del módulo de interfaz, la
configuración máxima posible es de 32 módulos.
● El número de módulos de periferia enchufables está limitado por su consumo eléctrico.

Reglas para slots
● Slot 0: módulo de alimentación (opcional)
● Slot 1: módulo de interfaz
● Slots 2 a 31: módulos de periferia o de alimentación

Parámetro Módulo de interfaz
Tensión de alimentación L+ conectada
Parámetro "Tensión de alimentación L+ conectada"
Este parámetro influye en el diagnóstico y en la comprobación del equilibrio de potencia.
● Diagnóstico del ET 200MP:
Si la configuración real no se corresponde con la configuración teórica con respecto a la
tensión de alimentación del módulo de interfaz, el módulo de interfaz genera un aviso de
diagnóstico. Ejemplo: se ha desactivado la opción "Tensión de alimentación L+ conectada",
pero en la instalación real se ha conectado la tensión de alimentación.
● Comprobación del equilibrio de potencia durante la configuración:
En función del ajuste del parámetro se modifica el equilibrio de potencia: o bien el módulo
de interfaz suministra potencia al bus de fondo o se alimenta a partir del bus de fondo.
El ajuste predeterminado (opción "Tensión de alimentación L+ conectada" está activada)
significa que el módulo de interfaz se alimenta en el frente con 24 V DC y que suministra
potencia al bus de fondo.
Si la opción "Tensión de alimentación L+ conectada" está desactivada, el módulo de interfaz
no debe ser alimentado en el frente con 24 V DC.

3568

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
En ese caso debe insertarse a la izquierda del módulo de interfaz una fuente de alimentación
del sistema (PS) que alimente al módulo de interfaz y a los módulos a la derecha del módulo
de interfaz.
Nota
Se recomienda alimentar el módulo de interfaz siempre desde el frente con 24 V DC. Si
adicionalmente se inserta y conecta una fuente de alimentación del sistema (PS) delante o a
la izquierda del módulo de interfaz, estarán disponibles para la instalación tanto la potencia de
la fuente de alimentación del sistema (PS) como la potencia de la alimentación integrada del
módulo de interfaz.
No es necesario cambiar el ajuste predeterminado del parámetro.

Control de configuración (configuración futura) con ET 200MP
Principio de funcionamiento
Gracias al control de configuración es posible utilizar diferentes configuraciones (opciones)
reales con una sola configuración de la unidad periférica descentralizada ET 200MP.
El control de configuración permite configurar el sistema de periferia descentralizada ET
200MP con su configuración máxima y utilizarlo aunque falten módulos. Si posteriormente se
añaden algunos módulos, no es necesario configurar de nuevo y, por consiguiente, tampoco
volver a cargar la configuración hardware.
Utilizando el juego de control 196, que se transmite al módulo de interfaz desde el programa
de usuario, se define una configuración actual. El juego de datos de control se transfiere con
la instrucción WRREC..
Con el juego de datos de relectura 197 se lee la configuración real de un ET 200MP.

Requisitos
El parámetro de arranque de CPU "Comparación de configuraciones teórica y real" está
ajustado a "Arranque aunque haya diferencias" (ajuste predeterminado). Este ajuste también
está predeterminado para el parámetro de arranque de los distintos módulos del ET 200MP.

Activación del control de configuración
En las propiedades del módulo de interfaz, active la opción "Permitir la reconfiguración del
dispositivo mediante el programa de usuario" dentro de Parámetros del módulo > General >
Control de configuración. De este modo se activa el control de configuración.

Juego de datos de control 196 para ET 200MP
La figura siguiente muestra el inicio del juego de datos de control 196 para la configuración de
un ET 200MP.
El bloque de datos tiene 36 bytes de longitud (configuración máxima con 32 módulos). Por ello
el elemento "Block_length" del juego de datos tiene el valor "36".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3569

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Si se configura en STEP 7 un ET 200MP con menos módulos, se acorta el bloque de datos. Por
ejemplo, con solo cinco módulos el juego de datos se reduce a 9 bytes (4 bytes para el
encabezado más un byte para cada módulo).
En el juego de datos hay previsto un byte para cada módulo. La posición de ese byte en el
juego de datos codifica un módulo en la configuración original con STEP 7:
● "slot_0 power supply" (byte 4 en el juego de datos de más abajo) corresponde al módulo de
alimentación del slot 0 en la configuración con STEP 7.
● "slot_2" (byte 5 del juego de datos) corresponde al módulo del slot 2 en la configuración.
● "slot_3" (byte 6 del juego de datos) corresponde al módulo del slot 3 en la configuración.
● "slot_4" (byte 7) corresponde al módulo del slot 4 en la configuración.
● etc.
Nota
Módulo de interfaz en el slot 1
El control de configuración se controla a su vez a través del módulo de interfaz (slot 1/
submódulo 1). Así pues, el módulo de interfaz del slot 1 no es un elemento del control de
configuración y no aparece en el juego de datos de control.
Valor en slot_x
El slot actual está codificado por el número que se ha asignado a "slot_x" (por su valor).
Ejemplos:
● El valor "2" en slot_2 significa que también en la configuración actual se asigna el slot 2
(slot_2 = 2) al módulo que originalmente estaba enchufado en el slot 2.
● El valor "3" en slot_2 significa que en la configuración actual se asigna el slot 3 (slot_2 = 3)
al módulo que originalmente estaba enchufado en el slot 2.
● El valor "4" en slot_2 significa que en la configuración actual se asigna el slot 4 (slot_2 = 4)
al módulo que originalmente estaba enchufado en el slot 2.
● etc.
Ejemplo del juego de datos 196
El juego de datos siguiente se ha creado para una configuración que modifica la configuración
original con STEP 7.
La configuración modificada presenta las características siguientes:
● El módulo que en la configuración estaba enchufado en el slot 0 (módulo de alimentación)
también está enchufado en el slot 0 (preasignado) en la configuración actual.
● El módulo que en la configuración estaba enchufado en el slot 2 (módulo 2) también está
enchufado en el slot 2 (preasignado) en la configuración actual.
● El módulo que en la configuración estaba enchufado en el slot 3 (módulo 3) no existe en la
configuración actual.
● El módulo que en la configuración estaba enchufado en el slot 4 (módulo 4) está enchufado
en la configuración actual en el slot 3.

3570

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
● El módulo que en la configuración estaba enchufado en el slot 5 (módulo 5) está enchufado
en la configuración actual en el slot 4.
● etc.
En la figura siguiente no se representan los bytes "slot_6" a "slot_31".

Reglas
● Si un módulo no existe en la configuración actual se indica mediante el valor 127: "slot_x"
= 127.
● El módulo de alimentación está siempre en el slot 0 ("slot_0 power supply" = 0).
● El módulo de interfaz del slot 1 no se tiene en cuenta en el juego de datos de control.

Direccionamiento del módulo de interfaz mediante identificador de hardware
Para transferir el juego de datos 196 con la instrucción WRREC hay que introducir el
identificador de hardware del submódulo IM con la extensión "∼Head" como parámetro de
entrada para la instrucción. La constante de sistema de dicho identificador de hardware es, p.
ej., "IO-Device_2∼Head". Las constantes de sistema de un dispositivo seleccionado se
muestran, por ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Juego de datos de relectura 197 para ET 200MP
El juego de datos de relectura 197 sirve para leer la configuración real de una estación (en este
caso una estación ET 200MP).
Este juego de datos permite comprobar la configuración real del ET 200MP. El juego de datos
de relectura contiene información sobre si existe realmente o no cada uno de los módulos
configurados.
● El valor "1" significa que está enchufado el módulo correcto en el slot previsto.
● El valor "0" codifica las restantes posibilidades (módulo erróneo, slot vacío, módulo de
reserva).
Ejemplo:
Con STEP 7 se ha configurado un módulo en el slot 4.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3571

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Con ayuda del juego de datos 196, dicho módulo se desplaza en la configuración actual al slot
3.
Si dicho módulo está enchufado realmente en el slot 3, se codifica con el valor "1"
(status_slot_4 = 1).
Detalle de la estructura:
La estructura del bloque de datos corresponde a la configuración original del ET 200MP con
STEP 7.
En el juego de datos hay un byte previsto para cada módulo. La posición de ese byte en el
juego de datos corresponde a la posición de un módulo en la configuración original con STEP
7.
Orden de los bytes:
● "status_slot_0 power supply" (byte 4 en el juego de datos de más abajo) corresponde al
módulo de alimentación del slot 0 en la configuración con STEP 7.
● "status_slot_2" (byte 5) corresponde al módulo del slot 2 de la configuración.
● "status_slot_3" (byte 6) corresponde al módulo del slot 3 de la configuración
● etc.
Los nombres de los componentes (por ejemplo "status_slot_2") se pueden elegir libremente.
Significado de "status_slot_x":
● El valor "1" en status_slot_x significa que el módulo x está enchufado en el slot previsto.
● El valor "0" en status_slot_x codifica las restantes posibilidades (módulo erróneo, módulo
inexistente).
Ejemplo:
La figura siguiente muestra el juego de datos de relectura 197 para una configuración de un ET
200MP en la que falta el módulo 3 (el módulo del slot 3 en la configuración).
Todos los módulos restantes existen y están realmente enchufados.
En la figura siguiente no se representan los bytes de "status_slot_6" a "status_slot_31".

3572

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Leer el juego de datos de relectura 197
La instrucción RDREC permite leer desde el ET 200MP el juego de datos de relectura 197.
RDREC trabaja asíncronamente. Si se llama a RDREC en el OB de arranque, es necesario
llamar varias veces la instrucción en un bucle, hasta que los parámetros de salida "BUSY" o
DONE" indiquen que se ha leído el juego de datos.
Para leer el juego de datos 197 con la instrucción RDREC hay que introducir el identificador de
hardware del submódulo IM con la extensión "∼Head" como parámetro de entrada para la
instrucción. La constante de sistema de dicho identificador de hardware es, p. ej., "IODevice_2∼Head". Las constantes de sistema de un dispositivo seleccionado se muestran, por
ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Información adicional y ejemplos
Encontrará información relacionada con el ET 200MP en el manual de producto IM 155-5 PN
(http://support.automation.siemens.com/WW/view/es/89261636).
Encontrará ejemplos concretos del control de configuración en esta descripción de aplicación
(http://support.automation.siemens.com/WW/view/es/29430270).
Aquí están depositados una librería de los juegos de datos y otros ejemplos de aplicación:
Plantillas para los juegos de datos (http://support.automation.siemens.com/WW/view/es/
29430270)

Consulte también
Documentación sobre el control de la configuración (http://
support.automation.siemens.com/WW/view/es/67295970)

Parámetro Módulos de entrada
Parámetros de los módulos de entradas analógicas
Falta tensión de alimentación L+
Habilitación del diagnóstico en caso de que falte tensión de alimentación L+ o sea insuficiente.

Rotura de hilo
Habilitación del diagnóstico si en la correspondiente entrada parametrizada del módulo no
circula corriente o la corriente es insuficiente para la medición o se aproxima a una tensión
demasiado baja.

Límite de intensidad para diagnóstico de rotura de hilo
Valor umbral con el que se señaliza rotura de hilo. Según el sensor utilizado, el valor puede
ajustarse a 1,185 mA o 3,6 mA.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3573

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Rebase por exceso
Habilitación del diagnóstico si el valor medido rebase por exceso el margen de saturación.

Rebase por defecto
Habilitación del diagnóstico si el valor medido rebase por defecto el margen de saturación.

Error en modo común
Habilitación del diagnóstico si se supera la tensión permitida en modo común.

Error en canal de referencia (sólo con AI 8xU/I/RTD/TC ST)
● Habilitación del diagnóstico si se produce un error en el canal para la compensación de
temperatura, p. ej., rotura de hilo.
● El tipo de compensación Temperatura de referencia dinámica está parametrizado y todavía
no se transferido ninguna temperatura de referencia al módulo.

Coeficiente de temperatura
El coeficiente de temperatura depende de la composición química del material. En Europa se
utiliza un solo valor por tipo de sensor (valor predeterminado).
El factor de corrección para el coeficiente de temperatura (valor α) indica cuánto varía de forma
relativa la resistencia de un determinado material cuando la temperatura aumenta 1 °C.
Los demás valores permiten ajustar el coeficiente de temperatura en función del sensor, con
lo que se consigue una mayor precisión.

Supresión de frecuencias perturbadoras
En los módulos de entradas analógicas, suprime las perturbaciones causadas por la
frecuencia de la red de corriente alterna utilizada.
La frecuencia de la red de tensión alterna puede provocar interferencias en el valor medido,
especialmente al medir en rangos de pequeña tensión y con termopares. El usuario indica
mediante este parámetro la frecuencia de red que predomina en su instalación.

Filtrado
Los valores medidos son suavizados mediante filtrado. El alisamiento se puede ajustar en 4
niveles en los módulos de entradas analógicas AI 8xU/I/RTD/TC ST y AI 8xU/I HS.
Tiempo de alisamiento = número de ciclos del módulo (k) x tiempo de ciclo del módulo.
La figura siguiente muestra tras cuántos ciclos de módulo el valor analógico alisado se
aproxima al 100%, dependiendo del alisamiento ajustado. La figura se aplica a cualquier
cambio de señal en la entrada analógica.

3574

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
&DPELRGHVH³DOHQ
SRUFHQWDMH


1
3
4
2




 

①
②
③
④











 &LFORVGHO
PµGXOR N

Ninguno (k = 1)
Débil (k = 4)
Medio (k = 16)
Fuerte (k = 32)

Unión fría (sólo con AI 8xU/I/RTD/TC ST)
Para el parámetro Unión fría se pueden parametrizar los siguientes ajustes:
Tabla 1-216 Posibles parametrizaciones para el parámetro Unión fría
Ajuste

Descripción

Temperatura de referencia fija

La temperatura de la unión fría se parametriza y se almacena como valor fijo en
el módulo.

Temperatura de referencia dinámica

La temperatura de la unión fría se transfiere en el programa de usuario de la
CPU al módulo con la instrucción WRREC (SFB 53) mediante un registro com‐
prendido entre 192 y 199.

Unión fría interna

La temperatura de la unión fría se determina con un sensor integrado en el
módulo.

Canal de referencia del módulo

La temperatura de la unión fría se determina con una termorresistencia externa
(RTD) en el canal de referencia del módulo (COMP).

Nota
Temperatura de referencia fija
En la parametrización de un termopar de tipo B, solo es posible el ajuste "Temperatura de
referencia fija" con una temperatura de 0 °C.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3575

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Habilitación de alarma de proceso 1 ó 2
Habilitación de una alarma de proceso si se rebasa por exceso el límite superior 1 ó 2 o se
rebasa por defecto el límite inferior 1 ó 2.

Límite inferior 1 ó 2
Especifique el umbral por debajo del cual se dispara la alarma de proceso 1 ó 2.

Límite superior 1 ó 2
Especifique el umbral por encima del cual se dispara la alarma de proceso 1 ó 2.

Compensación de temperaturas en termopares
Introducción
Existen varias posibilidades de registrar la temperatura de la unión fría para obtener un valor
absoluto de temperatura basado en la diferencia de temperatura entre el punto de referencia
y el de medición.
Según la situación (física) donde se requiera la unión fría, es posible aprovechar las distintas
posibilidades de compensación.
Nota
En la parametrización de un termopar de tipo B, solo es posible el ajuste "Temperatura de
referencia fija" con una temperatura de 0 °C.

3576

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Posibilidades para compensar la temperatura en la unión fría
Posibilidades de compensa‐
ción

Explicación

Caso de aplicación

Unión fría interna

En esta compensación la temperatura de la unión
fría se determina con un sensor integrado en el
módulo.

● Para conectar los cables de
compensación utilice el mismo
material que el del termopar.

Procedimiento

Canal de referencia del mó‐
dulo

Conecte el termopar al módulo de periferia directa‐
mente o con cables de compensación.

● Si en la instalación la temperatura
de la unión fría y la del módulo son
iguales, también pueden emplearse
cables de materiales distintos.

La temperatura de la unión fría se determina con
una termorresistencia externa (RTD).

● La temperatura puede registrarse
directamente en la unión fría.

Procedimiento
Conecte el termopar, directamente o con cables de
compensación, a la unión fría con los cables de
entrada. Conecte los cables de entrada a los bor‐
nes correspondientes del módulo.

● La temperatura medida de todos los
canales configurados para este tipo
de compensación se corrige
automáticamente con el valor de
temperatura de la unión fría.

Conecte la termorresistencia (RTD) al canal de re‐ ● Desde la unión fría hasta el módulo
ferencia del módulo. La termorresistencia (RTD)
pueden emplearse cables
debe estar ubicada en el área de la unión fría.
económicos (p. ej. de cobre).

Temperatura de referencia
dinámica

La temperatura de la unión fría se determina a tra‐ ● Utilizando varios módulos en la
vés de un módulo. Transfiera el valor de tempera‐
unión fría podrá compensar todos
tura a otros módulos mediante un registro en el
los canales mediante un valor de
programa de usuario.
temperatura común.
Procedimiento
● Para registrar el valor de
Conecte la termorresistencia (RTD) para la unión
fría a un canal cualquiera.

temperatura basta con una
termorresistencia (RTD).

La temperatura de la unión fría se transfiere de la ● Desde la unión fría hasta el módulo
CPU al módulo con la instrucción WRREC median‐
pueden emplearse cables
te un registro comprendido entre 192 y 199.
económicos (p. ej. de cobre).
Temperatura de referencia fi‐ La temperatura de la unión fría se parametriza co‐ ● Mantenga constante la temperatura
ja
mo valor fijo en el módulo.
de la unión fría e identifique el valor
de temperatura.
Procedimiento
Conecte el termopar, directamente o con cables de
compensación, a la unión fría con los cables de
entrada. Conecte los cables de entrada a los bor‐
nes correspondientes del módulo.

● Desde la unión fría hasta el módulo
pueden emplearse cables
económicos (p. ej. de cobre).

Al configurar el módulo predefina un valor de tem‐
peratura fijo para la unión fría (p. ej. 20 ºC).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3577

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Parámetro Módulos de salida
Parámetros de los módulos de salidas analógicas
Falta tensión de alimentación L+
Habilitación del diagnóstico en caso de que falte tensión de alimentación L+ o sea insuficiente.

Cortocircuito a masa
Habilitación del diagnóstico si aparece un cortocircuito a masa de la alimentación del actuador.

Rotura de hilo
Habilitación del diagnóstico si el cable que va al sensor está interrumpido.

Rebase por exceso
Habilitación del diagnóstico si el valor medido sobrepasa el rango de rebase por exceso.

Rebase por defecto
Habilitación del diagnóstico si el valor medido es inferior al rango de rebase por defecto.

Reacción a STOP de la CPU
Determina el comportamiento de la salida cuando la CPU pasa al estado operativo STOP.

Valor sustitutivo
Los valores sustitutivos son los que entregan las salidas (la salida) en caso de STOP de la CPU.

Modulación del ancho de impulso (PWM)
Los canales de algunos módulos soportan la función de modulación del ancho de impulso
(PWM). La función de modulación del ancho de impulsos permite generar fácilmente impulsos
periódicos con una tensión nominal constante y una duración de impulso variable para los
canales antes mencionados.

3578

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configuración
La modulación del ancho de impulso se configura con los siguientes parámetros:
● Activar la función PWM en el módulo
● Ajustar el modo de operación PWM para el canal correspondiente
● Ajustar Duración del período

Funcionamiento
En el modo de operación Modulación del ancho de impulsos, las salidas configuradas en
correspondencia proporcionan una señal de salida modulada por ancho de impulsos.
La modulación del ancho de impulsos se caracteriza por su duración del periodo (frecuencia)
y su relación de impulso-pausa. La relación de impulso-pausa caracteriza la relación entre
duración de impulso y de periodo.
La duración de impulso se calcula a partir de la duración del periodo y la relación de impulsopausa: Duración de impulso = relación de impulso-pausa x duración del periodo.
Ejemplo de una relación de impulso-pausa del 50 % y una duración del periodo de 10 ms:
Duración de impulso: 0,5 x 10 ms = 5 ms
La relación de impulso-pausa de los canales se define en el programa de usuario mediante el
valor de salida (0 ... 1000) en la memoria imagen de proceso de las salidas.
La señal de salida es una señal de onda rectangular (secuencia de impulsos de conexión y
desconexión).





'4Q

①
②

Duración del periodo T (2 a 100 ms); frecuencia de la modulación del ancho de impulsos: f = 1/
T (10 a 500 Hz)

Duración de impulso (relación de impulso-pausa x duración del periodo)
Figura 1-154
Funcionamiento de la modulación del ancho de impulso

Duración mínima de impulso
La duración mínima de impulso es de 300 μs, valor condicionado por el hardware. La relación
de impulso-pausa se puede ajustar entre 0,0 y 100,0 %. La duración del periodo puede
parametrizarse entre 2 y 100 ms.
Ejemplo: Si se ha parametrizado una duración del periodo de 2 ms y se ha activado para la
salida con una relación de impulso-pausa del 0,1 %, resultaría matemáticamente una duración
de impulso de 200 μs. En realidad, la salida trabaja con una duración mínima de impulso de
300 μs.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3579

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Sucesión de impulsos
La duración de impulso de la señal real es mínimamente más larga que la duración de impulso
ideal prescrita.
La figura siguiente muestra el comportamiento de la salida en caso de control por modulación
del ancho de impulsos. La línea azul muestra la evolución ideal prescrita de la señal (señal de
onda rectangular) con la que se controla la salida. La línea punteada roja muestra la evolución
real de la señal en el borne de salida, condicionada por la carga conectada externamente.
89




WV

①
②

Duración del periodo

Duración de impulso (relación de impulso-pausa x duración del periodo)
Figura 1-155
Sucesión de impulsos en el borne de salida

1.6.3.8

ET 200M

Configuración del ET 200M
Introducción
Para la familia ET 200M encontrará una amplia gama de módulos en el catálogo de hardware
bajo "Periferia descentralizada".

Configuración y parametrización
Encontrará información sobre la configuración y parametrización en los capítulos siguientes.

Estructura del ET 200M
Definición
El sistema de periferia descentralizada ET 200M es un dispositivo de periferia modular con
grado de protección IP 20.
El ET 200M presenta la técnica de montaje del sistema de automatización S7-300 y se
compone del IM 153‑x y módulos periféricos de la familia S7‑300.

3580

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
El ET 200M se puede comunicar con:
● todos los maestros DP que se comportan conforme a la norma IEC 61784-1:2002 Ed1 CP
3/1
● todos los controladores IO que se comportan conforme a la norma IEC 61158

Configuración de un ET 200M (ejemplo)

1

①
②
③

2

3

Fuente de alimentación PS 307
Módulo de interfaz IM 153-x
hasta 12 módulos periféricos (SM / FM / CP)

Configurar la función 'Sustitución de módulos en marcha'
Introducción
El ET 200M soporta la función "Sustitución de módulos en marcha" y la correspondiente
alarma de enchufe/desenchufe.
La función "Sustitución de módulos en marcha" permite desenchufar o enchufar módulos del
rack del ET 200M durante el funcionamiento.

Requisitos
Se ha configurado un módulo de interfaz que soporta la sustitución de módulos en marcha. (a
partir de IM 153-1, referencia 153-1AA02-0XB0).
Además, la CPU configurada también debe soportar esta función, p. ej. para PROFIBUS un
S7-400 con interfaz DP.
Para la configuración hardware debe utilizarse el bus de fondo activo (barra de bus con slots).
El perfil soporte tradicional con conectores de bus entre los módulos no soporta esta función.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3581

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Configuración
Si se cumplen los requisitos para la configuración, en la ventana de inspección se ofrece el
parámetro "Sustitución de módulos en marcha" en el área "Parámetros del módulo", el cual
puede activarse. Para los módulos configurados se mostrará debajo de dicho parámetro una
tabla que muestra los módulos de bus activos que se necesitan para la configuración
hardware.
Para una configuración de PROFIBUS se muestra además la opción "Arranque si la
configuración real difiere de la teórica". Dicha opción se activa automáticamente si está
activada la "Sustitución de módulos en marcha".

Módulos de señales para automatización de procesos
Principios básicos
Introducción
Los módulos de señales para la automatización de procesos son módulos del S7-300, como
el SM 321; DI 16xNAMUR o SM 322; DO 16xDC24V/0,5A.
Se utilizan en un esclavo DP (IM 153-2).
En comparación con los módulos estándar, ofrecen las siguientes funciones tecnológicas
adicionales, por ejemplo prolongación del impulso y vigilancia de inestabilidad de señal.

Consulte también
Inversor (Página 3582)
Parámetros tecnológicos (Página 3583)

Inversor
Tipo de encoder "inversor"
Si las entradas digitales de un grupo de canales están parametrizadas como "inversores", el
módulo realiza un diagnóstico para el tipo de encoder inversor de este grupo de canales.

Inversor
Un inversor es un bloque de contactos auxiliares con un solo contacto móvil que tiene una
posición cerrada con el aparato de maniobra cerrado y una con el aparato abierto.
Tenga en cuenta la siguiente regla:
● Conecte siempre el contacto normalmente abierto al canal "par".
● Conecte siempre el contacto normalmente cerrado al canal "impar".
El tiempo de conmutación tolerado entre los dos canales es de 300 ms.

3582

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Si la verificación es negativa,
● El módulo identifica el estado de valor del canal del contacto normalmente abierto como "no
válido"
● El módulo genera una entrada de diagnóstico para el canal del contacto normalmente
abierto
● Se lanza una alarma de diagnóstico (si está habilitada)
La señal de entrada digital y el estado de valor se actualizan sólo para el canal del contacto
normalmente abierto. Para el canal del contacto normalmente cerrado, la señal de entrada
digital es "cero" y el estado de valor "no válido", ya que dicho canal sólo sirve para comprobar
el sensor.
El diagnóstico depende del parámetro "Selección" (del encoder). Observe también las
particularidades en el diagnóstico con el tipo de encoder inversor en el manual "Signal Modules
for Process Automation".

Consulte también
Documentación de módulos para la automatización de procesos (http://
support.automation.siemens.com/WW/view/de/7215812/0/en)

Parámetros tecnológicos
Prolongación del impulso y vigilancia de inestabilidad de señal
La prolongación del impulso es una función que modifica una señal de entrada digital. Un
impulso en una entrada digital se prolonga como mínimo hasta la longitud parametrizada. Si el
impulso de entrada ya es más largo que la longitud parametrizada, no se modifica.
Si los impulsos deben modificarse, haga clic en el campo para seleccionar el tiempo. Si los
impulsos no deben prolongarse, seleccione la entrada "---".
La vigilancia de inestabilidad de señal es una función del sistema de control para señales de
entradas digitales. Detecta y notifica cursos anómalos de las señales en la ingeniería de
procesos, p. ej. oscilaciones demasiado frecuentes de la señal de entrada entre "0" y "1".
Para activar la vigilancia de inestabilidad de señal es imprescindible que el diagnóstico de
grupo también esté habilitado en esta entrada.

Ventana de vigilancia y número de cambios de señal
El funcionamiento de la vigilancia de inestabilidad de señal se determina mediante los
parámetros Ventana de vigilancia y Número de cambios de señal.
La primera vez que cambia la señal de entrada se inicia el tiempo que se ha parametrizado
como ventana de vigilancia. Si, durante este tiempo, la señal de entrada cambia con más
frecuencia de la parametrizada en el número de cambios de señal, se identifica como error de

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3583

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
inestabilidad de señal. Si dentro de la ventana de vigilancia no se detecta ningún error de
inestabilidad de señal, cuando vuelva a cambiar la señal se reiniciará la ventana de vigilancia.
Nota
Si se parametriza una prolongación del impulso en un canal de entrada, esto afectará a la
vigilancia de inestabilidad de señal habilitada para dicho canal. La señal cuyo impulso se ha
prolongado es la señal de entrada para la vigilancia de inestabilidad de señal. Por
consiguiente, sincronice las parametrizaciones de la prolongación del impulso y la vigilancia de
inestabilidad de señal.

Consulte también
Documentación de módulos para la automatización de procesos (http://
support.automation.siemens.com/WW/view/de/7215812/0/en)

Módulo IQ-Sense
Propiedades de 8 IQ-SENSE
Propiedades
El módulo 8 IQ-SENSE se caracteriza por las siguientes particularidades:
● Conexión de sensores con IQ-SENSE®, detectores fotoeléctricos de proximidad: p.ej.
barreras fotoeléctricas por reflexión, sensores difusos y sensores láser.
● Apto para el uso centralizado en S7-300 o descentralizado en el ET 200M.
● A cada módulo pueden conectarse hasta 8 sensores. Se requiere un cable de dos hilos por
cada sensor.
● Reserva de función parametrizable.
● Funciones de tiempo parametrizables, histéresis de conmutación y modo síncrono.
● Prescripciones de valores de sensibilidad y distancia (IntelliTeach a través de FB "IQSENSE Opto")
● Teach in
● Extracción e inserción de sensores durante el funcionamiento (reparametrización
automática)

Grupo de antiinterferencias
Solo para dispositivos IQ-Sense ópticos (ID de perfil IQ 1).
Para dispositivos IQ-Sense con ID de perfil IQ 128 (ultrasonido) consulte los parámetros por
canal "Modo multiplex/síncrono".

3584

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Impedir una influencia perturbadora (interferencia, p. ej. luz parásita) asignando un grupo de
antiinterferencias. Esto significa que:
● Grupo de antiinterferencias: ninguno (= ajuste predeterminado)
En caso de disposición desfavorable, es posible que los sensores ópticos de uno o varios
módulos se influyan mutuamente.
● Grupo de antiinterferencias: 3 o 4
Los sensores ópticos del mismo módulo con el grupo de antiinterferencias 3 o 4 no pueden
influirse mutuamente. Los sensores ópticos de diferentes módulos con el grupo de
antiinterferencias 3 o 4 tampoco pueden influirse mutuamente. No es necesario mantener
una distancia mínima entre los dispositivos IQ-Sense ópticos, por lo que dos barreras
fotoeléctricas por reflexión pueden alinearse a un reflector común, por ejemplo.

Principio de funcionamiento
La figura siguiente ilustra el funcionamiento del parámetro Grupo de antiinterferencias:












6ORW

[,46HQVH



QDGD







3DU£PHWUR
*UXSRGH
DQWLLQWHUIHUHQFLDV

Una interferencia parásita solo es posible entre los sensores ópticos de los módulos en los
slots 5, 6, 7 y 9, ya que estos se encuentran en el mismo grupo de antiinterferencias 3 o bien
están ajustados con "ninguno".
Nota
Los sensores que pertenecen a un mismo grupo de antiinterferencias deben montarse de
manera que se respete la distancia mínima (véase la hoja adjunta al sensor) y así se puedan
excluir interferencias entre dichos sensores.

Tipo de sensor
Con este parámetro se ajusta el tipo de sensor por canal:
● Barrera fotoeléctrica por reflexión o
● Sensor difuso o
● desactivado

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3585

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Sensor difuso
Tabla 1-217 Sensor difuso
Sensor difuso

Objeto

Emisor

Estado de conmutación 0: No se ha detec‐
tado ningún objeto, es decir, el objeto no se
encuentra en la trayectoria de los rayos. El
receptor no ve luz

Receptor

Estado de conmutación 1: Objeto detecta‐
do, es decir, el objeto se encuentra en la
trayectoria de los rayos. El receptor no ve
luz.

Emisor
Receptor

Barrera fotoeléctrica por reflexión
Tabla 1-218 Barrera fotoeléctrica por reflexión
Barrera fotoeléctrica por
reflexión
Emisor
Receptor

Emisor
Receptor

Objeto
Estado de conmutación 0: No se ha detec‐
tado ningún objeto, es decir, el objeto no se
encuentra en la trayectoria de los rayos. El
receptor ve luz.
Estado de conmutación 1: Objeto detecta‐
do, es decir, el objeto se encuentra en la
trayectoria de los rayos. El receptor no ve
luz.

Histéresis de conmutación
Un fallo en el sensor difuso o en el proceso de fabricación puede provocar una inestabilidad de
la señal. En ese caso, el valor medido oscila alrededor del umbral de conmutación del 100%
(objeto detectado – objeto no detectado). Esta fluctuación del umbral de conmutación se puede
impedir con el parámetro Histéresis de conmutación. De ese modo se obtiene una señal de
salida estable en el sensor.
Puede parametrizar los márgenes 5 / 10 / 20 / 50 % como histéresis de conmutación.

Requisitos
El parámetro Histéresis de conmutación sólo puede ajustarse para barreras fotoeléctricas por
reflexión con supresión de fondo.

3586

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Principio de funcionamiento
1LYHOGHUHFHSFLµQ

8PEUDOGH
FRQPXWDFLµQ


+LVW«UHVLVGHFRQPXWDFLµQ

7LHPSRW

6DOLGDGHFRQPXWDFLµQHQHOVHQVRU



Figura 1-156

7LHPSRW

Parámetro Histéresis de conmutación

Funciones de tiempo, valor de tiempo
Con estos parámetros se puede adaptar el módulo electrónico a su aplicación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3587

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Principio de funcionamiento
)XQFLµQGHWHPSRUL]DFLµQ (VWDGRGHFRQPXWDFLµQ

+LVWRULDO



1LQJXQR
3RUGHIHFWR




5HWDUGDGRDOD
GHVH[FLWDFLµQ

7




5HWDUGDGRDOD
H[FLWDFLµQ

7

7




5HWDUGDGRDOD
H[FLWDFLµQ\
GHVH[FLWDFLµQ

7

7

7




,PSXOVRPRPHQW£
QHR

(VWDGRGH
FRQPXWDFLµQ
HQHOVHQVRU

7

7

7

7


2EMHWR
GHWHFWDGR
2EMHWRQRGHWHFWDGR
7 3DU£PHWUR9DORUGHWLHPSR

Figura 1-157

Parámetro Valor de tiempo, Funciones de tiempo

Modo multiplex/síncrono
Para evitar la influencia mutua de dispositivos ultrasonido IQ-Sense situados uno cerca del
otro (dispositivos con ID de perfil IQ 128) se utiliza el parámetro "Modo multiplex/síncrono".

3588

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Ajustes del parámetro Modo multiplex/síncrono
Desactivado: es posible que los sensores ultrasonido IQ-Sense colindantes se influyan
mutuamente (ajuste predeterminado). El tiempo de ciclo viene determinado por el sensor
ultrasonido IQ-Sense.
Multiplex: los sensores ultrasonido IQ-Sense determinan el valor de proceso (distancia) uno
detrás de otro, de modo que queda excluida una influencia mutua. El tiempo de ciclo es la suma
de los tiempos de ciclo síncrono parametrizados para los sensores ultrasonido IQ-Sense en
modo multiplex.
Sincronización: los sensores ultrasonido IQ-Sense determinan el valor de proceso (distancia)
exactamente en el mismo instante, de modo que queda excluida una influencia mutua. El
tiempo de ciclo equivale al tiempo de ciclo síncrono más grande parametrizado para los
sensores ultrasonido IQ-Sense en modo síncrono.
El modo síncrono se utiliza, p. ej., para una función de cortina en la que varios sensores
ultrasonido situados en paralelo comparten un área de captura amplio. Los sensores emiten
un impulso ultrasonido simultáneamente. Cuando un objeto entra en el área de captura, el
sensor que está más cerca del objeto es el primero en recibir el eco. Esto permite no solo
detectar el objeto sino además localizarlo.

Valor AFI
Con la ayuda del valor AFI (Application Family Identifier, definido en la norma internacional ISO
15693-3) se elige el transpondedor para diferentes aplicaciones. Solo se procesan los
transpondedores cuyo valor AFI coincide con el valor ajustado en el sensor. Si un
transpondedor tiene el valor AFI "0", es posible identificarlo y procesarlo independientemente
del valor AFI del sensor.
Este parámetro solo es importante cuando es soportado por el sistema de identificación, de lo
contrario puede tener un valor cualquiera (por lo general "0").

Tipo de transpondedor
Según sea el tipo de transpondedor, hay que ajustar si se trata de un transpondedor ISO o de
un tipo específico del fabricante.
En los transpondedores que cumplen el estándar internacional ISO 15693 debe seleccionarse
el valor "1"; para todos los demás tipos se ajusta "0". En base a este ajuste, en el sensor se
selecciona uno de los dos drivers de interfaz aérea posibles.
Este parámetro solo es importante cuando es soportado por el sistema de identificación, de lo
contrario puede tener un valor cualquiera (por lo general "0").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3589

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

1.6.3.9

ET 200S

Configurar ET 200S
Introducción
Para la familia ET 200S encontrará una amplia gama de módulos en el catálogo de hardware
bajo "Periferia descentralizada".

Parametrización
Encontrará información sobre la configuración y parametrización en "Consulte también".

Convertidores de frecuencia
Empleo del convertidor de frecuencia
Convertidores de frecuencia
Los convertidores de frecuencia ICU24 e ICU24F (en su versión de seguridad) tienen una
estructura modular y están completamente integrados en el sistema de periferia
descentralizada ET 200S. A continuación se explica lo que debe tenerse en cuenta al
parametrizar estos dos módulos.

Telegrama
El número de telegrama y el modo de operación del módulo solo se visualizan y no pueden
modificarse.

ID de aplicación
La ID de aplicación identifica la totalidad de los parámetros guardados en el convertidor de
frecuencia. Introduzca una ID de aplicación comprendida en el rango de valores de 0 a 65535.
Durante el arranque (o al extraer/insertar), esta identificación se compara con la ID de
aplicación guardada en el convertidor.
Los convertidores que procesan aplicaciones idénticas suelen tener también la misma
parametrización, por lo que deberían identificarse con la misma ID de aplicación. Los
convertidores el la mismo ID de aplicación pueden intercambiarse. Del mismo modo, solo está
permitido copiar la parametrización completa de un convertidor a otro, por ejemplo mediante
una MMC, si ambos tienen el mismo ID de aplicación.
Los convertidores que procesan aplicaciones diferentes y tienen parametrizaciones distintas
deben identificarse con IDs de aplicación también distintas. De este modo se impide que un
convertidor con una parametrización inadecuada arranque en un slot erróneo, es decir, en la
aplicación equivocada. También se impide que la parametrización guardada en el convertidor
se sobrescriba casualmente con otra parametrización guardada en una MMC.

3590

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Habilitar una alarma de diagnóstico
Existe la posibilidad de habilitar la alarma de diagnóstico para los convertidores de frecuencia.
Si la alarma de diagnóstico está habilitada, en la CPU debe haber un OB 82 que procese los
eventos de diagnóstico.

Consulte también
Documentación del convertidor de frecuencia (http://support.automation.siemens.com/WW/
view/es/26291825/0/en)

1.6.3.10

ET 200pro

ET 200pro con módulo de CPU propio
ET 200pro con CPU propia
El ET 200pro puede estar equipado con una CPU propia, por ejemplo con la CPU 1516pro.
Tenga en cuenta las siguientes reglas.
Reglas de ampliación para la CPU 1516pro:
● La CPU 1516pro puede ampliare con un máximo de 16 módulos.
● El ancho total puede llegar a un metro como máximo.
Construcciones con módulos anchos
Si en una configuración con módulos grandes (por ejemplo convertidores de frecuencia o
arrancadores de motor) se excede el ancho máximo de un metro no será posible compilar la
configuración. En este caso, reduzca la configuración.

Control de configuración con ET 200pro
Principio de funcionamiento
El control de configuración permite cambiar con posterioridad la configuración original de un
ET 200pro (realizada con la configuración con STEP 7) mediante un programa de usuario y
operar el ET 200pro con la configuración modificada. Para esta configuración ya no es
necesario STEP 7: A través del programa de usuario se comunica al ET 200pro el slot en el que
está insertado realmente un módulo configurado.
Para ello se utiliza el juego de datos de control 196. En este juego de datos se codifica qué
módulos faltan en la instalación real en comparación con la configuración o bien qué módulos
se encuentran en un slot distinto al previsto en la configuración. El control de configuración no
afecta a la parametrización de los módulos (por ejemplo, la emisión de avisos de diagnóstico).
A continuación, llame la instrucción "WRREC" y escriba el juego de datos en el módulo de
interfaz del ET 200pro.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3591

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Este control de configuración permite variar la instalación de un ET 200pro de forma flexible
siempre que la configuración real derive de la configuración máxima prevista (originalmente
creada con STEP 7).
A continuación se explica cómo activar el control de configuración. Además se muestra la
estructura del juego de datos de control 196 y del juego de datos de relectura 197.

Requisitos
El parámetro de arranque de CPU "Comparación de configuraciones teórica y real" está
ajustado a "Arranque aunque haya diferencias" (ajuste predeterminado). Este ajuste también
está predeterminado para el parámetro de arranque de los distintos módulos del ET 200pro.

Activación del control de configuración
En la configuración del ET 200pro en STEP 7, active el parámetro "Permitir la reconfiguración
del dispositivo mediante el programa de usuario" (sección "Control de configuración").

Estructura del juego de datos de control 196 para el ET 200pro
En el juego de datos de control 196 hay un byte previsto para cada módulo.
La posición de ese byte en el juego de datos codifica un módulo en la configuración original con
STEP 7, respectivamente:
● "slot_IM" (byte 4 en el juego de datos, figura siguiente) corresponde al módulo del slot 1 en
la configuración.
● "slot_2" (byte 5) corresponde al módulo del slot 2 en la configuración.
● "slot_3" (byte 6) corresponde al módulo del slot 3 en la configuración.
● etc.
Byte "slot_x"
El slot actual está codificado por el número que se ha asignado a "slot_x" (por su valor).
Ejemplos:
● El valor "2" del byte 5 significa que también en la configuración actual se asigna el slot 2
(slot_2 = 2) al módulo que originalmente estaba enchufado en el slot 2.
● El valor "3" del byte 5 significa que en la configuración actual se asigna el slot 3 (slot_2 = 3)
al módulo que originalmente estaba enchufado en el slot 2.
● El valor "4" del byte 5 significa que en la configuración actual se asigna el slot 4 (slot_2 = 4)
al módulo que originalmente estaba enchufado en el slot 2.
● etc.
En el ET 200pro no hay módulos de reserva (como ocurría en ET 200S o en los módulos BU
Cover (tapa) del ET 200SP), por lo que no es posible que esté activado el bit 7 de "slot_x".
El valor "0" en "slot_x" significa que ese módulo no está enchufado en la configuración actual.

3592

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Ejemplo de un juego de datos de control 196
La figura siguiente muestra el juego de datos de control 196 para una configuración de un ET
200pro con cuatro módulos.
Sirve de ejemplo la configuración siguiente:
● El módulo configurado originalmente con STEP 7 en el slot 1 también está enchufado en el
slot 1 en la configuración actual.
● El módulo del slot 2 está enchufado en el slot 2 en la configuración actual.
● El módulo del slot 3 falta en la configuración actual.
● El módulo del slot 4 está enchufado realmente en el slot 3 en la configuración actual.

Los componentes del juego de datos de control 196 (figura superior):
● block_length: anote aquí la longitud del juego de datos de control (en el ejemplo, 8 bytes).
La longitud se calcula con la fórmula: "número de slots ocupados" + 4.
● block_ID: introduzca aquí el número 196.
● version: el ET200pro utiliza la versión 1 del juego de datos de control 196.
● subversion: el ET200pro utiliza la subversión 0 del juego de datos de control 196.
● slot_IM: en el ET 200pro, en el slot 0 se encuentra siempre el módulo IM. En el slot 1 se
encuentra siempre el módulo de potencia virtual, integrado de forma fija en el módulo IM.
En slot_IM (nombre modificable) puede haber cualquier valor. Este byte no se interpreta en
el control de configuración del ET 200pro.
● slot_2: el módulo configurado 2 está enchufado en el slot 2 (valor "2").
● slot_3: el módulo configurado 3 no está presente en la configuración actual (valor "0").
● slot_4: en la configuración actual el módulo configurado 4 está enchufado en el slot 3 (valor
"3").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3593

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Definición del juego de datos de control 196
Para el control de configuración se define un juego de datos de control 196 que contiene una
asignación de slots.
Byte

Elemento

Valor

0

Longitud del blo‐
que

p.ej.
La longitud del juego de datos se calcula
8
con la fórmula: 4 + número de módulos
para ET 200pro con cua‐ en bytes
tro módulos

Explicación

1

Block-ID

196

ID para el juego de datos de control 196

2

Version

1

Version 1 del juego de datos de control
196

3

Subversion

0

Subversión 0 del juego de datos de con‐
trol 196

4

slot_1

Es posible cualquier va‐
lor: por ejemplo "1"

En el ET 200pro este byte no se inter‐
preta, puesto que en el slot 1 se halla
siempre el módulo de potencia, que está
integrado de manera fija en el módulo IM
del ET 200pro.

5

slot_2

Codificación del slot real: El byte 5 incluye la indicación de dónde
está realmente insertado en la configu‐
2 = slot 2
ración actual el módulo configurado ori‐
3 = slot 3
ginalmente con STEP 7 en el slot 2.
4 = slot 4
etc.
Codificación para módu‐
lo ausente:
0 = sin slot, el módulo no
está presente

6

slot_3

Ejemplo: 2
El módulo configurado originalmente
con STEP 7 en el slot 2 también se halla
realmente en el slot 2 (valor "2") en la
configuración actual.

Codificación del slot real: El byte 6 incluye la indicación de dónde
está realmente insertado en la configu‐
2 = slot 2
ración actual el módulo configurado ori‐
3 = slot 3
ginalmente con STEP 7 en el slot 3.
4 = slot 4
etc.
Codificación para módu‐
lo ausente:
0 = sin slot, el módulo no
está presente

3594

Ejemplo: 0
el módulo configurado originalmente con
STEP 7 en el slot 3 no está presente en
la configuración actual (valor "0").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
7

slot_4

Codificación del slot real: El byte 7 incluye la indicación de dónde
está realmente insertado en la configu‐
2 = slot 2
ración actual el módulo configurado ori‐
3 = slot 3
ginalmente con STEP 7 en el slot 4.
4 = slot 4
etc.
Codificación para módu‐
lo ausente:

:

:

Ejemplo: 3

0 = sin slot, el módulo no
está presente

El módulo configurado originalmente
con STEP 7 en el slot 4 se halla real‐
mente en el slot 3 (valor "3") en la confi‐
guración actual.

:

:

Escribir un juego de datos
Transfiera el juego de datos de control al módulo ET 200pro.
Llame la instrucción avanzada WRREC (Escribir registro) y transfiera el juego de datos de
control creado.
Si no se transfiere ningún juego de datos de control, el módulo de interfaz utilizará la
configuración original con STEP 7. En ese caso se aplica: el módulo configurado x está
enchufado en el slot real x.

Direccionamiento del módulo de interfaz mediante identificador de hardware
Para transferir el juego de datos 196 con la instrucción WRREC hay que introducir el
identificador de hardware del submódulo IM con la extensión "∼Head" como parámetro de
entrada para la instrucción. La constante de sistema de dicho identificador de hardware es, p.
ej., "IO-Device_2∼Head". Las constantes de sistema de un dispositivo seleccionado se
muestran, por ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Mensajes de error
Al escribir el juego de datos de control 196, en caso de fallo se devuelven los siguientes
mensajes de error:
Tabla 1-219 Mensajes de error
Código de error

Significado

16#80A2

Error de protocolo DP en Layer 2. Indica un acuse de recibo del
juego de datos que no se ha producido debido al sistema.

16#80B1

Longitud no permitida; la indicación de longitud del juego de datos
196 no es correcta.

16#80B5

Control de configuración no parametrizado.

16#80B2

invalid slot: el slot configurado no está ocupado.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3595

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Código de error

Significado

16#80B8

Error de parámetros; el módulo notifica parámetros no válidos.

16#80C5

El esclavo DP o el módulo no está disponible. Indica un acuse de
juego de datos que no se ha producido debido al sistema.

Juego de datos de relectura 197 para ET 200pro
El juego de datos de relectura 197 sirve para leer la configuración real de una estación (en este
caso una ET 200pro).
Este juego de datos permite comprobar la configuración real del ET 200pro. El juego de datos
de relectura contiene información sobre si existe realmente o no cada uno de los módulos
configurados.
● El valor "1" significa que está enchufado el módulo correcto en el slot previsto.
● El valor "0" codifica las restantes posibilidades (módulo erróneo, slot vacío).
Ejemplo:
Con STEP 7 se ha configurado un módulo en el slot 4.
Con ayuda del juego de datos 196, dicho módulo se desplaza en la configuración actual al slot
3.
Si dicho módulo está enchufado realmente en el slot 3, se codifica con el valor "1"
(status_slot_4 = 1).
Detalle de la estructura:
La estructura del bloque de datos corresponde a la configuración original del ET 200SP con
STEP 7.
En el juego de datos hay un byte previsto para cada módulo. La posición de ese byte en el
juego de datos corresponde a la posición de un módulo en la configuración original con STEP
7.
Orden de los bytes:
● "status_slot_IM" (byte 4 en el juego de datos) corresponde al módulo del slot 1 de la
configuración.
● "status_slot_2" (byte 5) corresponde al módulo del slot 2 de la configuración
● "status_slot_3" (byte 6) corresponde al módulo del slot 3 de la configuración
● etc.
El ejemplo siguiente está estructurado para una configuración con 4 módulos. Por ello el
elemento "block_length" del juego de datos tiene el valor "8".
Si se configura en STEP 7 un ET 200pro con menos módulos, se acorta el bloque de datos.
Los nombres de los componentes del juego de datos de control (por ejemplo "status_slot_2")
se pueden elegir libremente.
Significado de "status_slot_x":
● El valor "1" en status_slot_x significa que el módulo x está enchufado en el slot previsto.
● El valor "0" en status_slot_x codifica las restantes posibilidades (módulo erróneo, módulo
inexistente).

3596

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Ejemplo:
La figura siguiente muestra el juego de datos de relectura 197 para un ET 200pro con cuatro
módulos.
● El módulo 3 no existe (se indica en el juego de datos de control 196, véase el apartado
"Ejemplo de juego de datos de control 196" más arriba).
● Los tres módulos restantes están realmente enchufados en el ET 200pro.

Leer el juego de datos de relectura 197
La instrucción RDREC permite leer desde el ET 200pro el juego de datos de relectura 197.
RDREC trabaja asíncronamente. Si se llama a RDREC en el OB de arranque, es necesario
llamar varias veces la instrucción en un bucle, hasta que los parámetros de salida "BUSY" o
DONE" indiquen que se ha leído el juego de datos.
Para leer el juego de datos 197 con la instrucción RDREC hay que introducir el identificador de
hardware del submódulo IM con la extensión "∼Head" como parámetro de entrada para la
instrucción. La constante de sistema de dicho identificador de hardware es, p. ej., "IODevice_2∼Head". Las constantes de sistema de un dispositivo seleccionado se muestran, por
ejemplo, en la ficha "Constantes de sistema" de la vista de redes. Utilice el valor
correspondiente para el direccionamiento.

Información adicional y ejemplos
Encontrará información relacionada con el módulo de interfaz PN del ET 200pro aquí (http://
support.automation.siemens.com/WW/view/es/98099372).
Encontrará ejemplos concretos del control de configuración en esta descripción de aplicación
(http://support.automation.siemens.com/WW/view/es/29430270).
Aquí están depositados una librería de los juegos de datos y otros ejemplos de aplicación:
Plantillas para los juegos de datos (http://support.automation.siemens.com/WW/view/es/
29430270)

Consulte también
Control de configuración con ET 200SP (Página 3510)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3597

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

Empleo del convertidor de frecuencia
Convertidores de frecuencia
Los convertidores de frecuencia ET 200pro FC y ET 200pro F-FC (en su versión de seguridad)
tienen una estructura modular y están completamente integrados en el sistema de periferia
descentralizada ET 200pro. A continuación se explica lo que debe tenerse en cuenta al
parametrizar estos dos módulos.

Telegrama
El número de telegrama y el modo de operación del módulo solo se visualizan y no pueden
modificarse.

ID de aplicación
La ID de aplicación identifica la totalidad de los parámetros guardados en el convertidor de
frecuencia. Introduzca una ID de aplicación comprendida en el rango de valores de 0 a 65535.
Durante el arranque (o al extraer/insertar), esta identificación se compara con la ID de
aplicación guardada en el convertidor.
Los convertidores que procesan aplicaciones idénticas suelen tener también la misma
parametrización, por lo que deberían identificarse con la misma ID de aplicación. Los
convertidores el la mismo ID de aplicación pueden intercambiarse. Del mismo modo, solo está
permitido copiar la parametrización completa de un convertidor a otro, por ejemplo mediante
una MMC, si ambos tienen el mismo ID de aplicación.
Los convertidores que procesan aplicaciones diferentes y tienen parametrizaciones distintas
deben identificarse con IDs de aplicación también distintas. De este modo se impide que un
convertidor con una parametrización inadecuada arranque en un slot erróneo, es decir, en la
aplicación equivocada. También se impide que la parametrización guardada en el convertidor
se sobrescriba casualmente con otra parametrización guardada en una MMC.

Habilitar una alarma de diagnóstico
Existe la posibilidad de habilitar la alarma de diagnóstico para los convertidores de frecuencia.
Si la alarma de diagnóstico está habilitada, en la CPU debe haber un OB 82 que procese los
eventos de diagnóstico.

3598

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones

1.6.4

Routing IPv4 con CP 154x-1 / CM 1542-1

Routing IPv4 con CP 1543‑1 / CP 1545‑1 / CM 1542‑1
Para la función "Routing IPv4 a través del bus de fondo" del CM o del CP se aplican las
restricciones siguientes.
● No es posible el routing IPv4 a través del CM o del CP hasta la CPU de la estación.
● Configuración IP con el CM 1542‑1 como controlador PROFINET IO
Si el CM con el routing IPv4 activado a través del bus de fondo se utiliza como controlador
PROFINET IO, para la configuración IP de los dispositivos IO subordinados tenga en
cuenta lo siguiente:
Si se ha configurado una dirección IP fija de los dispositivos IO subordinados (opción
"Ajustar dirección IP en el proyecto"), no es posible el routing IPv4 a través del CM hasta los
dispositivos IO.
Para que sea posible el routing IPv4 a través del CM hasta los dispositivos IO subordinados,
en la configuración IP de los dispositivos IO debe ajustarse lo siguiente:
– En el dispositivo IO active primero la opción "Utilizar router".
Copie la dirección IP del controlador IO (CM) en el campo de la dirección del router.
– Después active en el dispositivo IO la opción "Permitir ajustar la dirección IP
directamente en el dispositivo".

1.6.5

Configuración IPv6

1.6.5.1

Protocolo IPv6
La versión 6 (IPv6) del protocolo de Internet amplía el área de direcciones de la versión 4 (IPv4).

Formato de dirección IPv6: Notación
Las direcciones IPv6 constan de 8 bloques con cifras decimales de cuatro dígitos en cada uno
(128 bits en total). Los bloques están separados por dos puntos.
Ejemplo: fd00:0000:0000:0000:0db8:002f:0000:0000

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3599

Configuración de dispositivos y redes
1.6 Información adicional sobre configuraciones
Reglas / simplificaciones:
● Está permitido omitir los ceros a la izquierda dentro de un bloque.
Ejemplo: fd00:0000:0000:0000:0db8:002f:0000:0000 abreviado fd00:0:0:0:db8:2f:0:0
● Si uno o varios bloques tienen el valor 0 se admite una notación abreviada con dos
caracteres de dos puntos seguidos. Con el fin de conservar la univocidad, dicha abreviación
solo puede aplicarse una vez dentro de toda la dirección. Si hay dos o más abreviaciones
de este tipo puede suceder que no sea posible determinar el número de bloques que se han
abreviado.
Ejemplo válido: fd00::db8:2f:0:0 o fd00:0:0:0:db8:2f:: (ambos se reconocen claramente
como fd00:0:0:0:db8:2f:0:0)
Ejemplo no válido: fd00::db8:2f:: (no está claro, pues puede interpretarse como
fd00:0:0:0:db8:2f:0:0, fd00:0:0:db8:2f:0:0:0, etc.)
● Para los 2 últimos bloques o 4 bytes es posible utilizar la notación decimal tradicional con
puntos.
Ejemplo: La dirección IPv6 fd00::db8:fd01:2f es equivalente a fd00::db8.253.1.0.47
La entrada de direcciones IPv6 es posible en las notaciones descritas anteriormente. Las
direcciones IPv6 se muestran siempre con la notación en la que se ha realizado la entrada.

Direcciones IPv6 diferentes de una interfaz
Si para una interfaz de un módulo de comunicaciones se configuran varias direcciones IPv6,
es necesario asegurarse de que las dos direcciones IPv6 ocupen áreas de subred diferentes.

Consulte también
IPv6 en el CP 154x-1 (Página 3600)

1.6.5.2

IPv6 en el CP 154x-1

Uso de IPv6 en el CP 1543‑1 / CP 1545‑1
El CP soporta el protocolo de Internet en su versión 4 (IPv4) para todos los servicios IP.
La indicación adicional de direcciones en formato IPv6 es útil en el CP para los siguientes
servicios y casos de aplicación:
● FETCH/WRITE: accesos directos de escritura/lectura de estaciones PC, SIMATIC S5 o
dispositivo de terceros
● Cliente FTP: accesos FTP desde la CPU S7-1500 a un servidor FTP con el bloque de
programa FTP_CMD
● Servidor FTP: accesos FTP desde un cliente FTP a áreas de datos de la CPU S7-1500
● SNMP: consulta de datos mediante objetos MIB conforme a SNMP
● Correo electrónico: transferencia de datos desde la CPU S7-1500 con el bloque de
programa T_Mail

3600

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1

Diagnosticar hardware

2.1.1

Resumen del diagnóstico de hardware

2.1.1.1

Posibilidades generales para diagnosticar el hardware

2

Funciones generales del diagnóstico de hardware
El hardware se diagnostica del modo siguiente:
● Desde la vista Online y diagnóstico
● Desde la Task Card "Herramientas online"
● Desde la sección "Diagnóstico > Información del dispositivo" de la ventana de inspección
● Mediante iconos de diagnóstico, p. ej. en la vista de dispositivos y en el árbol del proyecto

Estructura de la vista Online y diagnóstico
La vista Online y diagnóstico consta de dos ventanas colindantes:
● La ventana izquierda muestra una estructura de árbol con carpetas y grupos (si las carpetas
están abiertas).
● La ventana derecha contiene información detallada sobre la carpeta o el grupo
seleccionado.
Existen el grupo "Accesos online" y las carpetas "Diagnóstico" y "Funciones".
● Grupo "Accesos online": contiene la visualización de si actualmente existe o no una
conexión online con el destino correspondiente. Asimismo, es posible establecer o
deshacer la conexión online.
● "Diagnóstico": Contiene varios grupos de diagnóstico relacionados con el módulo
seleccionado.
● "Funciones": Contiene varios grupos en los que se realizan ajustes en el módulo
seleccionado o se dan comandos al módulo.

Función y estructura de la Task Card "Herramientas online"
En la Task Card "Herramientas online" se lee información de diagnóstico actual y se transfieren
comandos al módulo en aquellos que tienen un estado operativo propio (p. ej. CPUs).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3601

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
Se antes de activar la Task Card "Herramientas online" se ha seleccionado un módulo que no
tiene estado operativo propio o bien varios módulos, la Task Card hará referencia a la CPU
correspondiente.
La Task Card "Herramientas online" consta de las paletas siguientes:
● Panel de control de la CPU
● Tiempo de ciclo
● Memoria
Nota
Una paleta solo tiene contenido si el módulo conoce las funciones correspondientes y si
existe una conexión online.
Si no existe ninguna conexión online con el módulo en cuestión, en cada paleta se mostrará
"Ninguna conexión online" en azul. Si se ha deshecho una conexión online existente, se
muestra "No se puede acceder a este destino".

Estructura de la ficha "Diagnóstico" de la ventana de inspección
La ficha "Diagnóstico" de la ventana de inspección contiene a su vez varias fichas. De ellas, la
siguiente es relevante para el diagnóstico de hardware:
● Información del dispositivo
Esta ficha hace referencia a todos los dispositivos online (p. ej. CPU) con las que existe una
conexión online y a los dispositivos que están asignados a estos dispositivos online (p. ej.
dispositivos PROFINET y esclavos PROFIBUS). Aquí se visualizan avisos relacionados
con los dispositivos y dispositivos online averiados.
Nota
¿Qué se muestra cuando un módulo está averiado?
Cuando un módulo de un dispositivo está averiado solo se indica el módulo
correspondiente o su proxy (p. ej. módulo de cabecera), pero no el módulo propiamente
dicho.
Los dispositivos que fallan se muestran "en el nivel más alto" y no en una vista jerárquica
debajo de su dispositivo online (como sucede en el árbol del proyecto).

2.1.1.2

Determinar los dispositivos defectuosos que están conectados online

Resumen de los dispositivos defectuosos
El área "Diagnóstico > Información del dispositivo" de la ventana de inspección ofrece una vista
general de los dispositivos defectuosos con los que existe o ha existido una conexión online.
El área "Diagnóstico > Información del dispositivo" de la ventana de inspección consta de los
elementos siguientes:
● Encabezado con el número de dispositivos defectuosos
● Tabla con información detallada de cada dispositivo defectuoso

3602

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
Cuando se intenta establecer una conexión online con un dispositivo, éste se considera
defectuoso si no es accesible, si notifica un error como mínimo o si no está en estado operativo
"RUN".

Estructura de la tabla con información detallada de los dispositivos defectuosos
La tabla contiene las columnas siguientes:
● Estado online: contiene el estado online como símbolo de diagnóstico y en palabras
● Estado operativo: contiene el estado operativo como símbolo y en palabras
● Dispositivo / módulo: nombre del dispositivo o módulo afectado
● Aviso: Explica la entrada de la columna anterior
● Detalles: el enlace abre la vista online y de diagnóstico correspondiente al dispositivo y la
pone en primer plano. Si ya no existe ninguna conexión online, el enlace abre el diálogo
para establecer la conexión.
● Ayuda: el enlace proporciona información adicional sobre el fallo aparecido.

Consulte también
Mostrar el estado de diagnóstico y de comparación mediante iconos (Página 3603)

2.1.1.3

Mostrar el estado de diagnóstico y de comparación mediante iconos

Determinar online el estado de diagnóstico y mostrarlo mediante iconos
Al establecer la conexión online con un dispositivo se determina también su estado de
diagnóstico y el de sus componentes subordinados (si los tiene), así como, su estado
operativo, si es preciso.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3603

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
A continuación se describe en qué vista se muestran qué iconos.
● Vista de dispositivos
– Para cada componente de hardware (a excepción de la Signal Board de la CPU) se
muestra el correspondiente icono de diagnóstico.
Haciendo doble clic en el icono de diagnóstico se abre la vista Online y diagnóstico
(siempre que exista).
– Si en un componente de hardware con componentes subordinados hay un error de
hardware en por lo menos un componente subordinado, el icono de diagnóstico tiene el
aspecto siguiente: el icono de diagnóstico del componente de hardware se representa
atenuado y, además, en el extremo inferior derecho se muestra el icono de diagnóstico
"Error de hardware en componente subordinado".
– En los componentes de hardware con estado operativo propio, se muestra
adicionalmente el icono de estado operativo a la izquierda o encima del icono de
diagnóstico.
– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
no se muestran iconos de diagnóstico (debido a la configuración como dispositivo
GSDML).
Nota
Estado de diagnóstico de módulos SCALANCE-XM-400 y SCALANCE-XR-500-managed
Cuando hay una conexión online con los módulos SCALANCE-XM-400 y SCALANCEXR-500-managed no se muestran símbolos de diagnóstico, o bien los que se muestran son
incorrectos.
Los símbolos de diagnóstico correctos se obtienen cuando se establece una conexión
online con una CPU correspondiente.
● Vista general de dispositivos
– Para cada componente de hardware se muestra el correspondiente icono de
diagnóstico.
Haciendo doble clic en el icono de diagnóstico se abre la vista Online y diagnóstico
(siempre que exista).
– Si en un componente de hardware con componentes subordinados hay un error de
hardware en por lo menos un componente subordinado, el icono de diagnóstico tiene el
aspecto siguiente: el icono de diagnóstico del componente de hardware se representa
atenuado y, además, en el extremo inferior derecho se muestra el icono de diagnóstico
"Error de hardware en componente subordinado".
– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
para los módulos asignados a la CPU se muestra el correspondiente icono de
diagnóstico (los módulos no asignados no obtienen icono de diagnóstico). De los
submódulos enchufables de un módulo asignado se muestra el correspondiente icono
de diagnóstico (los submódulos no enchufables no son visibles y por tanto tampoco
reciben icono de diagnóstico).
● Vista de redes
– En cada dispositivo se muestra el correspondiente icono de diagnóstico.
Haciendo doble clic en el icono de diagnóstico se abre la vista Online y diagnóstico
(siempre que exista).

3604

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
– Si en un componente de hardware con componentes subordinados hay un error de
hardware en por lo menos un componente subordinado, el icono de diagnóstico tiene el
aspecto siguiente: el icono de diagnóstico del componente de hardware se representa
atenuado y, además, en el extremo inferior derecho se muestra el icono de diagnóstico
"Error de hardware en componente subordinado".
– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
se muestra un icono de diagnóstico. Corresponde a la parte de la estación que está
asignada a la CPU.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3605

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
● Vista general de redes
– Para cada componente de hardware se muestra el correspondiente icono de
diagnóstico.
Haciendo doble clic en el icono de diagnóstico se abre la vista Online y diagnóstico
(siempre que exista).
– Si en un componente de hardware con componentes subordinados hay un error de
hardware en por lo menos un componente subordinado, el icono de diagnóstico tiene el
aspecto siguiente: el icono de diagnóstico del componente de hardware se representa
atenuado y, además, en el extremo inferior derecho se muestra el icono de diagnóstico
"Error de hardware en componente subordinado".
– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
se muestra un icono de diagnóstico. Corresponde a la parte de la estación que está
asignada a la CPU.
● Vista topológica
– En cada dispositivo se muestra el correspondiente icono de diagnóstico.
Haciendo doble clic en el icono de diagnóstico se abre la vista Online y diagnóstico
(siempre que exista).
– Si en un componente de hardware con componentes subordinados hay un error de
hardware en por lo menos un componente subordinado, el icono de diagnóstico tiene el
aspecto siguiente: el icono de diagnóstico del componente de hardware se representa
atenuado y, además, en el extremo inferior derecho se muestra el icono de diagnóstico
"Error de hardware en componente subordinado".
– Para cada puerto se muestra el correspondiente icono de diagnóstico. El significado de
los diferentes colores se describe más abajo.
– Cada cable entre dos puertos que están online se muestra en el color que corresponde
a su estado de diagnóstico.
El color del cable entre dos puertos depende del estado de los distintos puertos:
Color del primer puerto

Color del segundo puerto

Color del cable de conexión

verde claro

verde claro

verde claro

verde claro

verde oscuro

verde oscuro

Verde

Gris

Gris

Verde

Rojo

Rojo

Gris

Rojo

Rojo

– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
se muestra un icono de diagnóstico. Corresponde a la parte de la estación que está
asignada a la CPU.
● Vista topológica general
– Para cada componente de hardware se muestra el correspondiente icono de
diagnóstico.
Haciendo doble clic en el icono de diagnóstico se abre la vista Online y diagnóstico
(siempre que exista).

3606

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
– Si en un componente de hardware con componentes subordinados hay un error de
hardware en por lo menos un componente subordinado, el icono de diagnóstico tiene el
aspecto siguiente: el icono de diagnóstico del componente de hardware se representa
atenuado y, además, en el extremo inferior derecho se muestra el icono de diagnóstico
"Error de hardware en componente subordinado".
– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
se muestra un icono de diagnóstico. Corresponde a la parte de la estación que está
asignada a la CPU.
● Árbol del proyecto
– Detrás de cada componente de hardware se muestra el correspondiente icono de
diagnóstico.
– Si en un componente de hardware con componentes subordinados (p. ej. periferia
descentralizada, Esclavo_1) hay un error de hardware en por lo menos un componente
subordinado, el icono de diagnóstico tiene el aspecto siguiente: el icono de diagnóstico
del componente de hardware se representa atenuado y, además, en el extremo inferior
derecho se muestra el icono de diagnóstico "Error de hardware en componente
subordinado".
– En los componentes de hardware con estado operativo propio, se muestra
adicionalmente el icono de estado operativo en la esquina superior derecha del icono de
diagnóstico.
– Si en una CPU está activado el forzado permanente, se visualiza una F roja en el borde
izquierdo del icono de diagnóstico.
– Detrás de la carpeta "Módulos locales" se muestra el icono de diagnóstico "Error de
hardware en componente subordinado" cuando hay un error de hardware en por lo
menos uno de los módulos pertinentes.
– Detrás de la carpeta "Periferia descentralizada" se muestra el icono de diagnóstico
"Error de hardware en componente subordinado" cuando hay un error de hardware en
por lo menos uno de los componentes pertinentes.
– Detrás de la carpeta del proyecto se muestra el icono de diagnóstico "Error de hardware
en componente subordinado" cuando detrás de por lo menos una de las carpetas
"Módulos locales" y "Periferia descentralizada" se muestra el icono de diagnóstico "Error
de hardware en componente subordinado".
– Para los módulos o submódulos de un Shared Device de una CPU S7-1500 se aplica:
de los módulos asignados a la CPU se muestra el correspondiente icono de diagnóstico
(los módulos no asignados aparecen en color gris y no obtienen icono de diagnóstico).
De los submódulos enchufables de un módulo asignado se muestra el correspondiente
icono de diagnóstico (los submódulos no enchufables no son visibles y por tanto
tampoco reciben icono de diagnóstico).
Nota
Si en un componente de hardware se presenta el diagnóstico "no es accesible desde la CPU",
el icono de diagnóstico "Error de hardware en componente subordinado" no se muestra
adicionalmente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3607

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Iconos de diagnóstico de módulos y dispositivos
La tabla siguiente muestra los iconos posibles y su respectivo significado.
Icono

Significado
Se está estableciendo una conexión con una CPU.
La CPU ya no es accesible en la dirección ajustada.
La CPU configurada y la realmente existente no son compatibles debido al tipo.
Al establecer la conexión online con una CPU protegida se canceló el cuadro de
diálogo sin introducir la contraseña correcta.
No hay fallos
Mantenimiento necesario
Mantenimiento solicitado
Error
El módulo o el dispositivo están desactivados.
No es posible acceder al módulo, submódulo o dispositivo desde la CPU (válido para
módulos, submódulos y dispositivos que están debajo de una CPU).
La funcionalidad del módulo o submódulo no está disponible (p. ej. datos de entrada
y salida). Causas posibles:
● Diferencia conf. teórica/real
● Error de acceso al actualizar las memorias imagen de proceso
El diagnóstico no es posible o sólo con limitaciones. Causas posibles:
● Diferencias entre los datos de configuración online y offline
● No ha ejecutado el comando "Compilar" para el hardware.
● No ha ejecutado el comando "Cargar en dispositivo" para el hardware o la
configuración hardware.
● El objeto no permite diagnósticos.
Para dispositivos HMI: no hay datos de diagnóstico disponibles.
La conexión está establecida, pero el estado del módulo todavía se está determi‐
nando o se desconoce.
El módulo configurado no soporta la visualización del estado de diagnóstico.
Error de hardware en componente subordinado: Existe un error de hardware en por
lo menos un componente de hardware subordinado (solo aparece como icono in‐
dependiente en el árbol del proyecto).

Nota
Algunos módulos, como p. ej. el FM 450-1, tan solo se marcan como erróneos (caso de
producirse un error) si el usuario ha habilitado la alarma de diagnóstico al parametrizar las
propiedades del módulo en cuestión.

3608

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Iconos del estado de comparación
Los iconos de diagnóstico pueden combinarse en la parte inferior derecha con iconos de
estado más pequeños que muestran el resultado de la comparación online/offline. La tabla
siguiente muestra los iconos de comparación posibles y su significado.
Icono

Significado
Error de hardware en componente subordinado: en por lo menos un componente de
hardware subordinado las versiones online y offline son diferentes (solo en el árbol
del proyecto).
Error de software en componente subordinado: en por lo menos un componente de
software subordinado las versiones online y offline son diferentes (solo en el árbol del
proyecto).
La versión online del objeto es distinta de la offline.
El objeto solo existe online.
El objeto solo existe offline.
La versión online del objeto es igual que la offline.

Nota
Para que en la vista de dispositivos aparezcan en la parte inferior derecha tanto un icono de
comparación como el icono de diagnóstico "Error en un componente subordinado", se aplica
la regla siguiente: El icono de diagnóstico del componente de hardware subordinado tiene
prioridad por encima del icono de comparación. En consecuencia, el icono de comparación
solo se muestra si no existe ningún error en los componentes de hardware subordinados.

Visualización de errores de software en el árbol del proyecto
● Detrás de cada bloque se muestra el icono de comparación correspondiente.
● Detrás de cada carpeta en la que solo hay bloques se muestra el icono de diagnóstico "Error
de software en componente subordinado" cuando hay un error de software en por lo menos
uno de los bloques pertinentes.
● Si en un componente de hardware con componentes de software subordinados no hay
ningún error de hardware y hay un error en por lo menos un componente de software
subordinado, el icono de diagnóstico tiene el aspecto siguiente: el icono de diagnóstico del
componente de hardware se representa atenuado y, además, en el extremo inferior
derecho se muestra el icono de diagnóstico "Error de software en componente
subordinado".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3609

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Iconos combinados de diagnóstico y comparación
La siguiente tabla muestra ejemplos de iconos que se visualizan en el icono de diagnóstico.
Icono

Significado
La carpeta contiene objetos con versiones online y offline diferentes (solo en el árbol
del proyecto).
El objeto solo existe online.

Iconos de estado operativo de CPU y CP
La tabla siguiente muestra los iconos posibles y sus respectivos estados operativos.
Icono

Estado operativo
RUN
STOP
ARRANQUE
PARADA
AVERÍA
Estado operativo desconocido
El módulo configurado no soporta la indicación del estado operativo.

Nota
Si en una CPU está activado el forzado permanente, se visualiza una F roja con fondo rosa
debajo y a la derecha del icono de estado operativo.

Marcado en color de puertos y cables Ethernet
La tabla siguiente muestra los colores posibles y su respectivo significado.
Color

Significado
No hay fallos ni mantenimiento necesario
Offline
Mantenimiento solicitado
Fallo de comunicación o error de topología
No aptro para diagnóstico

3610

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.1.4

Iniciar la vista online y de diagnóstico

Resumen de las opciones para iniciar la vista Online y diagnóstico
La vista Online y diagnóstico de un módulo que debe diagnosticarse se puede abrir desde los
siguientes puntos:
● Resumen
● Árbol del proyecto
● Vista de dispositivos
● Vista general de dispositivos
● Vista de redes
● Vista general de redes
● Vista topológica
● Vista topológica general
A continuación se muestra con ejemplos cómo hay que proceder.

Requisitos
El proyecto con el módulo que debe diagnosticarse está abierto.
Nota
Este requisito no es imprescindible si se llama la vista Online y diagnóstico desde el árbol del
proyecto después de haber determinado los dispositivos accesibles.

Procedimiento
Para iniciar la vista Online y diagnóstico de un módulo, proceda del siguiente modo:
1. Abra la carpeta de dispositivos correspondiente en el árbol del proyecto.
2. Haga doble clic en "Online y diagnóstico".
O bien:
1. Seleccione la carpeta de dispositivos correspondiente en el árbol del proyecto.
2. Elija el comando "Online y diagnóstico" del menú contextual o del menú principal "Online".
O bien:
1. Abra la carpeta "Accesos online" en el árbol del proyecto.
2. Abra la carpeta de la interfaz a través de la que desea establecer la conexión online.
3. Haga doble clic en "Mostrar /actualizar dispositivos accesibles".
4. Seleccione el módulo que debe diagnosticarse.
5. Elija el comando "Online y diagnóstico" del menú contextual o del menú principal "Online".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3611

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
O bien:
1. Abra la carpeta "Módulos locales" en el árbol del proyecto.
2. Seleccione el dispositivo en cuestión o el módulo que debe diagnosticarse.
3. Elija el comando "Online y diagnóstico" del menú contextual o del menú principal.
O bien:
1. Abra la vista de dispositivos de la configuración de dispositivos.
2. Seleccione el módulo que debe diagnosticarse.
3. Elija el comando "Online y diagnóstico" del menú contextual o del menú principal "Online".
O bien:
1. Abra la vista de dispositivos de la configuración de dispositivos.
2. Establezca una conexión online con el módulo que se va a diagnosticar.
3. Haga doble clic sobre el icono de diagnóstico situado encima del módulo.
O bien:
1. Abra la vista de redes de la configuración de dispositivos.
2. Seleccione la estación con el módulo que debe diagnosticarse.
3. Elija el comando "Online y diagnóstico" del menú contextual o del menú principal "Online".
O bien:
1. Abra la vista topológica de la configuración de dispositivos.
2. Establezca una conexión online con el módulo que se va a diagnosticar.
3. Haga doble clic en el icono de diagnóstico correspondiente al módulo dentro de la vista
topológica general.

Resultado
Se inicia la vista Online y diagnóstico del módulo que debe diagnosticarse. Si previamente
existía una conexión online con la CPU correspondiente, la barra de título de la vista Online y
diagnóstico se resaltará en color naranja.
Nota
Si al iniciar la vista Online y diagnóstico no existe ninguna conexión online, no aparecerá
información online y los campos correspondientes estarán vacíos.

3612

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.1.5

Activar la Task Card "Herramientas online"

Activar la Task Card "Herramientas online"
Esta Task Card se activa del siguiente modo:
1. Inicie la vista online y de diagnóstico.
2. Haga clic en la Task Card "Herramientas online".
O bien:
1. Inicie la vista de dispositivos.
2. Haga clic en la Task Card "Herramientas online".
O bien:
1. Inicie la vista de redes.
2. Haga clic en la Task Card "Herramientas online".

2.1.2

Mostrar valores actuales y no modificables de propiedades de módulos
parametrizables

2.1.2.1

Mostrar propiedades generales e información relevante para la instalación relacionadas
con un módulo

¿Dónde está la información buscada?
Las propiedades generales y la información relevante para la instalación relativas a un módulo
están en el grupo "General" de la carpeta "Diagnóstico" de la vista Online y diagnóstico del
módulo que debe diagnosticarse.

Estructura del grupo "General"
El grupo "General" incluye las áreas siguientes:
● Módulo
● Información del módulo
● Información del fabricante

Área "Módulo"
Esta área muestra los datos siguientes del módulo:
● Nombre abreviado, p. ej. CPU 1214C DC/DC/DC
● Referencia

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3613

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
● Hardware
● Firmware
● Versión del TIA Portal
Nota
Versión del TIA Portal
La versión del TIA Portal indicada es la versión mínima necesaria para abrir los bloques
cargados en el dispositivo o cargarlos en la ES (Engineering Station). Eso significa que no
tiene que coincidir necesariamente con la versión con la que se cargaron los bloques en el
dispositivo.
Ejemplo ficticio: Se ha instalado en la ES la versión V14.0 SP1 del TIA Portal y se crea un
proyecto nuevo. Este proyecto obtiene la versión del proyecto V14.0. Se carga el proyecto
(y con él su versión del proyecto) en la CPU. Se muestra la versión del proyecto, es decir,
V14.0.
● Rack
● Slot

Área "Información del módulo"
Esta área muestra los datos siguientes del módulo que se han ajustado al configurar el
hardware:
● Nombre del módulo
● Fecha de montaje (no se muestra en todos los módulos)
● Información adicional (no se muestra en todos los módulos)

Área "Información del fabricante"
Esta área muestra los datos siguientes del módulo:
● Fabricante
● Número de serie
● Perfil: ID de perfil en formato de número hexadecimal
Nota
Encontrará el nombre del perfil correspondiente en la "Profile ID Table" en PROFIBUS
International (véase "www.profibus.com").
● Detalles del perfil: tipo específico del perfil en formato de número hexadecimal
Nota
Encontrará el nombre correspondiente al tipo específico del perfil en la "Profile Specific
Type Table" en PROFIBUS International (véase "www.profibus.com").

3614

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.2.2

Mostrar los tiempos de ciclo parametrizados

¿Dónde está la información buscada?
Encontrará la información buscada en los lugares siguientes:
● En el grupo "Tiempo de ciclo" de la carpeta "Diagnóstico" de la vista online y de diagnóstico
del módulo que debe diagnosticarse
● En la paleta "Tiempo de ciclo" de la Task Card "Herramientas online"

Estructura del grupo "Tiempo de ciclo" de la carpeta "Diagnóstico" de la vista online y de diagnóstico
El grupo "Tiempo de ciclo" incluye las áreas siguientes:
● Diagrama del tiempo de ciclo (vista gráfica de los tiempos de ciclo parametrizados y
medidos)
● Tiempo de ciclo parametrizado (visualización de los tiempos de ciclo parametrizados en
forma de valores absolutos)
● Tiempos de ciclo medidos (visualización de los tiempos de ciclo medidos en forma de
valores absolutos)

Estructura de la paleta "Tiempo de ciclo" de la Task Card "Herramientas online"
La paleta "Tiempo de ciclo" muestra el diagrama del tiempo de ciclo y debajo de éste los
tiempos de ciclo medidos, en forma de valores absolutos.

Tiempos de ciclo parametrizados
En el diagrama del tiempo de ciclo y en el área "Tiempo de ciclo parametrizado" se muestran
los siguientes tiempos de ciclo parametrizados:
● Tiempo de ciclo mínimo
● Tiempo de vigilancia del ciclo
En el diagrama del tiempo de ciclo, el tiempo de ciclo mínimo y el tiempo de vigilancia de ciclo
se corresponden con las dos marcas del eje de tiempo.
En el área "Tiempo de ciclo parametrizado" se muestran los tiempos de ciclo parametrizados
en forma de valores absolutos.

2.1.2.3

Mostrar interfaces y propiedades de interfaces de un módulo

¿Dónde se encuentra la información buscada?
Las interfaces y las propiedades de interfaces de un módulo están en el siguiente grupo de la
carpeta "Diagnóstico" de la vista online y de diagnóstico del módulo que debe diagnosticarse:
● Interfaz PROFINET

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3615

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Grupo "Interfaz PROFINET"
Este grupo se divide en las siguientes áreas:
● "Dirección Ethernet" con las subáreas "Conexión de red" y "Parámetro IP"
● "Puertos"

Subárea "Conexión de red" del área "Dirección Ethernet"
Esta subárea muestra los datos siguientes del módulo:
● Dirección MAC:
Dirección MAC de la interfaz.
La dirección MAC consta de dos partes. La primera parte ("dirección MAC básica")
identifica al fabricante (Siemens, 3COM, ...). La segunda parte de la dirección MAC
diferencia los distintos dispositivos Ethernet. Cada módulo Ethernet tiene asignada una
dirección MAC unívoca.

Subárea "Parámetro IP" del área "Dirección Ethernet"
Esta subárea muestra los datos siguientes del módulo:
● Dirección IP:
Dirección de protocolo de Internet del dispositivo conectado al bus (TCP/IP)
● Máscara de subred:
La máscara de subred indica qué parte de la dirección IP establece la pertenencia a una
determinada subred.
● Router predeterminado:
Si la subred está conectada a otras subredes con un router, debe conocerse la dirección IP
del router estándar. Sólo de este modo puede transmitirse un datagrama con una dirección
de subred divergente.
● Configuración IP:
Identificación de la ruta a través de la cual el dispositivo ha recibido su configuración IP
(dirección IP, máscara de subred, router predeterminado).
Identificador

Significado

0

Dirección IP no inicializada

1

Mediante configuración (es decir, mediante los ajustes que se han cargado en el dis‐
positivo desde la vista de dispositivos o la vista de redes)

2

Mediante el grupo "Asignar dirección IP" de la vista online y de diagnóstico

3

Mediante servidor DHCP (es decir, los parámetros IP se han obtenido a través de un
servicio especial desde un servidor DHCP (Dynamic Host Configuration Protocol) y se
han asignado por un tiempo limitado)

4

Dirección IP ajustada por un programa de usuario

5

Origen de la dirección IP desconocido

● Tiempo de ajuste IP:
Sello de tiempo de la última modificación de la dirección IP directamente desde la conexión
Ethernet del módulo

3616

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Área "Puertos"
Esta área muestra los datos siguientes del módulo:
● Puertos Ethernet
Propiedades físicas de la interfaz PROFINET
Propiedad de la interfaz
PROFINET

Significado

N.º de puerto

Número de puerto. Entre paréntesis se indica el nombre abreviado de la
interfaz (X + n.º de la interfaz) y el puerto (P + n.º del puerto). Una "R" en el
nombre abreviado de un puerto significa que se trata de un puerto anillo.

Estado

Visualización del estado del LED LINK correspondiente al puerto:
● Si se muestra "OK", hay otro dispositivo (p. ej. un switch) conectado al
puerto, y la conexión física existe.
● Si se muestra "Desconectado", no hay ningún otro dispositivo
conectado al puerto.
● Si se muestra "Desactivado", el acceso al puerto está cerrado.

Configuración

● "Automática" en caso de configuración de red automática del dispositivo
● Configuración de red en lo que respecta a la velocidad y el método de
transferencia en caso de configuración de red manual del dispositivo

Modo de operación

Configuración de red en lo que respecta a la velocidad y el método de
transferencia

Al seleccionar una línea en la tabla de puertos, se muestra información de ayuda adicional
sobre el puerto en cuestión.

2.1.2.4

Mostrar controladores IO que accedan a módulos de un Shared Device

¿Dónde se encuentra la información buscada?
Los controladores IO que acceden a módulos de un Shared Device se muestran en la vista
Online y diagnóstico del módulo de interfaz del Shared Device en la carpeta "Diagnóstico", en
el área siguiente del grupo "Interfaz PROFINET":
● Controlador IO

Consulte también
Información importante sobre los Shared Devices (Página 3250)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3617

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.2.5

Visualización de las propiedades del dominio Sync de un dispositivo PROFINET

¿Dónde se encuentra la información buscada?
Las propiedades del dominio Sync de un dispositivo PROFINET están en la vista Online y de
diagnóstico del dispositivo que debe diagnosticarse, dentro de la carpeta "Diagnóstico" en el
área siguiente del grupo "Interfaz PROFINET":
● Dominio

Área "Dominio"
Esta área se divide en las subáreas siguientes:
● Dominio Sync
● Dominio MRP

¿Qué es un dominio Sync?
Un dominio Sync es un grupo de dispositivos PROFINET que se sincronizan con un tiempo de
ciclo común. Un único dispositivo tiene la función de maestro Sync (generador de impulsos) y
los demás tienen la función de esclavos Sync. El maestro Sync es casi siempre un controlador
IO o un switch.
Los dispositivos PROFINET no sincronizados no forman parte de un dominio Sync.

Subárea "Dominio Sync" del área "Dominio"
Esta subárea muestra las propiedades siguientes del dominio Sync:
● Nombre:
Nombre del dominio Sync
● Función:
función del dispositivo PROFINET en el dominio Sync. Son posibles las funciones
siguientes:
– maestro Sync
– esclavo Sync
● Intervalo de sincronización:
intervalo en el que se ejecuta la sincronización
● Tiempo de ciclo de emisión
el intervalo de emisión mínimo posible para el intercambio de datos
● Precisión de jitter del tiempo de ciclo de emisión
● Ancho de banda reservado para la comunicación cíclica

3618

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.2.6

Visualización de las propiedades del dominio MRP de un dispositivo PROFINET

¿Dónde se encuentra la información buscada?
Las propiedades del dominio MRP de un dispositivo PROFINET están en la vista Online y de
diagnóstico del dispositivo que debe diagnosticarse, dentro de la carpeta "Diagnóstico" en el
área siguiente del grupo "Interfaz PROFINET":
● Dominio

Área "Dominio"
Esta área se divide en las subáreas siguientes:
● Dominio Sync
● Dominio MRP

¿Qué es un dominio MRP?
Mediante el denominado Media Redundancy Protocol (MRP) es posible construir redes
redundantes. Los trayectos de transmisión redundantes (topología de anillo) se encargan de
proporcionar una ruta de comunicación alternativa en caso de que falle una vía de
comunicación. Los dispositivos PROFINET que forman parte de la red redundante componen
un dominio MRP.

Subárea "Dominio MRP" del área "Dominio"
Esta subárea muestra las propiedades siguientes del dominio MRP:
● Nombre:
nombre del dominio MRP
● Función:
función del dispositivo PROFINET en el dominio MRP. Son posibles las funciones
siguientes:
– Manager
– Manager (auto)
– Cliente
– No es estación del anillo
● Puerto en anillo 1:
El puerto del dispositivo PROFINET que tiene la propiedad "Puerto en anillo 1".
● Puerto en anillo 2:
El puerto del dispositivo PROFINET que tiene la propiedad "Puerto en anillo 2".
● Estado del anillo MRP:
Aquí se indica si el anillo está interrumpido (estado "abierto") o no (estado "cerrado").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3619

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.2.7

Ver el firmware actual de un módulo

Ver firmware
Es posible ver el firmware instalado actualmente en un módulo.

Requisitos
● El módulo soporta actualización de firmware.
● El módulo está conectado online.

Procedimiento
Para ver el firmware actual, proceda del siguiente modo:
1. Abra el módulo en la vista online y de diagnóstico.
2. Elija el grupo "Actualización de firmware" de la carpeta "Funciones".
3. Puede consultar el firmware actual en el apartado "Firmware" del área "Datos online".

2.1.3

Mostrar valores actuales de propiedades de módulos dinámicas

2.1.3.1

Mostrar los tiempos de ciclo medidos

¿Dónde se encuentra la información buscada?
Encontrará los tiempos de ciclo medidos en los lugares siguientes:
● En la vista Online y diagnóstico del módulo que se desea diagnosticar, en la carpeta
"Diagnóstico" del grupo "Tiempo de ciclo"
● En la paleta "Tiempo de ciclo" de la Task Card "Herramientas online"

Estructura del grupo "Tiempo de ciclo" en la carpeta "Diagnóstico" de la vista Online y diagnóstico
El grupo "Tiempo de ciclo" incluye las áreas siguientes:
● Diagrama del tiempo de ciclo (vista gráfica de los tiempos de ciclo parametrizados y
medidos)
● Tiempo de ciclo parametrizado (visualización de los tiempos de ciclo parametrizados en
forma de valores absolutos)
● Tiempos de ciclo medidos (visualización de los tiempos de ciclo medidos en forma de
valores absolutos)

3620

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Estructura de la paleta "Tiempo de ciclo" de la Task Card "Herramientas online"
La paleta "Tiempo de ciclo" muestra el diagrama del tiempo de ciclo y debajo de éste los
tiempos de ciclo medidos, en forma de valores absolutos.

Visualización gráfica de los tiempos de ciclo medidos
En el diagrama del tiempo de ciclo se muestran los siguientes tiempos de ciclo medidos:
● Tiempo de ciclo más corto: duración del ciclo más corto desde la última transición de STOP
a RUN.
Corresponde en el diagrama a la flecha gris discontinua de la izquierda.
● Tiempo de ciclo actual/último: duración del último ciclo.
Corresponde en el diagrama a la flecha verde. Si el actual/último tiempo de ciclo sobrepasa
el tiempo de vigilancia del ciclo, la flecha se vuelve roja.
Nota
Si la duración del último ciclo se aproxima al tiempo de vigilancia del ciclo, es posible que
éste se sobrepase. Dependiendo del tipo de CPU, de la parametrización y del programa de
usuario, la CPU puede pasar al estado operativo STOP. La observación de las variables del
programa, p. ej., prolonga el tiempo de ciclo.
Si el ciclo dura más del doble del tiempo de vigilancia del ciclo y el tiempo de vigilancia del
ciclo no se vuelve a iniciar en el programa de usuario (llamando la instrucción avanzada
RE_TRIGR), la CPU pasa a STOP.
● Tiempo de ciclo más largo: duración del ciclo más largo desde la última transición de STOP
a RUN.
Corresponde en el diagrama a la flecha azul discontinua de la derecha.
Entre las dos flechas discontinuas se extiende una franja azul que corresponde a la totalidad
del rango de los tiempos de ciclo medidos. Si un tiempo de ciclo medido es mayor que el tiempo
de vigilancia del ciclo, se muestra en rojo la parte de la franja que queda fuera de los límites
parametrizados.

Visualización de los tiempos de ciclo medidos en forma de valores absolutos
En el área "Tiempos de ciclo medidos" y en la paleta "Tiempo de ciclo" se muestran los
siguientes tiempos de ciclo medidos:
● Tiempo de ciclo más corto desde la última transición de STOP a RUN
● Tiempo de ciclo último o actual
● Tiempo de ciclo más largo desde la última transición de STOP a RUN

2.1.3.2

Mostrar el estado actual de los LEDs de una CPU

¿Dónde está la información buscada?
El estado actual de los LEDs de una CPU está en el área de visualización de la paleta "Panel
de control de la CPU" de la Task Card "Herramientas online".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3621

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Área de visualización de la paleta "Panel de control de la CPU" de la Task Card "Herramientas online"
Esta área contiene los indicadores siguientes:
● Nombre de la estación y tipo de CPU (nombre abreviado)
● RUN / STOP (equivale al LED "RUN / STOP" de la CPU)
● ERROR (equivale al LED "ERROR" de la CPU)
● MAINT (equivale al LED "MAINT" de la CPU)

2.1.3.3

Mostrar el nivel de llenado de todos los tipos de memoria de una CPU

¿Dónde se encuentra la información buscada?
Encontrará el nivel de llenado de todos los tipos de memoria de una CPU en los lugares
siguientes:
● En el área de visualización del grupo "Memoria" de la carpeta "Diagnóstico" de la vista
Online y diagnóstico del módulo que debe diagnosticarse
● En el área de visualización de la paleta "Memoria" de la Task Card "Herramientas online"

Área de visualización del grupo "Memoria" de la carpeta "Diagnóstico" de la vista online y de diagnóstico
Esta área contiene la carga de memoria actual del módulo correspondiente, así como detalles
de las distintas áreas de memoria.
La carga de memoria se muestra tanto en forma de diagrama de barras como porcentualmente
en forma de valor numérico.
Se muestran las cargas de memoria siguientes:
● Memoria de carga
Si no hay ninguna Memory Card insertada, se mostrará la memoria de carga interna.
Si hay una Memory Card insertada, el sistema operativo utiliza exclusivamente la memoria
de carga insertada, que es la que se muestra aquí.
● Memoria de trabajo
● Memoria remanente

Área de visualización de la paleta "Memoria" de la Task Card "Herramientas online"
Esta área contiene la carga actual de memoria del módulo correspondiente. La memoria libre
se muestra tanto en forma de diagrama de barras como porcentualmente en forma de valor
numérico. El valor numérico se redondea a un valor entero.
Nota
Si un área de memoria tiene una ocupación inferior al 1 %, en la parte libre de dicha área se
mostrará "99 %".

3622

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
Se muestran las cargas de memoria siguientes:
● Memoria de carga
Si no hay ninguna Memory Card insertada, se mostrará la memoria de carga interna.
Si hay una Memory Card insertada, el sistema operativo utiliza exclusivamente la memoria
de carga insertada, que es la que se muestra aquí.
● Memoria de trabajo
● Memoria remanente

Consulte también
Memoria de carga (Página 1514)
Memoria de trabajo (Página 1515)
Áreas de memoria remanentes (Página 1517)

2.1.3.4

Visualización del nivel de llenado de todos los tipos de memoria de una CPU S7-1500

¿Dónde se encuentra la información buscada?
Encontrará el nivel de llenado de todos los tipos de memoria de una CPU S7-1500 en los
lugares siguientes:
● En el área de visualización del grupo "Memoria" de la carpeta "Diagnóstico" de la vista
Online y diagnóstico del módulo que debe diagnosticarse
● En el área de visualización de la paleta "Memoria" de la Task Card "Herramientas online"

Área de visualización del grupo "Memoria" de la carpeta "Diagnóstico" de la vista online y de diagnóstico
Esta área contiene la carga de memoria actual del módulo correspondiente, así como detalles
de las distintas áreas de memoria.
La carga de memoria se muestra tanto en forma de diagrama de barras como porcentualmente
en forma de valor numérico.
Se muestran las cargas de memoria siguientes:
● Memoria de carga
Nota
La memoria de carga se encuentra en la Memory Card SIMATIC.
● Memoria de trabajo para código: memoria de trabajo para código de programa
● Memoria de trabajo para datos: memoria de trabajo para bloques de datos
● Memoria remanente

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3623

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Área de visualización de la paleta "Memoria" de la Task Card "Herramientas online"
Esta área contiene la carga actual de memoria del módulo correspondiente. La memoria libre
se muestra tanto en forma de diagrama de barras como porcentualmente en forma de valor
numérico. El valor numérico se redondea a un valor entero.
Nota
Si un área de memoria tiene una ocupación inferior al 1 %, en la parte libre de dicha área se
mostrará "99 %".
Se muestran las cargas de memoria siguientes:
● Memoria de carga
Nota
La memoria de carga se encuentra en la Memory Card SIMATIC.
● Memoria de trabajo para código: memoria de trabajo para código de programa
● Memoria de trabajo para datos: memoria de trabajo para bloques de datos
● Memoria remanente

2.1.4

Comprobar los fallos de un módulo

2.1.4.1

Determinar el estado de diagnóstico de un módulo

¿Dónde se muestra el estado de diagnóstico de un módulo?
El estado de diagnóstico de un módulo se muestra en el grupo "Estado de diagnóstico" de la
carpeta "Diagnóstico" de la vista Online y diagnóstico del módulo.
El grupo "Estado de diagnóstico" incluye las áreas siguientes:
● Estado
● Diagnóstico estándar (en S7-300 y S7-400 solo en módulos no CPU)

3624

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Área "Estado"
En esta área se muestra la siguiente información de estado:
● Estado del módulo desde el punto de vista de la CPU, p. ej.:
– Módulo existente y en buen estado.
– Módulo averiado.
Si el módulo tiene un fallo y se ha habilitado la alarma de diagnóstico en la configuración,
se mostrará el estado "Módulo averiado".
– Módulo configurado pero no existente.
Ej.: no hay datos de diagnóstico disponibles, porque la configuración online actual
difiere de la configuración offline.
● Se han detectado diferencias entre el módulo configurado y el módulo enchufado. Se
mostrará la referencia del tipo teórico y real, siempre que sea posible determinarla.
El volumen de información visualizada depende del módulo seleccionado.

Área "Diagnóstico estándar"
En esta área se muestra la siguiente información de diagnóstico de módulos no CPU:
● Averías internas y externas que se refieren a todo el módulo
● Eventos de diagnóstico relacionados
Ejemplos de dicha información de diagnóstico:
● Fallo de todo el respaldo
● Módulo averiado
Nota
Alarmas de diagnóstico
Sólo es posible notificar una alarma de diagnóstico a la CPU si el módulo es apto para esta
función y se ha habilitado la alarma de diagnóstico.
La visualización de la alarma de diagnóstico es una captura instantánea. Los fallos
esporádicos de un módulo se detectan en el búfer de diagnóstico de la CPU
correspondiente.

2.1.4.2

Efectuar un diagnóstico de comunicación de los puertos PROFINET

¿Cómo se muestran los errores específicos de puerto de los puertos PROFINET?
Los errores específicos de puertos de los puertos PROFINET se muestran en el apartado
"Interfaz PROFINET" del grupo "Diagnóstico de comunicación" de la carpeta "Diagnóstico" de
la vista online y de diagnóstico del módulo que debe diagnosticarse.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3625

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Estructura del grupo "Diagnóstico de comunicación"
El grupo "Diagnóstico de comunicación" incluye las áreas siguientes:
● Tabla de errores específicos de puertos
● Campo de texto "Detalles del evento"
● Campo de texto "Ayuda del evento"

Estructura de la tabla de errores específicos de puertos
Cada línea de la tabla de errores corresponde a un error.
La tabla contiene las columnas siguientes:
● Nombre: N.º de puerto y denominación de puerto, así como el icono de diagnóstico
● Error: Descripción del error sucedido en ese puerto

Campo de texto "Detalles"
Al seleccionar una línea en la tabla de errores, el campo de texto "Detalles" contiene
información acerca del error correspondiente (si existe).

Campo de texto "Ayuda para la línea de diagnóstico seleccionada"
Al seleccionar una línea en la tabla de errores, el campo de texto "Ayuda para la línea de
diagnóstico seleccionada" contiene información de ayuda acerca del error correspondiente (si
existe).

2.1.4.3

Diagnosticar componentes de PROFINET IO

¿Cómo se diagnostican los componentes de PROFINET IO?
El diagnóstico de los componentes PROFINET IO se realiza en el grupo "Diagnóstico de
PROFINET IO" del apartado "Interfaz PROFINET" de la carpeta "Diagnóstico" de la vista
online y de diagnóstico.

Grupo "Diagnóstico de PROFINET IO"
En esta área se muestran textos de diagnóstico, específicos de fabricante, para el dispositivo
IO o para el módulo seleccionado del dispositivo IO.
Si puede leerse el diagnóstico desde el controlador IO, se muestran errores de comunicación
y errores de configuración (diferencia online/offline).

3626

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.4.4

Leer el búfer de diagnóstico de una CPU

¿Dónde se lee el búfer de diagnóstico de una CPU?
El búfer de diagnóstico de una CPU se lee en el grupo "Búfer de diagnóstico" de la carpeta
"Diagnóstico" de la vista Online y diagnóstico.

Estructura del grupo "Búfer de diagnóstico"
El grupo "Búfer de diagnóstico" incluye las áreas siguientes:
● "Eventos"
● "Configuración"

Búfer de diagnóstico
El búfer de diagnóstico sirve de archivo de registro de los eventos de diagnóstico que se han
producido en la CPU y los módulos asignados. Dichos eventos se registran siguiendo el orden
de aparición, siendo el más reciente el que se representa en primer lugar.

Área "Eventos"
El área "Eventos" incluye los elementos siguientes:
● Casilla de verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de la PG/
el PC"
● Tabla de eventos
● Botón "Congelar lista" o "Descongelar"
● Detalles sobre el evento: N.º de evento, ID de evento, módulo y, en su caso, nombre de
estación o dispositivo, rack/slot, descripción, ayuda del evento, identificador de instalación,
identificador de situación, información entrante/saliente, tipo de evento
● Botones "Abrir en el editor", "Guardar como ..."

Casilla de verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de la PG/el PC"
Si no se ha activado la casilla de verificación, se visualizarán las entradas del búfer de
diagnóstico con la hora del módulo.
Si se ha activado la casilla de verificación, las entradas del búfer de diagnóstico se visualizarán
con la hora resultante de la fórmula siguiente:
Hora visualizada = hora del módulo + offset de zona horaria de la PG / el PC
Para ello es imprescindible que la hora del módulo sea idéntica a la hora UTC.
Este ajuste se utiliza cuando se desea ver la hora local de la PG / el PC como hora en las
entradas del búfer de diagnóstico del módulo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3627

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
Si se activa o desactiva la casilla de verificación, se adaptarán inmediatamente las
indicaciones horarias de las entradas del búfer de diagnóstico.
Nota
Si el programa utiliza la instrucción "WR_SYS_T" o si se ajusta el reloj en tiempo real de la CPU
a través de un panel de operador y no se emplea UTC, se recomienda desactivar la casilla de
verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de la PG/el PC". En este
caso, solo se tomará en consideración la hora del módulo.

Tabla de eventos
En la tabla se muestra la siguiente información para cada evento de diagnóstico:
● Número correlativo de la entrada
La primera entrada contiene el evento más reciente.
● Fecha y hora del evento de diagnóstico
Si no se indican ni fecha ni hora, significa que el módulo no tiene reloj integrado.
● Nombre abreviado del evento y, dado el caso, la reacción de la CPU
Nota
Si no es posible determinar un parámetro individual de un texto, en su lugar se indicará la
cadena de caracteres "###".
Si todavía no existe ningún texto de visualización para módulos o eventos nuevos, se
indicarán los números de los eventos y los parámetros individuales en forma de valores
hexadecimales.
● Solo en las CPU S7-1200 y S7-1500: Símbolo para el tipo de evento
La tabla siguiente muestra los símbolos posibles y su respectivo significado.
Símbolo

Significado
Correcto (sin mantenimiento o sin fallos)
Mantenimiento necesario
Mantenimiento solicitado
Error

● Icono para la información entrante/saliente
La tabla siguiente muestra los iconos posibles y su respectivo significado.
Icono

Significado
Evento entrante
Evento saliente
Evento entrante para el que no existe ningún evento saliente independiente
Evento de diagnóstico definido por el usuario

3628

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
Es posible modificar el orden de las columnas de la tabla de eventos, así como modificar su
anchura y eliminarlas o volver a agregarlas individualmente. También pueden ordenarse del
siguiente modo: por número correlativo, por "Fecha y hora" y por "Evento".

Botón "Congelar lista" o "Descongelar"
El botón "Congelar lista" o "Descongelar" solo está activo si existe una conexión online con la
CPU.
El ajuste predeterminado es "Congelar lista".
Al hacer clic en el botón "Congelar lista" sucede lo siguiente:
● Se congela la visualización actual de las entradas del búfer de diagnóstico.
● La rotulación del botón cambia a "Descongelar".
Si se ha producido un error en la instalación, es posible que se produzcan eventos de
diagnóstico con una sucesión demasiado rápida. Esto provoca una velocidad de actualización
elevada de la visualización. En este caso, la congelación de la visualización permite examinar
las circunstancias con más detalle y tranquilidad.
Cuando la visualización está congelada y se pulsa el botón "Descongelar", sucede lo siguiente:
● La visualización de las entradas del búfer de diagnóstico vuelve a actualizarse.
● La rotulación del botón cambia a "Congelar lista".
Nota
Cuando se congela la visualización del búfer de diagnóstico, la CPU sigue registrando eventos
en el búfer.

Detalles sobre el evento
Al seleccionar una línea de la lista de eventos, se muestra información detallada sobre el
evento correspondiente:
● Número correlativo del evento en el búfer de diagnóstico
● ID de evento
● Módulo y, en su caso, nombre de estación o dispositivo
● Rack / slot
● Descripción del evento con información adicional dependiente del evento. Ejemplos de esta
información adicional:
– Comando que ha provocado el evento
– Transición de estado operativo provocado por el evento de diagnóstico
● Ayuda del evento: El evento seleccionado se describe con más detalle y, dado el caso, se
indican soluciones. Para los eventos salientes se muestra el texto "Evento saliente: no se
requiere ninguna acción del usuario".
● Solo en las CPU S7-1200 y S7-1500: identificador de instalación, identificador de situación

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3629

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
● Información sobre si se trata de un evento entrante o saliente
● Tipo de evento. Son posibles los siguientes tipos de evento:
– Correcto (sin mantenimiento o sin fallos)
– Mantenimiento necesario
– Mantenimiento solicitado
– Error

Botón "Abrir en el editor"
La tabla siguiente muestra cuándo está activo el botón "Abrir bloque" y qué función alberga.
¿Cuándo está activo el botón "Abrir en el editor"?

¿Qué sucede al hacer clic en este botón?

Cuando en el evento de diagnóstico se hace referencia a una
dirección relativa de un bloque.
Esta es la dirección del comando que causa el evento.

La función "Abrir en el editor" abre el bloque referenciado en
la vista offline por la instrucción de programación que causa
el error. Esto permite comprobar el código fuente del bloque
en el lugar indicado, modificarlo en caso necesario y, segui‐
damente, volver a cargarlo en la CPU.

Cuando el evento de diagnóstico ha sido desencadenado por
un módulo.

La función "Abrir en el editor" abre la vista de dispositivos del
módulo en cuestión.

Botón "Guardar como ..."
Si se hace clic en este botón, el contenido del búfer de diagnóstico se guardará en un archivo
de texto. Como nombre de archivo se sugiere dependiendo del idioma "Diagnóstico" con la
extensión ".txt". aunque se puede cambiar.

Área "Configuración"
El área "Configuración" está compuesta por los siguientes elementos:
● Lista "Mostrar eventos"
● Botón "Aplicar configuración como predeterminada"
● Casilla de verificación "Visualizar información del evento en formato hexadecimal"

Lista "Mostrar eventos:"
En esta lista hay una casilla de verificación para cada clase de evento (predeterminado: Todas
las casillas de verificación están activadas.) Si se desactiva una casilla de verificación, dejan
de mostrarse en el área "Eventos" los eventos de la clase de evento correspondiente. Si vuelve
a activar la casilla de verificación, se mostrarán de nuevo los eventos correspondientes.

Botón "Aplicar configuración como predeterminada"
Si se hace clic en este botón, la configuración seguirá estando activa las próximas veces que
se abra la ficha "Eventos".

3630

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Casilla de verificación "Visualizar información del evento en formato hexadecimal"
Si se activa esta casilla de verificación, en la lista de eventos del área "Eventos" se muestra la
ID de evento en formato hexadecimal. Si se desactiva esta casilla de verificación, la
información del evento se muestra en forma de texto.

Consulte también
Principios básicos del búfer de diagnóstico (Página 3652)

2.1.4.5

Guardar datos de servicio

Finalidad
Durante el servicio técnico puede ser necesario que el Customer Support de SIEMENS le pida
información muy específica acerca del estado de un módulo de su instalación con fines de
diagnóstico.
Si se diera un caso de este tipo en su instalación, el Customer Support le solicitará que guarde
los datos de servicio del módulo y que le proporcione el archivo generado.

¿Dónde se guardan los datos de servicio de un módulo?
Los datos de servicio de un módulo se guardan en la vista Online y diagnóstico, en la carpeta
"Funciones" del grupo "Guardar datos de servicio"
El grupo "Guardar datos de servicio" consta de las áreas siguientes:
● Datos online
● Guardar datos de servicio

Área "Datos online"
Esta área muestra los datos siguientes del módulo:
● Referencia
● Versión del firmware
● Nombre del módulo (asignado durante la configuración del hardware).
● Rack
● Slot

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3631

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Área "Guardar datos de servicio"
Para generar un archivo con datos de servicio especiales y guardarlo, proceda del siguiente
modo:
1. Seleccione el lugar del sistema de archivos donde desea guardar el archivo:
– Puede utilizar la ruta predeterminada en el campo "Ruta".
– O puede hacer clic en el botón que tiene tres puntos. Se abrirá un cuadro de diálogo
donde debe especificar la ruta deseada y definir el nombre del archivo.
2. Haga clic en el botón "Guardar datos".

2.1.5

Modificar las propiedades de un módulo o de la PG/el PC

2.1.5.1

Cambiar el estado operativo de una CPU

Requisitos
Existe una conexión online con la CPU cuyo estado operativo debe cambiarse.

Procedimiento
Para cambiar el estado operativo de una CPU, proceda del siguiente modo:
1. Active la Task Card "Herramientas online" de la CPU.
2. En la paleta "Panel de control de la CPU", haga clic en el botón "RUN" si desea poner la
CPU al estado operativo RUN o en el botón "STOP" si desea poner la CPU al estado
operativo STOP.
Nota
Sólo está activo el botón que puede seleccionarse en el estado operativo actual de la CPU.
3. Responda la consulta de seguridad haciendo clic en "Aceptar".
O bien:
1. Abra el menú "Online".
2. Seleccione la opción de menú "Arrancar CPU" si desea poner la CPU en el estado operativo
RUN, o "Parar CPU" si desea poner la CPU en el estado operativo STOP.
Nota
Solo está activa la opción de menú que se puede seleccionar en el estado operativo actual
de la CPU.
3. Responda la consulta de seguridad haciendo clic en "Aceptar".

3632

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
O bien:
1. Haga clic en la barra de funciones en el botón "Arrancar CPU" si desea poner la CPU en el
estado operativo RUN, o "Parar CPU" si desea poner la CPU en el estado operativo STOP.
Nota
Solo está activo el botón que se puede seleccionar en el estado operativo actual de la CPU.
2. Responda la consulta de seguridad haciendo clic en "Aceptar".

Resultado
La CPU pasará al estado operativo deseado.

2.1.5.2

Ejecutar un borrado total

Requisitos
● Existe una conexión online con la CPU en la que debe realizarse el borrado total.
● Dicha CPU está en estado operativo STOP.
Nota
Si la CPU todavía está en estado operativo RUN, éste pasará a STOP tras responder
afirmativamente a una consulta de seguridad cuando se lance el borrado total.

Procedimiento
Para ejecutar un borrado total en una CPU, proceda del siguiente modo:
1. Active la Task Card "Herramientas online" de la CPU.
2. Haga clic en el botón "MRES" de la paleta "Panel de control de la CPU".
3. Responda la consulta de seguridad haciendo clic en "Aceptar".

Resultado
La CPU pasará al estado operativo STOP en caso necesario y se realizará el borrado total.

Consulte también
Principios básicos del borrado total (Página 1511)
Principios básicos del borrado total (Página 801)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3633

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.5.3

Determinar y ajustar la hora de una CPU

¿Dónde están las funciones buscadas?
La determinación y modificación de la hora de una CPU se realiza en el grupo "Ajustar hora"
de la carpeta "Funciones" de la vista online y de diagnóstico. Esto sólo es posible si existe una
conexión online.

Estructura del grupo "Ajustar hora"
El grupo "Ajustar hora" incluye las áreas siguientes:
● Área para leer y ajustar la hora
● Sistema horario (esta área no existe para la S7-1200 y no se tiene en cuenta aquí.)

Estructura del área de lectura y ajuste de la hora
Esta área está compuesta por los siguientes elementos:
● Hora PG/PC
Aquí se muestran la zona horaria ajustada y la fecha y la hora actuales de la PG / el PC.
● Hora del módulo
Aquí se muestran los valores de fecha y hora que ha leído el módulo (p. ej. CPU)
convertidos a hora local.
Si la casilla de verificación "Adoptar de PG / PC" está activada, al hacer clic en el botón
"Aplicar" se transferirán al módulo la fecha y la hora PG/PC convertida a hora UTC.
Si la casilla de verificación "Adoptar de PG / PC" está desactivada, es posible predeterminar
la fecha y hora del reloj integrado del módulo. Después de pulsar el botón "Aplicar", la fecha
y la hora convertida a UTC se transferirán al módulo.

2.1.5.4

Restablecer la configuración de fábrica de una CPU S7-1200

Requisitos
● No hay ninguna Memory Card insertada en la CPU.
● Existe una conexión online con la CPU cuya configuración de fábrica debe restablecerse.
● Dicha CPU está en estado operativo STOP.
Nota
Si la CPU todavía está en estado operativo RUN, se puede pasar a STOP tras responder
afirmativamente a una consulta de seguridad al iniciar el proceso de restablecimiento de la
configuración de fábrica.

3634

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
Para restablecer la configuración de fábrica de una CPU S7-1200, proceda del siguiente modo:
1. Abra la vista Online y diagnóstico de la CPU.
2. Elija el grupo "Restablecer configuración de fábrica" de la carpeta "Funciones".
3. Active el campo de opción "Conservar dirección IP" si desea mantener la dirección IP, o el
campo de opción "Restablecer dirección IP" si desea borrarla.
Nota
Los dos botones de opción mencionados solo aparecen si el módulo que se desea
restablecer tiene la capacidad de elegir entre mantener la dirección IP o borrarla.
4. Haga clic en el botón "Resetear".
5. Responda la consulta de seguridad haciendo clic en "Aceptar".

Resultado
El módulo pasará al estado operativo STOP en caso necesario y se restablecerá la
configuración de fábrica. Esto significa que:
● La memoria de trabajo, la memoria de carga interna y todas las áreas de operandos se
borrarán.
● Se restablecerán los valores predeterminados de todos los parámetros.
● El búfer de diagnóstico se borrará.
● La hora se inicializará.
● La dirección IP se conservará o borrará, según el ajuste que haya seleccionado.

2.1.5.5

Restablecer la configuración de fábrica de una CPU S7-1500

Requisitos
● Al abrir desde el contexto de proyecto el restablecimiento de las configuraciones de fábrica
debe existir una conexión online de la CPU afectada.
● Dicha CPU está en estado operativo STOP.
Nota
Si la CPU todavía está en estado operativo RUN, se puede pasar a STOP tras responder
afirmativamente a una consulta de seguridad al iniciar el proceso de restablecimiento de la
configuración de fábrica.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3635

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
Para restablecer la configuración de fábrica de una CPU S7-1500, proceda del siguiente modo:
1. Abra la vista Online y de diagnóstico de la CPU (desde el contexto de proyecto o mediante
"Dispositivos accesibles").
2. Elija el grupo "Restablecer configuración de fábrica" de la carpeta "Funciones".
3. Active el campo de opción "Conservar dirección IP" si desea mantener la dirección IP, o el
campo de opción "Restablecer dirección IP" si desea borrarla.
Nota
Con "Restablecer dirección IP" se borran todas las direcciones IP, independientemente de
cómo se ha establecido la conexión online.
Si hay una Memory Card insertada, la activación del botón de opción "Restablecer dirección
IP" tiene las repercusiones siguientes: las direcciones IP se borran y se restablece la
configuración de fábrica de la CPU. Seguidamente, la configuración guardada en la
Memory Card (incluida la dirección IP) se transfiere a la CPU (véase abajo). Si la Memory
Card se ha formateado o está vacía antes de restablecer la configuración de fábrica, no se
transferirá ninguna dirección IP a la CPU.
4. Haga clic en el botón "Resetear".
5. Responda la consulta de seguridad haciendo clic en "Aceptar".

Resultado
El módulo pasará al estado operativo STOP en caso necesario y se restablecerá la
configuración de fábrica. Esto significa que:
● La memoria de trabajo, la memoria remanente del sistema y todas las áreas de operandos
se borrarán.
● Se restablecerán los valores predeterminados de todos los parámetros.
● El búfer de diagnóstico se borrará.
● La hora se inicializará.
● Los datos I&M se borrarán, excepto los datos I&M0.
● Los contadores de horas de funcionamiento se inicializarán.
● La dirección IP se conservará o borrará, según el ajuste que haya seleccionado.
● Si antes de restablecer la configuración de fábrica había insertada una Memory Card, la
configuración (hardware y software) guardada en ella se cargará en la CPU.

2.1.5.6

Restablecer la configuración de fábrica de un dispositivo PROFINET IO

Requisitos
● Debe existir una conexión online con el dispositivo PROFINET IO cuya configuración se
quiere restablecer.

3636

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
Para restablecer la configuración de fábrica de un dispositivo PROFINET, proceda del
siguiente modo:
1. Abra la vista Online y diagnóstico del dispositivo (desde el contexto del proyecto o mediante
"Dispositivos accesibles").
2. En la carpeta "Funciones", elija el grupo "Restablecer configuración de fábrica".
3. Active el botón de opción "Conservar datos I&M" o el botón de opción "Borrar datos I&M"
dependiendo de si desea conservar o borrar los datos de identificación y mantenimiento
IM0 a IM3 en el dispositivo.
4. Haga clic en el botón "Resetear".
5. Responda a la consulta de seguridad haciendo clic en "OK".
Si el dispositivo PROFINET IO reiniciado soporta el comando Reset-to-Factory según
PROFINET V2.3, se restablecerá su nombre de dispositivo PROFINET, su dirección IP y
los parámetros SNMP (SNMP: Simple Network Management Protocol). Si los datos de
identificación y mantenimiento se conservan o borran depende de la sección que haya
realizado en el paso 3.
El procedimiento de restablecimiento de la configuración de fábrica se ha completado.
6. Si, por lo contrario, el dispositivo PROFINET IO cuya configuración se quiere restablecer no
soporta el comando Reset-to-Factory conforme a PROFINET V2.3, aparece un mensaje
indicando que si se restablece la configuración de fábrica pueden perderse todos los datos
del módulo.
Confirme la consulta de seguridad. Al hacerlo se restablecerá la configuración de fábrica.
Si en el paso 3 ha seleccionado "Borrar datos I&M", los datos de identificación y
mantenimiento IM0 a IM3 se borrarán al restablecer la configuración de fábrica.
Si en el paso 3 ha seleccionado "Conservar datos I&M", también es posible que los datos
de identificación y mantenimiento IM0 a IM3 se borren al restablecer la configuración de
fábrica. En este caso, el restablecimiento de la configuración de fábrica depende del
módulo.

Resultado
En el dispositivo PROFINET IO se restablece la configuración de fábrica. Los datos que se
borrarán en ese caso dependerán de los factores arriba indicados.

2.1.5.7

Formateado de una Memory Card S7-1500

Requisitos
● Al abrir desde el contexto de proyecto el formateado de la Memory Card debe existir una
conexión online de la CPU afectada.
● Dicha CPU está en estado operativo STOP.
Nota
Si la CPU todavía está en estado operativo RUN, se puede pasar a STOP tras responder
afirmativamente a una consulta de seguridad al iniciar el proceso de formateado.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3637

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
Para formatear una Memory Card S7-1500, proceda del siguiente modo:
1. Abra la vista Online y de diagnóstico de la CPU (desde el contexto de proyecto o mediante
"Dispositivos accesibles").
2. Elija el grupo "Formatear Memory Card" de la carpeta "Funciones".
3. Haga clic en el botón "Formatear".
4. Responda la consulta de seguridad haciendo clic en "Aceptar".

Resultado
● Se formatea la Memory Card.
● Temporalmente no se puede acceder a la CPU.
● Se borran los datos de proyecto de la CPU, excepto la dirección IP.
● Si abre el formateado de la Memory Card desde el contexto de proyecto, la vista Online y
de diagnóstico permanece abierta; si lo abre mediante "Dispositivos accesibles", se cierra.

2.1.5.8

Actualizar el firmware de un módulo

Principios básicos para actualizar el firmware de un módulo
Actualizar el firmware
Con ayuda de archivos de firmware se puede actualizar el firmware de un módulo.

Requisitos
● El módulo está conectado online.
● El módulo soporta la actualización de firmware.
● Para aquellos módulos que necesiten que se aplique tensión de alimentación para una
correcta ejecución de la actualización de firmware: la tensión de alimentación del módulo
está garantizada. Para más información, consulte la documentación del módulo.

3638

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
La actualización de firmware de un módulo puede llamarse desde el árbol del proyecto o desde
el contexto del proyecto.
ADVERTENCIA
Riesgo de estados no admisibles de la instalación
Una CPU S7-1500 pasa inmediatamente al estado operativo STOP al iniciarse la
actualización de firmware, lo cual puede repercutir sobre el funcionamiento de un proceso
online o de una máquina.
Un funcionamiento inesperado de un proceso o de una máquina puede dar lugar a la muerte
o a lesiones graves y/o daños materiales.
Nota
Tras la actualización del firmware, en la configuración hardware de su proyecto debe
sustituirse el módulo afectado por el mismo módulo con la versión actual del firmware.
Entonces la configuración volverá a corresponderse con la configuración realmente existente.

Casilla de verificación "Activar firmware tras actualización"
Si no ha activado la casilla de verificación "Activar firmware tras actualización", el firmware
anterior permanece activo hasta que se inicialice el módulo (p. ej., con el cambio POWER OFF
(desconexión) - POWER ON (conexión)). El firmware nuevo se activa una vez inicializado el
módulo.
Si ha activado la casilla de verificación, el módulo se inicializa automáticamente después de
que el procedimiento de carga finalice correctamente y, a continuación, pasa a funcionar con
el firmware nuevo.
La activación del firmware tras la actualización tiene las consecuencias siguientes:
● Una estación efectúa un rearranque completo. Esto tiene como consecuencia el fallo de
todos los módulos de la estación.
● Si la CPU correspondiente se encuentra en el estado operativo RUN, la activación del
firmware puede dar lugar a errores de acceso u otros efectos negativos en el programa del
usuario, incluido un STOP permanente de la CPU.
Nota
En algunas CPU, la casilla de verificación "Activar firmware tras actualización" se muestra
atenuada y desactivada. En este caso, la CPU se debe rearrancar de nuevo manualmente.
En las CPU S7-1500, la casilla de verificación "Activar firmware tras actualización" se
muestra atenuada y activada. En este caso el firmware nuevo se activará inmediatamente
después del proceso de carga.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3639

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Llamar la actualización de firmware desde el árbol del proyecto
Requisitos
● El módulo está en el primer nivel jerárquico detrás de un módulo de cabecera (IM o CPU de
la familia de módulos S7-1500 o ET200SP).
● El módulo de cabecera está conectado al sistema de ingeniería vía PROFINET.

Procedimiento
Proceda del siguiente modo:
1. Seleccione el módulo de cabecera correspondiente en el árbol del proyecto.
2. Abra la vista Online y diagnóstico del módulo de cabecera utilizando el menú contextual.
3. Elija el grupo "Actualización del firmware" de la carpeta "Funciones".
4. Seleccione "Módulos locales".
En el campo "Datos online" se listan en una tabla los módulos del primer nivel jerárquico
detrás del módulo de cabecera. En el caso de módulos de Siemens se trata de los módulos
que soportan una actualización de firmware. En el caso de dispositivos basados en GSDML
son todos los módulos.
5. Seleccione el módulo cuyo firmware desee actualizar.
6. Haga clic en el botón "Examinar" en el área "Actualizador de firmware" para escoger la ruta
de los archivos de actualización de firmware.
7. Seleccione unos de estos archivos. En la tabla se muestran todos los módulos para los que
es posible efectuar una actualización con el archivo de firmware seleccionado.
8. Opcionalmente: Active la casilla de verificación "Activar firmware tras actualización" para
reiniciar automáticamente el módulo después de la carga e iniciar el nuevo firmware.
9. Haga clic en el botón "Iniciar actualización". Si el módulo puede interpretar el archivo
seleccionado, este se carga en el módulo. Si para ello se debe cambiar el estado operativo
de la CPU, unos cuadros de diálogo le pedirán que lo haga.

Abrir la actualización de firmware desde el contexto del proyecto
Procedimiento
Para efectuar la actualización del firmware, proceda del siguiente modo:
1. Abra el módulo en la vista Online y diagnóstico.
2. Elija el grupo "Actualización del firmware" de la carpeta "Funciones".
Nota
En CPU S7-1500 este grupo está dividido en "PLC" y "Display".
3. Haga clic en el botón "Examinar" en el área "Actualizador de firmware" para escoger la ruta
de los archivos de actualización de firmware.

3640

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
4. Seleccione unos de estos archivos. En la tabla se muestran todos los módulos para los que
es posible efectuar una actualización con el archivo de firmware seleccionado.
5. Opcionalmente: Active la casilla de verificación "Activar firmware tras actualización" para
reiniciar automáticamente el módulo después de la carga e iniciar el nuevo firmware.
6. Haga clic en el botón "Iniciar actualización". Si el módulo puede interpretar el archivo
seleccionado, este se carga en el módulo. Si para ello se debe cambiar el estado operativo
de la CPU, unos cuadros de diálogo le pedirán que lo haga.

2.1.5.9

Asignación de una dirección IP a un dispositivo PROFINET IO

Principios básicos para asignar una dirección IP a un dispositivo PROFINET IO
Resumen
Todos los dispositivos PROFINET IO operan con el protocolo TCP/IP, y por ello precisan una
dirección IP para funcionar con Industrial Ethernet. Una vez que un dispositivo IO ha recibido
una dirección IP, se puede acceder a él a través de dicha dirección. Por ejemplo, es posible
cargar datos de configuración o realizar un diagnóstico.

Requisitos
● Debe estar establecida la conexión a LAN Ethernet.
● Debe estar accesible la interfaz Ethernet de la programadora o el PC.
● El dispositivo IO que debe recibir una dirección IP debe estar en la misma banda IP que la
programadora o el PC.

Abrir la asignación de dirección mediante "Dispositivos accesibles"
Requisitos
● Los dispositivos a los que se accede por medio de la interfaz correspondiente de la PG/el
PC se muestran en el árbol del proyecto (esto se consigue haciendo doble clic en
"Actualizar dispositivos accesibles" dentro del árbol del proyecto o bien seleccionando el
comando "Dispositivos accesibles..." del menú "Online").
● La vista Online y diagnóstico se abre después de hacer doble clic en "Accesos online" ->
<interfaz seleccionada> -> <dispositivo PROFINET IO> -> "Online y diagnóstico".

Procedimiento
1. Abra el grupo "Asignar dirección IP" de la carpeta "Funciones". En el campo "Dirección
MAC" se muestra la dirección MAC del dispositivo PROFINET IO. El botón "Dispositivos
accesibles" está en color gris.
2. Introduzca la dirección IP que desee.
3. Introduzca la máscara de subred.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3641

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
4. Si hay que utilizar un router, active la casilla de verificación "Utilizar router" e introduzca su
dirección IP.
5. Haga clic en el botón "Asignar dirección IP".

Resultado
Al dispositivo IO o a su interfaz PROFINET afectada se le asigna la dirección IP con carácter
permanente. Dicha dirección se conserva incluso después de un arranque o un fallo de tensión.
Nota
En una CPU S7-1500, del modo descrito anteriormente se puede cambiar también la dirección
IP de una interfaz PROFINET aunque anteriormente se haya cargado un proyecto en la CPU
a través de dicha interfaz. Se sobrescribirá la dirección IP cargada a través del proyecto.

Abrir la asignación de dirección desde el contexto de proyecto
Requisitos
● Existe una conexión online con el dispositivo PROFINET IO.
● Se ha abierto la vista Online y diagnóstico del dispositivo PROFINET IO desde el contexto
de proyecto.
● El dispositivo PROFINET IO no está asignado a ningún controlador IO.

Procedimiento
1. Abra el grupo "Asignar dirección IP" de la carpeta "Funciones".
2. Haga clic en el botón "Dispositivos accesibles" para determinar los dispositivos accesibles.
Nota: En una CPU S7-1500 hay dos entradas porque tiene dos interfaces PROFINET.
3. Seleccione el dispositivo IO. Los campos "Dirección IP" y "Máscara de subred", la casilla de
verificación "Utilizar router" y el campo "Dirección del router" están en color gris y contienen
las propiedades del nodo a través del que se ha establecido el acceso online actual.
4. Haga clic en el botón "Asignar dirección IP".

Resultado
Al dispositivo IO o a su interfaz PROFINET afectada se le asigna la dirección IP con carácter
permanente. Dicha dirección se conserva incluso después de un arranque o un fallo de tensión.

3642

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.5.10

Asignar nombre de dispositivo PROFINET

Fundamentos para la asignación de nombre a un dispositivo PROFINET IO
Nombre de dispositivo
Para que sea posible acceder a un dispositivo IO desde un controlador IO, es necesario que
el dispositivo tenga nombre. En PROFINET se ha optado por este procedimiento porque los
nombres son más fáciles de manejar que las complejas direcciones IP.
La asignación de nombre a un dispositivo PROFINET IO es comparable al ajuste de la
dirección PROFIBUS en un esclavo DP.
En estado de suministro, los dispositivos IO no tienen nombre. Para que un controlador IO
pueda direccionar un dispositivo IO, p. ej. para transferir los datos de configuración (entre ellos
la dirección IP) durante el arranque, o para el intercambio de datos útiles en modo de operación
cíclico, es necesario que previamente se le haya asignado al dispositivo un nombre de
dispositivo con la programadora o el PC.

Reglas para nombres de dispositivo
Los nombres de dispositivo están sujetos a las siguientes restricciones:
● Limitación a 240 caracteres en total (letras minúsculas, cifras, guión o punto)
● Los componentes del nombre de dispositivo, es decir, las cadenas de caracteres entre dos
puntos, no deben superar los 63 caracteres de longitud.
● No se admiten caracteres especiales como vocales acentuadas o con diéresis, los
paréntesis, caracteres de subrayado, barras, espacios en blanco, etc. El único carácter
especial permitido es el guión.
● El nombre de dispositivo no debe empezar ni acabar por el carácter "-".
● El nombre de dispositivo no debe empezar con una cifra.
● El nombre de dispositivo no debe tener la forma n.n.n.n (n = 0, ... 999).
● El nombre de dispositivo no debe empezar con la cadena de caracteres "port-xyz" o "portxyz-abcde" (a, b, c, d, e, x, y, z = 0, ... 9).

¿Dónde se encuentra la función buscada?
El nombre de un dispositivo PROFINET IO se puede asignar en los siguientes puntos:
● En su vista Online y diagnóstico, en el grupo "Asignar nombre" de la carpeta "Funciones".
La forma de la interfaz de usuario de este grupo depende del modo en que se haya abierto
la vista Online y diagnóstico:
– Acceso mediante "Dispositivos accesibles"
– Llamada desde el contexto del proyecto
● En el cuadro de diálogo "Asignar nombre de dispositivo PROFINET".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3643

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Consulte también
Asignar un nombre en la vista Online y diagnóstico, abierta desde "Dispositivos accesibles"
(Página 3644)
Asignar un nombre en la vista Online y diagnóstico, abierta desde el contexto del proyecto
(Página 3645)
Asignar un nombre en el cuadro de diálogo "Asignar nombre de dispositivo PROFINET"
(Página 3646)

Asignar un nombre en la vista Online y diagnóstico, abierta desde "Dispositivos accesibles"
Requisitos
● Se ha abierto la vista Online y diagnóstico del dispositivo PROFINET IO desde "Actualizar
dispositivos accesibles" (en el árbol del proyecto) o desde "Dispositivos accesibles..."
(menú "Online").

Procedimiento
1. Abra el grupo "Asignar nombre" de la carpeta "Funciones". En el campo "Tipo" se muestra
el tipo de módulo del dispositivo PROFINET IO.
2. Introduzca en el campo de entrada "Nombre de dispositivo PROFINET" el nombre del
dispositivo deseado.
3. Opcionalmente: haga clic en la casilla de verificación "Prueba de parpadeo de LED" para
efectuar un test de parpadeo de LEDs en el dispositivo PROFINET IO. Así se comprueba
si el usuario se encuentra en el dispositivo IO deseado.
Nota
El test de parpadeo de LED no es compatible con todos los dispositivos PROFINET IO.
El test de parpadeo de LED continúa hasta que es interrumpido por el usuario. Puede
interrumpirse, p. ej., desactivando la casilla de verificación "Prueba de parpadeo de LED"
o cerrando la vista Online y diagnóstico.
4. Haga clic en el botón "Asignar nombre".

Resultado
El nombre indicado se asigna al dispositivo PROFINET IO.

3644

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Asignar un nombre en la vista Online y diagnóstico, abierta desde el contexto del proyecto
Requisitos
● Se ha abierto la vista Online y diagnóstico del dispositivo PROFINET IO desde el contexto
de proyecto.
● Se puede acceder al dispositivo PROFINET IO a través de una interfaz PG/PC como
mínimo.

Procedimiento
1. Abra el grupo "Asignar nombre" de la carpeta "Funciones". En la lista desplegable "Nombre
de dispositivo PROFINET" se muestra el nombre que existe actualmente en el proyecto
offline y, en el campo "Tipo", se muestra el tipo de módulo del dispositivo PROFINET IO.
Nota
En las CPU con varias interfaces PROFINET se muestran los nombres de todas las
interfaces PROFINET ya existentes en el proyecto offline.
2. En caso necesario, seleccione otro nombre en la lista desplegable.
Nota
En los pasos de 3 a 5 se determinan los dispositivos IO presentes en la subred PROFINET.
3. En la lista desplegable "Interfaz PG/PC para la asignación", seleccione la interfaz PG/PC a
través de la cual desea establecer la conexión online.
4. Opcionalmente: Con las tres casillas de verificación, realice una selección de entre todos
los dispositivos IO presentes online.
5. Haga clic en el icono para determinar los dispositivos IO presentes en la subred
PROFINET. Tras ello, la tabla se actualiza.
6. Seleccione en la tabla el dispositivo IO deseado.
7. Opcionalmente: haga clic en la casilla de verificación "Prueba de parpadeo de LED" para
efectuar un test de parpadeo de LEDs en el dispositivo PROFINET IO. Así se comprueba
si el usuario se encuentra en el dispositivo IO deseado.
Nota
El test de parpadeo de LED no es compatible con todos los dispositivos PROFINET IO.
El test de parpadeo de LED continúa hasta que es interrumpido por el usuario. Puede
interrumpirse, p. ej. desactivando la casilla de verificación "Prueba de parpadeo de LED",
seleccionando otro dispositivo IO de la tabla o cerrando la vista Online y diagnóstico.
8. Haga clic en el botón "Asignar nombre".

Resultado
El nombre seleccionado se asigna al dispositivo PROFINET IO o a una de sus interfaces
PROFINET.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3645

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Asignar un nombre en el cuadro de diálogo "Asignar nombre de dispositivo PROFINET"
Requisitos
● Ha abierto el cuadro de diálogo "Asignar nombre de dispositivo PROFINET" desde la vista
de redes (desde el menú contextual de una conexión PN/IE).
● Se puede acceder al dispositivo PROFINET IO a través de una interfaz PG/PC como
mínimo.

Procedimiento
1. En la lista desplegable "Nombre de dispositivo PROFINET" se muestra lo siguiente:
– el nombre existente actualmente en el proyecto online para la interfaz con la que se ha
abierto el cuadro de diálogo
– los nombres de los dispositivos IO que están conectados mediante dicha interfaz
en el campo "Tipo" se muestra el tipo de módulo del dispositivo PROFINET IO.
En caso necesario, seleccione otro nombre en la lista desplegable.
Nota
En los pasos de 2 a 4 se determinan los dispositivos IO presentes en la subred PROFINET.
2. En la lista desplegable "Interfaz PG/PC para la asignación", seleccione la interfaz PG/PC a
través de la cual desea establecer la conexión online.
3. Opcionalmente: Con las tres casillas de verificación, realice una selección de entre todos
los dispositivos IO presentes online.
4. Haga clic en el icono para determinar los dispositivos IO presentes en la subred
PROFINET. Tras ello, la tabla se actualiza.
5. Seleccione en la tabla el dispositivo IO deseado.
6. Opcionalmente: haga clic en la casilla de verificación "Prueba de parpadeo de LED" para
efectuar un test de parpadeo de LEDs en el dispositivo PROFINET IO. Así se comprueba
si el usuario se encuentra en el dispositivo IO deseado.
Nota
El test de parpadeo de LED no es compatible con todos los dispositivos PROFINET IO.
El test de parpadeo de LED continúa hasta que es interrumpido por el usuario. Puede
interrumpirse, p. ej., desactivando la casilla de verificación "Prueba de parpadeo de LED"
o seleccionando otro dispositivo IO de la tabla.
7. Haga clic en el botón "Asignar nombre".

Resultado
El nombre seleccionado se asigna al dispositivo PROFINET IO o a la interfaz con la que se ha
abierto el cuadro de diálogo.

3646

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.5.11

Calibración de un módulo analógico S7-1500

Calibración de un módulo analógico S7-1500: resumen
¿Cómo se calibra un módulo analógico S7-1500?
La calibración de un módulo analógico S7-1500 se lleva a cabo en su vista Online y de
diagnóstico, en el grupo "Calibrar" de la carpeta "Funciones".

Resumen de las funciones de calibración disponibles
En el grupo "Calibración" es posible ejecutar las siguientes funciones en un módulo analógico
S7-1500:
● Determinar la calibración actual de todos los canales
● Calibración de un canal
● Cancelación de un proceso de calibración en curso
● Restablecer la configuración de fábrica en la calibración de un canal

Requisitos para la función de calibración descrita a continuación
Para la función de calibración que se describe a continuación se presuponen los requisitos
siguientes:
● Se ha abierto la vista Online y de diagnóstico desde el contexto de proyecto (es decir, no
desde el árbol del proyecto ni desde el menú "Online").
● Existe una conexión online con el módulo analógico que va a calibrarse.
● Las configuraciones offline y online son idénticas.

Calibración de un módulo analógico S7-1500
Resumen de la calibración de un canal de un módulo analógico S7-1500
La calibración de un canal de un módulo analógico S7-1500 consta de los siguientes pasos:
1. Inicio del proceso de calibración
2. Ejecute todos los pasos del proceso de calibración menos el primero y el último.
3. Finalización del proceso de calibración
A continuación se describe con más detalle.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3647

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Requisitos
● Se ha abierto la vista Online y de diagnóstico del módulo analógico S7-1500 desde el
contexto del proyecto y el usuario está en el grupo "Calibración" de la carpeta "Funciones".
● La CPU correspondiente está en modo online.
● Hay un proceso de calibración en curso en el módulo analógico (cuando se desea iniciar el
proceso de calibración) o se ha realizado con éxito el último paso iniciado (cuando se desea
continuar o cerrar el proceso de calibración).

Procedimiento para iniciar el proceso de calibración
Para iniciar el proceso de calibración, proceda del siguiente modo:
1. Seleccione en la tabla general la línea correspondiente al canal que va a calibrarse.
2. Haga clic en el botón "Iniciar calibración manual".
La interfaz de usuario cambia a la apariencia siguiente:
● Se desactivan la tabla general y los botones "Iniciar calibración manual" y "Restablecer
configuración de fábrica"
● Se activa la visualización de etapas y se indica el número de la etapa actual y de la última
etapa.
● Se activa el campo "Comando", que indica lo que el usuario debe hacer en la etapa de
calibración siguiente.
● El campo "Estado" se activa y muestra el estado actual del proceso de calibración, p. ej.
"Calibración iniciada correctamente".
● El campo "Valor medido" se activa. En un módulo de entrada aquí se muestra un valor,
mientras que en un módulo de salida debe introducirse un valor.
● Se activa el botón "Cancelar".
● En determinados módulos analógicos (AI Energy Meter) se activa el botón "Omitir", que
permite saltarse la siguiente etapa del proceso de calibración.
● Se activa el botón "Siguiente". Puede ejecutarse la siguiente etapa del proceso de
calibración.

Procedimiento para las etapas segunda a penúltima del proceso de calibración
Proceda del siguiente modo:
1. Haga clic en el botón "Siguiente".
Se actualizan los campos de la interfaz de usuario descritos más arriba.
Determinados módulos analógicos (AI Energy Meter) permiten saltarse la siguiente etapa del
proceso de calibración, siempre que no sea la última. Proceda del siguiente modo:
1. Haga clic en el botón "Omitir".
Se actualizan los campos de la interfaz de usuario descritos más arriba.

3648

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento para la última etapa del proceso de calibración
Proceda del siguiente modo:
1. Haga clic en el botón "Siguiente".
La interfaz de usuario cambia a la apariencia siguiente:
● Se activa la tabla sinóptica.
● Se actualiza la visualización del canal calibrado.
● Se activan los botones "Iniciar calibración manual" y "Restablecer configuración de fábrica".
● Se desactiva la visualización de etapas y los números de la etapa actual y de la última etapa
están vacíos.
● El campo "Comando" se desactiva y queda vacío.
● Se desactiva el campo "Estado", que muestra el último estado del proceso de calibración,
p. ej. "Calibración finalizada correctamente".
● El campo "Valor medido" se desactiva y queda vacío.
● Se desactiva el botón "Cancelar".
● Se desactiva el botón "Omitir".
● Se desactiva el botón "Siguiente".

Aparición de un error
Si durante el proceso de calibración se produce un error, el módulo interrumpe el proceso. El
canal que se estaba calibrando mantiene la misma configuración que tenían antes de iniciarse
el proceso de calibración.
Una vez ocurrido el error, la interfaz de usuario tiene la misma apariencia que antes de iniciarse
el proceso de calibración, excepto en el campo "Estado". El campo "Estado" muestra el error
que ha detectado el módulo en el proceso de calibración.

Cancelación de un proceso de calibración en curso de un módulo analógico S7-1500
Requisitos
● Se ha abierto la vista Online y de diagnóstico del módulo analógico S7-1500 desde el
contexto del proyecto y el usuario está en el grupo "Calibración" de la carpeta "Funciones".
● La CPU correspondiente está en modo online.
● Hay un proceso de calibración en curso en el módulo analógico.

Procedimiento
Para cancelar un proceso de calibración en curso, proceda del siguiente modo:
1. Haga clic en el botón "Cancelar".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3649

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Resultado
El proceso de calibración en curso se interrumpe, y el canal que se estaba calibrando mantiene
la misma configuración que tenían antes de iniciarse el proceso de calibración.
En la interfaz de usuario se desactivan todos los elementos de manejo hasta que concluya la
cancelación. La interfaz de usuario tiene la misma apariencia que antes de iniciarse el proceso
de calibración, excepto en el campo "Estado". El campo "Estado" muestra el resultado de la
cancelación.

Restablecer la configuración de fábrica de un módulo analógico S7-1500
Requisitos
● Se ha abierto la vista Online y de diagnóstico del módulo analógico S7-1500 desde el
contexto del proyecto y el usuario está en el grupo "Calibración" de la carpeta "Funciones".
● La CPU correspondiente está en modo online.

Procedimiento
Para restablecer la configuración de fábrica de un canal de un módulo analógico S7-1500,
proceda del siguiente modo:
1. En la tabla sinóptica seleccione la línea correspondiente al canal en el que se hará el
restablecimiento.
2. Haga clic en el botón "Restablecer configuración de fábrica".

Resultado
En la interfaz de usuario se desactivan todos los elementos de manejo hasta que concluya el
proceso de restablecimiento. La interfaz de usuario tiene la misma apariencia que antes de
iniciarse el proceso de restablecimiento, excepto en el campo "Estado". El campo "Estado"
muestra el resultado del proceso de restablecimiento.

2.1.5.12

Cargar datos I&M en dispositivos PROFINET-IO y sus módulos

¿Qué datos I&M se pueden cargar en dispositivos PROFINET-IO y sus módulos?
Los datos I&M 1 (subdivisión fundamental e identificador de situación) y / o los datos I&M 2
(fecha de incorporación) y/o los datos I&M 3 (información adicional) se pueden cargar en
hardware real.

3650

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Requisitos
● En los ajustes del proyecto (Opciones > Configuración, Configuración hardware > Compilar
y descargar) está activada la opción "Descargar datos I&M".
● Existe una conexión online con los dispositivos PROFINET IO en los que desea cargar los
datos I&M y con los módulos de estos.
● En las propiedades de los dispositivos PROFINET-IO afectados y de sus módulos (ventana
de inspección: ficha "Propiedades" > ficha "General", Configuración > Identification &
Maintenance) ha introducido los datos I&M que deben cargarse.

¿Dónde se determina qué datos I&M se cargan en qué dispositivos PROFINET-IO?
Qué datos I&M se cargan en qué dispositivos PROFINET-IO se define en el cuadro de diálogo
"Vista preliminar Cargar". Para ello dispone de las siguientes opciones en la lista desplegable
de la fila "Datos de identificación y mantenimiento (I&M)":
● No cargar nada
La casilla de verificación de todos los dispositivos PROFINET-IO está desactivada, igual
que las casillas de verificación de los datos I&M que deben cargarse.
Con este ajuste no se transfiera ningún dato I&M al hardware real durante la carga.
● Cargar datos
La casilla de verificación de todos los dispositivos PROFINET-IO está activada, igual que
las casillas de verificación de los datos I&M que deben cargarse.
Con este ajuste los datos I&M 1, I&M 2 e I&M 3 se transfieran a todos los dispositivos
PROFINET-IO durante la carga.
● Cargar seleccionados
Se activa la casilla de verificación de aquellos dispositivos PROFINET-IO en los que se
desean cargar datos I&M. Además se activa la casilla de verificación de los datos de
identificación que se desean cargar.
Este ajuste provoca que al realizar la carga los datos I&M se carguen en los dispositivos
PROFINET-IO seleccionados.
Nota
Dependencia del idioma de los datos I&M que deben cargarse
Los datos I&M se cargan en el hardware real en la forma en que se han predeterminado en las
propiedades de los dispositivos PROFINET IO afectados y de sus módulos. No existe
dependencia de ningún idioma.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3651

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

2.1.6

Diagnóstico en estado operativo STOP

2.1.6.1

Principios básicos del búfer de diagnóstico

Función
El sistema operativo de la CPU registra en el búfer de diagnóstico los errores detectados por
la CPU y los módulos aptos para diagnóstico siguiendo el orden de aparición. Aquí se incluyen
los eventos siguientes, entre otros:
● Todos los cambios de estado operativo de la CPU (p. ej. conexión (POWER ON), transición
al estado operativo STOP, transición al estado operativo RUN)
● Todas las alarmas de proceso y diagnóstico
La primera entrada contiene el evento más reciente. Las entradas del búfer de diagnóstico se
guardan de forma permanente: se conservan incluso si falla la fuente de alimentación y sólo se
borran al restablecer la configuración de fábrica de la CPU.
Una entrada del búfer de diagnóstico contiene los elementos siguientes:
● Sello de tiempo
● ID de error
● Otra información específica de la ID de error

Ventajas del búfer de diagnóstico
El búfer de diagnóstico ofrece las ventajas siguientes:
● Una vez la CPU ha pasado al estado operativo STOP, es posible evaluar los últimos
eventos anteriores al STOP y, de este modo, aislar y determinar la causa del mismo.
● Esto permite detectar y solucionar con más rapidez las causas de errores, con lo que se
aumenta la disponibilidad de la instalación.
● Es posible evaluar el comportamiento dinámico de la instalación y, seguidamente,
optimizarlo.

Organización del búfer de diagnóstico
El búfer de diagnóstico es un búfer en anillo. El número máximo de entradas es de 50 en las
CPU S7-1200. Si el búfer de diagnóstico está lleno y hay que realizar otra entrada, todas las
entradas existentes se corren un puesto (lo que supone que la entrada más antigua se borra)
y la entrada nueva se registra en el primer lugar, que ha quedado libre (principio FIFO: first in,
first out).

Evaluación del búfer de diagnóstico
Existen las posibilidades siguientes de acceder al contenido del búfer de diagnóstico:
● Desde la vista online y de diagnóstico

3652

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
Evaluando los eventos anteriores al evento de error (p. ej. transición de estado operativo a
STOP) se formará una idea de la causa posible y será posible aislarla o especificarla con más
precisión (en función del tipo de error).
Lea detenidamente la información detallada de los eventos y utilice el campo de texto "Ayuda
del evento" para obtener más información y averiguar las posibles causas de las diferentes
entradas.
Nota
Para poder utilizar adecuadamente las indicaciones de tiempo de las entradas del búfer de
diagnóstico en instalaciones de tiempo crítico, es recomendable comprobar de vez en cuando
la fecha y hora de la CPU y corregirlas en caso necesario.
Otra posibilidad consiste en sincronizar la hora a través de un servidor de hora NTP.

Consulte también
Restablecer la configuración de fábrica de una CPU S7-1200 (Página 3634)
Determinar la causa de STOP de una CPU (Página 3653)
Determinar y ajustar la hora de una CPU (Página 3634)
Parametrizar el reloj (Página 1541)

2.1.6.2

Determinar la causa de STOP de una CPU

Requisitos
La CPU que debe analizarse está en estado operativo STOP.

Procedimiento
Para determinar la causa de STOP de una CPU, proceda del siguiente modo:
1. Abra la vista online y de diagnóstico de la CPU.
2. Elija el grupo "Búfer de diagnóstico" de la carpeta "Diagnóstico".
3. Evalúe los eventos anteriores a la transición al estado operativo STOP. Con ello se formará
una idea de la causa posible y será posible aislarla o especificarla con más precisión (en
función del tipo de error).
Lea detenidamente la información detallada de los eventos y utilice el botón "Ayuda del
evento" para obtener más información y las posibles causas de las diferentes entradas.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3653

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Resultado
Se ha podido aislar y determinar con más precisión la causa de STOP de la CPU.
Nota
Si el análisis no le sirve de ayuda, póngase en contacto con el Customer Support. En este caso,
guarde el contenido del búfer de diagnóstico en un archivo de texto con el botón "Guardar
como" y entréguelo al Customer Support.

Consulte también
Leer el búfer de diagnóstico de una CPU (Página 3627)

2.1.7

Accesos online en la vista online y de diagnóstico

2.1.7.1

Ver el estado de la conexión online

Requisitos
● Se puede acceder al dispositivo en cuestión por lo menos a través de una interfaz PG/PC.

Procedimiento
1. Abra la vista online y de diagnóstico del dispositivo cuyo estado de conexión online desee
ver.
2. Seleccione el grupo "Accesos online".
Nota
El grupo "Accesos online" solo existe en las CPUs y en algunos CPs. Si se ha llamado la
vista Online y diagnóstico mediante la función "Mostrar/actualizar dispositivos accesibles",
no se mostrará.

Resultado
En el área "Estado" se muestra, en gráficos y en palabras, el estado de la conexión online.

2.1.7.2

Definir interfaz PG/PC, establecer conexión online

Requisitos
● Se puede acceder al dispositivo en cuestión por lo menos a través de una interfaz PG/PC.
● En este momento no hay conexión online con el dispositivo correspondiente.

3654

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
1. Abra la vista Online y diagnóstico del dispositivo con el que desea establecer una conexión
online.
2. Seleccione el grupo "Accesos online" y dentro de él, el área "Accesos online".
Nota
El grupo "Accesos online" existe en las CPU y en algunos CP. Si se ha abierto la vista
Online y diagnóstico mediante la función "Mostrar/actualizar dispositivos accesibles", no se
mostrará.
3. Si ya ha existido anteriormente una conexión online con el dispositivo, en las listas
desplegables aparecerán de modo predeterminado los valores correspondientes a dicha
conexión online. En este caso puede continuarse con la última etapa de esta instrucción,
siempre que entre tanto no se haya cambiado la dirección IP en la vista Online y de
diagnóstico.
4. Seleccione el tipo de interfaz en la lista desplegable "Tipo de interfaz PG/PC".
En función de esta selección, aparecen en la lista desplegable "Interfaz PG/PC para el
acceso online" solo aquellas interfaces PG/PC que coincidan con el tipo de interfaz
seleccionado.
5. En la lista desplegable "Interfaz PG/PC para el acceso online", seleccione la interfaz PG/PC
a través de la cual desea establecer la conexión online.
6. Opcionalmente: para modificar las propiedades del CP correspondiente, haga clic en el
botón "Propiedades".
7. En la lista desplegable "Conexión con subred", seleccione la subred a través de la cual el
dispositivo está conectado con la interfaz PG/PC.
Nota
La interfaz de programadora o PC tiene que estar conectada con una interfaz de un
dispositivo.
Si se desea acceder exclusivamente a este dispositivo, seleccione en la lista desplegable
el ajuste "Directamente en el slot <nombre de interfaz>".
Por el contrario, si desea acceder a otro dispositivo mediante enrutamiento, cree en la
configuración de dispositivos una subred en esta interfaz y seleccione a continuación la
subred en la lista desplegable.
8. Si el dispositivo es accesible a través de una pasarela, seleccione en la lista desplegable
"1.er gateway" la pasarela que conecta entre sí las subredes implicadas.
9. Introduzca en el campo de entrada "Dirección del dispositivo" la dirección IP del dispositivo
con el que desee establecer una conexión online.
Nota
Con CPU que tienen varias direcciones IP seleccione en la lista desplegable "Dirección del
dispositivo" la dirección IP de la interfaz PROFINET a través de la que desee establecer la
conexión online.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3655

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
10.Alternativa: haga clic en el botón "Mostrar dispositivos accesibles" y seleccione en la lista
el dispositivo con el que desea establecer una conexión online.
11.Haga clic en el botón "Establecer conexión online".

Resultado
Se establece la conexión online con el dispositivo deseado.

2.1.7.3

Deshacer la conexión online

Requisitos
● En este momento existe una conexión online con el dispositivo correspondiente.

Procedimiento
1. Abra la vista online y de diagnóstico del dispositivo cuya conexión online desea desactivar.
2. Seleccione el grupo "Accesos online" y dentro de él, el área "Accesos online".
Nota
El grupo "Accesos online" solo existe en las CPUs y en algunos CPs. Si se ha llamado la
vista Online y diagnóstico mediante la función "Mostrar/actualizar dispositivos accesibles",
no se mostrará.
3. Haga clic en el botón "Deshacer conexión online".

Resultado
Se deshace la conexión online con el dispositivo deseado.

2.1.7.4

Realizar el test de parpadeo con un dispositivo conectado online

Requisitos
● En este momento existe una conexión online con el dispositivo correspondiente.
● La función FORZADO PERMANENTE no está activa.

3656

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Procedimiento
1. Abra la vista online y de diagnóstico del dispositivo para el que desee realizar el test de
parpadeo.
2. Seleccione el grupo "Accesos online" y dentro de él, el área "Estado".
Nota
El grupo "Accesos online" solo existe en las CPUs y en algunos CPs. Si se ha llamado la
vista Online y diagnóstico mediante la función "Mostrar/actualizar dispositivos accesibles",
no se mostrará.
3. Active la casilla de verificación "Prueba de parpadeo de LED".

Resultado
● En una CPU S7-1200 parpadean los LEDs RUN/STOP, ERROR y MAINT.
● En una CPU S7-1500 parpadean los LEDs RUN/STOP, ERROR y MAINT.
● En una CPU S7-300 o S7-400 parpadea el LED FRCE.
Los LEDs parpadean hasta que el test de parpadeo es cancelado por el usuario. Puede
cancelarse, p. ej. desactivando la casilla de verificación "Prueba de parpadeo de LED",
cambiando a otro grupo de la vista Online y de diagnóstico o cambiando la configuración en el
área "Accesos online".

2.1.8

Comprobar fallos en subredes PROFIBUS DP

2.1.8.1

Principios básicos del repetidor de diagnóstico

¿Qué es el repetidor de diagnóstico?
El repetidor de diagnóstico es un repetidor capaz de vigilar durante el funcionamiento un
segmento de una subred RS 485-PROFIBUS (cable de cobre) y comunicar al maestro DP
mediante telegrama de diagnóstico los fallos presentes en el cable.
Gracias al diagnóstico de cable durante el funcionamiento, el repetidor de diagnóstico permite
detectar, ubicar y visualizar a tiempo los fallos en el cable. Esto permite detectar a tiempo los
fallos de la instalación y minimizar así las paradas.

Funcionamiento del repetidor de diagnóstico
El repetidor de diagnóstico puede efectuar un diagnóstico de cable en los segmentos DP2 y
DP3 porque está provisto de un contacto de medición para dichos segmentos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3657

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware
El diagnóstico de cable se efectúa en dos pasos:
● 1. Paso: Determinación de topología
Para iniciar la determinación de topología, debe llamarse en el programa la instrucción
avanzada "DP_TOPOL".
El repetidor de diagnóstico determina las direcciones PROFIBUS y la distancia de los
dispositivos, y crea una tabla de topología.
● 2. Paso: Determinación de los puntos de fallo
El repetidor de diagnóstico comprueba los cables durante el funcionamiento del bus.
Determina la distancia del punto de fallo, averigua la causa del fallo y emite un mensaje de
diagnóstico con indicación relativa de la ubicación del fallo.

Visualización de información detallada sobre el punto de fallo detectado
En la vista oline y de diagnóstico del repetidor de diagnóstico se muestra información detallada
sobre el punto de fallo detectado:
● Mediante iconos
● Mediante visualización gráfica y de texto

Consulte también
Visualizar el estado del diagnóstico de segmento mediante iconos (Página 3658)
Visualizar el estado del diagnóstico de segmento mediante gráficos y texto (Página 3659)

2.1.8.2

Visualizar el estado del diagnóstico de segmento mediante iconos

¿Dónde está la información buscada?
Los iconos que muestran el estado del diagnóstico de segmento se encuentran en el siguiente
lugar:
● En la ventana de navegación de la vista online y de diagnóstico del correspondiente
repetidor de diagnóstico, en la carpeta desplegada "Diagnóstico de segmento"
El icono de diagnóstico correspondiente al segmento aparece a continuación de la
denominación del segmento. Debe tenerse en cuenta que solo se muestran los fallos de cable
correspondientes a los segmentos DP2 y DP3. Los segmentos DP1 y PG no muestran los
fallos en forma de icono de diagnóstico, sino que comunican solo unos pocos fallos de bus.

3658

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.1 Diagnosticar hardware

Iconos de diagnóstico
La tabla siguiente muestra los iconos posibles y su significado.
Icono

Significado
Segmento sin fallos
Segmento con fallos
Segmento desconectado

2.1.8.3

Visualizar el estado del diagnóstico de segmento mediante gráficos y texto

¿Dónde se muestra el estado del diagnóstico de segmento mediante gráficos y texto?
La visualización del estado del diagnóstico de segmento mediante gráficos y texto se realiza
en la vista online y de diagnóstico del correspondiente repetidor de diagnóstico, carpeta
"Diagnóstico de segmento", grupos "DP1", "DP2", "DP3" y "PG".

Estructura de los grupos "DP1", "DP2", "DP3" y "PG"
Los grupos "DP1", "DP2", "DP3" y "PG" están formados por los siguientes elementos:
● Campo "Ubicación del fallo"
● Campo "Fallo"
● Campo "Solución"
● Botón "Ayuda del evento"
● Botón "Congelar lista" y "Descongelar"

Campo "Ubicación del fallo"
Aquí se muestra gráficamente la ubicación del fallo, a condición de que el repetidor de
diagnóstico sea capaz de determinarla.
La imagen siguiente muestra un ejemplo de un fallo de cable producido en el segmento DP2.

En el ejemplo, el repetidor de diagnóstico tiene la dirección PROFIBUS 2, y se ha producido un
fallo de cable entre los dispositivos con las direcciones PROFIBUS 16 y 17. El fallo de cable se

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3659

Diagnosticar dispositivos y redes
2.2 Diagnosticar conexiones
encuentra a 25 m de distancia del dispositivo 16, a 4 m del dispositivo 17 y a 72 m del repetidor
de diagnóstico.

Campo "Fallo"
Aquí se describe el fallo en lenguaje natural.

Campo "Solución"
Aquí se encuentran las instrucciones para la eliminación del fallo.

Botón "Ayuda del evento"
Al hacer clic en este botón, se describe con más detalle el fallo producido y, en su caso, se
proporciona información adicional para su eliminación.

Botón "Congelar lista" y "Descongelar"
El botón "Congelar lista" o "Descongelar" solo está activo si existe una conexión online con el
repetidor de diagnóstico.
El ajuste predeterminado es "Congelar visualización".
Al hacer clic en el botón "Congelar lista" sucede lo siguiente:
● Se congela la visualización actual del diagnóstico de segmento.
● La rotulación del botón cambia a "Descongelar".
Cuando la visualización está congelada y se pulsa el botón "Descongelar", sucede lo siguiente:
● Se actualiza de nuevo la visualización del diagnóstico de segmento.
● La rotulación del botón cambia a "Congelar lista".

2.2

Diagnosticar conexiones

2.2.1

Vista general del diagnóstico de conexiones

Principios básicos
En lo sucesivo se denomina "diagnóstico de conexiones" al diagnóstico de conexiones de
comunicación.
El diagnóstico de conexiones se inicia cada vez que se establece la conexión online con un
módulo (CPU o CP) que participa en uno o varios servicios de comunicación. La actualización
del estado de conexión se efectúa automáticamente en segundo plano.
En las conexiones unilaterales, debe existir conexión online con el interlocutor que ha
establecido la conexión.

3660

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.2 Diagnosticar conexiones
En las conexiones bilaterales, se deben distinguir los dos casos siguientes:
● Cuando existe una conexión online exactamente a un punto final de la conexión, sólo se
puede diagnosticar la parte de la conexión correspondiente a ese punto final de la conexión.
● Cuando existe una conexión online con ambos puntos finales de la conexión, se pueden
diagnosticar las dos partes de la conexión (y, por tanto, la conexión completa).

Posibilidades básicas del diagnóstico de conexiones
Pueden diagnosticarse conexiones del modo que se indica a continuación:
● Mediante la visualización del estado de conexión con iconos
Esta visualización se realiza en la tabla de conexiones.
● Mediante diagnóstico de conexiones detallado
Este diagnóstico se realiza en el área "Diagnóstico > Información de conexión" de la
ventana de inspección.

Requisitos para el diagnóstico de conexiones descrito a continuación
El diagnóstico de conexiones solo es posible si los dispositivos que intervienen en la conexión
proporcionan los datos de diagnóstico correspondientes.
En la tabla de conexiones se pueden visualizar los detalles de todas las conexiones creadas
en el proyecto (opción predeterminada) o sólo los detalles de las conexiones seleccionadas.
Para el diagnóstico de conexiones descrito a continuación es imprescindible que se visualicen
los detalles de las conexiones seleccionadas. Desactive para ello la opción "Mostrar todas las
conexiones" del menú contextual.

Consulte también
Trabajar con la tabla de conexiones (Página 247)

2.2.2

Ver el estado de conexión mediante iconos

Contenido de la tabla de conexiones cuando no hay ninguna conexión online establecida
● En el contexto de una CPU o un CP, si no está establecida la conexión online, se muestran
en la tabla de conexiones las conexiones de comunicación configuradas offline (incluidas
sus propiedades).

Contenido de la tabla de conexiones cuando hay una conexión online establecida
Una vez establecida la conexión online, a las propiedades de las comunicaciones enumeradas
offline se añaden los iconos de diagnóstico para el estado de conexión (columna "Estado
online").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3661

Diagnosticar dispositivos y redes
2.2 Diagnosticar conexiones
Además, ahora la tabla de conexiones contiene entradas para todas las conexiones de
comunicación que solo existen online (p. ej. conexiones para las instrucciones de Open User
Communication, conexiones PG y OP conexiones para acceso a servidor web).
En el caso de las conexiones que sólo existen online u offline, el símbolo de diagnóstico se
combina en la parte inferior derecha con un símbolo adicional más pequeño para el estado de
comparación.

Iconos de diagnóstico para conexiones de comunicación
La tabla siguiente muestra los iconos de diagnóstico para las conexiones de comunicación.
Icono

Significado
Conexión establecida
Conexión no establecida o en vías de establecimiento
Conexión no disponible

Iconos de diagnóstico para el estado de comparación
Los iconos de diagnóstico para las conexiones de comunicación pueden combinarse en la
parte inferior derecha con iconos adicionales más pequeños que indican el resultado de la
comparación online-offline. La tabla siguiente muestra los símbolos de comparación posibles
y su significado.
Icono

Significado
La conexión solo existe online
La conexión solo existe offline

2.2.3

Diagnosticar conexiones detalladamente

2.2.3.1

Diagnosticar conexiones detalladamente - Resumen

¿Cómo se diagnostican las conexiones detalladamente?
El diagnóstico detallado de conexiones se efectúa en el área "Diagnóstico > Información de
conexión" de la ventana de inspección.

3662

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.2 Diagnosticar conexiones

¿Cómo se abre el área "Diagnóstico > Información de conexión" de la ventana de inspección?
Para abrir la ficha "Información de conexión" de la ventana de inspección, existen las
siguientes posibilidades:
● Seleccione en la tabla de conexiones la línea que corresponde a la conexión en cuestión.
A continuación, haga clic en la ventana de inspección en las fichas "Diagnóstico" e
"Información de conexión", sucesivamente.
● Haga doble clic en la tabla de conexiones en el icono de diagnóstico de la conexión en
cuestión.
● Se encuentra en el editor de programación, en una instrucción de la comunicación S7 o de
la Open User Communication. Haga doble clic sobre el icono de diagnóstico de la
instrucción (estetoscopio).

Estructura del área "Diagnóstico > Información de conexión" de la ventana de inspección.
La condición previa para ello es que el contenido de la ficha "Información de conexión" esté
rellenado, es decir, que exista una conexión online con por lo menos un punto final de la
conexión en cuestión.
Si el módulo está seleccionado (vista de redes), la ficha contiene el siguiente grupo:
● Recursos de conexión (con S7-1200 y S7-1500)
Si la conexión está seleccionada (tabla de conexiones), contiene los siguientes grupos:
● Detalles de conexión
● Detalles de la dirección de la conexión (S7-1200 y S7-1500)

2.2.3.2

Determinación de recursos de conexión online con S7-1200

¿Dónde se determinan los recursos de conexión online?
Los recursos de conexión online se obtienen del grupo "Recursos de conexión". Este grupo se
encuentra en el área "Diagnóstico > Información de conexión" de la ventana de inspección.
Solo se muestra si en la vista de redes se ha seleccionado un módulo con el que hay una
conexión online.

Número de recursos de conexión
● Número máximo: Indica el número máximo posible de recursos de conexión disponibles del
módulo.
● No ocupados: Indica cuántos recursos de conexión están todavía sin ocupar. En caso de
que haya recursos de conexión ya reservados para determinados tipos de comunicación,
los recursos de conexión no ocupados no podrán utilizarse siempre para cualquier tipo de
conexión.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3663

Diagnosticar dispositivos y redes
2.2 Diagnosticar conexiones

Recursos de conexión reservados y ocupados actualmente
A continuación se muestran los recursos de conexión reservados por el módulo y ocupados
actualmente para los tipos de comunicación que se mencionan.
Tipo de comunicación

Significado

Comunicación PG

Recursos para conexiones entre el módulo y programadoras (p. ej. para el estableci‐
miento de conexiones desde el árbol de proyecto, para diagnóstico online, etc.)

Comunicación HMI

Recursos para conexiones entre el módulo y dispositivos HMI

Open User Communication

Recursos para conexiones de instrucciones de Open User Communication

Comunicación S7

Recursos para conexiones S7 configuradas que permiten intercambiar datos en el
programa de usuario mediante la llamada de instrucciones

Otra comunicación

Indica otros recursos de conexión ocupados para los que no hay recursos de conexión
reservados

2.2.3.3

Determinación de recursos de conexión online con S7-1500

¿Dónde se determinan los recursos de conexión online?
Los recursos de conexión online se obtienen del grupo "Recursos de conexión". Este grupo se
encuentra en el área "Diagnóstico > Información de conexión" de la ventana de inspección.
Solo se muestra si en la vista de redes se ha seleccionado un módulo con el que hay una
conexión online.

Descripción de la visualización detallada de los recursos de conexión
La visualización detallada de los recursos de conexión incluye:
● el número de recursos de conexión disponibles
● el número de recursos de conexión configurados
● el número de recursos de conexión que continúan disponibles.
Se pueden consultar sus descripciones aquí .

2.2.3.4

Determinar los detalles de conexión

¿Dónde se determinan los detalles de conexión?
Los detalles de conexión están indicados en el grupo "Detalles de conexión". Este grupo se
encuentra en el área "Diagnóstico > Información de conexión" de la ventana de inspección.

3664

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.2 Diagnosticar conexiones

¿Cuándo está ocupado el grupo "Detalles de conexión"?
Para que el grupo "Detalles de conexión" de la ficha "Información de conexión" esté ocupado,
deben cumplirse los siguientes requisitos:
● Existe una conexión online con el punto final de la conexión en cuestión.
● Se ha seleccionado una fila en la tabla de conexiones.

Estructura del grupo "Detalles de conexión"
El grupo "Detalles de conexión" incluye los elementos siguientes:
● ID local (hex)
● Tipo de conexión (S7-1200 y S7-1500)
● Protocolo
● Estado de conexión: Icono y descripción
● Detalles
● Último cambio de estado (solo para S7-300 y S7-400)

2.2.3.5

Determinar los detalles de dirección de una conexión

¿Dónde se determinan los detalles de dirección de una conexión?
Los detalles de conexión están indicados en el grupo "Detalles de dirección de la conexión".
Este grupo se encuentra en el área "Diagnóstico > Información de conexión" de la ventana de
inspección.

¿En qué CPUs existe el grupo "Detalles de dirección de la conexión"?
El grupo "Detalles de las direcciones de la conexión" de la ficha "Información de la conexión"
existe solo con las CPUs S7-1200 y S7-1500.

¿Cuándo está ocupado el grupo "Detalles de dirección de la conexión"?
Para que el grupo "Detalles de dirección de la conexión" de la ficha "Información de conexión"
esté ocupado, deben cumplirse los siguientes requisitos:
● Existe una conexión online con los puntos finales de la conexión en cuestión.
● Se ha seleccionado una fila en la tabla de conexiones.

Estructura del grupo "Detalles de dirección de la conexión"
Se indican los detalles de las direcciones relevantes para el tipo de conexión para ambos
interlocutores.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3665

Diagnosticar dispositivos y redes
2.3 Diagnosticar el servidor OPC UA

2.3

Diagnosticar el servidor OPC UA

2.3.1

Requisitos

Requisitos
Para poder visualizar la información de estado descrita a continuación deben cumplirse los
siguientes requisitos:
● El servidor OPC UA se encuentra en una CPU S7-1500 con versión de firmware V2.8 o
superior.
● En esa CPU se ha activado y configurado el servidor OPC UA y existe una conexión online
con ella.

2.3.2

Visualizar información de estado general del servidor OPC UA

¿Dónde se muestra información de estado general del servidor OPC UA?
La información de estado general del servidor OPC UA se muestra en la vista Online y
diagnóstico de la CPU en cuestión, en la carpeta "OPC UA", grupo "Servidor", en "General".

Estructura del área "Estado"
El área "Estado" consta de los elementos siguientes:
● Casilla de verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de PG/PC"
● Campos que contienen la información de estado general del servidor OPC UA

Casilla de verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de PG/PC"
La casilla de verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de PG/PC"
afecta a la indicación de las siguientes horas:
● Hora actual (OPC UA > Servidor > General, área "Estado")
● Hora de arranque del servidor (OPC UA > Servidor > General, área "Estado")
● Último contacto del cliente (OPC UA > Servidor > Sesiones, Área "Diagnóstico de sesión/
suscripción", última columna de la tabla)

3666

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.3 Diagnosticar el servidor OPC UA
La casilla de verificación "El sello de tiempo de la CPU tiene en cuenta la hora local de PG/PC"
tiene el siguiente significado:
● Si la casilla no se ha activado, las entradas citadas arriba se indicarán con la hora del
módulo.
● Si la casilla se ha activado, los tiempos indicados anteriormente se mostrarán con la hora
resultante de la fórmula siguiente:
Hora indicada = hora del módulo + offset de zona horaria de la programadora o el PC
Para ello es imprescindible que la hora del módulo sea idéntica a la hora UTC.

Información de estado general del servidor OPC UA
Se muestra la siguiente información de estado general del servidor OPC UA:
● Hora actual
● Hora de arranque del servidor
● Estado del servidor: estado general del servidor OPC UA. Valores posibles: Running,
Desconocido
● Segundos hasta la desconexión: este campo no contiene información relevante. Está
reservado para una versión futura.
● Motivo de la desconexión: este campo no contiene información relevante. Está reservado
para una versión futura.

2.3.3

Visualizar información de estado de las sesiones OPC UA

¿Dónde se visualiza la información de estado de las sesiones OPC UA?
La información de estado de las sesiones OPC UA se muestra en la vista Online y diagnóstico
de la CPU en cuestión, dentro de la carpeta "OPC UA", grupo "Servidor", en "Sesiones".

Estructura de "Sesiones"
"Sesiones" se compone de las dos áreas siguientes:
● Estadísticas
● Diagnóstico de sesión/suscripción

Área "Estadísticas"
En el área "Estadísticas" se muestra la siguiente información sobre la cantidad total de
sesiones OPC UA:
● Número de sesiones: número de sesiones activas en ese momento
● Número de elementos vigilados: total de elementos vigilados (Monitored Items)
● Total solicitudes: total de solicitudes de todas las sesiones activas en ese momento

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3667

Diagnosticar dispositivos y redes
2.3 Diagnosticar el servidor OPC UA
● Número de solicitudes erróneas: total de solicitudes erróneas de todas las sesiones activas
en ese momento
● Número de rechazos: RejectedRequestCount + RejectedSessionCount +
SecurityRejectedRequestCount + SecurityRejectedSessionCount
● Número de timeouts de sesiones: número de rebases de tiempo de sesión

Área "Diagnóstico de sesión/suscripción"
El área "Diagnóstico de sesión/suscripción" se compone de los siguientes elementos:
● Tabla de la sesión/suscripción
● Botón "Congelar vista"/"Descongelar"
● Detalles de la sesión/suscripción seleccionada

Tabla de la sesión/suscripción
En la tabla se muestra la siguiente información de cada sesión o suscripción activa:

Columna

Significado para la sesión

Significado para la suscripción

ID

Identificador numérico de sesión

Identificador numérico de suscripción

Nombre

Nombre completo de la sesión

ID de suscripción formateado, en el que el ID de la
suscripción es el identificador

URL de punto final

Punto final del servidor OPC UA para la sesión

-

Suscripciones

Número de suscripciones para la sesión actual

Siempre 1

Elementos vigilados Número de elementos vigilados en la sesión ac‐
tual (Monitored Items)

Número de elementos vigilados en la suscripción
actual (Monitored Items)

Tiempo excedido

CurrentTime actual descontando la hora del últi‐
mo contacto ClientLastContactTime referido al
ActualSessionTimeout ajustado

CurrentLifetimeCount actual referido al MaxLifeti‐
meCount máximo de la suscripción actual

Último contacto del
cliente

Momento en que se produjo el último contacto de
cliente en la sesión actual

-

Botón "Congelar vista"/"Descongelar"
El botón "Congelar vista" o "Descongelar" solo está activo si existe una conexión online con la
CPU.
El ajuste predeterminado es "Congelar vista".
Al hacer clic en el botón "Congelar vista" sucede lo siguiente:
● Se congela la vista actual de las entradas de la sesión/suscripción.
● La rotulación del botón cambia a "Descongelar".
Cuando la vista está congelada y se pulsa el botón "Descongelar", sucede lo siguiente:
● La vista de las entradas de la sesión/suscripción vuelve a actualizarse.
● La rotulación del botón cambia a "Congelar vista".

3668

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.3 Diagnosticar el servidor OPC UA

Detalles de la sesión/suscripción seleccionada
Si en la tabla de la sesión/suscripción selecciona una fila perteneciente a una sesión, aquí
obtendrá la siguiente información detallada sobre la sesión en cuestión:
● CurrentPublishRequestsInQueue
● ReadCount (TotalCount)
● ReadCount (ErrorCount)
● WriteCount (TotalCount)
● WriteCount (ErrorCount)
● PublishCount (TotalCount)
● PublishCount (ErrorCount)
● CreateSubscriptionCount (TotalCount)
● CreateSubscriptionCount (ErrorCount)
● CreateMonitoredItemsCount (TotalCount)
● CreateMonitoredItemsCount (ErrorCount)
● TotalRequestCount (TotalCount)
● TotalRequestCount (ErrorCount)
Si en la tabla de la sesión/suscripción selecciona una fila perteneciente a una suscripción, aquí
obtendrá la siguiente información detallada de la suscripción en cuestión:
● TransferredToSameClientCount
● PublishRequestCount
● DataChangedNotificationsCount
● EventNotificationsCount
● NotificationsCount
● LatePublishRequestCount
● CurrentKeepAliveCount
● TransferredToAltClientCount
Nota
Significado de la información detallada
Consulte el significado de la información detallada tanto para la sesión como para la
suscripción en la OPC UA Specification, Part 5, Information Model.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3669

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

2.4

Diagnóstico del sistema con 'Report System Errors'

2.4.1

Introducción al diagnóstico del sistema con "Report System Errors"

Introducción
Los componentes de hardware y los dispositivos de terceros (esclavos cuyas propiedades
están determinadas por su archivo GSD) pueden lanzar llamadas de bloques de organización
al producirse un error de sistema.
Ejemplo: En caso de rotura de hilo un módulo apto para el diagnóstico puede llamar el OB 82.
Los componentes de hardware ofrecen información sobre el error de sistema ocurrido. La
información del evento de arranque, es decir, los datos locales del OB asignado (y que
contienen, entre otros, el registro 0), ofrece información general sobre la ubicación (p. ej.,
dirección lógica del módulo) y el tipo de error (p. ej. fallo de canal o fallo de módulo).
Además, la información de diagnóstico adicional (lectura del registro 1 con la instrucción
"RDSYSST" o lectura del telegrama de diagnóstico de esclavos DP normalizados con la
instrucción "DPNRM_DG") permite especificar el error con mayor precisión: p. ej. canal 0 ó 1,
rotura de hilo o rebase del rango de medición.
El diagnóstico del sistema con "Report System Errors" (RSE) ofrece a los PLC S7-300/400,
ET200S, ET200Pro y el software SPS una forma cómoda de evaluar esta información de
diagnóstico y visualizarla en forma de avisos. Los bloques y textos de aviso necesarios se
crean en las propiedades de cada PLC. Sólo hay que cargar los bloques creados en la CPU y,
dado el caso, transferir los textos a los dispositivos HMI conectados.
Por ejemplo, para visualizar los eventos de diagnóstico gráficamente en un dispositivo HMI o
vía un servidor web, es posible generar uno o varios DB de estado. Estos DB de estado son
actualizados por los bloques de diagnóstico del sistema, por lo que contienen información
sobre el estado actual del sistema.

2.4.2

Principios básicos del diagnóstico del sistema
El diagnóstico del sistema mediante "Report System Errors" permite generar bloques para
analizar los errores del sistema y generar avisos con la descripción textual del error y su
ubicación.
Estos avisos se definen por componente capaz de emitir avisos (p. ej. fallo de canal o fallo de
rack) y están limitados a 255 avisos por componente capaz de emitir avisos. Una vez rebasado
este límite, aparece un aviso indicándolo.
Los ajustes generales que pueden realizarse y modificarse en el diagnóstico del sistema se
guardan junto con el proyecto. Estos ajustes influyen en el diagnóstico del sistema tan solo
después de generar los bloques, compilar la configuración hardware o cargar la configuración
en los componentes implicados.

3670

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

Procedimiento recomendado
Lleve a cabo los ajustes para la notificación de errores de sistema y la estructura de los avisos.
Determine qué bloques de diagnóstico se deben crear y configure los DB de estado. Genere
los bloques y cargue la configuración para aplicar los cambios.
Los siguientes capítulos ofrecen información detallada.
Nota
Al utilizar el diagnóstico del sistema puede cambiar el comportamiento del sistema de la
instalación en caso de error. Por ejemplo, en algunas circunstancias la CPU no pasa al estado
operativo "STOP", como sucede sin el diagnóstico del sistema.
Por lo tanto, debe asegurarse de que todos los mecanismos de protección de la instalación
funcionan correctamente.

2.4.3

Módulos con posibilidades de diagnóstico limitadas

Introducción
Los componentes de las estaciones S7-300 y S7-400, los dispositivos PROFINET IO, esclavos
DP y WinAC son asistidos por la función "Report System Errors" en la medida en que admitan
funciones como la alarma de diagnóstico, la alarma de cambio de módulo y el diagnóstico de
canal.

Componentes no soportados
"Report System Errors" no asiste los siguientes componentes:
● Configuraciones M7
● Configuraciones PROFIBUS-DP a través de interfaz maestra DP (CP 342-5 DP) en
estaciones S7-300
● Dispositivos PROFINET IO a través de un controlador externo (CP 343-1 Advanced) en
estaciones S7-300
En caso de rearranque, debe tenerse en cuenta además que pueden faltar avisos de alarma.
Este comportamiento se debe a que, en caso de rearranque, la memoria de acuse de avisos
de la CPU no se borra, pero "Report System Errors" restablece los datos internos. No se
notifican todos los fallos de módulo o canal producidos antes del arranque o durante una
avería.
Se notifican un máximo de 8 fallos de canal por módulo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3671

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

Nota
En caso de utilizar un CP 443-5 y de que este se encuentre en estado operativo STOP, durante
el arranque no se notificará un fallo del sistema maestro.

PROFIBUS DP
Para todos los esclavos PROFIBUS DP se muestran los fallos de estación (fallo/retorno) con
un mensaje en texto explícito.
Con todos los esclavos PROFIBUS DP se soporta el diagnóstico específico de fabricante con
las siguientes limitaciones:
● Solo se soportan esclavos V1. Se trata de esclavos cuyo archivo GSD contiene la entrada
"DPV1_Slave=1".
● El modo de alarma DP para este esclavo debe estar ajustado a "DPV0".

Repetidor de diagnóstico
En el modo DPV0, los avisos del repetidor de diagnóstico se emiten en texto explícito. Los
textos se extraen del archivo GSD.

PROFINET IO
A continuación encontrará el diagnóstico de los distintos dispositivos PROFINET IO asistidos
por "Report System Errors".
Fallos producidos durante el funcionamiento (CPU en RUN):
● Se soportan los fallos de dispositivo (fallo, retorno)
● Se soportan los fallos de módulo y submódulo (módulo/submódulo desenchufado, módulo/
submódulo incorrecto, módulo/submódulo compatible)
● Se soportan los fallos de canal y se evalúa la información ampliada de fallo de canal

AS-Interface
En el caso de los esclavos AS-Interface, se envía un aviso si la configuración real difiere de la
teórica.

Shared Devices
"Report System Errors" evalúa la información acerca de si un módulo o submódulo ha sido
configurado como Shared Device. Dado que "Report System Errors" siempre está enfocado a
una determinada CPU, solo se tienen en cuenta a efectos de diagnóstico los módulos/
submódulos que tienen activado el acceso total a dicha CPU. No se toman en consideración
los módulos/submódulos configurados como "sin asignar".

3672

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

2.4.4

Bloques de diagnóstico para notificar errores de sistema
Una vez realizados los ajustes para la notificación de errores de sistema, al compilar
nuevamente la configuración hardware se crean los bloques necesarios (FB con DB de
instancia asignado y uno o varios DB globales, así como una FC y, dependiendo de los ajustes,
OB todavía no disponibles) y los DB de estado.
Se crean los siguientes bloques:
● FB de diagnóstico (predeterminado: FB 49),
● DB de instancia para el FB de diagnóstico (predeterminado: DB 49),
● DB global (predeterminado: DB 50),
● FC de diagnóstico (predeterminado: FC 49),
● OB de error (se crean automáticamente si la CPU soporta esta función),
● OB cíclicos (si se ha elegido la opción correspondiente en el grupo "Configuración OB"),
● DB de estado opcionales
Los bloques creados se almacenan en el árbol de proyecto bajo "Bloques de programa >
Bloques de sistema > Report System Errors" (excepto los OB).

Nota
Los números de bloque ajustados de los bloques de diagnóstico de sistema generados no
pueden solaparse con números de bloques ya existentes. Tampoco pueden coincidir con los
números de bloques contenidos en las librerías.
Si surgen problemas al generar los bloques, compruebe si se han modificado los números
predeterminados (FB 49, DB 49, FC 49, DB 50). Si este no es el caso, intente repetir la
generación con los números de bloque predeterminados o bien utilice números que con
seguridad no se utilicen en otro lugar.

Consulte también
Propiedades de los bloques (Página 3673)

2.4.5

Propiedades de los bloques

Bloques de diagnóstico
Los bloques de diagnóstico creados (FB con DB de instancia asignado, uno o varios DBs
globales y una FC) evalúan los datos locales del OB de error y, si la hubiere, leen la información
de diagnóstico adicional de los componentes de hardware causantes del error.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3673

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'
Tienen las propiedades siguientes:
● Lenguaje de creación RSE (Report System Errors) (también sirve para los bloques
mencionados anteriormente)
● Know-how-protected (también es aplicable a los bloques mencionados anteriormente)
● Alarmas que aparecen con retardo en runtime

DBs de estado
Los DB de estado sirven de interfaz para los bloques de diagnóstico y permiten visualizar
eventos de diagnóstico gráficamente en un dispositivo HMI o un servidor web.

Consulte también
Ajustes para los bloques de diagnóstico del sistema (Página 3681)

2.4.6

OBs de error soportados
Los siguientes OB de error se crean automáticamente siempre que también sean soportados
por la CPU configurada:

3674

OB

Llamada del FB de diagnóstico

Descripción

OB 70 (error de redundancia en
periferia)

Posible

Este OB sólo existe en las CPU
H.

OB 72 (error de redundancia en
CPU)

Posible

Este OB sólo existe en las CPU
H.

OB 73 (error de redundancia en
la comunicación)

Posible

Este OB sólo existe en algunas
CPU H.

OB 81 (fallo de alimentación)

Posible

OB 82 (OB de alarma de diag‐
nóstico)

Posible

OB 83 (alarma de presencia de
módulo)

Posible

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'
OB

Llamada del FB de diagnóstico

Descripción

OB 85 (error de ejecución del
programa)

No es posible

Si 'RSE' crea este OB al generar
los bloques de diagnóstico, se
insertarán segmentos adiciona‐
les que realicen la siguiente lógi‐
ca:
● En caso de errores al
actualizar la memoria
imagen de proceso (p. ej.
desenchufar el módulo) se
impedirá el estado STOP de
la CPU para que se pueda
procesar el FB de
diagnóstico en el OB 83.
Tras notificación de "RSE"
tendrá efecto un posible
ajuste de "STOP de la CPU"
en el OB 83.
● En el resto de eventos de
error del OB 85, la CPU pasa
al estado STOP.

OB 86 (fallo de un rack de am‐
pliación, un sistema maestro DP
o una unidad de periferia des‐
centralizada)

Posible

Si los OB de error ya existen...
Los OB de error existentes no se sobrescriben. Dado el caso, la llamada del FB de diagnóstico
se añade al OB existente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3675

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

Si la configuración abarca la unidad de periferia descentralizada...
Para la evaluación de errores en la periferia descentralizada, el FB creado llama
automáticamente la instrucción "DPNRM_DG" (leer datos de diagnóstico del esclavo DP).
Para asegurar esta función, el FB creado debe llamarse o bien sólo en el OB 1 o bien en un OB
de alarma cíclica con un período corto y en los OB de arranque.
Nota
Considere lo siguiente:
● El OB 85 creado por el diagnóstico del sistema no provoca el paso de la CPU al estado
STOP cuando se produce el evento de error "Error al actualizar la memoria imagen de
proceso".
● La CPU también llama al OB 85 en los siguientes casos de error.
– "Evento de error para un OB no cargado"
– "Error al llamar o acceder a un bloque no cargado"
En estos casos de error, el OB 85 creado por el diagnóstico del sistema sigue originando
un estado STOP de la CPU, al igual que antes de utilizar el diagnóstico del sistema.

2.4.7

DB de estado de diagnóstico
En el diagnóstico de sistema existe la posibilidad de crear un DB de estado. Este DB de estado
es actualizado por los bloques de diagnóstico del sistema, por lo que contiene información
sobre el estado actual del sistema.

Interfaz para el DB de estado de diagnóstico
El bloque de datos generado (predeterminado: DB 127) ofrece la posibilidad de consultar el
estado de sistema de un componente configurado y, dado el caso, de todos sus componentes
subordinados.
Este bloque de datos es necesario para el soporte del diagnóstico del sistema a través del
servidor web o también a través del visor de diagnóstico. Está activado de forma
predeterminada.
Nota
Tenga en cuenta que el diagnóstico del sistema debe estar activado tanto en el servidor web
o visor de diagnóstico como en la ventana de inspección del PLC para poder representar los
datos de diagnóstico de los DBs de estado.
Tras efectuar un rearranque completo de una CPU con servidor web, el estado de los módulos
se indicará con retardo. Para reducir el tiempo de espera se puede llamar el bloque de
diagnóstico RSE en un OB de alarma cíclica con un periodo más corto.

3676

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

Estructura del DB de estado de diagnóstico

Dirección

Nombre

Tipo de datos

Descripción

+0

Directory

0

D_Version

WORD

Versión que soporta el diagnóstico del sistema

2

D_pGlobalState

WORD

Offset de byte hasta el principio de la parte "Glo‐
balState"

4

D_pQuery

WORD

Offset de byte hasta el principio de la parte "Query"

6

D_pComponent

WORD

Offset de byte hasta el principio de la parte "Com‐
ponent"

8

D_pError

WORD

Offset de byte hasta el principio de la parte "Error"

10

D_pState

WORD

Offset de byte hasta el principio de la parte "State"

12

D_pAlarm

WORD

Offset de byte hasta el principio de la parte "Alarm"

14

D_pSubComponent

WORD

Offset de byte hasta el principio de la parte "Sub‐
component"

+16

GlobalState

0

G_EventCount

WORD

ID del último evento (contador)

2.0

G_StartReporting

BOOL

Evaluación del arranque en curso

+20

Query

0

Q_ClientID_User

DWORD

ID del cliente; utilice aquí un valor entre 1 y 255.
Asegúrese de que los distintos clientes utilizan ID
distintas.

4

Q_ClientID_Intern

DWORD

ID del cliente (interna)

8.0

Q_WithSubComponent

BOOL

Con/sin estado de los componentes subordinados
(más lento)

8.1

Q_SubComponentAlarm

BOOL

Maestro AS-i devuelve alarmas del AS-iSlave

8.2

Q_Reserved2

BOOL

Reservado

8.3

Q_Reserved3

BOOL

Reservado

8.4

Q_Reserved4

BOOL

Reservado

8.5

Q_Reserved5

BOOL

Reservado

8.6

Q_Reserved6

BOOL

Reservado

8.7

Q_Reserved7

BOOL

Reservado

9.0

Q_Start

BOOL

Iniciar consulta

10

Q_Error

BYTE

Error interno en la consulta

11

Q_Reserved8

BYTE

Reservado

+32

Component

0

C_AddressMode

BYTE

Modo de direccionamiento del módulo

1

C_Reserved1

BYTE

Reservado

2

C_ComponentID

WORD

ID de hardware del componente (interna)

+36

Error

0

E_ErrorNo

WORD

Índice del error solicitado/efectivo

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3677

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'
Dirección

Nombre

Tipo de datos

Descripción

2.0

E_LastError

BOOL

Se activa cuando E_ErrorNo es distinto de 0. Valor
TRUE si E_ErrorNo es el índice del último error; de
lo contrario, FALSE

+40

State

0

S_Hierarchy

BYTE

Reservado

1

S_Periphery

BYTE

Reservado

2.0

S_SupFault

BOOL

No se puede acceder al componente.

2.1

S_NotAvailable

BOOL

El componente no está disponible.

2.2

S_Faulty

BOOL

El componente falla; la parte "Alarma" no está va‐
cía

2.3

S_MoreErrors

BOOL

Hay más errores de los que puede guardar el diag‐
nóstico del sistema

2.4

S_Maintenance1

BOOL

Mantenimiento necesario pendiente

2.5

S_Maintenance2

BOOL

Mantenimiento solicitado pendiente

2.6

S_Deactivated

BOOL

Se ha desactivado el componente *)

2.7

S_Reserved2

BOOL

Reservado

3.0

S_SubFault

BOOL

Fallo de un componente subordinado

3.1

S_SubMaintenance1

BOOL

Mantenimiento necesario en un componente su‐
bordinado

3.2

S_SubMaintenance2

BOOL

Mantenimiento solicitado para un componente su‐
bordinado

3.3

S_SubDeactivated

BOOL

Por lo menos un componente subordinado está
desactivado

3.4

S_Reserved4

BOOL

Reservado

3.5

S_Reserved5

BOOL

Reservado

3.6

S_Reserved6

BOOL

Reservado

3.7

S_Reserved7

BOOL

Reservado

4

S_TIAMS

DWORD

Estado de mantenimiento del componente

8

S_TIAMSChannelExist

DWORD

Estado de mantenimiento: canales configurados

12

S_TIAMSChannelOK

DWORD

Estado de mantenimiento: fallan canales

16

S_ChannelCount

WORD

Número de canales; sólo es válido si está activado
Q_WithSubComponent

18.0

S_ChannelVector

ARRAY
[0..255]

Lista de canales afectados; sólo es válida si está
activado Q_WithSubComponent

+90

Alarm

0

A_ComponentID

WORD

ID de hardware del componente (interna)

2

A_TextID1

WORD

ID del primer texto de error

4

A_TextLexikonID1

WORD

ID de la primera librería de textos de error

6

A_HelpTextLexikonID1

WORD

ID de la primera librería de textos de ayuda

8

A_MapTextID

WORD

ID del primer texto de error (HMI)

10

A_MapHelpTextID

WORD

ID del primer texto de ayuda (HMI)

12

A_TextID2

WORD

ID del segundo texto de error

14

A_TextLexikonID2

WORD

ID de la segunda librería de textos de error

BOOL

3678

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'
Dirección

Nombre

Tipo de datos

Descripción

16

A_HelpTextLexikonID2

WORD

ID de la segunda librería de textos de ayuda

18

A_MapTextID2

WORD

ID del segundo texto de error (HMI)

20

A_MapHelpTextID2

WORD

ID del segundo texto de ayuda (HMI)

22

A_AlarmID

DWORD

Número de aviso

26

A_ValueCount

WORD

Números de bytes restantes ocupados (12)

28

A_AssociatedValue

ARRAY [1..n]

Valores asociados del aviso

WORD

n = A_ValueCount / 2 (= 6)

+130

SubComponent

0

U_SubComponentCount

WORD

Número de componentes subordinados

2

U_SubComponentFault

ARRAY [1..n]

Lista de componentes subordinados

BYTE

"n" depende de la configuración **)

*) Si se ha desactivado el componente, el índice del error solicitado/efectivo no cambia y
"E_LastError" se pone a "true". Además, el rango de variables de la alarma no se llena.
**) La lista de componentes subordinados sólo es válida si está activado
Q_WithSubComponent. Por cada componente configurado, el ARRAY contiene un byte de
estado. En el caso de un maestro, el ARRAY contiene el estado de las estaciones configuradas
por orden ascendente de la ID de estación. En el caso de una estación, el ARRAY contiene el
estado de los slots configurados por orden ascendente de la ID del slot. Este campo puede
contener un máximo de 4096 entradas (para un sistema IO); sólo se indica el tamaño máximo
real.
El byte de estado por componente subordinado se define tal como se indica a continuación:
Bit 0 = SubFault: el componente no es accesible
Bit 1 = Fault: el componente no está disponible o falla
Bit 2 = Maintenance1: el componente ha notificado mantenimiento
Bit 3 = Maintenance2: el componente ha notificado mantenimiento
Bit 4 = Deactivated: el componente ha sido desactivado
Bit 5 = SubFault: falla un componente subordinado
Bit 6 = SubMaintenance1: un componente subordinado ha notificado mantenimiento
Bit 7 = SubMaintenance2: un componente subordinado ha notificado mantenimiento

2.4.8

Visualización de los ajustes del diagnóstico del sistema

Requisitos
Se encuentra en la carpeta "Datos comunes" del árbol del proyecto.

Procedimiento
Para mostrar y editar las propiedades del diagnóstico del sistema, proceda del siguiente modo:
1. Haga doble clic en la entrada "Ajustes de diagnóstico del sistema".
2. En el diagnóstico del sistema puede ver y editar los distintos ajustes.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

3679

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'

2.4.9

Configuración

2.4.9.1

Configuración general

Activar el diagnóstico de sistema para este PLC
Esta opción está desactivada por defecto.

Nota
Si la opción está desactivada, en el servidor web y en el visor de diagnóstico no se leerán datos
de diagnóstico aunque la opción esté activada allí.
Si esta opción se desactiva en un PLC en el que estaba activada previamente, todos los datos
de diagnóstico se borrarán la próxima vez que se compile la configuración hardware.

2.4.9.2

Ajustes de avisos
Para las categorías de aviso listadas a continuación se puede definir si emitir un aviso y si el
aviso debe ser de acuse obligatorio o no.
● Error
● Mantenimiento solicitado
● Mantenimiento necesario
● Información
Active para ello los botones de opción deseados en las columnas "Aviso" y "Acuse".
En la columna "Categoría" se indica la categoría de aviso ajustada.
En la columna "Prioridad" se muestra la prioridad ajustada para la categoría.

2.4.9.3

Configuración del soporte de diagnóstico
Con ayuda del soporte de diagnóstico el FB de diagnóstico genera datos de diagnóstico en un
DB de estado especial. En tal caso, este puede representarse gráficamente, p. ej. en un
dispositivo HMI.

DB de estado
Active el DB de estado para leer a través de este bloque de datos el estado de sistema actual
de los componentes configurados.

3680

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Diagnosticar dispositivos y redes
2.4 Diagnóstico del sistema con 'Report System Errors'
Está predeterminado el siguiente DB de estado:
Bloque

Nombre

Número

DB de estado de diagnóstico

RSE_DIAGNOSTIC_STA‐
TUS_DB

127

No obstante, es posible asignar a este bloque otro nombre y/o número, siempre y cuando aún
no estén en uso.
Si la funcionalidad "Activar webserver en este módulo" está activada en las propiedades de la
CPU, el DB de estado de diagnóstico debe estar forzosamente activado. De forma
predeterminada se genera el DB 127 si la CPU soporta el servidor web y éste está activado en
las propiedades de la CPU.

Ajustes de diagnóstico avanzados
Para la consulta es imprescindible que el PLC incluya la instrucción "D_ACT_DP".
Active la opción "Consulta si el estado es "activado/desactivado" tras el arranque del PLC", si
desea que se consulte el estado de los esclavos.
Ac