Descripci√≥n del sistema STEP 7 y
WinCC

1
___________________

2
___________________
3
L√©ame
___________________
4
Instalaci√≥n
___________________
5
Migraci√≥n de proyectos y programas
___________________
6
Introducci√≥n al TIA Portal
___________________
7
Novedades del TIA Portal

SIMATIC
STEP 7 y
WinCC Engineering V16
Manual de Sistema

Editar proyectos

___________________
8

Edici√≥n de los datos de proyecto

9
___________________

Uso de la administraci√≥n de usuarios

10
___________________
11
Edici√≥n de dispositivos y redes
Uso de librer√≠as

Impresi√≥n de la Ayuda en pantalla

11/2019

Impresi√≥n de la Ayuda en pantalla

Programaci√≥n del PLC

12

Visualizaci√≥n de procesos

13

Utilizar funciones tecnol√≥gicas

14

Uso de las funciones online y de
diagn√≥stico

15

Procesamiento de datos de energ√≠a
y optimizaci√≥n de consumo de
energ√≠a

16

Uso de Team Engineering

17

Trabajar con el servidor de proyectos
TIA

18

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros
Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de
advertencia; las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al
grado de peligro las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la
misma, particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y
experiencia, el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o
manipulaci√≥n de dichos productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las
indicaciones y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas
Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos.
Sin embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena
concordancia. El contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles
correcciones se incluyen en la siguiente edici√≥n.

Siemens AG
Division Digital Factory
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

Descripci√≥n del sistema STEP 7 y
WinCC
Manual de programaci√≥n y manejo

11/2019

Escalado de STEP 7 y
WinCC en el TIA Portal

1

Opciones para STEP 7 y
WinCC Engineering

2

Opciones para S7-1500
Runtime

3

Opciones para el sistema de
ingenier√≠a STEP 7

4

Opciones para sistemas de
ingenier√≠a y runtime WinCC

5

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Digital Industries
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

Escalado de STEP 7 y WinCC en el TIA Portal ...........................................................................................5

2

Opciones para STEP 7 y WinCC Engineering .............................................................................................7

3

Opciones para S7-1500 Runtime .................................................................................................................9

4

Opciones para el sistema de ingenier√≠a STEP 7........................................................................................11

5

Opciones para sistemas de ingenier√≠a y runtime WinCC ...........................................................................13

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

3

√çndice

4

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

1

Escalado de STEP 7 y WinCC en el TIA Portal
Volumen de prestaciones de los productos

El siguiente gr√°fico muestra la gama de prestaciones de los distintos productos de STEP 7 y
WinCC:

6,0$7,&67(3

6,0$7,&:LQ&&

/HQJXDMHVGHSURJUDPDFL¬µQ
.23)836&/$:/ 6*5$3+

0DQHMR\YLVXDOL]DFL¬µQ
DSLHGHP¬£TXLQD
$SOLFDFLRQHV6&$'$

&RQWURODGRUHVSRUVRIWZDUH6

6&$'$

6:LQ$&
3URIHVVLRQDO

$GYDQFHG

&RPIRUW

6

%DVLF

3URIHVVLRQDO

6

%DVLF

3&PRQRSXHVWR
&RPIRUW3DQHOV\[
VLQPLFU¬µIRQR 0RELOH
%DVLF3DQHOV

&RPXQLFDFL¬µQ
352),%86352),1(7$6L,2/LQN(7WRSRORJ¬ØDGHUHG
352),VDIHY¬ØD352),%86\352),1(7
)XQFLRQHVFRPXQHV
'LDJQ¬µVWLFRGHOVLVWHPDLPSRUWDFL¬µQ\H[SRUWDFL¬µQD([FHOUHXWLOL]DFL¬µQGHHOHPHQWRVFRQD\XGDGHOLEUHU¬ØDV\PXFKRP¬£V
* Solo en STEP 7 Professional para S7-300/400/WinAC y S7-1500
** Con el paquete opcional "STEP 7 Safety Advanced" instalado

STEP 7
STEP 7 (TIA Portal) es el software de ingenier√≠a para configurar la familia de controladores
SIMATIC S7-1200, S7-1500, S7-300/400 y controladores de software (WinAC). Hay
disponibles dos ediciones de STEP 7 (TIA Portal), dependiendo de las familias de
controladores que se desee configurar:
‚óè STEP 7 Basic para la configuraci√≥n del S7-1200
‚óè STEP 7 Professional para configurar S7-1200, S7-1500, S7-300/400 y controladores de
software (WinAC)

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

5

Escalado de STEP 7 y WinCC en el TIA Portal

WinCC
WinCC (TIA Portal) es un software de ingenier√≠a para configurar SIMATIC Panels, PC
industriales SIMATIC y PC est√°ndar con el software de visualizaci√≥n WinCC Runtime
Advanced o el sistema SCADA WinCC Runtime Professional.
Hay disponibles cuatro ediciones de WinCC (TIA Portal), dependiendo de los sistemas de
manejo que se desee configurar:
‚óè WinCC Basic para la configuraci√≥n de los Basic Panels
WinCC Basic se incluye siempre en las ediciones STEP 7 Basic y STEP 7 Professional.
‚óè WinCC Comfort para la configuraci√≥n todos los Panels (incluidos los Comfort Panels,
Mobile Panels)
‚óè WinCC Advanced para la configuraci√≥n de todos los Panels y PCs con el software de
visualizaci√≥n WinCC Runtime Advanced
WinCC Runtime Advanced es un software de visualizaci√≥n para sistemas monopuesto
basados en PC. WinCC Runtime Advanced est√° disponible con licencias para 128, 512, 2k,
4k, 8k y 16k PowerTags (variables con conexi√≥n al proceso).
‚óè WinCC Professional para configurar Panels as√≠ como PCs con WinCC Runtime Advanced
o el sistema SCADA WinCC Runtime Professional WinCC Professional est√° disponible en
las ediciones WinCC Professional para 512 y 4096 PowerTags, y como WinCC
Professional para el m√°ximo de PowerTags.
WinCC Runtime Professional es un sistema SCADA para crear una configuraci√≥n con
sistemas monopuesto y sistemas multipuesto con clientes est√°ndar o web. WinCC Runtime
Professional est√° disponible con licencias para 128, 512, 2k, 4k, 8k, 64k, 100k, 150k y 256k
PowerTags (variables con conexi√≥n al proceso).

6

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

Opciones para STEP 7 y WinCC Engineering

2

Para STEP 7 y WinCC Engineering est√°n disponibles las siguientes opciones para todas las
versiones:
‚óè TIA Portal Multiuser (trabajo en grupo en un proyecto de TIA Portal)
‚óè TIA Portal Cloud Connector (acceso a interfaces locales con uso RDP)
‚óè TIA Portal Teamcenter Gateway (conexi√≥n a Teamcenter)
‚óè SIMATIC Visualization Architect (creaci√≥n de contenidos HMI basados en proyectos
STEP7)
‚óè SIMATIC Energy Suite (gesti√≥n de la energ√≠a)
‚óè SIMATIC Safe Kinematics (vigilancia segura de zonas y velocidades de los movimientos de
la cinem√°tica)

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

7

Opciones para STEP 7 y WinCC Engineering

8

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

Opciones para S7-1500 Runtime

3

La ingenier√≠a de las funciones siguientes est√° integrada en los paquetes de ingenier√≠a de
SIMATIC STEP 7 Professional o SIMATIC Energy Suite. Se desbloquea en el contexto de la
CPU:
‚óè SIMATIC ProDiag (diagn√≥stico de m√°quinas e instalaciones para S7-1500 y SIMATIC HMI)
‚óè SIMATIC OPC UA S7-1500 (conexi√≥n a S7-1500 de cualquier dispositivo externo)
‚óè SIMATIC Energy Suite S7-1500 (gesti√≥n de la energ√≠a)

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

9

Opciones para S7-1500 Runtime

10

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

Opciones para el sistema de ingenier√≠a STEP 7

4

Para la ingenier√≠a con STEP 7 est√°n disponibles las opciones siguientes:
‚óè SIMATIC STEP 7 Safety Basic/Advanced (programa de seguridad para CPU F)
‚óè SIMATIC S7-PLCSIM Advanced (controlador virtual S7-1500)
‚óè SIMATIC Target 1500S‚Ñ¢ for Simulink¬Æ (Add-On para Simulink¬Æ)

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

11

Opciones para el sistema de ingenier√≠a STEP 7

12

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

Opciones para sistemas de ingenier√≠a y runtime
WinCC

5

Los SIMATIC Panels, as√≠ como WinCC Runtime Advanced y WinCC Runtime Professional
contienen todas las funciones esenciales para el manejo y visualizaci√≥n de m√°quinas e
instalaciones. Para ampliar el √°mbito de tareas, las funciones se pueden complementar en
parte con opciones adicionales.

Opciones para Basic Panel
Para Basic Panels se dispone de las siguientes posibilidades de ampliaci√≥n:
‚óè WinCC Sm@rtServer (manejo remoto)

Opciones para Comfort Panels, Mobile Panels
Para Comfort Panels y Mobile Panels existen las siguientes posibilidades de ampliaci√≥n:
‚óè WinCC Audit (Audit Trail y firma electr√≥nica para aplicaciones reguladas)
‚óè SIMATIC ProDiag (diagn√≥stico de m√°quinas e instalaciones para S7-1500 y SIMATIC HMI)

Opciones para WinCC Runtime Advanced
Para WinCC Runtime Advanced existen las siguientes posibilidades de ampliaci√≥n:
‚óè WinCC SmartServer (manejo remoto)
‚óè WinCC Recipes (sistema de recetas)
‚óè WinCC Logging (archivaci√≥n de valores de proceso y avisos)
‚óè WinCC Audit (Audit Trail para aplicaciones reguladas)
‚óè SIMATIC ProDiag (diagn√≥stico de m√°quinas e instalaciones para S7-1500 y SIMATIC HMI)
Nota
En comparaci√≥n con WinCC flexible 2008, en la funcionalidad b√°sica se han incluido funciones
de las opciones WinCC flexible /Sm@rtService, WinCC flexible /Sm@rtAccess, as√≠ como la
opci√≥n WinCC flexible /OPC-Server.

Opciones para WinCC Runtime Professional
Para WinCC Runtime Professional existen las siguientes posibilidades de ampliaci√≥n:
‚óè WinCC Client (cliente est√°ndar para crear sistemas multipuesto)
‚óè WinCC Server (en WinCC Runtime se ha implementado la funcionalidad de servidor)
‚óè WinCC Recipes (sistema de recetas, anteriormente WinCC/UserArchives)

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

13

Opciones para sistemas de ingenier√≠a y runtime WinCC

‚óè WinCC WebNavigator (manejo y observaci√≥n v√≠a web)
‚óè WinCC DataMonitor (visualizaci√≥n y evaluaci√≥n de estados de proceso y datos hist√≥ricos)
‚óè WebUX (manejo y visualizaci√≥n mediante la web sin depender de la plataforma ni del
navegador)
‚óè SIMATIC Information Server 2014 (an√°lisis basados en la web e independientes del
navegador e informes de datos de proceso hist√≥ricos)
‚óè SIMATIC Process Historian 2014 (servidor de ficheros de avisos y datos de proceso para
toda la instalaci√≥n)
‚óè Industrial Data Bridge (conexiones configurables con bases de datos y sistemas TI)
‚óè Redundancy (disponibilidad aumentada mediante servidores redundantes)
‚óè SIMATIC ProDiag (diagn√≥stico de m√°quinas e instalaciones para S7-1500 y SIMATIC HMI)
Nota
En comparaci√≥n con WinCC V7, en la funcionalidad b√°sica se han incluido funciones de las
opciones WinCC /OPC-Server, WinCC /ConnectivityPack. Asimismo, la funcionalidad b√°sica
incluye Runtime API de WinCC /ODK.

14

Descripci√≥n del sistema STEP 7 y WinCC
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal
Manual de programaci√≥n y manejo

11/2019

Novedades del TIA Portal
V16

1

Novedades de TIA Portal
V15.1

2

Novedades del TIA Portal
V15

3

Novedades del TIA Portal
V14 SP1

4

Novedades del TIA Portal
V14

5

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Digital Industries
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

2

3

4

Novedades del TIA Portal V16 .....................................................................................................................5
1.1

SIMATIC STEP 7 .....................................................................................................................5

1.2

SIMATIC WinCC ......................................................................................................................8

1.3

SINAMICS Startdrive .............................................................................................................11

1.4

SIMOCODE ES......................................................................................................................12

1.5

Funciones de sistema ............................................................................................................13

1.6

Opciones de ingenier√≠a ..........................................................................................................17

1.7

Opciones de Runtime.............................................................................................................21

1.8

Instalar paquetes de idioma ...................................................................................................21

Novedades de TIA Portal V15.1 .................................................................................................................23
2.1

SIMATIC STEP 7 ...................................................................................................................23

2.2

SIMATIC WinCC ....................................................................................................................26

2.3

SINAMICS Startdrive .............................................................................................................27

2.4

SIMOCODE ES......................................................................................................................29

2.5

Opciones de ingenier√≠a ..........................................................................................................30

2.6

Opciones de Runtime.............................................................................................................35

Novedades del TIA Portal V15 ...................................................................................................................37
3.1

Introducci√≥n............................................................................................................................37

3.2

SIMATIC STEP 7 ...................................................................................................................37

3.3

SIMATIC WinCC ....................................................................................................................41

3.4

SINAMICS Startdrive .............................................................................................................42

3.5

SIMOCODE ES......................................................................................................................43

3.6

Opciones de ingenier√≠a ..........................................................................................................44

3.7

Opciones de Runtime.............................................................................................................48

Novedades del TIA Portal V14 SP1 ...........................................................................................................51
4.1

Introducci√≥n............................................................................................................................51

4.2

SIMATIC STEP 7 ...................................................................................................................51

4.3

SIMATIC WinCC ....................................................................................................................54

4.4

SINAMICS Startdrive .............................................................................................................56

4.5

Opciones de ingenier√≠a ..........................................................................................................56

4.6

Opciones de runtime ..............................................................................................................58

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

3

√çndice

5

4

Novedades del TIA Portal V14 ...................................................................................................................61
5.1

Introducci√≥n............................................................................................................................61

5.2

SIMATIC STEP 7 ...................................................................................................................61

5.3

SIMATIC WinCC ....................................................................................................................64

5.4

SINAMICS Startdrive .............................................................................................................65

5.5

SIMOTION SCOUT TIA .........................................................................................................67

5.6

SIMOCODE ES V14 ..............................................................................................................67

5.7

Opciones de ingenier√≠a ..........................................................................................................68

5.8

Opciones de runtime ..............................................................................................................70

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.1

1

SIMATIC STEP 7
Las principales novedades de STEP 7 se resumen a continuaci√≥n. Encontrar√° informaci√≥n
m√°s detallada sobre los diferentes temas en los cap√≠tulos de la documentaci√≥n de los
productos.

Software Units
‚óè Las tablas de variables de las Software Units se pueden publicar. De este modo es posible
acceder a las variables PLC y constantes globales que se hayan declarado en otra
Software Unit.
‚óè La configuraci√≥n autom√°tica de programas en Software Units est√° asistida por dos nuevas
funciones:
‚Äì La interfaz Openness permite acceder a las Software Units y todos los elementos de
programa incluidos.
‚Äì Es posible importar y exportar fuentes SCL a Software Units.

Instrucciones
‚óè En las CPU S7-1500, la nueva instrucci√≥n "File Delete" borra los archivos existentes en la
Memory Card.
‚óè La instrucci√≥n "TMAIL_C" existente ha sido ampliada para las CPU S7-1500 / S7-1200 del
modo siguiente:
‚Äì Ahora existe la posibilidad de enviar como datos adjuntos de un correo electr√≥nico los
Data Logs, las recetas y los archivos de usuario que se encuentran en la SIMATIC
Memory Card utilizando una interfaz integrada de la CPU.
‚Äì Ahora tambi√©n se admite el valor cero para el par√°metro "WatchDogTime". El valor cero
significa que para la ejecuci√≥n de "TMAIL_C" no se vigila el tiempo.
‚Äì Hay otras informaciones de error.
‚óè Adem√°s, en las CPU S7-1200 la instrucci√≥n existente "TMAIL_C" se ha ampliado de modo
que ahora tiene el mismo volumen de funciones que en las CPU S7-1500, p. ej. encriptaci√≥n
de correo electr√≥nico.
‚óè Rendimiento mejorado de las instrucciones "Serialize: Serializar", "Deserialize:
Deserializar" y "CMP" (comparador) en S7-1500.
Para utilizar las instrucciones con rendimiento m√°ximo, haga lo siguiente:
Utilice un tipo de datos concreto en lugar de un VARIANT en los par√°metros que definen el
origen y el destino de las instrucciones.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

5

Novedades del TIA Portal V16
1.1 SIMATIC STEP 7

Nuevas instrucciones PID
Hay tres nuevas funciones auxiliares PID disponibles. Con ellas se reduce el esfuerzo de
programaci√≥n en tareas de regulaci√≥n y control.
‚óè "Filter_PT1"
La instrucci√≥n "Filter_PT1" es un elemento de transferencia proporcional con un retardo de
primer orden, denominado tambi√©n "Elemento PT1".
"Filter_PT1" puede utilizarse a modo de:
‚Äì Filtro paso bajo, para atenuar los componentes de alta frecuencia de una se√±al, como,
por ejemplo, el ruido.
‚Äì Elemento de retardo, para filtrar saltos de se√±al, por ejemplo, de la consigna o el valor
de salida de un regulador.
‚Äì Bloque de simulaci√≥n de proceso, para implementar un lazo de regulaci√≥n cerrado en la
CPU, y as√≠ comprobar, por ejemplo, el regulador antes de la puesta en marcha.
Es posible especificar los siguientes par√°metros de filtro:
‚Äì Ganancia proporcional (Gain)
‚Äì Constante de tiempo de retardo (Lag)
‚óè "Filter_PT2"
La instrucci√≥n "Filter_PT2" es un elemento de transferencia proporcional con un retardo de
segundo orden, denominado tambi√©n "Elemento PT2".
"Filter_PT2" puede utilizarse a modo de:
‚Äì Filtro paso bajo, para atenuar los componentes de alta frecuencia de una se√±al como,
por ejemplo, el ruido.
‚Äì Elemento de retardo, para filtrar saltos de se√±al, por ejemplo, de la consigna o el valor
de salida de un regulador.
‚Äì Bloque de simulaci√≥n de proceso, para implementar un lazo de regulaci√≥n cerrado en la
CPU, y as√≠ comprobar, por ejemplo, el regulador antes de la puesta en marcha.
Es posible especificar los siguientes par√°metros de filtro:
‚Äì Ganancia proporcional (Gain)
‚Äì Constante de tiempo (TimeConstant)
‚Äì Atenuaci√≥n (Damping)
‚óè "Filter_DT1"
La instrucci√≥n "Filter_DT1" es un elemento diferenciador con un retardo de primer orden,
denominado tambi√©n "Elemento DT1".
"Filter_DT1" puede utilizarse a modo de:
‚Äì Filtro paso alto, para atenuar los componentes de baja frecuencia de una se√±al.
‚Äì Elemento diferenciador, para calcular la derivada de una se√±al como, por ejemplo, la
velocidad a partir de valores de posici√≥n.
‚Äì Control anticipativo, para paliar los efectos de fallos mensurables en el proceso.
Es posible especificar los siguientes par√°metros de filtro:
‚Äì Tiempo de diferenciaci√≥n (Td)
‚Äì Constante de tiempo de retardo (Lag)

6

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.1 SIMATIC STEP 7

Editores para lenguajes de programaci√≥n
‚óè Comentarios multiling√ºes en SCL
La nueva sintaxis (/* ... */) permite la entrada de comentarios multiling√ºes y regiones en
bloques SCL. Con ello es posible comentar implementaciones de c√≥digo en distintos
idiomas.
‚óè Comparaci√≥n detallada con bloques de la librer√≠a de proyecto y la librer√≠a global
Los bloques del proyecto se pueden cotejar con plantillas maestras y versiones de tipo
concretas de la librer√≠a de proyecto o la librer√≠a global a trav√©s del editor de comparaci√≥n.
‚óè Las instrucciones CASE en bloques SCL soportan secuencias de bits
Adem√°s de enteros, las instrucciones CASE permiten ahora tambi√©n secuencias de bits
como, por ejemplo, Byte o Word, en la expresi√≥n.
‚óè Los bucles FOR en bloques SCL soportan tipos de datos sin signo
Ahora los bloques FOR permiten tambi√©n los tipos de datos sin signo UINT, USINT, UDINT
y ULINT como variable de control.
‚óè Ir a definici√≥n
La navegaci√≥n a trav√©s de "Ir a definici√≥n" se ofrece ahora tambi√©n en la tabla de variables
(variable del tipo de datos UDT), as√≠ como en la tabla de observaci√≥n y la tabla de forzado
permanente.
‚óè Instancia de par√°metro con DB_ANY
Al llamar un bloque de funci√≥n, la instancia de par√°metro se puede transferir ahora tambi√©n
a trav√©s de una variable del tipo de datos DB_ANY.
‚óè Visualizaci√≥n de la representaci√≥n de operandos e informaci√≥n sobre la variable para
bloques SCL
La visualizaci√≥n de la representaci√≥n de operandos y la informaci√≥n sobre la variable en
SCL se puede adaptar ahora independientemente de los dem√°s lenguajes de
programaci√≥n a trav√©s de los ajustes generales.

Configuraci√≥n hardware
‚óè Las CPU S7-1500R/H soportan bloques GRAPH y ProDiag, as√≠ como la instrucci√≥n
"Program_Alarm".
‚óè Las siguientes CPU nuevas de la familia ET 200pro completan la oferta:
‚Äì CPU 1513pro (F)-2 PN

Trace
La nueva funci√≥n "Seguimiento del proyecto" sirve para registrar el seguimiento de todos los
dispositivos. Para ello se pueden crear seguimientos para varios dispositivos en una ubicaci√≥n
central del √°rbol del proyecto que se cargan en las CPU pertinentes. El evento de disparo de
una CPU se transfiere a todos los dispositivos, con lo que los registros se sincronizan. Una vez
finalizados los registros, el seguimiento del proyecto los presenta en un diagrama com√∫n.
Esta funci√≥n est√° disponible para las CPU de la serie S7-1500, ET200 SP, Drive Controller y
Open Controller con una versi√≥n de firmware V2.8. o superior.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

7

Novedades del TIA Portal V16
1.2 SIMATIC WinCC

1.2

SIMATIC WinCC

WinCC Unified
WinCC Unified es la nueva generaci√≥n de desarrollo HMI:
‚óè Configuraci√≥n de WinCC Unified en el ya conocido TIA Portal para un sistema basado en
panel (Comfort Unified Panel) y un sistema basado en PC.
‚óè Posibilidad de escalar el proyecto WinCC Unified de forma progresiva:
‚Äì Cambio sencillo de un proyecto WinCC Unified basado en panel a uno basado en PC
dentro de TIA Portal sin perder informaci√≥n de configuraci√≥n
‚Äì La misma funcionalidad tanto en un sistema basado en panel como en uno basado en
PC: controles con aspecto y funcionalidad id√©nticos, posibilidades de dinamizaci√≥n
id√©nticas y JavaScript como nuevo lenguaje de scripting
‚Äì Ampliaci√≥n de funcionalidades gracias a la incorporaci√≥n de opciones (p. ej. FileBased
Logging, ParameterControl)
‚óè Controles nuevos e innovadores basados en la tecnolog√≠a HTML5/SVG.
‚óè Posibilidad de ampliaci√≥n de la interfaz de usuario mediante SVG o CustomWebControls
espec√≠ficos de cliente y dinamizables (basados en HTML5/SVG).

WinCC Unified PC
‚óè Manejo y visualizaci√≥n de la producci√≥n desde un terminal cualquiera utilizando un
navegador web compatible con HTML5.
‚óè Acceso simult√°neo e independiente de varios clientes a un servidor desde un sistema de
PC a pie de m√°quina hasta un sistema SCADA.
‚óè Funcionalidad Openness:
‚Äì Creaci√≥n automatizada de proyectos WinCC Unified utilizando la nueva funcionalidad
HMI ES Openness.
‚Äì Acceso de lectura y escritura a los valores de proceso y alarmas en tiempo de ejecuci√≥n
mediante la funcionalidad HMI RT Openness.
‚Äì El mecanismo Piping permite acceder a datos de runtime en tiempo real.
‚óè La jerarqu√≠a tecnol√≥gica de la instalaci√≥n en TIA Portal permite realizar una configuraci√≥n
HMI orientada a objetos.

SIMATIC HMI Unified Comfort Panels
Los SIMATIC HMI Unified Comfort Panels son la √∫ltima generaci√≥n de paneles de operador
High End de 7 a 22 pulgadas. El frente de cristal con tecnolog√≠a multit√°ctil, la posibilidad de
ampliaci√≥n por medio de aplicaciones y la visualizaci√≥n mediante WinCC Unified son solo
algunos de los puntos destacados de esta nueva generaci√≥n de paneles.
Resumen de las novedades de esta generaci√≥n de paneles:
‚óè Tecnolog√≠a multit√°ctil capacitiva, colores vivos y excelente legibilidad de la pantalla
‚óè La misma funcionalidad para todos los paneles de 7 a 22 pulgadas

8

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.2 SIMATIC WinCC
‚óè Realizaci√≥n de aplicaciones m√°s grandes gracias al destacado aumento de los l√≠mites de
rendimiento y del sistema
‚óè Posibilidad de ampliaci√≥n de la funcionalidad est√°ndar con aplicaciones
‚óè Todo est√° integrado: desde el control de acceso mediante comunicaci√≥n cifrada hasta los
parches de seguridad
‚óè Puesta en marcha integral con TIA Portal. No se necesita administraci√≥n de TI
‚óè Visualizaci√≥n mediante WinCC Unified

Comfort Panel / Mobile Panel
Teclado en pantalla:
‚óè Selecci√≥n de teclados internacionales para realizar entradas en el panel
‚óè Entrada oculta con conexi√≥n mediante Sm@rtServer en paneles con teclado de pantalla
completa
‚óè Selecci√≥n entre pantalla completa o teclado peque√±o en pantallas de 7 y 9 pulgadas
Impresi√≥n de c√≥digos de barras
‚óè La legibilidad de la graf√≠a de los c√≥digos de barras en una impresi√≥n puede mejorarse
mediante el complemento ProSave
Actualizaci√≥n del control de PDF y de la impresora de PDF
‚óè Uso de versiones actuales de PDF

Opci√≥n HMI Plus V3
Nuevas funciones disponibles:
‚óè Ampliaci√≥n de los lectores de tarjetas RFID disponibles
‚óè Indicaci√≥n de fecha para la √∫ltima descarga del proyecto

WinCC Advanced
WinCC Runtime Advanced
‚óè ProDiag
‚Äì Funci√≥n de sistema "ShowBlockInTIAPortal": es posible suministrar un valor din√°mico
de una variable al par√°metro "TIA Portal project path"

WinCC Professional
Archivado
‚óè Archivado de variables de string

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

9

Novedades del TIA Portal V16
1.2 SIMATIC WinCC
Variables/comunicaci√≥n
‚óè Mejoras durante el arranque autom√°tico entre la comunicaci√≥n servidor <> cliente
‚óè Posibilidad de desconectar la comunicaci√≥n remota v√≠a Simatic Shell
‚óè Nuevo simulador de variables
ProDiag
‚óè Los comentarios jer√°rquicos se muestran en el visor de c√≥digo PLC
‚óè Se muestran los valores de los operandos en accesos Slice
‚óè El estado de conexi√≥n servidor <> cliente se muestra en los controles
Adicionalmente
‚óè Navegador web compatible con IE 11
‚óè El estado de conexi√≥n del PLC puede visualizarse y editarse mediante una variable de
sistema.

Consulte tambi√©n
https://support.industry.siemens.com/cs/ww/es/view/109758056 (https://
support.industry.siemens.com/cs/ww/es/view/109758056/en)

10

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.3 SINAMICS Startdrive

1.3

SINAMICS Startdrive

SINAMICS Startdrive Basic
‚óè Ampliaci√≥n de la familia S120 con el dise√±o Blocksize
‚Äì Soporte de CU310-2 PN
‚Äì Soporte de los adaptadores de CU CUA31 y CUA32
‚Äì Soporte de los m√≥dulos de potencia PM240-2
‚Äì Soporte de la protecci√≥n de know-how y la protecci√≥n contra escritura
‚óè Ampliaciones para accionamientos basados en CU320-2 PN
‚Äì Soporte de los controladores SIMATIC Drive
Con CU320-2 Integrated para un m√°ximo de 6 accionamientos
Ampliable con otros CU320-2 PN o con S210
Conexi√≥n del objeto tecnol√≥gico Detector con telegrama 39x
Ver tambi√©n la autorizaci√≥n para ventas de los controladores SIMATIC Drive
‚Äì Soporte de la protecci√≥n de know-how y la protecci√≥n contra escritura del dispositivo
‚Äì Soporte del DRIVE-CLiQ Hub
DMC 20
DME 20
‚Äì Soporte de UMAC (User Management and Access Control)
‚Äì Soporte de la funcionalidad SINAMICS TEC
Para CU320-2
Para CU310-2
‚óè Ampliaci√≥n de la familia SINAMICS G120
‚Äì Soporte de SINAMICS con la versi√≥n de firmware V4.7 SP13
‚Äì Soporte del accionamiento descentralizado G120Log M y D
‚Äì Soporte de UMAC (User Management and Access Control)
‚óè Ampliaci√≥n de la familia SINAMICS MV
‚Äì Soporte de SINAMICS con la versi√≥n de firmware V5.2 SP1

SINAMICS Startdrive Advanced
‚óè Introducci√≥n de tipos de licencia ampliados para Startdrive Advanced
‚Äì SUS (Software Update Service)
‚Äì UCL (Unlock Copy License)
‚Äì EPL (Enterprise License)
‚óè Ampliaci√≥n de la prueba de recepci√≥n/aceptaci√≥n de Safety para
‚Äì G120Log M y D
‚Äì S120 Blocksize

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

11

Novedades del TIA Portal V16
1.4 SIMOCODE ES

SINAMICS DCC
‚óè Soporte de Openness Support para DCC
‚Äì Creaci√≥n de esquemas
‚Äì Exportaci√≥n/importaci√≥n de esquemas
‚Äì Importaci√≥n de librer√≠as DCB Extension
‚óè Indicaci√≥n de coherencia al pasar a online esquemas
‚óè Grupo de par√°metros propio para par√°metros DCC
‚óè Soporte de la familia S120 con dise√±o Blocksize con la CU310-2 PN
‚óè Soporte de la protecci√≥n de know-how y la protecci√≥n contra escritura del dispositivo
‚óè Introducci√≥n de tipos de licencia ampliados para SINAMICS DCC
‚Äì SUS (Software Update Service)

1.4

SIMOCODE ES

Descripci√≥n
Las siguientes novedades est√°n disponibles con SIMOCODE ES en TIA Portal:
‚óè Soporte directo de hardware SIMOCODE nuevo:
‚Äì Dispositivo b√°sico SIMOCODE pro V PB V4.1
‚Äì Dispositivo b√°sico SIMOCODE pro V EIP V1.1
‚óè Reducci√≥n de las versiones para SIMOCODE ES
‚Äì SIMOCODE ES Standard y SIMOCODE ES Premium se convierten en SIMOCODE ES
Professional.
‚óè Mejora del rendimiento en escenarios online/offline
‚óè Con la licencia de prueba (trial) se puede desactivar la consulta si solo se quiere utilizar
Basic.
‚óè Mejora de la lista de experto:
‚Äì La vista plana con designaci√≥n uniforme se convierte en est√°ndar.
‚Äì Los par√°metros pueden marcarse como favoritos para mejorar la efectividad en la
parametrizaci√≥n.
‚óè Mejora de cambios en masa:
‚Äì Nuevas funciones de la barra de herramientas
‚Äì Se facilita la ordenaci√≥n de las diferentes columnas
‚Äì Nuevos tooltips para mejor informaci√≥n sobre las funciones

12

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.5 Funciones de sistema
‚óè Mejora de los diagramas de funciones:
‚Äì Nuevo banner como informaci√≥n para diferencias online/offline
‚Äì Ahora las diferencias online/offline pueden verse directamente en la conexi√≥n mediante
un icono
‚Äì Nueva barra de b√∫squeda en los bloques de funci√≥n
‚Äì Las conexiones pueden arrastrarse con doble clic
‚Äì Centrado autom√°tico en bloques de funci√≥n agregados
‚Äì Zoom orientado por cursor en el editor de diagramas de funciones
‚Äì Cambio f√°cil de la designaci√≥n y el comentario de una conexi√≥n de bloque
‚Äì Reducci√≥n de los nombres de las conexiones para una mejor representaci√≥n
‚óè La versi√≥n de firmware puede cargarse en dispositivos y leerse online.
‚óè Mejora general de tooltips y de su rotulaci√≥n.
‚óè En el m√≥dulo DMF-PROFIsafe ahora se puede desactivar el modo de seguridad.
‚óè La actualizaci√≥n de la descripci√≥n del m√≥dulo est√° disponible en la interfaz Openness.

1.5

Funciones de sistema

TIA Portal Version Control Interface
La Version Control Interface de TIA Portal permite integrar en TIA Portal un programa de
administraci√≥n de versiones externo. De este modo, es posible depositar, versionar y volver a
leer en TIA Portal datos de proyecto f√°cilmente con el programa de versionado que prefiera.

Complementos de SIMATIC TIA Portal
Con la instalaci√≥n de "TIA Portal Openness" obtendr√° soporte para los complementos o addins. Los complementos permiten ampliar TIA Portal con funciones propias. Estas funciones
pueden integrarse en la interfaz de usuario de TIA Portal por medio de men√∫s contextuales.
El programa correspondiente se crea con C# y la API TIA Portal Openness. Los complementos
o add-Ins deben estar disponibles como archivos .addin y encontrarse en el directorio de
instalaci√≥n de TIA Portal.
Los compolementos se administran y activan en la nueva Task Card "Complementos" .
Encontrar√° m√°s informaci√≥n en el cap√≠tulo "Ampliar las funciones de TIA Portal con
complementos" del sistema de informaci√≥n.

TIA Portal Support Gateway
La Support Gateway de TIA Portal permite acceder directamente a contenidos online
seleccionados del Siemens Industry Online Support (SIOS). Es posible buscar en el foro o
visualizar informaci√≥n adicional sobre los productos utilizados en el proyecto de TIA Portal
como, por ejemplo, FAQ o manuales.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

13

Novedades del TIA Portal V16
1.5 Funciones de sistema
Adem√°s, la Support Gateway de TIA Portal asiste en la creaci√≥n de Support Requests: permite
exportar datos de sistema y de proyecto relevantes para que est√©n disponibles posteriormente
en la creaci√≥n de una Support Request.

SIMATIC TIA Portal Openness
Compatibilidad y estabilidad a largo plazo
‚óè Archivos Siemens.Engineering.dll
Los archivos Siemens.Engineering.dll de V14 SP1, V15, V15.1 y V16 est√°n incluidos en el
volumen de suministro. De este modo, las aplicaciones basadas, por ejemplo, en TIA Portal
V15 tambi√©n pueden ejecutarse sin variaci√≥n con TIA Portal V16. Para usar las nuevas
funciones de V16 debe integrar el archivo Siemens.Engineering.dll de V16 y volver a
compilar la aplicaci√≥n.
Los archivos Siemens.Engineering.dll de las versiones compatibles se encuentran en el
directorio de instalaci√≥n en "PublicAPI\[versi√≥n]\". Por ejemplo, el archivo
Siemens.Engineering.dll para V15 se encuentra en "C:\Program Files\Siemens\Automation
\Portal V*\PublicAPI\V15\Siemens.Engineering.dll".
‚óè Exportaci√≥n de archivos SimaticML
Durante la exportaci√≥n, los archivos Siemens.Engineering.dll V14 SP1, V15, V15.1 y V16
crean archivos SimaticML de la versi√≥n V16 de TIA Portal.
‚óè Importaci√≥n de archivos SimaticML
Desde cualquier archivo Siemens.Engineering.dll es posible importar los archivos
SimaticML de su propia versi√≥n y de versiones anteriores. Por ejemplo, un archivo
SimaticML de V15 puede importarse con el Siemens.Engineering.dll de V16. Un archivo
SimaticML de V16 no puede importarse con el Siemens.Engineering.dll de V15.
Nuevas funciones
TIA Portal Openness V16 ofrece las innovaciones y nuevas funciones que se detallan a
continuaci√≥n. Encontrar√° m√°s informaci√≥n sobre los distintos aspectos en los apartados
correspondientes de la documentaci√≥n del producto.
‚óè Identificaci√≥n personalizada para dispositivos y m√≥dulos para una identificaci√≥n un√≠voca
‚óè Consulta de sumas de verificaci√≥n online de PLC para hardware y software
‚óè Soporte para Software Units
‚óè Soporte para exportaci√≥n/importaci√≥n de objetos tecnol√≥gicos
‚óè Soporte para configuraci√≥n de servidores OPC UA y configuraci√≥n de interfaces
‚óè Soporte para Version Control Interface (VCI)
‚óè Ampliaci√≥n de la exportaci√≥n CAx y de la importaci√≥n, entre otros:
‚Äì Soporte de APC AR V1.1
‚Äì Uso de objetos de la librer√≠a
‚Äì Compatibilidad con Base Units para m√≥dulos ET200SP

14

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.5 Funciones de sistema
‚óè Ampliaci√≥n de la asistencia en la configuraci√≥n hardware de bloques y m√≥dulos, entre otros:
‚Äì Configuraci√≥n de servidores OPC UA y administraci√≥n de usuarios
‚Äì Administraci√≥n de certificados
‚Äì Configuraci√≥n de servidor web y administraci√≥n de usuarios
‚Äì Tablas de observaci√≥n para servidor web y display
‚óè Soporte para la configuraci√≥n de WinCC Unified
‚óè Soporte para SiVArc:
‚Äì Creaci√≥n y modificaci√≥n de reglas SiVArc
‚óè Soporte para ingenier√≠a de seguridad con contrase√±a activada para el programa de
seguridad
Exportaci√≥n e importaci√≥n de objetos tecnol√≥gicos:
Los siguientes objetos tecnol√≥gicos pueden exportarse e importarse como archivo XML:
CPU

FW

Objeto tecnol√≥gico

Versi√≥n del objeto tec‚Äê
nol√≥gico

S7-1200

‚â• V4.4

TO_PositioningAxis

‚â• V7.0

TO_CommandTable
‚â• V4.2

PID_Compact

V2.3

PID_3Step
PID_Temp

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

V1.1

15

Novedades del TIA Portal V16
1.5 Funciones de sistema
CPU

FW

Objeto tecnol√≥gico

Versi√≥n del objeto tec‚Äê
nol√≥gico

S7-1500

< V2.0

High_Speed_Counter

‚â• V4.1

SSI_Absolute_Encoder

‚â• V3.1

TO_SpeedAxis

‚â• V5.0

‚â• V2.0

TO_PositioningAxis
TO_ExternalEncoder
TO_SynchronousAxis
TO_OutputCam
TO_CamTrack
TO_MeasuringInput
TO_Cam (S7-1500T)
TO_Kinematics
(S7-1500T)
TO_LeadingAxisProxy
(S7-1500T)
High_Speed_Counter

‚â• V4.1

SSI_Absolute_Encoder

‚â• V3.1

PID_Compact

‚â• V2.3

PID_3Step

V2.3

PID_Temp

V1.1

CONT_C
CONT_S
TCONT_CP
SCONT_S
S7-300/400

Todos

CONT_C

V1.1

CONT_S
TCONT_CP
TCONT_S
TUN_EC
TUN_ES
PID_CP

V2.0

PID_ES
AXIS_REF

16

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.6 Opciones de ingenier√≠a

1.6

Opciones de ingenier√≠a

TIA Portal Engineering
En la ingenier√≠a existen las mejoras siguientes:
‚óè Al iniciar TIA Portal existe la posibilidad de ajustar que se cargue de nuevo
autom√°ticamente el √∫ltimo proyecto utilizado y que se restablezcan autom√°ticamente los
√∫ltimos editores abiertos.
‚óè Los archivos de proyecto de TIA Portal pueden desarchivarse y abrirse desde el cuadro de
di√°logo "Abrir proyecto". Se ha eliminado la opci√≥n de men√∫ "Desarchivar".
‚óè Los archivos de proyecto de TIA Portal pueden usarse como proyecto de referencia sin
necesidad de desarchivarlos.
‚óè Tambi√©n es posible utilizar como proyecto de referencia las sesiones multiusuario
guardadas localmente y las sesiones exclusivas.

Servidor de proyectos de TIA Portal
El servidor que se denominaba hasta ahora "Servidor multiusuario" ha cambiado de nombre y
ahora se denomina "Servidor de proyectos de TIA Portal".
El servidor de proyectos se ha ampliado con la funci√≥n "Exclusive Engineering" (ingenier√≠a
exclusiva).
El servidor de proyectos de TIA Portal puede usarse junto con la Exclusive Engineering para
la edici√≥n local exclusiva de proyectos.
La ventaja estriba en que en el entorno de ingenier√≠a est√°ndar de TIA Portal tambi√©n est√°n
disponibles todas las funciones del servidor de proyectos como, por ejemplo, restablecer
estados anteriores, historial de proyectos y utilizar la administraci√≥n de usuarios.

TIA Portal Multiuser Commissioning (puesta en marcha multiusuario)
El trabajo con Multiuser Commissioning se ha ampliado con un "modo as√≠ncrono". En el modo
Commissioning as√≠ncrono la carga en el dispositivo se realiza autom√°ticamente en segundo
plano mediante una segunda instancia de TIA Portal. Esto permite una carga eficaz en el
dispositivo, y la correspondiente sesi√≥n local est√° de nuevo disponible con m√°s rapidez para
nuevas modificaciones.

PLCSIM
PLCSIM Advanced V3.0
‚óè Soporte ODK para Shared Object y DLL s√≠ncrono
‚Äì S7-1518MFP se puede simular con ODK Part: no hay modificaciones en el c√≥digo del
programa STEP 7. La configuraci√≥n hardware es necesaria para simular la
funcionalidad de una S7-1518MFP.
‚óè PLCSIM Advanced soporta ahora proyectos del TIA Portal de las versiones V14 a V16, as√≠
como con las versiones de firmware de la CPU V1.8 a V2.8.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

17

Novedades del TIA Portal V16
1.6 Opciones de ingenier√≠a
‚óè Mejoras en la API PLCSIM Advanced
‚Äì La API se ha ampliado con la posibilidad de navegar en la red despu√©s de los runtimes.
Con ello se ha mejorado su facilidad de aplicaci√≥n en supuestos complejos.
‚Äì La API soporta ahora tambi√©n el borrado de tarjetas de memoria virtuales (locales y
remotas) para, por ejemplo, volver a habilitar memoria en supuestos de prueba
automatizados.
‚óè Mejoras de las entradas de diagn√≥stico en caso de desbordamiento de OB.
PLCSIM TIA Portal V16
‚óè Importaci√≥n de tablas SIM del TIA Portal
‚Äì Las tablas de variables/de observaci√≥n del TIA Portal se pueden copiar y utilizar en
PLCSIM.
‚óè Event Simulation utilizando el OB de error relevante como, por ejemplo, OB40, OB8x
‚óè Scan Control permite depurar el programa por cada ciclo OB1

18

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.6 Opciones de ingenier√≠a

SIMATIC STEP 7 Safety
SIMATIC STEP 7 Safety Basic / Advanced V16 es el potente paquete opcional para la
programaci√≥n de los controladores S7 de seguridad en Totally Integrated Automation Portal
V16.
‚óè Una instalaci√≥n com√∫n
A partir de TIA Portal V16, STEP 7 Safety se suministra junto con STEP 7 Professional y
WinCC Advanced en una configuraci√≥n conjunta y se instala junto con STEP 7. De este
modo, los productos se instalan de forma m√°s r√°pida y sencilla y, siempre que se cuente
con la licencia correspondiente, STEP 7 Safety est√° disponible para el uso directo. La
entrega se realiza con SIMATIC STEP 7 V16.
Las licencias deseadas para STEP 7 Safety deben seguir adquiri√©ndose por separado con
las referencias correspondientes.
‚óè Extensiones Openness
La gama de funcionalidades Openness disponibles contin√∫a ampli√°ndose tambi√©n con
STEP 7 Safety V16.
‚Äì Version Control Interface (VCI) ‚Äì Soporte
La nueva Version Control Interface (VCI) est√° ahora tambi√©n disponible para bloques de
seguridad. Permite la conexi√≥n de herramientas de versionamiento externas como, por
ejemplo, SUBVERSION o GIT. Adem√°s, una interfaz de usuario gr√°fica brinda una
mayor facilidad de manejo, as√≠ como una comparaci√≥n integrada de bloques a trav√©s de
UI o por medio de la conexi√≥n de herramientas de terceros.
‚Äì Lectura de la huella digital de PLC online para el programa Safety
Para detectar con rapidez diferencias entre el programa de la CPU online y proyectos
offline del TIA Portal. Para el usuario, esta funcionalidad mejora notablemente la
eficiencia respecto a una carga convencional de la estaci√≥n y la posterior comparaci√≥n
con un proyecto de referencia.
‚Äì Openness con contrase√±a F definida
Hasta ahora, era posible utilizar Openness hasta que se defin√≠a la contrase√±a de FEngineering (contrase√±a offline). A partir de ese instante, se bloqueaban las
funcionalidades Openness para los componentes de hardware y software relevantes
para la seguridad y dichas funcionalidades solo pod√≠an habilitarse de nuevo tras
eliminar la contrase√±a de F-Engineering.
A partir de Safety V16, el usuario se puede autenticar con la contrase√±a de FEngineering, pudiendo volver a utilizar as√≠ la funcionalidad Openness.
‚óè F-SCALE ‚Äì Escalado en el rango de salida DINT
El nuevo bloque F-SCALE permite realizar un escalado de seguridad para valores de
enc√≥der entre 0 ‚Ä¶ 27648 a un rango de valores de salida en el rango DINT.
El amplio rango de valores permite, por ejemplo, el escalado para grandes distancias y
masas. El nuevo bloque permite evitar soluciones de aplicaci√≥n complejas, que requieren
compilaci√≥n y con tiempos de ejecuci√≥n muy largos.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

19

Novedades del TIA Portal V16
1.6 Opciones de ingenier√≠a

SIMATIC Energy Suite
Gesti√≥n de carga autom√°tica:
‚óè Ingenier√≠a intuitiva y sencilla de sistemas de gesti√≥n de carga con un n√∫mero flexible de
consumidores y generadores
‚óè Generaci√≥n autom√°tica del programa S7 de todos los objetos energ√©ticos (para el registro
de la energ√≠a y la gesti√≥n de carga)
‚óè Pantallas incluidas en el suministro para la gesti√≥n de carga (para WinCC Professional)
Generaci√≥n de pantallas con SiVArc:
‚óè Clara reducci√≥n del trabajo de ingenier√≠a gracias a la generaci√≥n autom√°tica de pantallas
para todos los objetos energ√©ticos (registro de la energ√≠a y gesti√≥n de carga)
‚óè Para generar pantallas de Energy Suite solo se requiere la licencia "Energy Suite
Engineering" (SiVArc debe estar instalado, pero no se necesita ninguna licencia para
SiVArc)
Mejoras en cuanto a rendimiento y facilidad de uso:
‚óè Tiempos de ciclo de PLC reducidos gracias al c√≥digo de PLC optimizado (aprox. 40% m√°s
r√°pido en comparaci√≥n con versiones anteriores)
‚óè Ingenier√≠a m√°s r√°pida e intuitiva mediante peque√±as mejoras en la facilidad de uso

SIMATIC Visualization Architect (SiVArc)
Compatibilidad con SIMATIC Energy Suite:
‚óè SIMATIC Energy Suite crea y borra reglas propias del sistema, que son de solo lectura
‚óè Para la generaci√≥n de las reglas de SIMATIC Energy Suite, el cliente solo necesita una
licencia v√°lida de "Energy Suite Engineering"
‚óè El cliente puede elegir el conjunto de reglas que se utilizar√° para la generaci√≥n.
Opciones disponibles: reglas creadas por el usuario / reglas de Energy Suite / todas las
reglas. En funci√≥n del ajuste seleccionado debe disponerse de las licencias
correspondientes.
Compatibilidad con Openness (redondeos):
‚óè Creaci√≥n de reglas
‚óè Modificaci√≥n de reglas
Generaci√≥n basada en HWCN:
‚óè Generaci√≥n de pantallas, variables y alarmas a partir de los paneles PN configurados.
Fusi√≥n de propiedades:
‚óè En el faceplate, el cliente puede seleccionar par√°metros individuales para "fusionar".
‚óè Esto permite al cliente modificar estos valores manualmente sin que SiVArc sobrescriba el
valor en las generaciones.

20

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V16
1.8 Instalar paquetes de idioma
Redondeos / mejoras:
‚óè En la matriz de generaci√≥n ahora tambi√©n pueden utilizarse la plantilla de pantalla y
pantallas emergentes.
‚óè Ahora, SiVArc tambi√©n soporta eventos de pantalla.
‚óè Editor de reglas de alarma: selecci√≥n m√∫ltiple para objetos de alarma

1.7

Opciones de Runtime

OPC UA
Las CPU S7-1500 a partir del firmware V2.8 y el TIA Portal V16 ofrecen las siguientes
ampliaciones del servidor OPC UA integrado que pueden disfrutarse con la correspondiente
licencia runtime:
Diagn√≥stico mejorado: el usuario de OPC UA obtiene informaci√≥n sobre el estado del servidor
OPC UA a trav√©s de avisos en el b√∫fer de diagn√≥stico, con una categor√≠a OPC UA en el √°rea
"Online y diagn√≥stico" del TIA Portal y tambi√©n mediante una visualizaci√≥n mejorada de los
recursos de enlace
Comportamiento de descarga: al realizar una descarga desde el TIA Portal en el estado
operativo RUN, el servidor OPC UA ejecuta un reinicio solo si los nuevos datos cargados
afectan a los datos del servidor OPC UA.
Modelado de la interfaz de servidor: el TIA Portal permite ahora modelar las interfaces de
servidor o tambi√©n importar especificaciones de OPC UA Companion y mapearlas a los datos
del PLC.
Las CPU S7-1200 a partir del firmware V4.4 soportan la funcionalidad servidor OPC UA.
Esta incluye la lectura y escritura de variables, la funcionalidad Subscription y tambi√©n la
posibilidad de integrar especificaciones Companion.

1.8

Instalar paquetes de idioma

Descripci√≥n
A partir de la versi√≥n 16 de TIA Portal pueden instalarse idiomas adicionales de la interfaz de
usuario de forma r√°pida y sencilla por medio de TIA Administrator y de la herramienta TIA
Updater Corporate Configuration Tool. Ello ofrece muchas ventajas:
‚óè R√°pida disponibilidad de idiomas adicionales de la interfaz de usuario
‚óè Volumen de datos reducido en la instalaci√≥n del programa de instalaci√≥n de TIA Portal
‚óè TIA Administrator le informa de los nuevos paquetes de idioma disponibles y le asiste
durante la instalaci√≥n
‚óè Al cambiar de versi√≥n de TIA Portal puede decidir si agregar idiomas adicionales de la
interfaz de usuario o si borrar los existentes.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

21

Novedades del TIA Portal V16
1.8 Instalar paquetes de idioma

Elecci√≥n del idioma
Los siguientes idiomas de la interfaz de usuario pueden instalarse en forma de paquetes de
idioma por medio del TIA Administrator:
‚óè Japon√©s
‚óè Coreano
‚óè Ruso

Selecci√≥n de productos
Los paquete de idioma adicionales est√°n disponibles para los siguientes productos:
‚óè WinCC Professional + STEP 7
‚óè WinCC Unified + STEP 7
‚óè PLCSim

Instalar paquetes de idioma
Encontrar√° una descripci√≥n detallada de la instalaci√≥n de los paquetes de idioma en:
Ayuda en pantalla de TIA Administrador > Ayuda de la administraci√≥n de software > Instalar
paquetes de idioma
TIA actualizaci√≥n Corporate configuraci√≥n herramienta ayuda online > Principios b√°sicos para
trabajar con TIA Updater Corporate Configuration Tool

22

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.1

2

SIMATIC STEP 7
Las principales novedades de STEP 7 se resumen a continuaci√≥n. Encontrar√° informaci√≥n
m√°s detallada sobre los diferentes temas en los cap√≠tulos de la documentaci√≥n de los
productos.

Software Units
Las Software Units permiten dividir el programa de usuario en unidades que se pueden cargar
por separado. De este modo, los cambios realizados en distintas Software Units pueden
cargarse independientemente entre s√≠ en el controlador, especialmente si los cambios han
sido realizados por diferentes usuarios.
Esto facilita notablemente la ejecuci√≥n modular del programa PLC por parte de varios usuarios.

Funciones de sistema
En el sistema hay definidas combinaciones de teclas para muchas funciones del TIA Portal. A
partir de la versi√≥n V15.1, el usuario puede definir sus propias combinaciones de teclas
adem√°s de las definidas por el sistema. En la configuraci√≥n del TIA Portal encontrar√° una
sinopsis de todas las combinaciones de teclas y de la posibilidad de asignar combinaciones de
teclas definidas por el usuario.

Editores para lenguajes de programaci√≥n
‚óè Interfaz de bloque textual en SCL
Al crear bloques SCL nuevos es posible elegir para la interfaz de bloque entre una
representaci√≥n tabular y una representaci√≥n textual. La representaci√≥n textual proporciona
el entorno de programaci√≥n habitual de STEP 7 V5.x. Esto permite disfrutar de ventajas
como crear secciones de comentario en la interfaz de bloque o ejecutar acciones de copia
sencillas con otros editores de texto.
‚óè Par√°metros actuales en SCL
Para mejorar la legibilidad de programas en bloques SCL existe la posibilidad de justificar
a la izquierda los par√°metros actuales en las llamadas de bloque.
‚óè Valores de ajuste en tipos de datos PLC (UDT)
En la instancia utilizada puede activarse o desactivarse la selecci√≥n de los valores de ajuste
preconfigurados en un tipo de datos PLC de usuario (UDT).
‚óè Instant√°nea de valores actuales
Aunque se hayan producido cambios estructurales del bloque de datos, se mantiene la
instant√°nea de valores actuales.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

23

Novedades de TIA Portal V15.1
2.1 SIMATIC STEP 7

‚óè Observaci√≥n de variables
Ahora la combinaci√≥n de teclas "Ctrl+T" para activar/desactivar la observaci√≥n de variables
est√° disponible en todos los editores de STEP 7 (editor DB, tabla de observaci√≥n, tabla de
variables, etc.).
‚óè Observaci√≥n de tipos de datos PLC (UDT)
Al observar puede seleccionar en el programa un par√°metro de entrada o de salida del tipo
de datos de un UDT y ver sus valores actuales en la ventana de inspecci√≥n.
‚óè Observaci√≥n de llamadas de bloque
Ahora, al observar llamadas de bloque se muestran tambi√©n los valores actuales de salidas
no interconectadas.

Configuraci√≥n hardware
‚óè CPU S7-1500 para la configuraci√≥n de sistemas de automatizaci√≥n redundantes
Para la configuraci√≥n de sistemas de automatizaci√≥n redundantes y de alta disponibilidad
se dispone de las siguientes CPU S7-1500:
‚Äì CPU 1513R-1 PN
‚Äì CPU 1515R-2 PN
‚Äì CPU 1517H-3 PN
‚óè Modo is√≥crono en el bus de fondo central
Los m√≥dulos enchufados en una configuraci√≥n centralizada en una estaci√≥n S7-1500
pueden utilizarse en modo is√≥crono. Tambi√©n es posible el acoplamiento is√≥crono de
m√≥dulos enchufados en una configuraci√≥n centralizada a m√≥dulos enchufados en una
configuraci√≥n descentralizada.
‚óè Configuraci√≥n del dominio MRP fuera de los l√≠mites del proyecto
El manager o administrador de redundancia y los clientes de redundancia no pueden
encontrarse en distintos proyectos.
‚óè Cambio r√°pido de la versi√≥n de firmware de varios m√≥dulos
La versi√≥n de firmware configurada de los m√≥dulos de un dispositivo IO pueden cambiarse
a la vez seleccionando un grupo de m√≥dulos.
‚óè Cambio r√°pido entre la variable E/S en el editor de programaci√≥n y la entrada/salida
correspondiente en la vista de dispositivos.
El comando de men√∫ contextual "Ir a > Vista de dispositivos" permite navegar r√°pidamente
desde la direcci√≥n E/S programada desde los editores de programaci√≥n hasta la entrada o
salida configurada en la vista de dispositivos.

24

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.1 SIMATIC STEP 7

‚óè Configuraci√≥n sencilla de proyectos de m√°quinas de serie
Para configurar dispositivos IO opcionales en un proyecto de m√°quinas de serie no es
necesario interconectar los puertos (configuraci√≥n de la topolog√≠a).

S7-1500 Motion Control
La versi√≥n tecnol√≥gica V4.0 incluye las siguientes novedades:
‚óè Intercambio de datos de par con el accionamiento en las unidades tecnol√≥gicas del objeto
tecnol√≥gico:
‚Äì Consigna de par aditivo
‚Äì Par real actual
‚Äì Rango de par admisible
‚óè Requisitos de tiempo para el objeto tecnol√≥gico "√ìrdenes de medici√≥n" mediante
"MC_MeasuringInput"
‚óè Ampliaci√≥n de la estructura de datos del eje de posicionamiento y el eje sincronizado para
el uso del objeto tecnol√≥gico Cinem√°tica
‚óè Uso de bloques de datos optimizados (conexi√≥n de accionamientos/enc√≥ders)
La versi√≥n tecnol√≥gica V4.0 incluye las siguientes novedades adicionales para CPU
tecnol√≥gicas (S7-1500T):
‚óè Objeto tecnol√≥gico Cinem√°tica (S7-1500T)
‚óè Especificaci√≥n de movimiento mediante instrucciones "MotionIn" (S7-1500T)
‚óè Ajuste de sincronizaci√≥n directa con "MC_CamIn" V4.0 (S7-1500T)
La versi√≥n tecnol√≥gica V4.0 incluye instrucciones de Motion Control nuevas o avanzadas para
esas funciones.

Trace
Manejo simplificado de configuraciones de diagramas:

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

25

Novedades de TIA Portal V15.1
2.2 SIMATIC WinCC

‚óè Ahora los ajustes relevantes para la visualizaci√≥n pueden realizarse durante la
configuraci√≥n. Se aplica a la agrupaci√≥n de se√±ales, la selecci√≥n de colores, el formato de
visualizaci√≥n y la creaci√≥n de f√≥rmulas.
‚óè Los cambios realizados online tambi√©n pueden aplicarse mediante "Transferir la
configuraci√≥n Trace del dispositivo" De este modo, los ajustes de la ficha "Diagrama" se
mantienen aunque se realicen cambios en la configuraci√≥n y, por ejemplo, se agreguen
se√±ales o se cambie el n√∫mero de puntos de medici√≥n.

2.2

SIMATIC WinCC

WinCC RT Professional
‚óè Servidor OPC UA
‚Äì Soporta Alarm y Condition del servidor OPC UA
‚Äì Las alarmas WinCC se pueden transferir a trav√©s de un servidor OPC UA a una
aplicaci√≥n de terceros.
‚óè ProDiag-Control
‚Äì Visualizaci√≥n del bloque Call Interface completo
‚óè Otras funciones avanzadas
‚Äì Ajuste de los derechos de usuario WebUX / WebNavigator en runtime
‚Äì Inicio autom√°tico de sesi√≥n para rol de operador
‚Äì HMI Compiler aporta informaci√≥n adicional a los usuarios (p. ej. n√∫mero de objetos HMI
compilados)
‚Äì Controlador por software con WinCC Professional en un equipo com√∫n

Mobile Panel
‚óè Im√°genes KTP Mobile V15 y opci√≥n SmartServer para dispositivos F
https://support.industry.siemens.com/cs/ww/es/view/109758056 (https://
support.industry.siemens.com/cs/ww/es/view/109758056/en)

26

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.3 SINAMICS Startdrive

‚óè Option+ V2 para Comfort y Mobile Panel
‚Äì Soporta el Mobile Panel 2nd Generation
‚Äì El c√≥digo se escribe directamente en una variable con QR Reader MV320/325
‚Äì Indicaci√≥n de la Panel CPU Last directamente en runtime
‚Äì Optimaci√≥n del manejo de certificados de SIMATIC Logon
‚Äì Ocultaci√≥n de iconos concretos del escritorio
‚Äì Ampliaci√≥n del archivo de servicio para asistencia t√©cnica
‚Äì Cambio de la comunicaci√≥n entre Option+ y Panel Runtime de SOAP a OPC UA
‚óè Mobile Panel 2nd Gen., Comfort Panel und Basic Panel 2nd Gen.
Configuraci√≥n del b√∫fer de avisos

2.3

SINAMICS Startdrive

Todas las familias de accionamientos (G120, S120, S210)
‚óè Ampliaciones de la interfaz Openness:
‚Äì Interfaces funcionales para aplicaciones importantes (p. ej. introducir datos de motor)
‚Äì Para G120 y S210: generaci√≥n del proyecto TIA Portal sobre la base de una importaci√≥n
de EPLAN basada en AML
‚óè Startdrive Advanced V15.1: prueba de recepci√≥n Safety Integrated tambi√©n para S210 y
S120
‚Äì Asistente guiado de prueba de recepci√≥n para todas las drive-based Safety Integrated
Functions (Basic, Extended y Advanced)
‚Äì Creaci√≥n de Traces autom√°tica y espec√≠fica de la funci√≥n Safety Integrated, para el
an√°lisis del comportamiento de la m√°quina
‚Äì Generaci√≥n de un informe de recepci√≥n en archivo Excel (formato xlsx, tambi√©n
utilizable con OpenOffice)

SINAMICS G120
‚óè Listas de par√°metros definibles por el usuario
‚óè Tambi√©n es posible el cotejo de datos offline (en el proyecto) entre objetos tecnol√≥gicos
G120 y S7-1500
‚óè Mejoras en cuanto a la facilidad de uso:
‚Äì M√°scara de resumen de la configuraci√≥n G120
‚Äì Identificaci√≥n de dispositivos simplificada mediante parpadeo de LED en el cuadro de
di√°logo "Conexi√≥n online"

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

27

Novedades de TIA Portal V15.1
2.3 SINAMICS Startdrive

Integraci√≥n de SINAMICS S210 y 1FK2
‚óè Integraci√≥n de accionamientos S210 con 200V y 400V a partir de la versi√≥n V5.2 de
SINAMICS
‚óè Soporta motores 1FK2
‚óè Usability: proceso de configuraci√≥n simplificado en comparaci√≥n con S120
‚óè Es posible el cotejo de datos online y offline (en el proyecto) entre objetos tecnol√≥gicos
S210 y S7-1500
‚óè Trace (incl. propuesta de par√°metros t√≠picos)
‚óè Actualizaci√≥n del firmware mediante TIA Portal
‚óè Optimizaci√≥n autom√°tica del regulador mediante One-Button-Tuning (ajuste con un bot√≥n)
‚óè Configuraci√≥n de Safety Integrated

SINAMICS S120 (accionamientos basados en CU320)
‚óè Soporta la versi√≥n del firmware V5.1 SP1 de SINAMICS
‚óè Soporta motores 1FK2
‚óè Funcionamiento en Open y Software Controler S7-1500
‚óè Tambi√©n es posible el cotejo de datos offline (en el proyecto) entre objetos tecnol√≥gicos
S120 y S7-1500
‚óè Conexi√≥n al objeto tecnol√≥gico "Detector" del S7-1500
‚óè Soporta el telegrama 750 del bloque de datos tecnol√≥gico
‚óè Soporta Isochronous Safe Position (para soportar la funci√≥n PLC "Cartesian Safety")
‚óè Lista de par√°metros con estructura funcional (grupos de par√°metros)
‚óè Optimizaci√≥n autom√°tica del regulador mediante One-Button-Tuning (ajuste con un bot√≥n)

28

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.4 SIMOCODE ES

2.4

SIMOCODE ES

Descripci√≥n
Las siguientes novedades est√°n disponibles con SIMOCODE ES en TIA Portal:
‚óè Soporte directo de hardware SIMOCODE nuevo:
‚Äì Dispositivo b√°sico SIMOCODE pro V PN V2.1 con protecci√≥n contra marcha en seco
ATEX
‚Äì Dispositivo b√°sico SIMOCODE pro V PN GP V2.1 como dispositivo PROFINET
"General Performance"
‚Äì M√≥dulo de medida de intensidad/tensi√≥n con protecci√≥n contra marcha en seco ATEX
‚óè Acceso a todos los par√°metros espec√≠ficos de dispositivo a trav√©s de la interfaz TIA
Openness:
‚Äì Creaci√≥n y configuraci√≥n de dispositivos SIMOCODE pro a trav√©s de la interfaz
Openness
‚Äì Definici√≥n offline de todos los par√°metros SIMOCODE pro
‚Äì Conexi√≥n en red de dispositivos
‚Äì Soporte de la exportaci√≥n e importaci√≥n de datos CAx
‚Äì Soporte de la exportaci√≥n e importaci√≥n de uno o varios dispositivos a un archivo AML/
desde un archivo ALM
‚óè SIMOCODE pro V PN ofrece la posibilidad de conseguir una protecci√≥n contra marcha en
seco de las bombas centr√≠fugas (dispositivo no el√©ctrico) mediante la vigilancia de la
potencia activa y la desconexi√≥n del motor. Esto es aplicable a bombas centr√≠fugas con
curva caracter√≠stica de bombeo progresiva, que tambi√©n son aptas para el bombeo de
fluidos inflamables y que tambi√©n se instalan en atm√≥sferas potencialmente explosivas.
Encontrar√° informaci√≥n detallada al respecto en la Ayuda en pantalla de SIMOCODE ES
V15.1 - Temas "Protecci√≥n contra marcha en seco de bombas centr√≠fugas por medio de la
vigilancia de potencia activa" y "Asistente de protecci√≥n contra marcha en seco".
‚óè Ahora es posible cambiar los siguientes par√°metros de rotulaci√≥n online durante el
funcionamiento:
‚Äì ID de la instalaci√≥n
‚Äì ID de situaci√≥n
‚Äì Fecha de instalaci√≥n
‚Äì Descripci√≥n
‚óè Ahora el asistente de parametrizaci√≥n permite realizar cambios que provocan cambios en
la configuraci√≥n hardware
‚óè Lista de experto
‚Äì Identificaci√≥n y filtrado de par√°metros modificados
‚óè Mejoras para cambios en masa:
‚Äì Copiado de par√°metros modificados en otros dispositivos/grupos.
‚Äì Agregar un dispositivo a varios grupos.
Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

29

Novedades de TIA Portal V15.1
2.5 Opciones de ingenier√≠a
‚óè Ahora ya es posible migrar archivos de plantilla de SIMOCODE ES 2007 (*.sdt):
‚Äì Los par√°metros marcados como "Plantilla" de SIMOCODE ES 2007 se identifican como
"Favorito" en la lista de experto tras la migraci√≥n.
‚óè Agrupaci√≥n m√°s clara de valores anal√≥gicos en el cat√°logo de bloques.

2.5

Opciones de ingenier√≠a

TIA Portal Multiuser Engineering (ingenier√≠a multiusuario)
‚óè Mejora del rendimiento en anchos de banda de red peque√±os
Se han agregado nuevos perfiles de red para mejorar la conectividad entre la estaci√≥n de
ingenier√≠a y el servidor multiusuario.
‚óè Funciones avanzadas en las Multiuser-Powertools (herramientas de l√≠nea de comandos)
Ahora hay disponibles funciones de exportaci√≥n e importaci√≥n para proyectos de servidor
multiusuario y sesiones locales.

TIA Portal Multiuser Commissioning (puesta en marcha multiusuario)
Multiuser Engineering apoya al usuario en la puesta en marcha mediante un diagrama de flujo
guiado de la puesta en marcha (commissioning-workflow). En el modo Commissioning la carga
en el dispositivo se sincroniza autom√°ticamente. Esto permite un estado coherente entre el
dispositivo y el proyecto de servidor multiusuario en las correspondientes sesiones locales.

PLCSIM Advanced
‚óè Ampliaciones del Control Panel
‚Äì Haciendo doble clic, el Control Panel puede abrirse como ventana flotante sobre otras
ventanas. A continuaci√≥n puede desplazarse a cualquier posici√≥n y mostrarse siempre
en primer plano cuando sea necesario.
‚Äì En el Control Panel flotante, las instancias creadas en el pasado pueden crearse desde
el Explorer al Control Panel seleccionando la Memory Card virtual en el Explorer
mediante la funci√≥n de arrastrar y colocar.
‚óè Ampliaciones API
El tiempo de ciclo m√°ximo del controlador virtual puede definirse libremente a trav√©s de API
sin necesidad de modificar el tiempo de ciclo m√°ximo en el proyecto TIA Portal.

30

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.5 Opciones de ingenier√≠a

SIMATIC TIA Portal Openness
‚óè DLL de Openness de las versiones V14 SP1, V15 y V15.1 en el volumen de suministro
Dado que las DLL de Openness de las versiones V14 SP1, V15 y V15.1 est√°n incluidas en
el volumen de suministro, las aplicaciones que se basan en V14 SP1 o V15 funcionan
tambi√©n en V15.1 sin necesidad de modificaciones. Para poder utilizar las funciones de la
versi√≥n V15.1 es necesario integrar la DLL de la versi√≥n V15.1 y compilar de nuevo la
aplicaci√≥n.
‚óè Acceso a proyectos
‚Äì Mediante Openness pueden abrirse varios proyectos en una instancia del TIA Portal.
‚Äì Los proyectos pueden archivarse y restablecerse mediante Openness.
‚Äì En proyectos protegidos por UMAC, Openness permite accesos de lectura a objetos.
Para los accesos rigen las mismas limitaciones que para un usuario con permiso de
"Solo lectura".
‚óè Guardar como
Con Openness, los proyectos y las librer√≠as globales pueden guardarse con otro nombre.
‚óè Comparaci√≥n online-offline
Con Openness es posible la comparaci√≥n de datos online-offline.
‚óè Acceso a niveles de protecci√≥n
En los bloques puede activarse o suprimirse un nivel de protecci√≥n.
‚óè Acceso a huellas dactilares
En bloques y en tipos de datos PLC (UDT) puede consultarse la huella dactilar.
‚óè Acceso a nombres
En bloques, en tipos de datos y en UDT puede especificarse el nombre.
‚óè Importaci√≥n con tolerancia a errores
Junto a la importaci√≥n estricta, que se puede continuar usando, ahora se dispone tambi√©n
de una importaci√≥n con tolerancia a errores. Quiere decir que la importaci√≥n tambi√©n es
posible si, p. ej. no son compatibles entre s√≠ los tipos de datos de usuario asociados o los
bloques llamados.
‚óè Exportaci√≥n e importaci√≥n
‚Äì Pueden exportarse e importarse tanto tablas de observaci√≥n como tablas de forzado
permanente.
‚Äì Desde un DB offline pueden exportarse como XML instant√°neas de los valores actuales.
As√≠, mediante los archivos XML pueden compararse diferentes instant√°neas.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

31

Novedades de TIA Portal V15.1
2.5 Opciones de ingenier√≠a

‚óè ET200SP
A la mayor√≠a de los atributos de los m√≥dulos de un ET200SP es posible acceder tanto en
lectura como en escritura.
‚óè Sistemas R/H
En sistemas R/H es posible cargar en la CPU primaria y en la CPU de reserva.
‚óè PLC de seguridad (fail-safe)
‚Äì Ahora tambi√©n es posible la carga indirecta a trav√©s de router NAT.
‚Äì Durante la carga tambi√©n se tienen en cuenta f√≥rmulas, ficheros, archivos de usuario y
las contrase√±as de los niveles de protecci√≥n.

SIMATIC STEP 7 Safety
‚óè Nueva comunicaci√≥n CPU-CPU de seguridad "Flexible F-Link"
Con STEP 7 Safety V15.1 se dispone de una nueva comunicaci√≥n CPU-CPU de seguridad
"Flexible F-Link" para las CPU S7-1200 y S7-1500 de seguridad. Con ella pueden
intercambiarse f√°cilmente entre dos CPU de seguridad datos de seguridad, como el
ARRAY de seguridad, a trav√©s de mecanismos de comunicaci√≥n est√°ndar.
‚óè Transferencia de seguridad de grandes cantidades de datos seguros a trav√©s de bloques
de comunicaci√≥n est√°ndar
Flexible F-Link tambi√©n soporta la transferencia segura de grandes cantidades de datos
seguros a trav√©s de bloques de comunicaci√≥n est√°ndar incluso m√°s all√° de los l√≠mites de
la red (comunicaci√≥n Layer 3). El requisito es que la transferencia de los datos sea
coherente y determinista.
Los datos que se van a transferir se agrupan en tipos de datos PLC (UDT) de usuario
compatibles con F. Es posible utilizar cualquier tipo de datos de seguridad (Bool, Word, INT,
DINT, TIME). Se soportan hasta 100 bytes por cada UDT.
‚óè Parametrizaci√≥n sencilla y generaci√≥n autom√°tica de DB de comunicaci√≥n de seguridad
La conexi√≥n de comunicaci√≥n se parametriza con el Safety Administration Editor (SAE), en
el que cada conexi√≥n de comunicaci√≥n se crea con nombre, UDT, tiempo de vigilancia,
sentido de transmisi√≥n o recepci√≥n, y en el que el sistema crea autom√°ticamente un DB de
comunicaci√≥n. Este DB de comunicaci√≥n proporciona los datos que se transferir√°n en
forma de un F-ARRAY codificado que despu√©s puede transferirse f√°cilmente a trav√©s de
bloques de comunicaci√≥n est√°ndar como, p. ej. TSEND o USEND.
‚óè Comunicaci√≥n segura de grupos de ejecuci√≥n
Flexible F-Link ofrece tambi√©n la posibilidad de realizar de manera sencilla una
comunicaci√≥n segura de grupos de ejecuci√≥n. Para ello, los datos seguros pueden
transferirse entre los grupos de ejecuci√≥n F, por ejemplo, mediante la instrucci√≥n
"UMOVE_BLK".

32

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.5 Opciones de ingenier√≠a

‚óè ID de comunicaci√≥n un√≠voco en toda la red (UUID)
Flexible F-Link tambi√©n da respuesta a la cuesti√≥n de c√≥mo se garantiza la identificaci√≥n
un√≠voca de los interlocutores incluso m√°s all√° de los l√≠mites de la red. Para ello, STEP 7
Safety permite generar un ID de comunicaci√≥n un√≠voco (Universally Unique Identifier,
UUID) de manera que se garantiza la univocidad.
‚óè Firma de comunicaci√≥n
Una firma de comunicaci√≥n independiente de las firmas de hardware y de software permite
distinguir claramente entre cambios del UUID y cambios del programa y el hardware.
‚óè Preprocesamiento y posprocesamiento
Para simplificar la configuraci√≥n y para que comportamiento temporal resulte f√°cil de
entender, sobre todo en el contexto de la comunicaci√≥n segura, la versi√≥n V15.1 de STEP
7 Safety ofrece la posibilidad de colocar grupos de ejecuci√≥n F aguas arriba y aguas abajo
de los bloques est√°ndar para el preprocesamiento y posprocesamiento de valores de
proceso.
‚óè ID de comunicaci√≥n variable (DP_DP_ID)
A partir de la versi√≥n V15.1, STEP 7 Safety ofrece la posibilidad de asignar variables, en vez
de constantes, a los ID de comunicaci√≥n (DP_DP_IDs) necesarios para los bloques
SENDDP y RCVDP. De este modo se permite al usuario, por ejemplo, emplear programas
de seguridad con la misma firma F global en instalaciones con un gran n√∫mero de I-devices
id√©nticos (almacenes de gran altura, veh√≠culos de guiado autom√°tico (AGV), puentes gr√∫a
monorra√≠l suspendidos, etc.). De este modo el ID de comunicaci√≥n variable permite una
simplificaci√≥n de la puesta en marcha, el mantenimiento y la gesti√≥n del proyecto.
Atenci√≥n: Si se utilizan ID de comunicaci√≥n variables (DP_DP_ID), el usuario debe tomar
medidas en el programa para que los ID de comunicaci√≥n sean un√≠vocos en toda la red y
en todo momento.
‚óè Openness
STEP 7 Safety V15.1 ofrece funciones adicionales a trav√©s de la interfaz Openness
‚Äì Lectura y configuraci√≥n de par√°metros i del ET200SP F-IO
‚Äì Carga de estaci√≥n
‚Äì Comparaci√≥n de hardware y software (offline/online)
‚Äì Importaci√≥n y exportaci√≥n de bloques F coherentes (sin modificar)

TIA Portal Teamcenter Gateway
‚óè Multiuser Engineering (ingenier√≠a multiusuario)
Ahora las opciones "TIA Portal Teamcenter Gateway" y "Multiuser Engineering" permiten
que en un proyecto de TIA Portal puedan trabajar simult√°neamente varias personas.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

33

Novedades de TIA Portal V15.1
2.5 Opciones de ingenier√≠a

‚óè Abrir proyectos de referencia desde el Teamcenter
Es posible abrir proyectos directamente desde el Teamcenter como proyectos de
referencia, p. ej. para poder comparar y agrupar diversas revisiones.
‚óè Guardar proyectos en elementos existentes del Teamcenter
Los proyectos y librer√≠as del TIA Portal pueden guardarse directamente desde el TIA Portal
en los elementos ya existentes del Teamcenter.
‚óè Compatibilidad
Se soportan las versiones V11.2/11.3/11.4/11.5 de Teamcenter.

SIMATIC Energy Suite
‚óè Energy Screens
Ahora incluido en el volumen de suministro de Energy Suite V15.1
‚óè Reports
Nuevo: informe de centros de costes, incl. tarifas
‚óè SINAMICS
Se soporta la configuraci√≥n de dispositivos SINAMICS mediante MDD (hasta ahora solo se
soportaba GSDML)
‚óè Mejoras en cuanto a la facilidad de uso
Diversas mejoras menores en cuanto a la facilidad de uso

SIMATIC Visualization Architect
‚óè Protecci√≥n de acceso a los editores de reglas de SiVArc mediante UMAC
‚óè Las propiedades X/Y pueden activarse mediante expresiones de SiVArc.
‚óè Soporte de bloques STEP 7 escritos en SCL
‚óè Generaci√≥n de Template Screens

34

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades de TIA Portal V15.1
2.6 Opciones de Runtime

‚óè SiVArc ‚Äì Openness:
‚Äì Copia de reglas individuales o de grupos de reglas completos de la librer√≠a
‚Äì Inicio de la generaci√≥n de SiVArc

2.6

Opciones de Runtime

SIMATIC ProDiag
‚óè Exportaci√≥n/importaci√≥n de textos para traducciones
Todos los textos relevantes de ProDiag o de S7-GRAPH pueden exportarse con una sola
acci√≥n, p. ej. para traducciones.
Pueden exportarse los textos de aviso siguientes:
‚Äì listas de textos de usuario para supervisiones
‚Äì nombres de visualizaci√≥n de etapas y transiciones en GRAPH
‚Äì comentarios de todas las variables supervisadas
‚Äì comentarios de todos los par√°metros supervisados de un bloque
‚Äì nombre de instancia y comentario de instancia de multiinstancias
Pueden exportarse los siguientes textos para la visualizaci√≥n HMI:
‚Äì comentarios de variables en transici√≥n e Interlock
‚Äì t√≠tulos y segmentos de redes o variables supervisadas
‚óè Visualizaci√≥n del bloque completo (KOP, FUP) en el visor de c√≥digos PLC de HMI
Tambi√©n es posible usar el visor de c√≥digos PLC si se supervisan par√°metros est√°ticos de
un bloque (bloques de usuario con su propia l√≥gica de supervisi√≥n).
‚óè Editar supervisiones de bloques en el editor de vista general de ProDiag
Las supervisiones existentes en la ficha "Definiciones de supervisiones en el FB" pueden
editarse o borrarse.
‚óè Acceso al TIA Portal desde WinCC Advanced
‚Äì Acceso al TIA Portal asistido por el sistema en el contexto de un aviso GRAPH o ProDiag
‚Äì El bloque relevante se abre autom√°ticamente
‚Äì Son posibles el modo de lectura o el modo de escritura/lectura
‚Äì Indicaci√≥n autom√°tica del estado

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

35

Novedades de TIA Portal V15.1
2.6 Opciones de Runtime

‚óè Consideraci√≥n de comentarios jer√°rquicos en avisos ProDiag
‚Äì Reproducci√≥n f√°cil de la vista tecnol√≥gica en la m√°quina / instalaci√≥n mediante
comentarios jer√°rquicos, donde la ruta se genera autom√°ticamente.
‚óè Subcategor√≠as de GRAPH
‚Äì Estructura de avisos id√©ntica a la configurable en ProDiag
‚Äì Relevante sobre todo para sistemas de mando en los que la acci√≥n subsiguiente se
deriva a trav√©s de informaci√≥n adicional en el texto de aviso.

OPC UA
Para las CPU S7-1500 a partir del firmware V2.6 se dispone de la correspondiente licencia
runtime de OPC UA para las siguientes ampliaciones:
Adem√°s del servidor OPC UA, en la CPU hay integrado un cliente OPC UA que mediante las
correspondientes instrucciones de comunicaci√≥n OPC UA ofrece las funciones siguientes:
‚óè llamadas de m√©todos
‚óè lectura y escritura de datos
El cliente le da acceso, p. ej. a los siguientes √°mbitos de aplicaci√≥n:
‚óè comunicaci√≥n vertical con sistemas MES o con servicios en la nube
‚óè comunicaci√≥n controlador-controlador

36

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.1

3

Introducci√≥n

Descripci√≥n
Este documento contiene un resumen de todas las novedades importantes respecto de las
versiones existentes. Encontrar√° informaci√≥n m√°s detallada sobre los diferentes temas en los
respectivos cap√≠tulos de la documentaci√≥n de los productos.

3.2

SIMATIC STEP 7

Descripci√≥n
Las principales novedades de STEP 7 est√°n agrupadas conforme al flujo de trabajo de la
ingenier√≠a.

Configuraci√≥n hardware
‚óè

Las siguientes CPU nuevas de la familia S7-1500 completan la oferta:
‚Äì CPU 1518(F)-4 PN/DP MFP (plataforma multifuncional)
‚Äì CPU 1516T(F)

‚óè Detecci√≥n de hardware de dispositivos PROFINET IO existentes realmente
La funci√≥n online "Detecci√≥n de hardware" detecta los dispositivos IO en la subred
PROFINET conectada. Un dispositivo detectado se puede incorporar al proyecto: STEP 7
inserta cada dispositivo IO con todos sus m√≥dulos y subm√≥dulos, evitando as√≠ tener que
insertar manualmente dispositivos y m√≥dulos IO desde el cat√°logo de hardware.
‚óè La funci√≥n "Ir a vista de dispositivos" permite desplazarse con rapidez desde la tabla de
variables PLC hasta la entrada o salida configurada en la vista de dispositivos.
‚óè Visor de avisos avanzado con nuevas funciones de filtrado.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

37

Novedades del TIA Portal V15
3.2 SIMATIC STEP 7

Editores para lenguajes de programaci√≥n
‚óè Los textos del proyecto en varios idiomas, p.ej., t√≠tulos de bloques, segmentos o
comentarios, se pueden visualizar y editar directamente en los editores de programaci√≥n en
todos los idiomas disponibles. Tambi√©n es posible exportar o importar los textos para
traducirlos externamente. Los editores siguientes permiten la visualizaci√≥n local de textos
del proyecto: tabla de variables PLC, editores de programaci√≥n (KOP, FUP, SCL, AWL,
GRAPH), bloques de datos y tipos de datos PLC.
‚óè En SCL se ha ampliado la barra de estado: ahora se muestra la posici√≥n actual del cursor.
Haciendo doble clic sobre el n√∫mero de l√≠nea se abre la funci√≥n "Ir a n√∫mero de l√≠nea" para
desplazarse hasta otras l√≠neas. Adem√°s, en la barra de estado se muestra el modo de
edici√≥n (insertar/sobrescribir) Haciendo doble clic sobre el campo de visualizaci√≥n se
cambia al modo de edici√≥n.

Nuevas instrucciones
‚óè En las CPU S7-1500 se pueden leer datos de un archivo ASCII de la SIMATIC Memory
Card o escribir datos en un archivo ASCII de una SIMATIC Memory Card con las
instrucciones "FileReadC" y "FileWriteC".
‚óè En las CPU S7-1500 se puede leer la siguiente informaci√≥n sobre el reloj interno de la CPU
utilizando la instrucci√≥n "GetClockStatus":
‚Äì Informaci√≥n sobre sincronizaci√≥n horaria v√≠a servidor NTP
‚Äì Informaci√≥n sobre si est√° activada la adaptaci√≥n autom√°tica a los horarios de verano e
invierno.
‚óè La instrucci√≥n "EQ_TypeOfDB" (SCL: "TypeofDB") permite determinar el tipo de datos de
un bloque de datos direccionado a trav√©s de una variable DB_ANY.
‚óè Se han ampliado las instrucciones "SCATTER" y "GATHER" ya existentes y ahora tambi√©n
soportan un tipo de datos STRUCT an√≥nimo y tipos de datos PLC que contengan
√∫nicamente elementos booleanos.
‚óè Hay dos nuevas funciones auxiliares PID disponibles. Con ellas se reduce el esfuerzo de
programaci√≥n en tareas de regulaci√≥n y control.
‚Äì "SplitRange"
Permite distribuir la magnitud manipulada entre varios elementos de control final. Eso
permite controlar diferentes elementos de control final en funci√≥n de la salida de
regulaci√≥n.
‚Äì "RampFunction"
Permite limitar la velocidad de cambio y los valores m√°ximos de las se√±ales. La
velocidad de subida puede limitarse individualmente en cuatro rangos operativos: Para
se√±ales positivas o negativas, para se√±ales ascendentes o descendentes.

38

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.2 SIMATIC STEP 7

Innovaciones en relaci√≥n con los lenguajes
‚óè "Referencias" proporciona un nuevo tipo de puntero. Las referencias son punteros
tipificados que apuntan a un tipo de datos concreto. Si se utilizan referencias, el tipo de
datos se define ya al escribir el programa. Puesto que no es necesario determinar el tipo de
datos en tiempo de ejecuci√≥n, el programa es m√°s potente y m√°s claro. Con el
"desreferenciado" es posible acceder directamente a la variable referenciada en modo de
escritura o lectura, sin copiar antes la variable o sin integrar instrucciones adicionales en el
programa.
Para utilizar referencias es imprescindible disponer de una CPU de la serie S7-1500 a partir
de la versi√≥n de firmware V2.5.
‚óè En KOP/FUP se pueden utilizar constantes de tipo BOOL en las entradas de instrucciones.
Esto facilita la comprobaci√≥n o el "bypass" de circuitos.
Para esta funci√≥n es imprescindible disponer de una CPU de la serie S7-1200 a partir de la
versi√≥n de firmware V4.0 o S7-1500 a partir de la versi√≥n de firmware V1.8.

Funciones de sistema
‚óè El sistema de informaci√≥n ofrece la posibilidad de visualizar manuales de hardware
integrados. Esto ofrece la ventaja de poder examinar o filtrar los contenidos o de utilizarlos
como favoritos. Algunos manuales de hardware ya est√°n incluidos en la instalaci√≥n del TIA
Portal V15. En caso necesario es posible descargar otros manuales de hardware
disponibles como Support Package. Seleccione para ello la funci√≥n "Buscar
actualizaciones" en la barra de herramientas del √≠ndice.
‚óè

Administraci√≥n local de usuarios y permisos:
‚Äì Administraci√≥n de usuarios de proyectos
‚Äì Nuevos permisos para las funciones Abrir proyecto en lectura / Abrir proyecto en lectura
y escritura / Crear usuarios y roles
‚Äì Administraci√≥n de roles del proyecto
‚Äì Asignaci√≥n de usuarios a roles del proyecto
‚Äì Un bloque para seguridad industrial (Industrial Security) con TIA Portal
‚Äì Administraci√≥n eficiente de usuarios para productos dentro de un proyecto TIA Portal

Librer√≠as
‚óè Las librer√≠as globales pueden exportarse como librer√≠as protegidas contra escritura. Los
tipos de librer√≠as incluidos tienen protecci√≥n permanente contra escritura, por lo que est√°n
protegidas contra cambios. La protecci√≥n contra escritura de los tipos de librer√≠as no se
pierde ni aunque se utilicen como instancia del tipo. La protecci√≥n contra escritura de las
librer√≠as globales protegidas no se puede deshacer. Las librer√≠as protegidas contra
escritura est√°n disponibles para tipos PLC y HMI.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

39

Novedades del TIA Portal V15
3.2 SIMATIC STEP 7

Nuevas funciones para forzar operandos
‚óè Los operandos booleanos pueden forzarse haciendo doble clic en el valor de observaci√≥n.
Esto permite conmutar los valores actuales de manera r√°pida y sencilla.
‚óè Los operandos no booleanos tambi√©n pueden forzarse de manera r√°pida y sencilla en el
cuadro de di√°logo que aparece.
‚óè Se admiten tanto variables globales como variables de instancia del DB.

Referencias cruzadas para las instrucciones utilizadas
‚óè En las referencias cruzadas, los filtros personalizados del tipo "Instruction" permiten ver
todas las instrucciones utilizadas en una CPU con sus correspondientes versiones.

Cargar tablas de variables PLC
‚óè Las tablas de variables PLC pueden cargarse y descargarse del dispositivo con la
estructura especificada, lo que mejora la ingenier√≠a en equipo (Team Engineering) en la
CPU.
‚óè Las tablas de variables PLC existentes en la CPU se muestran tambi√©n en "Dispositivos
accesibles" y en la Memory Card.
‚óè La comparaci√≥n online-offline proporciona una visi√≥n detallada de las variables online y
offline que existen en las distintas tablas de variables PLC.

Puntos de parada para S7-1500 a partir de la versi√≥n de firmware V2.5
‚óè En los programas SCL y AWL tambi√©n es posible el test con puntos de parada en bloques
KOP/FUP mixtos.
‚óè Al alcanzarse un punto de parada, la CPU pasa al estado operativo "PARADA". Tambi√©n es
posible observar y forzar las variables incluso habiendo alcanzado el punto de parada.
‚óè De este modo puede probarse el c√≥digo AWL o SCL paso a paso con ayuda de puntos de
parada y as√≠ detectar y subsanar errores l√≥gicos mientras se va escribiendo el programa.
Esto permite un an√°lisis sencillo y r√°pido de programas complejos antes de la puesta en
marcha propiamente dicha.

PLCSIM
‚óè Los bloques con protecci√≥n de know how de una CPU S7-1500 pueden simularse con
PLCSIM V15 (las CPU S7-1200 no se soportan actualmente).
‚óè Mediante controles deslizantes para valores anal√≥gicos y pulsadores para valores
booleanos se pueden modificar valores f√°cilmente en la tabla SIM para probar r√°pidamente
el programa de usuario de STEP 7.
‚óè PLCSIM V15 y PLCSIM Advanced V2.0 pueden instalarse en el mismo PC. No obstante, no
es posible usar simult√°neamente ambas herramientas de simulaci√≥n.

40

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.3 SIMATIC WinCC

Trace
‚óè Generaci√≥n de se√±ales virtuales mediante funciones matem√°ticas a partir de las se√±ales
registradas. Se admiten las siguientes funciones:
‚Äì operaciones aritm√©ticas b√°sicas
‚Äì valor absoluto, ra√≠z cuadrada, cuadrado, 1/x, operaci√≥n m√≥dulo
‚Äì integral, diferencial
‚Äì funci√≥n de filtro
‚óè C√°lculo del valor medio, valor eficaz e integral de la se√±al seleccionada en el √°rea del cursor
de medici√≥n
‚óè Las variables temporales del tipo TIME, LTIME, TOD, LTOD, DATE y LDT pueden
registrase como se√±ales y utilizarse para especificar condiciones de disparo.
‚óè Importaci√≥n y exportaci√≥n de mediciones solapadas
‚óè Desplazamiento del cursor de medici√≥n mediante las teclas de flecha

3.3

SIMATIC WinCC

Paneles de operador
En el TIA Portal pueden configurarse adicionalmente los siguientes paneles de operador:
‚óè TP1200 Comfort PRO
‚óè TP1500 Comfort PRO
‚óè TP1900 Comfort PRO
‚óè TP2200 Comfort PRO

Versiones de paneles de operador
Para optimizar el tama√±o de la instalaci√≥n est√°ndar, las versiones anteriores de las im√°genes
de panel de operador se han trasladado a un DVD adicional. Las versiones afectadas son:
‚óè V13
‚óè V13 SP1
‚óè V13 SP2
‚óè V14

Gr√°ficos SVG
En WinCC se utiliza tambi√©n el formato SVG para gr√°ficos.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

41

Novedades del TIA Portal V15
3.4 SINAMICS Startdrive

Ampliaci√≥n de las funciones de ProDiag
Para un mejor diagn√≥stico del proceso se puede configurar el visor de an√°lisis de criterios. De
ese modo se pueden visualizar operandos err√≥neos que han provocado un determinado aviso
de ProDiag o GRAPH en el programa de usuario.

Cliente OPC UA en WinCC RT Professional
Se ha ampliado la comunicaci√≥n v√≠a OPC UA:
‚óè Se soportan matrices y variables de matrices.
‚óè La comunicaci√≥n a trav√©s de una conexi√≥n OPC UA puede protegerse con una contrase√±a.

N√∫mero de conexiones con WinCC RT Professional
El n√∫mero de conexiones integradas posibles con S7-1200 y S7-1500 se ha aumentado a 128.

3.4

SINAMICS Startdrive

SINAMICS Startdrive Basic (anteriormente SINAMICS Startdrive)
‚óè Ampliaciones para accionamientos basados en CU320-2 PN:
‚Äì Compatibilidad con G130, G150, S150 y Sinamics MV (hasta 85.00 kW)
‚Äì Compatibilidad con Chassis y Cabinet Modules (no Blocksize Modules)
‚Äì Soporte de motores as√≠ncronos SIMOTICS y motores de otros fabricantes
‚Äì Regulaci√≥n vectorial
‚Äì Comparaci√≥n de par√°metros (online-offline, respecto a configuraci√≥n de f√°brica)
‚óè Ampliaciones para la familia SINAMICS G120:
‚Äì Soporte de SINAMICS con la versi√≥n de firmware V4.7 SP9
‚Äì Optimizaci√≥n y ampliaci√≥n del asistente de puesta en marcha:
- configuraci√≥n del freno de parada de motor
- cancelaci√≥n online
- CU250D-2: enc√≥der SSI como enc√≥der de motor
‚Äì Asignaci√≥n de nombres PROFINET sin rearranque completo de la G120 Control Unit
tambi√©n en la lista de dispositivos accesibles (Accessible devices)
‚Äì Compatibilidad con CU240D-2/CU250D-2 con fibra √≥ptica polim√©rica (POF)
‚óè Openness para accionamientos:
‚Äì Creaci√≥n de accionamientos y componentes (incluida configuraci√≥n de telegramas)
‚Äì Ajuste de par√°metros de accionamiento seleccionados (offline y online, lectura y
escritura)
‚Äì Descarga en el dispositivo (no es posible cargar)

42

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.5 SIMOCODE ES

SINAMICS Startdrive Advanced
‚óè Introducci√≥n de la licencia Startdrive Advanced para uso de funciones de ingenier√≠a
adicionales con alto valor a√±adido
‚óè Solo se necesita la clave de licencia, sin instalaci√≥n adicional
‚óè Licencia de prueba (Trial) gratuita sin clave de licencia (21 d√≠as)
‚óè Funciones en V15: prueba de recepci√≥n de seguridad para la familia G120
‚Äì Asistente guiado de la prueba de recepci√≥n para todas las funciones de Safety
Integrated (Basic y Extended Safety)
‚Äì Creaci√≥n de Traces autom√°tica y espec√≠fica de las funciones de seguridad
‚Äì Generaci√≥n de un informe de recepci√≥n en archivo Excel

3.5

SIMOCODE ES

Descripci√≥n
Las siguientes novedades est√°n disponibles con SIMOCODE ES en el TIA Portal:
‚óè Representaci√≥n personalizada de par√°metros de dispositivos
‚Äì En el editor de par√°metros se dispone de una nueva vista de par√°metros de los
dispositivos, la llamada lista de experto.
‚Äì En ella es posible marcar como favoritos grupos de par√°metros o par√°metros concretos.
‚Äì Con estos favoritos se obtiene una vista filtrada de los par√°metros.
‚Äì Exportaci√≥n e importaci√≥n de esta selecci√≥n de favoritos (sin valores)
‚óè Ingenier√≠a en masa
‚Äì Funci√≥n muy potente para la ingenier√≠a en masa de dispositivos de un proyecto (tambi√©n
para distintos aparatos SIMOCODE pro)
‚Äì Los par√°metros seleccionados y configurados correspondientemente pueden
transferirse a un grupo de dispositivos en una sola operaci√≥n.
‚óè Asistente de par√°metros
‚Äì Configuraci√≥n progresiva de todos los par√°metros imprescindibles del dispositivo
‚Äì Se consultan y almacenan los ajustes de la interfaz del bus de campo, la configuraci√≥n
del dispositivo, guardamotor y las funciones de vigilancia.
‚Äì El usuario puede abrir el asistente en cualquier momento directamente desde el editor
de par√°metros.
‚óè Creaci√≥n autom√°tica de variables PLC
‚Äì Si adem√°s est√° instalado STEP 7 y hay un dispositivo SIMOCODE pro conectado a un
PLC, se crean autom√°ticamente variables PLC para todas las entradas y salidas que se
intercambien con un PLC a trav√©s de PROFIBUS o PROFINET.
‚Äì Gracias a esta funci√≥n el usuario puede acceder directamente a estos datos del
programa de usuario mediante direccionamiento simb√≥lico.
Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

43

Novedades del TIA Portal V15
3.6 Opciones de ingenier√≠a
‚óè Disposici√≥n sin√≥ptica autom√°tica de los bloques gr√°ficos
‚Äì Colocaci√≥n de los bloques en columnas fijas, de forma similar al principio EPS (EPS =
entrada, procesamiento, salida)
‚óè Ahora, en el editor gr√°fico pueden editarse todos los par√°metros, y no solo las conexiones.
‚Äì Es posible introducir valores directamente en el bloque de funci√≥n con el teclado.

3.6

Opciones de ingenier√≠a

PLCSIM Advanced
‚óè Sincronizaci√≥n de PLCSIM Advanced con otras herramientas de simulaci√≥n en memorias
imagen parciales del proceso de OB c√≠clicos (p. ej. OB de alarma c√≠clica)
‚óè Soporte de servicios ac√≠clicos (RDREC/WRREC) y alarmas (p. ej. alarmas de proceso)
‚óè Las alarmas de proceso configuradas en el TIA Portal pueden leerse mediante la API
‚óè Copia de seguridad y restauraci√≥n f√°ciles de la configuraci√≥n de software y hardware de
instancias de PLCSIM Advanced
‚óè La ruta de almacenamiento de la SIMATIC Memory Card virtual puede seleccionarse
libremente
‚óè Extensiones de la interfaz gr√°fica de usuario:
‚Äì Funci√≥n de autocompletar
‚Äì Botones para RUN / STOP y Memory Reset integrados en la interfaz gr√°fica de usuario
de PLCSIM Advanced
‚óè Transferencia de SIMATIC Memory Cards entre equipos a trav√©s de la API
‚óè Mejora del rendimiento con direccionamiento simb√≥lico
‚óè Instalaci√≥n paralela de PLCSIM y PLCSIM Advanced en un PC

User Management Component
‚óè Administraci√≥n de usuarios central y multiproyecto en la instalaci√≥n
‚óè Administraci√≥n de grupos de usuarios
‚óè Es posible importar usuarios de Windows y grupos de usuarios
‚óè Administraci√≥n eficiente de usuarios y grupos de usuarios en una instalaci√≥n
‚óè Seguridad contra fallos gracias al dise√±o redundante de un dominio UMC
‚óè Distribuci√≥n de la carga en caso de avalanchas de intentos de inicio de sesi√≥n desde varias
estaciones UMC en un dominio UMC
‚óè Licencia para el n√∫mero de usuarios

44

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.6 Opciones de ingenier√≠a

Multiuser Engineering
‚óè Ahora los objetos multiusuario se marcan autom√°ticamente durante la edici√≥n. La selecci√≥n
manual contin√∫a disponible. La selecci√≥n autom√°tica aumenta la seguridad al trabajar en
grupo con Multiuser Engineering.
‚óè Ahora tambi√©n es posible trabajar con Multiuser Engineering offline y sin conexi√≥n directa
al servidor.
‚óè Los editores multiusuario se han ampliado con funciones de comentario para documentar
el tipo y alcance de los cambios efectuados.
‚óè Durante el check-in se dispone de un filtro para mostrar objetos con "conflictos".
‚óè El servidor multiusuario contiene un historial ampliado del proyecto con funci√≥n de
restablecimiento. Esto permite reproducir el desarrollo del proyecto en el servidor
multiusuario. Es posible comentar y guardar los puntos fundamentales de un proyecto. El
historial del proyecto se puede exportar para realizar un an√°lisis avanzado.
‚óè Las versiones V14 y V15 del servidor multiusuario pueden utilizarse juntas. La versi√≥n V15
del servidor multiusuario tambi√©n admite proyectos de la versi√≥n V14 del TIA Portal, con su
correspondiente conjunto de funciones.
‚óè Ahora las herramientas multiusuario externas para la configuraci√≥n y administraci√≥n del
servidor multiusuario est√°n disponibles en todos los idiomas del TIA Portal.

SIMATIC Visualization Architect
‚óè Generaci√≥n de avisos, categor√≠as y grupos de avisos
‚óè Soporte de los objetos HMI "Visor de curvas", "Visor de curvas f(x)" y "Visor de curvas f(t)"
‚óè Soporte de plantillas de imagen

SIMATIC Energy Suite
‚óè En WinCC RT Professional, la visualizaci√≥n de datos de energ√≠a en objetos energ√©ticos no
requiere Power Tags adicionales.
‚óè Monitor S7 de eficiencia energ√©tica para m√°quinas (nueva instrucci√≥n S7 en STEP 7:
"EnS_EEm_Calc" y "EnS_EEm_Report"):
‚Äì Para la determinaci√≥n normalizada de consumos energ√©ticos de m√°quinas y en funci√≥n
de la producci√≥n (seg√∫n VDMA 34179)
‚Äì Integraci√≥n sencilla en el sistema de mando de m√°quina (S7-1200/1500) y visualizaci√≥n
local del estado de eficiencia
‚Äì Medici√≥n autom√°tica prolongada (p. ej., lote, turno)
‚Äì Informe de eficiencia (.csv) para evaluaci√≥n detallada y documentaci√≥n
‚óè Soporte de Sentron PAC 3200/4200 configurado mediante el cat√°logo de hardware (MDD)
‚Äì hasta ahora se soportaba solo GSDML.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

45

Novedades del TIA Portal V15
3.6 Opciones de ingenier√≠a

SIMATIC TIA Portal Openness
‚óè Openness DLL de versiones V14SP1 y V15 en el volumen de suministro
Dado que las versiones V14SP1 y V15 de Openness DLL est√°n incluidas en el volumen de
suministro, las aplicaciones que se basan en V14SP1 funcionan tambi√©n en V15 sin
necesidad de modificaciones. Para poder utilizar las funciones de la versi√≥n V15 es
necesario incorporar DLL V15 y compilar de nuevo la aplicaci√≥n.
‚óè Exportar e importar bloques SCL
Tanto los bloques SCL como los bloques KOP y FUP con segmentos SCL pueden
exportarse e importarse como XML.
‚óè Descarga de PLC
Los PLC S7-1500 est√°ndar pueden cargarse de forma automatizada. Para ello se realiza
impl√≠citamente una parada y un arranque del PLC. La aplicaci√≥n puede transferir
contrase√±as de niveles de protecci√≥n y contrase√±as vinculantes.
‚óè Lectura de suma de verificaci√≥n
Un PLC puede leer offline la suma de verificaci√≥n del programa est√°ndar del PLC.
‚óè ProDiag
Es posible crear FB, instancias y asignaciones para ProDIAG.
‚óè Carpetas de sistema para UDT
Es posible acceder a los UDT de sistema en el grupo de sistema dentro de los tipos de datos
de usuario.
‚óè Numeraci√≥n de bloques
Puede conectarse y desconectarse la numeraci√≥n autom√°tica de bloques. Adem√°s es
posible cambiar los n√∫meros de bloques.
‚óè Objetos tecnol√≥gicos
Openness incluye ampliaciones para cargar y guardar datos del registrador de curvas de
objetos tecnol√≥gicos y para nuevas funciones de objetos tecnol√≥gicos.
‚óè Startdrive
Es posible crear DriveObjects y telegramas para los accionamientos SINAMICS G120 y
SINAMICS S120. Es posible ajustar online y offline par√°metros de accionamiento
seleccionados. Es posible la carga en el dispositivo.
‚óè SINAMICS in AutomationML
AutomationML permite exportar e importar esclavos V90 y m√≥dulos de cabecera Profinet
SINAMICS G120.

46

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.6 Opciones de ingenier√≠a

SIMATIC STEP 7 Safety
SIMATIC STEP 7 Safety Basic / Advanced V15, el potente paquete opcional para la
programaci√≥n de los controladores S7 de seguridad en el Totally Integrated Automation Portal
V15.
‚óè Matrices de seguridad (con acceso de lectura) para tipos de datos INT y DINT
Con Safety V15 se dispone de nuevas instrucciones para la lectura de valores enteros y
dobles enteros en coma flotante de matrices de seguridad. Las matrices pueden crearse
en bloques de datos globales de seguridad (DB F globales) y pueden contener hasta
10.000 elementos del tipo de datos INT o DINT.
El acceso a los elementos de matriz se efect√∫a con las instrucciones RD_ARRAY_I o
RD_ARRAY_DI. Las instrucciones est√°n disponibles para las CPU S7-1500 de seguridad.
‚óè Firma para hardware y software
La firma global F identifica de forma un√≠voca un estado determinado del programa de
seguridad y de los par√°metros relevantes de la CPU F y de la periferia F.
Adem√°s de la firma global F, para las CPU S7-1200 y S7-1500 de seguridad con Safety V15
se proporciona informaci√≥n adicional sobre la firma de seguridad para software y hardware.
Estas firmas adicionales permiten diferenciar mejor entre cambios relevantes para
hardware o software, facilitando as√≠ la identificaci√≥n y recepci√≥n de los cambios.
Las firmas F se visualizan en el Safety Administration Editor (SAE) y se incluyen en la
impresi√≥n de seguridad.
‚óè Detecci√≥n de desbordamiento (Overflow-Handling)
Si se utilizan convertidores o funciones matem√°ticas como sumas, multiplicaciones, etc.
existe la posibilidad de que se produzca un desbordamiento de rango, que es detectado por
el procesamiento de seguridad y provoca una parada (STOP) de la CPU.
Esta parada puede evitarse con una detecci√≥n de desbordamiento segura.
Las CPU S7-300 / S7-400 de seguridad requieren para ello una instrucci√≥n de
desbordamiento "Consultar bit de estado OV‚Äú en el segmento siguiente.
Para las CPU S7-1200 / S7-1500 de seguridad se puede programar una detecci√≥n de
desbordamiento con bastante m√°s facilidad y programarse de la forma habitual en el
est√°ndar de STEP 7.
La detecci√≥n de desbordamiento se programa tan solo con la conexi√≥n de la salida de
habilitaci√≥n ENO, lo que permite evitar una parada de la CPU en caso de desbordamiento.
Si el resultado de la instrucci√≥n est√° fuera del rango admitido para el tipo de datos, la salida
de habilitaci√≥n ENO devolver√° el estado l√≥gico "0". El resultado de la instrucci√≥n se
comporta entonces como con la instrucci√≥n equivalente en un bloque est√°ndar.
La detecci√≥n de desbordamiento es compatible con las siguientes instrucciones:
‚Äì ADD: Sumar
‚Äì SUB: Restar
‚Äì MUL: Multiplicar
‚Äì DIV: Dividir
‚Äì NEG: Generar complemento a dos
‚Äì ABS: Calcular valor absoluto (S7-1200, S7-1500)
‚Äì CONVERT: Convertir valor

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

47

Novedades del TIA Portal V15
3.7 Opciones de Runtime
‚óè OB de seguridad is√≥crono
Safety V15 permite conectar dispositivos PROFIsafe is√≥cronos, como p. ej. SINAMICS
S120, mediante OB F (a partir de FW V5.1) para minimizar las fluctuaciones y los tiempos
de reacci√≥n.
Requisitos: CPU S7-1500 de seguridad a partir de la versi√≥n de firmware 2.0 que soporten
IRT.
‚óè Mejoras en cuanto a la facilidad de uso
Con V15, Safety Basic / Advanced ofrece algunas mejoras de uso, que facilitan la creaci√≥n
de programas de usuario de seguridad:
‚Äì Lectura del PLC de variables de salida de FB F tambi√©n en CPU S7-1200 y S7-1500
‚Äì Escritura de variables de entrada del FB F de la misma forma que con el est√°ndar STEP
7
‚Äì Los valores iniciales de los DB de instancia pueden modificarse
‚óè Otras novedades
‚Äì La vigilancia de los DB IO F integrados en el sistema y los DB de informaci√≥n de grupos
de ejecuci√≥n F se soporta con ProDiag.
‚Äì Convertidor DINT -> INT (S7-1200, S7-1500)
‚Äì ABS: Calcular valor absoluto (S7-1200, S7-1500)

Consulte tambi√©n
SIMOCODE ES (P√°gina 43)

3.7

Opciones de Runtime

Descripci√≥n
Las siguientes opciones nuevas se ofrecen con el TIA Portal exclusivamente como opci√≥n
runtime. El producto ProDiag ya est√° integrado en los productos STEP 7 y WinCC existentes,
y solo es necesario adquirir una licencia cuando se utilice en el hardware real. A diferencia de
las opciones de ingenier√≠a, las opciones de Runtime no dependen de la versi√≥n.

48

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V15
3.7 Opciones de Runtime

SIMATIC ProDiag
‚óè Los bloques de S7-GRAPH a partir de la versi√≥n 5.0 permiten tranducir los nombres de las
etapas GRAPH y transiciones GRAPH, as√≠ como restablecer los primeros valores de
enclavamientos y transiciones.
‚óè Mejoras en la selecci√≥n m√∫ltiple en bloques de datos globales, bloques de funci√≥n y tablas
de variables
‚Äì Agregar nuevas vigilancias, aunque la selecci√≥n m√∫ltiple no contenga elementos
booleanos
‚Äì Al borrar se borran todas las vigilancias, aunque un elemento haya contenido m√°s de
una vigilancia
‚Äì Al copiar una vigilancia tambi√©n se copian todas sus propiedades. Al insertar se crean
vigilancias nuevas con las propiedades copiadas y las vigilancias ya existentes se
sobrescriben. Si un elemento contiene varias vigilancias, estas se borran y se crean una
o m√°s vigilancias con las propiedades copiadas.
‚Äì Con la funci√≥n de rellenado autom√°tico de las celdas, en las celdas seleccionadas de un
bloque de datos global o de un bloque de funci√≥n se crean vigilancias nuevas y se
aplican las propiedades de la o las vigilancias seleccionadas.
‚óè Dentro de la tabla de variables, de la interfaz de bloque FB o de bloques de datos globales,
en la columna "Vigilancia" se indica cu√°ntas vigilancias contiene el operando.
‚óè Ahora la b√∫squeda global tambi√©n encuentra los textos ProDiag de las vigilancias creadas
en la ventana de inspecci√≥n, los bloques de funci√≥n ProDiag y los ajustes de vigilancia
ProDiag.

OPC UA
Para las CPU S7-1500 a partir del firmware V2.5 se dispone de la correspondiente licencia
runtime para las siguientes ampliaciones del servidor OPC UA integrado:
‚óè

Se pueden proporcionar m√©todos a trav√©s del programa de usuario de una CPU S7-1500.
Los clientes OPC UA utilizan estos m√©todos p. ej. para hacer procesar una orden de
producci√≥n llamando al m√©todo de la CPU S7-1500.

‚óè Importaci√≥n de modelos de informaci√≥n OPC UA estandarizados (especificaciones
Companion) Con ello se utilizan interfaces unitarias para un gran abanico de dispositivos o
m√°quinas, p. ej. para el modelado de lectores RFID o m√°quinas de moldeo por inyecci√≥n.
Son ejemplos las especificaciones Companion AutoID y Euromap 77.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

49

Novedades del TIA Portal V15
3.7 Opciones de Runtime

50

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14 SP1
4.1

4

Introducci√≥n

Descripci√≥n
Este documento contiene un resumen de todas las novedades importantes respecto de la
versi√≥n actual V14. Encontrar√° informaci√≥n m√°s detallada sobre los diferentes temas en los
respectivos cap√≠tulos de la documentaci√≥n de los productos.

4.2

SIMATIC STEP 7

Descripci√≥n
Las principales novedades de STEP 7 est√°n agrupadas en funci√≥n del flujo de trabajo de la
ingenier√≠a.

Configuraci√≥n hardware
‚óè Nueva fuente de alimentaci√≥n del sistema PS 60W 24/48/60VDC HF para el S7-1500 con
respaldo energ√©tico para salvaguarda de hasta 20 MB de datos en la CPU
‚óè Configuraci√≥n tabular de los canales E/S para m√≥dulos del ET 200MP DI HF y ET 200MP
DO HF , incl. copiar y pegar y funci√≥n de autocompletar
‚óè Edici√≥n de nombres de dispositivo en las vistas gr√°ficas
‚óè Mejora del zoom y selecci√≥n (m√∫ltiple) optimizada en la vista gr√°fica de redes y topol√≥gica
‚óè Vista general de variables E/S de un dispositivo completo (p. ej. una estaci√≥n ET 200SP)
‚óè Eliminaci√≥n sencilla de archivos GSD que no se utilizan en el proyecto
‚óè Ampliaci√≥n del asistente para UDP Multicast en la Open User Communication (OUC) con
S7-1500

Editores para lenguajes de programaci√≥n
‚óè En el c√≥digo del programa SCL, las variables estructuradas y los elementos de ARRAY
pueden sustituirse por otras variables por el procedimiento de arrastrar y soltar.
‚óè En el editor SCL puede cambiarse entre los modos de edici√≥n y sobrescritura.
‚óè En SCL es posible encerrar f√°cilmente segmentos de c√≥digo seleccionados utilizando
determinados elementos de estructura como p. ej. "IF..Then".
‚óè La comparaci√≥n detallada de bloques individuales puede iniciarse directamente desde el
√°rbol del proyecto (offline/offline, pero tambi√©n online/offline).

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

51

Novedades del TIA Portal V14 SP1
4.2 SIMATIC STEP 7
‚óè Los comentarios de variable pueden mostrarse en KOP/FUP directamente en su lugar de
uso.
‚óè La funci√≥n F7 ("Abrir bloque/tipo de datos PLC‚Ä¶") se puede iniciar tambi√©n con foco en los
editores.
‚óè Generar un archivo fuente externo a partir de bloques: la exportaci√≥n de objetos como
fuente externa tiene en cuenta en la interfaz de bloque los tipos de datos PLC (UDT)
definidos, las multiinstancias y todos los bloques llamados.
‚óè En la Task Card "Instrucciones" pueden actualizarse todas las instrucciones utilizadas en
un controlador a la √∫ltima versi√≥n.

Nuevas instrucciones
‚óè Las nuevas instrucciones "SCATTER" y "GATHER" para el S7-1200/1500 permiten copiar
valores entre variables de los tipos de datos BYTE, WORD, DWORD, LWORD y ARRAYs
de variables del tipo de datos BOOL. De esta forma, las palabras de forzado y de estado de
las distintas secciones de una instalaci√≥n pueden, p. ej., descomponerse en se√±ales de bits
individuales y volverse a agrupar f√°cilmente.
‚óè La instrucci√≥n "GetSMCInfo" sirve para leer en el programa de usuario informaci√≥n sobre
la tarjeta SIMATIC Memory Card insertada, como, por ejemplo, el tama√±o de la memoria,
el espacio ocupado o el n√∫mero de procesos de escritura o de borrado (en forma de
porcentaje) que se han llevado a cabo.
‚óè La instrucci√≥n "Polyline" reproduce el valor de entrada, a trav√©s de una curva caracter√≠stica,
en el valor de salida. La curva caracter√≠stica se define como l√≠nea poligonal (con un m√°ximo
de 50 nodos).

Innovaciones en relaci√≥n con los lenguajes
‚óè Los comentarios de tipos de datos PLC (UDT) y de ARRAY se pueden modificar para cada
instancia.
‚óè Es posible asignar diferentes tipos de datos PLC (UDT) con la misma estructura, pero
nombres simb√≥licos distintos.
‚óè Los bloques S7-GRAPH a partir de la versi√≥n 4.0 permiten la adquisici√≥n de primeros
valores de los operandos err√≥neos. Los valores actuales de los estados l√≥gicos de
operandos booleanos y los resultados de comparadores en enclavamientos y transiciones
se registran continuamente a partir del momento en que se activa la adquisici√≥n de
primeros valores, incluso aunque no se produzcan errores. Los estados l√≥gicos se guardan
en el bloque de datos de instancia GRAPH en cada ciclo. Es posible registrar como m√°ximo
32 estados l√≥gicos por enclavamiento o transici√≥n de una etapa GRAPH.

52

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14 SP1
4.2 SIMATIC STEP 7

Librer√≠as
‚óè Las librer√≠as de proyecto y las librer√≠as globales ya pueden traducirse por separado a otros
idiomas.
‚óè Actualizaci√≥n simplificada de tipos (bloques, tipos de datos PLC) en una librer√≠a del
proyecto existente.
‚óè La ayuda definida por el usuario tambi√©n se puede iniciar ahora en el contexto del idioma
del proyecto. Hasta la versi√≥n V14, esto solo era posible en el contexto del idioma del TIA
Portal.

Avisos/diagn√≥stico
‚óè La visualizaci√≥n del visor de avisos en la ventana de inspecci√≥n se ha optimizado y
ampliado con nuevas funciones, como "Recibir avisos" y "Congelar avisos".

Migraci√≥n
‚óè Las constantes locales utilizadas en las fuentes SCL para los l√≠mites de ARRAY se
mantienen al migrar de STEP 7 V5.x al TIA Portal.

Trace
‚óè Cambio del formato de visualizaci√≥n (p. ej.: una variable WORD se puede mostrar en
formato hexadecimal como signed o unsigned INT).
‚óè Se ha integrado una peque√±a ventana de vista preliminar ("Rango de tiempo") en la barra
de desplazamiento del eje X, la cual permite reconocer el rango que est√° ampliado en ese
momento.

Funciones de sistema
‚óè Los datos CAx basados en XML para, p. ej., intercambiar sistemas ECAD, se pueden
exportar y reimportar.
‚óè Se admiten filtros, que el usuario puede definir libremente, para referencias cruzadas con
el fin de, p. ej., encontrar accesos m√∫ltiples a variables.
‚óè El TIA Portal puede vincularse a una administraci√≥n de contrase√±as externa a trav√©s de un
proveedor de contrase√±as. La ventaja de este m√©todo radica en que no es necesario
revelar las contrase√±as. Esto aumenta la seguridad del c√≥digo del programa.

SIMATIC Ident
El objeto tecnol√≥gico (TO) para SIMATIC Ident une la configuraci√≥n hardware de los m√≥dulos
de comunicaci√≥n y lectores con la programaci√≥n de un controlador S7-1200 y S7-1500. Al
mismo tiempo, el TO impide ajustes err√≥neos y detecta errores en la parametrizaci√≥n.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

53

Novedades del TIA Portal V14 SP1
4.3 SIMATIC WinCC
Configuraci√≥n hardware:
‚óè Cada m√≥dulo de comunicaci√≥n/lector obtiene un "nombre un√≠voco" del constructor de la
instalaci√≥n, el cual permite que los responsables de la puesta en marcha y los
programadores puedan identificarlos por igual.
‚óè La parametrizaci√≥n de cada m√≥dulo de comunicaci√≥n, lector o punto de lectura se ajusta
desde el TO.
‚óè El bot√≥n "Configuraci√≥n autom√°tica" permite configurar los aparatos de identificaci√≥n para
el funcionamiento con el TO con un solo clic.
Nuevas instrucciones:
‚óè Todas las instrucciones para SIMATIC Ident se han revisado para que funcionen con el TO.
Encontrar√° las instrucciones en el TIA Portal, en "Paquetes opcionales" > "SIMATIC Ident".
‚óè El direccionamiento de hardware de un lector en las instrucciones se ha modificado de
forma que los lectores se seleccionan por medio de un "nombre un√≠voco" definido en el TO.
Con ello, se suprime el procedimiento anterior de buscar, anotar y transferir el identificador
de hardware y la direcci√≥n l√≥gica, con el que era f√°cil equivocarse.
‚óè Las entradas opcionales en las instrucciones est√°n ocultas. Esto permite al usuario
reconocer de inmediato los par√°metros importantes que son necesarios para una funci√≥n.
‚óè El programador ya no debe preocuparse de la parametrizaci√≥n del hardware.
Independientemente del lector conectado, al arrancar el PLC solo se necesita la instrucci√≥n
RESET_READER, que no dispone de otros par√°metros de entrada. La instrucci√≥n va a
buscar los par√°metros necesarios en un √°rea de datos parametrizada con el TO.
Diagn√≥stico:
‚óè El TO permite visualizar los √∫ltimos mensajes que han notificado las instrucciones a la
aplicaci√≥n.
‚óè Un sello o etiqueta de tiempo y el texto exacto del error ayudan a analizar r√°pidamente el
error.

4.3

SIMATIC WinCC

Ampliaci√≥n de funciones - Openness
‚óè Soporte de faceplates HMI
‚óè Soporte de im√°genes deslizables HMI
‚óè Soporte de im√°genes emergentes HMI

54

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14 SP1
4.3 SIMATIC WinCC

Ampliaciones para paneles SIMATIC HMI
‚óè SIMATIC HMI BASIC Panels:
‚Äì Exportaci√≥n CSV Unicode de recetas para Basic Panels
‚Äì Modificaci√≥n de direcciones IP de controladores y otros componentes SIMATIC (p. ej.
CP) desde el panel de operador.
‚Äì Soporte de fuentes chinas, japonesas, coreanas, rusas y √°rabes en el navegador.
‚óè Actualizaci√≥n de las c√°maras de red probadas (AXIS M1013, AXIS M1011, D-Link
DCS-942L, D-LINK 4701E, Siemens CCMS2025).
‚óè Instalaci√≥n/desinstalaci√≥n de Word, Excel, Win Mediaplayer, IE mediante ProSave.
‚óè N√∫mero ilimitado de scripts utilizables para Comfort.
‚óè Configuraci√≥n de arranque (valor adicional "60s" para tiempo de arranque de RT y funci√≥n
de sistema para Restart Panel).
‚óè Funciones de sistema adicionales en el editor "Zonas" para Mobile Panels.

Ampliaciones para SIMATIC Runtime Advanced
‚óè Visor de c√°mara para ver streams de v√≠deo en directo de c√°maras de red
‚óè Ampliaciones del visor de PDF (buscar y copiar)
‚óè Uso sin licencia del Sm@rtServer en Runtime Advanced (de forma an√°loga a los Comfort
Panels)

Integraci√≥n de SINUMERIK Operate (GUI y datos) en Runtime Advanced
‚óè Acceso a la interfaz de usuario de SINUMERIK Operate mediante nuevos indicadores de
manejo NC en im√°genes de RT Advanced (tambi√©n manejo multit√°ctil)
‚óè Acceso a datos de SINUMERIK NCU desde el canal SINUMERIK separado

Ampliaciones para SIMATIC Runtime Professional
‚óè Soporte de cliente OPC UA DA
‚óè Nuevo m√©todo VBS para ventanas de imagen. Esto permite desactivar temporalmente la
posibilidad de operar una ventana de imagen.
‚óè Personalizaci√≥n del visor de recetas. Esto permite adaptar propiedades de los controles
(botones o elementos de tablas).

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

55

Novedades del TIA Portal V14 SP1
4.5 Opciones de ingenier√≠a

4.4

SINAMICS Startdrive

Startdrive para G120
‚óè Asistente de puesta en marcha optimizado y ampliado:
‚Äì Combinaci√≥n de los dos asistentes anteriores para la puesta en marcha est√°ndar y el
funcionamiento en un eje Motion Control de SIMATIC en un solo asistente.
‚Äì Integraci√≥n de la selecci√≥n de telegrama, resistencia de freno, filtro de motor y sensor de
temperatura, y selecci√≥n del motor tambi√©n a trav√©s del c√≥digo de motor.
‚óè Comparaci√≥n de par√°metros online/offline
‚óè Soporte de Windows 10

Opci√≥n Startdrive para S120
‚óè Configuraci√≥n hardware autom√°tica
‚óè Soporte de Drive-based Extended Safety con pantallas de parametrizaci√≥n gr√°ficas
‚óè Soporte de motores torque (1FW3, 1FW6)
‚óè Conectividad con CPU ET200 SP
‚óè Soporte de Windows 10

4.5

Opciones de ingenier√≠a

SIMATIC STEP 7 Safety
SIMATIC STEP 7 Safety Basic/Advanced V14 SP1, el potente paquete opcional para la
programaci√≥n de los controladores S7 de seguridad en el Totally Integrated Automation Portal
V14 SP1.
‚óè Carga de estaci√≥n
La carga coherente de hardware y software permite cargar los datos del proyecto (incl.
datos del proyecto relevantes para la seguridad) de una CPU S7-1500 de seguridad*) en
una programadora o PC. Los datos del proyecto se cargan sin necesidad de generaci√≥n
adicional y est√°n disponibles de forma coherente en el TIA Portal para seguir trabajando
directamente con ellos.
*) a partir de la versi√≥n de firmware V2.1
‚óè Control de configuraci√≥n
Con Safety V14 SP1 se soporta el control de configuraci√≥n (configuraci√≥n futura) para
periferias F de SIMATIC en las configuraciones siguientes:
‚Äì de forma descentralizada en una CPU F S7-300/400/1200/1500
‚Äì de forma centralizada en una CPU F S7-1500 (incl. CPU ET200SP de seguridad)

56

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14 SP1
4.5 Opciones de ingenier√≠a
‚óè Comunicaci√≥n entre proyectos de controlador IO e I-device
Safety V14 SP1 permite una comunicaci√≥n entre proyectos de controladores por software
S7-1200/1500/1500 de seguridad e I-devices S7-300/400/1200/1500. El proyecto del Idevice puede crearse f√°cilmente con STEP 7 Safety V13 (o superior) o S7 Distributed
Safety V5.4, exportarse como archivo GSD e importarse al proyecto del controlador IO.
‚óè Bloque de estado F-IO global
Las periferias F de seguridad ofrecen una gran cantidad de informaci√≥n de estado por
medio del estado del canal y del m√≥dulo, de las variables QBAD y de los bits de informaci√≥n
de calidad.
Para que en los sistemas de automatizaci√≥n con grandes capacidades tambi√©n sea posible
detectar y procesar de forma centralizada los errores de canal, comunicaci√≥n o periferia F,
el Safety Administration Editor permite crear un FB est√°ndar para cada grupo de ejecuci√≥n
F. En el FB est√°ndar creado se eval√∫an los bits de informaci√≥n de calidad y las variables
QBAD de la periferia F utilizada en el grupo de ejecuci√≥n F correspondiente, y el resultado
de la evaluaci√≥n se muestra en la salida "QSTATUS".
El FB est√°ndar puede utilizarse en el programa est√°ndar.
‚óè Openness
Tanto en STEP 7 Safety como en el est√°ndar es posible utilizar el juego de comandos
Openness. Para ello, es imprescindible que no se haya configurado ninguna contrase√±a
para los datos de proyecto relevantes para la seguridad. El uso de Openness en modo
productivo no est√° permitido.
Se soportan las siguientes funciones, entre otras:
‚Äì Trabajo con librer√≠as (borrar, copiar, instanciar, actualizar... elementos)
‚Äì Importaci√≥n de variables, tablas de variables, tipos de datos PLC (UDT), etc.
‚Äì Compilaci√≥n de SW, bloques, tipos de datos PLC (UDT).
‚Äì Insertar/borrar CPU F y periferia F
‚Äì Copiar/borrar CPU F y periferia F desde plantillas maestras
‚Äì Configurar redes
‚Äì Compilar software (incl. programa de seguridad)
‚Äì Leer/configurar par√°metros F de la CPU F
‚Äì Leer/configurar par√°metros F de la periferia F
‚Äì Leer, declarar o borrar variables de seguridad en la tabla de variables PLC
‚Äì Actualizar un proyecto a las √∫ltimas versiones de tipo de bloques F

SINUMERIK STEP 7 Toolbox
SINUMERIK STEP 7 Toolbox V14 SP1 es un paquete opcional de SIMATIC STEP 7
Professional V14 SP1 (TIA Portal) con programa de instalaci√≥n adicional.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

57

Novedades del TIA Portal V14 SP1
4.6 Opciones de runtime
SINUMERIK STEP 7 Toolbox V14 SP1 permite configurar el hardware SINUMERIK en el TIA
Portal utilizando las siguientes funcionalidades y herramientas:
‚óè Ampliaci√≥n del cat√°logo de hardware con los siguientes m√≥dulos de SINUMERIK 840D sl
(a partir del firmware V4.5 SP2):
‚Äì NCU 710.3B
‚Äì NCU 720.3B
‚Äì NCU 730.3B
‚Äì NX10.3
‚Äì NX15.3
‚óè Ampliaci√≥n del cat√°logo de hardware con el m√≥dulo ADI4
‚óè Programa base del PLC SINUMERIK para las versiones
‚Äì V4.5.x.x
‚Äì V4.7.x.x
‚Äì V4.8.x.x
Con SINUMERIK STEP 7 Toolbox V14 SP1 se instala autom√°ticamente el programa
base del PLC en forma de librer√≠a del sistema "SINUMERIK 840D sl PLC Basic
Program".
‚óè Compatibilidad con la migraci√≥n de hardware
‚óè Creaci√≥n de ficheros de puesta en marcha del PLC SINUMERIK, ficheros de actualizaci√≥n
del hardware del PLC y ficheros de recarga
‚óè Exportaci√≥n de s√≠mbolos del PLC para SINUMERIK Operate
‚óè Importaci√≥n de textos de alarmas de usuario SINUMERIK
‚óè Creaci√≥n de ficheros de PLC SINUMERIK
‚óè Compatibilidad con PROFINET IO IRT para NCK
‚óè Compatibilidad con SINUMERIK Safety Integrated y Safety Integrated plus
‚óè NC-VAR Selector (herramienta externa)

4.6

Opciones de runtime

Descripci√≥n
Las opciones nuevas siguientes se ofrecen exclusivamente como opciones de runtime con el
TIA Portal V14 SP1. El producto ProDiag ya est√° integrado en los productos STEP 7 y WinCC
existentes, y solo es necesario licenciarlo cuando se utilice en el hardware real. A diferencia de
las opciones de ingenier√≠a, las opciones de runtime no dependen de la versi√≥n.

58

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14 SP1
4.6 Opciones de runtime

SIMATIC ProDiag
‚óè Los bloques S7-GRAPH a partir de la versi√≥n 4.0 permiten la adquisici√≥n de primeros
valores de los operandos err√≥neos.
‚óè El objeto "Visor de c√≥digo PLC" permite visualizar los primeros valores en el HMI y, en caso
de fallo, detectar inmediatamente los operandos err√≥neos (an√°lisis de criterios). Los
primeros valores se guardan hasta que se sobrescriben por un nuevo fallo.
‚óè Para la adquisici√≥n de primeros valores se admiten todas las instrucciones soportadas en
las transiciones y los enclavamientos de un bloque de funci√≥n S7-GRAPH. En las
operaciones l√≥gicas con bits se guarda el estado del operando y en los comparadores, el
resultado de la comparaci√≥n.

SIMATIC Energy Suite S7-1500
SIMATIC Energy Suite como opci√≥n integrada para el TIA Portal combina por primera vez la
gesti√≥n de la energ√≠a con la automatizaci√≥n de forma eficiente, de modo que la transparencia
energ√©tica entra en la producci√≥n. Adem√°s, la configuraci√≥n simplificada de componentes que
miden la energ√≠a reduce claramente el esfuerzo de configuraci√≥n.
Funciones:
‚óè Configuraci√≥n integrada e intuitiva de la gesti√≥n de energ√≠a
‚óè Creaci√≥n autom√°tica del programa energ√©tico del PLC para S7-1500 para datos b√°sicos de
energ√≠a (energ√≠a y rendimiento)
‚óè Archivado en WinCC Runtime Professional o en una SIMATIC Memory Card interna del
PLC
‚óè Conexi√≥n sin fisuras a SIMATIC Energy Manager PRO
Nuevo en V14 SP1:
‚óè Ampliaci√≥n de la creaci√≥n autom√°tica de programas de PLC con datos adicionales de
energ√≠a (intensidad, tensi√≥n, frecuencia).
‚óè Adem√°s de la exportaci√≥n manual de datos de energ√≠a, ahora tambi√©n es posible
exportarlos autom√°ticamente (p. ej., inicio de la exportaci√≥n de datos de energ√≠a de la
semana anterior todos los lunes a las 00:15h).
‚óè Generador de programas: visualizaci√≥n detallada del progreso de la generaci√≥n y avisos de
errores de configuraci√≥n.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

59

Novedades del TIA Portal V14 SP1
4.6 Opciones de runtime

60

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14
5.1

5

Introducci√≥n

Descripci√≥n
Este documento contiene un resumen de todas las novedades importantes respecto de la
versi√≥n actual V13 SP1. Encontrar√° informaci√≥n m√°s detallada sobre los diferentes temas en
los respectivos cap√≠tulos de la documentaci√≥n de los productos.

5.2

SIMATIC STEP 7

Descripci√≥n
Las principales novedades de STEP 7 est√°n agrupadas en funci√≥n del flujo de trabajo de
ingenier√≠a.

Configuraci√≥n hardware
‚óè Soporte de la familia de CPU S7-1500 T, con las funciones de Motion Control "Sincronismo
absoluto" y "Disco de levas".
‚óè Soporte de las nuevas CPU 1518(F)-4 PN/DP ODK (Open Development Kit), que permite
integrar en el programa de usuario las funciones de C/C++ creadas mediante el SIMATIC
ODK 1500S.
‚óè Soporte de la CPU 1516pro (F)-2 PN
‚óè Soporte del nuevo controlador de software seguro S7-1500
‚óè Existe la posibilidad de agrupar dispositivos IO / dispositivos en el √°rbol del proyecto con el
fin de realizar b√∫squedas r√°pidas y juntar dispositivos por motivos tecnol√≥gicos.
‚óè Es posible sincronizar en la vista de redes la disposici√≥n de los dispositivos en la vista
topol√≥gica.
‚óè Para acceder de forma sencilla y r√°pida a los m√≥dulos que se utilicen con mayor frecuencia,
ahora se pueden definir perfiles propios en el cat√°logo de hardware.

Editores para lenguajes de programaci√≥n
‚óè Se dispone de editores propios para los nuevos objetos tecnol√≥gicos: leva, pista de leva y
palpador. Adem√°s, para los controladores S7-1500T existe un editor de discos de levas
f√°cil de usar.
‚óè En un bloque KOP / FUP es posible insertar segmentos SCL.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

61

Novedades del TIA Portal V14
5.2 SIMATIC STEP 7
‚óè En el c√≥digo de programa SCL pueden utilizarse "Regiones" para estructurarlo mejor y para
la navegaci√≥n.
‚óè Los par√°metros de bloque pueden ocultarse al llamar el bloque en KOP o FUP.
‚óè Se ha revisado a fondo la comparaci√≥n de programas de PLC, lo que permite una
comparaci√≥n r√°pida y c√≥moda de c√≥digos fuente con muchos filtros posibles.
‚óè Los segmentos en los editores de programaci√≥n para KOP / FUP / AWL se representan
autom√°ticamente de la misma forma en que se visualizaron la √∫ltima vez que se cerr√≥ el
bloque.

Innovaciones en relaci√≥n con los lenguajes
‚óè ARRAY[*] permite transferir ARRAYs de longitud variable.
‚óè En la interfaz de bloque es posible declarar multiinstancias en ARRAYs y llamarlas en
bucles. Esto ayuda a reducir considerablemente el c√≥digo del programa y a conseguir una
mejor legibilidad y una programaci√≥n m√°s eficiente en la ejecuci√≥n de objetos de programa
iguales.
‚óè El tipo de datos DB_ANY puede utilizarse tambi√©n para objetos tecnol√≥gicos. Esto
proporciona m√°s flexibilidad para manejar objetos tecnol√≥gicos en el programa. Por
ejemplo, un "ARRAY of DB_ANY" puede representar una lista de ejes de posicionamiento.
‚óè Las instancias pueden transferirse como par√°metros en la secci√≥n "InOut" de la interfaz del
bloque, de modo que no hay que seleccionar una instancia dedicada hasta que se llama.
‚óè En el PLC S7-1500 es posible cargar y cambiar online un m√°ximo de 3 idiomas para textos
de aviso y comentarios.

Avisos / Diagn√≥stico
‚óè La nueva instrucci√≥n "Get_Alarm" permite leer avisos directamente del servidor de avisos
de la CPU S7-1500 y, p. ej., enviarlos a un sistema de avisos de nivel superior (p. ej. un
sistema de control de procesos).
‚óè En el modo 1 de la instrucci√≥n "GET_DIAG" los datos de diagn√≥stico se entregan con
estructura DIS. El bit 15 del par√°metro IOState de dicha estructura est√° a "1" si ha aparecido
un error en la red o el hardware.

Trace
‚óè La funci√≥n Trace permite visualizar en un diagrama com√∫n diversas mediciones
("Mediciones superpuestas").
‚óè Adem√°s, una vez concluidas, las mediciones Trace pueden guardarse (a prueba de cortes
de red) en la tarjeta de memoria y rearrancarse autom√°ticamente cuando sea necesario.

62

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14
5.2 SIMATIC STEP 7

Funciones online
‚óè Reestructuraci√≥n de la barra de herramientas en el editor de DB, con posibilidad de
reinicializar bloques de datos completos con los valores de arranque definidos.
‚óè Las estructuras del bloque pueden observarse, junto con su entorno de llamada,
directamente en la ventana de inspecci√≥n.

Funciones de sistema
‚óè La nueva b√∫squeda global permite buscar objetos de PLC o HMI en varios proyectos.
Adem√°s, es posible limitar el resultado de la b√∫squeda mediante filtrado. Tambi√©n est√°
disponible una funci√≥n "GoTo".
‚óè Los ajustes del TIA Portal pueden exportarse e importarse y guardarse en un servidor
centralizado. Si, p. ej. hay una ruta de servidor, los ajustes guardados se aplicar√°n
autom√°ticamente como "ajuste predeterminado" cada vez que se reinicie el TIA Portal.
‚óè Sistema innovador de ayuda e informaci√≥n con tecnolog√≠a de fichas, funci√≥n de b√∫squeda
mejorada y posibilidad de filtrar informaci√≥n por familias de dispositivos.
‚óè La nueva lista de referencias cruzadas ofrece una visi√≥n de conjunto r√°pida de los objetos
y dispositivos que se utilizan en el proyecto.
‚Äì Soporte de accesos solapados (variables de PLC)
‚Äì Soporte de bloques con protecci√≥n de know-how
‚Äì Acceso a elementos individuales de un ARRAY
‚Äì Representaci√≥n de objetos que aparecen tanto en HMI como en dispositivos de PLC.
‚Äì Posibilidad de introducir libremente en la lista de referencias cruzadas los objetos que
se buscan
‚Äì Diversas posibilidades de filtrado
‚Äì En redes de empresa proporciona actualizaciones de manera centralizada y c√≥moda
‚Äì Con la TIA Automation Corporate Configuration Tool es posible configurar un servidor
propio de la empresa. En el servidor se guardan las actualizaciones o los Support
Packages disponibles, que quedan a disposici√≥n de los usuarios.

S7-PLCSIM
‚óè Arranque r√°pido de S7-PLCSIM en modo compacto y sin proyecto de simulaci√≥n
‚óè Los dispositivos pueden intercambiarse en el proyecto de simulaci√≥n, de modo que las
tablas SIM y las entradas de secuencias existentes pueden seguirse utilizando con
absoluta sencillez.
‚óè Las secuencias pueden arrancarse autom√°ticamente a partir de una condici√≥n de disparo.
‚óè Las secuencias pueden desactivarse temporalmente.
‚óè Los dispositivos IO descentralizados pueden simularse en la vista de dispositivos.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

63

Novedades del TIA Portal V14
5.3 SIMATIC WinCC

Aplicaciones de Motion Control
‚óè Conexi√≥n y configuraci√≥n preconfiguradas e integradas del accionamiento SINAMICS V90
PN a un objeto tecnol√≥gico de Motion Control del SIMATIC S7-1500.
‚óè Sincronizaci√≥n autom√°tica de datos entre el controlador y el accionamiento.

Consulte tambi√©n
Opciones de ingenier√≠a (P√°gina 68)
Opciones de runtime (P√°gina 70)

5.3

SIMATIC WinCC

Configurar im√°genes
‚óè Nueva vista de la periferia descentralizada en el control de diagn√≥stico del sistema.
‚óè Mejoras en los controles:
‚Äì Nuevas barras de desplazamiento con colores configurables.
‚Äì N√∫mero din√°mico de entradas en el men√∫ desplegable para el control de recetas.
‚Äì Ampliaci√≥n de los controles Slider, Bar y Gauge con un m√°ximo de cuatro valores l√≠mite.
‚óè Nueva fuente "Siemens TIA Portal Icons".
‚óè La librer√≠a gr√°fica se ha complementado con gr√°ficos nuevos y su estructura se ha revisado
por completo.

Trabajar con variables
‚óè Multiplexado simb√≥lico de direcciones de instancias PlcUDT en una variable ARRAY de un
bloque de datos.
‚óè IntelliSense jer√°rquico en la conexi√≥n de datos de PLC a variables HMI.

SIMATIC Panels y SIMATIC WinCC Runtime Advanced
‚óè Transferencia de la configuraci√≥n con stick USB / tarjeta SD para Basic Panels
2ndGeneration, Comfort Panels, Outdoor Panels, Mobile Panels y WinCC Runtime
Advanced.
‚óè Opci√≥n Sm@rtServer para Basic Panel 2. Generation.

64

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14
5.4 SINAMICS Startdrive
‚óè Se ha mejorado la seguridad de las funciones siguientes:
‚Äì Se firman los siguientes componentes:
Comfort y Mobile Panel: Runtime, opciones de ProSave y complementos de runtime.
Basic Panels 2. Generation: Imagen del panel
‚Äì Seguridad de las contrase√±as utilizadas en runtime
‚Äì Posibilidad de conexi√≥n de navegador web a un Sm@rtServer mediante protocolo
HTTPS y conexi√≥n segura de un SmartClient web al Sm@rtServer.
‚óè El n√∫mero m√°ximo de Powertags en WinCC Runtime Advanced se ha aumentado hasta
16K.

WinCC Runtime Professional
‚óè Opci√≥n WebUX
Manejo y visualizaci√≥n v√≠a web independientemente de la plataforma y el navegador.
‚óè Opci√≥n de diagn√≥stico de proceso
Cuando se produce un fallo en el proceso, el diagn√≥stico de proceso ofrece informaci√≥n
sobre la ubicaci√≥n y la causa del error, adem√°s de ayudarle a solucionarlo.
‚óè Ampliaci√≥n: capacidades de los PLC 1200/1500
Ahora, el n√∫mero de conexiones al S7-1200/1500 es de 64.
‚óè Ampliaci√≥n: Multitouch para determinados controles
Ahora pueden utilizarse gestos para el desplazamiento en el √°rea de visualizaci√≥n de los
controles (Trend-based Controls, Grid-based Controls, Axis-Control).
‚óè Unificaci√≥n: Licencias para WEBNAVIGATOR, DATAMONITOR y WebUX
El tipo de licencia de las opciones web ser√° Countable en general. En el futuro, estas
opciones SCADA tendr√°n referencias (MLFB) unitarias a partir de V7.4 y V14,
respectivamente, por lo que para estos productos no habr√° referencias propias para
Runtime Professional.

Consulte tambi√©n
Opciones de ingenier√≠a (P√°gina 68)
Opciones de runtime (P√°gina 70)

5.4

SINAMICS Startdrive

Puesta en marcha simplificada y (Tele)Service simplificado
Funcionalidad de routing ampliada para al comunicaci√≥n entre Startdrive y el accionamiento:
‚óè Routing salvando los l√≠mites de diversos sistemas PROFINET
‚óè Routing desde PROFIBUS a PROFINET

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

65

Novedades del TIA Portal V14
5.4 SINAMICS Startdrive

Simple adaptaci√≥n de un proyecto a la m√°quina
Actualizaci√≥n de la versi√≥n del firmare del G120 en el proyecto Startdrive (comenzando con la
versi√≥n de firmware 4.4)

Reutilizaci√≥n de la parametrizaci√≥n cubriendo diversas gamas
Tambi√©n para G120C

Acceso m√°s r√°pido al paquete de descarga de Startdrive en SIOS
‚óè Ning√∫n tiempo de espera para el control de exportaci√≥n
‚óè Comenzando por Startdrive V13 SP1 se suprima el control de exportaci√≥n (id. de control de
exporaci√≥n: AL=N, ECCN=N)

Configuraci√≥n m√°s eficiente
Tiempo de compilaci√≥n optimizado de la CPU S7 en accionamientos en red configurados con
Startdrive

Es posible modificar los bloques de datos S7 para control de accionamientos suministrados
Drive Library ahora sin protecci√≥n de know-how

Puesta en marcha simplificada
En el √°rbol del proyecto y en la vista de redes HWCN es muy f√°cil asignar el nombre del
dispositivo PROFINET usando el men√∫ contextual.

Proceso de actualizaci√≥n simplificado
Instalaci√≥n autom√°tica de HSP de Startdrive y actualizaciones a trav√©s del TIA Portal Updater

Soporte de nuevo hardware
Se soportan los nuevos motores s√≠ncronos de reluctancia 1FP1

No se precisan actualizaciones manuales
HSP para firmware Sinamics V4.7.3 y V4.7.6 ya integrados.

66

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14
5.6 SIMOCODE ES V14

5.5

SIMOTION SCOUT TIA

Descripci√≥n
La plataforma SIMOTION P (basada en PC) tambi√©n est√° disponible ahora en el TIA Portal.
(Previsiblemente unos 3 meses despu√©s de la liberaci√≥n de STEP 7 para el suministro.)
‚óè Existe la posibilidad de cargar la configuraci√≥n hardware para dispositivos SIMOTION.
‚óè Funciones PROFINET complementarias para dispositivos SIMOTION:
‚Äì Shared-I-Device
‚Äì Shared Device
‚Äì Seamless Media Redundancy (MRPD)
‚Äì "Check of VendorID/DeviceID" y "Overwriting of the NameOfStation" (configuraci√≥n
autom√°tica de la topolog√≠a)
‚Äì Address tailoring (m√°quinas modulares)

5.6

SIMOCODE ES V14

Routing v√≠a Ethernet - PROFINET
Con SIMOCODE ES V14 se soporta el routing hacia dispositivos SIMOCODE pro con
PROFINET. Ahora tambi√©n se accede a los dispositivos v√≠a Ethernet desde una estaci√≥n de
ingenier√≠a con SIMOCODE ES V14 si dicha estaci√≥n no est√° conectada directamente a la red
PROFINET a la que est√°n conectados los dispositivos SIMOCODE pro. De este modo mejoran
las posibilidades de uso del software en instalaciones que emplean dispositivos SIMOCODE
pro con PROFINET.

Migraci√≥n de archivos agrupados SIMOCODE ES 2007
Las configuraciones creadas con SIMOCODE ES 2007 en las que se juntaron archivos de
par√°metros para los dispositivos SIMOCODE pro en archivos agrupados, pueden migrarse
ahora directamente y sin necesidad de pasos de configuraci√≥n adicionales a un mismo
proyecto del TIA Portal V14. Esta funci√≥n mejora el manejo del software durante la migraci√≥n
de SIMOCODE ES 2007 a SIMOCODE ES V14 TIA Portal.

Funciones de editor mejoradas para esquemas con interconexiones SIMOCODE pro.
Con SIMOCODE ES V14 Standard y Premium es posible copiar en su totalidad o parcialmente
esquemas basados en CFC y guardarlos como elementos de librer√≠a para volver a utilizarlos.
Esta funci√≥n simplifica el manejo de ajustes repetitivos para configuraciones t√≠picas.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

67

Novedades del TIA Portal V14
5.7 Opciones de ingenier√≠a

Representaci√≥n clara de todos los ajustes de par√°metros en el editor de par√°metros
Todos los ajustes de par√°metros importantes para la puesta en marcha r√°pida de una
derivaci√≥n a motor pueden representarse y editarse en una nueva vista general en
SIMOCODE ES V14, lo que mejora considerablemente la claridad.

Representaci√≥n unitaria de curvas registradas para valores medidos
Los valores medidos y datos registrados online y offline con las funciones "Live-Trend"
(tendencia en directo) y "Registro de valores anal√≥gicos" de SIMOCODE ES se visualizan
utilizando la funci√≥n "Traces" del TIA Portal. El manejo de esta funci√≥n mejora claramente
gracias a que se ha unificado en todo el TIA Portal.

5.7

Opciones de ingenier√≠a

TIA Portal Multiuser
TIA Portal Multiuser Engineering permite trabajar con varios usuarios conjunta y
simult√°neamente en un proyecto. De este modo se reducen sustancialmente los tiempos de
configuraci√≥n y los proyectos pueden ponerse en marcha con mayor rapidez.
El principio b√°sico:
‚óè Una aplicaci√≥n de servidor independiente se encarga de administrar el proyecto. La
aplicaci√≥n de servidor puede instalarse independientemente de un TIA Portal,
o
la administraci√≥n del proyecto est√° ubicada en un servidor. El servidor puede instalarse
independientemente de un TIA Portal,
‚óè Diferentes usuarios trabajan en sesiones locales sobre la base de proyectos administrados
por el servidor.
‚óè El trabajo en sesiones locales es independiente entre s√≠, los cambios realizados por otros
usuarios se muestran y pueden aplicarse.
‚óè Los cambios de las sesiones locales se transfieren al proyecto del servidor mediante checkin.

TIA Portal Teamcenter Gateway
El TIA Portal Teamcenter Gateway permite guardar y administrar proyectos del TIA Portal y
librer√≠as globales en el Teamcenter. El manejo est√° integrado en el TIA Portal.

TIA Portal Cloud Connector
El TIA Portal Cloud Connector permite acceder a interfaces PC locales y a hardware SIMATIC
conectado a ellas en la ingenier√≠a del TIA Portal, aunque la ingenier√≠a propiamente dicha se
realice en una nube privada mediante escritorio remoto.

68

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14
5.7 Opciones de ingenier√≠a

SIMATIC Energy Suite
SIMATIC Energy Suite como opci√≥n integrada para el TIA Portal combina por primera vez la
gesti√≥n de la energ√≠a con la automatizaci√≥n de forma eficiente, de modo que la transparencia
energ√©tica entra en la producci√≥n. Adem√°s, la configuraci√≥n simplificada de componentes que
miden la energ√≠a reduce claramente el esfuerzo de configuraci√≥n.
‚óè Configuraci√≥n integrada e intuitiva de la gesti√≥n de energ√≠a
‚óè Creaci√≥n autom√°tica del programa energ√©tico del PLC para S7-1500
‚óè Archivado en WinCC Runtime Professional o en una SIMATIC Memory Card interna del
PLC
‚óè Conexi√≥n sin fisuras a SIMATIC Energy Manager PRO

SIMATIC S7-PLCSIM Advanced
S7-PLCSIM Advanced es adecuado para la simulaci√≥n de un PLC S7-1500. En comparaci√≥n
con S7-PLCSIM est√°ndar, S7-PLCSIM Advanced ofrece las siguientes funciones adicionales:
‚óè API para la integraci√≥n en co-simulaciones
‚óè Posibilidad de varias instancias distribuidas
‚óè Hora virtual ajustable
‚óè Acceso de servidor web y OPC UA

SIMATIC ODK 1500S
SIMATIC ODK 1500S permite desarrollar librer√≠as de funciones con los lenguajes de alto nivel
C/C++ para PLC SIMATIC S7-1500 aptos para ODK. Estas librer√≠as de funciones pueden
cargarse y ejecutarse directamente desde el programa de usuario. Los siguientes PLC
S7-1500 son aptos para ODK:
‚óè S7-1500 Software Controller (CPU 1507S (F))
‚óè ET 200SP Open Controller (CPU 1515SP PC (F))
‚óè S7-1500 Advanced Controller (CPU 1518(F)-4 PN/DP ODK)

SIMATIC Target 1500STM for Simulink¬Æ
SIMATIC Target 1500STM para Simulink¬Æ es un complemento para Simulink de la empresa
MathWorks. Permite integrar directamente modelos de Simulink al ciclo de programa de un
PLC S7-1500 apto para ODK.
‚óè Permite el desarrollo basado en modelos con MATLAB¬Æ y Simulink para controladores
SIMATIC.
‚óè Integraci√≥n sin fisuras en Simulink, como sistema target file
‚óè No es necesario C/C++ ni know-how de ODK

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

69

Novedades del TIA Portal V14
5.8 Opciones de runtime
‚óè Soporte de Simulink External Mode para observar y controlar directamente desde Simulink
par√°metros del modelo en el controlador.
‚óè El c√≥digo de programa generado puede ejecutarse en las CPU 1507S(F) V2.0, CPU
1515SP PC (F) V2.0 y CPU 1518(F)-4 PN/DP ODK.

SIMATIC Visualization Architect
El SIMATIC Visualization Architect (SiVArc) permite crear autom√°ticamente contenidos HMI
de una forma sencilla, r√°pida y flexible sobre la base del programa de usuario STEP 7.
‚óè Paneles HMI soportados:
Comfort Panel, Mobile Panel 2nd Generation, WinCC RT Professional, WinCC RT
Advanced
‚óè Objetos HMI soportados:
Screens, Text lists, Power-Tags, Caption, Button, I/O Field, Symbolic I/O Field, Graphic I/O
Field, Switch, Round Button
‚óè Configuraci√≥n mediante editores de reglas
‚óè Las plantillas se administran mediante librer√≠as

5.8

Opciones de runtime

Descripci√≥n
Con el TIA Portal V14 se ofrecen exclusivamente como opci√≥n runtime las opciones nuevas
siguientes. Los productos ProDiag y OPC UA S7-1500 ya est√°n integrados en los productos
STEP 7 y WinCC existentes, y solo es necesario licenciarlos cuando se utilicen en el hardware
real. A diferencia de las opciones de ingenier√≠a, las opciones runtime no dependen de la
versi√≥n.

SIMATIC ProDiag
SIMATIC ProDiag permite un diagn√≥stico r√°pido y selectivo de m√°quinas e instalaciones para
SIMATIC S7-1500 y SIMATIC HMI:
‚óè Etiquetado de tiempo centralizado para los mensajes de fallo
‚óè Generaci√≥n autom√°tica de la l√≥gica de vigilancia y de las llamadas de avisos
‚óè Actualizaci√≥n autom√°tica del SIMATIC HMI al cambiar la configuraci√≥n de mensajes para
3 idiomas
‚óè No es necesario salir de los sistemas HMI al cambiar el modo de funcionamiento runtime
‚óè Est√° disponible directamente en los editores de lenguajes KOP, FUP, SCL y AWL
‚óè Las supervisiones pueden parametrizarse posteriormente en bloques F y en bloques con
protecci√≥n de know-how
‚óè Determinaci√≥n de la estructura de los avisos centralizada en el proyecto

70

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

Novedades del TIA Portal V14
5.8 Opciones de runtime
‚óè Los textos de aviso se derivan directamente de informaci√≥n existente en el proyecto
‚óè Visualizaci√≥n sencilla en el HMI mediante controles preestablecidos

SIMATIC OPC UA S7-1500
La opci√≥n OPC UA S7-1500 permite incorporar f√°cilmente cualquier dispositivo de terceros al
S7-1500 por medio del servidor OPC UA integrado en la CPU S7-1500:
‚óè Servidor OPC UA directamente en el S7-1500
‚óè OPC UA Data Access, Read/Write, Subscription en cambios de valores
‚óè Security (seguridad inform√°tica)
‚óè Exportaci√≥n XML a la configuraci√≥n offline de clientes OPC UA

SIMATIC Energy Suite S7-1500
Con SIMATIC Energy Suite Engineering se suministran conjuntamente 10 objetos de energ√≠a.
Mediante los paquetes runtime pueden ampliarse los objetos de energ√≠a adicionales

WinCC / WebUX
WinCC / WebUX permite observar procesos de la instalaci√≥n mediante dispositivos terminales
m√≥viles a trav√©s de Internet o Intranet, as√≠ como controlarlos en caso necesario. El software
proporciona una soluci√≥n de visualizaci√≥n que, con independencia del sistema operativo, es
id√≥nea para HTML5 y para navegadores compatibles con SVG, y que no exige tareas de
ingenier√≠a.

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

71

Novedades del TIA Portal V14
5.8 Opciones de runtime

72

Novedades del TIA Portal
Manual de programaci√≥n y manejo, 11/2019

L√©ame
Manual de programaci√≥n y manejo

11/2019

Indicaciones acerca del TIA
Portal

1

STEP 7

2

WinCC

3

Safety

4

L√©ame de SIMATIC Energy
Suite

5

TIA Portal Version Control
Interface

6

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Division Digital Factory
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

2

Indicaciones acerca del TIA Portal ...............................................................................................................7
1.1

Indicaciones generales ............................................................................................................7

1.2

Indicaciones acerca de las librer√≠as .......................................................................................10

1.3

Indicaciones acerca de las Memory Cards ............................................................................11

1.4

Indicaciones para el uso del TIA Portal en un entorno virtual (Private Cloud).......................12

1.5

Informaci√≥n sobre el uso de TIA Portal Teamcenter Gateway ..............................................13

1.6

Indicaciones para el trabajo con Multiuser Engineering.........................................................16

STEP 7 .......................................................................................................................................................19
2.1

Informaci√≥n de seguridad.......................................................................................................19

2.2

Indicaciones de manejo .........................................................................................................22

2.3

Funcionamiento online paralelo .............................................................................................23

2.4
2.4.1
2.4.2
2.4.3
2.4.4
2.4.5
2.4.6
2.4.7
2.4.8
2.4.9
2.4.10
2.4.11
2.4.11.1

Editar dispositivos y redes .....................................................................................................24
Indicaciones generales relativas a dispositivos y redes.........................................................24
Indicaciones acerca de la configuraci√≥n hardware ................................................................24
Indicaciones sobre las funciones OPC UA ............................................................................25
Detecci√≥n de hardware de dispositivos IO.............................................................................30
ID de hardware del tipo "Hw_SubModule" para un dispositivo IO HMI Panel........................31
Uso de m√≥dulos en el S7-1200..............................................................................................31
CP 343-2 en SIMATIC S7 Embedded Controller EC31-RTX.................................................32
Carga de CPU S7-1500 (SIPLUS) .........................................................................................33
ET 200MP (IM 155-5 DP ST) en un WinLC RTX ...................................................................34
Indicaciones relativas a Online y diagn√≥stico ........................................................................34
Componentes de red..............................................................................................................35
M√≥dulos de red y de comunicaci√≥n........................................................................................35

2.5
2.5.1
2.5.2
2.5.3
2.5.3.1
2.5.3.2
2.5.3.3
2.5.4
2.5.5
2.5.5.1
2.5.5.2
2.5.5.3
2.5.5.4
2.5.5.5
2.5.5.6

Programaci√≥n del PLC ...........................................................................................................41
Indicaciones generales relativas a la programaci√≥n del PLC ................................................41
Indicaciones acerca de las instrucciones...............................................................................43
Comprobar el programa de usuario .......................................................................................43
Nota sobre el test con la tabla de observaci√≥n ......................................................................43
Nota sobre el test con la tabla de forzado permanente .........................................................44
Nota sobre el test con puntos de parada ...............................................................................45
Actualizaci√≥n de bloques .......................................................................................................45
Compatibilidad con programas de PLC de versiones anteriores ...........................................46
Compatibilidad con programas de PLC de versiones anteriores a la V16.............................46
Compatibilidad de programas de PLC de versiones anteriores a la V15.1............................50
Compatibilidad con programas de PLC de versiones anteriores a V15.................................52
Compatibilidad de programas de PLC de versiones anteriores a la V14 SP1.......................55
Compatibilidad con programas de PLC de versiones anteriores a V14.................................57
Compatibilidad de programas de PLC de versiones anteriores a la V13 SP1.......................62

2.6

Inter Project Engineering (IPE) ..............................................................................................68

L√©ame
Manual de programaci√≥n y manejo, 11/2019

3

√çndice

3

4

2.6.1

Indicaciones relativas a IPE ...................................................................................................68

2.7
2.7.1
2.7.2
2.7.3
2.7.4
2.7.5
2.7.5.1
2.7.6
2.7.6.1

Funciones tecnol√≥gicas..........................................................................................................69
Notas sobre S7-1500 Motion Control.....................................................................................69
Notas sobre funciones tecnol√≥gicas adicionales ...................................................................72
Indicaciones sobre las funciones tecnol√≥gicas ......................................................................73
Indicaciones sobre las funciones tecnol√≥gicas ......................................................................74
SIMATIC STEP 7 Easy Motion Control..................................................................................74
Indicaciones relativas a SIMATIC STEP 7 Easy Motion Control ...........................................74
SIMATIC STEP 7 PID Professional .......................................................................................75
Indicaciones relativas a SIMATIC STEP 7 PID Professional .................................................75

WinCC ........................................................................................................................................................77
3.1

Indicaciones de seguridad .....................................................................................................77

3.2

Protecci√≥n de datos ...............................................................................................................84

3.3

Indicaciones de uso ...............................................................................................................85

3.4

Migraci√≥n................................................................................................................................87

3.5
3.5.1
3.5.2
3.5.3
3.5.4
3.5.5
3.5.6
3.5.7
3.5.8

Engineering System ...............................................................................................................88
Im√°genes y objetos de imagen ..............................................................................................88
Variables y conexiones ..........................................................................................................91
Sistema de avisos y visor de avisos ......................................................................................92
Funciones de sistema y scripts ..............................................................................................93
Informes .................................................................................................................................95
Recetas ..................................................................................................................................95
Administraci√≥n de usuarios ....................................................................................................96
Comunicaci√≥n ........................................................................................................................96

3.6

Funciones generales............................................................................................................101

3.7

Compilar y cargar.................................................................................................................102

3.8
3.8.1
3.8.2
3.8.3
3.8.4
3.8.5
3.8.5.1
3.8.5.2
3.8.5.3
3.8.5.4
3.8.5.5
3.8.5.6
3.8.5.7
3.8.5.8
3.8.5.9
3.8.5.10

Runtime................................................................................................................................104
Indicaciones relativas al funcionamiento en runtime............................................................104
Indicaciones relativas al funcionamiento de Panels en runtime...........................................106
Indicaciones relativas al funcionamiento de Runtime Advanced .........................................108
Indicaciones relativas al funcionamiento de Runtime Professional .....................................109
Notas relativas al funcionamiento de Runtime Unified.........................................................113
Notas generales ...................................................................................................................113
Im√°genes y objetos de imagen ............................................................................................115
Sistema de avisos y visor de avisos ....................................................................................118
Funciones de sistema y scripts ............................................................................................118
Librer√≠as ...............................................................................................................................119
Notas relativas al funcionamiento de Runtime Unified.........................................................120
Trabajar con objetos y vistas de la instalaci√≥n.....................................................................121
Navegador de Internet para WinCC Runtime Unified ..........................................................121
Activar y comprobar licencias ASIA .....................................................................................122
L√©ame de WinCC Plant Intelligence Options .......................................................................124

3.9
3.9.1

Paneles de operador............................................................................................................127
Indicaciones acerca de paneles de operador ......................................................................127

3.10
3.10.1

Opciones ..............................................................................................................................132
Sm@rtServer .......................................................................................................................132

L√©ame
Manual de programaci√≥n y manejo, 11/2019

√çndice

3.10.2
3.10.3
3.10.4
3.10.5
3.10.6
3.10.7
4

5

6

Audit .....................................................................................................................................132
DataMonitor..........................................................................................................................132
WebNavigator ......................................................................................................................133
WebUX.................................................................................................................................134
Redundancia ........................................................................................................................135
SIMATIC Information Server ................................................................................................135

Safety .......................................................................................................................................................137
4.1

Informaci√≥n de seguridad.....................................................................................................137

4.2

Notes on use ........................................................................................................................138

4.3
4.3.1

Editing devices and networks...............................................................................................139
General notes on devices and networks ..............................................................................139

4.4
4.4.1

Programming PLC................................................................................................................140
General Notes on PLC Programming and on Acceptance...................................................140

L√©ame de SIMATIC Energy Suite ............................................................................................................143
5.1

Informaci√≥n de seguridad.....................................................................................................143

5.2

Protecci√≥n de datos .............................................................................................................144

5.3

Novedades de SIMATIC Energy Suite V16 .........................................................................145

5.4

Novedades de SIMATIC Energy Suite V15.1 ......................................................................147

5.5

Novedades de SIMATIC Energy Suite V14 SP1..................................................................148

5.6

Migraci√≥n de un proyecto de Energy Suite V14 SP1 ...........................................................150

5.7

Notas de uso ........................................................................................................................151

TIA Portal Version Control Interface.........................................................................................................155
6.1

Informaci√≥n de seguridad.....................................................................................................155

6.2

Indicaciones de uso .............................................................................................................156

√çndice alfab√©tico........................................................................................................................................157

L√©ame
Manual de programaci√≥n y manejo, 11/2019

5

√çndice

6

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Indicaciones acerca del TIA Portal
1.1

1

Indicaciones generales
Las indicaciones del archivo L√©ame prevalecen sobre lo indicado en otros documentos.
Lea detenidamente las presentes indicaciones, puesto que contienen informaci√≥n importante
acerca de la instalaci√≥n y el uso. Lea estas indicaciones antes de realizar la instalaci√≥n.

Informaci√≥n relacionada con el TIA Portal en el Online Support
Relaci√≥n de la informaci√≥n t√©cnica m√°s importante y soluciones para el TIA Portal en el
Siemens Industry Online Support.
Enlace de Internet: TIA Portal en Siemens Industry Online Support (https://
support.industry.siemens.com/cs/ww/es/view/65601780)
Toda la informaci√≥n relacionada con el servicio t√©cnico y soporte en el Siemens Industry Online
Support:
Enlace de Internet: Servicio t√©cnico y soporte en el Siemens Industry Online Support (https://
support.industry.siemens.com/cs/de/en/)
Aqu√≠ tambi√©n es posible inscribirse en el newsletter, que le mantiene siempre al d√≠a con
informaci√≥n actual sobre sus productos.

Recopilaci√≥n de datos de diagn√≥stico y comentario
Recopilamos y procesamos datos de uso y diagn√≥stico estad√≠sticos, como la frecuencia de uso
de editores o funciones de TIA Portal, para que TIA Portal siga siendo seguro y est√©
actualizado, detectar problemas, diagnosticarlos y solucionarlos, as√≠ como para mejorar el
producto.
Los datos de uso y diagn√≥stico se guardan primero localmente en el equipo de forma legible
y el usuario tiene la posibilidad de verlos. Ubicaci√≥n: "...\ProgramData\Siemens\Automation
\TelemetryConnector". Nota: el administrador de Windows puede hacer que la carpeta sea
visible.
En un segundo paso, los datos de uso y diagn√≥stico se transfieren a Siemens para los fines
citados anteriormente utilizando una v√≠a de comunicaci√≥n segura.

Iniciar el TIA Portal
Al iniciar el TIA Portal, Windows intenta actualizar la Certificate Revocation List (CRL) de
"windowsupdate.com".
Si no se dispone de acceso a Internet y hay varios servidores DNS, pueden darse rebases de
tiempo que retrasen el inicio del TIA Portal.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

7

Indicaciones acerca del TIA Portal
1.1 Indicaciones generales

Windows 7 / Windows Server 2008 R2: Validaci√≥n de certificado no v√°lida
Es posible que los certificados nuevos utilizados para la firma no se validen en los sistemas
operativos Windows 7 y Windows Server 2008 R2.
Si no tiene la posibilidad de actualizar online la memoria de certificados, es posible que se
indique que la firma de los archivos de producto no es v√°lida. En tal caso actualice en los
sistemas offline los certificados ra√≠z proporcionados por Microsoft. Siga las instrucciones que
encontrar√° en la FAQ 109748887 (https://support.industry.siemens.com/cs/ww/es/view/
109748887).

Visualizaci√≥n de fuentes asi√°ticas en el TIA Portal
En determinadas circunstancias, los textos del TIA Portal no se muestran correctamente
cuando se instala un TIA Portal chino en otro sistema operativo asi√°tico (p. ej., coreano). Para
visualizar correctamente los textos del TIA Portal, elija el ajuste "Ingl√©s" en la opci√≥n "Idioma
para programas no Unicode" del Panel de Control de Windows. Tenga en cuenta que este
ajuste puede provocar problemas de visualizaci√≥n en otros programas.

Instalaci√≥n de nuevas versiones .Net o Service Packs .Net
‚óè Cierre el TIA Portal antes de instalar una nueva versi√≥n .Net o un nuevo Service Pack .Net
en la programadora o el PC.
‚óè No abra el TIA Portal hasta no haber completado la instalaci√≥n de la nueva versi√≥n .Net o
del nuevo Service Pack de .Net.

Utilizar el TIA Portal
‚óè Si un proyecto de la lista de √∫ltimos proyectos utilizados se encuentra en una unidad de red
no conectada, pueden producirse retrasos al abrir el men√∫ "Proyecto".
‚óè Al insertar una CPU puede producirse un tiempo de espera prolongado si al mismo tiempo
est√° abierto el editor de textos del proyecto. El tiempo de espera ser√° especialmente largo
si se trata de la primera CPU de un proyecto reci√©n creado. Para garantizar un buen ritmo
de trabajo, cierre el editor de textos del proyecto antes de insertar una CPU.
‚óè En Windows 7 puede aparecer el mensaje "La aplicaci√≥n no responde" al ejecutarse
funciones que requieren cierto tiempo (p. ej. al cargar la CPU). En ese caso, espere a que
la funci√≥n finalice correctamente.
‚óè Si ha instalado un rat√≥n Microsoft con IntelliPoint, pueden solaparse los botones de la barra
de herramientas. En ese caso, desinstale el software IntelliPoint de Microsoft.
‚óè La activaci√≥n de la opci√≥n "Virtual Desktop" con tarjetas gr√°ficas NVIDIA puede causar
problemas. En tal caso, desactive el "nView virtual desktop manager" del driver gr√°fico de
la tarjeta NVIDIA.

8

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Indicaciones acerca del TIA Portal
1.1 Indicaciones generales

Trabajar con unidades de red sincronizadas autom√°ticamente
Un proyecto de TIA Portal se compone de varios archivos que se guardan conjuntamente en
un directorio. Si guarda un proyecto en una unidad de red o en un directorio de la nube (p. ej.
Dropbox, Syncplicity o GoogleDrive) que se sincronice autom√°ticamente, pueden perderse
datos si la sincronizaci√≥n se lleva a cabo solo en parte o de manera as√≠ncrona. Por ello no es
recomendable editar los proyectos del TIA Portal directamente en unidades de red
sincronizadas o en directorios de la nube. Cierre el proyecto del TIA Portal siempre antes de
la sincronizaci√≥n y aseg√∫rese, de que todos los directorios y archivos del directorio del
proyecto se sincronizan completa y conjuntamente. Dado el caso, desconecte la
sincronizaci√≥n autom√°tica mientras est√© trabajando con el TIA Portal. La sincronizaci√≥n debe
efectuarse de manera que los datos actuales (locales) del proyecto sustituyan los datos del
proyecto que se encuentran en la unidad de red o en el directorio de la nube.

Entrada de decimales
Con determinados ajustes del idioma en Windows puede ocurrir que no se reconozca la
entrada de valores con coma (la entrada de "1,23" produce un error). Utilice en su lugar la
notaci√≥n internacional ("1.23").

Abrir proyectos cuando faltan componentes de software
Si un proyecto no puede abrirse en TIA Portal porque faltan componentes de software, existe
la posibilidad de descargarlos e instalarlos como software de prueba desde Siemens Industry
Online Support. A continuaci√≥n se puede abrir el proyecto. Tenga en cuenta que el software de
prueba solo puede utilizarse por un tiempo determinado.
Siguiendo el enlace siguiente se abre la p√°gina de Siemens Industry Online Support, en la que
encontrar√° los diferentes productos de software como prueba: www.siemens.com/tia-portaltrial (www.siemens.com/tia-portal-trial)

L√©ame
Manual de programaci√≥n y manejo, 11/2019

9

Indicaciones acerca del TIA Portal
1.2 Indicaciones acerca de las librer√≠as

1.2

Indicaciones acerca de las librer√≠as

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Copiar elementos de librer√≠as
Si las plantillas maestras y los tipos tienen el mismo nombre, los objetos correspondientes del
proyecto se sobrescribir√°n al realizar la acci√≥n "Copiar". Tenga que en cuenta que esto sucede
sin que se realice ninguna pregunta de confirmaci√≥n. Lo mismo sucede cuando el nombre de
la plantilla maestra y el nombre del tipo son distintos pero dentro de la plantilla maestra hay un
objeto que tiene el mismo nombre que el tipo.

10

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Indicaciones acerca del TIA Portal
1.3 Indicaciones acerca de las Memory Cards

1.3

Indicaciones acerca de las Memory Cards

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

SIMATIC Memory Cards
Las SIMATIC Memory Cards han sido formateadas y preparadas por Siemens para ser
utilizadas en m√≥dulos S7-1200 y S7-1500. El formato no puede sobrescribirse, ya que de lo
contrario los m√≥dulos no aceptar√°n la tarjeta. Por ello no se permite el formateo con medios de
Windows.

Comportamiento en caso de petici√≥n de forzado abierta permanente
Tenga en cuenta que una petici√≥n de forzado permanente todav√≠a activa se mantiene incluso
tras cargar un proyecto nuevo en la SIMATIC Memory Card. Por ello es necesario borrar la
petici√≥n de forzado permanente antes de retirar una SIMATIC Memory Card de una CPU y de
grabar otro proyecto en la tarjeta desde el PC. Si se utiliza una SIMATIC Memory Card con un
contenido desconocido, es preciso formatear la SIMATIC Memory Card antes de volver a
cargarla.

Protecci√≥n de acceso para Memory Cards y lectores de tarjetas USB
Con la mejora de los mecanismos de seguridad en el acceso online y la ingenier√≠a de las CPU
S7-1500, el almacenamiento de datos se ha pasado a Memory Cards. Por ese motivo, al leer
datos de proyecto de Memory Cards a las que se accede a trav√©s de un lector de tarjeta USB
esta versi√≥n de STEP 7 no puede evaluar las contrase√±as del nivel de protecci√≥n configurado.
El comportamiento modificado afecta a las Memory Cards para CPU de las series
S7-1200/1500. Por ello hay que utilizar mecanismos de protecci√≥n f√≠sicos para proteger los
datos de proyecto cr√≠ticos guardados en Memory Cards de estos dispositivos.
Nota
Esta limitaci√≥n no est√° relacionada con el acceso online a dispositivos o con la protecci√≥n de
know how de bloques de programa.

Enchufar y desenchufar la Memory Card
Despu√©s de enchufar o desenchufar una Memory Card efect√∫e siempre un borrado total de la
CPU para pasarla a un estado operacional.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

11

Indicaciones acerca del TIA Portal
1.4 Indicaciones para el uso del TIA Portal en un entorno virtual (Private Cloud)

1.4

Indicaciones para el uso del TIA Portal en un entorno virtual (Private
Cloud)

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Instrucciones para el uso del TIA Portal en un entorno virtual (Private Cloud)
Encontrar√° instrucciones para el uso del TIA Portal en un entorno virtual (Private Cloud) en el
soporte de datos de instalaci√≥n, en el directorio "Documents\Readme\<directorio de idioma".
Abra aqu√≠ el documento PDF "TIAPortalCloudConnectorHowTo<Identificador de idioma>.pdf".
TIA Portal Cloud Connector puede utilizarse con los sistemas operativos Windows 7 (64 bits)
y Windows 10 (64 bits).

Variables de entorno "TiaUserSettingsPath" y "TiaDefaultProjectPath"
Las variables de entorno "TiaUserSettingsPath" y "TiaDefaultProjectPath" permiten cambiar la
ubicaci√≥n predeterminada de los ajustes de usuario y del proyecto. Esto sirve, por ejemplo,
para guardar de forma centralizada los ajustes de usuario y del proyecto.
Encontrar√° m√°s informaci√≥n sobre el uso de las variables de entorno en las instrucciones para
el uso del TIA Portal en un entorno virtual (Private Cloud).

Certificados autofirmados cuando se utiliza HTTPS como protocolo de comunicaci√≥n
Microsoft comprueba regularmente si los certificados que hay en la memoria de certificados de
Windows provienen de una fuente de confianza. Los certificados que provienen de fuentes no
fiables se borran. Por este motivo, aseg√∫rese de que sus certificados autofirmados est√°n
firmados con un certificado seguro.

12

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Indicaciones acerca del TIA Portal
1.5 Informaci√≥n sobre el uso de TIA Portal Teamcenter Gateway

1.5

Informaci√≥n sobre el uso de TIA Portal Teamcenter Gateway

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Instalaci√≥n de TIA Portal Teamcenter Gateway
Encontrar√° las instrucciones para la instalaci√≥n de TIA Portal Teamcenter Gateway en la
Ayuda en pantalla de TIA Portal Teamcenter Gateway, en "Instalaci√≥n y desinstalaci√≥n de TIA
Portal Teamcenter Gateway".

Uso de TIA Portal Teamcenter Gateway
La instalaci√≥n del TIA Portal Teamcenter Gateway permite utilizar la funci√≥n "TIA Portal
Teamcenter Gateway " disponible en el TIA Portal V14 y superior.

Instalaci√≥n del modelo de datos del TIA Portal Teamcenter Gateway
Encontrar√° la descripci√≥n de la instalaci√≥n del modelo de datos de TIA Portal Teamcenter
Gateway en el soporte de instalaci√≥n, en el directorio "\Support
\Teamcenter_11\ServerSetupDocument\" del DVD2 de STEP 7/WinCC. Abra el documento
PDF "Datamodel_Installation_enUS". Las instrucciones para la instalaci√≥n del TIA Portal
Teamcenter Gateway - Modelo de datos solo est√°n disponibles en ingl√©s.

Actualizaci√≥n del modelo de datos existente del TIA Portal Teamcenter Gateway
‚óè Reinicie TIA Portal despu√©s de actualizar el modelo de datos existente del TIA Portal
Teamcenter Gateway.
‚óè En TIA Portal Teamcenter Gateway V15 y V15.1 no se ha modificado el modelo de datos
existente de TIA Portal Teamcenter Gateway y tampoco se han realizado otras
modificaciones espec√≠ficas del Teamcenter.

Notas sobre Teamcenter
Para poder trabajar con TIA Portal Teamcenter Gateway es preciso tener instalado
Teamcenter Rich Application Client (RAC) o Teamcenter Client Communication System
(TCCS) versi√≥n 11.2 o superior en la programadora o el PC.

Nota sobre TCCS (Teamcenter Client Communication System)
Si ha llevado a cabo la instalaci√≥n de TCCS (Teamcenter Client Communication System) como
instalaci√≥n aut√≥noma (standalone), tambi√©n deber√° instalar "Microsoft Visual C++ 2013 ‚Äì
Redistributable".

L√©ame
Manual de programaci√≥n y manejo, 11/2019

13

Indicaciones acerca del TIA Portal
1.5 Informaci√≥n sobre el uso de TIA Portal Teamcenter Gateway

Nota sobre UTF-8
Tenga en cuenta que para poder visualizar datos del Teamcenter con juegos de caracteres "no
ingleses", p. ej. para idiomas asi√°ticos, en el TIA Portal, deber√° utilizar juegos de datos
Unicode en el Teamcenter Server.

Nota sobre Cloud Computing
Tenga en cuenta que si utiliza TIA Portal en una nube (p. ej. en una m√°quina virtual), este
sistema deber√° estar integrado en el entorno de Teamcenter. TIA Portal Teamcenter Gateway
no soporta una conexi√≥n directa a trav√©s de una conexi√≥n remota.

Principios b√°sicos para trabajar con TIA Portal Teamcenter Gateway
A partir de la versi√≥n V15 de TIA Portal Teamcenter Gateway est√° disponible la operaci√≥n de
Teamcenter "Teamcenter > Exportar..." para proyectos de TIA Portal y librer√≠as globales.
Con esta operaci√≥n se genera una copia del proyecto actual, que est√° libre de cualquier
informaci√≥n de Teamcenter. Si desea una separaci√≥n de Teamcenter, utilice esta operaci√≥n en
lugar de la operaci√≥n "Save as", ya que con "Save as" la informaci√≥n de Teamcenter
permanece en el proyecto.

Establecer conexi√≥n con Teamcenter
A partir de TIA Portal Teamcenter Gateway V15.1 Update 3 existe la posibilidad de establecer
una conexi√≥n entre TIA Portal y Teamcenter tanto a trav√©s de HTTP como de HTTPS.

Informaci√≥n de versi√≥n de Teamcenter
Para trabajar con la versi√≥n V15.1 de TIA Portal Teamcenter Gateway o la versi√≥n V16 de TIA
Portal Teamcenter Gateway y la versi√≥n V11.6 de Teamcenter es imprescindible que est√©
instalada la versi√≥n V11.6.0.5 o superior de Teamcenter. A partir de la versi√≥n V11.6.0.5 de
Teamcenter se han introducido mejoras que permiten trabajar √≥ptimamente con la
versi√≥n V11.6 de Teamcenter.
A partir de la versi√≥n V16 de TIA Portal Teamcenter Gateway se soporta el uso de la versi√≥n
de Teamcenter V12.2.0.0.0.

Definir la ruta del cach√© de TIA Portal Teamcenter Gateway
En el ajuste predeterminado se adopta como "ruta del cach√© del TIA Portal Teamcenter
Gateway" el valor registrado en "Opciones" > "Configuraci√≥n" > "General" > "Teamcenter
Gateway" > √°rea "Ruta del cach√© del TIA Portal Teamcenter Gateway".
Este valor hace referencia por defecto a la ruta del directorio del proyecto.

14

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Indicaciones acerca del TIA Portal
1.5 Informaci√≥n sobre el uso de TIA Portal Teamcenter Gateway
Si se modifica el valor de la "ruta del cach√© del TIA Portal Teamcenter Gateway", Teamcenter
Gateway comprueba la validez de los valores registrados por defecto y de los valores
modificados.
Nota
El valor indicado por defecto no puede estar vac√≠o.

Ejecuci√≥n de operaciones de TIA Portal Teamcenter Gateway durante una simulaci√≥n de WinCC
Professional ya iniciada
No ejecute operaciones de Teamcenter Gateway, como p. ej. "Check in" o "Deshacer check
out" durante una simulaci√≥n de WinCC Professional ya iniciada.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

15

Indicaciones acerca del TIA Portal
1.6 Indicaciones para el trabajo con Multiuser Engineering

1.6

Indicaciones para el trabajo con Multiuser Engineering

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas de producto de Multiuser Engineering y sobre el servidor de
proyectos.
La instalaci√≥n del servidor de proyectos le permite utilizar las funciones de "Multiuser
Engineering", "Multiuser Commissioning" y "Exclusive Engineering" que est√°n disponibles con
la versi√≥n correspondiente de TIA Portal.

Cambios de nombre
En la versi√≥n 16 de TIA Portal han cambiado algunas designaciones en el contexto de
Multiuser Engineering :
Antiguo nombre

Nuevo nombre a partir de TIA Portal V16

Servidor multiusuario

Servidor de proyectos TIA

Servidor multiusuario local

Servidor de proyectos local

Proyecto de servidor multiusuario

Proyecto de servidor

Perfiles de red multiusuario

Perfiles de red

El servidor de proyectos puede emplearse para Multiuser Engineering, Multiuser
Commissioning y Exclusive Engineering .
No hay restricciones en cuanto a la funcionalidad entre el servidor de proyectos V16 y el
servidor multiusuario V15.1.
La funcionalidad del servidor permanece inalterada en cada versi√≥n.
El servidor de proyectos V16 es compatible hacia abajo con el servidor multiusuario V14.

Cuenta de sistema Microsoft para el servidor de proyectos
Al instalar el servidor de proyectos se crea una cuenta de sistema de Microsoft para el servidor
de proyectos. Microsoft cambia la contrase√±a de esta cuenta c√≠clicamente.
Si la contrase√±a de esta cuenta ha expirado, es preciso renovar la contrase√±a y reiniciar el
servidor de proyectos a continuaci√≥n.

16

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Indicaciones acerca del TIA Portal
1.6 Indicaciones para el trabajo con Multiuser Engineering

Mensaje de error al iniciar el servidor de proyectos
Si se muestra un mensaje de error durante o tras la instalaci√≥n del servidor de proyectos
indicando que no es posible iniciar el servicio del servidor de proyectos, se recomienda el
siguiente procedimiento:
1. Abra el visor de eventos de Windows y compruebe si existe una entrada de error con el
n√∫mero de error "1069".
2. En caso afirmativo, encontrar√° indicaciones para el procedimiento a seguir a continuaci√≥n.
Enlace de Internet: TIA Portal en Siemens Industry Online Support (https://
support.industry.siemens.com/cs/ww/es/view/65601780)
3. Como alternativa tambi√©n puede ponerse en contacto directamente con el Customer
Support.
Enlace de Internet al Customer Support: FAQ con ID 109739926 (https://
support.industry.siemens.com/cs/ww/es/view/109739926)

Trabajar en la sesi√≥n local con peticiones de observaci√≥n y de forzado activas
Antes de realizar un check in o una actualizaci√≥n en la sesi√≥n local, deben finalizarse las
peticiones de observaci√≥n y de forzado activas. No es posible realizar un check in o una
actualizaci√≥n en la sesi√≥n local si hay peticiones de observaci√≥n o de forzado activas.

Trabajar en la sesi√≥n local con la opci√≥n "Mantener sesi√≥n local"
Si se selecciona la opci√≥n "Mantener sesi√≥n local" tras realizar un check in, todos los objetos
para los que se ha realizado un check in en la sesi√≥n local aparecer√°n como obsoletos, incluso
aunque sean id√©nticos en cuanto a contenido.

Trabajar con distintas versiones de TIA Portal
Las sesiones locales que se han creado con una versi√≥n <x.y> de TIA Portal, s√≥lo pueden
editarse con la misma versi√≥n de TIA Portal.
Ejemplo: Una sesi√≥n local creada con TIA Portal V16 para un proyecto V16 no puede editarse
con una versi√≥n anterior de TIA Portal.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

17

Indicaciones acerca del TIA Portal
1.6 Indicaciones para el trabajo con Multiuser Engineering

Trabajar con Multiuser Commissioning
‚óè Cuando se trabaja con Multiuser Commissioning, despu√©s de cada carga en la CPU se crea
una nueva revisi√≥n del proyecto de servidor. Sin embargo, no se crea una revisi√≥n nueva
si en la sesi√≥n local se editaron objetos que no son marcables. Los cambios en objetos no
marcables se pierden al hacer el check in y no se cargan en la CPU.
‚óè Si en el modo de puesta en marcha se inicia la carga en dispositivo desde el √°rbol del
proyecto con el comando de men√∫ "Cargar en dispositivo > Configuraci√≥n hardware‚Äú,
siempre se mostrar√° un cuadro de di√°logo indicando que hay datos diferentes en la CPU y
en el proyecto de servidor.
‚óè Al trabajar en modo de puesta en marcha solo se soportan completamente CPU S7-1500.
Si se utiliza una CPU S7300/400, al cargar en la CPU en el modo de puesta en marcha
siempre se mostrar√° un cuadro de di√°logo indicando que hay datos diferentes en la CPU y
en el proyecto de servidor. La raz√≥n es que las CPU S7-300/400 no soportan la
sincronizaci√≥n. Para evitar que se muestre este error, desactive la opci√≥n "Antes de cargar,
comprobar si hay datos que no coinciden¬∑(recomendado)" en la Administration Tool.

Consulte tambi√©n
TIA Portal en Siemens Industry Online Support (https://
support.industry.siemens.com/cs/ww/es/view/65601780)
FAQ con ID 109739926 (https://support.industry.siemens.com/cs/ww/es/view/109739926)

18

L√©ame
Manual de programaci√≥n y manejo, 11/2019

2

STEP 7
2.1

Informaci√≥n de seguridad

Informaci√≥n de seguridad
Siemens ofrece productos y soluciones con funciones de seguridad industrial con el objetivo
de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral que sea conforme a la tecnolog√≠a m√°s avanzada. Los productos y las
soluciones de Siemens constituyen √∫nicamente una parte de este concepto.
El cliente es responsable de impedir el acceso no autorizado a sus instalaciones, sistemas,
m√°quinas y redes. Los sistemas, las m√°quinas y los componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej. uso de cortafuegos
y segmentaci√≥n de la red).
Adicionalmente, deber√°n observarse las recomendaciones de Siemens en cuanto a las
medidas de protecci√≥n correspondientes. Encontrar√° m√°s informaci√≥n sobre seguridad
industrial en
https://www.siemens.com/industrialsecurity (https://www.siemens.com/global/en/home/
company/topic-areas/future-of-manufacturing/industrial-security.html)
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de mejorar todav√≠a m√°s su seguridad. Siemens recomienda expresamente realizar
actualizaciones en cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los
productos. El uso de versiones anteriores o que ya no se soportan puede aumentar el riesgo
de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en
https://www.siemens.com/industrialsecurity (https://www.siemens.com/global/en/home/
company/topic-areas/future-of-manufacturing/industrial-security.html)

L√©ame
Manual de programaci√≥n y manejo, 11/2019

19

STEP 7
2.1 Informaci√≥n de seguridad

Ajustes de red
Las tablas siguientes muestran los ajustes de red de cada producto, necesarios para analizar
la seguridad de red y la configuraci√≥n de cortafuegos externos:
STEP 7 Professional
Nombre

N√∫mero de
puerto

Protocolo de
transporte

Sentido

Funci√≥n

Descripci√≥n

ALM

4410*

TCP

In-/Outbound

Servicio de li‚Äê
cencias

Este servicio pone a disposici√≥n todas las
funciones para licencias de software, y se
utiliza tanto en el Automation License Ma‚Äê
nager como en todos los productos de soft‚Äê
ware sujetos a licencias.

RFC 1006 102

TCP

Outbound

Comunicaci√≥n
S7

Comunicaci√≥n con el controlador S7 a tra‚Äê
v√©s de Ethernet / PROFINET con fines de
programaci√≥n y diagn√≥stico.

DCP

---

Ethernet

Outbound

PROFINET

El protocolo DCP (Discovery and basic Con‚Äê
figuration Protocol) se utiliza en PROFINET
y es la funci√≥n b√°sica para la localizaci√≥n y
configuraci√≥n de dispositivos PROFINET.

SNMP

161

UDP

Outbound

PROFINET

La funci√≥n de cliente SNMP se utiliza en
STEP 7 para leer informaci√≥n de estado de
dispositivos PROFINET.

* Puerto est√°ndar, que el usuario puede cambiar mediante configuraci√≥n

WinCC ES Basic (sin simulaci√≥n)
Nombre

N√∫mero de
puerto

Protocolo de
transporte

Sentido

Funci√≥n

Descripci√≥n

ALM

4410*

TCP

In-/Outbound

Servicio de li‚Äê
cencias

Este servicio pone a disposici√≥n todas las
funciones para licencias de software, y se
utiliza tanto en el Automation License Ma‚Äê
nager como en todos los productos de soft‚Äê
ware sujetos a licencias.

HMI Load

1033

TCP

Outbound

HMI Load (RT
Basic)

Este servicio se utiliza para transferir im√°‚Äê
genes y datos de configuraci√≥n a Basic Pa‚Äê
nels.

* Puerto est√°ndar, que el usuario puede cambiar mediante configuraci√≥n

Simulation RT Basic
Nombre

N√∫mero de
puerto

Protocolo de
transporte

Sentido

Funci√≥n

Descripci√≥n

HMI Load

1033

TCP

Inbound

HMI Load (RT
Basic)

Este servicio se utiliza para transferir im√°‚Äê
genes y datos de configuraci√≥n a Basic Pa‚Äê
nels.

EtherNet/I
P

44818

TCP

Outbound

Ethernet/
canal IP

El protocolo Ethernet/IP se utiliza para co‚Äê
nexiones con todos los PLC Allen Bradley.

2222

UDP

Inbound

Ethernet/
canal IP

El protocolo Ethernet/IP se utiliza para co‚Äê
nexiones con todos los PLC Allen Bradley.

20

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.1 Informaci√≥n de seguridad
Simulation RT Basic
Modbus
TCP

502

TCP

Outbound

Canal Modbus
TCP

El protocolo Modbus TCP se utiliza para co‚Äê
nexiones con PLC Schneider.

RFC 1006

102

TCP

Outbound

Canal S7

Comunicaci√≥n con el controlador S7 v√≠a Et‚Äê
hernet/PROFINET

Mitsubishi
MC

5002

TCP

Outbound

Canal Mitsu‚Äê
bishi MC

El protocolo Mitsubishi se utiliza para cone‚Äê
xiones con PLC Mitsubishi.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

21

STEP 7
2.2 Indicaciones de manejo

2.2

Indicaciones de manejo

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compatibilidad tras actualizar un proyecto a la versi√≥n V16
Despu√©s de actualizar un proyecto a la versi√≥n V16 es posible que se indiquen diferencias
entre los programas online y offline aunque estos sean id√©nticos. Estas diferencias se deben
a que en la versi√≥n V16 se ha optimizado el c√°lculo de las sumas de verificaci√≥n. Sin embargo,
en la mayor√≠a de los casos los bloques son compatibles.
No obstante, en raras ocasiones el c√°lculo modificado de la suma de verificaci√≥n hace
necesario compilar y cargar el proyecto nuevamente antes de poderlo observar y probar.
Encontrar√° m√°s informaci√≥n en las propiedades del proyecto, en el informe de actualizaci√≥n.
Si en el informe se notifica una incoherencia de las sumas de verificaci√≥n, las diferencias entre
online y offline se deben al c√°lculo modificado de las sumas de verificaci√≥n.
Encontrar√° m√°s informaci√≥n en el cap√≠tulo "Conexi√≥n online despu√©s de actualizar un
proyecto".

Uso paralelo
Si despu√©s de la instalaci√≥n, el nombre o la clave de licencia del software llevase el indicativo
"Combo", estar√° autorizado para utilizar los siguientes productos y versiones seg√∫n el
apartado 1.6 de las Condiciones generales (v√©ase tambi√©n el texto de la instalaci√≥n):
‚óè STEP 7 Professional 2017
‚óè STEP 7 Professional 2010
‚óè STEP 7 Professional 2006

Enchufar y desenchufar tarjetas o m√≥dulos Ethernet
En caso de desenchufar y volver a enchufar tarjetas o m√≥dulos Ethernet durante el
funcionamiento, es necesario reiniciar el PC; de lo contrario la funcionalidad "Dispositivos
accesibles" en STEP 7 o NCM PC no mostrar√° todos los dispositivos (estaciones). Mientras
arranca el PC deben estar activadas las tarjetas o m√≥dulos Ethernet.

Compatibilidad (S7-1200)
La configuraci√≥n de dispositivos y el programa de una CPU S7-1200 deben estar configurados
por norma con la misma versi√≥n de STEP 7. Normalmente, el TIA Portal impide que surjan
conflictos entre versiones mediante las indicaciones oportunas durante la carga en el
dispositivo.
Sin embargo, en el caso de las CPUs S7-1200 con versi√≥n de firmware V1.x no es posible
realizar esta comprobaci√≥n autom√°tica, por lo que dicha responsabilidad recae en el usuario.

22

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.3 Funcionamiento online paralelo

2.3

Funcionamiento online paralelo

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Funcionamiento online paralelo
El funcionamiento paralelo en modo online de STEP 7 V5.6 o anterior y STEP 7 V16 (TIA
Portal) no est√° autorizado.

Conexiones online simult√°neas con una CPU S7-1200 (S7-1200)
No es posible establecer una conexi√≥n online con la misma CPU S7-1200 desde varias
instancias del TIA Portal.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

23

STEP 7
2.4 Editar dispositivos y redes

2.4

Editar dispositivos y redes

2.4.1

Indicaciones generales relativas a dispositivos y redes

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

S7-PCT IO-Link (S7-1200)
La S7-Port Configuration Tool puede descargarse gratuitamente desde el siguiente enlace.
http://support.automation.siemens.com/WW/view/37936752 (https://
support.industry.siemens.com/cs/ww/es/view/32469496)

Port Configuration Tool PCT
Si utiliza la herramienta PCT, debe asegurarse de que utiliza siempre la versi√≥n actual
disponible de manera gratuita en el siguiente enlace:
http://support.automation.siemens.com/WW/view/32469496 (http://
support.automation.siemens.com/WW/view/es/32469496)

2.4.2

Indicaciones acerca de la configuraci√≥n hardware

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Edici√≥n de la direcci√≥n IP de un dispositivo
A la hora de editar la direcci√≥n IP de un dispositivo no debe utilizarse el rango de direcciones
de 192.168.x.241 a 192.168.x.250. En caso necesario, el sistema asigna este rango de
direccione autom√°ticamente a una programadora. Esto se aplica an√°logamente a todas las
clases de redes en funci√≥n de la m√°scara de subred.

24

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes

2.4.3

Indicaciones sobre las funciones OPC UA

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Archivos de esquema utilizados para funciones OPC UA
OPC Foundation proporciona a sus usuarios esquemas que los fabricantes pueden utilizar
para sus correspondientes implementaciones de servidor/cliente. Dichos archivos se utilizan
p. ej. para validar modelos de informaci√≥n o nodesets importados.
Para la versi√≥n V16 de TIA Portal o la CPU S7-1500 con versi√≥n de firmware V2.8 se utilizan
los siguientes archivos de esquema y NodeSet:
Esquema/NodeSet

Explicaci√≥n

https://opcfoundation.org/UA/schemas/1.04/UANodeSet.xsd

Esquema XML para archivos NodeSet
(2018-12-04)

https://opcfoundation.org/UA/schemas/1.04/Opc.Ua.NodeSet2.xml

OPC UA ("CORE"), versi√≥n de modelo
1.04 (2018-06-04)

https://opcfoundation.org/UA/schemas/DI/1.1/Opc.Ua.Di.NodeSet2.xml

OPC UA para dispositivos ("DI"), ver‚Äê
si√≥n de modelo 1.01 (2018-06-06)

Objeto de PLC no visible en el espacio de direcciones del servidor
En proyectos muy grandes, es posible que en casos excepcionales no se vea el nodo de la
CPU o el objeto de PLC en el espacio de direcciones del servidor OPC UA a pesar de haber
compilado y cargado correctamente el proyecto en la CPU. Cuando esto sucede, significa que
la memoria reservada para OPC UA en la CPU no es suficiente.
El diagn√≥stico, p. ej. mediante UaExpert, devuelve el estado de servidor "Failed".
Soluci√≥n
En las propiedades de la CPU desactive la interfaz de servidor SIMATIC predeterminada en
caso de que no se necesite.
Reduzca el n√∫mero o tama√±o de los elementos que consumen recursos OPC UA. Reduzca,
por ejemplo, el n√∫mero de nodos para interfaces de servidor a menos de 30 000.
Otras medidas:
‚óè Reduzca el n√∫mero de variables en el espacio de direcciones del servidor OPC UA,
especialmente de variables con el tipo de datos Estructura.
Para extraer variables del espacio de direcciones, desactive la opci√≥n "Accesible desde
HMI/OPC UA" en la tabla de variables PLC o en los bloques de datos.
Para bloques de datos tambi√©n existe la posibilidad de extraer el DB por completo del
espacio de direcciones, con todas las variables. Desactive para ello la opci√≥n "DB accesible
desde OPC UA" en las propiedades del DB.
‚óè Reduzca la longitud de los nombres de elementos en estructuras de datos de gran tama√±o.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

25

STEP 7
2.4 Editar dispositivos y redes
‚óè Acorte las descripciones de los nodos.
‚óè Reduzca el n√∫mero de m√©todos implementados.

Conexi√≥n cliente-servidor OPC UA a trav√©s de router NAT
Si el cliente y el servidor est√°n conectados a trav√©s de un router NAT, este intento de conexi√≥n
fallar√° en ese caso con los mensajes de error "BadCommunicationError" o
"BadNotConnected".
Explicaci√≥n: En sistemas NAT, el router manipula los paquetes IPv4. A consecuencia de ello,
la IP de origen ("Source NAT") o la IP de destino ("Destination NAT") de un paquete se
sustituye por una direcci√≥n IP (dependiendo del puerto de destino) configurada en el router.
Este proceso es transparente para cliente y servidor, es decir, estos dispositivos no saben
nada de este proceso.
Problema: El router NAT no puede sustituir tambi√©n la descripci√≥n de Endpoint (la EndpointUrl)
que devuelve el servidor, ya que esta informaci√≥n de direcci√≥n se encuentra en los datos de
usuario de "GetEndpointsResponse".
Encontrar√° una descripci√≥n detallada del proceso en la siguiente FAQ (https://
support.industry.siemens.com/cs/ww/es/view/109766709).
Versi√≥n V2.6 del firmware de la CPU
La conexi√≥n cliente-servidor OPC UA a trav√©s del router NAT no es posible.
Soluci√≥n a partir de la versi√≥n V2.8 del firmware de la CPU
Utilice el atributo "ServerUri" de la informaci√≥n de la conexi√≥n (par√°metro
"SessionConnectInfo" de la instrucci√≥n "OPC_UA_Connect").
Como "ServerUri", introduzca la ServerEndpointUrl completa con la direcci√≥n IP del router
NAT. Esta ServerEndpointUrl se utilizar√° entonces en lugar de la EndpointUrl devuelta en la
GetEndpointsResponse para establecer la conexi√≥n.
Si deja vac√≠o el atributo, el comportamiento ser√° el mismo que con la versi√≥n V2.6 del firmware
de la CPU.
Si utiliza la parametrizaci√≥n de conexi√≥n para establecer la conexi√≥n OPC UA (crear la interfaz
de cliente), deber√° abrir el DB de interfaces de cliente (*_Configuration[DBx]) despu√©s de la
parametrizaci√≥n y modificar el string en el par√°metro "ServerUri". La entrada se conservar√°
despu√©s de compilar la configuraci√≥n OPC UA.
Ejemplo de establecimiento de la conexi√≥n (la direcci√≥n de ServerUri sustituye a la direcci√≥n
de GetEndpointsResponse)
Procedimiento: en el par√°metro "ServerUri" se escribe la direcci√≥n completa del servidor
(ServerEndpointUrl), que consiste en la direcci√≥n IP, el puerto y la ruta opcional; la direcci√≥n
IP es la direcci√≥n IP del lado del cliente del router NAT:
1) Abrir DB de configuraci√≥n

2) Modificar par√°metro "ServerUri"

26

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes

La conexi√≥n se establece en los siguientes pasos:
‚óè GetEndpointsRequest: el cliente S7-1500 OPC UA direcciona el servidor por medio de la
direcci√≥n de destino del router NAT en la subred del cliente (10.10.0.1).
El router NAT convierte la direcci√≥n de destino en la direcci√≥n IP del servidor (192.168.0.1)
en la subred del servidor.
‚óè GetEndpointsResponse: en la "GetEndpointsResponse", el servidor devuelve su
EndpointUrl:
"opc.tcp://192.168.0.1:4840/UA/DemoServer".
El cliente no puede llegar a esa direcci√≥n directamente, ya que esta se encuentra detr√°s de
un router NAT.
‚óè OpenSecureChannel:
Para abrir el canal seguro, el cliente no toma la EndpointUrl de la GetEndpointsResponse,
sino la EndpointUrl del par√°metro "ServerUri":
"opc.tcp://10.10.0.1:4840/UA/DemoServer".
El cliente puede acceder a esta direcci√≥n IP; los datos se encaminan del router NAT a la
direcci√≥n IP del servidor.

Reinicio del servidor OPC UA
A partir de la versi√≥n V2.8 del firmware, el servidor OPC UA de una CPU S7-1500 ya solo se
detiene al cargar datos relevantes de OPC UA en la CPU (por ejemplo, al sobrescribir un
bloque de datos). El servidor se reinicia a continuaci√≥n si el usuario ha permitido este proceso
de carga.
Tenga en cuenta que, en este caso, los clientes OPC no pueden seguir utilizando los servicios
activos para este servidor y que, por tanto, es preciso volver a liberar los recursos necesarios.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

27

STEP 7
2.4 Editar dispositivos y redes
A continuaci√≥n deben solicitarse nuevamente los siguientes recursos:
‚óè Iniciar nuevamente el establecimiento de la conexi√≥n
‚óè Generar nuevamente las subscriptions
‚óè Crear nuevamente las √≥rdenes de lectura y escritura
En muchos casos, por ejemplo, despu√©s de agregar bloques l√≥gicos nuevos o bloques de
datos nuevos que no son relevantes para OPC UA, el servidor ya no se detiene.

Mapeado de tipos de datos de CPU en tipos de datos OPC UA en CPU S7-1200
Las CPU S7-1200 tienen un servidor OPC UA a partir de la versi√≥n V4.4 de firmware. Para este
servidor se pueden configurar interfaces de servidor OPC UA.
En los tipos de datos OPC UA se aplica el siguiente mapeado de los tipos de datos S7-1200:
Tipo de datos SIMATIC

Tipo de datos OPC UA

BOOL

Boolean

SINT

SByte

USINT

Byte

INT

Int16

UINT

UInt16

DINT

Int32

UDINT

UInt32

REAL

Float

LREAL

Double

WSTRING

String

(UCS-2; Universal Coded Character Set)
DWORD

StatusCode

El servidor OPC UA del S7-1200 admite la lectura y escritura de los tipos de datos simples
representados.
No se admiten los siguientes tipos de datos:
‚óè Estructuras
‚óè Arrays
‚óè Unions
Si bien es posible cargar variables con estos tipos de datos (ning√∫n aviso de la prueba de
coherencia), un acceso del cliente a estas variables en tiempo de ejecuci√≥n se rechaza con un
mensaje de error.
Los m√©todos tampoco pueden programarse.

Otros c√≥digos de estado para instrucciones del cliente OPC UA
Debido al cambio en el comportamiento para habilitar controladores de la conexi√≥n en CPU
S7-1500 con una versi√≥n de firmware V2.8 o superior, existen otros c√≥digos de error que no
est√°n documentados para cada una de estas instrucciones.

28

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes
La tabla siguiente contiene estos c√≥digos de error con explicaciones.
C√≥digo de error

Nombre del error

Explicaci√≥n

BadConnectionClosed

La conexi√≥n con el Connec‚Äê
tionHdl correspondiente est√°
en el estado "ShutDown" (des‚Äê
conectada). La conexi√≥n/
sesi√≥n no se ha podido "reacti‚Äê
var" autom√°ticamente. Causa
posible: Sesi√≥n borrada en el
servidor, p. ej., por reinicio o ti‚Äê
meout.

(valores hexadecima‚Äê
les)
80AE_0000

En este caso, la conexi√≥n se
debe cerrar expl√≠citamente con
la instrucci√≥n "OPC_UA_Dis‚Äê
connect" para volver a liberar
los recursos de conexi√≥n. El
ConnectionHdl para esta cone‚Äê
xi√≥n que ha dejado de ser v√°li‚Äê
da debe restablecerse en el
programa de usuario.
A continuaci√≥n, debe estable‚Äê
cerse una nueva conexi√≥n con
el servidor (ver instrucci√≥n
"OPC_UA_Connect").
El c√≥digo de error puede apa‚Äê
recer en todas las instrucciones
de cliente a excepci√≥n de las
instrucciones OPC_UA_Con‚Äê
nect, OPC_UA_Disconnect y
OPC_UA_ConnectionGetSta‚Äê
tus.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

29

STEP 7
2.4 Editar dispositivos y redes
C√≥digo de error

Nombre del error

Explicaci√≥n

BadInvalidState

La conexi√≥n con el Connec‚Äê
tionHdl correspondiente est√°
en el estado "ConnectionError"
(error temporal de conexi√≥n, co‚Äê
nexi√≥n interrumpida). La CPU
intenta "reactivar" la conexi√≥n.
Si esto no se logra durante el
intervalo de timeout ajustado
(OPC UA Session Timeout), la
conexi√≥n pasa al estado "Shut‚Äê
down". Requisitos para el cam‚Äê
bio de estado: La CPU ha podi‚Äê
do acceder al servidor OPC UA
para comprobar si la sesi√≥n to‚Äê
dav√≠a est√° presente o no.

(valores hexadecima‚Äê
les)
80AF_0000

El c√≥digo de error puede apa‚Äê
recer en todas las instrucciones
de cliente a excepci√≥n de las
instrucciones OPC_UA_Con‚Äê
nect, OPC_UA_Disconnect y
OPC_UA_ConnectionGetSta‚Äê
tus.
A000_0105

PLCopenUA_Bad_ConnectionInvalidHdl

Controlador (handle) de la co‚Äê
nexi√≥n (ConnectionHdl) no v√°li‚Äê
do/desconocido.
El c√≥digo de error puede apa‚Äê
recer en todas las instrucciones
de cliente a excepci√≥n de la ins‚Äê
trucci√≥n OPC_UA_Connect.

Copia de ejemplos de programa SCL del sistema de informaci√≥n
El c√≥digo de programa SCL de los ejemplos de programaci√≥n OPC UA que se ha copiado en
el sistema de informaci√≥n con el icono "Copiar" y que se ha pegado en el editor de programas
no puede compilarse.
Para copiar el c√≥digo de programa sin errores, marque el c√≥digo en el sistema de informaci√≥n
y seleccione el comando "Copiar" del men√∫ contextual o la combinaci√≥n de teclas "Ctrl+C".
Pegue el c√≥digo del programa en el editor de programas utilizando el comando "Pegar" del
men√∫ contextual o la combinaci√≥n de teclas "Ctrl+V".

2.4.4

Detecci√≥n de hardware de dispositivos IO

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

30

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes

Detecci√≥n de hardware incompleta en estaciones ET 200SP
La funci√≥n online "Detecci√≥n de hardware" de STEP 7 V15 permite determinar la configuraci√≥n
de la estaci√≥n de dispositivos IO y aplicarla al proyecto del usuario, incluidos todos los m√≥dulos
enchufados.
Si se incorpora un ET 200SP al proyecto mediante la detecci√≥n de hardware, hay que
completar manualmente la configuraci√≥n de estaci√≥n detectada: En el m√≥dulo de interfaz,
compruebe si se ha detectado el adaptador de bus adecuado en la configuraci√≥n hardware (p.
ej. BA 2xRJ45 en lugar del BA 2xFC realmente enchufado).

2.4.5

ID de hardware del tipo "Hw_SubModule" para un dispositivo IO HMI Panel

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Determinaci√≥n de la ID de hardware con el tipo "Hw_SubModule" para un dispositivo IO HMI Panel
El par√°metro "ID" del bloque de programa PROFIenergy "PE_START_END" debe tener la
identificaci√≥n de hardware (ID de hardware) con el tipo "Hw_SubModule" del dispositivo IO. En
una CPU S7-1500/S7-1200/ET200SP, la ID de hardware con el tipo "Hw_SubModule" del
dispositivo IO HMI Panel no se muestra en las constantes del sistema, pero puede
determinarse. Para ello, en la lista de las variables PLC de la ficha "Constantes del sistema" se
determina el s√≠mbolo para el dispositivo IO en el HMI Panel con el tipo "Hw_Device" y se reduce
en uno, p. ej. "HMI_1_IE_CP_1~PROFINET_Interface_1~IODevice -1".

2.4.6

Uso de m√≥dulos en el S7-1200

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

31

STEP 7
2.4 Editar dispositivos y redes

Uso de m√≥dulos en el S7-1200
Los m√≥dulos indicados a continuaci√≥n no son compatibles con el S7-1200:
Familia
FM S7-300

M√≥dulo

Referencia

SM 338

6ES7 338-4BC01-0AB0

FM 350-1

6ES7 350-1AH03-0AE0

FM 350-2

6ES7 350-2AH00-0AE0, 6ES7 350-2AH01-0AE0

FM 351

6ES7 351-1AH01-0AE0, 6ES7 351-1AH02-0AE0

FM 352

6ES7 352-1AH02-0AE0

FM 355 S

6ES7 355-1VH10-0AE0

FM 355 C

6ES7 355-0VH10-0AE0

FM 355-2 C

6ES7 355-2CH00-0AE0

FM 355-2 S

6ES7 355-2SH00-0AE0

CP 340

6ES7 340-1AH02-0AE0, 6ES7 340-1BH02-0AE0, 6ES7
340-1CH02-0AE0

CP 341

6ES7 341-1AH01-0AE0, 6ES7 341-1AH02-0AE0, 6ES7
341-1BH01-0AE0, 6ES7 341-1BH02-0AE0, 6ES7
341-1CH01-0AE0, 6ES7 341-1CH02-0AE0

Componente de red

Repetidor de diag‚Äê
n√≥stico

6ES7 972-0AB01-0XA0

ET 200M

SIWAREX

7MH4900-2AA01, 7MH4900-3AA01, 7MH4950-1AA01,
7MH4950-2AA01

CP PtP S7-300

Cargar en la PG/el PC los comentarios de m√≥dulo del S7-1200
En las configuraciones centralizadas con S7-1200 no se cargan los comentarios de los
m√≥dulos, subm√≥dulos y signalboards. En el cado de CP/CM solo se cargan los comentarios de
la interfaz IE o DP, respectivamente. En las configuraciones descentralizadas con ET 200SP
o ET 200MP, de los comentarios de los m√≥dulos de E/S solo se cargan los comentarios de los
canales.

2.4.7

CP 343-2 en SIMATIC S7 Embedded Controller EC31-RTX

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

CP 343-2 en SIMATIC S7 Embedded Controller EC31-RTX
Si bien el m√≥dulo AS-Interface CP 343-2 (referencia: 6GK7 343-2AH01) puede insertarse en
un rack de ampliaci√≥n del SIMATIC S7 Embedded Controller EC31-RTX (referencia: 6ES7
677-1DDxx-0BB0), el CP 343-2 no puede utilizarse con el EC31-RTX.

32

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes

2.4.8

Carga de CPU S7-1500 (SIPLUS)

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Comportamiento de una CPU S7-1500 SIPLUS (6AG1...) FW <V2.5 con Memory Card formateada
Componentes implicados:
‚óè CPU 151x SIPLUS (6AG1...) con versi√≥n de firmware anterior a V2.5
‚óè SIMATIC Memory Card
Cuando se carga una CPU SIPLUS en una SIMATIC Memory Card formateada y se conmuta
la CPU al estado operativo RUN, la CPU funciona sin errores. En cambio, tras desconectar y
volver a conectar la tensi√≥n o tras realizar un borrado total de la memoria (MRES), la CPU
SIPLUS pasa al estado STOP, y se emite un mensaje de error. En dicho mensaje se indica que
la Memory Card no se detecta porque falta, es de tipo incorrecto, contiene datos err√≥neos o
est√° protegida.
Este comportamiento no se produce con una CPU 151x SIPLUS (6AG1...) con versi√≥n de
firmware V2.5 o posterior, o si en la Memory Card ya existe una configuraci√≥n con una CPU
SIMATIC S7-1500 (6ES7...) y se sobrescribe con una configuraci√≥n del mismo tipo de CPU
SIPLUS (6AG1...).
Soluci√≥n:
1. En la SIMATIC Memory Card debe estar cargada una configuraci√≥n con CPU SIMATIC. Es
suficiente que haya una CPU del tipo correspondiente; no es necesaria la presencia de la
periferia.
2. La CPU SIPLUS se carga en la tarjeta. La configuraci√≥n SIMATIC existente en la Memory
Card se sobrescribe con la configuraci√≥n SIPLUS.
Con este procedimiento se evita un mensaje de error del TIA Portal.
Nota
Este procedimiento SOLO funciona cuando se carga online en la CPU. Si la tarjeta se
programa mediante un lector de tarjetas externo, el error persistir√°.
Si, por ejemplo, desea cargar una CPU 1511-1 PN SIPLUS (6AG1 511-1AK00...), proceda del
siguiente modo.
1. Introduzca una Memory Card vac√≠a de suficiente tama√±o en la CPU SIPLUS.
2. Configure una CPU SIMATIC del mismo tipo; en este caso, una S7-1511-1 PN (6ES7
511-1AK00...). Para la primera carga, no se necesitan m√≥dulos de periferia.
3. Cargue la configuraci√≥n en la CPU SIPLUS.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

33

STEP 7
2.4 Editar dispositivos y redes
4. Sustituya la CPU SIMATIC en STEP 7 por la CPU SIPLUS (6AG1 511-1AK00...) y complete
la configuraci√≥n con los m√≥dulos de periferia y los dispositivos de periferia descentralizada
previstos.
5. Cargue la configuraci√≥n modificada en la CPU SIPLUS.

2.4.9

ET 200MP (IM 155-5 DP ST) en un WinLC RTX

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

ET 200MP (IM 155-5 DP ST) no utilizable actualmente en un WinLC RTX a trav√©s de PROFIBUS
Componentes implicados:
‚óè Sistemas PC con funcionalidad de Logic Controller WinLC RTX como maestro DP (todas
las variantes: EC31-RTX (F), WinAC RTX (F) Software PLC); en adelante, abreviado a
"WinLC RTX"
‚óè ET 200MP (IM 155-5 DP ST) como esclavo DP
Si se configuran m√≥dulos est√°ndar o de seguridad en un ET 200MP y como maestro DP se
utiliza un WinLC RTX, el maestro DP no parametrizar√° dichos m√≥dulos en el ET 200MP.
Despu√©s de cargar la configuraci√≥n y tras arrancar los componentes afectados, los m√≥dulos
se√±alizan la falta de parametrizaci√≥n en el ET 200MP con LED verdes intermitentes.
STEP 7 no indica la no disponibilidad de los m√≥dulos online (estado "OK").
Soluci√≥n:
‚óè Recomendaci√≥n: utilice un m√≥dulo de interfaz IM 155-5 PN para conectar el ET 200MP a
un WinLC RTX a trav√©s de PROFINET IO.
o
‚óè Si no enchufa ning√∫n m√≥dulo de seguridad en el ET 200MP: para configurar los m√≥dulos
est√°ndar, utilice la variante GSD del ET 200MP en un WinLC RTX

2.4.10

Indicaciones relativas a Online y diagn√≥stico

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

34

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes

Detecci√≥n de hardware y posterior conexi√≥n online
Si se ejecuta el comando "Online > Detecci√≥n de hardware" para una CPU sin especificar, no
se carga la configuraci√≥n online de la CPU. Si no se carga en la CPU la configuraci√≥n obtenida
mediante la detecci√≥n de hardware, siempre habr√° diferencia entre las configuraciones offline
y online en la vista de dispositivos y redes. En la vista Online y diagn√≥stico puede verse que
hay configuraciones diferentes, aunque sean id√©nticas las referencias de la CPU realmente
existente y de la CPU offline.

Borrado de mediciones del dispositivo (tarjeta de memoria) (S7-1200)
No borre ninguna medici√≥n del dispositivo mientras un Trace en el dispositivo genere nuevas
mediciones en la tarjeta de memoria.

Trace del proyecto para controlador por software y Open Controller
Con TIA Portal V16, el trace del proyecto no admite el controlador por software ni Open
Controller.

2.4.11

Componentes de red

2.4.11.1

M√≥dulos de red y de comunicaci√≥n

Conexiones online para diagn√≥stico especial y cargador de firmware
Diagn√≥stico especial: establecer conexi√≥n online
Algunos componentes de red (CP S7-300/400, CP PC y transiciones de red) proporcionan
datos de diagn√≥stico avanzados en el diagn√≥stico especial.
Requisitos:
Una interfaz PG/PC est√° conectada f√≠sicamente al dispositivo de destino, p. ej. mediante un
cable Ethernet.
Procedimiento:
Para iniciar el diagn√≥stico especial proceda del siguiente modo:
1. Abra la vista online y de diagn√≥stico del m√≥dulo.
2. Seleccione el grupo "Diagn√≥stico especial" de la carpeta "Funciones".
3. Haga clic en el bot√≥n "Iniciar diagn√≥stico especial" del √°rea "Diagn√≥stico especial".
Con STEP 7 Professional V14 o superior y para algunos CP, desde la estaci√≥n de ingenier√≠a
solo es posible establecer una √∫nica conexi√≥n online a trav√©s del CP. Dicha conexi√≥n puede
establecerse con STEP 7 o con el diagn√≥stico especial.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

35

STEP 7
2.4 Editar dispositivos y redes
Si no se ha iniciado el diagn√≥stico especial a trav√©s de los pasos mencionados anteriormente
y se emite un mensaje de error, proceda del siguiente modo:
1. Deshaga la conexi√≥n online existente con la estaci√≥n.
2. Abra de nuevo la vista online y de diagn√≥stico del m√≥dulo como se ha descrito
anteriormente e inicie el diagn√≥stico especial.
Aplicaciones de 32 bits: diagn√≥stico NCM S7, cargador de firmware
Si se ha establecido una conexi√≥n con un CP PC desde una aplicaci√≥n de 32 bits y se desea
establecer otra conexi√≥n online a trav√©s de la misma interfaz del CP PC, primero hay que
finalizar la conexi√≥n de la aplicaci√≥n de 32 bits.

Diagn√≥stico especial y cargador de firmware: GUI en chino
Si abre el diagn√≥stico especial o el cargador de firmware con la GUI en chino, deber√° ajustar
a chino el idioma para aplicaciones no Unicode en el sistema operativo.

CM/CP S7
No hay routing S7 con CP 300/400 < V3 como router
En el routing S7 entre estaciones S7-1200 o S7-1500 no se establece conexi√≥n alguna si los
routers interconectados son CP antiguos de la serie S7-300/400. Esto afecta a los siguientes
tipos de comunicaci√≥n que se ejecutan utilizando conexiones ISO-Transport o ISO-on-TCP:
‚óè Comunicaci√≥n S7
‚óè Comunicaci√≥n PG
‚óè Comunicaci√≥n HMI
Este comportamiento es aplicable a CP S7-300/400 con una versi√≥n de firmware < V3.0 y una
longitud de TSAP limitada a 2 bytes.
Por el contrario, los CP S7-300/400 con versi√≥n V3.0 o superior soportan TSAP largos, igual
que los S7-1200/1500, con lo que son compatibles con el routing S7.

CM 1542‚Äë1: Eliminar el almacenamiento remanente de la direcci√≥n IP en caso de direccionamiento
doble
La direcci√≥n IP y el nombre de dispositivo del CM 1542-1 se guardan de forma remanente:
Cuando el CM detecta un doble direccionamiento p. ej. al arrancar en otra red, el CM no se
incorpora a la red. El CM conmuta a RUN y no est√° accesible a trav√©s de la interfaz Ethernet.

36

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes
Para incorporar el CM a la red, elimine la direcci√≥n IP guardada de forma remanente como se
indica a continuaci√≥n:
1. Retire la tarjeta de memoria de la CPU.
2. En caso de parada de la CPU, ajuste a 0.0.0.0 la direcci√≥n IP del CM sin configuraci√≥n a
trav√©s de DCP con la Primary Setup Tool (PST).
Ha eliminado la direcci√≥n IP del CM guardada de forma remanente. El CM puede
incorporarse a la red.
3. Vuelva a insertar la tarjeta de memoria de la CPU.

CPs PC y aplicaciones
CP PC para VMware vSphere Hypervisor ESXi
Los siguientes procesadores de comunicaciones est√°n habilitados bajo VMware vSphere
Hypervisor ESXi para STEP 7 Professional V14:
‚óè CP 5711
‚óè Adaptador de red VMware E1000
Los siguientes procesadores de comunicaciones no est√°n liberados bajo VMware vSphere
Hypervisor ESXi:
‚óè CP 5611
‚óè CP 5612
‚óè CP 5621
‚óè CP 5622
‚óè CP 5512
Otros procesadores de comunicaciones como CP 1623 y CP 1628 est√°n habilitados adem√°s
mediante instalaci√≥n del software de PC SIMATIC NET. Para m√°s informaci√≥n al respecto
consulte el archivo L√©ame del software de PC SIMATIC NET.

Cargar en estaciones PC
Cuando se cargan datos de proyecto en una estaci√≥n PC con PC-CP, aseg√∫rese de que el CP
est√° accesible.
En el cuadro de di√°logo "Carga avanzada" no debe activarse la casilla de verificaci√≥n para
buscar dispositivos compatibles.
Si debe cargarse un CP distinto al que se ha seleccionado previamente en el proyecto, cambie
manualmente la direcci√≥n IP del CP en el cuadro de di√°logo "Carga avanzada", en la lista de
nodos de acceso configurados.

Conexiones PROFIBUS S7 con servidores OPC
La configuraci√≥n de una conexi√≥n S7 mediante PROFIBUS no es posible entre un servidor
OPC V12 o superior y un S7-1200 V4 o superior o un S7-1500.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

37

STEP 7
2.4 Editar dispositivos y redes
Soluci√≥n: utilice un servidor OPC / una aplicaci√≥n PC < V12 o use como estaci√≥n S7 un
S7-1200 < V4 o un S7-300/S7-400.

Visibilidad de variables PLC para la comunicaci√≥n OPC UA.
Si en la comunicaci√≥n S7 entre una estaci√≥n PC y una estaci√≥n S7 configura variables PLC con
la opci√≥n "Accesible desde HMI/OPC UA" desactivada, ello no repercutir√° en la visibilidad de
la estaci√≥n PC en el servidor OPC UA.

Derechos de acceso de un cliente OPC a variables PLC.
Si desea escribir desde un cliente OPC UA variables PLC de estaciones S7 proporcionadas v√≠a
comunicaci√≥n S7 en el servidor OPC UA de una estaci√≥n PC, deber√° prever lo siguiente al
configurar las variables:
‚óè En las variables PLC est√° activada la opci√≥n "Escribible desde HMI/OPC UA".
‚óè En la configuraci√≥n de s√≠mbolos de la aplicaci√≥n OPC UA de la estaci√≥n PC est√° activado
el derecho de acceso "Read/Write".

M√≥dulos de Security
Migraci√≥n de proyectos con CP Ethernet y funciones de seguridad inform√°tica activadas
En proyectos de STEP 7 V5.5 que incluyan CP Industrial Ethernet con funciones de seguridad
inform√°tica activadas, los ajustes de seguridad inform√°tica se desactivar√°n en caso de
migraci√≥n a STEP 7 Professional.
En caso necesario, proceda del siguiente modo tras la migraci√≥n:
1. Active la funcionalidad de seguridad.
2. Configure los ajustes de seguridad necesarios.

Migraci√≥n de la lista de protecci√≥n de acceso IP al activar funciones de seguridad
Una lista de protecci√≥n de acceso IP activa se convierte a reglas de cortafuegos al activar las
funciones de seguridad. Dichas reglas son visibles en el modo de cortafuegos avanzado,
donde pueden adaptarse. El modo de cortafuegos avanzado se activa autom√°ticamente.

Diagn√≥stico online de seguridad de CPs S7
El diagn√≥stico online de seguridad de un CP apto para seguridad solo es posible si la conexi√≥n
online se establece directamente a trav√©s del CP. Si la conexi√≥n online entre STEP 7 y la
estaci√≥n se ha establecido a trav√©s de la CPU, existe la posibilidad de establecer una conexi√≥n
directa con el CP para realizar el diagn√≥stico online de seguridad por medio del bot√≥n
"Conexi√≥n online", que se encuentra en la p√°gina de diagn√≥stico de seguridad "Seguridad >
Estado" del CP de seguridad. Otra posibilidad consiste en deshacer la conexi√≥n online con la
CPU y registrar la direcci√≥n IP del CP en el campo de entrada "Direcci√≥n del dispositivo" en la
entrada "Accesos online" del diagn√≥stico online.

38

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.4 Editar dispositivos y redes

Modo IKE
Durante la negociaci√≥n de la clave en la fase 1 es preferible el modo IKE "Main". Por lo general,
este modo ofrece m√°s seguridad que el modo "Aggressive". Un motivo para el uso del ajuste
"Aggressive" es el empleo de grupos VPN con diferentes claves "pre-shared".
El modo IKE "Aggressive" no debe usarse con certificados. Utilice √∫nicamente "pre-shared
keys" en el modo IKE "Aggressive".
Un m√≥dulo de seguridad no puede estar simult√°neamente en grupos VPN que utilicen modos
IKE distintos.

Cargar datos de configuraci√≥n en S7-300/400 a trav√©s de un t√∫nel VPN
Al cargar datos de configuraci√≥n en una estaci√≥n S7-300-/S7-400 a trav√©s de la interfaz Gigabit
de un CP x43‚Äë1 Advanced, la ruta por la que se realiza la carga se guarda en el proyecto. Si
el proyecto se carga a continuaci√≥n a trav√©s de un t√∫nel VPN establecido entre un m√≥dulo
SCALANCE S y el CP x43‚Äë1 Advanced, la operaci√≥n de carga fallar√° debido a que ha
cambiado la ruta.
Para realizar la operaci√≥n de cardga a trav√©s del t√∫nel VPN, proceda del siguiente modo:
1. Conecte la estaci√≥n de ingenier√≠a con la interfaz Gigabit del CP x43‚Äë1 Advanced a trav√©s
del bot√≥n "Establecer conexi√≥n online".
2. Deshaga la conexi√≥n online al CP x43‚Äë1 Advanced.
3. Cargue el proyecto en la estaci√≥n a trav√©s de la interfaz Gigabit del CP x43‚Äë1 Advanced.

Establecer un t√∫nel VPN mediante CP 1200/1500 aptos para VPN
Para establecer conexiones de t√∫nel VPN por medio de CP 1200/1500 aptos para VPN con el
m√©todo de autenticaci√≥n "Pre-shared key", el interlocutor de la conexi√≥n VPN deber√° ser a su
vez tambi√©n un CP 1200/1500 apto para VPN. El establecimiento de conexiones de t√∫nel VPN
por un CP 1200/1500 apto para VPN a los dem√°s interlocutores de VPN solo es posible con el
m√©todo de autenticaci√≥n "Certificado".

Configuraciones de seguridad de proyectos antiguos
Antes de que sea posible emplear una configuraci√≥n de seguridad de una versi√≥n antigua de
STEP 7 en STEP 7 V14, un usuario con derechos de administrador debe iniciar sesi√≥n en
STEP 7 V13 SP1 en esta configuraci√≥n de seguridad y guardar el proyecto. Tras abrir el
proyecto en STEP 7 V14 vuelve a ser necesario que un usuario con derechos de administrador
inicie sesi√≥n en la configuraci√≥n de seguridad. Despu√©s ser√° posible usar esta configuraci√≥n
de seguridad en STEP 7 V14.

Copia de Security-Modulen entre instancias de STEP 7
Bo se soporta la copia de Security-Modulen entre diversas instancias de STEP 7.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

39

STEP 7
2.4 Editar dispositivos y redes

Certificados de dispositivos para CP 1543-1 V2.0 y CP 1543SP-1
Para CP 1543-1 V2.0 y CP 1543SP-1 solo se cargan en el m√≥dulo los certificados de
dispositivos que se han asignado al m√≥dulo como certificados propios en el administrador local
de certificados. La asignaci√≥n se lleva a cabo mediante el editor de tablas "Certificados de
dispositivos" con la entrada "Administrador de certificados" en los ajustes de seguridad del
m√≥dulo. Para la asignaci√≥n de certificados est√°n disponibles los certificados del administrador
global de certificados.

Ning√∫n perfil VPN de fallback para CP 1200/1500
Los perfiles VPN de fallback no est√°n soportados por los CP 1200/1500. Por consiguiente, los
perfiles VPN de fallback configurados no se cargan en el CP 1200/1500.

Convertidor de medios
Cuando vaya a migrar un proyecto, deber√° reconfigurar el convertidor de medios.

40

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

2.5

Programaci√≥n del PLC

2.5.1

Indicaciones generales relativas a la programaci√≥n del PLC

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Atributos espec√≠ficos de la instancia al importar bloques a trav√©s de TIA Portal Openness
En determinadas situaciones, las reglas de importaci√≥n pueden provocar la p√©rdida de
atributos espec√≠ficos de la instancia como, por ejemplo, valores de arranque.

Indicaci√≥n del nombre de la CPU en los avisos de sistema
A partir de V15.1 el nombre de la CPU (o el nombre de la estaci√≥n en el caso de las CPU H o
R) se muestra en la columna "Texto adicional 1" de los avisos de sistema. Para ello es
necesario compilar el hardware del dispositivo correspondiente. Si el nombre de la CPU no se
muestra a trav√©s de la opci√≥n "Compilar > Hardware (solo cambios)", utilice la opci√≥n
"Compilar > Hardware (compilar todo)".
Aseg√∫rese de que efectivamente se ha realizado la carga en el dispositivo; la informaci√≥n de
que el hardware es actual no es suficiente.

Modificar el ciclo de aplicaci√≥n de un OB de alarma de sincronismo
Si se modifica el par√°metro "Ciclo de aplicaci√≥n (ms)" de un OB de alarma de sincronismo,
tambi√©n cambia impl√≠citamente la configuraci√≥n hardware. Para que el valor modificado para
la duraci√≥n del ciclo de aplicaci√≥n sea efectivo en la CPU tras la pr√≥xima operaci√≥n de carga,
hay que cargar tambi√©n expl√≠citamente la configuraci√≥n hardware. Para ello, elija el comando
de men√∫ "Cargar en dispositivo > Hardware y software" o el comando "Cargar en dispositivo
> Configuraci√≥n hardware".

Uso del tipo de datos de sistema "TDiag_StatusExt" (S7-1200/1500)
Opcionalmente al tipo de datos de sistema "TDiag_Status", tambi√©n puede emplearse el tipo
de datos de sistema ampliado "TDiag_StatusExt" para obtener informaci√≥n adicional sobre la
causa de la interrupci√≥n de la conexi√≥n. En particular, la lectura del elemento de estructura
"LastConnErrTimeStamp" hace que la CPU cambie al estado de sistema "Defect" y no debe
utilizarse actualmente.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

41

STEP 7
2.5 Programaci√≥n del PLC

Informaci√≥n sobre la seguridad de la red
Los accesos de comunicaci√≥n entre TIA Portal y CPU, o bien entre HMI y CPU (excepto
cuando los accesos HMI se realizan a trav√©s de la "Comunicaci√≥n GET/PUT") ofrecen
funciones de seguridad integradas. Estas ofrecen una mayor protecci√≥n frente a
manipulaciones y una mayor protecci√≥n de acceso. Para prevenir accesos no autorizados a
trav√©s de redes a una CPU con accesos de comunicaci√≥n est√°ndar, como p. ej., "GET/PUT",
"TSEND/TRCV", "Modbus", "FETCH/WRITE", se recomienda tomar adem√°s medidas de
protecci√≥n adecuadas (p. ej., concepto de protecci√≥n de c√©lulas).

Funciones de la librer√≠a global "Long Functions" con PLCSIM (S7-1500)
Mediante el proceso de compilaci√≥n, las funciones de la familia de CPU S7-1500 quedan
vinculadas a la CPU para protegerla contra manipulaciones. Las funciones empleadas en la
CPU de la librer√≠a global "Long Functions" que poseen este tipo de v√≠nculo no se pueden cargar
en una simulaci√≥n. Sin embargo, existe la posibilidad de sustituir estos elementos por sus
originales de la librer√≠a global. Estos elementos no est√°n vinculados a la CPU.

Cargar programas no coherentes en una CPU S7-1500 (S7-1500)
En el TIA Portal no es posible cargar programas no coherentes en una CPU S7-1500 sin
realizar previamente una prueba de coherencia. Durante la carga se comprueban
autom√°ticamente todos los bloques del programa y, si hay incoherencias, se compilan
nuevamente. No obstante, si la CPU contiene programas que fueron cargados con versiones
anteriores de STEP 7, estos programas pueden presentar incoherencias.
En tal caso, tenga en cuenta lo siguiente:
Si carga un programa incoherente desde un dispositivo, no podr√° cargar despu√©s el programa
en una CPU S7-1500 sin modificarlo, ya que durante la carga se comprueba autom√°ticamente
la coherencia y se eliminan las incoherencias encontradas.

Intercambio de datos entre programa est√°ndar y F cuando se utiliza Team Engineering
Para garantizar la coherencia de datos entre el programa est√°ndar y de seguridad debe
realizarse lo siguiente:
‚óè No intercambiar datos a trav√©s de marcas, sino de bloques de datos globales.
‚óè Limitar los accesos entre programas de seguridad y programas de usuario est√°ndar a dos
bloques de datos est√°ndar.
Encontrar√° m√°s informaci√≥n al respecto en el cap√≠tulo 5.13 de la gu√≠a de programaci√≥n en:
https://support.industry.siemens.com (https://support.industry.siemens.com/cs/document/
81318674/gu%C3%ADa-de-programaci%C3%B3n-para-s7-12001500?dti=0&lc=es-WW)

42

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

2.5.2

Indicaciones acerca de las instrucciones

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Instrucci√≥n "FileDelete: Borrar archivo en la Memory Card"
Al contrario de lo que se afirma en la Ayuda en pantalla, para los valores 8091 y 8094 del
par√°metro "Status" rige lo siguiente:
‚óè El valor 8091 tiene el siguiente significado: la ruta no existe o no es v√°lida.
‚óè El valor 8094 no se emite.

2.5.3

Comprobar el programa de usuario

2.5.3.1

Nota sobre el test con la tabla de observaci√≥n

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Accesos m√∫ltiples a la misma CPU (S7-300/400/1200)
Desde una programadora o un PC solo se puede acceder online a una CPU
(S7-300/400/1200) con el TIA Portal abierto. Los accesos m√∫ltiples a la misma CPU de esa
familia no est√°n permitidos y pueden provocar errores.

Cargar bloques de datos mientras se procesa una petici√≥n de forzado
Al cargar bloques de datos modificados mientras se procesa una petici√≥n de forzado pueden
darse estados operativos imprevistos. La petici√≥n de forzado contin√∫a forzando la direcci√≥n
indicada, mientras que la asignaci√≥n de direcciones puede haber cambiado en el bloque de
datos. Finalice las peticiones de forzado que se est√©n procesando antes de proceder a cargar
bloques de datos.

Funci√≥n "Desbloquear salidas"
La funci√≥n "Desbloquear salidas de periferia" no est√° disponible en el TIA Portal para las CPU
de la serie S7-1500.
Esta funci√≥n solo puede ejecutarse en el TIA Portal con una CPU S7-300, S7-400 o S7-1200.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

43

STEP 7
2.5 Programaci√≥n del PLC

Probar programas migrados de versiones anteriores de STEP 7
Para observar y probar un programa migrado de una versi√≥n anterior de STEP 7, es necesario
compilarlo y cargarlo primero con la versi√≥n actual de STEP 7.

Probar programas que han sido actualizados
Despu√©s de actualizar proyectos a la versi√≥n V16, internamente se vuelven a calcular las
sumas de verificaci√≥n. En casos poco frecuentes, eso puede provocar que en la tabla de
observaci√≥n no se muestren valores para variables, ya que la suma de verificaci√≥n ha
cambiado, aunque los bloques son id√©nticos. En ese caso, en la columna "Valor de
observaci√≥n" no se muestra ning√∫n valor, sino las gafas con el c√≠rculo rojo tachado. En tal caso
es necesario volver a compilar y cargar el proyecto antes de poder observarlo y probarlo online
con la tabla de observaci√≥n.

Formatos de visualizaci√≥n modificados en la tabla de observaci√≥n
El n√∫mero de formatos de visualizaci√≥n se ha reducido, de modo que en caso de actualizar un
proyecto, los formatos de visualizaci√≥n que se utilicen, pero que ya no est√©n soportados se
restablecer√°n a sus valores predeterminados.
Ejemplo: los punteros no pueden visualizarse m√°s que en los formatos "Puntero" o
"Hexadecimal".

2.5.3.2

Nota sobre el test con la tabla de forzado permanente

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Forzado permanente de variables con acceso directo a la periferia (S7-300)
Si en el programa de usuario se utiliza un acceso directo a la periferia para una CPU S7-300,
no est√° permitido el forzado permanente de esta direcci√≥n de periferia.

Ejemplo
Si en el programa de usuario se accede a la direcci√≥n "IB0:P", no podr√°n forzarse
permanentemente las siguientes √°reas de direcciones de la periferia: I0.0:P, IB0:P, IW0:P e
ID0:P.

Formatos de visualizaci√≥n modificados en la tabla de forzado permanente
El n√∫mero de formatos de visualizaci√≥n se ha reducido, de modo que en caso de actualizar un
proyecto, los formatos de visualizaci√≥n que se utilicen, pero que ya no est√©n soportados se
restablecer√°n a sus valores predeterminados.
Ejemplo: los punteros no pueden visualizarse m√°s que en los formatos "Puntero" o
"Hexadecimal".

44

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

2.5.3.3

Nota sobre el test con puntos de parada

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Posicionar puntos de parada en el programa de usuario con CPU F S7-1500
Cuando se alcanza un punto de parada activado, la CPU pasa inmediatamente a "STOP"
despu√©s de una "PARADA". Si despu√©s de una "PARADA" debe volver a pasarse a RUN para
seguir probando el programa de usuario est√°ndar, puede simularlo con S7-PLCSIM.
Encontrar√° m√°s informaci√≥n sobre el test con puntos de parada en las CPU F en el manual
"SIMATIC Safety - Configuring and Programming".

2.5.4

Actualizaci√≥n de bloques

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Actualizaci√≥n de bloques con protecci√≥n de know-how (S7-1200/1500)
Los bloques con protecci√≥n de know-how creados con una versi√≥n anterior de TIA Portal
pueden cargarse en el controlador y ejecutarse sin necesidad de introducir una contrase√±a al
actualizarse a la versi√≥n actual.
Para abrir y editar estos bloques en la versi√≥n actual, proceda del siguiente modo:
‚óè Bloques cuya protecci√≥n de know-how se estableci√≥ con la versi√≥n V13 SP1 o superior:
‚Äì Elimine la protecci√≥n de know-how en la versi√≥n actual, edite el bloque y vuelva a activar
la protecci√≥n de know-how.
‚óè Bloques cuya protecci√≥n de know-how se estableci√≥ con una versi√≥n anterior a V13 SP1:
‚Äì Elimine la protecci√≥n de know-how en V13 SP1 y actualice el bloque a la versi√≥n actual.
Seguidamente, edite el bloque y vuelva a activar la protecci√≥n de know-how en la
versi√≥n actual.

Actualizaci√≥n de bloques GRAPH (S7-300, S7-400, S7-1500)
Despu√©s de actualizar a la versi√≥n V16 un proyecto de una versi√≥n inferior a la V15,
compruebe si en el informe hay bloques GRAPH reparados y si dichos bloques pueden
ejecutarse en su programa.
Si se actualiza un proyecto que contenga bloques GRAPH de la versi√≥n V15.x a la versi√≥n V16,
primero deber√°n compilarse los bloques de programa antes de poderlos observar.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

45

STEP 7
2.5 Programaci√≥n del PLC

Comparaci√≥n offline/online
En la versi√≥n actual se corrigieron los datos de proyecto internos para aumentar su integridad.
Por ello, tras la instalaci√≥n es posible que algunos bloques se corrijan autom√°ticamente al
abrirlos y la comparaci√≥n offline/online mostrar√°, por tanto, sumas de verificaci√≥n diferentes.

Actualizaci√≥n de especificaciones del dispositivo
Al actualizar el proyecto, en determinados casos se actualizan las especificaciones internas de
las CPU utilizadas.
El siguiente mensaje indica que se est√° realizando una actualizaci√≥n: "Se ha actualizado la
configuraci√≥n de dispositivos de las CPU en el proyecto."
La actualizaci√≥n no afecta al programa que se ejecuta en la CPU.

2.5.5

Compatibilidad con programas de PLC de versiones anteriores

2.5.5.1

Compatibilidad con programas de PLC de versiones anteriores a la V16

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compatibilidad
Por principio es posible seguir utilizando en la V16 todos los programas de PLC que se hayan
creado con versiones anteriores del TIA Portal. Sin embargo, puesto que en la V16 se han
realizado algunas mejoras y se han solucionado errores del compilador, en unos pocos casos
es posible que el programa se comporte de distinto modo despu√©s de la actualizaci√≥n o que
deba corregirse manualmente el c√≥digo del programa. A continuaci√≥n se describen estos
casos con detalle.

Incoherencia en las sumas de verificaci√≥n
Despu√©s de actualizar un proyecto a la versi√≥n V16 es posible que se indiquen diferencias
entre los programas online y offline, aunque estos sean totalmente id√©nticos. Estas diferencias
se deben a que en la versi√≥n V16 se ha optimizado el c√°lculo de las sumas de verificaci√≥n. Sin
embargo, en la mayor√≠a de los casos los bloques son compatibles.
No obstante, en raras ocasiones el c√°lculo modificado de la suma de verificaci√≥n hace
necesario compilar y cargar el proyecto nuevamente antes de poderlo observar y probar online.

46

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Software Units
A partir de V16, para el nombre de una Software Unit rigen las siguientes normas:
‚óè Se permiten todos los caracteres alfanum√©ricos y el guion bajo.
‚óè El n√∫mero m√°ximo es de 125 caracteres.
‚óè El nombre de una Software Unit debe ser un√≠voco en toda la CPU y tampoco puede existir
en ella ning√∫n bloque con el mismo nombre.
Si las Software Units del programa no cumplen estas normas, se mostrar√° un error de sintaxis
despu√©s de la actualizaci√≥n. En tal caso, modifique la propiedad de la Software Unit y compile
nuevamente el programa.

An√°lisis sint√°ctico de instancias (KOP, FUP, AWL, GRAPH)
Al llamar un bloque de funci√≥n ahora se comprueba con mayor precisi√≥n si el bloque de datos
de instancia indicado es del mismo tipo que el FB llamado. Adem√°s del n√∫mero y la estructura
del bloque tambi√©n se comprueba el nombre del bloque.
En caso de incoherencias, se emite un error de sintaxis despu√©s de la actualizaci√≥n. En este
caso, compruebe el tipo del bloque de datos de instancia en las propiedades del bloque, √°rea
"General". Si el tipo no coincide con el del FB llamado, deber√° cambiarse la llamada del bloque
e indicarse una instancia adecuada.

Instrucciones "UPPER_BOUND" y "LOWER BOUND" (KOP, S7-1200/S7-1500)
La entrada de habilitaci√≥n "EN" de sendas instrucciones "UPPER_BOUND" y "LOWER
BOUND" ahora se eval√∫a correctamente. Si la entrada "EN" tiene el estado l√≥gico "0", la
instrucci√≥n no se ejecuta y la salida de habilitaci√≥n "ENO" tiene el estado l√≥gico "0". Si utiliza
una de ambas instrucciones, compruebe despu√©s de la actualizaci√≥n si el programa se ejecuta
como hasta ahora.

Instrucci√≥n "S_CONV" (KOP)
En versiones anteriores de TIA Portal, la entrada de habilitaci√≥n "EN" de la instrucci√≥n
"S_CONV" no se evaluaba en la conversi√≥n de (W)Char a (W)String si no hab√≠a ning√∫n
par√°metro interconectado en la salida de habilitaci√≥n "ENO". Este comportamiento se ha
corregido. Si utiliza "S_CONV", compruebe despu√©s de la actualizaci√≥n si el programa se
ejecuta como hasta ahora.

Inicializaci√≥n del tipo de datos STRUCT al importar archivos de origen externos (SCL)
Las reglas de inicializaci√≥n para STRUCT se han unificado. Ahora, las listas de inicializaci√≥n
se eval√∫an siempre siguiendo las mismas reglas, independientemente de si se trabaja en la
interfaz de bloque textual o tabular.
Si en una lista de inicializaci√≥n se utiliza una sintaxis distinta y, por ejemplo, algunos elementos
se inicializan indicando su nombre y otros indicando solo su valor, debe comprobarse el
programa tras importarlo a TIA Portal V16.
El ejemplo siguiente muestra c√≥mo se eval√∫an los elementos de estructura en V16, tanto en
la interfaz de bloque tabular como en la textual:

L√©ame
Manual de programaci√≥n y manejo, 11/2019

47

STEP 7
2.5 Programaci√≥n del PLC
myStruct : Struct
member_1 : Int;
member_2 : Int;
member_3 : Int;
member_4 : Int;
member_5 : Int;
End_Struct:=(1,mem_3:=33,2,3);
//Los elementos de estructura se inicializan como se indica a
continuaci√≥n:
//mem_1 := 1;
//mem_3 := 33;
//mem_4 := 2;
//mem_5 := 3;

Declaraci√≥n AT
En casos poco frecuentes se escrib√≠an valores err√≥neos en los par√°metros de bloque que
siguen inmediatamente a una declaraci√≥n AT en la interfaz. Este comportamiento se ha
corregido.
Al mismo tiempo, ya no es posible superponer par√°metros de bloque de los tipos de datos
BOOL, BYTE, SINT, USINT o CHAR con variables del tipo de datos STRUCT y UDT. Las
superposiciones con variables del tipo ARRAY solo son posibles en tanto que el tama√±o del
array no exceda el tama√±o de datos del tipo superpuesto.
Si utiliza declaraciones AT, compruebe el programa tras la actualizaci√≥n.

Instrucci√≥n "MOVE"
La instrucci√≥n "MOVE" permite copiar todas las variables de un bloque de datos a otro bloque
de datos ("DA a" := "DB b"), si ambos bloques tienen la misma estructura, es decir, la cantidad,
los tipos de datos y el orden de declaraci√≥n de las variables declaradas son id√©nticos. Adem√°s,
ambos bloques de datos tienen que tener el mismo formato de almacenamiento (optimizado y
sin optimizar).
Si ambos bloques aparecen en el formato de almacenamiento optimizado, todas las variables
de ambos bloques deber√°n ser o bien remanentes, o bien no remanentes.

Instrucci√≥n "MOVE" (AWL)
A partir de TIA Portal V16, en AWL ya no se puede transferir una variable del tipo de datos
VARIANT de las √°reas InOut u Out de la interfaz de bloque a la salida OUT de una instrucci√≥n
MOVE.

48

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Instrucciones "SCATTER_BLK" y "GATHER_BLK" (SCL)
A partir de la V16 se han restringido los tipos de datos admisibles: Si como par√°metros utiliza
estructuras (STRUCT o tipo de datos PLC), estas solo pueden contener variables del tipo de
datos BOOL.

Constantes sin tipo (SCL)
La prueba sem√°ntica de constantes sin tipo se ha adaptado a los otros lenguajes de
programaci√≥n: Si una constante no tipificada no es compatible con el tipo de datos del
operando asignado, se notificar√° un error de compilaci√≥n siempre que est√© activada la
verificaci√≥n IEC.

Direccionamiento de ARRAYS mediante √≠ndice variable y acceso a periferia (S7-1200)
En una CPU de la serie S7-1200, ya no se pueden direccionar ARRAYS mediante un √≠ndice
variable en combinaci√≥n con el identificador de acceso a periferia ":P".
Ejemplo de un direccionamiento de ARRAY no permitido:
#array[0, #myIndexTag, 2]:P
Ejemplos de direccionamientos de ARRAY permitidos con acceso a periferia:
#array[0, #myConstant, 2]:P
#array[0, 1, 2]:P
Ejemplos de direccionamientos de ARRAY permitidos con √≠ndice variable:
#array[0, #myIndexTag, 2]

Tama√±o de los bloques si se utilizan ARRAY en estructuras
Si se utilizan estructuras (STRUCT) que contienen m√°s de un elemento ARRAY, podr√≠a
producirse el siguiente error:
Si varios accesos de ARRAY se encontraban fuera del rango v√°lido, la CPU no pas√≥ a STOP,
sino que se accedi√≥ a un elemento ARRAY.
Este comportamiento se ha corregido en V16: si eso ocurre, la CPU pasa a STOP o ejecuta un
tratamiento local o global de errores si lo tiene programado.
Debido a la correcci√≥n es posible que los bloques afectados tengan un tama√±o mayor.

Tama√±o de los bloques GRAPH
Recuerde que con la correcci√≥n anterior todos los bloques GRAPH aumentan
aproximadamente en 90 bytes.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

49

STEP 7
2.5 Programaci√≥n del PLC

Asignaci√≥n de constantes sin tipo (SCL)
Para la asignaci√≥n de constantes sin tipo a variables del tipo "Real" se genera un mensaje de
error si la comprobaci√≥n "IEC Check" est√° activada y al mismo tiempo la constante se
encuentra dentro del rango de valores de un LReal y fuera del rango de valores de un Real.

2.5.5.2

Compatibilidad de programas de PLC de versiones anteriores a la V15.1

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compatibilidad
Por principio es posible seguir utilizando en V15.1 todos los programas de PLC que se hayan
creado con versiones anteriores de TIA Portal. Sin embargo, puesto que en V15.1 se han
realizado algunas mejoras y se han solucionado errores del compilador, en unos pocos casos
es posible que el programa tenga un comportamiento distinto despu√©s de la actualizaci√≥n o
que deba corregirse manualmente el c√≥digo del programa. A continuaci√≥n se describen estos
casos con detalle.

Secuencia de ejecuci√≥n de llamadas de funci√≥n en SCL (S7-1200/S7-1500)
En las versiones anteriores del TIA Portal, la secuencia de ejecuci√≥n de asignaciones que
conten√≠an expresiones o llamadas de funci√≥n no siempre era un√≠voca. La ejecuci√≥n no se
realizaba consecuentemente de derecha y izquierda, sino que en determinados casos se
evaluaban primero partes de la expresi√≥n en la parte izquierda.
Este comportamiento se ha corregido en la versi√≥n V15.1, de manera que ahora siempre se
calcula primero la parte derecha de la asignaci√≥n y despu√©s se determina la parte izquierda.
Ejemplo:
#myArr["FC_1"()]:= #x + #y;
En las versiones anteriores, aqu√≠ se ejecutaba primero la "FC1" para determinar un elemento
del ARRAY. Despu√©s se calculaba #x + #y.
A partir de la versi√≥n V15.1, el programa ahora se ejecuta correctamente de derecha a
izquierda: Primero se calcula #x + #y y despu√©s se ejecuta la "FC1".
Esta correcci√≥n puede hacer que el programa se comporte de distinta manera despu√©s de la
actualizaci√≥n, p. ej., en caso de que en la "FC1" se activen las variables #x o #y. Compruebe
por ello el programa despu√©s de la actualizaci√≥n.

Comparadores (SCL S7-1200 >= 4.2 y S7-1500 >= 2.0)
Cuando se comparan entre s√≠ dos bloques de datos de instancia con operaciones de
comparaci√≥n en SCL, no se compara la estructura de los bloques sino simplemente el n√∫mero
de bloque. A partir de la versi√≥n V15.1 aparece un mensaje de error durante la compilaci√≥n,
que le indica que esta operaci√≥n puede no devolver el resultado deseado (por regla general se
devuelve FALSE, puesto que los n√∫meros de los bloques son diferentes).

50

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC
Ejemplo:
El resultado de la siguiente operaci√≥n de comparaci√≥n es FALSE aunque la estructura de los
dos bloques sea id√©ntica.
IF "MyDBofFB" = "MyDBofSameFB" THEN ‚Ä¶

Importaci√≥n de temporizadores CEI (S7-1200/S7-1500)
Los temporizadores CEI contienen par√°metros protegidos contra escritura, p. ej. ET (valor de
tiempo actual). En las versiones anteriores del TIA Portal se sobrescrib√≠an en determinados
casos los valores de arranque de estos par√°metros protegidos contra escritura al importar
archivos fuente externos. Este comportamiento se ha corregido con V15.1. Los valores de
arranque de los par√°metros protegidos contra escritura ahora se ignoran al importar archivos
fuente. En su lugar se utilizan los valores predeterminados del tipo de datos. Compruebe por
ello el programa despu√©s de la importaci√≥n.

Sustituci√≥n de caracteres Unicode no v√°lidos durante la actualizaci√≥n
Durante la actualizaci√≥n a V15.1, en el programa se corrigen los caracteres Unicode no
v√°lidos; p. ej. los caracteres no v√°lidos de las constantes String son sustituidos por secuencias
Escape definidas mediante IEC. Por ello puede cambiar la suma de verificaci√≥n del programa,
y se muestran diferencias entre el programa online y el programa offline. En este caso, compile
y cargue de nuevo el programa.

Instrucciones "SCATTER" / "SCATTER_BLK" y "GATHER" / "GATHER_BLK" (S7-1200/1500)
Con las instrucciones "SCATTER" / "SCATTER_BLK" se puede dispersar una secuencia de
bits en bits individuales. Con los comandos "GATHER" / "GATHER_BLK" se pueden reunir bits
individuales en una secuencia de bits.
Los valores con los que operan las instrucciones no pueden encontrarse en el √°rea de periferia
o en el DB de un objeto tecnol√≥gico, ya que en estas √°reas no se garantiza la coherencia de
los datos.
Esta regla se verifica con un an√°lisis sint√°ctico m√°s preciso a partir de V15.1. Si en el programa
la instrucci√≥n mencionada recibe valores de par√°metros de entrada no admisibles, se
notificar√° un error al compilarlo.
Como posible soluci√≥n a este problema pueden copiarse las variables primero a un √°rea de
memoria temporal y transferirlas despu√©s a las instrucciones "SCATTER" o "GATHER".

Instrucciones "BLKMOV" / "UBLKMOV" y "FILL" / "UFILL"
Las instrucciones "BLKMOV" / "UBLKMOV" y "FILL" / "UFILL" copian los contenidos de un √°rea
de memoria (√°rea de origen) en un √°rea de memoria diferente (√°rea de destino). Si dichas
instrucciones se asignan a un √°rea de memoria inexistente, se emite un error de programaci√≥n.
En versiones anteriores, en casos aislados se generaba un c√≥digo de error en el par√°metro
"RET_VAL" en vez de un error de programaci√≥n. Este comportamiento se ha corregido en las
CPU S7-1500 a partir de la versi√≥n del firmware 2.6.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

51

STEP 7
2.5 Programaci√≥n del PLC

Instrucci√≥n ‚ÄúRUNTIME‚Äù (SCL/AWL S7-1200/S7-1500)
El par√°metro "Mem" de la instrucci√≥n "RUNTIME" es del tipo de datos "LREAL" y solo puede
utilizarse con una variable de este tipo de datos. Aqu√≠ no es posible realizar una conversi√≥n
impl√≠cita. En la versi√≥n V15.1 se comprueba esta regla con un an√°lisis sint√°ctico m√°s preciso.
Si el par√°metro "Mem" de la instrucci√≥n "RUNTIME" de su programa tiene un tipo de datos no
permitido, aparecer√° un mensaje de error durante la compilaci√≥n.

2.5.5.3

Compatibilidad con programas de PLC de versiones anteriores a V15

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compatibilidad
Por principio es posible seguir utilizando en V15 todos los programas de PLC que se hayan
creado con versiones anteriores del TIA Portal. Sin embargo, puesto que en V15 se han
realizado algunas mejoras y se han solucionado errores del compilador, en unos pocos casos
es posible que el programa tenga un comportamiento distinto despu√©s de la actualizaci√≥n o
que deba corregirse manualmente el c√≥digo del programa. A continuaci√≥n se describen estos
casos con detalle.

S7-GRAPH: conversiones impl√≠citas "Tipos de datos de hardware <> INT"
A partir de TIA Portal V15 ya no es posible programar conversiones impl√≠citas de tipos de datos
de hardware (p. ej. INT -> DB_ANY o DB_ANY -> INT), tal como sucede ya en KOP, FUP, AWL
y SCL.
En su lugar, utilice el tipo de datos UINT o una conversi√≥n expl√≠cita.

Subcategor√≠as en ProDiag (S7-1500)
A partir del TIA Portal V14 SP1 Update 2 ya no se agregan manualmente las diferentes
subcategor√≠as para ProDiag, sino que se activan o desactivan en la columna "Activaci√≥n".
Esto hace que, despu√©s de actualizar un proyecto <V14 SP1 Update 2 que utilice
subcategor√≠as existentes en una supervisi√≥n como m√≠nimo, sea necesario ejecutar el bot√≥n
"Reparar" antes de poder crear otras subcategor√≠as.

Instrucciones "(U)MOVE_BLK" y "(U)FILL_BLK" (S7-1500)
En las versiones del TIA Portal <= V15, las instrucciones "(U)MOVE_BLK" y "(U)FILL_BLK"
solo acced√≠an a la memoria imagen de proceso en caso de acceso directo a la periferia.
Este comportamiento se ha corregido y ahora provoca un error en tiempo de ejecuci√≥n, pues
no se permiten accesos directos a periferia con comandos BLK.

52

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Bucles de programa en SCL (S7-1200/S7-1500)
En S7-1200/S7-1500 no es posible modificar en SCL el √≠ndice de un bucle de programa desde
el propio bucle.
El siguiente ejemplo no ser√≠a v√°lido:
FOR #i := 1 TO 10 DO
#i := #i + 1;
END_FOR;
En este contexto, a partir de TIA Portal V15 se comprueba la sintaxis con mayor detalle y se
emite un error de compilaci√≥n.

Valores de retorno de funciones en SCL
Este comportamiento se ha igualado en las funciones cuyo valor de retorno tiene un tipo de
datos estructurado. Tipos de datos estructurados son, p. ej., tipos de datos PLC, STRUCT o
STRING.
Dependiendo de si se utilizara o no la salida ENO de la funci√≥n, hasta ahora pod√≠a ocurrir que
se creara una copia de trabajo temporal del valor de funci√≥n, aunque esta copia no se creara
con la misma llamada sin ENO. La asignaci√≥n de esta copia temporal a la variable
interconectada se efectuaba al finalizar la funci√≥n.
Este comportamiento se ha modificado del modo siguiente:
El uso del par√°metro de salida ENO ahora ya no influye en si el valor de retorno se transfiere
mediante copia o mediante referencia. Si el valor de retorno tiene un tipo de datos
estructurado, normalmente se transfiere mediante referencia. Las reglas de transferencia se
describen detalladamente en el cap√≠tulo "Transferencia de par√°metros como copia o como
puntero"

LDT_TO_DATE en SCL (S7-1500)
Se ha corregido el comportamiento de LDT_TO_DATE en caso de error de conversi√≥n en
tiempo de ejecuci√≥n.

Comparaci√≥n de un elemento de ARRAY con una variable del tipo de datos "VARIANT" en SCL
(S7-1200/1500)
Hasta ahora, en algunos casos no se llevaba a cabo correctamente la comparaci√≥n de un
elemento de ARRAY de indexaci√≥n variable con un VARIANT. En lugar del elemento de
ARRAY se tomaba todo el ARRAY para la comparaci√≥n.
Este comportamiento se ha corregido en V15: para la comparaci√≥n se eval√∫a ahora el
elemento de ARRAY indexado. Si utiliza este tipo de comparaciones en el programa, tendr√°
que comprobar el bloque en cuesti√≥n despu√©s de la actualizaci√≥n.
Ejemplo:
IF (#my_Array[#1] = #my_variant) THEN‚Ä¶
Hasta ahora se comparaba "my_variant" con "my_Array". A partir de V15, la comparaci√≥n se
realiza correctamente y "my_variant" se compara con el elemento #1 de "my_Array".

L√©ame
Manual de programaci√≥n y manejo, 11/2019

53

STEP 7
2.5 Programaci√≥n del PLC

Instrucci√≥n "GetSymbolPath" (S7-1200/S7-1500)
Si un FB interconecta una variable est√°tica en un par√°metro formal de una llamada y un bloque
subordinado utiliza "GetSymbolPath" V1.0 o V1.1 para el par√°metro, al compilar este bloque
se muestra adicionalmente el nombre del DB antes del nombre de la variable est√°tica, sin
utilizar el punto como separador ni sustituir #. La versi√≥n V1.2 de "GetSymbolPath" muestra la
ruta correctamente, con el punto como separador y sin #.
Si utiliza la instrucci√≥n "GetSymbolPath" en el programa, despu√©s de actualizar a la versi√≥n
>=V15 deber√≠a utilizar la instrucci√≥n "GetSymbolPath" V1.2.

Instrucci√≥n "GetInstancePath" (S7-1200/S7-1500)
Si un FB interconecta una variable est√°tica en un par√°metro formal de una llamada y un bloque
subordinado utiliza "GetInstancePath", al compilar este bloque se muestra adicionalmente el
nombre del DB antes del nombre de la variable est√°tica.

Sumas y restas con DTL/LDT/DT
En las sumas y restas con los tipos de datos DTL/LDT/DT ya no es posible utilizar constantes
sin tipo. Se notifica un error de sintaxis.
As√≠, por ejemplo, ya no es posible realizar las siguientes operaciones aritm√©ticas:
#myDTL + 1
#myLDT + 1
#myDate_And_Time +1
Utilice en su lugar constantes del tipo de datos "Time" o "LTime".
#myDTL + TIME#1d
#myLDT + TIME#1ms
#myDate_And_Time + LTIME#1ns

Informaci√≥n sobre el tiempo de ejecuci√≥n (S7-1200/S7-1500)
Las instrucciones avanzadas "GetInstanceName", "GetInstancePath", "GetSymbolName",
"GetSymbolPath" y "GetBlockName" tienen ahora el mismo comportamiento en todos los
lenguajes de programaci√≥n: Si la cadena de caracteres que debe devolverse no cabe en el
par√°metro de salida "OUT" debido a limitaciones de tama√±o, el nombre se acorta y se muestra
el car√°cter "..." al final de la cadena de caracteres.

ARRAYs de multiinstancias
Hasta ahora, en algunos casos no era posible direccionar correctamente ARRAYs de
multiinstancias, cuando mediante un √≠ndice variable se direccionaba una multiinstancia que
estaba instanciada en otra multiinstancia que, a su vez, era un elemento de un ARRAY de
multiinstancias.
Ejemplo:
#MyMultiArray[#index].MyMultiMember := 10;

54

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC
Este comportamiento se ha corregido en V15.
Si ha utilizado este tipo de accesos en el programa, tendr√° que comprobar el bloque en
cuesti√≥n despu√©s de la actualizaci√≥n y posiblemente volver a compilarlo.

Par√°metros de bloque del tipo de datos "VARIANT" (S7-1200/1500)
Igual que en KOP, FUP, AWL y GRAPH, ahora tampoco es posible asignar en SCL un DB de
instancia como par√°metro actual a un par√°metro formal del tipo de datos "VARIANT".
De esta norma se except√∫an los DB de instancia que derivan de un tipo de datos PLC o un tipo
de datos de sistema. Estos pueden asignarse a un par√°metro de bloque del tipo de datos
"VARIANT" en todos los lenguajes de programaci√≥n.
Ya no es posible asignar una variable protegida contra escritura a un par√°metro de bloque de
tipo "VARIANT" como par√°metro actual.
Siempre que sea posible, elimine la protecci√≥n contra escritura de la variable. Si esto no fuera
posible, intente modificar el programa para evitar el acceso a la variable protegida contra
escritura. Si, por ejemplo, solo desea un acceso de lectura, puede copiar el contenido de la
variable protegida contra escritura del bloque llamante en otra variable que no tenga
protecci√≥n contra escritura. Seguidamente, puede transferir esta variable como par√°metro
actual.

Importar fuentes externas
Hasta ahora, cuando se importaba una fuente externa en la que se utilizaba una instrucci√≥n
como multiinstancia o instancia individual, todo el programa se convert√≠a a la versi√≥n de la
instrucci√≥n utilizada en la fuente. A partir de la versi√≥n V15 de TIA Portal se ha corregido este
comportamiento: Las instrucciones que ya est√°n en el proyecto no se convierten, sino que
conservan la versi√≥n de instrucci√≥n configurada.
Si el proyecto contiene diferentes versiones de una instrucci√≥n tras la importaci√≥n, se notifica
un error de sintaxis. En tal caso, vuelva a compilar todo el programa. Para ello, en el √°rbol del
proyecto seleccione la carpeta "Bloques de programa" y, en el men√∫ contextual, elija el
comando "Compilar > Software (solo cambios)" o "Compilar > Software (compilar todo)".

Tama√±o de ARRAY of BOOL/BYTE/CHAR (S7-1500)
Hasta ahora, los ARRAYs de los tipos de datos BOOL, BYTE o CHAR ten√≠an tama√±os distintos
en funci√≥n de si se utilizaban dentro de una estructura o no. A partir de V15 se ha unificado el
tama√±o de los ARRAYs. Si en el programa se accede de forma absoluta, p. ej. a trav√©s de un
puntero ANY, a un ARRAY of BOOL, BYTE o CHAR, hay que comprobar el programa despu√©s
de la actualizaci√≥n.

2.5.5.4

Compatibilidad de programas de PLC de versiones anteriores a la V14 SP1

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

55

STEP 7
2.5 Programaci√≥n del PLC

Compatibilidad
Por principio es posible seguir utilizando en V14 SP1 todos los programas de PLC que se
hayan creado con versiones anteriores del TIA Portal. Sin embargo, puesto que en V14 SP1
se han realizado algunas mejoras y se han solucionado errores del compilador, en unos pocos
casos es posible que el programa tenga un comportamiento distinto despu√©s de la
actualizaci√≥n o que deba adaptarse manualmente el c√≥digo del programa. A continuaci√≥n se
describen estos casos con detalle.
Asimismo, existe la posibilidad de editar el proyecto en modo de compatibilidad. Encontrar√°
m√°s informaci√≥n sobre la compatibilidad en "Compatibilidad de proyectos".

Tama√±o total de los valores asociados para avisos de programa
El sistema de avisos de la CPU S7-1500 proporciona un m√°ximo de 512 bytes para valores
asociados (par√°metros SD) de la instrucci√≥n "Program_Alarm".
Este tama√±o se indicaba simplemente con una advertencia durante la compilaci√≥n en las
versiones v14 de TIA Portal o anteriores. A partir del TIA Portal V14 SP1 se lleva a cabo una
comprobaci√≥n m√°s estricta. Si se excede este tama√±o, durante la compilaci√≥n se emite un
error con el fin de excluir escenarios de error en tiempo de ejecuci√≥n. A partir de ahora, esta
comprobaci√≥n ya no hace referencia al tama√±o real de los par√°metros SD en el momento de
llamar a la instrucci√≥n "Program_Alarm", sino al tama√±o m√°ximo posible de los par√°metros SD.
Por consiguiente, hay que considerar de antemano la longitud con la que se declarar√°n las
variables de secuencias de caracteres que se transferir√°n, pues ocupan muchos bytes.
Esta cuesti√≥n deber√° tenerse en cuenta al migrar proyectos de la versi√≥n V14 o anteriores a
la versi√≥n V14 SP1 Update 1 o superiores.

Bucles de programa en SCL (S7-1200/S7-1500)
En S7-1200/S7-1500 no es posible modificar en SCL el √≠ndice de un bucle de programa desde
el propio bucle.
El siguiente ejemplo no ser√≠a v√°lido:
FOR #i := 1 TO 10 DO
#i := #i + 1;
END_FOR;
A partir de TIA Portal V14.0.1 se comprueba la sintaxis con mayor detalle y se emite un error
de compilaci√≥n.

Instrucciones CASE en SCL
En una instrucci√≥n CASE ya no se admiten etiquetas sin la instrucci√≥n "GOTO"
correspondiente. Se notifica un error de sintaxis.

ARRAYs de multiinstancias
En la versi√≥n V14 pod√≠a ocurrir que los ARRAYs de multiinstancias no se direccionaran
correctamente cuando algunas variables de una multiinstancia ten√≠an el ajuste de remanencia
"Ajustar en IDB‚Äú. Este comportamiento se ha corregido en V14 SP1:

56

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC
Si ha utilizado este tipo de variables en el programa, es posible que tenga que compilar el
bloque en cuesti√≥n despu√©s de la actualizaci√≥n.

Tipo de par√°metro "Block_DB" para indicar el DB de instancia
En KOP y FUP no es posible indicar el DB de instancia mediante una entrada del tipo
"Block_DB". Este comportamiento se ha unificado en todas las familias de CPU y en todos los
tipos de bloques.
A partir de TIA Portal V14 SP1 se emite un error de sintaxis.
Si ha transferido Dbs de instancia en el programa con el tipo de datos "Block_DB", deber√°
modificar el programa. En su lugar, utilice una instancia de par√°metro para transferir la
instancia en tiempo de ejecuci√≥n.

Accesos a periferia en calidad de par√°metros de entrada de bloques (S7-1500 con firmware V2.1 o
superior)
Los accesos directos a periferia que est√°n interconectados a bloques como par√°metros de
entrada ya no impiden que se ejecute el bloque cuando se produce un error de acceso a
periferia. En su lugar se trabaja con el valor sustitutivo de la se√±al en el bloque.
En las CPU S7-1500 con firmware inferior a la versi√≥n V2.1 y en todas las CPU S7-1200, el
comportamiento del sistema no cambia:
No se llama al bloque debido al error de acceso a periferia. El programa sigue ejecut√°ndose
tras llamar al bloque. Si existe un OB 122 o si el tratamiento local de errores est√° activado,
estos se ejecutan.

2.5.5.5

Compatibilidad con programas de PLC de versiones anteriores a V14

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compatibilidad
En principio es posible seguir utilizando en V14 todos los programas de PLC que se hayan
creado con versiones anteriores del TIA Portal. Sin embargo, puesto que en V14 se han
realizado algunas mejoras y se han solucionado errores del compilador, en unos pocos casos
es posible que el programa tenga un comportamiento distinto despu√©s de la actualizaci√≥n o
que deba adaptarse manualmente el c√≥digo del programa. A continuaci√≥n se describen estos
casos con detalle.

AWL: Instrucciones "SRW", "SLW" y "SSI" (S7-300, S7-400, S7-1500)
El rango de valores permitido para el n√∫mero de desplazamiento de estas instrucciones en el
TIA Portal V14 ha cambiado respecto al TIA Portal V13 SP1.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

57

STEP 7
2.5 Programaci√≥n del PLC
En la versi√≥n V13 SP1 es posible indicar como n√∫mero de desplazamiento en una CPU de las
series S7-1200/1500 un n√∫mero comprendido entre 0 y 31 y, en una CPU de las series
S7-300/400, un n√∫mero comprendido entre 0 y 15.
A partir de la versi√≥n V14, los rangos de valores para todas las series de CPU
(S7-300/400/1200/1500) se han fijado a un valor unitario de 0 a 15.

Representaci√≥n del formato BCD
La representaci√≥n del formato BCD ha cambiado en relaci√≥n al signo del TIA Portal V13 SP1
respecto del TIA Portal V14.
En la versi√≥n V13 SP1, los valores en formato BCD se representan sin signo.
A partir de la versi√≥n V14, los valores en formato BCD se representan con signo. Esto puede
provocar que los valores en formato BCD presenten una representaci√≥n modificada.
Enteros (sistema decimal) N√∫meros hexa‚Äê
decimales

Representaci√≥n en V13
SP1

Representaci√≥n en V14

0

16#0000

BCD#0

BCD#0

-26215

16#9999

BCD#9999

BCD#-999

1365

16#0555

BCD#555

BCD#555

21845

16#5555

BCD#5555

BCD#555

4096

16#1000

BCD#1000

BCD#0

-28672

16#9000

BCD#9000

BCD#0

Instrucciones "SET_BF: Activar mapa de bits" y "RESET_BF: Desactivar mapa de bits" (S7-1200,
S7-1500)
El comportamiento de la instrucci√≥n en relaci√≥n con las estructuras del TIA Portal V13 SP1 ha
cambiado respecto al TIA Portal V14.
En la versi√≥n V13 SP1 se activan o desactivan siempre tantos bits como se indican en la
entrada. Esto se aplica tambi√©n cuando se ha indicado una estructura del tipo de datos PLC,
STRUCT o ARRAY, por ejemplo. Si, p. ej., desea activar o desactivar 10 bits y la estructura
solo contiene 5 bits, se activar√°n o desactivar√°n tambi√©n los 5 bits siguientes del orden de
direcciones.
A partir de la versi√≥n V14, en estructuras del tipo de datos PLC, STRUCT o ARRAY se activan
como m√°ximo tantos bits como contiene la estructura: Si se indica el valor "20", por ejemplo,
y la estructura solo contiene 10 bits, solo se activar√°n esos 10 bits. Si se indica el valor "5", por
ejemplo, y la estructura contiene 10 bits, se activar√°n exactamente 5 bits.

Instrucciones "SCALE: Escalar" y "UNSCALE: Desescalar" (S7-1500)
El comportamiento de la instrucci√≥n ha cambiado en relaci√≥n a la indicaci√≥n de los valores
l√≠mite (LO_LIM > HI_LIM) del TIA Portal V13 SP1 respecto del TIA Portal V14.
En la versi√≥n V13 SP1 se obten√≠a un mensaje de error si el valor l√≠mite inferior era mayor que
el superior.
A partir de la versi√≥n V14 esta entrada s√≠ que est√° permitida y el resultado se escala invertido
y proporcional al valor de entrada.

58

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC
En las CPU de las series S7-300/400 la instrucci√≥n siempre ha escalado el resultado invertido
y proporcional al valor de entrada.

Bits no utilizados de tipos de datos PLC (UDT) para firmware >= V1.8.1
Los bits no utilizados de tipos de datos PLC en √°reas de memoria est√°ndar se asignan o
sobrescriben, p. ej. en un tipo de datos PLC que contiene 4 bits.
En las versiones de firmware anteriores a V1.8.1 no era posible dar otro uso a los bits no
utilizados de un tipo de datos PLC.
En las versiones de firmware V1.8.1 y posteriores se asignan o sobrescriben todos los bits,
incluso aunque solo se utilicen 4 bits.
Nota
Asignaciones de direcciones
Preste atenci√≥n a que los diferentes direccionamientos simb√≥licos no asignen dos veces la
misma direcci√≥n absoluta.

Conversi√≥n expl√≠cita de tipos de datos en SCL (S7-1200) para firmware >= V4.2
Para versiones de firmware < V4.2, en la conversi√≥n expl√≠cita de datos en SCL de SINT/INT/
DINT/REAL_TO_STRING/WSTRING, la cadena de caracteres se transfiri√≥ alineada la
derecha y se rellen√≥ con espacios iniciales.
Ejemplo: REAL_TO_WSTRING(12) = ' 1.200000E+1'
A partir del TIA Portal V13, en la conversi√≥n expl√≠cita de datos en SCL de SINT/INT/DINT/
REAL_TO_STRING/WSTRING, la cadena de caracteres se representa con un signo
antepuesto y se transfiere alineada a la izquierda.
Ejemplo: REAL_TO_WSTRING(12) = '+1.200000E+1'

SCL: Mecanismo EN/ENO en par√°metros de bloque del tipo de datos (W)STRING (S7-1200/1500)
A partir de TIA Portal V14 se comprueba si los par√°metros de bloque del tipo de datos
(W)STRING se cortan en tiempo de ejecuci√≥n al transferir los par√°metros. Esto puede ocurrir
si los par√°metros formales y actuales declarados tienen longitudes diferentes. Si la longitud
declarada del par√°metro de destino no es suficiente en tiempo de ejecuci√≥n para incorporar el
(W)STRING, el (W)STRING queda cortado y la salida de habilitaci√≥n ENO se pone a "FALSE".
Si la salida de habilitaci√≥n ENO se eval√∫a en el programa, es posible que la sem√°ntica del
programa cambie.

Transmisi√≥n de par√°metros STRING entre bloques optimizados y bloques est√°ndar (S7-1200/1500)
Antes de TIA Portal V14, al transferir par√°metros entre bloques optimizados y no optimizados
no se transmit√≠a informaci√≥n de longitud de STRING al bloque llamado. De ese modo, al
procesar posteriormente el STRING se pod√≠an producir errores de acceso no detectados por
el mecanismo ENO. El mecanismo de habilitaci√≥n "ENO" permanec√≠a en "TRUE" a pesar del
error de acceso.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

59

STEP 7
2.5 Programaci√≥n del PLC
A partir de TIA Portal V14 se transmite la informaci√≥n de longitud de STRING y el mecanismo
ENO detecta los errores de acceso. Si la salida de habilitaci√≥n ENO se eval√∫a en el programa,
es posible que la sem√°ntica del programa cambie.

Declaraci√≥n de longitudes en constantes del tipo de datos "STRING" o "WSTRING"
En las constantes (W)STRING locales y globales no se permiten declaraciones de longitudes.
Si su programa contiene declaraciones de longitudes, p. ej., "MyStringConst [7]", se eliminan
autom√°ticamente al actualizar. De todas formas, este cambio no afecta a la sem√°ntica del
programa.

Cambio del tipo de datos b√°sico para HW_ANY de WORD a UINT
El tipo de datos de hardware "HW_ANY" permite identificar un componente de hardware
cualquiera, p. ej. de un m√≥dulo. En V14 el tipo de datos b√°sico de "HW_ANY" se cambi√≥ de
WORD a UINT. Por eso, tras la conversi√≥n a V14 pueden producirse errores durante la
compilaci√≥n si en un par√°metro del tipo de datos "HW_ANY" se ha indicado como valor actual
una constante WORD expl√≠cita (p. ej. W#16#1) o una variable del tipo de datos WORD.
En ese caso, cambie la notaci√≥n de la constante (p. ej. a 16#1) o cambie el tipo de datos de las
variables a UINT.

Longitud de comentarios de bloque
A partir de TIA Portal V14 los comentarios de bloque no deben superar una longitud de 32767
caracteres Unicode.

Comprobaci√≥n de sintaxis de las instrucciones "SR: Flipflop de activaci√≥n/desactivaci√≥n" y "RS: Flipflop
de desactivaci√≥n/activaci√≥n"
En la entrada "S" se pueden utilizar como operandos entradas, salidas, marcas y datos tanto
est√°ticos como locales. No se permite el uso de constantes. Sin embargo, hasta ahora la
comprobaci√≥n de sintaxis no rechazaba el uso de las constantes "0" y "1". A partir del TIA Portal
V14 se ha mejorado el an√°lisis sint√°ctico, de forma que ahora tambi√©n se rechaza el uso de "0"
o "1" en la entrada "S". Es posible que al compilar reciba ahora un mensaje de error para un
programa que hasta ahora se pod√≠a compilar sin errores. En este caso, cambie su programa
y utilice un operando permitido.

Puntero Any: acceso a datos optimizados
El puntero ANY solo debe apuntar a las √°reas de memoria con tipo de acceso "Est√°ndar",
incluso en una CPU de la serie S7-1500. No se permite el acceso a datos optimizados a trav√©s
de un puntero ANY.
A partir de TIA Portal V14 tiene lugar una comprobaci√≥n de sintaxis m√°s precisa para los
punteros ANY. Ahora se rechaza el acceso a datos optimizados. Es posible que al compilar
reciba ahora un mensaje de error para un programa que hasta ahora se pod√≠a compilar sin
errores.

60

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Tipo de datos "(L)REAL"
En determinadas ocasiones, en las versiones de Windows de 64 bits el tipo de datos LREAL
se eval√∫a de forma diferente que en las versiones de 32 bits. Pueden surgir diferencias al
redondear y con valores (L)Real de constantes en el bit menos significativo.
La posible diferencia est√° en la √∫ltima posici√≥n de la mantisa, por lo que en la mayor√≠a de casos
solo afectar√° m√≠nimamente a la precisi√≥n.
Si se eval√∫a la √∫ltima posici√≥n de la mantisa, la sem√°ntica del programa STEP 7 puede variar
tras la conversi√≥n.

Par√°metro "ST" con temporizadores CEI
El par√°metro "ST" de un temporizador CEI se utiliza internamente y no puede escribirse. Por
eso ese par√°metro ya no es visible a partir de TIA Portal V14. Si en el programa se accede en
modo de escritura al par√°metro "ST", tras actualizar la versi√≥n se muestra un mensaje de error
al compilar.
Si se sustituyen datos con ingenier√≠a interproyecto y se ha accedido al par√°metro "ST" con
HMI, primero hay que exportar el proyecto y volver a importarlo en la CPU proxy. Solo entonces
desaparecer√° el par√°metro "ST" en la configuraci√≥n HMI.

Valores asociados para avisos (S7-1500)
Los proyectos creados con una versi√≥n anterior del TIA Portal pueden contener valores
asociados incrustados con diferentes estructuras en los distintos idiomas del proyecto. Por
ejemplo, los valores asociados pueden tener un orden diferente o faltar en uno de los idiomas.
Al actualizar uno de estos proyectos se unifica el orden de los valores asociados. La
actualizaci√≥n se rige por el idioma de referencia configurado en el proyecto original. En tal caso
es recomendable revisar y corregir los textos traducidos.

Conversi√≥n de tipos de datos impl√≠cita en par√°metros de bloque del tipo de datos "DB_ANY"
Cuando se accede a un par√°metro de bloque del tipo de datos "DB_ANY" con la sintaxis
DB_ANY.%DB(B|W|D), hasta ahora no se llevaba a cabo ninguna conversi√≥n de tipos de datos
impl√≠cita. El patr√≥n de bits del valor de origen se desplazaba simplemente al tipo de datos de
destino. Si el tipo de datos de destino era menor que el de origen, se produc√≠a un
desbordamiento y pod√≠a suceder que el valor escrito fuera falso o impreciso. En caso de
p√©rdidas de precisi√≥n o errores en tiempo de ejecuci√≥n, la salida de habilitaci√≥n ENO no se
pon√≠a a "FALSE".
A partir de la V14, en caso de transferencia de par√°metros con la sintaxis DB_ANY.%DB(B|W|
D) se lleva a cabo una conversi√≥n conforme a las reglas de conversi√≥n de tipos de datos
impl√≠cita. Tenga en cuenta que esto puede provocar que tras actualizar la versi√≥n se escriba
un valor distinto y que la sem√°ntica del programa puede cambiar. Asimismo, cuando se
produce un error en tiempo de ejecuci√≥n, la salida de habilitaci√≥n ENO se pone a "FALSE".

L√©ame
Manual de programaci√≥n y manejo, 11/2019

61

STEP 7
2.5 Programaci√≥n del PLC

Interfaz de los bloques de organizaci√≥n con acceso est√°ndar
La interfaz de los bloques de organizaci√≥n con acceso est√°ndar debe tener por lo menos un
tama√±o de 20 bytes. En versiones anteriores del TIA Portal, durante el proceso de compilaci√≥n
solo se comprobaba el tama√±o m√≠nimo de la interfaz del OB1. A partir de V14 se comprueban
las interfaces de todos los bloques de organizaci√≥n. Es posible que al compilar reciba ahora un
mensaje de error para un programa que hasta ahora se pod√≠a compilar sin errores.

Comparaci√≥n de variables del tipo de datos WORD con variables del tipo de datos S5TIME (S7-1500)
A partir del TIA Portal V14, cuando se compara una variable del tipo de datos WORD con una
variable del tipo de datos S5TIME, ambas variables se convierten al tipo de datos TIME. La
variable WORD se interpreta como un valor S5TIME. En caso de que no fuera posible convertir
una de las dos variables, la comparaci√≥n no se realizar√° y el resultado ser√° FALSE. Si la
conversi√≥n es correcta, la comparaci√≥n se realizar√° en funci√≥n de la expresi√≥n de comparaci√≥n
seleccionada.

2.5.5.6

Compatibilidad de programas de PLC de versiones anteriores a la V13 SP1

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compatibilidad
En principio es posible seguir utilizando en V13 SP1 todos los programas de PLC que se hayan
creado con el TIA Portal V12 SP1 o V13. Sin embargo, puesto que en V13 SP1 se han
realizado algunas mejoras y se han solucionado errores del compilador (compilaci√≥n del
c√≥digo del programa), en unos pocos casos es posible que el programa tenga un
comportamiento distinto despu√©s de la actualizaci√≥n o que deba adaptarse manualmente el
c√≥digo del programa. A continuaci√≥n se describen estos casos con detalle.

Bits no utilizados de tipos de datos PLC (UDT) para firmware >= V1.8.1
Los bits no utilizados de tipos de datos PLC en √°reas de memoria est√°ndar se asignan o
sobrescriben, p. ej. en un tipo de datos PLC que contiene 4 bits.
En las versiones de firmware anteriores a V1.8.1 no era posible dar otro uso a los bits no
utilizados de un tipo de datos PLC.
En las versiones de firmware V1.8.1 y posteriores se asignan o sobrescriben todos los bits,
incluso aunque solo se utilicen 4 bits.
Nota
Asignaciones de direcciones
Preste atenci√≥n a que los diferentes direccionamientos simb√≥licos no asignen dos veces la
misma direcci√≥n absoluta.

62

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Conversi√≥n expl√≠cita de tipos de datos en SCL (S7-1200) para firmware >= V4.2
Para versiones de firmware < V4.2, en la conversi√≥n expl√≠cita de datos en SCL de SINT/INT/
DINT/REAL_TO_STRING/WSTRING, la cadena de caracteres se transfiri√≥ alineada la
derecha y se rellen√≥ con espacios iniciales.
Ejemplo: REAL_TO_WSTRING(12) = ' 1.200000E+1'
A partir del TIA Portal V13, en la conversi√≥n expl√≠cita de datos en SCL de SINT/INT/DINT/
REAL_TO_STRING/WSTRING, la cadena de caracteres se representa con un signo
antepuesto y se transfiere alineada a la izquierda.
Ejemplo: REAL_TO_WSTRING(12) = '+1.200000E+1'

Lectura de una entrada de periferia no v√°lida
En TIA Portal a partir de la versi√≥n V12 el c√≥digo de error 16#2942 para la lectura de una
entrada de periferia no v√°lida solo se emite si el acceso err√≥neo se ha programado de tal forma
que tambi√©n sea efectivo, p. ej. %MW10 := "AccesoPalabraNoV√°lida":P, y no se encuentre
dentro de una secuencia irrelevante. Esto ser√≠a p. ej. #tmp := "AccesoPalabraNoV√°lida":P, si
la variable #tmp no se utiliza en el bloque de programa restante.

Instrucci√≥n "S_CONV: Convertir cadena de caracteres"
En el TIA Portal V13 SP1, el mecanismo EN/ENO tiene un comportamiento distinto al del TIA
Portal V13.
En la versi√≥n V13, la salida de habilitaci√≥n ENO tiene el estado l√≥gico "0" en caso de error,
incluso si se ha desactivado. Si se ha conmutado otra instrucci√≥n en la salida de habilitaci√≥n
ENO, no se ejecutar√°.
En la versi√≥n V13 SP1, la salida de habilitaci√≥n ENO tiene el estado l√≥gico "1" en caso de error
si se ha desactivado. Si se ha conmutado otra instrucci√≥n en la salida de habilitaci√≥n ENO, se
ejecutar√° del modo previsto.

Instrucci√≥n "SET: Activar √°rea por bits" (S7-300/S7-400)
El TIA Portal permite interconectar tambi√©n un elemento de un bloque de datos en el par√°metro
N de la instrucci√≥n SET.

Instrucci√≥n "MUX: Multiplexar" (SCL)
Hasta el TIA Portal V13 inclusive, el valor de las variables en el par√°metro de entrada se emit√≠a
sin cambios como valor de funci√≥n, incluso si el par√°metro K ten√≠a un entero negativo. Este
comportamiento ha cambiado en el TIA Portal V13 SP1.
Si en TIA Portal V13 SP1, en los par√°metros de entrada de la instrucci√≥n MUX, se indica una
variable con un tipo de datos v√°lido y el par√°metro K tiene un entero negativo, el valor de la
variable se modifica. Encontrar√° los tipos de datos v√°lidos en la descripci√≥n de la instrucci√≥n
MUX que se incluye en el sistema de informaci√≥n.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

63

STEP 7
2.5 Programaci√≥n del PLC

Instrucci√≥n "DEMUX: Desmultiplexar" (SCL)
Hasta el TIA Portal V13 inclusive, en el par√°metro de salida OUTELSE no se emit√≠a ning√∫n
valor si el valor del par√°metro K era < 0. En cambio, en el par√°metro de salida OUTELSE se
emit√≠a el valor del par√°metro de entrada IN cuando el valor del par√°metro K era > a las salidas
disponibles. Este comportamiento ha cambiado en el TIA Portal V13 SP1.
Si en el TIA Portal V13 SP1 no se indica ning√∫n valor en el par√°metro K que est√© fuera de las
salidas disponibles (K < 0 o K > salidas disponibles), en el par√°metro de salida OUTELSE se
emitir√° el valor del par√°metro de entrada IN.

Instrucci√≥n "MOVE: Copiar valor" (AWL) (S7-1500)
A partir del TIA Portal V13 SP1, la regla de sintaxis para la instrucci√≥n "MOVE" en AWL es m√°s
estricta:
Hasta el TIA Portal V13 inclusive, era posible indicar las constantes sin tipo, p. ej., "0", en el
par√°metro de entrada IN.
Si en el TIA Portal V13 SP1 se quiere copiar el valor "0", por ejemplo, ahora debe indicarse una
constante con tipo, seg√∫n el tipo de datos del par√°metro de salida (p. ej., INT#0, DINT#0, etc.).

Instrucci√≥n "Program_Alarm: Crear aviso de programa con valores asociados" (S7-1500)
A partir de TIA Portal V13 SP1 el tipo de datos INT ya no puede utilizarse para los valores
asociados o para una variable de indexaci√≥n de una lista de textos. En su lugar, utilice el tipo
de datos UNIT.

Instrucciones "READ_DBL: Leer en un bloque de datos de la memoria de carga" y "WRIT_DBL: Escribir
en un bloque de datos de la memoria de carga"
El TIA Portal V13 SP1 notifica un error de compilaci√≥n si se utiliza "READ_DBL" V1.0 o
"WRIT_DBL" V1.0 y se accede a un bloque de datos con el atributo "Guardar solo en memoria
de carga" con el par√°metro DSTBLK.
En su lugar, utilice la versi√≥n 1.2 de ambas instrucciones.

Instrucciones "READ_DBL: Leer de un bloque de datos de la memoria de carga" y "WRIT_DBL: Escribir
en un bloque de datos de la memoria de carga" (SCL)
A partir de TIA Portal V13 SP1, en las instrucciones "READ_DBL" y "WRIT_DBL" de SCL rige
la misma regla sint√°ctica estricta, igual que en todos los lenguajes de programaci√≥n restantes:
En el TIA Portal V13 era posible indicar en los par√°metros SRCBLK y DSTBLK bloques de
datos "est√°ndar" cuyas variables ten√≠an tipos de datos diferentes.
A partir de TIA Portal V13 SP1 las diferentes variables contenidas, tanto en bloques "est√°ndar"
como "optimizados", tienen que tener el mismo tipo de datos, dado que de lo contrario se emite
un error de compilaci√≥n.

64

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Valores de funci√≥n (Return)
A partir del TIA Portal V13 SP1, las reglas de sintaxis para llamadas de funci√≥n son m√°s
estrictas:
Se comprueba que el valor de funci√≥n (Return) se escriba en todos los casos, aunque puedan
ejecutarse varias rutas de programa posibles en la funci√≥n, p. ej. en caso de utilizar comandos
de salto o bucles IF. De este modo ya no hay peligro de que dejen de escribirse valores de
funci√≥n por descuido durante el tiempo de ejecuci√≥n.
Sin embargo, es posible que durante la compilaci√≥n se reciban errores de sintaxis en funciones
que con V13 pod√≠an compilarse correctamente. En ese caso debe cambiarse el c√≥digo del
programa para que el valor de funci√≥n se escriba en todas las rutas del programa posibles.
Ejemplo:
SCL
IF #MyIn1 = #MyIn2 THEN
#Block_3 := #MyIn1 + 1;
END_IF;

En este ejemplo, el valor de funci√≥n de "Block_3" no se escribe si no se cumple la condici√≥n de
la instrucci√≥n IF. El valor de funci√≥n contiene entonces un valor indefinido.
SCL
#Block_3 := #MyIn1;
IF #MyIn1 = #MyIn2 THEN
#Block_3 := #MyIn1 + 1;
END_IF;

En este ejemplo, el valor de funci√≥n de "Block_3" se escribe siempre, puesto que est√°
predefinido con "MyIn1" antes de ejecutar el bucle IF.

Comparaci√≥n de los dos tipos de datos de hardware HW_IO y HW_DEVICE
A partir del TIA Portal V13 SP1, se aplica una regla de sintaxis m√°s estricta en la comparaci√≥n
de los tipos de datos HW_IO y HW_DEVICE:
Hasta la versi√≥n TIA Portal V13 inclusive era posible comparar directamente los dos tipos de
datos HW_IO y HW_DEVICE.
Si desea comparar los dos tipos de datos en el TIA Portal V13 SP1, primero deber√° crear una
variable del tipo HW_ANY en la secci√≥n "Temp" de la interfaz del bloque y despu√©s copiar el
LADDR (del tipo HW_DEVICE) en la variable. A continuaci√≥n se puede comparar HW_ANY y
HW_IO.

Conversi√≥n impl√≠cita de n√∫meros en coma flotante a DWORD (GRAPH) (S7-1500)
A partir del TIA Portal V13 SP1, las reglas de sintaxis para la conversi√≥n impl√≠cita de n√∫meros
en coma flotante a DWORD son m√°s estrictas:
Hasta el TIA Portal V13 inclusive, una constante sin tipo (p. ej., 1.0) pod√≠a convertirse de
manera impl√≠cita al tipo de datos DWORD si el valor era menor que 32 bits.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

65

STEP 7
2.5 Programaci√≥n del PLC
Si en el TIA Portal V13 SP1 se quiere convertir impl√≠citamente un n√∫mero en coma flotante al
tipo de datos DWORD, tan solo pueden utilizarse constantes con tipo (p. ej., REAL#1.0), ya
que una constante sin tipo (p. ej., 1.0) se interpreta como tipo de datos LREAL y, por tanto, ya
no puede convertirse impl√≠citamente a DWORD.

Asignaci√≥n de un valor a una constante LTIME (S7-1500)
A partir del TIA Portal V13 SP1, se aplica una regla de sintaxis m√°s estricta para definir un valor
para una constante LTIME:
Hasta la versi√≥n TIA Portal V13 inclusive, era posible asignar un valor TIME (p. ej. T#10s) a una
constante LTIME.
Para asignar un valor a una constante LTIME en TIA Portal V13 SP1 es preciso utilizar una
sintaxis LTIME (p. ej. LT#10s).
Tenga en cuenta que los proyectos de TIA Portal de versiones anteriores deben adaptarse
antes de actualizar a la versi√≥n TIA Portal V13 SP1.

Indexaci√≥n indirecta de componentes ARRAY del tipo de datos Secuencia de bits en SCL (S7-1200/
S7-1500)
Dentro del TIA Portal V13, en SCL existe la posibilidad de indicar una variable del tipo de datos
BYTE, WORD, DWORD o LWORD como √≠ndice adem√°s de una variable del tipo de datos
Entero para el direccionamiento de los componentes de un ARRAY en una CPU de las series
S7-1200/1500, siempre que la verificaci√≥n CEI no est√© ajustada. Eso no es posible en una CPU
de las series S7-300/400.
Eso provoca una incompatibilidad con respecto al TIA Portal V12 SP1, ya que en √©l tambi√©n
est√° permitida la indexaci√≥n indirecta con el tipo de datos Secuencia de bits en una CPU de las
series S7-300/400.

Mecanismo EN/ENO en conversiones de STRING (S7-1200/S7-1500)
Conversi√≥n

Significado

Strg_TO_Chars: Convertir cadena de caracteres
en Array of CHAR

La salida de habilitaci√≥n ENO tiene el estado l√≥gi‚Äê
co "0" incluso si se ha desactivado:
‚óè cuando hay un car√°cter no v√°lido en el
par√°metro CHARS
‚óè cuando hay un √≠ndice de ARRAY no v√°lido en
el par√°metro PCHARS
‚óè si la suma de los par√°metros PCHARS y STRG
excede la longitud del ARRAY de destino.

Chars_TO_Strg: Convertir Array of CHAR en ca‚Äê
dena de caracteres

La salida de habilitaci√≥n ENO tiene el estado l√≥gi‚Äê
co "0" incluso si se ha desactivado:
‚óè si la suma de los par√°metros PCHARS y CNT
excede la longitud del ARRAY de origen.

66

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.5 Programaci√≥n del PLC

Rebase por exceso de la pila de datos locales (S7-300/S7-400)
A partir del TIA Portal V13 SP1 se comprueba si se rebasa por exceso el tama√±o de la pila de
datos locales definida en la configuraci√≥n hardware para las prioridades de OB.
Con ello, es posible que durante la compilaci√≥n se reciban mensajes de error en proyectos que
con V13 pod√≠an compilarse correctamente. En este caso, debe cambiarse el tama√±o m√°ximo
de la pila de datos locales en la configuraci√≥n hardware.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

67

STEP 7
2.6 Inter Project Engineering (IPE)

2.6

Inter Project Engineering (IPE)

2.6.1

Indicaciones relativas a IPE

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Utilizar el diagn√≥stico del sistema en el proxy de dispositivos
Para poder utilizar la funci√≥n "Diagn√≥stico del sistema" en un proxy de dispositivos IPE, p. ej.
un visor de diagn√≥stico del sistema, inserte los "Avisos PLC" como contenido de un proxy de
dispositivos.

Conexiones con el controlador por software SIMATIC S7-1500
Las conexiones con el controlador por software SIMATIC S7-1500 como proxy de dispositivo
√∫nicamente son posibles a trav√©s de las interfaces asignadas al PLC de software.

Soporte de avisos Alarm_S
La funcionalidad Configuraci√≥n integrada con WinCC y SIMATIC Manager soporta los avisos
Alarm_S, a los que puede accederse mediante bloques de datos y Continuous Function Chart
(CFC).

Compatibilidad
Con TIA Portal V15.1 se pueden abrir los archivos IPE de la misma versi√≥n y de versiones
anteriores a partir de V13 SP1.
Los archivos IPE creados con TIA Portal versi√≥n V15.1 no pueden abrirse con versiones
anteriores.

68

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.7 Funciones tecnol√≥gicas

2.7

Funciones tecnol√≥gicas

2.7.1

Notas sobre S7-1500 Motion Control

Alarmas tecnol√≥gicas 900-902
A diferencia del comportamiento descrito en la documentaci√≥n, en las alarmas tecnol√≥gicas
900 y 901, como reacci√≥n a la alarma se detecta como no v√°lido el valor conductor recibido. La
alarma tecnol√≥gica 902 no contiene reacci√≥n.
Las alarmas tecnol√≥gicas 900 y 901 se indican en el b√∫fer de diagn√≥stico.
N.¬∫

Reacci√≥n

Bit de
error

Bit de ad‚Äê
vertencia

Reinicio

B√∫fer de
diagn√≥sti‚Äê
co

900 Ajustar valor conductor como
no v√°lido

X2

-

-

X

Valores conductores no v√°lidos.

901 Ajustar valor conductor como
no v√°lido

X2

-

-

X

Error de transferencia de datos.

-

X2

-

-

Precisi√≥n limitada del valor conductor.

902 Ninguna reacci√≥n

Texto de alarma

La alarma tecnol√≥gica 900 se puede confirmar con una orden "MC_Reset" con
"Restart" = FALSE. No es necesario reiniciar.
La alarma tecnol√≥gica 900 se indica con el siguiente texto de alarma:
Texto de alarma

Soluci√≥n

Valores conductores no v√°lidos.

Ajuste un tiempo de tolerancia mayor (<TO>.Parameter.ToleranceTimeExternalLea‚Äê
dingValueInvalid).
Compruebe la conexi√≥n de los componentes interconectados. Aseg√∫rese de que no
hay fallos de comunicaci√≥n.
Aseg√∫rese de que las CPU implicadas se encuentran en estado operativo RUN.

La alarma tecnol√≥gica 901 se indica con el siguiente texto de alarma:
Texto de alarma

Soluci√≥n

Error de transferencia de datos.
Versi√≥n no v√°lida

Compruebe la comunicaci√≥n.

Valor inicial de m√≥dulo no v√°lido
Longitud de m√≥dulo no v√°lida
Error de se√±al de vida
Posici√≥n no v√°lida

Compruebe el valor conductor del eje conductor de la otra CPU.

Velocidad no v√°lida
Aceleraci√≥n no v√°lida

L√©ame
Manual de programaci√≥n y manejo, 11/2019

69

STEP 7
2.7 Funciones tecnol√≥gicas

Convertir proyectos a la versi√≥n TIA Portal V16
Debido a los cambios del formato de almacenamiento de proyectos en la versi√≥n TIA Portal
V16 es necesario convertir los proyectos existentes. Dependiendo del tama√±o del proyecto, la
conversi√≥n puede requerir mucho tiempo. El tiempo total de conversi√≥n puede requerir entre
varios minutos y hasta m√°s de una hora.

Comportamiento del contador de ciclos de m√≥dulo en el referenciado con "MC_Home"
A diferencia del comportamiento descrito en la documentaci√≥n, el contador de ciclos de
m√≥dulo se comporta en el referenciado relativo directo con "Mode" = 1, 12 y en el reajuste del
enc√≥der absoluto (relativo) con "Mode" = 6 como en el referenciado absoluto directo
"Mode" = 0. Los valores del contador de ciclos de m√≥dulo cambian en el referenciado y en el
reajuste del enc√≥der absoluto con los modos mencionados como se indica a continuaci√≥n:
Acci√≥n

Descripci√≥n

Reajuste del enc√≥der absoluto con
"Mode" = 6

Como valor de m√≥dulo se calcula la distancia m√°s corta entre la posici√≥n actual y la
nueva. En funci√≥n de la distancia, el contador de ciclos de m√≥dulo puede permanecer
tal cual, aumentar en 1 o disminuir en 1.

Referenciado directo relativo con
"Mode" = 1, 12

Como valor de m√≥dulo se calcula la distancia m√°s corta entre la posici√≥n actual y la
nueva. En funci√≥n de la distancia, el contador de ciclos de m√≥dulo puede permanecer
tal cual, aumentar en 1 o disminuir en 1.

Uso del tipo de datos "DX_TEL_SyncOp" con sincronismo de varios PLC
Para el sincronismo de varios PLC se crean variables Output e Input con el tipo de datos
"DX_TEL_SyncOp" en las direcciones iniciales del √°rea de transferencia. Si no se puede
asignar el tipo de datos "DX_TEL_SyncOp", significa que se borr√≥ durante la √∫ltima
compilaci√≥n.
Los tipos de datos no utilizados se borran durante la compilaci√≥n. Para restablecer el tipo de
datos "DX_TEL_SyncOp", agregue un TO V5.0. Despu√©s de utilizar el tipo de datos en la
variable PLC puede borrarse el objeto tecnol√≥gico.

Configuraci√≥n manual de los tiempos de deceleraci√≥n en el eje conductor y en el eje conducido virtual
Si se aumenta el tiempo de deceleraci√≥n del eje conductor en la configuraci√≥n del eje
conductor, se reducir√° el tiempo de extrapolaci√≥n en el sustituto del eje conductor o aumentar√°
el tiempo de interpolaci√≥n del valor conductor distribuido en el sustituto del eje conductor. El
error que se produce en la extrapolaci√≥n en las fases de aceleraci√≥n y deceleraci√≥n del valor
conductor se reduce en consecuencia.
Si aumenta el tiempo de deceleraci√≥n en el sustituto del eje conductor, aumentar√° el tiempo de
extrapolaci√≥n o se reducir√° el tiempo de interpolaci√≥n.

70

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.7 Funciones tecnol√≥gicas

C√°lculo del error de seguimiento
El error de seguimiento es la diferencia entre la consigna de posici√≥n y la posici√≥n real referida
a la conexi√≥n del eje en el accionamiento. A diferencia del comportamiento descrito en la
documentaci√≥n, los tiempos de transferencia de la consigna desde el controlador hasta el
accionamiento y del valor real de posici√≥n desde el accionamiento al controlador no forman
parte del error de seguimiento. Por consiguiente, el valor del error de seguimiento no es igual
a la diferencia de la consigna de posici√≥n del controlador menos la posici√≥n real existente.

Rendimiento de la transformaci√≥n de usuario con adaptaci√≥n din√°mica (S7-1500)
Con la versi√≥n tecnol√≥gica V5.0 se alargan los tiempos de ejecuci√≥n del MC-Interpolator
[OB92] en la transformaci√≥n de usuario. Los tiempos de ejecuci√≥n m√°s largos del MCInterpolator [OB92] alargan a su vez los tiempos de ejecuci√≥n de los bloques de organizaci√≥n
de menor prioridad.

El ancho de banda de la CPU est√° limitado para los registros con el Trace de la cinem√°tica (S7-1500T)
Cuando se excede el ancho de banda m√°ximo no pueden registrarse ni evaluarse todas las
se√±ales de un registro con el Trace de la cinem√°tica.
Tenga en cuenta los l√≠mites del sistema de la CPU (m√°x. 16 se√±ales).
Para los distintos objetos se requieren las siguientes se√±ales:
Objeto

Se√±ales utilizadas

TCP y cinem√°tica (depende de la cinem√°tica)

4-8

TCP (depende de la cinem√°tica)

2-4

OCS 1 (depende de la cinem√°tica)

2-6

OCS 2 (depende de la cinem√°tica)

2-6

OCS 3 (depende de la cinem√°tica)

2-6

Desactive las se√±ales activas en "Objeto tecnol√≥gico > Trace de la cinem√°tica > Configuraci√≥n
> Registros".

Suavizar la transici√≥n entre movimientos de la trayectoria y movimientos "punto a punto" s√≠ncronos
(movimientos sPTP) (S7-1500T)
Si suaviza la transici√≥n de un movimiento de la trayectoria a un movimiento sPTP, puede
suceder que no se suavice la transici√≥n o que el segmento correspondiente se reduzca
notablemente.
Si suaviza la transici√≥n de movimientos de trayectoria y movimientos sPTP, ajuste una
din√°mica de la trayectoria lo m√°s elevada posible:
‚óè Tir√≥n
‚óè Aceleraci√≥n

L√©ame
Manual de programaci√≥n y manejo, 11/2019

71

STEP 7
2.7 Funciones tecnol√≥gicas

Modificaci√≥n del multiplicador (override) en movimientos "punto a punto" s√≠ncronos (movimiento sPTP)
(S7-1500T)
En caso de modificar el multiplicador (override) puede verse alterado el desarrollo del
movimiento del punto de operaci√≥n de la herramienta (TCP) de un movimiento sPTP.
Si debe conservarse el contorno del movimiento del TCP, desplace la cinem√°tica cambiando
m√≠nimamente el multiplicador.

Suavizar la transici√≥n en movimientos de la cinem√°tica (S7-1500T)
Al suavizar la transici√≥n puede aumentar excesivamente la din√°mica en los ejes de la
cinem√°tica.

Uso de la instrucci√≥n "MC_TrackConveyorBelt" de Motion Control con la versi√≥n tecnol√≥gica V5.0
(S7-1500T)
La instrucci√≥n "MC_TrackConveyorBelt" de Motion Control no se puede utilizar con la versi√≥n
tecnol√≥gica V5.0.

2.7.2

Notas sobre funciones tecnol√≥gicas adicionales

Par√°metros de los objetos tecnol√≥gicos de TIA Portal Openness
Encontrar√° una lista de los par√°metros de los objetos tecnol√≥gicos disponibles en la
informaci√≥n del producto "Par√°metros de los objetos tecnol√≥gicos de TIA Portal Openness" en
Internet (https://support.industry.siemens.com/cs/ww/es/view/109744932).

S_USSI a S7‚Äë1500
Tenga en cuenta lo siguiente si utiliza la instrucci√≥n S_USSI de la periferia descentralizada
ET 200S 1SI en un S7‚Äë1500.
El par√°metro ANZ indica el valor 0 tambi√©n en caso de error.
Si la CPU es conmutada a STOP por la instrucci√≥n S_USSI, compruebe todos los errores
posibles listados en el par√°metro ANZ.

72

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.7 Funciones tecnol√≥gicas

M√≥dulos PaP con CM 1243-5 maestro PROFIBUS
Si se utilizan los m√≥dulos PaP CM PtP RS232 BA, CM PtP RS422/485 BA, CM PtP RS232 HF,
CM PtP RS422/485 HF y CM PtP con un CM 1243-5 maestro PROFIBUS y un firmware ‚â§
V1.3.4, deber√°n realizarse los siguientes ajustes en el DB de instancia de las instrucciones:
‚óè Send_P2P
max_record_len = 240
‚óè Modbus_Master
Send_P2P.max_record_len = 240
‚óè Modbus_Slave
Send_P2P.max_record_len = 240

PID_Temp en la CPU 1500 V1.7
Si utiliza PID_Temp en una CPU 1500 con la versi√≥n de firmware V1.7, tenga en cuenta lo
siguiente:
‚óè La zona muerta integrada en PID_Temp no debe emplearse en la CPU 1500 V1.7.
No modifique el ajuste predeterminado 0.0 de los par√°metros
Retain.CtrlParams.Heat.DeadZone y Retain.CtrlParams.Cool.DeadZone
correspondientes.
‚óè Si en un regulador con refrigeraci√≥n activada y conmutaci√≥n de par√°metros PID
(Config.ActivateCooling = TRUE, Config.AdvancedCooling = TRUE) est√° activada la salida
de refrigeraci√≥n (PidOutputSum < 0.0, OutputCool <> 0.0) mientras se inicia una
"optimizaci√≥n inicial para refrigeraci√≥n" (Mode = 1, Heat.EnableTuning = FALSE,
Cool.EnableTuning = TRUE), esta se interrumpe con el error ErrorBits = 16#0040_0000.
‚Äì En ese caso, utilice la "optimizaci√≥n fina para refrigeraci√≥n" (Mode = 2,
Heat.EnableTuning = FALSE, Cool.EnableTuning = TRUE)
o bien
‚Äì antes de iniciar la optimizaci√≥n inicial, cambie al modo manual con un valor manual
superior a 0.0 (Mode = 4, ManualValue ‚â• 0.0).
Ambas restricciones desaparecen a partir de la versi√≥n de firmware V1.8.

2.7.3

Indicaciones sobre las funciones tecnol√≥gicas

Aplicar autom√°ticamente los valores del accionamiento o del enc√≥der durante la configuraci√≥n (offline)
Al integrar un SINAMICS V90 PROFINET utilizando un HSP no se aplican autom√°ticamente
todos los par√°metros de configuraci√≥n. Desactive la opci√≥n "Aplicar autom√°ticamente los
valores del accionamiento durante la configuraci√≥n (offline)" y aplique manualmente los
par√°metros de configuraci√≥n del accionamiento y del enc√≥der en la configuraci√≥n del objeto
tecnol√≥gico.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

73

STEP 7
2.7 Funciones tecnol√≥gicas

ErrorID 16#820D
ErrorID

ErrorInfo

16#820D

Descripci√≥n

Soluci√≥n

El TO est√° reiniciando
16#0001

-

Confirmar error con la instrucci√≥n "MC_Reset" y reiniciar la
orden, si es necesario

M√≥dulos PaP con CM 1243-5 maestro PROFIBUS
Si se utilizan los m√≥dulos PtP CM PtP RS232 BA, CM PtP RS422/485 BA, CM PtP RS232 HF,
CM PtP RS422/485 HF y CM PtP con un CM 1243-5 maestro PROFIBUS y un firmware ‚â§
V1.3.4, deber√°n realizarse los siguientes ajustes en el DB de instancia de las instrucciones:
‚óè Send_P2P
max_record_len = 240
‚óè Modbus_Master
Send_P2P.max_record_len = 240
‚óè Modbus_Slave
Send_P2P.max_record_len = 240

2.7.4

Indicaciones sobre las funciones tecnol√≥gicas

Par√°metrizaci√≥n FM x51 y FM x52
Contrariamente a lo indicado en la ayuda en pantalla, en caso de modificar el sistema de
medida los valores ya introducidos de los par√°metros no se convierten al nuevo sistema de
medida.

Programaci√≥n FM x50-1, FM x51 y FM x52
Los "valores iniciales" contenidos en las tablas de par√°metros que figuran en la ayuda en
pantalla de las instrucciones equivalen al "valor predeterminado" que se indica en la interfaz
del programa de usuario.

Migraci√≥n IM 174
Al migrar proyectos con IM 174, la parametrizaci√≥n del IM 174 se ajusta a los valores
predeterminados. El IM 174 debe reparametrizarse en cualquier caso despu√©s de la migraci√≥n.

2.7.5

SIMATIC STEP 7 Easy Motion Control

2.7.5.1

Indicaciones relativas a SIMATIC STEP 7 Easy Motion Control
No hay indicaciones relativas a SIMATIC STEP 7 Easy Motion Control.

74

L√©ame
Manual de programaci√≥n y manejo, 11/2019

STEP 7
2.7 Funciones tecnol√≥gicas

2.7.6

SIMATIC STEP 7 PID Professional

2.7.6.1

Indicaciones relativas a SIMATIC STEP 7 PID Professional
No hay indicaciones relativas a SIMATIC STEP 7 PID Professional.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

75

STEP 7
2.7 Funciones tecnol√≥gicas

76

L√©ame
Manual de programaci√≥n y manejo, 11/2019

3

WinCC
3.1

Indicaciones de seguridad

Informaci√≥n de seguridad
Siemens suministra productos y soluciones con funciones de seguridad industrial con el
objetivo de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral que sea conforme a la tecnolog√≠a m√°s avanzada. Los productos y las
soluciones de Siemens constituyen √∫nicamente una parte de este concepto.
El cliente es responsable de impedir el acceso no autorizado a sus instalaciones, sistemas,
m√°quinas y redes. Los sistemas, las m√°quinas y los componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej., uso de
cortafuegos y segmentaci√≥n de la red).
Adicionalmente, deber√°n observarse las recomendaciones de Siemens en cuanto a las
medidas de protecci√≥n correspondientes. Encontrar√° m√°s informaci√≥n sobre seguridad
industrial en
http://www.siemens.com/industrialsecurity (http://www.industry.siemens.com/topics/
global/en/industrial-security/Pages/Default.aspx)
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de mejorar todav√≠a m√°s su seguridad. Siemens recomienda expresamente realizar
actualizaciones en cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los
productos. El uso de versiones anteriores o que ya no se soportan puede aumentar el riesgo
de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en:
http://www.siemens.com/industrialsecurity (http://www.industry.siemens.com/topics/
global/en/industrial-security/Pages/Default.aspx)

Contrase√±as
En WinCC hay preajustadas varias contrase√±as. Por motivos de seguridad es necesario
cambiar estas contrase√±as.
‚óè En los paneles de operador de la versi√≥n 12 est√° preajustada la clave "100" para el
Sm@rtServer y el servidor web integrado. En los paneles de operador de la versi√≥n 13 o
superior no hay ninguna contrase√±a preajustada.
‚óè Para el usuario "Administrador" est√° preajustada la contrase√±a "administrator".

L√©ame
Manual de programaci√≥n y manejo, 11/2019

77

WinCC
3.1 Indicaciones de seguridad

Servidor web integrado
Desde un PC se puede acceder en runtime a las p√°ginas HTML, aunque est√© desactivada la
opci√≥n "P√°ginas HTML". Durante la instalaci√≥n se depositan en el PC siempre las p√°ginas
est√°ndar del servidor web. Asigne una contrase√±a de administrador que impida el acceso no
autorizado a las p√°ginas.

Comunicaci√≥n v√≠a Ethernet
En la comunicaci√≥n basada en Ethernet, el usuario final es el responsable de la seguridad de
su red de datos, ya que en intrusiones selectivas que provocan una sobrecarga del equipo, no
est√° garantizado el funcionamiento correcto de √©ste.

Uso de SSL 3.0
Por motivos de seguridad no se recomienda el uso del protocolo SSL 3.0 en Comfort Panels
ni en Runtime Advanced. En Comfort Panels, el uso del protocolo SSL 3.0 est√° desactivado por
defecto. Si a pesar de todo quisiera activar el uso de SSL 3.0, en Internet Explorer o en "Start
Center > Settings" seleccione "Internet Options > Advanced > Use SSL 3.0".
Para RT Advanced, el uso de SSL 3.0 se desactiva en Internet Explorer o mediante el panel de
control, en "Opciones de Internet > Opciones avanzadas" desactivando la opci√≥n "Usar SSL
3.0".

Ajustes de red
Las tablas siguientes muestran los ajustes de red de cada producto, necesarios para analizar
la seguridad de la red y la configuraci√≥n de cortafuegos externos:
WinCC Professional (sin simulaci√≥n)
Nombre

N√∫mero
Protocolo
Direcci√≥n
de puerto de transpor‚Äê
te

Funci√≥n

Descripci√≥n

ALM

4410*

TCP

Inbound,
Outbound

Servicio de li‚Äê
cencias

Este servicio pone a disposici√≥n todas las fun‚Äê
ciones para licencias de software, y se utiliza
tanto en el Automation License Manager como
en todos los productos de software sujetos a
licencias.

HMI Load

1033

TCP

Outbound

HMI Load (RT
Basic)

Este servicio se utiliza para transferir im√°ge‚Äê
nes y datos de configuraci√≥n a Basic Panels.

HMI Load

2308

TCP

Outbound

HMI Load
(RT Advanced)

Este servicio se utiliza para transferir im√°ge‚Äê
nes y datos de configuraci√≥n a paneles.

RPC

**

UDP

Inbound,
Outbound

Comunicaci√≥n
Este servicio es utilizado por WinCC Profes‚Äê
cliente/servidor sional y WinCC Runtime Professional.
& ES (CCAgent)

* Puerto est√°ndar, que el usuario puede cambiar mediante configuraci√≥n
** El puerto se asigna autom√°ticamente

78

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.1 Indicaciones de seguridad

WinCC Simulation para Basic Panels
Nombre

N√∫mero
Protocolo
Direcci√≥n
de puerto de transpor‚Äê
te

Funci√≥n

Descripci√≥n

HMI Load

1033

TCP

Inbound

HMI Load
(RT Basic)

Este servicio se utiliza para transferir im√°ge‚Äê
nes y datos de configuraci√≥n a Basic Panels.

EtherNet/IP

44818

TCP

Outbound

Ethernet/canal
IP

El protocolo Ethernet/IP se utiliza para cone‚Äê
xiones con todos los PLC Allen Bradley.

2222

UDP

Inbound

Ethernet/canal
IP

El protocolo Ethernet/IP se utiliza para cone‚Äê
xiones con todos los PLC Allen Bradley.

Modbus TCP

502

TCP

Outbound

Canal Modbus
TCP

El protocolo Modbus TCP se utiliza para cone‚Äê
xiones con PLC Schneider.

RFC 1006

102

TCP

Outbound

Canal S7

Comunicaci√≥n con el controlador S7 v√≠a Ether‚Äê
net/PROFINET

Mitsubishi MC

5002

TCP

Outbound

Canal Mitsubis‚Äê
hi MC

El protocolo Mitsubishi se utiliza para conexio‚Äê
nes con PLC Mitsubishi.

WinCC Simulation para Panels y Runtime Advanced
Nombre

N√∫mero
Protocolo
Direcci√≥n
de puerto de transpor‚Äê
te

Funci√≥n

Descripci√≥n

DCP

---

Ethernet

Outbound

PROFINET

El protocolo DCP (Discovery and basic Confi‚Äê
guration Protocol) se utiliza en PROFINET y es
la funci√≥n b√°sica para la localizaci√≥n y confi‚Äê
guraci√≥n de dispositivos PROFINET.

LLDP

---

Ethernet

Inbound,
Outbound

PROFINET

El protocolo LLDP (Link Layer Discover Proto‚Äê
col) es utilizado por PROFINET para el descu‚Äê
brimiento de topolog√≠a.

SMTP

25

TCP

Outbound

Comunicaci√≥n
SMTP

Este servicio es utilizado por WinCC Runtime
Advanced para enviar correos electr√≥nicos.

HTTP

80*

TCP

Inbound

HTTP Channel
Server

El servidor web solo est√° disponible si se activa
HTTP Channel Server o HTML pages. El puer‚Äê
to utilizado puede distinguirse por los ajustes
autom√°ticamente seleccionados.

HTML pages
RFC 1006

102

TCP

Outbound

Canal S7

Comunicaci√≥n con el controlador S7 v√≠a Ether‚Äê
net/PROFINET

NTP

123

UDP

Outbound

Sincronizaci√≥n
horaria

El protocolo NTP (Network Time Protocol) se
utiliza en redes basadas en IP para la sincro‚Äê
nizaci√≥n horaria.

SNMP

161

UDP

Outbound

PROFINET

STEP 7 utiliza la funcionalidad de cliente
SNMP para leer informaci√≥n de estado de dis‚Äê
positivos PROFINET.

HMI Load

2308

TCP

Outbound

HMI Load
(RT Advanced)

Este servicio se utiliza para transferir im√°ge‚Äê
nes y datos de configuraci√≥n a paneles.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

79

WinCC
3.1 Indicaciones de seguridad
WinCC Simulation para Panels y Runtime Advanced
HTTPS

443*

TCP

Inbound

HTTP Channel
Server
HTML pages

Servidor VNC

Cliente VNC

El servidor web con protocolo HTTPS solo est√°
disponible si se activa HTTP Channel Server o
HTML pages. El puerto utilizado puede distin‚Äê
guirse por los ajustes autom√°ticamente selec‚Äê
cionados.

5900*

TCP

Inbound

Sm@rtServer

Este servicio solo est√° disponible cuando se
activa Sm@rtService.

5800*

TCP

Inbound

Sm@rtServer

Este servicio solo est√° disponible cuando se
activa Sm@rtService.

5500

TCP

Outbound

Sm@rtServer

Este servicio solo est√° disponible cuando se
activa Sm@rtService.

* Puerto est√°ndar, que el usuario puede cambiar mediante configuraci√≥n

WinCC Simulation para Runtime Professional
Nombre

N√∫mero
Protocolo
Direcci√≥n
de puerto de transpor‚Äê
te

Funci√≥n

RPC

**

UDP

Inbound,
Outbound

Comunicaci√≥n
Este servicio es utilizado por WinCC Profes‚Äê
cliente/servidor sional y WinCC RT Professional.
& ES (CCAgent)

RPC

**

UDP

Inbound,
Outbound

Comunicaci√≥n
cliente/servidor
(CCEServer /
CCEClient)

Este servicio es utilizado por WinCC Runtime
Professional.

HTTP

80

TCP

Inbound,
Outbound

Comunicaci√≥n
cliente/servidor
(CCEServer /
CCEClient)

Este servicio es utilizado por WinCC Runtime
Professional.

RFC 1006

102

TCP

Outbound

Canal S7

Comunicaci√≥n con el controlador S7 v√≠a Ether‚Äê
net/PROFINET

OPC UA

4840

TCP

Inbound

OPC UA Server

Este servicio se necesita para la comunicaci√≥n
primaria v√≠a OPC UA. Se activa y configura
durante la instalaci√≥n.

OPC UA disco‚Äê
very

52601

TCP

Inbound

OPC UA Server

Este servicio proporciona informaci√≥n sobre
servidores OPC instalados. Se instala y confi‚Äê
gura mediante el servidor OPC UA.

DCOM

135

TCP

Inbound

OPC Server

Este servicio forma parte del sistema operativo
Windows. Dado que la comunicaci√≥n v√≠a OPC
(DA) est√° basada en DCOM, este servicio se
necesita para inicializar conexiones OPC (DA).

DCOM

**

TCP

Inbound

OPC Server

La comunicaci√≥n v√≠a OPC (DA) est√° basada
en DCOM y utiliza puertos no especificados y
asignados por el sistema. Esto deber√° tenerse
en cuenta al utilizar OPC (DA) y al crear reglas
para el cortafuegos.

HTTP

80

TCP

Inbound

OPC Server

Este servicio se necesita para la comunicaci√≥n
primaria v√≠a OPC XML. Se activa y configura
durante la instalaci√≥n.

80

Descripci√≥n

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.1 Indicaciones de seguridad
WinCC Simulation para Runtime Professional
NetBIOS

137

UDP

Inbound

OPC Server

Este servicio forma parte del sistema operativo
Windows. El acceso a este servicio se necesi‚Äê
ta, p. ej., para que OPC-Scout pueda navegar.

NetBIOS

138

UDP

Inbound

OPC Server

Este servicio forma parte del sistema operativo
Windows. El acceso a este servicio se necesi‚Äê
ta, p. ej., para que OPC-Scout pueda navegar.

SNMP

161

UDP

Outbound

SNMP OPC Ser‚Äê El servidor SNMP OPC utiliza este servicio pa‚Äê
ver
ra modificar o consultar datos en unidades de
red y dem√°s.

SNMP Traps

162

UDP

Inbound

SNMP OPC Ser‚Äê El servidor SNMP OPC utiliza este servicio pa‚Äê
ver
ra consultar eventos de unidades de red y de‚Äê
m√°s.

** El puerto se asigna autom√°ticamente

Protocolos PROFINET para Panels y Runtime Advanced
Nombre

N√∫mero
Protocolo
Direcci√≥n
de puerto de transpor‚Äê
te

DCP

---

Ethernet

Outbound

Funci√≥n

Descripci√≥n

LifeList,
PROFINET Dis‚Äê
covery and con‚Äê
figuration

El protocolo DCP (Discovery and basic Confi‚Äê
guration Protocol) se utiliza en PROFINET y es
la funci√≥n b√°sica para la localizaci√≥n y confi‚Äê
guraci√≥n de dispositivos PROFINET.

LLDP

---

Ethernet

Inbound,
Outbound

PROFINET Link
Layer Discovery
protocol

El protocolo LLDP (Link Layer Discover Proto‚Äê
col) es utilizado por PROFINET para el descu‚Äê
brimiento de topolog√≠a.

MRP

---

Ethernet

Outbound

PROFINET me‚Äê
dium redun‚Äê
dancy

El protocolo MRP (Medium Redundancy Pro‚Äê
tocol) permite el control de v√≠as de transmisi√≥n
redundantes mediante una topolog√≠a en anillo.

PROFINET IO
Data

---

Ethernet

Inbound,
Outbound

PROFINET
Cyclic IO data
transfer

Los Panels utilizan el intercambio c√≠clico de
datos para teclas directas y LED.

ARP

---

Ethernet

Inbound,
Outbound

Name Addres
Resolution

Este protocolo se utiliza para resolver nombres
de red y asignar direcciones IP.

UDP

Inbound,
Outbound

PROFINET con‚Äê El PROFINET Context Manager ofrece un ma‚Äê
nection less
peador de extremos (puntos finales) para es‚Äê
RPC
tablecer una relaci√≥n de aplicaci√≥n (PROFI‚Äê
NET AR).

PROFINET Con‚Äê 34964
text Manager

Enlaces de comunicaci√≥n para Panels y WinCC Runtime Advanced
Nombre

N√∫mero
Protocolo
Direcci√≥n
de puerto de transpor‚Äê
te

Funci√≥n

Descripci√≥n

Telnet

23

TCP

Inbound

Telnet

Este servicio puede utilizarse para manteni‚Äê
miento.

SMTP

25

TCP

Outbound

SendEMail

Este servicio es utilizado por Windows CE / PC
Runtime para enviar correos electr√≥nicos.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

81

WinCC
3.1 Indicaciones de seguridad
Enlaces de comunicaci√≥n para Panels y WinCC Runtime Advanced
HTTP

80*

TCP

Inbound

Hypertext
Transfer Proto‚Äê
col

El protocolo HTTP se utiliza para la comunica‚Äê
ci√≥n con el servidor web del HMI.

RFC 1006

102

TCP

Outbound

Canal S7

Comunicaci√≥n con el controlador S7 v√≠a Ether‚Äê
net/PROFINET.

NTP

123

UDP

Outbound

Sincronizaci√≥n
horaria

El protocolo NTP (Network Time Protocol) se
utiliza en redes basadas en IP para la sincro‚Äê
nizaci√≥n horaria.

DCOM***

135

TCP

Inbound

OPC Server

Este servicio forma parte del sistema operativo
Microsoft Windows. La comunicaci√≥n v√≠a OPC
(DA) est√° basada en DCOM. Por ello se nece‚Äê
sita este servicio para inicializar conexiones
OPC (DA).

DCOM***

**

TCP

Inbound

OPC Server

La comunicaci√≥n v√≠a OPC (DA) est√° basada en
DCOM y utiliza puertos no especificados y
asignados por el sistema. Esto deber√° tenerse
en cuenta al utilizar OPC (DA) y al crear reglas
para el firewall.

NetBIOS over
TCP/IP

137

UDP

Outbound

Usando Remote Inicio de sesi√≥n en un servidor remoto.
File Share

NetBIOS over
TCP/IP

138

UDP

Outbound

Usando Remote Inicio de sesi√≥n en un servidor remoto.
File Share

SNMP

161

UDP

Outbound

Simple Network
Management
Protocol

STEP 7 utiliza la funcionalidad de cliente
SNMP para leer informaci√≥n de estado de dis‚Äê
positivos PROFINET.

HTTPS

443*

TCP

Inbound

Secure Hyper‚Äê
text Transfer
Protocol

El protocolo HTTP se utiliza para la comunica‚Äê
ci√≥n con el servidor web del HMI v√≠a Secure
Socket Layer (SSL).

Modbus TCP

502*

TCP

Outbound

Canal Modbus
TCP

El protocolo Modbus TCP se utiliza para cone‚Äê
xiones con PLC Schneider.

Mitsubishi MC

1025*

TCP

Outbound

Canal Mitsubis‚Äê
hi MC

El protocolo Mitsubishi se utiliza para conexio‚Äê
nes con PLC Mitsubishi.

Printing

1032

TCP

Outbound

Printing

Impresi√≥n en el panel de mando (v√≠a Ethernet).

HMI Load

2308

TCP

Outbound

Transfer

Este servicio se utiliza para transferir im√°ge‚Äê
nes y datos de configuraci√≥n a paneles. En los
Comfort Panels a partir de la versi√≥n 13, este
servicio se sustituye por el DeviceManager y
SCS. Este servicio se utiliza para transferir da‚Äê
tos de configuraci√≥n a WinCC Runtime Advan‚Äê
ced.

HMI Load

50523

TCP

Outbound

Transfer

Este puerto se utiliza cuando no est√° disponi‚Äê
ble el puerto 2308.
Este servicio se utiliza para transferir im√°ge‚Äê
nes y datos de configuraci√≥n a paneles. En los
Comfort Panels a partir de la versi√≥n 13, este
servicio se sustituye por el DeviceManager y
SCS.
Este servicio se utiliza para transferir datos de
configuraci√≥n a WinCC Runtime Advanced.

82

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.1 Indicaciones de seguridad
Enlaces de comunicaci√≥n para Panels y WinCC Runtime Advanced
ALM

4410*

TCP

Inbound,
Outbound

Application Li‚Äê
cense Manager

Este servicio de RT Advanced pone a disposi‚Äê
ci√≥n todas las funciones para licencias de soft‚Äê
ware y se utiliza en el Automation License Ma‚Äê
nager.

OPC UA

4870*

TCP

Inbound

OPC UA Server

Este servicio se necesita para la comunicaci√≥n
v√≠a OPC UA.

HMI Load

5001

TCP

Outbound

Device Manager Este servicio se utiliza para transferir im√°ge‚Äê
nes y Runtime a paneles.

HMI Load

5002

TCP

Outbound

SCS (System
Configuration
Server)

Este servicio se utiliza para transferir datos de
configuraci√≥n a paneles.

Cliente VNC

5500

TCP

Outbound

Sm@rtServer

Conexi√≥n cliente VNC

Servidor VNC

5800*

TCP

Inbound

Sm@rtServer

Conexi√≥n HTTP servidor VNC

5900*

TCP

Inbound

Sm@rtServer

Conexi√≥n servidor VNC

16389*

TCP

Outbound

UMAC (User
Management
and Access
Control)

Inicio de sesi√≥n en un servidor remoto.

Allen Bradley Et‚Äê 44818
hernet/IP

TCP

Outbound

Ethernet/canal
IP

El protocolo Ethernet/IP se utiliza para cone‚Äê
xiones con todos los PLC Allen Bradley.

Reserved

TCP/UDP

Outbound

SIMATIC Logon

49152 ...
65535

El rango de puertos din√°mico se utiliza p. ej.
para la conexi√≥n al Remote File Sharing.

* Puerto est√°ndar, que el usuario puede cambiar mediante configuraci√≥n
** El puerto se asigna autom√°ticamente.
*** Soportado solo por WinCC Runtime Advanced.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

83

WinCC
3.2 Protecci√≥n de datos

3.2

Protecci√≥n de datos
Siemens observa los principios de la protecci√≥n de datos, especialmente los preceptos de la
minimizaci√≥n de datos (privacy by design). Para el presente producto SIMATIC, esto significa
que el producto no procesa ni guarda datos personales, simplemente datos t√©cnicos sobre las
funciones (p. ej. sello de tiempo). Si el usuario vincula estos datos con otros (p. ej. horarios de
turnos) o guarda datos personales en el mismo soporte (p. ej. disco duro) y establece con ello
una referencia personal, debe garantizar por cuenta propia las especificaciones legales sobre
la protecci√≥n de datos.

84

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.3 Indicaciones de uso

3.3

Indicaciones de uso

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Cambio de comportamiento tras la actualizaci√≥n
La nueva versi√≥n de WinCC contiene nuevas funciones y mejoras frente a la versi√≥n anterior.
Esto puede dar lugar a que las denominaciones o el comportamiento de propiedades y
funciones presenten peque√±as diferencias tras la actualizaci√≥n a la nueva versi√≥n. Tambi√©n
las propiedades est√°ndar de los objetos nuevos que se hayan creado pueden haber cambiado
con respecto a las versiones anteriores.
Estos cambios de comportamiento pueden dar lugar a errores al compilar el proyecto.

Ruta de instalaci√≥n
Si hab√≠a instalado la simulaci√≥n en una versi√≥n anterior, no podr√° cambiar la ruta de instalaci√≥n
durante la instalaci√≥n.

Trabajar con derechos de usuario est√°ndar
Para trabajar con derechos de usuario est√°ndar en Windows 7, el "control de cuentas de
usuario" (UAC) no debe estar desactivado.
El "control de cuentas de usuario" est√° activado de forma est√°ndar en Windows 7.
Encontrar√° m√°s informaci√≥n sobre el "control de cuentas de usuario" en la Ayuda en pantalla
de Windows 7.

Teclado de pantalla (RT Advanced)
Una vez abierto el TIA Portal ya no es posible acceder al teclado de pantalla.
Para acceder al teclado de pantalla en Windows, elija: "Inicio > Todos los programas >
Accesorios > Accesibilidad > Teclado en pantalla".

Cambio de dispositivo - Juegos de caracteres (RT Professional)
Si se han configurado distintos juegos de caracteres en los diferentes idiomas del proyecto en
los objetos de imagen para textos multiling√ºes, se deben comprobar las im√°genes tras cambiar
de un panel a un runtime basado en PC. Puede ocurrir que los juegos de caracteres
configurados se hayan modificado al cambiar de dispositivo.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

85

WinCC
3.3 Indicaciones de uso

Textos de la simulaci√≥n (RT Professional)
Si en la simulaci√≥n se utiliza un idioma runtime que no se corresponde con uno de los idiomas
de producto instalados, los textos del sistema se mostrar√°n en uno de los idiomas de producto
instalados. Dependiendo del sistema operativo y de los idiomas de producto instalados, se
trata de ingl√©s o chino.
Si en la simulaci√≥n desea ver todos los textos en japon√©s, coreano o taiwan√©s, primero deber√≠a
instalar WinCC sin simulaci√≥n. Seguidamente deber√° instalar WinCC Runtime Professional
con los idiomas requeridos.

Carga de modificaciones online con ciclos personalizados (RT Professional)
Si ha reconfigurado ciclos propios en el editor "Ciclos", al cargar el proyecto seleccione el
comando "Cargar > Software (compilar todo)". No es posible una carga de modificaciones
online.

Transferencia de licencia mediante S7USB
La transferencia de licencia a un panel mediante S7USB solo es posible desde WinCC.

Transferencia de licencias en un panel con sistemas operativos de 64 bits
Si en un sistema operativo de 64 bits no est√° disponible el comando de men√∫ "Edici√≥n >
Conectar sistema de destino > Conectar panel de operador" en el Automation License
Manager, abra la l√≠nea de comando y ejecute el comando siguiente con derechos de
administrador:
"%WINDIR%\system32\RegSvr32.exe" "%CommonProgramFiles%\siemens\AlmPanelPlugin
\ALMPanelParam.dll"

Juegos de caracteres PostScript
En el TIA Portal solo pueden utilizarse fuentes que contengan √∫nicamente datos TrueType.
Las fuentes PostScript y Open Type que contienen datos PostScript no se soportan.

Tareas con disparador de variable
Una tarea con disparador de variable se ejecuta cuando se escribe el valor de la variable
interna, incluso en el caso en que el valor de la variable interna no cambie.

86

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.4 Migraci√≥n

3.4

Migraci√≥n

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Migraci√≥n de un proyecto creado con WinCC V7
Para poder migrar un proyecto, es necesario que el proyecto se haya editado por lo menos con
WinCC V7.5 Update 3.

Migraci√≥n de un proyecto integrado con objetos ProTool
Si se migra un proyecto de WinCC flexible integrado en STEP 7 y aparece el mensaje de error
"Faltan paquetes opcionales PROTOOL en STEP 7", significa que tiene instalado WinCC
flexible 2008 SP3 o posterior. Adem√°s, el proyecto a√∫n contiene objetos que se han
configurado con ProTool. No abra el proyecto con WinCC flexible. Para migrar el proyecto,
proceda del siguiente modo:
1. Abra el proyecto en el SIMATIC Manager.
2. Ejecute el comando "Guardar como" del men√∫ "Archivo".
3. Active la opci√≥n "Con reorganizaci√≥n" en el cuadro de di√°logo "Guardar proyecto como".
4. Haga clic en Aceptar.
5. Copie el proyecto nuevamente en el equipo de origen.
6. Reinicie la migraci√≥n.

Indicador de progreso
Cuando el indicador de progreso muestra 100%, el software todav√≠a tiene que realizar algunos
trabajos residuales, como cerrar referencias, por ejemplo. Durante este tiempo, el software no
reaccionar√° a entradas en la interfaz de usuario.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

87

WinCC
3.5 Engineering System

3.5

Engineering System

3.5.1

Im√°genes y objetos de imagen

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Objetos de visualizaci√≥n tras cambiar de panel de operador
Tras actualizar un equipo con una nueva versi√≥n de panel de operador, se recomienda
comprobar las im√°genes contenidas en el proyecto. A causa del nuevo aspecto y de las
funciones de manejo mejoradas puede ocurrir, p. ej., que en los campos E/S simb√≥licos el texto
aparezca recortado u oculto por elementos de manejo.

Agrupaci√≥n de objetos de imagen
Si se agrupan objetos de imagen en WinCC, pueden surgir problemas de rendimiento en
WinCC si la profundidad de anidamiento es elevada.

Muchos objetos de imagen visualmente diferentes
El uso de objetos de imagen con muchas propiedades visualmente diferentes (p. ej., un gran
n√∫mero de estilos diferentes) puede reducir el rendimiento en runtime y aumentar el consumo
de memoria. Evite, p. ej., la proliferaci√≥n de redondeos de v√©rtices distintos: 0 p√≠xeles, 1 p√≠xel,
2 p√≠xeles, 3 p√≠xeles, etc.

Dinamizaci√≥n de objetos agrupados (RT Professional)
En caso de existir agrupaciones anidadas a varios niveles (grupo en grupo, faceplate en grupo,
grupo en faceplate, etc.), para la dinamizaci√≥n con funciones de sistema solo pueden utilizarse
los eventos del √∫ltimo grupo exterior y de los √∫ltimos objetos interiores. Las funciones de
sistema asociadas a eventos del grupo o del faceplate subordinado no se ejecutan.
La configuraci√≥n de la animaci√≥n de movimiento simult√°nea de un grupo de objetos y de
objetos dentro de ese grupo puede ejecutarse en runtime de modo distinto al esperado.
Compruebe el orden de ejecuci√≥n en runtime y modifique la configuraci√≥n si es necesario.

Dinamizaci√≥n de faceplates (RT Professional)
La dinamizaci√≥n de una instancia de faceplate con conexi√≥n al tipo de datos de usuario no est√°
prevista, pero en determinados casos puede implementarse utilizando una variable auxiliar.
Lea las indicaciones que figuran en la FAQ 109766634 (https://support.industry.siemens.com/
cs/ww/en/view/109766634).

88

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.5 Engineering System

N√∫mero de caracteres en campos de texto, listas y textos de aviso
El n√∫mero de caracteres disponibles en el texto de un objeto de imagen no es constante. Al
introducir datos de texto se consideran las instrucciones de control y el formato, y el n√∫mero
m√°ximo de caracteres se reduce en consecuencia.

Transparencias en WinCC V13 y superior
Los gr√°ficos transparentes pueden visualizarse sin p√©rdidas en runtime. Esto es v√°lido para
todos los Comfort Panels y WinCC Runtime Advanced a partir de la versi√≥n 13.0.
Para usar la transparencia en un visor de gr√°ficos o un campo E/S gr√°fico, la propiedad "Patr√≥n
de relleno" debe estar ajustada a "Transparente" y la propiedad "Utilizar color transparente"
debe estar desactivada.

Visualizaci√≥n de p√°ginas web de SIMOTION PLC en el navegador HTML
Si las p√°ginas web de SIMOTION PLC no se muestran correctamente en el navegador HTML,
a√±ada ""/basic"" tras la URL del sitio web para que las p√°ginas web se muestren en modo
b√°sico.

Diferencias visuales entre la configuraci√≥n y la visualizaci√≥n en el panel de operador
La representaci√≥n de un texto configurado en un objeto de imagen puede diferir en el panel de
operador debido a la configuraci√≥n de la pantalla. Si utiliza las opciones de ajuste autom√°tico
del tama√±o en la configuraci√≥n, compruebe la visualizaci√≥n de los textos en el panel de
operador en todos los idiomas.
Si los textos configurados con la opci√≥n "Adaptar objetos al contenido" no se pueden ver
completos, se mostrar√°n m√°s peque√±os en el panel de operador. Si por este motivo los textos
aparecen distorsionados, desactive la opci√≥n "Adaptar objetos al contenido" y ampl√≠e el texto
con espacios adicionales. Como alternativa puede ampliar el objeto a lo ancho o bien
formularlo de forma abreviada.

Vista general de GRAPH (RT Professional)
Al actualizar a V14 se modifica la firma de la funci√≥n C en el evento "Hacer clic". El par√°metro
propertyName que hab√≠a en versiones anteriores desaparece. Las funciones que acceden a
este par√°metro se marcar√°n como err√≥neas despu√©s de la actualizaci√≥n.

Actualizar faceplates con los UDT del tipo "Temporizador CEI"
El elemento "ST" se ha eliminado autom√°ticamente de los tipos de datos PLC definidos por el
usuario (UDT) que utilizan el tipo de datos "Temporizador CEI". Adapte los faceplates que
contengan estos UDT a una versi√≥n nueva del UDT sin elemento ST.
Encontrar√° una descripci√≥n detallada al respecto en la FAQ con el ID de art√≠culo "109740393"
en el SIMATIC Customer Online Support.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

89

WinCC
3.5 Engineering System

Controles superpuestos con animaciones de visibilidad
La configuraci√≥n superpuesta de controles basados en tablas con animaciones de visibilidad
puede dar origen a problemas en el manejo t√°ctil en los dispositivos con sistema operativo
Windows CE/Embedded Compact.

Visor de diagn√≥stico del sistema Protecci√≥n de acceso "Acceso HMI"
En caso de emplear el nivel de protecci√≥n "Acceso HMI" en combinaci√≥n con el PLC SIMATIC
S7-1200, s√≥lo puede garantizarse una visualizaci√≥n correcta de los datos de diagn√≥stico a
partir de la versi√≥n de firmware 4.1.

Fuentes en el t√≠tulo de objetos de ventana (Panels, Runtime Advanced)
La fuente establecida en la configuraci√≥n de runtime del dispositivo no se emplea en los t√≠tulos
de las ventanas de avisos, las ventanas de diagn√≥stico del sistema ni los cuadros de di√°logo.

Tipos de gr√°ficos no v√°lidos en las listas de gr√°ficos despu√©s de una actualizaci√≥n (Runtime
Professional)
Si actualiza su proyecto a TIA Portal versi√≥n 16, los tipos de gr√°ficos no v√°lidos de la lista de
gr√°ficos causar√°n errores durante la compilaci√≥n, que en la versi√≥n 14 se indicaban como
advertencia.
Para evitar que aparezcan mensajes de error durante la compilaci√≥n, puede ser necesario
corregir el tipo de gr√°fico en la lista de gr√°ficos.

Gr√°ficos multiling√ºes en faceplates
En un faceplate, inserte un gr√°fico en un objeto de imagen. Este gr√°fico se utilizar√° en todos
los idiomas definidos para el proyecto.
Si abre el gr√°fico con el comando "Editar" del men√∫ contextual y la opci√≥n "Editar gr√°fico de
forma centralizada", despu√©s de editarlo y guardarlo en un editor externo, p. ej., MS Paint, el
gr√°fico se modificar√° solamente para el idioma del proyecto actualmente definido. La
modificaci√≥n del gr√°fico correspondiente es visible en todos los objetos que utilizan dicho
gr√°fico.

Modificaciones de segmentos en el visor de c√≥digo PLC (RT Professional)
Cuando hay un aviso ProDiag pendiente se actualizan los cambios de segmentos en el visor
de c√≥digo PLC en runtime.
Para que las modificaciones de segmentos se puedan mostrar correctamente en el visor de
c√≥digo PLC en relaci√≥n con los an√°lisis de criterios, debe volver a dispararse el aviso.

90

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.5 Engineering System

Controles propios
Es posible que los "Controles propios" no se representen correctamente en el sistema de
ingenier√≠a. Sin embargo, no existe ninguna limitaci√≥n para su configuraci√≥n. Tampoco existen
limitaciones para la representaci√≥n y la operaci√≥n en runtime. Si este control est√° basado en
la tecnolog√≠a OCX, se recomienda cambiar a .Net.

Tipos de datos soportados para animaciones
Como tipos de datos para animaciones de una imagen pueden utilizarse valores enteros y
booleanos.

3.5.2

Variables y conexiones

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Multiplexado de variables (Basic Panels)
Si se multiplexa una variable con una variable externa en un Basic Panel, en el primer ciclo de
lectura en runtime se leer√° la direcci√≥n del PLC. El valor de la direcci√≥n le√≠da tan solo estar√°
disponible en el segundo ciclo de lectura.

Variables con direccionamiento simb√≥lico y tipo de datos "Char Array" (RT Professional)
Las variables con direccionamiento simb√≥lico y el tipo de datos "WString" no est√°n autorizadas
para la comunicaci√≥n de RT Professional y SIMATIC S7-1200 V3.

Indicaci√≥n de longitud para variables del tipo "String" (RT Professional)
En el editor "Variables", la indicaci√≥n de longitud para variables HMI internas del tipo "String"
no es efectiva. Si desea limitar la longitud de las variables, p. ej., para un campo de entrada o
salida, h√°galo utilizando VB Script o C Script.

Variable del tipo "String" para conexiones con controladores SIMOTION (Panels, RT Advanced)
Para controladores SIMOTION, la longitud de las variables String no debe superar los 210
caracteres.
En el sistema de ingenier√≠a es posible crear una variable String con m√°s de 210 caracteres. No
obstante, la variable en cuesti√≥n no se escribe en Runtime. Aparece el mensaje advirtiendo de
que el l√≠mite del valor se encuentra fuera de la variable.
En este caso, modifique la longitud de la variable String.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

91

WinCC
3.5 Engineering System

Variables de "Variable ID de la caja" (Mobile Panel)
La variable que se configura en "ID de la caja de variables", en "Configuraci√≥n de runtime >
General", solo puede utilizarse en modo de protecci√≥n contra escritura.
En esta variable no est√° permitido escribir valores, aunque puede leerse en scripts o
visualizarse en im√°genes, por ejemplo.

Elementos de matriz en WinCC
Si ha conectado una variable HMI con una matriz de un bloque de datos de STEP 7 que no
empieza con un l√≠mite inferior de 0, en WinCC se representan los elementos de matriz en el
l√≠mite inferior de 0.
Para evitar tener que cambiar entre el √≠ndice STEP 7 y el √≠ndice WinCC al acceder a los
distintos elementos de matriz, debe hacer que los l√≠mites inferiores de las matrices tambi√©n
empiecen en 0 en STEP 7.

Uso de tipos de datos de 64 bits
Si se usan tipos de datos de 64 bits, puede producirse una peque√±a p√©rdida de exactitud, ya
que estos tipos de datos se mapean como tipo de datos Double en el canal HMI. Esto puede
ocasionar que tipos de datos enteros se muestren con decimales.

Diagn√≥stico del sistema de PLC en el sistema R/H en funcionamiento no redundante
En un sistema R/H hay configurados dos PLC y dos conexiones correspondientes. Si el
sistema R/H no se encuentra en modo redundante, puede ocurrir que los visores del
diagn√≥stico del sistema de ambas conexiones muestren diferentes s√≠mbolos de estado de
diagn√≥stico para el mismo PLC.

3.5.3

Sistema de avisos y visor de avisos

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Variables booleanas en ficheros de avisos
Las variables de tipo Bool se reconocen en el fichero de avisos como 0 y -1. Si en un fichero
de avisos se utiliza una lista de textos controlada por una variable de tipo Bool, complete la lista
de textos correspondiente con la entrada del valor -1.

Avisos de PLC
Un aviso de PLC solo es visible en el editor "Avisos" de un dispositivo HMI si tambi√©n existe un
bloque de datos de instancia para ese FB.

92

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.5 Engineering System

Avisos de controlador en runtime (WinCC Professional)
Si actualiza un proyecto de las versiones V13 SP1 o V13 SP2 a las versiones V14, V14 SP1,
V15, V15.1, V16, deber√° compilar el proyecto y cargarlo en el controlador y en el panel de
operador. De lo contrario, los avisos de controlador aparecer√°n tachados en el visor de avisos.

Copia de proyectos con conexiones integradas
Si copia los dispositivos con sus conexiones integradas (entre paneles de operador y
controladores) desde un proyecto a una librer√≠a global y los pega desde all√≠ en un nuevo
proyecto, se puede perder la informaci√≥n relativa a los avisos del controlador en el panel de
operador. Para evitar esta p√©rdida de informaci√≥n, copie primero todos los controladores y
despu√©s todos los paneles de operador en el nuevo proyecto.

3.5.4

Funciones de sistema y scripts

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Scripts en proyectos de servicio (RT Professional)
Puesto que en los proyectos de servicio no suele estar registrado ning√∫n usuario interactivo,
los C Script y VB Script pueden causar problemas, p. ej., en los siguientes casos:
‚óè Si los scripts requieren interacciones, p. ej., entradas.
‚óè Si los scripts muestran cuadros de aviso.
En el Service Mode no existe ning√∫n √°rea de datos compartida para C-Scripting. Por ello, no
es posible intercambiar, p. ej., variables globales C entre el "Planificador de tareas" e
"Im√°genes".

Simulaci√≥n con depurador de scripts
Para que TIA Portal pueda iniciar la "Simulaci√≥n con depurador de scripts‚Äù, la clave del
Registro
HKEY_CLASSES_ROOT\CLSID
\{834128A2-51F4-11D0-8F20-00805F2CD064}\LocalServer32 deber√° contener una entrada
"(Standard)" de tipo "String" que contenga la ruta completa del depurador de scripts est√°ndar
"devenv.exe". Sin esta clave del Registro, el depurador no puede conectarse a la simulaci√≥n
que se est√© ejecutando.

Variables de disparo de funciones definidas por el usuario (RT Professional)
Si ha configurado un tipo de datos de usuario HMI o PLC en una imagen, no puede utilizar los
elementos del tipo de datos de usuario como variable de disparo en las funciones de usuario
creadas posteriormente o modificadas.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

93

WinCC
3.5 Engineering System

Funciones definidas por el usuario en faceplates
Si desea acceder a variables en un faceplate con una funci√≥n definida por el usuario, el nombre
de las variables no puede componerse de forma din√°mica.

Funciones de sistema del procesamiento por bits (Mobile Panels y RT Advanced)
No es posible manipular matrices de bits debido a eventos. Las funciones de sistema, como
p. ej., InvertBit, SetBit, etc., no pueden contener elementos de una matriz de bit como
argumento.

Propiedades que ya no se utilizan (Comfort Panels y RT Advanced)
En WinCC V13 se han incorporado muchas nuevas caracter√≠sticas visuales y se han
armonizado otras muchas ya existentes.
Como consecuencia de la revisi√≥n de las propiedades de objetos, es posible que algunas de
estas caracter√≠sticas, disponibles en scripts en VB de versiones anteriores de WinCC, no est√©n
soportadas en WinCC V13. Los scripts que utilizan caracter√≠sticas ya no soportadas siguen
siendo v√°lidos, pero las llamadas en cuesti√≥n contenidas en los scripts carecen de efecto en
runtime. Estas limitaciones afectan exclusivamente a los Comfort Panels y RT Advanced en la
versi√≥n de panel V13.0.
La siguiente tabla muestra las caracter√≠sticas ya no utilizadas de los objetos de imagen:

Propiedad

Objeto de imagen

BorderBrightColor3D

Deslizador

BorderColor

Campo de texto, campo E/S, campo E/S simb√≥lico,
campo de fecha y hora

BorderInnerWidth3D

Deslizador

BorderOuterWidth3D

Deslizador

BorderShadeColor3D

Deslizador

BorderStyle3D

Campo de texto, campo E/S, bot√≥n, campo E/S simb√≥lico,
campo E/S gr√°fico, campo de fecha y hora, barra, interruptor

BorderWidth

Campo de texto, campo E/S simb√≥lico

CenterColor

Indicador gauge

DialColor

Indicador gauge

EdgeStyle

Campo de texto, campo E/S

Transferencia de par√°metros a scripts en VB (Panels y RT Advanced)
En WinCC se puede definir si se transfieren los par√°metros de scripts en VB "ByRef" (direcci√≥n
del par√°metro) o "ByVal" (valor del par√°metro).
La transferencia de la direcci√≥n del par√°metro con "ByRef" (Call by Reference) solo es posible
para las variables internas del script en VB. En el caso de las variables HMI, el valor del
par√°metro siempre se transfiere, independientemente de que el par√°metro se haya definido
como "ByRef" o como "ByVal".

94

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.5 Engineering System

Transferencia de valores al visor de curvas mediante una funci√≥n definida por el usuario
Si lee valores de un fichero con una funci√≥n de VBS para visualizarlos en un visor de curvas,
debe prestar atenci√≥n a que la diferencia entre los sellos de tiempo sea mayor que cero.

N√∫mero m√°ximo de par√°metros (Panels y RT Advanced)
El n√∫mero m√°ximo de par√°metros de una funci√≥n global es de 8 para el tipo "sub" y de 7 para
el tipo "func".

Funci√≥n de sistema "MostrarDi√°logoInicioSesi√≥n" (Panels y RT Advanced)
En los Panel y Runtime Advanced no debe configurarse la funci√≥n de sistema
"MostrarDi√°logoInicioSesi√≥n" en el evento "Cambio de valor" de una variable.

Consulte tambi√©n
Debug (https://msdn.microsoft.com/en-us/library/wk3y866c(v=vs.84).aspx)
Err (https://msdn.microsoft.com/en-us/library/sbf5ze0e(v=vs.84).aspx)

3.5.5

Informes

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Imprimir informes (Panels)
Dependiendo de la impresora utilizada, los objetos posicionados en los m√°rgenes del informe
pueden quedar cortados al imprimirlos.
Aseg√∫rese de que su informe tenga un tama√±o adecuado.

3.5.6

Recetas

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

95

WinCC
3.5 Engineering System

Sincronizaci√≥n de recetas (Basic Panels, Panels, Comfort Panels y RT Advanced)
Al enviar valores de registros al controlador, los valores solo se validan si est√° activada la
opci√≥n "Transmisi√≥n manual de valores modificados (modo Teach-In)" para la receta en
"General > Sincronizaci√≥n > Configuraci√≥n".

3.5.7

Administraci√≥n de usuarios

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Usuarios del dominio UMAC
En WinCC V16.0 solo pueden utilizarse usuarios UMAC locales y no usuarios del dominio
UMAC.

3.5.8

Comunicaci√≥n

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Establecimiento de la conexi√≥n con WinCC Runtime Advanced
Preste atenci√≥n a que la versi√≥n de dispositivo configurada en el sistema de ingenier√≠a coincida
con la versi√≥n del runtime instalado porque, de lo contrario, no se podr√° establecer la
comunicaci√≥n al cargar el proyecto o se establecer√° de forma retardada.
Si la versi√≥n del dispositivo no coincide con la versi√≥n del runtime instalado, puede hacer lo
siguiente:
1. Cambie la versi√≥n de dispositivo que se ha configurado en el sistema de ingenier√≠a.
2. Instale la versi√≥n de WinCC Runtime Advanced que coincida con la versi√≥n de dispositivo
configurada.

Cambio de conexi√≥n en conexiones no integradas
Si se desea cambiar la comunicaci√≥n de una conexi√≥n no integrada a otra conexi√≥n no
integrada, p. ej., de Omron a Mitsubishi, deber√° asegurarse de que los tipos de datos de las
variables tambi√©n se soporten en la nueva conexi√≥n.

96

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.5 Engineering System

Interrupciones de la conexi√≥n en controladores Mitsubishi
Tras varias interrupciones de la conexi√≥n, puede ocurrir que queden ocupados todos los
recursos de conexi√≥n en el controlador Mitsubishi y ya no sea posible establecer la conexi√≥n.
Por ello, se recomienda comprobar los recursos de conexi√≥n en el programa PLC del
controlador y liberarlos nuevamente.

Certificados autofirmados (RT Professional)
Los certificados autofirmados ya no se soportan.
Si el servidor detecta un certificado autofirmado, la autenticaci√≥n tiene lugar a trav√©s de la
clave PSK compartida previamente (Pre-shared key). Si la clave PSK no coincide entre los
interlocutores, no se establece ninguna comunicaci√≥n.

Precisi√≥n del tipo de datos "DTL"
El tipo de datos "DTL" soporta la indicaci√≥n de la hora en el rango de nanosegundos. Como los
paneles solo soportan la indicaci√≥n de la hora hasta el rango de milisegundos, al utilizarla en
los punteros de √°rea se dan las siguientes limitaciones:
‚óè Puntero de √°rea "Fecha/hora"
Al transferir las indicaciones de fecha y hora desde un Panel al controlador, debe tenerse
en cuenta que la unidad de tiempo m√≠nima es 1 milisegundo. El rango de valores de
microsegundos a nanosegundos del tipo de datos "DTL" se rellena con ceros.
‚óè Puntero de √°rea "Fecha/hora controlador"
Al transferir las indicaciones de fecha y hora desde un controlador a un panel, se ignora el
rango de microsegundos a nanosegundos. La indicaci√≥n de fecha y hora se sigue
procesando en el panel, incluidos los milisegundos.

N√∫mero limitado de conexiones HMI posibles
Al compilar un dispositivo aparece un mensaje de error indicando que la configuraci√≥n de la
conexi√≥n HMI en el editor "Dispositivos y redes" no es v√°lida. La causa puede ser que se haya
excedido el n√∫mero m√°ximo de conexiones posibles del dispositivo HMI o del PLC.
Compruebe el n√∫mero m√°ximo de conexiones posibles. Consulte el manual de producto de los
dispositivos utilizados.

Uso de PROFINET IO en paneles de operador tipo Panel
Si utiliza PROFINET IO para conectar las teclas directas y LED de paneles de operador con el
controlador, en HW Config se puede definir un offset para el √°rea de direcciones de las
entradas y salidas.
Si utiliza una CPU de la serie 400 apta para PROFINET IO en combinaci√≥n con uno de los
paneles de operador indicados abajo, tenga en cuenta la siguiente restricci√≥n:
El offset para el inicio del √°rea de direcciones de las entradas no puede ser mayor que el offset
para el inicio del √°rea de direcciones de las salidas.
Esta restricci√≥n rige para los siguientes paneles de operador:
‚óè Mobile Panel 177

L√©ame
Manual de programaci√≥n y manejo, 11/2019

97

WinCC
3.5 Engineering System
Para configurar los par√°metros de direcci√≥n abra en HW Config el controlador con la CPU de
la serie 400. En HW Config, seleccione en la ventana de la estaci√≥n el panel de operador
conectado v√≠a PROFINET IO. En el √°rea inferior de la ventana de la estaci√≥n aparece en la
vista detallada una tabla con las propiedades del panel de operador. Seleccione en la tabla la
fila que contiene las direcciones del panel de operador y abra las propiedades de objeto desde
el men√∫ contextual.
Active la ficha "Direcciones" en el cuadro de di√°logo "Propiedades del objeto". Configure el
offset para las entradas en "Entradas > Inicio". Configure el offset para las salidas en "Salidas
> Inicio".

Comunicaci√≥n de RT Advanced a trav√©s del Station Manager (SIMATIC NET) con un S7-1200
En la comunicaci√≥n entre un SIMATIC S7-1200 y un PC con WinCC RT Advanced o RT
Professional a trav√©s de un router existen las siguientes restricciones para el PC:
‚óè Windows 7: Solo con SIMATIC NET 8.1 instalado
Estas restricciones tambi√©n son v√°lidas si se utiliza el Station Manager. Las conexiones de
Runtime Advanced con ayuda del Station Manager siempre se tratan como conexiones
enrutadas.

Cambio de configuraci√≥n IP y nombre de un controlador en el Control Panel del panel de operador
(Basic Panels)
En el panel de operador est√° abierto el Control Panel en el men√∫ "Service and Commissoning
> IP-Adaptation". Si desea cambiar la configuraci√≥n IP o el nombre de dispositivo de un
controlador, tenga en cuenta lo siguiente:
En el sistema de ingenier√≠a ha activado previamente las siguientes opciones en la ventana de
inspecci√≥n del controlador, en "Propiedades > General > Interfaz PROFINET > Direcciones
Ethernet".
‚óè "Obtener la direcci√≥n IP de otro modo"
‚óè "Obtener nombre de dispositivo PROFINET por otra v√≠a"

"Establecer la (direcci√≥n) IP-Suite del PLC en el Control Panel" en SIMATIC S7-1200 V1 (Basic Panels)
La funci√≥n "Establecer la (direcci√≥n) IP-Suite del PLC en el Control Panel" no est√° habilitada
en los controladores siguientes:
‚óè SIMATIC S7-1200 V1

Conexiones v√≠a PROFIBUS DP
Si se interrumpe y restablece una conexi√≥n mediante PROFIBUS DP entre un controlador y un
panel de operador, el resto de conexiones PROFIBUS DP de la red de comunicaci√≥n se
interrumpir√°n y restablecer√°n espor√°dicamente.
Desconecte la tensi√≥n del dispositivo desconectado antes de volver a conectarlo.

98

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.5 Engineering System

Cambio de una conexi√≥n
Al cambiar la conexi√≥n de un panel de operador a un controlador SIMATIC S7-300/400 por un
controlador SIMATIC S7-1500 o SIMATIC S7-1200, es posible que se interrumpa la conexi√≥n.
Tenga en cuenta los siguientes ajustes en el caso de los controladores SIMATIC S7-1500 o
SIMATIC S7-1200:
‚óè Direccionamiento absoluto de las variables
‚óè Debe estar seleccionada la opci√≥n "Desactivar comunicaci√≥n PUT-GET"
‚óè No debe estar configurado el nivel de protecci√≥n "Protecci√≥n completa"

Comunicaci√≥n de Runtime Professional con SIMATIC S7-1200
En modo productivo, la comunicaci√≥n entre WinCC Runtime Professional y SIMATIC S7-1200
solo est√° liberada para sistemas monopuesto.

RT Advanced en el Station Manager
Cuando RT Advanced y WinAC RTX utilizan el mismo procesador de comunicaciones de un
PC, no es posible la comunicaci√≥n HMI a SIMATIC S7-1200 ni SIMATIC S7-1500.

Comunicaci√≥n de datos sin formato en proyectos redundantes (RT Professional)
Simatic.NET, Named Connections y diversos bloques de comunicaci√≥n como, p. ej., BSEND/
BRCV, solo pueden utilizarse de forma limitada en un equipo PC configurado de forma
redundante porque los par√°metros de conexi√≥n para la pareja redundante del servidor no
pueden configurarse.

Conexi√≥n no integrada a un SIMATIC S7-1500 Software Controller (RT Advanced)
En WinCC no se soporta una conexi√≥n no integrada entre un dispositivo HMI y un SIMATIC
S7-1500 Software Controller.

√Åreas de transferencia para el modo de operaci√≥n "Dispositivo IO" y "Esclavo DP" de los dispositivos
HMI
Si ha activado el modo de operaci√≥n "Dispositivo IO" o "Esclavo DP" para los paneles de
operador HMI, no deber√° agregar ni borrar √°reas de transferencia en las propiedades del panel
de operador. Si ha borrado o agregado un √°rea de transferencia por error, b√≥rrela y conecte de
nuevo el controlador.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

99

WinCC
3.5 Engineering System

Determinaci√≥n de datos de diagn√≥stico por medio de dispositivos HMI
Contrariamente a lo indicado en la descripci√≥n de los s√≠mbolos de diagn√≥stico de los m√≥dulos
y dispositivos en el sistema de informaci√≥n, el siguiente s√≠mbolo significa lo siguiente para los
dispositivos HMI:
S√≠mbolo

Significado
No hay datos de diagn√≥stico disponibles.

Comunicaci√≥n PROFIenergy
Para configurar la comunicaci√≥n PROFIenergy p√≥ngase en contacto con el Customer Support.

N√∫mero de conexiones SmartClient
Aunque los Basic Panel permiten un n√∫mero ilimitado de conexiones SmartClient, se
recomienda configurar un m√°ximo de 2 conexiones. Cualquier conexi√≥n adicional influye en el
rendimiento.

100

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.6 Funciones generales

3.6

Funciones generales

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Utilizar el diagn√≥stico del sistema en el proxy de dispositivos
Para poder utilizar la funci√≥n de diagn√≥stico del sistema en un proxy de dispositivos IPE, p. ej.,
un visor de diagn√≥stico del sistema, inserte los avisos de PLC como contenido de un proxy de
dispositivos.

Inicializar un proxy de dispositivo usando datos de un proyecto de la versi√≥n anterior
En un proyecto con la versi√≥n de Service Pack no puede inicializarse un proxy de dispositivo
con datos procedentes de un proyecto de la versi√≥n completa correspondiente.
Actualice el proyecto fuente a la versi√≥n del Service Pack para poder inicializar el proxy de
dispositivo en el proyecto de destino con datos procedentes del proyecto fuente.

Importaci√≥n y exportaci√≥n de textos de librer√≠as
Objetos no soportados en la importaci√≥n y exportaci√≥n de textos de librer√≠as
‚óè Importaci√≥n: recetas, elementos de receta, registros de receta, avisos HMI, entradas de
listas de textos, im√°genes, informes.
‚óè Exportaci√≥n: entradas de listas de textos, im√°genes, informes.
‚óè Importaci√≥n y exportaci√≥n de tipos de librer√≠as "Imagen".

L√©ame
Manual de programaci√≥n y manejo, 11/2019

101

WinCC
3.7 Compilar y cargar

3.7

Compilar y cargar

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Compilar y cargar
Si al compilar se producen errores internos o advertencias, compile el proyecto
completamente con el comando "Compilar > Software (compilar todo)" del men√∫ contextual del
panel de operador.
Antes de pasar al modo productivo con el proyecto, comp√≠lelo completamente con el comando
"Compilar > Software (compilar todo)" del men√∫ contextual del panel de operador.
Si en el proyecto se utilizan variables HMI que est√°n vinculadas a variables del controlador,
antes de compilar el panel de operador compile todos los bloques modificados con el comando
"Compilar > Software" del men√∫ contextual.

Comprobaci√≥n de los par√°metros de direcci√≥n
Al compilar un panel de operador en el √°rbol del proyecto con el comando "Compilar >
Hardware y software (solo cambios)" del men√∫ contextual, no se comprueban los par√°metros
de direcci√≥n del panel de operador como, p. ej., la direcci√≥n IP. Para asegurarse de que
tambi√©n se comprueban los par√°metros de direcci√≥n, hay que compilar el panel de operador
en el editor "Dispositivos y redes" pulsando el bot√≥n "Compilar" de la barra de herramientas.

Mensaje de error al cargar datos en el PLC
Un Panel y un PLC est√°n conectados y se comunican.
Si al cargar datos desde el Panel al PLC se accede a una variable, se visualiza un mensaje de
error en el Panel.

Comfort Panels a partir de la versi√≥n de dispositivo 13.0: protecci√≥n de los datos al cargar proyectos
Si se interrumpe la transferencia en los Comfort Panels de la versi√≥n de dispositivo 13.0 o
superior, WinCC asegura autom√°ticamente que no se pierdan datos y que los datos existentes
en el panel solo se borren una vez completada la transferencia.

Visualizaci√≥n de caracteres en avisos de transferencia
Si en la transferencia a paneles de operador de la versi√≥n de dispositivo V12 o superiores los
caracteres no se visualizan correctamente en los avisos de transferencia, compruebe la
configuraci√≥n regional y de idioma en Windows. Ajuste el idioma que corresponda en "Idioma
para programas que no son Unicode".

102

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.7 Compilar y cargar

Reducci√≥n del tama√±o del proyecto
Al compilar el panel de operador, un aviso le indica que el tama√±o del proyecto en el panel de
operador alcanza el l√≠mite del sistema. Es este caso es posible reducir el tama√±o del proyecto
mediante la compilaci√≥n completa del software. Ejecute para ello el comando "Compilar >
Software (compilar todo)".

Consulte tambi√©n
Microsoft KB3083806 (https://support.microsoft.com/en-us/kb/3083806)

L√©ame
Manual de programaci√≥n y manejo, 11/2019

103

WinCC
3.8 Runtime

3.8

Runtime

3.8.1

Indicaciones relativas al funcionamiento en runtime

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Foco en runtime
Si en un panel de operador con versi√≥n 12.0.0 o inferior se ha configurado una combinaci√≥n de
color de foco y color de borde de bajo contraste, es posible que tras cambiar la versi√≥n del
panel en el TIA Portal no se distinga claramente el foco en runtime. Modifique uno de los dos
colores.

Comportamiento en caso de cambio de idioma - Formato del teclado de pantalla
El formato del teclado de pantalla no cambia si se cambia a un idioma de runtime que no est√©
instalada para el formato de teclado en Windows.
En tal caso, el idioma del teclado permanece ajustado con el √∫ltimo idioma v√°lido o bien se
utiliza el idioma ajustado para el formato de teclado est√°ndar de Windows.

Valores de variables que exceden la longitud m√°xima
Se introduce una cadena de caracteres en una variable String mediante un campo E/S. Si la
cadena de caracteres excede la longitud configurada de la variable, se reducir√° hasta la
longitud configurada.

Textos de avisos vac√≠os
Runtime se ejecuta con un proyecto. El proyecto est√° guardado en una unidad de red.
En caso de interrupciones hacia la unidad de red puede ocurrir que runtime intente cargar
textos de avisos de la unidad de red.
Si la conexi√≥n est√° desconectada, la ventana o el visor de avisos permanecen vac√≠os.
Para evitar este comportamiento se debe copiar el proyecto en una unidad local antes de iniciar
el proyecto en runtime.

Duraci√≥n de la inicializaci√≥n de los ficheros (Panels, RT Advanced)
La inicializaci√≥n de los ficheros puede requerir hasta 5 minutos en algunos medios de
almacenamiento. Un aviso de sistema confirma que la inicializaci√≥n ha finalizado
correctamente. Si falta un medio de almacenamiento para el archivado, el aviso de sistema
puede tardar hasta 5 minutos en aparecen durante el inicio de runtime.

104

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime

Los ficheros de gran tama√±o hacen que tarde m√°s en cerrarse el Runtime (Basic Panels 2nd Generation)
El cierre de Runtime requiere m√°s tiempo cuando se utilizan ficheros de gran tama√±o. Utilice
ficheros segmentados como alternativa a ficheros circulares de gran tama√±o.

Reacci√≥n lenta de SmartServer
Es posible que en Windows 7 los siguientes programas se inicien y respondan muy lentamente:
‚óè HMI TouchInputPC
‚óè SmartServer: Combinaci√≥n de teclas <Ctrl+Alt+Supr> en el di√°logo de inicio de sesi√≥n
El retraso es provocado por la comprobaci√≥n de certificados revocados de Internet.
Soluci√≥n:
En el DVD de producto encontrar√° bajo:
Support\Windows7\CRL_Check o CD_RT\Support\Windows7\CRL_Check\
los siguientes archivos:
‚óè DisableCRLCheck_LocalSystem.cmd
‚óè DisableCRLCheck_CurrentUser.cmd
1. Ejecute el archivo "DisableCRLCheck_LocalSystem.cmd" con derechos de administrador.
Llame el comando "Run as administrator" del men√∫ contextual del archivo.
2. Reinicie el PC.
Si de esta manera no se resuelve el problema, proceda del siguiente modo:
1. Haga doble clic en el archivo y ejecute el archivo "DisableCRLCheck_CurrentUser.cmd"
con derechos de usuario.
2. Reinicie el PC
Nota
La comprobaci√≥n de certificados revocados se desactiva para los usuarios o el PC. Para
restaurar el estado inicial ejecute los siguientes archivos:
‚óè RestoreDefaults_LocalSystem.cmd
‚óè RestoreDefaults_CurrentUser.cmd
Los archivos se encuentran en el siguiente directorio del DVD de producto:
‚óè Support\Windows7\CRL_Check o CD_RT\Support\Windows7\CRL_Check\

Desactivar el protector de pantalla en el Sm@rtServer
Si el protector de pantalla est√° activado en el Sm@rtServer en el panel de operador servidor,
es necesario disponer de acceso de escritura al Sm@rtClient para poder desactivar el
protector de pantalla en el panel de operador servidor.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

105

WinCC
3.8 Runtime

Prevenci√≥n de da√±os en archivos en caso de fallo de alimentaci√≥n
Si se produce un fallo de alimentaci√≥n en sistemas Windows mientras est√° activado el sistema
WinCC, los archivos pueden resultar da√±ados o quedar destruidos. La utilizaci√≥n del sistema
de archivos NTFS ofrece mayor seguridad.
Solo el uso de una fuente de alimentaci√≥n ininterrumpida (SAI) garantizar√° un servicio continuo
seguro.

Fuentes variables en paneles de operador
Windows 10 soporta fuentes variables desde la versi√≥n 1709 ("OpenType Font Variations"). En
el sistema de ingenier√≠a (ES) tambi√©n puede utilizar las variantes de una fuente variable. La
representaci√≥n real en runtime depender√° del panel de operador y de las condiciones de
instalaci√≥n:
‚óè Basic Panels, Comfort Panels: No se soportan las fuentes variables. Se muestra siempre
la variante b√°sica.
‚óè Runtime Advanced, Runtime Professional: Se soportan las fuentes variables, si como
sistema operativo se utiliza Windows 10 Version 1709 como m√≠nimo y la fuente est√°
instalada con derechos de administrador.

3.8.2

Indicaciones relativas al funcionamiento de Panels en runtime

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Utilizaci√≥n de la rueda del rat√≥n en runtime
La utilizaci√≥n de la rueda del rat√≥n en runtime no se soporta en ning√∫n panel.

Copia de seguridad en la tarjeta de memoria del PLC (Basic Panels)
Se crea el archivo de backup "A.psb" en la tarjeta de memoria del PLC. Al crear la copia de
seguridad se produce un error, p. ej., una interrupci√≥n de la comunicaci√≥n.
Con ello se genera un archivo defectuoso en la tarjeta de memoria del PLC. Los archivos de
este tipo llevan el prefijo "~$".
Borre el archivo con el prefijo "~$" si quiere guardar una nueva copia de seguridad con el
mismo nombre "A.psb".

Panel Data Storage y S7-1500F (Basic Panels)
La funci√≥n "Panel Data Storage" PDS no puede utilizarse en Basic Panels en combinaci√≥n con
S7-1500F si se utiliza la contrase√±a para el nivel de protecci√≥n "Full access incl. fail-safe".

106

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime

Funci√≥n "Panel Data Storage" (Basic Panels)
La funci√≥n "Panel Data Storage" (PDS), disponible en Basic Panels, soporta √∫nicamente
SIMATIC S7-1200 a partir del firmware V4.0 y SIMATIC S7-1500. Para utilizar la funci√≥n PDS,
el panel debe estar conectado directamente a la CPU; no puede estar conectado a trav√©s del
CP.

Fuentes con extensi√≥n de archivo ".ttx"
Las fuentes con extensi√≥n ".ttx" est√°n disponibles en todos los paneles y en Runtime Advanced
y pueden visualizarse correctamente en todos los equipos, p. ej., la fuente
"WinCC_flexible_smart".

Transferencia de datos masivos v√≠a USB
Si instala Windows 10 en el PC de configuraci√≥n, el canal de transferencia "USB" no est√°
disponible.
Esta limitaci√≥n afecta a los siguientes equipos y herramientas:
‚óè Basic Panels: KP300 Basic, KP400 Basic, TP1500 Basic
‚óè Mobile Panels: Serie 170 y serie 270
‚óè WinCC Engineering System
‚óè Herramienta de servicio "ProSave"
Nota
El canal de transferencia "USB" sigue estando disponible si en el PC de configuraci√≥n est√°
instalado Windows 7.
Soluci√≥n
Utilice otros canales de transferencia para transferir los datos de proyecto, p. ej., el canal
"Industrial Ethernet" o "PROFIBUS DP".

Cambiar la direcci√≥n IP y el nombre de dispositivo en paneles
En los Comfort Panels es posible cambiar la direcci√≥n IP o el nombre de dispositivo aunque se
haya iniciado el runtime.
En los Basic Panels no es posible cambiar la direcci√≥n IP o el nombre de dispositivo cuando
se est√° ejecutando el runtime.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

107

WinCC
3.8 Runtime

3.8.3

Indicaciones relativas al funcionamiento de Runtime Advanced

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Iniciar runtime
Desde el sistema de ingenier√≠a solo puede iniciarse WinCC Runtime V16. Otras versiones de
WinCC solo se pueden simular.

Permiso para iniciar Runtime Advanced
En un equipo con sistema operativo Windows, WinCC Runtime Advanced solo puede iniciarse
si el usuario que inicia el runtime est√° asignado al grupo "Siemens TIA Engineer" y tiene sus
derechos.

Protector de pantalla en equipos con Windows 10
En un equipo con Windows 10 el protector de pantalla activado ya no se cierra al aparecer un
aviso de la clase "Error".

Windows 10 en modo tableta
No se recomienda utilizar Windows 10 en modo tableta.
Si utiliza aplicaciones, p. ej., Runtime Advanced, Sinumerik Operate, etc., con Windows 10 en
modo tableta, dichas aplicaciones se minimizan tras iniciarlas.

.Net-Controls en runtime
Si en el proyecto se ha integrado un control .Net como "Control .Net espec√≠fico", es necesario
copiar los archivos correspondientes a esos controles en el directorio de instalaci√≥n de WinCC
Runtime, p. ej., "C:\Archivos de programa\Siemens\Automation\WinCC RT Advanced". De lo
contrario no ser√° posible cargar el control en runtime.

Desactivar la comprobaci√≥n autom√°tica de actualizaciones de software
Si el sistema de ingenier√≠a est√° instalado en un PC junto con el runtime, el operador recibe
notificaciones sobre las actualizaciones de software. Para que el sistema funcione de forma
estable en un sistema multipuesto, todos los equipos deben tener instalada la misma versi√≥n
de software.
Existe la posibilidad de desactivar la comprobaci√≥n autom√°tica de actualizaciones de software
y mejorar con ello el rendimiento.
La comprobaci√≥n autom√°tica de las actualizaciones de software se desactiva en
"Configuraci√≥n > General > Actualizaciones de software" desactivando la opci√≥n "Buscar
actualizaciones cada d√≠a".

108

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime

Acceso a variables de array v√≠a OPC
Si utiliza WinCC Runtime Advanced como servidor OPC UA, solo podr√° leer variables de array
si est√° activado el ajuste "OPC UA Server Array index range access".
Las variables de array solo pueden escribirse si el cliente OPC UA admite el ajuste ‚ÄúWrite array
elements without IndexRange".

3.8.4

Indicaciones relativas al funcionamiento de Runtime Professional

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Autorizaciones de usuario en el sistema operativo
1. Todos los usuarios deben haber sido agregados al grupo de usuarios "SIMATIC HMI". Esto
tambi√©n rige para usuarios que deseen abrir proyectos WinCC remotos.
2. La carpeta de almacenamiento de los proyectos tiene que disponer de las autorizaciones
NTFS "SIMATIC HMI" con pleno acceso y "SIMATIC HMI Viewer" con derechos de lectura.
Las autorizaciones deben poder ser heredadas por todos los objetos subordinados.

Bloquear combinaciones de teclas
Si desea bloquear combinaciones de teclas en Windows, deber√° adaptar las directivas de
grupos en la administraci√≥n del sistema operativo.
Encontrar√° una descripci√≥n detallada al respecto en la FAQ con la ID de art√≠culo "44027453"
en el SIMATIC Customer Online Support:
Internet: WinCC FAQ 44027453 (http://support.automation.siemens.com/WW/view/es/
44027453)

Barras de herramientas no fijas
Si se utiliza el ajuste "Siempre visible" para la barra de tareas de Windows, es posible mover
las barras de herramientas no fijas detr√°s de la barra de tareas de Windows. Para mostrar
nuevamente las barras de herramientas proceda del siguiente modo:
1. Elija el comando "Propiedades" del men√∫ contextual de la barra de herramientas.
2. Desactive la opci√≥n "Mantener la barra de tareas siempre visible".

Fallo de conexi√≥n entre servidor y cliente
Si la conexi√≥n entre servidor y cliente falla, compruebe los ajustes de la interfaz PG/PC. Para
la "Parametrizaci√≥n de interfaz utilizada" no debe utilizarse TCP/IP(Auto). Utilice en su lugar
direcciones IP fijas.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

109

WinCC
3.8 Runtime

Fallo de conexi√≥n entre servidor y cliente
Si el equipo con el sistema de ingenier√≠a se est√° utilizando simult√°neamente como servidor y
un cliente no puede establecer una conexi√≥n con el servidor, se deben comprobar las
autorizaciones establecidas en este.
1. Finalice el runtime en el servidor.
2. Seleccione el comando "Buscar equipos..." en el men√∫ contextual de "Mis sitios de red" en
el escritorio del servidor.
3. Introduzca el nombre del servidor para el equipo que quiere buscar.
4. Abra el equipo encontrado para detectar los directorios compartidos.
5. Elimine todos los directorios compartidos que empiecen por "WinCC_Project_HMI".
Encontrar√° m√°s informaci√≥n en la documentaci√≥n del sistema operativo.
El comportamiento incorrecto se debe al uso del comando "Guardar como..." en combinaci√≥n
con el inicio de runtime de este nuevo proyecto. Con el fin de disponer de copias de seguridad
de los proyectos, utilice el comando "Guardar como..." para crear copias de los proyectos. Sin
embargo deber√≠a seguir trabajando con el proyecto original.

Iniciar WinCC Runtime Professional
Si en un equipo est√°n instalados el sistema de ingenier√≠a y el runtime, entonces conviene abrir
y cerrar el runtime o la simulaci√≥n relativa a un proyecto abierto en el sistema de ingenier√≠a solo
desde el TIA Portal. Para ello no conviene usar otras posibilidades como el icono que figura en
la barra de tareas.
Al configurar el inicio autom√°tico en el cliente es necesario introducir el nombre de usuario y la
contrase√±a para cada proyecto de servidor registrado. Para asignar un nombre de usuario
(login) a cada servidor, se debe confirmar la introducci√≥n de la ruta de proyecto
correspondiente con la tecla "Aplicar". Esto hace que, en el caso de proyectos redundantes o
alternativos, el nombre de usuario (login) y la contrase√±a se tengan que introducir dos veces.

Configuraci√≥n de los servicios para el servidor SQL
Para poder asegurar la plena funcionalidad del servidor SQL para WinCC y WinCC Runtime es
necesario comprobar la configuraci√≥n del servidor SQL.
1. Inicie en el men√∫ de inicio "Programme > Microsoft SQL Server 2014 > Configuration Tools
> SQL Server 2014 Configuration Manager".
2. Haga clic en el √°rbol sobre "SQL Server Services".
3. Compruebe los servicios "SQL Server (WinCC)", "SQL Server (WINCCPLUSMIG)" y "SQL
Server Browser".
Para "Start Mode" debe indicarse "Automatic".
Para "Log On As" debe indicarse "LocalSystem" para "SQL Server (WinCC)".
Para "SQL Server Browser" debe indicarse "LOCALSERVICE".
Cambie los ajustes si es necesario.
4. Haga clic en el √°rbol sobre "SQL Server Network Configuration".

110

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime
5. Haga clic en "Protocols for WinCC".
6. Compruebe el protocolo "TCP/IP". En "Status" tiene que estar registrado "Enabled".
Modifique la configuraci√≥n, si es necesario.

"Notificar errores de sistema" en WinCC Runtime Professional
La funcionalidad "Notificar errores de sistema" est√° limitada en el WinCC Runtime Professional
en combinaci√≥n con un S7-300 o S7-400. En un visor de avisos solo se muestra un aviso por
cada tipo de diagn√≥stico. Los avisos relativos a otros errores del mismo tipo de diagn√≥stico no
se visualizan.

Interfaces WinCC y sistema operativo de 64 bits
Las interfaces abiertas de WinCC Runtime Professional no ofrecen soporte nativo para 64 bits.
Esto afecta sobre todo a Runtime API, VBS y a WinCC OleDB-Provider. Para poder utilizar las
interfaces de WinCC en un sistema operativo de 64 bits, debe tener en cuenta lo siguiente:
- Los VB Scripts no se pueden iniciar con solo un doble clic. Debe utilizarse expl√≠citamente la
versi√≥n de 32 bits en "syswow64\wscript.exe".
- Las aplicaciones .NET que utilizan WinCC-API deben compilarse expl√≠citamente como
aplicaciones de 32 bits. No con "AnyCPU" sino con "x86".
- Las aplicaciones C++ no deben compilarse como aplicaciones de 64 bits.

Gr√°ficos din√°micos en el WinCCViewer RT
Si se asocian gr√°ficos din√°micos de una colecci√≥n de gr√°ficos, p. ej., a scripts, estos gr√°ficos
no se actualizar√°n en el WinCCViewer RT.
Seleccione la opci√≥n "Definido por el usuario" en "Configuraci√≥n runtime > Configuraci√≥n de
gr√°ficos".

Runtime Professional: Carga de un proyecto sin conexi√≥n al PC de configuraci√≥n
Antes de proceder a cargar un proyecto en la estaci√≥n de operador, guarde los datos tales
como "Administraci√≥n de usuarios" y "Datos de recetas".
1. Los datos de la administraci√≥n de usuarios se sobrescriben de forma est√°ndar.
Por ello se recomienda configurar dos botones en el proyecto para exportar o importar la
administraci√≥n de usuarios con la funci√≥n de sistema "ExportarAdministraci√≥nDeUsuarios".
Solo es necesario exportar los datos si se han realizado modificaciones en el visor de
usuarios en runtime.
2. Al cargar el proyecto, especifique en el cuadro de di√°logo "Vista preliminar Carga" si deben
sobrescribirse datos de recetas.
Los datos de recetas se pueden guardar en el visor de recetas con los elementos de mando
"Exportar fichero" e "Importar fichero".
Tenga en cuenta que los √∫ltimos datos importados o cargados se utilizar√°n en runtime.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

111

WinCC
3.8 Runtime

Conexi√≥n con S7-1200 en el diagn√≥stico del sistema
Si se usa el diagn√≥stico del sistema, solo se puede conectar un sistema HMI WinCC Runtime
Professional con un S7-1200 (hasta V3).

Desactivar la comprobaci√≥n autom√°tica de actualizaciones de software
Si el sistema de ingenier√≠a est√° instalado en un PC junto con el runtime, el operador recibe
notificaciones sobre las actualizaciones de software. Para que el sistema funcione de forma
estable en un sistema multipuesto, todos los equipos deben tener instalada la misma versi√≥n
de software.
Existe la posibilidad de desactivar la comprobaci√≥n autom√°tica de actualizaciones de software
y mejorar con ello el rendimiento.
La comprobaci√≥n autom√°tica de actualizaciones de software se desactiva en "Configuraci√≥n >
General > Actualizaciones de software" desmarcando la casilla de verificaci√≥n "Comprobar
actualizaciones cada d√≠a".

Restricciones en la carga de modificaciones online
Si utiliza un dise√±o, ya no podr√° cargar modificaciones online en el proyecto. En estos casos,
TIA Portal no emite ning√∫n mensaje error.

Objetos de imagen en informes en formato PDF
La calidad de los objetos de imagen en los informes que se generen como archivos PDF
depende de los controladores de impresora PDF que se utilicen.

Proyectos en runtime tras la actualizaci√≥n de Windows 10
Ha instalado la versi√≥n 1709 de Windows 10 en un PC con WinCC Professional V15 y en un
PC con WinCC Professional RT V15. En el PC Runtime ha actualizado Windows 10 a la versi√≥n
1803. Tras la actualizaci√≥n de Windows 10, en determinadas circunstancias ya no es posible
abrir manualmente un proyecto cargado del PC del sistema de ingenier√≠a.
Soluci√≥n: Ajuste manualmente el tipo de inicio del servicio de la instancia SQL de WinCC a
"Autom√°tico (inicio retrasado)" y reinicie el sistema.

Memoria que requieren los ficheros
Para calcular la memoria necesaria para guardar los avisos de todos los segmentos y para
segmentos individuales es necesario saber el n√∫mero de avisos que entran por segundo de
promedio. Se tiene el cuenta el espacio m√°ximo de memoria que requiere un aviso,
aproximadamente 4000 bytes. Se aplica:
memoria necesaria = n√∫mero de avisos/s * 4000 bytes * 60 s/min * 60 min/h * 24 h/d√≠a * 31 d√≠as/
mes * y meses.
En el ejemplo se parte de 1 aviso por segundo:
‚óè Para el espacio m√°ximo de todos los segmentos en dos meses resultan aprox. 20 GB.
‚óè Para un segmento individual resultan aproximadamente 330 MB diarios

112

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime
Para calcular la memoria necesaria para ficheros de datos de todos los segmentos y para
segmentos individuales es necesario saber cu√°ntos valores se archivan por segundo y la
longitud media de un valor de proceso. Se aplica:
memoria necesaria = n√∫mero de valores de fichero/s * x bytes * 60 s/min * 60 min/h * 24 h/d√≠a
* 31 d√≠as/mes * y meses
En el ejemplo se parte de 750 valores de fichero por segundo:
‚óè Para valores de proceso con 16 bytes resulta un espacio de memoria de aproximadamente
60 GB.
‚óè Para valores de proceso con 6 bytes resulta un espacio de memoria de aproximadamente
22 GB.

3.8.5

Notas relativas al funcionamiento de Runtime Unified

3.8.5.1

Notas generales

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Copiar entre WinCC Unified y otros dispositivos
No se permite copiar datos entre WinCC Unified y otros dispositivos, p. ej., utilizando el
portapapeles o la librer√≠a.

Iniciar runtime
El runtime no se puede iniciar con el comando Inicio de WinCC Runtime, si el sistema de
ingenier√≠a muestra el cuadro de di√°logo "Vista preliminar Carga".

Carga de modificaciones
Con el ajuste "Solo cambios" puede cargarse un gran n√∫mero de modificaciones en el runtime.
Las siguientes modificaciones requieren una compilaci√≥n y carga completas:
Cambios de la configuraci√≥n en
el √°mbito:

Tipo de cambio

Panel de operador

Borrar dispositivos

Configuraci√≥n de runtime

Cambio del ID del sistema

Archivado

Cambios del tipo de base de datos y la ubicaci√≥n
Borrar fichero de variables
Todos los cambios de la configuraci√≥n de variables de fichero
Todos los cambios de la configuraci√≥n de ficheros de avisos.

Faceplates

Todos los cambios del tipo de faceplate y de la interfaz de variables

L√©ame
Manual de programaci√≥n y manejo, 11/2019

113

WinCC
3.8 Runtime
Cambios de la configuraci√≥n en
el √°mbito:

Tipo de cambio

Juegos de par√°metros

Todos los cambios de la configuraci√≥n

Unified Collaboration

Todos los cambios de la configuraci√≥n

Idioma y fuente

Todos los cambios de la configuraci√≥n

Estilos

Todos los cambios de la configuraci√≥n

Variables

Borrar variables tipo matriz y tipos de datos de usuario
Todos los cambios de la configuraci√≥n de variables tipo matriz y tipos de datos de usuario

Conexiones

Todos los cambios de la configuraci√≥n

Ciclos

Todos los cambios de la configuraci√≥n

Objetos de la instalaci√≥n y vistas Todos los cambios de la configuraci√≥n
de la instalaci√≥n

Unified Collaboration
Encontrar√° indicaciones sobre la configuraci√≥n y puesta en marcha de Unified Collaboration
en el manual "WinCC Engineering V16 - Unified Runtime", en Siemens Industry Online Support
(https://support.industry.siemens.com/cs/products?dtp=Manual&mfn=ps&pnid=24212&lc=esWW)

Opci√≥n "Conservar datos actuales de administraci√≥n de usuarios en runtime" al efectuar la carga
completa
Para impedir que los usuarios creados en la administraci√≥n de usuarios en runtime sean
sobrescritos al cargar todo el proyecto, active la opci√≥n "Conservar datos actuales de
administraci√≥n de usuarios en runtime".
Si la opci√≥n est√° activada, se cargan en runtime las asignaciones de roles y los derechos de
funci√≥n de la administraci√≥n de usuarios del sistema de ingenier√≠a, pero no los datos de usuario
como el nombre de usuario y la contrase√±a.

Ubicaci√≥n de los ficheros
Deben tomarse las medidas necesarias para que el usuario de servicio "WCCILScsService"
que ha iniciado sesi√≥n en el runtime tenga derechos de lectura y escritura en el directorio que
contiene los ficheros. Para ello, existen las posibilidades siguientes:
‚óè Configure el directorio para los ficheros con la herramienta "WinCC Unified - Configuration"
y configure en el sistema de ingenier√≠a el almacenamiento de ficheros en este directorio o
en uno de sus subdirectorios.
‚óè En el sistema de ingenier√≠a, configure el almacenamiento de ficheros en directorios para los
que no se haya limitado el permiso de acceso en el sistema operativo. En tal caso, los
ficheros no estar√°n protegidos del acceso por terceros.

Tama√±os de segmento de los ficheros
El tama√±o de segmento de un fichero para SQLite es siempre un m√∫ltiplo de 4 MB. Si
configura, por ejemplo, un tama√±o de segmento de 7 MB, el tama√±o real de segmento ser√° de
8 MB.

114

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime
El tama√±o m√≠nimo de segmento de un fichero para MSSQL es de 3 MB.

Memoria del servidor SQL
Si desea acceder en muy poco tiempo a un gran n√∫mero de valores de fichero, se recomienda
configurar la memoria m√°xima del servidor SQL a 4 GB como m√≠nimo en la herramienta
"WinCC Unified - Configuration".

Comunicaci√≥n v√≠a OPC UA
Si quiere utilizar WinCC como cliente OPC UA, el servidor OPC deber√° encontrarse en el
mismo panel de operador que WinCC.

Modificaci√≥n de un tipo de datos de usuario PLC
Tras modificar un tipo de datos de usuario PLC es preciso compilar el PLC para dar a conocer
este cambio a todos los dispositivos Unifiied que utilicen este tipo de datos de usuario. Si no
se compila el PLC pueden aparecer mensajes de error al compilar los dispositivos HMI.

3.8.5.2

Im√°genes y objetos de imagen

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Objetos de imagen para Unified Comfort Panel
Los siguientes objetos solo est√°n soportados en la versi√≥n V16 para Unified PC.
‚óè Vista general de la instalaci√≥n
‚óè Informes
‚óè Visor de curvas f(x)
‚óè MediaPlayer
‚óè Visor de juegos de par√°metros
‚óè Campo E/S simb√≥lico
‚óè Visor de tablas
‚óè Tabla de valores
Si estos objetos se han configurado en un Unified Comfort Panel, deber√°n borrarse dichos
objetos antes de compilar.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

115

WinCC
3.8 Runtime

Ajustes de im√°genes y objetos de imagen
Los ajustes que ha definido en el √°rea "Adaptaciones de im√°genes y objetos de imagen" en
"Configuraci√≥n > Visualizaci√≥n" no tienen efecto sobre los paneles de operador:
‚óè SIMATIC Unified PC
‚óè SIMATIC Unified Comfort Panel

Faceplates
Los tipos de datos de usuario de PLC que contienen un array de tipos de datos de usuario no
pueden utilizarse con faceplates Unified.

Edici√≥n de gr√°ficos SVG
No es posible abrir gr√°ficos SVG en un editor externo con el comando "Editar".

Escalar gr√°ficos SVG
Si como gr√°fico de fondo utiliza un gr√°fico SVG en un elemento y lo escala en el sistema de
ingenier√≠a, el elemento no se muestra correctamente en Chrome en runtime.

Caracter√≠sticas SVG no soportadas
Las siguientes caracter√≠sticas SVG no est√°n soportadas:
‚óè Scripting: Inline-JavaScript no se soporta
‚óè Interactividad
‚óè Styling
‚óè Ampliabilidad: ning√∫n ForeignObject
‚óè Animaciones

Orientaci√≥n del texto en las celdas del visor de avisos
Las distancias y la orientaci√≥n del texto de las celdas solo pueden definirse para todo el visor
de avisos.
Las propiedades "Distancia" y "Recorte de texto" solo tienen efecto en el modo "Gr√°fico y
texto", "Gr√°fico o texto" y "Gr√°fico".

Men√∫s emergentes y cuadros de di√°logo modales en el control "Navegador"
Las llamadas de consultas y cuadros de di√°logo (men√∫s emergentes y cuadros de di√°logo
modales) solo son posibles si se han activado en el archivo <ruta al directorio de instalaci√≥n de
WinCC Unified>WinCCUnified\WebRH\public\content\custom\CustomSettings.json:

116

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime
{"CustomSettings": {"HmiWebControl" : {"AllowPopups" :
true,"AllowModals" : true}}}
Nota
Los men√∫s emergentes y los cuadros de di√°logo modales detienen la actualizaci√≥n.

Control "Informes"
Versi√≥n de Excel
En el dispositivo en el que quiere utilizar el complemento de Excel est√° instalado MS Excel
2016 - Build 16.0.6769 (32 o 64 bits) o un acceso online comparable a Excel (Online Office
365).
Comodines para nombres de informes
En el control "Informes" se dispone de los siguientes comodines para definir nombres para los
informes que se van a generar:
Comod√≠n

Descripci√≥n

Ejemplo
Configura‚Äê
ci√≥n

{N}

Numeraci√≥n autom√°tica Rep_{N}

√Årea
Resultado
Rep_1

1..9

{NN}

Rep_{NN}

Rep_01

01..99

{NNN}

Rep_{NNN}

Rep_001

001..999

Rep_{YY}

Rep_18

N√∫mero de a√±o v√°lido con 2 d√≠gitos

{YY}

N√∫mero del a√±o actual

{YYYY}
{m}

Rep_{YYYY Rep_2018 N√∫mero de a√±o v√°lido con 4 d√≠gitos
}
Rep_{m}

Rep_1

Mes actual, no se antepone el 0 para meses de un solo
d√≠gito

{mm}

Rep_{mm}

Rep_01

Mes v√°lido, se antepone un 0 para meses de un solo d√≠gito

{mmm}

Rep_{mmm
}

Rep_Jan

Abreviatura de mes de 3 caracteres

{mmmm}

Rep_{mmm
m}

Rep_Ja‚Äê
nuar

Mes con el nombre completo

Rep_{d}

Rep_1

D√≠a v√°lido, no se antepone el 0 para d√≠as de un solo d√≠gito

{d}

Mes actual

D√≠a actual del mes

{dd}

Rep_{dd}

Rep_01

D√≠a v√°lido, se antepone un 0 para d√≠as de un solo d√≠gito

{ddd}

Rep_{ddd}

Rep_Mon

Abreviatura de d√≠a de 3 caracteres

{dddd}

Rep_{dddd} Rep_Mont D√≠a con el nombre completo
ag

{h}

Hora actual

Rep_{h}

Rep_1

Hora actual (reloj de 12 horas), no se antepone el 0 para
valores de un solo d√≠gito

{hh}

Rep_{hh}

Rep_01

Hora actual (reloj de 12 horas), se antepone un 0 para va‚Äê
lores de un solo d√≠gito

{H}

Rep_{H}

Rep_13

Hora actual (reloj de 24 horas), no se antepone un 0 para
valores de un solo d√≠gito

{HH}

Rep_{HH}

Rep_13

Hora actual (reloj de 24 horas), se antepone un 0 para va‚Äê
lores de un solo d√≠gito

L√©ame
Manual de programaci√≥n y manejo, 11/2019

117

WinCC
3.8 Runtime
Comod√≠n

Descripci√≥n

Ejemplo
Configura‚Äê
ci√≥n

{M}

Minuto actual

{MM}
{s}

√Årea
Resultado

Segundo actual

{ss}

Minuto v√°lido, no se antepone un 0 para valores de un solo
d√≠gito
Rep_{MM}

Rep_06

Minuto v√°lido, se antepone un 0 para valores de un solo
d√≠gito

Rep_{s}

Rep_41

Segundo v√°lido, no se antepone un 0 para valores de un
solo d√≠gito

Rep_{ss}

Rep_41

Segundo v√°lido, se antepone un 0 para valores de un solo
d√≠gito

Ejemplos:

3.8.5.3

Comod√≠n

Nombre del informe

LineA_{yyyymmdd}_{HHMMss}_{NNN}

LineA_20190101_170001_003

LineA_{YYmmmd}_{hhMMss}_{NNN}

LineA_19Jan1_050001_003

Sistema de avisos y visor de avisos

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Utilizar colores de aviso
Para que en el visosr de avisos se visualicen los colores configurados para un aviso, haga lo
siguiente en el sistema de ingenier√≠a:
1. Active la propiedad "Formato > Activar color de aviso" en las propiedades del visor de
avisos.
2. Active la propiedad "Utilizar color de aviso" en "Visor de avisos > Columnas" para cada
columna que deba utilizar el color de aviso configurado.

3.8.5.4

Funciones de sistema y scripts

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Comilla en los nombres de objeto
Si utiliza una comilla (comillas simples) en un nombre de objeto y luego quiere llamar este
objeto en un script, deber√° poner el nombre de objeto entre comillas, p. ej.:

118

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime
let tag = Tags("My'Tag");

Ocupaci√≥n de la memoria por scripts
En runtime no est√° limitada la utilizaci√≥n de la memoria por scripts. Especialmente al crear
variables de forma din√°mica, preste atenci√≥n al tama√±o de la memoria asignada.

N√∫meros en coma flotante en JavaScript
JavaScript soporta n√∫meros en coma flotante con una mantisa de hasta 54 bits. Por ello se
redondean los valores con una mantisa mayor que 54 bits en la creaci√≥n de scripts y en el
cliente web.
Valores afectados:
‚óè Valores de variables
‚óè Constantes en las propiedades de objetos de imagen
Nota
Los valores con una mantisa de hasta 64 bits se muestran correctamente en los campos de E/
S.

Funci√≥n de sistema ExecuteReport
HMIRuntime.Tags.SysFct.ExecuteReport (reportTaskName)
En el par√°metro reportTaskName se transfiere el nombre de la orden de informe que utilice
para generar el informe.

3.8.5.5

Librer√≠as

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Validaci√≥n de tipos de librer√≠as
Al validar una versi√≥n de tipo en la librer√≠a, tenga en cuenta el mensaje de comprobaci√≥n de
coherencia. Para garantizar que el proyecto se compile sin errores, aseg√∫rese de que solo se
validen versiones coherentes de los tipos de librer√≠as.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

119

WinCC
3.8 Runtime

3.8.5.6

Notas relativas al funcionamiento de Runtime Unified

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Modo indicador de valores de proceso en el control deslizante
Si ha configurado una variable en la propiedad Modo indicador de valores de proceso de un
control deslizante, el cambio de la variable en runtime no tendr√° efecto sobre el control
deslizante.

Acceso a Runtime Unified desde dispositivos Android o iOS
Aseg√∫rese de que el dispositivo Android o iOS tiene instalada la √∫ltima versi√≥n del sistema
operativo y del navegador si quiere acceder con √©l a Runtime Unified.

Sincronizaci√≥n de los valores de cliente con la hora del servidor
De forma est√°ndar, los siguientes controles indican valores con la hora del cliente:
‚óè Visor de avisos
‚óè Tabla de valores
‚óè Visor de curvas
‚óè Visor de curvas f(x)
‚óè Visor de tablas
Para sincronizar la hora indicada en el cliente con el servidor, haga lo siguiente:
‚óè Dispositivos iOS:
Para evitar que un dispositivo iOS se sincronice con time.apple.com, cree un archivo de
perfil y c√°rguelo en el dispositivo.
Los archivos de perfil permiten sincronizar la hora en una red corporativa segura.
‚óè Dispositivos Android:
Utilice una aplicaci√≥n de terceros para sincronizar la hora.

Uso de scripts con un tiempo de ciclo reducido
Las llamadas s√≠ncronas de scripts pueden producir una sobrecarga con tiempos de ciclo
reducidos.

120

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime

3.8.5.7

Trabajar con objetos y vistas de la instalaci√≥n

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

3.8.5.8

Navegador de Internet para WinCC Runtime Unified
WinCC Unified muestra los elementos de runtime en HTML5. El navegador utilizado debe
soportar dicho est√°ndar. Dado que no todos los navegadores interpretan HTML5 de la misma
manera, es posible que algunos objetos tengan una apariencia distinta seg√∫n la versi√≥n de
navegador utilizada.
Se han realizado pruebas de compatibilidad con los siguientes navegadores: Las pruebas de
compatibilidad se centraron en los navegadores marcados con un asterisco *
Sistema operativo

Navegador

Microsoft Windows

‚óè Google Chrome*
‚óè Microsoft Edge
‚óè Mozilla Firefox, Mozilla Firefox ESR

Android

‚óè Google Chrome*
‚óè Firefox
‚óè Edge

iOS, Mac

‚óè Safari*
‚óè Google Chrome
‚óè Firefox
‚óè Edge

Navegador recomendado
El navegador que ofrece mejor resultado en cuanto a rendimiento y compatibilidad con los
elementos est√°ndar de runtime es Google Chrome. Sin embargo, consume algo m√°s de
memoria que los dem√°s navegadores.
Nota
Versi√≥n del sistema operativo y el navegador
Si va a manejar el runtime con Android o iOS utilice siempre la √∫ltima versi√≥n del sistema
operativo.
Utilice la √∫ltima versi√≥n del navegador.
Nota
Diferencias de rendimiento en las diferentes versiones de los navegadores
En ocasiones, las versiones de los navegadores difieren entre s√≠, lo cual puede dar lugar a
diferencias de comportamiento en cuanto a consumo de memoria y velocidad.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

121

WinCC
3.8 Runtime
Nota
Idoneidad para el uso permanente
MS Edge y Mozilla Firefox no han dado buenos resultados en funcionamiento continuo.

Problemas conocidos con navegadores
Limitaciones para el uso de navegadores:
Navegador de Internet

Limitaci√≥n

MS Edge

‚óè No es posible cambiar de imagen
‚óè Carga muy elevada de la capacidad de memoria en servicio
permanente
‚óè Al abrir el Runtime iniciado en MS Edge con la direcci√≥n https://
localhost aparece el mensaje de error
INET_E_RESOURCE_NOT_FOUND. Utilice la direcci√≥n https://
localhost/WebRH para iniciar sesi√≥n

Mozilla Firefox

‚óè Carga elevada de la capacidad de memoria en servicio
permanente

Mozilla Firefox ESR

‚óè Soporte de gestos t√°ctiles para paneles t√°ctiles a partir de Firefox
ESR V59

Google Chrome

‚óè Carga elevada de la capacidad de memoria en servicio
permanente, seg√∫n la versi√≥n.
‚óè En Android: las l√≠neas de cuadr√≠cula con un grosor ‚â§1 no se
muestran correctamente. Esto est√° relacionado con la
representaci√≥n de grosores de l√≠nea propia del navegador. La
soluci√≥n que se ofrece es utilizar un grosor de l√≠nea ‚â•1.
‚óè No se muestran correctamente los elementos que utilizan como
gr√°fico de fondo un gr√°fico SVG que se ha escalado en el
sistema de ingenier√≠a.

Siguen existiendo limitaciones en distintas funciones, como, p. ej., la disponibilidad de los
botones Antes y Despu√©s en los controles.

Informaci√≥n actualizada sobre problemas con el navegador
En Siemens Online Support encontrar√° informaci√≥n actualizada sobre los problemas de
visualizaci√≥n en los navegadores indicando el n√∫mero de art√≠culo 109757952.

3.8.5.9

Activar y comprobar licencias ASIA

Sinopsis
Las claves de licencia para WinCC Runtime Unified se entregan en el medio de
almacenamiento de licencias "License Key USB Hardlock".

122

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime
Gracias a la conversi√≥n a Unicode, es posible ejecutar la versi√≥n con licencia ASIA en paralelo
con la versi√≥n europea.
El "License Key USB Hardlock" (llave de protecci√≥n contra copia o dongle) controla los
requisitos siguientes:
‚óè Idioma de la interfaz de usuario de WinCC
‚óè Idioma de runtime
‚óè En el proyecto WinCC se utilizan caracteres asi√°ticos.
‚óè Configuraci√≥n del sistema operativo
Nota
El uso de WinCC en el modo Proceso no est√° permitido sin las licencias v√°lidas.
Borrado de los idiomas del proyecto
Si no dispone de licencia para una versi√≥n asi√°tica y borra los idiomas de configuraci√≥n
asi√°ticos, el proyecto WinCC seguir√° funcionando en modo de demostraci√≥n.
Para desactivar el modo de demostraci√≥n, cierre el proyecto WinCC. Al volver a abrirlo se
detectar√° que el proyecto WinCC ya no necesita licencias para una versi√≥n ASIA.

Comprobar la validez de las licencias
Si inicia una versi√≥n de WinCC con licencia correcta y sin el enchufe de protecci√≥n anticopia,
aparecer√° un mensaje de error. Este mismo mensaje de error aparece al cabo de algunos
minutos si retira la llave de protecci√≥n del equipo con una versi√≥n WinCC con licencia correcta.
Si no aparece este mensaje de error, significa que est√° instalada una versi√≥n de WinCC sin
licencia. En este caso no se dispone de autorizaci√≥n de uso de WinCC. Desinstale esta versi√≥n
de WinCC y adquiera una versi√≥n legal de WinCC con licencia.
En caso necesario, dir√≠jase al soporte t√©cnico de WinCC indicando el n√∫mero de serie de su
versi√≥n de software:
‚óè http://www.automation.siemens.com/partner/index.asp
Encontrar√° el n√∫mero de serie en el "Certificate of License" (CoL).

Trabajar con el "License Key USB Hardlock"
Tenga en cuenta las siguientes notas:
‚óè No edite datos en el "License Key USB Hardlock".
No se permiten, entre otras, las siguientes acciones:
‚Äì Cambiar el nombre de datos
‚Äì Borrar datos
‚Äì Copiar datos en el "License Key USB Hardlock".
‚óè No formatee el "License Key USB Hardlock".
‚óè No retire el "License Key USB Hardlock" del PC mientras WinCC est√© funcionando.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

123

WinCC
3.8 Runtime

ATENCI√ìN
No retirar la llave de protecci√≥n "License Key USB Hardlock"
Si se retira la llave de protecci√≥n contra copia del equipo, se muestra un mensaje de error y
WinCC pasa al modo de demostraci√≥n.
Al volver a conectar la llave de protecci√≥n al equipo se oculta el mensaje de error y se
desactiva el modo de demostraci√≥n. WinCC trabaja otra vez en el modo con licencia.

3.8.5.10

L√©ame de WinCC Plant Intelligence Options

Informaci√≥n de seguridad
Informaci√≥n de seguridad
Siemens suministra productos y soluciones con funciones de seguridad industrial con el
objetivo de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral que sea conforme a la tecnolog√≠a m√°s avanzada. Los productos y las
soluciones de Siemens constituyen √∫nicamente una parte de este concepto.
El cliente es responsable de impedir el acceso no autorizado a sus instalaciones, sistemas,
m√°quinas y redes. Los sistemas, las m√°quinas y los componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej., uso de
cortafuegos y segmentaci√≥n de la red).
Adicionalmente, deber√°n observarse las recomendaciones de Siemens en cuanto a las
medidas de protecci√≥n correspondientes. Encontrar√° m√°s informaci√≥n sobre seguridad
industrial en
http://www.siemens.com/industrialsecurity (.com/topics/global/en/industrial-security/Pages/
Default.aspx)
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de mejorar todav√≠a m√°s su seguridad. Siemens recomienda expresamente realizar
actualizaciones en cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los
productos. El uso de versiones anteriores o que ya no se soportan puede aumentar el riesgo
de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en
http://www.siemens.com/industrialsecurity (.com/topics/global/en/industrial-security/Pages/
Default.aspx)

124

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.8 Runtime

Consulte tambi√©n
Industrial Security (.com/topics/global/en/industrial-security/Pages/Default.aspx)

Indicaciones relativas al uso
Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Line Coordination
Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Limitaci√≥n al retener/reiniciar √≥rdenes
Si utiliza los comandos "Retener" y "Reiniciar" al controlar las √≥rdenes, configure las l√≠neas de
sincronizaci√≥n en los procedimientos de manera que se utilicen solamente los primeros o los
√∫ltimos puntos de sincronizaci√≥n de las secuencias.

Requisitos para ejecutar las √≥rdenes
Para ejecutar las √≥rdenes es necesario que todos los secuenciadores de una unidad parcial
utilizada en el procedimiento est√©n conmutados en modo Auto.
Aseg√∫rese de que ning√∫n secuenciador de una unidad parcial utilizada en el procedimiento se
encuentre en el modo manual. Los secuenciadores de la unidad parcial utilizada que no se
est√©n utilizando actualmente en el procedimiento tambi√©n deben estar conmutados en modo
Auto.

Sequence Execution
Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

125

WinCC
3.8 Runtime

Performance Insight
Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Calendar
Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

126

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.9 Paneles de operador

3.9

Paneles de operador

3.9.1

Indicaciones acerca de paneles de operador

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Paneles de operador no soportados (a partir de TIA Portal V15)
A partir de TIA Portal V15 no se soportan los panales de la versi√≥n 11.x.
A partir de TIA Portal V15 no se soportan los siguientes paneles de operador:
‚óè WinAC MP 177, WinAC MP 277, WinAC MP 377
‚óè Panels: OP y TP de las series 70, 170 y 270
‚óè Multi Panels: Multi Panels de las series 170, 270 y 370
Para poder utilizar otros dispositivos en TIA Portal V15, (p. ej., Basic, Comfort o Mobile Panels)
que hayan sido configurados con la versi√≥n 11.x, cambie la versi√≥n del dispositivo afectado.
La estructura de almacenamiento del directorio de instalaci√≥n ya no contiene datos para 11.0.
De este modo se reduce el tama√±o del paquete de instalaci√≥n del TIA Portal con respecto a las
versiones anteriores.

Paneles de operador no soportados (a partir de TIA Portal V15.1)
A partir de TIA Portal V15.1 ya no se soportan los siguientes paneles de operador:
‚óè WinCC Runtime Advanced V11

Paneles de operador no soportados (a partir de TIA Portal V16)
A partir de TIA Portal V15.1 ya no se soportan los siguientes paneles de operador:
‚óè Mobile Panel de la versi√≥n 12.x
‚óè Comfort Panel de la versi√≥n 12.x
‚óè KP1500 Comfort de la versi√≥n 13.x
‚óè TP1500 Comfort de la versi√≥n 13.x
‚óè TP1900 Comfort de la versi√≥n 13.x
‚óè TP2200 Comfort de la versi√≥n 13.x

L√©ame
Manual de programaci√≥n y manejo, 11/2019

127

WinCC
3.9 Paneles de operador

Manejo simult√°neo de varias teclas
El manejo simult√°neo de varias teclas puede provocar acciones no intencionadas:
‚óè En caso de utilizar un dispositivo con teclado, no est√° permitido accionar m√°s de dos teclas
de funci√≥n a la vez.
‚óè En caso de utilizar un dispositivo t√°ctil, un PC est√°ndar o un Panel PC, no est√° permitido
accionar m√°s de una tecla de funci√≥n o bot√≥n a la vez.

Paneles de operador con elevada carga de comunicaci√≥n
Si en un panel se han configurado muchas conexiones con controladores u otros paneles de
operador, el diagn√≥stico S7 debe estar desactivado. De lo contrario, hay peligro de que el panel
se sobrecargue.

TS Adapter con interfaz Ethernet
Si un panel de operador est√° conectado a trav√©s de Ethernet y de un TS Adapter, no podr√°
restablecerse la configuraci√≥n de f√°brica.

Simulaci√≥n con conexi√≥n real al controlador
El punto de acceso utilizado por la simulaci√≥n es independiente de los ajustes en el
Engineering System y √∫nicamente puede modificarse con la herramienta "Ajustar interface PG/
PC" en el Panel de control. Si la conexi√≥n con un controlador se deshace directamente
despu√©s de arrancar la simulaci√≥n y se genera el aviso 140001, deber√≠a verificar el punto de
acceso utilizado por la simulaci√≥n con "Ajustar interface PG/PC".
1. Haga doble clic en "Ajustar interface PG/PC" dentro del Panel de control. Se abre un cuadro
de di√°logo.
2. Seleccione en el √°rea "Punto de acceso de la aplicaci√≥n" "S7ONLINE" de manera est√°ndar
para HMI.
3. Seleccione la interface en el √°rea "Parametrizaci√≥n de interface utilizada".
4. Finalice el cuadro de di√°logo "Ajustar interface PG/PC" con Aceptar.

Simulaci√≥n de Basic Panels
Para la salida de una variable externa utilice un campo de salida en un texto de aviso. En la
simulaci√≥n se mostrar√° siempre un "0" como contenido de este campo de salida.

Basic Panels 2nd Generation
Los Basic Panels 2nd Generation soportan la opci√≥n Sm@rtServer.
Si no utiliza ning√∫n hub USB, seleccione el puerto USB USB_X60.1 como ruta de
almacenamiento.

128

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.9 Paneles de operador

Paneles de operador con el sistema operativo Windows CE 5.0 y superior
Debido a un cambio en los ajustes de seguridad de la comunicaci√≥n entre cliente y servidor, la
diferencia horaria entre un panel de operador (cliente) y un PC (servidor) no puede ser superior
a 1 d√≠a. Si guarda una copia de seguridad, p. ej., de datos de recetas del panel de operador en
una unidad de red, aseg√∫rese de que la hora del PC (servidor) y del panel de operador (cliente)
est√© ajustada correctamente.

Cambio de conexi√≥n en el Control Panel de Basic Panels
Si se utiliza la funci√≥n "Override projected connection information", hay que tener en cuenta la
restricci√≥n siguiente:
En el Control Panel de un Basic Panel no es posible cambiar la conexi√≥n de un controlador sin
nivel de protecci√≥n a un controlador con el nivel de protecci√≥n "Protecci√≥n completa".

Imprimir avisos (Mobile Panel)
No es posible imprimir avisos en formato PDF o HTML, si se ha seleccionado la memoria
interna "/flash" como "Storage Location". Para imprimir avisos en formato PDF o HTML,
seleccione una tarjeta de memoria SD o un l√°piz USB como ubicaci√≥n.

DHCP en KTP 400 PN, KTP 700 PN y KTP 900 PN
No se recomienda el uso de los paneles KTP 400 PN, KTP 700 PN y KTP 900 PN con DHCP
Bajo determinadas circunstancias puede suceder que el dispositivo ya no arranque. En tal
caso, desenchufe el cable de red y reinicie el dispositivo. Despu√©s de arrancar correctamente,
asigne una direcci√≥n IP.

Mobile Panel
Los Mobile Panels 2nd Generation pueden configurarse con TIA Portal V16 en la versi√≥n de
dispositivo V15. Sin embargo, el proyecto compilado no puede cargarse en estos paneles.
Para poder trabajar en TIA Portal V16 con Mobile Panels 2nd Generation, es preciso actualizar
por lo menos a la versi√≥n de dispositivo V15.1.

Sm@rtServer con Mobile Panels
La evaluaci√≥n del manejo de seguridad mediante PROFIsafe solo se garantiza si
Sm@rtServer est√° desactivado en el panel.
No se recomienda el uso de Sm@rtServer en dispositivos sin funci√≥n de seguridad.

Simulaci√≥n de Basic Panels 2nd Generation
Para la simulaci√≥n de los Basic Panels 2nd Generation deber√≠a estar activada la aceleraci√≥n
de hardware 3D de la tarjeta gr√°fica.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

129

WinCC
3.9 Paneles de operador

Instalaci√≥n de fuentes
Si ha instalado con ProSave nuevos juegos de caracteres en un panel, es preciso reiniciar el
panel. La duraci√≥n del proceso de inicio del runtime depende del n√∫mero y tama√±o de las
fuentes.

Interrupci√≥n de la conexi√≥n DH485
Si, en el caso de los Comfort Panels, el cable Ethernet se conecta a la conexi√≥n "PN_X1" del
panel HMI, puede interrumpirse la conexi√≥n DH485.
Soluci√≥n para Comfort Redesign/PRO-Panels: Al ejecutar el proyecto DH485 en el panel HMI,
utilice la conexi√≥n "PN_X3(Gigabit)" para la comunicaci√≥n Ethernet.

Funci√≥n VB "CDate" (Comfort Panels)
En los siguientes paneles de operador solo puede utilizar la funci√≥n VB "CDate" con
par√°metros est√°ticos:
‚óè TP1200 Comfort Pro
‚óè TP1500 Comfort Pro / V2
‚óè TP1900 Comfort Pro / V2
‚óè TP2200 Comfort Pro / V2

130

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.9 Paneles de operador

Borrar cach√© del navegador (Panel)
Si observa que la carga de p√°ginas web en el navegador HTML requiere m√°s tiempo del
habitual, la causa puede ser la cach√© del navegador. Ejecute la siguiente funci√≥n de VBS en
runtime para borrar la cach√© del navegador. Asimismo, puede programar esta funci√≥n de VBS
como tarea peri√≥dica en el planificador de tareas.

Sub T7_DeleteBrowserCache()
' delete Browsercache filled temporary objects
Dim fso, nFileIndex,sFileName, nFileAttr, folder
On Error Resume Next
' Variable to show script is active
SmartTags("DeleteBrowserCacheActive") = True
folder = "\flash\simatic\Browsercache\data7\"
' Windows CE
Set fso = CreateObject("FileCtl.FileSystem")
' Get first item that matches path
sFileName = fso.Dir(folder & "*.*")
nFileIndex = 0
'Get the rest of matches
Do While sFileName <> ""
nFileAttr = fso.GetAttr(folder & sFileName)
If (nFileAttr And 16) <> 0 Then
fso.Kill("\flash\simatic\Browsercache\data7\"&sFileName&"\*.*")
If Err.Number <>0 Then
Err.Clear
End If
End If
nFileIndex = nFileIndex + 1
sFileName = fso.Dir
Loop
Set fso = Nothing
SmartTags("DeleteBrowserCacheActive") = False
End Sub

Consulte tambi√©n
PI Mobile (https://support.industry.siemens.com/cs/ww/en/view/109758056)

L√©ame
Manual de programaci√≥n y manejo, 11/2019

131

WinCC
3.10 Opciones

3.10

Opciones

3.10.1

Sm@rtServer

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Abrir archivos *.sac SmartClient en Windows 10
Los datos de la conexi√≥n SmartServer actual se guardan con ayuda del archivo ejecutable
SmartClient.exe con el formato *.sac. Para abrir autom√°ticamente los archivos generados as√≠
en Windows 10, debe abrirse una vez manualmente un archivo *.sac con SmartClient.exe con
el bot√≥n de selecci√≥n y el cuadro de di√°logo de SmartClient.exe.

3.10.2

Audit

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Actualizaci√≥n de WinCC Audit Viewer 7.2
Para WinCC Audit Viewer 7.2, instalable opcionalmente, tiene a su disposici√≥n una
actualizaci√≥n para instalarla manualmente.
Instale la actualizaci√≥n para WinCC Audit Viewer 7.2 ejecutando el archivo
"AuditViewer_V72_00_Upd1.exe" del directorio Support del DVD de producto.

3.10.3

DataMonitor

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

132

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.10 Opciones

Desinstalaci√≥n de WinCC Runtime
Para poder continuar utilizando el DataMonitor tras desinstalar WinCC Runtime Professional,
es necesario reparar la instalaci√≥n. Para ello proceda del siguiente modo:
1. Abra el Panel de control.
2. Haga doble clic en "Agregar o quitar programas".
3. En la lista de los programas instalados, haga clic en "SIMATIC WinCC/DataMonitor Client"
4. Haga clic en el bot√≥n "Cambiar o quitar".
5. Seleccione la opci√≥n "Reparar" en el programa de instalaci√≥n de WinCC/DataMonitor.

Excel-Workbook en un PC con Windows 7
Si se utiliza Excel-Workbook en un PC con Windows 7 hay que desactivar la representaci√≥n
"Aero Glass".

Visor de diagn√≥stico de canal
El objeto "Visor de diagn√≥stico de canal" no est√° soportado por la opci√≥n WinCC DataMonitor.

Zonas horarias de WebParts
Si en el Webcenter crea y configura un WebPart (elemento web) bajo una determinada zona
horaria, esa zona horaria se guardar√° en el Webcenter.
Una modificaci√≥n del huso horario en el sistema operativo puede hacer que la hora no se
indique correctamente en la WebPart.

3.10.4

WebNavigator

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Desinstalaci√≥n de WinCC Runtime
Para poder continuar utilizando DataMonitor tras desinstalar WinCC Runtime Professional, es
necesario reparar la instalaci√≥n. Para ello proceda del siguiente modo:
1. Abra el Panel de control.
2. Haga doble clic en "Agregar o quitar programas".
3. En la lista de los programas instalados, haga clic en "SIMATIC WinCC/WebNavigator
Client"

L√©ame
Manual de programaci√≥n y manejo, 11/2019

133

WinCC
3.10 Opciones
4. Haga clic en el bot√≥n "Cambiar o quitar".
5. Seleccione la opci√≥n "Reparar" en el programa de instalaci√≥n de WinCC/WebNavigator.

Programa antivirus Trend Micro OfficeScan
No se recomienda la utilizaci√≥n del programa antivirus Trend Micro OfficeScan en combinaci√≥n
con WebNavigator, pues este programa antivirus puede prolongar el tiempo de apertura de las
im√°genes.

Vista general de ProDiag, Vista general de GRAPH y Visor de c√≥digo PLC
No se admite el uso de los objetos WinCC "Vista general de GRAPH", "Vista general de
ProDiag" y "Visor de c√≥digo PLC" en la opci√≥n de WinCC Web Navigator.

Caracteres no permitidos en WinCC WebNavigator
En los nombres de imagen y nombres de proyecto, utilice caracteres del juego de caracteres
ASCII. No utilice caracteres especiales ni caracteres nacionales especiales.

Diagn√≥stico de canal
El objeto "Diagn√≥stico de canal" no est√° soportado por la opci√≥n WinCC WebNavigator.

Retardo al visualizar las im√°genes de WebNavigator
Gracias a la tecnolog√≠a de servidor puede suceder que las im√°genes WebNavigator se
visualicen retardadas.

3.10.5

WebUX

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Inicio de sesi√≥n autom√°tico
Si ya no desea iniciar sesi√≥n autom√°ticamente, deber√° borrar el historial de navegaci√≥n en el
navegador correspondiente.

134

L√©ame
Manual de programaci√≥n y manejo, 11/2019

WinCC
3.10 Opciones

3.10.6

Redundancia

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Nombres en la configuraci√≥n de un sistema redundante
Para la configuraci√≥n de un sistema redundante solo son relevantes los nombres de equipo de
los paneles de operador. El nombre de equipo de un panel de operador se define en el
respectivo sistema operativo. El nombre del panel de operador en el √°rbol del proyecto solo
sirve para identificar el panel de operador en el proyecto.

3.10.7

SIMATIC Information Server

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Instalaci√≥n de SIMATIC Information Server y WinCC Runtime Professional en un PC
Para instalar el SIMATIC Information Server y WinCC Runtime Professional en un PC, siga el
orden de instalaci√≥n siguiente:
1. Instale WinCC Runtime Professional.
2. Instale el Information Server.
Si no se observa el orden de instalaci√≥n pueden producirse problemas.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

135

WinCC
3.10 Opciones

136

L√©ame
Manual de programaci√≥n y manejo, 11/2019

4

Safety
4.1

Informaci√≥n de seguridad
Siemens ofrece productos y soluciones con funciones de seguridad industrial con el objetivo
de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral que sea conforme a la tecnolog√≠a m√°s avanzada. Los productos y las
soluciones de Siemens constituyen √∫nicamente una parte de este concepto.
Los clientes son responsables de impedir el acceso no autorizado a sus instalaciones,
sistemas, m√°quinas y redes. Dichos sistemas, m√°quinas y componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej. uso de cortafuegos
y segmentaci√≥n de la red).
Para obtener informaci√≥n adicional sobre las medidas de seguridad industrial que podr√≠an ser
implementadas, por favor visite (https://www.siemens.com/industrialsecurity).
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de mejorar todav√≠a m√°s su seguridad. Siemens recomienda expresamente realizar
actualizaciones en cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los
productos. El uso de versiones anteriores o que ya no se soportan puede aumentar el riesgo
de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en (https://www.siemens.com/
industrialsecurity).

L√©ame
Manual de programaci√≥n y manejo, 11/2019

137

Safety
4.2 Notes on use

4.2

Notes on use

Content
Notes that could not be taken into account in the online help and the manual.

The manual as PDF file
The "SIMATIC Safety - Configuring and Programming" manual was stored in the installation
folder of STEP 7 Professional or STEP 7 Basic in the "Manuals" subfolder during installation of
the STEP 7 Safety optional package.

138

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Safety
4.3 Editing devices and networks

4.3

Editing devices and networks

4.3.1

General notes on devices and networks

Roaming User Profiles not supported
You cannot use STEP 7 Safety in a roaming user profile. The software has only limited
functionality under these circumstances. Contact your domain administrator if you have a
roaming user profile.

Installation of HSPs
Make that all HSPs required in the project are installed before you work with the project.

Configuring phase shifting for the F-OB
Assign phase shift parameters for an F-OB using the following formula:
Phase shift < Max_Cyc - Cyclic interrupt time

L√©ame
Manual de programaci√≥n y manejo, 11/2019

139

Safety
4.4 Programming PLC

4.4

Programming PLC

4.4.1

General Notes on PLC Programming and on Acceptance

Content
Notes that could not be taken into account in the online help and the manual.

What do you need to observe with regard to the installation of STEP 7 Safety?
After the installation of STEP 7 Safety, your safety program will be shown as inconsistent in
the Safety Administration Editor. Initiate compilation of the safety program. You will obtain a
consistent safety program as a result. The collective F-signature of your safety program
remains unchanged.

Online functions
‚óè It is not possible to open F-blocks via the Lifelist with STEP 7 Safety. You have to have the
corresponding project opened offline in order to use all of the online functions for F-blocks.
‚óè Use the Safety Administration Editor for the offline-online comparison if you wish to view the
checksums of F-blocks.

Upgrading to STEP 7 Safety V16
‚óè After upgrading a project that contains S7-300/400 F-CPUs, we recommend executing the
command "Compile > Software (rebuild all blocks)".
‚óè The name of the F-I/O is a component of the name of the associated F-I/O DB. In earlier
versions of STEP 7 Safety, it was not always ensured that this component was identical to
the name of the F-I/O. This is corrected with the upgrade to STEP 7 Safety V15. This does
not change the functionality or the collective signature of your safety program. However,
since the names of the F-I/O DBs have changed, you should generate an up-to-date safety
summary after the upgrade and add it to your acceptance documents.

Supplement to the section "CTD: Count down (STEP 7 Safety V16)" and section "CTUD: Count up and
down (STEP 7 Safety V16)"
If you use the CTD or CTUD instruction with version 1.1 in a know-how-protected block, you
must open the block by entering the password before compiling in order to change the version
of the CTD or CTUD instruction to a version other than V1.1.
The same applies if you want to change the version of the CTD or CTUD instruction from a
version other than V1.1 to version V1.1.

140

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Safety
4.4 Programming PLC

Compiling the safety program
The collective F-signature is determined in STEP 7 Safety V15.1 when you compile the safety
program and shown in the Safety Administration Editor under "Code signature". The collective
F-signature is valid but the safety program can still be inconsistent. This is the case when the
hardware configuration is not up-to-date (compiled).
Compile the hardware configuration to obtain a consistent safety program. The collective Fsignature does not change as a result.

Openness
Importing and exporting F-blocks is not supported by the Openness command set.

Start values of tags in the block interface
You can also assign start values in F-blocks for tags (e. g. in the static selection), and use
constants from the TAG table (global constants) or the CONST selection (local constants) for
this.
Note that the F-blocks which use global constants as start values must not be called as a multiinstance because in this case the F-CPU can go into STOP. This is not the case when using
local constants as start values.
To avoid CPU STOP, you have to avoid using global constants as start values, or use only
single-instance calls for blocks where this is the case. This applies to the blocks themselves, as
well as for all blocks which call these blocks, including everything up to Main Safety (complete
call sequence).

Multiuser Engineering
Please note that in a local session, it is not possible to check in communication IDBs for Flexible
F-Link on the multi-user server. This means you have to make changes to the start values in the
server-project view, as they will otherwise be overwritten when updating the local session.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

141

Safety
4.4 Programming PLC

142

L√©ame
Manual de programaci√≥n y manejo, 11/2019

L√©ame de SIMATIC Energy Suite
5.1

5

Informaci√≥n de seguridad
Siemens ofrece productos y soluciones con funciones de seguridad industrial con el objetivo
de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral que sea conforme a la tecnolog√≠a m√°s avanzada. Los productos y las
soluciones de Siemens constituyen √∫nicamente una parte de este concepto.
El cliente es responsable de impedir el acceso no autorizado a sus instalaciones, sistemas,
m√°quinas y redes. Los sistemas, las m√°quinas y los componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej. uso de cortafuegos
y segmentaci√≥n de la red).
Adicionalmente, deber√°n observarse las recomendaciones de Siemens en cuanto a las
medidas de protecci√≥n correspondientes. Encontrar√° m√°s informaci√≥n sobre seguridad
industrial en (http://support.automation.siemens.com).
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de mejorar todav√≠a m√°s su seguridad. Siemens recomienda expresamente realizar
actualizaciones en cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los
productos. El uso de versiones anteriores o que ya no se soportan puede aumentar el riesgo
de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en (http://
support.automation.siemens.com).

Consulte tambi√©n
Protecci√≥n de datos (P√°gina 144)

L√©ame
Manual de programaci√≥n y manejo, 11/2019

143

L√©ame de SIMATIC Energy Suite
5.2 Protecci√≥n de datos

5.2

Protecci√≥n de datos
Siemens tiene en cuenta los principios de la protecci√≥n de datos, particularmente el de la
minimizaci√≥n de datos (protecci√≥n de datos integrada). Esto significa para este producto
SIMATIC que no se procesan ni almacenan datos personales.

144

L√©ame
Manual de programaci√≥n y manejo, 11/2019

L√©ame de SIMATIC Energy Suite
5.3 Novedades de SIMATIC Energy Suite V16

5.3

Novedades de SIMATIC Energy Suite V16

Novedades de Energy Suite V16
Todas las novedades importantes de Energy Suite V16 se resumen a continuaci√≥n.

Gesti√≥n de cargas
‚óè El componente de la gesti√≥n de cargas asume una funci√≥n de vigilancia en Energy Suite y
garantiza que el consumo de potencia y energ√≠a no exceda el l√≠mite de energ√≠a definido por
el usuario. El componente de la gesti√≥n de cargas incluye un elemento importante definido
por el usuario: los denominados actuadores.
Un programa de gesti√≥n de cargas consta, por ejemplo, de los siguientes bloques:
‚Äì Bloque de previsi√≥n
‚Äì Bloque de control
‚Äì Bloque de actuadores
‚Äì Bloque de copia de seguridad/restauraci√≥n
El bloque de previsi√≥n recibe los datos de entrada de la alimentaci√≥n; es decir, del objeto
de adquisici√≥n. Por ejemplo, en una central el√©ctrica, la alimentaci√≥n es el suministro desde
la red el√©ctrica. El bloque de previsi√≥n calcula o prev√© el valor de potencia y energ√≠a medio
que determinar√° la alimentaci√≥n al final del periodo de tiempo establecido.
Considere la posibilidad de vigilar una planta de producci√≥n mediante un componente de
gesti√≥n de cargas. El bloque de previsi√≥n lee el valor de potencia de la entrada de
alimentaci√≥n y vigila el consumo de potencia. Se vigila constantemente el aprovechamiento
de la energ√≠a en relaci√≥n con un valor l√≠mite durante un periodo de tiempo determinado. Si
la previsi√≥n excede el valor l√≠mite, la gesti√≥n de cargas hace que se desactiven los
consumidores (actuadores) o a los productores. Este proceso se denomina "escalada".
Tras el pico del valor de umbral, cuando el consumo de potencia es m√≠nimo o se encuentra
dentro del valor de umbral, se conecta el generador (actuador). Este proceso se denomina
"desescalada".
‚óè La generaci√≥n delta para la gesti√≥n de cargas y los objetos de adquisici√≥n est√° soportada;
los bloques de actuadores agregados o modificados de los objetos de adquisici√≥n/gesti√≥n
de cargas se a√±aden a los bloques existentes tras la generaci√≥n. En caso de borrado, solo
se borran los bloques seleccionados tras la generaci√≥n, sin modificar los bloques
existentes.
‚óè La creaci√≥n autom√°tica de reglas de pantalla para bloques en Energy Suite est√° soportada.
‚óè Generaci√≥n de pantalla
‚Äì Soporte de la generaci√≥n de pantalla autom√°tica para el programa de medici√≥n del
consumo de energ√≠a con aparatos WinCC Professional y Comfort
‚Äì Soporte de la generaci√≥n de pantalla autom√°tica para el programa de gesti√≥n de cargas
con aparatos WinCC Professional

L√©ame
Manual de programaci√≥n y manejo, 11/2019

145

L√©ame de SIMATIC Energy Suite
5.3 Novedades de SIMATIC Energy Suite V16

Mejoras
‚óè Optimizaciones de rendimiento para el modo runtime para mejorar el aprovechamiento del
tiempo de ciclo del PLC en mediciones de largo plazo.
‚óè La generaci√≥n delta del programa de energ√≠a independiente del runtime para la adquisici√≥n
del consumo de energ√≠a y la gesti√≥n de cargas es posible cuando hay modificaciones delta,
como la agregaci√≥n o modificaci√≥n en el caso de los objetos de adquisici√≥n para la
adquisic√≥n o actuadores para la gesti√≥n de cargas.
‚óè Si al configurar un proyecto de Energy Suite agrega una nueva tabla de objetos de
adquisici√≥n, deber√° descargar WinCC.
‚óè Si inserta objetos de adquisici√≥n en la tabla de objetos de adquisici√≥n, deber√° descargar
WinCC.

146

L√©ame
Manual de programaci√≥n y manejo, 11/2019

L√©ame de SIMATIC Energy Suite
5.4 Novedades de SIMATIC Energy Suite V15.1

5.4

Novedades de SIMATIC Energy Suite V15.1

Novedades de Energy Suite V15.1
A continuaci√≥n se resumen todas las novedades importantes de Energy Suite V15.

Optimizaci√≥n de la conexi√≥n de hardware de medici√≥n como fuente de datos de energ√≠a
‚óè Energy Suite reconoce como fuente de datos de energ√≠a el siguiente hardware de medici√≥n
configurado con la interfaz integrada en STEP 7 (TIA Portal) o con el archivo de datos
maestros del aparato:
‚Äì ET 200SP AI Energy Meter 480VAC HF
‚Äì Arrancador suave 3RW55
‚óè Energy Suite detecta la configuraci√≥n del hardware de medici√≥n antes mencionado y crea
autom√°ticamente los respectivos bloques durante la generaci√≥n del programa de energ√≠a.
‚óè La librer√≠a de Energy Suite contiene faceplates instalados autom√°ticamente para la
visualizaci√≥n del programa de energ√≠a.
‚óè Un proyecto creado en Energy Suite V15.0 con archivado PLC genera un archivo de
registro de datos. Si abre ese mismo proyecto en V15.1, TIA Portal le solicitar√° que
actualice el proyecto a V15.1. Tras actualizar el proyecto a la versi√≥n V15.1 y una vez
finalizado el nuevo proceso de generaci√≥n y carga, se crea un nuevo archivo de registro de
datos.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

147

L√©ame de SIMATIC Energy Suite
5.5 Novedades de SIMATIC Energy Suite V14 SP1

5.5

Novedades de SIMATIC Energy Suite V14 SP1

Novedades de Energy Suite V14 SP1
Todas las novedades importantes con respecto a Energy Suite V14 est√°n resumidas a
continuaci√≥n.

Generaci√≥n del programa de energ√≠a tambi√©n para datos de energ√≠a avanzados
‚óè Para generar el programa de energ√≠a tambi√©n para datos de energ√≠a avanzados (p. ej.,
intensidades, tensiones, frecuencia, etc.), se ofrecen los siguientes comandos nuevos en
el men√∫ contextual del objeto "Objetos de energ√≠a" en el √°rbol del proyecto:
‚Äì Datos de energ√≠a b√°sicos
‚Äì Datos de energ√≠a b√°sicos y avanzados
‚Äì Datos de energ√≠a b√°sicos y avanzados (con valores m√≠nimos/m√°ximos)
‚óè Energy Suite reconoce qu√© datos de energ√≠a puede proporcionar el hardware de medici√≥n
correspondiente y crea autom√°ticamente los respectivos bloques durante la generaci√≥n del
programa de energ√≠a.
Encontrar√° m√°s informaci√≥n en el apartado "Generar el programa de energ√≠a" del manual del
usuario de SIMATIC Energy Suite.

Creaci√≥n autom√°tica de informes con Energy Suite Export Tool
‚óè Nueva creaci√≥n autom√°tica de informes a partir de plantillas de informe configurables.
‚óè Se ofrecen las siguientes periodicidades de informe autom√°ticas:
‚Äì Diaria
‚Äì Semanal
‚Äì Mensual
‚Äì Anual
‚óè Para analizar r√°pidamente los errores en caso de comportamiento inesperado, los
mensajes de error se almacenan localmente en "C:\Program Files (x86)\Siemens
\Automation\SCADA-RT_V11\WinCC\bin\config".
Encontrar√° m√°s informaci√≥n en el apartado "Evaluaci√≥n de los datos de energ√≠a con Energy
Suite Export Tool" del manual del usuario de SIMATIC Energy Suite.

Informaci√≥n detallada y respuestas sobre el progreso de generaci√≥n
‚óè Para una mejor reproducibilidad del proceso de generaci√≥n, se muestran informaci√≥n y
eventos sobre la generaci√≥n del programa de energ√≠a.
‚óè Con la funci√≥n "Ir a" puede saltar hasta la posici√≥n de la configuraci√≥n que sea relevante
para el evento en cuesti√≥n.
Encontrar√° m√°s informaci√≥n en el apartado "Generar el programa de energ√≠a" del manual del
usuario de SIMATIC Energy Suite.

148

L√©ame
Manual de programaci√≥n y manejo, 11/2019

L√©ame de SIMATIC Energy Suite
5.5 Novedades de SIMATIC Energy Suite V14 SP1

Ampliaci√≥n de la estructura de los metadatos
La estructura de los metadatos de los objetos de energ√≠a se ha ampliado para fines de
compatibilidad y an√°lisis.
Encontrar√° m√°s informaci√≥n en el apartado "Bloques Energy Suite" del manual del usuario de
SIMATIC Energy Suite.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

149

L√©ame de SIMATIC Energy Suite
5.6 Migraci√≥n de un proyecto de Energy Suite V14 SP1

5.6

Migraci√≥n de un proyecto de Energy Suite V14 SP1
Para migrar proyectos de Energy Suite de la versi√≥n V14 SP1 a V16 debe adaptarse
manualmente la instrucci√≥n "Get_IM_Data" de STEP 7 a la versi√≥n actual. De lo contrario, se
producir√°n errores de compilaci√≥n durante el proceso de compilaci√≥n.

Requisitos
‚óè Hay un proyecto de Energy Suite en la versi√≥n V14 SP1.
‚óè TIA Portal V16 con Energy Suite V16 est√° instalado.

Procedimiento
Para evitar errores de compilaci√≥n al migrar un proyecto de Energy Suite de V14 SP1 a V16,
proceda del modo siguiente:
1. Abra en V16 el proyecto creado en Energy Suite V14 SP1.
A continuaci√≥n, se abre el cuadro de di√°logo "Abrir proyecto".
2. En el cuadro de di√°logo "Abrir proyecto", haga clic en el bot√≥n "Actualizar".
3. Tras migrar correctamente el proyecto, abra la CPU SIMATIC S7-1500 configurada en el
√°rbol del proyecto.
4. Abra un bloque cualquiera (OB, FB o FC) debajo de la carpeta "Bloques de programa".
5. Abra la carpeta "Instrucciones avanzadas > Diagn√≥stico" en la Task Card "Instrucciones".
La instrucci√≥n "Get_IM_Data" tiene la versi√≥n "V1.2" en el ajuste predeterminado.
6. Seleccione la versi√≥n "V1.3" deseada en la lista desplegable.
7. A continuaci√≥n, reanude la generaci√≥n de su programa de energ√≠a.
8. Debajo de la CPU S7-1500 configurada haga clic en el objeto "Bloques de programa".
9. Elija el comando "Compilar > Software (compilar todos los bloques)" en el men√∫ contextual.
El programa de energ√≠a se compila. Para comprobar si la compilaci√≥n se ha llevado a cabo
correctamente, seleccione "Informaci√≥n > Compilar" en la ventana de inspecci√≥n.
Para evitar que se produzca un error debido a un conflicto de las versiones de las librer√≠as,
haga lo siguiente cuando migre proyectos Energy Suite de las versiones V15 e inferiores a la
versi√≥n V16:
‚óè En las instrucciones b√°sicas "Serialize" y "Deserialize" es preciso actualizar la versi√≥n
manualmente de V2.0 a V2.1.
‚óè En la instrucci√≥n avanzada "GetSMCinfo" es preciso actualizar la versi√≥n manualmente de
V1.0 a V1.1.

150

L√©ame
Manual de programaci√≥n y manejo, 11/2019

L√©ame de SIMATIC Energy Suite
5.7 Notas de uso

5.7

Notas de uso

Contenidos
La informaci√≥n de este texto tiene preferencia frente a los datos de otros documentos.
Lea detenidamente las indicaciones siguientes. Contienen informaci√≥n importante para la
instalaci√≥n y el uso. Lea las presentes indicaciones antes de iniciar la instalaci√≥n.
Tambi√©n encontrar√° informaci√≥n actualizada sobre Energy Suite en el portal informativo de
Siemens Industry Online Support.
Encontrar√° informaci√≥n sobre las instrucciones de servicio de SIMATIC Energy Support
Library en el archivo L√©ame "ReadMeEnSLenUS.chm" incluido en el soporte de instalaci√≥n.

Upgrade de proyectos
Un proyecto de Energy Suite creado en versiones anteriores a V16 con archivado de PLC
genera un archivo de registro de datos. Se aplican los escenarios siguientes para archivos de
registro de datos:
‚óè Si actualiza (upgrade) a V16 un proyecto de Energy Suite creado con una versi√≥n anterior
a V16 y luego carga el proyecto en el PLC sin generar el programa, el archivado del PLC
continuar√° en el mismo archivo de registro de datos.
‚óè Si actualiza (upgrade) a V16 un proyecto de Energy Suite creado con una versi√≥n anterior
a V16 con generaci√≥n del programa y luego carga el proyecto en el PLC, el archivado del
PLC continuar√° en un nuevo archivo de registro de datos.
‚óè Los n√∫meros de DB existentes cambian al actualizar (upgrade) proyectos hasta la versi√≥n
V16 durante una generaci√≥n delta.
‚óè Si actualiza (upgrade) a V16 un proyecto de Energy Suite creado con una versi√≥n anterior
a V15, deber√° borrar los bloques LAcycCOM manualmente en cuanto se haya actualizado
el proyecto y, a continuaci√≥n, volver a generar el programa de energ√≠a.
‚óè El DB LAcycCom_RequestBuffer est√° disponible entre los bloques del programa de
Energy Suite (prefijo "EnS").
‚óè Los proyectos de la versi√≥n V14 SP1 o V15 notifican errores de compilaci√≥n al compilar el
FB Ens_LmgtBackupRestore, si se actualiza a la V16 con la versi√≥n de firmware V2.8
estando activada la opci√≥n de pron√≥stico en la tabla de objetos de adquisici√≥n con
actuadores de gesti√≥n de cargas configurados.
‚óè En los proyectos de la versi√≥n V14 SP1 o V15 falla la generaci√≥n de un programa cuando
se actualiza a la versi√≥n V16 con un Datalog de m√°s de 26 caracteres.

Energy Suite en un proyecto multiusuario
Abra un proyecto multiusuario solo en la vista de proyectos de servidor y no en la sesi√≥n local.

Datos de energ√≠a de un hardware de medici√≥n
Al configurar el hardware de medici√≥n como fuente de datos de energ√≠a, dependiendo del
hardware de medici√≥n empleado se evaluar√°n distintos ajustes de tipos de datos.

L√©ame
Manual de programaci√≥n y manejo, 11/2019

151

L√©ame de SIMATIC Energy Suite
5.7 Notas de uso
La tabla siguiente muestra los ajustes necesarios para el hardware de medici√≥n soportado:
Hardware de medici√≥n

Tipo de datos de
energ√≠a

Unidad

Factor de norma‚Äê Valor de desborda‚Äê
lizaci√≥n
miento

AI EnergyMeter 480VAC ST Valor de conta‚Äê
dor de energ√≠a

Wh

1

1.000.000.000.000.
000 = 1 * 10^15 (*)

AI EnergyMeter 480VAC HF Valor de conta‚Äê
dor de energ√≠a

Wh

1

1.000.000.000.000.
000 = 1 * 10^15 (*)

SENTRON PAC3200/
PAC4200

Valor de conta‚Äê
dor de energ√≠a

Wh

1

1 * 10^12

SENTRON 3VA (ETU de 8)

Valor de conta‚Äê
dor de energ√≠a

Wh

1

4 * 10^12

SINAMICS AC/AC

Valor de potencia

W

1

-

SIMOCODE pro V PN

Valor de conta‚Äê
dor de energ√≠a

Wh

1

2.147.483.648.000

Arrancador de motor ET
200SP/M200D

Valor de potencia

W

1

-

Arrancador suave 3RW44

Valor de potencia

W

1

-

Arrancador suave 3RW55

Valor de potencia

W

1

-

(*) Aseg√∫rese de que el contador de energ√≠a muestre el valor de desbordamiento tanto en los
ajustes de Energy Suite como en la configuraci√≥n hardware de AI EnergyMeter 480VAC ST/
HF. La configuraci√≥n hardware se encuentra en la ventana de inspecci√≥n "Propiedades", en
"Par√°metros del m√≥dulo > Configuraci√≥n AI > Medici√≥n > Valor final del contador de energ√≠a".
Aseg√∫rese de que la parametrizaci√≥n coincida con la tabla de arriba.

Transferencia de datos al sistema SCADA
Si hace cambios en el programa de energ√≠a, vuelva a generarlo y c√°rguelo en la CPU.
Cargue las modificaciones en la CPU √∫nicamente si los bloques de b√∫fer est√°n vac√≠os. Al
cargar en la CPU (completa), la CPU se debe reiniciar a continuaci√≥n. Al cargar en la CPU (solo
cambios) se debe reinicializar el bloque de datos "EnS_BufferWorkDB". Encontrar√° m√°s
informaci√≥n al respecto en la ayuda en pantalla del sistema de informaci√≥n de TIA Portal.

Generaci√≥n del programa de energ√≠a
Compruebe los ajustes siguientes si falla la generaci√≥n del programa de energ√≠a:
‚óè Fuente de datos de energ√≠a: los aspectos siguientes se deben configurar seg√∫n el manual:
‚Äì Configuraci√≥n hardware del hardware de medici√≥n (v√©ase documentaci√≥n "Hardware
de medici√≥n para SIMATIC Energy Suite en el TIA Portal")
‚Äì Tipo de datos (v√©ase apartado "Datos de energ√≠a procedentes de bloques de datos")
‚Äì Reglas de nomenclatura (v√©ase apartado "Caracter√≠sticas y convenciones")
‚óè Per√≠odo de archivado: Cada objeto de adquisici√≥n tiene asignado exactamente un per√≠odo
de archivado.

152

L√©ame
Manual de programaci√≥n y manejo, 11/2019

L√©ame de SIMATIC Energy Suite
5.7 Notas de uso
‚óè Nombre del objeto de adquisici√≥n: El objeto de adquisici√≥n no puede tener el mismo
nombre que los objetos siguientes:
‚Äì Bloque de programa
‚Äì Objeto tecnol√≥gico
‚Äì Fuente externa
‚Äì Variable PLC
‚Äì Tipo de datos PLC
‚óè General: Los prefijos "EnS_" (salvo "EnS_EEm_" para el monitor de eficiencia energ√©tica
S7), "EnSL_" y "LAcycCom_" son prefijos del sistema reservados y no se utilizan en el
nombre de los objetos arriba mencionados.
Antes de volver a generar el programa de energ√≠a, aseg√∫rese de que se cumplan los ajustes
arriba mencionados.
‚óè El rango de valores para la gesti√≥n de cargas puede abarcar de 1 a 26 caracteres.
‚óè El rango de valores para el actuador de prioridades puede abarcar de 1 a 1999 caracteres.
Para compilar correctamente los dispositivos Comfort Panel con gesti√≥n de cargas y
adquisici√≥n de los datos de energ√≠a y generaci√≥n de SiVArc:
‚óè Es necesario borrar manualmente las variables HMI de tipo LMGT - variables internas y
EnS_Visu, ya que no son compatibles con WinCC Comfort.
‚óè Es necesario vincular las variables correspondientes para los objetos de ventana
emergente.
‚óè Si solamente se crea el programa de adquisici√≥n de energ√≠a en el PLC y las im√°genes con
la opci√≥n "Iniciar generaci√≥n SiVArc con di√°logo de selecci√≥n de estaciones" deber√° borrar
manualmente la tabla de variables "LMGT - variables internas".
En la configuraci√≥n de un proyecto Energy Suite:
‚óè Cada vez que agregue una tabla de objetos de adquisici√≥n deber√° descargar WinCC.
‚óè Al insertar objetos de adquisici√≥n en la tabla de objetos de adquisici√≥n, deber√° descargar
WinCC.

Bloques Energy Suite
EnS_CalcEnergyData: calcular valores de energ√≠a
El reset del contador de energ√≠a durante un periodo de archivado activo provoca un c√°lculo de
valores de energ√≠a negativos para este periodo.
EnSL_DrvBasic_Sina_vx: Registrar datos b√°sicos de energ√≠a
Contrariamente a lo expuesto en la documentaci√≥n "Hardware de medici√≥n para SIMATIC
Energy Suite en el TIA Portal", el c√≥digo de error "W#16#8011" no existe en el par√°metro de
salida "Status".

L√©ame
Manual de programaci√≥n y manejo, 11/2019

153

L√©ame de SIMATIC Energy Suite
5.7 Notas de uso

Valor l√≠mite para variables HMI
En la configuraci√≥n de runtime de la HMI, el nombre del PLC se agrega al nombre de la variable
si est√° activada la casilla de verificaci√≥n "Nombre de PLC como prefijo del nombre de variable
HMI". Tras generar la pantalla de SiVArc, a la que sigue la compilaci√≥n de la HMI, aparece un
mensaje de error si el nombre de la variable HMI excede una longitud de 128 caracteres.

154

L√©ame
Manual de programaci√≥n y manejo, 11/2019

TIA Portal Version Control Interface
6.1

6

Informaci√≥n de seguridad
Siemens ofrece productos y soluciones con funciones de seguridad industrial con el objetivo
de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral que sea conforme a la tecnolog√≠a m√°s avanzada. Los productos y las
soluciones de Siemens constituyen √∫nicamente una parte de este concepto.
El cliente es responsable de impedir el acceso no autorizado a sus instalaciones, sistemas,
m√°quinas y redes. Los sistemas, las m√°quinas y los componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej. uso de cortafuegos
y segmentaci√≥n de la red).
Adicionalmente, deber√°n observarse las recomendaciones de Siemens en cuanto a las
medidas de protecci√≥n correspondientes. Encontrar√° m√°s informaci√≥n sobre seguridad
industrial en:
https://www.siemens.com/industrialsecurity (https://www.siemens.com/global/en/home/
company/topic-areas/future-of-manufacturing/industrial-security.html)
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de mejorar todav√≠a m√°s su seguridad. Siemens recomienda expresamente realizar
actualizaciones en cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los
productos. El uso de versiones anteriores o que ya no se soportan puede aumentar el riesgo
de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en:
https://www.siemens.com/industrialsecurity (https://www.siemens.com/global/en/home/
company/topic-areas/future-of-manufacturing/industrial-security.html)

L√©ame
Manual de programaci√≥n y manejo, 11/2019

155

TIA Portal Version Control Interface
6.2 Indicaciones de uso

6.2

Indicaciones de uso

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

156

L√©ame
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico
A

I

Asi√°ticas, 8

ISO‚Äëon‚ÄëTCP, 36
ISO-Transport, 36

C
Cadena de caracteres, 63
Cargador de firmware ‚Äë GUI en chino, 36
Cargar
Comentarios de m√≥dulo, 32
de un dispositivo, 42
Comentarios de m√≥dulo, 32
Comparaci√≥n de elementos de librer√≠as, 10
Compatibilidad, 22, 62
Conexi√≥n online
Varias instancias del TIA Portal, 23
Conversiones, 66
Convertir cadena de caracteres, 63
CP 343-2, 32

D
Decimales, 9
DEMUX, 64
Desactivar, 66
Diagn√≥stico especial, 35
Diagn√≥stico especial ‚Äë GUI en chino, 36
Diagn√≥stico online de seguridad de CPs S7, 38
Direcci√≥n IP, 24

E
EC31-RTX, 32
ENO, 66
Entorno virtual, 12

F

L
Lector de tarjetas USB, 11
Librer√≠a, 10
Longitud de TSAP, 36

M
Memory Card, 11
Enchufar y desenchufar, 11
Migraci√≥n de la lista de protecci√≥n de acceso IP al
activar la seguridad, 38
Migraci√≥n de proyectos con CP Ethernet y seguridad
inform√°tica, 38
M√≥dulo
Desenchufar, 22
Enchufar, 22
M√≥dulos del S7-1200, 32
MUX, 63

P
Par√°metro K, 63, 64
Periferia, 43, 44
Petici√≥n de forzado abierta, 11
Petici√≥n de forzado permanente en la tarjeta SD, 11
PLCSIM, 42
Private Cloud, 12
Program_Alarm, 64

R

Fuentes, 8
Funcionamiento online, 23

Red, 42
Return, 65
Routing S7, 36

H

S

Hardware
Detecci√≥n, 35

S_CONV, 63
S7-1200, 32

L√©ame
Manual de programaci√≥n y manejo, 11/2019

157

√çndice alfab√©tico

S7-Port Configuration Tool, 24
Seguridad, 42
Service Packs .Net, 8
SET, 63
SIMATIC S7 Embedded Controller, 32
STRING, 66

T
Tabla de forzado permanente
Formatos de visualizaci√≥n modificados, 44
Tabla de observaci√≥n
Accesos m√∫ltiples a la misma CPU, 43
Cargar bloques de datos mientras se procesa una
petici√≥n de forzado, 43
Formatos de visualizaci√≥n modificados, 44
Tarjeta o m√≥dulo Ethernet
Enchufar y desenchufar, 22
Tarjeta SD, 11
TiaDefaultProjectPath, 12
TiaUserSettingsPath, 12
Trace
Borrar mediciones, 35
Borrar mediciones de la tarjeta de memoria, 35
Borrar mediciones del dispositivo, 35
Controlador por software, 35
Open Controller, 35
Trace del proyecto para controlador por
software, 35
Trace del proyecto para Open Controller, 35

U
Unidad de red, 9

V
Valor de funci√≥n, 65
Versiones .Net, 8
VMware - CP PC, 37

158

L√©ame
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n
Manual de programaci√≥n y manejo

11/2019

Indicaciones de instalaci√≥n

1

Instalaciones paralelas

2

Licencias

3

Requisitos del sistema para
la instalaci√≥n

4

Informe de instalaci√≥n

5

Iniciar la instalaci√≥n

6

Mostrar el software instalado

7

Modificar o actualizar
productos instalados

8

Reparaci√≥n de los productos
instalados

9

Iniciar la desinstalaci√≥n

10

Instalaci√≥n de
actualizaciones y Support
Packages

11

Instalaci√≥n automatizada de
Support Packages

12

Instalaci√≥n y desinstalaci√≥n
de la herramienta de
migraci√≥n

13

Instalar y desinstalar el
servidor de proyectos TIA

14

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Digital Industries
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

Indicaciones de instalaci√≥n...........................................................................................................................5

2

Instalaciones paralelas .................................................................................................................................7

3

Licencias.......................................................................................................................................................9

4

3.1

Indicaciones relativas a licencias .............................................................................................9

3.2

Obtenci√≥n de licencias de STEP 7 y WinCC .........................................................................10

3.3

Manejo de licencias y claves de licencia................................................................................20

3.4

Licenciar el software en los paneles de operador..................................................................24

3.5

Concesi√≥n de licencias para WinCC Runtime en paneles de operador basados en PCs......25

3.6

Concesi√≥n de licencias de WinCC Runtime Professional para Asia......................................26

3.7

STEP 7 sin licencia para CP de PC .......................................................................................26

Requisitos del sistema para la instalaci√≥n..................................................................................................29
4.1

Indicaciones relativas a los requisitos del sistema.................................................................29

4.2

Requisitos generales de software y hardware .......................................................................30

4.3
4.3.1
4.3.2
4.3.3

Particularidades del producto.................................................................................................34
Instalaci√≥n de WinCC Runtime Professional .........................................................................34
Desinstalaci√≥n de una instancia SQL ....................................................................................36
Informaci√≥n sobre la instalaci√≥n del TIA Portal Teamcenter Gateway ..................................38

5

Informe de instalaci√≥n ................................................................................................................................41

6

Iniciar la instalaci√≥n ....................................................................................................................................43

7

Mostrar el software instalado......................................................................................................................47

8

Modificar o actualizar productos instalados................................................................................................49

9

Reparaci√≥n de los productos instalados.....................................................................................................51

10

Iniciar la desinstalaci√≥n ..............................................................................................................................53

11

Instalaci√≥n de actualizaciones y Support Packages...................................................................................55

12

11.1

Comprobar disponibilidad de actualizaciones y Support Packages y proceder a su
instalaci√≥n ..............................................................................................................................55

11.2
11.2.1
11.2.2
11.2.3

Trabajar con un servidor de empresa ....................................................................................59
Caracter√≠sticas y ventajas de un servidor de empresa ..........................................................59
Configurar el servidor de empresa para actualizaciones .......................................................60
Preparar actualizaciones en un servidor de empresa............................................................64

Instalaci√≥n automatizada de Support Packages ........................................................................................67
12.1

Instalaci√≥n automatizada de Support Packages ....................................................................67

12.2

Valores de retorno del proceso de instalaci√≥n .......................................................................68

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

3

√çndice

12.3
13

14

Archivo de informe .................................................................................................................69

Instalaci√≥n y desinstalaci√≥n de la herramienta de migraci√≥n .....................................................................71
13.1

Requisitos del sistema ...........................................................................................................71

13.2

Instalaci√≥n de la herramienta de migraci√≥n ...........................................................................71

13.3

Desinstalaci√≥n de la herramienta de migraci√≥n .....................................................................72

Instalar y desinstalar el servidor de proyectos TIA.....................................................................................75
14.1

Notas sobre la instalaci√≥n del servidor de proyectos.............................................................75

14.2

Instalar el servidor de proyectos ............................................................................................77

14.3

Desinstalar el servidor de proyectos ......................................................................................79

√çndice alfab√©tico..........................................................................................................................................81

4

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Indicaciones de instalaci√≥n

1

Contenido
Indicaciones que no se han podido incluir en la Ayuda en pantalla e indicaciones importantes
sobre las caracter√≠sticas del producto.

Instalaci√≥n en un entorno virtual (Private Cloud)
Encontrar√° instrucciones para la instalaci√≥n del TIA Portal en un entorno virtual (Private Cloud)
en el soporte de datos de instalaci√≥n, en el directorio "Documents\Readme\<directorio de
idioma>". Abra aqu√≠ el documento PDF "TIAPortalCloudConnectorHowTo<Identificador de
idioma>.pdf".

Instalaci√≥n automatizada
Encontrar√° una descripci√≥n de la instalaci√≥n automatizada en el directorio "Documents
\Readme\<Directorio de idioma>" del DVD de producto.

Uso de versiones id√©nticas de los productos del TIA Portal en la instalaci√≥n
Al instalar diferentes productos del TIA Portal aseg√∫rese de utilizar las mismas versiones de
Service Pack y actualizaciones. As√≠, si ha instalado p. ej. el SP1 para STEP 7 V13, tambi√©n
tendr√° que instalar el SP1 para WinCC V13. La instalaci√≥n de los Service Packs y las
actualizaciones debe realizarse al mismo tiempo para todos los productos. No abra el TIA
Portal antes de haber actualizado todos los productos.
Los Service Packs pueden descargarse gratuitamente de Siemens Industry Online Support
(https://support.industry.siemens.com/cs/de/en/).

Directorio de destino de la instalaci√≥n
No utilice caracteres UNICODE (p. ej. caracteres chinos) en la ruta de instalaci√≥n.
La ruta de instalaci√≥n no puede cambiarse despu√©s de haber instalado uno de los productos
del TIA Portal

Ajustes de seguridad durante la instalaci√≥n de WinCC
Durante la instalaci√≥n de WinCC se modifican ajustes de seguridad en el sistema operativo.
Estos ajustes de seguridad se muestran en una lista durante la instalaci√≥n.
La modificaci√≥n de los ajustes de seguridad tiene que confirmarse.
Si una vez finalizada la instalaci√≥n realiza modificaciones en el sistema operativo, los cambios
en los ajustes de seguridad pueden verse modificados por la instalaci√≥n del TIA Portal.
Los cambios en los ajustes de seguridad debidos a la instalaci√≥n del TIA Portal pueden
restaurarse del modo siguiente:

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

5

Indicaciones de instalaci√≥n

"Inicio > Todos los programas > Siemens Automation > Security Controller > Restablecer
ajustes".

Uso de programas antivirus
Durante la instalaci√≥n es necesario poder acceder en lectura y escritura a los archivos ya
instalados. Algunos programas antivirus lo impiden. Por este motivo, el programa antivirus
debe configurarse para la instalaci√≥n de TIA Portal de modo que sea posible acceder a dichos
archivos.

Compatibilidad con V12 SP1 y V13
En ..\<INSTALLDIR>\SampleProjects del directorio de instalaci√≥n se instalan proyectos vac√≠os
de versiones anteriores para que el TIA Portal actual pueda abrirse en modo de compatibilidad.
Estos proyectos deben copiarse en un directorio local con acceso completo antes de poderlo
utilizar. Encontrar√° m√°s informaci√≥n en la FAQ con ID 82169157.

FAQs acerca del TIA Portal
Las FAQs del TIA Portal se encuentran en FAQs (http://support.automation.siemens.com/WW/
view/es/28919804/133000).

6

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaciones paralelas

2

Instalaci√≥n paralela de WinCC V16 y otros productos SIMATIC HMI
No est√° permitida la instalaci√≥n paralela de WinCC V16 con versiones de WinCC flexible
anteriores a WinCC flexible 2008 SP5.
No est√° permitida la instalaci√≥n paralela de WinCC V16 Comfort/Advanced con versiones de
WinCC anteriores a WinCC V7.3.
No est√° permitida la instalaci√≥n paralela de WinCC V16 con WinCC V7.3, WinCC V7.4 o
WinCC V7.5 para:
‚óè WinCC V16 Professional
‚óè WinCC V16 Runtime Professional

Uso paralelo
Despu√©s de la instalaci√≥n, si el nombre o la clave de licencia del software llevan el indicativo
"Combo", estar√° autorizado a utilizar los siguientes productos y versiones seg√∫n el apartado
4.3 de las Condiciones generales (ver tambi√©n el texto de la instalaci√≥n):
‚óè Con la licencia "STEP 7 Professional Combo": versiones anteriores de STEP 7 (STEP 7
Professional 2006 - STEP 7 Professional V16)
‚óè Con la licencia "WinCC V16 Comfort Combo": WinCC flexible 2008 Standard
‚óè Con la licencia "WinCC V16 Advanced Combo": WinCC flexible 2008 Advanced

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

7

Instalaciones paralelas

8

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

3

Licencias
3.1

Indicaciones relativas a licencias

Puesta a disposici√≥n de licencias
Las licencias de los productos del TIA Portal generalmente se suministran en un soporte de
datos de instalaci√≥n y se transfieren autom√°ticamente mediante el Automation License
Manager durante la instalaci√≥n del TIA Portal.
Antes de desinstalar el TIA Portal es necesario transferir y realizar copia de seguridad de las
licencias necesarias. Para ello, utilice el "Automation License Manager".

Preparaci√≥n del Automation License Manager
El Automation License Manager se suministra en el medio de instalaci√≥n y se transfiere
autom√°ticamente durante la instalaci√≥n del producto.
Cuando se desinstala el TIA Portal, el Automation License Manager permanece instalado en
el sistema.

Trabajar con el Automation License Manager
El Automation License Manager es un producto de Siemens AG y se utiliza para gestionar las
claves de licencia (representantes t√©cnicos de las licencias).
Los productos de software para cuyo funcionamiento se requieren claves de licencia (License
Keys), como p. ej. el TIA Portal, notifican autom√°ticamente al Automation License Manager las
claves de licencia requeridas. Si el Automation License Manager encuentra una clave de
licencia v√°lida para el software, este podr√° utilizarse teniendo en cuenta las condiciones de uso
asociadas a dicha clave de licencia.

Nota
Para m√°s informaci√≥n sobre c√≥mo administrar sus licencias con el Automation License
Manager , consulte la documentaci√≥n suministrada junto con el Automation License Manager .

Consulte tambi√©n
Indicaciones relativas a los requisitos del sistema (P√°gina 29)
Iniciar la instalaci√≥n (P√°gina 43)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

9

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)
Informe de instalaci√≥n (P√°gina 41)

3.2

Obtenci√≥n de licencias de STEP 7 y WinCC

Introducci√≥n
Para obtener la licencia de las siguientes ediciones de STEP 7 se necesita una License Key o
clave de licencia:
‚óè STEP 7 Basic
‚óè STEP 7 Professional
La License Key correspondiente para STEP 7 puede transferirse despu√©s de la instalaci√≥n con
el Automation License Manager.
En WinCC se requiere una License Key o clave de licencia para:
‚óè WinCC Engineering System
‚óè WinCC Runtime
‚óè Opciones del WinCC Engineering System
‚óè Opciones para el sistema WinCC Runtime
Las licencias para WinCC y las opciones de WinCC se deben transferir despu√©s de la
instalaci√≥n con el Automation License Manager.
Nota
El titular de la licencia confirma adem√°s que el software (SW) contiene software con licencia
de Microsoft Corporation o sus filiales. Con ello, el titular de la licencia reconoce estar ligado
a las condiciones comerciales del contrato de licencia adjunto entre Microsoft SQL Server y el
usuario final y da fe de su cumplimiento.

Licencias
Las siguientes licencias est√°n disponibles con sus correspondientes License Keys:
‚óè STEP 7 Basic
‚óè STEP 7 Professional
‚óè STEP 7 Professional Combo
‚óè WinCC Basic
‚óè WinCC Comfort
‚óè WinCC Comfort Combo

10

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
‚óè WinCC Advanced
‚óè WinCC Advanced Combo
‚óè WinCC Professional
‚óè WinCC Professional Combo
‚óè WinCC Unified Comfort Engineering
‚óè WinCC Unified PC Engineering
‚óè WinCC RT Advanced
‚óè WinCC RT Professional
‚óè WinCC Unified PC

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

11

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC

Validez de las claves de licencia para versiones anteriores de STEP 7
Con una License Key (clave de licencia) v√°lida para la V15.x de STEP 7 Professional y STEP
7 Professional Combo tambi√©n es posible utilizar sin restricciones versiones anteriores de
STEP 7. La siguiente tabla contiene informaci√≥n m√°s detallada al respecto:
Edici√≥n

Licencia

V√°lida para

STEP 7 Basic V16.x

STEP 7 Basic

‚óè STEP 7 Basic V16.x
‚óè STEP 7 Basic V15.x
‚óè STEP 7 Basic V14.x
‚óè STEP 7 Basic V13.x
‚óè STEP 7 Basic V12.x
‚óè STEP 7 Basic V11.x
‚óè STEP 7 Basic V10.5

STEP 7 Professional V16.x

STEP 7 Professional

‚óè STEP 7 Professional V16.x
‚óè STEP 7 Professional V15.x
‚óè STEP 7 Professional V14.x
‚óè STEP 7 Professional V13.x
‚óè STEP 7 Professional V12.x
‚óè STEP 7 Professional V11.x
‚óè STEP 7 Basic V14.x
‚óè STEP 7 Basic V13.x
‚óè STEP 7 Basic V12.x
‚óè STEP 7 Basic V11.x
‚óè STEP 7 Basic V10.5

STEP 7 Professional V16.x

STEP 7 Professional Combo

‚óè STEP 7 Professional V16.x
‚óè STEP 7 Professional V15.x
‚óè STEP 7 Professional V14.x
‚óè STEP 7 Professional V13.x
‚óè STEP 7 Professional V12.x
‚óè STEP 7 Professional V11.x
‚óè STEP 7 Basic V14.x
‚óè STEP 7 Basic V13.x
‚óè STEP 7 Basic V12.x
‚óè STEP 7 Basic V11.x
‚óè STEP 7 Basic V10.5
‚óè STEP 7 V5.6
‚óè STEP 7 V5.5
‚óè STEP 7 V5.4
‚óè STEP 7 Professional 2017
‚óè STEP 7 Professional 2010
‚óè STEP 7 Professional 2006

12

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC

Validez de las claves de licencia para versiones anteriores de WinCC
Con una License Key (clave de licencia) v√°lida para WinCC Professional V16.x tambi√©n
pueden utilizarse sin restricciones versiones anteriores de WinCC.
La siguiente tabla contiene informaci√≥n m√°s detallada al respecto:

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

13

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
WinCC Engineering System
Edici√≥n

Licencia

V√°lida para

WinCC Basic V16.x

WinCC Basic

‚óè WinCC Basic V11.x
‚óè WinCC Basic V12.x
‚óè WinCC Basic V13.x
‚óè WinCC Basic V14.x
‚óè WinCC Basic V15.x
‚óè WinCC Basic V16.x

14

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
Edici√≥n

Licencia

V√°lida para

WinCC Comfort/Advanced V16.x

WinCC Comfort

‚óè WInCC Basic V11.x
‚óè WinCC Comfort V10.x
‚óè WinCC Comfort V11.x
‚óè WinCC Basic, Comfort V12.x
‚óè WinCC Basic, Comfort V13.x
‚óè WinCC Basic, Comfort V14.x
‚óè WinCC Basic, Comfort V15.x
‚óè WinCC Basic, Comfort V16.x

WinCC Comfort Combo

‚óè WinCC flexible Compact, Standard >= 2005
‚óè WInCC Basic V11.x
‚óè WinCC Comfort V10.x
‚óè WinCC Comfort V11.x
‚óè WinCC Basic, Comfort V12.x
‚óè WinCC Basic, Comfort V13.x
‚óè WinCC Basic, Comfort V14.x
‚óè WinCC Basic, Comfort V15.x
‚óè WinCC Basic, Comfort V16.x

WinCC Advanced

‚óè WInCC Basic V11.x
‚óè WinCC Comfort, Advanced V10.x
‚óè WinCC Comfort, Advanced V11.x
‚óè WinCC Basic, Comfort, Advanced V12.x
‚óè WinCC Basic, Comfort, Advanced V13.x
‚óè WinCC Basic, Comfort, Advanced V14.x
‚óè WinCC Basic, Comfort, Advanced V15.x
‚óè WinCC Basic, Comfort, Advanced V16.x
‚óè WinCC Unified Comfort V16.x
‚óè WinCC Unified PC V16.x

WinCC Advanced Combo

‚óè WinCC flexible Compact, Standard,
Advanced >= 2005
‚óè WInCC Basic V11.x
‚óè WinCC Comfort, Advanced V10.x
‚óè WinCC Comfort, Advanced V11.x
‚óè WinCC Basic, Comfort, Advanced V12.x
‚óè WinCC Basic, Comfort, Advanced V13.x
‚óè WinCC Basic, Comfort, Advanced V14.x
‚óè WinCC Basic, Comfort, Advanced V15.x
‚óè WinCC Basic, Comfort, Advanced V16.x
‚óè WinCC Unified Comfort V16.x
‚óè WinCC Unified PC V16.x

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

15

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
Edici√≥n

Licencia

V√°lida para

WinCC Professional V16.x

WinCC Professional (512)

‚óè WinCC Comfort, Advanced, Professional
V10.x

WinCC Professional (4096)
WinCC Professional (max.)

‚óè WinCC Comfort, Advanced, Professional
V11.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V12.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V13.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V14.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V15.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V16.x
‚óè WinCC Unified Comfort V16.x
‚óè WinCC Unified PC V16.x

WinCC Professional (512) Com‚Äê ‚óè WinCC flexible Compact, Standard,
bo
Advanced >= 2008 SP3
WinCC Professional (4096)
‚óè WinCC SCADA V7.0 SP3 ES
Combo
‚óè WinCC Comfort, Advanced, Professional
WinCC Professional (max.)
V10.x
Combo
‚óè WinCC Comfort, Advanced, Professional
V11.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V12.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V13.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V14.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V15.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V16.x
‚óè WinCC Unified Comfort V16.x
‚óè WinCC Unified PC V16.x
WinCC Unified Comfort V16.x

WinCC Unified Comfort ES

‚óè WInCC Basic V11.x
‚óè WinCC Comfort V10.x
‚óè WinCC Comfort V11.x
‚óè WinCC Basic, Comfort V12.x
‚óè WinCC Basic, Comfort V13.x
‚óè WinCC Basic, Comfort V14.x
‚óè WinCC Basic, Comfort V15.x
‚óè WinCC Basic, Comfort V16.x
‚óè WinCC Unified Comfort V16.x

16

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
Edici√≥n

Licencia

V√°lida para

WinCC Unified PC V16.x

WinCC Unified PC (10k) ES

‚óè WinCC Basic V11.x
‚óè WinCC Comfort, Advanced V10.x
‚óè WinCC Comfort, Advanced V11.x
‚óè WinCC Basic, Comfort, Advanced V12.x
‚óè WinCC Basic, Comfort, Advanced V13.x
‚óè WinCC Basic, Comfort, Advanced V14.x
‚óè WinCC Basic, Comfort, Advanced V15.x
‚óè WinCC Basic, Comfort, Advanced V16.x
‚óè WinCC Unified PC V16.x

WinCC Unified PC (100k) ES
WinCC Unified PC (max.) ES

‚óè WinCC Comfort, Advanced, Professional
V10.x
‚óè WinCC Comfort, Advanced, Professional
V11.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V12.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V13.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V14.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V15.x
‚óè WinCC Basic, Comfort, Advanced,
Professional V16.x
‚óè WinCC Unified PC V16.x

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

17

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
WinCC Runtime
Edici√≥n

Licencia

V√°lida para

WinCC RT Advanced V16.x

WinCC RT Advanced (128)

‚óè WinCC RT Advanced V11.x

WinCC RT Advanced (512)

‚óè WinCC RT Advanced V12.x

WinCC RT Advanced (2048)
WinCC RT Advanced (4096)
WinCC RT Advanced (8192)
WinCC RT Advanced (16384)
WinCC RT Professional V16.x

‚óè WinCC RT Advanced V13.x
‚óè WinCC RT Advanced V14.x
‚óè WinCC RT Advanced V15.x
‚óè WinCC RT Advanced V16.x

WinCC RT Professional (128)

‚óè WinCC RT Professional V11.x

WinCC RT Professional (512)

‚óè WinCC RT Professional V12.x

WinCC RT Professional (2048)
WinCC RT Professional (4096)
WinCC RT Professional (8192)
WinCC RT Professional (65536)
WinCC RT Professional
(102400)

‚óè WinCC RT Professional V13.x
‚óè WinCC RT Professional V14.x
‚óè WinCC RT Professional V15.x
‚óè WinCC RT Professional V16.x

WinCC RT Professional
(153600)
WinCC RT Professional
(262144)
WinCC Unified PC V16.x

WinCC Unified PC (150) RT

‚óè WinCC Unified PC V16.x

WinCC Unified PC (500) RT
WinCC Unified PC (1k) RT
WinCC Unified PC (2,5k) RT
WinCC Unified PC (5k) RT
WinCC Unified PC (10k) RT
WinCC Unified PC (50k) RT
WinCC Unified PC (100k) RT
WinCC Unified PC (max.) RT

Validez de las licencias para opciones de WinCC
Las opciones de WinCC generalmente poseen License Keys (claves de licencia)
independientes de la versi√≥n. Es posible utilizar opciones de WinCC V16.x con License Keys
(claves de licencia) de V11, V12, V13, V14 y V15 y viceversa.

Inicio sin clave de licencia v√°lida
Si inicia el TIA Portal sin una License Key (clave de licencia) v√°lida, el sistema le indicar√° que
el software se est√° ejecutando en modo de demostraci√≥n. En este caso puede activar una
Trial License (licencia de prueba) una √∫nica vez. No obstante, esta solo tiene una validez
limitada y caduca al cabo de 21 d√≠as.

18

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.2 Obtenci√≥n de licencias de STEP 7 y WinCC
Cuando caduca la Trial License pueden darse los casos siguientes:
‚óè En el PC en cuesti√≥n no hab√≠a existido nunca antes una licencia del TIA Portal.
‚Äì En el TIA Portal ya no se pueden realizar m√°s acciones sujetas a licencias.
‚óè En el PC en cuesti√≥n ya hab√≠a existido antes una licencia del TIA Portal:
‚Äì Cada 10 minutos y para todas las acciones sujetas a licencia aparece un mensaje
indicando que el software se est√° ejecutando en modo de demostraci√≥n. Este mensaje
se debe confirmar.

Requerimiento de licencia para la simulaci√≥n
Si inicia la simulaci√≥n en STEP 7 con el comando de men√∫ "Online > Simulaci√≥n"; no
necesitar√° ninguna otra licencia.
Si se cumplen los siguientes requisitos, para la simulaci√≥n tambi√©n necesitar√° las licencias
correspondientes a la edici√≥n de STEP 7 que haya instalado:
‚óè La estaci√≥n de ingenier√≠a est√° conectada a un PLC.
‚óè La conexi√≥n con el PLC est√° configurada y activa.
Si inicia la simulaci√≥n con el comando de men√∫ "Online > Simulaci√≥n > Con simulador de
variables" en WinCC, no necesitar√° licencias para WinCC Runtime o para las opciones sujetas
a licencia.
Si se cumplen los siguientes requisitos se necesitar√°n tambi√©n para la simulaci√≥n las licencias
correspondientes para WinCC Runtime y para las opciones sujetas a licencia:
‚óè La estaci√≥n de ingenier√≠a est√° conectada a un PLC.
‚óè La conexi√≥n con el PLC est√° configurada y activa.
‚óè El simulador se inicia con el comando de men√∫ "Online > Simulaci√≥n > Iniciar".

Licencias para el TIA Portal Cloud Connector
Para trabajar con el TIA Portal Cloud Connector se requiere una License Key v√°lida (clave de
licencia) en cada dispositivo que se defina como "equipo de usuario" en el TIA Portal Cloud
Connector. La License Key tambi√©n es necesaria si en dicho dispositivo est√° instalado el TIA
Portal. Los dispositivos que se utilicen como "equipo remoto" no necesitan ninguna License
Key.

Consulte tambi√©n
Manejo de licencias y claves de licencia (P√°gina 20)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

19

Licencias
3.3 Manejo de licencias y claves de licencia

3.3

Manejo de licencias y claves de licencia

Introducci√≥n
Para utilizar STEP 7 Basic, STEP 7 Professional y WinCC Engineering System, opciones para
WinCC Engineering System y WinCC Runtime necesitar√° respectivamente una License Key
(clave de licencia) v√°lida.
ATENCI√ìN
Destrucci√≥n de claves de licencia al hacer una copia
Una License Key (clave de licencia) no se puede copiar. El m√©todo de protecci√≥n anticopia
impide que se copien las License Keys. Al tratar de copiar una License Key, esta se destruye.

Licencia de prueba (Trial)
Si inicia el TIA Portal sin una License Key (clave de licencia) v√°lida, el sistema le indicar√° que
el software se est√° ejecutando en modo de demostraci√≥n. Existe la posibilidad de activar una
licencia de prueba (Trial) una √∫nica vez. La licencia de prueba (Trial License) caduca al cabo
de 21 d√≠as.
Cuando caduca la licencia de prueba pueden darse los casos siguientes:
‚óè En el PC en cuesti√≥n no hab√≠a existido nunca antes una licencia del TIA Portal.
El TIA Portal ya no se podr√° iniciar.
‚óè En el PC en cuesti√≥n ya hab√≠a existido antes una licencia del TIA Portal.
El TIA Portal se puede iniciar. Cada 10 minutos aparece un mensaje indicando que el
software se est√° ejecutando en modo de demostraci√≥n. Este mensaje se debe confirmar.

Instalaci√≥n de claves de licencia para STEP 7
Al instalar STEP 7 Basic, la License Key (clave de licencia) necesaria se instala
autom√°ticamente. Al instalar STEP 7 Professional, una vez finalizada la instalaci√≥n se le pide
que transfiera la licencia desde el soporte de datos suministrado al PC mediante el Automation
License Manager.
Si desea instalar License Keys adicionales, deber√° utilizar el Automation License Manager.
Al instalar una licencia, la License Key en cuesti√≥n se borra de la ubicaci√≥n de las License Keys.
Nota
Despu√©s de la instalaci√≥n, conserve siempre la ubicaci√≥n original de las License Keys.

20

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.3 Manejo de licencias y claves de licencia

Instalaci√≥n de claves de licencia para WinCC
Al instalar WinCC Basic, la License Key (clave de licencia) necesaria se instala
autom√°ticamente. Al instalar WinCC Professional, una vez finalizada la instalaci√≥n se le pide
que transfiera la licencia desde el soporte de datos suministrado al PC mediante el Automation
License Manager.
Para utilizar WinCC Runtime o la simulaci√≥n en el Engineering-PC mediante el comando de
men√∫ "Online > Simulaci√≥n > Iniciar" se precisan License Keys adicionales. Para ello es
necesario utilizar el Automation License Manager.
Al instalar una licencia, la License Key en cuesti√≥n se borra de la ubicaci√≥n de las License Keys.
Nota
Despu√©s de la instalaci√≥n, conserve siempre la ubicaci√≥n original de las License Keys.

Transferencia de claves de licencia a paneles de operador
Para usar WinCC es necesario transferir las License Keys (claves de licencia) al panel de
operador.
Se transfiere una License Key al panel de operador en los siguientes casos:
‚óè Para utilizar WinCC Runtime
‚óè Para utilizar opciones de WinCC Runtime
Al transferir una licencia a un panel de operador, la License Key en cuesti√≥n se borra de la
ubicaci√≥n de las License Keys.
Si ya no necesita la licencia o desea crear una copia de seguridad de los datos, debe transferir
las License Keys del panel de operador. Esa licencia se puede utilizar entonces en un PC o
panel de operador diferente.

Desinstalaci√≥n de claves de licencia
Las License Keys (claves de licencia) se desinstalan siempre con el Automation License
Manager. Es necesario desinstalar una License Key en los siguientes casos:
‚óè Si desea crear una copia de seguridad de los datos.
‚óè Si ya no necesita la licencia.
Tambi√©n se puede utilizar una licencia v√°lida en un PC diferente.

Modificaci√≥n en los soportes de datos del sistema de ingenier√≠a
Las modificaciones de los soportes de datos del sistema de ingenier√≠a pueden destruir la
License Key. Antes de efectuar modificaciones de ese tipo, abra el Automation License
Manager y guarde en una ubicaci√≥n diferente una copia de seguridad de la License Key (copia
de seguridad) que desea desinstalar.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

21

Licencias
3.3 Manejo de licencias y claves de licencia

ATENCI√ìN
Destrucci√≥n de claves de licencia en PC
Desinstale todas las License Keys (claves de licencia) si se da uno de los casos siguientes:
‚óè Formateado del disco duro
‚óè Compresi√≥n del disco duro
‚óè Restauraci√≥n del disco duro
‚óè Inicio de un programa de optimizaci√≥n que desplace bloques fijos
‚óè Instalaci√≥n de un sistema operativo nuevo
Lea la descripci√≥n del Automation License Manager ("Inicio > Siemens Automation >
Documentaci√≥n"). Tenga en cuenta todas las indicaciones y advertencias.

Copia de seguridad de paneles de operador (Backup/Restore)
Para crear una copia de seguridad de los datos del panel de operador, desinstale las
License Keys (claves de licencia) en el panel de operador. Para ello, abra el Automation
License Manager y guarde en una ubicaci√≥n diferente la License Key que desea desinstalar.

ATENCI√ìN
Destrucci√≥n de claves de licencia en paneles de operador no basados en PC
Las operaciones de Backup/Restore destruyen las claves de licencia transferidas en los
siguientes paneles de operador:
‚óè Serie 270
‚óè Serie 370
Antes de comenzar con la restauraci√≥n, lleve a cabo los siguientes pasos:
‚óè Compruebe con el Automation License Manager y con ProSave si el panel de operador
tiene instaladas License Keys.
‚óè Transfiera las License Keys existentes desde el panel de operador.
Despu√©s de la restauraci√≥n vuelva a transferir las License Keys al panel de operador.

Licencia no v√°lida tras cambiar la zona horaria
Las licencias instaladas dejar√°n de funcionar si se cambia la zona horaria en un PC como se
indica a continuaci√≥n: de una zona horaria referida a la hora completa a otra que no est√©
referida a la hora completa.
Para evitar este comportamiento, desinstale la License Key (clave de licencia) con el
Automation License Manager con un ajuste de zona horaria que estuviera configurado en el
momento de instalaci√≥n de las License Keys.

22

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.3 Manejo de licencias y claves de licencia
Ejemplo: Se desea utilizar el panel de operador pasando de la zona horaria "GMT +3:00" a la
zona horaria "GMT +3:30"
1. Desinstale la License Key (clave de licencia) que tenga el ajuste de zona horaria "GMT
+3:00".
2. Cambie correspondientemente los ajustes de zona horaria en el PC.
3. Instale la "License Key" (clave de licencia).
Este comportamiento no afecta a la Trial License.

Licencia defectuosa
La licencia est√° defectuosa en los casos siguientes:
‚óè Si ya no se puede acceder a la License Key en su ubicaci√≥n.
‚óè Si la License Key desaparece al transferirla a la unidad de destino.
Nota
Si se ajusta la fecha del sistema a un momento anterior en el tiempo, todas las licencias se
volver√°n defectuosas.
La licencia defectuosa se puede reparar con ayuda del Automation License Manager. Para
ello, utilice la funci√≥n "Restaurar", o bien el "Asistente para la restauraci√≥n" del
Automation License Manager. Para restaurar las licencias, p√≥ngase en contacto con el
Customer Support. Encontrar√° m√°s informaci√≥n al respecto en Internet en: http://
support.automation.siemens.com (https://support.industry.siemens.com/cs/de/en/)
Nota
El runtime seguir√° funcionando correctamente aunque la licencia falte o est√© defectuosa. En
intervalos breves, el sistema emite mensajes indicando que el software se est√° ejecutando en
modo de demostraci√≥n.

Microsoft SQL Server
Para el uso de la base de datos Microsoft SQL Server se requiere una licencia. Esta licencia
est√° disponible cuando se lleva a cabo una instalaci√≥n de WinCC provista de licencia.
El servidor SQL provisto de licencia con la instalaci√≥n de WinCC s√≥lo puede utilizarse en
combinaci√≥n con WinCC.
El uso para otros fines requiere una licencia adicional. A saber, p. ej.:
‚óè Uso para bases de datos propias
‚óè Uso para aplicaciones de terceros
‚óè Uso de mecanismos de acceso SQL que no est√°n disponibles con WinCC
Desinstalaci√≥n

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

23

Licencias
3.4 Licenciar el software en los paneles de operador
Despu√©s de desinstalar WinCC es preciso desinstalar la instancia de servidor SQL "WinCC".
Vaya a ‚ÄúPanel de control > Agregar y quitar programas" y elija la entrada "Microsoft SQL Server
20..‚Äù para proceder a su desinstalaci√≥n.

Consulte tambi√©n
Obtenci√≥n de licencias de STEP 7 y WinCC (P√°gina 10)

3.4

Licenciar el software en los paneles de operador
Los paneles de operador no basados en PC se equipan con licencias de runtime. Para el
funcionamiento en runtime no se requiere una License Key.
Para una opci√≥n de un panel de operador no basado en PC puede ser necesaria una licencia.
La License Key de la licencia en cuesti√≥n autoriza a utilizar una opci√≥n en cada caso.

Clave de licencia
Para poder obtener licencias con License Keys para el software en paneles de operador no
basados en PC se requiere el complemento o add-on
"SIMATIC HMI License Manager Panel Plugin".
Este add-on se instala de forma est√°ndar durante la instalaci√≥n de WinCC. El License Manager
Panel Plugin se abre en el Automation License Manager con el comando de men√∫ "Edici√≥n >
Conectar sistema de destino > Conectar panel de operador".
Si WinCC no est√° instalado, es necesario instalar ProSave 7.2 o superior.

Notas sobre el manejo de licencias
‚óè Para m√°s informaci√≥n sobre el uso de las licencias, consulte la Ayuda en pantalla del
Automation License Manager.
‚óè Antes de licenciar el software, aseg√∫rese de que en el panel de operador est√© instalada la
versi√≥n actual del sistema operativo. De lo contrario, actualice el sistema operativo
utilizando ProSave.
‚óè El titular de la licencia confirma adem√°s que el software (SW) contiene software con licencia
de Microsoft Corporation o sus filiales. Con ello, el titular de la licencia reconoce estar ligado
a las condiciones comerciales del contrato de licencia adjunto entre Microsoft SQL Server
y el usuario final y da fe de su cumplimiento.

Modo de demostraci√≥n
Sin una licencia v√°lida, las opciones de runtime est√°n disponibles temporalmente sin
limitaciones de funcionamiento. Cada 10 minutos aparece un mensaje indicando que el
software se est√° ejecutando en modo de demostraci√≥n. Este mensaje se debe confirmar.

24

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.5 Concesi√≥n de licencias para WinCC Runtime en paneles de operador basados en PCs

3.5

Concesi√≥n de licencias para WinCC Runtime en paneles de operador
basados en PCs

Clave de licencia
En los paneles de operador basados en PC se precisa una clave de licencia para:
‚óè WinCC Runtime, p. ej. con 128 variables
‚óè Opciones de WinCC
La clave de licencia para WinCC Runtime se puede transferir durante la instalaci√≥n de WinCC.
Las licencias para las opciones de WinCC se transfieren despu√©s de la instalaci√≥n con el
Automation License Manager.
Nota
El Certificate of License de WinCC Runtime V15.1 es el √∫nico que autoriza el uso de
WinCC Runtime V15.1
Para licenciar WinCC Runtime se requiere la nueva licencia correspondiente.
Las licencias Runtime de WinCC flexible 2008 y de WinCC V7 se pueden actualizar con una
actualizaci√≥n a WinCC Runtime V15.1.
El uso productivo del software s√≥lo est√° autorizado con un Certificate of License v√°lido,
conforme a la versi√≥n mencionada en el mismo.

Notas sobre el manejo de licencias
‚óè Si actualiza de una versi√≥n anterior a la versi√≥n V15, necesitar√° las nuevas licencias para
WinCC Runtime Professional.
‚óè El titular de la licencia confirma adem√°s que el software (SW) contiene software con licencia
de Microsoft Corporation o sus filiales. Con ello, el titular de la licencia reconoce estar ligado
a las condiciones comerciales del contrato de licencia adjunto entre Microsoft SQL Server
y el usuario final y da fe de su cumplimiento.

Modo de demostraci√≥n
WinCC Runtime y las opciones de Runtime pueden utilizarse ilimitadamente sin una licencia
v√°lida. Cada 10 minutos aparece un mensaje indicando que el software se est√° ejecutando en
modo de demostraci√≥n. Este mensaje se debe confirmar.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

25

Licencias
3.7 STEP 7 sin licencia para CP de PC

3.6

Concesi√≥n de licencias de WinCC Runtime Professional para Asia

Introducci√≥n
En caso de utilizar WinCC Runtime Professional en un idioma asi√°tico se utilizar√° adem√°s un
dongle (mochila) para la validaci√≥n de la licencia requerida. El dongle se suministrar√° en forma
de memoria USB certificada junto con la clave de licencia requerida para WinCC Runtime
Professional para Asia. La clave de licencia est√° guardada en la memoria USB certificada.
Los siguientes idiomas asi√°ticos est√°n protegidos por un dongle:
‚óè Chino simplificado
‚óè Chino tradicional
‚óè Japon√©s
‚óè Coreano

Uso de un dongle para un Runtime Professional asi√°tico
Para conceder licencias a un proyecto WinCC en un idioma asi√°tico trasfiera la clave de
licencia requerida desde la memoria USB certificada al panel de operador con ayuda del
"Automation License Manager". Inserte la memoria USB en el puerto USB del panel de
operador. La memoria USB act√∫a como un dongle durante Runtime. En Runtime, el dongle
debe permanecer insertado en el puerto USB.
Si se retira el dongle en Runtime entonces WinCC Runtime cambiar√° al modo de demostraci√≥n.
Las memorias USB suministradas para el mercado asi√°tico est√°n certificadas para el empleo
permanente en plantas de producci√≥n. Por ello el contenido no puede ser copiado o transferido
a otra memoria USB. En caso de p√©rdida o da√±o de una memoria USB certificada es necesario
solicitar una nueva memoria USB certificada.

Simulaci√≥n de un proyecto WinCC en un idioma asi√°tico.
Para la simulaci√≥n tambi√©n se necesita una memoria USB certificada como dongle. Si no hay
un dongle disponible la simulaci√≥n se ejecuta en modo de demostraci√≥n.

3.7

STEP 7 sin licencia para CP de PC

Funciones de STEP 7 para CP de PC
STEP 7 para CP de PC es una versi√≥n completa de STEP 7 que se ha instalado sin licencia.
En esta versi√≥n solo est√°n disponibles las posibilidades de configuraci√≥n y diagn√≥stico para los
siguientes componentes:
‚óè CP de PC y aplicaciones (servidor OPC) para estaciones PC
‚óè Switches SCALANCE X
‚óè Router SCALANCE W / SCALANCE M

26

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Licencias
3.7 STEP 7 sin licencia para CP de PC
‚óè M√≥dulos de seguridad SCALANCE S
‚óè Dispositivos PROFINET IO y esclavos PROFIBUS DP
‚óè IE/PB LINK PN IO, IWLAN/PB LINK PN IO
‚óè Lectores (RFID) y lectores √≥pticos (MV)
Las estaciones SIMATIC y los componentes WinAC solo est√°n disponibles en la vista de red
y de topolog√≠a (no en la vista de dispositivos). Las funciones de programaci√≥n no est√°n
disponibles.

Sistema de informaci√≥n
El sistema de informaci√≥n presente en la versi√≥n de STEP 7 para CP de PC describe toda la
funcionalidad de STEP 7. Por consiguiente, debe tenerse en cuenta la limitaci√≥n a las
funciones de configuraci√≥n de los grupos de dispositivos citados anteriormente.

Reequipar a la funcionalidad de STEP 7 Professional
Con la instalaci√≥n de STEP 7 para CP de PC queda disponible la funcionalidad completa de
STEP 7 en la estaci√≥n de ingenier√≠a, pero solo se puede utilizar con restricciones.
Instalando la licencia a posteriori es posible actualizar en todo momento a la funcionalidad
completa de STEP 7 Professional. No es necesaria una nueva instalaci√≥n. Los proyectos
creados previamente en STEP 7 para CP de PC pueden seguir utiliz√°ndose sin restricciones
despu√©s de instalar una licencia.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

27

Licencias
3.7 STEP 7 sin licencia para CP de PC

28

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Requisitos del sistema para la instalaci√≥n
4.1

4

Indicaciones relativas a los requisitos del sistema

Requisitos del sistema para los distintos productos
Los requisitos del sistema son diferentes, dependiendo de los productos que se desean
instalar. Por tanto, tenga en cuenta los requisitos del sistema espec√≠ficos de sus productos.
Si desea instalar varios productos, aplique los requisitos del sistema del producto que tenga las
exigencias m√°s elevadas.

Visualizar archivos PDF
Para leer los archivos PDF suministrados se requiere un lector de PDF compatible con el
formato PDF 1.7, p. ej. Adobe (R) Reader versi√≥n 9.

Mostrar la Welcome Tour
Para iniciar la Welcome Tour del TIA Portal se requiere el Adobe (R) Flashplayer a partir de la
versi√≥n 9.

Windows 7 y Windows Server 2008 R2: Validaci√≥n de certificado no v√°lida
Es posible que los certificados nuevos utilizados para la firma no se validen en los sistemas
operativos Windows 7 y Windows Server 2008 R2.
Si no tiene la posibilidad de actualizar online la memoria de certificados, es posible que se
indique que la firma de los archivos de producto no es v√°lida. En tal caso actualice en los
sistemas offline los certificados ra√≠z proporcionados por Microsoft. Siga las instrucciones que
encontrar√° en la FAQ 109748887 (https://support.industry.siemens.com/cs/ww/en/view/
109748887).

Nota para las instalaciones en Windows 7
TIA Portal solo puede ejecutarse en sistemas Windows que soporten el algoritmo Hash seguro
"SHA-2". "SHA-2" solamente se soporta en Windows 7 despu√©s de instalar una actualizaci√≥n
de seguridad (KB 3033929). Aseg√∫rese de que el sistema tenga instaladas las √∫ltimas
actualizaciones de seguridad de Windows.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

29

Requisitos del sistema para la instalaci√≥n
4.2 Requisitos generales de software y hardware

Windows 10: juegos de caracteres
Desde la versi√≥n de actualizaci√≥n 1809 de Windows 10, Windows ofrece la posibilidad de
instalar juegos de caracteres con derechos de administrador para todos los usuarios
(comando "Instalar para todos los usuarios" en el men√∫ contextual) o bien de instalarlos de
forma espec√≠fica para cada usuario. Para poder utilizar ilimitadamente los juegos de
caracteres de WinCC y poderlos cargar en un panel de operador, es preciso instalar los juegos
de caracteres siempre con derechos de administrador.
Tenga en cuenta que el bot√≥n "Instalar" en la vista de un juego de caracteres solo ejecuta una
instalaci√≥n personalizada.

Consulte tambi√©n
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)
Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)

4.2

Requisitos generales de software y hardware

Requisitos para la instalaci√≥n
La tabla siguiente muestra los requisitos m√≠nimos de software y hardware que deben cumplirse
para la instalaci√≥n:

30

Hardware/software

Requisitos

Procesador

Intel¬Æ Core‚Ñ¢ i3-6100U, 2,30 GHz

RAM

8 GB

Disco duro

S-ATA con 20 GB de espacio de memoria disponible, como
m√≠nimo

Red

A partir de 100 Mbits

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Requisitos del sistema para la instalaci√≥n
4.2 Requisitos generales de software y hardware
Hardware/software

Requisitos

Resoluci√≥n de pantalla

1024 x 768

Sistemas operativos *

Windows 7 (64 bits) ***
‚óè Windows 7 Home Premium SP1 **
‚óè Windows 7 Professional SP1
‚óè Windows 7 Enterprise SP1
‚óè Windows 7 Ultimate SP1
Windows 10 (64 bits)
‚óè Windows 10 Home Version 1809 **
‚óè Windows 10 Home Version 1903 **
‚óè Windows 10 Professional Version 1809
‚óè Windows 10 Professional Version 1903
‚óè Windows 10 Enterprise Version 1809
‚óè Windows 10 Enterprise Version 1903
‚óè Windows 10 IoT Enterprise 2015 LTSB
‚óè Windows 10 IoT Enterprise 2016 LTSB
‚óè Windows 10 IoT Enterprise 2019 LTSC
Windows Server (64 Bit)
‚óè Windows Server 2012 R2 StdE (instalaci√≥n completa)
‚óè Windows Server 2016 Standard (instalaci√≥n completa)
‚óè Windows Server 2019 Standard (instalaci√≥n completa)

* Incluidas todas las actualizaciones de seguridad (Security Updates) hasta el Microsoft
Security Bulletin Summary de agosto de 2019 (MS19-Aug). Encontrar√° m√°s informaci√≥n sobre
los sistemas operativos en la Ayuda de Microsoft Windows o en el sitio web de Microsoft.
** Solo para ediciones Basic
*** No para STEP7 Professional - WinCC Professional
Nota
Expiraci√≥n del plazo de Extended Support para Windows 7
Tenga en cuenta el fin del per√≠odo de soporte de Windows 7. Microsoft no proporcionar√° m√°s
actualizaciones de seguridad o soporte para PC que se ejecuten en Windows 7. No obstante,
puede instalar el software.
Es posible que determinados productos soporten otras versiones de Windows. Encontrar√°
m√°s informaci√≥n al respecto en los requisitos del sistema espec√≠ficos del producto, aunque
tambi√©n puede comprobar la compatibilidad con la herramienta de compatibilidad. Encontrar√°
la herramienta de compatibilidad en Internet bajo https://support.industry.siemens.com/
kompatool/pages/main/index.jsf? (https://support.industry.siemens.com/kompatool/pages/
main/index.jsf?).

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

31

Requisitos del sistema para la instalaci√≥n
4.2 Requisitos generales de software y hardware

Hardware de PC recomendado
La tabla siguiente muestra los requisitos m√≠nimos de hardware:
Hardware/software

Requisitos

Equipo

SIMATIC FIELD PG M5 Advanced o superior (o PC comparable)

Procesador

Intel¬Æ Core‚Ñ¢ i5-6440EQ (hasta 3,4 GHz)

RAM

16 GB o m√°s (32 GB para mayores proyectos)

Disco duro

SSD con 50 GB de espacio de memoria disponible, como m√≠nimo

Red

1 Gbit (para multiusuario)

Pantalla

Pantalla Full HD de 15,6" (1920 √ó 1080 o superior)

Plataformas de virtualizaci√≥n compatibles
Los paquetes de software "SIMATIC STEP 7" y "SIMATIC WinCC" pueden instalarse en una
m√°quina virtual. Para ello, utilice una de las siguientes plataformas de virtualizaci√≥n en la
versi√≥n indicada o una superior:
‚óè VMware vSphere Hypervisor (ESXi) 6.5 o superior
‚óè VMware Workstation 15.0.2 o superior
‚óè VMware Player 15.0.2 o superior
‚óè Microsoft Hyper-V Server 2016 o superior
Para estas plataformas de virtualizaci√≥n se recomiendan los sistemas operativos siguientes
como sistemas operativos host:
Sistema operativo

VMware vSphere Hyper‚Äê VMware Worksta‚Äê
visor (ESXi)
tion

VMware Player

Microsoft HyperV

Windows Server 2016 Standard (ins‚Äê talaci√≥n completa)

-

-

x

Windows Server 2019 Standard (ins‚Äê talaci√≥n completa)

-

-

x

Windows 7 Professional SP1

x

x

x

-

Windows 7 Enterprise SP1

x

x

x

-

Windows 7 Ultimate SP1

x

x

x

-

Windows 10 Professional Version
1809 y 1903

x

x

x

-

Windows 10 Enterprise Version
1809 y 1903

x

x

x

-

Windows 10 (IoT) Enterprise 2015
LTSB

x

x

x

-

Windows 10 (IoT) Enterprise 2016
LTSB

x

x

x

-

Windows 10 (IoT) Enterprise 2019
LTSC

x

x

x

-

x: puede emplearse como sistema operativo host
-: no puede emplearse como sistema operativo host

32

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Requisitos del sistema para la instalaci√≥n
4.2 Requisitos generales de software y hardware
Dentro de la plataforma de virtualizaci√≥n seleccionada se recomiendan los siguientes sistemas
operativos hu√©sped:
Sistema operativo

VMware vSphere Hyper‚Äê VMware Worksta‚Äê
visor (ESXi)
tion

VMware Player

Microsoft HyperV

Windows Server 2012 R2 StdE (ins‚Äê talaci√≥n completa)

-

-

x

Windows Server 2016 Standard (ins‚Äê talaci√≥n completa)

-

-

x

Windows Server 2019 Standard (ins‚Äê talaci√≥n completa)

-

-

x

Windows 7 Professional SP1

x

x

x

x

Windows 7 Enterprise SP1

x

x

x

x

Windows 7 Ultimate SP1

x

x

x

x

Windows 10 Professional Version
1809 y 1903

x

x

x

x

Windows 10 Enterprise Version
1809 y 1903

x

x

x

x

Windows 10 (IoT) Enterprise 2015
LTSB

x

x

x

x

Windows 10 (IoT) Enterprise 2016
LTSB

x

x

x

x

Windows 10 (IoT) Enterprise 2019
LTSC

x

x

x

x

x: puede emplearse como sistema operativo hu√©sped
-: no puede emplearse como sistema operativo hu√©sped

Nota
‚óè Para los sistemas operativos hu√©sped valen los mismos requisitos de hardware que para
los propios productos TIA.
‚óè El operador de la instalaci√≥n debe asegurarse de que los sistemas operativos hu√©sped
dispongan de suficientes recursos de sistema.
‚óè Para el uso de servidores HyperV y ESXi se recomienda hardware certificado por los
fabricantes.
‚óè Si se utiliza Microsoft Hyper-V, no es posible mostrar los dispositivos accesibles.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

33

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto

Programas de seguridad compatibles
Los siguientes programas de seguridad son compatibles con "SIMATIC STEP 7" y "SIMATIC
WinCC":
‚óè Programas antivirus:
‚Äì Symantec Endpoint Protection 14
‚Äì Trend Micro Office Scan 12.0
‚Äì McAfee Endpoint Security (ENS) 10.5
‚Äì Kaspersky Endpoint Security 11.1
‚Äì Windows Defender
‚Äì Qihoo 360 "Safe Guard 11.5" + "Virus Scanner"
Nota
Aseg√∫rese de que el antivirus utilizado y sus bases de datos siempre est√°n actualizados.
La √∫ltima actualizaci√≥n de los patrones de virus tuvo lugar el 02-09-2019.
‚óè Software de encriptaci√≥n:
‚Äì Microsoft Bitlocker
‚óè Intrusion Detection System basado en host:
‚Äì McAfee Application Control 8.0

Consulte tambi√©n
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Comprobar disponibilidad de actualizaciones y Support Packages y proceder a su instalaci√≥n
(P√°gina 55)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)
Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)

4.3

Particularidades del producto

4.3.1

Instalaci√≥n de WinCC Runtime Professional

Instalaci√≥n en dominios y grupos de trabajo
WinCC est√° autorizado por principio para el funcionamiento en un dominio o grupo de trabajo.

34

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto
Sin embargo, tenga en cuenta que las directivas de grupos y las limitaciones del dominio
pueden impedir la instalaci√≥n. En este caso, elimine el equipo del dominio antes de la
instalaci√≥n de Microsoft Message Queuing, Microsoft SQL Server y WinCC. Inicie la sesi√≥n
localmente con derechos de administrador en el equipo en cuesti√≥n. Realice la instalaci√≥n.
Despu√©s de instalar correctamente el software es posible reincorporar el equipo WinCC al
dominio. Si las directivas de grupos y las limitaciones del dominio no impiden la instalaci√≥n, no
es necesario eliminar el equipo del dominio durante la instalaci√≥n.
Tenga en cuenta que las directivas de grupos y las limitaciones del dominio pueden impedir el
funcionamiento. Si no es posible eliminar estas limitaciones utilice el equipo WinCC en un
grupo de trabajo.
Dado el caso, dir√≠jase al administrador del dominio.

Operaci√≥n en un servidor de red
No se permite utilizar WinCC Runtime Professional en servidores de red (p. ej., controladores
de dominios, servidores de archivos y nombres, routers, cortafuegos de software, servidores
multimedia o servidores Exchange).

Nombre del equipo en Windows
Despu√©s de instalar WinCC, no vuelva a cambiar el nombre del equipo en Windows.
Si cambia el nombre del equipo en Windows, deber√° desinstalar el servidor SQL y volver a
instalarlo.
Los nombres de equipo no pueden contener los siguientes caracteres:
‚óè .,;:!?"'^¬¥`~_
‚óè +=/\¬¶@*#$%&¬ß¬∞
‚óè ()[]{}<>
‚óè Espacio
Al asignar nombres de equipo en Windows tenga en cuenta lo siguiente:
‚óè Solo deben usarse may√∫sculas.
‚óè El primer car√°cter debe ser una letra.
‚óè Los 12 primeros caracteres del nombre de equipo deben ser un√≠vocos.

Activar la comunicaci√≥n remota
En sistemas WinCC, la comunicaci√≥n remota est√° desactivada por defecto despu√©s de la
instalaci√≥n en el cuadro de di√°logo "Simatic Shell". Para los siguientes casos de aplicaci√≥n
debe activarse la comunicaci√≥n remota en los equipos participantes:
‚óè Carga del runtime en otro PC
‚óè Comunicaci√≥n cliente-servidor

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

35

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto
‚óè Sistema redundante
‚óè Opci√≥n de WinCC "WebNavigator"
Si el cliente WebNavigator no se ejecuta en el mismo equipo que el servidor WebNavigator,
la comunicaci√≥n remota debe estar activada.
Para permitir el acceso remoto, proceda del siguiente modo:
1. En el explorador de Windows, abra los ajustes de comunicaci√≥n mediante el men√∫
contextual de Simatic Shell.
2. Active la opci√≥n "Comunicaci√≥n remota".
3. Configure la comunicaci√≥n cifrada en la red: elija la clave PSK y el puerto.
4. Seleccione el adaptador de red y, en su caso, los ajustes Multicast.

4.3.2

Desinstalaci√≥n de una instancia SQL

Contenido
Con la instalaci√≥n de WinCC V16 se instala una nueva instancia de WinCC SQL 2016 SP2.
Si ya hab√≠a instalado una versi√≥n de WinCC Runtime Professional, antes de la instalaci√≥n de
WinCC Professional V16 deber√°:
‚óè instalar primero WinCC Runtime Professional V16, o bien
‚óè desinstalar instancias "WINCC" m√°s antiguas del SQL Server.
Nota
Cuando se desinstala WinCC Runtime Professional o WinCC Professional no se desinstala la
instancia del SQL-Server.

Desinstalaci√≥n de una instancia SQL
El procedimiento siguiente muestra un ejemplo de c√≥mo desinstalar la instancia de Microsoft
SQL Server 2008 R2.
1. Abra el Panel de control.
2. Haga clic en Quitar programa.
3. Seleccione "Microsoft SQL Server 2008 R2" en la lista de los programas instalados y haga
clic en "Quitar/cambiar"
4. En el cuadro de di√°logo "SQL Server 2008 R2", haga clic en "Remove".
5. En el cuadro de di√°logo "Setup Support Rules", haga clic en "OK".

36

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto
6. En el cuadro de di√°logo "Select Instance" seleccione la instancia "WINCC" y haga clic en
"Next".

7. En el cuadro de di√°logo "Select Features", haga clic en "Select All" y despu√©s en "Next".
8. En el cuadro de di√°logo "Removal Rules", haga clic en "Next".
9. En el cuadro de di√°logo "Ready to Remove", haga clic en "Remove".
10.En el cuadro de di√°logo "Complete", haga clic en "Close".
El procedimiento para desinstalar una instancia de SQL Server 2005 o de SQL Server 2014 es
an√°logo.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

37

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto

4.3.3

Informaci√≥n sobre la instalaci√≥n del TIA Portal Teamcenter Gateway

Introducci√≥n
El TIA Portal Teamcenter Gateway puede instalarse como sigue:
‚óè Junto con la instalaci√≥n del TIA Portal
Nota
Para la instalaci√≥n de servidor se requieren derechos de administrador.

Requisitos para la instalaci√≥n
Requisitos del equipo:
‚óè Se ha instalado el Teamcenter Rich Application Client (denominado en adelante "RAC") o
el Teamcenter Client Communication System (TCCS) versi√≥n 11.2 o superior.
Nota
Si ha llevado a cabo la instalaci√≥n de TCCS como instalaci√≥n aut√≥noma (standalone),
tambi√©n es necesario instalar "Microsoft Visual C++ 2013 ‚Äì Redistributable". De ese modo
se garantiza que sea posible establecer una conexi√≥n entre el TIA Portal y el TIA Portal
Teamcenter Gateway.
‚óè Existe una conexi√≥n entre FCC/FMS (FileClientCache/FileManagementSystem) y
"Teamcenter Server 11.2" o superior.
Nota
‚óè Despu√©s de una instalaci√≥n posterior o un reinicio, aseg√∫rese de que existe una
conexi√≥n entre FCC/FMS (FileClientCache/FileManagementSystem) y "Teamcenter
Server 11.2" o superior.
‚óè Despu√©s de una instalaci√≥n posterior o un reinicio compruebe la clave de registro.
Encontrar√° m√°s informaci√≥n sobre la comprobaci√≥n de la clave de registro en la Ayuda
en pantalla del "TIA Portal Teamcenter Gateway", en el apartado "Instalaci√≥n y
desinstalaci√≥n de TIA Portal Teamcenter Gateway" > "Comprobar la instalaci√≥n de TIA
Portal Teamcenter Gateway".
‚óè Despu√©s de una instalaci√≥n posterior o un renicio, compruebe si puede borrar un tipo de
elemento en Teamcenter y si puede agregar un dataset a la revisi√≥n del elemento.
Encontrar√° m√°s informaci√≥n sobre c√≥mo guardar tipos de elementos en la Ayuda en
pantalla "TIA Portal Teamcenter Gateway" en el cap√≠tulo "Gestionar proyectos TIA
Portal con el TIA Portal Teamcenter Gateway" en el apartado "Guardar un proyecto TIA
Portal en el Teamcenter como elemento nuevo".
‚óè Despu√©s de una instalaci√≥n posterior o un reinicio, compruebe si es posible la
transferencia de archivos del cliente Teamcenter Rich Application al servidor
Teamcenter.
‚óè En el servidor Teamcenter debe estar instalado el modelo de datos suministrado,
compuesto por varios archivos.

38

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto

Instalaci√≥n del modelo de datos de TIA Portal Teamcenter Gateway
El modelo de datos de TIA Portal Teamcenter Gateway debe instalarse con el "Environment
Manager".
Encontrar√° una descripci√≥n de la instalaci√≥n en el directorio "\Support
\Teamcenter_11\ServerSetupDocument\" del DVD de producto.

Versiones id√©nticas del TIA Portal en la instalaci√≥n
Al instalar diferentes productos del TIA Portal aseg√∫rese de que los Service Pack y las
actualizaciones sean de la misma versi√≥n.
Es decir, si p. ej., ha instalado el TIA Portal V14 o superior, deber√° instalar asimismo el TIA
Portal Teamcenter Gateway V14 o superior.

Ruta de instalaci√≥n
No utilice caracteres Unicode (p. ej. caracteres chinos) en la ruta de instalaci√≥n.

Programas antivirus
Durante la instalaci√≥n es necesario poder acceder en lectura y escritura a los archivos ya
instalados. Algunos programas antivirus lo impiden. Durante la instalaci√≥n del TIA Portal
Teamcenter Gateway se recomienda desactivar los antivirus y volver a activarlos despu√©s.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

39

Requisitos del sistema para la instalaci√≥n
4.3 Particularidades del producto

40

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Informe de instalaci√≥n

5

Funci√≥n del informe de instalaci√≥n
Durante los siguientes procesos de instalaci√≥n se registran los progresos en un archivo:
‚óè Instalar productos
‚óè Modificar o actualizar productos ya instalados
‚óè Reparar una instalaci√≥n existente
‚óè Desinstalar productos
En caso de producirse alg√∫n error durante el proceso de instalaci√≥n o de emitirse una
advertencia, los errores o advertencias se pueden evaluar con ayuda del archivo de registro.
La evaluaci√≥n puede realizarla Ud. mismo o bien, dir√≠jase al Product Support.

Ubicaci√≥n de los informes de instalaci√≥n
El archivo de informe es el archivo m√°s reciente con la extensi√≥n ".log" cuyo nombre empiece
por "SIA".
La ubicaci√≥n del archivo de registro est√° guardada en la variable de entorno "%autinstlog%".
Esta variable se puede introducir en la barra de direcci√≥n del Windows Explorer para abrir la
carpeta que contiene los archivos de registro. Tambi√©n existe la alternativa de navegar hasta
el directorio correspondiente escribiendo "CD %autinstlog%" en la l√≠nea de comandos.
La ubicaci√≥n depende del sistema operativo utilizado; por ejemplo, "C:\Programdata\Siemens
\Automation\Logfiles\Setup" en la versi√≥n inglesa de Windows.

Setup_Report (archivo CAB)
Para poder entregar todos los archivos necesarios al Product Support, se crea adicionalmente
un archivo comprimido en formato CAB que contiene el informe de instalaci√≥n y todos los
dem√°s archivos requeridos. Este archivo comprimido se encuentra en "%autinstlog%\Reports
\Setup_report.cab". Si necesita ayuda para la instalaci√≥n, env√≠e el archivo CAB al Product
Support. De este modo, el Product Support podr√° determinar r√°pidamente si la instalaci√≥n se
ha ejecutado correctamente. Los archivos CAB generados en instalaciones anteriores quedan
guardados en el directorio "Reports" con un identificativo de la fecha.

Consulte tambi√©n
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Comprobar disponibilidad de actualizaciones y Support Packages y proceder a su instalaci√≥n
(P√°gina 55)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

41

Informe de instalaci√≥n

Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)

42

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Iniciar la instalaci√≥n

6

Introducci√≥n
Una aplicaci√≥n setup instala autom√°ticamente los paquetes de software. La aplicaci√≥n se inicia
al insertar el medio de instalaci√≥n en la unidad de disco correspondiente.

Requisitos
‚óè El hardware y software de la programadora o PC cumplen los requisitos del sistema.
‚óè Usted dispone de derechos de administraci√≥n para su equipo.
‚óè Se han cerrado todas las aplicaciones que se estaban ejecutando.

Procedimiento
Para instalar los paquetes de software, proceda del siguiente modo:
1. Inserte el medio de instalaci√≥n en la unidad de disco correspondiente.
La aplicaci√≥n Setup arranca autom√°ticamente si el inicio autom√°tico no est√° desactivado en
la programadora o PC.
2. Si el programa de instalaci√≥n no se inicia autom√°ticamente, h√°galo manualmente haciendo
doble clic en el archivo "Start.exe".
Se abre el di√°logo para seleccionar el idioma de instalaci√≥n.
3. Seleccione el idioma en el que desea visualizar los di√°logos del programa de instalaci√≥n.
4. Para leer las instrucciones del producto y de la instalaci√≥n, haga clic en el bot√≥n "Leer
indicaciones" o "Indicaciones de instalaci√≥n".
Se abre el archivo de ayuda correspondiente con las indicaciones.
5. Tras haberlas le√≠do, cierre el archivo de ayuda y haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo para seleccionar los idiomas del producto.
6. Seleccione los idiomas para la interfaz del producto y haga clic en el bot√≥n "Siguiente".
Nota
El idioma base de instalaci√≥n del producto es siempre el ingl√©s.
Se abre el di√°logo para seleccionar la configuraci√≥n de producto.
7. Seleccione los productos que desea instalar:
‚Äì Si s√≥lo desea una instalaci√≥n m√≠nima del programa, haga clic en el bot√≥n "M√≠nima".
‚Äì Si quiere instalar los componentes t√≠picos del programa, haga clic en el bot√≥n "T√≠pica".
‚Äì Si prefiere elegir Ud. mismo los componentes que se van a instalar, haga clic en el bot√≥n
"Personalizada". En este √∫ltimo caso, active a continuaci√≥n las casillas de verificaci√≥n
correspondientes a los productos que desea instalar.
8. Si desea crear un acceso directo en el escritorio, active la casilla de verificaci√≥n "Crear
acceso directo en el escritorio".

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

43

Iniciar la instalaci√≥n

9. Haga clic en el bot√≥n de comando "Examinar" si desea cambiar el directorio de destino para
la instalaci√≥n.
Nota
Observe las indicaciones siguientes:
‚óè La longitud de la ruta de instalaci√≥n no debe exceder 89 caracteres.
‚óè La ruta de instalaci√≥n s√≥lo podr√° modificarse si todav√≠a no hay ning√∫n producto
instalado del paquete de software que quiere instalar.
‚óè Para aumentar la seguridad elija como directorio de destino un directorio que est√©
protegido con derechos de administrador.
10.Haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo correspondiente a las condiciones de licencia.
11.Para continuar la instalaci√≥n, lea y acepte todos los acuerdos de licencia y haga clic en
"Siguiente".
En caso de que sea necesario modificar opciones de seguridad y permisos para la
instalaci√≥n del TIA Portal, se abrir√° el di√°logo para la configuraci√≥n de seguridad.
12.Para continuar la instalaci√≥n, acepte todos los cambios efectuados en las opciones de
seguridad y permisos y haga clic en "Siguiente".
En el siguiente di√°logo aparecen listados los ajustes de instalaci√≥n.
13.Compruebe los ajustes de instalaci√≥n seleccionados. Si desea efectuar cambios, haga clic
en el bot√≥n "Atr√°s" del cuadro de di√°logo hasta acceder al ajuste que desea modificar. Una
vez efectuados los cambios deseados, regrese a la vista general con "Siguiente".
14.Haga clic en el bot√≥n "Instalar".
Se inicia la instalaci√≥n.
Nota
Si no se encuentra ninguna clave de licencia (License Key) durante la instalaci√≥n, existe la
posibilidad de transferir √©sta al PC. Si se omite la transferencia de licencias, este paso
puede realizarse posteriormente con el Automation License Manager.
Tras la instalaci√≥n aparece un mensaje indicando si la instalaci√≥n se ha completado
correctamente.
15.Es posible que deba reiniciar el equipo. En ese caso, active el bot√≥n de opci√≥n "S√≠, deseo
reiniciar mi equipo ahora". A continuaci√≥n, haga clic en el bot√≥n "Reiniciar".
16.Si no es preciso volver a iniciar el equipo, haga clic en el bot√≥n "Finalizar".

Resultado
El TIA Portal, los productos y licencias que ha adquirido, as√≠ como el Automation License
Manager se han instalado en el equipo.

Consulte tambi√©n
Informe de instalaci√≥n (P√°gina 41)
Indicaciones relativas a los requisitos del sistema (P√°gina 29)

44

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Iniciar la instalaci√≥n

Indicaciones relativas a licencias (P√°gina 9)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)
Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

45

Iniciar la instalaci√≥n

46

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Mostrar el software instalado

7

En todo momento se puede obtener informaci√≥n sobre los productos de software que est√°n
instalados. Tambi√©n es posible visualizar m√°s informaci√≥n sobre el software instalado.

Procedimiento
Para obtener una vista de los productos de software instalados, proceda del modo siguiente:
1. Haga clic en "Software instalado" del men√∫ "Ayuda".
Se abre el di√°logo "Software instalado". En el di√°logo se ven los productos de software
instalados. Expanda las entradas para ver la versi√≥n instalada, respectivamente.
2. Si desea ver m√°s informaci√≥n sobre el software de automatizaci√≥n que est√° instalado, haga
clic en el enlace ubicado en el di√°logo "M√°s informaci√≥n acerca del software instalado".
Se abre el di√°logo "Informaci√≥n detallada".
3. Elija en la navegaci√≥n local el tema del que desee obtener informaci√≥n adicional.

Consulte tambi√©n
Indicaciones relativas a los requisitos del sistema (P√°gina 29)
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Modificar o actualizar productos instalados (P√°gina 49)
Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)
Informe de instalaci√≥n (P√°gina 41)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

47

Mostrar el software instalado

48

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Modificar o actualizar productos instalados

8

A trav√©s del programa de instalaci√≥n existe la posibilidad de modificar los productos instalados
o bien actualizarlos a una nueva versi√≥n (update).
Los bloques con protecci√≥n de know-how de versiones anteriores de TIA Portal no se
actualizan autom√°ticamente con el proyecto. Elimine la protecci√≥n de know-how de los
bloques antes de actualizar el TIA Portal. Al finalizar, vuelva a activar la protecci√≥n de knowhow con la versi√≥n actual del TIA Portal. Para m√°s informaci√≥n al respecto, consulte el sistema
de informaci√≥n.

Requisitos
‚óè El hardware y software de la programadora o PC cumplen los requisitos del sistema.
‚óè Usted dispone de derechos de administraci√≥n para su equipo.
‚óè Se han cerrado todas las aplicaciones que se estaban ejecutando.

Procedimiento
Para modificar o actualizar los productos instalados, proceda del siguiente modo:
1. Inserte el medio de instalaci√≥n en la unidad de disco correspondiente.
La aplicaci√≥n Setup arranca autom√°ticamente si el inicio autom√°tico no est√° desactivado en
la programadora o PC.
2. Si el programa de instalaci√≥n no se inicia autom√°ticamente, h√°galo manualmente haciendo
doble clic en el archivo "Start.exe".
Se abre el di√°logo para seleccionar el idioma de instalaci√≥n.
3. Seleccione el idioma en el que desea visualizar los di√°logos del programa de instalaci√≥n
4. Para leer las instrucciones del producto y de la instalaci√≥n, haga clic en el bot√≥n "Leer
indicaciones" o "Indicaciones de instalaci√≥n".
Se abre el archivo de ayuda correspondiente con las indicaciones.
5. Tras haberlas le√≠do, cierre el archivo de ayuda y haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo para seleccionar la variante de instalaci√≥n.
6. Active el bot√≥n de opci√≥n "Modificar/Actualizar" y haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo para seleccionar los idiomas del producto.
7. Active la casilla de verificaci√≥n correspondiente a los idiomas de producto que desea
instalar. Los idiomas de producto ya instalados pueden desinstalarse desactivando las
casillas de verificaci√≥n correspondientes.
Nota
No obstante, debe tener en cuenta que el idioma de producto "ingl√©s" no puede
desinstalarse.
8. Haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo para seleccionar la configuraci√≥n de producto.
Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

49

Modificar o actualizar productos instalados

9. Active la casilla de verificaci√≥n correspondiente a los componentes que desea instalar. Los
componentes ya instalados pueden desinstalarse desactivando las casillas de verificaci√≥n
correspondientes.
10.Haga clic en el bot√≥n "Siguiente".
Nota
Observe que no es posible cambiar el directorio de destino porque la instalaci√≥n existente
est√° siendo modificada.
En caso de que sea necesario modificar opciones de seguridad y permisos para la
instalaci√≥n del TIA Portal, se abrir√° el di√°logo para la configuraci√≥n de seguridad.
11.Para continuar la instalaci√≥n, acepte todos los cambios efectuados en las opciones de
seguridad y permisos y haga clic en "Siguiente".
En el siguiente di√°logo aparecen listados los ajustes de instalaci√≥n.
12.Haga clic en el bot√≥n de comando "Modificar".
Se inicia la instalaci√≥n de los componentes adicionales.
Nota
Tras la instalaci√≥n aparece un aviso indicando si la instalaci√≥n existente se ha modificado
correctamente.
13.Es posible que deba reiniciar el equipo. En ese caso, active el bot√≥n de opci√≥n "S√≠, deseo
reiniciar mi equipo ahora". A continuaci√≥n, haga clic en el bot√≥n "Reiniciar".
14.Si no es preciso volver a iniciar el equipo, haga clic en el bot√≥n "Finalizar".

Resultado
En su equipo se ha modificado la instalaci√≥n existente.

Consulte tambi√©n
Indicaciones relativas a los requisitos del sistema (P√°gina 29)
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Mostrar el software instalado (P√°gina 47)
Reparaci√≥n de los productos instalados (P√°gina 51)
Iniciar la desinstalaci√≥n (P√°gina 53)
Informe de instalaci√≥n (P√°gina 41)

50

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Reparaci√≥n de los productos instalados

9

En el programa de instalaci√≥n existe la posibilidad de reparar los productos instalados
mediante una reinstalaci√≥n completa.

Requisitos
‚óè El hardware y software de la programadora o PC cumplen los requisitos del sistema.
‚óè Usted dispone de derechos de administraci√≥n para su equipo.
‚óè Se han cerrado todas las aplicaciones que se estaban ejecutando.

Procedimiento
Para reparar productos instalados, proceda del siguiente modo:
1. Inserte el medio de instalaci√≥n en la unidad de disco correspondiente.
La aplicaci√≥n Setup arranca autom√°ticamente si el inicio autom√°tico no est√° desactivado en
la programadora o PC.
2. Si el programa de instalaci√≥n no se inicia autom√°ticamente, h√°galo manualmente haciendo
doble clic en el archivo "Start.exe".
Se abre el di√°logo para seleccionar el idioma de instalaci√≥n.
3. Seleccione el idioma en el que desea visualizar los di√°logos del programa de instalaci√≥n
4. Para leer las instrucciones del producto y de la instalaci√≥n, haga clic en el bot√≥n "Leer
indicaciones" o "Indicaciones de instalaci√≥n".
Se abre el archivo de ayuda correspondiente con las indicaciones.
5. Tras haberlas le√≠do, cierre el archivo de ayuda y haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo para seleccionar la variante de instalaci√≥n.
6. Active el bot√≥n de opci√≥n "Reparar" y haga clic en el bot√≥n "Siguiente".
En el siguiente di√°logo aparecen listados los ajustes de instalaci√≥n.
7. Haga clic en el bot√≥n de comando "Reparar".
Se inicia la reparaci√≥n de la instalaci√≥n existente.
Nota
Tras la instalaci√≥n aparece un aviso indicando si los productos instalados se han reparado
correctamente.
8. Es posible que deba reiniciar el equipo. En ese caso, active el bot√≥n de opci√≥n "S√≠, deseo
reiniciar mi equipo ahora". A continuaci√≥n, haga clic en el bot√≥n "Reiniciar".
9. Si no es preciso volver a iniciar el equipo, haga clic en el bot√≥n "Finalizar".

Resultado
Los productos instalados se vuelven a instalar.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

51

Reparaci√≥n de los productos instalados

Consulte tambi√©n
Indicaciones relativas a los requisitos del sistema (P√°gina 29)
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)
Iniciar la desinstalaci√≥n (P√°gina 53)
Informe de instalaci√≥n (P√°gina 41)

52

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Iniciar la desinstalaci√≥n

10

Introducci√≥n
Un programa de instalaci√≥n desinstala autom√°ticamente los paquetes de software. Una vez
ejecutado el programa, le guiar√° paso a paso por todo el proceso de desinstalaci√≥n.
Existen dos posibilidades para realizar la desinstalaci√≥n:
‚óè Desinstalaci√≥n de los componentes seleccionados a trav√©s del controlador del sistema
‚óè Desinstalaci√≥n de un producto con ayuda del medio de instalaci√≥n
Nota
El Automation License Manager no se desinstala autom√°ticamente junto con los paquetes de
software, ya que esta aplicaci√≥n se utiliza para administrar las claves de licencia ("License
Keys") de diversos productos de Siemens AG.

Desinstalaci√≥n de los componentes seleccionados a trav√©s del controlador del sistema
Para desinstalar los paquetes de software concretos, proceda del siguiente modo:
1. Abra el Panel de control.
2. Haga clic en "Desinstalar un programa" en "Programas".
Se abre un cuadro de di√°logo con la lista de los programas instalados.
3. Seleccione los paquetes de software que desea desinstalar y haga clic en el bot√≥n
"Desinstalar".
Se abre el di√°logo para seleccionar el idioma de instalaci√≥n.
4. Seleccione el idioma en el que desea visualizar los cuadros de di√°logo del programa de
instalaci√≥n y haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo que permite seleccionar los productos que deben desinstalarse.
5. Active la casilla de verificaci√≥n para los productos que desea desinstalar y haga clic en el
bot√≥n "Siguiente".
En el siguiente di√°logo aparecen listados los ajustes de instalaci√≥n.
6. Verifique la lista de los productos que se desinstalar√°n. Si desea efectuar cambios, haga
clic en el bot√≥n de comando "Atr√°s".
7. Haga clic en el bot√≥n de comando "Desinstalar".
Se inicia la desinstalaci√≥n.
8. Es posible que deba reiniciar el equipo. En ese caso, active el bot√≥n de opci√≥n "S√≠, deseo
reiniciar mi equipo ahora". A continuaci√≥n, haga clic en el bot√≥n "Reiniciar".
9. Si no es preciso volver a iniciar el equipo, haga clic en el bot√≥n "Finalizar".

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

53

Iniciar la desinstalaci√≥n

Desinstalaci√≥n de un producto con ayuda del medio de instalaci√≥n
Para desinstalar todos los paquetes de software, proceda del siguiente modo:
1. Inserte el medio de instalaci√≥n en la unidad de disco correspondiente.
La aplicaci√≥n Setup arranca autom√°ticamente si el inicio autom√°tico no est√° desactivado en
la programadora o PC.
2. Si el programa de instalaci√≥n no se inicia autom√°ticamente, h√°galo manualmente haciendo
doble clic en el archivo "Start.exe".
Se abre el di√°logo para seleccionar el idioma de instalaci√≥n.
3. Seleccione el idioma en el que desea visualizar los di√°logos del programa de instalaci√≥n.
4. Para leer las instrucciones del producto y de la instalaci√≥n, haga clic en el bot√≥n "Leer
informaci√≥n de producto" o "Leer indicaciones de instalaci√≥n".
Se abre el archivo de ayuda correspondiente con las indicaciones.
5. Tras haberlas le√≠do, cierre el archivo de ayuda y haga clic en el bot√≥n "Siguiente".
Se abre el di√°logo para seleccionar la variante de instalaci√≥n.
6. Active el bot√≥n de opci√≥n "Desinstalar" y haga clic en el bot√≥n "Siguiente".
En el siguiente di√°logo aparecen listados los ajustes de instalaci√≥n.
7. Haga clic en el bot√≥n de comando "Desinstalar".
Se inicia la desinstalaci√≥n.
8. Es posible que deba reiniciar el equipo. En ese caso, active el bot√≥n de opci√≥n "S√≠, deseo
reiniciar mi equipo ahora". A continuaci√≥n, haga clic en el bot√≥n "Reiniciar".
9. Si no es preciso volver a iniciar el equipo, haga clic en el bot√≥n "Finalizar".

Consulte tambi√©n
Informe de instalaci√≥n (P√°gina 41)
Indicaciones relativas a los requisitos del sistema (P√°gina 29)
Indicaciones relativas a licencias (P√°gina 9)
Iniciar la instalaci√≥n (P√°gina 43)
Mostrar el software instalado (P√°gina 47)
Modificar o actualizar productos instalados (P√°gina 49)
Reparaci√≥n de los productos instalados (P√°gina 51)

54

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n de actualizaciones y Support Packages
11.1

11

Comprobar disponibilidad de actualizaciones y Support Packages y
proceder a su instalaci√≥n
Mediante configuraci√≥n previa, el TIA Portal comprueba autom√°ticamente si hay nuevas
actualizaciones de software o nuevos Support Packages, p. ej. Hardware Support Packages
(HSP). La b√∫squeda autom√°tica de actualizaciones se realiza despu√©s de cada rearranque
completo del equipo y, posteriormente, de manera c√≠clica cada 24 horas. Es posible desactivar
o reactivar en cualquier momento la b√∫squeda autom√°tica. Tambi√©n existe la posibilidad de
buscar actualizaciones manualmente.
Las actualizaciones encontradas se pueden descargar e instalar.
Nota
Se admiten actualizaciones y Support Packages a partir del TIA Portal V13.

Desactivar o activar la b√∫squeda autom√°tica de actualizaciones de software
Para desactivar o reactivar la b√∫squeda autom√°tica de actualizaciones de software, proceda
del siguiente modo:
1. Elija el comando "Configuraci√≥n" del men√∫ "Opciones".
Se abre la ventana "Configuraci√≥n" en el √°rea de trabajo.
2. Seleccione el grupo "General > Actualizaciones de software" en la navegaci√≥n local.
3. Desactive la casilla de verificaci√≥n "Buscar actualizaciones cada d√≠a" si desea desactivar la
b√∫squeda autom√°tica de actualizaciones de software.
4. Active la casilla de verificaci√≥n "Buscar actualizaciones cada d√≠a" si desea reactivar la
b√∫squeda autom√°tica de actualizaciones de software.

B√∫squeda manual de actualizaciones de software
Si desea buscar manualmente actualizaciones de software, proceda del siguiente modo:
1. Haga clic en "Software instalado" del men√∫ "Ayuda".
Se abre el di√°logo "Software instalado".
2. Haga clic en "Buscar actualizaciones".
Se abrir√° el TIA Updater y se mostrar√°n las actualizaciones disponibles.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

55

Instalaci√≥n de actualizaciones y Support Packages
11.1 Comprobar disponibilidad de actualizaciones y Support Packages y proceder a su instalaci√≥n
O:
1. Elija el comando "Configuraci√≥n" del men√∫ "Opciones".
Se abre la ventana "Configuraci√≥n" en el √°rea de trabajo.
2. Seleccione el grupo "General > Actualizaciones de software" en la navegaci√≥n local.
3. Haga clic en "Buscar actualizaciones ahora".
Se abrir√° el TIA Updater y se mostrar√°n las actualizaciones disponibles.
O:
1. Abra el TIA Updater mediante "Inicio > Todos los programas > Siemens Automation >
Totally Integrated Automation UPDATER".
2. Haga clic en "Buscar actualizaciones".
Se muestran las actualizaciones disponibles.

Configurar el servidor
Dependiendo de si desea descargar las actualizaciones o los Support Packages del TIA
Automation Update Server o de un servidor de empresa, es necesario configurar el servidor
correspondiente. Para ello, proceda del siguiente modo:
1. Abra el TIA Updater.
2. Haga clic en "Configuraci√≥n" y, en el √°rea "Servidor en el que se buscar√°n actualizaciones"
del di√°logo que se muestra, seleccione la opci√≥n "TIA Automation Software Update Server".
El software buscar√° actualizaciones disponibles en el servidor del fabricante.
O:
1. Abra el TIA Updater.
2. Haga clic en "Configuraci√≥n" y, en el √°rea "Servidor en el que se buscar√°n actualizaciones"
del cuadro de di√°logo que aparece, seleccione la opci√≥n "Servidor corporativo".
3. Introduzca la URL del servidor que ha recibido de su administrador. La URL debe
introducirse en formato https://[URL del servidor]/[Ruta al directorio de ubicaci√≥n] o en
formato https://[Direcci√≥n IP del servidor]/[Ruta al directorio de ubicaci√≥n]. Si no est√° seguro
de qu√© formato debe utilizar, dir√≠jase a su administrador
El software buscar√° en el servidor de la empresa las actualizaciones disponibles.
4. Compruebe el nombre de la l√≠nea de producci√≥n y c√°mbielo si es necesario. El ajuste
predeterminado es "ProductionLine1".
Las l√≠neas de producci√≥n sirven para proporcionar determinados Updates/Support
Packages a distintos usuarios. Si su empresa no trabaja con distintas l√≠neas de producci√≥n,
conserve la entrada especificada.
Encontrar√° informaci√≥n detallada sobre c√≥mo crear proyectos y trabajar con l√≠neas de
producci√≥n en la Ayuda de TIA Updater Corporate Configuration Tool.
Es posible cambiar en cualquier momento las opciones del servidor en el que deben buscarse
actualizaciones. Sin embargo, durante el proceso de descarga el cambio est√° bloqueado. Tras
el cambio del servidor se muestran todas las actualizaciones y Support Packages
descargados, aun cuando no est√©n disponibles en el servidor configurado actualmente.

56

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n de actualizaciones y Support Packages
11.1 Comprobar disponibilidad de actualizaciones y Support Packages y proceder a su instalaci√≥n

Descargar e instalar actualizaciones de software por separado
Para descargar e instalar actualizaciones de software y Support Packages disponibles,
proceda del siguiente modo:
1. Si no se muestra el TIA Updater, √°bralo de uno de los modos siguientes:
‚Äì Si la b√∫squeda autom√°tica ha encontrado actualizaciones, en el √°rea de informaci√≥n de
la barra de tareas de Windows aparecer√° un mensaje, y en el √°rea de informaci√≥n se
mostrar√° el icono del TIA Updater. Haga clic en el mensaje o en el icono para abrir el TIA
Updater.
‚Äì Haga clic en "Software instalado" del men√∫ "Ayuda", y a continuaci√≥n en "Buscar
actualizaciones".
‚Äì En el men√∫ de inicio de Windows, haga clic en "Inicio > Todos los programas > Siemens
Automation > Automation Software Updater".
2. Haga clic en "Descargar" en la l√≠nea de la actualizaci√≥n o del Support Package que desee
instalar.
Se descargar√° la actualizaci√≥n o el Support Package. Cuando finalice el proceso de
descarga, se activar√° el correspondiente bot√≥n "Instalar".
Nota
Tenga en cuenta las indicaciones siguientes:
1. Puede iniciar simult√°neamente varios procesos de descarga.
2. Se puede cerrar sesi√≥n o incluso apagar el PC mientras est√° en curso una descarga. En
estos casos, el proceso de descarga continuar√° en segundo plano cuando vuelva a
iniciar sesi√≥n.
3. En algunos casos, en lugar del bot√≥n "Descargar" se muestra un enlace a una p√°gina
web externa. En este caso, descargue la actualizaci√≥n de software desde dicha p√°gina
e inst√°lela manualmente.
3. Cierre el TIA Portal, en caso de que a√∫n est√© abierto.
4. En el TIA Updater, haga clic en el bot√≥n "Instalar" del paquete de software que desee
instalar.
Aparecer√° el cuadro de di√°logo de instalaci√≥n.
Nota
Tenga en cuenta las indicaciones siguientes:
1. No es posible instalar varias actualizaciones al mismo tiempo.
2. No cierre sesi√≥n ni apague el PC durante una instalaci√≥n. De este modo evitar√°
versiones de software inconsistentes en su PC.
5. Haga clic en "Siguiente".
Se instalar√° el producto seleccionado.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

57

Instalaci√≥n de actualizaciones y Support Packages
11.1 Comprobar disponibilidad de actualizaciones y Support Packages y proceder a su instalaci√≥n

Descargar e instalar varios Support Packages en un solo paso
Para descargar e instalar Support Packages en un solo paso, proceda del siguiente modo:
1. Active las filas deseadas. Para ello dispone de varias opciones:
‚Äì Para descargar e instalar todos los Support Packages mostrados, active la marca de
verificaci√≥n en el t√≠tulo de la lista.
‚Äì Para descargar e instalar varios Support Packages, marque el primer Support Package
deseado, mantenga pulsada la tecla <Ctrl> y seleccione entonces los dem√°s Support
Packages que desee. Active despu√©s la marca de verificaci√≥n en una de las filas
seleccionadas.
‚Äì Para descargar e instalar varios Support Packages en un orden determinado, marque el
primer Support Package deseado, mantenga pulsada la tecla <May√∫s> y seleccione
entonces el √∫ltimo Support Package que desee.
2. Haga clic en el bot√≥n "Descargar e instalar".
3. En el cuadro de di√°logo que aparece despu√©s de la descarga, haga clic en "Siguiente" para
iniciar la instalaci√≥n. A continuaci√≥n se abre un cuadro de di√°logo que informa sobre el
progreso de la instalaci√≥n.
Nota
Solo pueden descargarse e instalarse Support Packages que no est√©n sujetos a restricciones
de exportaci√≥n.

Procedimiento alternativo de instalaci√≥n de Support Packages
Existe la posibilidad de seguir otro procedimiento para instalar un Support Package. Para ello,
proceda del siguiente modo:
1. En el TIA Portal, haga clic en "Support Packages" en el men√∫ "Herramientas".
Se abre el di√°logo "Informaci√≥n detallada". En la tabla se listan todos los Support Packages
del directorio que se definieron en la configuraci√≥n como ubicaci√≥n de los Support
Packages.
2. Si desea instalar un Support Package que no aparece en la lista, existen las siguientes
posibilidades:
‚Äì Si el Support Package se encuentra ya en el equipo, puede hacerse clic en "Agregar del
sistema de archivos" para incluirlo en la lista.
‚Äì Si se desea agregar un Support Package de la p√°gina "Service & Support" de Internet,
en primer lugar es preciso descargarlo haciendo clic en "Descargar de Internet". A
continuaci√≥n, lo puede agregar del sistema de archivos.
3. Seleccione el Support Package que desee instalar.
4. Haga clic en "Instalar".
5. Salga del TIA Portal y rein√≠cielo.

58

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Consulte tambi√©n
Informe de instalaci√≥n (P√°gina 41)

11.2

Trabajar con un servidor de empresa

11.2.1

Caracter√≠sticas y ventajas de un servidor de empresa

Introducci√≥n
Utilizando un servidor corporativo se pueden guardar las actualizaciones y Support Packages
seleccionados en un servidor local para ponerlos a disposici√≥n de los usuarios, por ejemplo,
para distintas l√≠neas de producci√≥n. Esto ofrece la ventaja de que los usuarios no necesitan
acceder a Internet, pudiendo instalar las actualizaciones a trav√©s de la Intranet, un disco duro
externo, etc. Como los usuarios no necesitan acceso directo a Internet aumenta notablemente
la protecci√≥n frente a troyanos o software maligno que provengan del contacto entre la red
interna de la empresa e Internet.

7,$8SGDWHU7RRO
,QWHUQHW
6LHPHQV8SGDWH6HUYHU

&RUSRUDWH8SGDWH6HUYHU

,QWUDQHW

7,$3RUWDO(QJLQHHULQJ6WDWLRQ

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

59

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Configuraci√≥n del servidor y creaci√≥n de proyectos
En la primera fase el servidor interno de la empresa lo configura un administrador de
servidores, y mediante la TIA Updater Corporate Configuration Tool se obtienen las
actualizaciones y los Support Packages. Adem√°s es posible crear proyectos para distintas
l√≠neas de producci√≥n, para las que el usuario obtendr√° las actualizaciones que necesite. Los
usuarios deben tener acceso al √°rea del servidor y disponer del nombre de la l√≠nea de
producci√≥n y ser informados acerca del directorio de almacenamiento.
Encontrar√° informaci√≥n detallada sobre c√≥mo crear proyectos y trabajar con l√≠neas de
producci√≥n en la Ayuda de TIA Updater Corporate Configuration Tool.

Trabajar con el servidor
El TIA Updater permite a los usuarios descargar e instalar las actualizaciones y Support
Packages que precisen. Es posible iniciar simult√°neamente varios procesos de descarga; sin
embargo, la instalaci√≥n de las actualizaciones y Support Packages debe realizarse una tras
otra.

11.2.2

Configurar el servidor de empresa para actualizaciones

Introducci√≥n
Para poner a disposici√≥n de los usuarios las actualizaciones y Support Packages disponibles
de manera centralizada es necesario configurar un servidor de empresa. Para ello, utilice el
Microsoft Server Manager.
A continuaci√≥n se describen a modo de ejemplo los pasos necesarios para crear y configurar
el servidor para utilizar la TIA Updater Corporate Configuration Tool (con el sistema operativo
Microsoft Server 2016). Otros ajustes que puedan ser necesarios para el funcionamiento en
una empresa concreta no forman parte de la presente descripci√≥n.
Nota
Tenga en cuenta que la estructura del men√∫ de inicio y de la ubicaci√≥n de los programas puede
diferir dependiendo de los diferentes sistemas operativos.
Encontrar√° informaci√≥n precisa sobre la configuraci√≥n y el manejo del Server Manager en la
ayuda en pantalla de Microsoft.

Requisitos
Debe tener derechos de administrador.

60

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Instalar el rol de servidor web (IIS)
Para instalar el rol de servidor web necesaria proceda del siguiente modo:
1. Abra el men√∫ Inicio y seleccione "Administrador del servidor".
2. En el panel, haga clic en "Agregar roles y caracter√≠sticas".
3. Utilice el asistente "Agregar roles y caracter√≠sticas" para agregar la funci√≥n de servidor web.
Antes de iniciar el asistente se verifica que el administrador haya asignado una contrase√±a
compleja, que los ajustes de red est√©n convenientemente configurados y que est√©n
instaladas las √∫ltimas actualizaciones de seguridad de Windows.
4. Seleccione la modalidad de instalaci√≥n "Instalaci√≥n basada en caracter√≠sticas o instalaci√≥n
basada en roles" y haga clic en "Siguiente".
5. Seleccione a continuaci√≥n el servidor de destino y haga clic en "Siguiente".
6. Tenga en cuenta los roles preseleccionados que se instalan de manera est√°ndar, y
despu√©s seleccione el rol adicional "Servidor web (IIS)".
7. Haga clic en "Agregar caracter√≠sticas" y despu√©s en "Siguiente". Se muestran las
caracter√≠sticas para el servidor web.
8. Haga clic en "Role 'Services" y compruebe que las siguientes caracter√≠sticas est√©n
seleccionadas o bien selecci√≥nelas:
√Årea "Web server"
‚Äì Documento est√°ndar
‚Äì Examinar directorio
‚Äì Error HTTP
‚Äì Contenido est√°tico
√Årea "Estado del sistema y diagn√≥stico"
‚Äì Registro HTTP
‚Äì Vigilancia de solicitudes
√Årea "Rendimiento"
‚Äì Compresi√≥n de contenidos est√°ticos
√Årea "Seguridad"
‚Äì Filtrado de solicitudes
√Årea "Desarrollo de aplicaciones"
‚Äì Extensibilidad de .NET 3.5
‚Äì Extensibilidad de .NET 4.6
‚Äì ASP.NET 3.5
‚Äì ASP.NET 4.6
‚Äì Extensiones ISAPI
‚Äì Filtro ISAPI

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

61

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa
9. Haga clic en "Siguiente".
10.Compruebe la selecci√≥n en el cuadro de di√°logo "Confirmar selecciones de instalaci√≥n" y
haga clic en "Instalar".
En el panel se agrega "IIS" y se puede proseguir la configuraci√≥n.

Crear un sitio web
1. Haga clic sobre "IIS" en el √°rea de navegaci√≥n, haga clic con el bot√≥n derecho del rat√≥n en
el √°rea "Servidores" y elija "Administrador de servicios de informaci√≥n de Internet (IIS)".
2. En el √°rea "Conexiones" haga clic en "Sitios" y despu√©s haga clic en "Sitio Web
predeterminado".
3. Seleccione la opci√≥n "Agregar directorio virtual..." haciendo clic con el bot√≥n derecho del
rat√≥n.
4. En el cuadro de di√°logo que aparece introduzca un nombre de visualizaci√≥n en el campo
"Alias", p. ej. "TIAPortalUpdates".
5. En el campo "Ruta de acceso f√≠sica" introduzca la ruta f√≠sica de la carpeta en la que se
encuentra el sitio web, o haga clic en el bot√≥n Examinar (...) para buscar la carpeta en el
sistema de archivos.
6. Haga clic en "Comprobar configuraci√≥n..." para comprobar que los ajustes sean correctos.
7. Haga clic en "Aceptar".

Activar un directorio virtual
1. En el √°rea "Conexiones > Sitios > Sitio Web predeterminado" seleccione el directorio virtual
que ha creado. En la vista "Caracter√≠sticas" haga doble clic en la entrada "Examinar
directorio".
2. En el √°rea "Acciones" haga clic en "Activar".

Agregar y configurar el tipo MIME
1. En el √°rea "Conexiones" seleccione el sitio web que ha creado.
2. En la vista "Caracter√≠sticas" haga doble clic en "Tipo MIME".
3. En el √°rea "Acciones" haga clic en "Agregar".
4. En el di√°logo "Agregar tipo MIME", dentro del campo de texto "Extensi√≥n", introduzca .*.
5. Introduzca "all/files" en el campo de texto "Tipo MIME".
6. Haga clic en "Aceptar".

62

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Activar extensi√≥n de servidor BITS-IIS
1. Vaya al directorio virtual en el administrador IIS.
2. En la vista de caracter√≠sticas del directorio virtual haga doble clic en "Cargas de BITS".
3. Active la casilla de verificaci√≥n "Permitir a los clientes cargar archivos" y despu√©s haga clic
en "Aplicar".

Crear un certificado de servidor autofirmado
1. En el √°rea "Conexiones" navegue hasta el nivel que desee administrar.
2. En la vista "Caracter√≠sticas" haga doble clic en "Certificados de servidor".
3. En el √°rea "Acciones" haga clic en "Crear certificado autofirmado".
4. En el cuadro de di√°logo "Crear certificado autofirmado" introduzca un nombre descriptivo
del certificado en el campo "Especifique un nombre descriptivo para el certificado" y haga
clic en "Aceptar".

Crear un enlace SSL
1. En el √°rea "Conexiones" ampl√≠e la entrada "Sitios" y a continuaci√≥n haga clic en el sitio al
que desee agregar un enlace.
2. En el √°rea "Acciones" haga clic en "Enlaces".
3. En el cuadro de di√°logo "Enlaces de sitios" haga clic en "Agregar".
4. En el cuadro de di√°logo "Agregar enlace de sitio", seleccione "https" en "Tipo" y el
certificado que ha creado en "Certificado SSL", y a continuaci√≥n haga clic en "Aceptar".

Verificar enlace SSL
1. En "Examinar sitio web" dentro del √°rea "Acciones" haga clic en el enlace creado
anteriormente.
En Internet Explorer se abre una p√°gina de error porque el certificado autofirmado fue
creado por su equipo.
2. Haga clic en "Pasar a este sitio web (no recomendado)".
Si agrega el certificado a la memoria de certificados "Entidades de certificaci√≥n ra√≠z de
confianza" no se volver√° a mostrar este mensaje.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

63

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Configuraci√≥n de SSL
1. En la vista "Caracter√≠sticas" haga doble clic en "Configuraci√≥n de SSL".
2. En el cuadro de di√°logo "Configuraci√≥n de SSL", √°rea "Certificados de cliente", utilice uno
de los procedimientos siguientes:
‚Äì Seleccione "Omitir" si no desea aceptar ning√∫n certificado de cliente aun cuando un
cliente pueda exhibir un certificado.
‚Äì Seleccione "Aceptar" para aceptar los certificados de cliente.
‚Äì Seleccione "Requerir" si los certificados de clientes deben ser obligatorios. Para poder
utilizar la opci√≥n "Requerir certificados de cliente" debe estar activada la opci√≥n
"Requerir SSL".
3. En el √°rea "Acciones" haga clic en "Aplicar".

Distribuci√≥n de actualizaciones en distintas √°reas
Puede ocurrir que distintos departamentos necesiten distintas actualizaciones o Support
Packages. En ese caso es recomendable utilizar varios servidores que ofrezcan distintas
actualizaciones y Support Packages. Para ello, proceda del siguiente modo:
1. Cree distintos servidores de empresa tal y como se ha descrito arriba.
o bien
1. Instale el rol de servidor web.
2. Genere varios sitios web.
Tenga en cuenta que los nombres de estos sitios web y las rutas f√≠sicas deben ser √∫nicos,
para que no se produzcan confusiones.
3. Ajuste las caracter√≠sticas descritas antes para el servidor web o el sitio web.
Ahora puede guardar las actualizaciones y Support Packages necesarios para los distintos
departamentos en los directorios definidos.

11.2.3

Preparar actualizaciones en un servidor de empresa.

Introducci√≥n
La TIA Updater Corporate Configuration Tool permite configurar un servidor de empresa en el
que guardar las actualizaciones y los Support Packages disponibles para ponerlos a
disposici√≥n de los usuarios.

Requisitos
Debe tener derechos de administrador.
Un servidor de empresa solo puede instalarse en un sistema operativo Microsoft Server,
puesto que para que funcione se requiere el servicio BITS IIS y un servidor IIS en
funcionamiento.

64

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Agregar actualizaciones del TIA Automation Software Update Server
Para agregar actualizaciones del TIA Automation Software Update Server proceda del
siguiente modo:
1. Abra la TIA Updater Corporate Configuration Tool.
Se mostrar√°n las actualizaciones disponibles.
2. Haga clic en el bot√≥n "Agregar actualizaci√≥n" y, en el cuadro de di√°logo que se muestra,
active la casilla de verificaci√≥n "Agregar actualizaci√≥n del TIA Automation Software Update
Server"
3. En el cuadro de di√°logo "Agregar actualizaci√≥n del TIA Automation Software Update
Server" seleccione las actualizaciones que desee (software y Support Packages) y haga
clic en "Agregar".
Las actualizaciones que ya existan en el servidor de empresa se mostrar√°n en gris. Estas
actualizaciones no pueden cargarse de nuevo. Durante el proceso de descarga el di√°logo
muestra el estado y el tiempo restante.

Cancelar el proceso de descarga
Para cancelar el proceso proceda del siguiente modo:
1. Haga clic en el bot√≥n "Cancelar descarga".
2. Confirme el di√°logo que se muestra pulsando "S√≠".
La descarga de la actualizaci√≥n se interrumpe y se borra de la lista.

Borrar actualizaciones del servidor de empresa
Para borrar actualizaciones proceda del siguiente modo:
1. Seleccione las actualizaciones que desee y haga clic en el bot√≥n "Eliminar".
2. Confirme el di√°logo que se muestra pulsando "S√≠".
Las actualizaciones seleccionadas se borran de la lista.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

65

Instalaci√≥n de actualizaciones y Support Packages
11.2 Trabajar con un servidor de empresa

Opciones de servidor
En el cuadro de di√°logo "TIA Automation Software Update Server" haga clic en "Configuraci√≥n"
para definir lo siguiente:
1. En "Ruta del servidor" indique la carpeta en la que deban guardarse las descargas. Es
posible seleccionar una unidad local o una unidad de red.
Nota
Si se trabaja directamente en el servidor, el directorio de destino es igual que el directorio
de entrega en el servidor. Todos los cambios se aplican directamente. Este procedimiento
no es recomendable, puesto que pueden originarse conflictos con descargas activas.
Es recomendable trabajar en otro equipo; el directorio de destino es un directorio
cualquiera. Despu√©s, el contenido de ese directorio debe copiarse en el directorio de
entrega. Para ello, aseg√∫rese de que no se originan conflictos con descargas activas.
2. Active la casilla de verificaci√≥n "Ejecutar el servidor siempre en segundo plano (el icono se
muestra en la barra de tareas)" si desea que el servidor funcione siempre en segundo plano.
3. Confirme las entradas con "Aceptar".

Consulte tambi√©n
Caracter√≠sticas y ventajas de un servidor de empresa (P√°gina 59)
Configurar el servidor de empresa para actualizaciones (P√°gina 60)

66

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n automatizada de Support Packages
12.1

12

Instalaci√≥n automatizada de Support Packages

Introducci√≥n
A partir de la V15.1, con el Support Package Installer se pueden instalar o actualizar de forma
automatizada todos los Support Packages, como por ejemplo HSP (Hardware Support
Packages) compatibles con las versiones instaladas del TIA Portal (p. ej. isp.15_1), a trav√©s de
la l√≠nea de comando.

Requisitos
‚óè El hardware y software de la programadora o PC cumplen los requisitos del sistema.
‚óè Usted dispone de derechos de administraci√≥n para su equipo.
‚óè Se han cerrado todas las aplicaciones que se estaban ejecutando.

Procedimiento
Para iniciar la instalaci√≥n con las opciones deseadas directamente a trav√©s de la l√≠nea de
comando, proceda del siguiente modo:
1. Inicie el prompt de Windows con "Inicio > Ejecutar > cmd".
2. Vaya al directorio que contiene el archivo
"Siemens.Automation.SupportPackageInstaller.exe". Se trata del directorio de instalaci√≥n
del TIA Portal instalado.
3. En el prompt de Windows, introduzca el siguiente comando:
%directorio de instalaci√≥n% > Siemens.Automation.SupportPackageInstaller.exe
<directorio de almacenamiento del Support Package(HSP)> [-l <Nombre del archivo de
informe>] [-warnaserror]
<Directorio de almacenamiento del Support Package>
Directorio imprescindible en el que se encuentran los archivos Support Package (*.isp). Puede
ser tanto una carpeta local como un Remote Share.
-l <Ubicaci√≥n del archivo de informe>
Este par√°metro es opcional e indica la ruta del archivo de informe. Si no est√° activado, el
archivo de informe se crea en el directorio binario. ¬°Se requieren derechos de escritura para la
carpeta de almacenamiento!
-warnaserror
Este par√°metro es opcional e indica que cada mensaje que normalmente se notificar√≠a como
advertencia se notifique como error. Si, por ejemplo, un HSP no cumple los requisitos
necesarios, se devuelve un valor de retorno o de cancelaci√≥n a la l√≠nea de comando y el HSP
en cuesti√≥n se omite.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

67

Instalaci√≥n automatizada de Support Packages
12.2 Valores de retorno del proceso de instalaci√≥n
-?
Este par√°metro es opcional y muestra la ayuda.

Nota
‚óè Si el directorio de almacenamiento o el nombre del archivo de informe contienen espacios
vac√≠os, las denominaciones deber√°n estar entre comillas.
‚óè Solo se tienen en cuenta los Support Packages ubicados directamente en el directorio de
almacenamiento, los subdirectorios se ignoran. Es decir, que los archivos *.isp deben
encontrarse directamente en el directorio de almacenamiento.

Consulte tambi√©n
Valores de retorno del proceso de instalaci√≥n (P√°gina 68)
Archivo de informe (P√°gina 69)

12.2

Valores de retorno del proceso de instalaci√≥n

Esencia
La tabla siguiente muestra los valores de retorno y su descripci√≥n:

C√≥digo

Descripci√≥n

0

Instalaci√≥n ejecutada con √©xito.

1

Instalaci√≥n ejecutada con √©xito, rearranque completo nece‚Äê
sario.

-1

Error en la instalaci√≥n.

-2

Error en la instalaci√≥n: el TIA Portal contin√∫a funcionando.

-3

Error en la instalaci√≥n: Ya hay otra instalaci√≥n en curso.

-4

Error en la instalaci√≥n: No tiene derechos suficientes. Para la
instalaci√≥n se requieren derechos de administrador.

-6

Error en la instalaci√≥n: Espacio de memoria insuficiente.

-7

Error en la instalaci√≥n: Se requiere un rearranque completo
antes de poder iniciar la instalaci√≥n.

Consulte tambi√©n
Instalaci√≥n automatizada de Support Packages (P√°gina 67)
Archivo de informe (P√°gina 69)

68

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n automatizada de Support Packages
12.3 Archivo de informe

12.3

Archivo de informe

Contenido del archivo de informe
El archivo de informe contiene informaci√≥n detallada sobre cada instalaci√≥n. Si el archivo de
informe ya existe, se completa. Para cada instalaci√≥n se genera un encabezado y un pie de
p√°gina, entre los que se encuentra la informaci√≥n deseada.
Se genera un evento para los siguientes eventos:
‚óè Support Packages que, aunque se encuentran en el directorio de almacenamiento y est√°n
disponibles durante la instalaci√≥n, no pueden instalarse debido a la falta de algunos
productos. En la entrada del archivo de informe puede consultarse qu√© productos y qu√©
versiones de estos faltan.
‚óè Support Packages que no han podido instalarse correctamente.
‚óè Support Packages que han podido instalarse correctamente.
Para cada entrada se protocoliza el nombre de archivo del HSP, incluida la extensi√≥n.

Consulte tambi√©n
Instalaci√≥n automatizada de Support Packages (P√°gina 67)
Valores de retorno del proceso de instalaci√≥n (P√°gina 68)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

69

Instalaci√≥n automatizada de Support Packages
12.3 Archivo de informe

70

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n y desinstalaci√≥n de la herramienta de
migraci√≥n
13.1

13

Requisitos del sistema

Requisitos del sistema para la herramienta de migraci√≥n
Para el uso de la herramienta de migraci√≥n rigen los siguientes requisitos del sistema:
‚óè Deben estar instalados todos los productos con los que se ha creado el proyecto de origen.
Se soportan los siguientes productos:
‚Äì A partir de STEP 7 V5.4 SP5
‚Äì WinCC V7.5 con las actualizaciones m√°s recientes
‚Äì A partir de WinCC flexible 2008 SP2
‚Äì Proyectos integrados de STEP 7 V5.4 y de los productos WinCC arriba mencionados
‚Äì STEP 7 Distributed Safety V5.4 SP5
‚Äì F-Configuration-Pack V5.4 SP5 hasta V5.5 SP12
‚Äì SINUMERIK STARTER y Startdrives
‚Äì A partir de SIMOTION SCOUT V4.4
Para la migraci√≥n de proyectos SIMOTION SCOUT se necesita la versi√≥n
correspondiente al SCOUT TIA del complemento SCOUT Migration Tool PlugIn.
‚óè Deben estar instalados todos los paquetes opcionales necesarios para editar el proyecto
STEP 7. Esto incluye por ejemplo todos los HSPs para todos los dispositivos utilizados en
el proyecto de origen.
‚óè Debe estar instalado Microsoft .Net Framework 4.6.2. Si Microsoft .Net Framework no est√°
instalado, se instalar√° la versi√≥n necesaria con la herramienta de migraci√≥n.

13.2

Instalaci√≥n de la herramienta de migraci√≥n

Suministro de la herramienta de migraci√≥n
La herramienta de migraci√≥n se encuentra en el directorio "Support" del DVD de instalaci√≥n del
TIA Portal. Tambi√©n est√° disponible para la descarga en el Siemens Industry Online Support.
Algunos productos requieren plug-ins adicionales para la herramienta de migraci√≥n, p. ej.
SIMATIC Failsafe o SIMOTION. Los complementos o plug-ins tambi√©n pueden descargarse
desde el Siemens Industry Online Support o instalarse desde el DVD de instalaci√≥n de los
correspondientes productos.
Por lo general, la herramienta de migraci√≥n se instala sin el TIA Portal. Dado que en el TIA
Portal ya viene integrada una funci√≥n de migraci√≥n, no es necesario instalar adicionalmente la
herramienta de migraci√≥n.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

71

Instalaci√≥n y desinstalaci√≥n de la herramienta de migraci√≥n
13.3 Desinstalaci√≥n de la herramienta de migraci√≥n

Procedimiento
Para instalar la herramienta de migraci√≥n, proceda del siguiente modo:
1. Descargue el archivo de instalaci√≥n desde el Siemens Industry Online Support o utilice para
la instalaci√≥n el archivo que se encuentra en el directorio "Support" del DVD de instalaci√≥n
del TIA Portal.
2. Inicie el archivo de instalaci√≥n.
Se abre el programa de instalaci√≥n de la herramienta de migraci√≥n.
3. En el primer paso, seleccione el idioma que desea ver durante la instalaci√≥n y haga clic en
el bot√≥n "Siguiente".
Se abre la p√°gina para seleccionar el idioma del software.
4. Puesto que la herramienta de migraci√≥n √∫nicamente se suministra en ingl√©s, no se puede
seleccionar ning√∫n otro idioma para la instalaci√≥n del software. Haga clic en "Siguiente"
para acceder al siguiente paso.
Se abre la p√°gina para seleccionar los componentes que desea instalar.
5. La herramienta de migraci√≥n consta de un solo componente de software. Por dicho motivo,
esta ya aparece marcada. Haga clic en el bot√≥n "Siguiente".
Se carga la p√°gina para aceptar las condiciones de la licencia.
6. Haga clic en una de las entradas de la lista para leer los t√©rminos y condiciones de la
licencia, as√≠ como las indicaciones de seguridad. Si est√° conforme con todos los t√©rminos
y condiciones de la licencia, active la casilla de verificaci√≥n "Acepto todas las condiciones
de los acuerdos aqu√≠ listados" y "Confirmo que he le√≠do y comprendido las indicaciones de
seguridad para el uso seguro de los productos".
7. A continuaci√≥n, haga clic en el bot√≥n "Siguiente".
Se abre un listado de la instalaci√≥n.
8. Haga clic en el bot√≥n "Instalar".
La instalaci√≥n se ejecuta con la configuraci√≥n mostrada.
Despu√©s de instalar la herramienta de migraci√≥n es necesario reiniciar el equipo.

13.3

Desinstalaci√≥n de la herramienta de migraci√≥n
La herramienta de migraci√≥n se puede desinstalar desde el Panel de control.

Procedimiento
Para desinstalar la herramienta de migraci√≥n, proceda del siguiente modo:
1. Abra el Panel de control.
2. Haga doble clic en la entrada "Programas y caracter√≠sticas" del Panel de control.
Se abre el cuadro de di√°logo "Desinstalar o cambiar un programa".
3. Dentro de ese cuadro de di√°logo, seleccione la entrada para la herramienta de migraci√≥n
y haga clic en el bot√≥n "Desinstalar".
Aparece una consulta de seguridad.
4. Confirme la pregunta de seguridad haciendo clic en el bot√≥n "S√≠".
Se abre el programa de instalaci√≥n.

72

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalaci√≥n y desinstalaci√≥n de la herramienta de migraci√≥n
13.3 Desinstalaci√≥n de la herramienta de migraci√≥n
5. Seleccione el idioma de instalaci√≥n y haga clic en "Siguiente".
6. Seleccione la herramienta de migraci√≥n para desinstalarla y haga clic en "Siguiente".
7. Haga clic en "Desinstalar".
La herramienta de migraci√≥n se desinstala.
8. Para salir del programa de instalaci√≥n, haga clic en "Finalizar".

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

73

Instalaci√≥n y desinstalaci√≥n de la herramienta de migraci√≥n
13.3 Desinstalaci√≥n de la herramienta de migraci√≥n

74

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos TIA
14.1

14

Notas sobre la instalaci√≥n del servidor de proyectos

Introducci√≥n
La instalaci√≥n del servidor multiusuario permite utilizar las funciones de Multiuser Engineering.
El servidor multiusuario puede instalarse de uno de los modos siguientes:
‚óè Junto con la instalaci√≥n del TIA Portal.
‚óè Como instalaci√≥n independiente en un proceso de instalaci√≥n propio sin TIA Portal.
Nota
Para la instalaci√≥n de servidor se requieren derechos de administrador.

Instalaci√≥n del servidor multiusuario con el TIA Portal
La instalaci√≥n del servidor multiusuario se lleva a cabo junto con la instalaci√≥n de los siguientes
productos del TIA Portal:
‚óè SIMATIC STEP 7 Basic
‚óè SIMATIC STEP 7 Professional
‚óè SIMATIC WinCC Basic
‚óè SIMATIC WinCC Comfort/Advanced
‚óè SIMATIC WinCC Professional
El servidor multiusuario est√° activado en parte por defecto en la selecci√≥n de productos y se
instala con ellos. Compruebe el ajuste durante la instalaci√≥n del TIA Portal. Durante la
instalaci√≥n encontrar√° el ajuste predeterminado correspondiente para el servidor multiusuario
en el directorio "Options" de la selecci√≥n de productos. Seleccione, activando o no la casilla de
verificaci√≥n, si desea que se instale o no adem√°s el servidor multiusuario durante la instalaci√≥n
del TIA Portal.

Instalaci√≥n del servidor multiusuario como instalaci√≥n independiente
El servidor multiusuario tambi√©n puede instalarse de forma independiente.
Encontrar√° tambi√©n una descripci√≥n de la instalaci√≥n automatizada en el directorio
"Documents\Readme\<directorio de idioma>" del DVD de producto.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

75

Instalar y desinstalar el servidor de proyectos TIA
14.1 Notas sobre la instalaci√≥n del servidor de proyectos

Versiones id√©nticas del TIA Portal en la instalaci√≥n
Al instalar productos del TIA Portal en los diferentes clientes aseg√∫rese de que todos los
dispositivos utilizan para la instalaci√≥n las mismas versiones de los productos de software.
Si, p. ej., se ha instalado STEP 7 Professional, WinCC Advanced y Safety as√≠ como el servidor
multiusuario con la versi√≥n Vx.y, el resto de dispositivos de Team Engineering tambi√©n deben
tener instaladas las mismas versiones de este software.
La instalaci√≥n de los Service Packs y las actualizaciones debe realizarse al mismo tiempo para
todos los productos.

Ruta de instalaci√≥n
No utilice caracteres Unicode (p. ej. caracteres chinos) en la ruta de instalaci√≥n.

Instalaci√≥n de un nuevo servidor multiusuario
Tenga en cuenta que debe instalar primero el √∫ltimo servidor multiusuario y solo entonces
podr√° desinstalar su versi√≥n antigua.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
tambi√©n se puedan aplicar para el nuevo servidor. Si se borran completamente todos los
servidores multiusuario existentes antes de la instalaci√≥n, se perder√°n tambi√©n las
configuraciones de usuario y deber√°n reconfigurarse.

Programas antivirus
Durante la instalaci√≥n es necesario poder acceder en lectura y escritura a los archivos ya
instalados. Algunos programas antivirus lo impiden. Durante la instalaci√≥n del servidor
multiusuario se recomienda desactivar los antivirus y volver a activarlos despu√©s.

Plataformas de virtualizaci√≥n compatibles
Tanto el servidor multiusuario como el TIA Portal pueden instalarse tambi√©n en una m√°quina
virtual.
Para ello, utilice una de las siguientes plataformas de virtualizaci√≥n en la versi√≥n indicada o una
superior:
‚óè VMware vSphere Hypervisor (ESXi) 6.5
‚óè VMware Workstation 12.5.7
‚óè VMware Player 12.5.7
‚óè Microsoft Hyper-V Server 2016
Para instalar una plataforma de visualizaci√≥n se aplican los mismos requisitos que para
instalar el TIA Portal.

76

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos TIA
14.2 Instalar el servidor de proyectos

Consulte tambi√©n
Instalar el servidor de proyectos (P√°gina 77)
Desinstalar el servidor de proyectos (P√°gina 79)

14.2

Instalar el servidor de proyectos

Introducci√≥n
El servidor de proyectos puede instalarse en el marco de la instalaci√≥n de TIA Portal o bien de
forma independiente. Si se instala el servidor de proyectos junto con TIA Portal, tambi√©n se
instala siempre la versi√≥n del servidor de proyectos correspondiente a TIA Portal.
Encontrar√° tambi√©n una descripci√≥n de la instalaci√≥n automatizada en el directorio
"Documents\Readme\<directorio de idioma>" del DVD de producto.
Nota
Reinstalaci√≥n previa a la desinstalaci√≥n
Tenga en cuenta que debe instalar primero el servidor de proyectos m√°s reciente y solo
entonces podr√° desinstalar la versi√≥n anterior.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
tambi√©n se puedan aplicar para el nuevo servidor. Si se borran completamente todos los
servidores de proyectos existentes antes de la instalaci√≥n, se perder√°n tambi√©n las
configuraciones de usuario y deber√°n reconfigurarse.

Reglas para la instalaci√≥n
Un equipo puede tener instaladas varias versiones del servidor de proyectos, que pueden
utilizar diferentes versiones de proyecto de TIA Portal.
Versiones de proyecto utilizables
Versiones del servidor de proyectos

Versiones de TIA Portal

Server V16

V16, V15.1, V15 y V14

Server V15.1

V15.1, V15 y V14

Server V15

V15 y V14

Server V14

V14

En cualquier caso, hay que asegurarse de que cada versi√≥n de TIA Portal y del servidor de
proyectos solo dispone de las funciones contenidas en esta versi√≥n.
Multiuser Engineering (ingenier√≠a multiusuario) no actualiza versiones de proyecto.

Requisitos para la instalaci√≥n
Para instalar el servidor de proyectos se aplican los mismos requisitos que para instalar TIA
Portal.

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

77

Instalar y desinstalar el servidor de proyectos TIA
14.2 Instalar el servidor de proyectos

Instalar el servidor de proyectos con TIA Portal
Para la instalaci√≥n proceda del siguiente modo:
1. Observe los requisitos para la instalaci√≥n del paquete de software seleccionado.
2. Inicie el programa de instalaci√≥n del producto deseado insertando el soporte de datos de
instalaci√≥n en la unidad de disco correspondiente.
3. Seleccione los ajustes deseados y haga clic en el bot√≥n "Instalar".
4. Aseg√∫rese de que el servidor de proyectos est√° marcado en la selecci√≥n de productos y
siga las instrucciones de los cuadros de di√°logo del programa de instalaci√≥n.

Resultado
El servidor de proyectos se ha instalado en el equipo junto con TIA Portal.

Instalar el servidor de proyectos de forma independiente
Para la instalaci√≥n proceda del siguiente modo:
1. Observe los requisitos para la instalaci√≥n del servidor de proyectos.
2. Inicie el programa para la instalaci√≥n independiente del servidor de proyectos haciendo
doble clic en el archivo .exe autoextra√≠ble "TIA_Portal_Projekt_Server_V<x.y>.exe".
Encontrar√° el archivo en el directorio "Support" del DVD de producto correspondiente.
3. Seleccione los ajustes deseados y haga clic en el bot√≥n "Instalar".
4. Siga las instrucciones de los cuadros de di√°logo del programa de instalaci√≥n.

Resultado
El servidor de proyectos se ha instalado en el equipo.

Consulte tambi√©n
Notas sobre la instalaci√≥n del servidor de proyectos (P√°gina 75)
Desinstalar el servidor de proyectos (P√°gina 79)

78

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos TIA
14.3 Desinstalar el servidor de proyectos

14.3

Desinstalar el servidor de proyectos

Introducci√≥n
El servidor de proyectos se puede desinstalar desde el Panel de control.
Nota
Reinstalaci√≥n previa a la desinstalaci√≥n
Tenga en cuenta que debe instalar primero el servidor de proyectos m√°s reciente y solo
entonces podr√° desinstalar la versi√≥n anterior.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
tambi√©n se puedan aplicar para el nuevo servidor. Si se borran completamente todos los
servidores de proyectos existentes antes de la instalaci√≥n, se perder√°n tambi√©n las
configuraciones de usuario y deber√°n reconfigurarse.

Requisitos para la desinstalaci√≥n
El equipo dispone de una instalaci√≥n del servidor de proyectos.

Desinstalar el servidor de proyectos
Para la desinstalaci√≥n, proceda del siguiente modo:
1. Abra el Panel de control.
2. Haga doble clic en la entrada "Agregar o quitar programas" del Panel de control.
Se abre el cuadro de di√°logo "Agregar o quitar programas".
3. Seleccione la entrada del "Servidor de proyectos" en el cuadro de di√°logo "Agregar o quitar
programas" y haga clic en el bot√≥n "Quitar".
Aparece una consulta de seguridad.
4. Confirme la consulta de seguridad haciendo clic en el bot√≥n "Desinstalar".

Resultado
El servidor de proyectos se ha desinstalado del equipo.

Consulte tambi√©n
Notas sobre la instalaci√≥n del servidor de proyectos (P√°gina 75)
Instalar el servidor de proyectos (P√°gina 77)

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

79

Instalar y desinstalar el servidor de proyectos TIA
14.3 Desinstalar el servidor de proyectos

80

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico
C

L

Clave de licencia, 21
Uso de las claves de licencia, 21
Copia de seguridad, 22

Licencia, 26
Defectuosa, 23
Inicio sin licencia v√°lida, 18
Licencia defectuosa, 23
WinCC Runtime Professional para Asia, 26
Licencia defectuosa, 23
Licencia no v√°lida
Al cambiar la zona horaria, 22
Licencia para CPs de PC, 26
Licencias, 9
License Manager Panel Plugin, 24

D
Desinstalaci√≥n de claves de licencia, 21
Destrucci√≥n de claves de licencia, 20

H
Hardware Support Package
Instalar, 57
Herramienta de migraci√≥n
Desinstalaci√≥n, 72
Requisitos del sistema, 71
Suministro y distribuidores, 71
HSP, (V√©ase Support Package)

I
Iniciar la desinstalaci√≥n, 53
Instalaci√≥n
Actualizaciones, 57
Actualizar productos, 49
Directorio de destino, 5
Ejecutar autom√°ticamente, 5
Entorno virtual (Private Cloud), 5
Informe, 41
Iniciar, 43
Licencias, 9
Modificar productos, 49
Reparar productos, 51
Requisitos del sistema, 29
Support Package, 57
Ver software, 47
Instalaci√≥n de claves de licencia, 20, 21
Instalar actualizaci√≥n, 57
Instalar Support Package, 57
Intrusion Detection System (IDS), 34

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

M
M√°quina virtual (VM)
Plataformas de virtualizaci√≥n compatibles, 32
Modo de demostraci√≥n
Paneles de operador, 24
Runtime, 25
Sistema de ingenier√≠a, 18
Mostrar archivos PDF, 29
Mostrar la Welcome Tour, 29
Multiuser Engineering (ingenier√≠a multiusuario)
Instalaci√≥n del servidor multiusuario como
instalaci√≥n independiente, 75
Instalaci√≥n del servidor multiusuario con el TIA
Portal, 75
Introducci√≥n, 75

O
Obtenci√≥n de licencias de panel de operador
No basado en PC, 24
Operaci√≥n de Restore
Clave de licencia, 22

P
Panel de operador, 24
Programa antivirus, 6, 34
Programa de seguridad, 34

81

√çndice alfab√©tico

R
Requisitos de hardware, 30, 32
Requisitos de software, 30
Requisitos del sistema, 30

S
Sistema operativo, 30
Software de encriptaci√≥n, 34

W
WinCC Runtime Professional para Asia
Licencia, 26
Windows, 30

82

Instalaci√≥n
Manual de programaci√≥n y manejo, 11/2019

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo

11/2019

Sinopsis de las posibilidades
de migraci√≥n

1

Migrar proyectos a un
proyecto del TIA Portal

2

Migrar programas de PLC a
una CPU S7-1500 / ET
200SP

3

Migraci√≥n de S7-1200 a
firmware V4 y posterior

4

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Digital Industries
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

Sinopsis de las posibilidades de migraci√≥n ..................................................................................................7

2

Migrar proyectos a un proyecto del TIA Portal .............................................................................................9
2.1

Migraci√≥n de proyectos con el TIA Portal ................................................................................9

2.2

Comprobar la capacidad de migraci√≥n de componentes de hardware..................................10

2.3
2.3.1
2.3.2
2.3.3

Preparaci√≥n de proyectos con la herramienta de migraci√≥n..................................................11
Migraci√≥n de proyectos con la herramienta de migraci√≥n......................................................11
Inicio de la herramienta de migraci√≥n ....................................................................................13
Crear el archivo de migraci√≥n ................................................................................................13

2.4

Migraci√≥n de proyectos ..........................................................................................................14

2.5

Mostrar el desarrollo de la migraci√≥n .....................................................................................16

2.6

Mostrar el informe de la migraci√≥n.........................................................................................16

2.7
2.7.1
2.7.2
2.7.3
2.7.4
2.7.5
2.7.6
2.7.6.1
2.7.6.2
2.7.6.3
2.7.6.4
2.7.6.5
2.7.6.6
2.7.6.7
2.7.6.8
2.7.6.9
2.7.6.10
2.7.6.11
2.7.6.12
2.7.6.13

Migrar proyectos de STEP 7 ..................................................................................................17
Migraci√≥n de proyectos STEP 7.............................................................................................17
Requisitos para la migraci√≥n de proyectos STEP 7...............................................................18
Comprobar la capacidad de migraci√≥n de los proyectos STEP 7..........................................19
Verificaci√≥n de la coherencia en el proyecto de origen..........................................................20
Eliminaci√≥n de componentes hardware no soportados .........................................................21
Particularidades de la migraci√≥n ............................................................................................22
Nombres de dispositivo..........................................................................................................22
Configuraciones de PROFINET IO ........................................................................................22
Configuraciones de PROFIBUS.............................................................................................24
Dispositivos GSD y GSDML...................................................................................................24
Conexiones ............................................................................................................................24
Multiproyectos ........................................................................................................................25
Migraci√≥n de bloques de programa........................................................................................25
Migraci√≥n de programas KOP/FUP/AWL...............................................................................30
Migraci√≥n de programas GRAPH...........................................................................................31
Migraci√≥n de programas SCL ................................................................................................32
Avisos.....................................................................................................................................39
Notificar errores de sistema ...................................................................................................39
Migraci√≥n de textos del proyecto ...........................................................................................40

2.8
2.8.1
2.8.1.1
2.8.1.2
2.8.1.3
2.8.1.4
2.8.1.5
2.8.2
2.8.2.1
2.8.2.2
2.8.2.3

Migrar proyectos de WinCC ...................................................................................................40
Migrar proyectos de WinCC flexible 2008..............................................................................40
Principios b√°sicos (WinCC flexible) .......................................................................................40
Migrar datos de ingenier√≠a (WinCC flexible) ..........................................................................46
Migrar datos runtime (WinCC flexible) ...................................................................................68
Migrar proyectos integrados (WinCC flexible)........................................................................72
Referencia (WinCC flexible)...................................................................................................76
Migrar proyectos de WinCC V7..............................................................................................90
Principios b√°sicos (WinCC V7) ..............................................................................................90
Migrar datos de ingenier√≠a (WinCC V7) .................................................................................99
Copia de los datos Runtime (WinCC V7).............................................................................129

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

3

√çndice

3

2.8.2.4
2.8.2.5

Referencia (WinCC V7)........................................................................................................129
Proyectos integrados ...........................................................................................................131

2.9
2.9.1
2.9.2
2.9.3
2.9.4
2.9.5
2.9.6

Migrar proyectos integrados.................................................................................................135
Migraci√≥n de un proyecto integrado.....................................................................................135
Reajustar proyectos integrados ...........................................................................................137
Convertir CPUs no especificadas en CPUs especificadas ..................................................138
Crear una conexi√≥n HMI integrada ......................................................................................140
Volver a enlazar variables HMI ............................................................................................142
Borrado de una conexi√≥n HMI no integrada ........................................................................143

Migrar programas de PLC a una CPU S7-1500 / ET 200SP....................................................................145
3.1

Principios b√°sicos de la migraci√≥n de programas PLC........................................................145

3.2

Ejecuci√≥n de la migraci√≥n ....................................................................................................147

3.3

Visualizaci√≥n de un archivo de registro................................................................................149

3.4
3.4.1
3.4.1.1
3.4.1.2
3.4.1.3
3.4.1.4
3.4.1.5
3.4.1.6
3.4.1.7
3.4.1.8
3.4.1.9
3.4.1.10
3.4.1.11
3.4.1.12
3.4.2
3.4.2.1
3.4.2.2
3.4.2.3
3.4.2.4
3.4.2.5
3.4.2.6
3.4.2.7
3.4.2.8
3.4.3
3.4.3.1
3.4.3.2
3.4.3.3
3.4.4
3.4.4.1
3.4.4.2
3.4.4.3
3.4.4.4

Particularidades en la migraci√≥n de programas PLC...........................................................150
Notas sobre la migraci√≥n de programas PLC ......................................................................150
Migraci√≥n de bloques de organizaci√≥n.................................................................................150
Migraci√≥n de ID de hardware ...............................................................................................151
Migraci√≥n de temporizadores y contadores CEI ..................................................................151
Migraci√≥n de bloques de datos de CPU...............................................................................152
Migraci√≥n de funciones de diagn√≥stico ................................................................................153
Migraci√≥n de accesos absolutos a datos locales .................................................................153
Par√°metros de bloque en S7-1500 ......................................................................................155
Bloques multiinstancia en S7-1500......................................................................................156
N√∫meros en coma flotante en S7-1500 ...............................................................................156
Escritura de caracteres individuales de un STRING en S7-1500 ........................................157
Accesos a la palabra de estado en S7-1500 .......................................................................157
Carga de modificaciones del software en S7-1500..............................................................158
Migraci√≥n de instrucciones a S7-1500 .................................................................................158
Indicaciones sobre la migraci√≥n de instrucciones................................................................158
Vista general de las instrucciones no migrables ..................................................................161
Migraci√≥n de instrucciones de bloques de datos .................................................................169
Migraci√≥n de la instrucci√≥n RDSYSST.................................................................................171
Migraci√≥n de la instrucci√≥n T_CONV ...................................................................................173
Migraci√≥n de avisos con valores asociados.........................................................................173
Migraci√≥n de instrucciones de tabla.....................................................................................177
Migraci√≥n de instrucciones de comunicaci√≥n.......................................................................181
Migraci√≥n de programas KOP/FUP a S7-1500 ....................................................................187
Indicaciones sobre la migraci√≥n de programas KOP/FUP...................................................187
Direcciones parcialmente especificadas en KOP/FUP ........................................................188
Acceso a los bits de estado en KOP/FUP............................................................................189
Migraci√≥n de programas AWL a S7-1500 ............................................................................191
Indicaciones sobre la migraci√≥n de programas AWL...........................................................191
Cadenas l√≥gicas y saltos .....................................................................................................193
Transferencia de valores a trav√©s de registros en caso de cambio de lenguaje .................194
Transferencia de valores a trav√©s de registros o de la palabra de estado durante la
llamada de bloque................................................................................................................195
Transferencia de valores a trav√©s de registros con las instrucciones CC y UC ..................196
Direcciones totalmente especificadas en AWL ....................................................................198
Direcciones parcialmente especificadas en AWL ................................................................199

3.4.4.5
3.4.4.6
3.4.4.7

4

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

√çndice

3.4.4.8
3.4.5
3.4.5.1
3.4.5.2
3.4.5.3
3.4.6
3.4.6.1
3.4.6.2
3.4.6.3
4

Accesos al DB instancia en AWL.........................................................................................201
Migraci√≥n de programas SCL a S7-1500.............................................................................203
Indicaciones sobre la migraci√≥n de programas SCL............................................................203
Direccionamiento indirecto en SCL......................................................................................204
Instrucciones en SCL ...........................................................................................................206
Migraci√≥n de programas GRAPH a S7-1500 .......................................................................208
Indicaciones sobre la migraci√≥n de programas GRAPH......................................................208
Modificaciones en el programa GRAPH ..............................................................................210
Adaptaci√≥n de la interfaz de bloques GRAPH .....................................................................212

Migraci√≥n de S7-1200 a firmware V4 y posterior .....................................................................................215
4.1

Principios b√°sicos de la migraci√≥n a V4...............................................................................215

4.2

Realizar una migraci√≥n a V4 ................................................................................................217

4.3

Particularidades tras la migraci√≥n a V4................................................................................218

√çndice alfab√©tico........................................................................................................................................221

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

5

√çndice

6

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

1

Sinopsis de las posibilidades de migraci√≥n
M√©todos de migraci√≥n

Si desea seguir utilizando proyectos o programas existentes en la versi√≥n m√°s reciente del TIA
Portal y de S7-1500, existen diferentes maneras de migrar los proyectos.
El siguiente gr√°fico proporciona una vista general de las opciones de migraci√≥n:

0LJUDFL¬µQGH
SURJUDPD3/&D
6

0LJUDUSUR\HFWR

6

6

6

6

6

Migraci√≥n de proyectos al TIA Portal
La funci√≥n "Migrar proyecto" permite migrar proyectos que se han creado fuera del TIA Portal,
p. ej. con STEP 7, WinCC, WinCC flexible o SINUMERIK.
El resultado de la migraci√≥n del proyecto es un proyecto del TIA Portal que se puede utilizar
con el hardware de la familia S7-300/400 y los dispositivos HMI existentes.

Migraci√≥n de programas de PLC de S7-300/400 a S7-1500
Para migrar un programa de PLC dentro del TIA Portal de un dispositivo de la serie S7-300/400
a un S7-1500, utilice la migraci√≥n PLC.
El resultado de la migraci√≥n PLC es un programa de PLC ejecutable adaptado
autom√°ticamente a la nueva arquitectura de sistema del S7-1500 en la medida de lo posible.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

7

Sinopsis de las posibilidades de migraci√≥n

Optimizaci√≥n del programa de PLC para S7-1500
De forma opcional, existe la posibilidad de optimizar el programa para el S7-1500 utilizando las
t√©cnicas de programaci√≥n recientemente introducidas. La optimizaci√≥n permite beneficiarse
del mayor rendimiento, la innovadora tecnolog√≠a de memoria y las nuevas funciones del
sistema S7-1500.

Actualizaci√≥n de proyectos
Tambi√©n es posible seguir utilizando proyectos de versiones anteriores del TIA Portal. Sin
embargo, no hay que migrar esos proyectos. Los proyectos de versiones anteriores se
actualizan a la versi√≥n de producto actual. Encontrar√° informaci√≥n adicional sobre la
compatibilidad y sobre la actualizaci√≥n de proyectos en el cap√≠tulo "AUTOHOTSPOT".

Nota
Soporte adicional para la migraci√≥n
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n de
PLC:
Migraci√≥n - Sistemas globales:
http://support.automation.siemens.com/WW/view/es/83558085 (http://
support.automation.siemens.com/WW/view/es/83558085)
Migraci√≥n - Controladores:
http://support.automation.siemens.com/WW/view/es/83557459 (http://
support.automation.siemens.com/WW/view/es/83557459)
Migraci√≥n - Visualizaci√≥n:
http://support.automation.siemens.com/WW/view/es/76878921 (http://
support.automation.siemens.com/WW/view/es/76878921)
Migraci√≥n - Comunicaci√≥n:
http://support.automation.siemens.com/WW/view/es/83558087 (http://
support.automation.siemens.com/WW/view/es/83558087)
Si necesita soporte adicional, dir√≠jase al SIMATIC Customer Support.

8

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.1

2

Migraci√≥n de proyectos con el TIA Portal

Migraci√≥n de proyectos existentes
Es posible migrar proyectos de soluciones de automatizaci√≥n anteriores al TIA Portal. En cada
migraci√≥n se crea un proyecto nuevo para los datos migrados, con el que se puede seguir
trabajando posteriormente. Primero se cierran aquellos proyectos TIA Portal que puedan estar
abiertos.
La migraci√≥n se muestra posteriormente en la tabla del historial de proyecto. Desde ah√≠ es
posible acceder al informe de migraci√≥n que se crea autom√°ticamente para la migraci√≥n.
Despu√©s de migrar configuraciones hardware y bloques de programa de soluciones de
automatizaci√≥n anteriores, compruebe el buen funcionamiento del proyecto migrado antes de
utilizarlo en modo productivo.

Productos soportados para la migraci√≥n
En el cap√≠tulo "Vista general del sistema STEP 7 y WinCC" obtendr√° informaci√≥n sobre qu√©
productos est√°n disponibles en el TIA Portal. Todos los productos all√≠ indicados son
soportados en principio por el TIA Portal para la migraci√≥n.
Los requisitos que se deben cumplir dependen de los productos de origen utilizados y de los
productos instalados actualmente. Encontrar√° m√°s informaci√≥n sobre las opciones de
migraci√≥n de los productos en Siemens Industry Online Support y en la documentaci√≥n de los
productos de software, p. ej.
Consulte tambi√©n: AUTOHOTSPOT

Procedimiento durante la migraci√≥n
El proceso de migraci√≥n se compone b√°sicamente de los pasos siguientes:
1. Preparaci√≥n del proyecto de origen
Si el software necesario para el proyecto de origen no est√° completamente instalado en la
programadora/el PC con el TIA Portal, o si el proyecto de origen es un proyecto integrado,
en primer lugar deber√° convertir el proyecto de origen en un archivo de migraci√≥n. Para ello
instale la herramienta de migraci√≥n en una PG/un PC donde est√© instalado el software
necesario para editar el proyecto de origen. Luego convierta el proyecto de origen con la
herramienta de migraci√≥n y copie el archivo en la programadora o en el PC que tenga
instalado el TIA Portal. Este paso puede omitirse si el proyecto de origen y el software de
origen correspondiente se encuentran en la misma programadora o PC que contiene el TIA
Portal y si el proyecto de origen no es un proyecto integrado.
2. Ejecutar migraci√≥n
Ejecute la migraci√≥n en el TIA Portal. Durante la migraci√≥n, indique como fuente el archivo
de migraci√≥n que ha creado con la herramienta de migraci√≥n o bien el proyecto de origen,
si todo el software necesario est√° instalado.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

9

Migrar proyectos a un proyecto del TIA Portal
2.2 Comprobar la capacidad de migraci√≥n de componentes de hardware
3. Revisi√≥n del informe de migraci√≥n
Para cada migraci√≥n se crea un informe. En √©l encontrar√° indicaciones sobre componentes
del proyecto que se han modificado. Puede solicitar el informe en el √°rbol del proyecto, en
"Datos comunes > Informes" o mediante el historial del proyecto. Una vez concluida la
migraci√≥n, el informe se muestra en el TIA Portal. Revise el informe cuando finalice la
migraci√≥n.
Si la migraci√≥n no ha concluido con √©xito, en el directorio del proyecto se crea en "\Logs" un
informe en forma de archivo XML. Dicho archivo se puede abrir con cualquier editor XML
y consultar las causas del fallo de la migraci√≥n.
4. Procesamiento posterior del proyecto migrado
Debido a que las configuraciones del proyecto de origen no siempre son totalmente
compatibles con el TIA Portal, puede ocurrir que las configuraciones que se apliquen en el
proyecto migrado no sean id√©nticas. Por ello, deber√° procesar de forma sistem√°tica las
indicaciones que contiene el informe de migraci√≥n. Si no ha incluido la configuraci√≥n
hardware en la migraci√≥n, debe convertir adicionalmente los dispositivos no especificados
en hardware apropiado.

Inclusi√≥n de la configuraci√≥n hardware en la migraci√≥n
De forma est√°ndar, durante la migraci√≥n solo se tienen en cuenta los componentes de software
del proyecto. Para cada uno de los dispositivos que contiene el proyecto de origen se genera
un dispositivo no especificado en el proyecto migrado. La configuraci√≥n hardware, la
configuraci√≥n de redes y las conexiones no se migran. Por ello, convierta despu√©s de la
migraci√≥n los dispositivos no especificados en un dispositivo adecuado y vuelva a establecer
manualmente las configuraciones de red y conexiones existentes.
Si est√° seguro de que el hardware utilizado en el proyecto de origen posee un equivalente
adecuado en el TIA Portal, puede incluir la configuraci√≥n hardware en la migraci√≥n. En este
caso, se migra tanto la configuraci√≥n hardware como tambi√©n el software. Los componentes
de hardware que se soportan se comprueban con una herramienta (P√°gina 10).

Consulte tambi√©n
Mostrar el informe de la migraci√≥n (P√°gina 16)

2.2

Comprobar la capacidad de migraci√≥n de componentes de hardware

Introducci√≥n
Siemens le ofrece una herramienta que permite comprobar si la configuraci√≥n hardware
utilizada en un proyecto de origen es adecuada para la migraci√≥n al TIA Portal.
Los componentes integrados a trav√©s de archivos GSD o GSDML no pueden comprobarse.
Para este tipo de m√≥dulos compruebe manualmente en el TIA Portal si los m√≥dulos est√°n
disponibles en el cat√°logo de hardware. En caso de que los m√≥dulos no est√©n disponibles,
instale los archivos GSD o GSDML necesarios en el TIA Portal. Obtendr√° los archivos
necesarios del fabricante de los componentes.
En el resultado de la comprobaci√≥n observar√° qu√© productos de software y qu√© licencias
deben estar disponibles en la PG o el PC con la instalaci√≥n del TIA Portal para efectuar una

10

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.3 Preparaci√≥n de proyectos con la herramienta de migraci√≥n
migraci√≥n. Adem√°s ver√° la versi√≥n de firmware a partir de la cual los distintos m√≥dulos del
proyecto de origen se soportan en el TIA Portal. El resultado de la comprobaci√≥n puede
exportarse a un archivo PDF o de Microsoft Excel.

Descarga
La herramienta para comprobar la capacidad de migraci√≥n puede descargarse en las FAQs de
Siemens Industry Online Support con el n√∫mero de art√≠culo 60162195 (http://
support.automation.siemens.com/WW/view/es/60162195).

Archivos fuente para la comprobaci√≥n
Para la comprobaci√≥n se necesita uno de los archivos fuente siguientes que contenga las
referencias del hardware utilizado en el proyecto de origen:
‚óè Archivo .cfg
Puede exportar el archivo .cfg de HW Config (STEP 7) con el comando de men√∫ "Exportar
como archivo .cfg" del men√∫ "Equipo". El archivo .cfg contiene todas las referencias de los
dispositivos utilizados en la estaci√≥n abierta en ese momento.
‚óè Archivo Microsoft Excel (en formato de archivo .xls)
Independientemente del proyecto de origen utilizado, puede crear una lista Microsoft Excel
que contenga todas las referencias de los dispositivos que desea migrar.
‚óè Archivo en formato .csv
En lugar de utilizar una lista de Microsoft Excel, tambi√©n puede guardar las referencias que
deben comprobarse en un archivo .csv. Para ello, utilice un editor de textos sencillo e
introduzca las referencias separadas por coma y sin espacio despu√©s de la coma. Guarde
el archivo de texto con la extensi√≥n ".csv".

Consulte tambi√©n
Herramienta para comprobar la capacidad de migraci√≥n (http://
support.automation.siemens.com/WW/view/es/60162195)

2.3

Preparaci√≥n de proyectos con la herramienta de migraci√≥n

2.3.1

Migraci√≥n de proyectos con la herramienta de migraci√≥n

Pasos previos a la migraci√≥n
En muchos casos puede ocurrir que el proyecto que se desea migrar no se encuentre en la
misma programadora o PC en que est√° instalada la versi√≥n actual del TIA Portal. Por lo tanto,
para poder ejecutar la migraci√≥n primero deber√° convertir el proyecto de origen a un formato
compatible. Lo mismo es v√°lido para los proyectos integrados.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

11

Migrar proyectos a un proyecto del TIA Portal
2.3 Preparaci√≥n de proyectos con la herramienta de migraci√≥n
Despu√©s de crear el archivo de migraci√≥n, c√≥pielo a la programadora o el PC con la instalaci√≥n
actual del TIA Portal. En el TIA Portal, indique el archivo de migraci√≥n como fuente para la
migraci√≥n y podr√° crear un proyecto en el formato de archivo actual del TIA Portal.

Procedimiento para migrar proyectos con la herramienta de migraci√≥n
Para preparar una migraci√≥n con la herramienta de migraci√≥n, son necesarios los siguientes
pasos:
1. Instale la herramienta de migraci√≥n en la programadora o PC con el proyecto de origen.
Para ello, descargue del Siemens Industry Online Support el archivo de instalaci√≥n o instale
la herramienta de migraci√≥n incluida en el DVD de instalaci√≥n del TIA Portal.
2. Inicie la herramienta de migraci√≥n y convierta con ella el proyecto de origen al formato de
archivo de migraci√≥n que tiene la extensi√≥n ".am16".
Antes de dar este paso, aseg√∫rese de que todo el software necesario para procesar el
proyecto de origen est√© instalado en la programadora o el PC. En estos componentes est√°n
incluidos todos los Service Packs requeridos, Support Packages del hardware, as√≠ como
todo el software de ampliaci√≥n que se requiere para procesar el proyecto de origen. Si
algunos productos no est√°n instalados, no se podr√° realizar la migraci√≥n o √©sta se realizar√°
de forma incompleta.
3. Copie el archivo de migraci√≥n en un sistema de destino que disponga de una instalaci√≥n
actualizada del TIA Portal.
Observe que en el sistema de destino deben estar instalados todos los programas
requeridos para configurar todos los dispositivos contenidos en el archivo de migraci√≥n.
4. Lleve a cabo la migraci√≥n en el TIA Portal e indique como fuente el archivo de migraci√≥n con
la extensi√≥n ".am16".
5. Tras la migraci√≥n, revise el informe de migraci√≥n, lea sistem√°ticamente las indicaciones
que contiene y retoque lo necesario en el proyecto reci√©n creado. Despu√©s de la primera
compilaci√≥n de la configuraci√≥n, deben tenerse en cuenta especialmente las indicaciones
de la ventana de inspecci√≥n.

Inclusi√≥n de la configuraci√≥n hardware en la migraci√≥n
De forma est√°ndar, durante la migraci√≥n solo se tienen en cuenta los componentes de software
del proyecto. Para cada uno de los dispositivos que contiene el proyecto de origen se genera
un dispositivo no especificado en el proyecto migrado. La configuraci√≥n hardware, la
configuraci√≥n de redes y las conexiones no se migran. Por ello, convierta despu√©s de la
migraci√≥n los dispositivos no especificados en un dispositivo adecuado y vuelva a establecer
manualmente las configuraciones de red y conexiones existentes.
Si est√° seguro de que el hardware utilizado en el proyecto de origen posee un equivalente
adecuado en el TIA Portal, puede incluir la configuraci√≥n hardware en la migraci√≥n. En este
caso, se migra tanto la configuraci√≥n hardware como tambi√©n el software. Los m√≥dulos que se
soportan se comprueban con una herramienta.

Consulte tambi√©n
Migraci√≥n de proyectos con el TIA Portal (P√°gina 9)
Migraci√≥n de proyectos (P√°gina 14)

12

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.3 Preparaci√≥n de proyectos con la herramienta de migraci√≥n
Inicio de la herramienta de migraci√≥n (P√°gina 13)
Crear el archivo de migraci√≥n (P√°gina 13)

2.3.2

Inicio de la herramienta de migraci√≥n

Iniciar la herramienta de migraci√≥n
Durante la instalaci√≥n, en el men√∫ Inicio se crea por defecto el acceso directo "Migration to TIA
Portal V16" en "Siemens Automation > Migration Tool". Llame este acceso directo.
Tambi√©n es posible iniciar la herramienta de migraci√≥n directamente desde el Explorador de
Windows. De forma est√°ndar, la herramienta de migraci√≥n se guarda durante la instalaci√≥n en
uno de los siguientes directorios:
‚óè En un sistema operativo de 64 bits:
C:\Program Files (x86)\Siemens\Automation\MIGTOOL_V16\Bin
‚óè En un sistema operativo de 32 bits:
C:\Program Files\Siemens\Automation\MIGTOOL_V16\Bin
Para iniciar la herramienta de migraci√≥n, ejecute el archivo
"Siemens.Automation.MigrationApplication.exe" en uno de los directorios.

Consulte tambi√©n
Crear el archivo de migraci√≥n (P√°gina 13)

2.3.3

Crear el archivo de migraci√≥n
A continuaci√≥n se indica c√≥mo convertir el proyecto de origen en un archivo de migraci√≥n
compatible con el TIA Portal con ayuda de la herramienta de migraci√≥n. Tras la conversi√≥n,
este archivo se transfiere al sistema de destino y se migra all√≠.
Se puede determinar si el archivo de migraci√≥n debe contener todo el proyecto, incluida la
configuraci√≥n hardware completa y el software correspondiente, o si s√≥lo se desea migrar el
software.

Requisitos
‚óè Para todas las configuraciones utilizadas en el proyecto de origen es preciso que est√©
instalado el software original correspondiente con una licencia v√°lida.
‚óè El proyecto de origen no dispone de protecci√≥n de acceso.
‚óè El proyecto de origen debe encontrarse en un estado coherente, ya que de lo contrario no
queda garantizada la migraci√≥n correcta.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

13

Migrar proyectos a un proyecto del TIA Portal
2.4 Migraci√≥n de proyectos

Procedimiento
Para crear el archivo de migraci√≥n, haga lo siguiente:
1. Elija en el campo "Storage Location (Path)" la ruta del archivo de origen para la migraci√≥n.
2. Indique qu√© componentes del proyecto van a migrarse:
‚Äì Active la casilla de verificaci√≥n "Incluir datos de redes y HW durante la migraci√≥n" para
migrar no s√≥lo el software, sino tambi√©n los componentes de hardware completos y la
configuraci√≥n de redes del proyecto.
‚Äì Active la casilla de verificaci√≥n "Copiar datos runtime SCADA" si, adem√°s de los datos
del sistema de ingenier√≠a, desea migrar los datos runtime, tales como ficheros de avisos,
ficheros de variables o ficheros de usuario.
3. Elija en el campo "Intermediate file" la ruta y el nombre del archivo de migraci√≥n.
4. Haga clic en el bot√≥n de comando "Migrate".

Resultado:
Se crea un archivo de migraci√≥n. Seguidamente copie este archivo en el sistema de destino y
m√≠grelo en el TIA Portal.

Consulte tambi√©n
Migraci√≥n de proyectos (P√°gina 14)
Inicio de la herramienta de migraci√≥n (P√°gina 13)
Migraci√≥n de proyectos con la herramienta de migraci√≥n (P√°gina 11)

2.4

Migraci√≥n de proyectos

Requisitos
‚óè Ya existe un archivo convertido al formato ".am16" o bien est√° instalado el software original
adecuado y con una licencia v√°lida para todas las configuraciones utilizadas en el proyecto
de origen.
‚óè El proyecto de origen no dispone de protecci√≥n de acceso.
‚óè El proyecto de origen debe encontrarse en un estado coherente, ya que de lo contrario no
queda garantizada la migraci√≥n correcta.
Tenga en cuenta las indicaciones adicionales sobre las condiciones b√°sicas que aparecen en
la ayuda de los productos instalados.
Nota
Estado de hibernaci√≥n del sistema durante la migraci√≥n
El sistema no debe ponerse en modo standby o de hibernaci√≥n durante la migraci√≥n. De lo
contrario, se cancelar√° la migraci√≥n.

14

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.4 Migraci√≥n de proyectos

Procedimiento
Para migrar un proyecto, proceda del siguiente modo:
1. Elija el comando "Migrar proyecto" del men√∫ "Proyecto".
Se abre el cuadro de di√°logo "Migrar proyecto".
2. En el campo "Ruta de origen" indique la ruta y el nombre de archivo del proyecto que debe
migrarse. Elija un proyecto que tenga el formato de migraci√≥n ".am16" o bien el formato del
proyecto de origen.
3. Active la casilla de verificaci√≥n "Incluir configuraci√≥n hardware" para incluir la configuraci√≥n
hardware en la migraci√≥n.
Si ha seleccionado un archivo de migraci√≥n creado con la herramienta de migraci√≥n, la
casilla de verificaci√≥n no ser√° activable. En este caso, ya durante la conversi√≥n con la
herramienta de migraci√≥n debe indicar si desea incluir la configuraci√≥n hardware en la
migraci√≥n.
4. Active la casilla de verificaci√≥n "Copiar datos de WinCC Runtime Professional" si, adem√°s
de los datos del sistema de ingenier√≠a, desea migrar los datos runtime, tales como ficheros
de avisos, ficheros de variable o ficheros de usuario.
Si ha seleccionado un archivo de migraci√≥n creado con la herramienta de migraci√≥n, la
casilla de verificaci√≥n no ser√° activable. En este caso, ya durante la conversi√≥n con la
herramienta de migraci√≥n debe indicar si desea incluir los datos runtime SCADA en la
migraci√≥n.
5. Elija un nombre para el nuevo proyecto en el campo "Nombre del proyecto".
6. En el campo "Ruta de destino", elija la ruta en la cual se crear√° el nuevo proyecto.
7. En el campo "Autor", introduzca su nombre o el nombre de otra persona responsable del
proyecto.
8. De ser necesario, introduzca un comentario en el campo "Comentario".
9. Haga clic en "Migrar".

Resultado
El proyecto de origen se convierte y, tras finalizar este proceso, aparece un mensaje. A
continuaci√≥n, el proyecto reci√©n creado se abre en la vista del proyecto y el informe de
migraci√≥n se abre en el TIA Portal.
Si la migraci√≥n ha fallado, se crea un directorio del proyecto dentro del cual se crea un informe
de migraci√≥n en forma de archivo XML. En el mensaje final despu√©s de la migraci√≥n encontrar√°
un enlace a dicho archivo XML. Haga clic en el enlace para abrir el archivo XML. Tambi√©n
encontrar√° el archivo XML en "\Logs" dentro del directorio del proyecto.

Consulte tambi√©n
Reajustar proyectos integrados (P√°gina 137)
Mostrar el informe de la migraci√≥n (P√°gina 16)
Migraci√≥n de proyectos con la herramienta de migraci√≥n (P√°gina 11)
Crear el archivo de migraci√≥n (P√°gina 13)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

15

Migrar proyectos a un proyecto del TIA Portal
2.6 Mostrar el informe de la migraci√≥n

2.5

Mostrar el desarrollo de la migraci√≥n
Si un proyecto se ha generado mediante migraci√≥n, la migraci√≥n se muestra en la tabla del
historial del proyecto. A continuaci√≥n, en la tabla puede abrirse el informe de migraci√≥n.
Adem√°s, se muestra la hora exacta de la migraci√≥n.

Procedimiento
Para visualizar una tabla sin√≥ptica de la migraci√≥n, proceda del siguiente modo:
1. Seleccione el proyecto abierto en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual del proyecto.
Se abre el di√°logo con las propiedades del proyecto.
3. Seleccione el grupo "Historial del proyecto" en la navegaci√≥n local.
Se abre la tabla sin√≥ptica.

2.6

Mostrar el informe de la migraci√≥n
Para cada migraci√≥n correcta se crea un informe. El informe contiene la siguiente informaci√≥n:
‚óè Objetos migrados
‚óè Modificaciones en objetos realizadas durante la migraci√≥n
‚óè Errores ocurridos durante la migraci√≥n
‚óè Si es necesario, un enlace a la ayuda para determinados eventos.
En este caso, obtendr√° m√°s ayuda haciendo clic en el interrogante.

Procedimiento
Para visualizar el archivo de registro de la migraci√≥n, proceda del siguiente modo:
1. Abra la carpeta "Datos comunes > Informes" en el √°rbol del proyecto.
2. Haga doble clic en el informe deseado de la lista.
El contenido del informe se muestra en el √°rea de trabajo.

Consulte tambi√©n
Migraci√≥n de proyectos con el TIA Portal (P√°gina 9)

16

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

2.7

Migrar proyectos de STEP 7

2.7.1

Migraci√≥n de proyectos STEP 7

Introducci√≥n
Los proyectos de SIMATIC STEP 7 V5.4 SP5 pueden migrarse. seguidamente reutilizarlo en
el TIA Portal. Si desea migrar proyectos de versiones STEP 7 anteriores, en primer lugar
deber√° abrirlas, compilarlas y guardarlas en STEP 7 V5.4 SP5. Tambi√©n es posible migrar
proyectos integrados con dispositivos de otros productos de software.

Volumen de migraci√≥n
Por lo general se pueden migrar todas las configuraciones y objetos de SIMATIC STEP 7 V5.4
SP5 que sean tambi√©n compatibles con la versi√≥n instalada del TIA Portal. Esto incluye, por
ejemplo, los siguientes dispositivos y configuraciones:
‚óè Dispositivos de las familias S7-300 y S7-400.
‚óè Configuraciones de PROFIBUS con periferia descentralizada conectada. Esto tambi√©n
incluye esclavos basados en GSD, esclavos I e intercambio directo de datos.
‚óè Configuraciones de PROFINET con periferia descentralizada. Esto tambi√©n incluye
dispositivos basados en GSD y I-devices.
‚óè Configuraciones de red
‚óè Conexiones
‚óè Bloques creados en los lenguajes KOP, FUP o AWL, S7-SCL y S7-GRAPH.
‚óè Variables PLC
‚óè Tipos de datos definidos por el usuario (UDT)
‚óè Avisos y categor√≠as
‚óè Alarmas
‚óè Atributos definidos por el usuario (UDA)
‚óè Librer√≠a de textos de usuario

Inclusi√≥n de la configuraci√≥n hardware en la migraci√≥n
De forma est√°ndar, durante la migraci√≥n solo se tienen en cuenta los componentes de software
del proyecto. Para cada uno de los dispositivos que contiene el proyecto de origen se genera
un dispositivo no especificado en el proyecto migrado. La configuraci√≥n hardware, la
configuraci√≥n de redes y las conexiones no se migran. Por ello, convierta directamente
despu√©s de la migraci√≥n los dispositivos no especificados en un dispositivo adecuado y vuelva
a establecer manualmente las configuraciones de red y conexiones existentes.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

17

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
Si est√° seguro de que el hardware utilizado en el proyecto de origen posee un equivalente
adecuado en el TIA Portal, puede incluir la configuraci√≥n hardware en la migraci√≥n. En este
caso, se migrar√° tanto la configuraci√≥n hardware como tambi√©n el software.
Nota
Soporte adicional para la migraci√≥n
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n:
Migraci√≥n controladores (http://support.automation.siemens.com/WW/view/es/83557459)
Si necesita ayuda adicional, dir√≠jase al SIMATIC Customer Support.

Consulte tambi√©n
Notificar errores de sistema (P√°gina 39)
Migraci√≥n de bloques de programa (P√°gina 25)

2.7.2

Requisitos para la migraci√≥n de proyectos STEP 7
Para poder llevar a cabo la migraci√≥n, es necesario que se cumplan varios requisitos en lo que
respecta al software instalado en la programadora o PC original y al proyecto de origen.

Requisitos que debe cumplir la programadora o PC
La programadora o PC debe cumplir los siguientes requisitos:
‚óè Debe estar instalada una versi√≥n con licencia de STEP 7 V5.4 SP5 o superior
(recomendable V5.5 SP4). En proyectos que solo contienen estaciones PC es suficiente
con que est√© instalado el software SIMATIC NET PC.
‚óè Para todas las configuraciones utilizadas en el proyecto est√° instalado el software adicional
correspondiente con licencia v√°lida, p. ej., los paquetes opcionales.
‚óè Todos los HSP relativos a m√≥dulos que no est√°n incluidos en el cat√°logo de hardware
deben estar instalados.
‚óè Todos los archivos GSD utilizados en el proyecto deben cumplir las especificaciones.
‚óè El usuario tiene que haber iniciado una sesi√≥n en el sistema operativo con derechos de
administrador.
‚óè Debe estar instalado uno de los siguientes productos de software:
‚Äì TIA Portal con STEP 7 Professional V13 SP1 o superior
Si la migraci√≥n no se realiza con la √∫ltima versi√≥n del TIA Portal en la programadora o
PC original, la funcionalidad del proyecto en las versiones m√°s recientes del TIA Portal
estar√° limitada en un principio. Para poder utilizar toda la funcionalidad de las versiones
m√°s nuevas, antes es necesario actualizar el proyecto.
‚Äì Herramienta de migraci√≥n

18

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Requisitos que debe cumplir el proyecto de origen
‚óè El proyecto de origen no debe tener protecci√≥n de acceso.
‚óè El hardware y el software deben ser coherentes.
‚óè La asignaci√≥n de n√∫meros de aviso est√° ajustada para toda la CPU.
‚óè El proyecto no puede contener bloques protegidos con conflicto de sello de tiempo.
‚óè Todos los programas y sus fuentes se pueden compilar sin errores.
‚óè Todos los bloques llamados est√°n disponibles en la carpeta de bloques.
‚óè Los bloques no llamados, especialmente los bloques de datos de instancia, no pueden
estar en la carpeta de bloques.
‚óè Es aconsejable migrar bloques sin cifrar, puesto que los bloques cifrados con S7-Block
Privacy no se pueden leer ni modificar en el TIA Portal.

Requisitos que debe cumplir la PG/el PC con STEP 7 Professional
‚óè Debe estar instalado uno de los siguientes productos de software:
‚Äì STEP 7 Professional V13 SP1 o superior
‚Äì STEP 7 Professional V13 SP1 o superior (sin licencia) si el proyecto migrado solo
contiene componentes que se hab√≠an configurado con el software de PC SIMATIC NET.
‚óè Para todas las configuraciones utilizadas en el proyecto tiene que estar instalado el
software adicional correspondiente con licencia v√°lida, p. ej., los paquetes opcionales.
‚óè Deben estar instalados todos los HSPs relativos a m√≥dulos que no est√°n incluidos en el
cat√°logo de hardware y todos los archivos GSD utilizados en el proyecto.

2.7.3

Comprobar la capacidad de migraci√≥n de los proyectos STEP 7
Antes de iniciar la migraci√≥n, puede comprobar si en el proyecto de origen se cumplen todos
los requisitos necesarios para la migraci√≥n.
Nota
Tenga en cuenta que, al efectuar los pasos siguientes, se restablecen los valores actuales del
proyecto de origen. Observe tambi√©n que al ejecutar la comprobaci√≥n de coherencia de
bloques se restablecen los valores predeterminados para los valores de arranque en los DB de
instancia. Si utiliza funciones tecnol√≥gicas, este comportamiento no es deseado.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

19

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Procedimiento
Para verificar la capacidad de migraci√≥n de un proyecto, proceda del siguiente modo:
1. Abra el proyecto de origen en SIMATIC STEP 7 V5.4 SP5. Para realizar una comparaci√≥n
correcta √∫nicamente deben estar instalados paquetes de opciones y componentes de
hardware (incluidos HSP y archivos GSD) existentes en el TIA Portal.
2. Abra las diferentes estaciones. Todos los componentes necesarios para la migraci√≥n est√°n
disponibles si, al abrir las estaciones, no aparece ning√∫n mensaje que indique que faltan
componentes.
3. Lleve a cabo una comprobaci√≥n de coherencia de bloques con cada carpeta de bloques
existente en el proyecto.
Encontrar√° m√°s informaci√≥n sobre la comprobaci√≥n de coherencia en el cap√≠tulo
"Verificaci√≥n de la coherencia en el proyecto de origen (P√°gina 20)".
4. Compile todo el proyecto. Si no se muestra ning√∫n error durante la compilaci√≥n, significa
que los programas se pueden migrar.
5. Compruebe si todos los m√≥dulos est√°n incluidos en el cat√°logo de hardware del TIA Portal
con id√©ntica referencia (MLFB) y versi√≥n de firmware.
6. Compruebe que todas las CPU tengan activada la asignaci√≥n de n√∫meros de aviso para
toda la CPU.
7. Compile el proyecto en NetPro. La compilaci√≥n en NetPro tambi√©n debe transcurrir sin
errores.

Consulte tambi√©n
Verificaci√≥n de la coherencia en el proyecto de origen (P√°gina 20)
Entrada de FAQ sobre la comprobaci√≥n de coherencia (http://
support.automation.siemens.com/WW/view/es/5416540)

2.7.4

Verificaci√≥n de la coherencia en el proyecto de origen

Proyecto de origen coherente
El requisito para que una migraci√≥n de un proyecto al TIA Portal sea correcta es que el
proyecto de origen sea coherente. Por este motivo, antes de la migraci√≥n debe efectuar una
comprobaci√≥n de coherencia en el proyecto de origen. Encontrar√° instrucciones para la
comprobaci√≥n de la coherencia en SIMATIC STEP 7 en una FAQ (http://
support.automation.siemens.com/WW/view/es/5416540) en el Siemens Industry Online
Support o en la Ayuda de SIMATIC STEP 7.

Migraci√≥n de valores de arranque a los DB de instancia para bloques tecnol√≥gicos
En la comprobaci√≥n de coherencia de bloques, la compilaci√≥n da lugar a que las variables
contenidas en los DB de instancia se restablezcan a los valores predeterminados. Los valores
de arranque ajustados se pierden durante este proceso.

20

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
Si a pesar de todo se desea migrar los valores de arranque, es recomendable uno de los
siguientes procedimientos:
‚óè Para proyectos peque√±os: Copia de seguridad de los DB de instancia fuera de la carpeta
de bloques
Haga una copia de seguridad de los DB de instancia antes de iniciar la comprobaci√≥n de
coherencia. Despu√©s de la comprobaci√≥n de coherencia, vuelva a copiar los DB de
instancia en la carpeta de bloques.
‚óè Para proyectos grandes: Creaci√≥n de una copia del proyecto
Cree primero una copia del proyecto y lleve a cabo la verificaci√≥n con la copia del proyecto.
Los errores que pueda encontrar durante la comprobaci√≥n de coherencia debe subsanarlos
en el proyecto de origen.
A continuaci√≥n, puede migrar el proyecto con los valores que haya configurado. Con ello se
conserva tambi√©n la configuraci√≥n de las funciones tecnol√≥gicas.

2.7.5

Eliminaci√≥n de componentes hardware no soportados
Aunque en el proyecto de origen se hayan creado configuraciones para las que no se ha
instalado todo el software apropiado, dicho proyecto se podr√° migrar eliminando manualmente
del mismo las configuraciones no soportadas. De manera alternativa se puede usar la funci√≥n
"Reorganizaci√≥n".

Procedimiento
Para depurar el proyecto de origen, proceda del siguiente modo:
1. Utilice una instalaci√≥n de SIMATIC STEP 7 V5.4 SP5 que contenga solo los paquetes
opcionales existentes en el TIA Portal y todos los m√≥dulos necesarios.
2. Guarde de nuevo el proyecto seleccionando la opci√≥n "Con reorganizaci√≥n". De este modo
se eliminan del proyecto todas las configuraciones no soportadas.
Para los m√≥dulos que en el TIA Portal solo est√°n disponibles en una versi√≥n m√°s reciente o en
una versi√≥n de firmware m√°s nueva, utilice en la estaci√≥n la funci√≥n "Sustituir objeto" para
sustituir un m√≥dulo antiguo por otro que se pueda migrar.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

21

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

2.7.6

Particularidades de la migraci√≥n

2.7.6.1

Nombres de dispositivo

Nombres de los dispositivos PROFINET IO
En STEP 7 V5.5 se utiliza el nombre de un dispositivo PROFINET IO como nombre del
dispositivo IO. Despu√©s de la migraci√≥n a un proyecto del TIA Portal, el nombre del dispositivo
PROFINET IO del proyecto de origen se utiliza:
‚óè Como nombre de dispositivo PROFINET
‚óè Como nombre para el m√≥dulo de interfaz
‚óè Como nombre de la estaci√≥n
El TIA Portal solo admite nombres de estaci√≥n con un m√°ximo de 24 caracteres. Por ello,
si es necesario se acorta el nombre de la estaci√≥n a un m√°ximo de 24 caracteres. Si al
acortar el nombre de la estaci√≥n surgieran varias estaciones con el mismo nombre, los
√∫ltimos caracteres del nombre de la estaci√≥n se utilizar√°n para numerar las estaciones.

Nombres de m√≥dulos y racks
En SIMATIC STEP 7 V5.5, los nombres de m√≥dulos y racks (bastidores) no tienen que ser
un√≠vocos. En el TIA Portal, por el contrario, es imprescindible que estos tengan una
denominaci√≥n un√≠voca. Por eso, en caso necesario se realiza un contaje incremental de los
m√≥dulos y racks durante la migraci√≥n, a fin de garantizar denominaciones un√≠vocas. Una
excepci√≥n son los dispositivos PROFINET IO y los CPs PROFINET En estos casos hay que
prestar atenci√≥n a no dar nombres repetidos.

2.7.6.2

Configuraciones de PROFINET IO

Necesidad de asignar nombres un√≠vocos
Los nombres de los dispositivos PROFINET IO no pueden repetirse en una misma subred.
Esto tambi√©n vale para los nombres de CPs PROFINET. Por ello, antes de proceder a la
migraci√≥n aseg√∫rese de que los nombres no aparecen repetidos en el proyecto de origen y
despu√©s de la migraci√≥n compruebe que sean un√≠vocos antes de proceder a compilar por
primera vez.

Redundancia de medios en dominios Sync
Si existe un dominio Sync con una redundancia de medios activada en el proyecto de origen,
se adoptar√° la configuraci√≥n del dominio Sync en la migraci√≥n. Si, por el contrario, existen
varios dominios Sync con una redundancia de medios activada, √©stos se eliminar√°n y el
proyecto se migrar√° sin dominios Sync. En todo caso recibir√° un mensaje sobre los dominios
Sync que se han adoptado.
Para configurar la redundancia de medios en el proyecto de origen, utilice en cualquier caso
SIMATIC STEP 7 V5.5.

22

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Modo is√≥crono con PROFINET IO
En las configuraciones de PROFINET IO con modo is√≥crono hay que tener en cuenta lo
siguiente:
‚óè IRT de alto rendimiento
Si se ha configurado IRT de alto rendimiento al planificar la topolog√≠a del proyecto de
origen, se modificar√° la opci√≥n a "RT" en la migraci√≥n. Recibir√° un mensaje que le informar√°
sobre la modificaci√≥n.
‚óè Utilizaci√≥n del OB 61
Cuando en la configuraci√≥n original del proyecto STEP 7 est√° activado el modo is√≥crono
para PROFINET IO con OB 61, la migraci√≥n lo desactiva. No obstante, los dispositivos s√≠
se transfieren. Las configuraciones de PROFINET IRT con la opci√≥n "Alta flexibilidad" que
no utilizan el OB 61 se pueden migrar.

CBA con controladores IO
Si en el proyecto de origen se ha utilizado el servicio c√≠clico CBA (Component based
Automation), √©ste ser√° desactivado por la migraci√≥n. Recibir√° un mensaje que le informar√°
sobre la modificaci√≥n.

Utilizaci√≥n de dispositivos compartidos
Si en el proyecto de origen se han configurado Shared Devices, √©stos se eliminar√°n en la
migraci√≥n. Recibir√° un mensaje que le informar√° sobre la eliminaci√≥n.

√Åreas de transferencia
Si en el proyecto de origen se han configurado √°reas de transferencia para el intercambio de
datos entre el controlador IO y el I-Device, √©stas se eliminar√°n en la migraci√≥n. Se le informar√°
mediante un mensaje cuando un √°rea de transferencia sea eliminada por la migraci√≥n.

Grupos de actualizaci√≥n para PROFINET IO
En caso de haberlos, elimine los grupos de actualizaci√≥n del proyecto STEP 7 antes de la
migraci√≥n. Si todav√≠a hay grupos de actualizaci√≥n configurados, no se podr√° realizar la
migraci√≥n.

I-slaves e I-devices
S√≥lo se pueden migrar configuraciones de esclavos I y dispositivos I conectadas y
consistentes. Las configuraciones que no sean consistentes quedar√°n excluidas de la
migraci√≥n.

Sistemas PROFINET IO no conectados
Las estaciones con sistemas PROFINET IO no conectados se pueden migrar. Tras la
migraci√≥n, los dispositivos IO y los sistemas PROFINET IO aparecen desconectados en la
vista de redes. Conecte estos dispositivos IO tras la migraci√≥n con un controlador IO, o borre
los dispositivos IO no necesarios.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

23

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

2.7.6.3

Configuraciones de PROFIBUS

PROFIBUS en modo is√≥crono
Es posible migrar configuraciones de PROFIBUS que funcionen en modo is√≥crono. Ahora
bien, despu√©s de la migraci√≥n se aconseja recompilarlas para descartar posibles
incoherencias. Observe tambi√©n si hay ligeros cambios en los bloques SDB.

Sistemas maestro hu√©rfanos
Las estaciones con sistemas maestro DP hu√©rfanos pueden migrarse. Tras la migraci√≥n, los
esclavos DP del sistema maestro DP hu√©rfano aparecen desconectados en la vista de redes.
Conecte estos esclavos DP tras la migraci√≥n con un maestro DP, o borre los esclavos DP no
necesarios.

2.7.6.4

Dispositivos GSD y GSDML
Para los dispositivos configurados con archivos GSD PROFIBUS o GSD PROFINET, los
archivos GSD correspondientes tambi√©n deben estar instalados en el TIA Portal. Si los
archivos GSD todav√≠a no est√°n instalados en el TIA Portal, se instalar√°n autom√°ticamente
durante la migraci√≥n. Los archivos GSD deben cumplir las especificaciones (p. ej., GSDMLSpecification for PROFINET IO, ver www.profinet.com (http://www.profinet.com)) para poder
migrar correctamente el proyecto. Si los archivos GSD de un fabricante de dispositivos no
cumplen la especificaci√≥n, el proyecto no puede migrarse. El informe de migraci√≥n ofrece
avisos que indican qu√© archivos GSD no est√°n normalizados.
Si los archivos GSD no cumplen las especificaciones, compruebe si el fabricante ha
proporcionado una versi√≥n m√°s reciente del archivo GSD. Instale la versi√≥n m√°s reciente. Si
no existe ninguna versi√≥n del archivo GSD que cumpla las especificaciones, p√≥ngase en
contacto con el fabricante del dispositivo.

2.7.6.5

Conexiones
Las conexiones de los proyectos de SIMATIC STEP 7 normalmente se pueden migrar,
siempre y cuando tambi√©n sean compatibles con la versi√≥n instalada del TIA Portal.

Tipos de conexiones que se pueden migrar
Los tipos de conexiones que se pueden migrar son los siguientes:
‚óè Conexi√≥n S7 unilateral
‚óè Conexi√≥n S7 bilateral
‚óè Conexi√≥n S7 de seguridad
‚óè Conexi√≥n TCP
‚óè Conexi√≥n ISO on TCP
‚óè Conexi√≥n ISO
‚óè Conexi√≥n UDP

24

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
‚óè Conexi√≥n de correo electr√≥nico
‚óè Conexi√≥n FDL
‚óè Conexi√≥n punto a punto
La migraci√≥n no acepta las conexiones FMS con PROFIBUS. Adapte las conexiones o cambie
el programa de usuario.

2.7.6.6

Multiproyectos

Multiproyectos en SIMATIC STEP 7
En SIMATIC STEP 7 existe la posibilidad de dividir los proyectos en lo que se denomina un
multiproyecto; por ejemplo, cuando un proyecto es muy grande o cuando hay varias personas
trabajando en √©l. Los subproyectos pueden contener referencias para todos los proyectos, p.
ej. conexiones. Todos los subproyectos de un multiproyecto y sus respectivas librer√≠as se
encuentran en el mismo directorio.

Migraci√≥n de partes de un proyecto
Es posible migrar los subproyectos de un multiproyecto. Para ello, seleccione uno de los
subproyectos al realizar la migraci√≥n. Esta toma todos los dispositivos y configuraciones que
contiene.
Al migrar subproyectos, tenga en cuenta lo siguiente:
‚óè Conexiones interproyecto
Las conexiones entre subproyectos de multiproyectos se crean como conexi√≥n no
especificada.
‚óè Interconexi√≥n interproyecto
Con la migraci√≥n se pierden los datos de interconexi√≥n de los dispositivos m√°s all√° de los
l√≠mites del proyecto, pero s√≠ se conservan las conexiones entre dispositivos incluidos en un
mismo subproyecto.

Reagrupaci√≥n de un multiproyecto para la migraci√≥n
La migraci√≥n de un multiproyecto entero con todos los subproyectos correspondientes s√≥lo es
posible si √©stos se vuelven a reagrupar manualmente antes de la migraci√≥n. Para reagrupar un
multiproyecto, copie por ejemplo todos los dispositivos e ins√©rtelos en un √∫nico proyecto.

2.7.6.7

Migraci√≥n de bloques de programa
Por principio se pueden migrar todos los bloques creados en KOP, FUP, SCL, AWL y GRAPH.
No obstante, tenga en cuenta las indicaciones siguientes:

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

25

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Programas con direccionamiento absoluto
En el TIA Portal se declaran autom√°ticamente operandos simb√≥licos para todas las
direcciones absolutas. Si en el programa STEP 7 que se va a migrar se ha estado trabajando
con direccionamiento absoluto, al realizar la migraci√≥n se declarar√°n operandos simb√≥licos
para las direcciones absolutas. Esta declaraci√≥n autom√°tica puede provocar conflictos en los
tipos de datos, especialmente si est√° activada la verificaci√≥n IEC en el TIA Portal. As√≠, por
ejemplo, podr√≠a surgir un conflicto de tipo de datos si un valor de 32 bits es interpretado por la
declaraci√≥n autom√°tica como variable de tipo DWORD, pero en el programa se espera una
variable con datos de tipo REAL.
En este caso no es suficiente desactivar la verificaci√≥n IEC. En lugar de ello se debe corregir
la declaraci√≥n en la tabla de variables PLC.
Los conflictos de tipo de datos tambi√©n pueden surgir si se accede varias veces a la misma
direcci√≥n absoluta en el programa, pero se utilizan tipos de datos diferentes para los distintos
accesos. La figura siguiente muestra un ejemplo de estos accesos m√∫ltiples:

Durante la migraci√≥n, en estos casos se declara autom√°ticamente una variable propia para
cada tipo de datos. Como todas las variables hacen referencia a la misma direcci√≥n absoluta,
en la tabla de variables PLC se emiten las advertencias correspondientes. Estos
solapamientos de direcci√≥n deben corregirse manualmente en la tabla de variables PLC.

Migraci√≥n de bloques de comunicaci√≥n
Durante la migraci√≥n de instrucciones de comunicaci√≥n de STEP 7 V5.x se sustituyen punteros
del tipo de datos ANY por variables PLC dentro de la propia estaci√≥n S7.
‚óè Tras la migraci√≥n se muestra una advertencia en los par√°metros afectados.
‚óè Sustituya las variables PLC en los par√°metros afectados por un puntero.
En el direccionamiento absoluto de un bloque de datos con tipo de datos ANY, el bloque de
datos ha debido crearse con acceso est√°ndar, puesto que no es posible el direccionamiento
simb√≥lico con el tipo de datos ANY.
Ejemplo: utilice la instrucci√≥n P#M10.0 BYTE 4 en lugar de %MD10 para la entrada de
valores en los par√°metros correspondientes.

Nombres simb√≥licos para bloques y tipos de datos definidos por el usuario (UDT)
En el TIA Portal todo bloque o UDT tiene un n√∫mero y un nombre. Por eso ya no es necesario
declarar nombres simb√≥licos. Si el programa migrado contiene declaraciones de s√≠mbolos
para bloques o UDT, despu√©s de la migraci√≥n se utilizar√°n como nombres.

26

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Bloques de librer√≠as STEP 7
El TIA Portal no ofrece funciones y bloques de funci√≥n est√°ndar proporcionados en librer√≠as,
sino que se hallan disponibles a modo de instrucciones en la Task Card "Instrucciones". Las
instrucciones est√°n ordenadas por funciones y se pueden encontrar bajo su nombre simb√≥lico.
Si el programa que se va a migrar contiene llamadas de funciones o bloques de funci√≥n
est√°ndar, durante la migraci√≥n se reemplazar√°n por las instrucciones equivalentes a la funci√≥n
o bloque de funci√≥n est√°ndar original.
En caso de que el bloque de la librer√≠a del TIA Portal ya no est√© soportado, existen las
siguientes alternativas:
‚óè El bloque de la librer√≠a se sustituye por una instrucci√≥n compatible. En este caso, aparece
un aviso indicando que debe compilar el programa despu√©s de la migraci√≥n. Tenga en
cuenta que el bloque invocante no puede llevar ninguna protecci√≥n de know-how, ya que
la llamada de bloque debe adaptarse durante la compilaci√≥n.
‚óè Si no existe ninguna instrucci√≥n compatible, se migra el bloque como bloque de usuario.
Este aparece entonces como bloque con protecci√≥n de know-how en la carpeta "Bloques
de programa" y tiene el complemento del nombre "_LF" (legacy function).

Librer√≠as de bloques personalizadas
Las librer√≠as de bloques personalizadas ya no est√°n disponibles en el TIA Portal en su forma
conocida. No obstante, se pueden migrar librer√≠as personalizadas insert√°ndolas en un
proyecto antes de su migraci√≥n y, a continuaci√≥n, migrando este. Seguidamente, en el TIA
Portal se pueden copiar desde el proyecto y utilizarse.

Instrucciones en otra representaci√≥n
La representaci√≥n de algunos comandos de KOP, FUP, AWL, SCL y GRAPH en el TIA Portal
es distinta de la de antiguas versiones de STEP 7. As√≠, por ejemplo, las funciones matem√°ticas
y los comparadores ya no son espec√≠ficos de los datos. En su lugar hay una instrucci√≥n central
aplicable a todos los tipos de datos. El comando "ADD_I", por ejemplo, ya no se admite y es
sustituido por la instrucci√≥n "ADD".
Tambi√©n hay otros comandos que tienen una nueva representaci√≥n en el TIA Portal; por
ejemplo, comandos de flancos, operaciones l√≥gicas con palabras, conversiones,
temporizadores CEI, contadores CEI, etc.
Los comandos adoptan la nueva representaci√≥n durante la migraci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

27

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Verificaci√≥n IEC m√°s estricta
En el TIA Portal se aplican reglas m√°s estrictas para verificar la compatibilidad de los tipos de
datos. Adem√°s, al verificar la sintaxis, ya se detectan aquellos errores que pueden provocar
errores en tiempo de ejecuci√≥n. As√≠, por ejemplo, en las funciones (FC) ya no se admite la
escritura en par√°metros de entrada propios ni la lectura de par√°metros de salida propios. Para
evitar errores de sintaxis, tenga en cuenta las siguientes reglas:
‚óè Utilice √∫nicamente variables con tipos de datos compatibles en la transferencia de
par√°metros.
‚óè Utilice √∫nicamente variables con tipos de datos compatibles en las instrucciones de
comparaci√≥n o en instrucciones aritm√©ticas.
‚óè No se puede escribir en par√°metros de entrada ni leer par√°metros de salida.
Encontrar√° m√°s informaci√≥n sobre la interfaz del bloque y la conversi√≥n de los tipos de datos
con verificaci√≥n CEI en la ayuda sobre los tipos de datos:
Tipos de datos

Comprobaci√≥n m√°s estricta del tipo de datos en las instrucciones "MOVE" y "FILL"
En las instrucciones "MOVE" y "FILL" se comprueba la compatibilidad de las √°reas de origen
y destino aplicando reglas m√°s estrictas. As√≠, por ejemplo, ya no es posible desplazar con
"MOVE" una variable del tipo de datos "Integer" a un √°rea de destino del tipo de datos "WORD".
En su lugar deben utilizarse las instrucciones "CONVERT", "T_CONV" o "S_CONV" en el TIA
Portal.
Encontrar√° informaci√≥n detallada sobre los tipos de datos compatibles para "MOVE" y "FILL"
en la ayuda de las instrucciones:
AUTOHOTSPOT
AUTOHOTSPOT
Los programas creados en KOP o FUP que utilizan tipos de datos no v√°lidos en las
instrucciones "MOVE" o "FILL" se muestran en AWL despu√©s de la migraci√≥n. Sin embargo,
en las propiedades del bloque sigue estando ajustado el lenguaje KOP o FUP.
Cambie el programa a AWL en las propiedades del bloque. Despu√©s, vuelva a cambiarlo a
KOP o FUP.

Identificador de acceso a periferia ":P"
En el TIA Portal se utiliza el identificador de acceso ":P" para el direccionamiento directo de la
periferia. No se admite, por ejemplo, la siguiente notaci√≥n:
%PEW3
En su lugar se utiliza la siguiente:
%EW3:P //representaci√≥n absoluta
MyTag:P //representaci√≥n simb√≥lica
Los accesos adoptan la nueva notaci√≥n durante la migraci√≥n. Ahora bien, no es posible
adoptar los nombres simb√≥licos declarados para variables de periferia en el programa original.
En su lugar se crean nuevas declaraciones. Encontrar√° m√°s informaci√≥n sobre el acceso a la
periferia en la ayuda sobre el direccionamiento de la periferia:

28

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
Direccionar la periferia

En las etiquetas de salto no se distingue entre may√∫sculas y min√∫sculas.
En el TIA Portal no se distingue entre may√∫sculas y min√∫sculas en las etiquetas de salto. Si el
programa original contiene marcas de salto que solo se distinguen por las may√∫sculas y
min√∫sculas, estas se transforman en marcas de salto un√≠vocas. El archivo de protocolo
proporciona informaci√≥n sobre las marcas de salto modificadas.

El car√°cter especial alem√°n "√ü" no se diferencia de "ss"
En el TIA Portal, el car√°cter especial alem√°n "√ü" no se diferencia de "ss" en nombres de
variables. Si el programa original contiene, p. ej., nombres de variables que solo se distinguen
por estos dos caracteres, estos se transforman en nombres de variables un√≠vocos.

Migraci√≥n de valores REAL y STRING
En el TIA Portal se comprueba si los valores de arranque de variables REAL y STRING se
encuentran en el rango admisible o declarado. Se aplican las reglas siguientes:
‚óè Las variables REAL deben tener un valor en el rango de +1,175494E-38 a +3,402823E+38.
‚óè La longitud m√°xima del valor STRING no puede ser superior a la longitud declarada del
STRING.
Si no se cumplen estas reglas, el programa puede migrar con √©xito, pero no se podr√° compilar
a continuaci√≥n.
Como soluci√≥n, es posible abrir en STEP 7 (TIA Portal) los bloques de datos correspondientes
y modificar los valores de arranque. A continuaci√≥n, compile el programa con el comando de
men√∫ "Software (compilar todos los bloques)".

Migraci√≥n de bloques de datos globales
La representaci√≥n y el manejo de los valores en los bloques de datos var√≠a en el TIA Portal y
en SIMATIC STEP 7. En los bloques de datos globales que no han sido derivados de un objeto
de orden superior, p. ej. de un UDT, las variables obtienen siempre el valor predeterminado del
tipo de datos, p. ej. FALSE para el tipo de datos BOOL. Este valor predeterminado no se puede
editar. En caso de que en el proyecto de origen se hayan asignado valores iniciales offline en
la vista de declaraci√≥n, estos no se adoptar√°n en la migraci√≥n. Si en el programa son
necesarios valores predeterminados del usuario, utilice un bloque de datos global basado en
un tipo de datos PLC. En un tipo de datos PLC se pueden asignar valores predeterminados del
usuario para los valores de variables.
Encontrar√° m√°s informaci√≥n sobre los valores de datos en los bloques de datos en la ayuda
sobre bloques de datos:
Programar bloques de datos

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

29

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Tablas de variables
Las tablas de variables del programa original no se migran al TIA Portal. Para observar
variables online en el TIA Portal deben generarse "tablas de observaci√≥n". Dichas tablas
tienen la misma funci√≥n que las tablas de variables en SIMATIC STEP 7.
Nota
Soporte adicional para la migraci√≥n
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n:
Migraci√≥n controladores (http://support.automation.siemens.com/WW/view/es/83557459)
Si necesita soporte adicional, dir√≠jase al SIMATIC Customer Support.

"Ret_val" como nombre de variable en la interfaz del bloque
Si en el programa de origen se utiliza la palabra clave "Ret_val" como nombre de variable en
una interfaz de bloque, el bloque no se migrar√° correctamente. En este caso, corrija el
programa de origen y vu√©lvalo a migrar.

2.7.6.8

Migraci√≥n de programas KOP/FUP/AWL
Los bloques KOP/FUP y AWL pueden ejecutarse despu√©s de la migraci√≥n sin necesidad de
compilarlos o cargarlos de nuevo.

Fuentes AWL
Las fuentes AWL no pueden migrarse al TIA Portal. Antes de la migraci√≥n deben generarse
bloques AWL a partir de las fuentes. Seguidamente, dichos bloques pueden volver a
exportarse en el TIA Portal como fuente. Utilice para ello el comando "Generar fuente a partir
de bloques" del men√∫ contextual del √°rbol del proyecto.
Consulte tambi√©n: AUTOHOTSPOT

Protecci√≥n de know-how
Los bloques que tienen protecci√≥n de know-how antes de la migraci√≥n siguen teni√©ndola
despu√©s de migrarlos. Puesto que las fuentes no se migran, no se puede eliminar la protecci√≥n
de know-how. Por eso, los bloques no se pueden abrir ni editar. No obstante, existe la
posibilidad de cargar los bloques en la CPU para ejecutarlos.
Para eliminar la protecci√≥n de know-how de un bloque existen dos posibilidades:
‚óè Antes de la migraci√≥n, elimine de la fuente el atributo KNOW_HOW_PROTECT y
seguidamente genere un bloque sin protecci√≥n de know-how. A continuaci√≥n migre este
bloque.
‚óè Importe la fuente al TIA Portal y, a partir de esta, genere un bloque sin protecci√≥n de knowhow. Proteja seguidamente el bloque con una contrase√±a a trav√©s del comando de men√∫
"Edici√≥n > Protecci√≥n de know-how".

30

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Conversi√≥n de KOP/FUP a AWL
En algunos puntos del TIA Portal se realizan an√°lisis sint√°cticos m√°s detallados que en
versiones anteriores de STEP 7. Sin embargo, la migraci√≥n se encarga de que siga siendo
posible compilar el programa: Si un bloque KOP/FUP contiene operaciones que causan un
error de sintaxis en el TIA Portal, tras la migraci√≥n los segmentos afectados se representan en
AWL. Sin embargo, la sem√°ntica del programa de origen no cambia.
Un mensaje en el informe de migraci√≥n indica que se ha cambiado el lenguaje de
programaci√≥n en algunos segmentos.

2.7.6.9

Migraci√≥n de programas GRAPH

Requisitos
El requisito para migrar bloques GRAPH es que el dispositivo original tenga instalado el
paquete opcional "S7-GRAPH, versi√≥n 5.3 SP6" o superior.

Configuraci√≥n de bloque espec√≠fica de GRAPH
La configuraci√≥n de bloque espec√≠fica de GRAPH se ha reducido mucho en el TIA Portal. En
la siguiente tabla se muestra c√≥mo se transfieren las configuraciones de bloque originales al
TIA Portal.
Configuraci√≥n en el proyecto de ori‚Äê
gen

Ajuste en el TIA Portal

Par√°me‚Äê
tros FB

Se migran los par√°metros existentes

M√≠nimo
Est√°ndar
M√°ximo
Definible

Descrip‚Äê
ci√≥n de la
interfaz
Capaci‚Äê
dad de
ejecuci√≥n

Minimizado

Generar DB minimizado

Campos de estructura

Siempre se crean estructuras individuales

Estructuras individuales
FC70/71
FC72

FC 73 si est√° activada la opci√≥n "Generar DB minimizado"; de lo
contrario, FC 72

FC73

An√°lisis de criterios en el DB

Configuraci√≥n en el TIA Portal irrelevante

Saltar etapas

Saltar etapas

Acuse obligatorio en caso de error

Acuse obligatorio en los errores de supervisi√≥n

Sincronizaci√≥n

En el TIA Portal siempre activado

Procesamiento permanente de to‚Äê
dos los interlocks en modo manual

Procesamiento permanente de todos los interlocks en modo
manual

Bloqueo de la selecci√≥n del modo de
operaci√≥n

Bloqueo de la selecci√≥n del modo de operaci√≥n

Comportamiento de conmutaci√≥n se‚Äê En el TIA Portal siempre activado
guro

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

31

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
Configuraci√≥n en el proyecto de ori‚Äê
gen

Ajuste en el TIA Portal

Adverten‚Äê Ninguna
cias
Todos

En el TIA Portal siempre activado

Activar avisos

Activar avisos

Avisos con WR_USMSG

En el TIA Portal avisos siempre con ALARM_SQ/ALARM_S

Extensi√≥n del nombre de las etapas
Las extensiones del nombre de las etapas no se soportan en el TIA Portal. Durante la
migraci√≥n se convierten en texto espec√≠fico de la etapa.

Compilaci√≥n del bloque migrado
Despu√©s de la migraci√≥n hay que compilar y cargar de nuevo los bloques GRAPH.
Durante la compilaci√≥n pueden llegar a producirse los siguientes errores:
‚óè Debido a la verificaci√≥n IEC m√°s estricta pueden surgir conflictos en los tipos de datos. En
dicho caso, modifique la declaraci√≥n.
‚óè Puesto que en el TIA Portal ya no est√° disponible la opci√≥n "Campos de estructura" para la
interfaz, sus elementos ya no se pueden direccionar, por ejemplo, con G7S[1].X. Por eso
es necesario corregir el acceso al elemento, cambi√°ndolo, por ejemplo, a STEP1.X.

Modificaci√≥n de la interfaz del bloque GRAPH
Los cambios de la configuraci√≥n pueden provocar cambios en la interfaz del bloque. Por eso
es muy posible que haya que generar de nuevo el DB de instancia o actualizar las llamadas de
bloque.

2.7.6.10

Migraci√≥n de programas SCL
El requisito para migrar bloques SCL es que en el dispositivo original est√© instalado el paquete
opcional "S7-SCL, versi√≥n 5.3 SP5".
Despu√©s de la migraci√≥n hay que compilar y cargar de nuevo los bloques SCL.

Procedimiento b√°sico en la migraci√≥n
La migraci√≥n completa de bloques SCL s√≥lo se lleva a cabo si se hallan presentes las fuentes
correspondientes en el proyecto de origen.

32

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
La tabla siguiente muestra el procedimiento b√°sico a seguir:
Presente en el proyecto de origen

Presente despu√©s de la migraci√≥n

Bloques SCL con fuente

Bloques SCL editables

Bloques SCL con protecci√≥n de know-how con
fuente

Bloques SCL editables. Despu√©s de la migraci√≥n,
los bloques ya no tienen protecci√≥n de know-how,
pero en caso de necesidad se les puede volver a
asignar dicha protecci√≥n.

Bloques SCL sin fuente

Bloques SCL con protecci√≥n de know-how

Bloques SCL con protecci√≥n de know-how sin
fuente

Bloques SCL con protecci√≥n de know-how

Opciones espec√≠ficas del compilador SCL
Solo se aplican como propiedad del bloque durante la migraci√≥n al TIA Portal las opciones del
compilador que est√°n definidas directamente en una fuente SCL. En caso de que no est√©
definida ninguna opci√≥n del compilador en la fuente SCL de origen, se desactivar√°n las
opciones en las propiedades del bloque migrado.
Las opciones del compilador que est√©n definidas como ajuste en el editor SCL o en un archivo
de control de compilaci√≥n SCL no se migrar√°n.
En la siguiente tabla se muestra una vista general de las opciones del compilador que se
transfieren al TIA Portal como propiedad del bloque.
Opci√≥n del compilador en la fuente SCL

Propiedad del bloque en el TIA Portal

scl_monitorarraylimits

Comprobar l√≠mites de ARRAY

scl_createdebuginfo

Crear informaci√≥n avanzada de estado

scl_setokflag

Asignar ENO autom√°ticamente

Llamada de bloques de funci√≥n
En el TIA Portal ya no se admiten llamadas de bloque con indicaci√≥n del bloque de funci√≥n, p.
ej. "DBX"."FBX()". La sintaxis de llamada se convierte durante la migraci√≥n a la notaci√≥n
"DBX()" .

Nuevo mecanismo EN/ENO
SCL utiliza el mecanismo EN/ENO del TIA Portal. Por ello, durante la migraci√≥n se sustituyen
todos los usos del flag OK por ENO. Los puntos en los que se ha utilizado ENO en el programa
original quedan marcados. Estos puntos se deben verificar tras la migraci√≥n para adaptarlos
al nuevo mecanismo.
Consulte tambi√©n:
AUTOHOTSPOT

Operador "DIV"
El operador "DIV" ya no est√° disponible en el TIA Portal. Durante la migraci√≥n se convierten
todos los usos de "DIV" en la notaci√≥n "/" conforme con las normas.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

33

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Constantes locales
En el TIA Portal, las constantes simb√≥licas locales se declaran en el apartado "CONST" de la
interfaz del bloque. Tienen siempre un tipo de datos. Si en el programa original hay constantes
simb√≥licas declaradas sin tipo de datos, durante la migraci√≥n se les asigna un tipo de datos
apropiado.
En programas SCL cl√°sicos era posible utilizar constantes locales como l√≠mites de ARRAY.
Durante la migraci√≥n se conservan estas declaraciones.
Ejemplo de declaraci√≥n de l√≠mites de ARRAY con constantes locales en un programa SCL
cl√°sico:
VAR_INPUT
MyArray : Array[MyConst1 .. MyConst2] of Int;
END_VAR
Despu√©s de la migraci√≥n, esta declaraci√≥n quedar√≠a as√≠:

Sin embargo, en la interfaz del bloque del TIA Portal no es posible crear expresiones con
constantes locales y utilizarlas para declarar l√≠mites de ARRAY o para inicializar valores. En su
lugar, durante la migraci√≥n se crear√° el resultado de la expresi√≥n y se registrar√° en la
declaraci√≥n como valor. La expresi√≥n del programa original se guarda como comentario.
Ejemplo de declaraci√≥n de l√≠mites de ARRAY con expresiones en un programa SCL cl√°sico:
CONST
MyConst1Value10 := int#10;
MyConst2Value10 := int#10;
MyConst20 := MyConst1Value10 + MyConst2Value10 ;
MyConst0 := MyConst1Value10 - MyConst2Value10 ;
MyConst100 := MyConst1Value10 * MyConst2Value10 ;
END_CONST
Despu√©s de la migraci√≥n, esta declaraci√≥n quedar√≠a as√≠:

Consulte tambi√©n:
AUTOHOTSPOT
AUTOHOTSPOT

34

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

ARRAYs anidados
En el TIA Portal no es posible anidar ARRAYs. No se admitir√≠a, por ejemplo, la siguiente
declaraci√≥n:
ARRAY[1..5] OF ARRAY[0..3] OF INT
Durante la migraci√≥n los ARRAYs anidados se convierten en ARRAYs multidimensionales.
Despu√©s de la migraci√≥n, el ejemplo anterior quedar√≠a as√≠:
ARRAY[1..5, 0..3] OF INT

Rebase de los l√≠mites del ARRAY
En versiones anteriores de STEP 7 no se comprobaba durante la compilaci√≥n si el programa
conten√≠a accesos incorrectos a los ARRAYs. Por consiguiente, los accesos a los elementos de
ARRAY que se encontraban fuera de los l√≠mites declarados del ARRAY, no se notificaban
como errores sint√°cticos. Cuando se cargaba el programa err√≥neo, pod√≠an producirse errores
en tiempo de ejecuci√≥n.
En TIA Portal, el rebase de los l√≠mites del ARRAY se comprueban mediante un an√°lisis
sint√°ctico m√°s detallado. Si el programa contiene errores de acceso, estos se notifican ahora
durante la compilaci√≥n. En tal caso, corrija el acceso y compile nuevamente el programa.
Tambi√©n puede utilizar una variable como √≠ndice del ARRAY.
Consulte tambi√©n:
AUTOHOTSPOT

Declaraci√≥n de etiquetas (LABEL)
La declaraci√≥n de etiquetas de salto no es posible en el TIA Portal. No se aceptar√≠a, por
ejemplo, la siguiente declaraci√≥n del proyecto de origen:
LABEL
MARKE1, MARKE2, MARKE3 ;
END_LABEL
Pero las marcas de salto programadas se conservan en el c√≥digo del programa y se pueden
utilizar para instrucciones GOTO.

Accesos indexados a la periferia
En el TIA Portal se utiliza la sintaxis con par√©ntesis para accesos indexados a la periferia. No
se admite, por ejemplo, la siguiente notaci√≥n:
PEB[1]
En su lugar se utiliza la siguiente:
EB(1):P
Los accesos adoptan la nueva notaci√≥n durante la migraci√≥n.
Consulte tambi√©n:
AUTOHOTSPOT

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

35

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Accesos indexados a la memoria
En el TIA Portal se utiliza la sintaxis con par√©ntesis para accesos indexados a la memoria. No
se admite, por ejemplo, la siguiente notaci√≥n:
EB[2]
En su lugar se utiliza la siguiente:
EB(2)
Los accesos adoptan la nueva notaci√≥n durante la migraci√≥n. Encontrar√° m√°s informaci√≥n
sobre el direccionamiento en "Consulte tambi√©n".

Acceso indexado a bloques de datos
En el TIA Portal se utiliza la sintaxis con par√©ntesis para accesos indexados a los bloques de
datos. No se admite, por ejemplo, la siguiente notaci√≥n:
%DB100.DW[5]
En su lugar se utiliza la siguiente:
%DB100.DW(5)
Los accesos adoptan la nueva notaci√≥n durante la migraci√≥n. Encontrar√° m√°s informaci√≥n
sobre el direccionamiento en "Consulte tambi√©n".

Acceso absoluto a bloques de datos
En un acceso absoluto se tiene que utilizar el identificador absoluto del bloque de datos; el
acceso con el identificador simb√≥lico no se admite en el TIA Portal.
No se admite, por ejemplo, la siguiente notaci√≥n:
DB100.DW3
En su lugar se utiliza la siguiente:
%DB100.DW3
Durante la migraci√≥n se a√±ade el signo "%" cuando se detecta un acceso absoluto a bloques
de datos. Encontrar√° m√°s informaci√≥n sobre el direccionamiento en "Consulte tambi√©n".

Funciones logar√≠tmicas "EXPD" y "LOG"
Las funciones logar√≠tmicas "EXPD" y "LOG" ya no est√°n disponibles en el TIA Portal. Durante
la migraci√≥n, todos los usos de "EXPD" se convierten en la notaci√≥n normalizada
"10**(<Expresi√≥n>)". Durante la migraci√≥n, todos los usos de "LOG" se convierten en la
notaci√≥n normalizada "LN(<Expresi√≥n>)".

Instrucci√≥n matem√°tica "MAX"
En el TIA Portal la instrucci√≥n "MAX" no puede procesar ning√∫n tipo de datos temporales. Sin
embargo, en lugar de eso puede utilizar comparadores.

36

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
El siguiente ejemplo muestra c√≥mo puede determinar el "mayor" de dos tipos de datos
temporales con la ayuda de comparadores:
SCL
#xs_tod := #xi_tod + #xi_time;
// statt #xstod1 := MAX(IN1:=#xtod1, IN2:=#xstod1);
IF #xs_tod < #xi_tod THEN
#xs_tod := #xi_tod;
END_IF;
// statt #xsd1 := MAX(IN1:=#xd1, IN2:=#xsd1);
IF #xi_date <#xs_date THEN
#xs_date := #xi_date;
END_IF;
#xs_date_time := #xi_date_time + #xi_time;
// statt #xs_date_time := MAX(IN1:=#xi_date_time, IN2:=#xs_date_time);
IF #xi_date_time <#xs_date_time THEN
#xs_date_time := #xi_date_time;
END_IF;

N√∫meros en coma flotante - Representaci√≥n exponencial
La representaci√≥n exponencial de los n√∫meros en coma flotante sin punto decimal ya se no
admite en el TIA Portal. No se admite, por ejemplo, la siguiente notaci√≥n:
3E10
En su lugar se utiliza la siguiente:
3.0E10
Durante la migraci√≥n se convierten todos los usos de "3E10" en la notaci√≥n "3.0E10" conforme
con las normas.
Consulte tambi√©n:
AUTOHOTSPOT

Bloques de librer√≠as STEP 7
Las funciones FC1 - FC40 de la librer√≠a de STEP 7 Classic "Funciones IEC est√°ndar" ya no
est√°n disponibles en el TIA Portal. Durante la migraci√≥n, las llamadas de las funciones
est√°ndar se convierten en llamadas de las instrucciones avanzadas correspondientes. Si la
conversi√≥n no es posible, se emite un error de sintaxis.
Modifique en tal caso el bloque SCL despu√©s de la migraci√≥n y utilice las instrucciones propias
de SCL u operadores en lugar de funciones IEC est√°ndar.
Ejemplos:
Utilice S5TIME_TO_TIME en lugar de S5TI_TIM (FC33)
"TAG_TIME" := S5TIME_TO_TIME ("TAG_S5TIME");

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

37

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7
Utilice el operador de comparaci√≥n <> en lugar de NE_DT (FC 9):
IF #D1 <> #D2 THEN "MyOutput" : = 10;
END_IF;
Utilice el operador de comparaci√≥n = en lugar de EQ_STRNG (FC 10):
IF #My_String1 = #MyString2 THEN "MyOutput" : = 10;
END_IF;

Interrupci√≥n de strings con "$"
En STEP 7 Classic, en SCL los strings pod√≠an interrumpirse mediante caracteres especiales,
p. ej. caracteres de control o caracteres no imprimibles. Esos caracteres se identificaban con
las secuencias de interrupci√≥n "$>" y "$<".
Ejemplo:
#myString := 'Test1$>

$<Test1';

En el TIA Portal ya no existe esa posibilidad. Las interrupciones de strings se borran en la
migraci√≥n.

Puntero NULL
En el TIA Portal, para los punteros NULL ya no se utiliza la notaci√≥n "NIL", sino "NULL". La
notaci√≥n se sustituye autom√°ticamente en la migraci√≥n.

Comentarios
Si es posible se incorporan los comentarios de la fuente migrada. Se aplican las reglas
siguientes:
‚óè Los comentarios que figuran inmediatamente detr√°s de la definici√≥n del bloque de origen se
convierten en comentarios del bloque.
‚óè Los comentarios que son l√≠neas de comentario situadas tras una declaraci√≥n de variable se
incorporan en la columna "Comentario" de la interfaz del bloque.
‚óè Los comentarios restantes no se incorporan.
Ejemplo:
// Comentario que no se incorpora.
FUNCTION_BLOCK FB57
// Comentario que se incorpora en las propiedades del bloque.
(*Comentario que se incorpora en las propiedades del bloque. *)
VAR_TEMP
myVar1 : INT;// Comentario que se incorpora en la interfaz.
myVar2 : INT;(* Comentario que no se incorpora porque es una
secci√≥n de comentario *)
END_VAR
// Comentario que no se incorpora.
BEGIN
;
END_FUNCTION_BLOCK

38

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.7 Migrar proyectos de STEP 7

Llamada a bloques en fuentes S7-SCL
En las fuentes S7-SCL de STEP 7 versi√≥n V5.x era posible activar los par√°metros de bloques
antes o despu√©s de llamar al bloque. Es decir, era posible llamar al bloque con par√°metros
incompletos y suministrar variables o valores a los par√°metros de entrada/salida de los
bloques en otro lugar de la fuente S7-SCL. En STEP 7 (TIA Portal) este tipo de programaci√≥n
no es posible debido al sistema, y tampoco ser√° admitido en el futuro. En el TIA Portal es
posible migrar y compilar con seguridad el proyecto STEP 7 V5.x, pero la funci√≥n de esta
llamada de bloque en el programa S7-SCL ya no es posible.
Antes de compilar la fuente S7-SCL en STEP 7 V5.x y migrar el proyecto al TIA Portal, tenga
en cuenta los puntos siguientes:
‚óè Todos los par√°metros del bloque llamado deben activarse dentro de la instrucci√≥n de
llamada.
‚óè No est√° permitido borrar ning√∫n par√°metro del bloque llamado ni agregarlo o parametrizarlo
en otro lugar de la fuente S7-SCL.

2.7.6.11

Avisos
Los avisos de PLC se migran con todos los par√°metros e incluidas todas las categor√≠as.
Tambi√©n se migran los tipos de aviso y sus instancias y se almacenan bajo los avisos de PLC
en el TIA Portal.

Requisitos
El requisito es que en el proyecto de origen est√© seleccionada la asignaci√≥n de los n√∫meros de
aviso para toda la CPU. Por ello, antes de la migraci√≥n active si es necesario la opci√≥n "Asignar
siempre n√∫meros de aviso un√≠vocos para toda la CPU" en el proyecto de origen y ejecute
Guardar como > Con reorganizaci√≥n.

Restricciones
‚óè Los avisos de s√≠mbolos no se pueden migrar.
‚óè Se adoptan las palabras clave "$$AKZ$$", "$$BlockComment$$" y "$$Area$$", pero no se
realiza ninguna sustituci√≥n en tiempo de ejecuci√≥n.

2.7.6.12

Notificar errores de sistema
En principio, los avisos de error de sistema configurados con SIMATIC STEP 7 se pueden
migrar.

Limitaciones
Al migrar la aplicaci√≥n "Notificar errores de sistema", s√≥lo se migran los ajustes realizados por
el usuario en el proyecto SIMATIC STEP 7 (por ejemplo, configuraciones b√°sicas, n√∫meros de
bloque, nombres de bloque, etc.).

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

39

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Los siguientes elementos no se incluyen en la migraci√≥n:
‚óè Bloques SFM
‚óè Los avisos SFM y los ajustes realizados para configurar los textos de aviso
‚óè Librer√≠as de textos del sistema
Los ajustes se pueden volver adaptar manualmente una vez realizada la migraci√≥n. Los
elementos que falten se generar√°n de nuevo al compilar por primera vez la configuraci√≥n
hardware.

2.7.6.13

Migraci√≥n de textos del proyecto
Durante la migraci√≥n del proyecto original se incorporan al TIA Portal textos del proyecto como,
por ejemplo, t√≠tulos y comentarios de bloques. Sin embargo, solo se migran textos del proyecto
en el idioma de edici√≥n ajustado en el proyecto original. Los textos del proyecto en otros
idiomas no se migran.

Consulte tambi√©n
Migraci√≥n de proyectos STEP 7 (P√°gina 17)

2.8

Migrar proyectos de WinCC

2.8.1

Migrar proyectos de WinCC flexible 2008

2.8.1.1

Principios b√°sicos (WinCC flexible)

Migraci√≥n (WinCC flexible)
Introducci√≥n
En WinCC se pueden seguir utilizando proyectos de WinCC flexible. Se soportan las
siguientes versiones de WinCC flexible:
‚óè WinCC flexible 2008 SP2
‚óè WinCC flexible 2008 SP3
‚óè WinCC flexible 2008 SP5
En los siguientes cap√≠tulos encontrar√° informaci√≥n sobre qu√© paneles de operador se soportan
y qu√© condiciones son necesarias para efectuar una migraci√≥n correctamente.

40

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Los proyectos de ProTool Pro y de versiones anteriores de WinCC flexible no se pueden migrar
directamente a WinCC. Si desea seguir utilizando estos proyectos en WinCC, primero deber√°
migrarlos a una versi√≥n compatible de WinCC flexible y modificar el panel de operador.
Si el proyecto que se debe migrar contiene partes de un paquete opcional soportado, el
paquete opcional debe estar instalado en WinCC para que la migraci√≥n se efect√∫e
correctamente. Si el paquete opcional no est√° instalado, la migraci√≥n se cancela. Est√°n
afectados los paquetes opcionales siguientes:
‚óè SINUMERIK
La migraci√≥n no soporta los siguientes paquetes opcionales:
‚óè ProAgent
‚óè Open Platform Program - OPP

Consulte tambi√©n
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)
Migrar proyectos de WinCC flexible (WinCC flexible) (P√°gina 43)
Compilar y cargar un proyecto migrado (WinCC flexible) (P√°gina 45)
Paneles de operador soportados (WinCC flexible) (P√°gina 46)
Compatibilidad de objetos en la migraci√≥n (WinCC flexible) (P√°gina 51)
Migraci√≥n de conexiones (WinCC flexible) (P√°gina 55)
Migraci√≥n de variables (WinCC flexible) (P√°gina 58)
Migraci√≥n de datos runtime (WinCC flexible) (P√°gina 68)
Migraci√≥n de un proyecto integrado (WinCC flexible) (P√°gina 72)
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Principios b√°sicos de la migraci√≥n (WinCC flexible)
Introducci√≥n
Durante la migraci√≥n, los datos de un proyecto de WinCC flexible se convierten al nuevo
formato de datos de WinCC. No se comprueba si los datos del proyecto que debe migrarse son
coherentes. Si al compilar un proyecto de origen se generaran errores o advertencias, estas no
se eliminar√°n durante la migraci√≥n. Por lo tanto, el proyecto de origen no debe contener errores
y tiene que poder compilarse sin errores antes de la migraci√≥n. Para la migraci√≥n, tenga en
cuenta el volumen de un proyecto. Para la migraci√≥n rigen las caracter√≠sticas funcionales de
WinCC. Encontrar√° m√°s informaci√≥n al respecto en el cap√≠tulo "Visualizaci√≥n de procesos >
Caracter√≠sticas > Engineering System" de la Ayuda en pantalla.

Univocidad de los nombres de objeto
En WinCC flexible, las carpetas que contienen los objetos determinan la univocidad de los
mismos. La univocidad de los objetos de imagen agrupados viene determinada por el nombre
del grupo.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

41

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
En WinCC, todo nombre de objeto de un panel de operador debe ser un√≠voco. En los objetos
de imagen, el nombre debe ser un√≠voco dentro de una imagen.
Durante la migraci√≥n se comprueba que los nombres sean un√≠vocos. Si seg√∫n la nueva
regulaci√≥n un nombre no fuera un√≠voco, se cambia el nombre del objeto en cuesti√≥n. Un objeto
cuyo nombre ha sido cambiado recibe el sufijo "#Mign", siendo "n" un n√∫mero correlativo.
Nota
Nombre de servidor OPC DA modificado
Si en el proyecto de WinCC flexible se ha configurado un servidor OPC DA, dicho servidor ya
no est√° accesible con el nombre antiguo tras la migraci√≥n.
En el proyecto migrado, modifique el nombre del servidor OPC DA en los clientes OPC
afectados al valor siguiente: "OPC.SimaticHMI.CoRtHmiRTm".

Particularidades en el cambio de nombre de variables
Si en WinCC flexible se han estructurado variables en carpetas, con la migraci√≥n el nombre de
las variables se formar√° a partir del nombre de la carpeta y el nombre de la variable. Los
nombres de las carpetas y las variables se separan entre s√≠ con el car√°cter \. Despu√©s de la
migraci√≥n, el nombre de la variable es, por ejemplo: Plant1\Line3\Tag17.
Si el nombre tiene m√°s de 128 caracteres despu√©s de la migraci√≥n, el nombre se forma a partir
de la secuencia de caracteres #mig, un n√∫mero correlativo, el car√°cter # y el nombre de
variable WinCC flexible, p. ej., #mig2#Tag17.
Si se componen nombres de variables de forma din√°mica en scripts, es necesario revisar las
variables cuyo nombre haya cambiado con "#mig" en la migraci√≥n.

Objetos susceptibles de cambio
En caso necesario, se cambia el nombre de los siguientes objetos:
‚óè Im√°genes
‚óè Faceplates
‚óè Objetos de imagen
‚óè Gr√°ficos
‚óè Recetas
‚óè Estructuras
‚óè Elementos de estructura
‚óè Ficheros de avisos
‚óè Variables
‚óè Ficheros de variables
‚óè Conexiones

42

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Cancelar la migraci√≥n
La migraci√≥n se cancela en los siguientes casos:
‚óè cuando el proyecto que hay migrar est√° abierto en sistema de ingenier√≠a o en runtime.
‚óè cuando no hay suficiente memoria disponible en el disco duro para crear una copia de la
migraci√≥n del proyecto.
‚óè cuando, debido a problemas con el servidor SQL instalado, la migraci√≥n no puede acceder
a la base de datos del proyecto.
‚óè cuando la migraci√≥n no puede acceder a la base de datos del proyecto porque el usuario
no tiene permiso.
‚óè cuando en un proyecto integrado se selecciona el archivo "*.mcp" para la migraci√≥n. En un
proyecto integrado se debe seleccionar el archivo "*.s7" para la migraci√≥n.
‚óè cuando el proyecto se ha creado con una versi√≥n no soportada por la migraci√≥n.
‚óè cuando en el proyecto hay configurados equipos no soportados.

Guardar el proyecto en formato de migraci√≥n
La migraci√≥n de un proyecto de WinCC flexible no se debe realizar completamente en el PC
en el que est√° el proyecto. Puede preparar la migraci√≥n mientras guarda el proyecto en formato
de migraci√≥n. Para guardar un proyecto de WinCC flexible en formato de migraci√≥n, tiene a su
disposici√≥n la herramienta de migraci√≥n. La herramienta de migraci√≥n exporta los datos de
ingenier√≠a del proyecto WinCC flexible y los guarda en el formato de migraci√≥n "*.am*".
Para la migraci√≥n propiamente dicha, copie los datos en formato de migraci√≥n a un PC en el
que est√© instalado el TIA Portal.
Encontrar√° m√°s informaci√≥n en la documentaci√≥n de la herramienta de migraci√≥n.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Cambio de panel de operador mediante la migraci√≥n (WinCC flexible) (P√°gina 48)

Migrar proyectos de WinCC flexible (WinCC flexible)
Introducci√≥n
Al migrar un proyecto se cargan los datos de un proyecto de WinCC flexible a un proyecto
nuevo de WinCC. Por consiguiente, para la migraci√≥n se crea autom√°ticamente un proyecto
nuevo. No es posible migrar a un proyecto existente.
La migraci√≥n se puede llamar tanto desde la vista del portal como desde la vista del proyecto.
El proyecto deber√° migrarse √∫nicamente en un TIA Portal reci√©n abierto.
Encontrar√° informaci√≥n sobre la migraci√≥n de un proyecto integrado en el cap√≠tulo Migraci√≥n
de un proyecto integrado (WinCC flexible) (P√°gina 72).

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

43

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Si quiere guardar el proyecto √∫nicamente en formato de migraci√≥n, tiene a su disposici√≥n la
herramienta de migraci√≥n. Encontrar√° m√°s informaci√≥n al respecto en Principios b√°sicos de la
migraci√≥n (WinCC flexible) (P√°gina 41).
Nota
Soporte adicional para la migraci√≥n
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n:
Migraci√≥n visualizaci√≥n (http://support.automation.siemens.com/WW/llisapi.dll?
aktprim=100&lang=en&referer=%2fWW
%2f&func=cslib.cssearch&nodeid0=4000024&viewreg=WW&siteid=csius&extranet=standard
&groupid=4000002&objaction=cssearch&content=adsearch%2Fadsearch%2Easpx)
Si necesita soporte adicional, dir√≠jase al SIMATIC Customer Support.

Requisitos
‚óè Debe existir un proyecto de WinCC flexible.
‚óè El proyecto no puede estar abierto en WinCC flexible.

Procedimiento
El proyecto se migra en la vista del portal del siguiente modo:
1. Seleccione la acci√≥n "Inicio > Migrar proyecto".

2. En el campo "Ruta de origen" navegue hasta el proyecto que desea migrar.
3. Seleccione el archivo de proyecto WinCC flexible "*.hmi" o "*.am*".

44

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
4. En caso necesario, modifique los datos del proyecto que debe crearse. Cambie, p. ej., el
nombre o la ruta del proyecto. En el proyecto nuevo se crear√°n los datos que deben
migrarse.
5. Haga clic en "Migrar".
Se crear√° un proyecto nuevo y se iniciar√° la migraci√≥n de los datos:
‚Äì Se abre la vista del proyecto.
‚Äì El progreso de la migraci√≥n se indica en una ventana de migraci√≥n.
‚Äì En la ventana de inspecci√≥n bajo "Informaci√≥n > General" se muestran informaciones,
advertencias y errores correspondientes al proceso de migraci√≥n.
‚Äì Toda la informaci√≥n relacionada con la migraci√≥n se guarda en un archivo de informe.
‚Äì Una vez concluida la migraci√≥n, el proyecto se guarda y se emite un aviso. El aviso
contiene un enlace mediante el cual se puede abrir el archivo de informe.
Una vez concluida la migraci√≥n, en el √°rbol del proyecto encontrar√° un dispositivo nuevo para
cada panel de operador migrado. Estos dispositivos contienen los datos migrados, p. ej.,
im√°genes, avisos y variables.

Abrir el informe de migraci√≥n en otro momento
El informe de migraci√≥n se guarda junto con el proyecto migrado. Puede ver el informe m√°s
adelante. El archivo de informe se abre del siguiente modo:
1. Abra la carpeta "Datos comunes > Informes" en el √°rbol del proyecto. Esta carpeta contiene
los informes de todas las migraciones realizadas hasta el momento.
2. Haga doble clic en el informe de migraci√≥n deseado.
Se abrir√° el informe.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Migraci√≥n de un proyecto integrado (WinCC flexible) (P√°gina 72)
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)

Compilar y cargar un proyecto migrado (WinCC flexible)
Compilar un proyecto migrado
Despu√©s de migrar correctamente un proyecto de WinCC flexible, debe volver a compilarse
antes de cargarlo en el panel de operador. El proyecto s√≥lo se compilar√° correctamente si
antes de la migraci√≥n era compilable y no conten√≠a errores.
Si durante la compilaci√≥n del proyecto migrado se producen errores, √©stos se deben eliminar.
Una vez el proyecto haya sido compilado sin errores, c√°rguelo en el panel de operador.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

45

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Ajustes para cargar en el panel de operador
Durante la migraci√≥n no se aplican los ajustes para cargar el proyecto en el panel de operador.
Despu√©s de la migraci√≥n es necesario volver a configurar los ajustes para cargar el proyecto.
Seleccione el panel de operador en el √°rbol del proyecto y elija el comando del men√∫
contextual "Cargar en dispositivo > Software (cargar todo)". Se abrir√° el cuadro de di√°logo
"Carga avanzada". Configure los ajustes necesarios para la interfaz. Haga clic en el bot√≥n
"Cargar". El proyecto se vuelve a compilar y se abre el cuadro de di√°logo "Vista preliminar
carga".
Expanda la entrada "Sobrescribir" y controle la configuraci√≥n de las siguientes opciones:
‚óè ¬øDesea sobrescribir los datos de administraci√≥n de usuarios existentes en este equipo?
‚óè ¬øDesea sobrescribir los datos de receta existentes en el panel de operador?
Configure las opciones seg√∫n desee utilizarlas m√°s adelante en el proyecto. Despu√©s cargue
el proyecto en el panel de operador.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)

2.8.1.2

Migrar datos de ingenier√≠a (WinCC flexible)

Paneles de operador (WinCC flexible)
Paneles de operador soportados (WinCC flexible)
Introducci√≥n
Al migrar proyectos de WinCC flexible hay que tener en cuenta que WinCC no soporta todos
los paneles de operador. Se deben diferenciar los siguientes casos:
‚óè WinCC no soporta el panel de operador
El proyecto se migrar√° en proporci√≥n 1:1 y despu√©s de la migraci√≥n tendr√° el mismo panel
de operador que antes de la migraci√≥n.
‚óè El panel de operador se sustituye por un modelo posterior compatible.
El proyecto se migra. La migraci√≥n sustituye el panel de operador por un modelo posterior
compatible. Encontrar√° m√°s informaci√≥n al respecto en Cambio de panel de operador
mediante la migraci√≥n (WinCC flexible) (P√°gina 48).
‚óè No se soporta el panel de operador.
Si su proyecto de WinCC flexible tiene un panel de operador que WinCC no soporta, el
proceso de migraci√≥n se cancelar√°. Para migrar el proyecto, en WinCC flexible debe
asignarse al panel de operador un tipo de panel de operador que sea soportado por WinCC.
Si el panel de operador no soportado est√° incluido en la librer√≠a, se realiza la migraci√≥n. En
la librer√≠a del proyecto migrado en el TIA Portal, se crean las plantillas maestras
correspondientes para los equipos no soportados.
Tanto WinCC flexible como WinCC soportan los siguientes tipos de panel de operador:

46

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Basic Panels
‚óè KTP400 Basic mono PN
‚óè KTP400 Basic mono PN Portrait
‚óè KTP600 Basic DP
‚óè KTP600 Basic DP Portrait
‚óè KTP600 Basic PN
‚óè KTP600 Basic PN Portrait
‚óè KTP600 Basic mono PN
‚óè KTP600 Basic mono PN Portrait
‚óè KTP1000 Basic DP
‚óè KTP1000 Basic PN
‚óè TP1500 Basic PN

Mobile Panels
‚óè Mobile Panel 177 6'' DP
‚óè Mobile Panel 177 6" PN
‚óè Mobile Panel 277 8"
‚óè Mobile Panel 277 8'' IWLAN V2
‚óè Mobile Panel 277F 8'' IWLAN V2
‚óè Mobile Panel 277F 8'' IWLAN (RFID Tag)
‚óè Mobile Panel 277 10''

SINUMERIK PC
‚óè OP 010 Key
‚óè OP 012 Key
‚óè OP 015 Key
‚óè OP 015A Key
‚óè TP 015A T√°ctil+Key

Aplicaciones HMI
‚óè WinCC flexible Runtime
En WinCC s√≥lo se soportan las funcionalidades que ofrecen estos tipos de paneles.
En los siguientes cap√≠tulos se documentan las dem√°s funcionalidades que no se migran
debido a la selecci√≥n limitada de paneles.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

47

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Adaptaciones previas a la migraci√≥n
Si en el proyecto que hay que migrar se cambi√≥ el panel de operador por uno con un tama√±o
de imagen distinto, hay que volver a compilar y guardar el proyecto antes de migrarlo a WinCC.
En el proceso de compilaci√≥n se adaptan las im√°genes y los elementos gr√°ficos a su tama√±o.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Cambio de panel de operador mediante la migraci√≥n (WinCC flexible) (P√°gina 48)
Cambio de configuraci√≥n despu√©s de cambiar de panel de operador (WinCC flexible)
(P√°gina 51)
Compatibilidad de objetos en la migraci√≥n (WinCC flexible) (P√°gina 51)
Migraci√≥n de conexiones (WinCC flexible) (P√°gina 55)

Cambio de panel de operador mediante la migraci√≥n (WinCC flexible)
Introducci√≥n
WinCC flexible soporta algunos paneles de operador que no se continuar√°n usando en el
futuro. WinCC ya no soporta dichos paneles de operador. Al migrar un proyecto de WinCC
flexible, un panel de operador no soportado se sustituir√° por un panel de operador posterior
compatible.
Durante la migraci√≥n s√≥lo se cambiar√° el tipo de panel de operador. La migraci√≥n no modifica
los datos espec√≠ficos del panel de operador.
Al cambiar de panel de operador puede haber inconsistencias en el proyecto. En un proyecto
que pod√≠a compilarse antes de la migraci√≥n pueden aparecer errores al compilar el proyecto
despu√©s de cambiar de panel de operador, p. ej., porque el panel de operador cambiado
soporta otros medios de almacenamiento que el anterior panel de operador.

Cambio de panel de operador mediante la migraci√≥n
La siguiente tabla indica con qu√© modelos posteriores se reemplazan los paneles de operador
no soportados.
Paneles de operador no soportados

Modelo posterior

HT 8

PCU50.3 -C (resoluci√≥n 640*480)

Mobile Panel 170 6''

Mobile Panel 177 6'' DP

Mobile Panel 277 8'' IWLAN

Mobile Panel 277 8'' IWLAN V2

Mobile Panel 277F 8'' IWLAN

Mobile Panel 277F 8'' IWLAN V2

OP010 Key

PCU50.3B -C (resoluci√≥n 640*480)

OP012 Key

PCU50.3B -C (resoluci√≥n 800*600)

OP015 Key

PCU50.3B -C (resoluci√≥n 1024*768)

OP 08T

PCU50.3 -C (resoluci√≥n 640*480)

TP015A T√°ctil, Key

PCU50.3B (resoluci√≥n 1024*768)

48

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Paneles de operador no soportados

Modelo posterior

PC 477 12'' Key

PC 477B 12'' Key PB

PC 477 12'' T√°ctil

PC 477B 12'' T√°ctil PB

PC 477 15'' Key

PC 477B 15'' Key PB

PC 477 15'' T√°ctil

PC 477B 15'' T√°ctil PB

PC 477 19'' T√°ctil

PC 477B 19'' T√°ctil PB

PC 577 12'' Key

IPC 577C 12'' Key PB

PC 577 12'' T√°ctil

IPC 577C 12'' T√°ctil PB

PC 577 15'' Key

IPC 577C 15'' Key PB

PC 577 15'' T√°ctil

IPC 577C 15'' T√°ctil PB

PC 577 19'' T√°ctil

IPC 577C 19'' T√°ctil PB

PC 670 10" Key

HMI IPC677C 12" Key PB

PC 670 12'' Key

PC 677B 12'' Key PB

PC 670 12'' T√°ctil

PC 677B 12'' T√°ctil PB

PC 670 15'' Key

PC 677B 15'' Key PB

PC 670 15'' T√°ctil

PC 677B 15'' T√°ctil PB

PC 677 12'' Key

PC 677B 12'' Key PB

PC 677 12'' T√°ctil

PC 677B 12'' T√°ctil PB

PC 677 15'' Key

PC 677B 15'' Key PB

PC 677 15'' T√°ctil

PC 677B 15'' T√°ctil PB

PC 677 17'' T√°ctil

PC 677B 17'' T√°ctil PB

PC 677 19'' T√°ctil

PC 677B 19'' T√°ctil PB

PC 870 12" Key

HMI IPC677C 12" Key PB

PC 870 15" Key

HMI IPC677C 15" Key PB

PC 870 15" T√°ctil

HMI IPC677C 15" T√°ctil PB

PC 877 12" Key

HMI IPC677C 12" Key PB

PC 877 15" Key

HMI IPC677C 15" Key PB

PC 877 15" T√°ctil

HMI IPC677C 15" T√°ctil PB

PC 877 19" T√°ctil

HMI IPC677C 19" T√°ctil PB

PC IL 70 12" T√°ctil

HMI IPC577C 12" T√°ctil PB

PC IL 70 15" T√°ctil

HMI IPC577C 15" T√°ctil PB

PC IL 77 12" T√°ctil

HMI IPC577C 12" T√°ctil PB

PC IL 77 15" T√°ctil

HMI IPC577C 15" T√°ctil PB

PC IL 77 19" T√°ctil

HMI IPC577C 19" T√°ctil PB

PC IL 77 12" Key

HMI IPC577C 12" Key PB

PC IL 77 15" Key

HMI IPC577C 15" Key PB

P012T T√°ctil

IPC 677C 12'' T√°ctil PB
(cuando un P350 est√° conectado)

P012T T√°ctil

IPC 477C 12'' T√°ctil PB
(cuando un P320 est√° conectado)

Los siguientes equipos no son compatibles y, por lo tanto, tampoco se migran:
‚óè OP 73 y OP 73 micro
‚óè TP 170 micro 6"

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

49

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
‚óè TP 177 micro 6" y TP 177 micro 6" Portrait
‚óè C7-635 6" Key y C7-635 6" Touch
‚óè C7-636 6" Key
‚óè C7-636 10" Touch
‚óè OP 77A y OP 77B
‚óè TP 170A 6"
‚óè TP 177A 6" y TP 177A 6" Portrait
‚óè TP 170B 6" mono y TP 170B 6" color
‚óè TP 177B 6" mono DP y TP 177B 6" color PN/DP
‚óè OP 170B 6" mono
‚óè OP 177B 6" mono DP y OP 177B 6" color PN/DP
‚óè TP 177B 4" color PN/DP
‚óè TP 270 6"
‚óè TP 270 10"
‚óè OP 270 6"
‚óè OP 277 6"
‚óè OP 270 10"
‚óè TP 277 6"
‚óè MP 177 6" Touch
‚óè MP 270 6" Touch
‚óè MP 270 10" Key y MP 270 10" Touch
‚óè MP 277 8" Key V1 y V2, MP 277 8" Touch V1 y V2
‚óè MP 277 10" Key V1 y V2, MP 277 10" Touch V1 y V2
‚óè MP 370 12" Key y MP 370 12" Touch
‚óè MP 370 15" Touch
‚óè MP 377 12" Key y MP 377 12" Touch
‚óè MP 377 15" Touch y MP 377 15" Touch Daylight
‚óè MP 377 19" Touch
‚óè TP 012 Touch
‚óè PC-R Key
‚óè PC-R Touch y PC-R Key

50

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Cambio de panel de operador por el usuario
Si un proyecto tiene un panel de operador no soportado por WinCC en el TIA Portal y no existe
ning√∫n modelo posterior compatible, la migraci√≥n se cancelar√°. Si quiere migrar dicho
proyecto, debe cambiar Ud. mismo el panel de operador antes de la migraci√≥n a WinCC
flexible. Utilice para ello un panel de operador que soporten tanto WinCC flexible como WinCC.

Consulte tambi√©n
Paneles de operador soportados (WinCC flexible) (P√°gina 46)
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)

Cambio de configuraci√≥n despu√©s de cambiar de panel de operador (WinCC flexible)
Nota
Si se migra un proyecto con im√°genes incrustadas, el posible que el archivo de proyecto nuevo
sea m√°s grande que el antiguo.

Cambio de panel de operador mediante la migraci√≥n
Si la migraci√≥n realiza un cambio de panel de operador, sustituye el panel de operador
existente por un modelo posterior compatible. Los modelos posteriores est√°n m√°s
desarrollados y por ello son m√°s eficientes que sus modelos predecesores. Por ello, los
nuevos modelos soportan todas las propiedades de sus predecesores. Por esa raz√≥n es de
esperar que el cambio de panel de operador realice s√≥lo unos pocos ajustes en el proyecto.

Cambio de panel de operador por el usuario
Cuando cambie un panel de operador antes de la migraci√≥n, debe asegurarse de que el panel
de operador introducido soporta todas las propiedades que se usar√°n en el proyecto. Compile
el proyecto despu√©s del cambio de panel de operador en WinCC flexible. El proyecto debe
poder compilarse sin errores despu√©s de la migraci√≥n. A continuaci√≥n, migre el proyecto a
WinCC.

Consulte tambi√©n
Paneles de operador soportados (WinCC flexible) (P√°gina 46)

Compatibilidad de objetos en la migraci√≥n (WinCC flexible)
Introducci√≥n
Al migrar proyectos de WinCC flexible se migran tambi√©n todos los datos de configuraci√≥n que
contiene un panel de operador soportado por WinCC. B√°sicamente se migran √≠ntegramente
todos los tipos de objetos y todas las funciones que est√°n disponibles en el nuevo entorno del
proyecto y que pueden reproducirse.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

51

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Algunos tipos de objetos globales no se migran, p. ej. los diccionarios y librer√≠as globales.

Tipos de objetos soportados
La migraci√≥n soporta los siguientes tipos de objeto:
‚óè Animaciones
Las animaciones desactivadas no se migran.
‚óè Configuraci√≥n de Audit
‚óè Informes de Audit
‚óè Planificador de tareas
‚óè Administraci√≥n de usuarios
‚óè Puntero de √°rea
‚óè Faceplates
‚óè Im√°genes
‚óè Plantilla
‚óè Tipos de datos
‚óè Listas de funciones
‚óè Listas de gr√°ficos
‚óè Objetos de manejo y visualizaci√≥n
La migraci√≥n soporta todos los objetos de manejo y visualizaci√≥n que est√°n disponibles en
los paneles de operador soportados.
‚óè Avisos
‚óè Categor√≠as
‚óè Grupos de avisos
‚óè Librer√≠a del proyecto
‚óè Idiomas del proyecto
‚óè Informes
‚óè Recetas
‚óè Idiomas de runtime
‚óè Fuentes de runtime
‚óè Sm@rtAccess/Sm@rtService
‚óè Estructuras
‚óè Eventos de sistema
‚óè Funciones de sistema
‚óè Textos
‚óè Listas de textos
‚óè Variables

52

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
‚óè Conexiones
‚óè Rangos efectivos
‚óè Zonas
‚óè Ciclos

Tipos de objetos no soportados
La migraci√≥n no soporta los siguientes tipos de objetos y funcionalidades:
‚óè librer√≠as globales
‚óè diccionarios
‚óè versiones de proyecto
‚óè informe de cambios

Representaci√≥n de la navegaci√≥n de im√°genes
WinCC no soporta la navegaci√≥n de im√°genes de WinCC flexible. Los datos de la jerarqu√≠a de
im√°genes de WinCC flexible no se migran. Para representar la funcionalidad de una
navegaci√≥n en im√°genes de WinCC flexible, los botones de navegaci√≥n se migran a los
botones disponibles en WinCC. Las funciones de sistema migradas a la funci√≥n de sistema
"ActivarImagen" se migran al evento "Hacer clic" del bot√≥n respectivo. Las siguientes
funciones de sistema utilizadas en WinCC flexible para la navegaci√≥n de im√°genes no est√°n
disponibles en WinCC:
‚óè ActivarImagenInicial
‚óè ActivarImagenIzquierda
‚óè ActivarImagenDerecha
‚óè ActivarImagenSuperior
‚óè ActivarPrimeraImagenSubordinada
Dichas funciones de sistema se migrar√°n a la funci√≥n de sistema "ActivarImagen". El
par√°metro "Nombre de imagen" se encuentra en los datos de la jerarqu√≠a de im√°genes. Si se
llama desde una imagen alguna de las funciones de sistema nombradas que no est√° contenida
en la jerarqu√≠a de im√°genes, se genera la funci√≥n de sistema "Activar Imagen" sin par√°metro.
En esta funci√≥n de sistema se debe configurar la imagen deseada despu√©s de la migraci√≥n.

Orden de tabulaci√≥n en im√°genes con faceplates
En las im√°genes con faceplates, el orden de tabulaci√≥n se modifica debido a la migraci√≥n tanto
en la imagen como en el faceplate.

Migraci√≥n de la plantilla de imagen
En WinCC dispone de un concepto avanzado para trabajar con plantillas de imagen. En
WinCC dispone de una imagen general y varias plantillas para cada dispositivo. Al migrar una
plantilla desde WinCC flexible, los objetos incluidos y las propiedades configuradas en la
plantilla son migradas al concepto avanzado de plantillas de imagen de WinCC.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

53

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Los objetos siguientes se migran a la "imagen general" de WinCC:
‚óè Ventana de avisos
‚óè Indicador de avisos
‚óè Indicador de ayuda
‚óè Teclas de funci√≥n de paneles de operador con teclas de funci√≥n
Todos los dem√°s objetos y propiedades se migran a una plantilla de WinCC.
La conexi√≥n de los objetos y propiedades con la plantilla correspondiente es adaptada
autom√°ticamente por la migraci√≥n.

Consulte tambi√©n
Paneles de operador soportados (WinCC flexible) (P√°gina 46)
Migraci√≥n (WinCC flexible) (P√°gina 40)
Cambios de valor en las propiedades de objeto a trav√©s de la migraci√≥n (WinCC flexible)
(P√°gina 54)

Cambios de valor en las propiedades de objeto a trav√©s de la migraci√≥n (WinCC flexible)
Introducci√≥n
Debido a la unificaci√≥n de propiedades de objeto de WinCC V7 y WinCC flexible, en el
transcurso de la migraci√≥n puede resultar necesario introducir cambios en algunas
propiedades de objeto. La migraci√≥n calcula los cambios de manera que la representaci√≥n de
los objetos tras la migraci√≥n sea igual que antes de ella. Estos cambios durante la migraci√≥n
dan lugar a diferentes unidades de medida y valores para algunas propiedades de objeto en
la configuraci√≥n.

Migraci√≥n de los ajustes de escritura de un objeto
En WinCC V7 y WinCC flexible, para especificar el tama√±o de la fuente utilizada en un objeto
se usa la unidad de medida "punto". En WinCC, para especificar el tama√±o de las fuentes
utilizadas en un objeto se usa la unidad de medida "p√≠xel". En la migraci√≥n se calcula el tama√±o
de fuente consecuentemente para que la representaci√≥n de la fuente con un nivel de zoom del
100% tenga el mismo tama√±o. A causa de las unidades de medida difieren, los valores
num√©ricos de los tama√±os de las fuentes cambian tras la migraci√≥n.
Ejemplo:

54

Fuente antes de la migraci√≥n

Fuente tras la migraci√≥n

Arial 10 puntos

Arial 13 p√≠xeles

Arial 16 puntos

Arial 21 p√≠xeles

Tahoma 10 puntos

Tahoma 13 p√≠xeles

Tahoma 16 puntos

Tahoma 21 p√≠xeles

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de m√°rgenes de objeto
En WinCC flexible, durante la configuraci√≥n de la representaci√≥n, algunos objetos permiten
introducir valores <0 y >127 para situar los m√°rgenes de objeto. En WinCC, el rango de valores
para los bordes de objeto est√° restringido a valores entre 0 y 127. La migraci√≥n cambia los
valores < 0 al valor "0" y los valores > 127 al valor "127".

Consulte tambi√©n
Compatibilidad de objetos en la migraci√≥n (WinCC flexible) (P√°gina 51)

Conexiones (WinCC flexible)
Migraci√≥n de conexiones (WinCC flexible)
Introducci√≥n
Cuando migre un proyecto en el que se utilice un driver de comunicaci√≥n soportado, este
controlador se continuar√° utilizando en WinCC. Los objetos que se comunican a trav√©s de este
controlador se migran 1:1. No se requieren ajustes.
WinCC no soporta todos los drivers de comunicaci√≥n disponibles en WinCC flexible. Si en el
proyecto que hay que migrar se utiliza un controlador no soportado, hay 2 posibles escenarios:
1. Hay un controlador de reemplazo compatible para el controlador utilizado.
2. No hay ning√∫n controlador de reemplazo compatible para el controlador utilizado.

Hay controlador de reemplazo compatible.
Si hay un controlador disponible en WinCC que direcciona el controlador utilizado o un
controlador compatible, la migraci√≥n no sustituye el controlador autom√°ticamente.
Cuando se reemplaza el controlador utilizado, se recibe un correspondiente aviso de
advertencia.
En ese caso, compruebe despu√©s de la migraci√≥n con ayuda del informe de migraci√≥n si todas
las variables externas y punteros de √°rea son v√°lidos.
Cuando se reemplaza el controlador utilizado, los par√°metros de conexi√≥n vuelven a los
valores est√°ndar. El tipo de CPU se adapta en funci√≥n del controlador. Las propiedades de las
variables conectadas y de los punteros de √°rea no se modifican.

No hay controlador de reemplazo compatible.
Si no hay ning√∫n controlador disponible en WinCC que direccione el controlador utilizado o un
controlador compatible, la conexi√≥n configurada no se migra. Todas las variables externas que
estaban conectadas mediante este controlador se convertir√°n en variables internas. Las
propiedades de las variables externas se pierden durante la conversi√≥n, p. ej., la direcci√≥n en
el controlador. Todos los cambios de las variables se registran en el informe de migraci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

55

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Despu√©s de migrar y de configurar una nueva conexi√≥n, debe volver a conectar las variables
con el controlador.
Si no se migra el controlador, recibir√° un correspondiente aviso de advertencia.

Conversi√≥n del driver de comunicaci√≥n
Las siguientes tablas muestran la representaci√≥n del driver de comunicaci√≥n de
WinCC flexible en WinCC.

Drivers de comunicaci√≥n soportados
WinCC flexible

WinCC

Allen Bradley DF1

Allen Bradley DF1

Mitsubishi FX

Mitsubishi FX

Modicon MODBUS

Modicon MODBUS RTU

Modicon MODBUS TCP/IP

Modicon MODBUS TCP/IP

Omron Hostlink/Multilink

Omron HostLink

OPC

OPC

SIMATIC HMI HTTP Protocol

SIMATIC HMI HTTP Protocol

SIMATIC S7 200

SIMATIC S7 200

SIMATIC S7 300/400

SIMATIC S7 300/400

Drivers de comunicaci√≥n compatibles
WinCC flexible

WinCC

Allen Bradley DH485

Allen Bradley DF1

Allen Bradley E/IP C.Logix

Allen Bradley EtherNet/IP

Mitsubishi Protocol 4

Mitsubishi MC TCP/IP 1)

1) Si utiliza un controlador FX2N, despu√©s de la migraci√≥n deber√° ajustar el driver de comunicaci√≥n
Mitsubishi FX.

Drivers de comunicaci√≥n no soportados

56

WinCC flexible

WinCC

GE Fanuc SNP

no soportado

ISAC

no soportado

LG GLOFA-GM

no soportado

SIMATIC 500/505 DP

no soportado

SIMATIC 500/505 serie

no soportado

SIMATIC S5 AS511

no soportado

SIMATIC S5 DP

no soportado

Telemecanique Uni-Telway

no soportado

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Paneles de operador soportados (WinCC flexible) (P√°gina 46)
Adaptar la configuraci√≥n en caso de conexi√≥n no migrada (WinCC flexible) (P√°gina 57)
Migraci√≥n de punteros de √°rea (WinCC flexible) (P√°gina 58)
Migraci√≥n de variables (WinCC flexible) (P√°gina 58)

Adaptar la configuraci√≥n en caso de conexi√≥n no migrada (WinCC flexible)
Introducci√≥n
Si una conexi√≥n no se migra, tiene las siguientes posibilidades:
‚óè modificar la configuraci√≥n en WinCC flexible antes de la migraci√≥n.
‚óè modificar la configuraci√≥n despu√©s de la migraci√≥n

Modificar una conexi√≥n antes de la migraci√≥n
Cuando la migraci√≥n no soporte el driver de comunicaci√≥n seleccionado para la conexi√≥n,
debe seleccionar un controlador soportado por la migraci√≥n. Asimismo, el panel de operador
debe soportar el driver de comunicaci√≥n seleccionado.
Si no hubiera ning√∫n controlador adecuado disponible para el panel de operador utilizado, se
debe utilizar un panel de operador adecuado. A continuaci√≥n, adapte la configuraci√≥n a WinCC
flexible y compile de nuevo el proyecto. Migre el proyecto despu√©s de haberlo adaptado y
compilado satisfactoriamente. Entonces, la conexi√≥n se migrar√° satisfactoriamente.

Modificar una conexi√≥n despu√©s de la migraci√≥n
Cuando migre un proyecto de WinCC flexible en el que no se migre la conexi√≥n, las variables
externas de dicha conexi√≥n se representan en variables internas. En el informe de migraci√≥n
encontrar√° la entrada correspondiente a cada variable afectada.
Despu√©s de la migraci√≥n se debe configurar una nueva conexi√≥n. Para dicha conexi√≥n,
seleccione un driver de comunicaci√≥n que soporte el panel de operador utilizado. Si no hubiera
ning√∫n controlador adecuado disponible para el panel de operador utilizado, se debe utilizar un
panel de operador adecuado.
Cuando haya configurado la nueva conexi√≥n, deber√° conectar de nuevo las variables que la
migraci√≥n haya representado en variables internas. Para simplificar la reconfiguraci√≥n, abra el
informe de migraci√≥n. Configure las variables seg√∫n la entrada correspondiente del informe.
Si en el proyecto hab√≠a punteros de √°rea, deber√° reconfigurarlos igualmente. En el informe de
migraci√≥n encontrar√° tambi√©n las entradas respectivas de los punteros de √°rea.
Encontrar√° m√°s informaci√≥n sobre el informe de migraci√≥n en el cap√≠tulo Migrar proyectos de
WinCC flexible (WinCC flexible) (P√°gina 43).

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

57

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Migraci√≥n de conexiones (WinCC flexible) (P√°gina 55)
Migrar proyectos de WinCC flexible (WinCC flexible) (P√°gina 43)

Migraci√≥n de punteros de √°rea (WinCC flexible)
Introducci√≥n
La migraci√≥n del puntero de √°rea depende del driver de comunicaci√≥n.
‚óè Si la migraci√≥n soporta el driver de comunicaci√≥n utilizado, la migraci√≥n adopta los punteros
de √°rea de WinCC sin modificarlos.
‚óè Si la migraci√≥n no soporta el driver de comunicaci√≥n utilizado, los punteros de √°rea no se
migran.

Migraci√≥n de los punteros de √°rea
Si se migra completamente la conexi√≥n que utilizan los punteros de √°rea, √©stos tambi√©n se
migran completamente. Los par√°metros de los punteros de √°rea se adoptan sin modificar.
Si reemplaza el driver de comunicaci√≥n de la conexi√≥n de la migraci√≥n, despu√©s de la
migraci√≥n compruebe que los par√°metros del puntero de √°rea sigan siendo v√°lidos.
Si no se migra la conexi√≥n que utilizan los punteros de √°rea, √©stos tampoco se migran.
Encontrar√° m√°s informaci√≥n al respecto en el cap√≠tulo Adaptar la configuraci√≥n en caso de
conexi√≥n no migrada (WinCC flexible) (P√°gina 57).

Consulte tambi√©n
Migraci√≥n de conexiones (WinCC flexible) (P√°gina 55)
Adaptar la configuraci√≥n en caso de conexi√≥n no migrada (WinCC flexible) (P√°gina 57)

Migraci√≥n de variables (WinCC flexible)
Introducci√≥n
Al migrar variables deben tenerse en cuenta ciertas particularidades. Deben diferenciarse los
siguientes aspectos:
‚óè migraci√≥n de los tipos de datos de variables
‚óè migraci√≥n de variables internas
‚óè migraci√≥n de variables externas
‚óè nombres de variables
‚óè Valores l√≠mite de variables

58

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos
WinCC dispone en parte de otros tipos de datos y utiliza otros nombres para los tipos de datos
que WinCC flexible. Al migrar una variable con estas caracter√≠sticas, el tipo de datos de WinCC
flexible se reproduce en el tipo de datos correspondiente en WinCC. Encontrar√° m√°s
informaci√≥n al respecto en el cap√≠tulo Migraci√≥n de los tipos de datos (WinCC flexible)
(P√°gina 76).

Migraci√≥n de variables internas
Las variables internas siempre deben migrarse completamente. √önicamente los nombres de
los tipos de datos y de las variables pueden cambiar con la migraci√≥n.

Migraci√≥n de variables externas
Si se migra la conexi√≥n que utilizan las variables externas, √©stas tambi√©n se migran. La
migraci√≥n de variables externas depende de si la migraci√≥n soporta el driver de comunicaci√≥n
utilizado. Encontrar√° m√°s informaci√≥n al respecto en el cap√≠tulo Migraci√≥n de conexiones
(WinCC flexible) (P√°gina 55).
Si no se migra la conexi√≥n que utilizan las variables externas, √©stas tampoco se migran. Las
variables externas se representan en variables internas. Debe configurar una nueva conexi√≥n
una vez realizada la migraci√≥n y volver a conectar las variables con las variables del
controlador.

Migraci√≥n de los nombres de variables
Las variables que en WinCC flexible se guardan en carpetas distintas pueden tener el mismo
nombre. En WinCC, el nombre de las variables debe ser un√≠voco en todo el panel de operador
configurado. Por ello, en la migraci√≥n se cambia el nombre de las variables de carpetas
distintas que tienen el mismo nombre. Encontrar√° m√°s informaci√≥n al respecto en el
cap√≠tulo Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41).

Consulte tambi√©n
Migraci√≥n de conexiones (WinCC flexible) (P√°gina 55)
Migraci√≥n (WinCC flexible) (P√°gina 40)
Migraci√≥n de categor√≠as y grupos de avisos (WinCC flexible) (P√°gina 60)
Migraci√≥n de scripts (WinCC flexible) (P√°gina 63)
Migraci√≥n de contenidos espec√≠ficos del idioma (WinCC flexible) (P√°gina 65)
Migraci√≥n de librer√≠as (WinCC flexible) (P√°gina 67)
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)

Migraci√≥n de estructuras (WinCC flexible)
En WinCC no se soporta el tipo de datos "StringChar" en los tipos de datos de usuario HMI.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

59

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Si se ha utilizado este tipo de datos en la estructura de un proyecto de WinCC flexible, durante
la migraci√≥n se generar√° un elemento no v√°lido en el tipo de datos de usuario HMI.
Tras la migraci√≥n es necesario adaptar el tipo de datos de usuario en WinCC y habilitarlo.
Compruebe tambi√©n los offsets de los elementos siguientes y las posibles interconexiones
existentes entre un faceplate y los elementos del tipo de datos de usuario. Adapte los
elementos si es necesario.

Migraci√≥n de ficheros
Ubicaci√≥n de los ficheros
En WinCC flexible exist√≠a la posibilidad de utilizar como ubicaci√≥n de un fichero una base de
datos que se configura autom√°ticamente en la instalaci√≥n de WinCC flexible. (Ajuste "Origen
de los datos definido por el sistema"). Esta posibilidad no est√° disponible en WinCC.
Si ha utilizado este ajuste en el proyecto WinCC flexible, el ajuste cambiar√° en la migraci√≥n a
"Nombre definido por el usuario para el origen de los datos". Para poder utilizar la archivaci√≥n
en una base de datos, se debe configurar un origen de datos ODBC en el panel de control de
Windows y configurar el nombre all√≠ indicado del origen de los datos del usuario como "Nombre
del origen de los datos" en el fichero de WinCC.

Migraci√≥n de categor√≠as y grupos de avisos (WinCC flexible)
Cambio de nombre de las categor√≠as
A diferencia de WinCC flexible, los nombres de las categor√≠as predefinidas no dependen del
idioma de interfaz actualmente utilizado. En la migraci√≥n, los nombres de las categor√≠as se
asignan del modo siguiente:
WinCC flexible

WinCC

Errores

Alarms

Sistema

System

Advertencias

Events

Despu√©s de la migraci√≥n es posible cambiar los nombres de las categor√≠as a discreci√≥n.

Migraci√≥n de grupos de avisos
En la migraci√≥n s√≥lo se migran los grupos de avisos realmente utilizados.
Los grupos de avisos con una ID de 1-31 se migran 1:1.
En WinCC, el sistema crea un grupo de avisos por categor√≠a. A estos grupos de avisos creados
por el sistema se les asignan IDs a partir del n√∫mero 32 y se incrementan correlativamente. Las
4 categor√≠as predefinidas que existen en todo proyecto de WinCC ocupan autom√°ticamente
las ID 32-35 con sus grupos de avisos. Para cada categor√≠a definida por el usuario se crea un
grupo de avisos adicional al que se asigna una ID adicional. Por consiguiente, en los grupos
de avisos con IDs > 31 puede cambiar la ID despu√©s de la migraci√≥n. Asimismo cambia la
asignaci√≥n existente entre nombres de grupos de avisos e IDs.

60

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Ejemplo:
En el ejemplo puede observarse la asignaci√≥n de IDs en WinCC por la migraci√≥n.
Grupos de avisos

ID en WinCC flexible

ID en WinCC

Grupo de avisos 1-16

1-16

1-16

Reservadas para grupos de avisos de avi‚Äê
sos de sistema

Grupo de avisos 17-31

17-31

17-31

Grupos de avisos definidos por el usuario

32-35

Reservadas en WinCC para los grupos de
avisos de las categor√≠as predefinidas.

Grupo de avisos 32

32

36

Asignaci√≥n de ID y grupo de avisos modifi‚Äê
cada en WinCC

Grupo de avisos 33

33

37

Asignaci√≥n de ID y grupo de avisos modifi‚Äê
cada en WinCC

Tenga tambi√©n en cuenta lo siguiente:
Al migrar grupos de avisos que en apariencia tienen el mismo nombre, la migraci√≥n adapta los
nombres. Esto ocurre cuando el nombre de un grupo contiene, p. ej., un espacio al final del
nombre. La migraci√≥n borra todos los espacios existentes al final del nombre. Si 2 grupos
reciben el mismo nombre tras el proceso de borrado, la migraci√≥n ampl√≠a el nombre de los
siguientes grupos de avisos con el sufijo "#Mign", siendo "n" un n√∫mero correlativo.
Ejemplo:
En WinCC flexible existen los siguientes grupos de avisos:
"AlarmGroup_18"
"AlarmGroup_18 " - el nombre del grupo contiene 1 espacio
"AlarmGroup_18 " - el nombre del grupo contiene 2 espacios
El grupo de avisos "AlarmGroup_18" es el grupo con el n√∫mero m√°s alto.
Resultado despu√©s de la migraci√≥n:
"AlarmGroup_18"
"AlarmGroup_18#Mig1"
"AlarmGroup_18#Mig1.1"

Cambio de nombre de las categor√≠as
A diferencia de WinCC flexible, los nombres de las categor√≠as predefinidas no dependen del
idioma de interfaz actualmente utilizado. En la migraci√≥n, los nombres de las categor√≠as se
asignan del modo siguiente:
WinCC flexible

WinCC

Errores

Errors

Sistema

System

Advertencias

Warnings

Despu√©s de la migraci√≥n es posible cambiar los nombres de las categor√≠as a discreci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

61

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Visualizaci√≥n de avisos ALARM_S y avisos SIMATIC SFM
En WinCC flexible es posible activar los discriminadores de avisos ALARM_S en proyectos
integrados. La visualizaci√≥n de avisos SIMATIC SFM se activa en WinCC flexible mediante un
ajuste separado. En WinCC no existe el ajuste separado para activar la visualizaci√≥n de avisos
SIMATIC SFM. Al igual que la visualizaci√≥n de avisos ALARM_S, la visualizaci√≥n de avisos
SIMATIC SFM se controla en WinCC exclusivamente activando el discriminador
correspondiente.
Como consecuencia del cambio de filosof√≠a, la visualizaci√≥n de los avisos puede cambiar tras
la migraci√≥n.
Si en el proyecto de WinCC flexible est√°n activados todos los discriminadores de avisos
ALARM_S y est√° desactivada la visualizaci√≥n de avisos SIMATIC SFM, tras la migraci√≥n se
visualizar√°n avisos ALARM_S y avisos SIMATIC SFM.
Para que despu√©s de la migraci√≥n se visualicen √∫nicamente avisos ALARM_S, despu√©s de la
migraci√≥n a STEP 7 es necesario asignar los avisos SIMATIC SFM a un discriminador no
utilizado. Luego deber√° desactivar este discriminador en WinCC.
Si en el proyecto de WinCC flexible est√°n desactivados todos los discriminadores de avisos
ALARM_S y est√° activada la visualizaci√≥n de avisos SIMATIC SFM, despu√©s de la migraci√≥n
no se visualizar√°n avisos ALARM_S ni avisos SIMATIC SFM.
Para que despu√©s de la migraci√≥n se visualicen √∫nicamente avisos SIMATIC SFM, despu√©s
de la migraci√≥n a STEP 7 es necesario asignar los avisos SIMATIC SFM a un discriminador no
utilizado. Luego deber√° activar este discriminador en WinCC.
El discriminador depende de los ajustes en STEP 7. El ajuste est√°ndar de los avisos
SIMATIC SFM en STEP 7 es el discriminador "0". Para activar la visualizaci√≥n en WinCC debe
activarse el discriminador "0".
Los discriminadores se activan en WinCC en la configuraci√≥n de runtime del panel de operador
en cuesti√≥n en la categor√≠a "Avisos".

62

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Migraci√≥n de variables (WinCC flexible) (P√°gina 58)

Migraci√≥n de scripts (WinCC flexible)
Introducci√≥n
La migraci√≥n soporta VB Scripts creados en WinCC flexible. Para emigrar satisfactoriamente
un VB Script, debe ser funcional ya en WinCC flexible.

Nota
Errores de script
La forma m√°s r√°pida de encontrar los errores de script disponibles durante la primera prueba
de funcionamiento despu√©s de la migraci√≥n es mediante un Script Debugger instalado y el uso
de un control de diagn√≥stico.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

63

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de un VB Script
Un script se analiza en la migraci√≥n y en caso necesario, WinCC lo adapta al comportamiento
del sistema. Se adapta lo siguiente:
‚óè Las funciones de sistema cuyos nombres se han modificado se renombran.
Afecta a las siguientes funciones de sistema:
Nombre de la funci√≥n en WinCC flexible

Nombre de la funci√≥n en WinCC

IncreaseValue

IncreaseTag

DecreaseValue

DecreaseTag

SetBrightness

SetAndGetBrightness

SetValue

SetTag

‚óè WinCC adapta el acceso a variables como los par√°metros de funciones de sistema al
comportamiento del sistema. Los scripts ya no se transforman en WinCC como en WinCC
flexible. Los scripts se ejecutan directamente como c√≥digo fuente. Por eso se aplican reglas
m√°s estrictas para la sintaxis de VB Script. La llamada de una variable siempre se migra con
comillas. Si se permiten varios tipos de par√°metros para una funci√≥n de sistema, dichos
valores se migran con la palabra clave "SmartTags".
Ejemplo 1:
al valor de la variable "temperature" hay que a√±adirle el valor de la variable "1".
Expresiones v√°lidas en WinCC flexible:
IncreaseValue temperature, 1
IncreaseValue "temperature", 1
IncreaseValue SmartTags("temperature"), 1
Expresi√≥n v√°lida en WinCC:
IncreaseTag "temperature", 1
Ejemplo 2:
se utiliza una funci√≥n de sistema en la que est√°n permitidos varios par√°metros. Al valor de
la variable "temperature" hay que a√±adirle el valor de la variable "heatcontrol".
Expresi√≥n v√°lida para WinCC flexible:
IncreaseValue "temperature", "heatcontrol"
Expresi√≥n v√°lida para WinCC:
IncreaseTag "temperature", SmartTags("heatcontrol")
‚óè Al utilizarlos en un script, √©ste tambi√©n renombra los objetos renombrados por la migraci√≥n.
Encontrar√° m√°s informaci√≥n sobre el cambio de nombres de objetos en el
cap√≠tulo Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41). Al realizar un
cambio de nombre debe tenerse en cuenta lo siguiente:
Si accede con un script a objetos cuyos nombres son generados din√°micamente por √©ste,
los nombres de objeto que figuran en el script no pueden ser adaptados autom√°ticamente
por la migraci√≥n. En tal caso deber√° corregir la generaci√≥n de nombres de objeto en el script
despu√©s de la migraci√≥n.

Consulte tambi√©n
Migraci√≥n de variables (WinCC flexible) (P√°gina 58)
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)

64

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de contenidos espec√≠ficos del idioma (WinCC flexible)
Introducci√≥n
WinCC ofrece las mismas posibilidades que WinCC flexible en lo relativo a la configuraci√≥n en
distintos idiomas. Al migrar un proyecto se migran tambi√©n todos los idiomas soportados por
WinCC.

Migraci√≥n de contenidos espec√≠ficos del idioma
Al migrar un proyecto se migran tambi√©n los siguientes contenidos espec√≠ficos del idioma:
‚óè Idiomas del proyecto
‚óè Textos del proyecto
‚óè Fuentes para la representaci√≥n en runtime
‚óè Gr√°ficos espec√≠ficos del idioma
Al migrar contenidos espec√≠ficos del idioma debe tenerse en cuenta lo siguiente:
‚óè El sistema operativo del PC utilizado para la migraci√≥n debe soportar los idiomas utilizados
en el proyecto.
‚óè En el PC utilizado para la migraci√≥n deben estar instaladas las fuentes que se utilizan para
la representaci√≥n en runtime.
‚óè La migraci√≥n no soporta diccionarios.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

65

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Idioma de edici√≥n de proyectos integrados despu√©s de la migraci√≥n
Al migrar un proyecto integrado, las partes del proyecto que se van a migrar de STEP 7 y
WinCC flexible ya vienen con sus respectivos ajustes del idioma de edici√≥n. En WinCC ahora
ya s√≥lo existe un idioma de edici√≥n para todas las partes del proyecto. La migraci√≥n activa para
el proyecto migrado el idioma de edici√≥n que estaba activado en STEP 7 antes de la migraci√≥n.
Si este ajuste no coincide con el ajuste de WinCC flexible, los textos configurados ya no podr√°n
verse en WinCC. En el lugar de uso de los textos no aparece ning√∫n texto o solo se muestra
la entrada "Text". Para poder visualizar los textos, es preciso cambiar el idioma de edici√≥n.
Haga clic en el margen derecho del TIA Portal en la Task Card "Tareas" y seleccione en el √°rea
"Idiomas y recursos" el idioma de edici√≥n correcto.

Idiomas no soportados
La migraci√≥n de contenidos espec√≠ficos del idioma depende de si WinCC soporta el idioma
respectivo.
Si un proyecto s√≥lo contiene idiomas no soportados por WinCC, este no podr√° migrarse.
Si un proyecto contiene idiomas tanto soportados como no soportados, √∫nicamente se
migrar√°n los idiomas soportados. A los idiomas de edici√≥n y de referencia se les asigna un
idioma soportado.

66

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
WinCC no soporta los siguientes idiomas:
‚óè √Årabe
‚óè Hebreo
‚óè Dhivehi
‚óè Guyarat√≠
‚óè Canar√©s
‚óè Tamil
‚óè Telug√∫
‚óè Urd√∫
‚óè Panyab√≠
‚óè Persa
‚óè Sirio

Consulte tambi√©n
Migraci√≥n de variables (WinCC flexible) (P√°gina 58)

Migraci√≥n de librer√≠as (WinCC flexible)
Introducci√≥n
Al migrar librer√≠as debe hacerse la siguiente distinci√≥n:
1. Migraci√≥n de la librer√≠a del proyecto
2. Migraci√≥n de una librer√≠a global

Migraci√≥n de la librer√≠a del proyecto
La librer√≠a y los datos del proyecto se guardan conjuntamente en el archivo del proyecto. Por
ello, una librer√≠a de proyecto migra con las mismas limitaciones que los datos de proyecto.

Migraci√≥n de una librer√≠a global
La migraci√≥n no soporta librer√≠as globales. No obstante, s√≠ se migran los objetos de librer√≠a
utilizados en el proyecto. Los objetos de librer√≠a se copian en el proyecto al utilizarse y luego
ya no tienen ninguna conexi√≥n con la librer√≠a.
Para poder migrar una librer√≠a global, los objetos que contiene deben copiarse o desplazarse
a la librer√≠a del proyecto. Durante la migraci√≥n se migran tambi√©n los objetos. En WinCC
desplace los objetos migrados a una nueva librer√≠a global, que deber√° crearse previamente.
Es posible copiar o desplazar tanto objetos individuales como categor√≠as completas de la
librer√≠a.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

67

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Migraci√≥n de variables (WinCC flexible) (P√°gina 58)

2.8.1.3

Migrar datos runtime (WinCC flexible)

Migraci√≥n de datos runtime (WinCC flexible)
Introducci√≥n
Al migrar un proyecto √∫nicamente se migran los datos de configuraci√≥n. La migraci√≥n no tiene
efecto en los datos runtime. Los datos runtime deben actualizarse despu√©s de la migraci√≥n.
Los datos runtime est√°n compuestos del siguiente modo:
‚óè Proyecto runtime
El proyecto runtime contiene los datos compilados del proyecto.
‚óè Datos de recetas y la administraci√≥n de usuarios
Los datos de recetas y la administraci√≥n de usuarios son datos que se pueden modificar en
runtime.
‚óè Datos de fichero
Los datos de los ficheros de variables y de avisos se registran y archivan en runtime.

Migraci√≥n de datos de receta y administraci√≥n de usuarios
Si los datos de recetas y la administraci√≥n de usuarios han sido modificados en runtime, debe
hacerse una copia de seguridad desde el panel de operador antes de cargar el proyecto
migrado.
Tiene diferentes posibilidades para crear una copia de seguridad de los datos arriba
mencionados en funci√≥n del panel de operador que utilice.
Si el panel de operador soporta medios de almacenamiento externos y los datos de receta
est√°n guardados all√≠, dichos datos permanecer√°n en el medio de almacenamiento. Medios de
almacenamiento externo son, p. ej., una Storage Card o una unidad de disco. Los datos se
vuelven a utilizar despu√©s de la migraci√≥n. La administraci√≥n de usuarios no se guarda en un
medio de almacenamiento externo. Por eso debe hacer una copia de seguridad de dichos
datos, p. ej. con ProSave.
Si los datos de receta est√°n guardados en la memoria interna del panel de operador, haga una
copia de seguridad de dichos datos en un medio de almacenamiento externo. Para asegurar
los datos de receta se utiliza ProSave. Si ya ha configurado en su proyecto las respectivas
funciones de sistema, util√≠celas. Las siguientes funciones de sistema est√°n disponibles para
los datos de receta:
‚óè "ExportarRegistros" para la copia de seguridad
‚óè "ImportarRegistros" para la restauraci√≥n
El proyecto runtime se actualiza compilando nuevamente el proyecto en WinCC y carg√°ndolo
luego en el panel de operador.

68

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Despu√©s de cargar el proyecto migrado al panel de operador, vuelva a transferir los datos de
receta y la administraci√≥n de usuarios al panel de operador.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Hacer una copia de seguridad de los datos de receta y de la administraci√≥n de usuarios
(WinCC flexible) (P√°gina 69)
Restaurar los datos de receta y la administraci√≥n de usuarios (WinCC flexible) (P√°gina 70)
Hacer una copia de seguridad de los datos de fichero (WinCC flexible) (P√°gina 71)

Hacer una copia de seguridad de los datos de receta y de la administraci√≥n de usuarios (WinCC flexible)
Introducci√≥n
Para poder seguir utilizando los datos de recetas y la administraci√≥n de usuarios en un
proyecto migrado, primero hay que realizar una copia de seguridad de los datos del panel de
operador. A continuaci√≥n, cargue los datos en el proyecto de WinCC migrado. Para crear una
copia de seguridad de los datos utilice ProSave.

Requisitos
‚óè El proyecto de WinCC flexible se est√° ejecutando en el panel de operador en runtime.
‚óè El panel de operador est√° conectado con el PC en que est√° instalado ProSave.

Procedimiento
Para crear una copia de seguridad de los datos de recetas y de la administraci√≥n de usuarios,
proceda del siguiente modo:
1. Inicie ProSave.
2. Seleccione el tipo de panel de operador y los par√°metros de conexi√≥n en la ficha "General".
3. Vaya a la ficha "Backup".
4. Seleccione la entrada "Recetas de la memoria del equipo" en el campo "Clase de datos".
No elija "Backup completo" para que al restaurar los datos de recetas pueda seleccionarlos
individualmente.
5. En el campo "Guardar como" navegue hasta la ubicaci√≥n deseada y haga clic en el bot√≥n
"Inicio de Backup".
Se crea una copia de seguridad de los datos de recetas.
6. Seleccione la entrada "Administraci√≥n de usuarios" en el campo "Clase de datos" y haga
clic en el bot√≥n "Inicio de Backup".
Se crea una copia de seguridad de la administraci√≥n de usuarios.
Para obtener informaci√≥n detallada al respecto, consulte la ayuda en pantalla de ProSave.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

69

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Procedimiento alternativo
ProSave se instala junto con WinCC flexible de forma est√°ndar. En el PC de configuraci√≥n se
dispone en WinCC flexible de toda la gama de funciones de ProSave con el comando
"Proyecto > Transferencia".
Como alternativa se puede crear una copia de seguridad de los datos de recetas y de la
administraci√≥n de usuarios con el software ProSave, que est√° integrado en WinCC flexible.
Inicie WinCC flexible y elija el comando de men√∫ "Proyecto > Transferencia > Copia de
seguridad". Haga una copia de seguridad de los datos de recetas y la administraci√≥n de
usuarios conforme a lo descrito en los pasos 4-6.

Consulte tambi√©n
Migraci√≥n de datos runtime (WinCC flexible) (P√°gina 68)

Restaurar los datos de receta y la administraci√≥n de usuarios (WinCC flexible)
Introducci√≥n
Para volver a utilizar la copia de seguridad de los datos de recetas y de la administraci√≥n de
usuarios despu√©s de la migraci√≥n, primero se debe compilar el proyecto migrado y luego se
debe cargar en el panel de operador. A continuaci√≥n, transfiera la copia de seguridad de los
datos al panel de operador. Para restaurar los datos utilice ProSave.

Requisitos
‚óè El proyecto migrado ha sido transferido al panel de operador y se est√° ejecutando en
runtime.
‚óè El panel de operador est√° conectado con el PC en que est√° instalado ProSave.

Procedimiento
Para cargar la copia de seguridad de los datos de recetas y de la administraci√≥n de usuarios
en el panel de operador, proceda del siguiente modo:
1. Inicie ProSave.
2. Seleccione el tipo de panel de operador y los par√°metros de conexi√≥n en la ficha "General".
3. Vaya a la ficha "Restore".
4. En el campo "Abrir..." navegue hasta la ubicaci√≥n de la copia de seguridad de los datos de
recetas y seleccione el archivo.
5. Haga clic en el bot√≥n "Iniciar Restore".
Los datos de recetas se transfieren al panel de operador.
6. Para restaurar la administraci√≥n de usuarios repita los pasos 4-5.
La administraci√≥n de usuarios se transfiere al panel de operador.
Para obtener informaci√≥n detallada al respecto, consulte la Ayuda en pantalla de ProSave.

70

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Procedimiento alternativo
ProSave se instala junto con WinCC de forma est√°ndar. En el PC de configuraci√≥n se dispone
en WinCC de toda la gama de funciones de ProSave con el comando "Proyecto >
Transferencia".
Como alternativa se pueden restaurar los datos de recetas y la administraci√≥n de usuarios con
el software ProSave, que est√° integrado en WinCC. Inicie WinCC y en la barra de men√∫s elija
el comando "Online > Mantenimiento de paneles de operador > Restaurar". Restaure los datos
de recetas y la administraci√≥n de usuarios conforme a o descrito en los pasos 4-6.

Consulte tambi√©n
Migraci√≥n de datos runtime (WinCC flexible) (P√°gina 68)

Hacer una copia de seguridad de los datos de fichero (WinCC flexible)
Introducci√≥n
Si el panel de operador soporta medios de almacenamiento externos y los datos de archivo
est√°n guardados en un medio de almacenamiento externo, dichos datos permanecer√°n en el
medio de almacenamiento. Medios de almacenamiento externo son, p. ej., una Storage Card
o una unidad de disco. Si un fichero est√° almacenado en un medio de almacenamiento
externo, el proyecto migrado tiene acceso a dicha ubicaci√≥n despu√©s de la migraci√≥n. En ese
caso, no debe haber copia de seguridad de los datos de fichero.

Hacer una copia de seguridad de los datos de fichero
Si quiere hacer una copia de seguridad externa de los datos de fichero, tiene las siguientes
posibilidades:
‚óè Copia de seguridad con las funciones de sistema "ArchivarArchivoDeInforme".
Si ya ha configurado la funci√≥n "ArchivarArchivoDeInforme" en un proyecto de WinCC
flexible, utilice dicha funci√≥n para hacer una copia de seguridad de los datos.
‚óè Copie los datos de fichero mediante copiar y pegar con el explorador de Windows a un
medio de almacenamiento externo o una unidad de disco.

Consulte tambi√©n
Migraci√≥n de datos runtime (WinCC flexible) (P√°gina 68)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

71

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

2.8.1.4

Migrar proyectos integrados (WinCC flexible)

Migraci√≥n de un proyecto integrado (WinCC flexible)
Introducci√≥n
Los controladores y paneles de operador contenidos en un proyecto integrado en STEP 7
est√°n conectados entre s√≠ por configuraci√≥n. Asimismo los datos de configuraci√≥n de WinCC
flexible y STEP 7 est√°n interconectados. Al migrar un proyecto integrado tambi√©n se migra
todo el proyecto con las partes correspondientes a WinCC flexible y STEP 7. Las conexiones
se conservan.

Nota
Antes de migrar un proyecto integrado, este proyecto debe compilarse y guardarse en WinCC
flexible. Una compilaci√≥n sin errores garantiza que los datos est√°n sincronizados en WinCC
flexible y en STEP 7.

Migraci√≥n de un proyecto integrado
Al migrar un proyecto integrado, para la parte correspondiente a WinCC flexible rigen las
mismas condiciones que para la migraci√≥n de un proyecto de WinCC flexible no integrado. Los
objetos y propiedades contenidas en la parte correspondiente a WinCC flexible deben ser
soportados por WinCC, p. ej. el panel de operador o el driver de comunicaci√≥n. En una
conexi√≥n proyectada debe estar activada la propiedad "Online". Una conexi√≥n que tenga la
propiedad "Online" desactivada no ser√° migrada.
Aparte de las condiciones que rigen para la parte correspondiente a WinCC flexible, rigen otras
condiciones para la parte correspondiente a STEP 7 del proyecto integrado. Los objetos y
propiedades incluidos en la parte correspondiente a STEP 7 V5.4 SP5 o V5.5 deben estar
soportados en STEP 7. Encontrar√° m√°s informaci√≥n al respecto en la documentaci√≥n de STEP
7.
Para poder migrar completamente y volver a procesar un proyecto integrado, en el PC utilizado
para la migraci√≥n deben estar instalados los siguientes componentes:
‚óè STEP 7 V5.4 SP5 o STEP 7 V5.5
‚óè WinCC flexible 2008 SP2 o WinCC flexible 2008 SP3 o WinCC flexible 2008 SP5
‚óè STEP 7
Si quiere guardar el proyecto √∫nicamente en formato de migraci√≥n, tiene a su disposici√≥n la
herramienta de migraci√≥n. Encontrar√° m√°s informaci√≥n al respecto en Principios b√°sicos de la
migraci√≥n (WinCC flexible) (P√°gina 41).
Un proyecto integrado siempre se migra completamente. Si √∫nicamente desea migrar el
proyecto de WinCC flexible all√≠ contenido, antes de la migraci√≥n deber√° separarlo del proyecto
de STEP 7. Para sacar el proyecto de la integraci√≥n, abra el proyecto en STEP 7 V5.4 SP5 o
V5.5. Abra el proyecto WinCC flexible en el SIMATIC Manager. El proyecto se abre con WinCC

72

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
flexible. Elija el comando "Proyecto > Copiar proyecto de STEP 7" en WinCC flexible. WinCC
flexible guarda una copia no integrada del proyecto.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Migrar un proyecto integrado (WinCC flexible) (P√°gina 73)
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)

Migrar un proyecto integrado (WinCC flexible)
Introducci√≥n
Al migrar un proyecto integrado se migran tanto las partes correspondientes al proyecto de
WinCC flexible como las correspondientes al proyecto de STEP 7. Por ello, para efectuar la
migraci√≥n debe elegirse el archivo de proyecto con la extensi√≥n "*.s7p". Durante la migraci√≥n
se copian los datos del proyecto existente y se migran a un nuevo proyecto. No es posible
migrar a un proyecto existente.
La migraci√≥n se puede llamar tanto desde la vista del portal como desde la vista del proyecto.
El proyecto deber√° migrarse √∫nicamente en un TIA Portal reci√©n abierto.
Si quiere guardar el proyecto √∫nicamente en formato de migraci√≥n, tiene a su disposici√≥n la
herramienta de migraci√≥n. Encontrar√° m√°s informaci√≥n en Principios b√°sicos de la migraci√≥n
(WinCC flexible).

Requisitos
‚óè STEP 7 V5.4 SP5 o STEP 7 V5.5 y todos los paquetes opcionales utilizados est√°n
instalados.
‚óè STEP 7 y todos los paquetes opcionales utilizados est√°n instalados.
‚óè El TIA Portal se ha reiniciado.
‚óè No debe haber ning√∫n proyecto abierto en WinCC.
‚óè Se ha creado un proyecto integrado.
‚óè El proyecto integrado no est√° abierto.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

73

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Procedimiento
Para migrar un proyecto integrado a la vista del portal proceda del siguiente modo:
1. Seleccione la acci√≥n "Inicio > Migrar proyecto".

2. En el campo "Ruta de origen" navegue hasta el proyecto que desea migrar.

3. Seleccione el archivo de proyecto "*.s7p".
4. En caso necesario, modifique los datos del proyecto que debe crearse. Cambie, p. ej., el
nombre o la ruta del proyecto. En el proyecto nuevo se crear√°n los datos que deben
migrarse.
5. Para migrar el proyecto con configuraci√≥n hardware, active "Incluir la configuraci√≥n
hardware".

74

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
6. Haga clic en "Migrar".
Se crear√° un proyecto nuevo y se iniciar√° la migraci√≥n de los datos:
‚Äì Se abre la vista del proyecto.
‚Äì El progreso de la migraci√≥n se indica en una ventana de migraci√≥n.
‚Äì En la ventana de inspecci√≥n bajo "Informaci√≥n > General" se muestran informaciones,
advertencias y errores correspondientes al proceso de migraci√≥n.
‚Äì Toda la informaci√≥n relacionada con la migraci√≥n se guarda en un archivo de informe.
‚Äì Una vez concluida la migraci√≥n, aparece un aviso. El aviso contiene un enlace mediante
el cual se puede abrir el archivo de informe.
7. Guarde el proyecto al finalizar la migraci√≥n.
Una vez concluida la migraci√≥n, en el √°rbol del proyecto encontrar√° un dispositivo nuevo para
cada panel de operador migrado y para cada controlador migrado. Estos dispositivos
contienen los datos migrados.
Nota
Proyectos integrados con visores de avisos
Al migrar el proyecto pueden desactivarse las categor√≠as en el visor de avisos. Despu√©s de la
migraci√≥n del proyecto, compruebe los ajustes en el visor de avisos. En caso necesario, active
las categor√≠as oportunas en la ventana de inspecci√≥n del visor de avisos, en "Propiedades >
General".

Abrir el informe de migraci√≥n en otro momento
El informe de migraci√≥n se guarda junto con el proyecto migrado. Puede ver el informe m√°s
adelante. El archivo de informe se abre del siguiente modo:
1. Abra "Datos comunes > Informes" en el √°rbol del proyecto.
2. Haga doble clic en el archivo de informe. Se abre el informe de migraci√≥n.

Consulte tambi√©n
Migraci√≥n de un proyecto integrado (WinCC flexible) (P√°gina 72)
Principios b√°sicos de la migraci√≥n (WinCC flexible) (P√°gina 41)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

75

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

2.8.1.5

Referencia (WinCC flexible)

Migraci√≥n de los tipos de datos (WinCC flexible)
Introducci√≥n
Con el fin de armonizar los tipos de datos utilizados por controladores y sistemas HMI, se
cambia el nombre de algunos tipos de datos de las variables HMI internas. Los nombres se
otorgan conforme a la IEC. Dado que s√≥lo cambian los nombres, en lo que respecta a las
variables internas la configuraci√≥n no sufre cambios.
La tabla siguiente describe la reproducci√≥n de los tipos de datos de WinCC flexible en los tipos
de datos de WinCC.

Migraci√≥n de los tipos de datos internos
Los tipos de datos internos se representan unos sobre otros durante la migraci√≥n, del siguiente
modo:
Tipos de datos internos de WinCC flexible

Tipos de datos internos de WinCC

Bool

Bool

Char

SInt

Byte

USInt

Int

Int

UInt

UInt

Long

DInt

ULong

UDInt

Float

Real

Double

LReal

String

WString

DateTime

DateTime

Migraci√≥n de los tipos de datos externos
En las siguientes p√°ginas encontrar√° c√≥mo se representan los tipos de datos de los drivers de
comunicaci√≥n disponibles.

Consulte tambi√©n
Migraci√≥n (WinCC flexible) (P√°gina 40)
Migraci√≥n de los tipos de datos de Allen-Bradley DF1 (WinCC flexible) (P√°gina 77)
Migraci√≥n de los tipos de datos de Allen-Bradley DH485 (WinCC flexible) (P√°gina 78)
Migraci√≥n de los tipos de datos de Allen-Bradley Ethernet IP (WinCC flexible) (P√°gina 78)
Migraci√≥n de los tipos de datos de GE Fanuc SNP (WinCC flexible) (P√°gina 79)
Migraci√≥n de los tipos de datos de LG GLOFA GM (WinCC flexible) (P√°gina 79)

76

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Migraci√≥n de los tipos de datos de Mitsubishi FX (WinCC flexible) (P√°gina 80)
Migraci√≥n de los tipos de datos de Modicon Modbus (WinCC flexible) (P√°gina 81)
Migraci√≥n de los tipos de datos de Modicon Modbus TCP/IP (WinCC flexible) (P√°gina 82)
Migraci√≥n de los tipos de datos de Omron Hostlink/Multilink (WinCC flexible) (P√°gina 82)
Migraci√≥n de los tipos de datos de OPC (WinCC flexible) (P√°gina 83)
Migraci√≥n de los tipos de datos de SIMATIC 500/505 DP (WinCC flexible) (P√°gina 83)
Migraci√≥n de los tipos de datos de SIMATIC 500/505 serie (WinCC flexible) (P√°gina 84)
Migraci√≥n de los tipos de datos de SIMATIC S5 AS511 (WinCC flexible) (P√°gina 85)
Migraci√≥n de los tipos de datos de SIMATIC S5 DP (WinCC flexible) (P√°gina 85)
Migraci√≥n de los tipos de datos de SIMATIC S7 200 (WinCC flexible) (P√°gina 86)
Migraci√≥n de los tipos de datos de SIMATIC S7 300/400 (WinCC flexible) (P√°gina 86)
Migraci√≥n de los tipos de datos de Telemecanique Uni-Telway (WinCC flexible) (P√°gina 90)
Migraci√≥n de los tipos de datos de Mitsubishi Protocol 4 (WinCC flexible) (P√°gina 80)
Migraci√≥n de los tipos de datos de SIMATIC HMI HTTP Protocol (WinCC flexible) (P√°gina 84)

Migraci√≥n de los tipos de datos de Allen-Bradley DF1 (WinCC flexible)
Migraci√≥n de los tipos de datos Allen-Bradley DF1
Los tipos de datos del driver de comunicaci√≥n Allen-Bradley DF1 se reproducen de la siguiente
manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

ASCII

ASCII

BCD4

UInt

BCD8

UDInt

Bit

Bool

Int

Int

Long

DInt

Real

Real

UInt

UInt

ULong

UDInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

77

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de Allen-Bradley DH485 (WinCC flexible)
Migraci√≥n de los tipos de datos Allen-Bradley DH485
WinCC no soporta el driver de comunicaci√≥n Allen-Bradley DH485 ; se reemplazar√° durante la
migraci√≥n por el controlador Allen-Bradley DF1. Los tipos de datos del driver de comunicaci√≥n
Allen-Bradley DH485 se reproducen de la siguiente manera en la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

ASCII

ASCII

Bit

Bool

Int

Int

Long

DInt

Real

Real

UInt

UInt

ULong

UDInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de Allen-Bradley Ethernet IP (WinCC flexible)
Migraci√≥n de los tipos de datos Allen-Bradley Ethernet IP
Los tipos de datos del driver de comunicaci√≥n Allen-Bradley Ethernet IP se reproducen de la
siguiente manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bool

Bool

DInt

DInt

Int

Int

Real

Real

SInt

SInt

String

String

UDInt

UDInt

UInt

UInt

USInt

USInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

78

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de GE Fanuc SNP (WinCC flexible)
Migraci√≥n de los tipos de datos GE Fanuc SNP
WinCC no soporta el driver de comunicaci√≥n GE Fanuc SNP ; los tipos de datos se reproducen
sobre los tipos de datos internos de WinCC. Los tipos de datos del driver de comunicaci√≥n GE
Fanuc SNP se reproducen de la siguiente manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

BCD4

UInt

BCD8

UDInt

Bit

Bool

Byte

USInt

DInt

DInt

Word

UInt

Int

Int

Real

Real

UInt

UInt

DWord

UDInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de LG GLOFA GM (WinCC flexible)
Migraci√≥n de los tipos de datos LG GLOFA GM
WinCC no soporta el driver de comunicaci√≥n LG GLOFA GM ; los tipos de datos se reproducen
sobre los tipos de datos internos de WinCC. Los tipos de datos del driver de comunicaci√≥n LG
GLOFA GM se reproducen de la siguiente manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bool

Bool

Byte

USInt

DInt

DInt

DWord

UDInt

Int

Int

SInt

SInt

String

WString

Time

UDInt

UDInt

UDInt

UInt

UInt

USInt

USInt

Word

UInt

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

79

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de Mitsubishi FX (WinCC flexible)
Migraci√≥n de los tipos de datos Mitsubishi FX
Los tipos de datos del driver de comunicaci√≥n Mitsubishi FX se reproducen de la siguiente
manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

12 Bit Block

12-Bit Block

16 Bit Block

16-Bit Block

20 Bit Block

20-Bit Block

24 Bit Block

24-Bit Block

28 Bit Block

28-Bit Block

32 Bit Block

32-Bit Block

4 Bit Block

4-Bit Block

8 Bit Block

8-Bit Block

Bit

Bool

Double

DWord

IEEE-Float

Real

String

String

Word

Word

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de Mitsubishi Protocol 4 (WinCC flexible)
Migraci√≥n de los tipos de datos Mitsubishi Protocol 4
WinCC no soporta el driver de comunicaci√≥n Mitsubishi Protocol 4 ; ser√° sustituido durante la
migraci√≥n por el controlador Mitsubishi MC TCP/IP . Los tipos de datos del driver de
comunicaci√≥n Mitsubishi Protocol 4 se reproducen de la siguiente manera en la migraci√≥n a
WinCC:

80

Tipo de datos en WinCC flexible

Tipo de datos en WinCC

4 Bit Block

4-Bit Block

8 Bit Block

8-Bit Block

12 Bit Block

12-Bit Block

16 Bit Block

16-Bit Block

20 Bit Block

20-Bit Block

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

24 Bit Block

24-Bit Block

28 Bit Block

28-Bit Block

32 Bit Block

32-Bit Block

Bit

Bool

DInt

DInt

DWord

DWord

Int

Int

Real

Real

String

String

Word

Word

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de Modicon Modbus (WinCC flexible)
Migraci√≥n de los tipos de datos Modicon Modbus
WinCC no soporta el driver de comunicaci√≥n Modicon Modbus ; ser√° sustituido durante la
migraci√≥n por el driver Modicon Modbus RTU. Los tipos de datos del driver de comunicaci√≥n
Modicon Modbus se reproducen de la siguiente manera en la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

+/-Double

+/- Double

+/-Int

+/- Int

16 Bit Group

16 Bit Group

ASCII

ASCII

Bit

Bit

Double

Double

Float

Float

Int

Int

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

81

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de Modicon Modbus TCP/IP (WinCC flexible)
Migraci√≥n de los tipos de datos Modicon Modbus TCP/IP
Los tipos de datos del driver de comunicaci√≥n Modicon Modbus TCP/IP se reproducen de la
siguiente manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

+/-Double

+/- Double

+/-Int

+/- Int

16 Bit Group

16 Bit Group

ASCII

ASCII

Bit

Bit

Double

Double

Float

Float

Int

Int

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de Omron Hostlink/Multilink (WinCC flexible)
Migraci√≥n de los tipos de datos Omron Hostlink/Multilink
WinCC no soporta el driver de comunicaci√≥n Omron Hostlink/Multilink ; ser√° sustituido durante
la migraci√≥n por el controlador Omron Host Link . Los tipos de datos del driver de comunicaci√≥n
Omron Hostlink/Multilink se reproducen de la siguiente manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

+/-DEC

Int

+/-LDEC

DInt

ASCII

String

BIN

Bool

BYTE

Byte

DEC

UInt

IEEE

Real

LDEC

UDInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

82

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de OPC (WinCC flexible)
Migraci√≥n de los tipos de datos OPC
Los tipos de datos del driver de comunicaci√≥n OPC se reproducen de la siguiente manera
durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bool

VT_BOOL

Byte

VT_UI1

Char

VT_I1

Date

VT_DATE

Double

VT_R8

DWord

VT_UI4

Float

VT_R4

Long

VT_I4

Short

VT_I2

String

VT_BSTR

Word

VT_UI2

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de SIMATIC 500/505 DP (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC 500/505 DP
WinCC no soporta el driver de comunicaci√≥n SIMATIC 500/505 DP ; los tipos de datos se
reproducen sobre los tipos de datos internos de WinCC. Los tipos de datos del driver de
comunicaci√≥n SIMATIC 500/505 DP se reproducen de la siguiente manera durante la
migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

+/-Double

DInt

+/-Int

Int

ASCII

WString

Bit

Bool

Double

UDInt

Int

UInt

Real

Real

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

83

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de SIMATIC 500/505 serie (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC 500/505 seriell
WinCC no soporta el driver de comunicaci√≥n SIMATIC 500/505 seriell , los tipos de datos se
reproducen sobre los tipos de datos internos de WinCC. Los tipos de datos del driver de
comunicaci√≥n SIMATIC 500/505 seriell se reproducen de la siguiente manera en la migraci√≥n
a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

+/-Double

DInt

+/-Int

Int

ASCII

WString

Bit

Bool

Double

UDInt

Int

UInt

Real

Real

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de SIMATIC HMI HTTP Protocol (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC HMI HTTP Protocol
Los tipos de datos del driver de comunicaci√≥n SIMATIC HMI HTTP Protocol se reproducen de
la siguiente manera durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bool

Bool

Byte

USInt

Char

SInt

DateTime

DateTime

Double

LReal

Float

Real

Int

Int

Long

DInt

String

WString

UInt

UInt

ULong

UDInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

84

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de SIMATIC S5 AS511 (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC S5 AS511
WinCC no soporta el driver de comunicaci√≥n SIMATIC S5 AS511 ; los tipos de datos se
reproducen en los tipos de datos internos de WinCC. Los tipos de datos del driver de
comunicaci√≥n SIMATIC S5 AS511 se reproducen de la siguiente manera en la migraci√≥n a
WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bit in D

Bool

Bit in W

Bool

DF

DInt

DH

UDInt

KC

WString

KF

Int

KG

Real

KH

UInt

KM

UInt

KT

UDInt

KY

UInt

KZ

UInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de SIMATIC S5 DP (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC S5 DP
WinCC no soporta el driver de comunicaci√≥n SIMATIC S5 DP ; los tipos de datos se
reproducen en los tipos de datos internos de WinCC. Los tipos de datos del driver de
comunicaci√≥n SIMATIC S5 DP se reproducen de la siguiente manera en la migraci√≥n a
WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bit in D

Bool

Bit in W

Bool

DF

DInt

DH

UDInt

KC

WString

KF

Int

KG

Real

KH

UInt

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

85

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

KM

UInt

KT

UDInt

KY

UInt

KZ

UInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de SIMATIC S7 200 (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC S7 200
Los tipos de datos del driver de comunicaci√≥n SIMATIC S7 200 se reproducen de la siguiente
durante la migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bool

Bool

Byte

Byte

Char

Char

DInt

DInt

DWord

DWord

Int

Int

Real

Real

StringChar

StringChar

Timer

Timer

Word

Word

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de los tipos de datos de SIMATIC S7 300/400 (WinCC flexible)
Migraci√≥n de los tipos de datos SIMATIC S7 300/400
Los tipos de datos del driver de comunicaci√≥n SIMATIC S7 300/400 se reproducen de la
siguiente manera en la migraci√≥n a WinCC:

86

Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Bool

Bool

Byte

Byte

Char

v√©ase m√°s abajo

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

Counter

v√©ase m√°s abajo

Date

Date

Date and Time

Date_And_Time

DInt

DInt

DWord

DWord

Int

Int

Real

Real

String

String

StringChar

v√©ase m√°s abajo

Time

Time

Time of Day

Time_Of_Day

Timer

v√©ase m√°s abajo

Word

Word

Particularidades de algunos tipos de datos
Al migrar variables externas que contienen tipos de datos de un controlador SIMATIC
S7-300/400, deben tenerse en cuenta ciertas particularidades.

Reproducci√≥n del tipo de datos S7 "Char"
Seg√∫n la especificaci√≥n, "Char" el tipo de datos S7 es un tipo de datos para representar
caracteres. Dado que este tipo de datos ha sido utilizado frecuentemente para leer y escribir
valores num√©ricos, √©ste se reproduce en WinCC en el tipo de datos S7 "Byte". Si este caso se
da durante la migraci√≥n, la ventana de resultados mostrar√° un aviso.
Si el tipo de datos S7 "Char" se utiliza para cifras y en la ubicaci√≥n se han configurado n√∫meros
negativos, en caso de reproducci√≥n en el tipo de datos S7 "Byte" se produce un error. El tipo
de datos S7 "Byte" no puede reproducir n√∫meros negativos. Para eliminar el error se debe
adaptar en consecuencia la configuraci√≥n. Para el procesamiento de n√∫meros positivos y
negativos, utilice un tipo de datos con signo, p. ej., el tipo de datos "Int".
Si el tipo de datos S7 "Char" se utiliza de todas formas para reproducir caracteres, la
configuraci√≥n se debe modificar tras la migraci√≥n. Para representar caracteres utilice el tipo de
datos "String".
Al migrar un proyecto integrado, el tipo de datos "Char" tambi√©n se migra en WinCC al tipo de
datos "Byte". Si hay una variable PLC conectada, el tipo de datos "Char" permanece como
"Char". La modificaci√≥n del tipo de datos de la variable HMI no provoca la migraci√≥n del
direccionamiento simb√≥lico de las variables afectadas. Tras la migraci√≥n, las variables est√°n
conectadas entre s√≠ mediante direcciones absolutas y siguen funcionando. Si desea
restablecer el direccionamiento simb√≥lico, la configuraci√≥n se debe modificar en consecuencia
tras la migraci√≥n.

Reproducci√≥n de una matriz del tipo de datos S7 "Char"
Una matriz del tipo de datos S7 "Char" se reproduce en la migraci√≥n en una matriz del tipo de
datos "Byte".

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

87

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Si una matriz del tipo de datos S7 "Char" se utiliza para cifras y en la ubicaci√≥n se han
configurado n√∫meros negativos, en caso de reproducci√≥n en una matriz del tipo de datos S7
"Byte" se produce un error. El tipo de datos S7 "Byte" no puede reproducir n√∫meros negativos.
Para eliminar el error se debe adaptar en consecuencia la configuraci√≥n. Para el
procesamiento de n√∫meros positivos y negativos, utilice un tipo de datos con signo, p. ej., el
tipo de datos "Int".

Reproducci√≥n del tipo de datos S7 "Counter"
Una variable externa con el tipo de datos S7 "Counter" con direcci√≥n Counter se reproduce en
el tipo de datos S7 "Counter". La direcci√≥n se mantiene.
Cuando una variable externa con el tipo de datos S7 "Counter" direcciona un bloque de datos
o una direcci√≥n de marcas, se reproducir√° en el tipo de datos S7 "Word". La direcci√≥n se
mantiene. La migraci√≥n establece la codificaci√≥n en "SimaticBCDCounter".
El rango de valores del tipo de datos S7 "Counter" es de 0-999. Al transferir valores con el tipo
de datos S7 "Word" , se puede rebasar por exceso el rango de valores en el lado del
controlador. Aseg√∫rese de que se respete el rango de valores.
Ejemplo:
WinCC flexible
Variable

Tipo de datos
S7

Direcci√≥n

Comentario

Counter_Actual_Value

Counter

C10

Valor de contador codificado en
BCD

Counter_Setpoint_Value

Counter

DB10.DBW200

Valor de contador codificado en
BCD

Counter_Setpoint_Value#2

Counter

MW20

Valor de contador codificado en
BCD

WinCC
Variable

Tipo de
datos S7

Direcci√≥n

Codificaci√≥n

Comentario

Counter_Actual_Value

Counter

%C10

<Standard>

Valor de contador
codificado en BCD

Counter_Setpoint_Value

Word

%DB10.%DB
W200

SimaticBCDCounter

Valor de contador
codificado en BCD

Counter_Setpoint_Value#2

Word

%MW20

SimaticBCDCounter

Valor de contador
codificado en BCD

Reproducci√≥n del tipo de datos "StringChar"
En WinCC no hay ning√∫n tipo de datos correspondiente sobre el que se pueda reproducir el
tipo de datos "StringChar" . La reproducci√≥n en WinCC depende de la propiedad "Longitud" del
tipo de datos S7.
Una variable del tipo de datos "StringChar" con la propiedad "Longitud" > 1 se migra a una
matriz del tipo de datos S7 "Char". La longitud de la matriz se corresponde con la longitud del
tipo de datos "StringChar" configurado originariamente.

88

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Si la propiedad "Longitud" = 1, el tipo de datos en WinCC se reproduce en una matriz del tipo
de datos S7 "Char" con la longitud = 1. La expresi√≥n para una matriz con un elemento es
"Array[0 ..0] of Char".

Reproducci√≥n del tipo de datos S7 "Timer"
Una variable externa con el tipo de datos S7 "Timer" con direcci√≥n Temporizador se reproduce
en el tipo de datos S7 "Timer". La direcci√≥n se mantiene.
Cuando una variable externa con el tipo de datos S7 "Timer" direcciona un bloque de datos o
una direcci√≥n de marcas, se reproducir√° en el tipo de datos S7 "S5 Time". La direcci√≥n se
mantiene.
Ejemplo:
WinCC flexible
Variable

Tipo de datos S7 Direcci√≥n

Comentario

Timer_Actual_Value

Timer

T10

Valor Timer codificado en
BCD

Timer_Setpoint_Value

Timer

DB10.DBW200

Valor Timer codificado en
BCD

Timer_Setpoint_Value#2

Timer

MW20

Valor Timer codificado en
BCD

WinCC
Variable

Tipo de datos S7 Direcci√≥n

Comentario

Timer_Actual_Value

Timer

%T10

Valor Timer codificado en
BCD

Timer_Setpoint_Value

S5Time

%DB10.%DBW200

Valor Timer codificado en
BCD

Timer_Setpoint_Value#2

S5Time

%MW20

Valor Timer codificado en
BCD

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

89

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de los tipos de datos de Telemecanique Uni-Telway (WinCC flexible)
Migraci√≥n de los tipos de datos Telemecanique Uni-Telway
WinCC no soporta el driver de comunicaci√≥n Telemecanique Uni-Telway; los tipos de datos se
reproducen en los tipos de datos internos de WinCC. Los tipos de datos del driver de
comunicaci√≥n Telemecanique Uni-Telway se reproducen de la siguiente manera en la
migraci√≥n a WinCC:
Tipo de datos en WinCC flexible

Tipo de datos en WinCC

+/-Int

Int

+/-Long

DInt

ASCII

WString

Bool

Bool

Float

Real

Int

UInt

Long

UDInt

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC flexible) (P√°gina 76)

2.8.2

Migrar proyectos de WinCC V7

2.8.2.1

Principios b√°sicos (WinCC V7)

Migraci√≥n (WinCC V7)
Versiones compatibles
Los proyectos de WinCC V7.5 se pueden migrar a WinCC V16.
Los proyectos de versiones anteriores de WinCC no se pueden migrar directamente. Para
continuar utilizando dichos proyectos, primero hay que migrarlos a WinCC V7.5.
1. Abra el proyecto en WinCC V7.5
2. Confirme la pregunta sobre la migraci√≥n o convierta los datos del proyecto en WinCC
Explorer con el comando de men√∫ "Herramientas". Todos los objetos se deben convertir a
la versi√≥n actual.

90

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Proyectos migrables sin restricciones
Se soportan los siguientes tipos de proyectos:
‚óè Proyectos monopuesto
‚óè Proyectos multipuesto
Los proyectos de WinCC V7 se migran a dispositivos con WinCC Runtime Professional.

Migraci√≥n de proyectos con sistemas redundantes
Si en WinCC V7 hay configurado un sistema redundante, se migra la configuraci√≥n de la pareja
redundante.

Proyectos no migrables
Los proyectos de WinCC V7 con los siguientes dispositivos o funciones no pueden migrarse:
‚óè Multi-Client
‚óè CAS
‚óè Connectivity Station
‚óè Maintenance Station
La migraci√≥n se interrumpe y se muestra en aviso.

Consulte tambi√©n
Principios b√°sicos de la migraci√≥n (WinCC V7) (P√°gina 92)
Migrar proyectos de WinCC V7 (WinCC V7) (P√°gina 93)
Iniciar la simulaci√≥n y Runtime (WinCC V7) (P√°gina 95)
Modificaci√≥n del nombre del proyecto debido a la migraci√≥n (WinCC V7) (P√°gina 96)
Compatibilidad de objetos en la migraci√≥n (WinCC V7) (P√°gina 99)
Migraci√≥n de conexiones (WinCC V7) (P√°gina 102)
Migraci√≥n de variables (WinCC V7) (P√°gina 104)
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)
Migraci√≥n de avisos y grupos de avisos (WinCC V7) (P√°gina 117)
Migraci√≥n de funciones y acciones (WinCC V7) (P√°gina 119)
Principios b√°sicos de la migraci√≥n de informes (WinCC V7). (P√°gina 122)
Copia de los datos Runtime (WinCC V7) (P√°gina 129)
Migraci√≥n de los tipos de datos (WinCC V7) (P√°gina 129)
Idiomas del proyecto en la migraci√≥n (P√°gina 97)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

91

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Principios b√°sicos de la migraci√≥n (WinCC V7)
Introducci√≥n
Durante la migraci√≥n, los datos de un proyecto de WinCC V7 se convierten al nuevo formato
de datos de WinCC. No se comprueba si los datos del proyecto que debe migrarse son
coherentes. Cuando en un proyecto fuente hay errores, √©stos no se subsanan durante la
migraci√≥n. Por ello, el proyecto que se tiene que migrar debe estar libre de errores antes de la
migraci√≥n. Para la migraci√≥n, tenga en cuenta el volumen de un proyecto. Para la migraci√≥n
rigen las caracter√≠sticas funcionales de WinCC. Encontrar√° m√°s informaci√≥n al respecto en la
Ayuda en pantalla, en el cap√≠tulo "Visualizaci√≥n de procesos > Caracter√≠sticas >
Caracter√≠sticas de rendimiento de los dispositivos > WinCC Runtime Professional (RT
Professional)".
Nota
Uso de los caracteres "ss" y "√ü" en el TIA Portal
Los nombres de los objetos HMI (variables, im√°genes, recetas, conexiones, listas de textos,
etc.) deben ser un√≠vocos en el TIA Portal. No se hace distinci√≥n entre "ss" y "√ü". Por ello no es
posible utilizar las dos secuencias de caracteres para diferenciar nombres de objetos HMI por
lo dem√°s id√©nticos.

Condiciones para la migraci√≥n
Para que se pueda realizar la migraci√≥n hay que cumplir algunas condiciones b√°sicas.
‚óè El proyecto que debe migrarse debe haberse guardado en WinCC V7.5.
‚óè El proyecto que debe migrarse no debe estar abierto ni en WinCC V7 ni en runtime.
‚óè En el PC al que hay que realizar la migraci√≥n debe haber suficiente memoria libre en el
disco duro. Durante la migraci√≥n, la cantidad de memoria necesaria en el disco duro puede
llegar a ser de 10 veces el tama√±o del proyecto de WinCC V7 sin datos de Runtime.

Cancelar la migraci√≥n
La migraci√≥n se cancela en los siguientes casos:
‚óè cuando el proyecto que hay migrar est√° abierto en sistema de ingenier√≠a o en runtime.
‚óè cuando no hay suficiente memoria disponible en el disco duro para crear una copia de la
migraci√≥n del proyecto.
‚óè cuando debido a problemas con el servidor SQL instalado, la migraci√≥n no puede acceder
a la base de datos del proyecto.
‚óè cuando la migraci√≥n no puede acceder a la base de datos del proyecto debido a que no
tiene la autorizaci√≥n del usuario.
‚óè cuando el proyecto se ha creado con una versi√≥n no soportada por la migraci√≥n.
‚óè cuando en el proyecto se utiliza un control que no est√° registrado en el sistema operativo.

92

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Preparar un proyecto con la herramienta de migraci√≥n
La migraci√≥n de un proyecto de WinCC V7 no tiene que realizarse necesariamente en el PC
en el que est√° instalado WinCC.
La migraci√≥n se puede preparar con la herramienta de migraci√≥n en un PC en el que est√©
instalado WinCC V7.5. La herramienta de migraci√≥n exporta los datos de ingenier√≠a del
proyecto WinCC V7 y los guarda en el formato "*.am*".
Para la migraci√≥n propiamente dicha, copie el archivo generado por la herramienta de
migraci√≥n a un PC en el que est√© instalado el TIA Portal.
Encontrar√° m√°s informaci√≥n sobre la herramienta de migraci√≥n en el cap√≠tulo "Preparaci√≥n de
proyectos con la herramienta de migraci√≥n".

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)

Migrar proyectos de WinCC V7 (WinCC V7)
Introducci√≥n
Durante la migraci√≥n de un proyecto se cargan datos de un proyecto de WinCC V7 en un nuevo
proyecto para WinCC. Por consiguiente, para la migraci√≥n se crea autom√°ticamente un
proyecto nuevo. No es posible migrar a un proyecto existente.
La migraci√≥n se puede llamar tanto desde la vista del portal como desde la vista del proyecto.

Requisitos
‚óè Hay un proyecto de WinCC V7.5.
‚óè El proyecto no est√° abierto en WinCC V7.

Procedimiento
El proyecto se migra en la vista del portal del siguiente modo:
1. Seleccione la acci√≥n "Inicio > Migrar proyecto".

2. En el campo "Ruta de origen" navegue hasta el proyecto que desea migrar.
3. Seleccione el archivo de proyecto de WinCC V7 "*.mcp".
Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

93

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
4. En caso necesario, modifique los datos del proyecto que debe crearse. Cambie, p. ej., el
nombre o la ruta del proyecto. En el proyecto nuevo se crear√°n los datos que deben
migrarse.
5. Para migrar todos los datos runtime del proyecto, active "Copiar datos de WinCC Runtime
Professional".
Una vez cargados, estos datos runtime aparecen en el dispositivo de destino.
6. Haga clic en "Migrar".
Se crea un proyecto nuevo y se inicia la migraci√≥n de los datos:
‚Äì Se abre la vista del proyecto.
‚Äì El progreso de la migraci√≥n se indica en una ventana de migraci√≥n.
‚Äì En la ventana de inspecci√≥n bajo "Informaci√≥n > General" se muestran informaciones,
advertencias y errores correspondientes al proceso de migraci√≥n.
‚Äì Toda la informaci√≥n relacionada con la migraci√≥n se guarda en un archivo de informe.
‚Äì Una vez concluida la migraci√≥n, el proyecto se guarda y se emite un aviso. El aviso
contiene un enlace mediante el cual se puede abrir el archivo de informe.
Una vez concluida la migraci√≥n, en el √°rbol del proyecto encontrar√° un nuevo dispositivo
instalado para cada sistema de PC migrado. Estos dispositivos contienen los datos migrados,
p. ej., im√°genes, avisos y variables. En un proyecto multipuesto se crea un dispositivo para
cada cliente y para el servidor en el √°rbol del proyecto de WinCC.
Si el proyecto se ha migrado correctamente, aparecer√° una indicaci√≥n con el aviso
correspondiente.

Abrir el informe de migraci√≥n en otro momento
El informe de migraci√≥n se guarda junto con el proyecto migrado. Para ver el informe m√°s
adelante, proceda del siguiente modo:
1. Abra la carpeta "Datos comunes > Informes" en el √°rbol del proyecto.
2. Haga doble clic en el informe de migraci√≥n. Se abrir√° el informe.
Nota
Avisos con estructura de √°rbol
A partir del TIA Portal V13.0 los avisos aparecen ordenados en una estructura de √°rbol en el
informe de la migraci√≥n. De este modo, todos los avisos que pertenecen a un determinado
subsistema se guardan en una misma carpeta. Para expandir la carpeta actualmente
seleccionada y todas sus subcarpetas de una vez, pulse la combinaci√≥n de teclas <NUM + x
(multiplicaci√≥n)>.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)

94

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Adaptar un proyecto (WinCC V7)
Causas
Si se ha migrado un proyecto, hay que adaptarlo. La necesidad de una reconfiguraci√≥n se debe
a:
‚óè Avisos ocurridos durante la migraci√≥n y registrados en el informe de migraci√≥n.
‚óè Datos que no eran coherentes o no eran v√°lidos en el proyecto migrado. WinCC en el TIA
Portal cuenta con estrictos criterios para la comprobaci√≥n, p. ej., de la validez de las
direcciones de variables o de la longitud de los nombres de objetos. La migraci√≥n no corrige
los datos incorrectos.
‚óè Las carpetas y los archivos que haya creado en el directorio del proyecto WinCC V7 no se
copiar√°n en el nuevo directorio de proyecto en la migraci√≥n. Los scripts que accedan a este
tipo de directorios y archivos deben adaptarse en consecuencia despu√©s de la migraci√≥n.

Criterios para los avisos durante la migraci√≥n
Durante la migraci√≥n se emiten avisos en el informe de migraci√≥n:
‚óè Si la migraci√≥n provoca el cambio de una propiedad.
‚óè Si tras la migraci√≥n una propiedad obtiene el estado "no v√°lido", p. ej. porque el valor inicial
de una variable est√° fuera del rango de valores, no se emite ning√∫n aviso en el informe de
migraci√≥n. El estado "no v√°lido" se reconoce en el sistema de ingenier√≠a p. ej. por el color
de fondo de los campos de entrada. Si se compila un proyecto, para los datos no v√°lidos se
muestran avisos en la ventana de inspecci√≥n.

Adaptar un proyecto
1. Edite los avisos del informe de migraci√≥n.
2. Haga clic en el proyecto migrado dentro del √°rbol del proyecto.
3. Elija el comando "Compilar > Software" del men√∫ contextual.
4. Edite los avisos de error en la ventana de inspecci√≥n.

Iniciar la simulaci√≥n y Runtime (WinCC V7)
Iniciar la simulaci√≥n
Una vez compilado el proyecto sin errores, se puede simular runtime en un PC con el sistema
de ingenier√≠a instalado. Esto permite, despu√©s de la migraci√≥n, comprobar el correcto
funcionamiento de las modificaciones necesarias en el proyecto sin tener que descargarlo en
el sistema de destino. Para ello, seleccione el comando de men√∫ "Online > Simulaci√≥n >
Iniciar".

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

95

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Cargar el proyecto en un PC con WinCC Runtime Professional
WinCC ofrece adem√°s la posibilidad de transferir el proyecto a un PC en el que solo est√°
instalado WinCC Runtime Professional. Para ello es necesario cargar el proyecto en el equipo
de destino correspondiente. En un proyecto de WinCC V7 no hay informaci√≥n disponible para
cargar en otro equipo de destino. La migraci√≥n no puede por ello migrar datos para la
comunicaci√≥n con otro ordenador de destino. Para cargar un proyecto migrado en otro
ordenador de destino, se debe configurar los ajustes necesarios en WinCC.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)

Modificaci√≥n del nombre del proyecto debido a la migraci√≥n (WinCC V7)
Introducci√≥n
Cuando haya realizado la migraci√≥n de un proyecto de WinCC V7, el proyecto migrado se
mostrar√° en el √°rbol del proyecto de WinCC como un nuevo dispositivo con el nombre del
proyecto de WinCC V7.
Al compilar el proyecto migrado, WinCC genera un nombre nuevo para el proyecto de runtime
y de la carpeta que lo contiene. No se supera la longitud de ruta de 256 caracteres permitida
en Windows. Por ello, el proyecto en runtime tiene un nombre distinto al del equipo en el √°rbol
del proyecto.

Iniciar runtime en el sistema de destino
Cuando se simula runtime en el PC de configuraci√≥n, no es necesario tener en cuenta el
nombre nuevo. Abra el proyecto en WinCC e inicie la simulaci√≥n con el comando de men√∫
"Online > Simulaci√≥n > Iniciar".
Si se quiere abrir runtime en un PC en el que no hay instalado ning√∫n sistema de ingenier√≠a
WinCC, existen las siguientes condiciones:
‚óè Para el primer procedimiento de carga es necesario utilizar el comando de men√∫ "Carga
avanzada en dispositivo".
‚óè WinCC Runtime crea el directorio de extracci√≥n "WinCCProjects" durante la instalaci√≥n. En
el cuadro de di√°logo "Carga avanzada" introduzca en el campo "Ruta de destino" la ruta al
directorio de extracci√≥n en el dispositivo de destino. Otra posibilidad es navegar con ayuda
del bot√≥n de navegaci√≥n hacia el directorio de extracci√≥n.
‚óè A continuaci√≥n, cuando cargue el proyecto, se guardar√° en el directorio de extracci√≥n
"WinCCProjects".
‚óè Para iniciar el proyecto utilice la herramienta "WinCC StartTool".

96

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Adaptar scripts
Si se ha creado un programa ejecutable que haga referencia a un proyecto migrado a trav√©s
del nombre, hay que adaptar el script de la forma correspondiente. El nuevo nombre del
proyecto es la secuencia num√©rica dentro de los corchetes en la indicaci√≥n de la ruta del
archivo MCX arriba descrito.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)

Idiomas del proyecto en la migraci√≥n
Idiomas del proyecto soportados
Debido a las distintas versiones de Windows DotNet un mismo idioma puede tener distintas
designaciones en WinCC V7 y en TIA Portal. Por esta raz√≥n, el orden de clasificaci√≥n puede
variar.
La tabla siguiente muestra algunos ejemplos en ingl√©s:
WinCC V7.x

TIA Portal

Bengali (Bangladesh)

Bangla (Bangladesh)

Bengali (India)

Bangla (India)

Chinese (Simplified, PRC)

Chinese (People's Republic of China)

Chinese (Simplified, Singapore)

Chinese (Singapore)

Chinese (Traditional, Hong Kong S.A.R)

Chinese (Hong Kong S.A.R)

Chinese (Traditional, Macao S.A.R)

Chinese (Macao S.A.R)

Chinese (Traditional, Taiwan)

Chinese (Taiwan)

French (Monaco)

French (Principality of Monaco)

Oriya (India)

Odia (India)

Sami (Inari, Finland)

Sami, Inari (Finland)

Sami (Skolt, Finland)

Sami, Skolt (Finland)

Sami, Northern (Norway)$Sami

Sami, Northern (Norway)

Spanish (Bolivarian Republic of Venezuela)

Spanish (Venezuela)

Spanish (Spain, Traditional Sort)

Spanish (Spain)

Spanish (Spain, International Sort)

Spanish (Spain)

Yakut (Russia)

Sakha (Russia)

Filtrado de los idiomas del proyecto
Para migrar proyectos de forma √≥ptima, el proyecto de WinCC V7 existente filtra
autom√°ticamente los idiomas del proyecto que no figuran en la librer√≠a de textos y para los que
no se encuentran textos que difieran del valor predeterminado. Esos idiomas del proyecto no
se migran. El filtrado se refiere √∫nicamente a idiomas del proyecto que no est√©n incluidos de
forma expl√≠cita en la librer√≠a de textos.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

97

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Si un idioma del proyecto no se encuentra en la librer√≠a de textos y los textos contienen
exclusivamente las siguientes cadenas de texto, el idioma del proyecto no se migra:
‚óè Cadena de texto con seis interrogantes
‚óè Cadena de texto vac√≠a
‚óè Cadena de texto con la palabra "Text" generada autom√°ticamente
‚óè Cadena de texto para casillas de verificaci√≥n o campos de opci√≥n que comienza con seis
interrogantes o con la palabra "Text" generada autom√°ticamente y termina con una cifra, p.
ej., "??????5" o "Text5"
Nota
Los idiomas del proyecto utilizados en controles no influyen en el comportamiento de filtrado.
Nota
Si un idioma del proyecto no se migra, se emite el mensaje correspondiente en el informe de
migraci√≥n.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)

Migraci√≥n de textos en espa√±ol (WinCC V7)
Los textos en espa√±ol se migran de diferente manera seg√∫n su ordenaci√≥n alfab√©tica.

Migraci√≥n de textos en espa√±ol (alfabetizaci√≥n tradicional) y espa√±ol (alfabetizaci√≥n internacional)
Si un proyecto de WinCC V7 incluye textos en espa√±ol (tradicional), estos textos se migrar√°n
como espa√±ol (Espa√±a).
Si un proyecto de WinCC V7 incluye textos en espa√±ol (internacional), estos textos se migrar√°n
como espa√±ol (Espa√±a).
Si un proyecto de WinCC V7 incluye textos tanto en espa√±ol (internacional) como en espa√±ol
(tradicional), solo se migrar√°n los textos en espa√±ol (tradicional) como espa√±ol (Espa√±a). Los
textos en espa√±ol (internacional) no se tendr√°n en cuenta.

98

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

2.8.2.2

Migrar datos de ingenier√≠a (WinCC V7)

Compatibilidad de objetos (WinCC V7)
Compatibilidad de objetos en la migraci√≥n (WinCC V7)
Introducci√≥n
Al migrar proyectos de WinCC V7, se migran todos los tipos de objeto y funciones que estar√°n
disponibles en el nuevo entorno del proyecto y que pueden mapearse.

Tipos de objetos soportados
La migraci√≥n soporta los siguientes tipos de objeto:
‚óè Im√°genes
‚óè Objetos de manejo y visualizaci√≥n
‚óè Faceplates
‚óè Variables
‚óè Tipos de datos
‚óè Estructuras
‚óè Conexiones
‚óè Ciclos
‚óè Avisos
‚óè Categor√≠as
‚óè Grupos de avisos
‚óè Tipos de aviso
‚óè Fichero de usuario
‚óè Ficheros de avisos
‚óè Ficheros de variables
‚óè Informes
‚óè Trabajos de impresi√≥n
‚óè Dise√±os
‚óè Funciones de proyecto
‚óè Funciones est√°ndar
‚óè Acciones
‚óè Administraci√≥n de usuarios
‚óè Textos

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

99

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
‚óè Idiomas del proyecto
‚óè Idiomas de runtime
‚óè Fuentes de runtime
‚óè Funciones ODK del RT
Las restricciones y los objetos con soporte restringido se describen en los siguientes cap√≠tulos.

Tipos de objetos no soportados
La migraci√≥n no soporta los siguientes tipos de objetos:
‚óè Barras 3D
‚óè Jerarqu√≠a de im√°genes
‚óè Visor anal√≥gico avanzado
‚óè Visor de estado avanzado
‚óè Dise√±o insertado
‚óè Librer√≠as globales
‚óè Librer√≠a del proyecto
‚óè Avisador sonoro
‚óè Visor de grupo
‚óè Comunicaci√≥n servidor-servidor
‚óè Controles XAML, p. ej. controles WPF
‚óè Funciones ODK del CS
‚óè Im√°genes predeterminadas de las librer√≠as PCS 7 Standard/Advanced

Idiomas no soportados
WinCC V7 ofrece m√°s de 200 idiomas y dialectos para la configuraci√≥n. El TIA Portal soporta
aproximadamente 100 idiomas y dialectos, que pueden consultarse en "Idiomas y recursos"
del editor "Idiomas del proyecto". Los textos de un proyecto de WinCC V7 en un idioma no
soportado por el TIA Portal se perder√°n en la migraci√≥n. En el informe de la migraci√≥n se
emitir√°n avisos al respecto.
Los cambios de idioma en runtime programados en los idiomas no soportados dejar√°n de ser
v√°lidos en el proyecto de TIA Portal. Deber√° eliminar estos cambios de idioma antes de poner
en marcha el proyecto. Si un proyecto de WinCC V7 contiene solo textos en idiomas no
soportados, no se migrar√° ning√∫n texto. En este caso, se ajustar√° en su lugar el idioma
est√°ndar "Ingl√©s (EE. UU.)" en "Idiomas y recursos" del editor "Idiomas del proyecto".

Caracteres no permitidos
WinCC no soporta exactamente el mismo conjunto de caracteres que WinCC V7 para nombres
de objeto. Por ejemplo, en WinCC no se admiten los siguientes caracteres para variables: ? "
%

100

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
La migraci√≥n no provoca un cambio en el nombre del objeto, ni siquiera si el nombre contiene
un car√°cter no permitido en WinCC. Los caracteres no permitidos provocan que el nombre del
objeto no sea v√°lido y que se emita un aviso al compilar. En WinCC es posible cambiar los
nombres de objeto de forma centralizada. Tambi√©n se cambian siempre todas las ubicaciones.

Consulte tambi√©n
Objetos modificados (WinCC V7) (P√°gina 101)
Migraci√≥n (WinCC V7) (P√°gina 90)
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)

Objetos modificados (WinCC V7)
Introducci√≥n
WinCC ya no soporta algunos objetos que est√°n disponibles en WinCC V7. La migraci√≥n
representa dichos objetos a objetos disponibles en WinCC. Ya que no todas las propiedades
pueden representarse, se requieren ajustes parciales. En el informe de migraci√≥n se muestran
las propiedades modificadas y no migradas.

Objetos modificados
La migraci√≥n representa los siguientes objetos a otros objetos o tienen parcialmente otras
propiedades:
‚óè Objeto OLE
‚óè Push Button Control
‚óè Lista de textos
‚óè Indicadores de estado
‚óè WinCC Controls anteriores a WinCC V7
‚óè Gr√°ficos SVG
‚óè Objetos de usuario
‚óè Faceplates
‚óè Grupos de objetos
‚óè Dinamizaciones
Encontrar√° m√°s informaci√≥n al respecto en el cap√≠tulo Im√°genes y objetos de imagen (WinCC
V7) (P√°gina 105).

Consulte tambi√©n
Compatibilidad de objetos en la migraci√≥n (WinCC V7) (P√°gina 99)
Im√°genes y objetos de imagen (WinCC V7) (P√°gina 105)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

101

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Conexiones (WinCC V7)
Migraci√≥n de conexiones (WinCC V7)
Introducci√≥n
Al migrar conexiones hay que diferenciar los siguientes casos:
‚óè El driver de comunicaci√≥n se soporta en WinCC.
‚óè El driver de comunicaci√≥n no se soporta en WinCC.
Cuando se migren los drivers de comunicaci√≥n, consulte la siguiente descripci√≥n.

Migraci√≥n con driver de comunicaci√≥n soportado
Si WinCC soporta el driver de comunicaci√≥n utilizado, se migra la conexi√≥n con dicho driver de
comunicaci√≥n. Se soportan los siguientes drivers de comunicaci√≥n:
WinCC V7

WinCC

SIMATIC S7 PROTOCOL SUITE

SIMATIC S7-300/400

SIMATIC S7-1200

SIMATIC S7-1200

SIMATIC S7-1500

SIMATIC S7-1500

ALLEN BRADLEY - ETHERNET IP

Allen Bradley EtherNet/IP

MITSUBISHI ETHERNET

Mitsubishi MC TCP/IP

MODBUS TCPIP

Modicon MODBUS TCP/IP

OPC

OPC

OPC UA DA

OPC UA DA

Las unidades de canal "Industrial Ethernet (I + II)" de S7 Protocol Suite se migran a la unidad
de canal Industrial Ethernet del driver SIMATIC S7-300/400.
Las unidades de canal "PROFIBUS (I + II)" de S7 Protocol Suite se migran a la unidad de canal
PROFIBUS del driver SIMATIC S7-300/400.
La unidad de canal "Named Connection" no se migra.

Migraci√≥n de un driver de comunicaci√≥n no soportado
WinCC no soporta todos los drivers de comunicaci√≥n disponibles en WinCC V7. Cuando no se
soporte un driver de comunicaci√≥n, no se migrar√° la conexi√≥n configurada.
Al migrar un proyecto de WinCC V7 que contenga una conexi√≥n no soportada, todas las
variables externas de esta conexi√≥n se mapear√°n en variables internas en una tabla de
variables. La direcci√≥n del controlador se almacena como comentario de las variables. Para
cada conexi√≥n afectada se obtiene una tabla de variables y una entrada en el informe de
migraci√≥n.
Despu√©s de migrar y de configurar una nueva conexi√≥n, debe volver a conectar las variables
con el controlador.
Si no se migra el controlador, recibir√° un correspondiente aviso de advertencia.

102

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
WinCC no soporta los siguientes drivers de comunicaci√≥n:
WinCC V7

WinCC

Profibus DP

no soportado

Profibus FMS

no soportado

SIMATIC TI Serial

no soportado

SIMATIC 505 TCP IP

no soportado

SIMATIC S5 Ethernet Layer 4

no soportado

SIMATIC S5 Ethernet TF

no soportado

SIMATIC S5 Profibus FDL

no soportado

SIMATIC S5 Programmers Port AS 511

no soportado

SIMATIC S5 Serial 3964R

no soportado

SIMATIC TI Ethernet Layer 4

no soportado

SIMATIC TI Serial

no soportado

System Info

no soportado

Windows DDE

no soportado

Las funcionalidades existentes de Windows DDE se pueden transformar a WinCC con la
ayuda de OPC. La transformaci√≥n debe realizarla Ud. mismo.

Consulte tambi√©n
Adaptar la configuraci√≥n en caso de conexi√≥n no migrada (WinCC V7) (P√°gina 103)
Migraci√≥n (WinCC V7) (P√°gina 90)
Migraci√≥n de variables (WinCC V7) (P√°gina 104)

Adaptar la configuraci√≥n en caso de conexi√≥n no migrada (WinCC V7)
Introducci√≥n
Si una conexi√≥n no se migra, tiene las siguientes posibilidades:
‚óè Modificar la configuraci√≥n en WinCC V7 antes de la migraci√≥n.
‚óè Modificar la configuraci√≥n despu√©s de la migraci√≥n

Modificar una conexi√≥n antes de la migraci√≥n
Cuando la migraci√≥n no soporte el driver de comunicaci√≥n seleccionado para la conexi√≥n,
debe seleccionar un controlador soportado por la migraci√≥n.
En caso de no haber ning√∫n controlador adecuado disponible, debe utilizar componentes
adecuados para la comunicaci√≥n. A continuaci√≥n, modifique la configuraci√≥n en WinCC V7.
Migre el proyecto cuando la personalizaci√≥n se haya realizado satisfactoriamente. Entonces,
la conexi√≥n se migrar√° satisfactoriamente.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

103

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Modificar una conexi√≥n despu√©s de la migraci√≥n
Al migrar un proyecto de WinCC V7 que contenga una conexi√≥n no soportada, todas las
variables externas de esta conexi√≥n se mapear√°n en variables internas en una tabla de
variables. La direcci√≥n del controlador se almacena como comentario de las variables. Para
cada conexi√≥n afectada se obtiene una tabla de variables y una entrada en el informe de
migraci√≥n.
Despu√©s de la migraci√≥n se debe configurar una nueva conexi√≥n. Para dicha conexi√≥n,
seleccione un driver de comunicaci√≥n que soporte el interlocutor utilizado. Si no hubiese
ning√∫n controlador adecuado para el interlocutor, se debe utilizar componentes adecuados
para la comunicaci√≥n.
Cuando haya configurado la nueva conexi√≥n, deber√° conectar de nuevo las variables que la
migraci√≥n haya representado en variables internas. Para simplificar la reconfiguraci√≥n, abra el
informe de migraci√≥n. Configure las variables seg√∫n la entrada correspondiente del informe.

Consulte tambi√©n
Migrar proyectos de WinCC V7 (WinCC V7) (P√°gina 93)
Migraci√≥n de conexiones (WinCC V7) (P√°gina 102)

Migraci√≥n de variables (WinCC V7)
Introducci√≥n
Al migrar variables deben tenerse en cuenta ciertas particularidades. Deben diferenciarse los
siguientes aspectos:
‚óè Migraci√≥n de los tipos de datos de variables
‚óè Migraci√≥n de variables internas
‚óè Migraci√≥n de variables externas

Migraci√≥n de los tipos de datos
WinCC tiene los mismos tipos de datos, pero utiliza parcialmente otros nombres de tipos de
datos que no usa WinCC V7. Al migrar variables externas que contengan tipos de datos de un
controlador SIMATIC S7, deben tenerse en cuenta ciertas particularidades. Encontrar√° m√°s
informaci√≥n al respecto en el cap√≠tulo Migraci√≥n de los tipos de datos (WinCC V7)
(P√°gina 129).

Migraci√≥n de variables internas
Las variables internas siempre deben migrarse completamente. S√≥lo el nombre de los tipos de
datos se puede cambiar mediante la migraci√≥n. Encontrar√° m√°s informaci√≥n al respecto en el
cap√≠tulo Migraci√≥n de los tipos de datos (WinCC V7) (P√°gina 129)

104

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de variables externas
Si se migra la conexi√≥n que utilizan las variables externas, √©stas tambi√©n se migran. La
migraci√≥n de variables externas depende de si la migraci√≥n soporta el driver de comunicaci√≥n
utilizado. Encontrar√° m√°s informaci√≥n al respecto en el cap√≠tulo Migraci√≥n de conexiones
(WinCC V7) (P√°gina 102).
Si no se migra la conexi√≥n que utilizan las variables externas, √©stas tampoco se migran. Las
variables externas se representan en variables internas. Debe configurar una nueva conexi√≥n
una vez realizada la migraci√≥n y volver a conectar las variables con las variables del
controlador.

Consulte tambi√©n
Migraci√≥n de los tipos de datos (WinCC V7) (P√°gina 129)
Migraci√≥n de conexiones (WinCC V7) (P√°gina 102)
Migraci√≥n de estructuras (WinCC V7) (P√°gina 105)
Migraci√≥n (WinCC V7) (P√°gina 90)

Migraci√≥n de estructuras (WinCC V7)
Migraci√≥n de estructuras
En WinCC V7, las variables estructuradas se generan con ayuda de los tipos de estructuras y
los elementos de estructuras. En WinCC V7, los tipos de estructuras son v√°lidos para el
dispositivo en el que se crearon. En WinCC se crean tipos de estructuras en la librer√≠a del
proyecto y sirven para todos los equipos. La estructura de los tipos de estructura en WinCC y
WinCC V7 es igual.

Consulte tambi√©n
Migraci√≥n de variables (WinCC V7) (P√°gina 104)

Im√°genes y objetos de imagen (WinCC V7)
Migraci√≥n de im√°genes y objetos de imagen (WinCC V7)
Introducci√≥n
La mayor√≠a de los objetos de imagen disponibles en WinCC V7 se aplica sin restricciones en
la migraci√≥n a WinCC.
Para algunos objetos de imagen, p. ej. listas de textos e indicadores de estado, se han
mejorado las posibilidades en WinCC. La migraci√≥n permite aplicar estos objetos de tal
manera que no sean necesarios trabajos posteriores.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

105

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Algunos objetos de imagen individuales, como WinCC Push Button Control, ya no son
soportados por WinCC. En la migraci√≥n estos objetos se reflejan dentro de la posible en los
objetos disponibles en WinCC.
En la migraci√≥n deben considerarse las siguientes particularidades:

Propiedades introducidas en WinCC desde la versi√≥n V7.3
Las nuevas propiedades introducidas en WinCC desde la versi√≥n V7.3 no se migran a WinCC.
Si una de las propiedades nuevas est√° dinamizada, se emite un mensaje en el informe de
migraci√≥n sobre las propiedades dinamizadas no migradas. Por el contrario, no se emite
ning√∫n aviso acerca de las propiedades est√°ticas no migradas.

Secuencias de tabulaci√≥n en im√°genes con faceplates o grupos de objetos
En im√°genes con faceplates o grupos de objetos la migraci√≥n provoca cambios en las
secuencias de tabulaciones, tanto en la imagen como en el faceplate o grupo de objetos.

Cambiar el nombre de eventos
Algunos eventos obtienen nombres nuevos en WinCC, p. ej. el evento "Clic del rat√≥n" en
WinCC se llama "Hacer clic". La migraci√≥n aplica por completo estos cambios de nombre. No
se requieren ajustes.

Migraci√≥n de disparadores
Los disparadores de WinCC V7 de tipo "ciclo de ventana" se migran al ciclo de actualizaci√≥n
de una imagen v√°lido en WinCC.

Migraci√≥n de un rect√°ngulo
Ha configurado un rect√°ngulo en un proyecto WinCC V7 con los ajustes "Grosor de l√≠nea=1"
y "Dibujar borde interior=s√≠". Para que el rect√°ngulo se muestre correctamente despu√©s de la
migraci√≥n, haga lo siguiente:
1. Abra las propiedades del rect√°ngulo.
2. Desactive "Extender la l√≠nea del borde hacia dentro".

Migraci√≥n de una lista de textos
En WinCC V7 el objeto "Lista de textos" permite mostrar textos en funci√≥n del valor de una
variable. Los textos que deben visualizarse deben volver a definirse para cada objeto. En
WinCC hay disponible una lista de textos independiente de la ubicaci√≥n. El objeto "Campo E/
S simb√≥lico" permite visualizar textos desde una lista de textos.
Los textos utilizados en WinCC V7 se migran a una lista de textos y se conectan con el campo
E/S simb√≥lico. Los textos utilizados se guardan como textos del proyecto. Estos se encuentran
en el √°rbol del proyecto en "Idiomas y recursos".

106

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de un indicador de estado
En WinCC V7, el objeto "Indicador de estado" permite mostrar gr√°ficos en funci√≥n del valor de
una variable. Los gr√°ficos que deben visualizarse deben volver a definirse para cada objeto.
En WinCC hay disponible una lista de gr√°ficos independiente de la ubicaci√≥n. El objeto
"Campo E/S gr√°fico" permite visualizar gr√°ficos desde una lista de gr√°ficos.
Las im√°genes empleadas en el indicador de estado se migran en una lista de gr√°ficos y se
conectan con el campo E/S gr√°fico. Las im√°genes utilizadas se guardan en los gr√°ficos de
WinCC. Los gr√°ficos se encuentran en el √°rbol del proyecto en "Idiomas y recursos".

Migraci√≥n de un faceplate
Los faceplates en WinCC presentan algunas diferencias con los faceplates en WinCC V7. Por
ello, durante la migraci√≥n hay que tener en cuenta las siguientes particularidades:
‚óè Una propiedad de un objeto interno s√≥lo se puede interconectar en un faceplate
respectivamente a una propiedad del faceplate. Si una propiedad de un objeto interno est√°
interconectada a varias propiedades del faceplate, s√≥lo se migrar√° la conexi√≥n con la
primera propiedad configurada. Para las propiedades no migradas se emite un aviso en el
informe de migraci√≥n.
‚óè Si un evento de un objeto interno est√° ligado varias veces a la interfaz del faceplate, solo
el √∫ltimo evento tiene una conexi√≥n con el objeto interno tras la migraci√≥n. Los dem√°s
eventos de la interfaz de eventos se migran sin conexi√≥n con el objeto interno. Si se han
proyectado dinamizaciones en estos eventos, estas se migran. La uni√≥n de la dinamizaci√≥n
al objeto interno se pierde.
‚óè Si se dinamiza una propiedad de objeto dentro de un tipo de faceplate, y dicha propiedad
se lleva al mismo tiempo a la interfaz de eventos del faceplate, la conexi√≥n con la interfaz
de eventos se desecha durante la migraci√≥n. Se migra la dinamizaci√≥n interna. La
propiedad en la interfaz de eventos se migra igualmente, √∫nicamente se pierde la conexi√≥n
con la propiedad del objeto interno.
Ejemplo:
Un tipo faceplate tiene un objeto interno "C√≠rculo". La propiedad "Color de fondo" del c√≠rculo
se dinamiza con un evento interno, p. ej., con una variable de faceplate. La propiedad "Color
de fondo" del c√≠rculo se lleva hacia fuera, a la interfaz de eventos del faceplate y se
dinamiza de manera adicional desde fuera en la instancia del faceplate. Esta configuraci√≥n
ya no est√° permitida en WinCC. Durante la migraci√≥n se migra la dinamizaci√≥n interna. La
dinamizaci√≥n externa y la propiedad en la interfaz de eventos del faceplate se migran
igualmente. La conexi√≥n entre la propiedad externa y la propiedad interna "Color de fondo"
del c√≠rculo se elimina.
‚óè Si un tipo faceplate contiene un campo E/S, su propiedad "Formato de salida" no puede
estar ligada a la interfaz de eventos del tipo faceplate.
‚óè En los faceplates de WinCC V7 es posible interconectar variables internas directamente
con la interfaz. Esto no es posible en el caso de los faceplates de WinCC. Para conseguir
el mismo comportamiento en faceplates, mediante la migraci√≥n se genera un campo ES
invisible como objeto auxiliar. En este campo ES se generan dos funciones VB por variable
interna que se interconectan con una propiedad de interfaz. A trav√©s de esta propiedad de
interfaz se accede a la variable interna. Sin embargo, solo es posible migrar como m√°ximo
23 variables interconectadas con la interfaz.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

107

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de un objeto OLE
El objeto OLE no se soporta en WinCC. Con la migraci√≥n, las funciones del objeto OLE se
representan en un visor de gr√°ficos. En el informe de migraci√≥n se emite un aviso.
Si el objeto OLE est√° vinculado a un archivo basado en textos, p. ej. una tabla Excel, con la
migraci√≥n se genera una captura de pantalla de la tabla Excel, que se vincula al visor de
gr√°ficos.

Migraci√≥n de un WinCC Push Button Control
El WinCC Push Button Control no se soporta en WinCC. Con la migraci√≥n, las funciones del
Push Button Control se representan en un bot√≥n.
Las siguientes propiedades del Push Button Control no est√°n disponibles en un bot√≥n, por lo
que no se migran:
‚óè Outline
‚óè FontStrikeThru
‚óè FocusRect
‚óè AutoSize
‚óè Transparent
Si ha proyectado una din√°mica en una de estas propiedades, se pierde la dinamizaci√≥n
durante la migraci√≥n. Si no se puede migrar una propiedad o una din√°mica del objeto, se
realiza una entrada al respecto en el informe de migraci√≥n.
Dado que un bot√≥n soporta otros eventos, en la migraci√≥n deben considerarse las siguientes
particularidades:
‚óè El evento "Click" de Push Button Control se migra sin restricciones al evento "Hacer clic" del
bot√≥n.
‚óè Los eventos "KeyDown" y "KeyUp" del Push Button Control se migran a los eventos "Pulsar
tecla en el teclado" y "Soltar tecla en el teclado". Pero es posible que los par√°metros no se
representen de forma un√≠voca. Si utiliza estos par√°metros en un script, este provocar√° un
aviso en la compilaci√≥n.
‚óè El evento "MouseDown" del Push Button Control se migra a los eventos "Pulsar el bot√≥n
izquierdo del rat√≥n" y "Pulsar el bot√≥n derecho del rat√≥n". El evento "MouseUp" del Push
Button Control se migra a los eventos "Soltar el bot√≥n izquierdo del rat√≥n" y "Soltar el bot√≥n
derecho del rat√≥n". Pero es posible que los par√°metros no se representen de forma
un√≠voca. Si utiliza estos par√°metros en un script, este provocar√° un aviso en la compilaci√≥n.
‚óè Los eventos "KeyPress" y "MouseMove" del Push Button Control no pueden migrarse. Con
la migraci√≥n se pierde la configuraci√≥n de ambos eventos. En el informe de migraci√≥n se
emite un aviso.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)
Cambios de valor en las propiedades de objeto debidos a la migraci√≥n (WinCC V7)
(P√°gina 109)

108

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Cambios de valor en las propiedades de objeto debidos a la migraci√≥n (WinCC V7)
Introducci√≥n
Debido a la unificaci√≥n de propiedades de objeto de WinCC V7 y WinCC flexible, en el
transcurso de la migraci√≥n puede resultar necesario introducir cambios en algunas
propiedades de objeto. La migraci√≥n calcula los cambios de manera que la representaci√≥n de
los objetos tras la migraci√≥n sea igual que antes de ella. Estos cambios durante la migraci√≥n
dan lugar a diferentes unidades de medida y valores para algunas propiedades de objeto en
la configuraci√≥n.

Migraci√≥n de los ajustes de escritura de un objeto
En WinCC V7 y WinCC algunas veces se utilizan unidades de medida diferentes para el
tama√±o de las fuentes utilizadas. En la migraci√≥n se calcula el tama√±o de fuente para que la
representaci√≥n de la fuente con un nivel de zoom del 100% tenga el mismo tama√±o. A causa
de las unidades de medida distintas, las cifras de los tama√±os de las fuentes cambian tras la
migraci√≥n.
Ejemplo:
Fuente antes de la migraci√≥n

Fuente tras la migraci√≥n

Arial 10 puntos

Arial 13 p√≠xeles

Arial 16 puntos

Arial 21 p√≠xeles

Tahoma 10 puntos

Tahoma 13 p√≠xeles

Tahoma 16 puntos

Tahoma 21 p√≠xeles

Migraci√≥n de los datos de tama√±o de un objeto
En los objetos del Report Designer en WinCC V7, los datos de posici√≥n y de tama√±o se
especifican, p. ej., en cent√≠metros, pulgadas o puntos, seg√∫n el ajuste predeterminado de
Report Designer. En WinCC, los datos de posici√≥n y tama√±o se indican en p√≠xeles. En la
migraci√≥n, los valores de tama√±o se calculan consecuentemente para que la representaci√≥n
de los objetos antes y despu√©s de la migraci√≥n sea id√©ntica. De este c√°lculo resultan valores
num√©ricos diferentes para los datos de las propiedades de objeto tras la migraci√≥n. Los objetos
afectados son, p. ej., la posici√≥n X, la posici√≥n Y, la anchura y la altura.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)
Migraci√≥n de im√°genes y objetos de imagen (WinCC V7) (P√°gina 105)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

109

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de grupos de objetos (WinCC V7)
Grupo de objetos con objetos en varios niveles
En WinCC V7, los objetos de un grupo de objetos pueden situarse en diferentes niveles de la
imagen y est√°n sujetos a la gesti√≥n de niveles de la imagen. El grupo de objetos no posee
ninguna gesti√≥n de niveles por s√≠ mismo. Por ello, en WinCC V7 es posible situar un objeto en
un nivel entre dos objetos de un grupo de objetos. El orden Z es v√°lido para todos los objetos
dentro de la imagen. As√≠ pues, en WinCC V7 es posible hacer invisible un objeto de un grupo
de objetos desactivando un nivel.
En WinCC, un grupo de objetos y los objetos contenidos en √©l se encuentran en el mismo nivel
que la imagen. En WinCC un grupo de objetos posee su propia gesti√≥n de niveles. El orden Z
de los objetos es v√°lido en WinCC solo dentro del grupo de objetos. Si un objeto se sit√∫a sobre
un grupo de objetos y se desplaza un nivel hacia atr√°s, este objeto queda detr√°s del grupo de
objetos y ya no es visible. El objeto tampoco se aceptar√° en el orden Z del grupo de objetos.
Por ello, en WinCC no es posible hacer un objeto invisible en un grupo de objetos mientras se
desactiva un nivel. Si la migraci√≥n no puede reproducir por completo la colocaci√≥n de un grupo
de objetos, se emite un mensaje en el informe de migraci√≥n. Despu√©s de la migraci√≥n, verifique
que el grupo de objetos est√© representado correctamente.

Grupo de objetos con objetos no soportados
Un grupo de objetos en WinCC consta de como m√≠nimo 2 objetos. Si WinCC no soporta un
objeto de un grupo, no obstante se migrar√° el grupo. No se migrar√° un objeto que no se soporte
y no estar√° en el grupo una vez realizada la migraci√≥n. Si el grupo de objetos contiene
√∫nicamente 2 objetos antes de la migraci√≥n y uno de ello no se migra, se produce un grupo de
objetos no v√°lido. El grupo de objetos se identifica en WinCC como objeto no v√°lido.
Seleccione el objeto no v√°lido y excluya la agrupaci√≥n. Se muestra el objeto v√°lido.
Cuando no se puedan migrar todos los objetos de un grupo, se volver√°n a calcular las
coordenadas y el tama√±o del grupo y se adaptar√°n consecuentemente.
En los dos casos arriba descritos se realiza una entrada en el informe de migraci√≥n.

Migraci√≥n de propiedades de un grupo de objetos
Los valores est√°ticos y las dinamizaciones de las propiedades de los objetos agrupados se
migran sin restricciones.
Los grupos de objetos de WinCC V7 tienen propiedades propias: posici√≥n X, posici√≥n Y,
ancho, altura, nombre de objeto, nivel, texto de tooltip, autorizaciones, autorizaci√≥n de manejo
y visibilidad. Los valores est√°ticos y las dinamizaciones de estas propiedades se migran sin
restricciones.
Adem√°s de las propiedades anteriores, un grupo de objetos tambi√©n contiene una recopilaci√≥n
de todas las propiedades de los objetos agrupados. Gracias a esta agrupaci√≥n de
propiedades, en WinCC V7 es posible definir p. ej., el color de fondo de todos los objetos
agrupados. Los cambios se guardan tanto en el grupo de objetos como en los objetos
agrupados. Los cambios realizadas en el grupo de objetos no se migran. En la migraci√≥n
tambi√©n se pierden las dinamizaciones de las propiedades recopiladas.

110

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)

Migraci√≥n de objetos de usuario (WinCC V7)
Introducci√≥n
WinCC ya no soporta los objetos de usuario. La migraci√≥n compila los objetos de usuario a
faceplates. Los objetos de usuario id√©nticos se agrupan en un tipo de faceplate. Cada objeto
de usuario se sustituye por una instancia de faceplate.

Objetos de usuario
Un faceplate no ofrece exactamente las mismas caracter√≠sticas que un objeto de usuario. Por
eso hay que tener en cuenta las siguientes particularidades al realizar la migraci√≥n:
‚óè En un faceplate s√≥lo se puede interconectar una propiedad del objeto interior a una
propiedad del faceplate. Si una propiedad de un objeto interno est√° interconectada con
varias propiedades del objeto de usuario, solo se migrar√° la conexi√≥n con la primera
propiedad. Para las propiedades no migradas se emite un aviso en el informe de migraci√≥n.
‚óè Las coordenadas de la posici√≥n de un objeto dentro del objeto de usuario no se pueden
interconectar con las propiedades de un faceplate. Se migra la propiedad del objeto de
usuario a la que se ha configurado una posici√≥n. Si en esta propiedad hay una din√°mica
configurada, √©sta se migra igualmente. Sin embargo, la propiedad y la din√°mica del
faceplate ya no est√°n interconectadas con la posici√≥n de objeto del objeto interior.
‚óè Los faceplates no pueden rotarse ni voltearse. Si el proyecto contiene objetos de usuario
girados o volteados, se emite un aviso en el informe de migraci√≥n.
‚óè Si un objeto de usuario tiene objetos que la migraci√≥n no soporta, dichos objetos no
aparecen en el faceplate resultante tras la migraci√≥n. Entonces, el faceplate s√≥lo tiene los
objetos que soporta la migraci√≥n. Si hay una din√°mica asociada a un objeto no soportado,
dicha din√°mica se pierde. Si no se migra un objeto interior de un objeto de usuario, dado el
caso cambia el tama√±o del faceplate resultante. La disposici√≥n de objeto del objeto de
usuario se mantiene y se utiliza en el faceplate.
‚óè La posici√≥n de un objeto interno est√° relacionada en el proyecto del usuario con el sistema
de coordenadas de la imagen en el que se ubica el objeto de usuario. Un faceplate tiene un
sistema propio de coordenadas independiente de la imagen en el que est√© colocado. Por
ello, durante la migraci√≥n se modifican las coordenadas de los objetos interiores. Si el
proyecto tiene un script que utiliza o modifica las coordenadas de un objeto interior, debe
adaptar adecuadamente dicho script. La modificaci√≥n de las coordenadas de un objeto
interior no se registra en el informe.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

111

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
‚óè La utilizaci√≥n del objeto "Conector" no est√° permitida en un faceplate. Por eso no se migra
un conector dentro de un objeto de usuario.
‚óè No est√° permitido el uso de controles de WinCC en un faceplate. Por eso no se migra un
control dentro de un objeto de usuario. Una excepci√≥n son los siguientes controles que
tambi√©n se migran como objeto interno de un objeto de usuario:
‚Äì WinCC Digital/Analog Clock Control
‚Äì WinCC Gauge Control
‚Äì Objeto Slider
Cuando la migraci√≥n efect√∫a los cambios en los datos de configuraci√≥n debido a las
particularidades descritas, estos cambios se registran en el protocolo de migraci√≥n.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)
Compatibilidad de objetos en la migraci√≥n (WinCC V7) (P√°gina 99)
Migraci√≥n de im√°genes y objetos de imagen (WinCC V7) (P√°gina 105)
Migraci√≥n de grupos de objetos (WinCC V7) (P√°gina 110)
Migraci√≥n de dinamizaciones mediante un cuadro de di√°logo din√°mico (WinCC V7)
(P√°gina 112)
Migraci√≥n de dinamizaciones por script (WinCC V7) (P√°gina 113)
Migraci√≥n de controles (WinCC V7) (P√°gina 115)
Migraci√≥n de los ajustes de color (WinCC V7) (P√°gina 116)
Migraci√≥n de una dinamizaci√≥n mediante conexi√≥n directa (WinCC V7) (P√°gina 114)
Cambios de valor en las propiedades de objeto debidos a la migraci√≥n (WinCC V7)
(P√°gina 109)

Migraci√≥n de dinamizaciones mediante un cuadro de di√°logo din√°mico (WinCC V7)
Introducci√≥n
Para la animaci√≥n de objetos de imagen en WinCC V7 dispone del cuadro de di√°logo de
dinamizaci√≥n. En WinCC las funciones del cuadro de di√°logo de dinamizaci√≥n se representan
como animaci√≥n de una propiedad. Esta animaci√≥n le ofrece funcionalidades para la
dinamizaci√≥n parecidas a las del cuadro de di√°logo de dinamizaci√≥n de WinCC V7. Si en un
proyecto de WinCC V7 tiene configurada una dinamizaci√≥n de una propiedad, la migraci√≥n
convertir√° esta dinamizaci√≥n en una animaci√≥n de WinCC.
Nota
Las nuevas propiedades introducidas en WinCC desde la versi√≥n V7.3 no se migran a WinCC.
Si una de las propiedades nuevas est√° dinamizada, se emite un mensaje en el informe de
migraci√≥n sobre las propiedades dinamizadas no migradas.

112

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de dinamizaciones mediante un cuadro de di√°logo de dinamizaci√≥n
La expresi√≥n de una dinamizaci√≥n que se haya creado con un cuadro de di√°logo de
dinamizaci√≥n de WinCC V7 se basa en la sintaxis de C Script. La migraci√≥n intenta convertir
la expresi√≥n de una dinamizaci√≥n de WinCC V7 a la sintaxis de VB Script. En la mayor√≠a de los
casos, esta forma de conversi√≥n se puede llevar a cabo si la dinamizaci√≥n utiliza los siguientes
operadores C:
‚óè Operadores aritm√©ticos [+, -, *, /, %, ^]
‚óè Operadores l√≥gicos [&&, ||]
‚óè Operadores comparativos [<, >, !=, <=, >=, ==]
‚óè Constantes num√©ricas
Si la conversi√≥n a la sintaxis de VB Script no es posible, la dinamizaci√≥n se representa en un
C Script. La reproducci√≥n en un C script tiene lugar en los siguientes casos:
‚óè Cuando la expresi√≥n del cuadro de di√°logo de dinamizaci√≥n no utiliza ninguna variable o
disparador c√≠clico. Cuando se utilice una variable y una variable trigger, √©stas deben
coincidir. No se permite ning√∫n trigger c√≠clico al utilizar variables en la expresi√≥n.
‚óè Si el resultado de la expresi√≥n en el cuadro de di√°logo din√°mico del tipo de datos es
"Anal√≥gico", y en el campo "Resultado de la expresi√≥n" el √°mbito de aplicaci√≥n "otros" tiene
otro valor diferente del valor "Est√°tico" de la propiedad dinamizada.
‚óè Cuando en la expresi√≥n del cuadro de di√°logo de dinamizaci√≥n se utilizan varias variables
y no todas las variables tienen la misma configuraci√≥n para el Quality Code.
‚óè Cuando en la expresi√≥n del cuadro de di√°logo de dinamizaci√≥n se utiliza una variable cuyo
estado se usa.
‚óè Cuando la expresi√≥n del cuadro de di√°logo de dinamizaci√≥n no se puede convertir a un
equivalente en VB Script.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)

Migraci√≥n de dinamizaciones por script (WinCC V7)
Introducci√≥n
Para que los VB Scripts y los C Scripts de WinCC V7 sigan siendo funcionales, la migraci√≥n
aplica diferentes medidas. Estas medidas tambi√©n son aplicables a acciones en eventos.

Migraci√≥n de VB Scripts para la dinamizaci√≥n
En WinCC V7 puede implantar con VB Script varias funciones en una dinamizaci√≥n, lo que ya
no est√° permitido en WinCC. Cuando la migraci√≥n encuentra varias funciones en un script, solo
se migra la funci√≥n a la que se llama durante el disparo del evento. Las dem√°s funciones se
migran a la secci√≥n de declaraci√≥n. Al compilar el proyecto, esto provoca un aviso.
En WinCC cambian algunos nombres de funci√≥n de los VB Scripts respecto de WinCC V7. El
nombre de funci√≥n "LeftTrigger" cambia, p. ej., a "LeftValue". Si la funci√≥n debe devolver un

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

113

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
valor, el c√≥digo fuente contiene un Statement, en el que al nombre de funci√≥n se le asigna el
valor. La migraci√≥n busca y reemplaza el nombre de funci√≥n dentro de la funci√≥n y del
encabezado de la funci√≥n. Si el nuevo nombre de funci√≥n ya est√° siendo utilizado como
nombre de una funci√≥n, de una variable o de un par√°metro, se emite un mensaje en el informe
de migraci√≥n. Adapte Ud. mismo la configuraci√≥n una vez realizada la migraci√≥n.

Migraci√≥n de C Scripts para la dinamizaci√≥n
En WinCC V7, algunos par√°metros de scripts en C tienen un nombre distinto del que tienen en
WinCC. Para mantener funcional un script, la migraci√≥n a√±ade una variable con el nombre de
par√°metro utilizado hasta la fecha para cada nombre de par√°metro modificado.
Ejemplo:
El nombre de par√°metro "lpszPictureName" se sustituye por el nombre de par√°metro
"ScreenName". La migraci√≥n a√±ade al script la siguiente variable: "char* lpszPictureName =
ScreenName".
Si ya existe una variable o un par√°metro con el mismo nombre, se emite un mensaje en el
informe de migraci√≥n.
Los siguientes nombres de par√°metros se ven afectados:
WinCC V7

WinCC

lpszPictureName

ScreenName

lpszObjectName

ObjectName

lpszPropertyName

PropertyName

En WinCC cambian los nombres de funci√≥n de los scripts en C respecto de WinCC V7. El
nombre de la funci√≥n de una dinamizaci√≥n recibe la expresi√≥n "_main". En WinCC, la expresi√≥n
se modifica a "<Nombre de la propiedad>Value". La migraci√≥n corrige los nombres como los
cambios de los nombres de funci√≥n de los VB Scripts en el p√°rrafo anterior.

Migraci√≥n de disparadores
Los disparadores de WinCC V7 de tipo 'ciclo de ventana' se migran al ciclo de imagen v√°lido
en WinCC.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)

Migraci√≥n de una dinamizaci√≥n mediante conexi√≥n directa (WinCC V7)
Migraci√≥n de una conexi√≥n directa
Una dinamizaci√≥n por conexi√≥n directa se migra como una lista de funciones.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)

114

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de controles (WinCC V7)
Introducci√≥n
Un proyecto de WinCC V7 puede contener los siguientes controles:
‚óè Controles de WinCC anteriores a V7
WinCC V7 soporta los controles anteriores a WinCC V7. En WinCC no hay soporte para
estos controles. Si un proyecto contiene controles anteriores a WinCC V7, estos controles
se migran a la versi√≥n a partir de WinCC V7. Tambi√©n pueden cambiar los nombres de
propiedades, botones o de la barra de herramientas.
En runtime pueden producirse cambios en la representaci√≥n.
Los scripts que afectaban a controles anteriores a WinCC V7 deben adaptarse despu√©s de
la migraci√≥n.
‚óè Controles de WinCC a partir de V7
WinCC soporta los controles expuestos m√°s abajo a partir de WinCC V7.
‚óè Controles de otros fabricantes
La migraci√≥n tambi√©n soporta controles ActiveX y controles .Net sencillos de otros
fabricantes. No se soportan los controles XAML, p. ej., los controles WPF (Windows
Presentation Foundation). Los controles ActiveX deben estar registrados en el sistema
operativo. Si un control ActiveX no est√° registrado, la migraci√≥n se interrumpe.
Si guarda un proyecto con la herramienta de migraci√≥n y realiza la migraci√≥n propiamente
dicha en otro PC, es necesario que los controles tambi√©n est√©n registrados en ese PC.

Controles de WinCC soportados
WinCC soporta los siguientes controles de WinCC V7:
‚óè Siemens HMI Symbol Library 1.4.1
‚óè WinCC Channel Diagnosis Control
‚óè WinCC Digital/Analog ClockControl
‚óè WinCC Gauge Control
‚óè WinCC Slider Control
‚óè WinCC Ruler Control
‚óè WinCC Media Control
‚óè WinCC AlarmControl
‚óè WinCC FunctionTrendControl
‚óè WinCC OnlineTableControl
‚óè WinCC OnlineTrendControl
‚óè WinCC UserArchiveControl
‚óè CCDiskSpace.Diskspace
‚óè WinCC_WB.WinCCWebBrowser

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

115

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Particularidades de WinCC OnlineTableControl
En WinCC V7, WinCC OnlineTableControl puede mostrar los rebases de valores en distintos
colores. Para ello pueden configurarse por lo menos dos valores l√≠mite superiores y dos
inferiores, adem√°s de los colores correspondientes.
WinCC no soporta estas propiedades. En el informe de migraci√≥n se emite un mensaje si se
han configurado los valores correspondientes.

Particularidades de WinCC AlarmControl
WinCC no soporta el nuevo bloque de aviso "Class Priority" del WinCC AlarmControl de
WinCC V7. En el informe de migraci√≥n se emite un mensaje si se ha configurado el bloque de
aviso.

Controles de WinCC no soportados
WinCC no soporta los siguientes controles:
‚óè Push Button Control de WinCC
El Push Button Control de WinCC se reproduce en un bot√≥n de comando en WinCC.
Encontrar√° m√°s informaci√≥n al respecto en Migraci√≥n de im√°genes y objetos de imagen
(WinCC V7) (P√°gina 105).
‚óè XAML Controls, p. ej. controles WPF
Si un proyecto contiene controles XAML, estos no se migran. Por cada control no migrado
aparecer√° un aviso en el informe de migraci√≥n.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)
Migraci√≥n de im√°genes y objetos de imagen (WinCC V7) (P√°gina 105)

Migraci√≥n de los ajustes de color (WinCC V7)
Migraci√≥n de los ajustes de color de un objeto
En WinCC V7 es posible configurar los ajustes de color de los objetos con la paleta de colores
central. En WinCC se suprime la paleta central de colores. La migraci√≥n se encarga de los
ajustes de color para un objeto de la paleta de colores central y establece los colores
directamente en el objeto correspondiente. En un proyecto migrado no es posible realizar un
cambio central de los ajustes de color.

Consulte tambi√©n
Migraci√≥n de objetos de usuario (WinCC V7) (P√°gina 111)

116

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de avisos y grupos de avisos (WinCC V7)
Introducci√≥n
El sistema de avisos de WinCC se diferencia claramente del sistema de avisos de WinCC V7
en su estructura.
WinCC V7 ofrece hasta 18 categor√≠as con 16 tipos de aviso cada una.
WinCC solo ofrece categor√≠as pero no tipos de aviso.
Durante la migraci√≥n de un proyecto los tipos de avisos se convierten en categor√≠as en el
proyecto migrado. Los tipos de avisos se suprimen completamente.

Migraci√≥n de grupos de avisos
Las categor√≠as y tipos de aviso se migran seg√∫n el siguiente esquema:
La migraci√≥n adjudica ID aprobadas para todas las categor√≠as de aviso y sus tipos de aviso. El
sistema reserva las ID 1 - 63 en WinCC. La migraci√≥n comienza la adjudicaci√≥n de las ID a
partir del ID 64.
Categor√≠a de aviso WinCC V7

Tipo de aviso WinCC V7

Categor√≠a de aviso WinCC

ID 1

ID 1-16

ID 64-79

ID 2

ID 17-32

ID 80-95

...

...

...

ID 16

ID 241-256

ID 304-319

ID 17

ID 257-272
de las que se emplean 257-258

ID 320-335

ID 18

ID 273-288
de las que se emplean 273-274

ID 336-351

La migraci√≥n cuenta las nuevas ID para todas las categor√≠as y tipos de aviso que contiene el
proyecto que se va a migrar.
Despu√©s de la adjudicaci√≥n de ID, las categor√≠as y tipos de aviso ya existentes en el proyecto
se migran. Para garantizar un nombre un√≠voco para las categor√≠as de aviso, la migraci√≥n une
los nombres de las categor√≠as de aviso con los tipos de avisos contenidos en ellas.
Ejemplo:
En WinCC V7 existe la categor√≠a de aviso "Tolerance" con el tipo de aviso "ToleranceHigh".
Despu√©s de la migraci√≥n la categor√≠a pasar√° a ser "Tolerance_ToleranceHigh".
A excepci√≥n de los scripts y funciones ODK, todos los lugares de uso (ubicaciones) en el
proyecto se corrigen en consecuencia. Por ejemplo, todos los filtros est√°ticos de un visor de
avisos se adaptan a la nueva categor√≠a de aviso.
La migraci√≥n no corrige ning√∫n script o funciones ODK que utilicen un tipo de aviso. Si la
migraci√≥n establece el uso de un tipo de aviso en un script, se emite un mensaje en el informe
de migraci√≥n. Despu√©s de la migraci√≥n, adapte Ud. mismo dichos scripts.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

117

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de avisos
En WinCC V7, los avisos de sistema tienen IDs del rango comprendido entre 1000000 y
1019999. No obstante, en este rango tambi√©n es posible configurar avisos libremente.
En WinCC, el rango entre 1000000 y 1019999 est√° reservado para avisos de sistema.
Los avisos de sistema de WinCC V7 se migran. Los avisos definidos por el usuario con IDs
dentro de este rango no se migran.
Si los avisos de usuario contienen caracteres ASCII no soportados, todos ellos se
reemplazar√°n por la expresi√≥n siguiente: "#<ASCII-Code>".

Ajustes de la archivaci√≥n
En WinCC V7 se pueden establecer los ajustes de archivado para cada aviso por separado. En
WinCC se pueden establecer los ajustes para la archivaci√≥n solo para una categor√≠a y no para
avisos individuales. Si un aviso de la archivaci√≥n est√° activado, la migraci√≥n toma este ajuste
para la categor√≠a completa. As√≠ se asegura que no se pierdan los ajustes de archivaci√≥n. As√≠
se archivan despu√©s de la migraci√≥n todos los avisos que est√°n contenidos en las categor√≠as
de aviso, incluso si estos no se hab√≠an archivado antes de la migraci√≥n. Para cada aviso
afectado se emite un aviso en el informe de migraci√≥n.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)
Migraci√≥n de ficheros de usuario (WinCC V7) (P√°gina 118)

Migraci√≥n de ficheros de usuario (WinCC V7)
Migraci√≥n de archivos de usuario
Los ficheros de usuario de WinCC V7 se nombran en las recetas de WinCC. Los campos de
datos de un fichero de usuario se denominan como elementos de receta.
Al migrar ficheros de usuario, los datos de configuraci√≥n se reflejan en recetas. Las vistas se
reflejan en recopilaciones de recetas. Para la migraci√≥n debe considerarse la siguiente regla:
‚óè Si se ha configurado una relaci√≥n en una vista, la relaci√≥n no puede ser "CERO".
Si la relaci√≥n da como resultado "CERO", se emite un aviso de error al compilar el proyecto
migrado. Para resolver el error, se debe volver a configurar la relaci√≥n en el visor de recetas
de forma que se cree una relaci√≥n v√°lida.
‚óè En WinCC V7 era posible configurar variables de control independientemente de las
especificaciones para la comunicaci√≥n. Las variables de control solo se migran si la
comunicaci√≥n se desarrolla a trav√©s de variables WinCC.
‚óè En WinCC V7, en la comunicaci√≥n a trav√©s de variables de datos sin formato la ID del PLC
se utiliza como nombre un√≠voco del fichero. En WinCC se utiliza el n√∫mero de receta para
la identificaci√≥n un√≠voca de una receta. La informaci√≥n de la ID del PLC no se migra.
‚óè Si en WinCC V7 hay un alias configurado para un fichero de usuario, este se migra al
nombre de visualizaci√≥n de la receta.

118

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Los datos runtime de los ficheros de usuario pueden copiarse durante la migraci√≥n.

Consulte tambi√©n
Copia de los datos Runtime (WinCC V7) (P√°gina 129)
Migraci√≥n de avisos y grupos de avisos (WinCC V7) (P√°gina 117)

Scripts y funciones est√°ndar (WinCC V7)
Migraci√≥n de funciones y acciones (WinCC V7)
Introducci√≥n
Igual que WinCC V7, WinCC tambi√©n soporta tanto ANSI-C como VBS. En el proceso de
migraci√≥n de funciones y acciones, debe tener en cuenta algunos aspectos relacionados con
los cambios dentro del sistema. A continuaci√≥n se describen las condiciones de emergencia
relacionadas con la migraci√≥n.

Migraci√≥n de funciones y acciones
Al migrar funciones y acciones, tenga en cuenta los siguientes puntos:
‚óè WinCC ya no soporta scripts VBA, por lo que no se migrar√°n los scripts VBA.
‚óè Algunas funciones reciben nombres nuevos en WinCC. En la migraci√≥n no se adaptan
nombres de funci√≥n. Los scripts son funcionales sin adaptaci√≥n, ya que en ellos pueden
continuar us√°ndose los nombres utilizados hasta ahora. Sin embargo, los nombres
anteriores ya no son compatibles con IntelliSense y la ayuda.

Particularidades de VB Scripts
‚óè En WinCC V7, los scripts en VB se estructuran como m√≥dulos que pueden contener uno o
varios procedimientos. En WinCC cada script solo puede contener un procedimiento. La
migraci√≥n divide los m√≥dulos en varios procedimientos y aplica a cada procedimiento un
nuevo script.
Un script de WinCC V7 puede contener declaraciones de varias variables globales. Las
variables globales se inicializan mediante el llamamiento de los scripts y est√°n disponibles
para todos los procedimientos del script. En caso de divisi√≥n de un script, las variables
globales se migran al script que sigue a la declaraci√≥n de variables. Despu√©s de la
migraci√≥n debe asegurarse de que este primer script tambi√©n se llama primero para que se
inicialicen las variables globales. Al terminar la inicializaci√≥n, las variables globales est√°n
disponibles para los scripts divididos.
‚óè En WinCC no se soporta la declaraci√≥n de categor√≠as VB.
‚óè En WinCC, los par√°metros de un VB Script deben transferirse b√°sicamente con las
palabras clave "ByRef" o "ByVal". En los scripts de WinCC V7 no hay ninguna transferencia
definida con las palabras clave. Durante la migraci√≥n, la transferencia de los par√°metros se
completa con la palabra clave "ByRef".

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

119

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Unos criterios estrictos en la comprobaci√≥n de funciones pueden provocar que los scripts y las
funciones deban adaptarse tras la migraci√≥n. En WinCC los errores y las advertencias se
generan, entre otras cosas, por:
‚óè Objetos, como variables u objetos de imagen, que est√°n referenciados en funciones, pero
que no existen.
‚óè Uso incorrecto del modelo de objeto VB, p. ej. HmiRuntime.ActivateScreen.Item.
‚óè Un n√∫mero diferente de par√°metros en la definici√≥n y llamada de una funci√≥n.
‚óè Funciones VB que no devuelven un valor de retorno.
‚óè Si en una funci√≥n VB se activa el valor de retorno de otra funci√≥n.
‚óè Variables que se utilizan en una funci√≥n VB, pero que no est√°n definidas en ella.

Particularidades de funciones C
En WinCC V7 se respeta el uso de may√∫sculas y min√∫sculas en los nombres de las funciones
C. En WinCC no se permiten nombres que solo se diferencien en la escritura con may√∫sculas
o min√∫sculas. En la migraci√≥n se respetan las may√∫sculas y min√∫sculas en los nombres de
funciones. Si un proyecto migrado contiene nombres de funci√≥n que solo se distinguen por las
may√∫sculas y min√∫sculas, una de las funciones se marca como no v√°lida en el sistema de
ingenier√≠a. En la compilaci√≥n se muestra el mensaje de error correspondiente.
Unos criterios estrictos en la comprobaci√≥n de funciones pueden provocar que los scripts y las
funciones deban adaptarse tras la migraci√≥n. En WinCC los errores y las advertencias se
generan, entre otras cosas, por:
‚óè Objetos, como variables u objetos de imagen, que est√°n referenciados en funciones, pero
que no existen.
‚óè Un n√∫mero diferente de par√°metros en la definici√≥n y llamada de una funci√≥n.
‚óè Si la definici√≥n externa de una funci√≥n utilizada no coincide con la definici√≥n de la funci√≥n.
En ese caso es posible eliminar la definici√≥n externa o adaptar la definici√≥n.
‚óè Si los nombres de funciones o variables en los Defines contiene caracteres especiales no
permitidos

Funciones ODK
En WinCC V7 se soportan funciones ODK tanto para cambios de datos CS como de datos de
runtime. En WinCC se soportan solo las funciones para los cambios de datos de runtime. Las
funciones ODK para los cambios de datos CS ya no se soportan. Las funciones y aplicaciones
que activan estas funciones ODK despu√©s de la migraci√≥n ya no funcionan eventualmente
como se desea. Para m√°s informaci√≥n sobre la utilizaci√≥n de las funciones ODK, consulte la
Ayuda en pantalla de Runtime API.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)
Migraci√≥n de archivos header (WinCC V7) (P√°gina 121)
Migraci√≥n de acciones (WinCC V7) (P√°gina 121)

120

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
Migraci√≥n de funciones est√°ndar (WinCC V7) (P√°gina 122)
Cambio de nombres de funci√≥n (WinCC V7) (P√°gina 130)

Migraci√≥n de archivos header (WinCC V7)
Introducci√≥n
En el proceso de migraci√≥n de archivos header, debe tener en cuenta algunos aspectos
relacionados con los cambios dentro del sistema. A continuaci√≥n se describen los cambios que
tienen lugar debido a la migraci√≥n.

Migraci√≥n de archivos header
En WinCC V7 los archivos header se almacenan en el proyecto de forma predeterminada. Los
archivos header almacenados en el proyecto se migran y se almacenan en el dispositivo
correspondiente del √°rbol de proyectos de WinCC, en la secci√≥n "Funciones > C Header". Si
ha almacenado los archivos header en otro lugar en WinCC V7 y los ha incluido en el proyecto,
estos archivos header no se migran. Debe incluir Ud. mismo los archivos header no migrados
en el proyecto.

Consulte tambi√©n
Migraci√≥n de funciones y acciones (WinCC V7) (P√°gina 119)

Migraci√≥n de acciones (WinCC V7)
Introducci√≥n
Las acciones de WinCC V7 se migran a tareas en WinCC. En WinCC las tareas se administran
en el Editor "Tareas". En la migraci√≥n de acciones hay que tener en cuenta algunos aspectos
relacionados con los cambios por parte del sistema.

Migraci√≥n de acciones
A una tarea de WinCC siempre se le asigna solo un disparador. En WinCC V7 existe la
posibilidad de configurar varios disparadores para disparar una acci√≥n, p. ej., un disparador de
variable y un disparador c√≠clico. Durante el proceso de migraci√≥n, una acci√≥n con varios
activadores se divide en varias tareas. Para cada disparador se crea una tarea nueva.
En WinCC V7 hay acciones globales y acciones locales. En WinCC s√≥lo hay tareas globales.
Una acci√≥n global se migra a una tarea global. Una acci√≥n local se migra de igual forma a una
tarea global. Sin embargo, el script se amplia a una tarea global. En la ampliaci√≥n del script se
analiza la variable del sistema "@LocalMachineName" para que la tarea solo se ejecute en el
PC destinado para la acci√≥n local. Por lo tanto, compruebe el nombre del PC en el script
migrado y, en caso necesario, modif√≠quelo.
Si un script se ampl√≠a, se emite un mensaje en el informe de migraci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

121

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de acciones protegidas por contrase√±a
En WinCC V7 era posible proteger acciones con una contrase√±a. En la migraci√≥n se generan
para ello una tarea y un script protegido por contrase√±a.

Consulte tambi√©n
Migraci√≥n de funciones y acciones (WinCC V7) (P√°gina 119)

Migraci√≥n de funciones est√°ndar (WinCC V7)
Migraci√≥n de funciones est√°ndar
Las funciones est√°ndar forman parte de la instalaci√≥n runtime de WinCC, por eso no se migran.
Si ha cambiado el c√≥digo de fuente de una funci√≥n est√°ndar en su proyecto de WinCC V7, se
pierde el cambio durante la migraci√≥n.

Funci√≥n est√°ndar " OnDeactivateExecute "
La funci√≥n est√°ndar "OnDeactivateExecute" se migra a una tarea con el disparador "Runtime
Parada".

Funciones est√°ndar definidas por el usuario
Las funciones est√°ndar definidas por el usuario se guardan en WinCC V7 en la carpeta
"APLIB". Para garantizar la migraci√≥n de funciones est√°ndar definidas por el usuario, conviene
copiar dichas funciones en el directorio del proyecto.
Las funciones C est√°ndar definidas por el usuario se encuentran en el directorio de instalaci√≥n
de WinCC V7, en la carpeta "wincc\aplib". Copie dichas funciones en la carpeta "library" del
directorio del proyecto.
Las funciones C est√°ndar definidas por el usuario se encuentran en el directorio de instalaci√≥n
de WinCC V7, en la carpeta "wincc\aplib\ScriptLibStd". Copie dichas funciones en la carpeta
"ScriptLib" del directorio del proyecto.

Consulte tambi√©n
Migraci√≥n de funciones y acciones (WinCC V7) (P√°gina 119)

Migraci√≥n de informes (WinCC V7)
Principios b√°sicos de la migraci√≥n de informes (WinCC V7).
Introducci√≥n
El sistema de informes de WinCC V7 puede utilizar y visualizar tanto datos de configuraci√≥n
como datos de Runtime. WinCC soporte √∫nicamente la documentaci√≥n de runtime.

122

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
En los archivos de dise√±o de WinCC V7 se consigna qu√© datos se documentar√°n. La salida de
los contenidos se controla mediante trabajos de impresi√≥n.

Migraci√≥n de informes
La migraci√≥n reconoce los archivos de dise√±o por la documentaci√≥n de runtime que contienen.
Si un archivo de dise√±o contiene objetos para la documentaci√≥n del proyecto, este archivo de
dise√±o no se migra. Si un archivo de dise√±o contiene dise√±os incrustados, que se emplean
igualmente para la documentaci√≥n del proyecto, este archivo de dise√±o no se migra. Si un
trabajo de impresi√≥n se refiere a un archivo de dise√±o para la documentaci√≥n del proyecto, este
trabajo de impresi√≥n no se migra. Por cada archivo de dise√±o que no se migra se emite un
mensaje en el informe de migraci√≥n.
Nota
Si un proyecto de WinCC V7 se cre√≥ con versiones anteriores de WinCC (p. ej., V5.0), un
informe puede contener objetos que obtengan los datos en Runtime de proveedores de una
versi√≥n anterior. Dichos objetos no se migran.
Contenidos dependientes del idioma
El sistema de informes de WinCC V7 no soporta contenidos en varios idiomas. Es por eso que
el sistema de informe necesita un archivo de dise√±o separado para cada idioma de runtime. La
asignaci√≥n de idioma de los archivos se determina mediante las convenciones de nombres de
la carpeta contenedora o mediante nombres de carpetas. En la migraci√≥n, los archivos de
dise√±o espec√≠ficos del idioma se unen en un archivo de informe de varios idiomas. Para crear
un informe en varios idiomas, la migraci√≥n debe considerar diferentes archivos. Al unir los
archivos de dise√±o para diferentes idiomas, se aplican las siguientes reglas:
‚óè Para la migraci√≥n de los objetos de informe se utilizar√° el archivo de dise√±o que se haya
encontrado en primer lugar. Por eso se pierden las diferencias en el dise√±o en diferentes
idiomas.
‚óè Para extraer los contenidos espec√≠ficos del idioma se utilizar√°n todos los archivos en
funci√≥n de un idioma de un informe.
‚óè Las entradas de texto de un informe que no depende del idioma se asumir√°n para los
idiomas de runtime configurados.

Migraci√≥n de trabajos de impresi√≥n
En WinCC V7 se definen los par√°metros de inicio de un trabajo de impresi√≥n en las
propiedades del respectivo trabajo de impresi√≥n. En WinCC no se puede definir ning√∫n
par√°metro de iniciaci√≥n en un trabajo de impresi√≥n. Para iniciar las tareas de impresi√≥n, tiene
a su disposici√≥n el planificador de tareas en WinCC. En el planificador de tareas hay una tarea
del tipo "Trabajo de impresi√≥n".
Durante la migraci√≥n de un trabajo de impresi√≥n c√≠clico, el trabajo de impresi√≥n se divide en
dos partes. La migraci√≥n genera una tarea del tipo "Trabajo de impresi√≥n" en el planificador de
tareas. Adem√°s, la migraci√≥n crea un trabajo de impresi√≥n en el sistema de informe y lo
conecta con la nueva tarea creada.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

123

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de un dise√±o de sistema
Se migran los siguientes dise√±os del sistema de WinCC V7:
WinCC V7
Trabajo de impresi√≥n

WinCC
Trabajo de impresi√≥n del sistema

WinCC
Informe del sistema

AlarmControl - Picture

Alarm Control - Picture

@Alarm Control - Picture

AlarmControl - Table

Alarm Control - Table

@Alarm Control - Table

FunctionTrendControl

Function Trend Control - Picture

@Function Trend Control - Picture

OnlineTrendControl - Picture

Online Trend Control - Picture

@Online Trend Control - Picture

OnlineTableControl - Picture

Online Table Control - Picture

@Online Table Control - Picture

OnlineTableControl - Table

Online Table Control - Table

@Online Table Control - Table

UserArchiveControl - Picture

Recipe Control - Picture

@Recipe Control - Picture

UserArchiveControl - Table

Recipe Control - Table

@Recipe Control - Table

RulerControl - Table

Ruler Control - Table

@Ruler Control - Table

RulerControl - Picture

Ruler Control - Picture

@Ruler Control - Picture

Los cambios realizados en uno de estos dise√±os de sistema tambi√©n est√°n disponibles tras la
migraci√≥n.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)
Migraci√≥n del dise√±o de informe (WinCC V7) (P√°gina 124)
Migraci√≥n del objeto "Variable" (WinCC V7) (P√°gina 125)

Migraci√≥n del dise√±o de informe (WinCC V7)
Introducci√≥n
El archivo de dise√±o de un informe de WinCC V7 est√° dividido en varios apartados. La
estructura de un dise√±o en WinCC se diferencia en algunos detalles. Por eso, la salida de un
informe despu√©s de la migraci√≥n puede ser un poco distinta de la salida en WinCC V7.

Migraci√≥n del dise√±o del informe
La siguiente tabla muestra la diferente estructura del dise√±o de WinCC V7 y WinCC:

124

WinCC V7

WinCC

Nivel est√°tico de la portada

Marca de agua en portada

Portada

Portada

Nivel est√°tico del encabezado

Encabezado de la p√°gina de detalles

Nivel est√°tico del contenido del informe

Marca de agua en p√°gina de detalles

Contenido del informe

P√°gina de detalles

Nivel est√°tico del pie de p√°gina

P√°gina de detalles del pie de p√°gina

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
WinCC V7

WinCC

P√°gina de cierre

√öltima p√°gina

Dise√±o de l√≠nea

Informe de l√≠nea

Si un dise√±o de informe tiene saltos de p√°gina, la migraci√≥n genera una nueva p√°gina de
detalles en el informe de WinCC para cada salto de p√°gina.
Los objetos de informe permitidos en un determinado apartado de un informe no son los
mismos en WinCC V7 que en WinCC. Si un objeto de informe de WinCC V7 no est√° permitido
en WinCC, dicho objeto no se migra. Si no se migra un objeto de informe, se emite un mensaje
en el informe de migraci√≥n.

Consulte tambi√©n
Principios b√°sicos de la migraci√≥n de informes (WinCC V7). (P√°gina 122)

Migraci√≥n del objeto "Variable" (WinCC V7)
Introducci√≥n
Algunos objetos de informe disponibles en WinCC V7 ya no se soportan en WinCC. La
migraci√≥n no reproduce m√°s objetos disponibles tanto como es posible en los objetos
disponibles en WinCC.

Metarchivo est√°tico
Si se migra una copia del proyecto de WinCC V7, con la migraci√≥n no se puede resolver el
directorio de almacenamiento del archivo *.emf correspondiente. En el informe de migraci√≥n se
registra la nota correspondiente.

Campo ES de un informe
El objeto de informe "Variable" de WinCC V7 ya no est√° disponible en WinCC. WinCC sustituir√°
el objeto por un campo ES. Al compilar el objeto "Variable" al campo ES, las propiedades
"C√°lculo" y "Valor de salida" se sustituyen por la propiedad "Valor de c√°lculo". La propiedad
"C√°lculo" tiene preferencia frente a la propiedad "Valor de salida". Si en el proyecto que hay
que migrar se utilizan ambas propiedades, se migrar√° el valor de la propiedad "C√°lculo". El
valor de la propiedad "Valor de salida" no se migra.
La migraci√≥n tiene lugar tal y como se representa en la siguiente tabla:
WinCC V7

WinCC

C√°lculo

Valor de salida

Valor de proceso

No establecido

No establecido

No establecido

Script

No establecido

Script

No establecido

Variable

Variable

Script

Variable

Script

Si no se migra el valor de una propiedad, se emite un mensaje en el informe de migraci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

125

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Consulte tambi√©n
Principios b√°sicos de la migraci√≥n de informes (WinCC V7). (P√°gina 122)

Migraci√≥n de la administraci√≥n de usuarios (WinCC V7)
Migraci√≥n de la administraci√≥n de usuarios
La administraci√≥n de usuarios de WinCC V7 se diferencia de la administraci√≥n de usuarios de
WinCC en algunos detalles. Por eso puede haber cambios al realizar la migraci√≥n de la
administraci√≥n de usuarios.
En WinCC V7 un usuario puede tener permisos que sean distintos de los permisos de su grupo
de usuarios. Las autorizaciones se asignan en WinCC a nivel de grupos de usuarios.
Para migrar las autorizaciones, la migraci√≥n crea primero un nuevo grupo de usuarios para
cada grupo de usuarios. Se crea, adem√°s, un nuevo grupo para cada usuario en el que las
autorizaciones se diferencian del grupo de usuarios. Si varios usuarios poseen la misma
divergencia de la autorizaci√≥n de grupo, pasan a ser miembros del mismo grupo reci√©n
almacenado.
Ejemplo 1
WinCC V7

WinCC

Group 1(Auth A, Auth B)
User 1(Auth A, Auth B)
User 2(Auth C)
User 3(Auth C)

Group 1(Auth A, Auth B)
User 1

Group 1_1(Auth C)
User 2
User 3

Ejemplo 2
WinCC V7

WinCC

Group 2(Auth A, Auth D)
User 4(Auth D)
User 5(Auth A, Auth B)

Group 2(Auth A, Auth D)
User empty
Group 2_1(Auth D)
User 4
Group 2_2(Auth A, Auth B)
User 5

Ejemplo 3
WinCC V7

WinCC

Group 3(Auth C, Auth E)
User empty

Group 3(Auth C, Auth E)
User empty

Para cada nuevo grupo de usuarios creado, se emite un mensaje en el informe de migraci√≥n.

126

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de contrase√±as
Las contrase√±as no se migran. Para el administrador est√° preajustada la contrase√±a
"administrator". Los usuarios no tienen asignadas contrase√±as. Las contrase√±as deben
asignarse nuevamente en WinCC.

Migraci√≥n de ciclos (WinCC V7)
Migraci√≥n de ciclos
En WinCC V7 existen los dos tipos siguientes de ciclos:
‚óè Ciclos de actualizaci√≥n
‚óè Ciclos de archivaci√≥n
Estos tipos de ciclos se editan en WinCC V7 en editores diferentes.
En WinCC s√≥lo hay un editor para editar todos los ciclos.
Los ciclos de un proyecto se migran de la siguiente manera:
‚óè Los 10 ciclos de actualizaci√≥n est√°ndar se utilizan sin modificaciones.
‚óè La migraci√≥n crea cinco ciclos de actualizaci√≥n definidos por el usuario.
‚óè La migraci√≥n crea un nuevo ciclo para cada ciclo de archivaci√≥n.
WinCC administra internamente qu√© ciclos son para actualizaci√≥n y cu√°les para activaci√≥n.

Ajustes no soportados
WinCC no soporta todos los ajustes de ciclo disponibles en WinCC V7. Durante la migraci√≥n,
un ajuste no soportado se sustituye por uno disponible en WinCC y se emite un mensaje en el
informe de migraci√≥n.
Por ese motivo las variables de fichero con un ciclo de adquisici√≥n no soportado se archivan
en runtime con otro ciclo distinto al configurado.
Ejemplo: si se ha configurado un ciclo, p. ej., para "Lunes", "Mi√©rcoles" y "Viernes", la variable
se archiva tras la migraci√≥n "Una vez al d√≠a".

Migraci√≥n del archivado de valores de proceso (WinCC V7)
Introducci√≥n
Los ajustes para el archivado de valores de proceso en WinCC V7 se migran a WinCC. Este
proceso presenta algunas particularidades.

Entrada manual
En WinCC V7 pueden introducirse valores manualmente en el fichero y en las distintas
variables de fichero. Asimismo se dispone de la funci√≥n "Rec√°lculo despu√©s de entrada
manual".

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

127

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
La entrada manual y el nuevo c√°lculo no est√°n soportados en WinCC. Durante la migraci√≥n se
ignoran estos ajustes y se emite un mensaje en el informe de migraci√≥n.

Basic Process Control (WinCC V7)
Introducci√≥n
Puede migrar a WinCC un proyecto en el que haya utilizado Basic Process Control. Sin
embargo, durante la migraci√≥n de dicho proyecto se pierden las proyecciones espec√≠ficas para
Basic Process Control.

Migraci√≥n de Basic Process Control
No se migran las im√°genes predeterminadas de Basic Process Control ni tampoco las
im√°genes generadas por Basic Process Control. Las dem√°s im√°genes de un proyecto se
migran. Sin embargo, estas im√°genes pueden contener objetos no soportados por WinCC.
Dichos objetos no se migran. Se ven afectados los siguientes objetos:
‚óè Avisador sonoro
‚óè Barras 3D
‚óè Visor anal√≥gico avanzado
‚óè Visor de estado avanzado
‚óè Visor de grupo
Las jerarqu√≠as de im√°genes creadas con Basic Process Control no se migran. Solo se migran
las im√°genes que se proyectan para la visualizaci√≥n en el √°rea de trabajo. Las caracter√≠sticas
imagen en imagen no se migran.

Componentes y funciones no soportados
WinCC no soporta los siguientes componentes de Basic Process Control:
‚óè Editor de proyectos OS
‚óè Lifebeat Monitoring
‚óè Picture Tree Manager
‚óè Editor de listas de bloque
‚óè Administraci√≥n de usuarios espec√≠fica de √°rea
‚óè Multi-VGA
La migraci√≥n no soporta las entradas en la lista de arranque a los procesos de Basic Process
Control.
Si en un script llama funciones API de Basic Process Control, recibir√° un mensaje de error al
compilar el proyecto.
En el informe de migraci√≥n se emiten los mensajes correspondientes.

128

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

2.8.2.3

Copia de los datos Runtime (WinCC V7)

Datos runtime
Al migrar un proyecto se migran los datos de configuraci√≥n. Para continuar utilizando datos
runtime puede copiar los datos runtime durante la migraci√≥n.
Los datos runtime est√°n compuestos del siguiente modo:
‚óè Ficheros de usuario de User Archives
Los datos del fichero de usuario son datos de proceso que se guardan en una base de datos
en runtime.
‚óè Datos de fichero
Los datos de los ficheros de variables y de avisos se registran y archivan en runtime.

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)

2.8.2.4

Referencia (WinCC V7)

Migraci√≥n de los tipos de datos (WinCC V7)
Introducci√≥n
La siguiente tabla describe la reproducci√≥n de los tipos de datos desde WinCC V7 en los tipos
de datos de WinCC.

Migraci√≥n de los tipos de datos
Los tipos de datos internos se representan unos sobre otros durante la migraci√≥n, del siguiente
modo:
Tipos de datos internos de WinCC V7

Tipos de datos internos de WinCC

Bool

Bool

Char

SByte

Byte

UByte

Int

Short

UInt

UShort

Long

Long

ULong

ULong

Float

Float

Double

Double

String

WString

DateTime

DateTime

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

129

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Reproducci√≥n del tipo de datos S7 "Timer"
Una variable externa con el tipo de datos S7 "Timer" con direcci√≥n de temporizador se
reproduce en el tipo de datos S7 "Timer". La direcci√≥n se mantiene.
Una variable externa con el tipo de datos S7 "Timer" con direccionamiento de un bloque de
datos o una direcci√≥n de marcas se reproduce en el tipo de datos S7 "S5 Time". La direcci√≥n
se mantiene.
Ejemplo:
WinCC V7
Variable

Tipo de datos S7 Direcci√≥n

Comentario

Timer_Actual_Value

Timer

T10

Valor de temporizador co‚Äê
dificado en BCD

Timer_Setpoint_Value

Timer

DB10.DBW200

Valor de temporizador co‚Äê
dificado en BCD

Timer_Setpoint_Value#2

Timer

MW20

Valor de temporizador co‚Äê
dificado en BCD

WinCC
Variable

Tipo de datos S7 Direcci√≥n

Comentario

Timer_Actual_Value

Timer

%T10

Valor de temporizador co‚Äê
dificado en BCD

Timer_Setpoint_Value

S5Time

%DB10.%DBW200

Valor de temporizador co‚Äê
dificado en BCD

Timer_Setpoint_Value#2

S5Time

%MW20

Valor de temporizador co‚Äê
dificado en BCD

Consulte tambi√©n
Migraci√≥n (WinCC V7) (P√°gina 90)
Cambio de nombres de funci√≥n (WinCC V7) (P√°gina 130)

Cambio de nombres de funci√≥n (WinCC V7)
Nombres de funci√≥n modificados
En WinCC cambian algunos de los nombres de funci√≥n de las funciones C y las funciones VB
respecto de WinCC V7. Los siguientes nombres de funci√≥n se ven afectados:

130

WinCC V7

WinCC

GetLinkedVariable

GetLinkedTag

GetLocalPicture

GetLocalScreen

GetParentPicture

GetParentScreen

GetParentPictureWindow

GetParentScreenWindow

PASSCheckLevelPermission

IsUserAuthorized

OpenHomePicture

ActivateStartScreen

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
WinCC V7

WinCC

OpenNextPicture

ActivateNextScreen

OpenPrevPicture

ActivatePreviousScreen

OpenStoredPicture

ActivateStoredScreen

StorePicture

StoreScreen

SetLanguage

GetLanguageByLocaleID

InquireLanguage

InquireLocale or InquireLocaleID

SetLanguage

SetLanguageByLocaleID

OpenPicture

ActivateScreen

PASSLoginDialog

ShowLogonDialog

ProgramExecute

StartProgram

DeactivateRTProject

StopRuntime

ExitWinCC

StopRuntime

Consulte tambi√©n
Migraci√≥n de funciones y acciones (WinCC V7) (P√°gina 119)

2.8.2.5

Proyectos integrados

Principios b√°sicos de la migraci√≥n de proyectos integrados (WinCC V7)
Introducci√≥n
En un proyecto integrado en STEP 7, los controladores y dispositivos HMI est√°n vinculados por
configuraci√≥n. Los datos de configuraci√≥n de WinCC V7 y de STEP 7 tambi√©n est√°n asociados.
Al migrar un proyecto integrado tambi√©n se migra todo el proyecto con las partes
correspondientes a WinCC V7 y STEP 7. Las conexiones se mantienen.
Para la migraci√≥n de proyectos integrados, tenga en cuenta lo siguiente:
‚óè Antes de migrar un proyecto de WinCC V7 integrado al TIA Portal, cree el archivo de
migraci√≥n (Intermediate file) con la herramienta de migraci√≥n.
‚óè Solo se pueden migrar proyectos creados con WinCC V7.5.
‚óè Los avisos del controlador y las variables integradas se crean √∫nicamente para las
conexiones de los tipos TCP/IP, MPI y PROFIBUS. No se soportan Named Connections.
‚óè Para migrar una estaci√≥n de operador (OS), esta debe encontrarse en SIMATIC Manager
por debajo de una estaci√≥n de PC y la aplicaci√≥n de WinCC.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

131

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Migraci√≥n de un proyecto integrado
Al migrar un proyecto integrado, para la parte correspondiente a WinCC V7 rigen los mismos
requisitos que para la migraci√≥n de un proyecto de WinCC V7 no integrado. WinCC debe
soportar los objetos y propiedades que contiene la parte correspondiente a WinCC V7, p. ej.,
el driver de comunicaci√≥n.
Adem√°s de las condiciones para la parte correspondiente a WinCC V7, rigen otras condiciones
para la parte correspondiente a STEP 7 del proyecto integrado. Los objetos y las propiedades
contenidos en la parte correspondiente a STEP 7 deben ser soportados en STEP 7.
Encontrar√° m√°s informaci√≥n al respecto en la documentaci√≥n de STEP 7.
Para poder migrar completamente un proyecto, en el PC utilizado para la migraci√≥n deben
estar instalados los siguientes componentes:
‚óè STEP 7 V5.4 SP5 ... STEP 7 V5.6
‚óè WinCC V7.5
Para poder volver a procesar completamente un proyecto integrado, en el PC utilizado para
volver a procesar deben estar instalados los siguientes componentes:
‚óè STEP 7
‚óè WinCC
Si quiere guardar el proyecto de WinCC V7 √∫nicamente en formato de migraci√≥n, tiene a su
disposici√≥n la herramienta de migraci√≥n.
Un proyecto integrado siempre se migra completamente. El proyecto de WinCC contenido en
el proyecto integrado no se puede migrar por separado. Puede migrar √∫nicamente el proyecto
de STEP 7. Si solo quiere migrar el proyecto de STEP 7, debe borrar el proyecto de WinCC
integrado en el administrador SIMATIC. A continuaci√≥n se migra el proyecto de STEP 7 sin el
proyecto de WinCC.

Multiclientes
WinCC no soporta multiclientes. Si crea un cliente WinCC en el SIMATIC Manager,
autom√°ticamente se genera un multicliente. El proyecto multicliente est√° integrado en STEP 7.
Si la migraci√≥n detecta un multicliente, la migraci√≥n se cancela. Para migrar de todas formas
el proyecto STEP 7, debe borrar el multicliente en el SIMATIC Manager. Seguidamente, migre
el proyecto.

Ubicaci√≥n de un proyecto de WinCC integrado
Si quiere migrar un proyecto integrado, la parte correspondiente a HMI debe estar en el mismo
PC que la parte del proyecto correspondiente a STEP 7. Si la parte correspondiente a HMI est√°
en otro PC, solo se migra la parte correspondiente a STEP 7; la parte del proyecto
correspondiente a HMI no estar√° despu√©s de la migraci√≥n.

132

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC

Objetos no soportados
La migraci√≥n no soporta los siguientes componentes:
‚óè Proyecto m√∫ltiple de STEP 7
No se puede migrar un proyecto m√∫ltiple de STEP 7, la migraci√≥n cancela el proceso.
‚óè Central Archive Server - CAS
Si la migraci√≥n detecta un CAS, la migraci√≥n se cancela.

Consulte tambi√©n
Migrar un proyecto integrado (WinCC V7) (P√°gina 133)

Migrar un proyecto integrado (WinCC V7)
Introducci√≥n
Al migrar un proyecto integrado se migran tanto las partes correspondientes al proyecto de
WinCC V7 como las correspondientes al proyecto de STEP 7. Por este motivo debe migrarse
el archivo Intermediate generado por la herramienta de migraci√≥n. El archivo Intermediate
tiene el formato "*.am*". Durante la migraci√≥n se copian los datos del proyecto existente y se
migran a un nuevo proyecto. No es posible migrar a un proyecto existente.

Requisitos
‚óè STEP 7 Professional y todos los paquetes opcionales utilizados en el proyecto est√°n
instalados.
‚óè WinCC Professional est√° instalado.
‚óè El TIA Portal se ha reiniciado.
‚óè El archivo Intermediate del proyecto que debe migrarse est√° en la unidad de disco.

Procedimiento
Para migrar un proyecto integrado, proceda del siguiente modo:
1. Seleccione "Inicio > Migrar proyecto".

2. Navegue hasta el archivo Intermediate en el campo "Ruta de origen".

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

133

Migrar proyectos a un proyecto del TIA Portal
2.8 Migrar proyectos de WinCC
3. En caso necesario, modifique los datos del proyecto que debe crearse. Cambie, p. ej., el
nombre o la ruta del proyecto. En el proyecto nuevo se crear√°n los datos que deben
migrarse.
4. Haga clic en "Migrar".
Se crear√° un proyecto nuevo y se iniciar√° la migraci√≥n de los datos:
‚Äì Se abre la vista del proyecto.
‚Äì El progreso de la migraci√≥n se indica en una ventana de migraci√≥n.
‚Äì En la ventana de inspecci√≥n bajo "Informaci√≥n > General" se muestran informaciones,
advertencias y errores correspondientes al proceso de migraci√≥n.
‚Äì Toda la informaci√≥n relacionada con la migraci√≥n se guarda en un archivo de informe.
‚Äì Una vez concluida la migraci√≥n, aparece un aviso. El aviso contiene un enlace mediante
el cual se puede abrir el archivo de informe.
Otra posibilidad consiste en iniciar la migraci√≥n desde la vista del proyecto mediante "Proyecto
> Migrar proyecto".
Una vez concluida la migraci√≥n, en el √°rbol del proyecto encontrar√° un dispositivo nuevo para
cada panel de operador migrado. De igual manera, tambi√©n encontrar√° un nuevo dispositivo
instalado para cada controlador. Estos dispositivos contienen los datos migrados.
Nota
Proyectos integrados con visores de avisos
Al migrar el proyecto pueden desactivarse las categor√≠as en el visor de avisos. Despu√©s de la
migraci√≥n del proyecto, compruebe los ajustes en el visor de avisos. En caso necesario, active
las categor√≠as oportunas en la ventana de inspecci√≥n del visor de avisos, en "Propiedades >
General".

Abrir el informe de migraci√≥n
El informe de migraci√≥n se guarda junto con el proyecto migrado. Puede ver el informe m√°s
adelante. El archivo de informe se abre del siguiente modo:
1. Haga clic en "Datos comunes" en el √°rbol del proyecto.
2. Haga clic en "Informes".
3. Haga doble clic en el informe de migraci√≥n.

Consulte tambi√©n
Principios b√°sicos de la migraci√≥n de proyectos integrados (WinCC V7) (P√°gina 131)

134

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

2.9

Migrar proyectos integrados

2.9.1

Migraci√≥n de un proyecto integrado

Introducci√≥n
En los proyectos integrados, se utilizan conjuntamente en un proyecto controladores SIMATIC
y componentes WinCC. Al migrar un proyecto integrado, tambi√©n se migra todo el proyecto con
las partes correspondientes a WinCC y STEP 7. Las conexiones configuradas entre el
controlador y la visualizaci√≥n se conservan.

Migraci√≥n de un proyecto integrado
Al migrar un proyecto integrado, para la parte correspondiente a STEP 7 rigen las mismas
condiciones que para la migraci√≥n de un proyecto STEP 7 no integrado. Los objetos y
propiedades que contiene la parte correspondiente a WinCC tambi√©n deben estar soportados
por WinCC (TIA Portal).
Para migrar una estaci√≥n de operador (OS), esta debe encontrarse en el √°rbol del proyecto del
SIMATIC Manager bajo una estaci√≥n PC y la aplicaci√≥n de WinCC. La figura siguiente muestra
la asignaci√≥n de la estaci√≥n de operador en el proyecto de origen:

Encontrar√° otros requisitos para la migraci√≥n de proyectos integrados en la documentaci√≥n de
WinCC.
Recuerde tambi√©n que el proyecto de partida debe compilarse antes de la migraci√≥n.
Para migrar completamente un proyecto integrado, en la programadora/en el PC utilizado para
la migraci√≥n deben estar instalados los siguientes componentes:
‚óè STEP 7 V5.4 SP5 o superior
‚óè WinCC V7.5 con la √∫ltima actualizaci√≥n o WinCC Flexible 2008 SP2 o superior
Para poder realizar todos los retoques necesarios en un proyecto integrado, en el PC utilizado
para tal finalidad deben estar instalados los siguientes componentes en su versi√≥n m√°s actual:
‚óè STEP 7 Professional
‚óè WinCC Basic, WinCC Comfort/Advanced o WinCC Professional, dependiendo de los
componentes utilizados

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

135

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

Uso de la herramienta de migraci√≥n
En las siguientes condiciones es necesario utilizar la herramienta de migraci√≥n:
‚óè El proyecto de migraci√≥n no se encuentra en la misma programadora o el mismo PC que
la instalaci√≥n del TIA Portal.
‚óè En el proyecto de partida hay dispositivos SCADA. Dichos dispositivos solo pueden
migrarse con la herramienta de migraci√≥n.
‚óè WinCC Professional V16 y STEP 7 con WinCC V7.5 no pueden estar instalados en la
misma programadora o el mismo PC. Por ello, los proyectos integrados con componentes
WinCC V7.5 deben prepararse para la migraci√≥n con la herramienta de migraci√≥n.

Migraci√≥n de la parte de un proyecto integrado correspondiente a STEP 7
Un proyecto integrado siempre se migra completamente. Partes individuales de este no
pueden migrarse por separado. √önicamente se puede migrar el proyecto STEP 7 contenido
por s√≠ solo si primero se borran todas las estaciones HMI del SIMATIC Manager y, despu√©s, se
vuelve a compilar el proyecto en NetPro.
De manera alternativa, el proyecto se puede abrir en una instalaci√≥n de STEP 7 V5.4 SP5 o
superior sin una instalaci√≥n de WinCC. Guarde el proyecto de nuevo seleccionando la opci√≥n
"Reorganizaci√≥n". Al guardar la copia, las partes de WinCC se borran autom√°ticamente.
A continuaci√≥n se migra el proyecto de STEP 7 sin el proyecto de WinCC.

Migraci√≥n de un proyecto integrado con la configuraci√≥n hardware
En proyectos integrados, los dispositivos HMI tambi√©n se migran si la configuraci√≥n hardware
no se incluye en la migraci√≥n. El componente de STEP 7 de la configuraci√≥n hardware, incluida
la configuraci√≥n de red, conexiones y alarmas, solo se migra si la configuraci√≥n hardware se
incluye en la migraci√≥n. En caso contrario, para los dispositivos STEP 7 se crean m√≥dulos no
especificados, que tras la migraci√≥n deben volver a convertirse en un m√≥dulo adecuado.
Los m√≥dulos HMI que est√°n insertados en una estaci√≥n PC se convierten en una estaci√≥n
propia durante la migraci√≥n. Si realiza la migraci√≥n excluyendo la configuraci√≥n hardware, el
proyecto migrado contiene una estaci√≥n PC SIMATIC no especificada y una estaci√≥n PC
SIMATIC con los dispositivos HMI. Las referencias a dispositivos HMI no se transfieren en la
migraci√≥n. Si la configuraci√≥n hardware est√° incluida, el proyecto migrado contiene dos
estaciones separadas, la estaci√≥n HMI y la estaci√≥n PC.

Ubicaci√≥n de un proyecto de WinCC integrado
Cuando se migra un proyecto integrado, la parte correspondiente a HMI incluida en √©l tiene que
hallarse en la misma programadora/en el mismo PC que la parte del proyecto correspondiente
a STEP 7. Si la parte correspondiente a HMI se encuentra en otra programadora, solo se migra
la parte correspondiente a STEP 7.

136

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

Objetos no soportados
La migraci√≥n no soporta los siguientes componentes:
‚óè Multiproyecto STEP 7
No se puede migrar un multiproyecto STEP 7. La migraci√≥n cancela la operaci√≥n.
‚óè Central Archive Server - CAS
Cuando un proyecto integrado contiene un CAS, la migraci√≥n se lleva a cabo, pero no se
migran los datos del servidor CAS.

Consulte tambi√©n
Reajustar proyectos integrados (P√°gina 137)

2.9.2

Reajustar proyectos integrados
Si se ha migrado un proyecto integrado sin configuraci√≥n de hardware, las CPUs no
especificadas se utilizan en lugar de las CPUs del proyecto original. Como no puede haber una
conexi√≥n entre una CPU no especificada y un dispositivo HMI, las conexiones del proyecto de
origen tambi√©n se aplican siempre sin especificar.

Procedimiento
Para seguir utilizando un proyecto integrado despu√©s de la migraci√≥n, proceda del siguiente
modo:
1. Convierta nuevamente los dispositivos no especificados en dispositivos apropiados.
2. Establezca la conexi√≥n HMI integrada entre el dispositivo HMI y el PLC.
3. Conecte todas las variables HMI con la conexi√≥n integrada reci√©n creada.
4. Restablezca la conexi√≥n entre las variables HMI y las variables PLC.
5. Borre la conexi√≥n HMI no integrada.
En los siguientes cap√≠tulos se describen los diferentes pasos a partir de un proyecto de
ejemplo.

Consulte tambi√©n
Convertir CPUs no especificadas en CPUs especificadas (P√°gina 138)
Crear una conexi√≥n HMI integrada (P√°gina 140)
Volver a enlazar variables HMI (P√°gina 142)
Borrado de una conexi√≥n HMI no integrada (P√°gina 143)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

137

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

2.9.3

Convertir CPUs no especificadas en CPUs especificadas
El primer paso despu√©s de la migraci√≥n sin configuraci√≥n de hardware es la conversi√≥n de las
CPUs no especificadas en CPUs especificadas. Las CPUs no especificadas deben
entenderse como comodines para determinadas CPUs del cat√°logo de hardware, que a√∫n no
se conocen. Es posible definir par√°metros generales y referenciar las CPUs ya en el programa
de usuario. No obstante, el proyecto no ser√° totalmente funcional mientras la CPU no
especificada siga sin especificarse.

138

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

Especificar una CPU mediante la sustituci√≥n de m√≥dulos
Para especificar una CPU no especificada mediante la sustituci√≥n de m√≥dulos, proceda del
siguiente modo:
1. Seleccione la CPU no especificada en la vista de redes o dispositivos.
2. En el men√∫ contextual, elija el comando "Sustituir dispositivo".
Se abre el cuadro de di√°logo "Sustituir dispositivo".

1

2

3. En el elemento "Dispositivo nuevo" de la estructura de √°rbol seleccione el m√≥dulo que
reemplazar√° a la CPU no especificada. (Rango 1)
En "Informaci√≥n de compatibilidad" se pueden obtener instrucciones sobre el grado de
compatibilidad que existe entre la CPU elegida y la configuraci√≥n del proyecto de origen.
(Rango 2)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

139

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados
4. Haga clic en "Aceptar".
5. Repita los pasos anteriores para todas las CPUs no especificadas.

Consulte tambi√©n
Crear una conexi√≥n HMI integrada (P√°gina 140)

2.9.4

Crear una conexi√≥n HMI integrada
Una vez especificada la CPU no especificada, cree una conexi√≥n con el dispositivo HMI.

Procedimiento
Para crear una conexi√≥n gr√°ficamente, proceda del siguiente modo:
1. Haga clic en el s√≠mbolo "Conexiones" de la barra de herramientas. De esta forma se activa
el modo de conexi√≥n.

2. Seleccione el tipo de conexi√≥n "Conexi√≥n HMI" en la lista desplegable adjunta.
En la vista de redes se resaltan en color las CPUs y los dispositivos HMI que pueden
utilizarse como conexi√≥n HMI.
3. A continuaci√≥n es posible determinar autom√°ticamente la v√≠a de conexi√≥n, o seleccionar
expresamente una v√≠a de conexi√≥n a trav√©s de determinadas interfaces:
‚Äì Determinar autom√°ticamente la v√≠a de conexi√≥n
Seleccione la CPU de la que debe partir una conexi√≥n. Arrastre el rat√≥n al componente
de destino. Confirme el punto final de la conexi√≥n mediante un nuevo clic.
Alternativa: Mientras mantiene presionada la tecla "May√∫s", seleccione adem√°s el
componentes de destino y elija con el bot√≥n derecho del rat√≥n el comando "Agregar
conexi√≥n".
‚Äì Seleccionar la v√≠a de conexi√≥n expl√≠cita de interfaz a interfaz
En la interfaz de subred, haga clic en el dispositivo del que deba partir una conexi√≥n. A
continuaci√≥n, arrastre el puntero mientras mantiene pulsado el bot√≥n del rat√≥n hasta la
interfaz deseada del dispositivo de destino y, por √∫ltimo, suelte el bot√≥n del rat√≥n.

140

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

Resultado
La imagen siguiente muestra el estado despu√©s de crear la conexi√≥n integrada:

1

2

3

‚ë†

La conexi√≥n integrada HMI queda creada y se representa resaltada en la vista de redes.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

141

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

‚ë°
‚ë¢

La conexi√≥n se muestra en la tabla de conexiones de los componentes.
La conexi√≥n puede editarse en las propiedades de conexi√≥n.

Consulte tambi√©n
Volver a enlazar variables HMI (P√°gina 142)

2.9.5

Volver a enlazar variables HMI
Una vez establecida una conexi√≥n HMI entre la CPU y el dispositivo HMI, es preciso asignar
las variables HMI existentes a la nueva conexi√≥n. Realice los pasos siguientes para cada fila
de la tabla de variables correspondiente.

Procedimiento
Para enlazar nuevamente las variables HMI, proceda del siguiente modo:
1. En el √°rbol del proyecto, despl√°cese a las variables HMI y haga doble clic en la tabla de
variables correspondiente para visualizar las variables en el √°rea de trabajo.
Se abre la tabla de variables.

2. Haga clic en el bot√≥n "..." de la columna "Conexi√≥n".
Se abre un cuadro de di√°logo para seleccionar la conexi√≥n.

142

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados
3. Seleccione la conexi√≥n HMI reci√©n creada.

4. Haga clic en el bot√≥n "‚úì" para adoptar la conexi√≥n seleccionada.
5. En la barra de funci√≥n, haga clic en el bot√≥n "Conectar nuevamente variable PLC".

Consulte tambi√©n
Borrado de una conexi√≥n HMI no integrada (P√°gina 143)

2.9.6

Borrado de una conexi√≥n HMI no integrada
Por √∫ltimo, es posible borrar las conexiones HMI no integradas que queden a√∫n del proyecto
de origen.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

143

Migrar proyectos a un proyecto del TIA Portal
2.9 Migrar proyectos integrados

Procedimiento
Para borrar las conexiones HMI no integradas, proceda del siguiente modo:
1. En el √°rbol del proyecto, abra el dispositivo HMI y haga doble clic en la entrada
"Conexiones".
Se abre la tabla de conexiones.

2. Seleccione la fila de la tabla con la conexi√≥n antigua.
3. En el men√∫ contextual de la fila de conexi√≥n, elija el comando "Borrar".
4. Repita los pasos anteriores para todas las conexiones HMI no integradas del proyecto de
origen.

144

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET
200SP
3.1

3

Principios b√°sicos de la migraci√≥n de programas PLC

Introducci√≥n
Se pueden migrar programas PLC dentro del TIA Portal. La migraci√≥n dentro del TIA Portal se
denomina "Migraci√≥n PLC". En esta migraci√≥n se crea el m√≥dulo nuevo en el proyecto y el
programa PLC existente se copia en este m√≥dulo nuevo. El m√≥dulo antiguo permanece
invariable en el proyecto.
La ventaja entre migrar y copiar radica en que con la migraci√≥n el programa se adapta
autom√°ticamente a la nueva familia de CPU dentro de las posibilidades. Las estructuras del
programa que ya no se admiten se actualizan. Las instrucciones que no est√°n disponibles en
el m√≥dulo nuevo se reemplazan por las instrucciones correspondientes del S7-1500.
La tabla siguiente ofrece una sinopsis de los m√≥dulos que se pueden migrar:

M√≥dulo de origen

M√≥dulo de destino

CPU S7-300/400

CPU S7-1500

CPU ET 200S

CPU ET200SP

CPU ET 200S

CPU S7-1500

CPU ET 200S

CPU ET 200pro

CPU IM 154-8

CPU 1516-2 PN

La migraci√≥n a S7-1500 y la migraci√≥n a ET 200SP siguen las mismas reglas. Los programas
PLC se procesan igual en ambos procedimientos de migraci√≥n.

Volumen de migraci√≥n
En la migraci√≥n PLC se copian todos los componentes del programa PLC en el m√≥dulo reci√©n
creado. Entre ellos se incluyen, por ejemplo, los siguientes objetos:
‚óè Bloques de programa creados en un lenguaje soportado por S7-1500 y que no tienen
protecci√≥n de know-how.
‚óè Tablas de variables PLC
‚óè Tablas de observaci√≥n y forzado permanente
‚óè Tipos de datos PLC
‚óè Objetos tecnol√≥gicos
‚óè Grupos personalizados en el √°rbol del proyecto

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

145

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.1 Principios b√°sicos de la migraci√≥n de programas PLC
La configuraci√≥n hardware del m√≥dulo de salida no se transfiere autom√°ticamente.
ADVERTENCIA
Evitar da√±os personales y materiales
En algunos casos se realizan cambios en el programa durante la migraci√≥n PLC. Por este
motivo es necesario, despu√©s de la migraci√≥n, comprobar detalladamente el programa en un
entorno de prueba antes de ponerlo en marcha.

Nota
Soporte adicional para la migraci√≥n PLC
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n
PLC:
Migraci√≥n - Sistemas globales:
http://support.automation.siemens.com/WW/view/es/83558085 (http://
support.automation.siemens.com/WW/view/es/83558085)
Migraci√≥n - Controladores:
http://support.automation.siemens.com/WW/view/es/83557459 (http://
support.automation.siemens.com/WW/view/es/83557459)
Migraci√≥n - Visualizaci√≥n:
http://support.automation.siemens.com/WW/view/es/76878921 (http://
support.automation.siemens.com/WW/view/es/76878921)
Migraci√≥n - Comunicaci√≥n:
http://support.automation.siemens.com/WW/view/es/83558087 (http://
support.automation.siemens.com/WW/view/es/83558087)
Preguntas frecuentes sobre la migraci√≥n:
http://support.automation.siemens.com/WW/view/es/67858106 (http://
support.automation.siemens.com/WW/view/es/64898867)
Si necesita soporte adicional, dir√≠jase al SIMATIC Customer Support.

146

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.2 Ejecuci√≥n de la migraci√≥n

Nota
M√°s informaci√≥n sobre el TIA Portal
Encontrar√° m√°s informaci√≥n relacionada con el TIA Portal en TIA Portal en Siemens Industry
Online Support.
http://support.automation.siemens.com/WW/view/es/65601780 (http://
support.automation.siemens.com/WW/view/es/65601780)
All√≠ tambi√©n encontrar√° informaci√≥n sobre ofertas de formaci√≥n. Para aquellos que est√©n
familiarizados con el mundo SIMATIC S7 Classic y deseen cambiar a SIMATIC S7-1500 con
el TIA Portal recomendamos el curso de formaci√≥n "TIA-SYSUP - Curso de transici√≥n a
SIMATIC S7-1500 para el sistema SIMATIC TIA Portal".

3.2

Ejecuci√≥n de la migraci√≥n

Requisitos
‚óè Existe un programa de partida coherente.
‚óè Se ha compilado una versi√≥n actual de todos los bloques. Esto tambi√©n es v√°lido para los
bloques contenidos en el proyecto pero que no han sido llamados durante la ejecuci√≥n del
programa.
‚óè El programa ha sido creado con TIA Portal V12 o superior, o bien actualizado a esta versi√≥n.
Nota
Perfiles de instrucci√≥n
Durante la migraci√≥n del PLC no debe estar activado ning√∫n perfil de instrucci√≥n.
Por ello, antes de la migraci√≥n del PLC desactive el perfil de instrucci√≥n que use. A
continuaci√≥n puede volver a activarlo.

Preparar la migraci√≥n
Para preparar el programa para la migraci√≥n, proceda del siguiente modo:
1. En el √°rbol del proyecto, abra el dispositivo que contiene el programa de origen.
2. Abra la carpeta "Bloques de programa" y compruebe si contiene bloques con protecci√≥n de
know-how.
3. Elimine la protecci√≥n de know-how de los bloques.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

147

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.2 Ejecuci√≥n de la migraci√≥n
4. Abra la carpeta "Bloques de programa > Bloques de sistema" y compruebe si contiene
bloques con la extensi√≥n "_LF" (legacy functions).
Son bloques de la librer√≠a de STEP 7 que ya no se soportan en el TIA Portal. En la migraci√≥n
PLC, estos bloques no se transfieren al dispositivo nuevo porque tienen protecci√≥n de
know-how.
5. Si es posible, sustituya estos bloques por una instrucci√≥n de la Task Card "Instrucciones".
6. Si el programa contiene instrucciones para la configuraci√≥n de avisos, siga las
instrucciones para la migraci√≥n de avisos con valores asociados.
Consulte tambi√©n: Migraci√≥n de avisos con valores asociados (P√°gina 173)

Procedimiento
Para migrar un programa PLC dentro del TIA Portal, proceda del siguiente modo:
1. En el √°rbol del proyecto, abra el dispositivo que contiene el programa de origen.
2. Abra la configuraci√≥n de dispositivos.
3. En la vista de dispositivos o de redes, marque el m√≥dulo que contiene el programa de
origen.
4. Elija el comando "Migrar a S7-1500" del men√∫ contextual.
Se abre el cuadro de di√°logo "Migrar a S7-1500".
5. Seleccione en el campo "Dispositivo nuevo" el dispositivo al que desea migrar el programa
y confirme con "Aceptar".
Aparece una consigna de seguridad que le informa de que el programa se modificar√°
durante la migraci√≥n.
6. Confirme la consigna de seguridad.
Aparece un cuadro de di√°logo en el que puede indicar qu√© instrucciones sobre la
comunicaci√≥n punto a punto desea utilizar en el programa migrado.
7. Seleccione el juego de instrucciones que desee.
‚Äì Seleccione la opci√≥n "Utilizar nuevas instrucciones PtP para los m√≥dulos de
comunicaci√≥n integrados del S7-1500" para utilizar las nuevas instrucciones PtP del
S7-1500.
‚Äì Seleccione la opci√≥n "Seguir utilizando las instrucciones PtP para procesadores de
comunicaciones de S7-300/400" para continuar utilizando las instrucciones PtP del CP
300/400 o del ET200.
Debe seleccionar una de las dos opciones aunque no utilice la comunicaci√≥n punto a punto.
En ese caso, la selecci√≥n no tendr√° ninguna repercusi√≥n en el programa.
El programa PLC se migra. A continuaci√≥n aparece un mensaje que informa de si se han
producido errores durante la migraci√≥n. El mensaje contiene asimismo un enlace al informe
de migraci√≥n.
8. Abra el informe de migraci√≥n. Este contiene informaci√≥n detallada sobre la migraci√≥n e
informa sobre los cambios que deben realizarse en el programa para que pueda ejecutarse
en el dispositivo nuevo.
9. Procese todas las indicaciones del informe de migraci√≥n.
10.Compile el programa migrado.
Consulte tambi√©n: Migraci√≥n de bloques de programa PtP (P√°gina 185)

148

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.3 Visualizaci√≥n de un archivo de registro

Resultado
En el √°rbol del proyecto se ha creado un dispositivo nuevo junto al dispositivo original. Este
contiene el programa PLC migrado.
Para aprovechar toda la funcionalidad de las S7-1500, recomendamos activar el acceso
optimizado a bloques para los bloques migrados. Encontrar√° m√°s informaci√≥n al respecto en
la ayuda sobre bloques con acceso optimizado:
Bloques con acceso optimizado
Nota
Tenga en cuenta que con la migraci√≥n PLC solo se convierte el programa PLC. La
configuraci√≥n hardware del dispositivo de origen no se transfiere autom√°ticamente al
dispositivo nuevo. Ejecute manualmente la configuraci√≥n hardware del dispositivo nuevo
despu√©s de la migraci√≥n.

3.3

Visualizaci√≥n de un archivo de registro
Para cada migraci√≥n se crea un archivo de registro. El archivo de registro contiene la siguiente
informaci√≥n:
‚óè Modificaciones en objetos realizadas durante la migraci√≥n.
‚óè Indicaciones sobre las adaptaciones necesarias que se deben realizar en el programa.

Procedimiento
Para visualizar el archivo de registro de la migraci√≥n, proceda del siguiente modo:
1. Abra la carpeta "Datos comunes > Informes" en el √°rbol del proyecto. Esta carpeta contiene
los informes de todas las migraciones realizadas hasta el momento.
2. Haga doble clic en el informe de migraci√≥n deseado.
El informe se abre.
3. Los mensajes que hacen referencia a un punto determinado del programa est√°n marcados
con una flecha en la columna "Ir a". Haga doble clic en la flecha para saltar a la posici√≥n
relevante del programa.
4. Los mensajes que poseen informaci√≥n m√°s detallada est√°n marcados con un signo de
interrogaci√≥n en la columna "?". Para obtener informaci√≥n m√°s detallada sobre el mensaje,
haga clic en el signo de interrogaci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

149

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4

Particularidades en la migraci√≥n de programas PLC

3.4.1

Notas sobre la migraci√≥n de programas PLC

3.4.1.1

Migraci√≥n de bloques de organizaci√≥n

Bloques de organizaci√≥n
En la migraci√≥n de bloques de organizaci√≥n se deben tener en cuenta las reglas siguientes:
‚óè El nombre y el n√∫mero del bloque se adoptan sin cambios.
‚óè La interfaz del bloque tambi√©n se adopta sin cambios.
‚óè Al OB se le asignar√° el evento adecuado al tipo de OB.
‚óè Los par√°metros del OB, p. ej. la prioridad, se adoptan sin cambios. Si en la CPU nueva hay
otros par√°metros asignables, estos tendr√°n los valores predeterminados.
Algunos bloques de organizaci√≥n (OB) no est√°n soportados por el S7-1500 y por ello no
pueden migrarse. La siguiente tabla proporciona una vista general de estos bloques de
organizaci√≥n y contiene indicaciones acerca de c√≥mo puede reproducir la funcionalidad en su
programa:
OB no migrable

Indicaciones

OB60 (alarma de multi‚Äê No se puede reemplazar el OB. La alarma de multiprocesamiento no est√° disponible en S7-1500.
procesamiento)
OB65 (alarma de sin‚Äê
cronismo tecnol√≥gica)

Compruebe si el OB del programa puede reemplazarse por el OB MC-Servo o el OB MC-Interpo‚Äê
lator.

OB7x (error de redun‚Äê
dancia)

No se puede reemplazar el OB. La redundancia no est√° disponible en S7-1500.

OB81 (fallo de la fuente
de alimentaci√≥n)

Compruebe si el OB del programa puede reemplazarse por el OB de alarma de diagn√≥stico.

OB84 (error de hardwa‚Äê Compruebe si el OB del programa puede reemplazarse por el OB de alarma de diagn√≥stico.
re en CPU)
OB85 (error de ejecu‚Äê
ci√≥n del programa)

Compruebe si el OB del programa puede reemplazarse por el OB de extracci√≥n/inserci√≥n o por el
OB de error de rack.

OB87 (error de comuni‚Äê Compruebe si el OB del programa puede reemplazarse por el OB de alarma de diagn√≥stico.
caci√≥n)
OB88 (interrupci√≥n del
procesamiento)

Compruebe si el OB del programa puede reemplazarse por el OB de error de programaci√≥n.

OB90 (ciclo de segun‚Äê
do plano)

No se puede reemplazar el OB. La ejecuci√≥n de fondo no est√° disponible en S7-1500.

OB101 (rearranque)

No se puede reemplazar el OB. El rearranque no est√° disponible en S7-1500.

OB102 (arranque en
fr√≠o)

Compruebe si el OB del programa puede reemplazarse por el OB de arranque.

150

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Consulte tambi√©n
Preguntas frecuentes sobre la migraci√≥n (http://support.automation.siemens.com/WW/
view/es/64898867)

3.4.1.2

Migraci√≥n de ID de hardware

Direccionamiento de m√≥dulos mediante identificadores de hardware
Si el programa direcciona m√≥dulos hardware, p. ej. en el par√°metro "LADDR" o "ID", tras la
migraci√≥n al nuevo hardware estos ya no ser√°n v√°lidos. Las direcciones deben cambiarse. Los
m√≥dulos hardware del S7-1500 se direccionan mediante identificadores de hardware. Por ello,
tras la migraci√≥n tiene que introducir el identificador de hardware del m√≥dulo nuevo en el
par√°metro "LADDR" o "ID".
Proceda del siguiente modo:
1. Abra la configuraci√≥n de dispositivos.
2. Seleccione el m√≥dulo que desea direccionar.
3. Seleccione la ficha "Propiedades > Constantes de sistema" en la ventana de inspecci√≥n.
La tabla contiene constantes para todos los m√≥dulos utilizados con los identificadores de
hardware necesarios.
4. Seleccione la constante para el m√≥dulo que debe direccionarse y elija el comando "Copiar"
del men√∫ contextual.
5. Inserte la constante en el par√°metro "LADDR" o "ID" de la instrucci√≥n migrada.

3.4.1.3

Migraci√≥n de temporizadores y contadores CEI

Actualizaci√≥n de temporizadores CEI
Las salidas "Q" y "ET" de los temporizadores CEI TP, TON y TOF se definen en S7-300/400
en el momento en que el programa ejecuta el temporizador CEI. Despu√©s, el estado de "Q" y
"ET" permanece invariable. Si el programa accede varias veces a estas salidas, se obtendr√°,
por lo tanto, siempre el mismo valor.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

151

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Este comportamiento ha cambiado en S7-1500: Aqu√≠ el programa comprueba en cada acceso
el valor actual del temporizador y define nuevamente las salidas "Q" y "ET".
Por consiguiente, despu√©s de la migraci√≥n puede cambiar el comportamiento del programa si
se acceder varias veces a "Q" o "ET".
Para que el programa se comporte del mismo modo que en S7-300/400, el valor de "Q" o "ET"
puede asignarse a una variable. En el programa se referencia despu√©s esta variable en lugar
de la salida.

Temporizadores CEI y contadores CEI con conexi√≥n EN/ENO
Las instrucciones se han adaptado a la norma IEC 1131-3 para S7-1500. Ahora la conexi√≥n
con el circuito es a trav√©s del par√°metro "IN" y, por tanto, ya no se dispone de los par√°metros
"EN" y "ENO". La migraci√≥n notificar√° un error si el programa de partida contiene un
temporizador o contador CEI con una operaci√≥n l√≥gica previa que se analice con el par√°metro
de entrada "EN".
Agregue una instrucci√≥n de salto entre la operaci√≥n l√≥gica previa y el temporizador o contador
CEI para llamar el temporizador o contador CEI en funci√≥n del RLO. Existen las siguientes
instrucciones de salto:
‚óè ---( JMP ): Saltar si RLO = 1
‚óè ---( JMPN ): Saltar si RLO = 0

Contador CEI: Par√°metros nuevos para el estado del contador en la interfaz del bloque
Despu√©s de la migraci√≥n, la interfaz del bloque contiene, en lugar del par√°metro de salida "Q",
los dos par√°metros "QU" y "QD" para el estado de un contador CEI. En funci√≥n del tipo de
contador CEI se lee √∫nicamente uno de los dos par√°metros. El otro par√°metro no se utiliza.
Si en el c√≥digo se accede al par√°metro "Q", es necesario adaptar el acceso manualmente
despu√©s de la migraci√≥n. Utilice "QU" para contar adelante y "QD" para contar atr√°s.

3.4.1.4

Migraci√≥n de bloques de datos de CPU

Bloques de datos de CPU
Los bloques creados por las instrucciones CREAT_DB o CREATE_DB en la CPU y que solo
existen online no se migran.

Consulte tambi√©n
Migraci√≥n de instrucciones de bloques de datos (P√°gina 169)

152

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.1.5

Migraci√≥n de funciones de diagn√≥stico

Listas de estado del sistema
Las CPU de la serie S7-1500 no proporcionan listas de estado del sistema. No obstante, existe
la posibilidad de leer algunas informaciones a trav√©s de las instrucciones "GET_DIAG",
"Geo2Log", "DeviceStates" o "ModuleStates".
Encontrar√° m√°s informaci√≥n sobre la migraci√≥n de las listas de estado del sistema
en: Migraci√≥n de la instrucci√≥n RDSYSST (P√°gina 171)

Diagn√≥stico del sistema con "Report System Errors"
Las CPU de la serie S7-1500 disponen de un diagn√≥stico de sistema integrado. Por este
motivo, "Report System Errors" ya no se soporta. Si el programa contiene bloques para "Report
System Errors", desactive el diagn√≥stico de sistema en el programa de partida antes de la
migraci√≥n y vuelva a compilar el programa. Al hacerlo se borrar√°n los bloques
correspondientes.
El diagn√≥stico de sistema de las CPU S7-1500 est√° activado por defecto. No es necesario que
realice otros ajustes aqu√≠.
Para modificar los ajustes del diagn√≥stico de sistema, seleccione la CPU en la configuraci√≥n
de dispositivos. A continuaci√≥n, en la ventana de inspecci√≥n se muestran los ajustes del
diagn√≥stico de sistema en "Propiedades > Diagn√≥stico de sistema". Los avisos del diagn√≥stico
de sistema est√°n activados y puede anularse la selecci√≥n si no se necesitan.

Diagn√≥stico PROFINET/PROFIBUS
En la migraci√≥n del diagn√≥stico PROFINET / PROFIBUS se aplican las siguientes reglas:
‚óè "Notificar errores de sistema" se sustituye por el diagn√≥stico de sistema integrado.
‚óè El FB 126 no se soporta y, por tanto, no puede migrarse.
‚óè Para la evaluaci√≥n aplicada pueden utilizarse las instrucciones "DeviceStates" y
"ModuleStates".

3.4.1.6

Migraci√≥n de accesos absolutos a datos locales

Accesos absolutos a datos locales
En el S7-300/400 se pod√≠a acceder de forma absoluta a los datos locales de un bloque sin
declarar un s√≠mbolo para la direcci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

153

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Como el acceso absoluto en S7-1500 ya no se soporta, la migraci√≥n lo procesa del siguiente
modo:
‚óè Si para un √°rea dentro de los datos locales se declara una variable temporal en la interfaz
del bloque, la direcci√≥n absoluta se convertir√° en una direcci√≥n simb√≥lica.
‚óè Si no existe una variable temporal adecuada, la direcci√≥n absoluta se mantendr√°. Sin
embargo, dado que durante la migraci√≥n pueden crearse otras variables locales, es posible
que las direcciones se desplacen dentro de los datos locales. Por ello hay que comprobar
si la direcci√≥n absoluta utilizada a√∫n es correcta y si la fecha correcta est√° direccionada. Si
es posible debe crearse una variable en el apartado "Temp" y utilizarse para el
direccionamiento. Para direccionar √°reas selectivamente dentro de variables declaradas,
se pueden superponer variables existentes con AT o direccionar √°reas individuales con la
sintaxis .X, .B, .W o .D.

Ejemplos
Los siguientes ejemplos muestran la migraci√≥n de accesos absolutos en datos locales.
En la primera tabla se observa un segmento del programa antes de la migraci√≥n:
AWL
L %LW20
L %LW3
+I
T %LW5

En la segunda tabla se observa el segmento del programa despu√©s de la migraci√≥n:
AWL
L "MyTempVar1"
L "MyTempVar2"
+I
T %LW5

‚óè Para "LW20" y "LW3" ya se hab√≠an declarado variables temporales. Estas se utilizar√°n en
el programa despu√©s de la migraci√≥n.
‚óè Para "LW5" no se hab√≠a declarado ninguna variable. Despu√©s de la migraci√≥n se debe
comprobar si el acceso a√∫n es correcto.

154

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.1.7

Par√°metros de bloque en S7-1500

Uso de par√°metros de bloque
Para la utilizaci√≥n de los par√°metros de bloque dentro del bloque rigen en S7-1500 las reglas
siguientes:
‚óè Los par√°metros de entrada (Input) solo pueden leerse.
‚óè Los par√°metros de salida (Output) solo pueden escribirse.
‚óè Los par√°metros de entrada/salida (InOut) pueden leerse y escribirse.
‚óè Los valores de funci√≥n (Ret_Val) solo pueden escribirse.
Si el programa no cumple esta norma, se mostrar√° una advertencia durante la compilaci√≥n. En
ese caso convierta el par√°metro de entrada o salida en cuesti√≥n en un par√°metro de entrada/
salida.
Para la asignaci√≥n de par√°metros a funciones (FC) rigen reglas adicionales.
Consulte tambi√©n:
Asignaci√≥n de par√°metros a funciones

Par√°metros de bloque como marcas de flanco en funciones (FC)
Tambi√©n al programar evaluaciones de flancos en funciones (FC) deben observarse las reglas
anteriores sobre la transferencia de valores a par√°metros:
Como marca de flanco se requiere un valor de datos que pueda leerse y escribirse y que se
mantenga durante varios ciclos. Dado que los par√°metros de entrada (Input) solo pueden
leerse y los par√°metros de salida (Output) solo pueden escribirse, no pueden utilizarse como
marcas de flanco. Tampoco los datos locales temporales (Temp) pueden utilizarse como
marcas de flanco, ya que solo est√°n disponibles durante un ciclo.
Por ello, en las funciones (FC) solo pueden utilizarse par√°metros de entrada/salida (InOut)
como marcas de flanco. Tambi√©n es posible utilizar como marca de flanco un solo bit de un
par√°metro de entrada/salida, siempre que este se direccione a trav√©s de un acceso Slice.
El siguiente ejemplo muestra c√≥mo utilizar un par√°metro de entrada/salilda como marca de
flanco.
AWL
FP #InOutFlagStore.x0

"InOutFlagStore" es un par√°metro de entrada/salida del tipo de datos BYTE. La direcci√≥n
"#InOutFlagStore.x0" direcciona la direcci√≥n de bit 0, que ejerce de marca de flanco.

Inicializaci√≥n autom√°tica de par√°metros de bloque en funciones (FC)
En el S7-300/400 es imprescindible preasignar un valor a los datos locales temporales (Temp)
de una funci√≥n. De lo contrario el programa podr√≠a funcionar con valores no definidos.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

155

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
En el S7-1500 el peligro de procesar valores no definidos se reduce notablemente, ya que los
siguientes par√°metros se inicializan autom√°ticamente en la llamada del bloque:
‚óè A los datos temporales del tipo de datos STRING y WSTRING se les preasigna siempre una
longitud m√°xima de 254 y una longitud real de 0.
‚óè En las funciones (FC), los datos temporales con tipo de datos simple se inicializan
autom√°ticamente con acceso optimizado. Se les asigna el valor predefinido para el tipo de
datos especificado. Por ejemplo, el valor predefinido para BOOL es "false". A los elementos
de los tipos de datos PLC se les preasigna el valor predeterminado especificado en la
declaraci√≥n del tipo de datos PLC (UDT). Los elementos del tipo de datos ARRAY, STRING
o WSTRING tienen asignado el valor "0", aunque se utilicen en un tipo de datos PLC.
En el S7-300/400, deb√≠a escribirse forzosamente un valor en los par√°metros de salida (Output)
de funciones, ya que de lo contrario pod√≠an producirse reacciones no deseadas en el
programa. Cuando se utilizaban instrucciones de salto o instrucciones que depend√≠an del
RLO, era necesario comprobar esto en todos los circuitos posibles del programa.
En el S7-1500, el peligro que suponen los par√°metros de salida no definidos se reduce
notablemente, ya que los par√°metros de salida del tipo de datos simple se inicializan
autom√°ticamente en las llamadas de bloque. A estos par√°metros se les asigna previamente el
valor predefinido para el tipo de datos especificado. Por ejemplo, el valor predefinido para
BOOL es "false". No obstante, a los par√°metros de salida estructurados no se les asigna
ning√∫n valor. En la llamada de bloque se transmiten como puntero, por lo que no pueden ser
no definidos.

3.4.1.8

Bloques multiinstancia en S7-1500

Bloques multiinstancia
En las CPU de la serie S7-1500 todos los bloques de funci√≥n son aptos para multiinstancia. Por
ello los FBs que estaban marcados en el programa de partida como no aptos para
multiinstancia se convierten en bloques aptos para multiinstancia con la migraci√≥n. Para cada
FB convertido se incluye una indicaci√≥n en el informe de migraci√≥n. Si despu√©s de la migraci√≥n
se contin√∫a utilizando el FB como una instancia individual, el programa funcionar√° sin cambios.

3.4.1.9

N√∫meros en coma flotante en S7-1500

N√∫meros en coma flotante no v√°lidos
Existe una diferencia en el tratamiento de n√∫meros en coma flotante no v√°lidos en S7-1500 y
S7-300/400. Ejemplo:
‚óè S7-300/400: el resultado de la expresi√≥n "N√∫mero en coma flotante no v√°lido <> 1.0" es
FALSE.
‚óè S7-1500: el resultado de la expresi√≥n "N√∫mero en coma flotante no v√°lido <> 1.0" es TRUE.

156

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Observe que las instrucciones en el programa pueden suministrar otros resultados debido a
esta diferencia.

3.4.1.10

Escritura de caracteres individuales de un STRING en S7-1500

Escritura de caracteres individuales de un STRING
Si debe escribirse un car√°cter o un byte en un STRING, la CPU de la gama S7-1500
comprobar√° si la direcci√≥n de destino est√° comprendida en la longitud real del STRING. De lo
contrario no se escribe el car√°cter o byte. La √∫nica excepci√≥n es cuando el car√°cter se escribe
directamente despu√©s de la longitud real del STRING.
El ejemplo siguiente muestra el STRING 'hello' con la longitud real 5. El car√°cter n.¬∫ 27 del
STRING est√° fuera de la longitud real, por lo que no puede escribirse. El STRING permanece
invariable, el resultado de la asignaci√≥n es 'hello'.
SCL
MyDB.mystring := 'hello';
MyDB.mystring[27] :=
CHAR_TO_BYTE('!');

El ejemplo siguiente muestra el caso de excepci√≥n mencionado: El car√°cter se escribe en el 6.¬∫
car√°cter, justo detr√°s del STRING. El resultado de la asignaci√≥n es 'hello!'.
SCL
MyDB.mystring := 'hello';
MyDB.mystring[6] :=
CHAR_TO_BYTE('!');

Siempre que sea posible, utilice las instrucciones de la paleta "Instrucciones avanzadas >
String + Char" para manejar los STRING.
SCL
CONCAT(IN1 := 'hello', IN2 := '!');

3.4.1.11

Accesos a la palabra de estado en S7-1500

Palabra de estado
En el S7-1500, la palabra de estado no est√° soportada en su totalidad. Contiene menos
informaci√≥n y solo puede evaluarse en AWL. La interpretaci√≥n de la palabra de estado ya no
est√° soportada en KOP y FUP. Los siguientes cap√≠tulos contienen indicaciones sobre la
migraci√≥n de accesos a la palabra de estado en los diferentes lenguajes de programaci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

157

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Consulte tambi√©n
Migraci√≥n de programas KOP/FUP a S7-1500 (P√°gina 187)
Migraci√≥n de programas AWL a S7-1500 (P√°gina 191)

3.4.1.12

Carga de modificaciones del software en S7-1500

Carga de modificaciones de software
Al cargar modificaciones de software, las CPU de la serie S7-1500 se comportan de forma
distinta a las CPU de las series S7-300/400. Por ejemplo, ofrecen la posibilidad de cargar
modificaciones en STOP y en RUN sin influir en los valores actuales de variables ya cargadas.

3.4.2

Migraci√≥n de instrucciones a S7-1500

3.4.2.1

Indicaciones sobre la migraci√≥n de instrucciones

Migraci√≥n autom√°tica de instrucciones
Durante la migraci√≥n se adoptan en el nuevo programa las instrucciones utilizadas en el
programa de partida. Las adaptaciones necesarias se llevan a cabo de forma autom√°tica en lo
posible, sin cambiar la sem√°ntica del programa de partida. Si existen varias versiones de una
instrucci√≥n, la migraci√≥n utilizar√° siempre la √∫ltima versi√≥n.
Las instrucciones que no est√°n disponibles en S7-1500 se reemplazan, en lo posible, por una
instrucci√≥n compatible o similar autom√°ticamente.

158

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Escenarios de migraci√≥n
La tabla siguiente muestra los posibles escenarios de migraci√≥n para las instrucciones:
Clase

Situaci√≥n

Reacci√≥n del sistema

Adaptaci√≥n manual del
programa

1

La instrucci√≥n es id√©ntica en las dos fa‚Äê
milias de CPU.

La instrucci√≥n se migra. No es necesaria una
adaptaci√≥n. El progra‚Äê
ma migrado no tiene
cambios sem√°nticos y
se puede compilar.

2

En S7-1500 ya no existe la instrucci√≥n,
pero existe una instrucci√≥n compatible
m√°s reciente.

La instrucci√≥n ser√°
reemplazada por la nue‚Äê
va. Es posible que se
a√±adan m√°s instruccio‚Äê
nes que sean necesa‚Äê
rias para mantener la
sem√°ntica del progra‚Äê
ma de partida. El infor‚Äê
me de migraci√≥n notifi‚Äê
ca el reemplazo.

3

En S7-1500 ya no existe la instrucci√≥n,
pero existe una instrucci√≥n similar.

La instrucci√≥n se reem‚Äê Debe comprobar y, da‚Äê
plaza por la instrucci√≥n do el caso, adaptar el
programa.
similar. El informe de
migraci√≥n notifica el
reemplazo. Las posicio‚Äê
nes que deben compro‚Äê
barse est√°n marcadas
en el programa. Obten‚Äê
dr√° indicaciones acerca
de las adaptaciones ne‚Äê
cesarias como comen‚Äê
tarios directamente en
la parte del programa
correspondiente o al
compilar.

4

En S7-1500 ya no existe la instrucci√≥n y
tampoco existe una instrucci√≥n similar.

La instrucci√≥n se repre‚Äê Debe comprobar y, da‚Äê
senta en color rojo. No do el caso, adaptar el
es posible compilar el
programa.
programa.

No es necesaria una
adaptaci√≥n. El progra‚Äê
ma migrado no tiene
cambios sem√°nticos y
se puede compilar.

Indicaciones sobre instrucciones de la clase de migraci√≥n 3
Algunas instrucciones que estaban disponibles en S7-300/400 ya no se ofrecen en S7-1500,
ya que en este caso hay m√©todos m√°s sencillos o con mayor rendimiento para la soluci√≥n de
determinadas tareas. La migraci√≥n PLC le ayuda en la migraci√≥n al ser reemplazadas esas
instrucciones por instrucciones nuevas adecuadas. Sin embargo, las instrucciones del caso 3
no son completamente migrables de forma autom√°tica, ya que se han a√±adido, por ejemplo,
par√°metros formales nuevos. Las posiciones que no son migrables autom√°ticamente se
marcan en el programa. Obtendr√° indicaciones acerca de las adaptaciones necesarias como
comentarios directamente en el lugar correspondiente del programa, en el informe de
migraci√≥n o al compilar.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

159

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Pueden ser necesarias las siguientes adaptaciones manuales:
‚óè Si la nueva instrucci√≥n tiene par√°metros formales adicionales, asigne par√°metros actuales
adecuados a esos par√°metros.
‚óè Si la nueva instrucci√≥n tiene nombres de par√°metros modificados, cambie la asignaci√≥n de
par√°metros.
‚óè Si la migraci√≥n no puede garantizar de forma un√≠voca que la transferencia de par√°metros
sea sem√°nticamente id√©ntica con el programa de partida, los par√°metros actuales que
deben comprobarse se marcan. Compruebe la sem√°ntica de estas partes del programa
despu√©s de la migraci√≥n y corr√≠jalas si es necesario.
‚óè Si el programa original contiene identificadores HW, p. ej. en el par√°metro "LADDR", estos
tambi√©n se marcan. Introduzca el nuevo identificador HW en el par√°metro "LADDR".
‚óè Si la nueva instrucci√≥n tiene c√≥digos de error modificados, adapte el tratamiento de errores
en el programa.
Encontrar√° algunos ejemplos de instrucciones de la clase de migraci√≥n 3 en el cap√≠tulo
"Migraci√≥n de instrucciones de bloques de datos (P√°gina 169)".

Indicaciones sobre instrucciones de la clase de migraci√≥n 4
Algunas instrucciones ya no se ofrecen en S7-1500, ya que la funcionalidad ha cambiado
desde el principio. Esas instrucciones no se reemplazan por la migraci√≥n. Se representan en
rojo en el programa y hacen que el programa no se pueda compilar. Obtendr√° indicaciones
acerca de las adaptaciones necesarias como comentarios directamente en el lugar
correspondiente del programa, en el informe de migraci√≥n o al compilar.
En los siguientes cap√≠tulos encontrar√° una relaci√≥n de las instrucciones de la clase de
migraci√≥n 4 que no pueden migrarse e informaci√≥n sobre soluciones alternativas.
Nota
Soporte adicional
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n
PLC:
Migraci√≥n - Controladores:
http://support.automation.siemens.com/WW/view/es/83557459 (http://
support.automation.siemens.com/WW/view/es/83557459)
Si necesita soporte adicional para la migraci√≥n PLC, dir√≠jase al SIMATIC Customer Support.

Consulte tambi√©n
Preguntas frecuentes sobre la migraci√≥n (http://support.automation.siemens.com/WW/
view/es/64898867)

160

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.2.2

Vista general de las instrucciones no migrables

Introducci√≥n
Algunas instrucciones de S7-300/400 no pueden migrarse a S7-1500. Esto ocurre, por
ejemplo, cuando las instrucciones se utilizan solo en relaci√≥n con m√≥dulos determinados o
cuando la funcionalidad de la instrucci√≥n en S7-1500 se debe implementar de otra forma.

Indicaciones sobre el reemplazo de instrucciones no migrables (clase 4)
A continuaci√≥n encontrar√° ejemplos de instrucciones no migrables e indicaciones sobre su
reemplazo:
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

Otras instrucciones

SETP

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "SET_BF".

RESETP

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RESET_BF".

DRUM_X

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "DRUM".

TONR_X

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "TONR".

RESET

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RESET_BF".

SET

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "SET_BF".

WSR

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

SHRB

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

RESETI

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RESET_BF".

SETI

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "SET_BF".

Control del tiempo de eje‚Äê COMPRESS
cuci√≥n

Borre la instrucci√≥n. En S7-1500 ya no es necesario com‚Äê
primir la memoria de trabajo de la CPU o la memoria de
carga.

PROTECT

Configure el nivel de protecci√≥n y la contrase√±a a trav√©s
del panel frontal de la CPU S7-1500 o en las propiedades
de m√≥dulo de la CPU.

CiR

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

161

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

Fecha y hora

SET_CLKS

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "WR_SYS_T".

LOC_TIME

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RD_SYS_T".

BT_LT

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RD_SYS_T".

LT_BT

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RD_SYS_T".

S_LTINT

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "SET_TINTL".

SET_SW

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "WR_SYS_T" o "RD_SYS_T".

SET_SW_S

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "WR_SYS_T" o "RD_SYS_T".

TIMESTMP

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "WR_SYS_T" o "RD_SYS_T".

WS_RULES

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

D_PRAL

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

ASi_3422

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

SALRM

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

Parametrizaci√≥n del m√≥‚Äê
dulo

PARM_MOD

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

Alarmas

MP_ALM

La alarma de multiprocesamiento no est√° disponible en
S7-1500.

REPL_VAL

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

Periferia descentralizada

162

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

Avisos

EN_MSG

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

DIS_MSG

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

ALARM_SQ

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

ALARM_S

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

ALARM_SC

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

WR_USMSG

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

READ_SI

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

DEL_SI

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

ALARM_DQ

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

ALARM_D

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

NOTIFY_8P

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

ALARM

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

ALARM_8

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

163

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

ALARM_8P

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

NOTIFY

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

AR_SEND

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "Program_Alarm".
Encontrar√° informaci√≥n adicional en el cap√≠tulo "Migraci√≥n
de avisos con valores asociados (P√°gina 173)" y en el
SIMATIC Customer Support.

Diagn√≥stico

Funciones de tabla

RDSYSST

La instrucci√≥n "RDSYSST: Leer lista de estado del siste‚Äê
ma" ya no est√° disponible en S7-1500, ya que las CPU de
dicha familia no elaboran listas de estado de sistema. No
obstante, existe la posibilidad de leer algunas informacio‚Äê
nes a trav√©s de las instrucciones "GET_DIAG",
"Geo2Log", "DeviceStates" o "ModuleStates". Encontrar√°
informaci√≥n adicional en el cap√≠tulo "Migraci√≥n de la ins‚Äê
trucci√≥n RDSYSST (P√°gina 171)" y en el SIMATIC Custo‚Äê
mer Support.

OB_RT

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "RD_SYS_T".

ATT
FIFO
TBL_FIND
LIFO
TBL
TBL_WRD
WRD_TBL
DEV
CDT
TBL_TBL
PACK

164

Las instrucciones no pueden reemplazarse. Si las instruc‚Äê
ciones son necesarias en el programa, hay que implemen‚Äê
tarlas manualmente. Encontrar√° ayuda adicional en el ca‚Äê
p√≠tulo "Migraci√≥n de instrucciones de tabla (P√°gina 177)" y
a trav√©s del SIMATIC Customer Support.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

Direccionamiento

LGC_GADR

No es posible utilizar estas instrucciones para m√≥dulos
situados detr√°s de pasarelas (p. ej. IE/PB Link). Utilice en
su lugar las instrucciones "GEO2LOG" y "LOG2GEO".

GADR_LGC

Para m√≥dulos que no est√°n conectados a la CPU con una
pasarela (p. ej. IE/PB Link) siguen funcionando las ins‚Äê
trucciones "LGC_GADR" y "GADR_LGC".
iSlave

SET_ADDR

La instrucci√≥n no puede reemplazarse. Si necesita mayor
asistencia, dir√≠jase al SIMATIC Customer Support.

PID Control

TUN_EC

Compruebe si las instrucciones del programa pueden
reemplazarse por los objetos tecnol√≥gicos "PID_Com‚Äê
pact" o "PID_3Step".

TUN_ES
M√≥dulos de funci√≥n

CNT_CTRL
DIAG_INF
CNT_CTL1
CNT_CTL2
CNT2WRPN
CNT2RDPN
CNT2_CTR

Compruebe si las instrucciones del programa pueden
reemplazarse por el objeto tecnol√≥gico
"High_Speed_Counter" en combinaci√≥n con los m√≥dulos
de contador "S7-1500 TM Count 2x24V" o "TM PosInput
2".
Como alternativa, compruebe si la funci√≥n deseada puede
realizarse con los m√≥dulos "ET 200S 1Count24V" o
"1Count5V".

DIAG_RD
ABS_INIT
ABS_CTRL

Compruebe si las funciones pueden realizarse con
"S7-1500 Motion" o "ET 200S 1PosU".

ABS_DIAG

Compruebe si las funciones pueden realizarse con los
m√≥dulos "TM Count 2x24V" o "TM PosInput 2".

CAM_INIT

Compruebe si pueden leerse se√±ales de enc√≥der con m√≥‚Äê
dulos "S7-1500 TM Count 2x24V" o "TM PosInput 2" y
utilizarse ambas DQ para reacciones r√°pidas. Dependien‚Äê
do del valor del enc√≥der se pueden conectar otras DQ de
DQ est√°ndar del programa de usuario.

CAM_CTRL
CAM_DIAG
PID_FM
FUZ_355
FORCE355

Compruebe si las instrucciones del programa pueden
reemplazarse por los objetos tecnol√≥gicos "PID_Com‚Äê
pact" o "PID_3Step" o funciones PID b√°sicas.

READ_355
CH_DIAG
PID_PAR
CJ_T_PAR
FMT_PID
FMT_PAR
FMT_CJ_T
FMT_DS1
FMT_TUN
FMT_PV

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

165

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

Funciones 300C

ANALOG_300C

Compruebe si las instrucciones del programa pueden
reemplazarse por las instrucciones del grupo "Motion Con‚Äê
trol".

DIGITAL_300C

COUNT_300C
FREQUENC_300C

Compruebe si las instrucciones del programa pueden
reemplazarse por el objeto tecnol√≥gico
"High_Speed_Counter" en combinaci√≥n con m√≥dulos de
contador.

PULSE_300C

Compruebe si la instrucci√≥n del programa puede reempla‚Äê
zarse por la instrucci√≥n "CTRL_PWM".

SEND_RK_300C

Las instrucciones de comunicaci√≥n del S7-1500 no sopor‚Äê
tan RK 512. Si se requiere la funcionalidad RK, hay que
implementarla manualmente.

FETCH_RK_300C
SERVE_RK_300C

Comunicaci√≥n con iSlave/ I_GET
iDevice
I_PUT

Las instrucciones no pueden reemplazarse. Si necesita
mayor asistencia, dir√≠jase al SIMATIC Customer Support.

I_ABORT
Comunicaci√≥n S7

PRINT
START
STOP
RESUME
STATUS
USTATUS

Compruebe si las instrucciones del programa pueden
reemplazarse por las instrucciones de la comunicaci√≥n S7
para S7-1500. Las instrucciones "CONTROL" y
"C_CNTRL" podr√≠an sustituirse, p. ej., por la instrucci√≥n
"T_DIAG".

CONTROL
C_CNTRL

Open User Communica‚Äê
tion

TCON_PAR
TADDR_PAR
TCP_conn_active
TCP_conn_passive
ISOonTCP_conn_active
SOonTCP_conn_passive
ISOonTCP_conn_CP_active
ISOonTCP_conn_CP_passive
UDP_local_open

Estas instrucciones no son necesarias para la Open User
Communication en S7-1500. Los par√°metros de conexi√≥n
se ajustan en las propiedades del bloque.

UDP_rem_address_and_port

166

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Procesador de comunica‚Äê Instrucciones del grupo CP SIMA‚Äê
ciones
TIC NET
Instrucciones de los grupos PTP
CP 340, PTP CP341, PTP CP 440,
PTP CP 441
PROFINET/CBA

PN_IN
PN_OUT
PN_DP

Comunicaci√≥n MPI

Indicaciones
Encontrar√° informaci√≥n detallada sobre estas instruccio‚Äê
nes en el cap√≠tulo "Migraci√≥n de instrucciones de comuni‚Äê
caci√≥n (P√°gina 181)".

S7-1500 no soporta la comunicaci√≥n PROFINET/CBA.
Utilice la comunicaci√≥n S7 o la Open User Communication.

X_SEND
X_RCV
X_GET

S7-1500 no soporta la comunicaci√≥n MPI.

X_PUT

Utilice la comunicaci√≥n S7 o la Open User Communication.

X_ABORT
Comunicaci√≥n de datos
globales

GD_SND

S7-1500 no soporta la comunicaci√≥n de datos globales.

GD_RCV

Utilice la comunicaci√≥n S7 o la Open User Communication.

Comunicaci√≥n PtP

P_PRINT

Los m√≥dulos de comunicaciones PtP no soportan la fun‚Äê
ci√≥n de impresi√≥n.

P_PRINT341

Los m√≥dulos de comunicaciones PtP no soportan la fun‚Äê
ci√≥n de impresi√≥n.

MODB_341

Estos bloques para CP 341 / CP 441 no est√°n soportados
por el S7‚Äë1500. Utilice en su lugar las instrucciones para
MODBUS (RTU).

MODB_441

‚óè Modbus_Comm_Load
‚óè Modbus_Master
‚óè Modbus_Slave
en combinaci√≥n con los m√≥dulos punto a punto del
S7-1500
‚óè CM PtP RS232 HF
‚óè CM PtP RS422/485 HF
Encontrar√° informaci√≥n detallada sobre estas instruccio‚Äê
nes en el cap√≠tulo "Migraci√≥n de bloques de programa PtP
(P√°gina 185)".
S_MODB
S_USST
S_USSR
S_USSI

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Estas instrucciones para ET 200S 1SI no est√°n soporta‚Äê
das por el S7-1500. Utilice en su lugar las instrucciones
para MODBUS (RTU) o para USS en combinaci√≥n con el
m√≥dulo punto a punto "ET 200SP CM PtP".
Encontrar√° informaci√≥n detallada sobre estas instruccio‚Äê
nes en el cap√≠tulo "Migraci√≥n de bloques de programa PtP
(P√°gina 185)".

167

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Grupo de instrucciones

Instrucci√≥n no migrable

Indicaciones

TeleService

PG_DIAL

S7-1500 no soporta la interfaz MPI como interfaz est√°n‚Äê
dar. La instrucci√≥n ya no est√° disponible.

AS_DIAL

S7-1500 no soporta la interfaz MPI como interfaz est√°n‚Äê
dar. La instrucci√≥n ya no est√° disponible.

SMS_SEND

S7-1500 no soporta la interfaz MPI como interfaz est√°n‚Äê
dar. Compruebe si la instrucci√≥n del programa puede
reemplazarse por la instrucci√≥n "TMAIL_C".

AS_MAIL

S7-1500 no soporta la interfaz MPI como interfaz est√°n‚Äê
dar. Compruebe si la instrucci√≥n del programa puede
reemplazarse por la instrucci√≥n "TMAIL_C".

PNIO_DIAG

La instrucci√≥n "PNIO_DIAG" se pudo cargar para
S7-300/400 como descarga en una librer√≠a de usuario y
utilizar a efectos de diagn√≥stico. "PNIO_DIAG" ha sido
sustituido en S7-1500 por el diagn√≥stico integrado y, por
tanto, ya no es necesario.

Librer√≠a de usuario

En S7-1500 el diagn√≥stico de sistema est√° activado por
defecto. Puede usar el diagn√≥stico de sistema sin necesi‚Äê
dad de realizar m√°s ajustes. En caso necesario, puede
editar los ajustes para el diagn√≥stico de sistema en la con‚Äê
figuraci√≥n de dispositivos de S7-1500 en el registro "Pro‚Äê
piedades > Diagn√≥stico". Ah√≠ tambi√©n puede configurar
las alarmas del diagn√≥stico de sistema. Las alarmas est√°n
activadas por defecto.
En el panel HMI puede borrar, despu√©s de la migraci√≥n,
las im√°genes de diagn√≥stico utilizadas en relaci√≥n con
"PNIO_DIAG" y las etiquetas correspondientes. En su lu‚Äê
gar, utilice el control "Visor de diagn√≥stico del sistema" en
sus im√°genes de diagn√≥stico.

Nota
Soporte para las instrucciones no migrables
Si necesita soporte adicional con las instrucciones no migrables dir√≠jase al SIMATIC Customer
Support.
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n
PLC:
Migraci√≥n - Controladores:
http://support.automation.siemens.com/WW/view/es/83557459 (http://
support.automation.siemens.com/WW/view/es/83557459)

Consulte tambi√©n
Preguntas frecuentes sobre la migraci√≥n (http://support.automation.siemens.com/WW/
view/es/64898867)

168

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.2.3

Migraci√≥n de instrucciones de bloques de datos

Procedimiento en la migraci√≥n de instrucciones de bloques de datos (clase de migraci√≥n 3)
S7-1500 ofrece un juego de instrucciones modificado de la categor√≠a "Bloques de datos". Esas
instrucciones se reemplazan autom√°ticamente durante la migraci√≥n. A continuaci√≥n, deber√°
realizar adaptaciones manuales.
La tabla siguiente muestra una vista general de la migraci√≥n de las instrucciones de bloques
de datos:
Instrucci√≥n en S7-300/400

Instrucci√≥n en S7-1500

Clase de migraci√≥n

CREA_DBL

CREATE_DB

3

CREAT_DB

CREATE_DB

3

CREA_DB

CREATE_DB

3

DEL_DB

DELETE_DB

3

TEST_DB

ATTR_DB

3

ATENCI√ìN
Ejecuci√≥n as√≠ncrona
En S7-1500 las nuevas instrucciones trabajan de forma as√≠ncrona, es decir, la ejecuci√≥n se
extiende a varios ciclos de programa.

Adaptaciones manuales tras la migraci√≥n
En S7-1500 las instrucciones tienen par√°metros formales adicionales que son necesarios para
la ejecuci√≥n as√≠ncrona, por ejemplo. Estos par√°metros adicionales deben abastecerse con
par√°metros actuales adecuados despu√©s de la migraci√≥n.
El n√∫mero de bloque del DB creado en S7-1500 debe estar comprendido entre 60000 y 60999.
Por ello, adapte los par√°metros "LOW_LIMIT" y "UP_LIMIT" al nuevo rango num√©rico.
Encontrar√° una descripci√≥n detallada de los par√°metros en la Ayuda en pantalla de S7-1500.
Consulte tambi√©n:
AUTOHOTSPOT
AUTOHOTSPOT

Ejemplo
El ejemplo siguiente muestra la migraci√≥n de la instrucci√≥n "CREAT_DB" a la instrucci√≥n
"CREATE_DB".
En la primera figura se indica la llamada de "CREAT_DB" antes de la migraci√≥n:

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

169

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

En la segunda figura se indica la llamada de "CREATE_DB" tras la migraci√≥n:

‚óè El par√°metro "REQ" no exist√≠a en "CREAT_DB" y se ha agregado con la migraci√≥n. Recibe
el valor predeterminado "TRUE".
‚óè Los par√°metros "LOW_LIMIT" y "UP_LIMIT" estaban fuera del rango num√©rico permitido de
entre 60000 y 60999. Por ello, los valores "12" y "34" se han marcado como no v√°lidos
durante la migraci√≥n. A continuaci√≥n se han introducido manualmente los valores
permitidos "60000" y "60100".
‚óè El par√°metro "ATTRIB" no exist√≠a en "CREAT_DB" y se ha agregado con la migraci√≥n.
Recibe el valor predeterminado "0". En este par√°metro se especifican las propiedades del
DB que se va a crear.
‚óè El par√°metro "SRCBLK" no exist√≠a en "CREAT_DB" y se ha agregado con la migraci√≥n.
Aqu√≠ es posible indicar el √°rea de datos con cuyo contenido se describe el DB que se va a
crear.
‚óè El par√°metro "BUSY" no exist√≠a en "CREAT_DB" y se ha agregado con la migraci√≥n. El
par√°metro conduce la se√±al "1" hasta que el proceso de creaci√≥n del bloque de datos haya
concluido. Para evaluar la se√±al es necesario conectar el par√°metro de salida con un
operando.

170

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.2.4

Migraci√≥n de la instrucci√≥n RDSYSST

Procedimiento en la migraci√≥n de RDSYSST (clase de migraci√≥n 4)
La instrucci√≥n "RDSYSST: Leer lista de estado del sistema" ya no est√° disponible en S7-1500,
ya que las CPU de dicha familia no elaboran listas de estado de sistema. No obstante, existe
la posibilidad de leer algunas de las informaciones que usted ha obtenido hasta el momento a
trav√©s de la lista de estado del sistema mediante una de las siguientes instrucciones:
‚óè "RDREC" (Instrucciones avanzadas > Periferia descentralizada)
‚óè "GET_DIAG" (Instrucciones avanzadas > Diagn√≥stico)
‚óè "GEO2LOG" (Instrucciones avanzadas > Diagn√≥stico)
‚óè "DeviceStates" (Instrucciones avanzadas > Diagn√≥stico)
‚óè "ModuleStates" (Instrucciones avanzadas > Diagn√≥stico)
‚óè "RALRM" (Instrucciones avanzadas > Periferia descentralizada)
‚óè "LED" (Instrucciones avanzadas > Diagn√≥stico)

Lectura de informaci√≥n de estados de sistema en S7-1500
La tabla siguiente muestra qu√© informaciones pueden leerse a trav√©s del estado de sistema en
S7-1500.
En la columna "SZL-ID" encontrar√° las ID que ha le√≠do hasta el momento con la instrucci√≥n
RDSYSST. Las dos cifras finales son relevantes El comod√≠n "xy" var√≠a en funci√≥n del m√≥dulo
empleado.
La columna "Migraci√≥n" indica si la informaci√≥n todav√≠a est√° disponible en S7-1500 y c√≥mo se
puede leer.

Lista parcial

SZL-ID

Migraci√≥n

ID de m√≥dulo

W#16#xy11

Esta informaci√≥n puede leerse con la instrucci√≥n
"RDREC".
Lea el registro 16#AFF0 en el par√°metro "IN‚Äê
DEX".

Caracter√≠sticas de la CPU

W#16#xy12

En S7-1500 esta informaci√≥n no est√° disponible
actualmente.

√Åreas de memoria del usuario

W#16#xy13

En S7-1500 esta informaci√≥n no est√° disponible
actualmente.

√Åreas del sistema

W#16#xy14

En S7-1500 esta informaci√≥n no est√° disponible
actualmente.

Tipos de bloque

W#16#xy15

En S7-1500 esta informaci√≥n no est√° disponible
actualmente.

Identificaci√≥n de un componente

W#16#xy1C

Para m√≥dulos centrales y PROFINET IO esta
informaci√≥n puede leerse con la instrucci√≥n
"RDREC".
Lea el registro 16#AFF0 en el par√°metro "IN‚Äê
DEX".

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

171

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Lista parcial

SZL-ID

Migraci√≥n

Estado de alarma

W#16#xy22

En S7-1500 esta informaci√≥n no est√° disponible.

Correspondencia entre memorias
imagen parcial de proceso y OBs

W#16#xy25

En S7-1500 esta informaci√≥n no est√° disponible.

Comunicaci√≥n: datos de estado

W#16#xy32

En S7-1500 esta informaci√≥n no est√° disponible.

Informaci√≥n de grupo CPU H

W#16#xy71

Irrelevante

Estado de los LEDs de m√≥dulo

W#16#xy74

Esta informaci√≥n puede leerse con la instrucci√≥n
"LED".
Lea el registro W#16#xy74 en el par√°metro
"LED".

Esclavos DP conectados en el siste‚Äê W#16#xy75
ma H

Irrelevante

Informaci√≥n del sistema maestro DP W#16#xy90

En S7-1500 esta informaci√≥n no est√° disponible.

Informaci√≥n de estado del m√≥dulo

W#16#xy91

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "GET_DIAG" o "ModuleStates".

Informaci√≥n de estado del rack/de la
estaci√≥n

W#16#xy92

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "GET_DIAG" o "DeviceStates".

Informaci√≥n de estado del rack/de la
estaci√≥n

W#16#xy94

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "GET_DIAG" o "DeviceStates".

Informaci√≥n avanzada del sistema
maestro DP

W#16#xy95

En S7-1500 esta informaci√≥n no est√° disponible.

Informaci√≥n de estado del m√≥dulo
W#16#xy96
con PROFINET IO y PROFIBUS DP

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "GET_DIAG", "ModuleStates" o "Devi‚Äê
ceStates".

Informaci√≥n del cambiador de herra‚Äê W#16#xy9C
mientas (PROFINET IO)

En S7-1500 esta informaci√≥n no est√° disponible.

B√∫fer de diagn√≥stico

W#16#xyA0

En S7-1500 esta informaci√≥n no est√° disponible.

Informaci√≥n de diagn√≥stico del m√≥‚Äê
dulo (DS 0)

W#16#00B1

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "GET_DIAG" o "RDREC". Dentro del OB
de alarma obtendr√° informaci√≥n de diagn√≥stico
tambi√©n a trav√©s de "RALRM".

Informaci√≥n de diagn√≥stico del m√≥‚Äê
dulo (DS 1), direcci√≥n f√≠sica

W#16#00B2

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "RDREC" o "GEO2LOG". Dentro del OB
de alarma obtendr√° informaci√≥n de diagn√≥stico
tambi√©n a trav√©s de "RALRM".

Informaci√≥n de diagn√≥stico del m√≥‚Äê
dulo (DS 1), direcci√≥n l√≥gica

W#16#00B3

Esta informaci√≥n puede leerse con las instruc‚Äê
ciones "GET_DIAG" o "RDREC". Dentro del OB
de alarma obtendr√° informaci√≥n de diagn√≥stico
tambi√©n a trav√©s de "RALRM".

Datos de diagn√≥stico de un esclavo
DP

W#16#00B4

Esta informaci√≥n puede leerse parcialmente con
las instrucciones "ModuleStates" o "GET_DIAG".
Dentro del OB de alarma obtendr√° informaci√≥n
de diagn√≥stico tambi√©n a trav√©s de "RALRM".
Algunas de las informaciones no est√°n disponi‚Äê
bles en S7-1500.

172

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Nota
Soporte para la informaci√≥n que no puede leerse
Si necesita soporte adicional para la informaci√≥n que no puede leerse, dir√≠jase al SIMATIC
Customer Support.
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre la migraci√≥n
PLC:
Migraci√≥n - Controladores:
http://support.automation.siemens.com/WW/view/es/83557459 (http://
support.automation.siemens.com/WW/view/es/83557459)

Consulte tambi√©n
Preguntas frecuentes sobre la migraci√≥n (http://support.automation.siemens.com/WW/
view/es/64898867)

3.4.2.5

Migraci√≥n de la instrucci√≥n T_CONV

Extraer d√≠as de la semana de DATE_AND_TIME con T_CONV
La instrucci√≥n "T_CONV" est√° disponible tanto en los S7-300/400 como en los S7-1500. En la
mayor√≠a de los casos, la instrucci√≥n se migra autom√°ticamente. Si ha utilizado "T_CONV" para
extraer el d√≠a de la semana del tipo de datos DATE_AND_TIME (DT), en el caso del S7-1500
deber√° tener en cuenta lo siguiente:
En el S7-300/400 se esperaba un par√°metro de salida "OUT" del tipo de datos INT para extraer
el d√≠a de la semana. Contrariamente, en el S7-1500 el par√°metro de salida debe ser del tipo
DTL si se espera como resultado un d√≠a de la semana.
Si el par√°metro de salida "OUT" es de otro tipo de datos, en la migraci√≥n PLC se indica un error
en el informe de migraci√≥n. En este caso, convierta el tipo de datos del par√°metro de salida en
DTL y utilice el componente "Weekday".
Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

3.4.2.6

Migraci√≥n de avisos con valores asociados

Configuraci√≥n de avisos con S7-1500
En el S7-1500 se pueden realizar todas las funciones de la configuraci√≥n de avisos de forma
centralizada con la instrucci√≥n "Program_Alarm".
"Program_Alarm" dispara las siguientes instrucciones del S7-300/400:

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

173

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Instrucci√≥n para la configura‚Äê Instrucci√≥n para la configuraci√≥n de avisos (S7-1500)
ci√≥n de avisos (S7-300/400)
ALARM_SQ
ALARM_S
ALARM_SC
ALARM_DQ
ALARM_D
NOTIFY_8P
ALARM
ALARM_8

Program_Alarm (clase de migraci√≥n 4)

ALARM_8P
NOTIFY
AR_SEND

Procedimiento para la migraci√≥n de avisos
Los avisos no se migran autom√°ticamente. Despu√©s de la migraci√≥n es necesario configurar
de nuevo los avisos manualmente.
A continuaci√≥n se describe c√≥mo preparar el programa de manera que no se pierdan los textos
de aviso despu√©s de la migraci√≥n y se minimice el posterior repaso manual.
Este procedimiento no es aplicable a instrucciones de aviso que utilicen los tipos de datos
"C_Alarm_8", "C_Alarm_8p", "C_Alarm_t"; "C_Notify_8p" o "C_Ar_send".

174

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Para migrar avisos, proceda de la manera siguiente:
1. Abra el bloque que contiene el aviso.
La interfaz del bloque contiene un par√°metro que tiene un tipo de datos de aviso (p. ej. el
tipo de datos "C_Alarm_s", " C_Notify", etc.). Este par√°metro define la entrada del n√∫mero
de aviso.
2. Desplace el par√°metro para la entrada del n√∫mero de aviso a la secci√≥n "Static".

3. Guarde y compile el bloque modificado.
4. A continuaci√≥n, lleve a cabo la migraci√≥n PLC.
Consulte tambi√©n: Ejecuci√≥n de la migraci√≥n (P√°gina 147)
5. Abra nuevamente el bloque que conten√≠a el aviso en la CPU nueva.
No se pudo migrar la instrucci√≥n para la configuraci√≥n de avisos, por lo que se muestra en
rojo.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

175

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
6. En la interfaz de bloque sustituya el tipo de datos de aviso (p. ej. "C_Alarm_s") por el nuevo
tipo de datos "Program_Alarm". Si el tipo de datos "Program_Alarm" no aparece en la lista
de selecci√≥n, introduzca el nombre a trav√©s del teclado.
7. Abra la Task Card "Instrucciones" y en la paleta "Instrucciones avanzadas" vaya hasta la
carpeta "Avisos".
8. Arrastre la instrucci√≥n "Program_Alarm" al segmento en cuesti√≥n.
9. Seleccione la variable de aviso reconfigurada anteriormente en el campo de entrada
"Nombre en la interfaz" del cuadro de di√°logo "Opciones de llamada".
10.Abra las propiedades de la variable y cambie a la ficha "Aviso".
Se ha registrado el texto de aviso del programa de origen.
11.Borre el car√°cter del tipo de elemento de los valores asociados (p. ej. Y, W, X, I etc.). En
S7-1500 los valores asociados no contienen datos sobre el tipo de elemento.
Consulte tambi√©n: AUTOHOTSPOT
12.Borre el antiguo bloque de aviso del segmento.
La configuraci√≥n de avisos se ha migrado. Se ha adoptado el texto de aviso del programa
de origen.

176

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.2.7

Migraci√≥n de instrucciones de tabla

Ejemplo de migraci√≥n de "ATT: Introducir valor en tabla"
Procedimiento en la migraci√≥n de instrucciones de tabla (clase de migraci√≥n 4)
Las instrucciones del grupo "Instrucciones de tabla" ya no est√°n disponibles en S7-1500 y no
pueden sustituirse por la migraci√≥n, ya que se basan en un direccionamiento absoluto. No
obstante, en S7-1500 hay disponibles c√≥modas funciones que permiten implementar las
instrucciones manualmente. A continuaci√≥n se describe un ejemplo para la implementaci√≥n de
la instrucci√≥n "ATT: Introducir valor en tabla".

Implementaci√≥n
El siguiente programa SCL muestra la implementaci√≥n de la instrucci√≥n "ATT". La funci√≥n del
ejemplo se ha implementado como FC en SCL.
La tabla siguiente muestra la declaraci√≥n de las variables utilizadas:
Operando

Declaraci√≥n

Tipo de datos

Descripci√≥n

val

Input

INT

Valor introducido

tab

InOut

Tipo de datos PLC
"Tabla10"

Tabla con 10 filas

x

InOut

ARRAY [0..9] of INT

Cada elemento ARRAY representa
una fila. En el ejemplo se utiliza un
ARRAY of INT. Tambi√©n es posible
crear ARRAYs con cualquier tipo de
datos. Igualmente pueden emplear‚Äê
se ARRAY of STRUCT o un ARRAY
de un tipo de datos PLC.

lng

InOut

INT

Longitud del b√∫fer. El valor se rige
por el n√∫mero de elementos ARRAY
de "tab.x".

first

InOut

INT

Primer valor escrito

InOut

INT

√öltimo valor escrito

Temp

INT

Variable auxiliar

BOOL

Valor de funci√≥n

last
h
Ret_Val

La tabla siguiente muestra la FC "Attend":

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

177

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
La funci√≥n escribe el valor del par√°metro de entrada "#val" en la √∫ltima fila de la tabla.
SCL
#h:=(#tab.last+1) MOD #tab.lng;
IF #h <> #tab.first THEN
#tab.x[#tab.last] := #val;
#tab.last := #h;

// Incrementar √≠ndice
// Consultar si los √≠ndices se adelantan
// Escribir valor
// Guardar √≠ndice del siguiente elemento libre

#Attend:= false;
ELSE
#Attend:= true;
cirse

// Error >> La tabla est√° llena, el valor no puede introdu-

END_IF;

Ejemplo de migraci√≥n de "FIFO: Emitir primer valor de la tabla"
Procedimiento en la migraci√≥n de instrucciones de tabla (clase de migraci√≥n 4)
Las instrucciones del grupo "Instrucciones de tabla" ya no est√°n disponibles en S7-1500 y no
pueden sustituirse por la migraci√≥n, ya que se basan en un direccionamiento absoluto. No
obstante, en S7-1500 hay disponibles c√≥modas funciones que permiten implementar las
instrucciones manualmente. A continuaci√≥n se describe un ejemplo para la implementaci√≥n de
la instrucci√≥n "FIFO: Emitir primer valor de la tabla".

Implementaci√≥n
El siguiente programa SCL muestra la implementaci√≥n de la funci√≥n de tabla "FIFO". La
funci√≥n del ejemplo se ha implementado como FC en SCL.
La tabla siguiente muestra la declaraci√≥n de las variables utilizadas:

178

Operando

Declaraci√≥n

Tipo de datos

Descripci√≥n

val

Output

INT

Valor emitido

tab

InOut

Tipo de datos PLC
"Tabla10"

Tabla con 10 filas

x

InOut

ARRAY of INT [0..9]

Cada elemento ARRAY representa
una fila. En el ejemplo se utiliza un
ARRAY of INT. Tambi√©n es posible
crear ARRAYs con cualquier tipo de
datos. Igualmente pueden emplear‚Äê
se ARRAY of STRUCT o un ARRAY
de un tipo de datos PLC.

lng

InOut

INT

Longitud del b√∫fer. El valor se rige
por el n√∫mero de elementos ARRAY
de "tab.x".

first

InOut

INT

Primer valor escrito

last

InOut

INT

√öltimo valor escrito

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Operando

Declaraci√≥n

Tipo de datos

Descripci√≥n

h

Temp

INT

Variable auxiliar

BOOL

Valor de funci√≥n

Ret_Val

La tabla siguiente muestra la FC "Fifo":
La funci√≥n devuelve el primer valor escrito en la tabla (first in, first out). El valor de funci√≥n "true"
indica que la tabla est√° vac√≠a.
SCL
#h:=(#tab.first+1) MOD #tab.lng; // Incrementar √≠ndice
IF #h <> #tab.last THEN
adelantan

// Consultar si los √≠ndices se

#tab.first := #h;
valor

// Guardar √≠ndice del siguiente

¬∑

#val := #tab.x[#h];

// Emitir el valor deseado

#Fifo:= false;
ELSE
#Fifo:= true; // Error >> La tabla est√° vac√≠a, no se emite
ning√∫n valor
#val := #tab.x[#tab.first]; // Volver a emitir el √∫ltimo valor
v√°lido
END_IF;

Ejemplo de migraci√≥n de "LIFO: Emitir √∫ltimo valor de la tabla"
Procedimiento en la migraci√≥n de instrucciones de tabla (clase de migraci√≥n 4)
Las instrucciones del grupo "Instrucciones de tabla" ya no est√°n disponibles en S7-1500 y no
pueden sustituirse por la migraci√≥n, ya que se basan en un direccionamiento absoluto. No
obstante, en S7-1500 hay disponibles c√≥modas funciones que permiten implementar las
instrucciones manualmente. A continuaci√≥n se describe un ejemplo para la implementaci√≥n de
la instrucci√≥n "LIFO: Emitir √∫ltimo valor de la tabla".

Implementaci√≥n
El siguiente programa SCL muestra la implementaci√≥n de la funci√≥n de tabla "LIFO". La
funci√≥n del ejemplo se ha implementado como FC en SCL.
La tabla siguiente muestra la declaraci√≥n de las variables utilizadas:
Operando

Declaraci√≥n

Tipo de datos

Descripci√≥n

val

Output

INT

Valor emitido

tab

InOut

Tipo de datos PLC
"Tabla10"

Tabla con 10 filas

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

179

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Operando

Declaraci√≥n

Tipo de datos

Descripci√≥n

x

InOut

ARRAY of INT [0..9]

Cada elemento ARRAY representa
una fila. En el ejemplo se utiliza un
ARRAY of INT. Tambi√©n es posible
crear ARRAYs con cualquier tipo de
datos. Igualmente pueden emplear‚Äê
se ARRAY of STRUCT o un ARRAY
de un tipo de datos PLC.

lng

InOut

INT

Longitud del b√∫fer. El valor se rige
por el n√∫mero de elementos ARRAY
de "tab.x".

first

InOut

INT

Primer valor escrito

last

InOut

INT

√öltimo valor escrito

Temp

INT

Variable auxiliar

BOOL

Valor de funci√≥n

h
Ret_Val

La tabla siguiente muestra la FC "Lifo":
La funci√≥n devuelve el √∫ltimo valor escrito en la tabla (last in, first out). El valor de funci√≥n "true"
indica que la tabla est√° vac√≠a.
SCL
#h:=(#tab.last-1) MOD #tab.lng;

// Decrementar √≠ndice

IF #h<0 THEN #h:=#h + #tab.lng; END_IF; // Solo se permiten
√≠ndices positivos
IF #h <> #tab.first THEN
√≠ndices se adelantan
#tab.last := #h;
siguiente valor
#val := #tab.x[#h];

// Consultar si los
// Guardar √≠ndice del
// Emitir el valor deseado

#Lifo:= false;
ELSE
#Lifo:= true; // Error >> La tabla est√° vac√≠a, no se
emite ning√∫n valor
#val := #tab.x[#tab.last];
√∫ltimo valor v√°lido

// Volver a emitir el

END_IF;

180

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.2.8

Migraci√≥n de instrucciones de comunicaci√≥n

SIMATIC NET CP/CM
Migraci√≥n de bloques de programa
Introducci√≥n
S7-300/400 utiliza bloques de programa espec√≠ficos para funciones de comunicaci√≥n a trav√©s
de PCs SIMATIC NET. S7-1500 ofrece un juego de instrucciones modificado para estas
funciones de comunicaci√≥n.
Las tablas siguientes proporcionan una vista general de la migraci√≥n de los bloques de
programa utilizados en S7-300/400.
Encontrar√° m√°s informaci√≥n sobre la indicaci√≥n de la columna "Clase" en el cap√≠tulo
Indicaciones sobre la migraci√≥n de instrucciones (P√°gina 158)

Bloques de programa para Industrial Ethernet / PROFINET
Servicio de comunicaci√≥n / rango
de funciones

Tipo de instrucci√≥n

SEND / RECEIVE

AG_SEND

Librer√≠a

Instrucci√≥n en S7‚Äë1500

Clase

CP 300

CP 400

x

x

T_SEND

3

x

x

T_SEND

3

x

x

TUSEND

3

x

x

TMAIL_C

3

x

x

T_RCV

3

x

x

T_RCV

3

AG_LOCK

x

x

-

4

AG_UNLOCK

x

x

-

4

AG_CNTRL

x

x

T_DIAG, T_RESET,
TCON, TDISCON

3

Conexiones programadas

IP_CONFIG

x

x

T_CONFIG

3

FTP

FTP_CMD

x

x

FTP_CMD

3

(servicios de comunicaci√≥n abierta) Migraci√≥n AG_SEND/
AG_LSEND (P√°gina 183)
AG_LSEND
Migraci√≥n AG_SEND/
AG_LSEND (P√°gina 183)
AG_SEND (v√≠a UDP)
Migraci√≥n AG_SEND/
AG_LSEND (P√°gina 183)
AG_SEND (e-mail)
Migraci√≥n AG_SEND/
AG_LSEND (P√°gina 183)
AG_RECV
Migraci√≥n AG_RECV/
AG_LRECV (P√°gina 185)
AG_LRECV
Migraci√≥n AG_RECV/
AG_LRECV (P√°gina 185)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

181

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Servicio de comunicaci√≥n / rango
de funciones

Tipo de instrucci√≥n

PROFINET IO

PNIO_SEND

*)

Librer√≠a

Instrucci√≥n en S7‚Äë1500

Clase

x

-

4 *)

PNIO_RECV

x

-

4 *)

PNIO_RW_REC

x

-

4 *)

PNIO_ALARM

x

-

4 *)

CP 300

CP 400

Deben utilizarse otros mecanismos de acceso.

Bloques de programa para PROFIBUS
Servicio de comunicaci√≥n / rango
de funciones

Tipo de instrucci√≥n

SEND / RECEIVE

AG_SEND

Librer√≠a

Instrucci√≥n en S7-1500

Caso

CP 300

CP 400

x

x

T_SEND

3

-

x

T_SEND

3

x

x

T_RCV

3

-

x

T_RCV

3

DP_SEND

x

-

-

4 *)

DP_RECV

x

-

-

4 *)

DP_DIAG

x

-

-

4 *)

DP_CTRL

x

-

-

4 *)

(servicios de comunicaci√≥n abierta) Migraci√≥n AG_SEND/
AG_LSEND (P√°gi‚Äê
na 183)
AG_LSEND
Migraci√≥n AG_SEND/
AG_LSEND (P√°gi‚Äê
na 183)
AG_RECV
Migraci√≥n AG_RECV/
AG_LRECV (P√°gi‚Äê
na 185)
AG_LRECV
Migraci√≥n AG_RECV/
AG_LRECV (P√°gi‚Äê
na 185)
PROFIBUS DP

*)

Deben utilizarse otros mecanismos de acceso.

Par√°metros formales adicionales
En S7-1500 las instrucciones tienen par√°metros formales adicionales que son necesarios para
la ejecuci√≥n as√≠ncrona, por ejemplo. Estos par√°metros adicionales deben abastecerse con
par√°metros actuales adecuados despu√©s de la migraci√≥n.
Encontrar√° una descripci√≥n detallada de los par√°metros en la Ayuda en pantalla de S7-1500.
Consulte tambi√©n:
AUTOHOTSPOT

182

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Ejemplo
En el cap√≠tulo Migraci√≥n de instrucciones de bloques de datos (P√°gina 169) encontrar√° un
ejemplo b√°sico para la representaci√≥n de una instrucci√≥n migrada.

Migraci√≥n AG_SEND/AG_LSEND
Migraci√≥n de los par√°metros de llamada - Comunicaci√≥n v√≠a ISO-Transport, ISO-on-TCP, TCP
Tabla 3-1

Migraci√≥n AG_SEND/AG_LSEND

AG_SEND / AG_LSEND
Par√°metro

T_SEND
Tipo

Par√°metro

Tipo

ACT

BOOL

REQ

BOOL

ID

INT

ID

CONN_OUC (WORD)

LADDR

WORD

--

--

SEND

ANY

DATA

VARIANT

--

--

ADDR

VARIANT

LEN

INT

LEN

UINT

DONE

BOOL

DONE

BOOL

--

--

BUSY

BOOL

ERROR

BOOL

ERROR

BOOL

STATUS

WORD

STATUS

WORD

Descripci√≥n / indicacio‚Äê
nes

Pasos adicionales
‚óè Configure el tipo de conexi√≥n correspondiente con par√°metros de direcci√≥n relevantes.

Migraci√≥n de los par√°metros de llamada - Comunicaci√≥n v√≠a UDP
Tabla 3-2

Migraci√≥n AG_SEND/AG_LSEND

AG_SEND / AG_LSEND
Par√°metro

TUSEND
Tipo

Par√°metro

Tipo

ACT

BOOL

REQ

BOOL

ID

INT

ID

CONN_OUC (WORD)

LADDR

WORD

--

--

SEND

ANY

DATA

VARIANT

--

--

ADDR

VARIANT

LEN

INT

LEN

UINT

DONE

BOOL

DONE

BOOL

--

--

BUSY

BOOL

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Descripci√≥n / indicacio‚Äê
nes

183

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
AG_SEND / AG_LSEND

TUSEND

Par√°metro

Tipo

Par√°metro

Tipo

ERROR

BOOL

ERROR

BOOL

STATUS

WORD

STATUS

WORD

Descripci√≥n / indicacio‚Äê
nes

Pasos adicionales
‚óè Configure el tipo de conexi√≥n correspondiente con par√°metros de direcci√≥n relevantes.

Migraci√≥n de los par√°metros de llamada - Comunicaci√≥n v√≠a E-MAIL
Tabla 3-3

Migraci√≥n AG_SEND/AG_LSEND

AG_SEND / AG_LSEND

TMAIL_C

Par√°metro

Tipo

Par√°metro

Tipo

ACT

BOOL

REQ

BOOL

ID

INT

--

--

LADDR

WORD

--

--

SEND

ANY

TO_S

STRING

SEND

ANY

CC

STRING

SEND

ANY

SUBJECT

STRING

Descripci√≥n / indicacio‚Äê
nes

SEND

ANY

TEXT

STRING

SEND

ANY

ATTACHMENT

VARIANT

--

--

ATTACHMENT _NA‚Äê
ME

STRING

--

--

MAIL_ADDR_PARAM

VARIANT

LEN

INT

--

--

DONE

BOOL

DONE

BOOL

--

--

BUSY

BOOL

ERROR

BOOL

ERROR

BOOL

STATUS

WORD

STATUS

WORD

Pasos adicionales
‚óè Configure el tipo de conexi√≥n correspondiente con par√°metros de direcci√≥n relevantes.

184

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Migraci√≥n AG_RECV/AG_LRECV
Migraci√≥n de los par√°metros de llamada
Tabla 3-4

Migraci√≥n AG_RECV/AG_LRECV

AG_RECV/AG_LRECV

TRCV/TURCV

Par√°metro

Tipo

Par√°metro

Tipo

EN_R

BOOL

ID

INT

ID

CONN_OUC (WORD)

LADDR

WORD

--

--

--

--

LEN

UDINT

RECV

ANY

DATA

VARIANT

--

--

ADDR

VARIANT

LEN

INT

LEN

UINT

NDR

BOOL

NDR

BOOL

--

--

BUSY

BOOL

ERROR

BOOL

ERROR

BOOL

STATUS

WORD

STATUS

WORD

Descripci√≥n / indicacio‚Äê
nes

Pasos adicionales
‚óè Configure el tipo de conexi√≥n correspondiente con par√°metros de direcci√≥n relevantes.

Punto a punto CP/CM
Migraci√≥n de bloques de programa PtP
Introducci√≥n
S7-300/400 utiliza bloques de programa espec√≠ficos para funciones de comunicaci√≥n a trav√©s
de CP punto a punto.
S7-1500 ofrece un juego de instrucciones modificado para estas funciones de comunicaci√≥n.
En la migraci√≥n se le consultar√° si desea utilizar el juego de instrucciones modificado para los
m√≥dulos de comunicaci√≥n de S7-1500 o los bloques de programa para los procesadores de
comunicaciones de S7‚Äë300/400.
La tabla siguiente ofrece una vista general de la migraci√≥n de los bloques de programa
utilizados en el S7-300/400 a instrucciones del S7-1500.
Encontrar√° m√°s informaci√≥n sobre la indicaci√≥n de la columna "Clase" en el cap√≠tulo
Indicaciones sobre la migraci√≥n de instrucciones (P√°gina 158)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

185

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Bloque de programa para la comunicaci√≥n punto a punto

Servicio de comunicaci√≥n /
rango de funciones

Bloque

Bloques para CP 340

P_RCV

x

P_SEND

Bloques para CP 341

Bloques para CP 440

Bloques para CP 441
Bloques para Modbus
Bloques para ET 200S 1SI

Bloques para CPU compac‚Äê
tas S7-300

1)

Librer√≠a

Instrucci√≥n en
S7‚Äë1500

Clase

ET 200S

-

-

Receive_P2P

3 1)

x

-

-

Send_P2P

3 1)

P_RESET

x

-

-

Receive_Reset

3 1)

V24_STAT_340

x

-

-

Signal_Get

3 1)

V24_SET_340

x

-

-

Signal_Set

3 1)

P_PRINT

x

-

-

-

4

P_RCV_RK

x

-

-

Receive_P2P

3 1)

P_SND_RK

x

-

-

Send_P2P

3 1)

V24_STAT

x

-

-

Signal_Get

3 1)

V24_SET

x

-

-

Signal_Set

3 1)

P-PRT341

x

-

-

-

4

RECV_440

-

x

-

Receive_P2P

3 1)

SEND_440

-

x

-

Send_P2P

3 1)

RES_RECV

-

x

-

Receive_Reset

3 1)

V24_STAT_441

-

x

-

Signal_Get

3 1)

V24_SET_441

-

x

-

Signal_Set

3 1)

MODB_341

x

-

-

-

4 2)

MODB_441

-

x

-

-

4 2)

S_RCV

-

-

x

Receive_P2P

3 1)

S_SEND

-

-

x

Send_P2P

3 1)

S_VSTAT

-

-

x

Signal_Get

3 1)

S_VSET

-

-

x

Signal_Set

3 1)

S_XON

-

-

x

Port_Config

3 1)

S_RTS

-

-

x

Port_Config

3 1)

S_V24

-

-

x

Send_Config

3 1)

S_MODB

-

-

x

-

4 2)

S_USST

-

-

x

-

4 2)

S_USSR

-

-

x

-

4 2)

S_USSI

-

-

x

-

4 2)

SEND_PTP

x

-

-

Send_P2P

3 1)

RCV_PTP

x

-

-

Receive_P2P

3 1)

RES_RCVB

x

-

-

Receive_Reset

3 1)

CP 300

CP 400

Encontrar√° informaci√≥n sobre la migraci√≥n de esta instrucci√≥n en este enlace (P√°gina 158).

Estas instrucciones para ET 200S 1SI no est√°n soportadas por el S7-1500. Utilice en su lugar
las instrucciones para Modbus (RTU) o para USS en combinaci√≥n con el m√≥dulo punto a punto
"ET 200SP CM PtP".
2)

186

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Par√°metros formales adicionales
En el S7-1500, las instrucciones tienen par√°metros formales adicionales. Estos par√°metros
adicionales deben abastecerse con par√°metros actuales adecuados despu√©s de la migraci√≥n.
Nota
Soporte adicional para la migraci√≥n de instrucciones de comunicaci√≥n
En Siemens Industry Online Support encontrar√° informaci√≥n actualizada sobre las
instrucciones de comunicaci√≥n.
Migraci√≥n - Comunicaci√≥n:
http://support.automation.siemens.com/WW/view/es/83558087 (http://
support.automation.siemens.com/WW/view/es/83558087)
Migraci√≥n - Controladores:
http://support.automation.siemens.com/WW/view/es/83557459 (http://
support.automation.siemens.com/WW/view/es/83557459)
Si necesita soporte adicional, dir√≠jase al SIMATIC Customer Support.

Consulte tambi√©n
Preguntas frecuentes sobre la migraci√≥n (http://support.automation.siemens.com/WW/
view/es/67858106)

3.4.3

Migraci√≥n de programas KOP/FUP a S7-1500

3.4.3.1

Indicaciones sobre la migraci√≥n de programas KOP/FUP

---(SAVE): Cargar resultado l√≥gico en registro BR
La instrucci√≥n no est√° disponible en S7-1500. La migraci√≥n procesa la instrucci√≥n del siguiente
modo:
‚óè Si se ha utilizado la instrucci√≥n "---(SAVE)" en el √∫ltimo segmento de un bloque se
reemplazar√° por la instrucci√≥n "---(RET)" con el par√°metro "RLO".
‚óè Si se ha utilizado la instrucci√≥n "---(SAVE)" en un segmento que no es el √∫ltimo del bloque
no podr√° reemplazarse. Modifique el programa manualmente. Por ejemplo, guarde el RLO
en una variable PLC, una variable DB o una variable local y devuelva la variable al bloque
invocante al final del bloque con la instrucci√≥n --(RET).

---(CALL) Llamar bloque sin par√°metros
La instrucci√≥n no est√° disponible en S7-1500. La migraci√≥n adapta el programa de tal forma
que la llamada se realice a trav√©s de un cuadro.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

187

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Master Control Relais
El Master Control Relais no est√° disponible en S7-1500. La migraci√≥n notifica un error.
Modifique el programa manualmente. Por ejemplo, use las variables temporales para ejecutar
instrucciones o segmentos de forma condicional.

Cambio de idioma dentro de un bloque
Los contenidos de los registros, de los acumuladores y de la palabra de estado solo est√°n
disponibles en segmentos AWL. Si un segmento KOP o FUP sigue a un segmento AWL, desde
el segmento KOP o FUP no se podr√° acceder a los contenidos de registros que antes se
hab√≠an modificado en AWL. Sin embargo, en un posterior segmento AWL, los contenidos de
los registros vuelven a estar disponibles. El bit RLO es una excepci√≥n: al realizar un cambio de
idioma se pone en "indefinido" y en los siguientes segmentos ya no estar√° disponible.
Consulte tambi√©n: Transferencia de valores a trav√©s de registros en caso de cambio de
lenguaje (P√°gina 194)

3.4.3.2

Direcciones parcialmente especificadas en KOP/FUP

Introducci√≥n
El direccionamiento de variables DB sin indicar el nombre del DB se denomina
direccionamiento parcialmente especificado. El direccionamiento parcialmente especificado
no se soporta en S7-1500 para KOP/FUP. Las instrucciones "---(OPN)" y "---(OPNI)" utilizadas
con frecuencia en relaci√≥n con el direccionamiento parcialmente especificado tampoco se
soportan en S7-1500.

Migraci√≥n de direcciones parcialmente especificadas
La migraci√≥n procesa direcciones parcialmente especificadas, en lo posible, del siguiente
modo:
‚óè Si el bloque de datos se determina de forma un√≠voca, la migraci√≥n reemplaza las
direcciones parcialmente especificadas por direcciones totalmente especificadas
indicando el DB.
‚óè Si el DB se transfiere indirectamente a trav√©s del registro de bloques de datos, el bloque de
datos no puede determinarse de forma un√≠voca. En ese caso la migraci√≥n agrega un
par√°metro del tipo de datos "DB_Any" en la interfaz del bloque. A este par√°metro se
transfiere el nombre del bloque de datos. A continuaci√≥n la migraci√≥n reemplaza todas las
direcciones parcialmente especificadas por direcciones con la siguiente
sintaxis: #<nombre de par√°metro>.%<direcci√≥n absoluta>.

Ejemplo
El siguiente ejemplo muestra la migraci√≥n de un direccionamiento parcialmente especificado.
En la primera figura se muestra el programa antes de la migraci√≥n:
Segmento 1: Las variables se direccionan de forma parcialmente especificada.

188

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

La figura siguiente muestra el programa despu√©s de la migraci√≥n:
Segmento 1: El DB en el que est√°n las variables se puede determinar de forma un√≠voca. El
programa se ha migrado autom√°ticamente. Para las variables en "DB1" el direccionamiento es
totalmente especificado.

Nota
Migraci√≥n de par√°metros de bloque parcialmente especificados
La migraci√≥n convierte tambi√©n par√°metros de DB parcialmente especificados en par√°metros
totalmente especificados. Tenga en cuenta que esto puede modificar la manera en que se
transfieren par√°metros al bloque llamado: Posiblemente, el bloque llamado ya no accede
directamente a los par√°metros actuales a trav√©s de la direcci√≥n totalmente especificada, sino
que trabaja con una copia, que se transfiere en la llamada del bloque.
Por ello, compruebe si la sem√°ntica del programa migrado todav√≠a coincide con la del
programa de origen.
Encontrar√° m√°s informaci√≥n en: Acceso a par√°metros de bloque durante la ejecuci√≥n del
programa
Si no se desea esta adaptaci√≥n, puede utilizarse, por ejemplo, un par√°metro con tipo de datos
estructurado en lugar de un par√°metro de bloque simple.
Defina como par√°metro formal el tipo de datos PLC (UDT) y transfiera una variable de este tipo
o un DB derivado del tipo de datos PLC(UDT).

3.4.3.3

Acceso a los bits de estado en KOP/FUP

Introducci√≥n
Para alcanzar el m√°ximo rendimiento posible del procesamiento de programas en CPUs de la
serie S7-1500, se permite transferir valores entre los bloques √∫nicamente a trav√©s de las
interfaces del bloque, bloques de datos globales o variables PLC. En KOP y FUP no existe la
posibilidad de transferir valores a trav√©s de la palabra de estado.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

189

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Migraci√≥n de las instrucciones "--| |--: Consultar si el bit de estado es 1" / "--|/|--: Consultar si el bit de
estado es 0"
La instrucciones no est√°n disponibles en S7-1500. La migraci√≥n distingue los siguientes casos:
‚óè Si una consulta del bit de estado se sit√∫a inmediatamente despu√©s de una instrucci√≥n
matem√°tica en el mismo segmento, entonces se emplear√° un comparador en su lugar.
‚óè En cualquier otro caso, el programa dar√° error despu√©s de la migraci√≥n. En ese caso es
necesario modificar el programa. Por ejemplo, en lugar de la consulta del bit de estado OV
utilice una consulta de la salida ENO. Si se enlaza la negaci√≥n de varias consultas ENO con
la operaci√≥n l√≥gica O, es posible reemplazar la consulta del bit de estado OS.

Ejemplo
El siguiente ejemplo muestra la migraci√≥n de una consulta del bit de estado. En la primera
figura se muestra el programa antes de la migraci√≥n.
Segmento 1: La instrucci√≥n "<=0" consulta el bit de estado "A1". Se indica si el resultado de la
multiplicaci√≥n es mayor o igual a cero.

La figura siguiente muestra el programa despu√©s de la migraci√≥n.
Segmento 1: El programa se ha podido migrar autom√°ticamente. La instrucci√≥n "<=0" se ha
eliminado. En lugar de eso se consulta el evento de la multiplicaci√≥n mediante una
comparaci√≥n a trav√©s de la variable "myTag3".

190

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.4

Migraci√≥n de programas AWL a S7-1500

3.4.4.1

Indicaciones sobre la migraci√≥n de programas AWL

Transferencia de valores a trav√©s de registros y de la palabra de estado
Para alcanzar el m√°ximo rendimiento posible del procesamiento de programas en CPUs de la
serie S7-1500, se permite transferir valores entre los bloques √∫nicamente a trav√©s de las
interfaces del bloque, bloques de datos globales o variables PLC.
En KOP y FUP no se pueden transferir valores a trav√©s de registros (p. ej. acumuladores AR1,
AR2, DB, DI) o de la palabra de estado. En AWL la transferencia de valores es posible con
algunas restricciones. Sin embargo, tenga en cuenta que la ejecuci√≥n del programa se
ralentiza al usar estas √°reas para transferir valores entre distintos bloques.
Las siguientes reglas rigen en AWL:
‚óè Los contenidos de los registros, de los acumuladores y de la palabra de estado solo est√°n
disponibles en segmentos AWL. Si un segmento KOP o FUP sigue a un segmento AWL,
desde el segmento KOP o FUP no se podr√° acceder a los contenidos de registro que antes
se hab√≠an colocado en AWL. No obstante, en un segmento AWL posterior los contenidos
de registro vuelven a estar disponibles.
El bit RLO es una excepci√≥n: al realizar un cambio de idioma se pone en "indefinido" y en
los siguientes segmentos ya no estar√° disponible.
‚óè Los valores de los registros, acumuladores y de la palabra de estado no se transfieren a los
bloques llamados. La √∫nica excepci√≥n son las instrucciones "CC" y "UC". Si utiliza "UC" o
"CC", para transferir al bloque llamado par√°metros a trav√©s de registros, de la palabra de
estado o de acumuladores, active la opci√≥n "Alimentaci√≥n de par√°metros a trav√©s de
registros" en las propiedades del bloque llamado. Tenga en cuenta que esta opci√≥n solo
est√° disponible para bloques AWL con acceso est√°ndar y que el bloque no puede tener
par√°metros formales. Si esta opci√≥n est√° activada, los contenidos de registro pueden
transferirse entre bloques. Tambi√©n en este caso el bit RLO es una excepci√≥n: al salir del
bloque se pone en "indefinido" y ya no estar√° disponible tras una llamada de bloque.
‚óè Para transferir una informaci√≥n de error al bloque invocante, se puede utilizar el bit BR. La
informaci√≥n de error primero debe guardarse en el bloque llamado con la instrucci√≥n
"SAVE" en el bit BR. A continuaci√≥n se puede leer el bit BR en el bloque invocante.
‚óè Despu√©s de cada acceso a un bloque de datos indicando una direcci√≥n totalmente
especificada (p. ej. %DB10.DBW10), el registro de bloques de datos DB se pone a "0". Un
acceso posterior parcialmente especificado provoca un error durante la compilaci√≥n.
‚óè Si se direcciona simb√≥licamente un par√°metro formal local desde la interfaz de bloque de
un FB en S7-1500 (p. ej. con la instrucci√≥n L #myIn), siempre se accede al bloque de datos
que se ha indicado como instancia en la llamada del bloque. Las instrucciones OPNDI, L
AR2, +AR2, TDB, TAR cambian el contenido del registro DI o de direcciones, pero los
registros ya no se eval√∫an en el direccionamiento de par√°metros formales locales.
Encontrar√° ejemplos sobre la programaci√≥n en los siguientes cap√≠tulos.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

191

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Master Control Relais
El Master Control Relais no est√° disponible en S7-1500. La migraci√≥n notifica un error.
Modifique el programa manualmente. Formule las condiciones, p. ej. en forma de par√°metros
de bloque, para ejecutar instrucciones o segmentos de forma condicional.

LEAVE y ENT
Las instrucciones "LEAVE" y "ENT" no se ofrecen en S7-1500 porque solo existen dos
acumuladores. La migraci√≥n notifica un error. Modifique el programa manualmente. Por
ejemplo, use variables temporales para crear resultados provisionales.

Par√°metros de bloque del tipo de par√°metro "Block_DB"
El tipo de par√°metro "Block_DB" no est√° disponible en S7-1500. La migraci√≥n modifica estos
par√°metros y les asigna en su lugar el tipo de datos "DB_Any".
Sin embargo, en S7-1500 no es posible asignar instrucciones de librer√≠a durante la llamada de
una instancia en forma de un par√°metro del tipo "DB_Any".
El siguiente ejemplo muestra la llamada de un bloque de librer√≠a con una instancia variable en
una CPU de la familia S7-300/400. Esta secuencia no puede migrarse a S7-1500.
AWL

Explicaci√≥n

CALL GET, #myBlock_DB

// El bloque de librer√≠a "GET" se llama
con el bloque de datos de instancia ubicado actualmente en el par√°metro de bloque
"myBlock_DB".

REQ := #Start
ID := W#16#100
NDR := #Done
ERROR := #Error
STATUS := #Status
ADDR_1 := P#DB10.DBX5.0 BYTE 10
ADDR_2 :=
ADDR_3 :=
ADDR_4 :=
RD_1 := P#DB10.DBX6.0 BYTE 10
RD_2 :=
RD_3 :=
RD_4 :=

192

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.4.2

Cadenas l√≥gicas y saltos

Introducci√≥n
En S7-300/400 es posible colocar etiquetas en AWL en cualquier instrucci√≥n para saltar de
forma controlada por el programa a la posici√≥n marcada. No obstante, si define la meta de salto
dentro de una unidad de programa l√≥gica en la que el RLO no tenga ning√∫n estado definido,
pueden aparecer resultados inesperados durante la ejecuci√≥n del programa. La CPU puede
pasar a modo STOP.
Por eso, durante la elaboraci√≥n del programa debe procurar utilizar etiquetas de salto solo al
principio de una cadena l√≥gica. Evita tambi√©n instrucciones desde la parte central de una
cadena l√≥gica.
Las CPU de las diversas series tienen diferente comportamiento cuando aparece un salto en
una cadena l√≥gica.
‚óè En S7-300 el comportamiento de primera consulta de una instrucci√≥n situada detr√°s de una
etiqueta viene determinado por las instrucciones que se han ejecutado antes en orden
lineal. En este caso es irrelevante si la instrucci√≥n situada detr√°s de la etiqueta se ha
alcanzado siguiendo un orden lineal o ejecutando un salto.
‚óè En S7-400 el comportamiento de primera consulta de una instrucci√≥n situada detr√°s de una
etiqueta viene determinado por el flujo real del programa ejecutado. Por tanto el
comportamiento de primera consulta puede depender de si la etiqueta se ha alcanzado
siguiendo un orden lineal o ejecutando un salto.
‚óè En S7-1500 se produce un error de compilaci√≥n cuando los programas contienen saltos
desde cadenas l√≥gicas o a cadenas l√≥gicas, si dichos saltos pueden provocar un
comportamiento distinto en cuanto a tiempo de ejecuci√≥n si se ejecutan en S7-300 o
S7-400. El programa debe adaptarse en este punto para definir su comportamiento
previsto.

Ejemplo
El siguiente ejemplo muestra un salto a una cadena l√≥gica. La instrucci√≥n de la fila 6 no tiene
ning√∫n comportamiento de primera consulta definido como un√≠voco en la etiqueta n_OK. De
este modo es posible formar el RLO de manera ambigua. En S7-1500 esta secuencia de
programa habr√≠a provocado un error de compilaci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

193

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Migraci√≥n de saltos a cadenas l√≥gicas
La migraci√≥n no cambia las marcas de su programa AWL. Sin embargo, al compilar se notifica
un error cuando se detectan conflictos con etiquetas de salto. Compruebe en los puntos
notificados la l√≥gica programada en su bloque. Utilice las instrucciones SET o CLR para
marcar el inicio de una nueva "unidad l√≥gica" y forzar una primera consulta.

Recomendaci√≥n
Evite saltos en las cadenas l√≥gicas, p. ej. con el fina de optimizar el c√≥digo del programa. Con
ello el c√≥digo pierde legibilidad y es dif√≠cil de mantener.

3.4.4.3

Transferencia de valores a trav√©s de registros en caso de cambio de lenguaje

Introducci√≥n
Los contenidos de los registros, de los acumuladores y de la palabra de estado solo est√°n
disponibles en segmentos AWL. Si un segmento KOP o FUP sigue a un segmento AWL, desde
el segmento KOP o FUP no se podr√° acceder a los contenidos de registro que antes se hab√≠an
colocado en AWL. No obstante, en un segmento AWL posterior los contenidos de registro
vuelven a estar disponibles.
El bit RLO es una excepci√≥n: al realizar un cambio de idioma se pone en "indefinido" y en los
siguientes segmentos ya no estar√° disponible.

Migraci√≥n de transferencias de valores a trav√©s de registros en caso de cambio de lenguaje
Si se accede a registros en un segmento KOP o FUP migrado, se notifica un error al compilar.
Modifique el programa de tal forma que los registros solo se posicionen y lean en segmentos
AWL.

Ejemplo
El siguiente ejemplo muestra la migraci√≥n de un acceso a acumulador. En las dos primeras
figuras se muestra el programa antes de la migraci√≥n:
Segmento 1: El operando "myIN1" se carga en el acumulador 1. A continuaci√≥n se carga
"myIN2" al acumulador 1 y de esta forma se transfiere "myIN1" al acumulador 2. Ahora se
suman los dos valores. El resultado se guarda en el acumulador 1 y desde all√≠ se asigna al
operando "myOUT".

194

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Segmento 2: El operando "myIN3" se carga en el acumulador 1. El operando "myOUT" que a√∫n
existe en el acumulador 1 se transfiere con ello al acumulador 2, y puede agregarse
inmediatamente al operando "myIN3". No es necesario cargar nuevamente el operando
"myOUT" de forma expl√≠cita.

Tras la migraci√≥n, el segmento 2 presenta errores porque el segmento KOP ya no escribe
valores en los acumuladores. Es necesario adaptar el programa manualmente para cargar
ambos valores en AWL de forma expl√≠cita en los acumuladores.
La figura siguiente muestra el segmento 2 tras solucionar el error.
Segmento 2: Ambos valores se cargan en AWL de forma expl√≠cita antes de sumarse.

3.4.4.4

Transferencia de valores a trav√©s de registros o de la palabra de estado durante la
llamada de bloque

Migraci√≥n de transferencias de valores a trav√©s de registros o de la palabra de estado durante la llamada
de bloque
En un cambio de bloque los valores de los registros, los acumuladores y la palabra de estado
se ponen a "0" o reciben el estado "indefinido". Por ello no pueden transferirse a los bloques
llamados.
La √∫nica excepci√≥n son las instrucciones "CC" y "UC". Si utiliza "UC" o "CC", para transferir al
bloque llamado par√°metros a trav√©s de registros, de la palabra de estado o de acumuladores,
active la opci√≥n "Alimentaci√≥n de par√°metros a trav√©s de registros" en las propiedades del
bloque llamado. Tenga en cuenta que esta opci√≥n solo est√° disponible para bloques AWL con

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

195

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
acceso est√°ndar y que el bloque no puede tener par√°metros formales. Si esta opci√≥n est√°
activada, los contenidos de registro pueden transferirse entre bloques. El bit RLO es una
excepci√≥n: en una transici√≥n de bloque siempre adopta el estado "indefinido" y ya no estar√°
disponible tras una llamada de bloque.
Para transferir una informaci√≥n de error al bloque invocante, se puede utilizar el bit BR. La
informaci√≥n de error primero debe guardarse en el bloque llamado bit BR. Utilice para ello p.
ej. las instrucciones "SAVE" o "SPBNB". A continuaci√≥n se puede leer el bit BR en el bloque
invocante.
Si tras una llamada de bloque se accede a contenidos de registros que se hab√≠an modificado
en el bloque llamado, se notifica un error. Luego es necesario modificar el programa. Utilice por
ejemplo variables en bloques de datos o variables PLC para devolver valores al bloque
invocante.

Ejemplos
El ejemplo siguiente muestra c√≥mo hay que cambiar el programa para transferir valores a un
bloque invocante a trav√©s de registros.
En la primera tabla se observa el programa antes de la migraci√≥n:
AWL

Explicaci√≥n

CALL "MyFB", "MyFB_DB"

El RLO del bloque "MyFB" se asigna al operando "MyBit" despu√©s de su ejecuci√≥n.

= #MyBit

En la segunda tabla se observa c√≥mo hay que modificar el programa.

3.4.4.5

AWL

Explicaci√≥n

CALL "MyFB", "MyFB_DB"

En el bloque llamado "MyFB" se escribe el
RLO actual en un punto cualquiera con la
instrucci√≥n "SAVE" en el bit BR.

A BR

El bit BR se lee en el bloque invocante.

= #MyBit

El valor del bit BR se asigna al operando
"MyBit".

Transferencia de valores a trav√©s de registros con las instrucciones CC y UC

Introducci√≥n
En S7-300/400 es posible programar llamadas de bloque mediante las instrucciones UC y CC.
La transferencia de par√°metros al bloque invocante no se lleva a cabo en la interfaz sino a
trav√©s de registros, p. ej. AR1, AR2, DB, DI,, de los acumuladores o de la palabra de estado.
Estas llamadas ralentizan la ejecuci√≥n del programa y por ello ya no son posibles en S7-1500
por ajuste predeterminado. En su lugar se utiliza la instrucci√≥n CALL en S7-1500. Sin embargo,
con la instrucci√≥n CALL no es posible hacer llamadas de bloque indirectas. Si desea utilizar UC
o CC para llamadas de bloque indirectas es necesario activar la opci√≥n "Alimentaci√≥n de
par√°metros a trav√©s de registros" en las propiedades del bloque llamado. De ese modo podr√°
transmitir contenidos de registro entre diferentes bloques. El bit RLO es una excepci√≥n: en una

196

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
transici√≥n de bloque adopta el estado "indefinido" y ya no estar√° disponible tras una llamada
de bloque.
Tenga en cuenta que esta opci√≥n solo est√° disponible para bloques AWL con acceso est√°ndar
y que el bloque no puede tener par√°metros formales. Si esta opci√≥n est√° activada, los
contenidos de registro pueden transferirse entre bloques. Tambi√©n en este caso el bit RLO es
una excepci√≥n: en una transici√≥n de bloque adopta el estado "indefinido" y ya no estar√°
disponible tras una llamada de bloque.
Al crear elementos de librer√≠a con protecci√≥n de know-how ya no es necesario utilizar llamadas
de bloque indirectas. El TIA Portal le ayuda con un automatismo: Al insertar un bloque desde
una librer√≠a se resuelven autom√°ticamente los posibles conflictos num√©ricos con bloques que
ya se encuentran en el programa de usuario.

Migraci√≥n de llamadas de bloque a trav√©s de "UC" o "CC"
La migraci√≥n procesa las llamadas de bloque a trav√©s de "UC" o "CC" del siguiente modo:
‚óè La instrucci√≥n "UC FC" con indicaci√≥n de un n√∫mero de bloque se reemplaza por la
instrucci√≥n "CALL" .
‚óè La instrucci√≥n "CC FC" con indicaci√≥n de un n√∫mero de bloque se reemplaza por la
instrucci√≥n "CALL". Asimismo, se inserta una instrucci√≥n de salto que realiza la llamada
condicional.
‚óè Las instrucciones "UC FC" y "CC FC" con indicaci√≥n indirecta del n√∫mero de bloque
permanecen invariables.
‚óè Las instrucciones "UC FB" y "CC FB" con indicaci√≥n directa o indirecta de un n√∫mero de
bloque permanecen invariables.

Ejemplo
El siguiente ejemplo muestra la migraci√≥n de llamadas de bloque a trav√©s de "UC".
En la primera tabla se observa el programa antes de la migraci√≥n:
AWL
UC FC 10
UC FC[#temp0]
UC FB 10
UC FB [#temp0]

En la siguiente tabla se observa el programa despu√©s de la migraci√≥n:
AWL

Significado

CALL FC 10
UC FC[#temp0]

La opci√≥n "Alimentaci√≥n de par√°metros a
trav√©s de registros" debe haberse activado en el bloque llamado.

UC FB 10

La opci√≥n "Alimentaci√≥n de par√°metros a
trav√©s de registros" debe haberse activado en el bloque llamado.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

197

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.4.6

AWL

Significado

UC FB [#temp0]

La opci√≥n "Alimentaci√≥n de par√°metros a
trav√©s de registros" debe haberse activado en el bloque llamado.

Direcciones totalmente especificadas en AWL

Introducci√≥n
El direccionamiento de variables DB con indicaci√≥n del nombre o el n√∫mero de DB se
denomina direccionamiento totalmente especificado. Despu√©s de cada acceso a un bloque de
datos indicando una direcci√≥n totalmente especificada, el registro de bloques de datos se pone
a "0". Si desea acceder nuevamente al registro del DB despu√©s de un acceso mediante una
direcci√≥n totalmente especificada, primero deber√° asignar un valor al registro del DB con la
instrucci√≥n OPN DB.

Migraci√≥n de direcciones totalmente especificadas
Si es necesario, la migraci√≥n agrega la instrucci√≥n OPN despu√©s de un acceso mediante
direcci√≥n totalmente especificada para volver a cargar el bloque de datos actual al registro de
bloques de datos.

Ejemplo
El siguiente ejemplo muestra la migraci√≥n de una direcci√≥n totalmente especificada.
En la primera tabla se observa el programa antes de la migraci√≥n:
AWL

Explicaci√≥n

AUF "MyDB"

"MyDB" se carga en el registro de bloques
de datos.

L %DBW1

Los elementos de "MyDB" se direccionan
con especificaci√≥n parcial.

L "Global_DB".Data1

A continuaci√≥n, se direccionan elementos
de un DB global de forma totalmente especificada. Como consecuencia, se carga impl√≠citamente el "Global_DB" en el registro de bloques de datos.

L "Global_DB".DBW2
T DBW[AR1, P#0.0]

El siguiente acceso direcciona el "Global_DB" porque est√° contenido en el registro DB.

En la siguiente tabla se observa el programa despu√©s de la migraci√≥n:
AWL

Explicaci√≥n

AUF "MyDB"
L "MyDB".DBW1

198

El acceso parcialmente especificado se
convierte en un acceso totalmente especificado.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
AWL

Explicaci√≥n

L "Global_DB".Data1
L "Global_DB".DBW2

Despu√©s del acceso mediante una direcci√≥n
totalmente especificada se inicializa el
registro del DB.

OPN "Global_DB"

El "Global_DB" debe cargarse de nuevo con
OPN en el registro DB.

T DBW[AR1, P#0.0]

3.4.4.7

Direcciones parcialmente especificadas en AWL

Introducci√≥n
El direccionamiento de variables DB sin indicar el nombre o el n√∫mero del DB se denomina
direccionamiento parcialmente especificado. El direccionamiento parcialmente especificado
accede a un valor definido en el bloque de datos guardado en ese momento en el registro del
DB.
Para direcciones parcialmente especificadas existen las siguientes restricciones en S7-1500:
‚óè En S7-1500 las direcciones con especificaci√≥n parcial solo est√°n permitidas si previamente
se ha activado de forma expl√≠cita el registro de DB en el bloque actual. El registro de DB se
activa p. ej. con la instrucci√≥n "OPN". Solo es posible direccionar con especificaci√≥n parcial
variables en bloques de datos con acceso est√°ndar.
‚óè En S7-1500 los registros de bloques de datos se ponen a "0" durante la llamada de bloque.
Por ello no es posible abrir un bloque de datos en un bloque ni direccionar de forma
parcialmente especificada elementos de datos del bloque de datos en un bloque
subordinado. Active el registro de DB en el bloque actual antes de direccionar una variable
DB con especificaci√≥n parcial.
‚óè El registro de bloque de datos DB tambi√©n se pone a "0" en cada acceso totalmente
especificado (p. ej. %DB10.DBW10). Tras un acceso con direcci√≥n totalmente especificada
vuelva a activar el registro de DB antes de direccionar una variable DB con especificaci√≥n
parcial.
‚óè Utilizando direcciones parcialmente especificadas se ralentiza el procesamiento del
programa en runtime.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

199

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Migraci√≥n de direcciones parcialmente especificadas
La migraci√≥n procesa direcciones parcialmente especificadas en AWL del siguiente modo:
‚óè La direcci√≥n parcialmente especificada se convierte, si es posible, en una direcci√≥n
totalmente especificada.
‚óè Si el bloque de datos se ha abierto en el bloque l√≥gico invocante y el DB no puede
determinarse un√≠vocamente, la migraci√≥n agrega un par√°metro del tipo de datos "DB_Any"
en la interfaz del bloque llamado. En ese par√°metro se transfiere el nombre del bloque de
datos. La migraci√≥n agrega la instrucci√≥n "OPN" en el bloque llamado para abrir el bloque
de datos.

Ejemplo
El siguiente ejemplo muestra la migraci√≥n de direcciones parcialmente especificadas.
En la primera tabla se observa el programa antes de la migraci√≥n:
AWL

Explicaci√≥n

L DBW10

Un bloque de datos se ha abierto en el
bloque invocante y se ha transferido al
registro del DB. En el bloque actual se
adoptan los valores "DBW10", "DBW12" y
"DBW14" desde el bloque de datos ubicado
actualmente en el registro del DB.

L DBW12
+I
T DBW14

En la siguiente tabla se observa el programa despu√©s de la migraci√≥n:
AWL

Explicaci√≥n

OPN "PlcmigTempBlockDB"

La migraci√≥n agrega un par√°metro del tipo
de datos "DB_Any" en la interfaz del bloque llamado. En ese par√°metro se transfiere el nombre del bloque de datos. La migraci√≥n agrega la instrucci√≥n "OPN" en el
bloque llamado para abrir el bloque de datos trasferido en la interfaz.

L DBW10
L DBW12
+I
T DBW14

200

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Nota
Migraci√≥n de par√°metros de bloque parcialmente especificados
La migraci√≥n convierte tambi√©n par√°metros de DB parcialmente especificados en par√°metros
totalmente especificados. Tenga en cuenta que esto puede modificar la manera en que se
transfieren par√°metros al bloque llamado: Posiblemente, el bloque llamado ya no accede
directamente a los par√°metros actuales a trav√©s de la direcci√≥n totalmente especificada, sino
que trabaja con una copia, que se transfiere en la llamada del bloque.
Por ello, compruebe si la sem√°ntica del programa migrado todav√≠a coincide con la del
programa de origen.
Encontrar√° m√°s informaci√≥n en: Acceso a par√°metros de bloque durante la ejecuci√≥n del
programa
Si no se desea esta adaptaci√≥n, puede utilizarse, por ejemplo, un par√°metro con tipo de datos
estructurado en lugar de un par√°metro de bloque simple.
Defina como par√°metro formal el tipo de datos PLC (UDT) y transfiera una variable de este tipo
o un DB derivado del tipo de datos PLC(UDT).
Ejemplos:
CALL "MyFC"
InStruct :="DBofUDT"
oder
CALL "MyFC"
InStruct := "DBArrayOfUDT".a[#i]

3.4.4.8

Accesos al DB instancia en AWL

Introducci√≥n
Las instrucciones "OPNDI" o "CDB" colocan un bloque de datos en el registro DI. En
S7-300/400 ser√° bloque de datos instancia el bloque que est√© abierto all√≠. El direccionamiento
simb√≥lico posterior de un par√°metro formal local de la interfaz de un FB (IN, OUT, InOut, Static)
ya no direcciona el bloque de datos que se indic√≥ como bloque de datos de instancia en la
llamada del bloque, sino el bloque de datos que se encuentra en el registro DI. Para direccionar
despu√©s simb√≥licamente un par√°metro formal local desde la interfaz del bloque, es necesario
cargar el DB instancia en el registro DI.
Tras las instrucciones "L AR2", "+ AR" y "TAR", en el S7-300/400 tampoco es posible
direccionar simb√≥licamente un par√°metro formal desde la interfaz del bloque, ya que las
instrucciones destruir√≠an la base para el acceso al par√°metro.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

201

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
Este comportamiento se ha corregido en S7-1500: si se direcciona simb√≥licamente un
par√°metro formal local desde la interfaz de bloque en S7-1500 (p. ej. con la instrucci√≥n L
#myIn), siempre se accede al bloque de datos que se ha indicado como instancia en la llamada
del bloque. Las instrucciones OPNDI, L AR2, +AR2, TDB, TAR cambian el contenido del
registro DI o de direcciones, pero los registros ya no se eval√∫an en el direccionamiento de
par√°metros formales locales.

Migraci√≥n de accesos a variables locales en el DB instancia
La migraci√≥n no modifica los accesos programados. Si en el programa original ha utilizado las
instrucciones OPNDI, L AR2, +AR2, TDB, TAR,, etc., es posible que cambie la sem√°ntica del
programa.
Para recuperar la sem√°ntica original, hay que cambiar el programa manualmente. A menudo
ya no es necesario direccionar datos a trav√©s de registros. En lugar de ello aproveche la
posibilidad de utilizar ARRAYs dentro del DB instancia e indexar los elementos ARRAY de
forma indirecta.

Ejemplo 1
El siguiente ejemplo muestra la sem√°ntica modificada de la instrucci√≥n "OPNDI":

AWL

Explicaci√≥n

L #MyIn1

Las instrucciones "L" y "T" direccionan variables
locales declaradas en la interfaz del bloque. Los
valores de las variables se encuentran en el DB
instancia indicado en la llamada del bloque.

L #MyIn2
+I
T #MyOut3
AUFDI "MyDB"
L #MyIn1
L #MyIn2
+I
T #MyOut3

El bloque de datos global "MyDB" se escribe en el
registro DI.
Antes de la migraci√≥n, las instrucciones direccionan variables "L" y "T" declaradas previamente en
"MyDB".
Tras la migraci√≥n, las instrucciones direccionan
variables "L" y "T" declaradas previamente en la
interfaz del bloque. El registro DI no se eval√∫a
en S7-1500 para el acceso.

Ejemplo 2
El ejemplo siguiente muestra la sem√°ntica modificada de la instrucci√≥n "LAR2":

AWL

Explicaci√≥n

L P#M23.0
LAR2

202

Antes de la migraci√≥n la asignaci√≥n a AR2 destruye
la base para accesos a par√°metros.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
AWL

Explicaci√≥n

L #MyIn1

Antes de la migraci√≥n no es posible acceder a
"MyIn1" , o dicho acceso provoca un error.
Tras la migraci√≥n el acceso al par√°metro formal
"MyIn1" se realiza correctamente.

L EW [AR2, P#1.0]

Acceso a %IW24.0

A [AR2, P#0.4]

Acceso a %M23.4

Ejemplo 3
El siguiente ejemplo muestra c√≥mo se puede direccionar una variable DB indirectamente en
S7-1500 sin utilizar los registros de direcciones:

AWL

Explicaci√≥n

OPN "MyDB"

Antes de la migraci√≥n se utiliza el direccionamiento indirecto por registro inter√°rea. El valor variable (#index) se carga en el registro de direcciones 1. En funci√≥n de ese valor se carga una palabra de datos de "MyDB" en el acumulador 1.

L #index
LAR1
L DBW [AR1 , P#10.0]
L "MyDB".MyArray1[#index]

Tras la migraci√≥n se pueden depositar los valores
de datos de "MyDB" en un ARRAY.
Los diferentes elementos ARRAY pueden indexarse de
forma variable a trav√©s del par√°metro de entrada
"#index".

3.4.5

Migraci√≥n de programas SCL a S7-1500

3.4.5.1

Indicaciones sobre la migraci√≥n de programas SCL

Representaci√≥n de bloques SCL despu√©s de la migraci√≥n
Los bloques SCL creados con S7-300/400 se migran autom√°ticamente a S7-1500 si es posible
interpretar su sem√°ntica de forma un√≠voca. Las partes del programa que no se pueden
interpretar de forma un√≠voca se marcan con signos de interrogaci√≥n, que provocan errores de
sintaxis despu√©s de la migraci√≥n. Compruebe la sem√°ntica de estas partes del programa
despu√©s de la migraci√≥n y corr√≠jalas si es necesario.
En algunos casos la migraci√≥n modifica el c√≥digo l√≥gico. Luego la secci√≥n del c√≥digo
correspondiente del programa de partida se adopta como secci√≥n de comentario en el bloque
migrado. As√≠ es posible entender m√°s f√°cilmente los cambios realizados en la migraci√≥n.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

203

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Consulte tambi√©n
Principios b√°sicos de la migraci√≥n de programas PLC (P√°gina 145)
Notas sobre la migraci√≥n de programas PLC (P√°gina 150)

3.4.5.2

Direccionamiento indirecto en SCL

Introducci√≥n
En S7-1500 se han unificado las posibilidades del direccionamiento indirecto para todos los
lenguajes de programaci√≥n. Por ello los direccionamientos indirectos, que eran posibles en
S7-300/400, se convierten parcialmente en la migraci√≥n.
La siguiente tabla proporciona una vista general de las posibilidades de conversi√≥n. La
migraci√≥n de las distintas construcciones del lenguaje se explica a continuaci√≥n m√°s
detalladamente.
Direccionamiento indirecto

S7-300/400

S7-1500

Direccionamiento indirecto de
un DB

Tipo de datos "BLOCK_DB"

Tipo de datos "DB_ANY"

Direccionamiento indirecto de
variables DB

#block.%DBW3

Instrucciones "PEEK"/"POKE"

WORD_TO_BLOCK_DB(#myWord).%DBW3

Instrucciones "PEEK"/"POKE"

#block.DW(IDX := #myInt)

Instrucciones "PEEK"/"POKE"

WORD_TO_BLOCK_DB(#myWord).DW(IDX:=#myInt)

Instrucciones "PEEK"/"POKE"

%DB1.DW(IDX :=#myInt)

Instrucciones "PEEK"/"POKE"

Direccionamiento indirecto de
la periferia

QB(IDX :=#myInt):P

Instrucciones "PEEK"/"POKE"

Direccionamiento indirecto de
variables PLC

IX(IDX :=#myInt1,Bit:=#myInt2)

Instrucciones "PEEK"/"POKE"

QB(IDX :=#myInt)

Instrucciones "PEEK"/"POKE"

MW(IDX :=#myInt)

Instrucciones "PEEK"/"POKE"

Migraci√≥n del tipo de datos "BLOCK_DB" a "DB_ANY"
El tipo de datos "BLOCK_DB" no est√° disponible en S7-1500. La migraci√≥n hace que las
variables de este tipo de datos se conviertan al tipo de datos "DB_ANY" . Las funciones de
conversi√≥n "BLOCK_DB_TO_WORD" y "WORD_TO_BLOCK_DB" se migran a
"UINT_TO_WORD(DB_ANY_TO_UINT)" y "UINT_TO_DB_ANY(WORD_TO_UINT)".
Los siguientes ejemplos muestran la migraci√≥n del tipo de datos "BLOCK_DB".
En la primera tabla se observan tres segmentos del programa antes de la migraci√≥n:
SCL
#myBlock

//Tipo de datos

BLOCK_DB;

//...
#myWord :=BLOCK_DB_TO_WORD(#myBlock);
//...
#myBlockDB := WORD_TO_BLOCK_DB(#myWord);

204

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

En la siguiente tabla se observan los tres segmentos del programa despu√©s de la migraci√≥n:
SCL
#myBlock

//Datentyp DB_Any;

//...
#myWord := UINT_TO_WORD(DB_ANY_TO_UINT(#myBlock));
//...
#myDBANY:= UINT_TO_DB_ANY(WORD_TO_UINT(#myWord));

Migraci√≥n del direccionamiento indirecto de variables DB
Las indicaciones indirectas de los bloques de datos o las variables DB se implementan en
S7-1500 a trav√©s de las instrucciones "PEEK"/"POKE". La migraci√≥n convierte
autom√°ticamente estos direccionamientos indirectos.
Los siguiente ejemplos muestran la migraci√≥n del direccionamiento indirecto de variables DB.
En la primera tabla se observan algunos segmentos del programa antes de la migraci√≥n:
SCL
#myWord := %DB1.DW(IDX :=#myInt);
//...
#myBool := %DB1.DX(IDX :=#myByteOffset,Bit:=#myBitOffset);
//...
%DB1.DW(IDX := #myInt) := 12;
//...

En la siguiente tabla se observan los segmentos del programa despu√©s de la migraci√≥n:
SCL
#myWord := PEEK_WORD(area:=16#84, dbNumber:=1, byteOffset:=#myInt);
//...
#myBool:=PEEK_BOOL(area:=16#84, dbNumber:=1, byteOffset:=#myByteOffset, bitOffset:=#myBitOffset);
//...
POKE(area:=16#84,dbNumber:=1,byteOffset:=#myInt,value:=12);
//...

Migraci√≥n del direccionamiento indirecto de variables PLC
Las indicaciones indirectas de variables PLC se implementan en S7-1500 a trav√©s de las
instrucciones "PEEK"/"POKE". La migraci√≥n convierte autom√°ticamente estos
direccionamientos indirectos.
Los siguiente ejemplos muestran la migraci√≥n del direccionamiento indirecto de variables DB.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

205

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
En la primera tabla se observa un segmento del programa antes de la migraci√≥n:
SCL
#myWord := MW(IDX := #myInt);

En la siguiente tabla se observan los segmentos del programa despu√©s de la migraci√≥n:
SCL
#myWord := PEEK(area:=16#83,dbNumber:=0,byteOffset:=#myInt);

3.4.5.3

Instrucciones en SCL

Migraci√≥n de instrucciones
S7-1500 ofrece un juego de instrucciones ligeramente modificado. Algunas instrucciones se
han innovado o reemplazado por instrucciones nuevas.
Durante la migraci√≥n se adoptan en lo posible las instrucciones utilizadas en el programa. En
caso de que la instrucci√≥n no est√© disponible en S7-1500 se intentar√° reemplazarla por una
instrucci√≥n compatible o semejante. Es necesario comprobar nuevamente el programa
migrado y, dado el caso, adaptarlo.
De esta manera pueden darse las siguientes modificaciones:
‚óè La instrucci√≥n nueva tiene par√°metros formales adicionales. Asigne los par√°metros
adicionales.
‚óè Un par√°metro formal de la instrucci√≥n nueva tiene otro tipo de datos. En ese caso la
migraci√≥n reemplaza autom√°ticamente una instrucci√≥n para la conversi√≥n de los tipos de
datos.
Si la migraci√≥n no puede garantizar de forma un√≠voca que la asignaci√≥n de par√°metros sea
sem√°nticamente id√©ntica al programa de partida, se comentan los par√°metros en cuesti√≥n.
Compruebe la sem√°ntica de estas partes del programa despu√©s de la migraci√≥n y corr√≠jalas si
es necesario.
Los siguientes ejemplos muestran la migraci√≥n de la instrucci√≥n "AG_SEND" a la instrucci√≥n
"TSEND".
En la primera tabla se observa la llamada de "AG_SEND" antes de la migraci√≥n:
SCL
AG_SEND (ACT:=#myBool,
ID:=#myInt1,
LADDR:=#myWord,
SEND:=#myAny,
LEN:=#myInt2,
DONE=>#myBool,
ERROR=>#myBool,
STATUS=>#myWord);

206

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
En la segunda tabla se observa la llamada de "TSEND" despu√©s de la migraci√≥n:
SCL
"TSEND_DB"((* ToReplace: REQ:=#myBool *)
(* ToReplace: ID:=#myInt1 *)
LEN:=INT_TO_UDINT(#myInt2),
DONE=>#myBool,
ERROR:=#myBool,
STATUS:=#myWord,
DATA:=#myAny;

El par√°metro actual de "REQ" ha sido adoptado por el par√°metro "ACT" de la instrucci√≥n
"AG_SEND". Est√° comentado porque es necesario comprobar el programa en este punto.
El par√°metro actual de "ID" ha sido adaptado por "AG_SEND" y tambi√©n se debe comprobar.
El par√°metro "LEN" ten√≠a en "AG_SEND" otro tipo de datos. La migraci√≥n agrega una
conversi√≥n autom√°ticamente.

Migraci√≥n de instrucciones a expresiones
En algunos casos la migraci√≥n crea varias instrucciones a partir de una instrucci√≥n, por
ejemplo, cuando un par√°metro de salida tiene otro tipo de datos despu√©s de la migraci√≥n y el
par√°metro formal se debe convertir. La instrucci√≥n de conversi√≥n se agrega despu√©s de la
instrucci√≥n migrada Sin embargo, de esta forma no es posible utilizar la instrucci√≥n original
como expresi√≥n. En ese caso la migraci√≥n agrega una variable temporal en la interfaz del
bloque migrado y le asigna el resultado de la instrucci√≥n. Esta variable temporal puede
utilizarse despu√©s como expresi√≥n. En expresiones complejas no siempre es posible realizar
una migraci√≥n autom√°tica. Las expresiones que no se pueden interpretar de forma un√≠voca se
marcan con signos de interrogaci√≥n, que provocan errores de sintaxis despu√©s de la
migraci√≥n. Compruebe la sem√°ntica de estas partes del programa despu√©s de la migraci√≥n y
corr√≠jalas si es necesario.
Los siguientes ejemplos muestran la migraci√≥n de la instrucci√≥n "READ_RTM" a la instrucci√≥n
"RTM".
En la primera tabla se observa la llamada de "READ_RTM" antes de la migraci√≥n:
SCL
IF READ_RTM(NR:=#myByte, CQ=>#myBool, CV=>#myOutInt)= 1 THEN
...;
END_IF;

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

207

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
En la segunda tabla se observa la llamada de "RTM" despu√©s de la migraci√≥n.
SCL
(* classic code: IF READ_RTM(NR:=#myByte, CQ=>#myBool, CV=>#myOutInt)= 1 THEN*)
#SCL_MIGRA_TEMP_INT_1:=RTM(NR:=#myByte,
MODE:=0,
PV:=#Migra_PV,
CQ:=#myBool,
CV:=#Migra_CV);
#myOutInt:=DINT_TO_INT(#Migra_CV);
IF #SCL_MIGRA_TEMP_INT_1= 1 THEN;
...
END_IF;

La instrucci√≥n del programa de partida se adopta como secci√≥n de comentario en el bloque
migrado As√≠ es posible entender m√°s f√°cilmente los cambios realizados en la migraci√≥n.
Como CV en "RTM" tiene el tipo de datos DINT se agrega una instrucci√≥n de conversi√≥n que
convierta el par√°metro actual INT a DINT. De esa manera ya no es posible utilizar el resultado
de RTM como expresi√≥n en la instrucci√≥n IF.
En la interfaz del bloque migrado se agrega la variable temporal "SCL_MIGRA_TEMP_INT_1".
El resultado de la instrucci√≥n RTM se asigna a la variable temporal.
En lugar de la instrucci√≥n "RTM" se utiliza la variable temporal como expresi√≥n en la instrucci√≥n
IF.

3.4.6

Migraci√≥n de programas GRAPH a S7-1500

3.4.6.1

Indicaciones sobre la migraci√≥n de programas GRAPH

Introducci√≥n
Los programas GRAPH que han sido creados con S7-300/400 pueden ser migrados
autom√°ticamente a S7-1500. Mediante la migraci√≥n PLC se optimizan los programas para la
ejecuci√≥n en una CPU de la serie S7-1500. El protocolo de migraci√≥n notifica todos los
cambios autom√°ticos realizados en el programa durante la migraci√≥n y le informa sobre
cambios manuales que pueden ser necesarios y que usted deber√° realizar a continuaci√≥n.

208

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Adaptaci√≥n del programa GRAPH mediante la migraci√≥n PLC
La siguiente lista muestra algunos ejemplos de adaptaciones autom√°ticas que se realizan
durante la migraci√≥n PLC. Todas las adaptaciones se describen detalladamente en los
cap√≠tulos siguientes.
‚óè Adaptaci√≥n de la interfaz del bloque
Se modifica ligeramente la interfaz de los bloques GRAPH. As√≠ es posible usar el acceso
optimizado al bloque de S7-1500 para bloques GRAPH.
‚óè Direccionamiento simb√≥lico homog√©neo
SIMATIC S7-1500 destaca por una programaci√≥n simb√≥lica homog√©nea que hace que el
programa tenga un mayor rendimiento y se reduzca el peligro de errores de acceso.
Si el programa de partida utiliza operandos para los que no se hab√≠a declarado ning√∫n
nombre simb√≥lico, la migraci√≥n adjudica, cuando es posible, un nombre simb√≥lico para el
operando.
‚óè Modelo de memoria de DB de GRAPH
Debido a los datos de rendimiento de S7-1500, ya no hay necesidad de utilizar DB de
GRAPH minimizados. Por eso, GRAPH ya no ofrece modelos de ubicaci√≥n diferentes. En
todos los DB de GRAPH dispone del juego de par√°metros completo y, por tanto, de toda la
funcionalidad.
Durante la migraci√≥n se ampl√≠an los DB minimizados al juego de par√°metros completo.

Nuevas funciones de S7-1500
Tras la migraci√≥n de un programa GRAPH puede aprovechar por completo la funcionalidad de
S7-1500. La siguiente lista muestra algunos ejemplos de las nuevas funciones:
‚óè Acceso optimizado al bloque
Con un acceso optimizado al bloque, los elementos de datos declarados se disponen
autom√°ticamente en el √°rea de memoria disponible del bloque de manera que se
aproveche al m√°ximo la capacidad de √©ste. Los datos se estructuran y depositan de una
manera √≥ptima para la CPU utilizada. Esto se traduce en un mayor rendimiento de la CPU.
Se excluyen los errores de acceso, p. ej. desde la HMI.
El atributo "acceso optimizado al bloque" siempre est√° activado para bloques GRAPH en
S7-1500 y no puede anularse la selecci√≥n.
Consulte tambi√©n: AUTOHOTSPOT
‚óè Nuevas instrucciones
En la Task Card "Instrucciones" est√° disponible el juego de instrucciones completo de
S7-1500. Se han desarrollado o innovado numerosas instrucciones. As√≠, por ejemplo,
encontrar√° en la paleta "Instrucciones b√°sicas"¬∑de la carpeta "Control del programa" la
instrucci√≥n "GET_ERROR" para programar un tratamiento de errores local en el bloque.
Consulte tambi√©n: AUTOHOTSPOT
‚óè Funciones KOP/FUP
En GRAPH para S7-300/400 solo exist√≠a la posibilidad de programar una operaci√≥n l√≥gica
previa en la primera entrada booleana de un cuadro. En S7-1500 se puede hacer una
operaci√≥n l√≥gica previa de todas las entradas booleanas.
La salida de habilitaci√≥n ENO puede activarse o desactivarse selectivamente para
instrucciones individuales.
Consulte tambi√©n: AUTOHOTSPOT

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

209

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC
‚óè Nuevos tipos de datos
S7-1500 ofrece un juego avanzado de tipos de datos y nuevas posibilidades para la
conversi√≥n de tipos de datos.
Consulte tambi√©n: AUTOHOTSPOT
‚óè Constantes
S7-1500 ofrece posibilidades adicionales para la notaci√≥n de constantes que tambi√©n le
permiten asignar tipos de datos a las constantes.
Consulte tambi√©n: AUTOHOTSPOT

3.4.6.2

Modificaciones en el programa GRAPH

Introducci√≥n
La migraci√≥n PLC adapta autom√°ticamente en lo posible el programa GRAPH a la nueva
familia de CPU. Se analizan tanto las acciones como los segmentos KOP/FUP que usted ha
empleado para la programaci√≥n de condiciones. Las estructuras del programa que ya no se
admiten se actualizan. Las instrucciones que no est√°n disponibles en la nueva CPU se
reemplazan por las instrucciones correspondientes de S7-1500.

Direccionamiento simb√≥lico
SIMATIC S7-1500 destaca por una programaci√≥n simb√≥lica homog√©nea que hace que el
programa tenga un mayor rendimiento y se reduzca el peligro de errores de acceso.
Cuando el programa de partida utiliza operandos absolutos para los que no hay ning√∫n nombre
simb√≥lico declarado, el operando absoluto se marca como no v√°lido. Entonces debe declarar
un nombre simb√≥lico antes de poder compilar el programa migrado.
Si el programa de partida utiliza operandos absolutos para los que hay un nombre simb√≥lico
declarado, la migraci√≥n emplea el nombre simb√≥lico en lugar del operando absoluto. Los
accesos a los distintos bits dentro de un operando simb√≥lico declarado son reemplazados por
accesos Slice.
El siguiente ejemplo muestra un acceso absoluto antes de la migraci√≥n:
%DB1.DBx1.1

A continuaci√≥n puede ver c√≥mo reemplaza la migraci√≥n el acceso absoluto. Como en
"DataBlock1" se hab√≠a declarado la variable "FirstDataByte" para el primer byte de datos, el
acceso al primer bit dentro de esta variable puede reemplazarse por un acceso slice.
"DataBlock1".FirstDataByte.x1

210

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Direccionamiento totalmente especificado
Los programas S7-300/400 utilizan a menudo direcciones parcialmente especificadas para
acceder de forma indirecta a operandos. Solo se indica la direcci√≥n de una variable DB dentro
de un bloque de datos. La informaci√≥n sobre el nombre de DB o el n√∫mero de DB no est√°
incluida en la direcci√≥n (p. ej. %DBX0.2). Durante el tiempo de ejecuci√≥n, el programa accede
al bloque de datos que est√° almacenado actualmente en el registro DB. S7-1500 no soporta el
direccionamiento parcialmente especificado. Para direccionar variables DB de forma
indirecta, utilice par√°metros de bloque del tipo de datos "DB_ANY".
Si ha utilizado direcciones totalmente especificadas en programas GRAPH, estas se
notificar√°n como error tras la migraci√≥n. El bloque no puede compilarse. En ese caso, sustituya
la direcci√≥n parcialmente especificada por una completamente especificada.

Elementos KOP/FUP en condiciones
Los segmentos KOP o FUP en transiciones, interlock, supervisi√≥n e instrucciones
permanentes son migrados seg√∫n las mismas reglas que los segmentos en tipos de bloque
KOP o FUP.
Consulte tambi√©n: Migraci√≥n de programas KOP/FUP a S7-1500 (P√°gina 187)

Acciones GRAPH
SIMATIC S7-1500 ofrece un juego de instrucciones ligeramente modificado. Algunas
instrucciones se han innovado o reemplazado por instrucciones nuevas.
Si ha utilizado instrucciones en acciones GRAPH, la migraci√≥n comprueba si S7-1500 sigue
soport√°ndolas. Las instrucciones se adoptan en lo posible. En caso de que la instrucci√≥n no
est√© disponible en S7-1500 se intentar√° reemplazarla por una instrucci√≥n compatible o
semejante.
Un ejemplo de ello son las instrucciones "RLDA: Rotar a la izquierda v√≠a bit de estado A1" y
"RRDA: Rotar a la derecha v√≠a bit de estado A1". Son reemplazadas por las instrucciones
"ROR: Rotar a la derecha" y "ROL: Rotar a la izquierda".
Si las instrucciones son reemplazadas por la migraci√≥n, recibir√° una indicaci√≥n en el protocolo
de migraci√≥n. Es necesario comprobar nuevamente el programa migrado y, dado el caso,
adaptarlo.
Consulte tambi√©n: Migraci√≥n de instrucciones a S7-1500 (P√°gina 158)

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

211

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

3.4.6.3

Adaptaci√≥n de la interfaz de bloques GRAPH

Cambio de la interfaz del bloque durante la migraci√≥n
La interfaz de los bloques GRAPH se adapta durante la migraci√≥n. Mediante las adaptaciones,
puede usar el concepto de memoria optimizado de S7-1500 con GRAPH. El acceso
optimizado al bloque siempre est√° activo para los bloques GRAPH en S7-1500 y no puede
anularse la selecci√≥n. Se realizan cambios en las siguientes √°reas:
‚óè Par√°metros est√°ticos: "STATIC"
‚óè Par√°metros de salida: "OUTPUT"
‚óè

Ajuste de remanencia en todos los par√°metros internos

Consulte tambi√©n: Bloques con acceso optimizado
Si ha utilizado en el programa de partida nombres de par√°metros que est√°n reservados en
S7-1500, estos cambiar√°n de nombre durante la migraci√≥n.

Par√°metros est√°ticos
Durante la migraci√≥n, los par√°metros est√°ticos se adaptan como sigue:
‚óè La interfaz contiene una estructura para cada paso y cada transici√≥n del FB de GRAPH en
la secci√≥n "Static". En S7-300/400 se han utilizado los tipos de datos "GraphStep",
"GraphStepMin", "GraphTransition" y "GraphTransitionMin". En S7-1500 se introducen los
nuevos tipos de datos "G7_StepPlus" y "G7_TransitionPlus" para la reproducci√≥n de las
estructuras de pasos y de transici√≥n.
La migraci√≥n se desarrolla del siguiente modo:
‚Äì Los par√°metros "SNO" y "TNO" se adoptan con sus valores predeterminados a partir de
sus antiguas estructuras; el resto de valores predeterminados no se transfiere. Los
programas GRAPH con DB minimizado no contienen los par√°metros "SNO" y "TNO". Si
migra un DB minimizado, la migraci√≥n asigna autom√°ticamente valores
predeterminados que empiezan por "1" a esos par√°metros.
‚Äì Las ubicaciones de los par√°metros modificados en el programa GRAPH no se adaptan
autom√°ticamente, sino que se marcan como errores. Debe adaptar manualmente las
ubicaciones tras la migraci√≥n.
‚óè El resto de par√°metros est√°ticos se transfiere a la estructura "RT_DATA". Los valores
predeterminados se adoptan en lo posible y las ubicaciones se adaptan autom√°ticamente
en el programa.

Par√°metros de salida
Puesto que el par√°metro de salida "S_CRITSUP" ya no se soporta en el an√°lisis de criterios en
el S7-1500, se elimina durante la migraci√≥n.
Las ubicaciones del programa GRAPH no se adaptan autom√°ticamente, sino que se marcan
como errores. Debe adaptar manualmente las ubicaciones tras la migraci√≥n.

212

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

Ajuste de remanencia en todos los par√°metros internos
El ajuste de remanencia de los par√°metros GRAPH internos influye en el comportamiento de
la cadena secuencial tras una p√©rdida de tensi√≥n:
‚óè Un bloque GRAPH cuyos par√°metros sean remanentes continuar√° ejecutando la √∫ltima
etapa activa tras una p√©rdida de tensi√≥n.
‚óè Un bloque GRAPH cuyos par√°metros no sean remanentes reanudar√° la ejecuci√≥n
comenzando con la etapa inicial tras una p√©rdida de tensi√≥n.
Los bloques GRAPH creados con S7-300/400 tienen par√°metros de interfaz remanentes por
defecto.
La remanencia de los par√°metros internos se pierde si se migra el FB GRAPH de una CPU
S7-300/S7-400 a una CPU S7-1500. Los par√°metros internos est√°n declarados como no
remanentes despu√©s de la migraci√≥n.
Para volver a declarar remanentes los par√°metros internos de un FB GRAPH, despu√©s de la
migraci√≥n haga lo siguiente:
1. Abra el bloque FB GRAPH despu√©s de la migraci√≥n.
2. Elija el comando "Par√°metros internos remanentes" del men√∫ "Edici√≥n".
En la interfaz del bloque FB GRAPH cambiar√°n los ajustes de los par√°metros internos en
la columna "Remanencia" de "No remanente" a "Remanente".
3. Guarde y compile el proyecto.
Los ajustes de los par√°metros se aplican seguidamente a todos los DB de instancia.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

213

Migrar programas de PLC a una CPU S7-1500 / ET 200SP
3.4 Particularidades en la migraci√≥n de programas PLC

214

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migraci√≥n de S7-1200 a firmware V4 y posterior
4.1

4

Principios b√°sicos de la migraci√≥n a V4

Introducci√≥n
Si en el proyecto ha utilizado una CPU con la versi√≥n de firmware V3 y desea migrar a una CPU
con una versi√≥n de firmware V4.0 o posterior, puede sustituir los dispositivos f√°cilmente.
El TIA Portal ofrece para ello la funci√≥n "Sustituir dispositivo". Al sustituir el dispositivo el
proyecto se conserva intacto. Los programas que se han creado con la versi√≥n de firmware V3
pueden continuar utiliz√°ndose.

Reglas
Para la sustituci√≥n de dispositivos se aplican las siguientes reglas fundamentales:
‚óè El dispositivo solo se puede sustituir si el proyecto se ha creado con una CPU con firmware
de la versi√≥n V3.0. Si su proyecto ha sido creado con las versiones de firmware V1.0 o V2.0,
cree en el proyecto otra CPU con versi√≥n de firmware V3.0 en modo offline y copie el
programa a esta CPU.
‚óè La sustituci√≥n de una CPU V4 por una CPU V3 no es posible. Si desea continuar utilizando
la CPU V3 utilizada hasta el momento, cree una copia de la CPU antes de sustituir el
dispositivo.
‚óè El programa no puede transferirse a una CPU nueva a trav√©s de una Memory Card. Utilice
en lugar de eso la funci√≥n "Sustituir dispositivo", que se describe en los cap√≠tulos siguientes.

HMI Panels
En la sustituci√≥n de dispositivos, los HMI Panels configurados reciben otro tratamiento en
funci√≥n de su versi√≥n de firmware y del tipo de comunicaci√≥n.
La siguiente tabla muestra qu√© conexiones HMI se soportan en la migraci√≥n:
Versi√≥n de firmware
del panel

Comunicaci√≥n
PUT/GET

Migraci√≥n a V4

V11 o anterior

No

La S7-1200 no soporta esta configuraci√≥n. Actualice el firmware del HMI
Panel a V12.0. Seguidamente, compile y cargue la configuraci√≥n.

V11 o anterior

S√≠

La S7-1200 soporta esta configuraci√≥n. La conexi√≥n se establece autom√°ti‚Äê
camente mientras el proyecto se compila y carga tras la sustituci√≥n del dis‚Äê
positivo.

V12 o superior

No

La S7-1200 soporta esta configuraci√≥n. La conexi√≥n se establece autom√°ti‚Äê
camente mientras el proyecto se compila y carga tras la sustituci√≥n del dis‚Äê
positivo.

Al compilar el programa recibir√° indicaciones detalladas sobre la migraci√≥n del HMI Panel.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

215

Migraci√≥n de S7-1200 a firmware V4 y posterior
4.1 Principios b√°sicos de la migraci√≥n a V4

M√≥dulos de ampliaci√≥n S7-1200
Si ya utiliza los siguientes m√≥dulos S7-1200 en su instalaci√≥n de forma centralizada, deber√°
actualizar el firmware de dichos m√≥dulos para garantizar el funcionamiento con S7-1200 V4.
‚óè Maestro ASi - CM 1243
‚óè Maestro DP - CM 1243-5
‚óè CP WAN - CP1243-1
Los m√≥dulos S7-1200 nuevos ya est√°n equipados de f√°brica con el firmware m√°s actual.

Bloques protegidos
Los bloques que disponen de protecci√≥n de know-how o contra copia no pueden migrarse a
V4. Si el proyecto contiene bloques protegidos, antes de realizar el cambio hay que desactivar
la protecci√≥n.
Si se trata de bloques suministrados cuya contrase√±a desconoce, solicite al proveedor la
contrase√±a o bien un bloque compatible con V4.

ADVERTENCIA
Evitar da√±os personales y materiales
En algunos casos se realizan cambios en el programa durante la sustituci√≥n de dispositivos.
Por ese motivo, tras la sustituci√≥n de dispositivos debe comprobar detalladamente el
programa en un entorno de prueba antes de ponerlo en marcha.

Nota
Soporte adicional
En Siemens Industry Online Support encontrar√° FAQ actuales sobre la migraci√≥n a S7-1200
V4:
http://support.automation.siemens.com/WW/view/es/82140966 (http://
support.automation.siemens.com/WW/view/es/82140966)
Si necesita soporte adicional para la migraci√≥n a S7-1200 V4, dir√≠jase al SIMATIC Customer
Support.

Consulte tambi√©n
Realizar una migraci√≥n a V4 (P√°gina 217)
Particularidades tras la migraci√≥n a V4 (P√°gina 218)

216

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

Migraci√≥n de S7-1200 a firmware V4 y posterior
4.2 Realizar una migraci√≥n a V4

4.2

Realizar una migraci√≥n a V4

Requisitos
‚óè El proyecto contiene una CPU con la versi√≥n de firmware V3.
‚óè El proyecto no contiene bloques protegidos.

Procedimiento
Para sustituir una CPU, proceda del siguiente modo:
1. Seleccione la CPU V3 que desea sustituir.
2. En el men√∫ contextual, elija el comando "Sustituir dispositivo".
Se abre el cuadro de di√°logo "Sustituir dispositivo".
3. En "Dispositivo nuevo" de la estructura de √°rbol seleccione la CPU V4 por la que desea
cambiar la CPU V3 actual.
4. Haga clic en "Aceptar".
La CPU existente se sustituye por la nueva.
5. Seleccione la CPU nueva y elija el comando "Compilar > Hardware y software (solo
cambios)" del men√∫ contextual.
La configuraci√≥n del dispositivo y el programa de usuario se vuelven a compilar.
6. Opcionalmente: en caso necesario, active la protecci√≥n de know-how o contra copia para
diferentes bloques del programa.
7. Seleccione la CPU nueva y elija el comando "Cargar en dispositivo > Hardware y software
(solo cambios)" del men√∫ contextual.
La configuraci√≥n del dispositivo y el programa de usuario se cargan en la CPU nueva.
Con ello ha concluido la sustituci√≥n de dispositivos.

ADVERTENCIA
Evitar da√±os personales y materiales
En algunos casos se realizan cambios en el programa durante la sustituci√≥n de dispositivos.
Por ese motivo, tras la sustituci√≥n de dispositivos debe comprobar detalladamente el
programa en un entorno de prueba antes de ponerlo en marcha.

Migraci√≥n de proyectos y programas
Manual de programaci√≥n y manejo, 11/2019

217

Migraci√≥n de S7-1200 a firmware V4 y posterior
4.3 Particularidades tras la migraci√≥n a V4

Nota
Soporte adicional
En Siemens