ntido ...

Produce la sincronización ...

plus

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 0
sor del punto de referencia en el sentido positivo

plus

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 1
sor del punto de referencia en el sentido negativo

menos

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 2
sor del punto de referencia en el sentido positivo

menos

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 3
sor del punto de referencia en el sentido negativo

3. Introduzca la velocidad de inicio;
– Marcha rápida (REFPT_SPD = 0)
– Marcha lenta (REFPT_SPD = 1)
4. Escriba y active los datos máquina.
5. Active la señal de control para el modo de operación "Búsqueda del punto de referencia"
(MODE_IN = 3).
6. Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).
7. Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2811

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
8. Conecte la señal de control para el sentido de marcha positivo o negativo o la señal de inicio
(DIR_P = 1, DIR_M = 1 o START = 1).
9. Llame la instrucción ABS_CTRL o ABS_CTRL_451.
La tabla siguiente muestra los comandos de inicio para una búsqueda del punto de referencia.
Comando de
inicio

Tarea

Comentario

DIR_P

El accionamiento se inicia en el sentido de
los valores positivos. Se mueve, pues, en
el sentido del final de la zona de despla‐
zamiento.

Si en los datos máquina se introduce un
sentido negativo, el FM 451 notifica un
error de operador. No se realiza ninguna
búsqueda del punto de referencia.

DIR_M

El accionamiento se inicia en el sentido de
los valores negativos. Se mueve, pues, en
el sentido del principio de la zona de des‐
plazamiento.

Si en los datos máquina se introduce un
sentido positivo , el FM 451 notifica un
error de operador. No se realiza ninguna
búsqueda del punto de referencia.

START

El accionamiento se inicia en el sentido
que se ha introducido en los datos máqui‐
na.

Nota
Para el eje rotativo rige lo siguiente: La reproducibilidad del punto de referencia sólo está
garantizado si entre el valor Final del eje rotativo y el valor Recorrido por vuelta existe una
relación de número entero.

La figura siguiente muestra un ejemplo del modo de operación "Búsqueda del punto de
referencia".

2812

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

02'(B,1 
%¼VTXHGDGHOSXQWRGHUHIHUHQFLD
'59B(1
+DELOLWDFLµQGHODFFLRQDPLHQWR
[O
(QWUDGDGHKDELOLWDFLµQ
:$,7B(,
67$57
',5B0',5B3
:25.,1*
6<1&

YU£SLGD
YOHQWD
V

6HQVRUGHO
SXQWRGH
UHIHUHQFLD

6H³DOFHUR

* Las señales de inicio se desactivan con la instrucción ABS_CTRL o ABS_CTRL_451.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar operación de posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

3 = Búsqueda del punto de referencia

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Operación de posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

25.0

SYNC

BOOL

FALSE

1 = Eje sincronizado

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2813

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia

52.0

REFPT_TYPE

DINT

L#0

Tipo de búsqueda del punto de referencia

99.0

REFPT_SPD

BOOL

TRUE

Velocidad de inicio para la búsqueda del punto de
referencia
0 = Marcha rápida
1 = Marcha lenta

Efectos del modo de operación
● Con el inicio de la marcha se elimina la sincronización.
● La posición real se ajusta al valor de la coordenada del punto de referencia si se activa la
señal de respuesta SYNC.
● La zona de trabajo se fija en el eje.
● Los distintos puntos dentro de la zona de trabajo conservan sus valores originales, pero se
encuentran en posiciones nuevas.

Cancelación de la búsqueda del punto de referencia
El modo de operación "Búsqueda del punto de referencia" se cancela cuando
● la señal de habilitación del accionamiento se borra (DRV_EN = 0),
● se ha rebasado un límite de la zona de desplazamiento en un eje lineal.

Búsqueda del punto de referencia dependiente de la posición de inicio
En una búsqueda del punto de referencia es preciso distinguir diversos casos que dependen
● de la posición del accionamiento al iniciar una búsqueda del punto de referencia,
● del sentido de arranque parametrizado,
● de la posición parametrizada de la señal cero respecto al sensor del punto de referencia.

2814

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los casos de REFPT_TYPE = 0 y REFPT_TYPE = 1. Para
REFPT_TYPE = 2 y REFPT_TYPE = 3 rigen las figuras según corresponda.
Condiciones para la búsqueda del punto de referencia

Desarrollo de la búsqueda del punto de referencia

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 0):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido positivo.

5()
YU£SLGD
YOHQWD
3RVLFLµQLQLFLDO

6<1&

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 1):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido negativo.

5()
YU£SLGD
YOHQWD
6<1&
3RVLFLµQLQLFLDO

5
YOHQWD

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 0):

1

● El sentido de inicio debe estar parametrizado en el
sentido positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido positivo.
● El contacto inversor es más positivo que el sensor del
punto de referencia.

5()
YU£SLGD
YOHQWD
3RVLFLµQLQLFLDO

6<1&

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 1):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido negativo.
● La posición de inicio de la búsqueda del punto de
referencia se encuentra en el sensor del punto de
referencia.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

5()
6<1&

3RVLFLµQLQLFLDO

YOHQWD

2815

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Condiciones para la búsqueda del punto de referencia

Desarrollo de la búsqueda del punto de referencia

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 0):

1

● El sentido de arranque es positivo.

5()

● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido positivo.
● El contacto inversor es más positivo que el sensor del
punto de referencia.

80
YU£SLGD
YOHQWD

6<1& 3RVLFLµQLQLFLDO

5

5

YOHQWD
YU£SLGD

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE=0):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido positivo.

5()
YOHQWD

● Velocidad de inicio = velocidad lenta
3RVLFLµQLQLFLDO

6<1&

R = Inversión del sentido
REF = Sensor del punto de referencia
UM = Contacto inversor
N = señal cero del encóder
SYNC = Se ha alcanzado la sincronización

Modo de operación "Modo incremental"
Definición
En el modo de operación "Modo incremental" el FM 451 puede mover el accionamiento
● a destinos absolutos,
● mover el accionamiento de forma relativa alrededor de una parte del trayecto en un sentido
predeterminado.
El objetivo o los recorridos relativos se predeterminan como incrementos del FM 451. Tiene la
posibilidad de insertar un máximo de 100 incrementos en una tabla, que son válidos tanto para
el modo de operación "Modo incremental relativo" como para el "Modo incremental absoluto".
Independientemente de la tabla de incrementos, es posible especificar el recorrido con el
número de incremento 254 (Página 2868) y elnúmero de incremento 255 (Página 2869).

2816

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Con el incremento 252 (Página 2868) es posible mover el accionamiento, en primer lugar sin
destino, en el sentido predeterminado (marcha sin fin). Si se produce un evento externo (xI3)
se realiza el posicionamiento en el destino parametrizado.

Requisitos
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.
● Los incrementos deben estar presentes en el módulo.

Interpretación de los incrementos
En función del modo incremental que se seleccione, el FM 451 interpreta los datos
especificados de una manera u otra.
● Modo incremental absoluto: Los incrementos se interpretan como posición de destino
absoluta.
En el caso del eje rotativo no puede sobrepasarse el final del eje.
● Modo incremental relativo: Los incrementos se interpretan como distancia de la posición de
inicio.
En el caso del eje rotativo no puede sobrepasarse el final del eje (se admiten vueltas
múltiples).
Nota
Para el modo de operación "Modo incremental relativo" sólo se permiten incrementos positivos.
Los incrementos obtienen su signo de las especificaciones de sentido DIR_P o DIR_M.

Desarrollo del modo de operación "Modo incremental" con número de incremento 1 a 100
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 1 a 100
1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Anote los incrementos en las tablas (TRGL1; TRGL2).

3

Escriba las tablas de incrementos (TRGL1/2WR_EN = 1).

4

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

5

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

6

Introduzca el número de incremento (MODE_TYPE = 1 … 100).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2817

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 1 a 100
7

Active la señal de control:

Active la señal de control:

● Eje lineal:

● Eje lineal:

–

START; el sentido se determina
de forma unívoca a través del
destino y el valor real actual.

● Eje rotativo:

8

–

START; se llega al punto de
destino por el trayecto más corto.

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

● Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

Llame la instrucción ABS_CTRL o ABS_CTRL_451.

Los pasos 2 y 3 se necesitan únicamente si no hay aún incrementos o si es preciso modificar las
medidas existentes.

Desarrollo del modo de operación "Modo incremental" con número de incremento 252
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 252
1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

3

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

4

Introduzca el número de incremento (MODE_TYPE = 252).

5

Introduzca la velocidad de inicio;
● Marcha rápida (SPEED252 = 1)
● Marcha lenta (SPEED252 = 0)

6

Introduzca el incremento para el número de incremento 252 (TRG252_254).

7

Active el bit de inicio para escribir el incremento (TRG252_254_EN = 1).

8

Active la señal de control:
● Eje lineal / Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

9

Llame la instrucción ABS_CTRL o ABS_CTRL_451.

10

Si se produce un evento externo (entrada digital xI3) se realiza el posicionamiento en el
destino parametrizado (incremento).

Las acciones descritas en los pasos 6 y 7 también pueden realizarse durante la marcha. En este caso,
el módulo FM 451 controla, hasta la indicación del incremento, un destino que se encuentra a la mitad
de la zona de destino delante del final de carrera por software.

2818

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo del modo de operación "Modo incremental" con número de incremento 254
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 254
1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

3

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

4

Introduzca el número de incremento (MODE_TYPE = 254).

5

Introduzca el incremento para el número de incremento 254 (TRG252_254).

6

Active el bit de inicio para escribir el incremento (TRG252_254_EN = 1).

7

Active la señal de control:

Active la señal de control:

● Eje lineal:

● Eje lineal:

–

START; el sentido se determina
de forma unívoca a través del
destino y el valor real actual.

● Eje rotativo:

8

–

START; se llega al punto de
destino por el trayecto más corto.

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

● Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

Llame la instrucción ABS_CTRL o ABS_CTRL_451.

Desarrollo del modo de operación "Modo incremental" con número de incremento 255
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 255
1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

3

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

4

Introduzca el número de incremento (MODE_TYPE = 255).

5

Introduzca el incremento para el número de incremento 255 (TRG255).

6

Introduzca el valor para la distancia de cambio de velocidad del número de incremento 255
(CHGDIF255).

7

Introduzca el valor para la distancia de desconexión del número de incremento 255 (CUT‐
DIF255).

8

Active el bit de inicio para escribir el incremento y la distancia de desconexión y de cambio
de velocidad (TRG255_EN = 1).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2819

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 255
9

Active la señal de control:

Active la señal de control:

● Eje lineal:

● Eje lineal:

–

START; el sentido se determina
de forma unívoca a través del
destino y el valor real actual.

● Eje rotativo:

10

–

START; se llega al punto de
destino por el trayecto más corto.

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

● Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

Llame la instrucción ABS_CTRL o ABS_CTRL_451.

La figura siguiente muestra un ejemplo del modo de operación "Modo incremental".
02'(B,1 
0RGRLQFUHPHQWDO
'59B(1
+DELOLWDFLµQGHODFFLRQDPLHQWR
[O
(QWUDGDGHKDELOLWDFLµQ
:$,7B(,


67$57
',5B0',5B3
:25.,1*
326B5&'
3(+ 

YU£SLGD
YOHQWD
V

* Las señales de inicio se desactivan con la instrucción ABS_CTRL o ABS_CTRL_451.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

2820

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.6

SPEED252

BOOL

FALSE

Velocidad de inicio para el modo incremental con número
de incremento 252
● 0 = Marcha lenta
● 1 = Marcha rápida

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

4 = Modo incremental relativo
5 = Modo incremental absoluto

17.0

MODE_TYPE

BYTE

B#16#0

Número de incremento 1 … 100, 252, 254 ó 255

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

25.7

POS_RCD

BOOL

FALSE

1 = Posición alcanzada

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para número de incremento 252 ó
254

36.3

TRG255_EN

BOOL

FALSE

1 = Escribir incremento para número de incremento 255

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (número de incremento
1 ... 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (número de incremento
51 ... 100)

96.0

TRG252_254

DINT

L#0

Incremento para número de incremento 252 ó 254

100.0

TRG255

DINT

L#0

Incremento para número de incremento 255

104.0

CHGDIF_255

DINT

L#0

Distancia de cambio de velocidad para número de incre‐
mento 255

108.0

CUTDIF_255

DINT

L#0

Distancia de desconexión para número de incremento 255

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa

120.0

TRGL1.TRG[1]

DINT

L#0

Número de incremento 1

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

316.0

TRGL1.TRG[50]

DINT

L#0

Número de incremento 50

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Tabla de incrementos 1

2821

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Dirección

Nombre

Tipo

valor inicial

Comentarios

320.0

TRGL2.TRG[51]

DINT

L#0

Número de incremento 51

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

516.0

TRGL2.TRG[100]

DINT

L#0

Número de incremento 100

Tabla de incrementos 2

Distancia residual
La distancia residual es la diferencia entre el destino (incremento) y el valor real. La distancia
residual es
● positivo si aún no ha alcanzado el destino.
● negativo si ya se ha rebasado el destino.
En un eje rotativo no puede utilizarse la distancia residual mostrada.

Desactivación del modo incremental
El modo de operación "Modo incremental" se desactiva si el FM 451 recibe una señal de
parada (STOP = 1).
Tras la desactivación de la marcha, se mantiene la distancia residual.
La distancia residual en el "Modo incremental relativo" y el "Modo incremental absoluto con el
número de incremento 252" puede realizarse hasta el final si
● el modo de operación no ha cambiado y
● el número de incremento no ha cambiado y
● el sentido no ha cambiado y
● la distancia residual es mayor que la distancia de desconexión parametrizada.
La distancia residual se realiza ejecutando de nuevo el "Modo incremental relativo" o el "Modo
incremental absoluto" con el número de incremento 252 sin cambios.

Cancelación del modo incremental
El modo de operación "Modo incremental" se cancela si la señal "Habilitación del
accionamiento" se borra (DRV_EN = 0).

Borrar distancia residual
La petición "Borrar distancia residual" borra una distancia residual pendiente.
En el "modo incremental con número de incremento 252" la marcha comienza de nuevo con
la marcha sin fin después de la función "Borrar distancia residual".
Al llamar otro modo de operación o iniciar el modo de operación en el otro sentido, también se
borra la distancia residual pendiente.

2822

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Dato utilizado en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.2

DELDIST_EN

BOOL

FALSE

1 = Borrar distancia residual

Petición "Ajustar valor real" / "Ajustar valor real al vuelo" / "Cancelar preselección del valor real"
Definición
La petición "Ajustar valor real" o "Ajustar valor real al vuelo" permite asignar una nueva
coordenada al estado actual del encóder. La zona de trabajo se proyecta sobre otra zona del
eje.
El desplazamiento de la zona de trabajo se calcula con (REALnuevo - REALactual).
● REALnuevo es el valor predeterminado
● REALactual es el valor real en el instante de la ejecución

Requisitos
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.
Para la función "Ajustar valor real" es preciso finalizar el proceso de posicionamiento.

Desarrollo de la petición
1. Introduzca las coordenadas AVAL o FVAL para el valor real (REALnuevo).
– Eje lineal:
El valor real indicado se debe seleccionar de tal modo que los finales de carrera por
software se encuentren todavía dentro de la zona de desplazamiento admitido tras la
llamada de la petición.
El valor de decalaje que resulta de (REALnuevo - REALactual) tiene que ser menor o igual
al valor de la zona de desplazamiento admisible (máximo 100 m o 1000 m,
respectivamente).
– Eje rotativo:
Para el valor real indicado rige:
0 ≤ Valor real < Final del eje rotativo
2. Active el bit de inicio correspondiente (AVAL_EN = 1 o FVAL_EN = 1).
Se ejecuta de inmediato "Ajustar valor real".
"Ajustar valor real al vuelo" se ejecuta con el flanco ascendente siguiente en la entrada
digital xI3.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2823

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.7

AVAL_EN

BOOL

FALSE

1 = Ajustar valor real

36.0

FVAL_EN

BOOL

FALSE

1 = Ajustar valor real al vuelo

84.0

AVAL

DINT

L#0

Coordenada de "Ajustar valor real"

88.0

FVAL

DINT

L#0

Coordenada de "Ajustar valor real al vuelo"

Efectos de la petición
En el ejemplo "Ajustar valor real" en 300 mm se ve cómo esta petición proyecta la zona de
trabajo a una posición concreta del eje. De ello se derivan los siguientes efectos:
● La posición real se fija en el valor de la coordenada del valor real.
● La zona de trabajo se desplaza hacia el eje.
● Los distintos puntos (p. ej., fin del final de carrera por software) dentro de la zona de trabajo
conservan su valor original, pero se encuentran en posiciones nuevas.
La tabla siguiente muestra el desplazamiento de la zona de trabajo en el eje a través de la
función "Ajustar valor real".
Ajustar valor real

(MH

)&6,

5($/


REA
L

FCSF

-400

100

400

-400

300

400

6LVWHPDGHFRRUGHQDGDVDQWHULRU
)&6)




>PP@

EDM R





FCSI

=RQ

DGH

WUD

3UR\HFFLµQGHOD
]RQDGHWUDEDMR
DWUDY«VGHOYDORU
UHDO VHGHILQHHQ
PP



)&6,







5($/ )&6)

1XHYRVLVWHPDGHFRRUGHQDGDV

Deshacer una petición ("Cancelar preselección del valor real")
Con la petición "Cancelar preselección del valor real" se deshace el último desplazamiento de
la zona de trabajo que se ha creado con "Ajustar valor real".
Un "Ajustar valor real al vuelo" iniciado no se puede borrar antes de su ejecución mediante un
flanco ascendente en la entrada digital xI3. Pero sí puede sobrescribirse con un nuevo "Ajustar
valor real al vuelo". Con un arranque del módulo estas peticiones se inicializan.

2824

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.3

AVALREM_EN

BOOL

FALSE

1 = Cancelar preselección del valor real

Petición "Decalaje de señal cero"
Definición
Con la petición "Decalaje de señal cero" se desplaza en el valor introducido la señal cero del
sistema de coordenadas.
El signo define el sentido del decalaje en el sistema de coordenadas.

Calcular nueva coordenada
Todos los valores del sistema desplazado de coordenadas se calculan con la fórmula
siguiente:
Coordenadanueva = coordenadaantigua + (DSCnueva - DSCantigua)
DSCantigua indica un decalaje anterior de señal cero.
Si antes de la llamada no ha habido activo ningún decalaje de señal cero, introduzca para
DSCantiguo el valor 0.
Con esto es posible calcular qué valores de coordenadas adoptan, por ejemplo, los finales de
carrera por software.

Requisitos
● El posicionamiento debe haber finalizado.
● El eje debe estar parametrizado.

Desarrollo de la petición
1. Introduzca el valor ZOFF para el decalaje de señal cero.
– Eje lineal:
El decalaje de señal cero se tiene que escoger de tal modo que los finales de carrera por
software se encuentren todavía dentro de la zona de desplazamiento admisible tras la
llamada de la petición.
– Eje rotativo:
Para el decalaje de señal cero rige:
Valor del decalaje de señal cero ≤ Fin del eje rotativo
2. Active el bit de inicio correspondiente (ZOFF_EN = 1).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2825

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.1

ZOFF_EN

BOOL

FALSE

1 = Activar decalaje de señal cero

80.0

ZOFF

DINT

L#0

Decalaje de señal cero

Efectos de la petición en un eje lineal
En el ejemplo de un decalaje de señal cero de -200 mm se ve cómo esta petición desplaza el
sistema de coordenadas en sentido positivo. De ello se derivan los siguientes efectos:
● La zona de trabajo no se desplaza físicamente.
● A cada uno de los puntos (como, p.ej. a los finales de carrera por software) se les asignan
nuevos valores de coordenadas.
La tabla siguiente muestra el desplazamiento del sistema de coordenadas mediante el
"Decalaje de señal cero".

Decalaje de señal cero

(MH

REAL

FCSF

-400

200

400

-200

400

600

6LVWHPDGHFRRUGHQDGDVDQWHULRU
5($/ )&6)

)&6,






=RQDGHWUDEDMR





FCSI

>PP@

'HVSOD]DPLHQWR
GHFRRUGHQDGDV
HQPPD
WUDY«VGHO
GHFDODMHGHVH³DO
FHURGHPP




1XHYRVLVWHPDGHFRRUGHQDGDV

Efectos de la petición en un eje rotativo
En el ejemplo de un decalaje de señal cero en -45° se ve cómo esta petición gira el sistema
de coordenadas.
La figura siguiente muestra el giro del sistema de coordenadas mediante decalaje de la señal
cero.

2826

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

r

/

/DVH³DOFHURVH
JLUDJUDGRV
7RGRVORVSXQWRV
GHOHMH
DGTXLHUHQ
QXHYRVYDORUHV
GHFRRUGHQDGDV

+HUUDPLHQWDFRQ
5($/ r

6

($

r

'&

5

5

($

/

+HUUDPLHQWDFRQ5($/ r

r

r

Considerando un DSCantiguo = 0 resulta un nuevo valor de 385°
Como al final del eje rotativo en un sentido de giro positivo el valor real empieza de nuevo en
0 el valor real de 25º se calcula a partir de:
Coordenadanueva = coordenadaantigua - (DSCnueva - DSCantigua) -final de eje rotativo

Pérdida de la sincronización
Si se pierde la sincronización a causa de un error o se reactiva mediante "Búsqueda del punto
de referencia" se mantiene activo un decalaje de señal cero.

Deshacer petición
Al definir un decalaje de señal cero de 0 mm se recupera el decalaje de señal cero existente.

Petición "Definir punto de referencia"
Definición
Con la petición "Definir punto de referencia" se sincroniza el eje. Esta petición desplaza la zona
de trabajo. Todos los decalajes generados por la función "Ajustar valor real" se conservan.
Este ajuste proyecta la zona de trabajo sobre el eje. Así, con distintas entradas de valores, la
zona de trabajo puede encontrarse en posiciones diferentes dentro del rango físico del eje.

Requisitos
● El posicionamiento debe haber finalizado.
● El eje debe estar parametrizado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2827

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo de la petición
1. Introduzca el valor REFPT para las coordenadas del punto de referencia.
– Eje lineal:
La coordenada del punto de referencia no puede encontrarse fuera de los finales de carrera
por software. Esto rige también para la coordenada del punto de referencia de un sistema
de coordenadas desplazado.
– Eje rotativo:
Para la coordenada del punto de referencia rige:
0 ≤ Coordenada del punto de referencia < Final del eje rotativo
2. Active el bit de inicio correspondiente (REFPT_EN = 1).

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

25.0

SYNC

BOOL

FALSE

1 = Eje sincronizado

35.6

REFPT_EN

BOOL

FALSE

1 = Definir punto de referencia

92.0

REFPT

DINT

L#0

Coordenada del punto de referencia

Efectos de la petición
En el ejemplo "Definir punto de referencia" en 400 mm se ve cómo esta petición proyecta la
zona de trabajo a una posición física concreta del eje. De ello se derivan los siguientes efectos:
● La posición real se fija en el valor de la coordenada del punto de referencia.
● La zona de trabajo se desplaza hacia el eje.
● Los distintos puntos (por ejemplo, fin del final de carrera por software) conservan su valor
original pero se encuentran en posiciones físicas nuevas.
● El bit SYNC de las señales de respuesta se activa.

2828

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra el desplazamiento de la zona de trabajo en el eje a través de la
función "Definir punto de referencia".
Definir punto de referencia

(MH

REAL

FCSF

-400

200

400

-400

400

400

6LVWHPDGHFRRUGHQDGDVDQWHULRU
5($/ )&6)

)&6,










>PP@

DGH

WUD

EDM R

3UR\HFFLµQGHOD
]RQDGHWUDEDMR
DFWLYDUDWUDY«VGH
SXQWRGHUHIHUHQFLD
PP

=RQ


FCSI



)&6,



5($/ ) &6)
1XHYRVLVWHPDGHFRRUGHQDGDV

Particularidades del encóder absoluto
Esta petición es necesaria para un reajuste del encóder absoluto (Página 2854).

Selector de función "Medición de longitud" / "Captura de bordes"
Definición
Con las funciones "Medición de longitud" y "Captura de bordes" es posible calcular la longitud
de una pieza de trabajo.
El selector de función "Medición de longitud" o "Captura de bordes" se activa y se mantiene así
hasta que se desconecta o se selecciona otro método de medición. Si se seleccionan ambos
métodos de medición a la vez, la instrucción ABS_CTRL o ABS_CTRL_451 activa la medición
de longitud.

Requisitos
● El posicionamiento debe haber finalizado.
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.
● En la entrada xI3 hay conectado un conector libre de rebotes.
● Si estos selectores de función se seleccionan durante un posicionamiento, la "Medición de
longitud" y la "Captura de bordes" pueden no realizarse hasta el posicionamiento siguiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2829

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo de las mediciones
Según el tipo de medición, el FM 451 actualiza los datos del módulo en momentos distintos. El
FM 451 notifica cada actualización en un parámetro en la interfaz de realimentación.
La tabla siguiente muestra el desarrollo de las mediciones.
Desa‐
rrollo

Medición de longitud

Captura de bordes

065B21

('*(B21

[O

[O

$FWXDOL]DFLµQGHGDWRV

$FWXDOL]DFLµQGHGDWRV

065B'21(

065B'21(

1

Active el selector de función para la "Medición de longi‐ Dado el caso, introduzca un valor EDGEDIST para la
tud" (MSR_ON = 1).
separación mínima de bordes en el DB de parámetros.
Escriba y active los datos máquina.

2

Inicie un posicionamiento.

Active el selector de función de "Captura de bordes"
(EDGE_ON = 1). Se activa el parámetro MSR_DONE.

3

El flanco ascendente de la entrada xI3 inicia la medición
de longitud.

Inicie un posicionamiento.

4

El flanco descendente de la entrada xI3 pone fin a una
medición en curso. El FM 451 actualiza los datos Valor
inicial, Valor final y Longitud.

El flanco ascendente de la entrada xI3 inicia la medición.
Tras el procedimiento de la parte del trayecto "Distancia
mínima entre bordes" la medición es válida. Esto se no‐
tifica mediante MSR_DONE = 0. Los resultados de la
medición se actualizan y se pueden leer, el valor inicial
de la medición se registra; el valor final y la longitud
pasan a ser -1.

5

Con el parámetro activado MSR_DONE el FM 451 co‐ Tras la actualización, el FM 451 notifica el cambio de‐
munica la actualización de los datos. El parámetro indi‐ sactivando el parámetro MSR_DONE.
ca que la medición ha finalizado. Los resultados de la
medición se pueden leer.

6

El inicio de otra medición con el flanco ascendente de
xI3 desactiva el parámetro MSR_DONE.

El flanco descendente de la entrada xI3 pone fin a una
medición en curso. El FM 451 actualiza los datos del
valor final de la medición y la longitud.

7

-

Tras la actualización, el FM 451 notifica el cambio acti‐
vando el parámetro MSR_DONE. Los resultados de la
medición se pueden leer.

8

-

El inicio de otra medición con el flanco ascendente de
xI3 desactiva el parámetro MSR_DONE.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

25.1

MSR_DONE

BOOL

FALSE

1 = Medición de longitud cancelada/Captura de bordes
finalizada

34.3

EDGE_ON

BOOL

FALSE

1 = Captura de bordes activada

2830

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Dirección

Nombre

Tipo

valor inicial

Comentarios

34.4

MSR_ON

BOOL

FALSE

1 = Medición de longitud activada

35.0

MDWR_EN

BOOL

FALSE

1 = Escribir datos máquina

35.1

MD_EN

BOOL

FALSE

1 = Activar datos máquina

37.0

MSRRD_EN

BOOL

FALSE

1 = Leer valores medidos

136.0

BEG_VAL

DINT

L#0

Valor inicial de la medición de longitud/Captura de bordes

140.0

END_VAL

DINT

L#0

Valor final de la medición de longitud/Captura de bordes

144.0

LEN_VAL

DINT

L#0

Longitud

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

4.0

EDGEDIST

DINT

L#0

Distancia mínima entre bordes en la captura de bordes

Si el final del proceso de medición se encuentra dentro de este rango, la medición se desestima (BEG_VAL, END_VAL y
LEN_VAL = ‑1).

Condiciones marco para una medición de longitud
● La distancia entre el flanco de activación y el flanco de desactivación en la entrada xI3 tiene
que ser tal que su programa en la CPU pueda evaluar correctamente el resultado de la
medición antes de iniciar una nueva medición.
● La distancia mínima entre el flanco ascendente y descendente en la entrada xI3, al igual
que entre el flanco descendente y el siguiente ascendente en la entrada xI3, tiene que ser
mayor que 8 ms.

Medición con errores
En caso de una medición de longitud/Captura de bordes con errores, el FM 451 devuelve el
valor -1 para la longitud. Una medición es errónea cuando
● en un eje rotativo la longitud medida es superior a 231,
● al mismo tiempo el FM 451 detecta el flanco de activación y el de desactivación, por
ejemplo, por rebotes del conector.

Selector de función "Aproximación en bucle"
Definición
Con la "Aproximación en bucle" define el sentido en el que se avanza hacia el punto de destino
con cierre de fuerza. La aproximación en bucle puede utilizarse cuando sólo se puede
garantizar el cierre de fuerza en un sentido entre el motor y el eje.
El destino al que se realiza la aproximación en contra del sentido predefinido se rebasa al
principio. A continuación, el módulo realiza una inversión del sentido y realiza la aproximación
al destino en el sentido predeterminado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2831

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.
● En una aproximación en bucle en contra del sentido del desplazamiento hacia el destino,
la posición de destino se encuentra:
– en el sentido de desplazamiento positivo
Destino < SEE - ½ zona de destino - distancia de desconexión positiva - distancia de
cambio de velocidad negativa
– en el sentido de desplazamiento negativo
Destino < SEA + ½ zona de destino + distancia de desconexión negativa + distancia de
cambio de velocidad positiva
● Una aproximación en bucle no se lleva a cabo, si la aproximación al destino se realiza en
el sentido de la aproximación en bucle. En este caso se realiza un posicionamiento en modo
incremental sin inversión del sentido.
● Hay que conocer el transcurso del modo de operación "Modo incremental" (Página 2816).

Desarrollo de la aproximación en bucle
1. Active la señal de control para el modo de operación "Modo incremental absoluto/relativo"
(MODE_IN = 5/4).
2. Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).
3. Active el selector de función "Entrada de habilitación" (EI_OFF = 1) o cablee la entrada de
habilitación para el canal correspondiente.
4. Introduzca el número de incremento (MODE_TYPE = 1 … 100, 254, 255).
5. Active el selector de función "Aproximación en bucle" (PLOOP_ON / MLOOP_ON = 1).
6. Inicie el modo incremental.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

4 / 5 = Modo incremental relativo/absoluto

17.0

MODE_TYPE

BYTE

B#16#0

Número de incremento 1 … 100, 254 ó 255

34.0

PLOOP_ON

BOOL

FALSE

1 = Aproximación en bucle en sentido positivo

34.1

MLOOP_ON

BOOL

FALSE

1 = Aproximación en bucle en sentido negativo

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

2832

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Destino ficticio
Si inicia un posicionamiento en un destino que se encuentra en el sentido opuesto a la
aproximación en bucle parametrizada, el módulo determina para este destino un destino
ficticio en el que éste ejecuta una inversión del sentido y, después, se aproxima al destino en
el sentido correcto.
Este destino ficticio tiene que encontrarse al menos a media zona de destino delante del final
de carrera por software correspondiente.
La eliminación del destino ficticio del destino parametrizado se determina en función del
sentido. La tabla siguiente muestra el cálculo de la situación del destino ficticio en la
aproximación en bucle.
Preajustes

Posición del destino ficticio

Parametrización:

El destino ficticio (Destinof) tiene el valor:

Bucle + (cierre de fuerza positi‐
vo) y marcha en sentido negati‐ Destino = Destino - Distancia de desconexión negativa - distancia de
f
vo
cambio de velocidad positiva
 'HVWLQRILFWLFLR 2EMHWLYR

Parametrización:

3RVLFLµQLQLFLDO

El destino ficticio (Destinof) tiene el valor:

Bucle - (cierre de fuerza negati‐
vo) y marcha en el sentido posi‐ Destino = Destino + Distancia de desconexión positiva + distancia
f
tivo
de cambio de velocidad negativa
 3RVLFLµQLQLFLDO

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2EMHWLYR

'HVWLQRILFWLFLR

2833

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo
A continuación se muestra la posición del destino ficticio tomando como base un
posicionamiento con aproximación en bucle negativa hacia un destino máximo.
YU£SLGD

'HVWLQRILFWLFLR

)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ

YOHQWD


2EMHWLYR




&DPELRGH
VHQWLGR

YOHQWD

①
②
③

Distancia de cambio de velocidad negativa
Distancia de desconexión positiva
½ zona de destino

Selector de función "Entrada de habilitación"
Definición
La entrada de habilitación es una entrada externa con la que puede habilitarse un
posicionamiento a través de un evento externo.

Evaluar entrada de habilitación (EI_OFF = 0)
La entrada de habilitación correspondiente (xI2) para el canal debe estar cableada.
Con ello tiene la posibilidad de preparar el inicio de un posicionamiento. El posicionamiento se
inicia independientemente del desarrollo del programa de usuario creando una señal "1" en la
entrada de habilitación.
Tiene las siguientes posibilidades para el tipo de evaluación de la entrada de habilitación:
● controlado por nivel (EI_TYPE = 0)
La marcha comienza cuando se crea una señal "1" en la entrada de habilitación y se
desactiva cuando se crea una señal "0" en la entrada de habilitación.
● controlado por flanco (EI_TYPE = 1)
La marcha comienza con la detección de un flanco ascendente en la entrada de
habilitación. La siguiente curvav de señales en esta entrada ya no afecta al desarrollo del
desplazamiento iniciado.

2834

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

No evaluar entrada de habilitación (EI_OFF = 1)
Si desconecta la evaluación de la entrada de habilitación, un modo de operación comienza
inmediatamente después de detectar la señal de inicio. A continuación no es posible preparar
un modo de operación ni iniciarlo en un instante posterior concreto.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

99.1

EI_TYPE

BOOL

FALSE

0 = Controlado por nivel
1 = Controlado por flanco

Petición "Leer datos de posición"
Definición
Con la petición "Leer datos de posición" es posible leer el incremento, la distancia residual y la
velocidad en el instante actual.

Desarrollo de la petición
1. Active el bit de inicio en el DB de canal (ACTSPD_EN = 1).
2. Los datos se depositan en el DB de canal.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

37.1

ACTSPD_EN

BOOL

FALSE

1 = Leer datos de posición

112.0

ACTSPD

DINT

L#0

Velocidad actual

116.0

DIST_TO_GO

DINT

L#0

Distancia residual

120.0

ACT_TRG

DINT

L#0

Incremento actual

Petición "Leer datos del encóder"
Definición
Con la petición "Leer datos de encóder" se leen los datos actuales del encóder, así como el
valor del reajuste del encóder absoluto.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2835

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
Es posible leer el valor para el reajuste del encóder absoluto (Página 2854) después de
ejecutar la petición "Definir punto de referencia" (Página 2827).

Desarrollo de la petición
1. Active el bit de inicio en el DB de canal (ENCVAL_EN = 1).
2. Los datos se depositan en el DB de canal.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

37.2

ENCVAL_EN

BOOL

FALSE

1 = Leer valores del encóder

124.0

ENCVAL

DINT

L#0

Valor real del encóder (representación interna)

128.0

ZEROVAL

DINT

L#0

Último valor de la marca cero (representación interna)

132.0

ENC_ADJ

DINT

L#0

Reajuste del encóder absoluto

Señales de realimentación del posicionamiento
Definición
Con la función "Señales de realimentación para el posicionamiento" se informa del estado
actual del posicionamiento.

Desarrollo
Con cada llamada de la instrucción ABS_CTRL o ABS_CTRL_451 los datos se depositan en
el DB de canal.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

23.4

SPEED_OUT

BOOL

FALSE

0 = Marcha lenta

23.5

ZSPEED

BOOL

FALSE

1 = El eje se encuentra en la zona de parada

23.6

CUTOFF

BOOL

FALSE

1 = El eje se encuentra en la zona de desconexión

23.7

CHGOVER

BOOL

FALSE

1 = El eje se encuentra en la zona de cambio de de velo‐
cidad

24.0

MODE_OUT

BYTE

B#16#0

Modo de operación activo

25.2

GO_M

BOOL

FALSE

1 = El eje se desplaza en sentido negativo

25.3

GO_P

BOOL

FALSE

1 = El eje se desplaza en sentido positivo

1 = Marcha rápida

2836

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Dirección

Nombre

Tipo

valor inicial

Comentarios

25.5

FVAL_DONE

BOOL

FALSE

1 = Ajuste del valor real al vuelo finalizado

25.7

POS_RCD

BOOL

FALSE

1 = Posición alcanzada

26.0

ACT_POS

DINT

L#0

Valor real actual (posición actual del eje)

Consultar las señales de realimentación del diagnóstico
Definición
Con las "Señales de respuesta del diagnóstico" se recibe información sobre los eventos de
diagnóstico que se han producido.

Desarrollo
1. Cuando el módulo introduce un nuevo evento en el búfer de diagnóstico, activa el bit DIAG
en la interfaz de respuesta. Cada aparición de un error (Página 2882) provoca una entrada
en el búfer de diagnóstico. Al borrar el búfer de diagnóstico se activa el bit DIAG.
2. Si no es posible llamar un modo de operación o controlar un modo de operación activo, o
si esta operación se ha realizado de forma errónea, el módulo activa un error de operador
OT_ERR en la interfaz de respuesta. La causa del error se registra en el búfer de
diagnóstico. Mientras el error de operador está activo, no es posible iniciar un modo de
operación ni continuar el modo de operación detenido. Un error de operador existente se
confirma con OT_ERR_A = 1.
3. Cuando el módulo detecta una petición de escritura con datos erróneos, activa el bit
DATA_ERR en la interfaz de respuesta. La causa del error se registra en el búfer de
diagnóstico.
4. Las señales de respuesta se depositan en el DB de canal.
5. Si se ha leído el búfer de diagnóstico, el módulo restablece el bit DIAG a 0 en todos los
canales.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

22.2

DIAG

BOOL

FALSE

1 = Búfer de diagnóstico modificado

22.3

OT_ERR

BOOL

FALSE

1 = Error de operador

22.4

DATA_ERR

BOOL

FALSE

1 = Error de datos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2837

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.6.3

Configurar FM 451

6.3.6.4

Parametrización del FM 451

Especificar canales
Seleccionar sistema de medidas
Seleccionar sistema de medidas
Para la entrada y salida de datos es posible elegir entre los siguientes sistemas de medida:
● Milímetros (ajuste predeterminado)
● Inch
● Grados
Nota
Si se modifica el sistema de medida en el cuadro de diálogo "Especificar canales", los valores
se convierten al nuevo sistema. Aquí se pueden producir errores de redondeo.
Si se modifica el sistema de medida mediante el dato máquina, los valores no se convierten
automáticamente.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentario

8.0

UNITS

DINT

L#1

Sistema de medida
Valores permitidos:
● 1 = 10-3 mm
● 2 = 10-4 pulgadas
● 3 = 10-4 grados
● 4 = 10-2 grados
● 6 = 10-3 grados

2838

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Sistema de medida estándar en la ayuda en pantalla
Para la indicación de valores mínimos y máximos se utiliza el sistema de medida mm. Por ello,
para determinar los valores límite en los otros sistemas de medida, realice la conversión
siguiente:
Para convertir de

calcule

mm → pulgadas

Valor límite (inch) = valor límite (mm) × 0,1 1)

mm → grados

10-4 (4 decimales)

Valor límite (grados) = valor límite (mm) × 0,1

10 (3 decimales)

Valor límite (grados) = valor límite (mm) × 1

10-2 (2 decimales)

Valor límite (grados) = valor límite (mm) × 10

-3

pulgadas → grados
1)

Valor límite (grados) = valor límite (pulgadas)

En el valor máximo el número de decimales repercute en el número de dígitos que preceden a la
coma. En el sistema de medida Inch se utilizan 4 decimales, por lo tanto se pueden introducir como
máximo 100 000,0000 inch. El sistema de medida Milímetros utiliza 3 decimales y por lo tanto se
pueden introducir como máximo 1 000 000,000 mm.

Relación entre los incrementos y el sistema de medida
Las señales del encóder de un dispositivo conectado son evaluadas por el módulo y se
convierten al sistema actual. Para la conversión se utiliza la resolución (Página 2862).
Si el módulo de posicionamiento
● ha contado 10 incrementos y
● ha ajustado una resolución de 100 µm por incremento a través de los datos de encóder
parametrizados,
esto significa que el eje se ha movido un trayecto de 1 mm.

Copiar canales
Copiar canales
Este parámetro permite copiar un canal en otro canal.
1. Seleccione el canal cuyos parámetros desee copiar (origen del canal).
2. Active el canal en el que desee copiar los parámetros (destino del canal).
3. Pulse el botón "Copiar".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2839

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Accionamiento canal n
Seleccionar el modo de control
Visión global de los tipos de control
Sinopsis
El modo de control define el modo en que se utiliza un motor en las 4 salidas digitales (Q) de
un canal a través de la etapa de potencia. Para el módulo de posicionamiento existen 4 modos
de control por canal:
● Modo de control 1 (Página 2841)
● Modo de control 2 (Página 2841)
● Modo de control 3 (Página 2842)
● Modo de control 4 (Página 2843)
La siguiente tabla muestra los estados de las 4 salidas digitales para cada modo de control,
donde x representa los canales 1, 2 y 3.
Marcha rápida
Sentido +

Marcha lenta
Sentido -

Sentido +

Sentido -

PEH
La posición alcanza la pa‐
rada

Modo de control 1
xQ0

1

1

0

0

-

xQ1

0

0

1

1

-

xQ2

1

0

1

0

-

xQ3

0

1

0

1

-

Modo de control 2
xQ0

1

1

0

0

0

xQ1

0

0

0

0

1

xQ2

1

0

1

0

0

xQ3

0

1

0

1

0

Modo de control 3
xQ0

1

1

0

0

-

xQ1

1

1

1

1

-

xQ2

1

0

1

0

-

xQ3

0

1

0

1

-

Modo de control 4

2840

xQ0

1

0

0

0

-

xQ1

1

0

1

0

-

xQ2

0

1

0

0

-

xQ3

0

1

0

1

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modo de control 1
Modo de control 1
En el modo de control 1 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida
● xQ1: Marcha lenta
● xQ2: Desplazamiento +
● xQ3: Desplazamiento La figura siguiente muestra la función de las salidas digitales en el modo de control 1.
YU£SLGD

6H³DOGHUHWURDOLPHQWDFLµQ
3(+ 

YOHQWD

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

1 = Modo de control 1

Modo de control 2
Modo de control 2
En el modo de control 2 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida/lenta
● xQ1: Posición alcanzada
● xQ2: Desplazamiento +
● xQ3: Desplazamiento La figura siguiente muestra la función de las salidas digitales en el modo de control 2.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2841

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU£SLGD
3(+ 
YOHQWD

0DUFKDU£SLGDOHQWD

[4

3RVLFLµQDOFDQ]DGD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

2 = Modo de control 2

Modo de control 3
Modo de control 3
En el modo de control 3 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida
● xQ1: Marcha lenta
● xQ2: Desplazamiento +
● xQ3: Desplazamiento La figura siguiente muestra la función de las salidas digitales en el modo de control 3.

2842

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU£SLGD

6H³DOGHUHWURDOLPHQWDFLµQ
3(+ 

YOHQWD

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

3 = Modo de control 3

Modo de control 4
Modo de control 4
En el modo de control 4 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida +
● xQ1: Marcha lenta +
● xQ2: Marcha rápida ● xQ3: Marcha lenta La figura siguiente muestra la función de las salidas digitales en el modo de control 4.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2843

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU£SLGD

6H³DOGHUHWURDOLPHQWDFLµQ
3(+ 

YOHQWD

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

4 = Modo de control 4

Definir distancia de cambio de velocidad
Distancia de cambio de velocidad
La "Distancia de cambio de velocidad" define la distancia con respecto al punto de destino en
el que el accionamiento cambia la velocidad, de velocidad rápida a velocidad lenta.
Los valores predefinidos se aplican a todos los objetivos a los que se aproxima el módulo de
posicionamiento. Una excepción está constituida por el modo incremental con el incremento
255, para la que se define una distancia de cambio de velocidad especial.

Reglas para la distancia de cambio de velocidad
● La distancia de cambio de velocidad positiva y la distancia de cambio de velocidad negativa
no tienen por qué estar dispuestas de forma simétrica en torno al destino. Los valores
pueden ser muy distintos.
● La distancia de cambio de velocidad debe ser mayor que la distancia de desconexión.
● La distancia de cambio de velocidad se encuentra dentro de la zona de trabajo.
● La distancia de cambio de velocidad debe ser menor que el final del eje rotativo.
● Entre el punto de cambio de velocidad y el punto de desconexión se debe seleccionar una
distancia tan grande que permita cambiar de marcha rápida a marcha lenta.
● El punto de cambio de velocidad y el punto de desconexión se encuentran a una distancia
temporal de al menos 8 ms entre sí.

2844

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La figura siguiente muestra la ubicación de las áreas de cambio de velocidad en torno al
destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR











2EMHWLYR







)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






①
②
③
④
⑤
⑥

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‐
tiva
Distancia de desconexión positiva/negativa

⑦
⑧

Zona de destino

⑨

Punto de desconexión

Punto de cambio de velocidad

Zona de parada

Si desea obtener más información sobre la disposición de las áreas, consulte "Zonas y puntos
de cambio de velocidad del módulo de posicionamiento".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa
Rango de valores admisible:
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir distancia de desconexión
Distancia de desconexión
La "Distancia de desconexión" define la distancia hasta el punto de destino en el que se
desconecta el accionamiento (la marcha lenta). Las funciones de vigilancia retoma el módulo
de posicionamiento a partir de este punto.
Los valores predefinidos se aplican a todos los objetivos a los que se aproxima el módulo de
posicionamiento. Una excepción está constituida por el modo incremental con el incremento
255, para la que se define una distancia de desconexión especial.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2845

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Reglas para la distancia de desconexión
● La distancia de desconexión positiva y la distancia de desconexión negativa no tienen por
qué estar dispuestas de forma simétrica en torno al destino. Los valores pueden ser muy
distintos.
● La distancia de desconexión debe ser mayor que la mitad de la zona de destino.
● Entre el punto de desconexión y el destino se debe seleccionar una distancia que permita
que el accionamiento se detenga dentro de la zona de destino.
● El punto de desconexión y el inicio de la zona de destino se encuentran a una distancia
temporal de al menos 8 ms entre sí.
La figura siguiente muestra la ubicación de las zonas de cambio de velocidad en torno al
destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR











2EMHWLYR







)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






①
②
③
④
⑤
⑥

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‐
tiva
Distancia de desconexión positiva/negativa

⑦
⑧

Zona de destino

⑨

Punto de desconexión

Punto de cambio de velocidad

Zona de parada

Si desea obtener más información sobre la disposición de las áreas, consulte "Zonas y puntos
de conexión del módulo de posicionamiento".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa
Rango de valores admisible:
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

2846

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir la aproximación al destino
Definir zona de destino
Zona de destino
El módulo de posicionamiento crea un área simétrica alrededor de cada destino: la zona de
destino. Dentro de esta área es preciso que el valor real se encuentre en una aproximación al
destino.
Una especificación de valor "0 "desconecta la tolerancia en la aproximación al destino. La
velocidad al alcanzar el destino debe ser entonces inferior a la velocidad de parada
(Página 2849) parametrizada.

Reglas para la zona de destino
● La zona de destino está situada de forma simétrica en torno al destino.
● Una especificación de valor "0 "desconecta la vigilancia de la zona de destino.
La figura siguiente muestra la ubicación de las zonas en torno al destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR










2EMHWLYR








)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






①
②
③
④
⑤
⑥

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‐
tiva
Distancia de desconexión positiva/negativa

⑦
⑧

Zona de destino

⑨

Punto de desconexión

Punto de cambio de velocidad

Zona de parada

Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Zonas y puntos de conexión del módulo de posicionamiento", así como "Fin de un
proceso de posicionamiento (Página 2801)".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2847

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

76.0

TRG_RANGE

DINT

L#1000

Zona de destino
Rango de valores admisible:
● 0 = sin vigilancia
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir tiempo de vigilancia
Tiempo de vigilancia
Durante el tiempo de vigilancia el módulo vigila:
● el movimiento del eje hasta el punto de desconexión.
El tiempo de vigilancia comienza con el inicio de un posicionamiento y se redispara cada
vez que se modifica el valor real en el sentido de la marcha.
Dentro del tiempo de vigilancia, el valor real debe haberse modificado al menos un
incremento (la parte del trayecto de la resolución).
● la aproximación al destino.
El tiempo de vigilancia se redispara por última vez cuando se alcanza el punto de
desconexión.
Dentro del tiempo de vigilancia debe haberse alcanzado la zona de destino.
Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Final de un proceso de posicionamiento (Página 2801)".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

80.0

MON_TIME

DINT

L#2000

Tiempo de vigilancia
Rango de valores admisible:
● 0 = sin vigilancia
● De 1 a 100.000 ms

Tiempo de vigilancia real
Para el tiempo vigilancia es posible predefinir todos los valores a partir del área de valores. El módulo redondea el tiempo
predefinido a un múltiplo de 8 ms (ciclo de módulo).

2848

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir zona de parada
Zona de parada
La zona de parada está situada de forma simétrica en torno al destino correspondiente. En esta
área se vigila si el accionamiento se detiene en una posición de destino alcanzada o si se aleja
de ella. La vigilancia comienza después de que el módulo de posicionamiento ha notificado
"Posición alcanzada" (PEH).
Si la zona de parada se abandona sin una petición de marcha válida, el módulo de
posicionamiento notifica un error.

Reglas para la zona de parada
● La zona de parada está situada de forma simétrica en torno al destino correspondiente:
(Destino – ½ × zona de parada) ≤ destino ≤ (destino + ½ × zona de parada)
● La zona de parada debe ser mayor o igual que la zona de destino.
● Los valores de coordenadas para la zona de parada se encuentran en la zona de trabajo.
● Con el valor "0" se desconecta la vigilancia de parada.
Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Zonas y puntos de conexión del módulo de posicionamiento", así como "Fin de un
proceso de posicionamiento (Página 2801)".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

84.0

ZSPEED_R

DINT

L#1000

Zona de parada
Rango de valores admisible:
● 0 = sin vigilancia
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir velocidad de parada
Velocidad de parada
La velocidad de parada sirve como velocidad de referencia. Si la velocidad real alcanza la
velocidad de parada durante un posicionamiento y el accionamiento se encuentra en la zona
de destino, se notifica el aviso "Posición alcanzada" (PEH). El proceso de posicionamiento
queda correctamente finalizado.
La precisión de posicionamiento aumenta cuando el valor de la velocidad de parada se reduce.
Con el valor "0" se desconecta la vigilancia de parada.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2849

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Final de un proceso de posicionamiento (Página 2801)".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

88.0

ZSPEED_L

DINT

L#30000

Velocidad de parada
Rango de valores admisible:
● 0 = sin vigilancia
● 1 µm/min a 100 000 µm/min

Eje canal n
Definir el tipo de eje
Seleccionar tipo de eje
Tipos de eje
El módulo de posicionamiento puede controlar los siguientes tipos de ejes:
● Eje lineal
El eje lineal es un eje con una zona de desplazamiento físico limitado.

,QLFLRI¯VLFR

)LQI¯VLFR

● Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no está limitada por topes mecánicos.
9DORUP£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

2850

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

12.0

AXIS_TYPE

DINT

L#0

Tipo de eje
Valores permitidos:
● 0 = Eje lineal
● 1 = Eje rotativo

Definir final de carrera por software
Final de carrera por software
Los finales de carrera por software existen sólo para el eje lineal.
El área limitada por el final de carrera por software es la zona de trabajo.
El inicio del final de carrera por software (FCSF) debe ser siempre menor que el fin del final de
carrera por software (SEE).
Los finales de carrera por software se vigilan después de que el eje está sincronizado.
● Si se utiliza un encóder incremental:
La sincronización del eje se alcanza mediante la búsqueda del punto de referencia o la
definición del punto de referencia.
● Si se utiliza un encóder absoluto (SSI):
El eje está sincronizado después de que el módulo ha recibido un telegrama completo y sin
errores para el canal correspondiente.
El encóder absoluto tiene que abarcar por lo menos la zona de trabajo, incluido el final de
carrera por software.

Relación entre la zona de trabajo, el área del encóder y la zona de desplazamiento
● La zona de trabajo es el área que el usuario define para sus tareas mediante los finales de
carrera por software.
● El área del encóder es el área que el encóder cubre claramente. En el caso de un eje lineal
del módulo, el área del encóder se define de forma simétrica por encima de la zona de
trabajo. Es decir, el módulo desplaza el área del encóder de tal modo que las distancias
entre los finales de carrera por software y los finales del área del encóder son iguales en
cada caso (véase la figura inferior).
● La zona de desplazamiento es el rango de valores que puede procesar el módulo de
posicionamiento. La zona de desplazamiento depende de la resolución.
La figura siguiente muestra la relación entre los finales de carrera por software, la zona de
trabajo, el área del encóder y la zona de desplazamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2851

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
=RQDGHWUDEDMR

(MH

)&6,



=RQDGHDOFDQFHGHOHQFµGHU
0DUJHQGHGHVSOD]DPLHQWR
)&6)





Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

64.0

SSW_STRT

DINT

L#-100000000

Inicio del final de carrera por software

68.0

SSW_END

DINT

L#100000000

Fin del final de carrera por software
Rango de valores admisible:
● -1 000 000 000 µm a 1 000 000 000 µm a una
resolución ≥ 1 µm/impulso
● -100.000.000 µm a 100.000.000 µm a una resolución
< 1 µm/impulso

Definir final del eje rotativo
Final del eje rotativo
El valor "Final del eje rotativo" es el valor máximo teórico que el valor real puede alcanzar. Sin
embargo, el máximo valor teórico nunca se indica porque físicamente identifica la misma
posición que el inicio del eje rotativo (0).
El valor más grande que se muestra, en el caso de un eje rotativo, tiene el valor:
Final del eje rotativo [µm] - Resolución [µm / impulso] × 1 [impulso]
Ejemplo: Final del eje rotativo 1000 mm, resolución 1000 µm/impulso
La visualización pasa:
● con un sentido de giro positivo, de 999 mm a 0 mm
● con un sentido de giro negativo, de 0 mm a 999 mm

Eje rotativo con encóders absolutos
En el caso de un eje rotativo con un encóder absoluto, el área del eje rotativo (0 hasta el final
del eje rotativo) tiene que coincidir exactamente con el área de sensor del encóder absoluto:
Fin del eje rotativo [µm] = Número de vuelltas del encóder × Recorrido/vuelta del encóder [µm]

2852

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

16.0

ENDROTAX

DINT

L#100000

Final del eje rotativo
Rango de valores admisible:
● 1 µm a 1.000.000.000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir la búsqueda del punto de referencia
Seleccionar tipo de búsqueda del punto de referencia
Tipo de búsqueda del punto de referencia
Con la función "Tipo de búsqueda del punto de referencia" se determinan las condiciones para
la sincronización del eje:
● El primer dato define el sentido de arranque en el que comienza la búsqueda del punto de
referencia.
● El segundo dato define la posición de la marca cero que conduce a la sincronización, en
referencia con el conmutador de punto de referencia.
Si desea obtener información detallada al respecto consulte Modo de operación "Búsqueda del
punto de referencia" (Página 2810).

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

52.0

REFPT_TYPE

DINT

L#0

Tipo de búsqueda del punto de referencia
Valores permitidos:
● 0 = positivo, conmutador del punto de referencia en el
sentido +
● 1 = positivo, conmutador del punto de referencia en el
sentido ● 2 = negativo, conmutador del punto de referencia en
el sentido +
● 3 = negativo, conmutador del punto de referencia en
el sentido -

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2853

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir coordenada del punto de referencia
Coordenada del punto de referencia
● Encóders inc.:
La coordenada del punto de referencia es necesaria para el modo de operación "Búsqueda
del punto de referencia". Si el eje no está sincronizado después de escribir y activar los
datos máquina, el valor real se establece al valor de la coordenada del punto de referencia.
● Encóder absoluto (SSI)
La coordenada del punto de referencia es necesaria para el ajuste mecánico del encóder.
Consulte al respecto también la descripción del reajuste del encóder absoluto
(Página 2854), en la que se explica la interacción de dicho ajuste con el resto de datos.
El valor de la coordenada del punto de referencia debe encontrarse dentro de la zona de
trabajo:
● Eje lineal
Incluido el final de carrera por software.
● Eje rotativo
Mayor o igual que 0 y menor que el valor "Final del eje rotativo" (0 ≤ Coordenada del punto
de referencia < Final del eje rotativo).

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia
Rango de valores admisible:
● -1 000.000.000 µm a 1.000.000.000 µm a una
resolución ≥ 1 µm/impulso
● -100.000.000 µm a 100.000.000 µm a una resolución
< 1 µm/impulso

Definir el reajuste del encóder absoluto
Calcular reajuste del encóder absoluto
Reajuste del encóder absoluto
El ajuste del encóder absoluto sólo es necesario para un encóder absoluto (SSI).
Con el reajuste del encóder absoluto y las coordenadas del punto de referencia el rango de
valores del sensor se reproduce claramente en el sistema de coordenadas del eje.
Encontrará más información al respecto en "Procedimiento de reajuste del encóder absoluto
(Página 2855)", así como en un ejemplo (Página 2856).

2854

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia
Rango de valores admisible:
● -1.000.000.000 µm a 1.000.000.000 µm a una
resolución ≥ 1 µm/impulso
● -100.000.000 µm a 100.000.000 µm a una
resolución < 1 µm/impulso

48.0

ENC_ADJ

DINT

L#0

Reajuste del encóder absoluto
Rango de valores admisible:
● 0 a (225 - 1)

Procedimiento para un reajuste del encóder absoluto
Determinar el reajuste correcto del encóder absoluto
Tras la primera parametrización hay que llevar a cabo otros pasos para que se establezca una
relación correcta entre el encóder y el sistema de coordenadas. El procedimiento se
representa utilizando el cuadro de diálogo de parametrización.
1. Desplace el eje a un punto definido y reproducible que físicamente sea único.
Puede ser, por ejemplo, el "Fin del final de carrera por software".
2. Llame la petición "Definir punto de referencia (Página 2827)" con la coordenada del punto
definido en 1.
El módulo de posicionamiento determina entonces un valor de encóder para la coordenada
del punto de referencia registrada en el eje en el DB de canal (REFPT): el reajuste del
encóder absoluto. Este valor se puede leer con la petición "Leer datos de encóder
(Página 2835)".
3. Registre el valor leído en el campo "Reajuste del encóder absoluto".
4. Guarde la parametrización en el DB de parámetros correspondiente con la función de
exportación.
5. Cargue los datos de HWCN en la CPU.
6. Para activar los datos, rearranque la CPU.
Nota
Esta sincronización se realiza una vez en la puesta en marcha. Tras una parametrización, el
módulo de posicionamiento queda sincronizado durante el arranque en cuanto se recibe un
telegrama sin errores del encóder.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2855

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Alternativa: Reajuste mecánico de un encóder
También se puede obtener una relación correcta entre el sistema de coordenadas y el encóder
del modo siguiente:
1. Desplace el eje a un punto definido y reproducible que físicamente sea único.
Puede ser, por ejemplo, el "Inicio del final de carrera por software".
2. Introduzca este valor de coordenadas en los datos máquina a modo de "coordenada del
punto de referencia".
3. Lea el valor del encóder que se muestra en esta posición con la petición "Leer datos del
encóder (Página 2835)".
4. Introduzca este valor como reajuste del encóder absoluto en los datos máquina.
Tras la parametrización se mostrará siempre un valor real correcto.
En lugar del paso 3 y 4 también es posible resetear a cero el codificador a través de la opción
"Reset", si está disponible. A continuación, introduzca el valor "0" como reajuste del encóder
absoluto en los datos máquina.

Ejemplo para un reajuste del encóder absoluto
Ejemplo para un reajuste del encóder absoluto
Para este ejemplo se parte de las premisas siguientes:
● Coordenada del punto de referencia = -125 mm
● Área de trabajo de SSW_STRT = -1.000 mm a SSW_END = 1.000 mm
● Reajuste del encóder absoluto = 0
● Área del encóder = 2.048 incrementos con una resolución de 1 mm/impulso
● El encóder absoluto utilizado no permite un ajuste mecánico exacto y tampoco ofrece la
posibilidad de definir el valor del encóder.
La figura siguiente muestra un ejemplo de reajuste del encóder absoluto.

2856

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

GHVHDGR

(MH
9DORUGHOHQFµGHUDEVROXWR

(QFµGHU

9DORUUHDO  






9DORUGHOHQFµGHU



(MH

DFWXDOPHQWH




 



1)

Asignación del sistema de coordenadas a los valores del sensor con el reajuste de encóder
absoluto definido. El valor del encóder 0 equivale al valor real -125.

2)

Asignación deseada del sistema de coordenadas con respecto al encóder. En esta posición, la
coordenada tiene que ser -125.

Resultado tras "Definir el punto de referencia"
Tras "Definir el punto de referencia", la relación es la siguiente:
La coordenada del punto de referencia en el eje (-125) se asigna al valor del encóder calculado
(1798) a partir del reajuste del encóder absoluto. La figura siguiente muestra esta asignación.
$OFDQFHTXHSXHGHFXEULUVHFODUDPHQWHFRQHVWHHQFµGHU

(MH



 






)&6)

9DORUGHOHQFµGHUDEVROXWR

)&6,







9DORUFDOFXODGRGHO
UHDMXVWHGHOHQFµGHU
DEVROXWR




El encóder devuelve 2.048 valores unívocos. La zona de trabajo está definida por el final de
carrera por software. Sin embargo, debido a la resolución seleccionada de 1 mm por impulso,
el encóder puede abarcar una zona de trabajo mayor que la prevista por el final de carrera por
software.
Con la resolución definida, la zona de trabajo está ya cubierta con 2.001 valores. Por ello en
el ejemplo quedan 47 impulsos "sobrantes" dispuestos simétricamente alrededor de la zona de
trabajo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2857

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar velocidad de inicio
Velocidad de inicio en la búsqueda del punto de referencia
Con este dado se selecciona la velocidad para el inicio de una búsqueda del punto de
referencia.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

99.0

REFPT_SPD

BOOL

TRUE

Velocidad de inicio en la búsqueda del punto de refe‐
rencia
Valores permitidos:
● 0 = Marcha rápida
● 1 = Marcha lenta

Definir la distancia mínima entre bordes
Distancia mínima entre bordes
Con el dato máquina "Distancia mínima entre bordes" se define un rango tras la detección del
inicio de la medición en una captura de bordes. Si el final del proceso de medición se encuentra
dentro de este rango, la medición se desestima.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

4.0

EDGEDIST

DINT

L#0

Distancia mínima entre bordes
Rango de valores admisible:
● 0 a 1.000.000.000 µm a una resolución ≥ 1 µm/
impulso
● 0 a 100.000.000 µm a una resolución < 1 µm/impulso

Encóder del canal n
Seleccionar tipo de señal
Tipo de señal
El encóder da información de recorrido al módulo, el cual la evalúa y la convierte en un valor
real con la resolución.

2858

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Es posible seleccionar un tipo de señal de uno de los encóders siguientes:
● Encóder incremental de 5 V
Seleccione el tipo de señal "5 V Señal diferencial" si utiliza un encóder incremental de 5 V
con señales diferenciales A, /A, B, /B y N, /N.
● Encóder incremental de 24 V
Seleccione el tipo de señal "24 V pista A+B desfasado" si desea utilizar un encóder
incremental de 24 V con las señales A*, B* y N*.
● Encóder absoluto (SSI)
Seleccione el tipo de señal "SSI absoluto" si desea utilizar un encóder absoluto con una
interfaz en serie.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

20.0

ENC_TYPE

DINT

L#1

Tipo de señal
Valores permitidos:
● 1 = 5 V Señal diferencial
● 2 = 24 V pista A+B desfasado
● 3 = SSI longitud del telegrama 13 bits 1)
● 4 = SSI longitud del telegrama 25 bits 1)
● 5 = SSI longitud del telegrama 14 bits 1)
● 6 = SSI longitud del telegrama 15 bits 1)
● 7 = SSI longitud del telegrama 16 bits 1)
● :
● :
● 14 = SSI longitud del telegrama 23 bits 1)
● 15 = SSI longitud del telegrama 24 bits 1)

1)

La selección de la longitud del telegrama se realiza en el cuadro de diálogo "SSI".

Seleccionar sentido de contaje
Sentido de contaje
Con el dato máquina "Sentido de contaje" se adapta el sentido de la captura del recorrido al
sentido del movimiento del eje. Para ello, tenga en cuenta todos los sentidos de giro de los
elementos de transmisión (como p. ej., acoplamientos y engranajes).
● normal = los impulsos de contaje adelantes (encóder incremental) o valores del sensor
(encóder absoluto) equivalen a los valores de posición real ascendentes
● invertida = los impulsos de contaje adelantes (encóder incremental) o valores del sensor
(encóder absoluto) equivalen a los valores de posición real descendentes

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2859

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

59.0

CNT_DIR

BOOL

FALSE

Sentido de contaje
Valores permitidos:
● 0 = normal
● 1 = invertida

Definir resolución
Definir recorrido por vuelta del encóder
Recorrido por vuelta del encóder
Con el dato máquina "Recorrido por vuelta del encóder" se indica al módulo de
posicionamiento qué recorrido realiza el sistema de accionamiento en cada vuelta.
El valor "Recorrido por vuelta del encóder" depende de la estructura del eje y del modo en que
está colocado el encóder. Debe tener en cuenta todos los elementos de transmisión, como
acoplamientos o engranajes. La figura siguiente muestra dos disposiciones de encóder
distintas a modo de ejemplo.

0RWRU

(QFµGHU

0RWRU

5HGXFWRUHV

(QFµGHU

5HGXFWRUHV

La relación entre los datos máquina "Recorrido por vuelta del encóder" e "Incrementos por
vuelta del encóder" se describe en el apartado Resolución (Página 2862).

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

24.0

DISP_REV

DINT

L#80000

Recorrido por vuelta del encóder
Rango de valores admisible:
● 1 µm a 1.000.000.000 µm

2860

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir incrementos por vuelta del encóder
Incrementos por vuelta
El dato máquina "Incremento por vuelta del encóder" indica la cantidad de incrementos que
proporciona un encóder en cada vuelta. A partir de este valor y del dato máquina "Recorrido
por vuelta del encóder", el módulo de posicionamiento calcula la resolución (Página 2862).
Encóder incremental
Como entrada es posible indicar cualquier valor dentro del rango de valores. El módulo evalúa
los incrementos en múltiplos de 4.
Encóder absoluto
Para los límites debe diferenciarse entre los distintos modelos de encóder. Como entrada se
permiten sólo valores en potencias de 2.
● Encóder monovuelta (número de vueltas = 1) con longitud del telegrama de 13 bits:
– valor mínimo = 4
– valor máximo = 8192
● Encóder multivuelta (número de vueltas > 1) con longitud del telegrama de 25 bits:
– valor mínimo = 4
– valor máximo = 8192
● Encóder monovuelta (número de vueltas = 1) con longitud del telegrama de 25 bits:
– valor mínimo = 4
– valor máximo = 225
Las medidas lineales se parametrizan como encóder multivuelta tal como se indica a
continuación:
● Incrementos por vuelta del encóder = 8192
● Número de vueltas x 8192 ≥ Número de pasos de la medida lineal

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

32.0

INC_REV

DINT

L#500

Incrementos por vuelta del encóder
Rango de valores admisible:
● 1 a 225

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2861

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Resolución
Resolución
La resolución indica el desplazamiento que corresponde s un impulso. Es una medida de la
exactitud del posicionamiento y determina también la zona de desplazamiento máximo posible
del módulo de posicionamiento.
Para calcular la resolución (RES) se procede tal como se indica en la tabla siguiente:

Valores de
entrada

Encóder incremental

Encóder absoluto

● Recorrido por vuelta del encóder

● Recorrido por vuelta del encóder

● Incrementos por vuelta del encóder:

● Incrementos por vuelta del encóder:

–

Evaluación cuádruple

–

1 Incremento = 4 Impulsos

Cálculo

–

1 Incremento = 1 Impulso

7UD\HFWR
5(6

9XHOWDGHOHQFµGHU
,PSXOVRV
9XHOWDGHOHQFµGHU

Nota
Todos los datos de posición se redondean al múltiplo entero de la resolución. De este modo es
posible diferenciar entre los valores introducidos y los utilizados.

Rango de valores de la resolución
El sistema de medida seleccionado determina el margen de valores de la resolución.
Sistema de
medición

Datos en ...

Rango de valores de la resolución

mm

10-3 mm

0,1 × 10-3 … 1000 × 10-3 mm/impulso

pulgadas

10-4 pulgadas

0,1 × 10-4 … 1000 × 10-4 pulgada/impulso

grados

10 grados

0,1 × 10-4 … 1000 × 10-4 grados/impulso

10-3 grados

0,1 × 10-3 … 1000 × 10-3 grados/impulso

10 grados

0,1 × 10-2 … 1000 × 10-2 grados/impulso

-4

-2

2862

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo
● Un encóder incremental tiene los datos siguientes:
– Incrementos por vuelta del encóder: 5000
– Recorrido por vuelta del encóder: 1.000 mm
– 1 Incremento = 4 Impulsos
De ello resulta la resolución (evaluación cuádruple):
5HVROXFLµQ

PP
LQFUHPHQWRV




PP
,QFUHPHQWR



PP
LPSXOVRV

PP
,QFUHPHQWR



PP
,PSXOVR

PP
,PSXOVR

● Un encóder SSI tiene los datos siguientes:
– Incrementos por vuelta del encóder: 4096
– Recorrido por vuelta del encóder: 1.000 mm
– 1 Incremento = 1 Impulso
De ello resulta la resolución:
5HVROXFLµQ

PP
LQFUHPHQWRV



Dependencia entre la zona de desplazamiento y la resolución
La zona de desplazamiento está limitada por la representación numérica en el módulo de
posicionamiento. Esta representación numérica varía en función de la resolución. Por ello, al
definir valores hay que procurar mantenerse siempre dentro de los límites admitidos.
La zona de desplazamiento máxima se muestra en la tabla siguiente:
Resolución (RES) dentro del margen

Zona de desplazamiento máxima

0,1 µm/impulso ≤ RES < 1 µm/impulso

-108 µm a 108 µm (-100 m a +100 m)

1 µm/impulso ≤ RES ≤ 1000 µm/impulso

-109 µm a 109 µm (-1000 m a +1000 m)

Datos para el encóder absoluto
Número de vueltas del encóder
Número de vueltas del encóder
El dato máquina "Número de vueltas del encóder" sólo existe en encóders absolutos. Con él
se indica el número de vueltas posibles con este encóder.
El total de pasos del encóder no es un dato máquina. Se calcula del modo siguiente:
Total de pasos = Incremento por vuelta x Número de vueltas

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2863

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.0

NO_REV

DINT

L#1

Número de vueltas del encóder
Rango de valores admisible:
● 1 (encóder monovuelta)
● 2 a 4096 en potencias de 2 (encóder multivuelta)

Velocidad de transferencia
Velocidad de transferencia
Con el dato máquina "Velocidad de transferencia" se define la velocidad de transferencia de
datos del encóder SSI al módulo de posicionamiento.
La velocidad de transferencia máxima depende de la longitud del cable:
● 320 m → 125 kHz
● 160 m → 250 kHz
● 63 m → 500 kHz
● 20 m → 1000 kHz

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

40.0

BAUDRATE

DINT

L#0

Velocidad de transferencia
Valores permitidos:
● 0 = 125 kHz
● 1 = 250 kHz
● 2 = 500 kHz
● 3 = 1000 kHz

Longitud de telegrama
Longitud de telegrama
Con la "Longitud de telegrama" se define el marco de impulsos que emite el módulo de
posicionamiento.
Se permite una longitud de telegrama de 13 bits a 25 bits.

Datos utilizados en el DB de parámetros
La longitud de telegrama seleccionada aquí se dispone en el DB de parámetro con el
dato ENC_TYPE (Página 2858).

2864

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Paridad
Paridad
Con la "Paridad" se define si para el encóder absoluto no debe transferirse ninguna paridad o
si debe transferirse una paridad par o impar.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

28.0

PARITY

DINT

L#0

Paridad
Valores permitidos:
● 0 = ninguno
● 1 = paridad par (even)
● 2 = paridad impar (odd)

Seleccionar vigilancia
Vigilancia
Rotura de hilo
Con la activación de la vigilancia, el módulo de posicionamiento vigila todos los conductos en
un encóder incremental de 5 V y un encóder absoluto. La vigilancia detecta:
● Rotura de hilo
● Cortocircuito de los distintos cables
● Distancia entre flancos de los impulsos de contaje (también en un encóder incremental de
24 V)
Para la monitorización en un encóder incremental de 24 V es preciso ajustar un tiempo de
monitorización MON_TIME (Página 2848) > 0.
En encóders incrementales de 5 V sin marca cero es preciso desactivar la monitorización de
rotura de hilo o bien interconectar las señales N y /N de forma externa.
Error de telegrama
El módulo monitoriza el telegrama de un encóder absoluto (SSI) para:
● ver si hay errores del bit de inicio y del bit de parada
La monitorización de errores de telegrama en los encóders absolutos (SSI) no puede
desactivarse.
Impulsos erróneos (encóder incremental)
Entre dos marcas cero consecutivas, un encóder incremental siempre tiene que proporcionar
el mismo número de incrementos.
El módulo de posicionamiento comprueba si la marca cero de un encóder incremental aparece
en el estado adecuado del encóder.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2865

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En el caso de encóders sin marca cero es preciso desactivar la monitorización de los impulsos
de error.
Igualmente es preciso desactivar la monitorización de rotura de hilo o bien interconectar las
entradas de marca cero N y /N de forma externa.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

63.0

MON_WIRE

BOOL

TRUE

1 = Rotura de hilo

63.1

MON_FRAME

BOOL

TRUE

1 = Error de telegrama (tiene que ser siempre 1)

63.2

MON_PULSE

BOOL

TRUE

1 = Impulsos de error

Vigilancias:

Incremento del canal n
Definir incrementos
Definición
Los incrementos son destinos especificados que pueden ser controlados por el módulo de
posicionamiento en el modo de operación "Modo incremental relativo" o "Modo incremental
absoluto".

Área posible para los incrementos
El destino al que tiene que realizarse una aproximación tiene que encontrarse al menos a
media zona de destino delante del final de carrera por software correspondiente. La figura
siguiente muestra los límites de una especificación del incremento.
]RQDGHGHVWLQR

)&6,

2EMHWLYR

=RQDGHWUDEDMR

]RQDGHGHVWLQR



2EMHWLYR

)&6)

UHDHQODTXHVHHQFXHQWUDHOREMHWLYR

(QHVWD£UHDGHOD]RQDGHWUDEDMRQRSXHGHKDEHUQLQJ¼QREMHWLYR

2866

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Número de incremento 1 a 100
Número de incremento 1 a 100
Tiene la posibilidad de insertar un máximo de 100 incrementos en una tabla, que son válidas
tanto el modo de operación "Modo incremental relativo" como para el "Modo incremental
absoluto".
Tenga en cuenta que el módulo de posicionamiento para el "Modo incremental relativo" no
soporta valores negativos. Los valores son interpretados por el módulo de posicionamiento en
función del sentido de movimiento como diferencia positiva o negativa.
Nota
La entrada se realiza en la unidad del sistema de medida ajustado. Tenga en cuenta en este
caso sobre todo las posiciones decimales.
Ejemplo de números:
● Incremento: 800 mm
● Sistema de medida: 10-3 mm
● Entrada en el DB de parámetros: 800000
Recomendación: En la tabla de incrementos defina áreas separadas para incrementos
relativos y absolutos.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (incremento 1 a 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (incremento 1 a 100)

36.6

TRGL1RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 1 (incremento 1 a 50)

36.7

TRGL2RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 2 (incremento 1 a 100)

valor inicial

Comentarios

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

120.0

TRGL1.TRG[1]

DINT

L#0

Número de incremento 1

.

.

.

.

.

.

.

.

.

.

.

.

.

.

316.0

TRGL1.TRG[50]

L#0

Número de incremento 50

DINT

320.0

TRGL2.TRG[51]

DINT

L#0

Número de incremento 51

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

516.0

TRGL2.TRG[100]

DINT

L#0

Número de incremento 100

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Tabla de incrementos 1

Tabla de incrementos 2

2867

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Número de incremento 252
Número de incremento 252
El número de incremento 252 ofrece la posibilidad de mover primero el accionamiento sin
destino (marcha sin fin) y, si se produce un evento externo en la entrada digital xI3, permite
realizar un posicionamiento en el destino parametrizado (incremento).
Para las distancias de cambio de velocidad y de desconexión, las entradas del DB de
parámetros tienen validez para este incremento.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para número de incre‐
mento 252 ó 254

96.0

TRG252_254

DINT

L#0

Incremento para número de incremento 252 ó
254

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa

Número de incremento 254
Número de incremento 254
Independientemente de la tabla de incrementos, es posible utilizar el número de incremento
254 como otra especificación del recorrido. Para las distancias de cambio de velocidad y de
desconexión, las entradas del DB de parámetros tienen validez para este incremento.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para número de incre‐
mento 252 ó 254

96.0

TRG252_254

DINT

L#0

Incremento para número de incremento 252 ó
254

2868

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa

Número de incremento 255
Número de incremento 255
Con el número de incremento 255 dispone de otra especificación del recorrido.
Las distancias de desconexión y las distancias de cambio de velocidad se transfieren junto con
el incremento. Al contrario de lo que sucede en otros incrementos, el incremento 255 utiliza los
valores fijados en el DB del canal para la distancia de desconexión y de la distancia de cambio
de velocidad. Las entradas de los datos máquina no tienen validez para este incremento.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.3

TRG255_EN

BOOL

FALSE

1 = Escribir incremento para número de incremento
255

100.0

TRG255

DINT

L#0

Incremento para número de incremento 255

104.0

CHGDIF255

DINT

L#0

Distancias de cambio de velocidad para número de
incremento 255

108.0

CUTDIF255

DINT

L#0

Distancias de desconexión para número de incremen‐
to 255

Interfaz de control y realimentación del FM 451
Aplicación
En aplicaciones especiales o en un nivel de alarma puede que se necesite un acceso
especialmente rápido a señales de realimentación y de control. A estos datos se accede
directamente a través de las áreas de entradas y salidas del módulo.
Para coordinar el arranque cada vez que arranca el módulo (p. ej. tras insertar el módulo o
después de una transición STOP-RUN de la CPU), la instrucción ABS_CTRL debe llamarse
hasta que se muestre el final del arranque a través de RETVAL = 0. A continuación la
instrucción ABS_CTRL ya no puede utilizarse.
Nota
No es posible utilizar la instrucción ABS_CTRL en combinación con un acceso de escritura.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2869

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Leer señales de realimentación mediante acceso directo
Las direcciones de byte se indican de forma relativa respecto a la dirección de inicio de las
salidas del canal correspondiente. Los nombres de los parámetros corresponden a los
nombres del DB de canal.
Dirección inicial del canal 1 = Dirección inicial del módulo
Dirección inicial del canal 2 = Dirección inicial del módulo + 8
Dirección inicial del canal 3 = Dirección inicial del módulo + 16
En AWL se accede a los datos con los comandos PEB (leer 1 byte), PEW (leer 2 bytes) y PED
(leer 4 bytes).
La siguiente tabla muestra la asignación de la interfaz de realimentación (entradas) del FM 451.
Direc‐
ción

Número de bit
7

6

5

4

interno

3

2

1

0

Byte 0

PARA

interno

DATA_ERR

OT_ERR

DIAG

interno

interno

Byte 1

CHGOVER

CUTOFF ZSPEED

SPEED_OUT

0

WAIT_EI

WORKING

ST_ENBLD

POS_RCD

0

0

GO_M

MSR_DONE

SYNC

Byte 2
Byte 3

MODE_OUT
FVAL_DONE

Byte 4

GO_P
ACT_POS

Byte 5
Byte 6
Byte 7

Ejemplo: Valor real de posición ACT_POS
La dirección inicial del módulo es 512.
AWL

Descripción

L PED 516

//Leer valor real de posición actual (ACT_POS) del canal 1
//con acceso directo:
//Dirección inicial del canal + 4

Escribir las señales de control mediante acceso directo
Las direcciones de byte se indican de forma relativa respecto a la dirección inicial de las
entradas del canal correspondiente. Los nombres de los parámetros corresponden a los
nombres del DB de canal.
Dirección inicial del canal 1 = Dirección inicial del módulo
Dirección inicial del canal 2 = Dirección inicial del módulo + 8
Dirección inicial del canal 3 = Dirección inicial del módulo + 16
En AWL se accede a los datos con los comandos PAB (escribir 1 byte), PAW (escribir 2 bytes)
y PAD (escribir 4 bytes).

2870

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La siguiente tabla muestra la asignación de la interfaz de control (salidas) del FM 451.
Direc‐
ción

Número de bit
7

6

5

4

3

2

1

0

Byte 0

0

0

0

0

OT_ERR_A

0

0

0

Byte 1

DRV_EN

SPEED252

0

0

DIR_P

DIR_M

STOP

START

Byte 2

MODE_IN

Byte 3

MODE_TYPE

Byte 4

Reservado

Byte 5
Byte 6
Byte 7

Ejemplo: Señales de inicio del canal 2
La dirección inicial del módulo es 512.
AWL

Descripción

L 2#10001000

//Poner DRV_EN y DIR_P a 1

T PAB 521

//Escribir señales con acceso directo para canal 2:
//Dirección inicial del módulo + 8 + 1

Vías de transferencia de parámetros
Se entiende por parámetros los datos máquina y los incrementos que se indican a
continuación.
La figura siguiente muestra las vías de transferencia de parámetros al FM x51.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2871

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
3*3&
RIIOLQH

&38
RQOLQH

0µGXORGHSRVLFLRQDPLHQWR

E
6RIWZDUHGH
FRQILJXUDFLµQ




'%GH
SDU£PHWURV

D
D
E



'%GH
SDU£
PHWURV






3URJUDPDGH
XVXDULR




&RQILJ+:

$%6B&75/




3DU£PHWURV
'DWRVGH
VLVWHPD 6'%

D

'DWRVGH
VLVWHPD 6'%



1

Guardar los parámetros en el software de configuración.

2

Guardar y compilar la configuración hardware.

2a

Cargar configuración hardware en la CPU. La CPU ejecuta automáticamente el paso 3.

3

La CPU escribe los parámetros en el módulo en parametrizaciones de sistema.

4

Cargar los parámetros de un canal del módulo en la programadora con el comando "Cargar sistema de destino en
programadora".

5

Cargar parámetros del software de configuración con el comando "Cargar sistema de destino" en un canal del módulo.

6

Escribir parámetros en un canal del módulo con peticiones del programa de usuario.

7

Leer parámetros desde un canal del módulo a través de peticiones del programa de usuario.

8

Almacenar parámetros del programa de usuario en el DB Online.

9

Leer parámetros del DB Online en el programa de usuario.

10

Exportar parámetros del software de configuración al DB Offline.

10a

Cargar DB offline en la CPU.

10b

Exportar parámetros del software de configuración al DB Online.

11

Importar parámetros del DB Offline en el software de configuración.

11a

Cargar parámetros del DB Online en la programadora.

11b

Importar parámetros del DB Online en el software de configuración.

2872

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Casos de aplicación de la transferencia de parámetros
Caso de aplicación

Pasos

Los parámetros se editan con el software de configuración.
A continuación, los canales del módulo sólo pueden para‐
metrizarse de forma automática en el momento del arran‐
que.

Ejecute los pasos 1, 2 y 2a.

Los parámetros se modifican durante la puesta en servicio
en el modo de prueba en el software de configuración.

Ejecute los pasos 4 y 5.

A continuación, los parámetros modificados durante la
puesta en servicio se tienen que cargar automáticamente
durante el arranque.

Ejecute los pasos 1, 2 y 2a.

Los parámetros se crean con el software de configuración.
Los canales del módulo sólo pueden parametrizarse con el
programa de usuario a través de bloques de datos.

Ejecute los pasos 10, 10a y 6 y o 10b y 6.

Desea crear datos de reserva para recetas de forma cómo‐ Ejecute los pasos 10 y 10a.
da.
Los parámetros se crean con el software de configuración. Ejecute los pasos 1, 2 y 2a para la para‐
Éstos tienen que estar a disposición del programa de usua‐ metrización automática.
rio para realizar modificaciones provisionales.
Ejecute los pasos 10, 10a, 9, 8 y 6 para el
acceso por medio del programa de usua‐
rio.
Los parámetros existentes se modifican exclusivamente
con el programa de usuario.

Ejecute los pasos 7, 9, 8 y 6.

Desea ver los datos modificados por el programa de usuario Ejecute los pasos 11a y 11 o sólo 11b.
con el software de configuración.
Los parámetros modificados por el programa de usuario se Ejecute los pasos 11b u 11a, 11 y, des‐
tienen que cargar automáticamente también en el arranque. pués, 1, 2 y 2a.

6.3.6.5

Uso del FM 451 desde el programa de usuario

Inclusión del FM 451 en un programa de usuario
Para integrar el FM 451 en un programa de usuario, pueden utilizarse instrucciones que le
facilitarán en lo posible el manejo de las funciones deseadas:
Las instrucciones ABS_INIT y ABS_CTRL o ABS_CTRL_451 se activan en el programa de
usuario de la CPU. Éstas realizan la comunicación entre la CPU y el FM 451.
Si integra la instrucción ABS_CTRL en el proyecto, el DB de canal se creará automáticamente
como DB de instancia en la instrucción ABS_CTRL.
Si integra la instrucción ABS_CTRL_451 en el proyecto, entonces deberá insertar en su
programa como DB de canal un bloque de datos del tipo ABS_CHANTYPE mediante "Bloques
de programa > Agregar bloque".
Todos los datos de parámetros pertenecientes a un canal del módulo (datos máquina, tablas
de incrementos) se encuentran en el DB de parámetros del módulo. Inserte un bloque de datos
del tipo ABS_PARATYPE en el proyecto mediante "Bloques de programa > Agregar bloque".
Además, para el FM 451 se puede utilizar también la instrucción ABS_DIAG o
ABS_DIAG_451, que permite transferir informaciones de diagnóstico al DB de diagnóstico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2873

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si integra la instrucción ABS_DIAG en el proyecto, el DB de diagnóstico se creará
automáticamente como DB de instancia en la instrucción ABS_DIAG.
Si integra la instrucción ABS_DIAG_451 en el proyecto, entonces deberá insertar en el
programa como DB de diagnóstico un bloque de datos del tipo ABS_DIAGTYPE mediante
"Bloques de programa > Agregar bloque".

Puesta en servicio del módulo
Incluso sin programa de usuario es posible realizar un primer test del módulo con el cuadro de
diálogo "Puesta en servicio". Tenga en cuenta particularmente la advertencia siguiente.
ADVERTENCIA
Se pueden producir daños personales y materiales.
Para evitar daños personales y materiales observe los puntos siguientes:
● Instale un interruptor de PARADA DE EMERGENCIA en las inmediaciones del equipo.
Sólo así puede garantizarse que en caso de un fallo del software o del equipo sea posible
desconectar la instalación de modo seguro.
● Instale finales de carrera por hardware que actúen directamente en las etapas de potencia
de todos los accionamientos.
● Asegúrese de que ninguna persona tenga acceso al área de la instalación donde hay
piezas en movimiento.
● Si controla y vigila paralelamente el FM 451 desde el programa y desde el cuadro de
diálogo "Puesta en servicio" pueden producirse conflictos cuyos efectos no están
definidos. Por lo tanto, conmute siempre la CPU al estado STOP cuando trabaje con el
cuadro de diálogo "Puesta en servicio" o bien desactive su programa.

6.3.6.6

Puesta en servicio del FM 451

6.3.6.7

FM 451: Diagnóstico online

Información actual sobre el módulo
Diagnóstico estándar
Indicación de errores mediante los diodos de error del FM 451
¿Dónde se indica el error?
Los diodos rojos de error del módulo indican diferentes estados de error. Los LED se
encienden también en caso de errores que aparecen brevemente, por lo menos, durante 3 s.

2874

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En la figura siguiente se muestra la posición de los diodos de error en el FM 451.
,17)
(;7)

¿Qué errores se indican?
La tabla siguiente contiene los tipos de error que se indican mediante los diodos de error.
LED

Significado

Explicación

INTF

Error de grupo para
errores internos

Este diodo indica los siguientes estados de error del FM 451:
● una avería de módulo;
● un error (de canal) interno;
● El FM 451 no está configurado. Configure el módulo.
Para eliminar el error, ver Clases de error (Página 2882).

EXTF

Error de grupo para
errores externos

Este diodo indica un error (de canal) externo.

Diagnóstico específico de canal
Disparo de alarmas de diagnóstico
Procesamiento de las alarmas
El módulo de posicionamiento puede activar alarmas de diagnóstico. Estas alarmas se
procesan en un OB de alarma. Cuando se dispara una alarma sin que se encuentre cargado
el OB correspondiente, la CPU pasa a STOP.
Para habilitar las alarmas de diagnóstico se procede del modo siguiente:
1. Seleccione el módulo en HWCN.
2. Habilite la alarma de diagnóstico en "Edición > Propiedades del objeto > Parámetros
básicos".
3. Guardar y compilar la configuración.
4. Cargue la configuración en la CPU

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2875

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Visión de conjunto de las alarmas de diagnóstico
Los eventos y errores siguientes disparan una alarma de diagnóstico:
● Fallo operativo
● Datos máquina erróneos
● Error de diagnóstico
Estos errores se describen con detalle en el apartado "Clases de error (Página 2882)".

Reacción del módulo de posicionamiento en caso de error con alarma de diagnóstico
● El posicionamiento se interrumpe.
● Con las alarmas de diagnóstico siguientes se borra la sincronización:
– Falta conector frontal, falta tensión auxiliar externa para la alimentación del encóder
– se ha detectado un error de señal cero, error de línea (señales de encóder de 5 V)
– se ha rebasado la zona de desplazamiento (se notifica con un error de operador)
– Ajustar valor real no se puede ejecutar (se notifica con un error de operador)
● Las señales de control START, DIR_P y DIR_M dejan de procesarse excepto en un caso.
Excepción:
Si se produce un error de operador sigue siendo posible un modo Jog en el sentido de la
zona de trabajo.
● El selector de función y las peticiones se siguen procesando.

El módulo de posicionamiento detecta un fallo ("entrante")
Una alarma de diagnóstica es "entrante" cuando por lo menos hay un error en cola de espera.
Si no se han solventado todos los errores, los demás que queden en cola de espera, se
notificarán de nuevo como "entrantes".
Secuencia:
1. El módulo de posicionamiento detecta uno o varios errores y dispara una alarma de
diagnóstico. Uno de los LEDs "INTF" o "EXTF" se enciende. El error se registra en el búfer
de diagnóstico.
2. El sistema operativo de la CPU solicita el OB de alarma de diagnóstico, por ejemplo, OB 82.
3. Es posible evaluar la información de inicio del OB 82.
4. Con el parámetro OB82_MOD_ADDR se lee qué módulo ha disparado la alarma.
5. Encontrará más información si llama la instrucción ABS_DIAG o ABS_DIAG_451.

El módulo de posicionamiento detecta el paso al estado libre de fallos ("saliente")
Una alarma sólo es "saliente" cuando se ha eliminado el último error del módulo.

2876

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Secuencia:
1. El módulo de posicionamiento detecta que todos los fallos han sido eliminados y dispara
una alarma de diagnóstico. El LED "INTF" o "EXTF" está apagado. El búfer de diagnóstico
no se modifica.
2. El sistema operativo de la CPU solicita el OB de alarma de diagnóstico, por ejemplo, OB 82.
3. Con el parámetro OB82_MOD_ADDR se lee qué módulo ha disparado la alarma.
4. Evalúe el bit OB82_MDL_DEFECT.
Si este bit es "0", no hay errores en el módulo. Su evaluación puede finalizar aquí.

Alarmas de diagnóstico según el estado de la CPU
● En estado STOP de la CPU las alarmas de diagnóstico están bloqueadas por el módulo de
posicionamiento.
● Si con la CPU en estado STOP no se eliminan todos los errores pendientes, el módulo
vuelve a notificar como "entrantes" los errores todavía no eliminados tras la transición al
estado RUN.
● Si se eliminan todos los errores pendientes con la CPU en estado STOP, el estado libre de
errores del módulo no se notificará con una alarma de diagnóstico tras la transición al
estado RUN.

Evaluación de errores en el programa de usuario
Reacción a errores en el programa de usuario
En el programa de usuario es posible reaccionar de forma precisa a los errores que aparecen.
Para ello se dispone de los siguientes recursos:
● Los valores de retorno RET_VAL de las instrucciones integradas:
Este valor se vuelve a calcular cada vez que se llama la instrucción.
RET_VAL = -1 es un indicador de grupo para un error síncrono en una petición o en la
comunicación con el módulo.
● A cada petición le corresponde un bit de error _ERR como indicador de grupo de un error
de la petición o de uno de sus predecesores en la cadena de peticiones:
El bit de errores se activa para una petición de escritura y sus peticiones de continuación
si el módulo notifica un error de datos o si se produce un error de comunicación.
En el caso de peticiones de lectura, el bit de error se establece para la petición afectada
cuando se ha producido un error de comunicación.
La instrucción ABS_CTRL o ABS_CTRL_451 activa de nuevo los bits de error después del
procesamiento de una petición. No obstante, estos deben ser retomados por el programa
de usuario para una evaluación de errores.
● La señal de realimentación DATA_ERR como indicador de grupo de un error que el módulo
ha detectado durante una petición de escritura. La señal se vuelve a calcular en la siguiente
petición de escritura.
● La señal de realimentación OT_ERR (error de operador) como indicador de grupo de un
error que el módulo ha detectado al iniciar un recorrido. El bit de error tiene que ser acusado
mediante el OT_ERR_A = 1, una vez solucionada la causa.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2877

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● La señal de realimentación DIAG se activa cuando el contenido del búfer de diagnóstico se
ha modificado. Esta señal puede aparecer más tarde que las señales DATA_ERR y
OT_ERR.
● El error de comunicación JOB_ERR contiene el código de error (Página 2881) si existe un
problema de comunicación entre la instrucción y el módulo. El valor se recalcula después
de procesar una petición y se crea en el DB del canal con la instrucción ABS_CTRL o
ABS_CTRL_451 o en el DB de diagnóstico con la instrucción ABS_DIAG o ABS_DIAG_451.
● La instrucción ABS_DIAG o ABS_DIAG_451 para leer el búfer de diagnóstico del módulo.
Aquí es posible averiguar las causas de error para eventos síncrono y asíncronos.
● Las alarmas de diagnóstico para la respuesta rápida a los eventos en el OB de la alarma de
diagnóstico (por ejemplo, OB 82).

Evaluación de una alarma de diagnóstico en el programa de usuario
Las siguientes entradas en los datos locales del OB de la alarma de diagnóstico (por ejemplo,
OB 82) son activadas por el módulo de posicionamiento. Los errores se introducen en el búfer
de diagnóstico (clase de error 128 (Página 2889)).
Dirección

Nombre

Tipo

Comentarios

0.0

OB82_EV_CLASS

BYTE

Clase de evento e identificadores:
B#16#38: evento saliente
B#16#39: evento entrante

1.0

OB82_FLT_ID

BYTE

Código de error (B#16#42)

2.0

OB82_PRIORITY

BYTE

Clase de prioridad:
B#16#1A en estado operativo RUN
B#16#1C en estado operativo ARRANQUE

3.0

OB82_OB_NUMBR

BYTE

Número de OB (82)

4.0

OB82_RESERVED_1

BYTE

Reservado

5.0

OB82_IO_FLAG

BYTE

Módulo de entrada: B#16#54

6.0

OB82_MDL_ADDR

INT

Dirección básica lógica de la tarjeta en la que se
ha producido el error.

8.0

OB82_MDL_DEFECT

BOOL

Fallo del módulo

8.1

OB82_INT_FAULT

BOOL

Error interno

8.2

OB82_EXT_FAULT

BOOL

Error externo

8.3

OB82_PNT_INFO

BOOL

Error de canal existente

8.4

OB82_EXT_VOLTAGE

BOOL

Falta tensión auxiliar externa

...

no utilizado

10.3

OB82_WTCH_DOG_FLT

BOOL

Activación de la vigilancia de tiempo

...

no utilizado

12.0

OB82_DATE_TIME

DATE_AND_TIME

Fecha y hora en la que se ha solicitado el OB

2878

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Búfer de diagnóstico del módulo
Eventos de diagnóstico
El búfer de diagnóstico del módulo contiene como máximo 9 eventos de diagnóstico y está
organizado como búfer anular.
Un evento de diagnóstico se escribe en el búfer cuando se detecta un aviso (de error)
"entrante". Esto puede ser un aviso, un error síncrono (error de datos, fallo de operador) o
incluso un error asíncrono (error de servicio y error de diagnóstico). De una causa de un error
pueden surgir también varias entradas como errores consiguientes. Los avisos salientes no
generan entradas en el búfer de diagnóstico.
Para cada evento de diagnóstico se indican:
● Estado (siempre entrante)
● Error interno
● Error externo
● Clase de error
● Número de error
● Número de canal
● Número de incremento (en errores de la tabla de incrementos)
Cuando se escribe un evento de diagnóstico en el búfer de diagnóstico, la señal de
realimentación DIAG = 1 se activa en todos los canales parametrizados.
El búfer de diagnóstico puede transferirse como un todo con la instrucción ABS_DIAG o
ABS_DIAG_451 a un bloque de datos (DB de diagnóstico) o visualizarse a través de un cuadro
de diálogo de evaluación de errores del software de configuración. Si se lee el búfer de
diagnóstico, el módulo activa la señal de realimentación DIAG = 0.
Nota
Si el búfer de diagnóstico se lee al mismo tiempo con la instrucción ABS_DIAG o
ABS_DIAG_451 y el cuadro de diálogo de evaluación de errores, puede ocurrir que uno de los
eventos de diagnóstico que se ha producido no sea detectado por el programa.

Datos y estructura del DB de diagnóstico
Datos y estructura del DB de diagnóstico
Nota
Los datos que no se indican en esta tabla no deben ser modificados.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2879

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra la estructura del DB de diagnóstico.
Dirección

Nombre

Tipo

valor inicial

Comentarios

0.0

MOD_ADDR

INT

0

Dirección del módulo

256.0

JOB_ERR

INT

0

Número de error del error de comunicación

258.0

JOBBUSY

BOOL

FALSE

1 = Petición activa

258.1

DIAGRD_EN

BOOL

FALSE

1 = Leer el búfer de diagnóstico necesariamente

260.0

DIAG_CNT

INT

0

Número de entradas válidas de la lista

262.0

DIAG[1]

STRUCT

Entrada más reciente de datos de diagnóstico

272.0

DIAG[2]

STRUCT

Segunda entrada de datos de diagnóstico

282.0

DIAG[3]

STRUCT

Tercera entrada de datos de diagnóstico

292.0

DIAG[4]

STRUCT

Cuarta entrada de datos de diagnóstico

302.0

DIAG[5]

STRUCT

Quinta entrada de datos de diagnóstico

312.0

DIAG[6]

STRUCT

Sexta entrada de datos de diagnóstico

322.0

DIAG[7]

STRUCT

Séptima entrada de datos de diagnóstico

332.0

DIAG[8]

STRUCT

Octava entrada de datos de diagnóstico

342.0

DIAG[9]

STRUCT

Novena entrada de datos de diagnóstico

La tabla siguiente muestra la estructura de una entrada de diagnóstico DIAG[n].
Dirección
+0.0

Nombre
STATE

Tipo
BOOL

valor inicial
FALSE

Comentarios
0 = Evento saliente
1 = Evento entrante

+0.1

INTF

BOOL

FALSE

1 = Error interno

+0.2

EXTF

BOOL

FALSE

1 = Error externo

+2.0

FCL

INT

0

Clase de error:
1: Fallo operativo
2: Error de operador
4: Error de datos
5: Error de datos máquina
6: Error de las tablas de incrementos
15: Avisos
128: Error de diagnóstico

+4.0

FNO

INT

0

Número de error

+6.0

CH_NO

INT

0

Número de canal

+8.0

TRG_NO

INT

0

Número de incremento

2880

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Lista de los avisos JOB_ERR
Avisos JOB_ERR
JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

80A0

32928

-32608

Acuse negativo al leer del módulo. Módulo extraído durante la lectura o mó‐
dulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el módulo. Módulo extraído durante la escritura
o módulo defectuoso.

80A2 1)

32930

-32606

Error de protocolo para capa 2

80A3 1)

32931

-32605

Error de protocolo en User-Interface / User

80A4 1)

32932

-32604

Fallo en la comunicación del bus K

80B0

32944

-32592

Registro de datos/Petición desconocida.

80B1

32945

-32591

Indicación de longitud errónea. Parámetro FM_TYPE del DB de canal para el
módulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no está ocupado.

80B3

32947

-32589

El tipo de módulo real no es igual al tipo de módulo previsto.

80C0 1)

32960

-32576

El módulo aún no tiene preparados los datos que hay que leer.

80C1 1)

32961

-32575

Los datos de una petición de escritura semejante todavía no se han proce‐
sado en el módulo.

80C2 1)

32962

-32574

El módulo procesa de instante el número máximo posible de peticiones.

80C3

1)

32963

-32573

Los recursos necesarios (memoria, etc.) están ocupados de momento.

80C4

1)

32964

-32572

Error de comunicación

80C5 1)

32965

-32571

La periferia descentralizada no está disponible.

80C6 1)

32966

-32570

Cancelación de las clases de prioridad (rearranque normal o en segundo
plano)

8522

34082

-31454

DB del canal o DB de parámetros demasiado corto. No se pueden leer los
datos del DB. (petición de escritura).

8532

34098

-31438

El número de DB del DB de parámetros es demasiado grande. (petición de
escritura).

853A

34106

-31430

DB de parámetros no presente. (petición de escritura).

8544

34116

-31420

Error en el enésimo (n > 1) acceso de lectura a un DB tras aparecer un error
(petición de escritura).

8723

34595

-30941

DB del canal o DB de parámetros demasiado corto. No se pueden escribir los
datos en el DB. (petición de lectura).

8730

34608

-30928

DB de parámetros protegido contra escritura en la CPU No se pueden es‐
cribir los datos en el DB (petición de lectura)

8732

34610

-30926

El número de DB del DB de parámetros es demasiado grande. (petición de
lectura).

873A

34618

-30918

DB de parámetros no presente. (petición de lectura).

8745

34629

-30907

Error en el enésimo (n > 1) acceso de escritura a un DB tras aparecer un error
(petición de lectura).

1)

Los errores 80A2 a 80A4 así como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de espera sin la
intervención del usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2881

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Clases de fallos
Fallo operativo
Clase de error 1: Fallo operativo
Los fallos operativos se detectan de forma asíncrona respecto a un control. Los fallos
operativos hacen que se cancele el posicionamiento a excepción del número de error 9. El
número de error 9 hace que se desactive el posicionamiento.
La tabla siguiente muestra los fallos operativos posibles y sus causas.
Nº

Significado

Alarma de diag‐
nóstico

1

Rebase del final de carrera por software Inicio

Sí

Causa
2

Causa
3

Modificación del valor real > ½ zona de parada en el sentido erróneo.
Sí

No hay modificaciones del valor real o modificación del valor real en contra del
sentido nominal dentro del tiempo de vigilancia.
Sí

En "Ajustar valor real a vuelo" se ha rebasado el destino.
Sí

La zona de destino se ha rebasado después de la aproximación al destino.
Sí

El eje oscila en el punto de cambio de velocidad.
Sí

El eje oscila en el punto de desconexión/punto de inversión
Sí

El eje oscila en la zona de destino.

Modificación mayor que la mitad de la zona del eje rotativo
Causa

2882

Sí

Inicio de la zona de destino conectado de forma errónea
Causa

14

El valor real se encuentra fuera de la zona de parada.

Punto de desconexión conectado de forma errónea
Causa

13

Sí

Punto de cambio de velocidad conectado de forma errónea
Causa

12

La zona de destino no se ha alcanzado dentro del tiempo de vigilancia.

Rebasar zona de destino
Causa

11

Sí

Rebasar destino (FM 451)
Causa

10

Rebasar el límite de la zona de desplazamiento (las coordenadas de los límites de
la zona de desplazamiento pertenecen a la zona de desplazamiento).

Falta modificación del valor real o es demasiado reducida
Causa

9

Sí

Acoplamiento conjunto
Causa

8

Rebasar el límite de la zona de desplazamiento (las coordenadas de los límites de
la zona de desplazamiento pertenecen a la zona de desplazamiento).

Abandonar zona de parada
Causa

7

Sí

Error en la aproximación al destino
Causa

6

El valor real se encuentra fuera de la zona de de trabajo.

Rebase del fin de la zona de desplazamiento
Causa

5

Sí

Rebase del inicio de la zona de desplazamiento
Causa

4

El valor real se encuentra fuera de la zona de trabajo.

Rebase del final de carrera por software Fin

Sí

La velocidad/frecuencia es muy alta o existen saltos erróneos del valor real.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

15

Modificación mayor que la zona del eje rotativo

Sí

Causa
16

La velocidad/frecuencia es muy alta o existen saltos erróneos del valor real.

Incremento para número de incremento 252 no transferido (FM 451)
Causa

17

No se ha transferido el incremento.

Incremento para número de incremento 252 no aproximable (FM 451)
Causa

18

Sí
Sí

La distancia entre la posición real actual y el incremento especificado es inferior a
la distancia de cambio de velocidad o la distancia de desconexión.

Incremento erróneo para el número de incremento 252 (FM 451)
Causa

Sí

El incremento se encuentra fuera de la zona de trabajo.

Error de operador
Clase de error 2: Error de operador
Los errores de operador se detectan al cambiar las señales de control en el área de datos de
usuario. Los fallos de operador producen una desactivación del posicionamiento.
La tabla siguiente muestra los errores de operador posibles y sus causas.
N.º

Significado

Alarma de diag‐
nóstico

1

Modo de operación no admisible

no

Causa
3

Causa
4

El modo de operación seleccionado no está permitido.

Petición de interfaz no permitida
La señal seleccionada no está permitida en este modo de operación.

Parámetro erróneo del modo de operación
Causa

no
no

● En el modo de operación "Jog" la velocidad especificada es distinta de la
velocidad rápida o la velocidad lenta.
● En el modo de operación "Modo incremental" el incremento es distinto de 1 a
100 o distinto de 252, 254 y 255.

5

Habilitación de inicio no existente
Causa

7

8

10

no

El modo de operación "Modo incremental" sólo es posible con un eje ya sincroni‐
zado.

Destino/Parte del trayecto no posicionable
Causa

no

No se han parametrizado datos máquina para el eje o se han parametrizado datos
erróneos.

El eje no está sincronizado.
Causa

no

El destino especificado o calculado se encuentra fuera de los finales de carrera por
software.

Eje no parametrizado
Causa

9

Habilitación al iniciar no existente

El destino/La zona de destino se encuentra fuera de la zona de trabajo.
Causa

no

no

La distancia entre la posición real actual y el destino especificado es inferior a la
distancia de desconexión.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2883

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N.º

Significado

Alarma de diag‐
nóstico

17

La búsqueda del punto de referencia no es posible

no

Causa
18

Causa
19

no

El incremento no es válido.

La distancia de desconexión no es mayor que ½ de la zona de destino en el número de incremento no
255
Causa

20

Se ha conectado un encóder SSI.

El modo incremental relativo o absoluto no es posible

La distancia de desconexión para el incremento 255 es inferior a la mitad de la zona
de destino.

Desplazamiento no permitido en el sentido especificado
Causa

no

La distancia del final de carrera por software es insuficiente.

Error de datos
Clase de error 4: Error de datos
Los errores de datos se detectan de forma síncrona respecto a un control/mando. Los datos de
errores no producen ninguna respuesta al error.
La tabla siguiente muestra los errores de datos posibles y sus causas.
Nº

Significado

6

Incremento especificado demasiado grande
Causa

Alarma de diag‐
nóstico
no

El valor está fuera de ±100 m ó ±1000 m. El recorrido / destino no puede ser
superior a la zona de desplazamiento.
En un eje rotativo la coordenada debe ser ≥ 0 e inferior al final del eje rotativo.

10

Decalaje de señal cero erróneo (FM 451)
Causa

no

El decalaje de señal cero es mayor que ± 100 m o ± 1.000 m.
Los finales de carrera por software, tras ajustar el decalaje de señal cero, se en‐
cuentran fuera de la zona de desplazamiento (100 m...+100 m o -1.000 m...+1.000
m).
Eje rotativo: El valor del decalaje de señal cero es mayor que el final del eje rotativo.

11

Indicación del valor real errónea
Causa

no

Eje lineal: La coordenada se encuentra fuera del final de carrera por software actual
(que puede estar desplazado).
Eje rotativo: La coordenada es < 0 o mayor que el final del eje rotativo.

12

Punto de referencia erróneo
Causa

no

Eje lineal: La coordenada se encuentra fuera del final de carrera por software actual
(que puede estar desplazado).
Eje rotativo: La coordenada es < 0 o mayor que el final del eje rotativo.

20

Activar datos máquina no admisible
Causa

27

Ajuste codificado en bits no permitido
Causa

2884

no

En el módulo no hay datos máquina nuevos sin errores.
no

Los bits no utilizados y no descritos aquí son distintos a 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

29

Codificación de bits no permitida

no

Causa
34

Causa
36

Los bits no utilizados y no descritos aquí son distintos a 0.

No es posible cancelar la activación del valor real

no

Con un encóder SSI y un eje lineal, tras la ejecución del ajuste el valor real de
posición se encontraría fuera de la zona de trabajo.

Distancia de cambio de velocidad errónea en número de incremento 255
Causa

no

El valor se encuentra fuera del margen numérico permitido ±100 m o ±1000 m.
En un eje rotativo la coordenada debe ser ≥ 0 e inferior al final del eje rotativo.

37

Distancia de desconexión errónea en número de incremento 255
Causa

no

El valor se encuentra fuera del margen numérico permitido ±100 m o ±1000 m.
La distancia de desconexión es menor que la distancia de cambio de velocidad.

107

Eje no parametrizado
Causa

108

no

En el eje no hay ningún dato máquina o los datos no están activados.

El eje no está sincronizado.
Causa

no

Uno de las peticiones "Ajustar valor real" y "Cancelar preselección del valor real" se
ha activado a pesar de que el eje no está sincronizado.

Error de datos máquina
Clase de error 5: Error de datos máquina
La alarma de diagnóstico sólo se disparará con un bloque de datos del sistema (SDB) con
errores. Los errores de datos máquina no producen ninguna respuesta al error.
La tabla siguiente muestra errores de datos máquina posibles y sus causas.
Nº

Significado

Alarma de diag‐
nóstico

5

Error en el ajuste de la alarma de proceso

Sí

Causa
6

Causa
7

11

Sí

El valor del final del eje rotativo se encuentra fuera del rango admitido de 1 a 109 µm
o respectivamente de 1 a 108 µm (según sea la resolución).
Sí

El valor del tipo de encóder se encuentra fuera del rango admisible de 1 a 4.

Recorrido erróneo por vuelta de encóder
Causa

Sí

Como tipo de eje no ha indicado ni 0 ni 1.

Tipo de encóder erróneo
Causa

Sí

El valor del sistema de medida se encuentra fuera del rango admisible de 1 a 4 y 6.

Final erróneo del eje rotativo
Causa

10

Ha indicado como distancia mínima entre bordes un valor < 0 ó > 10 µm.

Tipo de eje erróneo
Causa

9

Sí
9

Sistema de medida erróneo
Causa

8

Ha intentado seleccionar una alarma de proceso que el módulo no soporta.

Distancia mínima entre bordes errónea (FM 451)

Sí

El valor del recorrido/vuelta del encóder se encuentra fuera del rango admisible de
1 a 109 µm (independientemente de la resolución).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2885

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

13

Número erróneo de incrementos por vuelta del encóder(véase el apartado "Incrementos por
vuelta del encóder (Página 2861)")

Sí

14

Número erróneo de vueltas (véase el apartado ""Número de vueltas de encóder (Página 2863)") Sí

15

Velocidad de transferencia errónea
Causa

16

Sí

Para la velocidad de transferencia se ha indicado un valor fuera del rango admisible
de 0 a 3.

Coordenada del punto de referencia errónea
Causa

Sí

La coordenada se encuentra fuera del margen de -100 m a +100 m o, respectiva‐
mente, de -1000 m a +1000 m (según la resolución).
Eje lineal: La coordenada se encuentra fuera de la zona de trabajo.
Eje rotativo: La coordenada es mayor que el final del eje rotativo o < 0.

17

Calibración errónea del encóder absoluto
Causa

18

Sí

Se ha indicado un valor por fuera de los valores admisibles 0, 1, 2 y 3.

Sentido de contaje erróneo
Causa

20

Encóder de recorrido SSI: El valor del reajuste del encóder absoluto no se encuen‐
tra dentro del rango del encóder (incrementos por vuelta del encóder × cantidad de
vueltas - 1).

Tipo erróneo de búsqueda del punto de referencia
Causa

19

Sí

Sí

Se ha indicado un valor por fuera de los valores admisibles 0 y 1.

Vigilancia de hardware no posible
Causa

Sí

Se ha puesto en "FALSE" la monitorización de errores de telegrama en el DB de
parámetros.
En el encóder utilizado, la vigilancia de impulsos erróneos no es posible. Desactive
el parámetro MON_PULSE.

21

Inicio erróneo del final de carrera por software
Causa

Sí

Eje lineal: El inicio del final de carrera por software se encuentra fuera de la zona de
desplazamiento (-100 m...+100 m o 1000 m...+1000 m, dependiendo de la resolu‐
ción).
Eje lineal: El inicio del final de carrera por software (dado el caso, incluido un de‐
calaje de señal cero presente) es menor que -100 m o -1000 m (según la resolu‐
ción).

22

Fin erróneo del final de carrera por software
Causa

Sí

Eje lineal: El fin del final de carrera por software se encuentra fuera de la zona de
desplazamiento (-100 m...+100 m ó 1000 m...+1000 m, dependiendo de la resolu‐
ción) o es menor que el inicio del final de carrera por software.
Eje lineal: El fin del final de carrera por software (dado el caso, incluido un decalaje
de señal cero presente) es mayor que +100 m ó +1000 m (según la resolución).

23

Velocidad máxima errónea
Causa

24

Sí

Los datos no mostrados en el DB de parámetros tienen que ser 0.

Zona de destino errónea
Causa

Sí

Eje lineal: Zona entre 0 y 100 m ó 1000 m, según la resolución.
Eje rotativo: Zona superior al final del eje rotativo.

25

Tiempo de vigilancia erróneo
Causa

2886

Sí

El valor del tiempo de vigilancia se encuentra fuera del rango admisible de 0 a
100 000 ms.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

26

Zona de parada errónea

Sí

Causa

Eje lineal: Zona entre 0 y 100 m o 1000 m, según la resolución.
Eje rotativo: Zona superior al final del eje rotativo.

127

Velocidad de parada errónea
Causa

128

Modo de control erróneo
Causa

129
130

Sí

Como velocidad de inicio no ha indicado ni 0 ni 1.

Distancia de cambio de velocidad errónea en el sentido +
Causa

Sí

Para el modo de control se ha indicado un valor que está fuera del rango admisible
de 1 a 4.

Velocidad de inicio errónea para la búsqueda del punto de referencia
Causa

Sí

El valor de la velocidad de parada se encuentra por fuera del rango admisible de 0
a 100 000 µm/min.

Sí

Eje lineal: Zona entre 0 y 100 m o 1000 m (según la resolución).
Eje rotativo: Zona superior al final del eje rotativo e inferior a la mitad de la zona de
destino.

131

Distancia de cambio de velocidad errónea en el sentido Causa

Sí

Eje lineal: Zona entre 0 y 100 m ó 1000 m (según la resolución).
Eje rotativo: Zona superior al final del eje rotativo e inferior a la mitad de la zona de
destino.

132

Distancia de desconexión errónea en el sentido +
Causa

133

Distancia de desconexión errónea en el sentido Causa

200

Sí

La distancia de desconexión es mayor que la distancia de cambio de velocidad
negativa, inferior a la mitad de la zona de destino, o se encuentra fuera del margen
admisible entre 0 y 100 m o 1000 m (según resolución).

Resolución errónea
Causa

Sí

La distancia de desconexión es mayor que la distancia de cambio de velocidad
positiva, inferior a la mitad de la zona de destino, o se encuentra fuera del margen
admisible entre 0 y 100 m o 1000 m (según resolución).

Sí

Ha indicado una resolución < 0,1 µm/impulso o >1000 µm/impulso.
Ha indicado un recorrido/vuelta y una cantidad de impulsos/vuelta que dan una
resolución < 0,1 ó > 1000.

201

El encóder no se adapta a la zona de trabajo / área del eje rotativo
Causa

Sí

Encóder SSI y eje rotativo: El encóder no cubre exactamente el área del eje rotativo.
Eje lineal: El encóder no cubre ni siquiera la zona de trabajo (finales de carrera por
software incluidos).

Error de las tablas de incrementos
Clase de error 6: Error de las tablas de incrementos
Los errores de tablas de incrementos no producen ninguna respuesta al error.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2887

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los posibles errores de tablas de incrementos y sus causas.
Nº

Significado

Alarma de diag‐
nóstico

6

Incremento especificado demasiado grande en la tabla de incrementos

no

Causa

El valor está fuera de ±100 m ó ±1000 m. El recorrido / destino no puede ser superior
a la zona de desplazamiento.
En un eje rotativo, la coordenada debe ser ≥ 0 e inferior al final del eje rotativo.

Avisos
Clase de error 15: Avisos
Los avisos no producen ninguna respuesta al error.
La tabla siguiente muestra los avisos posibles y sus causas.
Nº

Significado

1

Inicio de parametrización
Causa

2

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.
no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.

Distancia insuficiente del principio de la zona de destino
Causa

2888

no

Distancia insuficiente del punto de desconexión
Causa

15

no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.

Distancia insuficiente del punto de inversión
Causa

14

no

El módulo ha procesado sin problemas la parametrización mediante un bloque de
datos del sistema.

Distancia insuficiente del punto de cambio de velocidad
Causa

12

no

El módulo ha detectado una parametrización mediante un bloque de datos del siste‐
ma.

Final de la parametrización
Causa

11

Alarma de diag‐
nóstico

no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error de diagnóstico
Clase de error 128: Error de diagnóstico
La tabla siguiente muestra los errores de diagnóstico posibles y sus causas, así como los
efectos y las soluciones posibles.
Nº

Significado

Alarma de diag‐
nóstico

4

Falta tensión auxiliar externa

Sí

Causa

● La tensión auxiliar externa de 24 V no se ha conectado o ha fallado
● El fusible del módulo está defectuoso.
● Tensión insuficiente
● Rotura de hilo de masa
● Cortocircuito (p. ej. en el encóder conectado)

Efecto

● El posicionamiento se cancela en todos los canales
● Desactivar las salidas
● Eliminación de la sincronización en encóders incrementales cuando falta la
tensión auxiliar para la alimentación del encóder
● El módulo de posicionamiento no está parametrizado
● Borrado de la habilitación de inicio

Solución
5

Comprobar que la conexión de 24 V sea correcta (si la conexión de 24 V es correcta,
el módulo está averiado).

Falta conector frontal (FM 451)
Causa

El conector frontal del módulo de posicionamiento no está insertado

Efecto

● Falta tensión auxiliar externa de 24 V

Sí

● El módulo no está listo para funcionar
Solución
51

Enchufar el conector frontal en el módulo de posicionamiento

La vigilancia de tiempo (watchdog) ha reaccionado
Causa

Sí

● Interferencias fuertes en el módulo de posicionamiento
● Error en el módulo de posicionamiento

Efecto

● El módulo se resetea
● Desactivar todas las salidas
● Siempre que tras el reseteado del módulo no se detecte ningún defecto en el
módulo, este vuelve a estar listo para funcionar.
● El módulo notifica el transcurso de la vigilancia del tiempo (watchdog) con
"entrante" y "saliente"

Solución

● Eliminación de interferencias
● Consulte al departamento comercial correspondiente cuando las circunstancias
exactas que han dado lugar al error son de mayor entidad.
● Cambio del módulo de posicionamiento

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2889

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

144

Rotura de hilo Encóder

Sí

Causa

● El cable del encóder no está enchufado o está cortado
● Encóder sin señales de cuadratura
● Asignación de pines incorrecta
● Longitud de cable excesiva
● Cortocircuito de las señales del encóder
● Errores de flancos de las señales de encóder
● Máxima frecuencia de entrada de la entrada del encóder sobrepasada
● Corte de la alimentación del encóder

Efecto

● El posicionamiento se interrumpe
● Desactivar las salidas
● Borrado de la sincronización, con encóders incrementales
● Borrado de la habilitación de inicio

Solución

● Comprobar el cable del encóder
● Guardar los datos técnicos del encóder
● La vigilancia puede desactivarse de forma provisional con el cuadro de diálogo
de parametrización bajo la responsabilidad del operador.
● Guardar las especificaciones técnicas del módulo

145

Error de telegrama Encóder absoluto
Causa

Sí

El tráfico de telegramas entre el módulo de posicionamiento y el encóder absoluto
(SSI) tiene errores o está interrumpido:
● El cable del encóder no está enchufado o está cortado
● Tipo de encóder erróneo
● Encóder mal configurado (encóders programables)
● Longitud de telegrama mal indicada
● El encóder proporciona valores erróneos (encóder defectuoso)
● Interferencia en el cable del sistema de medición
● Velocidad de transferencia escogida demasiado alta
● Tiempo monoestable del encóder superior a 64 µs

Efecto

● El posicionamiento se interrumpe
● Desactivar las salidas
● Borrado de la habilitación de inicio

Solución

● Comprobar el cable del encóder
● Comprobar el encóder
● Comprobar el tráfico de telegramas entre el encóder y el módulo de
posicionamiento

2890

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

146

Pulsos erróneos (encóder incremental)

Sí

Causa

● Vigilancia del encóder ha detectado pulsos erróneos
● El número de incrementos por vuelta está mal introducido
● Encóder defectuoso: no proporciona el número de impulsos indicado
● Marca cero errónea o no presente
● Interferencias en el cable del encóder

Efecto

● El posicionamiento se interrumpe
● Desactivar las salidas
● Borrado de la habilitación de inicio

Solución

● Indicar correctamente el número de incrementos/vuelta del encóder (cuadro de
diálogo de parametrización)
● Comprobar el encóder y su cable
● Cumplir las normas de apantallamiento y de conexión a tierra
● La vigilancia puede desactivarse de forma provisional con el cuadro de diálogo
de parametrización bajo la responsabilidad del operador.

6.3.7

Uso del ET 200S 1PosU

6.3.7.1

Asignación de terminales del 1PosU

Reglas de cableado
Al utilizar un encóder de posición con señales diferenciales de 5 V, los cables a los bornes 9
y 13, los bornes 12 y 16, y, en caso de un encóder incremental, los cables a los bornes 11 y 15
deben estar apantallados y trenzados por pares.
Al utilizar un encóder incremental con señales de 24 V, los cables a los bornes 9, 11 y 12 deben
estar apantallados.
La pantalla tiene que hacer contacto por ambos extremos. Para ello se debe usar el elemento
de contactado de pantallas (ver el anexo de las instrucciones de servicio Sistema de periferia
descentralizada ET 200S (http://support.automation.siemens.com/WW/view/es/1144348)).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2891

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de terminales
La tabla siguiente muestra la asignación de terminales para el 1PosU.
Vista

Asignación de termi‐
nales

Conexión de los interruptores y
Conexión del encóder de posición,
del accionamiento: Bornes 1 … 8 señales diferenciales de 5 V o seña‐
les de 24 V: Bornes 9 … 16

3268QLYHUVDO
'LJLWDO
6)






83

Observaciones

'1
326

1: IN0

Final de carrera -

9: A/D

5: IN1

Final de carrera +

13: /A / /D

2: IN2

Leva reductora; se‐ 10: DC 24 V
ñal de congelación

6: DC 24 V

Alimentación para
los interruptores

14: M

3: OUT0

Desplazamiento
negativo o bien
marcha rápida

11: B

7: 2L+

Alimentación de la
tensión de carga
para OUT0, OUT1
y OUT2

15: /B

4: OUT1

12: N/C
Desplazamiento
positivo o bien mar‐
cha lenta

8: OUT2

16: /N / /C
Marcha rápida/
lenta o bien despla‐
zamiento positivo/
negativo

(6'/$%


$'



 

 

$'



 

 

0



 


 

%





 



 

'&9

%
1&

(QF

Pista A/datos del en‐
códer SSI
Alimentación para el
encóder de posición

Pista B

Pista N/reloj SSI (lí‐
nea reloj)

1&

Conexión de relés y contactores a las salidas digitales
Nota
La conexión directa de inductancias (p. ej. de relés y contactores) es posible sin cableado
externo. Si los circuitos de salida SIMATIC pueden desactivarse mediante contactos montados
adicionalmente (p. ej. contactos de relé), en caso de inductancias deberá prever unos
dispositivos de protección contra sobretensión adicionales (ver el siguiente ejemplo de la
protección contra sobretensión).

2892

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo de protección contra sobretensión
La figura siguiente muestra un circuito de salida que hace necesarios dispositivos adicionales
de protección de sobretensión. Las bobinas con mando por corriente continua se conectan con
diodos normales o diodos Zener.
6DOLGDGLJLWDOSHM287

6DOLGDGLJLWDOSHM287

&RQWDFWRHQHOFLUFXLWRGHVDOLGD
&RQGLRGR




6.3.7.2

&RQGLRGR=HQHU




Principios básicos del posicionamiento controlado a través de una marcha rápida/lenta

Proceso de posicionamiento
A partir de la posición de inicio primero se realiza una aproximación al punto de destino a una
velocidad mayor (velocidad rápida). Al llegar a una distancia predeterminada de la posición de
destino (punto de cambio de velocidad), se cambia a una velocidad inferior (velocidad lenta).
Poco antes de que el eje llegue al punto de destino, también a una distancia predefinida con
respecto al punto de destino, el accionamiento se desconecta (punto de desconexión).
El accionamiento se controla mediante salidas digitales a marcha rápida o lenta y en el sentido
correspondiente.
La figura siguiente muestra los puntos de de conmutación y las distancias de cambio de
velocidad. Para simplificar el proceso, el cambio de velocidad se representa a lo largo del
trayecto recorrido.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2893

Control de movimiento

9HORFLGDGUHDO

6.3 Control de movimiento (S7-300, S7-400)

0DUFKDU£SLGD

0DUFKDOHQWD
7UD\HFWR

'LVWDQFLDGHFDPELR
GHYHORFLGDG

3RVLFLµQLQLFLDO

3XQWRGHFDPELRGHYHORFLGDG

'LIHUHQFLD
GHGHVFRQ
H[LµQ

3XQWRGHGHVFRQH[LµQ 2EMHWLYR

Definiciones
La tabla siguiente contiene los términos principales para el posicionamiento controlado a
través de la marcha rápida y la marcha lenta.
Término

Explicación

Zona de trabajo

define la zona que se determina para su tarea, con ayuda de los finales de carrera por hardware.
En un encóder SSI, la zona de trabajo se ve limitada además por la zona cubierta por el encóder
SSI:
La zona de alcance del encóder debe especificarse en los parámetros
● Impulsos por vuelta del encóder y
● número de vueltas.
Impulsos por vuelta del encóder = impulsos por vuelta × vueltas
Zona máxima de trabajo:
● Eje lineal máx. 0 hasta (área del encóder – 1)
● Eje rotativo de 0 a (área del encóder – 1)
En los encóders incrementales, la zona de trabajo está limitada a:
● máx. 0 hasta 16 777 215 pasos para eje lineal
● 0 hasta fin parametrizado del eje rotativo configurado para eje rotativo

Distancia de cambio de
velocidad

Define la distancia con respecto al punto de destino a la que el accionamiento cambia la velo‐
cidad de velocidad rápida a velocidad lenta.

Punto de cambio de velo‐
cidad

Define la posición en la que el accionamiento cambia la velocidad de velocidad rápida a veloci‐
dad lenta.

Distancia de desconexión define la distancia hasta el punto de destino a la que se desconecta el accionamiento.
Si la distancia de desconexión ≥ distancia de cambio de velocidad, no existe punto de cambio de
velocidad. No se cambia la velocidad de velocidad rápida a velocidad lenta.
Punto de desconexión

Define la posición en la que el accionamiento se desconecta.
El 1PosU indica en este punto el final de la marcha.

2894

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Término

Explicación

Posición inicial

Define la posición del accionamiento dentro de la zona de trabajo desde la que se inicia la
marcha.
Si la posición inicial se encuentra dentro de la distancia de desconexión, el accionamiento no se
controla. El 1PosU indica en este punto el final de la marcha.
Si la posición de inicio se encuentra dentro de la distancia de cambio de velocidad, la marcha
sólo se produce en velocidad lenta.

Objetivo

Define la posición absoluta o relativa del eje a la que se llega en el posicionamiento.
El punto de destino es la posición de un eje que debe alcanzarse con una marcha.
En una marcha absoluta se define el punto de destino directamente desde el programa de
control.
En una marcha relativa el punto de destino se calcula a partir de la posición inicial y del trayecto
predeterminado en el programa de control.
Para determinar la precisión con la que ha alcanzado el punto de destino debe comparar el valor
real con los datos de la posición.

Eje lineal

Define el tipo de eje con zona de trabajo limitada.
Está limitado por:
● la zona del encóder
● el margen numérico representable (0 hasta 16 777 215 pasos)
● Fin de carrera por hardware

Eje rotativo

Define el tipo de eje con zona de trabajo ilimitada.
La posición del eje se pone de nuevo a 0 tras un giro (final parametrizado del eje rotativo para
encóder incremental o zona del encóder parametrizada para encóder SSI).

Sentido -

Si el accionamiento se mueve en sentido negativo, el valor real indicado se reduce.

Sentido +

Si el accionamiento se mueve en sentido positivo, el valor real indicado aumenta.

6.3.7.3

Funciones del 1PosU

Sinopsis de las funciones
Resumen
El 1PosU proporciona las siguientes funciones para mover los ejes:
● Detener (Página 2901)
● Jog (Página 2902)
● Búsqueda del punto de referencia (Página 2904)
● Posicionamiento relativo (Página 2910)
● Posicionamiento absoluto (Página 2912)
Además de los tipos de movimiento, el 1PosU dispone de las siguientes funciones:
● Cancelar procesamiento de JOB (Página 2915)
● Ajustar valor real (Página 2916)
● Mover zona de alcance del encóder (Página 2918)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2895

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● Modificar distancia de desconexión (Página 2920)
● Modificar distancia de cambio de velocidad (Página 2921)
● Evaluar señal de búsqueda de referencia (Página 2922)
● Función congelar (latch) (Página 2924)
● Ajustar vigilancia de sentido de giro (Página 2925)
● Mostrar valores actuales (Página 2927)
● Detección de fallos/Diagnóstico (Página 2929)
● Comportamiento en caso de STOP de la CPU/del maestro (Página 2936)

Parámetro
En los parámetros se definen una única vez los valores relacionados con accionamiento, eje
y encóder.

Modo de dosificación
Al usar encóders incrementales es posible utilizar 1PosU para dosificar. El modo de
dosificación se ajusta en los parámetros. En el modo de dosificación, el 1PosU sólo evalúa la
señal de encóder A (/A). El valor real se incrementa con cada flanco ascendente.
En el modo de dosificación sólo están disponibles las funciones "Jog" y "Posicionamiento
relativo" para el control de las salidas digitales.
La propia dosificación se lanza mediante la función "Posicionado relativo". La cantidad de
dosificado se predetermina durante el inicio a través de la interfaz de control (parte del
trayecto).
Cada vez que se inicia, el valor real se ajusta a 0 y las salidas digitales se controlan en función
de la distancia de cambio de velocidad y de desconexión.

Funcionamiento del 1PosU
La figura siguiente muestra el funcionamiento del 1PosU.

2896

6H³DOHVGHFRQWURO

'2'2'2
)XQFLRQHVGHO
3RV8

6H³DOHVGHUHVSXHVWD

',',',
6H³DOHVGHOVHQVRU

(MHDFFLRQDPLHQWR
6HQVRU

3URJUDPDGHFRQWURO
PHGLDQWH02'(V\-2%V

3DU£PHWUR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Interfaces con el programa de control y con el eje
Para ejecutar la función, el 1PosU, como interfaz con el eje, dispone de entradas digitales,
señales de encóder para la conexión de un encóder y salidas digitales para controlar el
accionamiento.

Inicio de tipos de movimiento (MODEs)
Los tipos de movimiento (MODEs) se controlan y observan desde el programa de control
mediante señales de control y señales de realimentación.

Inicio de MODEs
La tabla siguiente muestra la forma en la que se inician los MODE, así como la respuesta que
puede tener el 1PosU.
Su acción

Respuesta del 1PosU

Alimente la interfaz de control (Página 2956)
según el MODE con los datos necesarios.
Compruebe si el bit de realimentación (Pági‐
na 2958) es POS_ACK = 0.
Ponga el bit de control START de 0 a 1.

El 1PosU activa el bit de realimentación POS_ACK = 1
y POS_DONE = 0.
A continuación se detecta que el inicio del 1PosU se ha
reconocido y que en el caso de POS_ERR = 0 se eje‐
cuta el MODE.
En el caso de POS_ERR = 1 el MODE no se ejecuta.

Active el bit de control START de 1 a 0.

El 1PosU activa el bit de realimentación POS_ACK = 0.
En las funciones de detención, búsqueda del punto de
referencia, posicionamiento absoluto y posicionamien‐
to relativo, el 1PosU activa el bit de realimentación
POS_DONE = 1 cuando el MODE ha finalizado sin nin‐
gún fallo.
En el caso de POS_ERR = 1 el MODE se finaliza con
un error.

Sólo si POS_ACK = 0 puede iniciar un nuevo MODE.
Si se produce un arranque durante un MODEs en marcha, el 1PosU se encarga del nuevo movimiento
y realiza un cambio de sentido en caso necesario.

La siguiente figura muestra la interacción de las señales de control y realimentación al iniciar
el MODEs.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2897

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

67$57
326B$&.
326B'21(

326B(55

Activación de otras funciones (JOBs)
El resto de funciones (JOBs) se controla y observa desde el programa de control mediante
señales de control y realimentación.

Activación de JOBs
La tabla siguiente muestra la forma en que se inician los JOBs, así como las reacciones que
puede tener el 1PosU.
Su actividad

Reacción del 1PosU

Suministre los datos necesarios a la interfaz
de control (Página 2956) según el JOB.
Compruebe si el bit de realimentación (Pági‐
na 2958) es JOB_ACK = 0.
Ajuste el bit de control JOB_REQ de 0 a 1.

El 1PosU activa el bit de realimentación JOB_ACK = 1.
A continuación se detecta que el inicio del 1PosU ha
sido detectado y que en el caso de JOB_ERR = 0 se
ejecuta el JOB.
● En el caso de "Evaluar señal de referenciación", el
1PosU activa simultáneamente el bit de
realimentación SYNC = 0.
● Para la función de congelación el 1PosU activa
simultáneamente el bit de realimentación
LATCH_DONE = 0.
● Todos los demás JOBs quedan ejecutados.
En el caso de JOB_ERR = 1, el JOB no se ejecuta.

Ajuste el bit de control JOB_REQ de 1 a 0.

El 1PosU activa el bit de realimentación JOB_ACK = 0.
En el caso de "Evaluar señal de referenciación", el 1Po‐
sU activa el bit de realimentación SYNC = 1 tras ejecu‐
tarse la función.
En el caso de congelación el 1PosU activa el bit de rea‐
limentación LATCH_DONE = 1 tras ejecutarse la fun‐
ción.

Sólo si JOB_ACK = 0 podrá iniciarse otro JOB.

2898

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La siguiente figura muestra la interacción de las señales de control y realimentación al activar
JOBs.
-2%B5(4
-2%B$&.
/$7&+B'21(
R
6<1&
-2%B(55

Eje, accionamiento y encóder
Evaluación de las señales del encóder
El 1PosU evalúa las señales suministradas por el encóder en función del tipo de encóder;
● Encóder SSI:
El 1PosU evalúa el valor suministrado por el encóder SSI directamente por pasos y
seguidamente determina el valor real en pasos (valor real = valor del encóder).
El valor real se encuentra dentro del rango del encóder de 0 (número de vueltas × número
de incrementos) – 1. En los límites de la zona de alcance, el 1PosU genera un rebase por
exceso o por defecto del valor real.
● Encóders incrementales:
El 1PosU evalúa cuatro veces los impulsos del encóder y los suma al valor real de forma
específica al sentido. Para todos los recorridos especificados en los parámetros y la interfaz
de control o realimentación deberá tenerse en cuenta esta evaluación cuádruple:
1 impulso del encóder incremental equivale a 4 incrementos del 1PosU.
El valor real se encuentra dentro de la zona de trabajo de 0 … 16 777 215 incrementos. En
los límites de la zona de trabajo el 1PosU genera un rebase por exceso o por defecto del
valor real en la zona de trabajo.
● Encóders incrementales en modo de dosificación:
El 1PosU sólo evalúa los flancos ascendentes de la señal de encóder A y los suma al valor
real.
El valor real se encuentra dentro de la zona de trabajo entre 0 … 16 777 215 incrementos.
En los límites de la zona de trabajo superior, el 1PosU genera un desbordamiento del valor
real.

Control del accionamiento
Las 3 salidas digitales del 1PosU controlan el accionamiento.
La velocidad se selecciona mediante bit de control SPEED (SPEED = 0 es la marcha lenta;
SPEED = 1 es la marcha rápida). La velocidad también puede modificarse durante la marcha.
El cambio de sentido (Página 2944) se controla con el parámetro "Tmin Cambio de sentido".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2899

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El estado de cada una de las salidas puede leerse en la interfaz de realimentación
(Página 2958) (DO 0, DO 1 y DO 2).
La función de las salidas digitales depende del modo de control:
La figura siguiente muestra los estados de las salidas digitales con el modo de control 0.

9HORFLGDGUHDO

'2
'HVSOD]D
PLHQWR
'2
'HVSOD]D
PLHQWR

9HORFLGDG
U£SLGD

'2
9HORFLGDG
U£SLGDOHQWD

9HORFLGDGOHQWD
5HFRUULGR
SRVLWLYR







3RVLFLµQLQLFLDO

3XQWRGHFDPELRGH
YHORFLGDG

3XQWRGH
GHVFRQH[LµQ

3XQWRGHGHVWLQR

9HORFLGDGUHDO

La figura siguiente muestra los estados de las salidas digitales con el modo de control 1.

'2
9HORFLGDGU£SLGD




'2
9HORFLGDGOHQWD




9HORFLGDG
U£SLGD
9HORFLGDGOHQWD
5HFRUULGR
SRVLWLYR

'2

'HVSOD]DPLHQWR  

 
3RVLFLµQLQLFLDO

2900

3XQWRGHFDPELRGH
YHORFLGDG

3XQWRGH
GHVFRQH[LµQ

3XQWRGHGHVWLQR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto de las habilitaciones en función del sentido
Descripción
Los bits de control DIR_M y DIR_P habilitan las salidas digitales en función del sentido.
● Con DIR_M = 1 se desplaza en el sentido negativo.
● Con DIR_P = 1 se desplaza en el sentido positivo.

Interrumpir y continuar la marcha
Si, durante la marcha se resetea la habilitación relevante dependiente del sentido, el
movimiento del eje se detiene, las 3 salidas digitales se ponen a "0" y la marcha se interrumpe.
Si vuelve a activar la habilitación relevante dependiente del sentido, se continúa la marcha.

Detener (MODE 0)
Detener
Si inicia MODE 0, el 1PosU detiene el desplazamiento en curso, las tres salidas digitales se
ponen a "0" y la marcha finaliza (POS_ERR = 0, POS_DONE = 1).
Un marcha finalizada con MODE 0 ya no puede continuarse. Para volver a mover el eje, inicie
un nuevo MODE.

Señales de control
La siguiente tabla muestra los datos relevantes de la función "detener" en la interfaz de control
(Página 2956).
Dirección

Ocupación

Byte 0

Bit 0.7 … 0.4:
Bit

7

6

5

4

0

0

0

0

MODE 0 = Detener

Bit 0: START

Señales de realimentación
La siguiente tabla muestra los datos relevantes de la función "detener" en la interfaz de
respuesta (Página 2958).
Dirección

Ocupación

Byte 0

Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2901

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Jog (MODE 1)
JOG
Con "Jog" se controla el accionamiento directamente a través de los bits de control
(Página 2901)DIR_M o DIR_P en un sentido.
Si inicia MODE 1, el 1PosU mueve el accionamiento con la velocidad predeterminada (bit de
control (Página 2956)SPEED) en el sentido predeterminado (bits de control
(Página 2956)DIR_M o DIR_P).
El accionamiento se detiene activando los bits de control DIR_M = 0 y DIR_P = 0.
Se realiza un cambio de sentido (Página 2944) después de transcurrido el tiempo Tmin.
El modo Jog también puede realizarse en un eje no sincronizado (bit de respuesta SYNC = 0),
si hay un error de encóder existente (bit de respuesta ERR_ENCODER = 1) o si el encóder no
está conectado.
La siguiente figura muestra el desarrollo del modo de movimiento "Jog".
START

DIR_P

DIR_M

SPEED

POS_ACK
POS_DONE

POS_ERR

SYNC

Velocidad rápida
Velocidad lenta

Recorrido

2902

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de control
La siguiente tabla muestra los datos relevantes para la función "Jog" en la interfaz de control
(Página 2956).
Dirección
Byte 0

Ocupación
Bit 0.7 … 0.4:
Bit

7

6

5

4

0

0

0

1

MODE 1 = Jog

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha rápida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START

Señales de realimentación
La siguiente tabla muestra los datos relevantes de la función "Jog" en la interfaz de respuesta
(Página 2958).
Dirección

Ocupación

Byte 0

Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–

0 … Zona del encóder – 1

Causas del error para POS_ERR
Las causas de error deben determinarse con el JOB 15 (Mostrar valores actuales
(Página 2927)).
La tabla siguiente muestra los números relevantes en la función "Jog", con la causa de error
y las posibles soluciones.
Número de
error.

Causa del error

Solución

2

Se indica ERR_2L+

Compruebe la tensión de carga (2L+) en la ter‐
minal 7.

5

El final de carrera en cuyo sentido
se controla el accionamiento está
activo

Revise los encóders y el cableado, así como los
parámetros "DI0 Final de carrera - (Pági‐
na 2940)" y "DI1 Final de carrera + (Pági‐
na 2940)".

7

Jog: DIR_P = 1 del DIR_M = 1

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2903

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Número de
error.

Causa del error

Solución

13

El sentido de giro del accionamien‐ Revise el cableado del accionamiento y el en‐
to y del encóder es diferente
códer, así como el parámetro "Inversión del
sentido de giro (Página 2939)".

15

En el modo de dosificación:
DIR_M = 1

Búsqueda del punto de referencia (MODE 3)
Búsqueda del punto de referencia (MODE 3)
Búsqueda del punto de referencia
La búsqueda del punto de referencia sólo puede iniciarse en el encóder incremental y con un
accionamiento de dosificación no activado.
La búsqueda del punto de referencia permite sincronizar el eje a partir de una señal de
referencia externa. Como señal de búsqueda de referencia puede escoger entre 3 entradas
digitales y la señal cero (Página 2907).
Las entradas digitales DI0 (final de carrera - ), DI1 (final de carrera + ) y DI2 (leva reductora) se
pueden parametrizar como contacto normalmente cerrado o contacto normalmente abierto.
Alimente la interfaz de control (Página 2956) con la coordenada del punto de referencia e inicie
MODE 3. El 1PosU activa la señal de respuesta SYNC = 0 y mueve el accionamiento con la
velocidad predeterminada (bit de control SPEED) hacia el sentido de arranque parametrizado
y busca la señal de referencia. A este respecto, el 1PosU realiza automáticamente el cambio
de sentido necesario en los finales de carrera o en la leva de reducción.
Realice las habilitaciones dependientes del sentido (Página 2901) que sean necesarias
(DIR_M, DIR_P) para que se controle el accionamiento.
Si el 1PosU detecta la señal de búsqueda de referencia parametrizada, controla el
accionamiento con marcha lenta en el sentido de la búsqueda de referencia. Éste se determina
a partir de los parámetros "Señal de búsqueda de referencia" y "Sensor punto de referencia".

Señal de búsqueda
de referencia: Sen‐
sor punto de refe‐
rencia y señal cero
Señal de búsqueda
de referencia: Sen‐
sor de referencia
Señal de búsqueda
de referencia: señal
cero

2904

Sensor de punto
de referencia:
Leva de reducción
en sentido negati‐
vo

Sensor de punto
de referencia:
Leva de reducción
en sentido positivo

Sensor de punto
de referencia:
Final de carrera
negativo

Sensor de punto
de referencia:
Final de carrera
positivo

Sentido de bús‐
queda de referen‐
cia -

Sentido de bús‐
queda de referen‐
cia +

Sentido de bús‐
queda de referen‐
cia +

Sentido de bús‐
queda de referen‐
cia -

El sentido de búsqueda de referencia no está definido. Con la siguiente señal
cero se sincroniza el eje.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Tras rebasar la señal de búsqueda de referencia el eje está sincronizado. El 1PosU activa la
señal de respuesta SYNC = 1 y asigna la coordenada del punto de referencia al valor real.
La figura siguiente muestra el desarrollo del modo de movimiento "Búsqueda del punto de
referencia".
67$57

',5B3

',5B0

63(('
326B$&.
326B'21(

326B(55

6<1&

YHORFLGDGU£SLGD
YHORFLGDGOHQWD
7UD\HFWR

/HYDUHGXFWRUD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

6H³DOFHUR

2905

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de control
La siguiente tabla muestra los datos relevantes para la función "Búsqueda del punto de
referencia" en la interfaz de control (Página 2956).
Dirección

Asignación

Byte 0

Bit 0.7 … 0.4:
Bit

7

6

5

4

0

0

1

1

MODE 3 = Búsqueda del punto de referencia

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha rápida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

Coordenada del punto de referencia:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … Final del eje rotativo – 1

Señales de realimentación
La siguiente tabla muestra los datos relevantes de la "Búsqueda del punto de referencia" en
la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 0

Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … Final del eje rotativo – 1

Causas del error para POS_ERR
Las causas del error deben calcularse con el JOB 15 (Mostrar valores actuales (Página 2927)).
La tabla siguiente muestra los números relevantes en la función "Búsqueda del punto de
referencia", con la causa del error y las posibles soluciones.
Número de
error

2906

Causa del error

Solución

1

MODO no permitido en el modo de dosi‐
ficación

2

Se indica ERR_2L+

Compruebe la tensión de carga (2L+) en
la terminal 7.

3

Se indica ERR_ENCODER

Revise el cableado del encóder.

10

Búsqueda del punto de referencia: Coor‐
denada del punto de referencia ≥ Final
del eje rotativo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Número de
error

Causa del error

Solución

11

No se ha encontrado ninguna señal de
búsqueda de referencia hasta el final de
carrera o entre los finales de carrera

Revise los interruptores, el encóder y el
cableado.

13

El sentido de giro del accionamiento y del
encóder es diferente

Revise el cableado del accionamiento y el
encóder, así como el parámetro "Inver‐
sión del sentido de giro (Página 2939)".

Desarrollo de una búsqueda del punto de referencia
Proceso de una búsqueda del punto de referencia dependiendo de la parametrización y la posición de
inicio
Proceso de una búsqueda del punto de referencia dependiendo de la parametrización y la
posición de inicio
En una búsqueda del punto de referencia es preciso distinguir diversos casos que dependen
● de la posición del accionamiento al iniciar una búsqueda del punto de referencia,
● del sentido de arranque parametrizado,
● de la señal de búsqueda de referencia parametrizada y
● del sensor del punto de referencia parametrizado.

Ejemplo 1: Búsqueda del punto de referencia con leva de reducción y marca cero
Posición de inicio y parametrización:
● Posición de inicio: entre final de carrera negativo y leva de reducción
● Sentido de arranque: Más +
● Señal de búsqueda de referencia: Sensor punto de referencia y señal cero
● Sensor punto de referencia: leva reductora hacia +
La siguiente figura muestra una búsqueda del punto de referencia con leva de referencia y
marca cero.
6H³DOFHUR
/5 
9HORFLGDGU£SLGD
9HORFLGDGOHQWD

3RVLFLµQLQLFLDO

6<1&

/5 /HYDUHGXFWRUD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2907

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La sincronización también puede realizarse en la leva de reducción sin marca cero.
Si la posición de inicio se encuentra en la leva de reducción, el 1PosU controla el
accionamiento con marcha lenta directamente en el sentido de la búsqueda de referencia.

Ejemplo 2: Búsqueda del punto de referencia con final de carrera negativo
Posición de inicio y parametrización:
● Posición de inicio: entre el final de carrera negativo y el final de carrera positivo
● Sentido de arranque: Negativo
● Señal de búsqueda de referencia: Sensor punto de referencia
● Sensor punto de referencia: Final de carrera La figura siguiente muestra una búsqueda del punto de referencia con final de carrera negativo.
)LQGHFDUUHUD
YHORFLGDGOHQWD

6<1&

3RVLFLµQLQLFLDO

YHORFLGDGU£SLGD

La sincronización también puede realizarse en el final de carrera con la siguiente marca cero.
Si la posición de inicio se encuentra en el final de carrera, el 1PosU controla el accionamiento
con marcha lenta directamente en el sentido de la búsqueda de referencia.

Ejemplo 3: Búsqueda del punto de referencia con inversión del sentido en el final de carrera positivo
Posición de inicio y parametrización:
● Posición de inicio: entre final de carrera negativo y leva de reducción
● Sentido de arranque: Más +
● Señal de búsqueda de referencia: Sensor punto de referencia y señal cero
● Sensor punto de referencia: leva reductora hacia +
La siguiente figura muestra una búsqueda del punto de referencia con inversión de sentido en
el final de carrera positivo.

2908

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6H³DOFHUR
/5
)LQDOGHFDUUHUD

9HORFLGDGOHQWD

6<1&

3RVLFLµQLQLFLDO

YHORFLGDGU£SLGD

/5 OHYDUHGXFWRUD

Si la posición de inicio se encuentra en el final de carrera positivo, el 1PosU controla el
accionamiento con marcha rápida directamente en contra del sentido de arranque
parametrizado.

Ejemplo 4: Búsqueda del punto de referencia sólo con marca cero
Posición de inicio y parametrización:
● Posición de inicio: entre el final de carrera negativo y el final de carrera positivo
● Sentido de arranque: Negativo
● Señal de búsqueda de referencia: Señal cero
● Sensor punto de referencia: irrelevante
La figura siguiente muestra una búsqueda del punto de referencia sólo con marca cero.
6H³DOFHUR

6<1&
3RVLFLµQLQLFLDO

YHORFLGDGU£SLGD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2909

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Posicionamiento relativo (MODE 4)
Posicionamiento relativo
Con el "Posicionamiento relativo", el 1PosU controla el accionamiento desde la posición de
inicio una parte del trayecto predeterminado en un sentido predeterminado.
Alimente la interfaz de control (Página 2956) con la parte del trayecto e inicie el MODE 4 con
la especificación de sentido (DIR_M o DIR_P). El 1PosU mueve el accionamiento con la
velocidad predeterminada (bit de control SPEED) en torno a la parte del trayecto. En el punto
de conmutación el 1PosU pasa de marcha rápida a marcha lenta y, en el punto de
desconexión, el 1PosU finaliza la marcha.
Si realiza el arranque durante una marcha en curso, el 1PosU ejecuta un cambio de sentido
(Página 2944) necesario una vez transcurrido el tiempo Tmin.
El 1PosU no comprueba la parte del recorrido predeterminada. De esta manera, en el caso de
ejes rotativos puede moverse más de una vuelta.
En el modo de dosificación (Página 2895) el "Posicionamiento relativo" sólo es posible en el
sentido positivo. A este respecto, en cada inicio el valor real se establece a 0.
La figura siguiente muestra el desarrollo del modo de movimiento "Posicionamiento relativo".
67$57

',5B3

',5B0

63(('
326B$&.
326B'21(

326B(55

6<1&

YHORFLGDGU£SLGD
3XQWRGH
GHVWLQR

YHORFLGDGOHQWD
3RVLFLµQLQLFLDO

3XQWRGHFDPELRGHYHORFLGDG

7UD\HFWR

3XQWRGHGHVFRQH[LµQ
3DUWHGHOWUD\HFWR

2910

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de control
La siguiente tabla muestra los datos relevantes para el "Posicionamiento relativo" en la interfaz
de control (Página 2956).
Dirección

Ocupación

Byte 0

Bit 0.7 … 0.4:
Bit

7

6

5

4

0

1

0

0

MODE 4 = Posicionamiento relativo

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha rápida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

Parte del trayecto:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … 16 777 215

Señales de realimentación
La siguiente tabla muestra los datos relevantes para el "Posicionamiento relativo" en la interfaz
de respuesta (Página 2958).
Dirección

Ocupación

Byte 0

Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–

0 … Zona del encóder – 1

Causas del error para POS_ERR
Las causas del error deben calcularse con el dem JOB 15 (Mostrar valores actuales
(Página 2927)).
La tabla siguiente muestra los números relevantes en la función "Posicionamiento relativo",
con la causa del error y las posibles soluciones.
Número de
error.

Causa del error

Solución

2

Se indica ERR_2L+

Compruebe la tensión de carga (2L+) en la
terminal 7.

3

Se indica ERR_ENCODER

Revise el cableado del encóder.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2911

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Número de
error.

Causa del error

Solución

5

El final de carrera en cuyo sentido se
controla el accionamiento está activo

Revise los encóders y el cableado, así como
los parámetros "DI0 Final de carrera - (Pá‐
gina 2940)" y "DI1 Final de carrera + (Pági‐
na 2940)".

7

Posicionamiento relativo:
Inicio con DIR_P = 0 y DIR_M = 0 o
DIR_P = 1 y DIR_M = 1

13

El sentido de giro del accionamiento y
del encóder es diferente

15

En el modo de dosificación: DIR_M = 1

Revise el cableado del accionamiento y el
encóder, así como el parámetro "Inversión
del sentido de giro (Página 2939)".

Posicionamiento absoluto (MODE 5)
Posicionamiento absoluto
Con el "Posicionamiento absoluto" el 1PosU mueve el accionamiento hacia destinos
absolutos. Para ello el eje debe estar sincronizado.
El "Posicionamiento absoluto" no es posible en el servicio de dosificación activado.
Alimente la interfaz de control (Página 2956) con el destino e inicie el MODE 5 con
lahabilitación dependiente del sentido (Página 2901) que sea necesaria (DIR_M, DIR_P). El
1PosU mueve el accionamiento con la velocidad predeterminada (bit de control SPEED) hacia
el destino. En el punto de conmutación el 1PosU pasa de marcha rápida a marcha lenta y, en
el punto de desconexión, el 1PosU finaliza la marcha.
Si realiza el arranque durante una marcha en curso, el 1PosU ejecuta un cambio de sentido
(Página 2944) necesario una vez transcurrido el tiempo Tmin.

Eje lineal
El 1PosU determina el sentido en el que se avanza hacia el punto de destino. En el inicio debe
activar la habilitación necesaria en función del sentido (DIR_M, DIR_P). También puede activar
ambas habilitaciones.

2912

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Eje rotativo
El sentido en el que se avanza hacia el destino se determina mediante la selección de la
habilitación en función del sentido (DIR_M, DIR_P):
Bits de control DIR_P y DIR_M

Sentido

DIR_P = 1

Se avanza al punto de destino en sentido +.

DIR_M = 0
DIR_P = 0

Se avanza al punto de destino en sentido -.

DIR_M = 1
DIR_P = 1

Se llega al punto de destino por el trayecto más corto.
El 1PosU determina el sentido en el que se avanza hacia
el punto de destino. Si el trayecto que debe recorrerse es
más pequeño que la distancia de desconexión, no se ini‐
cia ninguna marcha (POS_DONE = 1).

DIR_M = 1

La siguiente figura muestra el desarrollo del modo de movimiento "Posicionamiento absoluto".
67$57

',5B3

',5B0

63(('
326B$&.
326B'21(

326B(55

6<1&

9HORFLGDGU£SLGD
9HORFLGDGOHQWD
3RVLFLµQLQLFLDO

3XQWRGHFDPELRGHYHORFLGDG

2EMHWLYR 5HFRUULGR

3XQWRGHGHVFRQH[LµQ

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2913

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de control
La siguiente tabla muestra los datos relevantes para el "Posicionamiento absoluto" en
la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 0

Bit 0.7 … 0.4:
Bit

7

6

5

4

0

1

0

1

MODE 5 = Posicionamiento absoluto

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha rápida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

Objetivo:
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–

0 … Zona del encóder – 1

Señales de realimentación
La siguiente tabla muestra los datos relevantes para el "Posicionamiento absoluto" en
la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 0

Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–

0 … Zona del encóder – 1

Causas del error para POS_ERR
Las causas del error deben calcularse con el JOB 15 (Mostrar valores actuales (Página 2927)).

2914

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los números relevantes en la función "Posicionamiento absoluto",
con la causa del error y las posibles soluciones.
Número de
error.

Causa del error

Solución

1

MODO no permitido en el modo de dosifica‐
ción

2

Se indica ERR_2L+

3

Se indica ERR_ENCODER

Revise el cableado del encóder.

4

El eje no está sincronizado (SYNC = 0).

Puede sincronizar el eje:

Compruebe la tensión de carga (2L
+) en la terminal 7.

● Con búsqueda del punto de
referencia
● Evaluar señal de búsqueda de
referencia
● Activar valor real
5

El final de carrera en cuyo sentido se controla
el accionamiento está activo

Revise los encóders y su cableado,
así como los parámetros "DI0 Final
de carrera - (Página 2940)" y "DI1
Final de carrera + (Página 2940)".

7

Inicio con DIR_P = 0 y DIR_M = 0 o bit de
control relevante DIR_P = 0 o DIR_M = 0

8

Destino ≥ Final del eje rotativo (en encóder
incremental) o
Destino ≥ Zona de alcance del encóder (en el
caso de encóder SSI)

9

Posicionamiento absoluto cancelado porque
se ha iniciado JOB 9 (sólo en encóders incre‐
mentales)

13

El sentido de giro del accionamiento y del en‐ Revise el cableado del accionamien‐
códer es diferente
to y el encóder, así como el paráme‐
tro "Inversión del sentido de giro (Pá‐
gina 2939)".

Cancelar procesamiento de JOB (JOB 0)
Cancelar procesamiento JOB
Si activa JOB 0, el 1PosU reacciona de la siguiente manera:
● se cancela cualquier proceso JOB 9 "Evaluar señal de búsqueda de referencia" que esté en
marcha,
● se cancela cualquier proceso JOB 10 "Función de congelación" que esté en marcha,
● activa un JOB_ERR = 0 pendiente.
El JOB 0 puede activarse en cualquier estado del eje.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2915

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
Los MODEs no dependen del JOB 0.

Señales de control
La siguiente tabla muestra los datos relevantes para "Cancelar procesamiento JOB" en
la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

0

0

0

0

JOB 0 = Cancelar procesamiento JOB

Bit 0: JOB_REQ

Señales de realimentación
La siguiente tabla muestra los datos relevantes para "Cancelar procesamiento JOB" en
la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Ajustar valor real (JOB 1)
Ajustar valor real
La función "Ajustar valor real" asigna una nueva coordenada al valor real mostrado. De esta
manera la zona de trabajo se desplaza a otra zona del eje.
El eje se sincroniza en el caso del encóder incremental y si el modo de dosificación no está
activado.
Alimente la interfaz de control (Página 2956) con la nueva coordenada de valor real y active
JOB 1.
El 1PosU activa la coordenada de valor real predeterminada en el valor real mostrado en
lainterfaz de respuesta (Página 2958) y activa el bit de respuesta SYNC = 1.

2916

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 1 sobre los diferentes MODEs.
MODE

¿Qué ocurre?

Búsqueda del punto de
referencia

Tenga en cuenta que, en el caso del encóder incremental y el modo de do‐
sificación no está activado durante la evaluación de la búsqueda del punto de
referencia, el bit de respuesta SYNC = 1 se activa de inmediato.
La búsqueda del punto de referencia sigue transcurriendo.

Jog

-

Posicionamiento abso‐
luto

Son posibles las reacciones siguientes:
● Distancia hasta el destino ≤ Distancia de desconexión
El punto de desconexión se ha alcanzado o sobrepasado; se desconecta
directamente y la marcha finaliza con POS_DONE = 1. En este caso es
posible que se haya sobrepasado el punto de destino.
● Distancia hasta el destino ≤ Distancia de cambio de velocidad
El punto de conmutación se ha alcanzado o sobrepasado, se reduce
directamente de velocidad rápida a velocidad lenta. En este caso el
trayecto recorrido en velocidad lenta es inferior que (distancia de cambio
de velocidad - distancia de desconexión).
● Distancia hasta el destino > Distancia de cambio de velocidad
El accionamiento se controla a marcha rápida aunque antes hubiera
cambiado a marcha lenta.

Posicionamiento relati‐
vo

La parte especificada del trayecto se sigue recorriendo.

Señales de control
La siguiente tabla muestra los datos relevantes para "Ajustar el valor real" en la interfaz de
control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

0

0

0

1

JOB 1 = Ajustar valor real

Bit 0: JOB_REQ
Bytes 5 a 7

Coordenadas del valor real:
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0 … Zona del encóder – 1

2917

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de realimentación
La siguiente tabla muestra los datos relevantes para "Ajustar el valor real" en la interfaz de
respuesta (Página 2958).
Dirección

Ocupación

Byte 0

Bit 3: SYNC

Bytes 1 a 3

Valor real:
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–
Byte 4

0 … Zona del encóder – 1

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Causas del error para JOB_ERR
La tabla siguiente muestra los números relevantes en la función "Ajustar valor real", con la
causa del error y las posibles soluciones.
Número de
error.

Significado

Solución

23

Se indica ERR_ENCODER

Revise el cableado del encó‐
der.

34

Coordenada del valor real ≥ Final del eje rotativo (en
encóders incrementales) o bien Coordenada de va‐
lor real ≥ Zona del encóder (en encóders SSI)

Mover zona de alcance del encóder (JOB 2)
Mover zona de alcance del encóder
La función "Mover zona de alcance del encóder" sólo se puede ejecutar con encóders SSI.
La función "Mover zona de alcance del encóder" ajusta el valor del encóder de tal modo que
el valor real mostrado corresponde al valor real actual. Para ello la marcha en curso debe haber
finalizado.
Alimente la interfaz de control (Página 2956) con el offset y active el JOB 2.
El offset se determina tal como se indica a continuación:
● Offset = valor real mostrado – valor real actual
Si aparece un offset negativo, calcule lo siguiente:
● Offset = valor real mostrado – valor real actual +
(número de vueltas × número de pasos)
El 1PosU realiza el offset predeterminado y muestra la coordenada actual del valor real en la
interfaz de respuesta (Página 2958).

2918

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
Los MODEs no dependen del JOB 2.

Señales de control
La siguiente tabla muestra los datos relevantes para el "Desplazamiento de la zona del
encóder" en la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

0

0

1

0

JOB 2 = Desplazar zona del encóder

Bit 0: JOB_REQ
Bytes 5 a 7

Offset
(0...zona del encóder)

Señales de realimentación
La siguiente tabla muestra los datos relevantes para el "Desplazamiento de la zona del
encóder" en la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Bytes 1 a 3

Valor real:

Byte 4

Bit 1: JOB_ERR

● 0 … Zona del encóder – 1
Bit 0: JOB_ACK

Causas del error para JOB_ERR
La tabla siguiente muestra los números relevantes en la función "Desplazar zona del encóder",
con la causa del error y las posibles soluciones.
Número de
error.

Significado

21

JOB no permitido en el caso de encóders in‐
crementales

23

Se indica ERR_ENCODER

26

JOB 2 "Desplazar zona del encóder" no puede
iniciarse porque hay una marcha en curso

33

en el caso de JOB 2: Offset no en la zona de
alcance del encóder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Solución

Revise el cableado del encóder.

2919

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modificar la distancia de desconexión (JOB 3)
Modificar distancia de desconexión
El JOB "Modificar la distancia de desconexión" adapta el control del accionamiento a
diferentes condiciones de carga y mecánicas.
Alimente la interfaz de control (Página 2956) con la nueva distancia de desconexión y active
JOB 3.
El 1PosU aplica la nueva distancia de desconexión.
La distancia de desconexión continúa siendo válida hasta una nueva parametrización
(Página 2936) del 1PosU con parámetros modificados.

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 3 sobre los diferentes MODEs.
MODE

¿Qué ocurre?

Búsqueda del punto
de referencia

-

JOG
Posicionamiento abso‐ Distancia hasta el destino ≤ Distancia de desconexión
luto
El punto de desconexión se ha alcanzado o sobrepasado; se desconecta
Posicionamiento relati‐ directamente y la marcha finaliza con POS_DONE = 1. En este caso es po‐
sible que se haya sobrepasado el punto de destino.
vo

Señales de control
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de desconexión"
en la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

0

0

1

1

JOB 3 = Modificar distancia de desconexión

Bit 0: JOB_REQ
Bytes 5 a 7

Distancia de desconexión:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … 16 777 215

Señales de realimentación
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de desconexión"
en la interfaz de respuesta (Página 2958).

2920

Dirección

Ocupación

Byte 4

Bit 0: JOB_ACK

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modificar la distancia de cambio de velocidad (JOB 4)
Modificar distancia de cambio de velocidad
La función "Modificar la distancia de cambio de velocidad" adapta el control del accionamiento
a diferentes condiciones de carga y mecánicas.
Alimente la interfaz de control (Página 2956) con la nueva distancia de cambio de velocidad y
active JOB 4.
El 1PosU aplica la nueva distancia de cambio de velocidad.
La distancia de cambio de velocidad continúa siendo válida hasta una nueva parametrización
(Página 2936) del 1PosU con parámetros modificados.

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 4 sobre los diferentes MODEs.
MODE

¿Qué ocurre?

Búsqueda del punto
de referencia

-

JOG
Posicionamiento abso‐ Son posibles las reacciones siguientes:
luto
● Distancia hasta el punto de destino ≤Distancia de cambio de velocidad
Posicionamiento relati‐
Se ha alcanzado o sobrepasado el punto de cambio de velocidad, se
vo
reduce directamente de velocidad rápida a velocidad lenta. En este caso
el trayecto recorrido en velocidad lenta es inferior que (distancia de cambio
de velocidad - distancia de desconexión).
● Distancia hasta el destino >Distancia de cambio de velocidad
El accionamiento se controla a marcha rápida aunque antes hubiera
pasado a velocidad lenta.

Señales de control
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de cambio de
velocidad" en la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

0

1

0

0

JOB 4 = Modificar distancia de cambio de velo‐
cidad

Bit 0: JOB_REQ
Bytes 5 a 7

Distancia de cambio de velocidad:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … 16 777 215

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2921

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de realimentación
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de cambio de
velocidad" en la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 4

Bit 0: JOB_ACK

Evaluar señal de búsqueda de referencia (JOB 9)
Evaluar señal de búsqueda de referencia
La función de "Evaluar señal de búsqueda de referencia" sólo está disponible con encóders
incrementales y si el modo de dosificación no está activado.
"Evaluar señal de búsqueda de referencia" sincroniza el eje a partir de una señal externa de
búsqueda de referencia durante una marcha en curso en los MODEs "Jog" y "Posicionamiento
relativo". Como señal de búsqueda de referencia puede escoger entre 3 entradas digitales y
la señal cero (Página 2907).
Las entradas digitales DI0 (final de carrera - ), DI1 (final de carrera + ) y DI2 (leva reductora) se
pueden parametrizar como contacto normalmente cerrado o contacto normalmente abierto.
Alimente la interfaz de control (Página 2956) con la coordenada del punto de referencia y active
JOB 9. El 1PosU pone la señal de realimentación SYNC = 0.
Cuando el 1PosU detecta que se sobrepasa la señal parametrizada de búsqueda de referencia
en el sentido de búsqueda, el eje está sincronizado. El 1PosU pone la señal de realimentación
SYNC = 1 y asigna la coordenada del punto de referencia al valor real.
Éste se determina a partir de los parámetros "Señal de búsqueda de referencia" y "Sensor de
punto de referencia".

Señal de búsqueda
de referencia: Sen‐
sor punto de refe‐
rencia y señal cero
Señal de búsqueda
de referencia: sen‐
sor de referencia
Señal de búsqueda
de referencia: señal
cero

2922

Sensor de punto
de referencia:
Leva de reducción
en el sentido ne‐
gativo

Sensor de punto
de referencia:
Leva de reducción
en el sentido posi‐
tivo

Sensor de punto
de referencia:
Final de carrera
negativo

Sensor de punto
de referencia:
Final de carrera
positivo

Sentido de bús‐
queda de referen‐
cia -

Sentido de bús‐
queda de referen‐
cia +

Sentido de bús‐
queda de referen‐
cia +

Sentido de bús‐
queda de referen‐
cia -

El sentido de búsqueda de referencia no está definido. Con la siguiente señal
cero se sincroniza el eje.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 9 sobre los diferentes MODEs.
MODE

¿Qué ocurre?

Búsqueda del punto de re‐ La coordenada de búsqueda de referencia indicada con el JOB 9 es válida
ferencia
JOG

-

Posicionamiento absoluto

Cancelación de la marcha con POS_ERR = 1, pues SYNC se ha borrado

Posicionamiento relativo

-

Señales de control
La siguiente tabla muestra los datos relevantes para la "evaluación de la señal de búsqueda
de referencia" en la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

1

0

0

1

JOB 9 = Evaluar señal de búsqueda de referencia

Bit 0: JOB_REQ
Bytes 5 a 7

Coordenada del punto de referencia:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … Final del eje rotativo – 1

Señales de realimentación
La siguiente tabla muestra los datos relevantes para "Evaluar la señal de búsqueda de
referencia" en la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 0

Bit 3: SYNC

Bytes 1 a 3

Valor real:
● Eje lineal: 0 … 16 777 215
● Eje rotativo: 0 … Final del eje rotativo – 1

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2923

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas del error para JOB_ERR
La tabla siguiente muestra los números relevantes en la función "Evaluar señal de búsqueda
de referencia", con la causa del error y las posibles soluciones.
Número de
error.

Significado

21

JOB no permitido en encóder SSI o en modo
de dosificación

23

Se indica ERR_ENCODER

30

Coordenada del punto de referencia ≥ Final
del eje rotativo

Solución

Revise el cableado del encóder.

Función de congelación (JOB 10)
Función de congelación
Con la función de congelación, el valor real se almacena una vez en un flanco de la entrada
digital DI2. Esta función puede utilizarse, por ejemplo, para la captura de bordes o la medición
longitudinal.
Alimente la interfaz de control (Página 2956) con el flanco deseado y active el JOB 10.
Si el 1PosU detecta el flanco predeterminado en la entrada digital DI2, almacena el valor real
correspondiente, lo muestra como valor de respuesta (Página 2958) y activa el bit de respuesta
LATCH_DONE = 1.
A continuación es posible volver a activar la "Función de congelación".

Función de congelación y búsqueda del punto de referencia o "Evaluar señal de búsqueda de referencia"
Si el 1PosU realiza la sincronización en el mismo flanco, almacena el valor real antes de
asignar la coordenada del punto de referencia.

Efecto sobre los MODEs
Los MODEs no dependen del JOB 10.

2924

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señales de control
La siguiente tabla muestra los datos relevantes para la "Función de congelación" en la interfaz
de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

1

0

1

0

JOB 10 = Función de congelación

Bit 0: JOB_REQ
Byte 5

Bit 1: Congelación con flanco descendente en DI2
Bit 0: Congelación con flanco ascendente en DI2

Señales de realimentación
La siguiente tabla muestra los datos relevantes para la "Función de congelación" en la interfaz
de respuesta (Página 2958).
Dirección

Ocupación

Byte 4

Bit 2: LATCH_DONE
Bit 1: JOB_ERR
Bit 0: JOB_ACK

Bytes 5 a 7

Valor de respuesta: Valor real en el flanco de DI2
● en el caso de encóders incrementales:
–

Eje lineal: 0 … 16 777 215

–

Eje rotativo: 0 … Final del eje rotativo – 1

● con encóders SSI:
–

0 … Zona del encóder – 1

Causas del error para JOB_ERR
La tabla siguiente muestra los números relevantes en la "Función de congelación" con la causa
del error y las posibles soluciones.
Número de
error.

Significado

Solución

23

Se indica ERR_ENCODER

Revise el cableado del encóder.

36

Selección de flanco desconocida

Ajustar vigilancia de sentido de giro (JOB 11)
Ajustar vigilancia de sentido de giro
La función de "Ajustar vigilancia de sentido de giro" no está disponible en el modo de
dosificación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2925

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
"Ajustar vigilancia de sentido de giro" adapta la vigilancia de sentido de giro del 1PosU a sus
condiciones de carga y mecánicas.
La vigilancia de sentido de giro siempre está activada. El 1PosU detecta si el sentido de giro
del accionamiento y del encóder es el mismo. Si no lo es, se aplica una tolerancia hasta la
distancia de trayecto predefinida para la vigilancia de sentido de giro. Si la distancia de trayecto
predefinida se sobrepasa, el 1PosU indica POS_ERR = 1.
Hasta que no se activa el JOB 11, se utiliza como distancia de trayecto para al vigilancia de
sentido de giro la distancia de desconexión doble resultante de los parámetros. JOB 3
"Modificar distancia de desconexión" afecta a la distancia de trayecto para la vigilancia del
sentido de giro.
Alimente la interfaz de control (Página 2956) con la distancia de trayecto y active JOB 11.
El 1PosU aplica la distancia de trayecto predefinida para la vigilancia de sentido de giro.
La distancia de trayecto para el sentido de giro continúa siendo válida hasta una nueva
parametrización (Página 2936) del 1PosU con parámetros modificados.

Desconectar la vigilancia de sentido de giro
Con una distancia de trayecto 0, la vigilancia de sentido de giro está desactivada.

Efecto sobre los MODEs
Los MODEs no dependen del JOB 11.

Señales de control
La siguiente tabla muestra los datos relevantes para el "ajuste de la vigilancia del sentido de
giro" en la interfaz de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

1

0

1

1

JOB 11 = Ajustar vigilancia de sentido de giro

Bit 0: JOB_REQ
Byte 5

0

Byte 6, 7

Distancia de trayecto para vigilancia de sentido de giro:
● 0 … 65 535

Señales de realimentación
La siguiente tabla muestra los datos relevantes para el "Ajuste de la vigilancia del sentido de
giro" en la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

2926

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas del error para JOB_ERR
La tabla siguiente muestra los números relevantes en la función de "Ajuste de la vigilancia del
sentido de giro", con la causa del error y las posibles soluciones.
Número de
error.

Significado

21

JOB no admisible en el modo de dosificación

38

Supervisión de sentido de giro distancia de trayecto >
65 535

Solución

Mostrar valores actuales (JOB 15)
Mostrar valores actuales
Puede visualizar los siguientes valores en la interfaz de realimentación en forma de valores de
respuesta:
● Distancia residual
● Velocidad real
● Causas del error para POS_ERR y JOB_ERR
El 1PosU tiene predefinido como valor de respuesta la distancia residual.
Independientemente del valor de respuesta seleccionado, el 1PosU muestra el valor real
correspondiente de forma continua en la interfaz de respuesta.
Alimente la interfaz de control (Página 2956) con el valor de respuesta deseado y active el
JOB 15.
El valor de respuesta seleccionado continúa siendo válida hasta una nueva parametrización
(Página 2936) del 1PosU con parámetros modificados.

"Mostrar valores actuales" y función congelar
Al activar la función congelar, el 1PosU activa el valor de realimentación = 0 y muestra el valor
real correspondiente al flanco almacenado en la entrada digital DI2.
El JOB 15 no se puede volver a activar hasta que no haya finalizado la función de congelación.

Distancia residual
El 1PosU calcula la distancia hasta el punto de destino como distancia residual en el MODE
"Posicionamiento absoluto" y "Posicionamiento relativo". El trayecto residual es positivo
siempre que el valor real se encuentre antes del punto de destino. Pasa a ser negativo cuando
se sobrepasa el punto de destino. En los MODEs restantes, la distancia residual es = 0.
El 1PosU indica la distancia residual con signo entre -8 388 608 y 8 388 607 pasos. Los valores
negativos se representan en complemento doble. Si el trayecto residual se encuentra fuera de
estos límites, se indica el valor límite correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2927

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Velocidad real
El 1PosU calcula la velocidad real como modificación del valor del encóder en pasos de 10 ms.
Indica la velocidad entre 0 y 16 777 215.

Causas del error para POS_ERR y JOB_ERR
El 1PosU muestra las causas del error de POS_ERR y JOB_ERR, así como el MODE y el JOB
introducidos en lainterfaz de control (Página 2956) .

Efecto sobre los MODEs
Los MODEs no dependen del JOB 15.

Señales de control
La siguiente tabla muestra los datos relevantes para "Mostrar valores actuales" en la interfaz
de control (Página 2956).
Dirección

Ocupación

Byte 4

Bit 4.7 … 4.4:
Bit

7

6

5

4

1

1

1

1

JOB 15 = Mostrar valores actuales

Bit 0: JOB_REQ
Byte 5

0: Distancia residual
1: Velocidad real
2: Causas del error para POS_ERR y JOB_ERR

Señales de realimentación
La siguiente tabla muestra los datos relevantes para la "presentación de valores actuales" en
la interfaz de respuesta (Página 2958).
Dirección

Ocupación

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Bytes 5 a 7

En función del valor de respuesta seleccionado:
● Para trayecto residual: –8 388 608 … 8 388 607
● Para velocidad real: 0 … 16 777 215
● en el caso de las causas del error para POS_ERR y JOB_ERR

2928

–

Byte 5: Causas del error (Página 2934) de POS_ERR

–

Byte 6: Causas del error (Página 2935) de JOB_ERR

–

Bit 7.3 … 7.0: MODE (= Bit 0.7 … 0.4 de las señales de control)

–

Bit 7.7 … 7.4: JOB (= Bit 4.7 … 4.4 de las señales de control)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas del error para JOB_ERR
La tabla siguiente muestra los números relevantes en la función "Mostrar valores actuales",
con la causa del error y las posibles soluciones.
Número de
error.

Significado

35

Mostrar valores actuales: Selección desconocida

37

Mostrar valores actuales: El JOB 15 no puede ac‐
tivarse con la función congelar en marcha.

Solución

Detección de errores / Diagnóstico
Vista general de los errores con 1PosU
Al utilizar el 1PosU pueden producirse diversos errores. En este caso se distinguen los
siguientes tipos de error:
● Errores de parametrización (Página 2930)
● Fallos externos (Página 2930)
● Errores en el control de MODEs y JOBs (Página 2933)
Los errores de "falta de tensión de carga 2L+", "cortocircuito alimentación del encóder" y
"rotura de hilo/cortocircuito de las señales del encóder" deben acusarse (Página 2933).
Si surgen errores al iniciar MODEs o activar JOBs, aquí se muestra un resumen:
● Causas de error de POS_ERR (Página 2934)
● Causas de error de JOB_ERR (Página 2935)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2929

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Errores de parametrización
Errores de parametrización
La tabla siguiente indica los errores de parametrización con el 1PosU.
Errores de parametrización

Reacción del 1PosU

Causas:

● El 1PosU no está parametrizado y no puede ejecutar sus
funciones

● El 1PosU no puede identificar como propios los
siguientes parámetros.

● Generar un diagnóstico de canal

● El slot del 1PosU que se ha configurado no coincide
con la configuración real.
Sólo con encóders SSI:
● Valor no permitido en el parámetro "Impulsos por
vuelta del encóder".
● Valor no permitido en el parámetro "Vueltas".
● Impulsos por vuelta del encóder × vueltas es mayor
que 4096 × 4096.
Sólo en modo de dosificación:
● "Diagnóstico señales de encóder" activado
● "Inversión del sentido de giro" activada
Solución:
● Revise la configuración y la configuración real.

Errores externos
Fallos externos
La tabla siguiente indica los fallos externos con el 1PosU.
Tensión de carga 2L+ no existe

Reacción del 1PosU

Causas:

● El desplazamiento en curso se detiene; no es posible iniciar
otro desplazamiento:

● Falta tensión de carga 2L+ o es insuficiente en el
borne 7

–

Las 3 salidas digitales pasan a 0.

Solución:

–

Bit de respuesta POS_ERR = 1

● Compruebe el cableado. Elimine el cortocircuito que
pueda existir.

–

Bit de respuesta POS_DONE = 0

● Acuse (Página 2933) el error con el bit de control
EXTF_ACK.
Cortocircuito en alimentación del encóder

2930

● Bit de respuesta ERR_2L+ = 1
● Generar un diagnóstico de canal
● espera a acuse de error EXTF_ACK
Reacción del 1PosU

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Causas:
● Cortocircuito en la alimentación del encóder dispone
en los bornes 6 y 10
Solución:

● Los MODEs en ejecución "Búsqueda del punto de referencia",
"Posicionamiento relativo" y "Posicionamiento absoluto" se
detienen. No es posible volver a iniciar un desplazamiento en
estos MODEs:

● Revise el cableado y elimine el cortocircuito.

–

Las 3 salidas digitales pasan a 0.

● Acuse (Página 2933) el error con el bit de control
EXTF_ACK.

–

Bit de respuesta POS_ERR = 1

–

Bit de respuesta POS_DONE = 0

● Bit de respuesta ERR_ENCODER = 1
● Bit de respuesta SYNC = 0
● Generar un diagnóstico de canal
● espera a acuse de error EXTF_ACK
● El MODE "Jog" no se ve afectado por este error.
● El JOB activo "Evaluar señal de búsqueda de referencia" se
interrumpe.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2931

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Rotura de hilo/cortocircuito señales de encóder

Reacción del 1PosU

En caso de utilizar un encóder SSI, rige lo siguiente:

● Los MODEs en ejecución "Posicionamiento relativo" y
"Posicionamiento absoluto" se detienen. No es posible volver
a iniciar una marcha en estos MODEs.

Requisitos:
● Para la detección de errores en las señales del
encóder es preciso habilitar el parámetro
"Diagnóstico de señales de encóder".
Causas:

–

Las 3 salidas digitales pasan a 0.

–

Bit de respuesta POS_ERR = 1

–

Bit de respuesta POS_DONE = 0

● Rotura de hilo o cortocircuito de las señales del
encóder en los bornes 9 y 13 o 12 y 16.

● Bit de respuesta ERR_ENCODER = 1

● Los parámetros correspondientes al encóder SSI no
concuerdan con el encóder conectado.

● Generar un diagnóstico de canal

Solución:
● Revise el cableado y elimine el cortocircuito.
● Compare la parametrización con las especificaciones
técnicas del encóder.

● Bit de respuesta SYNC = 0
● espera a acuse de error EXTF_ACK
● El MODE "Jog" no se ve afectado por este error.
● El JOB en marcha "Evaluar señal de búsqueda de referencia"
se interrumpe.

● Acuse (Página 2933) el error con el bit de control
EXTF_ACK.
Si se utiliza un encóder incremental rige lo siguiente:
Requisitos:
● Para la detección de fallos de las señales A, /A y B, /
B con señales diferenciales 5V o de las señales A* y
B* con señales de 24 V, es preciso habilitar el
parámetro "Diagnóstico de señales de encóder".
● Para la detección de fallos de las señales N, /N con
señales diferenciales 5 V es preciso habilitar el
parámetro "Diagnóstico de señales de cero". Si se
utiliza un encóder sin marca cero, la detección de
fallos se desconecta. Si está activado el modo de
dosificación no será posible el "Diagnóstico de
señales de cero".
Causas:
● Sólo para señales diferenciales 5 V:
rotura de hilo o cortocircuito de las señales de
encóder en los bornes 9 y 13 u 11 y 15 ó 12 y 16.
● Detectado error de flanco de la señal de encóder de
forma que el 1PosU no puede detectar el sentido con
claridad.
Solución:
● Revise el cableado y elimine el cortocircuito.
● Acuse (Página 2933) el error con el bit de control
EXTF_ACK.

2932

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error en el control de MODEs y JOBs
Error en el control de MODEs y JOBs
La tabla siguiente muestra los errores en el control de los MODEs y JOBs con el 1PosU.
POS_ERR

Reacción del 1PosU

Causas:

● El MODE iniciado no se ejecuta.

● Al iniciar un MODEs hay determinados requisitos o
condiciones que no se cumplen.

● La marcha en curso se detiene:
–

Las 3 salidas digitales pasan a 0.

–

Bit de respuesta POS_ERR = 1

–

Bit de respuesta POS_DONE = 0

JOB_ERR

Reacción del 1PosU

Causas:

● El JOB activado no se ejecuta.

● Al activar un JOBs hay determinados requisitos o
condiciones que no se cumplen.

–

Bit de respuesta JOB_ERR = 1

Acuse del error EXTF_ACK
Acuse del error EXTF_ACK
Los errores externos (Página 2930) eliminados "Falta de tensión de carga 2L+", "Cortocircuito
alimentación de encóders" y "Rotura de hilo/cortocircuito de las señales de encóder" deben
acusarse. La siguiente tabla muestra el proceso necesario para ello
Su acción

Reacción del 1PosU
● Bit de respuesta ERR_2L+ = 1
y/o
● Bit de respuesta ERR_ENCODER = 1

El programa de control detecta el bit de respuesta activado
ERR_2L+ o ERR_ENCODER.
Ejecute la respuesta al error específica de la aplicación.
Elimine la causa del error.
Ponga el bit de control (Página 2956)EXTF_ACK de 0 a 1.

El 1PosU activa los bits de respuesta (Página 2958)ERR_2L
+ = 0 y ERR_ENCODER = 0.
Eso le permite saber que el error ha sido eliminado y acusado.
Si ERR_2L+ = 1 y ERR_ENCODER = 1, la causa del error
todavía no se ha eliminado.

Ponga el bit de control (Página 2956)EXTF_ACK de 1 a 0.
Con un acuse de error constante (EXTF_ACK = 1) o una parada de CPU/maestro, el 1PosU indica los errores en cuanto los
detecta y los borra en cuanto se eliminan.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2933

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas de error para POS_ERR
Causas del error para POS_ERR
La tabla siguiente muestra las causas de error y las soluciones posibles para POS_ERR.
Número de error Causa del error

Solución

1

MODEs permitidos son:

MODE desconocido o no permitido

● MODE 0
● MODE 1
● MODE 3 (no es posible con encóder SSI o en
modo de dosificación)
● MODE 4
● MODE 5 (no es posible en modo de dosificación)
2

Se indica ERR_2L+

Compruebe la tensión de carga (2L+) en terminal 7.

3

Se indica ERR_ENCODER

Revise el cableado del encóder.

4

El eje no está sincronizado (SYNC = 0).

Encóder SSI:
● Elimine el error de encóder.
Con encóder incremental y modo de dosificación no
activado el eje puede sincronizarse con:
● Búsqueda del punto de referencia
● Evaluar señal de búsqueda de referencia
● Ajustar valor real

5

El final de carrera en cuyo sentido se controla el
accionamiento está activo

7

Jog: DIR_P = 1 del DIR_M = 1

Revise los encóders y el cableado, así como los pa‐
rámetros "DI0 Final de carrera - (Página 2940)" y "DI1
Final de carrera + (Página 2940)".

Posicionamiento absoluto:
Iniciar con DIR_P = 0 y DIR_M = 0 o bit de control
relevante DIR_P = 0 o DIR_M = 0
Posicionamiento relativo:
Inicio con DIR_P = 0 y DIR_M = 0 o DIR_P = 1 y
DIR_M = 1
8

Posicionamiento absoluto:
Punto de destino ≥ fin del eje rotativo con encóder
incremental o destino ≥ zona de alcance del en‐
códer con encóder SSI

9

Posicionamiento absoluto cancelado porque se
ha iniciado JOB 9

10

Búsqueda del punto de referencia: Coordenada
del punto de referencia ≥ Final del eje rotativo

11

Búsqueda del punto de referencia:
No se ha encontrado ninguna señal de búsqueda
de referencia hasta el final de carrera o entre los
finales de carrera

2934

Revise los interruptores, el encóder y el cableado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Número de error Causa del error

Solución

13

El sentido de giro del accionamiento y del encóder
es diferente

Revise el cableado del accionamiento y el encóder,
así como el parámetro "Inversión del sentido de giro
(Página 2939)".

15

Jog, posicionamiento relativo:
En el modo de dosificación DIR_M = 1

Causas de error para JOB_ERR
Causas del error para JOB_ERR
La tabla siguiente muestra las causas de error y las soluciones posibles para POS_ERR.
Número de error. Significado

Solución

21

JOBs permitidos son:

JOB desconocido o no permitido

● JOB 0
● JOB 1
● JOB 2 (sólo es posible con encóder SSI)
● JOB 3
● JOB 4
● JOB 9 (no es posible con encóder SSI o
en modo de dosificación (Página 2895))
● JOB 10
● JOB 11 (no es posible en modo de dosificación)
● JOB 15
23

Se indica ERR_ENCODER

26

JOB 2 "Desplazar zona del encóder" no puede ini‐
ciarse porque hay una marcha en curso

29

Evaluar señal de búsqueda de referencia: Coorde‐
nada del punto de referencia ≥ Final del eje rotativo

34

Ajustar valor real: Coordenadas de valor real ≥ Zona
de alcance del encóder

35

Mostrar valores actuales: Selección desconocida

36

Función congelar (latch): Selección de flanco desco‐
nocida

37

Mostrar valores actuales: El JOB 15 no puede acti‐
varse con la función congelar en marcha.

38

Supervisión de sentido de giro
distancia de trayecto > 65 535

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Revise el cableado del encóder.

2935

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

STOP de CPU/maestro y estado RESET
Comportamiento en caso de STOP de la CPU/del maestro
La siguiente tabla muestra el comportamiento del 1PosU en STOP de la CPU/del maestro.
Reacción a STOP de la CPU/del maestro

Reacción del 1PosU

● por desconexión (POWER OFF) de la CPU/del
maestro del bus

● La marcha en curso se detiene.

o bien

● Las 3 salidas digitales pasan a 0.

● Bit de respuesta (Página 2958)POS_ERR = 0
● Por desconexión (POWER OFF) IM 151 / IM 151 FO ● Bit de respuesta (Página 2958)POS_DONE = 1
o bien
● Por fallo en la transmisión de bus
o bien
● Por cambio de estado operativo de RUN a STOP

Abandono del estado STOP de la CPU/del maestro
La siguiente tabla muestra el comportamiento del 1PosU después de abandonar el estado
STOP de la CPU/del maestro.
Abandono del estado STOP de la CPU/del maestro

Reacción del 1PosU

● Por conexión (POWER ON) de la CPU/del maestro
del bus

● La interfaz de respuesta (Página 2958) del 1PosU permanece
actual.

o bien

● El eje permanece sincronizado y el valor real está actualizado.

● Por conexión (POWER ON) IM 151 / IM 151 FO

● La zona de alcance del encóder que ha sido desplazada
permanece vigente.

o bien
● Después de un fallo en la transmisión de bus
o bien
● Tras cambio de estado operativo de STOP a RUN

● La distancia de desconexión y de cambio de velocidad
modificada así como la distancia de trayecto para la vigilancia
de sentido de giro permanecen vigentes.
● Un JOB 9 iniciado "Evaluar señal de búsqueda de referencia
(Página 2922)" y JOB 10 "Función de congelación
(Página 2924)" permanecen activos.
● El JOB 15Valor de respuesta (Página 2927) seleccionado
está actualizado.

2936

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Estado RESET del 1PosU
La siguiente tabla muestra el comportamiento del 1PosU en el estado RESET.
Estado RESET del 1PosU y cambio de parámetros del
1PosU

Reacción del 1PosU

● Por la modificación de los parámetros del 1PosU y
por la carga de la parametrización o configuración de
la estación ET 200S en la CPU/el maestro del bus

● El eje está sincronizado y el valor real equivale al valor de
encóder actual.

o bien

● Las distancias de desconexión y cambio de velocidad se
adoptan de los parámetros.

● Por conexión (POWER ON) en el módulo de potencia
del 1PosU
o bien
● Inserción del 1PosU bajo tensión

● La zona de alcance del encóder no ha sido desplazada.

● A la distancia de trayecto para la vigilancia de sentido de giro
se le asigna el valor correspondiente al doble de la distancia
de desconexión.
● Un JOB 9 iniciado "Evaluar señal de búsqueda de referencia
(Página 2922)" y JOB 10 "Función de congelación
(Página 2924)" permanecen activos.
● La distancia residual se indica como valor de respuesta
(Página 2927).

6.3.7.4

Configurar y parametrizar 1PosU

En servicio
Seleccionar interfaz del encóder
Interfaz del encóder
Al preseleccionar la interfaz del encóder se elige el tipo de señal con el que se desea controlar
el 1PosU.
Interfaz del encóder

Descripción

Incremental 5 V (Pá‐ El 1PosU recibe las señales de los encóders incrementales con señales dife‐
gina 2938)
renciales de 5 V.
Incremental 24 V
(Página 2944)

El 1PosU recibe las señales de los encóders incrementales con señales de 24
V.

SSI absoluto (Pági‐
na 2950)

El 1PosU recibe las señales de los encóders absolutos (SSI).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2937

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parámetros en encóders incrementales con señales diferenciales de 5 V.
Habilitar
Activar el diagnóstico de grupo
Diagnóstico de grupo
El diagnóstico de grupo se activa en la casilla de verificación correspondiente.
Un error de encóder ERR_ENCODER, la falta de tensión de carga ERR_2L+ o un error de
parametrización provocan un diagnóstico específico de canal con diagnóstico de grupo
habilitado.

Activación del diagnóstico de las señales de encóder
Diagnóstico de las señales del encóder
El diagnóstico de las señales del encóder se activa en la casilla de verificación
correspondiente.
Si se ha habilitado el "Diagnóstico de las señales del encóder" las señales en del encóder A, /
A y B, /B se someten a una vigilancia de cortocircuito y rotura de hilo. Si no está activado el
modo de dosificación se vigila además la secuencia de señales. Un cambio de flanco
simultáneo de las señales A y B provoca un error.

Activar diagnóstico de señales de marca cero
Diagnóstico de señales de marca cero
El diagnóstico de las señales de marca cero se activa en la casilla de verificación
correspondiente.
Si se ha habilitado el "Diagnóstico de señales de marca cero", las señales de marca cero N, /
N se vigilan para ver si presentan cortocircuito o rotura de hilo.

Encóders y ejes
Activar modo de dosificación
Modo de dosificación
El modo de dosificación se activa en la casilla de verificación correspondiente.

2938

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En el modo de dosificación (Página 2895) el 1PosU sólo evalúa las señales del encóder A y /
A. De esta forma sólo es posible realizar una modificación del desplazamiento en sentido
positivo. El valor real se incrementa con cada flanco ascendente.

Activar inversión del sentido de giro
Inversión del sentido de giro
La inversión del sentido de giro activa en la casilla de verificación correspondiente.
Con el parámetro "Inversión del sentido de giro" es posible adaptar el sentido de giro del
encóder al del accionamiento y al del eje.
En el modo de dosificación (Página 2895) no es posible realizar una inversión del sentido de
giro.

Seleccionar tipo de eje
Tipos de eje
El módulo de posicionamiento 1PosU puede controlar los siguientes tipos de ejes:
● Eje lineal
El eje lineal es un eje con una zona de desplazamiento física limitada.

,QLFLRI¯VLFR

)LQI¯VLFR

● Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no está limitada por topes mecánicos.
9DORUP£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Definir final del eje rotativo
Final del eje rotativo
Este parámetro sólo es relevante para el tipo de eje "Eje rotativo".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2939

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El valor "Final del eje rotativo" es el valor máximo teórico que el valor real puede alcanzar. Sin
embargo, el máximo valor teórico nunca se indica porque físicamente identifica la misma
posición que el inicio del eje rotativo (0).
La indicación salta
● si se rebasa (el fin del eje rotativo – 1) a 0
● si se rebasa por 0 al (final del eje rotativo – 1)
Rango de valores permitido para el final del eje rotativo: 1 … 16 777 215
La entrada "0" provoca un error de parametrización.

Entradas digitales
Seleccionar final de carrera negativo y final de carrera positivo
Efecto del final de carrera por hardware
Las dos entradas digitales DI0 y DI1 son evaluadas por el 1PosU como final de carrera por
hardware:
● DI0 es el de final de carrera - y limita la zona de trabajo en sentido ● DI1 es el de final de carrera + y limita la zona de trabajo en sentido +
Puede parametrizar cada uno de los finales de carrera por hardware individualmente como
contacto normalmente cerrado o contacto normalmente abierto.
Los finales de carrera por hardware se evalúan para ejes lineales y para ejes rotativos.
Sólo se evalúa el final de carrera por hardware correspondiente al sentido en el que se controla
el accionamiento.
Así, al alcanzar o sobrepasar un final de carrera por hardware, es posible abandonarlo sin
ninguna indicación de fallo simplemente iniciando la marcha en el sentido contrario.
El nivel actual de las entradas digitales, retardado por la velocidad de actualización, está
indicado en la interfaz de realimentación.
La tabla siguiente muestra la forma en la que los finales de carrera por hardware tienen efecto
sobre los distintos MODEs.
MODE

Efecto del final de carrera por hardware

Búsqueda del punto de
referencia

En el final de carrera por hardware el 1PosU ejecuta una inversión de sentido
automática.

Jog

En el final de carrera por hardware se detiene el movimiento del eje, las 3
salidas digitales pasan a 0 y se notifica el bit de respuesta POS_ERR.

Posicionamiento abso‐
luto
Posicionamiento relativo

2940

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Arrancar en el final de carrera por hardware
La tabla siguiente muestra la reacción del 1PosU al iniciar un MODE en el final de carrera por
hardware.
Sentido

Reacción del 1PosU

Arrancar dentro de la zona de trabajo

El 1PosU inicia el MODE predeterminado.

Arrancar fuera de la zona de trabajo

El bit de respuesta POS_ERR = 1 se activa.

Seleccionar leva de reducción
Efecto de la leva de reducción
La entrada digital DI2 es evaluada por el 1PosU como leva de reducción o entrada de
congelación:
● Evaluar como leva de reducción en MODE 3 "Búsqueda del punto de referencia
(Página 2904)" y JOB 9 "Señal de búsqueda de referencia (Página 2922)"
● como entrada de congelación en JOB 10 "función de congelación (Página 2924)"
La leva de reducción puede parametrizarse como contacto normalmente cerrado o contacto
normalmente abierto.

Evaluar búsqueda del punto de referencia y señal de búsqueda de referencia
Seleccionar señal de búsqueda de referencia
Señal de búsqueda de referencia
El parámetro "Señal de búsqueda de referencia" determina para MODE 3 "Búsqueda del punto
de referencia (Página 2904)" y JOB 9 "Evaluar señal de búsqueda de referencia
(Página 2922)" el encóder relevante o la combinación de encóder y la marca cero. Opciones
posibles:
● Sensor del punto de referencia y señal cero
● Sensor del punto de referencia
● Señal cero
El tipo de encóder de referencia se selecciona con el parámetro "Sensor del punto de
referencia (Página 2942)".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2941

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar el sensor del punto de referencia
Sensor del punto de referencia
El parámetro "Sensor punto de referencia" determina el interruptor relevante y el sentido de
búsqueda de referencia en el que debe sobrepasarse el encóder. Posibilidades de selección:
● Leva reductora a ● Leva reductora +
● Final de carrera ● Final de carrera +
Este parámetro sólo es relevante si en "Señal de búsqueda de referencia (Página 2941)" ha
seleccionado:
● Sensor del punto de referencia y señal cero
o bien
● Sensor del punto de referencia

Seleccionar sentido de arranque
Sentido de arranque:
El parámetro "Sentido de arranque" determina el sentido de inicio para la MODE 3 "búsqueda
del punto de referencia (Página 2904)". Posibilidades de selección:
● Más (+)
● Menos (-)

2942

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Accionamiento
Seleccionar el modo de control
Modo de control
El parámetro "Modo de control" define la función de las salidas digitales para la activación del
accionamiento (Página 2899). Posibilidades de selección:
● Modo de control 0:
– DO0 Desplazamiento negativo
– DO1 Desplazamiento positivo
– DO2 Marcha rápida/lenta
● Modo de control 1:
– DO0 Marcha rápida
– DO1 Marcha lenta (en tal caso la marcha rápida es 0)
– DO2 Desplazamiento positivo (1) / Desplazamiento negativo (0)

Introducir distancia de desconexión
Distancia de desconexión
La distancia de desconexión (Página 2893) define la distancia con respecto al destino a la que
el accionamiento decelera la marcha lenta a 0.
Si la distancia de desconexión ≥ distancia de cambio de velocidad, no existe punto de cambio
de velocidad. No se reduce la marcha rápida a marcha lenta, sino que se ejecuta directamente
la reacción en el punto de desconexión.
Rango de valores admisible:
● 0 a 65 535
El JOB 3 (Página 2920) permite modificar la distancia de desconexión.

Introducir la distancia de cambio de velocidad
Distancia de cambio de velocidad
La distancia de cambio de velocidad (Página 2893) define la distancia con respecto al destino
a la que el accionamiento reduce de marcha rápida a marcha lenta.
Rango de valores admisible:
● 0 a 65 535
El JOB 4 (Página 2921) permite modificar la distancia de cambio de velocidad.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2943

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Introducir el tiempo de deceleración para el cambio de sentido
Tmin Cambio de sentido
El parámetro "Tmin Cambio de sentido" determina el tiempo de deceleración para el cambio de
sentido. Las salidas digitales se desconectan y a continuación se ejecuta el cambio de sentido
con una deceleración de Tmin. Tmin se aplica en cada cambio de sentido durante un
desplazamiento.
Tmin no es efectivo al iniciar tras POS_DONE = 1 o POS_ERR = 1.
Rango de valores admisible:
● 0 a 255
El valor que introduzca se multiplica por 10. Introduzca pues Tmin en incrementos de 10 ms
(p. ej: 0 ms, 10 ms o 2550 ms).

Parámetros en encóders incrementales con señales de 24 V
Habilitaciones
Activar el diagnóstico de grupo
Diagnóstico de grupo
El diagnóstico de grupo se activa en la casilla de verificación correspondiente.
Un error de encóder ERR_ENCODER, la falta de tensión de carga ERR_2L+ o un error de
parametrización provocan un diagnóstico específico de canal con diagnóstico de grupo
habilitado.

Activación del diagnóstico de las señales del encóder
Diagnóstico de las señales de encóder
El diagnóstico de las señales del encóder se activa en la casilla de verificación
correspondiente.
Si se habilita el "Diagnóstico de las señales del encóder", un cambio de flanco simultáneo de
las señales A* y B* provoca un error.

2944

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Encóder y ejes
Activar el modo de dosificación
Modo de dosificación
El modo de dosificación se activa en la casilla de verificación correspondiente.
En el modo de dosificación (Página 2895) el 1PosU evalúa sólo la señal de encóder A*. De esta
forma sólo es posible realizar una modificación del desplazamiento en sentido positivo. El valor
real se incrementa con cada flanco ascendente.

Seleccionar entradas de encóder
Entradas de encóder
En las entradas del encóder es posible conectar diferentes encóders:
● Salida tipo PNP/simétrica
● Salida tipo NPN
Nota
Si se ha seleccionado el ajuste "Salida tipo NPN" en el parámetro "Entradas del encóder",
es preciso utilizar también sensores tipo NPN.

En la lista desplegable seleccione la salida del encóder utilizado para las señales A*, B* y N*.

Activar inversión del sentido de giro
Inversión del sentido de giro
La inversión del sentido de giro activa en la casilla de verificación correspondiente.
Con el parámetro "Inversión del sentido de giro" es posible adaptar el sentido de giro del
encóder al del accionamiento y al del eje.
En el modo de dosificación (Página 2895) no es posible realizar una inversión del sentido de
giro.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2945

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar tipo de eje
Tipos de eje
El módulo de posicionamiento 1PosU puede controlar los siguientes tipos de ejes:
● Eje lineal
El eje lineal es un eje con una zona de desplazamiento física limitada.

,QLFLRI¯VLFR

)LQI¯VLFR

● Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no está limitada por topes mecánicos.
9DORUP£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Definir final del eje rotativo
Final del eje rotativo
Este parámetro sólo es relevante para el tipo de eje "Eje rotativo".
El valor "Final del eje rotativo" es el valor máximo teórico que el valor real puede alcanzar. Sin
embargo, el máximo valor teórico nunca se indica porque físicamente identifica la misma
posición que el inicio del eje rotativo (0).
La indicación salta
● si se rebasa (el fin del eje rotativo – 1) a 0
● si se rebasa por 0 al (final del eje rotativo – 1)
Rango de valores permitido para el final del eje rotativo: 1 … 16 777 215
La entrada "0" provoca un error de parametrización.

2946

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Entradas digitales
Seleccionar final de carrera negativo y final de carrera positivo
Efecto del final de carrera por hardware
Las dos entradas digitales DI0 y DI1 son evaluadas por el 1PosU como final de carrera por
hardware:
● DI0 es el de final de carrera - y limita la zona de trabajo en sentido ● DI1 es el de final de carrera + y limita la zona de trabajo en sentido +
Puede parametrizar cada uno de los finales de carrera por hardware individualmente como
contacto normalmente cerrado o contacto normalmente abierto.
Los finales de carrera por hardware se evalúan para ejes lineales y para ejes rotativos.
Sólo se evalúa el final de carrera por hardware correspondiente al sentido en el que se controla
el accionamiento.
Así, al alcanzar o sobrepasar un final de carrera por hardware, es posible abandonarlo sin
ninguna indicación de fallo simplemente iniciando la marcha en el sentido contrario.
El nivel actual de las entradas digitales, retardado por la velocidad de actualización, está
indicado en la interfaz de realimentación.
La tabla siguiente muestra la forma en la que los finales de carrera por hardware tienen efecto
sobre los distintos MODEs.
MODE

Efecto del final de carrera por hardware

Búsqueda del punto de
referencia

En el final de carrera por hardware el 1PosU ejecuta una inversión de sentido
automática.

Jog

En el final de carrera por hardware se detiene el movimiento del eje, las 3
salidas digitales pasan a 0 y se notifica el bit de respuesta POS_ERR.

Posicionamiento abso‐
luto
Posicionamiento relativo

Arrancar en el final de carrera por hardware
La tabla siguiente muestra la reacción del 1PosU al iniciar un MODE en el final de carrera por
hardware.
Sentido

Reacción del 1PosU

Arrancar dentro de la zona de trabajo

El 1PosU inicia el MODE predeterminado.

Arrancar fuera de la zona de trabajo

El bit de respuesta POS_ERR = 1 se activa.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2947

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar leva de reducción
Efecto de la leva de reducción
La entrada digital DI2 es evaluada por el 1PosU como leva de reducción o entrada de
congelación:
● Evaluar como leva de reducción en MODE 3 "Búsqueda del punto de referencia
(Página 2904)" y JOB 9 "Señal de búsqueda de referencia (Página 2922)"
● como entrada de congelación en JOB 10 "función de congelación (Página 2924)"
La leva de reducción puede parametrizarse como contacto normalmente cerrado o contacto
normalmente abierto.

Evaluar búsqueda del punto de referencia y señal de búsqueda de referencia
Seleccionar señal de búsqueda de referencia
Señal de búsqueda de referencia
El parámetro "Señal de búsqueda de referencia" determina para MODE 3 "Búsqueda del punto
de referencia (Página 2904)" y JOB 9 "Evaluar señal de búsqueda de referencia
(Página 2922)" el encóder relevante o la combinación de encóder y la marca cero. Opciones
posibles:
● Sensor del punto de referencia y señal cero
● Sensor del punto de referencia
● Señal cero
El tipo de encóder de referencia se selecciona con el parámetro "Sensor del punto de
referencia (Página 2948)".

Seleccionar el sensor del punto de referencia
Sensor del punto de referencia
El parámetro "Sensor punto de referencia" determina el interruptor relevante y el sentido de
búsqueda de referencia en el que debe sobrepasarse el encóder. Posibilidades de selección:
● Leva reductora a ● Leva reductora +
● Final de carrera ● Final de carrera +

2948

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Este parámetro sólo es relevante si en "Señal de búsqueda de referencia (Página 2948)" ha
seleccionado:
● Sensor del punto de referencia y señal cero
o bien
● Sensor del punto de referencia

Seleccionar sentido de arranque
Sentido de arranque:
El parámetro "Sentido de arranque" determina el sentido de inicio para la MODE 3 "búsqueda
del punto de referencia (Página 2904)". Posibilidades de selección:
● Más (+)
● Menos (-)

Accionamiento
Seleccionar el modo de control
Modo de control
El parámetro "Modo de control" define la función de las salidas digitales para la activación del
accionamiento (Página 2899). Posibilidades de selección:
● Modo de control 0:
– DO0 Desplazamiento negativo
– DO1 Desplazamiento positivo
– DO2 Marcha rápida/lenta
● Modo de control 1:
– DO0 Marcha rápida
– DO1 Marcha lenta (en tal caso la marcha rápida es 0)
– DO2 Desplazamiento positivo (1) / Desplazamiento negativo (0)

Introducir distancia de desconexión
Distancia de desconexión
La distancia de desconexión (Página 2893) define la distancia con respecto al destino a la que
el accionamiento decelera la marcha lenta a 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2949

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si la distancia de desconexión ≥ distancia de cambio de velocidad, no existe punto de cambio
de velocidad. No se reduce la marcha rápida a marcha lenta, sino que se ejecuta directamente
la reacción en el punto de desconexión.
Rango de valores admisible:
● 0 a 65 535
El JOB 3 (Página 2920) permite modificar la distancia de desconexión.

Introducir la distancia de cambio de velocidad
Distancia de cambio de velocidad
La distancia de cambio de velocidad (Página 2893) define la distancia con respecto al destino
a la que el accionamiento reduce de marcha rápida a marcha lenta.
Rango de valores admisible:
● 0 a 65 535
El JOB 4 (Página 2921) permite modificar la distancia de cambio de velocidad.

Introducir el tiempo de deceleración para el cambio de sentido
Tmin Cambio de sentido
El parámetro "Tmin Cambio de sentido" determina el tiempo de deceleración para el cambio de
sentido. Las salidas digitales se desconectan y a continuación se ejecuta el cambio de sentido
con una deceleración de Tmin. Tmin se aplica en cada cambio de sentido durante un
desplazamiento.
Tmin no es efectivo al iniciar tras POS_DONE = 1 o POS_ERR = 1.
Rango de valores admisible:
● 0 a 255
El valor que introduzca se multiplica por 10. Introduzca pues Tmin en incrementos de 10 ms
(p. ej: 0 ms, 10 ms o 2550 ms).

Parámetros en encóders SSI
Habilitaciones
Activar el diagnóstico de grupo
Diagnóstico de grupo
El diagnóstico de grupo se activa en la casilla de verificación correspondiente.

2950

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Un error de encóder ERR_ENCODER, la falta de tensión de carga ERR_2L+ o un error de
parametrización provocan un diagnóstico específico de canal con diagnóstico de grupo
habilitado.

Activación del diagnóstico de las señales del encóder
Diagnóstico de las señales de encóder
El diagnóstico de las señales del encóder se activa en la casilla de verificación
correspondiente.
Si se ha habilitado el "Diagnóstico de señales" de marca cero, las señales de marca cero D, /
D se vigilan para ver si presentan cortocircuito o rotura de hilo. Se controla además el
telegrama (bit de inicio y bit de parada)

Encóder y ejes
Seleccionar tipo de encóder
Tipo de encóder
Seleccione el encóder absoluto utilizado en la lista desplegable:
● Encóder monovuelta (SSI-13 bits)
● Encóder multivuelta (SSI-25 bits)

Seleccionar velocidad de transferencia
Velocidad de transferencia
Con el parámetro "Velocidad de transferencia" se define la velocidad de la transferencia de
datos del encóder SSI al módulo de posicionamiento.
La velocidad de transferencia máxima depende de la velocidad de transferencia:
● 320 m → 125 kHz
● 160 m → 250 kHz
● 60 m → 500 kHz
● 20 m → 1 MHz

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2951

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar incrementos por vuelta del encóder
Incrementos por vuelta del encóder
El parámetro "Incrementos por vuelta del encóder" indica el número de incrementos que emite
un encóder absoluto por cada vuelta.
Para los límites debe diferenciarse entre los distintos modelos de encóder. Sólo pueden
seleccionarse valores en potencias de 2.
● Encóder monovuelta (número de vueltas = 1) con longitud del telegrama de 13 bits:
– valor mínimo = 4
– valor máximo = 8192
● Encóder multivuelta (número de vueltas > 1) con longitud del telegrama de 25 bits:
– valor mínimo = 4
– valor máximo = 8192

Seleccionar número de vueltas del encóder
Número de vueltas del encóder
Con este parámetro se indica el número de vueltas posibles con este encóder.
La indicación sólo es relevante para el encóder multivuelta. En los encóders monovuelta, el
1PosU establece el número de vueltas en 1.
Rango de valores admisible:
● 2 a 4096 en potencias de 2

Activar inversión del sentido de giro
Inversión del sentido de giro
La inversión del sentido de giro activa en la casilla de verificación correspondiente.
Con el parámetro "Inversión del sentido de giro" es posible adaptar el sentido de giro del
encóder al del accionamiento y al del eje.

2952

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar tipo de eje
Tipos de eje
El módulo de posicionamiento 1PosU puede controlar los siguientes tipos de ejes:
● Eje lineal
El eje lineal es un eje con una zona de desplazamiento física limitada.

,QLFLRI¯VLFR

)LQI¯VLFR

● Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no está limitada por topes mecánicos.
9DORUP£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Entradas digitales
Seleccionar final de carrera negativo y final de carrera positivo
Efecto del final de carrera por hardware
Las dos entradas digitales DI0 y DI1 son evaluadas por el 1PosU como final de carrera por
hardware:
● DI0 es el de final de carrera - y limita la zona de trabajo en sentido ● DI1 es el de final de carrera + y limita la zona de trabajo en sentido +
Puede parametrizar cada uno de los finales de carrera por hardware individualmente como
contacto normalmente cerrado o contacto normalmente abierto.
Los finales de carrera por hardware se evalúan para ejes lineales y para ejes rotativos.
Sólo se evalúa el final de carrera por hardware correspondiente al sentido en el que se controla
el accionamiento.
Así, al alcanzar o sobrepasar un final de carrera por hardware, es posible abandonarlo sin
ninguna indicación de fallo simplemente iniciando la marcha en el sentido contrario.
El nivel actual de las entradas digitales, retardado por la velocidad de actualización, está
indicado en la interfaz de realimentación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2953

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra la forma en la que los finales de carrera por hardware tienen efecto
sobre los distintos MODEs.
MODE

Efecto del final de carrera por hardware

Búsqueda del punto de
referencia

En el final de carrera por hardware el 1PosU ejecuta una inversión de sentido
automática.

Jog

En el final de carrera por hardware se detiene el movimiento del eje, las 3
salidas digitales pasan a 0 y se notifica el bit de respuesta POS_ERR.

Posicionamiento abso‐
luto
Posicionamiento relativo

Arrancar en el final de carrera por hardware
La tabla siguiente muestra la reacción del 1PosU al iniciar un MODE en el final de carrera por
hardware.
Sentido

Reacción del 1PosU

Arrancar dentro de la zona de trabajo

El 1PosU inicia el MODE predeterminado.

Arrancar fuera de la zona de trabajo

El bit de respuesta POS_ERR = 1 se activa.

Seleccionar leva de reducción
Efecto de la leva de reducción
La entrada digital DI2 es evaluada por el 1PosU como leva de reducción o entrada de
congelación:
● Evaluar como leva de reducción en MODE 3 "Búsqueda del punto de referencia
(Página 2904)" y JOB 9 "Señal de búsqueda de referencia (Página 2922)"
● como entrada de congelación en JOB 10 "función de congelación (Página 2924)"
La leva de reducción puede parametrizarse como contacto normalmente cerrado o contacto
normalmente abierto.

2954

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Accionamiento
Seleccionar el modo de control
Modo de control
El parámetro "Modo de control" define la función de las salidas digitales para la activación del
accionamiento (Página 2899). Posibilidades de selección:
● Modo de control 0:
– DO0 Desplazamiento negativo
– DO1 Desplazamiento positivo
– DO2 Marcha rápida/lenta
● Modo de control 1:
– DO0 Marcha rápida
– DO1 Marcha lenta (en tal caso la marcha rápida es 0)
– DO2 Desplazamiento positivo (1) / Desplazamiento negativo (0)

Introducir distancia de desconexión
Distancia de desconexión
La distancia de desconexión (Página 2893) define la distancia con respecto al destino a la que
el accionamiento decelera la marcha lenta a 0.
Si la distancia de desconexión ≥ distancia de cambio de velocidad, no existe punto de cambio
de velocidad. No se reduce la marcha rápida a marcha lenta, sino que se ejecuta directamente
la reacción en el punto de desconexión.
Rango de valores admisible:
● 0 a 65 535
El JOB 3 (Página 2920) permite modificar la distancia de desconexión.

Introducir la distancia de cambio de velocidad
Distancia de cambio de velocidad
La distancia de cambio de velocidad (Página 2893) define la distancia con respecto al destino
a la que el accionamiento reduce de marcha rápida a marcha lenta.
Rango de valores admisible:
● 0 a 65 535
El JOB 4 (Página 2921) permite modificar la distancia de cambio de velocidad.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2955

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Introducir el tiempo de deceleración para el cambio de sentido
Tmin Cambio de sentido
El parámetro "Tmin Cambio de sentido" determina el tiempo de deceleración para el cambio de
sentido. Las salidas digitales se desconectan y a continuación se ejecuta el cambio de sentido
con una deceleración de Tmin. Tmin se aplica en cada cambio de sentido durante un
desplazamiento.
Tmin no es efectivo al iniciar tras POS_DONE = 1 o POS_ERR = 1.
Rango de valores admisible:
● 0 a 255
El valor que introduzca se multiplica por 10. Introduzca pues Tmin en incrementos de 10 ms
(p. ej: 0 ms, 10 ms o 2550 ms).

Interfaz de control y reacción del 1PosU
Interfaz de control del 1PosU
Asignación de la interfaz de control
La siguiente tabla muestra la asignación de la interfaz de control (salidas) del 1PosU.
Dirección

Asignación

Byte 0

Bit 0.7 … 0.4 representan los MODEs
Bit

7

6

5

4

0

0

0

0

MODE 0 = Detener

0

0

0

1

MODE 1 = Jog

0

0

1

1

MODE 3 = Búsqueda del punto de referencia

0

1

0

0

MODE 4 = Posicionamiento relativo

0

1

0

1

MODE 5 = Posicionamiento absoluto

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha rápida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

en MODE 3 = Búsqueda del punto de referencia: coordenada del punto de referencia
en MODE 4 = Posicionamiento relativo: parte del trayecto
en MODE 5 = Posicionamiento absoluto: punto de destino

2956

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Dirección

Asignación

Byte 4

Bit 4.7 … 4.4 representan los JOBs
Bit

7

6

5

4

0

0

0

0

JOB 0 = Cancelar procesamiento JOB

0

0

0

1

JOB 1 = Ajustar valor real

0

0

1

0

JOB 2 = Desplazar zona del encóder (sólo con encóder SSI)

0

0

1

1

JOB 3 = Modificar distancia de desconexión

0

1

0

0

JOB 4 = Modificar distancia de cambio de velocidad

1

0

0

1

JOB 9 = Evaluar señal de búsqueda de referencia

1

0

1

0

JOB 10 = Función de congelación

1

0

1

1

JOB 11 = Ajustar vigilancia de sentido de giro

1

1

1

1

JOB 15 = Mostrar valores actuales

Bit 3: EXTF_ACK
Bit 2: reservado = 0
Bit 1: reservado = 0
Bit 0: JOB_REQ
Bytes 5 a 7

en función del JOB seleccionado:
● en JOB 1 = Coordenada del valor real
● en JOB 2 = Offset
● en JOB 3 = Distancia de desconexión
● en JOB 4 = Distancia de cambio de diferencia
● en JOB 9 = Coordenada del punto de referencia
● en JOB 10
–

Byte 5: Bit 0 = Congelación con flanco ascendente en DI2

–

Byte 5: Bit 1 = Congelación con flanco descendente en DI2

● en JOB 11 = Distancia de trayecto para vigilancia de sentido de giro
● en JOB 15
–

Byte 5: 0 = trayecto residual

–

Byte 5: 1 = velocidad real

–

Byte 5: 2 = Información de error

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2957

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Interfaz de realimentación del 1PosU
Asignación de la interfaz de realimentación
La siguiente tabla muestra la asignación de la interfaz de respuesta (entradas) del 1PosU.
Dirección

Ocupación

Byte 0

Bit 7: ERR_ENCODER
Bit 6: STATUS DO 2
Bit 5: STATUS DO 1
Bit 4: STATUS DO 0
Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real

Byte 4

Bit 7: ERR_2L+
Bit 6: STATUS DI 2 Leva de reducción
Bit 5: STATUS DI 1 Final de carrera positivo
Bit 4: STATUS DI 0 Final de carrera negativo
Bit 3: reservado = 0
Bit 2: LATCH_DONE
Bit 1: JOB_ERR
Bit 0: JOB_ACK

Bytes 5 a 7

2958

Valor de respuesta

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.7.5

Diagnóstico del 1PosU

Diagnóstico con indicadores LED
Indicación LED del 1PosU
6)




83



1

'1

2

326

3

4


①
②
③
④

Error de grupo (rojo)
Indicador de estado de cambio de valor real (verde)
Posicionamiento en curso (verde)
Indicadores de estado de las entradas digitales (verde)

Indicadores de estado y error mediante los LED del 1PosU
La tabla muestra los indicadores de estado y error del 1PosU.
Evento (LED)
SF

1

5

2

UP

DN

Causa

Solución

No hay parametrización.
Hay un aviso de diagnósti‐
co.

Compruebe la para‐
metrización. Evalúe
el aviso de diagnósti‐
co.

POS

ON

ON

DI 0 activada
ON

DI 1 activada
ON

DI 2 activada
ON

cuando el valor real cambia
de un valor menor a uno
mayor
ON

cuando el valor real cambia
de un valor mayor a uno
menor
ON

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Se está realizando el posi‐
cionamiento y una de las 3
salidas digitales está acti‐
vada.

2959

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Tipos de error
En el manual de producto del módulo de interfaz utilizado en la estación ET 200S encontrará
información sobre la estructura del diagnóstico de canal.

Tipos de error del 1PosU
La tabla muestra los tipos de error del 1PosU.
Tipo de error

Significado

Solución

1D

00001:
Cortocircuito

Cortocircuito en la alimentación del
encóder.

Compruebe el cableado del encó‐
der. Corregir el cableado del proce‐
so.

16D

10000:
Error de parametri‐
zación

Módulo no parametrizado.

Corregir la parametrización.

17D

10001:
Falta la tensión de
carga 2L+

No hay tensión de alimentación o
bien es insuficiente.

Corregir el cableado del proceso.
Compruebe la tensión de alimenta‐
ción.

26D

11010:
Error externo

Rotura de hilo/cortocircuito de las
señales del encóder.

Corregir el cableado del proceso

Corregir la parametrización
Rotura de hilo en el cable del encó‐ Sustituir el encóder.
der o cable no conectado.
El encóder está defectuoso o hay
interferencias.
El tipo de encóder, la velocidad de
transferencia o el tiempo monoflop
no se corresponden con el encóder
conectado; los encóders programa‐
bles no coinciden con los ajustes
del módulo.

6.3.8

Utilizar ET 200S 1STEP 5V

6.3.8.1

Asignación de terminales del 1STEP 5V

Reglas de cableado
Los cables (terminales 1 y 5 y terminales 4 y 8) conectados a la etapa de potencia deben estar
apantallados y deben ser de par trenzado. La pantalla tiene que hacer contacto por ambos
extremos. Para ello se debe usar el elemento de contactado de pantallas (ver el anexo de las
instrucciones de servicio Sistema de periferia descentralizada ET 200S (http://
support.automation.siemens.com/WW/view/es/1144348)).

2960

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de terminales
La tabla siguiente muestra la asignación de terminales para el 1STEP 5V.
Vista

Asignación de terminales

Observaciones
DC 24 V: tensión de carga

67(3
9

DI0: habilitación de impulsos externa,
STOP externo o final de carrera en sen‐
tido adelante/atrás

70(6\67(39

6)

DI1: sensor del punto de referencia o
sensor del punto de referencia y final de
carrera en sentido adelante/atrás

,PSXOVRV

3 
'&9 
', 
' 

 3





,PSXOVR

 '&9 



 ',



 '




,PSXOVRB1



',5

0RWRUSDVRDSDVR

'&$%

P, /P y D, /D son señales según RS 422.

(WDSDGHSRWHQFLD

5'< 326


(6

',5B1
6HQWLGR

67(3
9

DC 24 V: tensión de carga

70(6$\67(39

DI0: habilitación de impulsos externa,
STOP externo o final de carrera en sen‐
tido adelante/atrás

6)

DI1: sensor del punto de referencia o
sensor del punto de referencia y final de
carrera en sentido adelante/atrás

,PSXOVRV
5'< 326


(6

'&9 
', 
' 
$

$8; 
$

$8; 

 3



,PSXOVR

 '&9 



 ',



 '
$




,PSXOVRB1



',5

(WDSDGHSRWHQFLD

3 



0RWRUSDVRDSDVR

P, /P y D, /D son señales según RS 422.

'&$%

',5B1

 $8;
$

 $8;

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

6HQWLGR

2961

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.8.2

Principios básicos del posicionamiento con motor paso a paso

Interacción de los componentes
A continuación se explica la interrelación entre los diferentes componentes para el
posicionamiento con motor paso a paso.

1STEP 5V
El 1STEP 5V genera impulsos y una señal de sentido para etapas de potencia de motores paso
a paso. En número de impulsos generados depende de la longitud del trayecto a recorrer. La
frecuencia de impulsos es una medida para la velocidad. La variación de la frecuencia de
impulsos por unidad de tiempo (segundo) es una medida para la aceleración o deceleración.
El funcionamiento del 1STEP 5V se ajusta mediante sus parámetros y ajustes.

Etapa de potencia para motores paso a paso
La etapa de potencia es el elemento de unión entre el 1STEP 5V y el motor paso a paso. El
1STEP 5V envía señales diferenciales RS 422 para frecuencia y sentido. Una vez en la etapa
de potencia, estas señales se convierten en corrientes de motor que controlan los movimientos
del motor con máxima precisión.

Motores paso a paso
Los motores paso a paso se utilizan para el posicionamiento de ejes. Son la solución fácil y
económica para trabajos de posicionamiento de alta precisión dentro de un amplio campo de
aplicación.
El árbol de un motor paso a paso gira un ángulo determinado con cada impulso, de tal modo
que, con secuencias de impulsos rápidas, el movimiento paso a paso se convierte en un
movimiento de giro continuado.

2962

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parámetros y ajustes
Informaciones necesarias
Para obtener una interrelación óptima entre los diferentes componentes debe proporcionar al
1STEP 5V diferentes datos:
● una única vez; en la configuración de los parámetros con su software de configuración
– Frecuencia base (Página 2966) Fb
– Multiplicador n (Página 2964) para el ajuste de frecuencia de inicio y parada Fss
– Multiplicador i (Página 2964) para el ajuste de la aceleración/deceleración
– Función y respuesta de las entradas digitales (Página 2986)
– Zona de desplazamiento (Página 2982)
● durante el funcionamiento; movimiento del motor por medio de una tarea de
desplazamiento en su programa de usuario
– Multiplicador G (Página 2964) para la velocidad/frecuencia de salida Fa
– Factor de reducción R (Página 2966)
– Trayecto, posición o frecuencia
– Modo de operación
– Preajuste de sentido (tarea de desplazamiento) al inicio
● durante el funcionamiento; para la adaptación a diferentes condiciones de carga como
orden de parametrización en su programa de usuario
– Frecuencia base (Página 2966) Fb
– Multiplicador n (Página 2964) para el ajuste de frecuencia de inicio y parada Fss
– Multiplicador i (Página 2964) para el ajuste de la aceleración/deceleración

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2963

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Curva de desplazamiento del 1STEP 5V
Curva de desplazamiento
El 1STEP 5V ejecuta un modo incremental de acuerdo con la siguiente curva de
desplazamiento. El 1STEP 5V genera los valores pico (frecuencia de inicio y parada,
frecuencia de salida y aceleración/deceleración) de la curva de desplazamiento con
una frecuencia base (Página 2966) definida por el usuario.
I
) P£[
)D

)VV
0DUJHQGH
DFHOHUDFLµQ

0DUJHQGHIUHFXHQFLD
YHORFLGDGFRQVWDQWHV

0DUJHQGH
GHFHOHUDFLµQ
W

)VV )UHFXHQFLDGHLQLFLR\SDUDGD
)D )UHFXHQFLDGHVDOLGD
)P£[ )UHFXHQFLDP£[LPDGHOPRWRUSDVRDSDVR

Frecuencia de inicio y parada Fss
La frecuencia de inicio y parada Fss es la frecuencia a la que puede acelerarse el motor con
carga en parado.
El valor de Fss depende del momento de inercia de la carga. Se puede determinar mediante
pruebas.
La frecuencia de inicio y parada Fss es al mismo tiempo la frecuencia de salida mínima Fa, con
la que puede mover el motor.

Ajuste de la frecuencia de inicio y parada Fss
Mediante la parametrización, el 1STEP 5V permite el ajuste escalonado de la frecuencia de
inicio y parada Fss. Para ello, seleccione el multiplicador n entre 1 y 255 que va a multiplicarse
con la frecuencia base Fb. Con el factor de reducción R (1 ó 0,1) en la tarea de desplazamiento
es posible volver a reducir la frecuencia de inicio y parada Fss.
La frecuencia de inicio y parada se calcula según la fórmula siguiente:
Fss = Fb × n × R
Encontrará más información al respecto en la tabla (Página 2966) con los rangos para la
frecuencia de inicio y parada, frecuencia de salida y aceleración.

2964

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Frecuencia/velocidad máxima del eje Fmáx
A la hora de elegir el motor paso a paso deben tenerse en cuenta los siguientes aspectos:
La frecuencia/velocidad máxima varía en función de la aplicación. Con esta frecuencia el motor
debe alcanzar un par de giro suficientemente elevado para mover su carga.
Recuerde que aquí no se trata de la máxima frecuencia posible que puede soportar el motor
o la etapa de potencia.
Con la curva característica correspondiente puede determinar la frecuencia máxima Fmax. La
figura siguiente muestra la curva característica de pares de giro de un motor paso a paso.
3DUGHJLUR

0RPHQWR
GHFDUJD

)PD[

)PD[GHOPRWRU

I

Frecuencia de salida/velocidad Fa
La frecuencia de salida puede regularse de forma diferente para cada marcha.
Al seleccionar la frecuencia de salida debe tener en cuenta también la duración mínima del
impulso de la etapa de potencia utilizada (ver fórmula y tabla (Página 2966) con los rangos
para la frecuencia de inicio y parada, la frecuencia de salida y la aceleración).
Si la frecuencia de salida seleccionada es menor que la frecuencia de inicio y parada Fss
ajustada, el 1STEP 5V iguala la frecuencia de salida con la frecuencia de inicio y parada Fss.
Fa siempre debe ser inferior a Fmax.

Ajuste de la frecuencia de salida/velocidad Fa
El 1STEP 5V permite el ajuste escalonado de la frecuencia de salida Fa. Para ello, seleccione
el multiplicador G entre 1 y 255 que va a multiplicarse con la frecuencia base Fb. Con el factor
de reducción R (1 ó 0,1) en la tarea de desplazamiento es posible volver a reducir la frecuencia
de salida Fa.
La frecuencia de salida se calcula según la fórmula siguiente:
Fa = Fb × G × R

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2965

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Encontrará más información al respecto en la tabla (Página 2966) con los rangos para la
frecuencia de inicio y parada, frecuencia de salida y aceleración.

Aceleración/deceleración a
La aceleración/deceleración máxima permitida depende de la carga que se vaya a mover.
El motor debe alcanzar un par de giro lo suficientemente alto como para poder acelerar o
decelerar la carga sin pérdida de pasos.
También deben considerarse otros criterios para determinar la aceleración/deceleración en
función de la aplicación, como p.ej. un arranque y un frenado suaves.

Ajuste de la aceleración/deceleración a
El 1STEP 5V permite un ajuste escalonado de la aceleración/deceleración mediante
parametrización aplicando el multiplicador i.
Durante la fase de aceleración, la frecuencia va aumentando continuamente desde la
frecuencia de inicio y parada Fss hasta alcanzar la frecuencia de salida Fa.
El intervalo de tiempo para el aumento continuo de la frecuencia se ajusta de forma
escalonada. Para ello, seleccione un multiplicador i entre 1 y 255.
En la fase de deceleración, la frecuencia de salida se reduce de la misma forma.
Con el factor de reducción R (1 ó 0,1) en la tarea de desplazamiento es posible volver a reducir
la aceleración/deceleración a.
La aceleración/deceleración se calcula según la fórmula siguiente:
a = Fb × R / (i × 0,128 ms)
Encontrará más información al respecto en la tabla (Página 2966) con los rangos para la
frecuencia de inicio y parada, frecuencia de salida y aceleración.

Ajuste de la frecuencia base
Introducción
El 1STEP 5V permite el ajuste escalonado de la frecuencia base mediante parametrización.
La frecuencia base determina el margen para la frecuencia de inicio y parada, la frecuencia de
salida y la aceleración.

2966

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Procedimiento
1. Dependiendo de la prioridad de su solicitud, seleccione de la siguiente tabla un margen
adecuado de la frecuencia de inicio y parada Fss y de la frecuencia de salida Fa o bien de la
aceleración a según los siguientes criterios:
– Margen de la frecuencia de inicio y parada Fss,
p. ej. para un arranque y un frenado tan rápidos como sea posible.
– Margen de la frecuencia de salida Fa,
p. ej. para un ajuste de velocidad lo más exacto posible.
– Margen de aceleración a,
p. ej. para procesos de posicionamiento tan rápidos como sea posible.
2. Determine la frecuencia base Fb con ayuda de la tabla.
Para optimizar la frecuencia base Fb proceda del siguiente modo:
3. Compruebe si el resto de valores correspondientes cubren sus necesidades. Si es
necesario, seleccione una frecuencia base Fb diferente, más adecuada a sus necesidades.
4. Determine los multiplicadores para el ajuste de la frecuencia de salida Fa, la aceleración/
deceleración a y la frecuencia de inicio y parada Fss.
5. Consulte en la tabla el factor de reducción R correspondiente.
La tabla siguiente muestra los rangos para la frecuencia de inicio y parada, la frecuencia de
salida y la aceleración.
Frecuencia base Fb
en Hz

Margen de

Margen de

frecuencia de inicio y para‐
da Fss
Frecuencia de salida Fa
en Hz

aceleración a
en Hz/ms

Fórmula:
Fss = Fb × n × R
Fa = Fb × G × R

Fórmula:
a = Fb × R / (i × 0,128 ms)

0,1

0,4 … 102

0,01 … 3,13

8

0,1

0,8 … 204

0,02 … 6,25

20

0,1

2 … 510

0,06 … 15,6

4

Factor de re‐
ducción R

4

1

4 … 1020

0,12 … 31,3

8

1

8 … 2040

0,25 … 62,5

20

1

20 … 5100

0,61 … 156

40

1

40 … 10200

1,23 … 313

80

1

80 … 20400

2,45 … 625

200

1

200 … 51000

6,13 … 1563

400

1

400 … 102000

12,25 … 3125

800

1

800 … 204000

24,51 … 6250

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2967

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Frecuencia base Fb
en Hz

Factor de re‐
ducción R

2000 1)

1

Margen de

Margen de

frecuencia de inicio y para‐
da Fss
Frecuencia de salida Fa
en Hz

aceleración a
en Hz/ms

Fórmula:
Fss = Fb × n × R
Fa = Fb × G × R

Fórmula:
a = Fb × R / (i × 0,128 ms)

2000 … 510000

61,27 … 15625

Fb = frecuencia base
Fss = frecuencia de inicio y parada
Fa = frecuencia de salida
a = aceleración/deceleración
R = factor de reducción
n = multiplicador para el ajuste escalonado de la frecuencia de inicio y parada
G = multiplicador para el ajuste escalonado de la frecuencia de salida
i = multiplicador para el ajuste escalonado de la aceleración/deceleración
1)

a partir de 6ES7138-4DD01-0AB0

La duración mínima del impulso resulta de la frecuencia de salida Fa ajustada y se calcula
según la fórmula TPuls = 1 / (2 × Fa).

6.3.8.3

Funciones del 1STEP 5V

Vista general de las funciones
Vista general
La función del 1STEP 5V es el posicionamiento de un accionamiento en determinados puntos
de destino predefinidos (modos incrementales) y el desplazamiento sin fin con frecuencias
predefinibles (modo de velocidad).
Para realizar esta tarea dispone de las siguientes funciones:
● Búsqueda del punto de referencia (Página 2970): el eje se sincroniza en función de un
punto de referencia
● Definir punto de referencia (Página 2975) (a partir de 6ES7138‑4DC01‑0AB0): se asigna
un valor a la posición actual.
● Modo incremental relativo (Página 2976) (posicionamiento relativo): el eje se desplaza un
trayecto predeterminado
● Modo incremental absoluto (Página 2977) (posicionamiento absoluto) (a partir de
6ES7138‑4DC01‑0AB0): el eje se desplaza a una posición predeterminada.
● Modo de velocidad (Página 2978) (a partir de 6ES7138‑4DC01‑0AB0): el accionamiento se
mueve con una velocidad flexible predefinible (frecuencia de impulsos).

2968

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● Detener la petición de desplazamiento (Página 2980)
● Modificar parámetros durante el funcionamiento (Página 2985)
Encontrará información sobre cómo controlar las funciones en la descripción de la interfaz de
control (Página 2993).

Inicio de una petición de desplazamiento
Iniciar la petición de desplazamiento
La figura siguiente muestra el desarrollo de la solicitud de inicio para una petición de
desplazamiento hasta finalizar el desplazamiento.

%LWGHHUURU
(55B-2%

W

%LWGHFRQWURO
',5B3
',5B0

W

%LWGHUHVSXHVWD

W

676B-2%

,QVWDQWH
(OGHVSOD]DPLHQWRKDILQDOL]DGRODVUHVSXHVWDV FDXVDGHSDUDGD
326B5&'WUD\HFWRUHVWDQWH SXHGHQHYDOXDUVH
6LVHKDDOFDQ]DGRODSRVLFLµQHVSHFLILFDGDVHDFWLYD326B5&'
6LVHKDDFWLYDGRHOELWGHHUURU(55B-2%VHGHVDFWLYDFRQOD
VLJXLHQWHVROLFLWXGGHLQLFLRY£OLGD

,QVWDQWH
%RUUDUVROLFLWXGGHLQLFLRHLQLFLDUFRQHOORHOGHVSOD]DPLHQWR
PDQWHQHUGLVSRQLEOHVORVYDORUHVSDUDODWDUHDGHGHVSOD]DPLHQWR

,QVWDQWH
67(39KDFRPSUHQGLGRODVROLFLWXG(OELWGHHUURU(55B-2%
VHDFWLYDVLODPDUFKDQRSXHGHLQLFLDUVH FRQVXOWHVLJQLILFDGRGH
ORVELWVGHUHVSXHVWD 

,QVWDQWH
6ROLFLWDULQLFLR\SUHSDUDUORVYDORUHVSDUDODWDUHDGHGHVSOD]DPLHQWR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2969

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Evaluación del bit de error ERR_JOB
En cuanto el bit de realimentación (Página 2997) STS_JOB se haya borrado en el instante 4,
deberá evaluar el bit de error ERR_JOB. Recuerde que el bit de realimentación STS_JOB no
se borra hasta que los bits de control (Página 2993) DIR_P, DIR_M y C_PAR se han borrado.

Búsqueda del punto de referencia
Descripción del funcionamiento
El punto de referencia marca la referencia de su sistema de accionamiento (leva de referencia)
para realizar las siguientes peticiones de desplazamiento. Puede determinar el punto de
referencia p. ej. si monta un iniciador en la leva de referencia y lo conecta a la entrada digital
DI1.
El 1STEP 5V garantiza una reproducción exacta del punto de referencia, ya que siempre parte
en el mismo sentido. Este sentido debe definirse iniciando la búsqueda del punto de referencia
siempre en el mismo sentido.

Petición de desplazamiento para búsqueda del punto de referencia
La petición de desplazamiento contiene la siguiente información:
● Multiplicador G para la velocidad/frecuencia de salida Fa
● Factor de reducción R para la frecuencia base Fb parametrizada
● Posición del punto de referencia
● Modo de operación = 1 para la búsqueda del punto de referencia
● Parada en la leva de referencia (Página 2980)
● Preajuste de sentido como inicio (Página 2993)
Nota
El 1STEP 5V comprueba los valores límite de la posición definida (mínimo 0 y máximo
16777215). El valor final se puede parametrizar.
Nota
Si ha parametrizado la reacción de la entrada digital (Página 2986) DI1 (7) como "Sensor punto
de referencia y final de carrera", el 1STEP 5V elegirá automáticamente el sentido de arranque
hacia el final de carrera, independientemente del preajuste de sentido de la petición de
desplazamiento.

2970

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nota
Estado los finales de carrera
Si se utilizan finales de carrera es posible que al iniciar la búsqueda del punto de referencia
estos aún no proporcionen el estado correcto. Esto puede ocurrir p. ej. si los finales de carrera
están parametrizados como contacto normalmente cerrado (activo con nivel 0) y la
alimentación de tensión de los finales de carrera no está disponible antes de iniciar la
búsqueda del punto de referencia.
En este caso puede suceder que la búsqueda del punto de referencia se inicie en el sentido
incorrecto.
Antes de iniciar un desplazamiento, asegúrese de que los finales de carrera ya proporcionan
el estado correcto en cada caso.

Bit de estado SYNC
El bit de estado (Página 2997) SYNC indica la sincronización del eje, es decir, este bit está
activado tras la búsqueda correcta del punto de referencia y se ha borrado durante la marcha.
El bit de estado SYNC está borrado
● tras la parametrización de la estación ET 200S
● tras borrar la habilitación de impulsos
● tras un STOP de la CPU/del maestro
En estos casos resulta útil realizar una búsqueda del punto de referencia.

Bits de estado POS y POS_RCD
Durante la búsqueda del punto de referencia, su ejecución se indica con el bit de
realimentación (Página 2997) POS activado.
Una vez finalizada correctamente la búsqueda del punto de referencia, el bit de realimentación
POS_RCD activado indica que se ha llegado a la posición.
Si la búsqueda del punto de referencia se cancela, el bit de realimentación POS_RCD
permanece desactivado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2971

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Distancia residual, posición, frecuencia
El valor indicado como respuesta (Página 2997) es irrelevante durante la búsqueda del punto
de referencia.
Nota
Para que el 1STEP 5V pueda llegar con exactitud al punto de referencia una y otra vez, el
período de la frecuencia de inicio y parada debe ser mayor que el tiempo de operación de un
paso individual, que va del 1STEP 5V al motor paso a paso y regresa al 1STEP 5V pasando
por la leva de referencia (retardo de las entradas digitales: 4 ms).
Al detenerse en la leva de referencia o en un final de carrera durante la fase de aceleración, el
1STEP 5V sigue emitiendo impulsos durante 50 ms como máximo con la frecuencia ya
alcanzada antes de iniciar el proceso de frenado. Con ello se evitan cambios de frecuencia
abruptos que pueden provocar pérdidas de pasos.

Desarrollo de la búsqueda del punto de referencia
Fases de la búsqueda del punto de referencia
Una búsqueda del punto de referencia se compone como máximo de tres fases.
En la primera fase (1) y en la segunda fase (2) se garantiza que se encuentre la leva de
referencia.
Ambas fases se recorren con la frecuencia de salida Fa predeterminada.
En la tercera fase (3) se avanza hasta la leva de referencia de forma reproducible con
frecuencia de inicio y parada Fss en el sentido seleccionado hasta llegar al punto de referencia
.
Nota
El número de impulsos generados en una fase equivale como máximo a la longitud
parametrizada de la zona de desplazamiento menos 1.

Diferentes operaciones
Dependiendo de la ubicación 3 al iniciar la búsqueda del punto de referencia se obtienen
diferentes modelos de la marcha (REF es la leva de referencia, cableada a la entrada digital
DI1). La representación es aplicable al sentido de arranque Adelante (DIR_P).
● Inicio antes del REF o en el final de carrera LIMIT_M
La figura siguiente muestra una búsqueda del punto de referencia con inicio antes de REF.

2972

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
',5B3

)D




)VV
/,0,7B0

5()

3

/,0,7B3

)VV


)D

● Inicio tras REF
La figura siguiente muestra una búsqueda del punto de referencia con inicio después de REF.
',5B3
)D


)VV
5()

/,0,7B0



/,0,7B3

3

)VV
)D



● Inicio sobre REF
La figura siguiente muestra una búsqueda del punto de referencia con inicio sobre REF.
',5B3
)D 

/,0,7B0

)VV
5()
3

/,0,7B3

)VV


)D

● Inicio sobre el final de carrera en sentido de arranque
La figura siguiente muestra una búsqueda del punto de referencia con inicio sobre el final de
carrera en sentido de arranque.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2973

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
',5B3


/,0,7B0

/,0,7B3
3

5()

)VV
)D



El sensor punto de referencia es a la vez final de carrera
Nota
Si el sensor punto de referencia REF es a la vez un final de carrera, 1STEP 5V selecciona el
sentido de arranque automáticamente hacia el final de carrera, independientemente del
sentido especificado en la petición de desplazamiento.
● Inicio dentro de la zona de desplazamiento
La siguiente figura muestra una búsqueda del punto de referencia con inicio dentro de la zona
de desplazamiento, siendo REF al mismo tiempo el final de carrera LIMIT_M.


5()/,0,7B0

)D
)VV

',5B3',5B0
/,0,7B3

3

)VV
)D



● Inicio en el final de carrera
La figura siguiente muestra una búsqueda del punto de referencia con inicio en el final de
carrera LIMIT_P, siendo REF al mismo tiempo LIMIT_P.
',5B3',5B0
)VV
/,0,7B0


5()/,0,7B3
3
)VV


2974

)D

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Reacción ante leva de referencia defectuosa con final de carrera (interrupción de la marcha)
La figura siguiente muestra una búsqueda del punto de referencia con la leva de referencia
defectuosa e inicio antes de REF.
',5B3
)D



)VV
/,0,7B0

5()

3

/,0,7B3

)DOOR
)VV
)D



La figura siguiente muestra una búsqueda del punto de referencia con leva de referencia
defectuosa e inicio sobre LIMIT_P.
',5B3

/,0,7B0

5()
)DOOR

/,0,7B3
3
)VV



)D

Reacción en caso de leva de referencia siempre activada sin final de carrera
Al final de la primera fase, una vez emitidos 16777215 impulsos, la marcha finaliza con los bits
de estado SYNC y POS_RCD borrados.

Reacción en caso de fallo de la leva de referencia sin final de carrera
Las tres fases de la marcha se ejecutan con la emisión de 16777215 impulsos en cada una. A
continuación, la marcha se interrumpe con los bits de estado SYNC y POS_RCD borrados.

Definir punto de referencia (a partir de 6ES7138-4DC01-0AB0)
Descripción del funcionamiento
El punto de referencia marca la referencia de su sistema de accionamiento. Con base en esta
referencia se orientarán tanto modos incrementales absolutos subsiguientes como el valor de
posición en la interfaz de realimentación. Para definir el punto de referencia debe asignarse el
valor de posición absoluto a la posición actual del motor paso a paso.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2975

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Petición de definición del punto de referencia
Una petición de definición del punto de referencia es una petición virtual sin desplazamiento.
Contiene la siguiente información:
● Posición del punto de referencia
● Modo de operación = 4 para la definición del punto de referencia
● Libre preajuste de sentido como inicio (Página 2993)
Nota
El 1STEP 5V comprueba los valores límite de la posición definida (mínimo 0 y máximo
16777215). El valor final se puede parametrizar.
Nota
Dado que el punto de referencia dentro de la zona de desplazamiento se puede ajustar a un
valor entre 0 y 16777215, pueden darse situaciones en las que un final de carrera ya no sea
alcanzable.
Ejemplos:
● Si el punto de referencia dentro de la zona de desplazamiento se ajusta a "0", el final de
carrera en sentido hacia atrás ya no podrá alcanzarse mediante una petición de
desplazamiento, ya que no se puede ir a posiciones negativas.
Asegúrese de que todas las posiciones de destino se encuentren en el rango de valores
positivo.
● En estado no sincronizado el eje no puede recorrer ninguna distancia que sea superior a la
zona de desplazamiento parametrizada. Si la zona de desplazamiento parametrizada es
inferior a la distancia entre ambos finales de carrera y el eje se encuentra en el final de
carrera en sentido adelante, el eje no podrá moverse hasta el final de carrera en sentido
atrás con un desplazamiento relativo.

Respuestas
Tras ejecutarse correctamente la petición, los bits de realimentación (Página 2997) SYNC y
POS_RCD están activados.
Si el bit de realimentación SYNC ya está activado antes de ejecutar la petición, permanece
activado. La ejecución correcta se reconoce también por el cambio del valor de posición en la
interfaz de realimentación.

Modo incremental relativo (posicionamiento relativo)
Descripción del funcionamiento
Con el modo incremental relativo se puede seguir moviendo el motor paso a paso durante un
trayecto predefinido y llegar de ese modo a una posición concreta.
El sentido y la velocidad de desplazamiento se definen con el arranque.

2976

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Petición de desplazamiento para modo incremental relativo
La petición de desplazamiento contiene la siguiente información:
● Trayecto (número de impulsos a ejecutar)
● Multiplicador G para la velocidad/frecuencia de salida Fa
● Factor de reducción R para la frecuencia base Fb parametrizada
● Modo de operación =0 para modo incremental relativo
● Parada en la leva de referencia (Página 2980)
● Preajuste de sentido como inicio (Página 2993)
Nota
El 1STEP 5V comprueba los valores límite del recorrido definido (mínimo 1 impulso y máximo
16777215 impulsos). El 1STEP 5V no comprueba la distancia hasta el final de carrera. La
marcha se detiene como máximo al llegar al final de carrera.

Respuestas
Cuando se inicia el modo incremental se desactiva el bit de realimentación
(Página 2997)POS_RCD.
Durante el modo incremental, su ejecución se indica con el bit de realimentación POS activado.
Una vez finalizado correctamente el modo incremental, el bit de realimentación POS_RCD
activado indica que se ha llegado a la posición.
Si el modo incremental se cancela, el bit de realimentación POS_RCD permanece
desactivado. Si el valor de realimentación (Página 2997) está ajustado en "Distancia residual",
una vez se detiene el modo incremental se indica el trayecto que queda por recorrer.

Modo incremental absoluto (posicionamiento absoluto) (a partir de 6ES7138-4DC01-0AB0)
Descripción del funcionamiento
Con el modo incremental absoluto se puede mover el motor paso a paso hasta una posición
predefinida y llegar de ese modo a una posición concreta.
La velocidad se define con el arranque. El 1STEP 5V define automáticamente el sentido y el
trayecto a recorrer con base en la posición de salida (valor real de la posición). También es
posible predefinir el sentido de un eje de valor módulo.
Nota
Si se activa simultáneamente inicio adelante e inicio atrás (DIR_P y DIR_M) para un eje de
valor módulo, el 1STEP 5V elegirá automáticamente el trayecto más corto hasta alcanzar
(Página 2982) la posición de destino.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2977

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Petición de desplazamiento para modo incremental absoluto
La petición de desplazamiento contiene la siguiente información:
● Posición de destino
● Multiplicador G para la velocidad/frecuencia de salida Fa
● Factor de reducción R para la frecuencia base Fb parametrizada
● Modo de operación = 2 para modo incremental absoluto
● Libre preajuste de sentido como inicio (Página 2993)
Nota
El 1STEP 5V comprueba los valores límite de la posición definida (mínimo 0 y máximo
16777215). El valor final se puede parametrizar.
La petición de desplazamiento sólo se ejecuta si previamente se ha calculado o definido la
posición del punto de referencia (el bit SYNC debe estar activado, ver "Búsqueda del punto de
referencia (Página 2970)" o bien "Definición del punto de referencia (Página 2975)").
La señal de control (Página 2993) "Parada en leva de referencia" no se tiene en cuenta.

Respuestas
Cuando se inicia el modo incremental se desactiva el bit de realimentación
(Página 2997)POS_RCD.
Durante el modo incremental, su ejecución se indica con el bit de realimentación POS activado.
Una vez finalizado correctamente el modo incremental, el bit de realimentación POS_RCD
activado indica que se ha llegado a la posición.
Si el modo incremental se cancela, el bit de realimentación POS_RCD permanece
desactivado. Si el valor de realimentación (Página 2997) está ajustado en "Distancia residual",
una vez se detiene el modo incremental se indica el trayecto que queda por recorrer.

Modo de velocidad (a partir de 6ES7138-4DC01-0AB0)
Descripción del funcionamiento
En este modo de operación se define la frecuencia con la que se deben generar los impulsos
(pasos). Si se modifica la frecuencia, tras una fase de aceleración o deceleración se generan
los impulsos con la nueva frecuencia. Los impulsos se generan de modo continuo hasta que
se detenga la petición de desplazamiento o, en el caso de un eje lineal, hasta que se alcance
un límite de la zona de desplazamiento.
La figura siguiente muestra el modo de velocidad con un eje de valor módulo.

2978

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
I

DVFHQGHQWH

N+]
&RQVLJQDGHIUHFXHQFLD

)UHFXHQFLDUHDO

)VV

W
)VV

















 




N+]
GHVFHQGHQWH

①
②
③
④
⑤
⑥
⑦
⑧
⑨
⑩
⑪
⑫

Especificación consigna de frecuencia
Inicio del modo de velocidad con frecuencia FSS, rampa de aceleración hasta la consigna de frecuencia
Nueva consigna de frecuencia (< FSS)
Rampa de deceleración hasta FSS, a continuación se detiene la salida de impulsos (no se detiene el modo de
velocidad)
Especificación consigna de frecuencia: Continuación del modo de velocidad con frecuencia FSS, rampa de acelera‐
ción hasta la consigna de frecuencia
Especificación consigna de frecuencia no válida: Se detiene el modo de velocidad
Inicio del modo de velocidad con frecuencia FSS, rampa de aceleración hasta la consigna de frecuencia
Especificación consigna de frecuencia
Especificación consigna de frecuencia: Cambio de la rampa de aceleración a la rampa de deceleración
Especificación consigna de frecuencia: Continuación de la rampa de deceleración
Especificación consigna de frecuencia
Especificación consigna de frecuencia negativa: Cambio de sentido

Petición de desplazamiento para modo de velocidad
La petición de desplazamiento contiene la siguiente información:
● Frecuencia nominal como valor de 32 bits (tipo de datos STEP 7 REAL)
● Preajuste de sentido mediante el signo de la frecuencia nominal (positivo: adelante)
● Modo de operación = 3 para modo de velocidad
● Libre preajuste de sentido como inicio (Página 2993)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2979

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
El 1STEP 5V comprueba los valores límite de la frecuencia definida (mínimo -510,0 kHz y
máximo +510,0 kHz).
La frecuencia definida se alcanza con la aceleración a parametrizada teniendo en cuenta la
frecuencia de inicio y parada Fss. Si la frecuencia definida es menor que el valor Fss, no se
generarán impulsos.
La emisión continua de la frecuencia finaliza si surgen los siguientes eventos:
● Se alcanzan los límites de la zona de desplazamiento parametrizado (0 en sentido atrás),
si no está parametrizado ningún eje de valor módulo
● Otras condiciones de interrupción para peticiones de desplazamiento (Página 2980)

Respuestas
Durante la tarea de desplazamiento, su ejecución se indica con el bit de realimentación
(Página 2997) POS activado.
Si se define una nueva frecuencia, el bit de realimentación POS_RCD se borra. Una vez se
alcanza la nueva frecuencia tras una fase de aceleración o deceleración, se vuelve a activar
el bit de realimentación POS_RCD.
Si el valor de realimentación (Página 2997) está ajustado en "Frecuencia", la frecuencia actual
se indica en la interfaz de realimentación como valor de 32 bits (tipo de datos STEP 7 REAL).
Nota
Si, durante una tarea de desplazamiento en curso con una frecuencia de 0,0 Hz, se solicita una
frecuencia distinta a 0,0 Hz y la parada de la tarea de desplazamiento mediante el bit de control
STOP, se detiene la tarea de desplazamiento. En tal caso, el bit de respuesta POS_RCD
queda en un estado indefinido.

Detener la petición de desplazamiento
Parada selectiva de la petición de desplazamiento

2980

- causada por

indicada por el bit de realimentación

STOP por bit de control

-

STOP externo en la entrada digital

STOP_EXT

Se ha alcanzado el final de carrera en sentido adelante (LI‐
MIT_P o bien entrada digital)

STOP_LIMIT_P

Se ha alcanzado el final de carrera en sentido atrás (LIMIT_M
o bien entrada digital)

STOP_LIMIT_M

Parada en leva de referencia

STOP_REF

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Recuerde que los finales de carrera también se utilizan en el modo de operación Búsqueda del
punto de referencia para la búsqueda de la leva de referencia.
Si una petición de desplazamiento se ha detenido en LIMIT_P, podrá retirar el eje del final de
carrera con una nueva tarea de desplazamiento con DIR_M. Al detenerse en LIMIT_M podrá
retirar el eje del final de carrera con DIR_P.

Parada en leva de referencia
Si al iniciar una marcha está seleccionada la función "Parada en leva de referencia" (el bit de
control STOP_REF_EN está activado) y durante la marcha se reconoce la leva de referencia,
se realiza una parada y la marcha finaliza.

Parada de la petición de desplazamiento en caso excepcional
En los siguientes casos se detiene la petición de desplazamiento con pérdida de
sincronización:
● Control manual incorrecto en la interfaz de control con la tarea de desplazamiento en curso
● Fallo externo ERR_24V por sobrecarga en la alimentación del sensor (p. ej. cortocircuito)
● STOP de la CPU/del maestro
● Con eje lineal: se alcanzan los límites de la zona de desplazamiento

Efectos
Si se da una de las causas citadas que provocan la parada del posicionamiento en curso, éste
finalizará con una rampa de deceleración.
Incluso en caso de parada excepcional de la tarea de desplazamiento, el valor de
realimentación se sigue actualizando. Des este modo es posible recorrer la distancia residual
en el momento de la parada mediante una nueva petición de desplazamiento en el modo
incremental relativo.

Final de carrera y parada externa
Mediante la parametrización se especifica si para la parada externa y los finales de carrera se
conectan contactos normalmente cerrados o normalmente abiertos.
● Contacto normalmente cerrado significa: la parada externa y el efecto de los finales de
carrera se ejecutan con una señal 0. Al llegar a los finales de carrera se borra el bit de
control correspondiente.
● Contacto normalmente abierto significa: la parada externa y el efecto de los finales de
carrera se ejecutan con una señal 1. Al llegar a los finales de carrera se activa el bit de
control correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2981

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Al detenerse durante la fase de aceleración, el 1STEP 5V sigue emitiendo impulsos durante
50 ms como máximo con la frecuencia ya alcanzada antes de iniciar el proceso de frenado.
Con ello se evitan cambios de frecuencia abruptos, que podrían provocar pérdidas de pasos.

Tipo de eje y área de desplazamiento (a partir de 6ES7138-4DC01-0AB0)
Resumen
Durante la parametrización se define el tipo de eje que va a controlar el motor paso a paso, el
cual a su vez es controlado por el 1STEP 5V. Es posible elegir uno de los siguientes tipos de
eje:
● Eje lineal
● Eje de valor módulo

Descripción del funcionamiento
Eje lineal
Es posible ajustar la zona de desplazamiento de un eje lineal. El límite inferior siempre es 0, el
límite superior se parametriza y tiene un rango de valores entre 1 y 16777215.
La zona de desplazamiento se puede limitar aún más con finales de carrera (área de trabajo).
La figura siguiente muestra un eje lineal.

0RYLPLHQWR
M

0RWRU
Eje de valor módulo
Un eje de valor módulo es una versión del eje rotativo. La figura siguiente muestra un eje de
valor módulo.





2982

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Fin del eje de valor módulo
Con el parámetro "Zona de desplazamiento" se define el fin del eje de valor módulo.
El valor real de posición no puede alcanzar el valor de la zona de desplazamiento debido a que,
desde el punto de vista físico, este valor máximo se encuentra en la misma posición que
corresponde al inicio del eje de valor módulo (0).
Ejemplo:
Para la zona de desplazamiento se especifica el valor 10000, ver figura anterior.
Durante el movimiento hacia delante, el valor de posición salta de 9999 a 0 en la interfaz de
realimentación y, durante el movimiento hacia atrás, de 0 a 9999.

Búsqueda del punto de referencia
Si durante la parametrización ha seleccionado el eje de valor módulo y el sistema de
accionamiento está provisto de una leva de referencia, es posible llevar a cabo una búsqueda
del punto de referencia (Página 2970).
Si después de generar un número de impulsos que corresponden a la zona de desplazamiento
parametrizada no se encuentra la leva de referencia, se interrumpe la marcha. En ese caso
permanecen borrados los bits de estado (Página 2997)SYNC y POS_RCD.

Definición del punto de referencia
La posición del punto de referencia sólo admite valores que van de 0 hasta el fin parametrizado
de la zona de desplazamiento - 1.

Posicionamiento relativo
El fin de la zona de desplazamiento (fin del eje de valor módulo) puede sobrepasarse en ambos
sentidos.

Posicionamiento absoluto
Si durante la parametrización se ha seleccionado el eje de valor módulo, para la posición de
destino sólo pueden asignarse valores que van de 0 hasta el fin parametrizado de la zona de
desplazamiento - 1.
A diferencia del eje lineal, indique al principio de la tarea de desplazamiento mediante la
especificación de sentido (Página 2993) con qué recorrido debe alcanzarse la posición de
destino:
● Inicio atrás (DIR_M): el 1STEP 5V llega a la posición de destino siguiendo la dirección en
que los valores reales de la posición son más bajos (posibilidad 1 en la siguiente figura).
● Inicio adelante (DIR_P): el 1STEP 5V llega a la posición de destino siguiendo la dirección
en que los valores reales de la posición son más altos (posibilidad 2 en la siguiente figura).
● Inicio adelante e inicio atrás simultáneamente (DIR_P y DIR_M): el 1STEP 5V elige
automáticamente el trayecto más corto hasta alcanzar la posición de destino (posibilidad 1
en la siguiente figura).
La figura siguiente muestra el posicionamiento absoluto con un eje de valor módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2983

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

3RVLELOLGDG
3RVLFLµQGH
FRQVLJQD




3RVLELOLGDG
3RVLFLµQUHDO


3RVLFLµQGH
FRQVLJQD




3RVLFLµQUHDO


Habilitación de impulsos
Descripción del funcionamiento
La habilitación de impulsos habilita la emisión de impulsos desde el 1STEP 5V hasta la etapa
de potencia. Sin la habilitación de impulsos no es posible realizar ninguna marcha.

Activar la habilitación de impulsos
La habilitación de impulsos se activa
● a través de la entrada digital DI0 con la "Función DI0" parametrizada como habilitación de
impulsos externa (Página 2986);
o bien
● a través del bit de control DRV_EN con la "Función DI0" parametrizada como parada
externa (Página 2986) o final de carrera adelante o atrás (Página 2986).
Se puede saber que la habilitación de impulsos está activada:
● porque el LED (Página 3000)RDY del 1STEP 5V luce cuando la parametrización es
correcta;
● porque el bit de realimentación (Página 2997)STS_DRV_EN está activado.

Desactivar la habilitación de impulsos
Si la habilitación de impulsos se desactiva durante el desplazamiento, este se detiene
inmediatamente, ya que no se emiten más impulsos a la etapa de potencia. La distancia
residual y el valor real de la posición ya no son válidos. La sincronización del eje con el punto
de referencia se pierde. El bit de realimentación SYNC y el LED RDY están borrados.
La desactivación de la habilitación de impulsos durante una parada provoca el borrado del bit
de realimentación SYNC y la desactivación del LED RDY.
En este caso puede ser necesario llevar a cabo una búsqueda del punto de referencia
(Página 2970).

2984

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modificar parámetros durante el funcionamiento
Introducción
Algunos parámetros del 1STEP 5V se pueden modificar durante el funcionamiento sin que sea
necesaria una reparametrización de toda la estación ET 200S.

Parámetros modificables
Los siguientes parámetros pueden modificarse:
● Frecuencia base Fb:
● Multiplicador n para frecuencia de inicio y parada Fss
● Multiplicador i para aceleración/deceleración
● Valor de realimentación en la interfaz de realimentación
Al iniciar la modificación de parámetros con el bit de control (Página 2993)C_PAR, se
comprueban sus valores. Si se han aplicado valores no admisibles, se activa el bit de
realimentación (Página 2997)ERR_JOB.
La orden de parametrización sólo afecta a los bits de realimentación correspondientes al
desarrollo de la orden ERR_JOB y STS_JOB.

Modificación de parámetros
La figura siguiente muestra el proceso para la modificación de parámetros.

%LWGHHUURU
(55B-2%

W

%LWGHFRQWURO

W

&B3$5
%LWGHUHVSXHVWD
676B-2%

W

/RVSDU£PHWURVVRQDFHSWDGRV)LQGHODWUDQVIHUHQFLD
$QXODFLµQGHODVROLFLWXG\PDQWHQHUGLVSRQLEOHVORVSDU£PHWURV
67(39KDFRPSUHQGLGRODVROLFLWXG
6ROLFLWDUPRGLILFDFLµQGHSDU£PHWURV\SUHSDUDUSDU£PHWURV

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2985

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Sólo uno de los siguientes bits de control debe estar activado en cada momento:
DIR_P, DIR_M o C_PAR.
De lo contrario, se notifica el error ERR_JOB. El mensaje de error de la orden se borra cuando
se inicia la siguiente orden.

Comportamiento de las entradas digitales
Introducción
Es posible parametrizar la función y la reacción (niveles activos) de las entradas digitales
DI0 (3) y DI1 (7). Estos parámetros no pueden ser modificados desde el programa de usuario.

Entrada digital DI0 (3)
La función de la entrada digital DI0 (3) se puede parametrizar como:
● Habilitación de impulsos externa
● Parada externa
● Final de carrera en sentido adelante
● Final de carrera en sentido atrás
Además, es posible parametrizar la reacción de la entrada digital DI0 (3) como:
● Contacto normalmente cerrado
● Contacto normalmente abierto

Entrada digital DI0 (3) como habilitación de impulsos externa
La entrada debe estar activada (Página 2984) durante el funcionamiento. Si la entrada está
activada y no hay errores en la parametrización, el 1STEP 5V está preparado para el
funcionamiento.

Entrada digital DI0 (3) como parada externa
Esta función de entrada permite detener (Página 2980) una tarea de desplazamiento en curso
con una señal externa.

Entrada digital DI0 (3) como final de carrera en sentido adelante/atrás
Estas funciones de entrada le permiten limitar la zona de desplazamiento en sentido adelante
o atrás con una señal externa. La señal tiene el mismo efecto que uno de los dos bits de control
LIMIT_P o LIMIT_M en la interfaz de control (Página 2993).

2986

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Entrada digital DI1 (7)
La función de la entrada digital DI1 (7) se puede parametrizar como:
● Sensor punto de referencia: Leva de referencia
● Sensor punto de referencia y final de carrera en sentido adelante
Esta opción de parametrización solo está disponible si la "Función DI0" no está
parametrizada como "Final de carrera en sentido adelante".
● Sensor punto de referencia y final de carrera en sentido atrás
Esta opción de parametrización solo está disponible si la "Función DI0" no está
parametrizada como "Final de carrera en sentido atrás".
Además, es posible parametrizar la reacción de la entrada digital DI1 (7) como:
● Contacto normalmente cerrado
● Contacto normalmente abierto

Entrada digital DI1 (7) como sensor punto de referencia
A esta entrada se conecta un sensor para la leva de referencia.
Se necesita una leva de referencia
● para una búsqueda del punto de referencia
● para un modo incremental con parada en la leva de referencia

Entrada digital DI1 (7) como sensor punto de referencia y final de carrera en sentido adelante/atrás
Estas funciones de entrada permiten limitar adicionalmente la zona de desplazamiento en
sentido adelante o atrás con la leva de referencia. La señal tiene además el mismo efecto que
uno de los dos bits de control LIMIT_P o LIMIT_M en la interfaz de control (Página 2993).
Si se ha parametrizado la reacción de la entrada digital DI1 (7) como "Sensor del punto de
referencia y final de carrera", el 1STEP 5V elige el sentido de arranque automáticamente hacia
el final de carrera, independientemente del preajuste de sentido de la tarea de desplazamiento.

Reacción a STOP de la CPU/del maestro
Introducción
El 1STEP 5V detecta la parada de CPU/del maestro. Su reacción consiste en detener la tarea
de desplazamiento (Página 2980) en curso.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2987

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Abandono del estado de parada de CPU/del maestro
Estación ET 200S

1STEP 5V

Sin reparametrización de la estación ET 200S ● La interfaz de realimentación del 1STEP 5V
permanece actualizada.
● Los valores modificados por orden de
parametrización se mantienen.
● Si en el momento de la parada de la CPU/del
maestro había un bit de control activado (DIR_P,
DIR_M, C_PAR), al abandonar el estado de
parada de la CPU/del maestro los bits STS_JOB y
ERR_JOB están activados. Borre el bit de control.
La marcha / orden de parametrización no se
ejecuta. A continuación puede iniciar una nueva
marcha mediante el bit de control.
● Tras la rampa de deceleración se desactivan la
habilitación de impulsos, el LED RDY y el bit de
estado SYNC.
Con reparametrización de la estación ET 200S ● Se reinician los datos sobre marchas y órdenes de
parametrización anteriores.
● Si en el momento de la parada de la CPU/del
maestro la habilitación de impulsos estaba
activada a través del bit de control DRV_EN, tras
la rampa de deceleración se desactivan la
habilitación de impulsos, el LED RDY y el bit de
estado SYNC.

Reparametrización de la estación ET 200S
Una reparametrización de la estación ET 200S por medio de la CPU/del maestro DP tiene lugar
en los siguientes casos:
● Conexión (POWER ON) de la CPU/el maestro DP
● Conexión (POWER ON) de IM 151 / IM 151 FO
● Tras fallo de la transmisión DP
● Tras cargar una parametrización o una configuración modificada de la estación ET 200S en
la CPU/ el maestro DP
● Al insertar el 1STEP 5V
● Con conexión de alimentación o inserción del correspondiente módulo de potencia

Consulte también
Habilitación de impulsos (Página 2984)

2988

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Comportamiento de las entradas digitales (-4DC00-)
Entrada digital DI 3
La función de la entrada digital DI 3 se puede parametrizar como:
● Habilitación de impulsos externa
● Parada externa
Además, es posible parametrizar la reacción de la entrada digital DI 3 como:
● Contacto normalmente cerrado
● Contacto normalmente abierto

Entrada digital DI 3 como habilitación de impulsos externa
La entrada debe estar activada (Página 2989) durante el funcionamiento. Si se ha definido la
entrada y no hay errores en la parametrización, el 1STEP 5V/204kHz está preparado para el
funcionamiento.

Entrada digital DI 3 como parada externa
Esta función de entrada permite detener una tarea de desplazamiento en curso con una señal
externa.

Entrada digital REF
A esta entrada se conecta un sensor para la leva de referencia.
Se necesita una leva de referencia
● para una búsqueda del punto de referencia
● para un modo incremental con parada en la leva de referencia

Habilitación de impulsos (-4DC00-)
Descripción del funcionamiento
La habilitación de impulsos habilita la emisión de impulsos desde el 1STEP 5V/204kHz hasta
la etapa de potencia. Sin la habilitación de impulsos no es posible realizar ninguna marcha.

Activar la habilitación de impulsos
La habilitación de impulsos se activa
● a través de la entrada digital DI 3 con la "Función DI" parametrizada como habilitación de
impulsos externa (Página 2989);

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2989

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
o bien
● a través del bit de control DRV_EN con la "Función DI" parametrizada como parada externa
(Página 2989)
Se puede saber que la habilitación de impulsos está activada:
● porque el LED (Página 3000)RDY del 1STEP 5V/204kHz luce cuando la parametrización
es correcta;
● porque está activado el bit de retroalimentación STS_DRV_EN.

Desactivar la habilitación de impulsos
Si la habilitación de impulsos se desactiva durante la marcha, ésta se detiene inmediatamente,
ya que no se emiten más impulsos a la etapa de potencia. El motor paso a paso termina sin
control de impulsos. De este modo, la distancia residual ya no es válida. La sincronización del
eje con el punto de referencia se pierde. El bit de retroalimentación SYNC y el LED RDY están
borrados.
La desactivación de la habilitación de impulsos durante una parada provoca el borrado del bit
de retroalimentación SYNC y la desactivación del LED RDY.
En este caso puede que sea necesario realizar una búsqueda del punto de referencia.

6.3.8.4

Configurar y parametrizar 1STEP 5V

Parámetros
Activar diagnóstico de grupo
Diagnóstico de grupo
El diagnóstico de grupo se activa en la casilla de verificación correspondiente.
"Cortocircuito en la alimentación del sensor" ERR_24V o "Error de parametrización"
ERR_PARA con diagnóstico de grupo habilitado provocan un diagnóstico de canal.

Seleccionar frecuencia base
Frecuencia base Fb
La frecuencia base Fb es el valor base para el ajuste de la frecuencia de inicio y parada, la
frecuencia de salida y la aceleración/deceleración.
Seleccione la frecuencia base adecuada para su aplicación.
Encontrará información detallada al respecto en Ajuste de la frecuencia base (Página 2966).

2990

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir el multiplicador n
Multiplicador n
El multiplicador n permite ajustar la frecuencia de inicio y parada de forma escalonada:
Fss = Fb × n
Rango de valores permitidos: 1 … 255

Consulte también
Ajuste de la frecuencia base (Página 2966)

Definir el intervalo de tiempo i
Intervalo de tiempo i
El multiplicador i permite ajustar la aceleración/deceleración de forma escalonada:
a = Fb / (i × 0,128 ms)
Rango de valores permitidos: 1 … 255

Consulte también
Ajuste de la frecuencia base (Página 2966)

Seleccionar el valor de realimentación
Valor de realimentación
Seleccione qué valor de realimentación estará disponible en la interfaz de realimentación
(Página 2997):
● Distancia residual
● Posición
● Frecuencia

Seleccionar función DI0
Función DI0
Seleccione qué función debe tener la entrada digital DI0 (3) (Página 2986):
● Habilitación de impulsos externa
● Parada externa

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2991

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● Final de carrera en sentido adelante
● Final de carrera en sentido atrás

Seleccionar función DI1
Función DI1
Seleccione qué función debe tener la entrada digital DI1 (7) (Página 2986):
● Sensor punto de referencia (leva de referencia)
● Sensor punto de referencia y final de carrera en sentido adelante
Esta opción sólo está disponible si la "Función DI0" no está parametrizada como "Final de
carrera adelante".
● Sensor punto de referencia y final de carrera en sentido atrás
Esta opción sólo está disponible si la "Función DI0" no está parametrizada como "Final de
carrera atrás".

Seleccionar la reacción de las entradas DI0 y DI1
Entrada DI0, entrada DI1
Seleccione la reacción de las entradas digitales DI0 (3) y DI1 (7):
● Contacto normalmente cerrado
● Contacto normalmente abierto

Consulte también
Comportamiento de las entradas digitales (Página 2986)
Detener la petición de desplazamiento (Página 2980)

Seleccionar la reacción de final de carrera en la interfaz de control
Final de carrera en la interfaz de control
Seleccione la reacción del final de carrera en la interfaz de control (Página 2993):
● Contacto normalmente cerrado
● Contacto normalmente abierto

Consulte también
Detener la petición de desplazamiento (Página 2980)

2992

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Activar eje de valor módulo
Eje de valor módulo
En el 1STEP 5V está preajustado el tipo de eje "Eje lineal". Si desea controlar un "Eje de valor
módulo", debe activar la casilla de verificación "Eje de valor módulo".

Consulte también
Tipo de eje y área de desplazamiento (a partir de 6ES7138-4DC01-0AB0) (Página 2982)

Definir la zona de desplazamiento
Zona de desplazamiento
El fin del eje de valor módulo se define con el parámetro "Zona de desplazamiento".
Rango de valores permitidos: 1 … 16777216

Consulte también
Tipo de eje y área de desplazamiento (a partir de 6ES7138-4DC01-0AB0) (Página 2982)

Interfaz de control y respuesta del 1STEP 5V
Interfaz de control del 1STEP 5V
Nota
Para el 1STEP 5V los datos siguientes de la interfaz de control están interrelacionados, es
decir, son datos coherentes:
● Bytes 0 … 3
● Bytes 4 … 7

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2993

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de la interfaz de control
La tabla siguiente muestra la asignación de la interfaz de control (salidas) del 1STEP 5V.
Dirección

Asignación

Bytes 0 a 3

Modo incremental relativo (de byte 4 bit 2 a bit 0 es 0),
Modo incremental absoluto (de byte 4 bit 2 a bit 0 es 2)
Byte 0

Multiplicador G: Fa = Fb × R × G (rango de valores 1 … 255)

Byte 1

Trayecto o posición bit 23 … bit 16

Byte 2

Trayecto o posición bit 15 … bit 8

Byte 3

Trayecto o posición bit 7 … bit 0

Búsqueda del punto de referencia (de byte 4 bit 2 a bit 0 es 1)
Byte 0

Multiplicador G: Fa = Fb × R × G (rango de valores 1 … 255)

Byte 1

Posición bit 23 … bit 16

Byte 2

Posición bit 15 … bit 8

Byte 3

Posición bit 7 … bit 0

Establecer punto de referencia (de byte 4 bit 2 a bit 0 es 4)
Byte 0

Reservado = 0

Byte 1

Posición bit 23 … bit 16

Byte 2

Posición bit 15 … bit 8

Byte 3

Posición bit 7 … bit 0

Modo de velocidad (de byte 4 bit 2 a bit 0 es 3)
Bytes 0 a 3

Frecuencia como tipo de datos STEP 7 REAL

Petición de parametrización (byte 5 bit 6 es 1)
Byte 0

Reservado = 0

Byte 1

Multiplicador i: a = Fb × R / (i × 0,128 ms) (rango de valores 1 … 255)

Byte 2

Multiplicador n: Fss = Fb × n × R (rango de valores 1 … 255)

Byte 3

Frecuencia base Fb:
● 0 = 800 Hz
● 1 = 400 Hz
● 2 = 200 Hz
● 3 = 80 Hz
● 4 = 40 Hz
● 5 = 20 Hz
● 6 = 8 Hz
● 7 = 4 Hz
● 8 = 2000 Hz

2994

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Dirección

Asignación

Byte 4

Petición de desplazamiento
Bit 7

Factor de reducción

R

● 0 = factor 1,0 (sin reducción)
● 1 = factor 0,1
Bit 6

Detener la tarea de desplazamiento

STOP

Bit 5

Inicio atrás

DIR_M

Bit 4

Inicio adelante

DIR_P

Bit 3

Versión de firmware V1.0.0:
Reservado = 0

EN_LF

A partir de la versión de firmware V1.0.1:
Habilitación de frecuencias inferiores a FSS en el modo de
velocidad
De bit 2 a bit 0 Modo de operación

MODE

● 0 = modo incremental relativo (posicionamiento relativo)
● 1 = búsqueda del punto de referencia
● 2 = modo incremental absoluto (posicionamiento
absoluto)
● 3 = modo de velocidad
● 4 = definición del punto de referencia
Petición de parametrización
De bit 7 a bit 0 El valor es irrelevante y se ignora
Byte 5

Petición de desplazamiento
Bit 7

Acuse de error de diagnóstico

Bit 6

Debe estar establecido en 0

EXTF_ACK
C_PAR

De bit 5 a bit 4 El valor es irrelevante y se ignora

FEEDBACK

Bit 3

Parada en leva de referencia

STOP_REF_EN

Bit 2

Habilitación de impulsos

DRV_EN

Bit 1

Final de carrera en sentido adelante

LIMIT_P

Bit 0

Final de carrera en sentido atrás

LIMIT_M

Petición de parametrización
Bit 7

Acuse de error de diagnóstico

EXTF_ACK

Bit 6

Modificar parámetro; debe estar establecido en 1

C_PAR

De bit 5 a bit 4 Valor de realimentación en la interfaz de realimentación

FEEDBACK

● 00 = distancia residual
● 01 = posición
● 10 = frecuencia
● 11 = reservado
Bit 3

El valor es irrelevante y se ignora

STOP_REF_EN

Bit 2

Habilitación de impulsos

DRV_EN

Bit 1

El valor es irrelevante y se ignora

LIMIT_P

Bit 0

El valor es irrelevante y se ignora

LIMIT_M

Byte 6

Reservado = 0

Byte 7

Reservado = 0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2995

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Aclaraciones sobre los bits de control
Bits

Aclaración

Frecuencia base Fb Codificación para el ajuste escalonado de la frecuencia base:
● 0 = 800 Hz
● 1 = 400 Hz
● 2 = 200 Hz
● 3 = 80 Hz
● 4 = 40 Hz
● 5 = 20 Hz
● 6 = 8 Hz
● 7 = 4 Hz
● 8 = 2000 Hz
Este parámetro se puede modificar durante el funcionamiento mediante una petición de parametriza‐
ción (Página 2985) con el bit de control C_PAR.
Modo de operación Codificación para modo de operación:
● 0 = modo incremental relativo (posicionamiento relativo)
● 1 = búsqueda del punto de referencia
● 2 = modo incremental absoluto (posicionamiento absoluto)
● 3 = modo de velocidad
● 4 = definición del punto de referencia
C_PAR

Con este bit se solicita una modificación de parámetros.

DIR_M

Con este bit se solicita y se inicia una tarea de desplazamiento en sentido hacia atrás.

DIR_P

Con este bit se solicita y se inicia una tarea de desplazamiento en sentido hacia delante.

DRV_EN

Si la entrada digital DI0 (3) no se utiliza como habilitación de impulsos externa, este bit se evalúa como
habilitación de impulsos. Si no se ha parametrizado una habilitación de impulsos externa y DRV_RN
cambia a 0, se puede perder el referenciado (SYNC).

EN_LF

A partir de la versión de firmware V1.0.1, con este bit en el modo de velocidad se permite la emisión de
frecuencias cuyo valor absoluto sea menor que la frecuencia de arranque-parada parametrizada.
Si el valor absoluto de la frecuencia predeterminada es menor que la frecuencia de arranque-parada,
la frecuencia predeterminada se emite sin rampa de aceleración ni de deceleración. Las frecuencias
mayores que la frecuencia de arranque-parada se emiten con rampa de aceleración o deceleración.
El valor absoluto de la frecuencia mínima que puede emitirse es 0,1 Hz.
El bit se evalúa solamente al comenzar el modo de velocidad. Si el bit cambia durante una petición de
desplazamiento Modo de velocidad, el cambio no surte efecto.

Final de carrera
LIMIT_M

Este final de carrera limita la zona de desplazamiento en sentido hacia atrás. Este bit se activa o se
borra en el programa de usuario.

Final de carrera
LIMIT_P

Este final de carrera limita la zona de desplazamiento en sentido hacia delante. Este bit se activa o se
borra en el programa de usuario.

EXTF_ACK

Bit de acuse para aviso de diagnóstico

2996

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Bits

Aclaración

FEEDBACK

Codificación para el valor de realimentación en la interfaz de realimentación:
● 00 = distancia residual
● 01 = posición
● 10 = frecuencia
● 11 = reservado
Este parámetro se puede modificar durante el funcionamiento mediante una petición de parametriza‐
ción (Página 2985) con el bit de control C_PAR.

Frecuencia

Valor de 32 bits (tipo de datos STEP 7 REAL) que contiene la frecuencia de impulsos que se va a
generar.

Multiplicador G

Factor para el ajuste escalonado de la velocidad/frecuencia de salida

Multiplicador i

Factor para el ajuste escalonado de la aceleración/deceleración
Este parámetro se puede modificar durante el funcionamiento mediante una petición de parametriza‐
ción (Página 2985) con el bit de control C_PAR.

Multiplicador n

Factor para el ajuste escalonado de la frecuencia de inicio y de parada
Este parámetro se puede modificar durante el funcionamiento mediante una petición de parametriza‐
ción (Página 2985) con el bit de control C_PAR.

Posición

Valor de 24 bits que contiene la posición de destino que se debe alcanzar

Factor de reduc‐
ción R

Con el bit activado la frecuencia base Fb se multiplica por 0,1. Con ello se reducen en igual medida la
frecuencia de salida Fa, la frecuencia de inicio y parada Fss y la aceleración/deceleración a.

STOP

Este bit permite detener en cualquier momento una tarea de desplazamiento con una rampa de de‐
celeración (ver "Detener la tarea de desplazamiento (Página 2980)").

STOP_REF_EN

Con el bit activado la función "Parada en leva de referencia" está activa. Cuando se detecta la leva de
referencia, la tarea de desplazamiento se detiene con una rampa de deceleración (ver "Detener la tarea
de desplazamiento (Página 2980)").

Trayecto

Valor de 24 bits que contiene el número de impulsos que deben avanzarse (sin signo)

Interfaz de realimentación del 1STEP 5V
Nota
Para el 1STEP 5V los datos siguientes de la interfaz de realimentación están
interrelacionados, es decir, son datos coherentes:
● Bytes 0 … 3
● Bytes 4 … 7

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2997

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de la interfaz de realimentación
La tabla siguiente muestra la asignación de la interfaz de realimentación (entradas) del
1STEP 5V.
Dirección

Asignación

Bytes 0 a 3

Distancia residual (bit 23 … bit 0 de 32 bits)/
Posición (bit 23 … bit 0 de 32 bits)/
Frecuencia (32 bits, tipo de datos STEP 7 REAL)

Byte 4

Bit 7

Cortocircuito en la alimentación del sensor

Bit 6

Reservado = 0

Bit 5

Error de parametrización

ERR_PARA

Bit 4

Punto de referencia calculado

SYNC

Bit 3

Reservado = 0

Bit 2

Posición alcanzada

POS_RCD

Bit 1

Error en la transmisión de la orden

ERR_JOB

Bit 0

Transmisión de la orden en curso

STS_JOB

Bit 7

Tarea de desplazamiento en curso

POS

Bit 6

El final de carrera adelante es la causa de la parada

STOP_LIMIT_P

Bit 5

El final de carrera atrás es la causa de la parada

STOP_LIMIT_M

Bit 4

La parada externa es la causa de la parada

STOP_EXT

Bit 3

La leva de referencia es la causa de la parada

STOP_REF

Bit 2

Estado DI0

STS_DI0

Bit 1

Estado DI1

STS_DI1

Bit 0

Estado habilitación de impulso activada

STS_DRV_EN

Byte 5

Byte 6

Número de error en caso de error en la transmisión de la orden

Byte 7

Reservado = 0

ERR_24V

Aclaraciones sobre los bits de realimentación
Bits

Aclaración

Frecuencia

Valor de 32 bits (tipo de datos STEP 7 REAL) que contiene la frecuencia de impulsos actual. La
frecuencia de impulsos puede presentar valores positivos (sentido adelante ) y negativos (sentido
atrás).

ERR_JOB

Este bit se activa cuando la orden no es clara o no es posible.
La causa del error se especifica mediante el número de error que se devuelve (ver la tabla "Número de
error en la interfaz de realimentación" que aparece más abajo).

ERR_PARA

Hay parámetros incorrectos en la parametrización de la estación ET 200S.
La causa del error se especifica mediante el número de error que se devuelve (ver la tabla "Número de
error en la interfaz de realimentación" que aparece más abajo).
El bit erróneo del parámetro se borra al transferir una parametrización correcta.

ERR_24V

La alimentación del encóder se ha sobrecargado (p. ej. por un cortocircuito) y actualmente está des‐
conectada. ERR_24V se pone a cero si ha sido acusado con el bit de control EXTF_ACK. Una vez
eliminada la sobrecarga, se vuelve a conectar la alimentación del encóder y ERR_24V permanece
borrado.

Número de error

Indica la causa del error si ERR_JOB o ERR_PARA están activados (ver la tabla "Número de error en
la interfaz de realimentación" que aparece más abajo).

2998

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Bits

Aclaración

POS

Desplazamiento: este bit permanece activado mientras la tarea de desplazamiento está en curso.

POS_RCD

Al iniciar un modo incremental o al especificar una nueva frecuencia nominal en el modo de velocidad,
se borra POS_RCD. Una vez finalizado correctamente el modo incremental o alcanzada la frecuencia
nominal en el modo de velocidad, se activa POS_RCD.
Si la marcha se interrumpe (por parada de la tarea de desplazamiento (Página 2980) o por borrado de
la habilitación de impulsos (Página 2984)), POS_RCD permanece borrado.

Posición

Valor de 24 bits que contiene la posición absoluta actual (sin signo).

Distancia residual

Valor de 24 bits que contiene el número de impulsos que todavía deben avanzarse (sin signo).

El byte 0 de la interfaz de realimentación es 0.
El byte 0 de la interfaz de realimentación es 0.
STOP_EXT

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido con una
parada externa.

STOP_LIMIT_M

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido al
alcanzar el final de carrera atrás.

STOP_LIMIT_P

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido al
alcanzar el final de carrera adelante.

STOP_REF

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido al
alcanzar la leva de referencia.

STS_DI0

El bit indica el estado de la entrada digital DI0 (3).

STS_DI1

El bit indica el estado de la entrada digital DI1 (7).

STS_DRV_EN

Este bit está activado si, dependiendo de la función parametrizada de la entrada digital DI0,
● la habilitación de impulsos externa está activada
o bien
● el bit de control DRV_EN para la habilitación de impulsos está activado.

STS_JOB

Este bit se activa como respuesta al detectar una solicitud de tarea de desplazamiento o parametri‐
zación y después se reinicia una vez ejecutada la orden.

SYNC

Este bit se activa tras una búsqueda del punto de referencia finalizada correctamente o tras definir
manualmente el punto de referencia.
Tras la parametrización con nuevos parámetros de la estación ET 200S o tras el borrado de la habili‐
tación de impulsos, el bit SYNC está borrado.

Número de error
Si en la interfaz de realimentación se indica un error en la transmisión de la orden (ERR_JOB
activado) o un error en la parametrización básica (ERR_PARA activado), la causa de dicho
error se especifica mediante un número de error.
La tabla siguiente muestra los números de error de la interfaz de realimentación.
Número de error

Significado

Causas de error generales
0D

Ningún error (en este caso ERR_JOB o ERR_PARA no están activados)

1D

La combinación de bits de control no es admisible (DIR_P, DIR_M, C_PAR)

2D

Otra tarea ya está en curso

Causas de error en una tarea de desplazamiento
16D

Inicio adelante (DIR_P) con final de carrera adelante (LIMIT_P) activado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2999

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Número de error

Significado

17D

Inicio atrás (DIR_M) con final de carrera atrás (LIMIT_M) activado

18D

Inicio con el bit de control de parada activado

19D

Inicio con parada externa activada

20D

Inicio aunque falte la habilitación de impulsos (interna o externa)

21D

Inicio con STOP_REF_EN activado estando la leva de referencia activada

22D

Inicio sin referencia (en modo incremental absoluto)

23D

Inicio con error de diagnóstico pendiente

24D

Inicio interrumpido por parada de CPU/maestro

25D

Inicio con el modo de operación equivocado (difiere de la solicitud)

26D

Trayecto o datos de la posición no admisibles

27D

Multiplicador G para la velocidad es cero

28D

Frecuencia en modo de velocidad no admisible

Causas de error en una orden de parametrización o en la parametrización básica
32D

Los datos de la frecuencia base no son admisibles

33D

El multiplicador n para la frecuencia de inicio y parada es cero

34D

El multiplicador i para la aceleración/deceleración es cero

35D

El valor de realimentación para la interfaz de realimentación no es admisible

36D

Combinación de funciones de DI0 y DI1 no admisible (final de carrera)

37D

Los datos correspondientes al fin de la zona de desplazamiento no son admisibles

6.3.8.5

Diagnóstico del 1STEP 5V

Diagnóstico con indicadores LED
Indicador LED del 1STEP 5V

6)


①
②
③
④
⑤

3000

1

2

5'<

326

3

4





5

Error de grupo (rojo)
Listo para tarea de desplazamiento (verde)
Posicionamiento en curso (verde)
Indicador de estado de la entrada digital 0 (verde)
Indicador de estado de la entrada digital 1 (verde)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Indicadores de estado y error mediante los LEDs del 1STEP 5V
La tabla siguiente muestra la indicación de estado y error del 1STEP 5V.
Evento (LED)
SF

RDY

POS

3

Causa

Solución

7
No hay parametrización o el módu‐ Compruebe la parametriza‐
lo enchufado es incorrecto. Hay un ción. Evalúe el aviso de
aviso de diagnóstico.
diagnóstico.

ON

ON

si el módulo está parametrizado co‐
rrectamente y hay habilitación de
pulsos
ON

si la tarea de desplazamiento está
en curso
ON

DI 0 está activada
ON

DI 1 está activada

Tipos de error
En el manual de producto del módulo de interfaz utilizado en la estación ET 200S encontrará
información sobre la estructura del diagnóstico de canal.

Tipos de error del 1STEP 5V
La tabla siguiente muestra los tipos de error del 1STEP 5V.
Tipo de error

Significado

Solución

1D

00001:
Cortocircuito

Cortocircuito en la ali‐
mentación de sensor.

Compruebe el cableado de los interruptores. Co‐
rregir el cableado del proceso.

9D

01001:
Error

Ha aparecido un error
interno en el módulo.

Sustituir el módulo.

16D

10000:
Error de parametri‐
zación

Módulo no parametri‐
zado.

Corregir la parametrización.

6.3.9

Uso del IM 174

6.3.9.1

Vista general

Módulo de interfaz para accionamientos analógicos y motores paso a paso
Un módulo IM 174 (Interface Module) es un módulo de interfaz, capaz de accionar hasta 4
accionamientos con interfaz analógica de consigna con un encóder TTL o SSI por eje en el
PROFIBUS isócrono.
La comunicación entre el controlador y el IM 174 se realiza exclusivamente a través de
PROFIBUS, a través de un tipo de telegrama específico del IM 174, el cual contiene, junto a los

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3001

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
datos digitales de entrada/salida por cada accionamiento un tipo de telegrama especificado
según el perfil PROFIDrive (telegrama estándar 3 y 81). En el marco de la comunicación cíclica
DP se transmiten al controlador los valores reales del accionamiento (valores de encóder) del
módulo IM 174 a través del PROFIBUS isócrono y las consignas de velocidad calculadas por
el controlador al módulo IM 174.
Las consignas de velocidad transmitidas son emitidas a continuación por el módulo IM 174
como valores analógicos o impulsos a los accionamientos.

Campo de aplicación
El IM 174 realiza las siguientes tareas de control:
● Controlar accionamientos analógicos
● Controlar motores paso a paso
● Leer datos de encóder

6.3.9.2

Configuración y programación del IM174

Configuración del IM174
Pasos necesarios - Descripción general
El IM 174 se configura en el área "Propiedades" de la ventana de inspección. Para ello es
preciso ejecutar los siguientes pasos:
1. Agregar un módulo PROFIBUS a la configuración hardware
2. Parametrizar PROFIBUS isócrono
3. Definir parámetros del accionamiento y encóder para los ejes

Parametrizar PROFIBUS isócrono
1. En el área "Dirección PROFIBUS" seleccione la red PROFIBUS y asigne una dirección
PROFIBUS.
Nota
Dirección PROFIBUS en el interruptor DIL
En el módulo PROFIBUS IM 174 la dirección PROFIBUS se ajusta a través de interruptores
DIL. Para que una dirección PROFIBUS ajustada en el interruptor DIL esté activa, es
preciso realizar una transición de apagado y encendido del IM 174. La dirección PROFIBUS
asignada debe coincidir con la dirección PROFIBUS ajustada en el interruptor DIL.
2. En el área "Modo isócrono" active la casilla de verificación "Sincronizar esclavo DP con
ciclo DP equidistante" y ajuste los tiempos Ti/To.
3. En el área "Encóder y accionamientos" seleccione el tipo de telegrama (Página 3012).
4. En el área "Direcciones" defina las áreas de direcciones para los parámetros de entrada y
salida de los ejes y asigne una imagen de proceso.

3002

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir parámetros de accionamiento y de encóder para los ejes
1. En el área "Encóder y accionamientos" seleccione para cada eje eltipo de accionamiento
(Página 3003) y ajuste los parámetros de accionamiento (Página 3003).
2. En el área "Encóder y accionamientos" seleccione para cada eje el tipo de encóder
(Página 3003) y, en caso necesario, ajuste los parámetros de encóder (Página 3008)
necesarios.
3. En el área "Parámetros" puede ajustar los parámetros (Página 3011) para el
comportamiento de desconexión.

Encóder y accionamientos
La propiedad "Encóder y accionamientos" de la navegación local permite parametrizar los
accionamientos y encóders conectados al IM 174.

Tipos de accionamientos
Se pueden seleccionar los siguientes tipos de accionamientos:
● Servomotor (accionamiento analógico)
● Stepper (motor paso a paso)

Tipos de encóder para accionamientos analógicos
Para los servomotores se pueden seleccionar los siguientes tipos de encóder
● Tipo de encóder no disponible
● Encóder TTL
● Encóder SSI

Tipos de encóders para motores paso a paso
Para los motores paso a paso se pueden seleccionar los siguientes tipos de encóder
● Tipo de encóder no disponible
● Encóder TTL
● Encóder SSI
● Encóder Stepper

Parámetros de accionamiento
Tipos de accionamiento
Se pueden seleccionar los siguientes tipos de accionamiento:
● Servo (accionamiento analógico)
● Stepper (motor paso a paso)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3003

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Tipo de accionamiento Servo
Si ha seleccionado el tipo de accionamiento Servo, puede cambiar el rango de tensión de la
tensión de salida analógica con el botón de opción "Unipolar".

Unipolar no seleccionado
Si la casilla "Unipolar" no está activada, se emite como consigna una señal analógica con una
tensión comprendida en el rango de -10V a +10V. Esto permite desplazar el accionamiento en
dos sentidos.

Unipolar seleccionado
Si la casilla "Unipolar" no está activada, se emite como consigna una señal analógica con una
tensión comprendida en el rango de 0V a +10V. El IM 174 define a continuación el sentido de
giro en función de la consigna actual de velocidad, a través de una salida digital del IM 174:
● Señal de sentido de giro para el eje 1 -> salida digital X11, Pin 13
● Señal de sentido de giro para el eje 2 -> salida digital X11, Pin 15
● Señal de sentido de giro para el eje 3 -> salida digital X11, Pin 17
● Señal de sentido de giro para el eje 4 -> salida digital X11, Pin 19

Alt.DrvRdy
En función del accionamiento que se utilice, la señal actual Drive Ready emitirá distintos avisos
de estado:
● El accionamiento notifica el estado "Listo para conexión" mediante la señal Drive Ready.
Para conectar el accionamiento, es necesario habilitarlo por medio del controlador.
● El accionamiento notifica el estado "Disponibilidad" mediante la señal Drive Ready. En este
estado, el accionamiento está listo para ser regulado y se guía directamente por una
consigna.
No active la función "Alt.DrvRdy" si su accionamiento emite el estado "Listo para conexión" con
la señal Drive Ready (por lo general accionamientos servo).
Active la función "Alt.DrvRdy" si su accionamiento emite el estado "Disponibilidad" con la señal
Drive Ready (por lo general accionamientos Stepper).
En la información del producto del accionamiento se ofrecen datos sobre el aviso de estado
que emitirá el accionamiento utilizado.

Tipo de accionamiento "Stepper"
Para accionamientos "Stepper" en los campos "Frecuencia máx. [Hz]" y "Frecuencia norm.
[Hz]" es preciso introducir frecuencias [Hz] específicas del accionamiento o del proceso. Para
poder operar un motor Stepper con un IM 174 se requiere la electrónica de potencia
correspondiente (p. ej. FM Stepdrive), así como el motor Stepper.
En la siguiente figura se representa una configuración básica de un IM 174 con accionamientos
Stepper con y sin encóder:

3004

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

0DHVWUR'3FRQ
LQWHUID]'3352),%86
'3'5,9(

,0
)067(3'5,9(

)067(3'5,9(

6,0267(3 77/9

6,0267(3 66,

FRQVHQVRU

Figura 6-1

6,0267(3
VLQVHQVRU

Estructura básica de un IM 174 con FM-STEPDRIVE y motor SIMOSTEP

Alt.DrvRdy
En función del accionamiento que utilice, la señal actual Drive Ready emitirá distintos avisos
de estado:
● El accionamiento emite el estado "disponible" mediante la señal Drive Ready. Para
conectar el accionamiento, es necesario habilitarlo por medio del controlador.
● El accionamiento emite el estado "Disponibilidad" mediante la señal Drive Ready. En este
estado, el accionamiento está listo para ser regulado y se guía directamente por una
consigna.
No active la función "Alt.DrvRdy" si su accionamiento emite el estado "Listo para conexión" con
la señal Drive Ready (por lo general accionamientos servo).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3005

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Active la función "Alt.DrvRdy" si su accionamiento emite el estado "Disponibilidad" con la señal
Drive Ready (por lo general accionamientos Stepper).
En la información del producto del accionamiento se ofrecen datos sobre el aviso de estado
que emitirá el accionamiento utilizado.

Frecuencia máx. [Hz] y frecuencia norm. [Hz]
En los campos "Frecuencia máx. [Hz]" (frecuencia máxima) y "Frecuencia normal [Hz]"
(frecuencia nominal) es preciso introducir frecuencias [Hz] específicas del accionamiento o del
proceso.

Cálculo de la frecuencia normal
La frecuencia normal se calcula con la fórmula:
Frecuencia normal [Hz] = n [r/min] / 60 * Resolución en el motor paso a paso
n [r/min]:

Velocidad del motor Stepper
(los valores característicos oscilan entre 500 y 1000 re‐
voluciones por minuto)
Resolución en el motor paso a pa‐ Número de incrementos en el motor Stepper (valores ca‐
so:
racterísticos: 500, 1000, 5000)

Cálculo de la frecuencia máx.
La frecuencia máx. se calcula con la fórmula:
Frecuencia mas [Hz] = nmáx [r/min] / 60 * Resolución en el motor paso a paso
nmax [r/min]:

Velocidad máxima del motor Stepper
(los valores característicos oscilan entre 500 y 1000 re‐
voluciones por minuto)
Resolución en el motor paso a pa‐ Número de incrementos en el motor Stepper (valores ca‐
so:
racterísticos: 500, 1000, 5000)
La velocidad máxima nmax puede determinarse en base a las curvas características de
funcionamiento
de los motores Stepper. En este caso, con el momento M_t tecnológicamente necesario hay
que
determinar una velocidad máxima nmax del motor que se corresponda con la velocidad máxima
del eje.

3006

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
0
0BW












Q>8PLQ@

Q


Figura 6-2

 
QPD[

Curvas características de un motor paso a paso

Nota
Zona de sobrecarga
Para evitar un funcionamiento en la zona de sobrecarga utilice el accionamiento
exclusivamente en la frecuencia norm.

Descripción del comportamiento de un motor Stepper
La precisión de la posición, la velocidad n y el par M desarrollado por el motor resultan
decisivos para exigencias específicas de procesos. Se debe tener en cuenta el
comportamiento del motor Stepper para poder determinar dichos valores óptimamente. A
partir de una determinada velocidad del motor Stepper (aprox. a 500U/min), el par desarrollado
por el motor decae de forma logarítmica, tendiendo a 0 a partir a velocidad máxima (aprox. a
3000U/min). Consulte los datos específicos en la hoja de datos del motor utilizado.

Seguimiento del modo de funcionamiento en la zona de sobrecarga
Si el motor Stepper no es capaz de desarrollar el momento requerido, se desincroniza con
respecto a la frecuencia predeterminada y su velocidad se colapsa. Ello puede provocar
incluso su parada. En este estado sólo se puede realizar un nuevo registro de movimiento
después de una consigna temporal predeterminada de 0. En un eje de posicionamiento sin
sensor adicional, la posición del recorrido se pierde y con ello la sincronización del eje.
Nota
Accionamiento paso a paso con un sensor tipo "Stepper" (modo PULSE REFEED)
Si se opera con un sensor del tipo "Stepper" (modo PULSE REFEED) en estado de parada
puede oscilar el motor paso a paso.
Si el proyecto está parametrizado con los ajustes por defecto, esto puede ocurrir cuando el
motor paso a paso, debido a un movimiento de desplazamiento previo, se ha llevado a una
posición que queda exactamente entre dos pasos naturales del mismo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3007

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Motor paso a paso con encóders TTL / SSI
Si se usan encóders TTL / SSI es necesario atender a la relación entre resolución del encóder
(incl. resolución fina) y la resolución de pasos del motor.
Para evitar la oscilación del motor entre dos valores de posición cuando está parado, el
incremento del motor paso a paso debe ser inferior, en distancia, a la representación de la
realimentación del sensor (es decir, el incremento del motor paso a paso debe ser superior a
la resolución del sensor). Dado el caso debe aplicarse un sensor con menor resolución o
aumentar la resolución de pasos en el motor paso a paso.

Parámetros de sensores
Tipos de encóder para accionamientos analógicos
Para accionamientos analógicos es posible seleccionar los siguientes tipos de encóder:
● Tipo de sensor no existe
● Encóder TTL
● Sensor SSI

Tipos de encóder para accionamientos paso a paso
Para accionamientos paso a paso es posible seleccionar los siguientes tipos de encóder:
● Tipo de sensor no existe
● Encóder TTL
● Sensor SSI
● Encóder Stepper

Tipo de sensor "Ninguno"
Para el tipo de accionamiento "Servo" se aplica: El eje x no existe o no debe utilizarse. En el
telegrama PROFIBUS sólo se transmiten datos de usuario vacíos para este eje.
Para el tipo de accionamiento "Stepper" se aplica: El Stepper se opera sin sensor.
Si el Stepper está parametrizado para el modo de funcionamiento sin sensor, sólo se autoriza
la utilización como eje de velocidad.
Si no se utiliza un sensor (SSI/TTL), es posible seleccionar el tipo de encóder "Stepper" para
permitir un posicionamiento, incluso si no se ha conectado ningún sensor.

Encóder TTL
En el encóder tipo "TTL" se pueden ajustar los siguientes parámetros:
● Resolución: Resolución del sensor expresada en impulsos por vuelta
● Cálculo de la velocidad activado: IM 174 calcula la velocidad si la casilla de verificación se
encuentra activada.

3008

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● Velocidad normalizada: Este campo de entrada sólo es visible si se ha activado la opción
"Cálculo de la velocidad activado". Indique la velocidad nominal del motor en r/min. Con el
cálculo de la velocidad a través del IM 174, la velocidad se calcula con menos ruido.
● Bits reservados para una resolución precisa: Ajuste 0 - 15
A través del parámetro "Bits reservados para resolución fina" se indica la multiplicación de
impulsos deseada para los incrementos transferidos en la señal de valor real del sensor
G1_XIST1 y G1_XIST2.
El ajuste representa una multiplicación de impulso entre 20 = 1 hasta 215 = 32768.
Nota
Resolución fina mínima para sensores TTL
En los sensores TTL se debe considerar y ajustar siempre una resolución fina mínima de
22(=4).
7UDQVPLWWHGDFWXDOHQFRGHUYDOXH*B;,67RU*B;,67




2YHUIORZV

&XUUHQWHQFRGHULQFUHPHQWV

5HVHUYHGELWVIRUILQHUHVROXWLRQ

Sensor SSI
En el encóder tipo "SSI" se pueden ajustar los siguientes parámetros:
● Paridad: Se debe seleccionar esta opción si los datos del encóder se transmiten al IM174
con bit de paridad.
● Longitud del telegrama: Ajuste 0 - 25
Número de bits de datos de usuario enviados por el encóder
● Encoding: Se soportan los siguientes tipos de codificación del encóder:
– Binary
– Gray

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3009

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● Velocidad de transferencia: La velocidad ajustada debe ser idéntica en todos los encóders
SSI. Si hay ajustadas diferentes velocidades, se adopta la velocidad del encóder SSI que
tenga asignado el número de encóder más alto.
Se soportan las siguientes velocidades:
– 187,5 kbits/s
– 375 kbits/s
– 750 kbits/s
– 1,5 Mbits/s
– 3,0 Mbits/s
Nota
Ajuste como máximo 187,5 kbits/s. No es conveniente asignar a este módulo
velocidades más altas.
● Bits reservados para una resolución fina: Ajuste 0 - 15
A través del parámetro "Bits reservados para resolución fina" se indica la multiplicación de
impulsos deseada para los incrementos transferidos en la señal de valor real del sensor
G1_XIST1 y G1_XIST2.
El ajuste representa una multiplicación de impulso entre 20 = 1 hasta 215 = 32768.

Sensor Stepper
Accionamiento en modo PULSE REFEED
Un eje x con el tipo de accionamiento "Stepper" se puede operar con un sensor tipo "Stepper".
En este modo de operación, el IM 174 retroalimenta las consignas al controlador en forma de
valores reales.
En el encóder tipo "Stepper" se pueden ajustar los siguientes parámetros:
● Vigilancia del motor: Activando la casilla de verificación "Vigilancia motor" se supervisa
continuamente la cantidad de pasos de un motor Stepper con base en la distancia al punto
de referencia definido (ver "Distancia Bero"). Cuando se trabaja sin sensor, el
accionamiento Stepper sirve también para realimentar el valor real (pulse refeed).
● Distancia Bero: En "Distancia Bero" se introduce la cantidad de pasos (para el
accionamiento Stepper usado) entre dos señales Bero. El recorrido entre las dos señales
Bero es la distancia al punto de referencia.
● Tolerancia Bero: Ajuste 0 - 65535
En "Tolerancia Bero" se introduce la desviación de pasos permitida con respecto a la
distancia Bero. El rango del número de pasos resultante se encuentra dentro de la siguiente
tolerancia:
Rango del número de pasos resultante = Distancia Bero ± 1/2 * Tolerancia Bero
● Bits reservados para una resolución precisa: Ajuste 0 - 15
A través del parámetro "Bits reservados para resolución fina" se indica la multiplicación de
impulsos deseada para los incrementos transferidos en la señal de valor real del sensor
G1_XIST1 y G1_XIST2.
El ajuste representa una multiplicación de impulso entre 20 = 1 hasta 215 = 32768.

3010

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parámetros
La propiedad "Parámetros" de la navegación local permite definir parámetros importantes para
el IM 174.

Rampa de parada [ms]
El rango de valores oscila entre 0 y 65535 ms.
A través del parámetro "Rampa de parada" se puede definir una función lineal en el tiempo que,
en caso de detectarse un fallo, haga que todos los accionamientos conectados al IM 174 se
frenen hasta la consigna 0.
La rampa de parada actúa tras los fallos siguientes:
● Alarma de temperatura del módulo (aprox. 90°C CON, aprox. 85°C DES)
● Errores de señales de vida
● Error de sincronización entre maestro y esclavo
Nota
Valor de parámetro 0
En presencia de un fallo, un valor de parámetro 0 hace que el accionamiento se pare de
forma natural.





W>PV@


1)

Consigna máxima

2)

Consigna actual

3)
Valor del parámetro: Rampa de parada
Figura 6-3
Parámetros: Rampa de parada

Tiempo de retardo de apagado
El rango de valores oscila entre 0 y 65535 s.
El parámetro "Tiempo de retardo de apagado" permite especificar una temporización tras la
que, en caso de que se produzca una alarma de temperatura, se activa la rampa de parada.
El tiempo de retardo de apagado inicia al superarse una temperatura de 90 °C en el módulo.
Si mientras está activo el tiempo de retardo la temperatura baja a aprox. 85 °C, entonces no se
activa la rampa de parada y se desactiva el tiempo de retardo de apagado.

Errores de señales de vida tolerables
El rango de valores oscila entre 0 y 15.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3011

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Con el parámetro "Errores de señales de vida tolerables" se especifica el número de errores
de señales de vida tolerables del maestro DP. Si se sobrepasa el número parametrizado se
activa la rampa de parada. El rango de valores se encuentra en

Modo conforme 611U
En el modo conforme 611U el origen de la señal para referenciar los ejes ya no se especifica
mediante el telegrama estándar PROFIDrive (STD3, palabra de control del encóder G1_STW)
sino a través de la palabra digital de salida adicional contenida en el telegrama PROFIBUS del
IM 174 (ver tabla "Estructura de telegrama" en el apartado "Tipo de telegrama").
Modo conforme 611U:
● Desactivado
La fuente de la señal para el referenciado se especifica a través de la palabra de control del
encóder Gx_STW en el telegrama estándar PROFIDrive.
● Activado
La fuente de la señal para el referenciado se especifica a través de la palabra digital de
salida adicional contenida en el telegrama PROFIBUS.

Seleccionar tipo de telegrama
Tipo de telegrama
El Esclavo DP IM 174 opera con dos tipos de telegramas específicos: cuatro ejes con un
sensor cada uno (telegrama estándar 3 y 81) y datos E/S.
Nota
Telegrama estándar 81
El telegrama estándar 81 sólo puede utilizarse para sensores.

3012

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Estructura de telegrama
Estructura de telegrama
La siguiente visión global explica la estructura del telegrama.
Tabla 6-1
Tipo de telegrama

Descripción

4 ejes con un sensor cada uno, telegrama están‐
dar 3 + EA, PZD-5/9 A/E 1/1 o telegrama 81 + EA,
PZD-2/6 + A/E 1/1

4 telegramas estándar 3 ó 81 y por cada uno una
palabra PZD para datos E/S digitales

PZD x/y Número de datos de proceso/palabras, x: consigna, y: valor real,
p. ej. PZD-5/9:
5 datos de proceso/palabras para consignas
9 datos de proceso/palabras para valores reales
(VWUXFWXUDGHWHOHJUDPDGHO,0
(MH
67'µ67'
/RZ

(MH

(MH

(MH

(6

67'

67'

67'

$:RUG

(MH

(MH

(MH

(6

67'

67'

67'

(:RUG

(MH
67'µ67'

&RQVLJQDV
PDHVWUR!HVFODYR
+LJK
9DORUHVUHDOHV
HVFODYR!PDHVWUR

67'7HOHJUDPDHVW£QGDUFRQIRUPHODHVSHFLILFDFLµQ352),'ULYH9
$:RUGGDWRVGHVDOLGDGLJLWDOHV ELW
(:RUGGDWRVGHHQWUDGDGLJLWDOHV ELW

7HOHJUDPDHVW£QGDU,QWHUID]FRQVLJQDGHYHORFLGDGELWFRQVHQVRU
3='

3='

67:
/RZ

3='

3='

3='

162//B%
3='

=6:

67:

3='

1,67B%

3='
&RQVLJQD PDHVWUR!HVFODYR

*B67:

+LJK
3='

3='

3='

=6:

*B=6:

3='

3='

3='

*B;,67
9DORUUHDO HVFODYR!PDHVWUR

*B;,67

7HOHJUDPDHVW£QGDU,QWHUID]FRQVLJQDGHYHORFLGDGELWFRQVHQVRU
3='

3='

67:

*B67:

3='

3='

=6:

*B=67:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

&RQVLJQD PDHVWUR!HVFODYR
3='

3='

*B;,67

3='

3='

*B;,67

9DORUUHDO
HVFODYR!PDHVWUR

3013

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Tipo de telegrama

Descripción

$:RUG GDWRVGHVDOLGDGLJELW
+LJK%\WH


 

/RZ%\WH
 

 



6DOLGDGLJದದ!;3LQ
6DOLGDGLJದ6H³DOGHGLUHFFLµQದFRQ
XQLS+XVLOORದ!;3LQ
6HOHFFLµQ5HIHUHQFLDGRPHGLDQWHVH³DO
FHURH[WHUQD
0RGRFRQIRUPH8
1RXWLOL]DGR

(:RUG GDWRVGHHQWUDGDGLJELW
+LJK%\WH


   

/RZ%\WH




 

 
(QWUDGDGLJದ6H³DOFHURH[Wದ
!;3LQ
(QWUDGDGLJದ3DOSDGRUದ
!;3LQ
(QWUDGDGLJದ'UYB5G\ದ
!;3LQ
(QWUDGDGLJದ'UYB5G\ದ
!;3LQ
1RXWLOL]DGR

Nota
El tipo de telegrama del esclavo DP IM 174 ajustado debe coincidir con el tipo de telegrama
ajustado en el controlador. No tiene lugar una sincronización automática.

3014

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Palabra de control del sensor Gx_STW
La siguiente visión global contiene una descripción de la palabra de control del encóder
(extracto). La visión global se refiere a los siguientes requisitos:
● Búsqueda de la marca de referencia
● Medida al vuelo
● Fallo de sensor

Nota
Medición de flancos ascendentes o descendentes
El IM 174 soporta únicamente la medición de flancos ascendentes o descendentes.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3015

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Valor real adicional del sensor Gx_XIST2
La siguiente visión global describe los códigos de error en Gx_XIST2 con G1_ZSW, Bit15 ==
1:
Tabla 6-2
G1_XIST2

Códigos de error en Gx_XIST2
Significado

Causas posibles/descripción

1Hex

Error de suma del sen‐
sor

El nivel de señal de los sensores es demasiado bajo, presenta
fallos (blindaje insuficiente) o la vigilancia de rotura de hilo se ha
activado.

2Hex

Vigilancia de señales
cero

Entre dos señales cero del sensor ha surgido una fluctuación en
la medición de la posición del rotor (posiblemente se han perdi‐
do 2 rayas del sensor).

Palabra de estado ZSW_1 - bit 11 a bit 14
La siguiente visión global describe la palabra de estado ZSW_1 en relación a los avisos
específicos del módulo bit 11 a bit 14:
Tabla 6-3

Palabra de estado ZSW_1

Bit

Nombre

Descripción

11

Error de temperatura

Se ha excedido una temperatura determinada en la carcasa del módulo IM 174.

12

Error de sincronización PLL

El IM 174 no puede sincronizarse con la señal de control global.

13

Error Master Life Sign

El IM 174 no puede sincronizarse con la señal de vida maestra.

14

Error de accionamiento

Se ha producido un error de accionamiento, p. ej. falta la señal Drive Ready.

Vigilancia de la marca cero
Funcionamiento de la vigilancia de la marca cero del sensor
La vigilancia de la marca cero compara los incrementos detectados entre dos marcas cero con
la resolución del sensor configurada. Si se detecta una diferencia se notifica un error del
sensor.
Las pistas A y B, así como la pista Z del sensor, deben encontrarse simultáneamente en el nivel
High, para que la vigilancia de la marca cero puede ejecutarse correctamente.
Limitaciones:
● El fallo de una marca cero en sí no provoca irremediablemente un error, ya que la
comprobación solo se ejecuta al alcanzar la marca cero.
● El resultado de los incrementos MOD 16 contados debe ser distinto de cero para notificar
un error.
● El resultado de los incrementos MOD 10 contados debe ser distinto de cero para notificar
un error.
Ejemplo:
Configuración del sensor: rayas TTL 2048

3016

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
incrementos del sensor contados 2049 -> error del sensor
incrementos del sensor contados 1024 -> ningún error del sensor

Programar IM 174
Para la programación del IM 174 se recomienda el paquete opcional "Easy Motion Control".

Instrucciones para IM 174
La lista de instrucciones Easy Motion Control incluye las siguientes instrucciones para IM 174:
● EncoderIM174 - Uso del IM 174 como módulo de lectura de recorrido para encóders
incrementales y absolutos
● OutputIM174 - Uso de un canal del módulo IM 174 como módulo de salida

6.3.10

Uso de Easy Motion Control

6.3.10.1

Posicionamiento con Easy Motion Control

Descripción del producto
Descripción general
Easy Motion Control permite posicionar accionamientos de forma regulada. El movimiento se
controla exclusivamente por software (instrucciones) en la CPU. Para la conexión con los
accionamientos no se requiere hardware especial, pero para detectar los valores de posición
real y para emitir las consignas de velocidad es obvio que debe estar presente la periferia
correspondiente.
Las instrucciones de Easy Motion Control se han elaborado de conformidad con la "Technical
Specification Function blocks for motion control V1.0" de PLCopen.
La parametrización se lleva a cabo mediante un software de configuración que también ofrece
soporte en la puesta en marcha mediante funciones de prueba. Todos los parámetros de un
eje se encuentran en un bloque de datos, el DB de eje.
Los accionamientos pueden conectarse a periferia centralizada o bien, a través de un maestro
DP/controlador IO, a periferia descentralizada.
El desplazamiento se realiza interconectando las instrucciones correspondientes y
ejecutándolas en el programa de usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3017

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Componentes para el posicionamiento
La figura siguiente muestra una configuración de ejemplo con Easy Motion Control.
,QWHUUXSWRUGH
SDUDGDGHHPHUJHQFLD

SHM&38'3

5HG

+DELOLWDFLµQ
'LVSRVLWLYRGH
VHJXULGDG

(WDSDGH
SRWHQFLD

YROWLRV
67(3
(0&

(VWDFLRQHVGH
PHFDQL]DGR

3&3*

0RYLPLHQWR
0

(QFµGHU

0RWRU

)LQDOGH
FDUUHUDGH
VHJXULGDG

(DV\0RWLRQ&RQWUROFRQ
VRIWZDUHGHSDUDPHWUL
]DFLµQLQVWUXFFLRQHV\
PDQXDO

Dispositivo de seguridad
Cuando se dispara el dispositivo de seguridad, el interruptor de parada de emergencia
desconecta la alimentación.

Etapa de potencia
La etapa de potencia controla el motor. Los finales de carrera de seguridad desconectan la
etapa de potencia.

Motor
El motor es controlado por la etapa de potencia y acciona el eje.

Encóder
El encóder proporciona información de recorrido y sentido.

3018

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Easy Motion Control
Easy Motion Control ofrece las siguientes funciones:
● JOG
● Búsqueda del punto de referencia
● Posicionamiento absoluto/relativo
● Reductor electrónico
● Posicionamiento del punto de referencia
● Todas las funciones de vigilancia habituales para posicionamiento
● Corrección de velocidad
● Regulación de posición
● Simulación
● Drivers de entrada preconfeccionados para registro de valores del encóder o drivers de
salida para módulos de salidas analógicas

Módulos para lectura de recorrido y salida de consigna
Los módulos constituyen la interfaz entre la CPU y la máquina. Leen las posiciones del eje y
envían consignas a la etapa de potencia.

CPU
La CPU ejecuta el programa de usuario que incorpora las instrucciones de Easy Motion
Control.

PC/PG
Un PC o programadora sirve para
● Parametrizar: Easy Motion Control se parametriza con el software de configuración o
directamente en el bloque de datos de eje (ver Configuración del objeto tecnológico Eje
(Página 3030)).
● Programar: Las instrucciones de Easy Motion Control se incorporan directamente en el
programa.

Configuraciones hardware admitidas
Las configuraciones hardware representadas a continuación son soportadas cómodamente
por instrucciones de driver. Estas instrucciones se suministran con Easy Motion Control.
La adaptación a configuraciones que no son soportadas directamente es posible mediante
instrucciones de driver libres que se suministran de igual forma.
La figura siguiente muestra configuraciones descentralizadas para Easy Motion Control.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

,0

6,02'5,9(
VHQVRU
352),%86'3

,0

6

60
(76
66,

6

,0
&RQH[LµQGH
HQFµGHU

,0
6DOLGD
DQDOµJLFD
(76
$QDOµJLFR

,0
(QFµGHULQFUHPHQWDO

6,1$0,&6

:LQ$&

6,1$0,&6

352),%86'3
352),1(7,2

6HUYRFRQYHUWLGRU

(QFµGHUDEVROXWR

6,1$0,&6

60

00PLW'3
%DXJUXSSH

)0
(76
&RXQW
99

3020

6
60

60

&38&

&38&

6
)0

6HUYRFRQYHUWLGRU

(QFµGHULQFUHPHQWDO

(QFµGHUDEVROXWR

La figura siguiente muestra configuraciones centralizadas para Easy Motion Control.

60

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Principios básicos del posicionamiento con Easy Motion Control
Diseño de la regulación de posición
En el posicionamiento regulado, la posición actual del eje se compara con la posición de
consigna. Las desviaciones se corrigen por medio del regulador de posición durante el
desplazamiento y también en parada.
La figura siguiente muestra el esquema de principio para el posicionamiento regulado con
Easy Motion Control. Una instrucción de desplazamiento (Página 3053) especifica consignas
de posición. El driver de entrada detecta la posición real del eje. El regulador de posición
(Página 3040) compara el valor de la posición real con la consigna y genera una consigna de
velocidad a partir de la diferencia. El driver de salida emite la consigna de velocidad
normalizada.

(DV\0RWLRQ&RQWURO
,QVWUXFFLµQGH
GHVSOD]DPLHQWR 
JHQHUDFRQVLJQD
GHSRVLFLµQ



5HJXODGRUGH
SRVLFLµQJHQHUD
FRQVLJQDGH
YHORFLGDG

'ULYHUGHVDOLGD
QRUPDOL]D
FRQVLJQDGH
YHORFLGDG

'ULYHUGHHQWUDGD
OHHYDORUGHO
HQFµGHU\JHQHUD
YDORUUHDOGH
SRVLFLµQ

0µGXORGH
VDOLGDJHQHUD
WHQVLµQ

$FFLRQD
PLHQWR

0

0µGXORGH
HQWUDGD
FDSWXUDYDORU
GHOHQFµGHU

La figura siguiente muestra la relación entre la velocidad y el trayecto recorrido por el eje
durante un desplazamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3021

Control de movimiento

9HORFLGDG

6.3 Control de movimiento (S7-300, S7-400)

7LHPSR

5HFRUULGR

'HVSOD]DPLHQWR
FRQVWDQWH

$FHOHUDFLµQ

)UHQDGR

7LHPSR

Definiciones de términos
Destino
Define la posición absoluta o relativa del eje que se alcanza en el posicionamiento.

Desplazamiento
Los desplazamientos son iniciados por la llamada de instrucciones, que en adelante
llamaremos instrucciones de desplazamiento.

Distancia residual
La distancia residual es la diferencia entre la posición de destino y la consigna de posición
actual.

Error de seguimiento
Durante un desplazamiento, debido a la inercia del eje, se produce una diferencia entre la
consigna de posición actual y la posición real. Esta diferencia se denomina error de
seguimiento. Si la diferencia supera un valor parametrizable, se produce un error de
seguimiento.

3022

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Zonas de vigilancia
● Zona de trabajo:
Define la zona de desplazamiento permitida del eje, la cual se determina para la tarea en
cuestión con ayuda de los finales de carrera por software (Página 3023) o con el final deleje
rotativo (Página 3024).
● Zona de velocidad cero:
Define una zona parametrizable que el eje no puede abandonar a velocidad cero. La zona
de velocidad cero se encuentra a izquierda y derecha del punto de destino.
● Zona de destino:
Cuando la consigna alcanza el destino al final de un desplazamiento, se vigila la entrada del
eje en la zona de destino. La zona de destino sirve para vigilar la precisión de
posicionamiento de la aplicación en cuestión, y se encuentra a izquierda y derecha del
punto de destino.
Nada más alcanzarse la zona de destino comienza la vigilancia de la zona de velocidad
cero. Por consiguiente, la zona de velocidad cero debe ser mayor que la zona de destino.
La figura siguiente muestra la ubicación de las distintas zonas en torno al punto de destino.
,QLFLRGHOILQDOGHFDUUHUDSRUVRIWZDUH

'HVWLQR

)LQGHOILQDOGHFDUUHUDSRUVRIWZDUH

=RQD =RQD
GH
GH
GHVWLQR GHVWLQR
=RQDGH
YHORFLGDG
FHUR

=RQDGH
YHORFLGDG
FHUR

=RQDGH
WUDEDMR

Eje lineal
Descripción
La zona de trabajo va desde el inicio del final de carrera por software hasta el fin del final de
carrera por software, y está limitada a 1 × 224 unidades de longitud (en la zona de coordenadas
entre -224+6 y +224-6).
La longitud física del eje está limitada por los topes mecánicos del eje.
El rango numérico de Easy Motion Control tan solo es relevante si la vigilancia de la zona de
trabajo está desactivada. Está limitado a 2 × 224-12 unidades de longitud (de -224+6 a +224-6).
El rango del encóder es
● en el caso de un encóder absoluto, el rango abarcado por el encóder.
● en el caso de un encóder incremental, el trayecto desde -231 hasta +231 incrementos.
En los ejes lineales, la zona de trabajo (= zona de desplazamiento) está limitada de la manera
siguiente:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3023

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Zona de trabajo < Longitud física del eje < Rango numérico de Easy Motion Control < Rango
del encóder
La figura siguiente muestra las diferentes zonas de un eje lineal.

,QLFLRGHOILQDOGHFDUUHUDSRUVRIWZDUHP¯QLPR






>XQLGDGGHORQJLWXG@

)LQGHOILQDOGHFDUUHUDSRUVRIWZDUHP£[LPR
 

>XQLGDGGHORQJLWXG@

,QLFLR
I¯VLFR



>8QLGDGGHORQJLWXG@

)LQDO
I¯VLFR

  

>8QLGDGGHORQJLWXG@

=RQDGHWUDEDMR
/RQJLWXGGHHMHI¯VLFD
5DQJRQXP«ULFRGH(DV\0RWLRQ&RQWURO
5DQJRGHOHQFµGHU
(QFµGHUDEVROXWRUDQJRFXELHUWRSRUHOHQFµGHU
(QFµGHULQFUHPHQWDO  
B ,QFUHPHQWRV

Eje rotativo
Descripción
La zona de trabajo va desde el inicio del eje rotativo hasta el final del eje rotativo, y está limitada
a 1 × 224 unidades de longitud (en la zona de coordenadas entre -224+6 y +224-6).

3024

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El rango del encóder
● en el caso de un encóder incremental, puede ser cualquiera.
● en el caso de un encóder absoluto, viene determinado por lo siguiente:
Rango del encóder = zona de trabajo × n
con:
– n = 1 para encóders monovuelta
– n > 1 y valor entero para encóders multivuelta
En el caso de un eje rotativo, el valor real retorna al comienzo del eje después de cada vuelta.
Por lo tanto, los ejes rotativos pueden desplazarse de forma continua más allá del final o del
principio del eje. La posición del eje se indica siempre como valor entre el principio y el final del
eje rotativo.
9DORUP£[LPRLQGLFDEOH

6.3.10.2

,QLFLRGHOHMHURWDWLYR ILQGHOHMHURWDWLYR

Funciones con Easy Motion Control

Resumen
Easy Motion Control sirve para posicionar un eje en un punto de destino con la aceleración,
velocidad y retardo que elija el usuario o para desplazarlo a velocidad constante. Los
movimientos de desplazamiento necesarios para ello se inician mediante la llamada de
instrucciones de desplazamiento.
Al lanzar una petición de desplazamiento, en la instrucción de desplazamiento se parametriza
el punto de destino o el trayecto del movimiento de desplazamiento, y, dado el caso, también
la aceleración, velocidad o retardo que el usuario desee. El sistema de medida (unidad de
longitud) de estos valores puede elegirse a discreción (p. ej. mm).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3025

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

JOG
Con la función "Jog" se mueve el accionamiento en sentido positivo o negativo. No se
preselecciona ningún destino.
La función Jog se ejecuta con la instrucción MC_MoveJog.

Sincronizar
Para asignar un valor de encóder reproducible a la posición real debe establecerse una
referencia (sincronización) entre la posición del eje y el valor del encóder.
La función Sincronizar se ejecuta con la instrucción MC_Home.

Sincronizar con encóder incremental
Al conectar la instalación, un encóder incremental no proporciona información sobre la
posición actual del eje. En lugar de ello, empieza a contar desde la posición actual del eje.
Es necesario realizar una sincronización cada vez que se conecte la instalación, después de
un fallo y después de sustituir el encóder.
La sincronización de un encóder incremental puede llevarse a cabo
● mediante búsqueda del punto de referencia
● mediante posicionamiento del punto de referencia

Sincronizar con encóder absoluto
Al poner en servicio un encóder absoluto, el valor indicado por el encóder debe sincronizarse
con la posición real del eje.
No es necesario repetir la sincronización tras una nueva conexión de la instalación ni después
de un fallo. Sin embargo, después de sustituir el encóder sí es necesario realizar de nuevo la
sincronización.
La sincronización de un encóder absoluto solo puede llevarse a cabo mediante el
posicionamiento del punto de referencia (también denominado reajuste del encóder
absoluto).

Búsqueda del punto de referencia
El eje se mueve en dirección al punto de referencia. Al rebasar el punto de referencia, el eje
queda sincronizado, es decir, se asigna un valor de posición al valor numérico del encóder
incremental. En cada búsqueda del punto de referencia se puede asignar un nuevo valor de
coordenadas al punto de referencia.
La búsqueda del punto de referencia tan solo es posible con encóders incrementales.

Posicionamiento del punto de referencia
En el posicionamiento del punto de referencia se asigna un nuevo valor de coordenadas a la
posición actual.

3026

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El posicionamiento del punto de referencia es posible con encóders incrementales y absolutos.

Posicionamiento absoluto o relativo
Easy Motion Control puede
● mover el eje a puntos de destino absolutos,
● desplazar el eje de forma relativa por un tramo en un sentido predeterminado.
Las funciones Posicionamiento absoluto y Posicionamiento relativo se ejecutan con las
instrucciones MC_MoveAbsolute y MC_MoveRelative.

Reductor
Easy Motion Control implementa un reductor electrónico entre dos ejes con la instrucción
MC_GearIn.

Detención de un desplazamiento
Un desplazamiento en curso puede ser detenido en cualquier momento.
La función Detener se ejecuta con la instrucción MC_StopMotion.

Anulación de un desplazamiento
Una instrucción de desplazamiento activa
● puede anularse en cualquier momento iniciando otra instrucción de desplazamiento.
● puede cancelarse en cualquier momento mediante la instrucción MC_StopMotion
(ver Desarrollo de movimientos de desplazamiento (Página 3059)).

Seguimiento
La función "Seguimiento" consiste en corregir de manera continua la consigna de posición
conforme a la posición real en el regulador de posición. Durante el seguimiento no se vigila si
el eje abandona la zona de velocidad cero.
La función se activa retirando la señal "EnableDrive" en la instrucción MC_Control o después
de producirse un fallo.

Corrección de velocidad
La corrección de velocidad permite modificar de manera dinámica la velocidad parametrizada
de una instrucción de desplazamiento. Los valores de aceleración y deceleración no se ven
afectados.
Para más información sobre la corrección de la velocidad, ver Definir la corrección de la
velocidad (Página 3046).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3027

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Simulación
El modo de simulación permite verificar el programa de desplazamiento sin necesidad de
mover el eje.
La simulación se ejecuta con la instrucción MC_Simulation.

Reacciones a errores y diagnóstico
Todos los errores detectados por las instrucciones se indican en el DB de eje por medio de
● activación de un error agrupado y
● una señalización de error específica.
En los errores de acuse obligatorio, después de subsanar el error es necesario activar un
acuse de error.
Si el error ha sido causado o detectado por una instrucción de desplazamiento (p. ej.
MC_MoveJog o MC_MoveAbsolute), en esa instrucción se activa la salida de error "Error".
Sin embargo, si el error ha sido detectado por una instrucción de driver, la causa exacta del
error se indicará en los datos estáticos de la instrucción (ver Driver de entrada).
Encontrará información detallada sobre reacciones a errores, señalización de errores y acuse
de errores en Señalización y acuse de errores en el DB de eje (Página 3074).

6.3.10.3

Configuración de Easy Motion Control

Guía para utilizar Easy Motion Control
La guía aquí descrita muestra el procedimiento básico para utilizar Easy Motion Control con
una CPU S7-300/400.

Requisitos
Para utilizar el objeto tecnológico "Eje" es necesario haber creado un proyecto con una CPU.

Procedimiento
Proceda según el orden recomendado a continuación para utilizar Easy Motion Control con la
CPU S7-300/400. Para ello consulte los enlaces listados:
1. Agregar el objeto tecnológico Eje (Página 3029)
2. Trabajando con el diálogo de configuración (Página 3030)
3. Cargar en la CPU (Página 3051)
4. Test de funcionamiento del eje en la ventana de puesta en marcha
5. Programaación de Easy Motion Control (Página 3053)
6. Diagnosticar el control del eje

3028

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Agregar el objeto tecnológico Eje
Agregar objeto tecnológico Eje en el árbol del proyecto
Al agregar un objeto tecnológico, se genera un DB de instancia para este objeto tecnológico.
En él se guarda la configuración del eje.

Requisitos
Hay un proyecto creado con una CPU.

Procedimiento
Para agregar un objeto tecnológico Eje en el árbol del proyecto, proceda del siguiente modo:
1. Abra la carpeta de la CPU en el árbol del proyecto.
2. Abra la carpeta "Objetos tecnológicos".
3. Haga doble clic en "Agregar objeto".
Se abre el cuadro de diálogo "Agregar objeto".
4. Seleccione la tecnología "Motion".
5. Abra la carpeta "Motion Control".
6. Abra la carpeta "Easy Motion Control".
7. Seleccione la instrucción para el objeto tecnológico: en este caso AXIS_REF.
8. En el campo de entrada "Nombre", introduzca un nombre personalizado para el eje.
9. Seleccione la opción "Manual" si desea modificar el número de bloque de datos propuesto
para el DB de instancia.
10.Haga clic en "Más información" para añadir información propia sobre el objeto tecnológico.
11.Haga clic en el botón "Aceptar" para agregar el objeto tecnológico.
Haga clic en el botón "Cancelar" para rechazar las entradas realizadas.

Resultado
El nuevo objeto tecnológico se genera y se guarda en la capeta "Objetos tecnológicos" del
árbol del proyecto. El objeto tecnológico se utiliza cuando las instrucciones de este objeto
tecnológico se llaman en un OB de alarma cíclica o de alarma de sincronismo.
Encontrará más información al respecto en "Diseño de un programa de usuario (Página 3053)".
Nota
Existe la posibilidad de activar la casilla de verificación "Agregar nuevo y abrir" situada en la
parte inferior del diálogo. De ese modo, la configuración del objeto tecnológico se abrirá una
vez agregado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3029

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Configuración del objeto tecnológico Eje
Trabajando con el diálogo de configuración
Las propiedades del objeto tecnológico se configuran en la ventana de configuración. Para
abrir la ventana de configuración del objeto tecnológico, proceda del siguiente modo:
1. Abra el grupo correspondiente al objeto tecnológico deseado en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración".
La configuración se divide en las siguientes categorías:
● Parámetros básicos
Los parámetros básicos contienen todos los parámetros que deben configurarse para un
eje listo para funcionar.
● Parámetros avanzados
Los parámetros avanzados contienen parámetros que se pueden adaptar al propio
accionamiento o bien a la instalación.

Símbolos de la ventana de configuración
Los símbolos que aparecen en la navegación local de la configuración muestran más detalles
sobre el estado de la configuración:
La configuración contiene valores predeterminados y está completa.
La configuración contiene exclusivamente valores predeterminados. Con ellos es posible utilizar el objeto tecnológico
sin más modificaciones.
La configuración contiene valores definidos por el usuario y está completa
Todos los campos de entrada de la configuración contienen valores válidos y al menos un valor predeterminado ha sido
modificado.
La configuración es errónea o está incompleta
Al menos un campo de entrada o una lista desplegable contiene un valor no válido. El campo o la lista desplegable en
cuestión se marca en rojo. Al hacer clic, el roll out con el aviso de error indica la causa del error.
La configuración es válida, pero contiene advertencias
Sólo se ha configurado un final de carrera por hardware. Dependiendo de la instalación, si un final de carrera por
hardware no está configurado ello puede representar un peligro. El campo o la lista desplegable en cuestión se marca
en amarillo.

Parámetros básicos
Definir el nombre del eje
Nombre del eje
Defina en este campo el nombre del eje y del objeto tecnológico "Eje". El objeto tecnológico
aparece con ese nombre en el árbol del proyecto.

3030

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar tipo de eje
Tipos de eje
Easy Motion Control puede controlar los siguientes tipos de eje:
● Eje lineal
El eje lineal es un eje con una zona de desplazamiento físico limitado.

,QLFLRI¯VLFR

)LQI¯VLFR

● Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no está limitada por topes mecánicos.
0£[LPRYDORULQGLFDEOH
ILQGHOHMHURWDWLYR

,QLFLRGHOHMHURWDWLYR FRRUGHQDGD
ILQGHOHMHURWDWLYR

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

4.0

AxisType

BOOL

FALSE

Tipo de eje
Valores permitidos:
● FALSE = eje lineal
● TRUE = eje rotativo

Seleccionar la unidad de longitud
Unidad de longitud
En la lista desplegable, seleccione la unidad de longitud deseada para el sistema de medida
del eje. La unidad seleccionada se utiliza para una nueva configuración del objeto tecnológico
"Eje" y la visualización de los datos actuales del eje.
Para la entrada y salida de datos es posible elegir entre las siguientes unidades de longitud:
● Milímetros (ajuste predeterminado)
● Grados
● Pulgadas

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3031

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Los valores en los parámetros de entrada (Position, Distance, Velocity, ...) de las instrucciones
de Easy Motion Control también se refieren a esta unidad.
Nota
El cambio de la unidad de longitud no influye en los valores de los parámetros. No tiene lugar
una conversión.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

196.0

LengthUnit

STRING [4]

mm

Unidad de longitud para software de configuración
Valores permitidos:
● mm (ajuste predeterminado)
● Grados
● Pulgadas

Activar el modo de simulación
Modo de simulación
Active la casilla de verificación si desea probar el programa de desplazamiento sin necesidad
de mover el eje.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

4.2

Sim

BOOL

FALSE

Modo de simulación
Valores permitidos:
● FALSE = desactivado
● TRUE = activado

3032

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parámetros avanzados
Interfaces de driver
Driver de entrada
Seleccionar el módulo de entradas
Módulo de entradas
Seleccione en la lista desplegable el módulo de entradas al que está conectado el encóder.
Conforme a su selección, en el campo "Instrucción" se muestra el nombre de la instrucción que
debe llamar para la adquisición del valor real.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

202.0

InputModuleType

STRING [24]

IM 174

Driver de entrada del módulo.
Este parámetro no se puede sobrescribir manualmente.

Seleccionar el tipo de encóder
Tipo de encóder
Active el botón de opción correspondiente al encóder utilizado.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

4.1

EncoderType

BOOL

FALSE

Tipo de encóder
Valores permitidos:
● FALSE = encóder incremental
● TRUE = encóder absoluto

Módulo de entradas: Dirección del módulo Entradas
Dirección del módulo Entradas
Introduzca en el campo de entrada el valor asignado al módulo de entradas en la configuración
hardware.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3033

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

58.0

InputModuleInAddr

INT

0

Dirección inicial de las entradas del módulo
de lectura de recorrido
Rango:
● determinado por la configuración
hardware

Módulo de entradas: Dirección del módulo Salidas
Dirección del módulo Salidas
Este parámetro tan solo se utiliza en aquellos módulos en que la "Dirección del módulo
Salidas" se ajusta por separado de la "Dirección del módulo Entradas" en la configuración
hardware.
Introduzca en el campo de entrada el valor asignado al módulo de entradas en la configuración
hardware.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

60.0

InputModuleOutAddr

INT

0

Dirección inicial de las salidas del módulo de
lectura de recorrido
Rango:
● determinado por la configuración
hardware

Módulo de entradas: Número de canal
Número de canal
● Módulos monocanal: el campo de entrada está predeterminado con el valor "0" y no se
puede editar.
● Módulos multicanal: introduzca en el campo de entrada el número del canal utilizado.
Introduzca "0" para el primer canal, etc.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

62.0

InputChannelNo

INT

0

Número de canal del módulo de lectura de
recorrido
Rango:
● depende del módulo

3034

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Driver de salida
Seleccionar el módulo de salidas
Módulo de salidas
Seleccione en la lista desplegable el módulo de salidas al que está conectado el
accionamiento.
Conforme a su selección, en el campo "Instrucción" se muestra el nombre de la instrucción que
debe llamar para la salida de la consigna de velocidad.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

228.0

OutputModuleType

STRING [24]

IM 174

Driver de salida del módulo.
Este parámetro no se puede sobrescribir manualmen‐
te.

Módulo de salidas: Dirección del módulo Entradas
Dirección del módulo Entradas
El parámetro tan solo se utiliza en aquellos módulos en que la "Dirección del módulo Entradas"
se ajusta por separado de la "Dirección del módulo Salidas" en la configuración hardware.
Introduzca en el campo de entrada el valor asignado al módulo de salidas en la configuración
hardware.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

82.0

OutputModuleInAddr

INT

0

Dirección inicial de las entradas del módulo
de salidas
Rango:
● determinado por la configuración
hardware

Módulo de salidas: Dirección del módulo Salidas
Dirección del módulo Salidas
Introduzca en el campo de entrada el valor asignado al módulo de salidas en la configuración
hardware.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3035

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Dirección Nombre

Tipo

Valor inicial

Comentario

80.0

INT

0

Dirección inicial de las salidas del módulo de
salidas

OutputModuleOutAddr

Rango:
● determinado por la configuración
hardware

Módulo de salidas: Número de canal
Número de canal
● Módulos monocanal: el campo de entrada está predeterminado con el valor "0" y no se
puede editar.
● Módulos multicanal: introduzca en el campo de entrada el número del canal utilizado.
Introduzca "0" para el primer canal, etc.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

84.0

OutputChannelNo

INT

0

Número de canal del módulo de salidas
Rango:
● depende del módulo

Mecánica
Encóder
Definir incrementos por vuelta del encóder
Incrementos por vuelta del encóder
Introduzca en el campo de entrada el número de incrementos que emite el módulo de lectura
de recorrido por cada vuelta del encóder.
Con este valor y el parámetro "Recorrido del eje por vuelta del encóder" (DB de eje Dirección
68.0 (Página 3038)) tiene lugar la conversión de incrementos a unidad de longitud.

3036

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

64.0

StepsPerRev

DINT

L#1

Incrementos por vuelta del encóder
Rango admisible:
● ≥ 1 [incrementos/vuelta del encóder]

Encóder incremental
Si el encóder incremental se lee con un módulo que realiza una evaluación doble o cuádruple
de los impulsos, esto debe tenerse en cuenta al introducir los parámetros.
Ejemplo:
● Impulsos de encóder por vuelta: 500
● Evaluación cuádruple
En el campo de entrada "Incrementos por vuelta del encóder" se introduce: 2000

Encóder absoluto
Con encóders absolutos, el número de incrementos por vuelta del encóder generalmente es
una potencia de dos.
Son valores habituales:
● En caso de encóder monovuelta: 4096 y 8192
● En caso de encóder multivuelta (12 × 12 bits en el telegrama de 25 bits): 4096
En caso de duda, el valor correcto se determina moviendo el encóder una vuelta y observando
la variación del valor de encóder en el software de configuración.
Si hay una regla de medida, en el campo "Incrementos por vuelta del encóder" introduzca el
número total de incrementos que corresponda a la longitud de la regla de medida.

Definir el número de vueltas del encóder
Número de vueltas del encóder
Si se trata de un encóder absoluto, introduzca en el campo de entrada el número de vueltas del
encóder.
Para un encóder monovuelta, introduzca un "1".
Si hay una regla de medida, en el campo "Número de vueltas del encóder" introduzca un "1".
Si se trata de un encóder incremental, este parámetro carece de significado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3037

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

72.0

NumberRevs

INT

1

Número de vueltas de un encóder absoluto
Rango admisible:
● >0

Definir el recorrido del eje por vuelta del encóder
Recorrido del eje por vuelta del encóder
Introduzca en el campo de entrada la distancia que recorre el eje en una vuelta del encóder.
El valor depende del diseño del eje y del modo en que esté montado el encóder. Debe tener
en cuenta todos los elementos de transmisión, como acoplamientos o engranajes.

0RWRU

(QFµGHU
5HGXFWRU

0RWRU

(QFµGHU
5HGXFWRU

Si hay una regla de medida, en el campo "Recorrido del eje por vuelta del encóder" debe
introducirse la longitud de dicha regla.

Datos utilizados en el DB de eje
Dirección Nombre

Tipo

Valor inicial

Comentario

68.0

REAL

1.0

Recorrido del eje por vuelta del encóder

DisplacementPerRev

Rango admisible:
● > 0.0 [unidad de longitud/vuelta del encóder]

Particularidades de los ejes rotativos
Con cada vuelta del eje rotativo el encóder debe desplazarse un número entero de
incrementos:
)LQGHOHMHURWDWLYRLQLFLRGHOHMHURWDWLYR
5HFRUULGRGHOHMHSRUYXHOWDGHOHQFµGHU

3038

[ ,QFUHPHQWRVSRUYXHOWDGHOHQFµGHU Q¼PHURHQWHUR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Particularidades de ejes rotativos con encóders absolutos
A fin de garantizar la reproducibilidad de cada posición, el recorrido del eje abarcado por el
encóder debe ser un múltiplo entero de la distancia recorrida por el eje rotativo en una vuelta:
Q¼PHURGHYXHOWDVGHOHQFµGHU [ UHFRUULGRGHOHMHSRUYXHOWDGHOHQFµGHU
)LQGHOHMHURWDWLYRLQLFLRGHOHMHURWDWLYR

Q¼PHURHQWHUR

Ejemplo:
Encóder absoluto 24 bits
=> Número de vueltas del encóder = 4096
Principio del eje rotativo = 0.0°
Fin del eje rotativo = 360.0°
=> Fin del eje rotativo - Principio del eje rotativo = 360.0°
Recorrido del eje por vuelta del encóder = 45°
[r
r

 HQWHUR

Seleccionar la corrección de sentido del encóder
Corrección de sentido del encóder
Aquí se adapta el sentido de la lectura del recorrido al sentido de movimiento del eje:
● positivo = los impulsos de contaje ascendentes (encóder incremental) o valores del
encóder (encóder absoluto) equivalen a los valores de posición real ascendentes.
● negativo = los impulsos de contaje ascendentes (encóder incremental) o los valores de
encóder (encóder absoluto) equivalen a valores reales de posición descendentes.
Seleccione la opción correspondiente en la lista desplegable.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

74.0

PolarityEncoder

INT

1

Corrección de sentido del encóder
Valores permitidos:
● +1 ó -1

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3039

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Regulador
Definir la ganancia del regulador
Ganancia del regulador
La ganancia óptima del regulador se puede determinar experimentalmente en el eje.
Aumente la ganancia del regulador en incrementos de 1.0 hasta que el eje comience a vibrar
en marcha o en parada. Cuando esto ocurra, reduzca la ganancia del regulador hasta que deje
de observarse una tendencia a la vibración.
Introduzca el valor correspondiente en el campo de entrada.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

44.0

FactorP

REAL

1.0

Ganancia del regulador
Rango admisible:
● > 0.0 [1/s]

Definir la velocidad de consigna en modo manual
Velocidad de consigna en el modo manual
Introduzca en el campo de entrada la velocidad consignada que desee para el modo manual.
Si el modo manual está activado, el regulador emite el valor de "velocidad consignada en modo
manual" como magnitud manipulada y lo limita a "MaxVelocity". La consigna de posición se
corrige conforme al valor de posición real.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

48.0

ManVelocity

REAL

0.0

Velocidad de consigna en el modo manual
Rango admisible:
● ≤ ± MaxVelocity (Página 3045) [unidad de longitud/s]

52.0

ManEnable

BOOL

FALSE

Activar el modo manual
Valores permitidos:
● FALSE = desactivado
● TRUE = activado

3040

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Motor
Definir el valor de referencia para una velocidad del 100%
Valor de referencia para una velocidad del 100%
Si se utilizan etapas de potencia controladas con ±10 V, este parámetro es irrelevante.
Si se utiliza el driver de salida OutputMM4_DP (módulo MICROMASTER DP controlado por
bus), en este parámetro debe introducirse la frecuencia con la que deberá controlarse el
accionamiento para que alcance el 100% de su velocidad.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

96.0

DriveInputAt100

REAL

10.0

Valor de referencia para una velocidad del
100%
Rango admisible:
● -10.0 hasta +10.0 [V]

Ejemplo
● Velocidad nominal del motor (velocidad 100%): = 1380 r/min
● El motor está calibrado a: = 1380 r/min a 50 Hz
=> En el campo "Valor de referencia para una velocidad del 100%", introduzca: = 50 Hz

Definir el valor de referencia para la velocidad máxima del eje
Valor de referencia para velocidad máxima del eje
Si se utilizan etapas de potencia controladas con ±10 V, en el campo de entrada deberá
introducirse el valor de tensión en el que se alcanza la "velocidad máxima" del accionamiento
(ver DB de eje Dirección 14.0 (Página 3045)).
Ejemplo:
● Velocidad nominal del motor: = 3000 r/min
● El motor está calibrado a: = 9 V a 3000 r/min
● Quiere alcanzar la velocidad máxima: = 1500 r/min
=> En el campo "Valor de referencia para la velocidad máxima del eje", introduzca: = 4.5 V
Si se utiliza el driver de salida OutputMM4_DP, en este campo de entrada se debe introducir
el valor con el que debe controlarse el accionamiento para que alcance la "velocidad máxima"
(ver DB de eje Dirección 14.0 (Página 3045)).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3041

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Ejemplo:
● Velocidad nominal del motor: = 1380 r/min
● El motor está calibrado a: = 1380 r/min a 50 Hz
● Quiere alcanzar la velocidad máxima: = 690 r/min
=> En el campo "Valor de referencia para la velocidad máxima del eje", introduzca: = 25 Hz

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

88.0

DriveInputAtMaxVel

REAL

9.0

Valor de referencia para velocidad máxima
del eje [V]
Rango admisible:
● En función de la etapa de potencia

Definir la compensación del punto cero
Compensación del punto cero
Este parámetro permite realizar una compensación del punto cero si el accionamiento no
ofrece tal posibilidad, El valor parametrizado aquí se suma al valor de salida.
El parámetro no se tiene en cuenta en el driver de salida OutputMM4_DP.

Datos utilizados en el DB de eje
Dirección Nombre

Tipo

Valor inicial

Comentario

92.0

REAL

0.0

Compensación del punto cero

OffsetCompensation

Rango admisible:
● -10.0 hasta +10.0 [V]

Seleccionar la corrección de sentido del accionamiento
Corrección de sentido del accionamiento
Aquí se selecciona el sentido de movimiento del accionamiento:
● positiva = las consignas de velocidad positivas provocan un movimiento en sentido positivo.
● negativa = las consignas de velocidad positivas provocan un movimiento en sentido
negativo.
Seleccione la opción correspondiente en la lista desplegable.
Si se modifica la "Corrección de sentido del accionamiento", también es necesario modificar la
"Corrección de sentido del encóder" (DB de eje Dirección 74.0 (Página 3039)).

3042

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

86.0

PolarityDrive

INT

1

Incrementos por vuelta del encóder
Valores permitidos:
● +1 ó -1

Final de carrera
Activar finales de carrera por software
Fin de carrera por software
Los finales de carrera por software existen solo para los ejes lineales.
La vigilancia comienza en cuanto el eje se sincroniza y la vigilancia de los finales de carrera por
software está activada.
Si la vigilancia de los finales de carrera por software está desactivada, los parámetros "Inicio
Final de carrera por software" y "Fin Final de carrera por software" (DB de eje Dirección 6.0 y
10.0 (Página 3043)) carecen de significado.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

42.1

SWLimitEnable

BOOL

TRUE

Vigilar finales de carrera por software
Valores permitidos:
● TRUE = vigilancia activada
● FALSE = vigilancia desactivada

Definir final de carrera por software
Fin de carrera por software
Los finales de carrera por software existen solo para los ejes lineales.
Con eje lineal: inicio/fin del final de carrera por software
La vigilancia comienza en cuanto el eje se sincroniza y la vigilancia de los finales de carrera por
software está activada (ver "Activar finales de carrera por software (Página 3043)"). La zona de
trabajo está limitada por los finales de carrera por software.
El "Inicio del final de carrera por software" debe ser siempre menor que el "Fin del final de
carrera por software".
Encóder incremental

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3043

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Después de cada arranque de la CPU el eje no está sincronizado. El eje no se sincroniza y la
vigilancia de los finales de carrera por software no comienza hasta después de la búsqueda del
punto de referencia o el posicionamiento del punto de referencia.
Encóder absoluto
Una vez se ha realizado el posicionamiento del punto de referencia, éste no se pierde con el
siguiente arranque de la CPU. Los finales de carrera por software se pueden vigilar.
El rango del encóder absoluto debe abarcar al menos la zona de trabajo.
Con eje rotativo: inicio del eje rotativo/final del eje rotativo
Con los valores "Inicio del eje rotativo" y "Final del eje rotativo" se determina el rango de valores
en que se indicarán las posiciones de eje durante una vuelta del eje.
El valor "Final del eje rotativo" es el valor máximo teórico que el valor real puede alcanzar:
0£[LPRYDORULQGLFDEOH ILQGHOHMHURWDWLYR 

5HFRUULGRSRUYXHOWDGHOHQFµGHU
,QFUHPHQWRVSRUYXHOWD

Sin embargo, el máximo valor teórico nunca se indica porque físicamente identifica la misma
posición que el inicio del eje rotativo.
Ejemplo:
● AxisLimitMin = 0.0°
● AxisLimitMax = 360.0°
En sentido positivo, el valor real adopta los valores ...359.8, 359.9, 0.0, 0.1, …
Si se utilizan encóders absolutos, debe tenerse en cuenta el parámetro "Recorrido del eje por
vuelta del encóder (Página 3038)".

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

6.0

AxisLimitMax

REAL

1.0e

Con eje lineal: Final de carrera por software Fin

+6

Con eje rotativo: Final del eje rotativo
Rango admisible:
● -224+6 ≤ AxisLimitMin < AxisLimitMax ≤ +224-6
[unidad de longitud]
10.0

AxisLimitMin

REAL

-1.0e+6

Con eje lineal: Inicio del final de carrera por software
Con eje rotativo: Inicio del eje rotativo
Rango admisible:
● -224+6 ≤ AxisLimitMin < AxisLimitMax ≤ +224-6
[unidad de longitud]

3044

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Dinámica
General
Definir la velocidad máxima del eje
Velocidad máxima del eje
Aquí se parametriza la velocidad que alcanza el eje cuando el motor se controla con el valor
introducido en el parámetro "Valor de referencia para la velocidad máxima del eje" (DB de eje
Dirección 88.0 (Página 3041)).
La "Velocidad máxima del eje" sirve como factor para el cálculo de la señal de salida al
accionamiento y también para limitar la velocidad del eje.

Particularidades de ejes rotativos con encóders absolutos
Para poder registrar cada una de las vueltas del eje rotativo, la velocidad máxima del eje debe
ser la mínima que permita que por cada tiempo de muestreo se recorra una distancia inferior
a la mitad del rango del encóder absoluto.
Ejemplo de encóder monovuelta:
Requisito => una vuelta del eje equivale a una vuelta del encóder.
Recorrido/rango del encóder = 360.0°
Recorrido/mitad del rango del encóder = 180.0°
Tiempo de muestreo = 0.01 s


!ಱ9HORFLGDGP£[LPDಯ

5HFRUULGRGHGHVSOD]DPLHQWRPLWDGGHOUDQJRGHOHQFµGHU
7LHPSRGHPXHVWUHR

=> "velocidad máxima" < 180.0° / 0.01 s = 18000/s corresponde a 50 vueltas de eje/s

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

14.0

MaxVelocity

REAL

0.1

Velocidad máxima del eje
Rango admisible:
● > 0.0 [unidad de longitud/s]

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3045

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir la corrección de la velocidad
Corrección de velocidad
La "Corrección de la velocidad" actúa de forma continua sobre la velocidad parametrizada de
una instrucción de desplazamiento.
Los valores de aceleración y deceleración no se ven afectados.
Ejemplo: curvas de desplazamiento con corrección del 50% y del 100%

9HORFLGDG




5HFRUULGR

7LHPSR

7LHPSR

Al cambiar del 50% al 100%, la velocidad se dobla. Sin embargo, como la aceleración y la
deceleración no se ven afectadas por el parámetro "Corrección de velocidad", el tiempo de
posicionamiento no se reduce a la mitad.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

100.0

Override

REAL

100.0

Corrección de velocidad
Rango admisible:
● 0.0 hasta +100.0 [%]

3046

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir la aceleración máxima del eje
Aceleración máxima del eje
En modo regulado, este valor determina el límite de la pendiente de la rampa de aceleración
del eje.
La aceleración máxima posible se puede determinar experimentalmente.
Debe ser la mínima que permita que al acelerar hasta la velocidad máxima (con carga) no se
alcance por poco el límite de intensidad del accionamiento.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

18.0

MaxAcceleration

REAL

0.1

Aceleración máxima del eje
Rango admisible:
● > 0.0 [unidad de longitud/s2]

Definir la deceleración máxima del eje
Deceleración máxima del eje
En modo regulado, este valor determina el límite de la pendiente de la rampa de frenado del
eje.
La deceleración máxima posible se puede determinar experimentalmente.
Debe ser la mínima que permita que al frenar desde la velocidad máxima (con carga) no se
alcance por poco el límite de intensidad del accionamiento.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

22.0

MaxDeceleration

REAL

0.1

Deceleración máxima del eje
Rango admisible:
● > 0.0 [unidad de longitud/s2]

Definir el tiempo de muestreo
Tiempo de muestreo
Para el correcto funcionamiento de una regulación de posición es importante que todas las
funciones de un eje se procesen en una base de tiempo fija. Esta base de tiempo se obtiene
llamando todas las instrucciones de un eje en el mismo OB de alarma cíclica o de alarma de
sincronismo. La base de tiempo de este OB se selecciona en la configuración hardware de la
CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3047

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Como "Tiempo de muestreo" se introduce la base de tiempo del OB en el que se llaman todas
las instrucciones de un eje.
Ejemplo:
Se llama el programa con las instrucciones de Easy Motion Control en el OB 35. En la
configuración hardware, la base de tiempo de la alarma cíclica del OB 35 está ajustada a 10 ms.
Como "Tiempo de muestreo" se introduce 0.010.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

0.0

Sample_T

REAL

0.01

Comentario
Tiempo de muestreo de las instrucciones de eje
Sugerencia:
● En el S7‑300 hasta CPU 316 ≥ 0.020 [s]
● En el S7‑400 y desde CPU 317 ≥ 0.004 [s]

Mostrar el tiempo de aceleración
Tiempo aceleración
El tiempo de aceleración es el tiempo durante el cual el eje acelera desde la velocidad cero
hasta la velocidad máxima.
El tiempo de aceleración se calcula a partir de los siguientes parámetros:
Tiempo
acelera‐
ción

= velocidad máxima del eje × corrección de velocidad /
aceleración máxima

En el campo de salida se muestra el tiempo de aceleración calculado.

Mostrar el tiempo de deceleración
Tiempo de deceleración
El tiempo de deceleración es el tiempo durante el cual el eje decelera sin limitación de tirones
desde la velocidad máxima hasta la velocidad cero.
El tiempo de deceleración se calcula a partir de los siguientes parámetros:
Tiempo = velocidad máxima del eje × corrección de velocidad /
de dece‐ deceleración máxima
leración
En el campo de salida se muestra el tiempo de deceleración calculado.

3048

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parada de emergencia
Definir la deceleración para la parada de emergencia
Deceleración para parada de emergencia (parada brusca)
Aquí se parametriza la pendiente de la rampa de frenado controlada por tiempo con la que
debe frenarse el accionamiento en caso de producirse un error con parada brusca.

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

54.0

EmergencyDec

REAL

1.0

Deceleración para parada de emergencia
Rango admisible:
● > 0.0 [unidad de longitud/s2]

Mostrar el tiempo de deceleración
Tiempo de deceleración
El tiempo de deceleración es el tiempo durante el cual el eje decelera en modo de parada de
emergencia desde la velocidad máxima hasta la velocidad cero.
El tiempo de deceleración se calcula a partir de los siguientes parámetros:
Tiempo = velocidad máxima del eje/deceleración de parada de emergencia
de dece‐
leración
En el campo de salida se muestra el tiempo de deceleración calculado.

Vigilancias
Definir la zona de destino
Zona de destino
La "zona de destino" se encuentra a izquierda y derecha del punto de destino (ver Definiciones
de términos (Página 3022)).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3049

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

30.0

TargetRange

REAL

1.0

Zona de destino
Rango admisible:
● > 0.0 [unidad de longitud]

Definir la zona de velocidad cero
Zona de velocidad cero
A la velocidad cero se vigila si el eje permanece fijo en una posición o se va alejando de ella.
En cuanto el eje abandona la "Zona de velocidad cero" sin una petición de desplazamiento
activa, en el DB de eje se activa el bit de error "Zona de velocidad cero abandonada" (DB de
eje Dirección 130.3 (Página 3079)). La "Zona de velocidad cero" se encuentra a izquierda y
derecha del punto de destino (ver Definiciones de términos (Página 3022)).
Recomendación: La "Zona de velocidad cero" debe ser mayor que la "zona de destino" (DB de
eje Dirección 30.0 (Página 3049)).

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

34.0

StandstillRange

REAL

1.5

Zona de velocidad cero
Rango admisible:
● > 0.0 [unidad de longitud]

Vigilar la aproximación al destino
Vigilancia de la aproximación al destino
SI la vigilancia de la aproximación al destino está activada, un desplazamiento concluye en
cuanto la posición real ha alcanzado la "zona de destino" (DB de eje Dirección 30.0) dentro del
"Tiempo de vigilancia para aproximación a destino" (DB de eje Dirección 26.0).
Si la vigilancia de la aproximación a destino está desactivada, un desplazamiento concluye en
cuanto la consigna de posición ha alcanzado el destino (ver Definiciones de términos
(Página 3022)).

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

42.0

MonitorTargetAppr

BOOL

TRUE

Vigilar la aproximación al destino
Valores permitidos:
● TRUE = vigilancia activada
● FALSE = vigilancia desactivada

3050

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir el tiempo de vigilancia para la aproximación al destino
Tiempo de vigilancia para la aproximación al destino
Después de que en un desplazamiento la consigna de posición haya alcanzado el destino,
comienza el "Tiempo de vigilancia para la aproximación a destino", si es que el bit "Vigilar
aproximación a destino" (DB de eje Dirección 42.0 (Página 3050)) está activado. Si
transcurrido este tiempo la posición real no ha alcanzado la zona definida en el parámetro
"Zona de destino" (DB de eje Dirección 30.0 (Página 3049)), en el DB de eje se activa el bit de
error "Error en la aproximación al destino" (DB de eje Dirección 130.4 (Página 3079)).

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

26.0

MonTimeTargetAppr

REAL

1.0

Tiempo de vigilancia para la aproximación al
destino
Rango admisible:
● > 2 × Sample_T [s] (tiempo de muestreo
(Página 3047))

Definir el error de seguimiento máximo permitido
Error de seguimiento máximo permitido
Con la vigilancia del error de seguimiento se comprueba si la posición real durante un
desplazamiento se encuentra a una distancia excesivamente grande por detrás de la consigna
de posición. Si se rebasa el error de seguimiento máximo, en el DB de eje se activa el bit de
error "Error de seguimiento rebasado" (DB de eje Dirección 130.2 (Página 3079)).
Recomendación de ajuste: ("velocidad máxima" / "ganancia del regulador") × 1.1 (ver DB de
eje Dirección 14.0 (Página 3045) y 44.0 (Página 3040))

Datos utilizados en el DB de eje
Dirección

Nombre

Tipo

Valor inicial

Comentario

38.0

MaxFollowingDist

REAL

5.0

Error de seguimiento máximo permitido
Rango admisible:
● > 0.0 [unidad de longitud]

6.3.10.4

Cargar en la CPU
Los datos de proyecto nuevos o modificados se deben cargar en la CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3051

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Carga de los bloques de programa y de la configuración del objeto tecnológico en la CPU
Para cargar proceda del siguiente modo:
1. En el árbol del proyecto seleccione el objeto "Bloques de programa" o el objeto "Objetos
tecnológicos".
2. Seleccione el comando "Online > Cargar en dispositivo".
Nota
Al cargar bloques en la CPU, el TIA Portal se asegura siempre de que tras cada operación de
carga los bloques offline en el proyecto y los bloques online en la CPU sean coherentes los
unos con los otros.
En la CPU se cargan siempre todos los bloques offline modificados y nuevos y los objetos
tecnológicos, independientemente de la marca en el árbol del proyecto.
En cada opreación de carga los valores actuales de los bloques de datos se resetean a los
valores iniciales.

Carga de la configuración hardware en la CPU
Para cargar la configuración hardware proceda del siguiente modo:
1. Marque el objeto de la CPU en el árbol del proyecto.
2. Seleccione el comando "Cargar en dispositivo > Configuración hardware" en el menú
contextual.

Carga de la configuración hardware, de los bloques de programa y de la configuración del objeto
tecnológico en la CPU
Para cargar proceda del siguiente modo:
1. Marque el objeto de la CPU en el árbol del proyecto.
2. Seleccione el comando de menú "Online > Cargar en dispositivo".

3052

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.10.5

Programaación de Easy Motion Control

Diseño de un programa de usuario
Interacción de las instrucciones
La figura siguiente muestra la interacción de las instrucciones para Easy Motion Control.
0&B,QLW

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR
0&B0RYH
-RJ

0&B0RYH
$EVROXWH

0&B0RYH
5HODWLYH

0&B+RPH

0&B6WRS
0RWLRQ

0&B*HDU,Q

'%GHHMH

'ULYHUGHHQWUDGD
(QFµGHU

5HJXODGRUGH
SRVLFLµQ
0&B&RQWURO

(QFµGHU

'ULYHUGHVDOLGD
2XWSXW

0RWRU

0

La instrucción MC_Init sirve para inicializar las instrucciones.
El driver de entrada (instrucción Encoder…) lee la posición real de un eje del módulo de
periferia y la normaliza convirtiéndola a la unidad de longitud seleccionada por el usuario.
Una de las instrucciones de desplazamiento genera la consigna de posición.
El regulador de posición (posición MC_Control) compara el valor de posición real con la
consigna y genera una consigna de velocidad a partir de la diferencia.
El driver de salida (instrucción Output…) normaliza la consigna de velocidad convirtiéndola al
formato adecuado y la escribe en el módulo de periferia conectado.
El programa para un lazo de regulación cerrado se compone de un driver de entrada
(Encoder…), al menos una instrucción de desplazamiento, el regulador (MC_Control) y un
driver de salida (Output…).
Todas las instrucciones de un eje actúan junto con un DB de eje. El DB contiene todos los datos
necesarios para la operación del eje, y hay uno para cada eje. A este respecto, tenga en cuenta
las indicaciones relativas a la Carga del DB de eje (Página 3063).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3053

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Entorno de llamada
Para el correcto funcionamiento de una regulación de posición es importante que todas las
funciones de un eje se procesen en una base de tiempo fija. Esta base de tiempo se determina
llamando las instrucciones de Easy Motion Control en un nivel de ejecución. Para ello existen
dos procedimientos, según la CPU utilizada y según el tipo de conexión de periferia:
OB de alarma cíclica (OB 30 a OB 38)
Se utiliza en caso de conexión centralizada de la periferia o en caso de conexión
descentralizada a través de un bus de periferia no equidistante. El tiempo de alarma cíclica
equivale al ciclo de regulación de posición.
OB de alarma de sincronismo (OB 61 a OB 64)
En caso de conexión de periferia mediante un bus de periferia siempre isócrono, el ciclo de
regulación de posición equivale al valor que se haya seleccionado como "ciclo equidistante" al
parametrizar el bus.
En ambos casos este valor debe introducirse en el DB de eje.
Hallará información general sobre el modo isócrono en la ayuda en pantalla del TIA portal y en
el manual de funciones Isochrone Mode (http://support.automation.siemens.com/WW/view/en/
15218045).
Desde el punto de vista de Easy Motion Control, deberían tenerse en cuenta las siguientes
particularidades:
● Al configurar el bus de periferia y los esclavos DP/IO-Devices (y quizá también sus
módulos), es preciso seleccionar y parametrizar la "equidistancia".
● Las direcciones de periferia de un eje utilizadas para la lectura de posición y para la salida
de consigna deben estar en la misma memoria imagen parcial del (MIPP). En los ejes de
reductor, ambos ejes deben estar en la misma MIPP.
● Al configurar la CPU, esta MIPP se asigna a la alarma de sincronismo utilizada.
● Esta MIPP debe actualizarse en el OB de alarma antes/después de llamar las instrucciones
de Easy Motion Control con las instrucciones de sistema "SYNC_PI"/"SYNC_PO".
● Evalúe en su programa las respuestas de estas instrucciones de sistema y reaccione en
consecuencia. (en caso de error, la MIPP podría no actualizarse, y entonces el valor real
leído podría ser erróneo).

3054

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Orden de llamada recomendado
La figura siguiente muestra el orden de llamada recomendado para las instrucciones de Easy
Motion Control.
2%GHDUUDQTXH
SHM2%

2%GHDODUPDF¯FOLFD
SHM2%

2%GHDODUPDGHVLQFURQLVPR
SHM2%
/HHUPHPRULDLPDJHQ
SDUFLDOGHSURFHVR
6)&

'HILQLUFRQGLFLµQSDUD
OODPDGD0&B,QLW
/ODPDGDFRQGLFLRQDGD
0&B,QLW

/ODPDGDFRQGLFLRQDGD

/ODPDGD
0&B6LPXODWLRQ

/ODPDGD
0&B6LPXODWLRQ

/ODPDGD
(QFRGHU

/ODPDGD
(QFRGHU

3URJUDPDGHXVXDULR

0&B,QLW

3URJUDPDGHXVXDULR

/ODPDGD
0&B0RYH-RJ

/ODPDGD
0&B0RYH-RJ

/ODPDGD
0&B0RYH$EVROXWH

/ODPDGD
0&B0RYH$EVROXWH

/ODPDGD
0&B0RYH5HODWLYH

/ODPDGD
0&B0RYH5HODWLYH

/ODPDGD
0&B*HDU,Q

/ODPDGD
0&B*HDU,Q

/ODPDGD
0&B+RPH

/ODPDGD
0&B+RPH

/ODPDGD
0&B6WRS0RWLRQ

/ODPDGD
0&B6WRS0RWLRQ

/ODPDGD
0&B&RQWURO

/ODPDGD
0&B&RQWURO

/ODPDGD
2XWSXW

/ODPDGD
2XWSXW
(VFULELUPHPRULDLPDJHQ
SDUFLDOGHSURFHVR
6)&

(*) La llamada de la instrucción de reductor MC_GearIn solo tiene sentido con ejes esclavos.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3055

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Varios ejes
Para el funcionamiento de varios ejes en una CPU se recomiendan las estructuras siguientes
para el programa de usuario:
2%GHDODUPDF¯FOLFD

2%GHDODUPDGHVLQFURQLVPR

+DUGZDUHGHHQWUDGD

+DUGZDUHGHHQWUDGD
6)&OHHU0,33

(MHGULYHUGHHQWUDGD
(MHGULYHUGHHQWUDGD
(MHGULYHUGHHQWUDGD

(MHQGULYHUGHHQWUDGD
(MHQ
,QVWUXFFLRQHVGHGHVSOD]DPLHQWR
\UHJXODGRU
(MHQGULYHUGHVDOLGD

(MH

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR
\UHJXODGRU

6)&HVFULELU0,33

(MH

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR\
UHJXODGRU

(MH

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR\
UHJXODGRU

(MHGULYHUGHVDOLGD
(MHGULYHUGHVDOLGD
(MHGULYHUGHVDOLGD

Recomendación para OB de alarma cíclica.

Recomendación para OB de alarma de sincronis‐
mo.

Ventaja: Llamar los drivers de entrada al inicio del
OB se traduce en un mínimo desfase y una míni‐
ma fluctuación al leer la periferia.

Ventaja: es posible resumir todas las instruccio‐
nes de un eje en una única instrucción multiins‐
tancia.

Gracias a la MIPP necesaria en los OB de alarma
Desventaja: no es posible resumir todas las ins‐
trucciones de un eje en una única instrucción mul‐ de sincronismo, los datos de periferia leídos son
coherentes con independencia de la llamada del
tiinstancia.
driver.

Todos los ejes que están relacionados entre sí deben llamarse en el mismo OB.
En una aplicación isócrona, todos los ejes implicados deben estar en la misma memoria
imagen parcial del proceso.

Tratamiento de los datos de instancia
Los datos de instancia se pueden guardar en un DB propio para cada instrucción o en un DB
multiinstancia para todas las instrucciones.
Después de cargar en el módulo los datos de instancia de una instrucción es necesario
inicializar la instrucción. Para ello hay que activar la entrada "Init" de la instrucción. Ver también

3056

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Inicialización y modificaciones de parámetros (Página 3058) yGuardar y cargar el bloque de
datos de eje (Página 3063).

Interconexión de instrucciones
Las conexiones entre las instrucciones y el DB de eje representadas en la figura del apartado
anterior sobre interacción de las instrucciones, se realizan por medio de estos parámetros:
● Axis
● Init
(ver Significado de los parámetros comunes (Página 3058))
Además, se requieren las interconexiones siguientes:
● La entrada "EnableDrive" de la instrucción MC_Control debe interconectarse con un
interruptor de habilitación. La instrucción MC_Control emite una consigna de velocidad
únicamente cuando "EnableDrive" = TRUE.
● La entrada "EnableDrive" de la instrucción Output… debe interconectarse con la salida
"DriveEnabled" de la instrucción MC_Control. La instrucción Output… emite un valor
distinto de cero únicamente cuando "EnableDrive" = TRUE.
● La salida "DriveEnabled" de la instrucción MC_Control debe interconectarse con una
entrada de habilitación del accionamiento.
6DOLGDGHKDELOLWDFLµQ
$ODHWDSDGHSRWHQFLD

0&B&RQWURO
(QWUDGDGH
KDELOLWDFLµQ

(QDEOH'ULYH

'ULYH(QDEOHG

2XWSXW
(QDEOH'ULYH

Factores que influyen en la regulación de posición en la CPU
Recomendaciones para optimizar la regulación de posición:
● El tiempo de muestreo debe respetarse con la mayor exactitud posible.
– En la configuración hardware de la CPU debe parametrizarse la prioridad más alta
posible para el OB de alarma cíclica llamando las instrucciones.
– En la configuración hardware de la CPU debe parametrizarse la carga de ciclo por
comunicación más baja posible.
– Debe utilizarse un entorno isócrono; no se requieren otras medidas
● Al conectar la adquisición de valores de encóder mediante periferia descentralizada
(PROFIBUS DP/PROFINET IO), debe ajustarse una velocidad de transferencia del bus de
periferia lo más alta posible (p. ej. 12 Mbits/s).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3057

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Significado de los parámetros comunes
La tabla siguiente muestra los parámetros que se utilizan en todas las instrucciones.
Parámetro

Declaración Tipo de da‐ Descripción
tos

EN

INPUT

BOOL

Entrada de habilitación del cuadro KOP/FUP

ENO

OUTPUT

BOOL

Salida de habilitación del cuadro KOP/FUP

Axis

IN‑OUT

STRUCT

Este parámetro se interconecta con el DB de eje.
Con un DB del tipo AXIS_REF, la interconexión es la siguiente:
● Axis := DBname.Ax
Con un DB que contiene una variable del tipo AXIS_REF, la interconexión es la
siguiente:
● Axis := DBname.Variablenname.Ax

Init

IN‑OUT

BOOL

Este parámetro se interconecta con un bit de inicialización en el DB de eje que no es
utilizado por ninguna otra instrucción ("Init.I0" … "Init.I31", verCampo de bits para la
función de inicialización (Página 3066)).
Con Init = TRUE, la instrucción ejecuta la inicialización y a continuación resetea el bit.
Con un DB del tipo AXIS_REF, la interconexión es la siguiente:
● Init := DBname.Ax.Init.Ix
Con un DB que contiene una variable del tipo AXIS_REF, la interconexión es la
siguiente:
● Init := DBname.Variablenname.Ax.Init.Ix
con Ix = I0 … I31

Inicialización y modificaciones de parámetros
La función de las instrucciones de Easy Motion Control está basada en los datos guardados en
el DB de eje. Allí también se encuentran parámetros que describen el eje sustancialmente. Si
estos parámetros se modifican, es necesario que cada una de las instrucciones de Easy
Motion Control llamadas en el programa de usuario ejecute una vez su inicialización después
de la modificación. En los apartados sobre configuración (Página 3030), estos parámetros se
identifican con el siguiente símbolo:

Para la inicialización, en el DB de eje está definido el campo de bits "Init.Ix" y cada instrucción
tiene el parámetro "Init". Las instrucciones ejecutan su rutina de inicialización si su entrada
"Init" está activada y a continuación desactivan el bit de inicialización interconectado.
Los bits del campo de bits "Init.Ix" del DB de eje son activados:
● cada vez que se llama la instrucción MC_Init.
● por el software de configuración cuando se modifican los parámetros correspondientes del
DB de eje.
Para cada instrucción de Easy Motion Control llamada en el programa de usuario, el parámetro
"Init" debe interconectarse con un bit de inicialización del DB de eje que no sea utilizado por
ninguna otra instrucción. De este modo se garantiza que las instrucciones se inicializarán

3058

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
cuando sea necesario debido a una modificación de parámetros o a un arranque de la CPU
("Init.I0" … "Init.I31", ver Campo de bits para la función de inicialización (Página 3066)).
La instrucción MC_Init se llama una vez en los siguientes casos:
● cada vez que arranca la CPU
● si se ha modificado sin el software de configuración uno de los parámetros que en
los apartados sobre configuración (Página 3030) están identificados con el siguiente
símbolo:

Encontrará información complementaria sobre la instrucción de inicialización en MC_Init.
ADVERTENCIA
Los parámetros que en los apartados sobre configuración (Página 3030) están identificados
con el símbolo siguiente únicamente pueden modificarse con el eje parado:
Si se incumple este requisito, no se garantiza un movimiento controlado del eje.

ADVERTENCIA
En la inicialización se calculan valores auxiliares que se guardan en los parámetros estáticos
de las instrucciones y en el DB de eje. Por tanto, los bloques de datos de instancia y el DB de
eje únicamente pueden sobrescribirse cuando el eje está parado.
Si se incumple este requisito, no se garantiza un movimiento controlado del eje.

Desarrollo de los movimientos de desplazamiento
Inicio de una petición de desplazamiento
Los parámetros de entrada de las instrucciones de desplazamiento se interpretan una vez al
iniciar una petición de desplazamiento. La modificación de estos valores mientras se ejecuta
la petición no influye en el desplazamiento en curso.
Recorrido máximo
Para cada desplazamiento, el recorrido está limitado a la distancia equivalente a
224 incrementos del encóder. Se calcula
del modo siguiente:
5HFRUULGRGHOHMHSRUYXHOWDGHOHQFµGHU
0£[LPRUHFRUULGR    ;

,QFUHPHQWRVSRUYXHOWDGHOHQFµGHU

Ejemplo:
Recorrido del eje por vuelta del encóder

= 2,5 mm

Incrementos por vuelta del encóder

= 4096

recorrido máximo = 2 x 2,5 mm / 4096

= 10240 mm

24

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3059

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Excepción:
Las instrucciones MC_MoveJog y MC_GearIn no tienen limitación de recorrido en el caso de
un eje rotativo.

Anulación de un desplazamiento
Una instrucción de desplazamiento activa
● puede anularse en cualquier momento iniciando otra instrucción de desplazamiento,
● puede cancelarse iniciando la instrucción MC_StopMotion,
● puede cancelarse activando el modo manual.
En caso de anulación mediante otra instrucción de desplazamiento, el eje se frena o se acelera
hasta alcanzar la velocidad de la instrucción que causa la anulación y a continuación se
desplaza hasta la nueva posición de destino sin realizar ninguna parada intermedia. La
instrucción de desplazamiento anulada activa la salida "CommandAborted".
Si el nuevo desplazamiento requiere un cambio de sentido del eje, primero se para y a
continuación se mueve en sentido contrario (inversión).
Por motivos de seguridad, las deceleraciones de las dos instrucciones de desplazamiento que
se anulan deben coincidir. De este modo en caso de inversión se garantiza que no se
sobrepase el destino original del movimiento.

Uso repetido de una instrucción de desplazamiento
Una instrucción de desplazamiento puede llamarse varias veces para un eje si así lo requiere
el programa.

Reacción a errores
Todos los errores que se producen se muestran en el DB de eje, donde el usuario debe
acusarlos (ver Señalización y acuse de errores en el DB de eje (Página 3074)). Cada error
causa la cancelación de una petición de desplazamiento activa. La condición para que pueda
iniciarse una nueva petición de desplazamiento es que no haya ningún error presente.

3060

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Diagramas de evolución de señal

&RQVLJQDYHO
9HOUHDO

9HORFLGDG

La figura siguiente muestra las señales en un desplazamiento sin error.

7LHPSR

([HFXWH

%XV\

'RQH











,QLFLRGHODLQVWUXFFLµQGHGHVSOD]DPLHQWR



3XQWRGHIUHQDGR



/DFRQVLJQDKDDOFDQ]DGRODSRVLFLµQGHGHVWLQR



(OHMHKDDOFDQ]DGROD]RQDGHGHVWLQR



$OUHVHWHDU([HFXWHVHUHVHWHD'RQH(OSURFHVRKDILQDOL]DGR&XDQGRVHUHVHWHD
([HFXWHDQWHVGHDOFDQ]DUVHODSRVLFLµQGHGHVWLQRVHDFWLYD'RQHGXUDQWHXQ
FLFORDODOFDQ]DUVHODSRVLFLµQGHGHVWLQR\GHVSX«VVHYXHOYHDUHVHWHDU

La figura siguiente muestra las señales en un desplazamiento con error.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3061

Control de movimiento

9HORFLGDG

6.3 Control de movimiento (S7-300, S7-400)

7LHPSR

([HFXWH

%XV\

&RPPDQG$ERUWHG

6H³DOL]DFLµQGHHUURUHV
HQHO'%GHHMH









,QLFLRGHODLQVWUXFFLµQGHGHVSOD]DPLHQWR



6HKDSURGXFLGRXQHUURU



$OUHVHWHDU([HFXWHVHUHVHWHDODUHVSXHVWD&RPPDQG$ERUWHG&XDQGRVHUHVHWHD
([HFXWHDQWHVGHSURGXFLUVHHOHUURUVHDFWLYD0RWLRQ$ERUWHGGXUDQWHXQFLFORDO
DSDUHFHUHOHUURU\GHVSX«VVHYXHOYHDUHVHWHDU

Bloque de datos de eje
Tarea
El DB de eje es el elemento central de la gestión de datos de Easy Motion Control. Contiene:
● Parámetros que describen el eje sustancialmente (p. ej. direcciones de periferia)
● Parámetros de la regulación de posición que se calculan a partir de estos parámetros
básicos al inicializarse las instrucciones de Easy Motion Control
● Valores actuales de la regulación de posición (p. ej. posición, estados de fallo...)
● Bits de inicialización para coordinar el arranque de las instrucciones

3062

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La interacción de estos tipos de parámetros queda garantizada cuando se toma una de las
medidas siguientes:
● Editar y transferir el DB de eje con el software de configuración
● Asegurarse de que se llama la instrucción MC_Init después de modificar determinados
parámetros
En ambos casos se comprueba en la medida de lo posible la plausibilidad de los parámetros
introducidos y se calculan los valores que Easy Motion Control necesita internamente.
Asimismo, el software de configuración analiza el tipo de modificaciones y se encarga de
controlar los procesos de carga.

Guardar y cargar el bloque de datos de eje
ADVERTENCIA
Únicamente está permitido sobrescribir todo el DB de eje cuando el eje está parado.
El DB de eje NO se debe cargar en RUN.
Si se carga el DB de eje en el módulo sin tener en cuenta las indicaciones de los apartados
siguientes, no se garantiza el movimiento correcto del eje.

Offline
Después de modificar determinados parámetros es necesario que todas las instrucciones de
Easy Motion Control ejecuten una inicialización.
En la descripción del DB de eje estos parámetros se identifican con el siguiente símbolo:

Modificar y cargar estos parámetros
● tan solo es posible cuando el eje está parado,
● debe incluir la activación de los bits de inicialización (ver Inicialización y modificaciones de
parámetros (Página 3058)).

Online
No es posible que parámetros modificados online (p. ej. las coordenadas del punto de
referencia en el caso de encóders absolutos) se apliquen a la gestión de datos offline.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3063

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parámetros de eje
Todos los datos de longitud, velocidad o deceleración mencionados en el apartado "Configurar
Easy Motion Control (Página 3028)" hacen referencia a una unidad de longitud cualquiera pero
unificada. Todas las indicaciones de tiempo son en segundos.
En la columna "Nombre" de las tablas se indica el nombre de parámetro que hay en el DB de
eje, mientras que en la columna "Comentario" figura el nombre de parámetro utilizado en el
software de configuración.
Nota
Los parámetros no listados al configurar están reservados para uso interno por las
instrucciones de Easy Motion Control y no deben modificarse.

Valores actuales
Resumen
Los siguientes parámetros del DB de eje muestran información actualizada sobre el estado del
eje durante un desplazamiento. Está prohibido modificar el contenido de estos parámetros.

Valor real de posición
Aquí se muestra el valor real de posición actual.
Direc‐
ción

Nombre

Tipo

Valor inicial

Comentario

104.0

ActPosition

REAL

0.0

Valor real de posición
Rango de valores:
Número en coma flotante [unidad de lon‐
gitud]

Error de seguimiento
Error de seguimiento = consigna de posición actual – valor real de posición actual
Direc‐
ción

Nombre

Tipo

Valor inicial

Comentario

108.0

FollowingDistance

INT

0

Error de seguimiento
Rango de valores:
Número en coma flotante [unidad de lon‐
gitud]

3064

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Distancia residual
Aquí se indica durante un desplazamiento con indicación del destino (MC_MoveAbsolute,
MC_MoveRelative) la distancia residual hasta la posición de destino.
Un desplazamiento sin destino (MC_MoveJog, MC_Home) o un error con parada brusca
ajustan la distancia residual a 0.
Direc‐
ción

Nombre

Tipo

Valor inicial

112.0

RemainingDistance

REAL

0.0

Comentario
Distancia residual hasta el destino
Rango de valores:
Número en coma flotante [unidad de lon‐
gitud]

Velocidad consignada
Durante un desplazamiento, aquí se muestra la velocidad consignada del eje calculada por la
instrucción de desplazamiento.
Direc‐
ción

Nombre

Tipo

Valor inicial

Comentario

116.0

NomVelocity

REAL

0.0

Velocidad consignada
Rango de valores:
Número en coma flotante [unidad de lon‐
gitud/s]

Velocidad real
Aquí se muestra la velocidad real del eje.
Direc‐
ción

Nombre

Tipo

Valor inicial

Comentario

120.0

ActVelocity

REAL

0.0

Velocidad real
Rango de valores:
Número en coma flotante [unidad de lon‐
gitud/s]

Eje sincronizado
Si se utiliza un encóder incremental:
● FALSE: tras arrancar la CPU o detectarse un error de encóder
● TRUE: tras llevarse a cabo una búsqueda del punto de referencia o un posicionamiento del
punto de referencia
Si se utiliza un encóder absoluto:
● FALSE: antes del primer posicionamiento del punto de referencia
● TRUE: después del posicionamiento del punto de referencia

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3065

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Direc‐
ción

Nombre

Tipo

Valor inicial

Comentario

124.0

Sync

BOOL

FALSE

Eje sincronizado
FALSE = no sincronizado
TRUE = sincronizado

Valor actual del encóder
Aquí se muestra el valor actual del encóder.
Direc‐
ción

Nombre

Tipo

Valor inicial

Comentario

136.0

EncoderValue

DINT

L#0

Valor actual del encóder
Rango de valores:
Decimal [incrementos]

Campo de bits para la función de inicialización
Funcionamiento del campo de bits
Todas las instrucciones de Easy Motion Control deben inicializarse después de cada arranque
de la CPU y después de modificarse determinados parámetros.
Para este fin, en el DB de eje está definido el campo de bits "Init.Ix" y cada instrucción tiene el
parámetro "Init". Las instrucciones ejecutan su rutina de inicialización cuando su entrada "Init"
está activada. A continuación desactivan el bit de inicialización interconectado.
Cada vez que se llama una instrucción, el parámetro "Init" debe interconectarse con un bit del
campo de bits. Este bit no puede ser utilizado por ninguna otra instrucción (ver Inicialización y
modificaciones de parámetros (Página 3058)).
Siempre que se llama la instrucción MC_Init o en el software de configuración se modifica un
parámetro que no se activa hasta después de haberse inicializado las instrucciones, todos los
bits de este campo se ajustan a TRUE simultáneamente. De este modo, todas las
instrucciones ejecutan una inicialización la siguiente vez que se llaman.
Dirección Nombre

Tipo

Valor inicial

Comentario

278.0

STRUCT

TRUE

Campo de bits para inicialización de las ins‐
trucciones

Init

Programa de usuario como FB multiinstancia
En caso de guardar todos los parámetros de las instrucciones de desplazamiento en un DB o
si se quiere utilizar el mismo programa para varios ejes, el programa de usuario se crea en un
FB multiinstancia.
Los datos de eje también deben crearse en este DB multiinstancia. Para ello, en el FB
multiinstancia defina una variable estática del tipo AXIS_REF de la librería "Easy Motion
Control".

3066

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Interconecte los parámetros Axis y Init de las instrucciones de Easy Motion Control con estas
variables.
Llame la instrucción MC_Init en el bloque multiinstancia como primera instrucción de forma
condicionada. La condición debe activarse en el OB de arranque (p. ej. OB 100) y desactivarse
después de llamar la instrucción MC_Init.
Únicamente es posible crear nuevos DB multiinstancia con el TIA Portal o con el editor
KOP/AWL/FUP.

6.3.10.6

Puesta en servicio de Easy Motion Control

Consignas de seguridad
Introducción
Antes de la puesta en marcha debe tenerse en cuenta lo siguiente:

ADVERTENCIA
Las funciones de puesta en marcha producen el movimiento del eje.
En la puesta en marcha y durante el funcionamiento puede haber movimientos de
desplazamiento incontrolados del eje que causen daños personales y materiales graves.
Para evitar daños personales y materiales es necesario tomar las medidas siguientes:
● Instale un interruptor de PARADA DE EMERGENCIA en las inmediaciones del equipo.
Solo así puede garantizarse que en caso de un fallo del hardware o del software sea
posible desconectar la instalación de modo seguro.
● Instale finales de carrera de seguridad que actúen directamente en las etapas de potencia
de todos los accionamientos.
● Asegúrese de que ninguna persona tenga acceso al área de la instalación donde hay
piezas en movimiento.

Puesta en marcha del objeto tecnológico Eje
El editor de puesta en marcha le ayudará a poner en servicio el objeto tecnológico Eje y probar
su funcionalidad. Se pueden realizar los siguientes tests y mediciones:
● Test de cableado (Página 3068)
● Medición de velocidad (Página 3069)
● Referenciación del eje (Página 3069)
● Medición de recorrido (Página 3070)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3067

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Procedimiento
Para abrir el editor de puesta en marcha del objeto tecnológico Eje, haga lo siguiente:
1. Abra la carpeta "Objetos tecnológicos" en el árbol del proyecto.
2. En el árbol del proyecto, abra la instancia correspondiente al objeto tecnológico AXIS_REF
(p. ej. EMC_AXIS_1).
3. Haga doble clic en el objeto "Puesta en marcha".

Solución de errores
Si se producen errores durante la puesta en marcha, consulte la información sobre posibles
soluciones que se ofrece en el apartado Síntomas de error y soluciones posibles durante la
puesta en marcha del programa de usuario (Página 3071).

Información adicional
Encontrará información detallada sobre los parámetros y los botones de las interfaces de
puesta en marcha en las respectivas etiquetas emergentes.

Test de cableado
El test de cableado sirve para determinar el sentido de giro del eje.

Procedimiento
Para realizar el test de cableado, haga lo siguiente:
1. En la vista de configuración, haga clic en "Test de cableado".
2. Haga clic en el botón "Activar".
Se le preguntará si desea activar el control manual.
3. Haga clic en el botón "Aceptar".
Se establecerá una conexión online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad máxima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleración".
6. Asegúrese de que la posición inicial permita el movimiento del eje en ambos sentidos.
7. Para mover el eje, haga clic en el botón "Jog hacia atrás" o "Jog hacia delante".
8. Indique en "Resultado" si el eje se ha desplazado en el sentido deseado.
9. Si selecciona "Sí" como resultado, haga clic en el botón "Aceptar" de la ventana que se
mostrará.
10.Si selecciona "No" como resultado, haga clic en el botón "Sí" de la ventana que se mostrará.
Los parámetros "Corrección de sentido del encóder" y "Corrección de sentido del
accionamiento" cambiarán.

3068

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Medición de velocidad del eje
La medición de velocidad sirve para calcular la velocidad máxima del eje.

Procedimiento
Para medir la velocidad, haga lo siguiente:
1. En la vista de configuración, haga clic en "Medición de velocidad".
2. Haga clic en el botón "Activar".
Se le preguntará si desea activar el control manual.
3. Haga clic en el botón "Aceptar".
Se establecerá una conexión online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad máxima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleración".
6. Asegúrese de que la posición inicial permita el desplazamiento con una distancia suficiente
en al menos un sentido.
7. Haga clic en el botón "Jog hacia atrás" o "Jog hacia delante" y manténgalo pulsado hasta
que el valor del campo de salida "Salida v. real" alcance el valor de "Salida consigna".
Easy Motion Control calcula la velocidad máxima del eje y la indica en el campo de salida
"Valor determinado".
8. Si desea guardar en el proyecto la velocidad calculada del eje, haga clic en el botón
"Aplicar".
El valor calculado sobrescribirá la "Velocidad máxima" en la gestión de datos online/offline
del objeto tecnológico.

Búsqueda del punto de referencia
La especificación de un punto de referencia está prevista para encóders absolutos y, en este
caso, se denomina ajuste del encóder absoluto.

Procedimiento
Para especificar un punto de referencia para un encóder absoluto, proceda del siguiente modo:
1. En la vista de configuración, haga clic en "Referenciación del eje".
2. Haga clic en el botón "Activar".
Se le preguntará si desea activar el control manual.
3. Haga clic en el botón "Aceptar".
Se establecerá una conexión online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad máxima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleración".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3069

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
6. Haga clic en el botón "Jog hacia atrás" o "Jog hacia delante" hasta que el eje se haya
desplazado al punto de referencia.
Alternativa:
desplace el eje manualmente hasta el punto de referencia.
7. Introduzca un valor de posición como punto de referencia en el campo de entrada "Entrada
de la posición de referencia".
Se determina el offset entre la posición de referencia y la posición física del eje y se
almacena en el DB del eje.
8. En la ventana que aparece a continuación, confirme si desea almacenar el offset para el
ajuste del encóder absoluto en la gestión de datos offline del objeto tecnológico.
Nota
Si sustituye el encóder absoluto, deberá volver a especificar el punto de referencia.

Medición del recorrido del eje
La medición del recorrido sirve para calcular el recorrido del eje por vuelta del encóder.

Procedimiento
Para realizar la medición del recorrido, proceda del siguiente modo:
1. En la vista de configuración, haga clic en "Medición del recorrido".
2. Haga clic en el botón "Activar".
Se le preguntará si desea activar el control manual.
3. Haga clic en el botón "Aceptar".
Se establecerá una conexión online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad máxima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleración".
6. Haga clic en el botón "Jog hacia atrás" o "Jog hacia delante" hasta que el eje se haya
desplazado a la posición inicial.
Alternativa:
desplace el eje manualmente a la posición inicial.
7. Introduzca un valor de posición como posición inicial en el campo de entrada "Entrada de
la posición inicial".
8. Haga clic en el botón "Jog hacia atrás" o "Jog hacia delante" hasta que el eje se haya
desplazado a la posición final.
Alternativa:
desplace el eje manualmente a la posición final.

3070

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
9. Introduzca un valor de posición como posición final en el campo de entrada "Entrada de la
posición final".
Easy Motion Control calcula el recorrido del eje por cada vuelta del encóder y lo indica en
el campo de salida "Valor calculado".
10.Si desea guardar en el proyecto el valor calculado de recorrido del eje por vuelta del
encóder, haga clic en el botón "Aplicar".
El valor calculado se aplica en la gestión de datos online/offline del objeto tecnológico.

Síntomas de error y soluciones posibles durante la puesta en marcha del programa de usuario
El eje está parado a pesar de una petición de desplazamiento
Si el eje está parado a pesar de una petición de desplazamiento, realice las comprobaciones
siguientes:
Error

Soluciones

Cableado incorrecto del ac‐ ● Compruebe si la salida "DriveEnabled" de la instrucción MC_Control está interconectada
cionamiento
sin discontinuidades con la entrada de habilitación de la etapa de potencia.
● Compruebe si la salida "DriveEnabled" de la instrucción MC_Control está interconectada
con la entrada "EnableDrive" del driver de salida.
Error en las direcciones de Ajuste correctamente las direcciones de periferia y los números de canal:
periferia o números de canal En el DB de eje se esperan las direcciones iniciales de los módulos. A partir de la dirección
inicial y el número de canal (modo de contaje: a partir del canal 0), los bloques driver calculan
las direcciones de periferia específicas de cada módulo para consigna y valor real.
Modo de simulación activa‐
do

Desactive el modo de simulación ("Sim" = FALSE).

Modo manual activado sin
consigna de velocidad

Si está activado el modo manual ("ManEnable" = TRUE), especifique una "velocidad consig‐
nada para modo manual" ("ManVelocity" <> 0.0 [unidad de longitud/s]).

Habilitación de acciona‐
miento no concedida

Ajuste la entrada "EnableDrive" de la instrucción MC_Control a TRUE.

Error de eje presente

Si en el DB de eje está activado el bit "Error agrupado" ("Error"), el tipo de error del eje puede
verse en los campos de bits para la señalización de errores:

Si el modo de simulación está activado ("Sim" = TRUE), no se leen ni escriben valores de
periferia.

● Después de llamar la instrucción MC_Init, el error "Estado de parada de acuse obligatorio"
("Err.StoppedMotion") está siempre activado. Confirme el error activando "Acuse
agrupado" "ErrorAck" = TRUE.
● En caso de error de parametrización, vuelva a ejecutar MC_Init después de corregir los
valores erróneos.
● En caso de error del encóder, compruebe si el módulo de lectura de recorrido se ha
parametrizado por completo (en caso necesario, con ayuda del software de configuración
de módulos).
● Otros errores: elimine el error y acúselo activando "Acuse agrupado" "ErrorAck" = TRUE.
"Acuse agrupado" no se re‐ Si después de activar un "Acuse agrupado" ("ErrorAck"), Easy Motion Control no lo detecta ni
setea
resetea:
● Evite que las instrucciones de Easy Motion Control permanezcan en su rama de
inicialización debido a una llamada continua a la instrucción MC_Init.
● Compruebe si el módulo de lectura de recorrido reacciona al acuse de error.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3071

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Error

Soluciones

La "corrección de la veloci‐
dad" es distinta a 0%

Parametrice "corrección de la velocidad" = 0% ("Override").

Petición de desplazamiento En la instrucción de desplazamiento, ajuste el parámetro "Busy" = TRUE.
no procesada por el progra‐
ma
"Parámetro inadmisible de
instrucción de desplaza‐
miento" ("Err.DataErr") o
"Destino fuera del rango de
desplazamiento" ("Err.Tar‐
getErr")

Si carga el DB de eje en la CPU sin utilizar el software de configuración Easy Motion Control,
asegúrese de que a continuación se llama la instrucción MC_Init . MC_Init guarda valores
auxiliares en el DB de eje.

El eje se desplaza sin petición de desplazamiento
Si el eje se desplaza sin petición de desplazamiento, puede ser por las siguientes causas:
Error

Causas

Soluciones

El eje arranca
muy rápido.

El sentido de acción de la regulación está mal
ajustado.

Configure con ayuda del asistente "Test de cableado"
los parámetros "Corrección de sentido del encóder"
("PolarityEncoder") y "Corrección de sentido del ac‐
cionamiento" ("PolarityDrive"). De este modo, las ins‐
trucciones se adecuan a la instalación de hardware.

El eje se despla‐ La etapa de potencia del accionamiento está ha‐ —
za lentamente.
bilitada y el eje no está regulado (la instrucción
MC_Control emite "DriveEnabled" = FALSE).
La salida analógica no está bien cableada con la
etapa de potencia del accionamiento.

Corrija el cableado entre la salida analógica y la etapa
de potencia del accionamiento.

El driver de entrada o el driver de salida no acce‐ Ajuste los parámetros con ayuda del asistente "Test
de a los módulos pertenecientes al accionamien‐ de cableado".
to porque la dirección del módulo o el número de
canal no están bien ajustados en el DB de eje.

La velocidad del eje es distinta a la esperada o el eje vibra
¿Son correctos los parámetros que describen el eje?
Entre estos parámetros existen ciertas correlaciones que se aclararán por medio del siguiente
ejemplo.
● "Ganancia del regulador" ("FactorP"):
Si la "Ganancia del regulador" ("FactorP") seleccionada es demasiado grande, puede que
el eje vibre.
● "Velocidad máxima del eje" ("MaxVelocity")

3072

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● "Valor de referencia para velocidad máxima del eje" ("DriveInputAtMaxVel"):
Ejemplo para un control de ±10 V:
)DFWRU

0RWRU

Q P£[ bUPLQ
bUV
D9

PPSRUYXHOWD

&DEH]DO

Q PD[ bUPLQ
bUV

(QFµGHU

SDVRVSRUYXHOWD

Es aplicable la siguiente relación:
Si el módulo de salidas emite 9 V, el accionamiento girará a 3000 r/min. En el cabezal son
300 r/min o 5 r/s. El carro se desplaza 10 mm por cada vuelta del cabezal. De esto resulta
que la velocidad máxima del carro es de 10 mm/r • 300 r/min = 50 mm/s.
Así pues, debe ajustarse lo siguiente:
– "Velocidad máxima del eje" = 50 mm/s y "Valor de referencia para velocidad máxima del
eje" = 9 V.
● "Incrementos por vuelta del encóder" ("StepsPerRev"):
Para comprobar si el número de incrementos suministrado por el encóder coincide con el
valor parametrizado, puede observar el parámetro "Valor del encóder" con el software de
configuración mientras gira el encóder una vez con la mano.
Ejemplo: El "valor del encóder" varía 4096 incrementos con cada vuelta del cabezal.
● "Recorrido del eje por vuelta del encóder" ("DisplacementPerRev"):
Este parámetro asigna un determinado recorrido a una vuelta del encóder. Para comprobar
si es correcto, puede observar el parámetro "Valor real de posición" con el software de
configuración mientras gira el encóder una vez con la mano.
Ejemplo: El "valor real de posición" varía 10 mm con cada vuelta del cabezal.
● "Tiempo de muestreo" ("Sample_T"):
El tiempo de muestreo se utiliza, junto con la distancia recorrida desde el último muestreo,
para calcular la velocidad del eje. Debe equivaler al tiempo de llamada del OB en el que se
llaman las instrucciones de Easy Motion Control.
En el DB de eje debe introducirse "Sample_T" en segundos.

El posicionamiento no es lo suficientemente exacto
Si el posicionamiento no se lleva a cabo con la suficiente exactitud:
● compruebe el valor ajustado en el parámetro "Incrementos por vuelta del encóder"
("StepsPerRev").
● determine el parámetro "Recorrido del eje por vuelta del encóder" ("DisplacementPerRev")
con la mayor exactitud posible (asistente "Medición del recorrido").

Consulte también
Medición del recorrido del eje (Página 3070)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3073

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error de seguimiento máximo rebasado
El error de seguimiento máximo puede rebasarse por varias razones:
● Para que se alcance la "Velocidad máxima del eje" ("MaxVelocity") debe cumplirse lo
siguiente:
ಱ0D[)ROORZLQJ'LVWDQFHಯ !

ಱ0D[9HORFLW\ಯ
ಱ)DFWRU3ಯ

● El eje real no puede alcanzar la aceleración parametrizada.
● Los parámetros "Velocidad máxima del eje" ("MaxVelocity") y "Valor de referencia para la
velocidad máxima del eje" ("DriveInputAtMaxVel"), así como, dado el caso, "Valor de
referencia para velocidad 100%" ("DriveInputAt100") no están correctamente ajustados
(ver La velocidad del eje es distinta a la esperada o el eje vibra (Página 3072)).

La instrucción MC_GearIn no muestra ni "InGear" ni "Coupled"
La instrucción MC_GearIn no muestra ni "InGear" ni "Coupled" en los casos siguientes:
● El eje esclavo se acopla a un eje maestro que ya está desplazándose y (todavía) no ha
alcanzado la velocidad de salida del reductor.
● El eje esclavo ha soltado el acoplamiento debido a un error.

La instrucción MC_GearIn muestra "InGear", pero no "Coupled"
La instrucción MC_GearIn muestra "InGear" pero no "Coupled" en los casos siguientes:
● El eje esclavo ha alcanzado la velocidad de salida del reductor (posiblemente durante un
solo ciclo), pero a continuación la ha perdido de nuevo:
– El eje maestro ha acelerado o decelerado más de lo que le es posible al eje esclavo de
acuerdo con su parametrización y el factor de reducción.
– El eje esclavo no puede alcanzar la velocidad que resulta de la velocidad consignada del
eje maestro y del factor de reducción.

6.3.10.7

Diagnóstico

Señalización y acuse de errores en el DB de eje
Señalización y acuse de errores
Todos los errores detectados por las instrucciones se muestran en el DB de eje de la manera
siguiente:
● Mediante activación del error agrupado "Error"
● Mediante una señalización de error específica "Err.xxxx"
En los errores de acuse obligatorio, después de subsanar el error es necesario activar un
acuse de error (parámetro "ErrorAck" en el DB de eje, ver abajo).

3074

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Existen tres tipos de errores con distintas reacciones:
● Los errores con los que ya no se garantiza el correcto funcionamiento de la regulación de
posición dan lugar a una parada brusca:
La instrucción MC_Control hace que el eje se detenga con la rampa de frenado consignada
en "EmergencyDec". A continuación, la instrucción MC_Control ajusta su salida
"DriveEnabled" a "0".
Después de eliminar el error hay que activar el acuse de error en el DB de eje. A
continuación se activa de nuevo DriveEnabled.
● Los errores con los que la regulación de posición continúa funcionando dan lugar a
una parada suave:
La instrucción de desplazamiento activa frena el eje con la deceleración parametrizada. El
eje continúa estando regulado, pero "DriveEnabled" no se resetea.
En este estado el desplazamiento tan solo puede anularse mediante MC_StopMotion.
Después de eliminar el error hay que activar el acuse de error en el DB de eje.
● Errores en los parámetros de eje (errores de parametrización):
La instrucción MC_Init comprueba, dentro de lo posible, los parámetros introducidos en el
DB de eje. En caso de error, activa el bit "Err.ConfigErr" e introduce la causa exacta del error
en "Config.Err_xxx".
Los errores de parametrización no se pueden eliminar mediante acuse. Se impide el
arranque del eje. Después de corregir el parámetro mal introducido es necesario llamar de
nuevo la instrucción MC_Init. De este modo se resetean las señalizaciones de errores de
parametrización si ya no hay ningún error presente.
Nota
Para los errores con parada brusca y parada suave se aplica lo siguiente:
Mientras haya uno o más errores pendientes y no acusados, no es posible realizar ninguna
petición de desplazamiento.
Excepción:
Si tan solo se rebasa un final de carrera por software, es posible una petición de
desplazamiento en el sentido contrario. Después de salir del final de carrera por software, este
error se acusa automáticamente.

Nota
Si el error ha sido detectado por una instrucción de desplazamiento (p. ej. MC_MoveJog o
MC_MoveAbsolute) en esa instrucción se activa la salida de error "Error".
Si el error ha sido detectado por una instrucción de driver, en esa instrucción se muestra la
causa exacta del error (ver Driver de entrada).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3075

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Señalización de errores en el DB de eje
El error agrupado está en TRUE mientras haya pendiente al menos un error.
Dirección Nombre

Tipo

Valor inicial

Comentario

124.1

BOOL

TRUE

Error de grupo

Error

FALSE = no hay error
TRUE = error agrupado

Acuse de errores en el DB de eje
Al activar el acuse agrupado se suprimen todas las señalizaciones de error acusables.
El acuse agrupado solo actúa cuando el eje está parado y después de la inicialización.
Tras evaluar el acuse de error, "ErrorAck" se resetea automáticamente.
Dirección Nombre

Tipo

Valor inicial

Comentario

124.2

BOOL

FALSE

Acuse agrupado para todos los errores.

ErrorAck

FALSE = no hay acuse
TRUE = acusar errores

Error en eje
Error con parada suave
Descripción
Para todos los errores descritos a continuación se aplica lo siguiente: TRUE = el error está
presente.
Cuando el error requiere un acuse, esto se indica con el siguiente símbolo:

La tabla siguiente muestra todos los errores con parada suave.
Direc‐
ción

Nombre:
Err.xxx

Descripción

128.0

SWLimitMinExceeded

Inicio del final de carrera por software sobrepasado
Causa:

—

● El valor real de posición se encuentra fuera de la zona de trabajo.
● Sustitución en caso de un encóder absoluto.

Solución:

● Desplace el eje fuera del final de carrera.
● Desactive los finales de carrera por software ("SWLimitEnable" =
FALSE), vuelva a sincronizar el eje y active de nuevo los finales de
carrera por software.

3076

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‐
ción

Nombre:
Err.xxx

Descripción

128.1

SWLimitMaxExceeded

Fin del final de carrera por software sobrepasado
Causa:

—

● El valor real de posición se encuentra fuera de la zona de trabajo.
● Sustitución en caso de un encóder absoluto.

Solución:

● Desplace el eje fuera del final de carrera.
● Desactive los finales de carrera por software ("SWLimitEnable" =
FALSE), vuelva a sincronizar el eje y active de nuevo los finales de
carrera por software.

128.2

TargetErr

Destino fuera de la zona de desplazamiento
Causa:

● MC_MoveAbsolute:
–

El destino se encuentra en un final de carrera por software.

–

El destino es < "Inicio del eje rotativo" o ≥ "Fin del eje rotativo".

–

El recorrido de desplazamiento calculado es mayor que la distancia
equivalente a 224 incrementos del encóder.

–

Las magnitudes auxiliares en el DB de eje no se han calculado
porque no se ha llamado la instrucción MC_Init.

● MC_MoveRelative:
–

El recorrido de desplazamiento introducido lleva a un punto de
destino en un final de carrera por software.

–

El recorrido de desplazamiento predeterminado es mayor que la
distancia equivalente a 224 incrementos del encóder.

–

Las magnitudes auxiliares en el DB de eje no se han calculado
porque no se ha llamado la instrucción MC_Init.

● MC_Home:

Solución:

–

La coordenada del punto de referencia se encuentra en un final de
carrera por software.

–

La coordenada del punto de referencia es < "Inicio del eje rotativo" o
≥ "Fin del eje rotativo".

–

Las magnitudes auxiliares en el DB de eje no se han calculado
porque no se ha llamado la instrucción MC_Init.

● Corrija los parámetros.
● Llame la instrucción MC_Init.

128.3

128.4

NoSync

DirectionErr

El eje no está sincronizado
Causa:

La instrucción MC_MoveAbsolute se ha iniciado con el eje no sincronizado.

Solución:

Sincronice el eje (búsqueda del punto de referencia, posicionamiento del
punto de referencia).

Desplazamiento no permitido en el sentido especificado
Causa:

El movimiento no puede continuar hacia un final de carrera por software.

Solución:

Inicie un petición de desplazamiento alejándose del final de carrera por
software.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3077

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‐
ción

Nombre:
Err.xxx

Descripción

128.5

DataErr

Parámetro inadmisible de una instrucción de desplazamiento
Causa:

MC_MoveHome:
● "Velocity" < 0
● "Velocity" > 0 y "Acceleration" ≤ 0
● "Velocity" > 0 y "Deceleration" ≤ 0
● "Velocity" > 0 con encóder absoluto
● Para un eje lineal, "Position" está fuera del rango numérico.
● Las magnitudes auxiliares en el DB de eje no se han calculado porque
no se ha llamado la instrucción MC_Init.
MC_MoveAbsolute, MC_MoveRelative y MC_MoveJog:
● "Velocity" ≤ 0
● "Acceleration" ≤ 0
● "Deceleration" ≤ 0
● La coordenada de destino introducida o calculada está fuera del rango
numérico (con MC_MoveAbsolute y MC_MoveRelative).
● Denominador del factor de reducción (RatioDenominator") ≤ 0
(MC_GearIn)
● Numerador del factor de reducción ("RatioNumerator") = 0 (MC_GearIn)
● Una instrucción de desplazamiento se ha interrumpido y "Deceleration"
de la instrucción que ha causado la interrupción no coincide con la
deceleración parametrizada en la instrucción interrumpida
(ver Anulación de un desplazamiento (Página 3027)).
● Las magnitudes auxiliares en el DB de eje no se han calculado porque
no se ha llamado la instrucción MC_Init.

Solución:

● Especifique los valores permitidos.
● Inicialice las instrucciones.
● Llame la instrucción MC_Init.

3078

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‐
ción

Nombre:
Err.xxx

Descripción

128.6

StartErr

Imposible iniciar en el estado actual del eje
Causa:

● En una instrucción de desplazamiento o en MC_StopMotion, la entrada
Execute se ha activado en un momento en que el eje se encontraba en
un estado de error o en modo manual ("ManEnable" = TRUE) o
mientras estaba activa una instrucción MC_StopMotion.
● La instrucción MC_Home se ha iniciado con el eje no parado.
● En la instrucción MC_MoveJog están activados ambos sentidos.
● El eje maestro para la instrucción MC_GearIn se encuentra en un
estado inadmisible:

Solución:

–

Error con parada brusca

–

MC_Home está activo

–

Modo manual ("ManEnable" = TRUE)

● Subsane los errores que pueda haber presentes.
● Ponga el eje maestro en un estado admisible.

128.7

DistanceErr

Recorrido demasiado largo
Causa:

Un desplazamiento sin destino (MC_Home, MC_MoveJog, MC_GearIn) ha
recorrido un trayecto que equivale a más de 224 incrementos del encóder.
El eje se frena aproximadamente en este punto.
Para un eje lineal sincronizado, la instrucción MC_MoveJog o MC_GearIn
ha frenado en un final de carrera por software. Además, en la mayoría de
los casos está activado "SWLimitMinExceeded" o "SWLimitMaxExceeded".

Solución:
129.0

MasterErr

Procure que el trayecto recorrido no sobrepase el límite arriba indicado
(ver Recorrido máximo (Página 3059)).

Eje maestro en estado inadmisible
Causa:

Durante el acoplamiento del reductor, el eje maestro ha quedado en un
estado inadmisible:
● Error con parada brusca
● MC_Home está activo
● Modo manual ("ManEnable" = TRUE)

Solución:

Corrija el estado inadmisible del eje maestro.

Error con parada brusca
Descripción
Para todos los errores descritos a continuación se aplica lo siguiente: TRUE = el error está
presente.
Cuando el error requiere un acuse, esto se indica con el siguiente símbolo:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3079

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

La tabla siguiente indica todos los errores con parada brusca.
Direc‐
ción

Nombre:
Err.xxx

Descripción

130.0

StoppedMotion

Eje en estado de parada de acuse obligatorio
Causa:

El eje se encuentra en el estado de parada de acuse obligatorio
● tras la inicialización por llamada de la instrucción MC_Init.
● debido a uno de los errores listados en esta tabla.

Solución:
130.1

130.2

EnableDriveErr

FollowingDistErr

Resuelva un posible error pendiente.

Falta habilitación de accionamiento
Causa:

En la instrucción MC_Control, "EnableDrive" no está activado.

Solución:

Active "EnableDrive".

Error de seguimiento rebasado
Causa:

El eje no sigue las consignas, o las sigue demasiado lentamente.

Solución:

● Conecte el accionamiento.
● Optimice la "ganancia del regulador" (DB de eje dirección 44.0
(Página 3040)).
● Adapte la "corrección de sentido del encóder" (DB de eje dirección 74.0
(Página 3039)) de acuerdo con la "corrección de sentido del
accionamiento" (DB de eje dirección 86.0 (Página 3042)).
● Aumente el máximo error de seguimiento admisible (DB de eje
dirección 38.0 (Página 3051)).

130.3

StandstillErr

Zona de velocidad cero abandonada
Causa:

● El eje ha salido de la "zona de velocidad cero" sin petición de
desplazamiento.
● La "zona de velocidad cero" es menor que la "zona de destino".
● La "corrección de sentido del encóder" o la "corrección de sentido del
accionamiento" están mal parametrizadas.

Solución:

● Compruebe la conexión con la entrada de consignas de la etapa de
potencia.
● Corrija los parámetros "Zona de parada"/"Zona de destino" (DB de eje
dirección 34.0 (Página 3050)/30.0 (Página 3049))
● Durante la primera puesta en marcha:
Efectúe un test de cableado (DB de eje dirección 74.0 (Página 3039)/86.0
(Página 3042)).

3080

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‐
ción

Nombre:
Err.xxx

Descripción

130.4

TargetApproachErr

Error en la aproximación al destino
Causa:

El valor real no ha alcanzado la "zona de destino" dentro del "tiempo de
vigilancia para la aproximación a destino".

Solución:

● Optimice la "zona de destino" y el "tiempo de vigilancia para la
aproximación a destino" (DB de eje dirección 30.0 (Página 3049)/26.0
(Página 3051)).
● Compruebe el accionamiento y el eje.

130.5

EncoderErr

Error del encóder
Causa:

● El driver de entrada ha detectado un error del encóder. La causa concreta
del error se indica en el DB de instancia de la instrucción del driver. Véase
Driver de entrada.
● En el driver de entrada se ha activado la entrada "EncErr" (véase Driver
de entrada, apartado Tratamiento de errores).

Solución:
130.6

130.7

131.0

OutputErr

elimine la causa del error.

Error en driver de salida

ConfigErr

Causa:

En el driver de salida se ha activado la entrada "OutErr" (véase Driver de
salida, apartado Tratamiento de errores).

Solución:

elimine la causa del error.

Señalización agrupada: Datos del eje mal parametrizados

DriveErr

Acuse no posi‐
ble

Causa:

Los parámetros del DB de eje son erróneos. Para la causa concreta del error,
véase Error de parametrización (Página 3081).

Solución:

Modifique los parámetros erróneos y tome medidas para que se llame la
instrucción MC_Init.

Error en accionamiento

Acuse no posi‐
ble

Causa:

El driver de salida ha detectado un error en la etapa de potencia/el acciona‐
miento. La causa concreta del error se indica en el DB de instancia de la
instrucción del driver. Véase Driver de salida.

Solución:

elimine la causa del error.

Error de parametrización
Error de parametrización
La tabla siguiente muestra los posibles errores de parametrización con Easy Motion Control.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3081

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La columna "Dirección" contiene la dirección de la señalización de errores en el DB de eje. La
columna "Dirección del parámetro" remite a la dirección del parámetro erróneo en el DB de eje
(véase Estructura del bloque de datos de eje).
Direc‐
ción

Nombre
Config.xxx

Error de parametrización

Dirección del pará‐
metro

132.0

Err_AxisLimit

"Inicio del final de carrera por software" < -224+6 [unidad de
longitud]

6.0 (Página 3043) ,
10.0 (Página 3043)

"Fin del final de carrera por software" > +224-6 [unidad de
longitud]
"Fin del final de carrera por software" ≤ "Inicio del final de
carrera por software"
132.1

Err_MaxVelocity

"Velocidad máxima del eje" ≤ 0.0 [unidad de longitud/s]

14.0 (Página 3045)

132.2

Err_MaxAcceleration

"Aceleración máxima" ≤ 0.0 [unidad de longitud/s2]

18.0 (Página 3047)

132.3

Err_MaxDeceleration

"Deceleración máxima" ≤ 0.0 [unidad de longitud/s2]

22.0 (Página 3047)

132.4

Err_MonTimeTargetAppr

"Tiempo de vigilancia para la aproximación a destino" ≤ 0.0 [s] 26.0 (Página 3051)

132.5

Err_TargetRange

"Zona de destino" ≤ 0.0 [unidad de longitud]

132.6

Err_StandstillRange

"Zona de velocidad cero" ≤ 0.0 [unidad de longitud]

34.0 (Página 3050)

132.7

Err_MaxFollowingDist

"Error de seguimiento máx. admisible" ≤ 0.0 [unidad de lon‐
gitud]

38.0 (Página 3051)

133.0

Err_EmergencyDec

"Deceleración para parada brusca" ≤ 0.0 [unidad de longitud/ 54.0 (Página 3049)
s2]

133.1

Err_StepsPerRev

"Incrementos por vuelta del encóder" < 1

64.0 (Página 3036)

133.2

Err_DisplacementPerRev

"Recorrido del eje por vuelta del encóder" ≤ 0.0 [unidad de
longitud]

68.0 (Página 3038)

133.3

Err_NumberRevs

"Número de vueltas del encóder" < 1 para encóder absoluto 72.0 (Página 3037)

133.4

Err_PolarityEncoder

"Corrección del sentido del encóder" distinto de ±1

74.0 (Página 3039)

133.5

Err_PolarityDrive

"Corrección de sentido del accionamiento" distinto de ±1

86.0 (Página 3042)

133.6

Err_DriveInputAtMaxVel

"Valor de referencia para máxima velocidad del eje" ≤ 0.0 o >
"DriveInputAt100"

88.0 (Página 3041) ,
96.0 (Página 3041)

133.7

Err_AxisLength

Longitud del eje > 224 [unidad de longitud] o
longitud del eje > (231 -1) [incrementos]

6.0 (Página 3043) ,
10.0 (Página 3043)

134.0

Err_EncoderRange

El rango del encóder no concuerda con la longitud del eje
(véase "Recorrido del eje por vuelta del encóder", DB de eje
dirección 68.0 (Página 3038))

6.0 (Página 3043) ,
10.0 (Página 3043) ,
68.0 (Pági‐
na 3038) , 72.0 (Pá‐
gina 3037)

134.1

Err_MaxVelRotaryAxis

La velocidad máxima y el tiempo de muestreo no concuerdan
con la longitud del eje rotativo
(véase "Velocidad máxima del eje", DB de eje dirección 14.0
(Página 3045))

14.0 (Página 3045) ,
0.0 (Página 3047) ,
68.0 (Pági‐
na 3038) , 72.0 (Pá‐
gina 3037)

134.2

Err_DriveInputAt100

"Valor de referencia para una velocidad del 100%" ≤ 0

96.0 (Página 3041)

3082

30.0 (Página 3049)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Avisos JOB_ERR
Avisos JOB_ERR
JOB_ERR

JOB_ERR

JOB_ERR

Significado

(Hex)

(Dec)

(Int)

80A0

32928

-32608

Acuse negativo al leer del módulo. Módulo extraído durante la lectura o
módulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el módulo. Módulo extraído durante la escri‐
tura o módulo defectuoso.

80A2 1)

32930

-32606

Error de protocolo para capa 2

80A3

1)

32931

-32605

Error de protocolo en User-Interface/User

80A4

1)

32932

-32604

Fallo en la comunicación del bus K

80B0

32944

-32592

Registro / petición desconocida

80B1

32945

-32591

Indicación de longitud errónea. Parámetro FM_TYPE del DB de canal para
el módulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no está ocupado.

80B3

32947

-32589

El tipo de módulo real no es igual al tipo de módulo previsto.

80C0 1)

32960

-32576

El módulo aún no tiene preparados los datos que hay que leer.

80C1 1)

32961

-32575

Los datos de una petición de escritura semejante todavía no se han pro‐
cesado en el módulo.

80C2 1)

32962

-32574

El módulo está procesando en este momento el número máximo posible de
peticiones.

80C3 1)

32963

-32573

Los recursos necesarios (memoria, etc.) están ocupados en este momento.

80C4

1)

32964

-32572

Error de comunicación

80C5

1)

32965

-32571

La periferia descentralizada no está disponible

80C6 1)

32966

-32570

Cancelación de las clases de prioridad (rearranque normal o en segundo
plano)

8522

34082

-31454

DB del canal o DB de parámetros demasiado corto. No se pueden leer los
datos del DB (petición de escritura).

8532

34098

-31438

El número del DB de parámetros es demasiado grande (petición de escri‐
tura).

853A

34106

-31430

DB de parámetros no presente (petición de escritura).

8544

34116

-31420

Error en el enésimo (n > 1) acceso de lectura a un DB tras aparecer un error
(petición de escritura).

8723

34595

-30941

DB del canal o DB de parámetros demasiado corto. No se pueden escribir
los datos en el DB (petición de lectura).

8730

34608

-30928

DB de parámetros protegido contra escritura en la CPU. No se pueden
escribir los datos en el DB (petición de lectura).

8732

34610

-30926

El número del DB de parámetros es demasiado grande (petición de lectura).

873A

34618

-30918

DB de parámetros no presente (petición de lectura).

8745

34629

-30907

Error en el enésimo (n > 1) acceso de escritura a un DB tras aparecer un
error (petición de lectura).

1) Los errores 80A2 ... 80A4 así como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de espera sin la
intervención del usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3083

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

3084

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.1

7

Objetos tecnológicos "SIMATIC Ident"
Los objetos tecnológicos del grupo "SIMATIC Ident" le ayudan a configurar sus dispositivos y
sistemas de identificación SIMATIC.
El grupo "SIMATIC Ident" contiene los siguientes objetos tecnológicos:
● TO_Ident
● TO_TagLayout

TO_Ident
El objeto tecnológico "TO_Ident" es un objeto tecnológico universal para sistemas de
identificación SIMATIC que le ayuda a preparar, configurar y diagnosticar los dispositivos y
sistemas de identificación SIMATIC.

TO_TagLayout
El objeto tecnológico "TO_TagLayout" permite definir áreas de memoria del transpondedor
(que se denominan campos de variables) y asignarles un nombre unívoco. Esto facilita el
acceso posterior.

7.2

Agregar objeto tecnológico

Agregar objeto tecnológico en el árbol del proyecto
Al agregar un objeto tecnológico se genera un bloque de datos. En él se guarda la
configuración del objeto tecnológico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3085

SIMATIC Ident
7.2 Agregar objeto tecnológico

Requisitos
Para utilizar uno de los objetos tecnológicos "SIMATIC Ident" deben cumplirse los siguientes
requisitos:
● Se ha creado un proyecto.
– TO_Ident: V14 SP1 o superior
– TO_TagLayout: V16 o superior
● En función del hardware utilizado, se han agregado los dispositivos conectados a la
configuración hardware ("Dispositivos y redes"), se han conectado en red entre ellos y se
han configurado.
● El proyecto contiene como mínimo un controlador S7 y como mínimo un dispositivo de
identificación (p. ej. módulo de comunicación, lector o lector óptico).
Los controladores compatibles son los siguientes:
– S7-1200 V4.0 o superior
– S7-1500 V1.8 o superior
– ET200pro (CPU 1516pro) V1.8 o superior
– ET200SP V1.8 o superior

Procedimiento
Para agregar un objeto tecnológico, proceda del siguiente modo:
1. Abra la carpeta de la CPU en el árbol del proyecto.
2. Abra la carpeta "Objetos tecnológicos".
3. Haga doble clic en "Agregar objeto".
Se abre el cuadro de diálogo "Agregar objeto".
4. Haga clic en el botón "SIMATIC Ident".
5. En la columna "Versión", seleccione la versión más reciente ("V5.0" o superior).
6. Seleccione el objeto tecnológico deseado.
7. En en campo de entrada "Nombre", introduzca un nombre personalizado para el objeto
tecnológico.
8. Haga clic en "Más información" para guardar información propia sobre el objeto tecnológico.
9. Confirme con "Aceptar".

Resultado
El nuevo objeto tecnológico se genera y se guarda en la capeta "Objetos tecnológicos" del
árbol del proyecto.

3086

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"

7.3

Trabajar con el cuadro de diálogo de configuración
Las propiedades del objeto tecnológico se configuran en la ventana de configuración. Para
abrir la ventana de configuración del objeto tecnológico, proceda del siguiente modo:
1. Abra la carpeta "Objetos tecnológicos" en el árbol del proyecto.
2. Abra el objeto tecnológico en el árbol del proyecto.
3. Haga doble clic en el objeto "Configuración".

Símbolos de la ventana de configuración
Los símbolos que aparecen en la navegación local de la ventana de configuración e inspección
muestran más detalles sobre la integridad de la configuración:
La configuración contiene valores predeterminados y está completa.
La configuración solo contiene valores predeterminados. Con ellos es posible utilizar el objeto tecnológico sin más
modificaciones.
La configuración contiene valores definidos por el usuario o adaptados automáticamente y está completa.
Todos los campos de entrada de la configuración contienen valores válidos y se ha modificado como mínimo un valor
predeterminado.
La configuración es válida, aunque contiene valores imprevistos
Por lo menos un campo de entrada o una lista desplegable contiene un valor imprevisto. El campo o la lista desplegable
en cuestión se marca en amarillo. Al hacer clic, el roll out con el mensaje de advertencia le indica la causa de la
advertencia.
La configuración es incompleta o errónea.
Por lo menos un campo de entrada o una lista desplegable no contiene valor alguno o no es válido. El campo o la lista
desplegable en cuestión se marca en rojo. Al hacer clic, el roll out con el mensaje de error le indica la causa del error.

7.4

Objeto tecnológico "TO_Ident"

Introducción
El objeto tecnológico "TO_Ident" para productos SIMATIC Ident permite parametrizar
fácilmente un sistema de identificación en TIA Portal. Crea una interfaz de fácil
parametrización entre el hardware configurado y los bloques de función en la librería "SIMATIC
Ident".
Por medio del objeto "Configuración" es posible seleccionar un dispositivo configurado,
determinar el canal / punto de lectura y, en su caso, definir el sistema de identificación
conectado. De este modo, el objeto tecnológico determina automáticamente todos los
parámetros necesarios para el funcionamiento.
En el objeto "Diagnóstico" se muestran los 5 últimos mensajes de error que el dispositivo de
identificación ha notificado a los bloques de función. Además, en cada mensaje de error se
muestra también una descripción del error e información detallada sobre el comando
ejecutado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3087

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
La descripción siguiente muestra el procedimiento básico para agregar y configurar un objeto
tecnológico "TO_Ident".

Procedimiento
Para configurar el objeto tecnológico "TO_Ident", proceda del siguiente modo:
Paso

Descripción

1

Agregar objeto tecnológico (Página 3085)

2

Configurar dispositivos utilizando un objeto tecnológico (Página 3088)

3

Llamar una instrucción de identificación en el programa de usuario (Página 3095)

4

Cargar objeto tecnológico en la CPU

5

Diagnosticar dispositivos (Página 3097)

7.4.1

Configurar sistemas de identificación

7.4.1.1

Configurar dispositivos utilizando un objeto tecnológico

Configurar los parámetros básicos
En este grupo de parámetros se configuran los parámetros del sistema relativos al módulo.
Tabla 7-1

Parámetros del grupo "Parámetros básicos"

Parámetro

Descripción

Dispositivo de identificación

Haga clic en el símbolo "..." y seleccione el dispositivo de identificación que debe configurarse
en la carpeta "Periferia descentralizada" o "Módulos locales".
Es posible seleccionar los siguientes dispositivos de identificación:
● ASM 456
● RF166C
● RF120C, RF170C, RF180C
● RF185C, RF186C, RF188C, RF186CI, RF188CI
● RF610R, RF615R
● RF680R, RF685R
● MV400, MV500
Mostrar todos los dispositivos/módulos de identificación
Si desea configurar un dispositivo de identificación que todavía no está completamente in‐
tegrado en la versión actual de TIA Portal, active la casilla de verificación "Mostrar todos los
dispositivos/módulos de identificación". Cuando se activa este parámetro se muestra el pa‐
rámetro "LADDR". Encontrará información detallada sobre esta función en el apartado si‐
guiente.

Canal

3088

Abra la lista desplegable y, dado el caso, seleccione el canal del módulo de comunicación al
que está conectado el dispositivo que debe configurarse.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Parámetro

Descripción

Parametrización del lector

Abra la lista desplegable y seleccione el dispositivo/sistema que está conectado al dispositivo
de identificación y debe parametrizarse.

LADDR

Recuerde que este parámetro solo se muestra si se ha activado la casilla de verificación
"Mostrar todos los dispositivos/módulos de identificación".
Introduzca la dirección E/S del módulo seleccionado. Este parámetro viene predeterminado
por los parámetros "Canal" y, en su caso, "Punto de lectura".

Punto de lectura

Requisitos: En el parámetro "Parametrización del lector" se ha seleccionado un lector RF600.
Abra la lista desplegable y seleccione el punto de lectura que debe utilizarse.

Mostrar todos los dispositivos/módulos de identificación
Esta función permite configurar dispositivos de identificación que todavía no están
completamente integrados en la versión actual de TIA Portal. En este caso debe configurar
manualmente el objeto tecnológico. Tenga en cuenta que este ajuste repercute en algunos
parámetros y algunas funciones:
● LADDR
El valor de este parámetro se calcula a partir de la dirección inicial del dispositivo de
identificación seleccionado y del canal. De todas formas, es posible adaptar manualmente
este valor.
● Parámetros del dispositivo de identificación y Web Based Management
La función no soporta estos grupos de parámetros.
● Parámetros del lector
Dentro de este grupo de parámetros no se soporta el parámetro "Velocidad de
transferencia".
● Diagnóstico > Diagnóstico de hardware
La función no soporta el diagnóstico de hardware.

Configurar los parámetros del dispositivo de identificación
En este grupo de parámetros se muestran los siguientes parámetros del dispositivo de
identificación, según sea el que se ha seleccionado. Los parámetros mostrados para el
dispositivo de identificación se aplican automáticamente desde la configuración de los
dispositivos conectados.
Tenga en cuenta que no todos los valores de parámetros mostrados y aplicados desde la
configuración de los dispositivos conectados están permitidos en combinación con el objeto
tecnológico. Si se han ajustado valores no permitidos en la configuración de dispositivos,

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3089

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
pueden modificarse automáticamente mediante el botón "Configuración automática" o
manualmente desde la configuración de dispositivos.
Tabla 7-2

Parámetros del grupo "Parámetros del dispositivo de identificación"

Parámetro

Valor de parámetro visua‐ Valores de parámetro
lizado posiblemente
permitidos

Descripción

Modo de usuario

Perfil Ident/perfil normali‐
zado RFID

Con este parámetro se selecciona el bloque.

Perfil Ident/perfil nor‐
malizado RFID

FB 45 / FC 45
FB 55 / FC 55

Modo MOBY

Tenga en cuenta que únicamente los valores de
parámetros siguientes están permitidos en com‐
binación con el objeto tecnológico:
● Perfil Ident/perfil normalizado RFID: En el
controlador se utiliza el bloque de programa
para el perfil Ident/perfil normalizado RFID.

RF200/RF300/RF600;
RF200/RF300/RF600; Con este parámetro se ajusta el modo de ope‐
MV400/MV500; MOBY U/ MV400/MV500; MOBY ración del módulo de comunicación.
U/D
D
Tenga en cuenta que únicamente los valores de
RF680R/RF685R
parámetros siguientes están permitidos en com‐
RF680R/RF685R
binación con el objeto tecnológico:
MOBY I/E
● RF200/RF300/RF600; MV400/MV500;
MOBY U/D

Direccionamiento normal
RF300 Filehandler

● RF680R/RF685R

MOBY U Filehandler
MOBY I Filehandler
Dispositivo conecta‐ Parámetros vía FB / lec‐
do
tores ópticos

Parámetros vía FB /
lectores ópticos

Este parámetro solo se muestra en combinación
con el módulo de comunicación RF120C.
Tenga en cuenta que únicamente los valores de
parámetros siguientes están permitidos en com‐
binación con el objeto tecnológico:
● Parámetros vía FB / lectores ópticos

Botón "Configuración automática"
Los parámetros HWCN mostrados se aplican automáticamente desde la configuración de los
dispositivos conectados. Tenga en cuenta que no todos los valores de parámetros están
permitidos en combinación con el objeto tecnológico. Los valores de parámetros no permitidos
se destacan en color.
Haga clic en el botón "Configuración automática" para ajustar automáticamente los valores de
parámetros adecuados (p. ej. Modo de usuario). Los valores de parámetros del dispositivo
conectado se preparan para ser utilizados con el objeto tecnológico.
Nota
Comportamiento con MV400/MV500
Recuerde que con los lectores ópticos MV400 y MV500 el botón "Configuración automática"
no funciona. En estos dispositivos hay que introducir manualmente los parámetros HWCN en
la configuración de los dispositivos conectados.

3090

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"

Configurar los parámetros del lector
En función de los parámetros básicos ajustados, en este grupo de parámetros se muestran los
siguientes parámetros del lector.
Tabla 7-3

Descripción de los "Parámetros del lector"

Parametriza‐ Velocidad
ción del lec‐ de transfe‐
tor con "Pa‐ rencia 1)
rámetros bá‐
sicos"

Control
de pre‐
sencia

Rese‐
tear el
LED
de
error

Poten‐
cia HF

Número
máx. de
transpon‐
dedores

Tipo de
transpon‐
dedor

Verifi‐
cación

Selec‐
ción del
progra‐
ma con
reset

Secuen‐
cia de
bytes del
parámetro
Reset
[hex]

Con‐
fig mo‐
de 2)

IS
O
1
5
6
9
3

R
F
3
0
0

M
OB
YE

-

-

-

-

-

-

RF200
general

✓

✓

✓

-

✓

✓

RF290R

✓

✓

✓

✓

✓

✓

-

-

-

-

-

-

RF300
general

✓

✓

✓

-

✓

✓

✓

-

-

-

-

-

RF380R

✓

✓

✓

✓

✓

✓

✓

-

-

-

-

-

RF300
Gen 2
general

✓

✓

✓

-

✓

✓

✓

✓

✓

-

-

-

RF380R
Gen 2

✓

✓

✓

✓

✓

✓

✓

✓

✓

-

-

-

MV400/
MV500

-

-

-

-

-

-

-

-

-

✓

-

-

Lector gene‐
ral

✓

-

-

-

-

-

-

-

-

-

✓

✓

1)

Recuerde que este parámetro no se muestra si se ha activado la casilla de verificación "Mostrar todos los dispositivos/
módulos de identificación".

2)

Recuerde que este parámetro solo se muestra si se ha activado la casilla de verificación "Mostrar todos los dispositivos/
módulos de identificación".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3091

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Los parámetros específicos del dispositivo para los sistemas de lectura ópticos SIMATIC
MV400 y MV500, así como para los lectores SIMATIC RF600 (RF61xR y RF68xR), se ajustan
en el WBM de cada dispositivo en caso de conexión directa al controlador.
Tabla 7-4

Parámetros del grupo "Parámetros del lector"

Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Velocidad de
transferencia

19,2 kBd

115,2 kBd

La selección depende del módulo de comunica‐
ción y del sistema de identificación utilizados.
Tenga en cuenta que el valor que se indica aquí
se aplica automáticamente desde la configura‐
ción de los dispositivos conectados.

57,6 kBd
115,2 kBd

Con este parámetro se ajusta la velocidad de
transferencia de datos entre el módulo de comu‐
nicación y el lector.
Si hay un lector RFID conectado: tras cambiar la
velocidad de transferencia es necesario desco‐
nectar y volver a conectar el lector (desconectar/
conectar la tensión).
Con un lector óptico conectado: la velocidad de
transferencia seleccionada aquí debe coincidir
con la velocidad de transferencia seleccionada
en el firmware del lector.
Control de presencia

Activado
Desactivado (campo HF
activado)
Desactivado (campo HF
desactivado)

Activado

Activado = se notifica la presencia de un trans‐
pondedor en cuanto hay uno en el campo de
antena del lector.
Desactivado (campo HF activado) = se suprime
la indicación de presencia en el FB. De todas
formas, la antena del lector sigue conectada
mientras no se desconecte por medio de un co‐
mando.
Desactivado (campo HF desactivado) = se su‐
prime la indicación de presencia en el FB. La
antena solo se conecta cuando se envía un co‐
mando y después vuelve a desconectarse.

3092

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Resetear el LED de
error

Activado

Activado

Activado = cada reset del FB provoca el reset del
parpadeo del LED de error en el módulo de co‐
municación.

Desactivado

Desactivado = el LED de error indica siempre el
último error. Solo es posible resetear la indica‐
ción desconectando el módulo de comunicación.
Activado = El parpadeo del LED en caso de error
solo se resetea desconectando la tensión de ali‐
mentación del lector.

Activado
Tras un comando correc‐
to

Tras un comando correcto = El parpadeo del
LED en caso de error se resetea tras ejecutar
correctamente un comando. Esto solo se aplica
a errores de comunicación.

Tras un comando Reset
Tras un comando Reset o
correcto

Tras un comando Reset = El parpadeo del LED
en caso de error se resetea mediante "init_run" o
"WRITE-CONFIG" con "Init" (RESET).
Tras un comando Reset o correcto = El parpa‐
deo del LED en caso de error se resetea me‐
diante "init_run" o "WRITE-CONFIG" con "Init"
(RESET) o tras ejecutar correctamente un co‐
mando.
Potencia HF 1)

0,50 ... 2,00

1,00

Ajuste de la potencia de salida del lector

0,50 ... 5,00

1,25

Los valores seleccionables dependen del dispo‐
sitivo conectado.

Número máx. de trans‐ 1 ... 4
pondedores

1

Número de transpondedores esperados en el
campo de la antena

Modo de operación del
lector

Modo normal

Selección del modo de operación deseado para
el lector

1)

Selección de los tipos de transpondedor utiliza‐
dos

La selección depende del dispositivo conectado.
Modo normal
Maestro P2P
Esclavo P2P
Tipo de transpondedor

1)

La selección depende del dispositivo conectado.
Verificación

☐
☑

☐

Este parámetro activa el modo ECC. En modo
ECC, el lector puede detectar errores de bit en el
transpondedor con gran probabilidad. Siempre
que sea posible, con un acceso de lectura se
devuelven datos corregidos (los datos del trans‐
pondedor no cambian). Con un acceso de escri‐
tura, siempre que sea posible se corrigen los da‐
tos pertinentes en el transpondedor. Si se han
detectado y corregido errores de bit, se pone el
parámetro "ANZ_ECC = True" o "STATUS =
0xF0FE0002". Si no ha sido posible corregir el
error, se emite el error "0x0B" o "0xE2FE0100".
Requisitos: el transpondedor se formateó con el
bit ECC activado.
Únicamente se soportan transpondedores del ti‐
po RF300 e ISO 14443 (p. ej. MOBY E).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3093

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Parámetro

Valor de parámetro

Valor predetermina‐
do

Descripción

Selección del progra‐
ma con reset

Sin cambios de programa Sin cambios de pro‐
grama
1 ... 15

Selección del programa que debe utilizarse des‐
pués de rearrancar el lector óptico. Si se ajusta
el valor de parámetro "Sin cambios de progra‐
ma", tras un rearranque del dispositivo se selec‐
cionará el último programa activo.

Secuencia de bytes
del parámetro Reset
[hex]

1)

1)

Representación hexadecimal de la secuencia de
bytes del parámetro Reset del lector.

Config mode

0 ... 255

3

Definición de los ajustes de reset
Indique si en caso de reset se transfieren los
datos de configuración (secuencia de bytes).
1: en caso de reset no se transfieren datos de
configuración.
3: en caso de reset se transfieren los datos de
configuración.

1)

Encontrará una descripción completa de estos parámetros en los apartados siguientes.

El parámetro "Potencia HF"
Los valores seleccionables dependen del valor indicado en el parámetro "Parametrización del
lector".
● RF290R
– Rango de valores: 0,50 ... 5,00 W
– Valor predeterminado: 1,00 W
● RF380R; RF380R Gen 2
– Rango de valores: 0,50 ... 2,00 W
– Valor predeterminado: 1,25 W

El parámetro "Tipo de transpondedor"
Selección de los transpondedores utilizados. La selección depende del valor indicado en el
parámetro "Parametrización del lector". Es posible seleccionar los siguientes tipos de
transpondedor:
● ISO 15693
● RF300
● MOBY E
Si se selecciona "ISO 15693", se mostrarán las siguientes posibilidades de selección, en
función de la parametrización del lector:
Parametrización del lector

Valores

RF200 general

General

RF290R

General
MDS D3xx, Infineon

3094

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Parametrización del lector

Valores

RF300 general

General

RF380R

MDS D3xx, Infineon
MDS D4xx, Fujitsu - 4 kB
MDS D1xx, NXP
MDS D2xx, TI
MDS D261, STM

RF300 Gen 2 general

General

RF380R Gen 2

MDS D3xx, Infineon
MDS D4xx, Fujitsu - 4 kB
MDS D1xx, NXP
MDS D2xx, TI
MDS D261, STM
MDS D5xx, Fujitsu - 8 kB

El parámetro "Secuencia de bytes del parámetro Reset [hex]"
Esta función permite indicar los parámetros de reset en representación hexadecimal. Estos
parámetros solo deben ser utilizados por usuarios expertos.
Están disponibles los siguientes parámetros de reset:
Byte

1

2...5 1)

6

7...8

9

10

11

12

13...14

15

16

Valor

0x04

0x00

0x0A

0x00

scan‐
ning_
time

param

op‐
tion_1

distance_
limiting

multitag

field_on_
control

field_on_
time

1)

En el módulo de comunicación RF180C V2.2 y superior en combinación con MOBY U, el byte 4 está preasignado a la
semana natural y el byte 5, al año.

7.4.1.2

Llamar una instrucción de identificación en el programa de usuario

Procedimiento
Para llamar la instrucción el programa de usuario, proceda del siguiente modo:
1. Abra la carpeta de la CPU en el árbol del proyecto.
2. Abra la carpeta. "Bloques de programa".
3. Haga doble clic en el OB para la ejecución cíclica del programa.
El bloque se abre en el área de trabajo.
4. En la ventana "Instrucciones", abra el grupo "Paquetes opcionales" y la carpeta "SIMATIC
Ident".
La carpeta y las subcarpetas contienen las instrucciones.
5. Seleccione una instrucción y arrástrela a su OB mediante Drag & Drop.
Se abre el cuadro de diálogo "Opciones de llamada".
6. En la lista "Nombre" seleccione un bloque de datos de instancia o introduzca el nombre de
un bloque de datos de instancia nuevo.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3095

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
7. Confirme con "Aceptar".
8. Seleccione el objeto tecnológico configurado y arrástrelo al parámetro "HW_CONNECT"
mediante Drag & Drop.

Resetear los lectores mediante el "perfil Ident" o el bloque "Reset_Reader"
Hay diferentes formas de resetear lectores:
● Si se trabaja con los bloques Ident, los tipos de lectores se resetean con el bloque
"Reset_Reader". Con ello, se transfieren al lector los valores ajustados en el objeto
tecnológico.
● Si se trabaja con el perfil Ident, al activar el bit "INIT" se transfieren al lector los valores
ajustados en el objeto tecnológico.
● Si desea enviar un comando "WRITE-CONFIG" propio, en lugar del bit "INIT" debe
utilizarse el bit "EXECUTE".
Si durante el tiempo de ejecución debe modificarse un parámetro de reset del objeto
tecnológico, el valor correspondiente puede sobrescribirse en el bloque de datos del objeto
tecnológico utilizando el programa de usuario. Los parámetros de reset se encuentran en el
bloque de datos del objeto tecnológico, bajo "Static.CONFIGURATION.param_buffer[]".
Encontrará información detallada sobre el perfil Ident y los bloques Ident en el manual "Perfil
Ident y bloques Ident, Función estándar para sistemas Ident" en las páginas del "Industry
Online Support (https://support.industry.siemens.com/cs/ww/es/ps/14971/man)".

7.4.1.3

Cargar la configuración en la CPU
Después de llevar a cabo la configuración, los cambios deben traspasarse del objeto
tecnológico o del controlador S7 a los dispositivos conectados.

Cargar en dispositivo
Tenga en cuenta que para cargar en los dispositivos hay que distinguir entre "Software (solo
cambios)" y "Hardware y software (solo cambios)". Si únicamente se han realizados cambios
en el software, la carga se lleva a cabo a través del objeto tecnológico. Si se han realizados
cambios tanto en el hardware como en el software, la carga se lleva a cabo a través del
controlador S7.
ATENCIÓN
Cargar en dispositivo utilizando el botón "Configuración automática"
Si durante la configuración se ha utilizado el botón "Configuración automática", los cambios
deben cargarse en los dispositivos conectados a través del controlador S7 ("Hardware y
software (solo cambios)").

3096

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"

7.4.2

Diagnosticar sistemas de identificación
Una vez finalizada la configuración del objeto tecnológico, existe la posibilidad de vigilar los
dispositivos configurados en el objeto tecnológico utilizando la función de diagnóstico.

Requisitos
● Hay una conexión online entre STEP 7 (TIA Portal) y el controlador S7.
● La instrucción de identificación se llama en el programa de usuario.
● Se ha creado un objeto tecnológico y se ha cargado en el controlador S7.
● El controlador S7 está en estado operativo "RUN".

Procedimiento
Para abrir el editor de visualización para las funciones de diagnóstico, proceda del siguiente
modo:
1. Abra la carpeta "Objetos tecnológicos" en el árbol del proyecto.
2. Abra el objeto tecnológico correspondiente en el árbol del proyecto.
3. Haga doble clic en el objeto "Diagnóstico".
4. Haga clic en el símbolo "Observar todos" para activar el modo de observación.

7.4.2.1

Diagnóstico de bloques
El diagnóstico de bloques permite visualizar los últimos mensajes de error que se han
producido al ejecutar el comando.
El objeto tecnológico lee y muestra los valores siguientes:

Tabla 7-5

Valores visualizados del "diagnóstico de bloques"

Valores visualizados

Descripción

Fecha y hora

Muestra la fecha y hora en las que se ha producido el error.

Comando

Muestra el comando con el que se ha producido el error.

Descripción del error

Muestra una breve descripción del error que se ha presentado.
Nota: En la tabla se visualizan y describen los cinco últimos mensajes de error. Cuando se
visualiza un nuevo mensaje de error, los mensajes de error que se mostraban hasta el mo‐
mento se desplazan una fila hacia abajo. Se muestran como máximo los cinco últimos men‐
sajes de error.

Mensaje de error

Muestra el mensaje de error del error que se ha presentado.

Descripción del error

Muestra una descripción detallada del error que se ha presentado.

Fecha y hora

Muestra la fecha y hora en las que se ha producido el error.

Código de comando

Muestra el código del comando con el que se ha producido el error.

Comando

Muestra el comando con el que se ha producido el error.

Atributo

Muestra el atributo del comando con el que se ha producido el error.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3097

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"

7.4.2.2

Diagnóstico de hardware
El diagnóstico de hardware permite visualizar los parámetros de estado del lector
seleccionado y del transpondedor que está actualmente en el campo de la antena.

Estado de monitorización
En este área pueden actualizarse los parámetros de lector y transpondedor, además de
resetear los estados de los contadores de errores del lector.

Estado del lector
El objeto tecnológico lee y muestra los parámetros siguientes:
Tabla 7-6

Parámetros visualizados del área "Estado del lector"

Parámetros visualizados

Descripción

Tipo de hardware

Tipo de hardware del lector

Versión de hardware

Versión de hardware del lector

Versión del Bootloader

Versión del Bootloader del lector

Versión de firmware

Versión de firmware del lector

Tipo de driver

Tipo de driver de la interfaz serie del lector

Versión del driver

Versión del driver de la interfaz serie del lector

Interfaz

Interfaz serie utilizada en el lector
Valores posibles: RS232, RS422

Velocidad de transferencia

Velocidad de transferencia utilizada en el lector
Valores posibles: 19,2; 57,6; 115,2 kBd

Distance limiting

Potencia de emisión ajustada en el lector (RF380R)
Se pueden ajustar los siguientes valores:
Valor

Significado

02

0,5 W

03

0,75 W

04

1,0 W

05

1,25 W

06

1,5 W

07

1,75 W

08

2,0 W

Número máx. de transponde‐ Número máximo de transpondedores previstos que pueden estar simultáneamente en el
dores
campos de antena del lector.

3098

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Parámetros visualizados

Descripción

Tipo de transpondedor

Perfil de tipo de transpondedor ajustado
Se pueden ajustar los siguientes valores:
Valor

Significado

00

RF300 (RF3xxT)

01

ISO 15693 general

03

MDS D3xx, Infineon

04

MDS D4xx,Fujitsu - 2 kB

05

MDS D1xx, NXP

06

MDS D2xx, TI

07

MDS D261, ISTM

08

MDS D5xx, Fujitsu - 8 kB

10

RF300 (RF3xxT)

20

ISO 14443 (MOBY E, E6xx)

31

Modo general

40

Maestro P2P

41

Maestro P2P y modo mixto con transpondedor ISO (MDS Dxxx)

50

Maestro P2P y modo mixto con transpondedor RF300

4F

Esclavo P2P

Estado de la antena

Estado de la antena

Control de presencia

Perfil de control de presencia ajustado

Estado del transpondedor
El objeto tecnológico lee y muestra los parámetros siguientes:
Tabla 7-7

Parámetros visualizados del área "Estado del transpondedor"

Parámetros visualizados

Descripción

UID

Unique Identifier del transpondedor

Tipo de transpondedor

Tipo de transpondedor (fabricante, nombre)

Versión

Versión del chip del transpondedor

Estado de bloqueo del rango
OTP

Bloques bloqueados del rango OTP en el chip

Tamaño de la memoria de
usuario

Tamaño de la memoria de usuario en bytes

Tamaño de un bloque de me‐ Tamaño de los bloques de memoria del chip del transpondedor
moria
Número de bloques de me‐
moria

Número de bloques de memoria del chip del transpondedor

Valor medido para densidad
de flujo de potencia

Potencia radiada que llega al transpondedor.

Contador de errores pasivo

Número de errores ocurridos en reposo

Cuanto menor sea el valor, más potencia recibe el transpondedor.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3099

SIMATIC Ident
7.4 Objeto tecnológico "TO_Ident"
Parámetros visualizados

Descripción

Contador de errores activo

Número de errores ocurridos
Suma de los errores de firma y CRC

Contador de presencias

Tiempo en [ms] que el transpondedor ha pasado en el campo de la antena.

Contadores de errores
El objeto tecnológico lee y muestra los siguientes tipos de errores:
Tabla 7-8

Tipos de errores visualizados del área "Contadores de errores"

Tipos de errores visualizados Descripción
FZP

Contador de errores pasivo (contador de errores en reposo)
Este contador de errores es un indicador de un entorno con interferencias. Solo es relevante
para un transpondedor de tipo "RF300"

ABZ

Contador de cancelaciones
Contadores de errores de protocolo en la interfaz aérea, en los que el transpondedor ha
interrumpido la comunicación.

CFZ

Contador de errores de código
Contador de fallos o colisiones en la interfaz aérea en la que ha fallado la comunicación.

SFZ

Contador de errores de firma
Contador de errores en el cifrado de firmas de bloques de datos escritos

CRCFZ

Contador de errores CRC
Contador de errores en las comprobaciones CRC

ASMFZ

Contador de errores para problemas de interfaz con el host (CM/PC)
Contador de errores en la interfaz serie.

Intensidad de señal
AMLI

Indicador de potencia AM
Intensidad de señal de recepción [dB] para la modulación de amplitud con la que se ha
detectado el transpondedor.

PMLI

Indicador de potencia PM
Intensidad de señal de recepción [dB] para la modulación de fase con la que se ha detectado
el transpondedor.

Nota
Estados de los contadores de errores
Los estados visualizados de los contadores de errores se cuentan a partir del último
rearranque del lector o desde la última inicialización manual de los contadores de errores.

3100

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.5 Objeto tecnológico "TO_TagLayout"

7.5

Objeto tecnológico "TO_TagLayout"

Introducción
El objeto tecnológico "TO_TagLayout" permite dividir el área de memoria de los
transpondedores en un máximo de 64 áreas de direcciones (que se denominan campos de
variables), direccionar dichas áreas simbólicamente, determinar su tamaño y tipo de datos y
asignarles nombres unívocos. La asignación de nombres específicos a las áreas de
direcciones facilita la programación posterior con los bloques "Read_Tagfield" y
"Write_Tagfield".

7.5.1

Configurar parámetros
En este grupo de parámetros se configuran los parámetros de las áreas de direcciones del
transpondedor.

Tabla 7-9

Parámetros del grupo "Configuración"

Parámetro

Descripción

Dirección
más baja del transpondedor

Introduzca la dirección más baja posible del transpondedor. Por lo general, la dirección más
baja siempre es "0", excepto en el transpondedor siguiente:
RF320T: 65280

Dirección
más alta del transpondedor

Introduzca la dirección más alta posible del transpondedor. La dirección más alta depende del
tamaño de memoria del transpondedor. Son posibles las siguientes direcciones máximas:
● MDS D
–

MDS D1xx: 111

–

MDS D2xx: 255

–

MDS D3xx: 991

–

MDS D4xx: 1999

–

MDS D5xx: 8191

● RF300
–

RF320T: 65299

–

RF340T/RF360T: 8188

–

RF330T/RF340T/RF350T/RF360T/RF380T: 32764

–

RF370T: 65276

● RF600 (Bank 3)
–

RF630L/RF690L/RF610T/RF620T/RF625T/
RF630T/RF640T/RF680T: 63

–

RF642L/RF645T: 255

–

RF682T: 383

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3101

SIMATIC Ident
7.5 Objeto tecnológico "TO_TagLayout"
Parámetro

Descripción

Selección del
banco de memoria

Seleccione el banco de memoria en el que deben crearse los campos de variables siguientes.
Este parámetro solo es relevante para transpondedores de la familia de productos SIMATIC
RF600.
Los transpondedores RF600 están divididos en los 4 bancos siguientes:
● Bank 0: Reservierd
● Bank 1: EPC
● Bank 2: TID
● Bank 3: User
El banco 3 contiene los datos de usuario configurables.

Campo de variables

Seleccione el campo de variables que desee editar. Para cada objeto tecnológico "TO_Ta‐
gLayout" están disponibles 64 campos de variables como máximo.

Nombre

Introduzca el nombre para el campo de variables seleccionado (máx. 20 caracteres). El
nombre introducido se muestra automáticamente en el parámetro "Campo de variables" de
la lista desplegable y, en su caso, se transfiere.

Tipo de datos

Seleccione el tipo de datos del campo de variables. Tenga en cuenta que la selección del tipo
de datos repercute en los parámetros "Elementos" y "Longitud".

Dirección inicial

Introduzca la dirección inicial del campo de variables seleccionado. La dirección inicial debe
estar comprendida entre la dirección más baja y más alta que se ha definido anteriormente
para el transpondedor y no puede solaparse con el rango que ocupan otros campos de
variables.

Elementos

Visualización y emisión de los elementos de array/string. Este parámetro solo es relevante
para los tipos de datos "Array" o "String" (1 ... 254).

Longitud

Visualización y emisión de la longitud del campo de variables. Tenga en cuenta que el valor
de este parámetro viene predefinido por el parámetro "Tipo de datos".
Si se ha seleccionado el tipo de datos "Array", el valor es idéntico al valor del parámetro
"Elementos". Si se ha seleccionado el tipo de datos "String", el valor indicado aquí es 2 bytes
mayor que el valor del parámetro "Elementos".

Crear DB/DT

Haga clic en el botón "Crear DB/DT" para crear un bloque de datos/tipo de datos que permita
acceder fácilmente a los campos de variables definidos. Si se ha revisado un objeto tecno‐
lógico "TO_TagLayout" que ya existía, el bloque de datos/tipo de datos se actualiza.
El bloque de datos contiene una lista de todos los campos de variables del objeto tecnológico
junto con las respectivas ID y sirve para la selección simbólica de un campo de variables en
el parámetro "TAGFIELD" de los bloques de función "Read_Tagfield" y "Write_Tagfield".
Nombre del DB: <nombre del TO>_Indexes
El tipo de datos puede utilizarse en un bloque de datos y suministra datos de usuario al
parámetro "IDENT_DATA" de los bloques de función "Read_Tagfield" y "Write_Tagfield". En
el parámetro se crea un elemento del tipo de datos (campo de variables).
Nombre del DT: <nombre del DT>_Datatypes

Los cambios en los parámetros del área de direcciones se transfieren directamente al objeto
tecnológico "TO_TagLayout".

3102

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

SIMATIC Ident
7.5 Objeto tecnológico "TO_TagLayout"

7.5.2

Cargar la configuración en la CPU
Después de llevar a cabo la configuración, los cambios deben traspasarse del objeto
tecnológico o del controlador S7 a los dispositivos conectados.

Cargar en dispositivo
Tenga en cuenta que para cargar en los dispositivos hay que distinguir entre "Software (solo
cambios)" y "Hardware y software (solo cambios)". Si únicamente se han realizados cambios
en el software, la carga se lleva a cabo a través del objeto tecnológico. Si se han realizados
cambios tanto en el hardware como en el software, la carga se lleva a cabo a través del
controlador S7.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3103

SIMATIC Ident
7.5 Objeto tecnológico "TO_TagLayout"

3104

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético
1
1Count24V, 338
1Count5V, 402
1PosU
Activar JOBs, 2898
Acuse de fallo EXTF_ACK,
Ajustar valor real (JOB 1), 2916
Ajustar vigilancia de sentido de giro (JOB
11), 2925
Búsqueda del punto de referencia (MODE
3), 2904
Cancelar procesamiento de JOB (JOB 0), 2915
Causas de error para JOB_ERR, 2935
Causas de error para POS_ERR, 2934
Control del accionamiento, 2899, 2943, 2949,
2955
Detener (MODE 0), 2901
Distancia de cambio de velocidad, 2943, 2950,
2955
Distancia de desconexión, 2943, 2949, 2955
Entradas del encóder, 2945
Error en el control de MODEs y JOBs, 2933
Errores de parametrización, 2930
Errores externos, 2930
Estado RESET, 2937
Evaluación de las señales del encóder, 2899
Evaluar señal de búsqueda de referencia (JOB
9), 2922
Final de carrera por hardware, 2940, 2947, 2953
Final del eje rotativo, 2939, 2946
Funciones, 2895
Habilitaciones en función del sentido, 2901
Incrementos por vuelta del encóder, 2952
Iniciar MODEs, 2897
Interfaz de control, 2956
Interfaz de realimentación, 2958
Inversión del sentido de giro, 2939, 2945, 2952
Jog (MODE 1), 2902
Leva de reducción, 2941, 2948, 2954
Modificar la distancia de cambio de velocidad
(JOB 4), 2921
Modificar la distancia de desconexión (JOB
3), 2920
Modo de dosificación, 2896, 2938, 2945
Mostrar valores actuales (JOB 15), 2927
Mover zona de alcance del encóder (JOB
2), 2918

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Número de vueltas del encóder, 2952
Posicionamiento absoluto (MODE 5), 2912
Posicionamiento relativo (MODE 4), 2910
Sensor del punto de referencia, 2942, 2948
Sentido de arranque para la búsqueda del punto
de referencia, 2942, 2949
Señal de búsqueda de referencia, 2941, 2948
STOP de CPU/maestro, 2936
Tipo de eje, 2939, 2946, 2953
Tipo de encóder, 2951
Tmin Cambio de sentido, 2944, 2950, 2956
Velocidad de transferencia, 2951
1SSI
Lectura de los valores del sensor, 2657, 2672,
2684
1STEP 5V
Aceleración/deceleración a, 2966
Búsqueda del punto de referencia, 2970
búsqueda del punto de referencia,
desarrollo, 2972
curva de desplazamiento, 2964
Definición del punto de referencia, 2975
detener la petición de desplazamiento, 2980
eje de valor módulo, 2982
Entrada digital DI0 (3), 2986
Entrada digital DI1 (7), 2987
Frecuencia base, 2966
Frecuencia de inicio y parada Fss, 2964
Frecuencia de salida/velocidad Fa, 2965
Frecuencia/velocidad máxima del eje
Fmax, 2965
habilitación de impulsos, 2984
inicio de una petición de desplazamiento, 2969
modificar parámetros durante el
funcionamiento, 2985
Modo de velocidad, 2978
Modo incremental absoluto, 2977
Modo incremental relativo, 2976
reacción a STOP de la CPU/del maestro, 2987
Tipo de eje, 2982

2
2PULSE
Conexión en paralelo de ambos canales, 1194
contador de secuencias, 1190
Control directo de DO, 1191
Medición de intensidad, 1190
Modulación de ancho de impulsos, 1159

3105

Índice alfabético

retardo a la conexión/desconexión, 1175
salida de frecuencia, 1184
salida de impulsos, 1154
tren de impulsos, 1169

A
Absolute actual value, 1558, 1559
Absolute encoder adjustment, 1590
Absolute value adjustment, 1607
Accionamiento
Datos máquina, 2840
Accionamiento paso a paso, 3004
Accionamiento paso a paso con un sensor tipo
Stepper, modo PULSE REFEED, 3007
Activar
Datos máquina, 479, 2705, 2797
Activar contador, 319
con la entrada digital 1I2, 320
Con la marca cero, 322
Mediante una señal externa, 319
Active homing, 1590, 1592, 1596, 1597, 1649, 1927
Actualización de datos, (PIP_Mode)
Actuator, 1386
Additive leading value, 1876
Tags, 1878
Additive setpoint torque, 1586
Agregar fila de separación, 2427
Agregar fila Empty, 2427
Ajustar valor real, 487, 564, 2729, 2823
Datos en el DB de canal, 488, 565, 2730, 2824
Desarrollo, 487, 565, 2730, 2823
Efecto, 488, 565
Efectos, 2730, 2824
Requisitos, 487, 565, 2730, 2823
Ajustar valor real al vuelo, 487, 564, 2823
Datos en el DB de canal, 488, 565, 2824
Desarrollo, 487, 565, 2823
Requisitos, 487, 565, 2823
Ajuste
dinámicos, 471
Ajuste del canal
FM 350-2, 282
Ajuste dinámico, 471, 538, 616
Ajuste por defecto
Alarma de diagnóstico, 1110
Ajuste predeterminado, 1222
Alarma de diagnóstico, 62, 273, 300, 333
¿Qué es una alarma de diagnóstico?, 1109, 1142
Ajuste por defecto, 1059, 1110, 1143
Definición, 1059, 1109
Disparar, 1058, 1059, 1109, 1142, 1143

3106

en casos de error, 1142
habilitación, 137
habilitar, 1059, 1110, 1143
OB 82, 1059, 1110, 1143
Alarma de proceso, 62, 81, 258, 296, 329
Habilitación, 146
habilitar, 258, 329
perdida, 144
Alarmas de diagnóstico, 547, 627, 2775, 2875
Evaluación, 2778, 2878
Alarmas de proceso
habilitar, 541, 619
Ámbito de aplicación, 3002
Amplitud de dither, 1259
Ancho de impulso mínimo, 238, 318
Anulación de un desplazamiento
Easy Motion Control, 3027, 3060
Aproximación al destino, 2709, 2802
Aproximación en bucle, 2733, 2831
Datos en el DB de canal, 2734, 2832
Desarrollo, 2734, 2832
Requisitos, 2733, 2832
Articulated arm
2D, 2107
2D with orientation, 2110
3D, 2113
3D with orientation, 2118
Asignación
Registro de diagnóstico DS0, 1111
Registro de diagnóstico DS1 del FM 355-2, 1112
Asignación de terminales
Conector frontal del FM 350-1, 222
Conector frontal del FM 350-2, 279
conector frontal del FM 351, 2701
conector frontal del FM 352, 484
Conector frontal del FM 450-1, 307
conector frontal del FM 451, 2792
conector frontal del FM 452, 561
conector frontal del SM 338, 2660
interfaz del encóder del FM 351, 2700
interfaz del encóder del FM 352, 483
interfaz del encóder del FM 451, 2792
Avisos RET_REALU, 1064, 1065, 1114, 1115, 1150,
1151
AxesGroup, 2059
Axis control panel, 1495, 1677, 1682
Axis type, 1551

B
Blocked zones, 2182, 2183

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Bloque de datos de eje
Cargar, 3063
Guardar, 3063
Borrar distancia residual, 2729, 2822
Búsqueda de la marca de referencia, 3015
Búsqueda del punto de referencia, 2718, 2810
Cancelar, 2722, 2814
Datos en el DB de canal, 2721, 2813
Datos en el DB de parámetros, 2722, 2814
Efectos, 2722, 2814
Requisitos, 2719, 2811
Sincronización, 2718, 2810
Tipos, 2722, 2814
Velocidad de inicio, 2759, 2858

C
Calcular coordenada
Decalaje de señal cero, 489, 567
Cam, 1867, 1938
Basics, 1867
Configuration, 1938, 1941, 1975
Functions, 1863
Import/export, 1975
Interpolation, 1891
Tags, 2045
Cam editor, 1889, 1938, 1941, 1975
Cam track
Basics, 1814
Configuration, 1833
Diagnostics, 1840, 1842
Functions, 1787
Tags, 1856
Cambio de sentido, 2734, 2833
Cambio en el valor real, 486, 563
Cambio rápido de levas
Comprobación de datos, 496, 574
Datos utilizados en el DB de canal, 496, 573
Definición, 495, 573
Desarrollo, 495, 573
Deshacer, 497, 574
Efectos, 497, 574
Requisitos, 495, 573
Camming, 1889
Tags, 1901
Campo de aplicación, 3002
Cancelar, 2714, 2806
Búsqueda del punto de referencia, 2722, 2814
JOG, 2717, 2809
Modo incremental, 2729, 2822

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Cancelar preselección del valor real, 487, 564, 2731,
2824
AREALREM_EN, 489, 566
Datos en el DB de canal, 2731, 2825
Captura (Capture), 29, 32
Captura de bordes, 2829
Datos en el DB de canal, 2830
Datos en el DB de parámetros, 2831
Desarrollo, 2830
Errónea, 2831
Requisitos, 2829
Capture, 22, 23, 96, 118, 154, 166
Cargar
Bloque de datos de eje, 3063
Ciclo de aplicación, 1218, 1223
CircMode, 2171
Circular motion, 2170
Circular path
Definition, 2171
Clases de error
Avisos, 557, 637
Error de datos de leva, 556, 636
Error de diagnóstico, 558, 638
Fallo operativo, 552, 632
Clases de errores
Error de datos, 553, 633, 2784, 2884
Error de datos máquina, 2785, 2885
Error de las tablas de incrementos, 2787, 2887
Error de operador, 2783, 2883
Fallo operativo, 2782, 2882
Clases de fallos
Avisos, 2788, 2888
Error de datos máquina, 554, 634
Error de diagnóstico, 2789, 2889
Closed loop position control, 1613, 1614, 1616, 1659,
1661, 1675, 1935, 1937
Closed-loop control, 1613, 1614, 1616, 1659, 1661,
1675, 1935, 1937
Códigos de error
Gx_XIST2, 3016
Compatibility list, 1543
Comportamiento de conmutación
de la leva de tiempo, 486, 563
Comportamiento de las salidas digitales
Activar al alcanzarse el valor de comparación por
la duración del impulso hacia atrás, 249, 328
Activar al alcanzarse el valor de comparación por
la duración del impulso hacia delante, 248, 328
Activar cuando se alcance el valor de
comparación para la duración del impulso hacia
delante/atrás, 248, 328

3107

Índice alfabético

Activar si la lectura del contador <= valor de
comparación, 248, 327
Activar si la lectura del contador >= valor de
comparación, 247, 327
Ajuste predeterminado, 246, 292
Condiciones marco, 251
Conmutar en los valores de comparación, 250
en los modos de contaje, 244, 325
en los modos de medición, 255
en modo isócrono, 246
No se compara, 247
Requisitos, 329
Sin comparación, 327
Comportamiento de un motor Stepper, 3007
Comportamiento en el tiempo
Tecnología estándar, 1212
Time-based IO, 1212
Comprobación de datos, 496, 574
por el módulo, 496, 574
Conexión de accionamiento S7-1200 Motion
Control, 2314
Conexión de encóder S7-1200 Motion Control, 2314
Configuración, (Entorno del sistema)
Configuración estándar, 1220
Espacio de direcciones, 1250, 1272, 1288, 1302,
1313, 1326
Configuración de canal, 1354
Módulo tecnológico, 1227
Configuración de canales, 1365
Configuración hardware para Motion Control
S7-1200, 2304
Congelar, 228
Congelar/redisparar, 230
Contacto inversor, 2719, 2811
Contaje
Continuo, 195
Periódico, 197
Único, 196
Valor de comparación, 101, 158
Contaje periódico, 197
Contaje sin fin, 195
Contaje único, 196
Control de puerta, 22, 26, 52, 76, 78, 96, 154
en modo isócrono, 216
Control directo de una salida digital, 1333
Controller-controller data exchange, 1988
Setting up, 1992
Conveyor tracking, 2177
Coordenada del punto de referencia, 515, 593, 2755,
2854
Corrección de velocidad
Easy Motion Control, 3027

3108

Coupling factor, 2160
CPU compactas
Características, 11, 14, 1241
CPU compactas S7-1500, (Módulo tecnológico)
Cross-PLC synchronous operation, 1986
Cascading, 1989
Communication, 1988
Controller-controller data exchange, 1988
Delay time, 1990, 1999
Interconnection overview, 1996, 1997
Interconnection possibilities, 1989
Recursive interconnection, 1991
Routes, 1999
Tags, 1991
Time response, 1990
Tolerance time, 1988
Cylindrical robot
3D, 2137
3D with orientation, 2141

D
Data type
DB_Any, 1462
Datos de encóder, 2737, 2835
Datos en el DB de canal, 2738, 2836
Desarrollo durante la lectura, 2737, 2836
Requisitos, 2737, 2836
Datos de leva
Escribir, 481
Leer, 482
Datos de posición, 2737, 2835
Datos en el DB de canal, 2737, 2835
Desarrollo durante la lectura, 2737, 2835
Datos en el DB de canal
Ajustar valor real, 2730, 2824
Ajustar valor real al vuelo, 2824
Aproximación en bucle, 2734, 2832
Búsqueda del punto de referencia, 2721, 2813
Cancelar preselección del valor real, 2731, 2825
Captura de bordes, 2830
Datos de encóder, 2738, 2836
Datos de posición, 2737, 2835
Datos máquina, 2706, 2798
Decalaje de señal cero, 2826
Definir punto de referencia, 2732, 2828
Entrada de habilitación, 2737, 2835
JOG, 2716, 2808
Medición de longitud, 2830
Modo incremental, 2728, 2729, 2820, 2823
Señales de realimentación del diagnóstico, 2739,
2837

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Señales de realimentación para el
posicionamiento, 2836
Señales de respuesta del posicionamiento, 2738
tablas de incrementos, 2708
Datos en el DB de parámetros
Búsqueda del punto de referencia, 2722, 2814
Captura de bordes, 2831
Entrada de habilitación, 2835
Final de una operación de posicionamiento, 2715,
2807
Modo incremental, 2728, 2821
Datos máquina, 2705, 2797
Accionamiento, 2840
Activar, 479
Datos en el DB de canal, 2706, 2798
Entrada, 2741
Entrada de habilitación, 532, 610
Escribir, 479
escribir, activar, modificar, leer, 2705, 2797
Leer, 481
Datos máquina del encóder
Datos en el DB de parámetros, 525, 603
DB de diagnóstico
Configuración, 2779, 2879
Datos, 550, 630, 2779, 2879
Estructura, 550, 630
DB de eje
Tarea, 3062
DB_Any, 1462
Decalaje de señal cero, 2825
Datos en el DB de canal, 2826
Datos utilizados en el DB de canal, 490, 567
Definición, 489, 567
Desarrollo, 490, 567, 2825
Deshacer, 492, 569, 2827
Efectos, 2826
en un eje lineal, 490, 568
en un eje rotativo, 491, 568
Requisitos, 2825
ZOFF_EN, 489, 567
Definición
Alarma de diagnóstico, 1109
Definir punto de referencia, 492, 569, 2731, 2827
Datos en el DB de canal, 2732, 2828
Datos utilizados en el DB de canal, 492, 570
Definición, 492, 569
Desarrollo, 492, 570, 2732, 2828
Efectos, 493, 570, 2732, 2828
Particularidades del encóder absoluto, 493, 571
Requisitos, 492, 570, 2732, 2827
Sincronización, 2731, 2827

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Delta picker
2D, 2124
2D with orientation, 2127
3D, 2130
3D with orientation, 2133
Desactivación, 2713, 2805
JOG, 2716, 2808
Modo incremental, 2729, 2822
Desarrollo
Ajustar valor real, 2730, 2823
Ajustar valor real al vuelo, 2823
Aproximación en bucle, 2734, 2832
Captura de bordes, 2830
Decalaje de señal cero, 2825
Definir punto de referencia, 2732, 2828
JOG, 2715, 2807
Leer datos de posición, 2737, 2835
Leer datos del encóder, 2737, 2836
Medición de longitud, 2830
Modo incremental con número de incremento
1-100, 2725, 2817
Modo incremental con número de incremento
252, 2818
Modo incremental con número de incremento
254, 2726, 2819
Modo incremental con número de incremento
255, 2726, 2819
Señales de realimentación del diagnóstico, 2739,
2837
Señales de realimentación para el
posicionamiento, 2836
Señales de respuesta del posicionamiento, 2738
Deshacer
Decalaje de señal cero, 2827
Deshacer la función
Cancelar preselección del valor real, 489, 566
Destino ficticio, 2734, 2833
Posición, 2735, 2833
Detector de proximidad, 474, 477
Detener
Easy Motion Control, 3027
Determinismo, (Previsibilidad)
Diagnóstico
Easy Motion Control, 3028, 3074
High_Speed_Counter, 109
Módulo tecnológico, 174, 189, 1240, 1364, 1371
SIMATIC Drive Controller, 191
SSI_Absolute_Encoder, 130
Diagnostics
S7-1500 Motion Control, 1480, 1481, 1484
Direct homing, 1590, 1605

3109

Índice alfabético

Direction reversal at the hardware limit switch, 1591,
1599, 1651, 1928
Disparar
Alarma de diagnóstico, 1109
Distancia de cambio de velocidad, 2693, 2745, 2844
Distancia de cambio de velocidad negativa, 2746,
2845
Distancia de cambio de velocidad positiva, 2746,
2845
Distancia de desconexión, 2693, 2746, 2845
Distancia de desconexión negativa, 2747, 2846
Distancia de desconexión positiva, 2747, 2846
Distancia mínima entre bordes, 521, 599, 2858
Distancia residual, 2729, 2822
Dithering, 1259
Dosificación, 210, (Ejemplos de aplicación de Timebased IO)
Drive
Compatibility list, 1543
Drives compatibility list, 1412
DSC (Dynamic Servo Control), 1614, 1616, 1659,
1935
Duración del impulso, 256, 324
Ajuste predeterminado, 256, 324
Rango de valores, 256, 324
Duración del periodo de dither, 1259
Dynamic default values, 1579, 1641, 1918
Dynamic Servo Control (DSC), 1614, 1616, 1659,
1935

E
Easy Motion Control
Anulación de un desplazamiento, 3027, 3060
Búsqueda del punto de referencia, 3026
Campo de bits para inicialización, 3066
Configuraciones hardware, 3019
Corrección de velocidad, 3027
DB de eje, 3062
Destino, 3022
Detener, 3027
Diagnóstico, 3028, 3074
Diseño del programa de usuario, 3053
Distancia residual, 3022
Eje lineal, 3023
Eje parado, 3071
Eje rotativo, 3024
El eje se desplaza sin petición de
desplazamiento, 3072
El eje vibra, 3072
Entorno de llamada, 3054
Error con parada brusca, 3079

3110

Error con parada suave, 3076
Error de parametrización, 3075, 3081
Error de seguimiento, 3022, 3074
FB multiinstancia, 3066
Inicio de una petición de desplazamiento, 3059
Interacción de las instrucciones, 3053
Interruptor de PARADA DE EMERGENCIA, 3067
JOG, 3026
Medición de recorrido, 3070
Medición de velocidad, 3069
Orden de llamada de las instrucciones, 3055
Parámetros comunes para todas las
instrucciones, 3058
Parámetros de eje, 3064
Posicionamiento, 3021
Posicionamiento absoluto, 3027
Posicionamiento del punto de referencia, 3026
Posicionamiento relativo, 3027
Reacciones a errores, 3028
Reajuste del encóder absoluto, 3026
Reductor, 3027
Seguimiento, 3027
Simulación, 3028
Sincronizar, 3026
Test de cableado, 3068
Valores actuales, 3064
Velocidad del eje, 3072
Zona de desplazamiento, 3023
Zona de destino, 3023
Zona de trabajo, 3023
Zona de velocidad cero, 3023
Zonas de vigilancia, 3023
Efectos
Ajustar valor real, 2730, 2824
Búsqueda del punto de referencia, 2722, 2814
Decalaje de señal cero, 2826
Definir punto de referencia, 2732, 2828
Eje
Coordenada del punto de referencia, 515, 593,
2755, 2854
Distancia mínima entre bordes, 521, 599, 2858
Final de carrera por software, 512, 590, 2752,
2851
Final del eje rotativo, 2753, 2852
Histéresis, 519, 597
Reajuste del encóder absoluto, 516, 594, 2755,
2854
Tipo de búsqueda del punto de referencia, 2754,
2853
Tipo de eje, 2751, 2850
Tipos de eje, 512, 590

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Velocidad de inicio en la búsqueda del punto de
referencia, 2759, 2858
Velocidad de simulación, 521, 599
Eje de posicionamiento
Variables, 2513, 2615
Eje lineal
Easy Motion Control, 3023
Eje parado
Easy Motion Control, 3071
Eje rotativo
Easy Motion Control, 3024
Ejemplos de aplicación de Time-based IO, 1211
El eje se desplaza sin petición de desplazamiento
Easy Motion Control, 3072
Emergency stop deceleration, 1581, 1643, 1919
Encóder
conectable, 218
incremental, 218
incremental de posición, 218
Incrementos por vuelta, 2761, 2861
Incrementos por vuelta del encóder, 524, 602
Longitud de telegrama, 530, 608, 2765, 2864
Número de vueltas del encóder, 529, 607, 2764,
2863
Paridad, 2766, 2865
recorrido por vuelta del encóder, 523, 601
Seleccionar tipo de señal, 234, 288, 315
Sentido de contaje, 527, 605, 2760, 2859
Sentido del detector de proximidad, 530, 608
Tipo de señal, 522, 600, 2759, 2858
Velocidad de transferencia, 529, 607, 2765, 2864
Vigilancia, 527, 605, 2766, 2865
Encóder absoluto, 23, 474, 2696
Escuchar, 477
Evaluación de impulsos, 477, 2698
Incrementos por vuelta del encóder, 2761, 2861
Tiempo monoestable, 478, 2699
Tiempos de ejecución de telegramas, 478, 2699
Tiempos de respuesta, 478, 2698
Encóder absoluto SSI, 115, 164
Encoder connection
S7-1500 Motion Control, 1630, 1905
S7-1500T Motion Control, 1630, 1905
Encóder incremental, 474, 2695
Formas de señal, 475, 2697
Impulso, 476, 2697
Incremento, 475, 2697
Incrementos por vuelta del encóder, 2761, 2861
Tiempos de respuesta, 476, 2698
Encoder mounting type, 1572, 1573, 1637, 1914
Encóders simétricos, 218
ENSET_DN, 240, 320

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

ENSET_UP, 240, 320
Entorno del sistema, 1214, 1247, 1268, 1285, 1298,
1310, 1323
Entorno TIA, 3002
Entrada
Datos máquina, 2741
Distancia de cambio de velocidad, 2745, 2844
Distancia de desconexión, 2746, 2845
Modo de control 1, 2742, 2841
Modo de control 2, 2743, 2841
Modo de control 3, 2744, 2842
Modo de control 4, 2744, 2843
Tiempo de vigilancia, 2749, 2848
Velocidad de parada, 2750, 2849
Zona de destino, 2748, 2847
Zona de parada, 2750, 2849
Entrada de habilitación, 2719, 2736, 2811, 2834
Datos en el DB de canal, 2737, 2835
Datos en el DB de parámetros, 2835
evaluar, 2736, 2834
no evaluar, 2736, 2835
Entrada digital
Configuración, 1236
Funciones, 96, 118, 154, 166
Modo de operación, 1236
Entradas digitales
Filtro de entrada, 238, 318
Error
externo, 1058, 1109, 1142
interno, 1058, 1109, 1142
Error con parada brusca
Easy Motion Control, 3079
Error con parada suave
Easy Motion Control, 3076
Error de datos, 277, 337
Error de operador, 338
Error de parametrización
Easy Motion Control, 3075, 3081
Error de señal de vida, 1370
Error de telegrama, 528, 606, 2766, 2865
Error ID, 1484, 1537, 2300
Errores de operador, 278
Errores de señales de vida, 3011
Errores de señales de vida tolerables, 3011
Errores externos, 1058, 1109, 1142
Errores internos, 1058, 1109, 1142
ErrorID
Basics, 1480, 1484
List of ErrorIDs, 1537, 2300
Errors in Motion Control instructions, 1480, 1484,
1537, 2300

3111

Índice alfabético

Escribir
Datos de leva, 481
Datos máquina, 479
Escritura
Datos máquina, 2705, 2797
tablas de incrementos, 2707
Espacio de direcciones, 1250, 1272, 1288, 1302,
1313, 1326
Estructura de telegrama, 3013
ET 200, 1215, 1221
TM Timer DIDQ, 1215
Evaluación
Alarmas de diagnóstico, 2778, 2878
Evaluación cuádruple, 221
Evaluación de errores
Programa de usuario, 549
Evaluación de fallos
Programa de usuario, 629, 2777, 2877
Evaluación de señal, 91, 149
Evaluación doble, 221
Evaluación simple, 221
Eventos de diagnóstico, 549, 629, 2779, 2879
External encoder
Adding, 1420
Basics, 1550
Configuration, 1662
Delay time, 1990
Deleting, 1422
Diagnostics, 1698, 1700, 1701
Functions, 1545
Moving, 1421
Tags, 1759

F
Fallo del transductor de medida, 1063, 1113, 1148
FB multiinstancia
Easy Motion Control, 3066
FCS, 2066
Filtro de entrada, 238, 318
Fin
Proceso de posicionamiento, 2708, 2801
Final de carrera por software, 512, 590, 2752, 2851
Final de una operación de posicionamiento
Datos en el DB de parámetros, 2715, 2807
Señales de respuesta en el DB de canal, 2715,
2807
Final del eje rotativo, 2753, 2852
Finales de carrera por hardware y por software
Función, 2329
Fixed stop, 1606
Flange coordinate system (FCS), 2066

3112

Flange zones, 2185
FM 350-1, 222
FM 350-2, 279
Ajuste del canal, 282
FM 351, 2700
FM 352, 483
FM 355, 1031
FM 355-2, 1065
FM 450-1, 307
FM 451, 2791
FM 452, 561
FM 455, 1115
FNP, 2058
Following error monitoring, 1610, 1611, 1612, 1658,
1934
Frame definition, 2070
Frecuencia de filtrado, 91, 149
Frecuencia máx., 3006
Frecuencia normal, 3006
Función
Ajustar valor real, 564
Ajustar valor real al vuelo, 487, 564
Cancelar preselección del valor real, 487, 564
Función de paro de puerta, 214
Función de puerta
de cancelación, 216
de interrupción, 216
Función de puerta de cancelación, 216
Función de puerta de interrupción, 216
Funcionamiento
Ajustar valor real, 487
Decalaje de señal cero, 489, 567
Definir punto de referencia, 492, 569
Modificar flancos de leva, 493, 571
Funciones de contaje, 21, 71, 72, 76
Funciones de medición, 52
Funciones de SIMATIC, 1216

G
Gear ratio, 1878, 1879
Gearing, 1878, 1879
Tags, 1888
Guardar
Bloque de datos de eje, 3063
Gx_STW, 3015, 3016
Gx_XIST2, 3016

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

H
Habilitación
Alarma de diagnóstico, 62
Alarma de proceso, 62, 81
Habilitar
Alarma de diagnóstico, 1110
Habilitar alarmas de diagnóstico, 1367
Hardware limit switches, 1574, 1643, 1920
High_Speed_Counter, 84
configurar, 87
Diagnóstico, 109
Parámetros básicos, 89
programar, 107
Puesta en servicio, 108
Histéresis, 23, 24, 58, 60, 104, 123, 161, 171, 257,
289, 519, 597
Leva de recorrido, 519, 597
Leva de tiempo, 520, 598
Home position, 1591
Homing, 1606
Homing mark, 1590

I
IM 174
Configurar, 3002
Impulsos erróneos (encóder incremental), 528, 606,
2766, 2865
Incremental actual value, 1558, 1559
Incrementos, 2767, 2866
Indicadores de error, 1058, 1108, 1141
Inicializar contador, 238
Con la entrada digital I2, 239
Con la señal de paso por cero, 241
Mediante una señal externa, 239
Inicio de una petición de desplazamiento
Easy Motion Control, 3059
Insertar fila de separación, 2427
Insertar fila Empty, 2427
Instrucciones de TIO, 1216
Enumerar instrucciones de TIO, 1222
TM Timer DIDQ, 1216
Interconnection overview, 1996
Configuration, 1997
Interfaz de control, 175
1Count24V para la lectura del recorrido, 391
1Count24V para modos de contaje, 360
1Count24V para modos de medición, 379
1Count5V para la lectura del recorrido, 454

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1Count5V para modos de contaje, 424
1Count5V para modos de medición, 440
1SSI en el modo estándar, 2681, 2682
1STEP 5V, 2994
2PULSE (corto), 1201
2PULSE (largo), 1202
FM 350-1 para modos de contaje, 260
FM 350-1 para modos de medición, 267
FM 351, 2771
FM 352, 543
FM 451, 2870
FM 452, 621
Interfaz de impulsos
Principio, 2309
Interfaz de notificación
1Count5V para la lectura del recorrido, 455
1Count5V para modos de contaje, 426
1Count5V para modos de medición, 442
Interfaz de realimentación
1Count24V para el modo Fast, 400
1Count24V para la lectura del recorrido, 393
1Count24V para modos de contaje, 362
1Count24V para modos de medición, 381
1Count5V para el modo Fast, 462
1SSI en el modo Fast, 2690
1STEP 5V, 2998
2PULSE, 1204
FM 350-1 para modos de contaje, 264
FM 350-1 para modos de medición, 269
FM 351, 2770
FM 352, 542
FM 451, 2870
FM 452, 621
Interfaz de respuesta, 177
Interpolator OB, 1390, 1393
Interpretación de la señal, 220
Interruptor de PARADA DE EMERGENCIA
Easy Motion Control, 3067
Interruptor libre de rebotes, 2829
Intervalo de medida, 53, 56
Introducir
Tipo de telegrama, 3012

J
Jerk limit, 1579, 1641, 1645, 1918, 1922
Jitter, 1219
Job sequence, 2059, 2211
JOG, 2715, 2807
Cancelar, 2717, 2809
Datos en el DB de canal, 2716, 2808
Desactivación, 2716, 2808

3113

Índice alfabético

Desarrollo, 2715, 2807
Easy Motion Control, 3026
Límite de la zona de trabajo, 2717, 2809
Requisitos, 2715, 2807
Vigilancias, 2717, 2809
Joint position space, 2156

K
KCS, 2065
Kinematics, 2058, 2072
Adding, 2190
Circular motion, 2170
Configuration, 2191
Conveyor tracking, 2177
Coordinate systems, 2064
Copying, 2210
Degrees of freedom, 2058
Deleting, 2210
Diagnostics, 2229, 2231, 2233, 2234, 2236
Dynamic adaptation, 2174
Dynamic defaults, 2173
Dynamic limits, 2174
Dynamic settings, 2175
Frames, 2064
Functions, 2059
Interconnection rules, 2061
Joint position space, 2156
Kinematics control panel, 2223
Linear motion, 2170
Mechanical couplings, 2160
Motion, 2170
Point-to-point motion, 2173
Simulation, 2062
Singular positions, 2159
Tags, 2259
Term definition, 2058
User transformation, 2161
Zone monitoring, 2180
Kinematics axes, 2058
Kinematics control panel, 2223, 2228
Kinematics coordinate system, 2065
Kinematics motion, 2170
Circular motion, 2216
continue, 2213
Dynamics, 2173
Interrupting, 2213
Linear motion, 2215
Motion transition, 2215
Motion transition dynamics, 2220
Remaining distance, 2213
sPTP motion, 2217

3114

Status, 2213
stop, 2214
Kinematics transformation, 2154, 2155
Kinematics type
Articulated arm 2D, 2107
Articulated arm 2D with orientation, 2110
Articulated arm 3D, 2113
Articulated arm 3D with orientation, 2118
Cylindrical robot 3D, 2137
Cylindrical robot 3D with orientation, 2141
Delta picker 2D, 2124
Delta picker 2D with orientation, 2127
Delta picker 3D, 2130
Delta picker 3D with orientation, 2133
Portal 2D, 2074
Portal 2D with orientation, 2076
Portal 3D, 2078
Portal 3D with orientation, 2081
Roller picker 2D, 2085
Roller picker 2D with orientation, 2087
Roller picker 3D (vertical), 2089
Roller picker 3D with orientation
(horizontal), 2095
Roller picker 3D with orientation (vertical), 2092
SCARA 2D with orientation, 2099
SCARA 3D with orientation, 2102
Tripod 3D, 2146
Tripod 3D with orientation, 2150
User-defined, 2153
Kinematics types, 2072
Kinematics zero point, 2058
Kinematics zones, 2182, 2184
KZP, 2058

L
Latch, (Capture)
LD_SLOT, 1335
Leading axis proxy
Basics, 1987
Configuration, 1995
Delay time, 1990
Diagnostics, 2000
Functions, 1863
Tags, 2052
Leading value
Routes, 1999
Leading value coupling, 1870
Leadscrew pitch, 1572, 1573, 1637, 1914
Lectura
Datos máquina, 2706, 2798

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Lectura de los valores del sensor
isócrono, 2672, 2684
libre, 2657, 2672, 2684
modo isócrono, 2657, 2684
Lectura de posición
con encóder absoluto SSI, 23
Valor de comparación, 120, 168
Lectura de recorrido
con encóder absoluto SSI, 23
con Motion Control, 62
LED de error agrupado
SM 338, 2668
LED de error de grupo, 1058, 1108
FM 350-1, 272
LED de error general
FM 351, 2774
FM 352, 546
LEDs de error, 1141
Leer
Datos de leva, 482
Datos máquina, 481
Tablas de incrementos, 2707, 2800
Leva
Ajuste dinámico, 538, 616
Alarma de proceso, 541, 619
Alcance, 533, 611
Cambio de sentido, 471
Comportamiento de conmutación, 540, 618
Datos de leva, 533, 611
Final de leva en levas de recorrido, 535, 613
Inicio de leva en levas de recorrido, 535, 613
Inicio de leva en levas de tiempo, 536, 614
Inicio de levas en levas de tiempo, 536, 614
Leva "válida", 534, 612
Número de pista, 534, 612
Sentido de actuación, 539, 617
Tiempo de anticipación, 537, 615
Tiempo de conexión, 536, 614
Tipo de leva, 535, 613
Leva de recorrido, 465, 466
Leva de tiempo, 465, 466
Activar, 486, 564
Comportamiento de conmutación, 486, 563
Influencia de las funciones, 486, 563
Leva electrónica, (Ejemplos de aplicación de Timebased IO)
Limit switches, 1574, 1577, 1643, 1920
Limitación de tirones
Función, 2330
Límite de la zona de trabajo
JOG, 2717, 2809
Límite superior de contaje, 227, 286, 359, 423

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Límites de contaje, 21, 24, 71, 72, 76, 94, 152, 187
Limits for dynamics, 1579, 1645, 1922
Linear axis, 1551
Linear motion, 2170
Load gear, 1572, 1573, 1637, 1914

M
Machine coordinate system, 2059
Master control, 1495, 1677
MC_TorqueAdditive, 1586
MC_TorqueRange, 1587
MC-Interpolator OB, 1390, 1393
MC-PostServo, 1217
MC-PreServo, 1217
MCS, 2059
MC-Servo OB, 1390, 1393
MC-Transformation-OB, 2163
Measuring input
Basics, 1787
Configuration, 1827
Diagnostics, 1837
Functions, 1787
Tags, 1843
Mechanical couplings, 2160
Medición
Frecuencia, 205
Período, 208
Velocidad, 206
Medición de frecuencia, 52, 205
Medición de intensidad, 1263, 1283
Medición de longitud, 2829, (Ejemplos de aplicación
de Time-based IO)
Datos en el DB de canal, 2830
Desarrollo, 2830
Distancia de flanco, 2831
Errónea, 2831
Requisitos, 2829
Medición de recorrido
Easy Motion Control, 3070
Medición de velocidad, 52, 206
Easy Motion Control, 3069
Medición del período, 52, 208
Medida al vuelo, 3015
Medir tiempos, 243
entre dos flancos, 243
Memoria imagen parcial de proceso
IPP1, 1221
PIP, 1223
MODE_SLOT, 1335
Modelo AEV
Entender AEV, 1219

3115

Índice alfabético

Modelo EVA
Entender EVA, 1218
Modificación
Datos máquina, 2705, 2797
Tablas de incrementos, 2707, 2799
Modificar flancos de leva, 493, 571
Datos utilizados en el DB de canal, 494, 572
Definición, 493, 571
Desarrollo, 494, 571
Deshacer, 495, 572
Efectos, 494, 572
Requisitos, 493, 571
Modo conforme 611U, 3012
Modo de control 1, 2742, 2841
Modo de control 2, 2743, 2841
Modo de control 3, 2744, 2842
Modo de control 4, 2744, 2843
Modo de funcionamiento, 138
Modo de operación, 1355, 1366, 1373
Búsqueda del punto de referencia, 2718, 2810
Contaje periódico, 197
Contaje sin fin, 195
Contaje único, 196
Dosificación, 210
Entrada digital, 1236
High_Speed_Counter, 100
JOG, 2715, 2807
Medición de frecuencia, 205
Medición de velocidad, 206
Medición del período, 208
Modo incremental, 2724, 2816
Salida digital, 1229, 1233, 1239
Modo de operación Modulación por ancho de impulso
PWM, 1255
Ciclo de trabajo, 1257
Duración del periodo, 1257
Duración mínima de impulso, 1265
Interfaz de control, 1273
Interfaz de respuesta, 1275
Modo isócrono, 1277
Retardo a la conexión, 1258
Modo de operación PWM con motor DC, 1318
Ciclo de trabajo, 1320
Duración del periodo, 1321
Interfaz de control, 1326
Interfaz de respuesta, 1328
Modo isócrono, 1330
Retardo a la conexión, 1322
Modo de operación Retardo a la conexión/
desconexión, 1293
Duración mínima de impulso, 1295
Interfaz de control, 1302

3116

Interfaz de respuesta, 1304
Redisparo del retardo a la conexión, 1296
Redisparo del retardo a la desconexión, 1296
Retardo a la conexión, 1297
Retardo a la desconexión, 1297
Modo de operación Salida de frecuencia, 1306
Frecuencia, 1308
Interfaz de control, 1314
Interfaz de respuesta, 1316
Retardo a la conexión, 1308
Modo de operación Salida de impulso (impulso
único), 1243
Duración del impulso, 1245
Interfaz de control, 1251
Interfaz de respuesta, 1253, 1291
Retardo a la conexión, 1246
Modo de operación Tren de impulsos, 1279
Ciclo de trabajo, 1281
Duración del periodo, 1282
Interfaz de control, 1289
Número de impulsos, 1280
Retardo a la conexión, 1282
Modo incremental, 2724, 2816
absoluta, 2816
absoluto, 2724
Cancelar, 2729, 2822
Datos en el DB de canal, 2728, 2729, 2820, 2823
Datos en el DB de parámetros, 2728, 2821
Desactivación, 2729, 2822
Número de incremento 1-100:, 2725, 2817
Número de incremento 252, 2818
Número de incremento 254, 2726, 2819
Número de incremento 255, 2726, 2819
relativo, 2724, 2816
Requisitos, 2725, 2817
Modo incremental con número de incremento 252
Desarrollo, 2818
Modo incremental con número de incremento 254
Desarrollo, 2726, 2819
Modo incremental con número de incremento 255
Desarrollo, 2726, 2819
Modo isócrono, 69, 74, 82
Modo de operación Modulación por ancho de
impulso PWM, 1277
Modo de operación PWM con motor DC, 1330
Modos, (PIP_Mode)
Seleccionar modelo de ejecución del
programa, 1217
Modos de operación
Modulación por ancho de impulso PWM, 1255
PWM con motor DC, 1318
Retardo a la conexión/desconexión, 1293

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Salida de frecuencia, 1306
Salida de impulso (impulso único), 1243
Tren de impulsos, 1279
Modulo, 1551, 1627, 1902
Módulo de entradas digitales
Aplicaciones posibles, 74
Características, 11, 14
Configuración hardware, 184
Módulo de entradas/salidas digitales
Características, 15
Módulo de salidas digitales
Características, 1241
Módulo tecnológico
Aplicaciones posibles, 16, 70, 83
Árbol del proyecto, 133
Características, 11, 14, 1241
Configuración de canal, 1227
configuración de hardware, 1226
Configuración hardware, 133, 1353, 1365, 1371
Interfaz de control, 175
Interfaz de respuesta, 177
Online y diagnóstico, 174, 189, 1240, 1364, 1371
Parametrizar, 135
Parámetros básicos, 136
PWM, 1228
Reacción a STOP de la CPU, 1228
Retardo a la entrada, 1231, 1234, 1237
Módulo TIO, 1215, 1221
Motion Control CPU S7-1200
Manual, 2333
Motion Control S7-1200
Conexión de accionamientos y encóders, 2314
PROFIdrive, 2314
Telegrama, 2314
Motion transition, 2215
Motor paso a paso, 2304

N
Número de incremento 1 a 100, 2768, 2867
Número de incremento 1-100, 2725, 2817
Número de incremento 252, 2818, 2868
Número de incremento 254, 2726, 2769, 2819, 2868
Número de incremento 255, 2726, 2769, 2819, 2869

O
OB 82
Alarma de diagnóstico, 1059, 1110, 1143
OB Interpolator, 2325, 2327
OB MC-Interpolator, 2325, 2327

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

OB MC-Servo, 2325, 2327
OB Servo, 2325, 2327
Object coordinate system, 2067
Objetivo, 2693
Objeto tecnológico
High_Speed_Counter, 84
SSI_Absolute_Encoder, 111
Tipos de datos, 2466
Objeto tecnológico Eje
Variable Config, 2615
Variable ErrorBits, 2625
Variable MotionStatus, 2620
Variable StatusBits, 2621
Objeto tecnológico Eje de posicionamiento
Actualización de las variables, 2552, 2654
Agregar objeto, 2354
Componentes de hardware y software, 2349
Comportamiento con la limitación de tirones
activada, 2382
Configuración de accionamiento listo, 2570
Configuración de la aceleración, 2378
Configuración de la deceleración, 2378
Configuración de la deceleración de parada de
emergencia, 2380
Configuración de la dinámica general, 2377
Configuración de la entrada del sensor del punto
de referencia, 2386, 2389, 2573, 2574
Configuración de la habilitación del
accionamiento, 2570
Configuración de la interfaz del hardware, 2358,
2568
Configuración de la inversión de sentido, 2370,
2571
Configuración de la limitación de tirones, 2379
Configuración de la referenciación pasiva, 2572
Configuración de la unidad de medida, 2357
Configuración de la unidad de usuario, 2570
Configuración de la unidad del límite de
velocidad, 2377
Configuración de la velocidad de
referenciado, 2387, 2575
Configuración de la velocidad máxima/velocidad
de arranque y parada, 2377
Configuración de las señales del
accionamiento, 2360, 2570
Configuración de los impulsos por vuelta del
motor, 2369, 2571
Configuración de PTO y HSC, 2359, 2568
Configuración del lado del sensor del punto de
referencia, 2387, 2389, 2573, 2575
Configuración del mecanismo, 2369, 2370, 2571
Configuración del nombre del eje, 2356, 2568

3117

Índice alfabético

Configuración del offset del punto de
referencia, 2387, 2575
Configuración del permiso de inversión del
sentido en el final de carrera por hardware, 2574
Configuración del recorrido por vuelta del
motor, 2369, 2571
Configuración del referenciado activo, 2385,
2573
Configuración del referenciado pasivo, 2388
Configuración del sensor del punto de
referencia, 2387, 2389, 2573, 2575
Configuración del sentido de aproximación/
referenciado, 2387, 2575
Configuración del tiempo de aceleración, 2378
Configuración del tiempo de deceleración, 2378
Configuración del tiempo de redondeo, 2379
Herramientas, 2352
Modificar los parámetros de configuración de la
dinámica en el programa de usuario, 2383
Modificar los parámetros de configuración del
referenciado en el programa de usuario, 2392
Parámetros avanzados, 2570
Parámetros básicos, 2356, 2568
Procedimiento de referenciado activo, 2389
Procedimiento de referenciado pasivo, 2391
Resumen de la configuración, 2353
Resumen de la puesta en servicio, 2353
Resumen del diagnóstico, 2353
Símbolos de la ventana de configuración, 2355
Variable ActualPosition, 2514
Variable ActualVelocity, 2514
Variable DynamicDefaults, 2530, 2638
Variable DynamicLimits, 2529, 2637
Variable ErrorBits, 2546, 2652
Variable FollowingError, 2536, 2642
Variable Homing, 2535, 2640
Variable Mechanics, 2528, 2636
Variable Módulo, 2529, 2636
Variable Position, 2514, 2627
Variable PositionControl, 2536, 2641
Variable PositionLimitsHW, 2532, 2639
Variable PositionLimitsSW, 2531, 2638
Variable PositionMonitoring, 2537, 2643
Variable Sensor, 2520, 2631
Variable Simulation, 2515
Variable StandstillSignal, 2538, 2643
Variable StatusBits, 2541, 2647
Variable StatusDrive, 2539, 2645
Variable StatusPositioning, 2539, 2644
Variable StatusSensor, 2540, 2646
Variable Units, 2527, 2635

3118

Variable Velocity, 2514
Variables Actor, 2515, 2628
Objeto tecnológico Eje y tabla de órdenes
Lista de los ErrorIDs y las ErrorInfos, 2488, 2578
Objeto tecnológico Tabla de órdenes
Agregar objeto, 2421
Comandos del menú contextual, 2427
Configuración de la activación de
advertencias, 2424
Configuración de la duración, 2426
Configuración de la tabla de órdenes, 2423
Configuración de la velocidad, 2425
Configuración de posición/recorrido de
desplazamiento, 2425
Configuración de Utilizar parámetros del eje
de, 2424
Configuración del código de paso, 2426
Configuración del paso siguiente, 2426
Configuración del tipo de orden, 2424
Herramientas, 2420
Parámetros avanzados, 2436
Símbolos de la ventana de configuración, 2422
Uso, 2419
Variable Command[1...32], 2553, 2655
Variable
Config.Command.Command[1...32], 2654
Objeto tecnológico Tabla de peticiones
Configuración general, 2423
Parámetros básicos, 2423
Objetos tecnológicos
CONT_C, 817
CONT_S, 821
PID_3Step, 731
PID_Compact, 692
PID_CP, 847
PID_ES, 896
PID_Temp, 769
TCONT_CP, 823
TCONT_S, 844
OCS, 2067
Optimización, 2443
Optimizar el regulador de posición, 2443
Optimize position controller, 1499, 1683, 1686
Orden de llamada, 1224
Orientation movement, 2170
Output cam
Basics, 1800
Configuration, 1830
Diagnostics, 1838
Functions, 1787
Tags, 1850

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

P
Palabra de control del sensor, 3015
Parametrización
CPU compactas, 20
Módulo tecnológico, 20, 135
Parámetros básicos
High_Speed_Counter, 89
Módulo tecnológico, 136
SSI_Absolute_Encoder, 114
Paso por cero, 232, 315
Passive homing, 1590, 1600, 1602, 1604, 1654,
1931
PathChoice, 2171
Pérdida
Sincronización, 2827
Pérdida de la sincronización, 492, 569
Período
Resolución, 233, 376, 437
Petición
Ajustar valor real, 2729, 2823
Ajustar valor real al vuelo, 2823
Cancelar preselección del valor real, 2731, 2824
Decalaje de señal cero, 2825
Definir punto de referencia, 2731, 2827
PID_Temp
Aplicaciones multizona, 810
Conexión en cascada, 803
PIP_Mode
Configurar PIP_Mode, 1224
Pista de leva de contaje, 469
Pista de leva de freno, 470
Pistas
Activar señal de pista, 468
Control de las salidas de pista, 531, 609
Desbloquear, 468
Habilitación externa, 468
Pista de leva de contaje, 531, 609
Pista de leva de freno, 531, 609
Pistas especiales, 531, 609
Resultado de pista, 467
Valor de contaje superior pista de leva de
contaje, 532, 610
Pistas de levas, 467
Pistas especiales, 469
Point-to-point motion, 2173
Portal
2D, 2074
2D with orientation, 2076
3D, 2078
3D with orientation, 2081

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Posicionamiento absoluto
Easy Motion Control, 3027
Posicionamiento relativo
Easy Motion Control, 3027
Position limits, 1574, 1577, 1578, 1643, 1920
Positioning axis
Adding, 1420
Basics, 1549
Configuration, 1627
Delay time, 1990
Deleting, 1422
Diagnostics, 1505, 1509, 1693, 1697, 1698
Functions, 1545
Moving, 1421
Tags, 1718
Positioning monitoring, 1610, 1612, 1657, 1934
Precisión, 1213
Calcular TIO_Time, 1219
Previsibilidad, 1213
Proceso de posicionamiento
Fin, 2708, 2801
Process image partition "OB Servo PIP", 1393
PROFIdrive, 1554, 1560, 2314
PROFINET, 1215, 1220, 1221
Utilizar PROFINET IRT, 1216
Programa de usuario, (Synchronous Cycle)
Evaluación de fallos, 549, 629, 2777, 2877
Programación, 1223
Puerta
hardware, 213
interna, 213
software, 213
Puerta hardware, 22, 27, 76, 78, 96, 154, 213
Puerta HW
Abrir y cerrar de forma controlada por flanco, 215
Abrir y cerrar de forma controlada por nivel, 215
Puerta interna, 213
Puerta software, 26, 76, 78, 213
Puerta SW, 22
Abrir y cerrar, 214
Puesta en servicio
High_Speed_Counter, 108
SSI_Absolute_Encoder, 129
PULSE REFEED, 3007
Punto de cambio de velocidad, 2693
Punto de desconexión, 2693
Puntos de conmutación, 2693
PWM
Módulo tecnológico, 1228

3119

Índice alfabético

R
Rampa de conexión dither, 1260
Rampa de desconexión dither, 1260
Ramp-down time, 1641, 1645, 1918, 1922
Ramp-up time, 1641, 1645, 1918, 1922
Rango de contaje, 232, 314
Rango de histéresis, 470
Rango de medición, 53, 56
Reacción a STOP de la CPU, 136, 1357, 1374
Módulo tecnológico, 1228
Reacción a STOP de la CPU/del maestro
1STEP 5V, 2987
Reacciones a errores
Easy Motion Control, 3028
Reajuste del encóder absoluto, 516, 594, 2755,
2854
Calcular, 516, 594, 2756, 2855
Ejemplo, 517, 595, 2757, 2856
Reajuste mecánico, 517, 595, 2757, 2856
Rebase del margen de medición, 1063, 1113, 1148
Rebase por defecto del rango de medición, 1063,
1113, 1148
Recorrido de anticipación, 472
Redisparar el punto de referencia, 514, 592
Reducción de ciclo, 1217
Reduction ratio, 1390
Reductor
Easy Motion Control, 3027
Reference cam, 1591
Referenciado
Modos de referenciado, 2331
Registro de diagnóstico, 1059, 1060, 1110, 1144
Registro de diagnóstico DS0
Asignación, 1061, 1111, 1145
Registro de diagnóstico DS1
Asignación, 1062, 1112, 1146
Registro de diagnóstico DS1 del FM 355-2
Asignación, 1112
Regulación, 2395
Regulación de intensidad, 1263
Regulación de posición, 2395
Regulador PID, 1263
Reguladores de software
Configuración, 662
Reinicialización de objetos tecnológicos, 2465
Reinicializar objetos tecnológicos, 2465
Reinitialization of technology objects, 1476
Reproducibilidad, 1211
Requisitos
Ajustar valor real, 2730, 2823

3120

Ajustar valor real al vuelo, 2823
Aproximación en bucle, 2733, 2832
Búsqueda del punto de referencia, 2719, 2811
Captura de bordes, 2829
Datos de encóder, 2737, 2836
Decalaje de señal cero, 2825
Definir punto de referencia, 2732, 2827
JOG, 2715, 2807
Medición de longitud, 2829
Modo incremental, 2725, 2817
Requisitos de hardware, 1214
Resolución, 525, 603, 2762, 2862
Valores admitidos, 525, 603
Valores posibles, 2763, 2862
Resolución del período, 233, 376, 437
Restart of technology objects, 1476
Retardo a la entrada
Módulo tecnológico, 1231, 1234, 1237
Reversing cam, 1591, 1599
Reversing output cam, 1651, 1928
Roller picker
2D, 2085
2D with orientation, 2087
3D (vertical), 2089
3D with orientation (horizontal), 2095
3D with orientation (vertical), 2092
Rotary axis, 1551
Rotation conventions, 2070
Rotura de hilo, 137, 527, 605, 1063, 1113, 1148,
2766, 2865
Routes
Show, 1999

S
S7-1500 Motion Control, 1545, 1863
Actual value, 1558, 1559
Axis type, 1551
Closed-loop control, 1613, 1614, 1616, 1659,
1661, 1675, 1935, 1937
Commissioning, 1478, 1495, 1499, 1677, 1682,
1683, 1686
Configuration, 1422, 1423, 1627, 1902, 1938
Configuration limits, 1388
Diagnostics, 1480, 1481, 1484
Downloading to CPU, 1477
Drive and encoder connection, 1386, 1412, 1413,
1415, 1418, 1554, 1555, 1560, 1571, 1628, 1630,
1903, 1905
Dynamic defaults, 1581
Dynamic settings, 1579, 1587, 1641, 1645, 1918,
1922

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Guidelines for operation, 1386
Homing, 1589, 1590, 1591, 1592, 1599, 1600,
1605, 1607, 1608, 1648, 1649, 1654, 1926, 1927,
1931
How it works, 1383
Introduction, 1383
Mechanics, 1572, 1573, 1637, 1914
Modulo, 1551, 1627, 1902
Motion Control instruction, 1385, 1457, 1460,
1545, 1787, 1863
Position limits, 1574, 1577, 1578, 1643, 1920
Position monitoring, 1610, 1611, 1612, 1657,
1658, 1659, 1934, 1935
Process response, 1390, 1393, 1397
PROFIdrive, 1554, 1560
Programming, 1453, 1457, 1463, 1476
Synchronous operation, 1870, 1878, 1879, 1889
Technology alarms, 1480, 1481, 1510, 2291
Technology data block, 1385, 1453, 1455, 1456
Technology object, 1384, 1422, 1476, 1545, 1548,
1549, 1550, 1627, 1787, 1800, 1814, 1863, 1866,
1867, 1902, 1938, 1987
Telegram, 1555, 1560, 1571
Unit of measure, 1389, 2062
Versions, 1399, 1410, 2188
S7-1500 Motion Control actual value, 1558, 1559
S7-1500 Motion Control commissioning, 1478, 1495,
1499, 1677, 1682, 1683, 1686
S7-1500 Motion Control drive connection, 1386,
1412, 1413, 1415, 1418, 1554, 1555, 1560, 1571,
1628, 1903
S7-1500 Motion Control encoder connection, 1386,
1412, 1413, 1415, 1418, 1554, 1555, 1560, 1571
S7-1500 Motion Control homing
Absolute encoder adjustment, 1590
Absolute value adjustment, 1607
Active, 1590, 1592, 1649, 1927
Basics, 1589
Configuration, 1648, 1926
Direct, 1590
Home position, 1591
Homing mark, 1590
Homing mode, 1590, 1591
On the fly, 1590, 1600, 1654, 1931
Passive, 1590, 1600, 1654, 1931
Reference cam, 1591
Reversing cam, 1591, 1599
Reversing output cam, 1651, 1928
Zero mark, 1590
S7-1500 Motion Control instruction, 1385
Ending a Motion Control job, 1475

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Errors in Motion Control instructions, 1480, 1484,
1537
Inserting, 1460
Overview, 1545, 1787, 1863
Parameters, 1457
Starting Motion Control job, 1463
Tracking Motion Control job, 1465
S7-1500 Motion Control mechanics, 1572, 1573,
1637, 1914
S7-1500 Motion Control operating mode, 1397
S7-1500 Motion Control optimization, 1499, 1683,
1686
S7-1500 Motion Control telegram, 1555, 1560, 1571
S7‑1500 Motion Control
Configuration, 1420, 1421
Technology object, 1420, 1421
S7-1500T Motion Control
Commissioning, 2228
Drive and encoder connection, 1630, 1905
Motion Control instruction, 1545, 1787, 1863
Technology object, 1545, 1787, 1863
S7-1500T Motion Control instruction
Errors in Motion Control instructions, 2300
Salida de sentido y sentido de la marcha
Relación, 2310
Salida digital
Funciones, 101, 120, 158, 168
Modo de operación, 1229, 1233, 1239
Salida High Speed, 1230
Valor de comparación, 41, 101, 120, 158, 168
Salida High Speed, 1230
Salidas digitales
Activar y desactivar, 245
comportamiento en los modos de contaje, 244
comportamiento en los modos de medición, 255
Comportamiento en los modos de montaje, 325
habilitar, 245, 255, 326
SCARA
2D with orientation, 2099
3D with orientation, 2102
Seguimiento
Easy Motion Control, 3027
Selección de la función de puerta, 195
Seleccionar el control de puerta, 196, 197, 205, 207,
208, 210
Sensor, 1386
Sensor del punto de referencia, 2719, 2811
Sensor tipo NPN, 91, 149
Sensor tipo PNP, 91, 149
Sensores NAMUR, 283
Sentido principal de contaje, 198, 233, 287, 354,
415

3121

Índice alfabético

Señal de sentido de giro, 3004
Señal de velocidad cero, 2395
Señal N, 91, 149
Señales de realimentación del diagnóstico, 2738,
2837
Datos en el DB de canal, 2739, 2837
Desarrollo, 2739, 2837
Señales de realimentación del
posicionamiento, 2836
Datos en el DB de canal, 2836
Señales de realimentación para el posicionamiento
Desarrollo, 2836
Señales de respuesta del posicionamiento, 2738
Datos en el DB de canal, 2738
Desarrollo, 2738
Señales de respuesta en el DB de canal
Final de una operación de posicionamiento, 2715,
2807
Señales del encóder de 24 V, 219
Filtro de entrada, 237, 238, 318
Señales del encóder de 5 V, 218
Vigilancia, 219
Servo OB, 1390, 1393
Servomotor, 2304
SET, 238
Signal zones, 2182, 2183
SIMATIC Drive Controller, 83
Configuración hardware, 189
Online y diagnóstico, 191
Símbolo
Para comparación de valores, 669
Simulación
Easy Motion Control, 3028
SINAMICS V90 PN, 1412
Sincronización, 23, 34, 96, 154
Búsqueda del punto de referencia, 2718, 2810
Con señal N, 96, 154
Definir punto de referencia, 2731, 2827
mediante entrada digital, 37
Pérdida, 492, 569, 2827
Sincronización de relojes, 1216
Sincronizar
Easy Motion Control, 3026
Singular positions, 2159
Sistema de medida
Seleccionar, 510, 588, 2739, 2838
SLOT, 1335
SM 338
alarma de diagnóstico, 2662
Avisos de diagnóstico, 2668
direccionarlo, 2665

3122

modo isócrono, 2661
velocidad de transferencia, 2663
Software de configuración, 1215, 1246, 1267, 1284,
1298, 1309, 1322
Software limit switches, 1574, 1577, 1643, 1920
Speed axis
Adding, 1420
Basics, 1548
Configuration, 1617
Deleting, 1422
Diagnostics, 1502, 1504, 1689, 1692
Functions, 1545
Moving, 1421
Tags, 1702
sPTP motion, 2173
SSI_Absolute_Encoder, 111
configurar, 113
Diagnóstico, 130
Parámetros básicos, 114
programar, 129
Puesta en servicio, 129
Startdrive, 1412
STEP 7, 1215
STOP de la CPU, 136, 1357, 1374
SW_GATE, 26, 78
SYNC_PI, 1218
SYNC_PO, 1218
Synchronous axis
Adding, 1420
Basics, 1866
Configuration, 1902
Delay time, 1990
Deleting, 1422
Diagnostics, 1505, 1509, 1697, 1698, 1979, 1984,
1985
Functions, 1863
Moving, 1421
Tags, 2003
Synchronous Cycle, 1223
Entender las instrucciones de TIO, 1217
Synchronous operation, 1870, 1878, 1879, 1889
Synchronous operation is being simulated, 1876
Tags, 1876
Synchronous point-to-point motion, 2173

T
tablas de incrementos, 2706
Cambiar,
Datos en el DB de canal, 2708
Escribir,
Leer,

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Tags
Additive leading value, 1878
Cam technology object, 2045
Cam track technology object, 1856
Camming, 1901
Closed-loop control, 1616
Cross-PLC synchronous operation, 1991
Drive and encoder connection, 1571
Gearing, 1888
Homing, 1608
Kinematics technology object, 2259
Leading axis proxy technology object, 2052
Mechanics, 1573
Motion control and limits for dynamics, 1587
Output cam technology object, 1850
Position monitoring functions, 1612
Positioning axis technology object, 1718
Speed axis technology object, 1702
Synchronous axis technology object, 2003
Synchronous operation is being simulated, 1876
Technology object external encoder, 1759
Technology object measuring input, 1843
Traversing range limitation, 1578
TAPP, (Ciclo de aplicación)
Tareas de control, 3002
TCP, 2058, 2066
T-CPU, 1545, 1863
TCS, 2066
Technology alarms
Basics, 1480, 1481
List of the technology alarms, 1510, 2291
Technology data block
Analyzing, 1453
Basics, 1385, 1453
Change restart-relevant data, 1456
Evaluating StatusWord, ErrorWord and
WarningWord, 1455
Tags of the cam technology object, 2045
Tags of the cam track technology object, 1856
Tags of the kinematics technology object, 2259
Tags of the leading axis proxy technology
object, 2052
Tags of the output cam technology object, 1850
Tags of the positioning axis technology
object, 1718
Tags of the speed axis technology object, 1702
Tags of the synchronous axis technology
object, 2003
Tags of the technology object external
encoder, 1759
Tags of the technology object measuring
input, 1843

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Technology object
Cam, 1863, 1867, 1891, 1938, 1975
Cam track, 1787, 1814, 1833, 1840, 1842
Data types, 1462
External encoder, 1420, 1421, 1422, 1545, 1550,
1662, 1698, 1700, 1701
Kinematics, 2059, 2060, 2190
Leading axis proxy, 1863, 1987, 1995, 2000
Measuring input, 1787, 1827, 1837
Output cam, 1787, 1800, 1830, 1838
Positioning axis, 1420, 1421, 1422, 1505, 1509,
1545, 1549, 1627, 1693, 1697, 1698
Speed axis, 1420, 1421, 1422, 1502, 1504, 1545,
1548, 1617, 1689, 1692
Synchronous axis, 1420, 1421, 1422, 1505, 1509,
1697, 1698, 1863, 1866, 1902, 1979, 1984, 1985
Technology objects, 1384
Telegrama S7-1200 Motion Control, 2314
Test de cableado
Easy Motion Control, 3068
Texto de diagnóstico, 1060, 1111, 1144
Tiempo de actualización, 52, 200
Tiempo de anticipación, 471
Tiempo de ciclo, 1212
Tiempo de ciclo de la CPU, 1211
Tiempo de ciclo de la leva, 533, 611
Tiempo de integración, 200
Tiempo de medición, 200
Tiempo de reacción, 1213
Tiempo de reacción mínimo, 1213
Tiempos de reacción definidos, (Ejemplos de
aplicación de Time-based IO)
Tiempo de retardo, 1218
Tiempo de retardo de apagado, 3011
Tiempo de vigilancia, 2709, 2710, 2749, 2801, 2802,
2848
Time-based IO
Configurar Time-based IO, 1221
Conocer las funciones de SIMATIC, 1216
Utilizar ajuste predeterminado, 1222
TIO_SYNC
Módulos TIO sincronizados, 1217
TIO_Time, 1212, 1222
Entender TIO_Time, 1216
Tipo de accionamiento, 3003, 3004, 3011
Tipo de accionamiento Servo, 3004
Tipo de accionamiento Stepper, 3004
Tipo de búsqueda del punto de referencia, 2754,
2853
Tipo de eje, 2751, 2850
Tipo de encóder, 3003
TTL, 3008

3123

Índice alfabético

Tipo de encóder no disponible, 3003
Tipo de sensor, 91, 149, 3008
SSI, 3009
Tipo de sensor no existe, 3008
Tipo de señal, 90, 148, 164, 1366
Tipo de telegrama
Introducir, 3012
Tipos
Búsqueda del punto de referencia, 2722, 2814
Tipos de eje, 512, 590
TO_PositioningAxis, 2354
Tolerance time, 1988
Tool center point, 2058, 2066
Tool coordinate system, 2066
Tool zones, 2184
Torque limits, 1587
Torque setpoint, 1586
Transfer area
Setting up, 1992
Transformation area, 2155
Transformation-OB, 2163
Traversing range, 2155
Traversing range limitation, 1574, 1577, 1578, 1643,
1920
Tripod
3D, 2146
3D with orientation, 2150

U
Unit of measure, 1389, 2062
User transformation, 2161
Example, 2165
User-defined kinematics systems, 2153

V
Valor de arranque, 95
Valor de carga, 212, 238, 319
con anticipación, 212
directo, 212
Valor de comparación, 41, 101, 120, 158, 168, 244,
325
Contaje, 101, 158
Lectura de posición, 120, 168
Valor de referencia
Módulo de entradas digitales, 79
Valor inicial, 22, 76, 153, 188
Valor límite inferior, 254, 378, 439
Valor límite superior, 254, 378, 439
Valor real adicional del sensor, 3016

3124

Valor real del sensor
adicional, 3016
Valor sustitutivo, 246, 295
Valores
Comparar, 669
Valores actuales
Easy Motion Control, 3064
Variables del objeto tecnológico Eje de
posicionamiento, 2513, 2615
Velocidad de inicio en la búsqueda del punto de
referencia, 2759, 2858
Velocidad de parada, 2750, 2849
Vigilancia, 2709, 2801
Velocidad de simulación, 521, 599
Velocidad de transferencia, 2673, 2685
Velocity precontrol, 1613
Velocity profile, 1579
Vigilancia
Velocidad de parada, 2709, 2801
Zona de destino, 2709, 2801
Vigilancia de errores de seguimiento, 2394
Vigilancia de las señales del encóder de 5 V, 219
Vigilancia de límites, 203
Vigilancia de posicionamiento, 2393
Vigilancias, 2709, 2801
JOG, 2717, 2809

W
WCS, 2065
Work zones, 2182, 2183
Workspace zones, 2182, 2183
World coordinate system, 2065

Z
Zero mark, 1590
Zona de destino, 2693, 2748, 2847
Vigilancia, 2709, 2801
Zona de parada, 2693, 2750, 2849
Zona de sobrecarga, 3007
Zona de trabajo, 2693
Zonas de conexión, 2693
Zone geometry, 2185
Zone monitoring, 2180
Zones
Flange zones, 2185
Kinematics zones, 2184
Signal zones, 2183
Subentry, 2180, 2183
Tool zones, 2184

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Índice alfabético

Work zones, 2183
Workspace zones, 2183
Zone geometry, 2185

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

3125

Índice alfabético

3126

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Uso de las funciones online y de
diagnóstico
Manual de programación y manejo

11/2019

Mostrar nodos accesibles

1

Modificación online de la
configuración del dispositivo

2

Conectar dispositivos online

3

Creación de una copia de
seguridad de una CPU S7

4

Configurar interfaces PG/PC

5

Uso de la función Trace y de
analizador lógico

6

Establecimiento de
conexiones remotas con
TeleService

7

Simulación de dispositivos
con S7-PLCSIM

8

Notas jurídicas
Filosofía en la señalización de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal así como para la prevención de
daños materiales. Las informaciones para su seguridad personal están resaltadas con un triángulo de advertencia;
las informaciones para evitar únicamente daños materiales no llevan dicho triángulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producirá la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse daños materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad más estricta en cada caso. Si en una
consigna de seguridad con triángulo de advertencia de alarma de posibles daños personales, la misma consigna
puede contener también una advertencia sobre posibles daños materiales.

Personal cualificado

El producto/sistema tratado en esta documentación sólo deberá ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentación correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formación y experiencia,
el personal cualificado está en condiciones de reconocer riesgos resultantes del manejo o manipulación de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens sólo deberán usarse para los casos de aplicación previstos en el catálogo y la
documentación técnica asociada. De usarse productos y componentes de terceros, éstos deberán haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalación, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. También deberán seguirse las indicaciones
y advertencias que figuran en la documentación asociada.

Marcas registradas

Todos los nombres marcados con ® son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilización por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exención de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicación con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicación se revisa periódicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edición.

Siemens AG
Digital Industries
Postfach 48 48
90026 NÜRNBERG
ALEMANIA

Ⓟ 11/2019 Sujeto a cambios sin previo aviso

Copyright © Siemens AG 2019.
Reservados todos los derechos

Índice
1

Mostrar nodos accesibles.............................................................................................................................9

2

Modificación online de la configuración del dispositivo ..............................................................................11

3

Conectar dispositivos online.......................................................................................................................13

4

5

3.1

Información general sobre el modo online .............................................................................13

3.2

Vista en el modo online..........................................................................................................15

3.3

Preajustar datos de conexión online ......................................................................................16

3.4

Establecer o modificar conexión online..................................................................................17

3.5

Deshacer la conexión online ..................................................................................................20

3.6

Conexión online con varios dispositivos ................................................................................20

3.7

Deshacer conexiones online de varios dispositivos...............................................................21

Creación de una copia de seguridad de una CPU S7................................................................................23
4.1

Posibles copias de seguridad para las CPUs S7...................................................................23

4.2
4.2.1
4.2.2
4.2.3

Creación de una copia de seguridad de CPU S7-300 y S7-400............................................25
Crear una copia de seguridad de un dispositivo ....................................................................25
Restablecer el software y la configuración de hardware de un dispositivo............................26
Copia de seguridad de la configuración de un dispositivo .....................................................27

4.3
4.3.1
4.3.2
4.3.3

Creación de una copia de seguridad de CPU S7-1200 y S7-1500........................................28
Crear una copia de seguridad de un dispositivo ....................................................................28
Copia de seguridad de la configuración de un dispositivo .....................................................30
Restablecimiento de la configuración de un dispositivo.........................................................30

Configurar interfaces PG/PC ......................................................................................................................33
5.1

Accesos online .......................................................................................................................33

5.2

Principios básicos para parametrizar la interfaz PG/PC ........................................................35

5.3

Mostrar u ocultar interfaces....................................................................................................35

5.4

Mostrar y modificar las propiedades de una interfaz .............................................................36

5.5

Agregar interfaces..................................................................................................................36

5.6
5.6.1
5.6.2
5.6.3
5.6.4
5.6.5
5.6.6
5.6.7

Parametrización de la interfaz Ethernet .................................................................................37
Parametrizar la interfaz Industrial Ethernet............................................................................37
Visualizar los parámetros del sistema operativo....................................................................38
Conectar la interfaz PG/PC con una subred ..........................................................................38
Parametrizar la interfaz Ethernet ...........................................................................................39
Uso de direcciones IP temporales .........................................................................................40
Gestionar direcciones IP temporales .....................................................................................40
Restablecimiento de la configuración TCP/IP........................................................................41

5.7
5.7.1

Parametrizar la interfaz MPI y PROFIBUS ............................................................................41
Parametrizar la interfaz MPI y PROFIBUS ............................................................................41

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

3

Índice

5.7.2
5.7.3
5.7.4
5.7.5
5.7.6
6

Parametrizar la interfaz MPI o PROFIBUS automáticamente................................................42
Parametrizar la interfaz MPI...................................................................................................43
Parametrizar la interfaz PROFIBUS.......................................................................................45
Resumen de los parámetros del bus para PROFIBUS..........................................................47
Restablecer la configuración MPI o PROFIBUS ....................................................................49

Uso de la función Trace y de analizador lógico..........................................................................................51
Prólogo...................................................................................................................................51
Información de seguridad.......................................................................................................52

4

6.1
6.1.1
6.1.2
6.1.3
6.1.4
6.1.5
6.1.5.1
6.1.5.2

Descripción ............................................................................................................................53
Hardware admitido .................................................................................................................53
Registro de medidas con la función Trace.............................................................................53
Configuración de Trace, registro, Trace en dispositivo y medición........................................55
Almacenamiento de datos......................................................................................................56
Trace del proyecto .................................................................................................................57
General ..................................................................................................................................57
Sincronización horaria............................................................................................................58

6.2
6.2.1
6.2.1.1
6.2.1.2
6.2.1.3
6.2.1.4
6.2.2
6.2.2.1
6.2.2.2
6.2.2.3
6.2.2.4
6.2.3
6.2.3.1
6.2.4
6.2.4.1
6.2.4.2

Interfaz de software de Trace ................................................................................................59
Árbol del proyecto ..................................................................................................................61
Interfaz: Árbol del proyecto, carpeta "Traces"........................................................................61
Interfaz - Árbol del proyecto, carpeta "Mediciones" ...............................................................63
Interfaz - Árbol del proyecto, carpeta "Mediciones en el dispositivo (tarjeta de memoria)"......64
Interfaz - Árbol del proyecto, carpeta "Mediciones superpuestas".........................................65
Área de trabajo.......................................................................................................................67
Interfaz Barra de herramientas de Trace ...............................................................................67
Interfaz - Ficha Configuración ................................................................................................68
Interfaz Ficha Diagrama.........................................................................................................68
Interfaz - Ficha Selección de señal (Mediciones superpuestas)............................................83
Ventana de inspección...........................................................................................................84
Interfaz: ventana de inspección .............................................................................................84
Task Card Trace ....................................................................................................................85
Interfaz - Paleta Cursores de medición..................................................................................85
Interfaz - Paleta Instantáneas ................................................................................................87

6.3
6.3.1
6.3.2
6.3.2.1
6.3.3
6.3.3.1
6.3.3.2
6.3.3.3
6.3.3.4
6.3.4
6.3.4.1
6.3.5

Interfaz de software de Trace del proyecto............................................................................88
Estructura de la interfaz .........................................................................................................88
Árbol del proyecto ..................................................................................................................90
Interfaz - Árbol del proyecto, carpeta "Funciones para varios dispositivos" - "Traces del
proyecto" ................................................................................................................................90
Área de trabajo.......................................................................................................................91
Interfaz - Barra de herramientas del Trace del proyecto........................................................91
Interfaz - Vista general de estados de los dispositivos participantes.....................................92
Interfaz - Ficha Configuración ................................................................................................93
Interfaz - Ficha Diagrama.......................................................................................................94
Ventana de inspección...........................................................................................................94
Interfaz: ventana de inspección .............................................................................................94
Task Card Trace ....................................................................................................................95

6.4
6.4.1
6.4.2
6.4.3

Manejo ...................................................................................................................................95
Guía de inicio rápido para Trace............................................................................................95
Guía de inicio rápido para Trace del proyecto .....................................................................100
Uso de la función Trace: vista general.................................................................................103

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Índice

7

6.4.4
6.4.4.1
6.4.4.2
6.4.4.3
6.4.4.4
6.4.4.5
6.4.5
6.4.5.1
6.4.5.2
6.4.5.3
6.4.5.4
6.4.5.5
6.4.5.6
6.4.5.7
6.4.5.8
6.4.6
6.4.6.1
6.4.7
6.4.7.1
6.4.7.2
6.4.7.3
6.4.7.4
6.4.7.5
6.4.7.6
6.4.7.7

Árbol del proyecto ................................................................................................................104
Creación de Trace................................................................................................................104
Ver configuración .................................................................................................................104
Ver diagrama........................................................................................................................105
Crear medición superpuesta ................................................................................................105
Estructuración de los objetos en grupos ..............................................................................106
Área de trabajo General.......................................................................................................107
Transmisión de la configuración de Trace al dispositivo......................................................107
Activación/desactivación de Trace en el dispositivo ............................................................107
Visualización de registro ......................................................................................................108
Análisis del registro en curso ...............................................................................................108
Almacenamiento de mediciones en el proyecto...................................................................109
Exportación e importación de mediciones ...........................................................................110
Transmisión de la configuración de Trace del dispositivo al proyecto .................................111
Borrado de Traces en el dispositivo.....................................................................................111
Área de trabajo Ficha Configuración....................................................................................112
Configuración de Trace........................................................................................................112
Área de trabajo Ficha Diagrama ..........................................................................................112
Uso del diagrama de curvas ................................................................................................112
Utilización de la tabla de señales.........................................................................................114
Uso del grupo de señales en la tabla de señales ................................................................115
Observación de señales rápidas..........................................................................................117
Comparación de registros (mediciones superpuestas)........................................................118
Alineación exacta de mediciones (mediciones superpuestas).............................................119
Impresión de un registro ......................................................................................................120

6.5
6.5.1
6.5.1.1
6.5.1.2
6.5.1.3
6.5.1.4
6.5.1.5
6.5.1.6
6.5.1.7
6.5.1.8
6.5.1.9

Dispositivos ..........................................................................................................................120
CPU S7-1200/1500 ..............................................................................................................120
Captación de variables.........................................................................................................120
Vida útil de la configuración de Trace y de los valores registrados en el dispositivo...........122
Niveles de registro ...............................................................................................................122
Sincronización horaria con Motion Control ..........................................................................123
Capacidad funcional.............................................................................................................124
Carga de CPU por registro de Trace ...................................................................................124
Trace del proyecto ...............................................................................................................125
Interfaz de software de la configuración ..............................................................................125
Configuración .......................................................................................................................136

Establecimiento de conexiones remotas con TeleService .......................................................................141
7.1
7.1.1
7.1.2
7.1.3

Principios básicos para el trabajo con TeleService..............................................................141
Introducción a TeleService...................................................................................................141
Funcionalidad de TeleService..............................................................................................142
Listín telefónico en TeleService ...........................................................................................142

7.2
7.2.1
7.2.2
7.2.3
7.2.4
7.2.4.1
7.2.4.2
7.2.4.3
7.2.4.4

Trabajar con el listín telefónico ............................................................................................143
Principios básicos para trabajar con el listín telefónico........................................................143
Configuración del listín telefónico ........................................................................................144
Símbolos del listín telefónico................................................................................................145
Administrar el listín telefónico ..............................................................................................145
Abrir el listín telefónico .........................................................................................................145
Insertar filas en el listín telefónico ........................................................................................146
Mostrar y ocultar columnas en el listín telefónico ................................................................146
Guardar el listín telefónico ...................................................................................................146

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

5

Índice

6

7.2.4.5
7.2.4.6
7.2.4.7
7.2.4.8

Importar datos del listín telefónico .......................................................................................146
Exportar datos del listín telefónico .......................................................................................148
Imprimir el listín telefónico....................................................................................................149
Definir reglas de marcación .................................................................................................149

7.3
7.3.1
7.3.2
7.3.2.1
7.3.2.2
7.3.2.3
7.3.3
7.3.3.1
7.3.3.2
7.3.3.3
7.3.3.4
7.3.3.5
7.3.4
7.3.4.1
7.3.4.2
7.3.4.3
7.3.4.4
7.3.4.5
7.3.4.6
7.3.4.7
7.3.4.8
7.3.4.9
7.3.5
7.3.5.1
7.3.5.2
7.3.5.3
7.3.5.4
7.3.5.5
7.3.6
7.3.6.1
7.3.6.2

Conexión remota como conexión por línea telefónica .........................................................151
Principios básicos para el establecimiento de una conexión por línea telefónica................151
Redes telefónicas y módems ...............................................................................................153
Redes telefónicas y módems permitidos .............................................................................153
Instalar el módem local ........................................................................................................154
Conectar y parametrizar el módem remoto..........................................................................154
Protección de acceso en las conexiones por línea telefónica..............................................155
Información sobre los derechos de acceso..........................................................................155
Posibilidades de rellamada en TeleService .........................................................................156
Información sobre los niveles de protección ........................................................................157
Crear derechos de acceso y número de rellamada para el TS Adapter ..............................158
Realizar la rellamada en TeleService ..................................................................................159
TS Adapter MPI....................................................................................................................160
Breve descripción del TS Adapter MPI ................................................................................160
Funcionamiento del TS Adapter MPI ...................................................................................161
Usar el TS Adapter MPI en la conexión directa ...................................................................162
Usar el TS Adapter MPI en la conexión módem ..................................................................163
Posibilidades de parametrización para el TS Adapter MPI..................................................164
Parametrizar el TS Adapter MPI ..........................................................................................165
Restaurar la parametrización estándar para el TS Adapter MPI .........................................165
Exportación de parámetros del adaptador ...........................................................................166
Importación de parámetros del adaptador ...........................................................................167
TS Adapter IE.......................................................................................................................168
Breve descripción del TS Adapter IE ...................................................................................168
Funcionamiento del TS Adapter IE ......................................................................................169
Tipos de conexión ................................................................................................................169
Posibilidades de parametrización del TS Adapter IE ...........................................................171
Parametrizar el TS Adapter IE .............................................................................................172
Establecimiento de una conexión por línea telefónica con una instalación remota .............174
Establecer conexión por línea telefónica .............................................................................174
Deshacer conexión por línea telefónica ...............................................................................175

7.4
7.4.1
7.4.2
7.4.3
7.4.4
7.4.5
7.4.5.1
7.4.5.2
7.4.6
7.4.6.1
7.4.6.2
7.4.6.3
7.4.6.4

Conexión remota como conexión VPN ................................................................................176
Principios básicos para el establecimiento de una conexión VPN.......................................176
Principios básicos de los certificados CA.............................................................................177
Instalar certificado CA para conexión VPN ..........................................................................179
Borrar certificado CA para conexión VPN............................................................................182
Establecimiento de una conexión VPN con una instalación remota ....................................182
Establecer conexión VPN ....................................................................................................182
Deshacer conexión VPN ......................................................................................................184
TS Adapter IE Advanced......................................................................................................184
Descripción abreviada del TS Adapter IE Advanced ...........................................................184
Tipos de conexión ................................................................................................................185
Posibilidades de parametrización del TS Adapter IE Advanced ..........................................186
Parametrizar el TS Adapter IE Advanced ............................................................................187

7.5
7.5.1

Conexiones remotas controladas por CPU en TeleService.................................................188
Vista general de las conexiones remotas controladas por CPU ..........................................188

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Índice

7.5.2
7.5.2.1
7.5.2.2
7.5.3
7.5.3.1
7.5.3.2
7.5.4
7.5.4.1
7.5.5
7.5.5.1
7.6
7.6.1
7.6.2
7.6.3
7.6.4
7.6.5
7.6.6
7.6.7
7.6.8
8

Establecer conexiones desde y hacia instalaciones remotas (acoplamiento remoto PGAS) .......................................................................................................................................189
Acceder desde una instalación remota a una programadora/un PC ...................................189
Requisitos para establecer una conexión ............................................................................190
Intercambio de datos entre instalaciones remotas (acoplamiento remoto AS-AS)..............191
Principios básicos para el acoplamiento remoto AS-AS ......................................................191
Requisitos de hardware y software para el acoplamiento remoto AS-AS............................192
Enviar un SMS desde una instalación .................................................................................193
Requisitos para enviar un mensaje SMS .............................................................................193
Enviar un correo electrónico desde una instalación.............................................................194
Requisitos para enviar un correo electrónico.......................................................................194
Indicaciones para la búsqueda de errores ...........................................................................197
Indicaciones generales para la búsqueda de errores en caso de problemas con el
módem .................................................................................................................................197
Grabación de un archivo de informe para el módem ...........................................................198
No se establece una conexión por línea telefónica con el TS Adapter................................198
No se establece una conexión por línea telefónica desde el TS Adapter............................200
La conexión módem se interrumpe......................................................................................201
Lista de chequeo en caso de dificultades con el módem.....................................................201
Mensajes de error del módem .............................................................................................202
Posibles mensajes de error en las conexiones VPN ...........................................................203

Simulación de dispositivos con S7-PLCSIM.............................................................................................205
8.1

Simulación de dispositivos ...................................................................................................205

8.2

Iniciar la simulación..............................................................................................................205

Índice alfabético........................................................................................................................................207

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

7

Índice

8

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Mostrar nodos accesibles

1

Los dispositivos accesibles son todos aquellos dispositivos que están conectados con una
interfaz de la PG o del PC. Por tanto, también es posible mostrar dispositivos que, con los
productos instalados actualmente, solo pueden configurarse con restricciones o que no
pueden configurarse en absoluto.
Para acelerar la visualización en redes grandes con muchos dispositivos, en los dispositivos
PROFINET se muestran los nombres de los mismos ligeramente adaptados. Los caracteres
específicos de Unicode de los nombres de dispositivos PROFINET se convierten en
caracteres compatibles con ASCII tras aplicar el procedimiento Punicode (conforme a RFC
3492).

Mostrar los dispositivos accesibles en el árbol del proyecto
Para mostrar los dispositivos accesibles en una interfaz de la PG o del PC, proceda del
siguiente modo:
1. Abra la carpeta "Accesos online" en el árbol del proyecto.
2. Haga clic en el símbolo de flecha que aparece a la izquierda de la interfaz para mostrar
todos los objetos subordinados.
3. Haga doble clic en "Actualizar dispositivos accesibles" debajo de la interfaz.
El progreso de la búsqueda se observa en la barra de estado. Si encuentra el dispositivo
deseado antes de que finalice el proceso de búsqueda, puede cancelar este último. Para
ello, haga clic en la cruz situada a la derecha de la barra de progreso.
Los dispositivos de red que se han encontrado en la búsqueda se muestran debajo de la
interfaz.
4. Opcionalmente: seleccione la interfaz en el árbol del proyecto. A continuación abra la
ventana general de la vista detallada para mostrar otros detalles de los dispositivos
correspondientes. Otros detalles son, p. ej., el tipo de dispositivo, la dirección MAC o el
nombre de dispositivo configurado.
Si hay muchos dispositivos de red, la visualización detallada de los dispositivos en la
ventana general puede requerir algún tiempo, puesto que cada dispositivo debe transferir
los detalles.

Mostrar los dispositivos accesibles en una tabla
Para ver los dispositivos accesibles en una tabla sinóptica fuera del árbol del proyecto, proceda
del siguiente modo:
1. Elija el comando "Dispositivos accesibles" del menú "Online".
Se abre el cuadro de diálogo "Dispositivos accesibles".
2. Seleccione el tipo de interfaz en la lista desplegable "Tipo de interfaz PG/PC".
3. Elija la interfaz deseada de la PG o del PC en la lista desplegable "Interfaz PG/PC".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

9

Mostrar nodos accesibles

4. Haga clic en el botón "Iniciar búsqueda".
Los dispositivos accesibles en la interfaz seleccionada de la PG o del PC se muestran en
la tabla. En el gráfico, la línea de unión entre la programadora o PC y la red se representa
en forma de línea continua verde. Si en una interfaz no hay dispositivos accesibles, la unión
se representa en forma de línea discontinua.
5. Para saltar a un dispositivo en el árbol del proyecto, selecciónelo de la lista de dispositivos
accesibles y haga clic en el botón "Mostrar".
En el árbol del proyecto se selecciona el dispositivo seleccionado.

Mostrar información adicional sobre los dispositivos en el árbol del proyecto
Para mostrar información adicional sobre los distintos dispositivos accesibles en el árbol del
proyecto, proceda del siguiente modo:
1. En el árbol del proyecto, haga clic en el símbolo de flecha que aparece a la izquierda de uno
de los dispositivos accesibles.
Para los dispositivos conocidos se muestran todos los datos disponibles online, p. ej. los
bloques o los datos del sistema. Si para un dispositivo existen otras posibilidades de edición
a través del menú contextual, el dispositivo se muestra en negro. A los objetos con fondo
gris, p. ej. bloques, solo se tiene acceso de lectura.

Mostrar información adicional sobre los dispositivos en la vista detallada
Para mostrar información adicional sobre los dispositivos en la vista detallada de la ventana
general, haga lo siguiente:
1. En la carpeta "Accesos online", haga doble clic en la entrada "Actualizar dispositivos
accesibles" en el nodo de la tarjeta de red.
Se mostrará una lista de todos los dispositivos accesibles en la red debajo de la interfaz.
2. Haga doble clic en la entrada "Mostrar más información".
Se mostrará más información en la vista detallada de la ventana general.

Consulte también
Modificación online de la configuración del dispositivo (Página 11)
Preajustar datos de conexión online (Página 16)

10

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Modificación online de la configuración del dispositivo

2

Algunos dispositivos, preferentemente en configuraciones hardware reducidas, se pueden
parametrizar directamente online. Para ello hay que crear un proyecto y disponer de datos
offline. De ese modo es posible modificar la configuración del dispositivo rápida y fácilmente.
No es necesario compilar la configuración hardware ni realizar una descarga. En función del
dispositivo, todos los cambios serán efectivos de forma inmediata o se escribirán en el
dispositivo tras una confirmación.

Requisitos
● El dispositivo debe soportar la parametrización online. Para saber si los dispositivos
soportan esta función, consulte el manual de producto correspondiente.
● El dispositivo debe estar conectado a la programadora o el PC y estar disponible en la lista
de dispositivos accesibles.

Procedimiento
Para modificar online la configuración del dispositivo, proceda del siguiente modo:
1. Visualice los dispositivos accesibles en la interfaz a través de la cual está conectado el
dispositivo. Para saber cómo visualizar los dispositivos accesibles, consulte el capítulo
"Visualización de los dispositivos accesibles (Página 9)".
2. Abra el dispositivo para visualizar los elementos subordinados.
3. Haga doble clic en la entrada "Parametrizar dispositivo".
En el área de trabajo se abre una página de configuración para el dispositivo.
4. Realice todos los ajustes necesarios.
En algunos dispositivos los cambios en los ajustes son efectivos de forma inmediata.
5. Opcionalmente y en función del dispositivo: Haga clic en el botón "Transferir al dispositivo".
Los ajustes se transfieren al dispositivo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

11

Modificación online de la configuración del dispositivo

12

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Conectar dispositivos online
3.1

3

Información general sobre el modo online

Modo online
En modo online existe una conexión online entre la PG/el PC y uno o varios dispositivos.
En las siguientes actividades se necesita una conexión online entre la PG/el PC y el dispositivo:
● Comprobar programas de usuario
● Visualizar y cambiar el estado operativo de la CPU
● Visualizar y ajustar la fecha y hora de la CPU
● Visualizar la información del módulo
● Comparar bloques
● Diagnosticar el hardware
Para establecer una conexión online, la PG/el PC y el dispositivo deben estar interconectados
físicamente o a través de una conexión remota. Alternativamente, algunos dispositivos
soportan un modo de simulación. En este caso, se simula una conexión con el dispositivo a
través de la interfaz virtual PLCSIM.
Una vez establecida la conexión, es posible acceder a los datos del dispositivo en la vista
online y de diagnóstico o desde la Task Card "Herramientas online". Además, el estado online
actual de un dispositivo se representa mediante un símbolo situado a la derecha de éste en el
árbol del proyecto. El significado de los distintos símbolos de estado se explica en los
respectivos tooltips.
Nota
Algunas funciones online dependen del volumen de software instalado, o bien de si un
proyecto está abierto.

Modo de espera o estado de reposo de la PG/el PC
Si la PG/el PC pasa al modo de espera o al estado de reposo en una conexión online existente,
se deshacen todas las conexiones online. Una vez la PG/el PC sale del modo de reposo, las
conexiones online no se restablecen automáticamente.
En este contexto, tenga en cuenta que el corte repentino de la conexión online puede provocar
la pérdida de datos o bien un dispositivo conectado puede interrumpir la ejecución del
programa.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

13

Conectar dispositivos online
3.1 Información general sobre el modo online

Realizar test de parpadeo LED
En muchos cuadros de diálogo online es posible realizar un test de parpadeo LED si el
dispositivo conectado online soporta esta función. Si activa la casilla de verificación
"Parpadear LED", parpadeará el LED del dispositivo seleccionado en ese momento. Esta
función resulta útil por ejemplo cuando no se está seguro del dispositivo dentro de la estructura
de hardware que corresponde al nodo que se ha seleccionado en el software en la actualidad.
Tenga en cuenta las indicaciones y las posibles limitaciones para el test de parpadeo LED que
se indiquen en la documentación correspondiente del dispositivo.

Consulte también
Vista en el modo online (Página 15)

14

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Conectar dispositivos online
3.2 Vista en el modo online

3.2

Vista en el modo online

Indicaciones online
Una vez establecida la conexión online, el aspecto de la interfaz de usuario cambia. Si un
dispositivo no está accesible, se indica simbólicamente. La figura siguiente muestra un
dispositivo conectado online y la interfaz de usuario correspondiente:





 







① La barra de título de la ventana activa se muestra entonces sobre un fondo naranja en

②
③

cuanto como mínimo uno de los dispositivos visualizados en el editor se ha conectado
online correctamente. Si uno o varios dispositivos no están accesibles, en la barra de
título del editor se muestra un símbolo de conexión interrumpida.
Las barras de título de las ventanas inactivas de la estación correspondiente aparecen
con una raya naranja en su borde inferior.
En el margen derecho de la barra de estado aparece una barra naranja animada. Si la
conexión se ha establecido pero es defectuosa, en lugar de la barra se muestra un
símbolo que indica la interrupción de la conexión. En el apartado "Diagnóstico" de la
ventana de inspección obtendrá más información relacionada el error. Adicionalmente la
barra de estado muestra cuándo se produce la conexión online con el hardware SIMA‐
TIC a través del TIA Portal Cloud Connector.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

15

Conectar dispositivos online
3.3 Preajustar datos de conexión online

④ La columna izquierda del árbol del proyecto muestra el estado de diagnóstico de los
objetos de hardware en el modo online mediante símbolos.

⑤ La columna derecha del árbol del proyecto muestra el estado de comparación de los

⑥

objetos de software en el modo online mediante símbolos. Se ejecuta una comparación
automática entre el estado online y offline. Las diferencias entre los objetos online y
offline también se marcan con símbolos.
El área "Diagnóstico > Información del dispositivo" aparece en primer plano en la ven‐
tana de inspección.

Corte de la conexión online
El modo online y su visualización se mantienen mientras haya como mínimo un dispositivo
conectado online. Si la conexión online se corta en uno o varios dispositivos, el TIA Portal se
mantiene en modo online. La representación del TIA Portal no cambia al modo offline hasta
que ya no queda ninguna conexión online con los dispositivos.

Conexión online a través del TIA Portal Cloud Connector
Si utiliza el TIA Portal en un entorno virtual existe la posibilidad de establecer una conexión
online con el hardware SIMATIC conectado a un dispositivo de usuario a través del TIA Portal
Cloud Connector. Si la conexión online se establece a través del TIA Portal Cloud Connector,
en la barra de estado se muestra el siguiente símbolo:

Encontrará instrucciones para el uso del TIA Portal en un entorno virtual (Private Cloud) en el
soporte de datos de instalación, en el directorio "Documents\Readme\<directorio de idioma".
Abra aquí el documento PDF "TIAPortalCloudConnectorHowTo<Identificador de idioma>.pdf".

Consulte también
Información general sobre el modo online (Página 13)

3.3

Preajustar datos de conexión online
Si utiliza preferentemente una interfaz de red determinada de su PG o PC para establecer una
conexión online, la puede ajustar previamente. De ese modo, la vía de conexión especificada
ya aparecerá seleccionada en los cuadros de diálogo para la conexión online.

Procedimiento
Para definir la vía de conexión estándar, proceda del siguiente modo:
1. Elija el comando "Configuración" del menú "Opciones".
Se abren los ajustes del TIA Portal.
2. Seleccione la entrada "Online y diagnóstico" en la navegación local.

16

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Conectar dispositivos online
3.4 Establecer o modificar conexión online
3. En la sección "Vía de conexión predeterminada para el acceso online" establezca el tipo
para la interfaz PG/PC y la interfaz en sí.
4. Active la casilla de verificación "Utilizar la vía de conexión predeterminada para el acceso
online".

Consulte también
Establecer o modificar conexión online (Página 17)
Mostrar nodos accesibles (Página 9)
Accesos online (Página 33)

3.4

Establecer o modificar conexión online
Para aprovechar las funciones online de un dispositivo, en el primer intento de conexión debe
definirse la vía de conexión.

Requisitos
Hay instalada por lo menos una interfaz PG/PC que, a su vez, está conectada físicamente con
un dispositivo (p. ej. con un cable Ethernet). Otra alternativa consiste en establecer conexiones
online virtuales mediante PLCSIM.

Procedimiento
Para establecer o modificar una conexión online, proceda del siguiente modo:
1. Seleccione en el árbol del proyecto uno o varios dispositivos para la conexión online.
2. Elija el comando "Establecer conexión online" del menú "Online".
– Si ya se había establecido antes una conexión online con el dispositivo, la conexión
online se establece automáticamente a través de la vía de conexión definida
previamente.
– Si hasta entonces no se había establecido ninguna conexión o si la dirección del
dispositivo no está en la misma subred que el dispositivo PG/PC, aparecerá el cuadro
de diálogo "Establecer conexión online".
Si desea modificar una vía de conexión definida, seleccione en su lugar el comando
"Conexión online avanzada" del menú "Online". En este caso se abre de nuevo el cuadro
de diálogo "Establecer conexión online".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

17

Conectar dispositivos online
3.4 Establecer o modificar conexión online
3. Elija la vía de conexión:
– Seleccione el tipo de interfaz en la lista desplegable "Tipo de interfaz PG/PC".
– Seleccione la interfaz de la programadora o el PC en la lista desplegable "Interfaz PG/
PC".
La selección no es necesaria si ya se ha especificado una interfaz PG/PC en la
configuración.
– En la lista desplegable "Conexión con interfaz/subred", seleccione la interfaz o la subred
para la conexión. Si no hay ningún gateway S7 interconectado, seleccione una conexión
directa. Seleccione la subred adecuada para la conexión con la programadora o el PC
si es posible acceder al dispositivo a través de un gateway S7. Seleccione la entrada
"Probar todas las interfaces" si el dispositivo dispone de varias interfaces y no se sabe
la interfaz a través de la cual está conectado con la programadora o el PC.
Si se ha seleccionado una subred MPI o Profibus, en este momento se aplicarán a la
interfaz PG/PC los parámetros configurados para el bus.
– Si el dispositivo es accesible mediante una pasarela, elija en la lista desplegable "Primer
gateway" la pasarela que interconecta las subredes en cuestión.
4. Opcionalmente: si no es posible acceder a ningún dispositivo a través de la vía de conexión
seleccionada, la conexión entre la programadora o el PC y el dispositivo se representará en
forma de línea discontinua. Tal es el caso, por ejemplo, cuando el dispositivo se conecta
con la red mediante un router NAT.
Para visualizar todos los dispositivos activados y conectados a una interfaz de la PG o el
PC, seleccione la entrada "Mostrar dispositivos accesibles" y vuelva a hacer clic en "Iniciar
búsqueda".
5. Opcionalmente: Para acceder al dispositivo a pesar de que la subred sea diferente, existen
dos posibilidades: En redes administrativas, utilice ambas posibilidades solo tras consultar
al administrador.
– En Windows, asigne una dirección IP estática a la interfaz PG/PC.
– Al crear una conexión online, a la interfaz de la programadora o del PC se le asigna
temporalmente otra dirección IP, que se encuentra en la misma subred que el
dispositivo. Haga clic en "Conectar" y confirme la pregunta que se efectúa a
continuación.
6. Haga clic en el botón "Iniciar búsqueda".
En la tabla de dispositivos de destino se muestran los dispositivos accesibles a través de
la vía de conexión configurada. En el gráfico de la parte izquierda la conexión se representa
en forma de línea continua.
7. Opcionalmente: realice un test de intermitencia. En el lado izquierdo del gráfico, active la
casilla de verificación "Parpadear LED". Con el test de intermitencia se comprueba si se ha
seleccionado el dispositivo correcto. No todos los dispositivos soportan el test de
intermitencia.
8. Seleccione el dispositivo de destino en la tabla y confirme la selección con "Conectar".
Se establece la conexión online con el dispositivo de destino seleccionado.

18

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Conectar dispositivos online
3.4 Establecer o modificar conexión online

Resultado
Una vez establecida la conexión online, las barras de título de los editores aparecen en color
naranja. Además, en la barra de título de un editor y en la barra de estado se visualizan sendos
indicadores de progreso en color naranja. Los símbolos de estado en el árbol del proyecto
muestran la diferencia entre los objetos disponibles online y offline.
La vía de conexión configurada se guarda para intentos de conexión futuros.
Si la dirección PG/PC se asigna dinámicamente, el cuadro de diálogo volverá a aparecer
cuando se haya reiniciado el equipo. En ese caso será necesario crear la conexión
nuevamente.
Nota
Deshacer acciones
Después de establecer una conexión online no es posible deshacer acciones.
Nota
Uso de conexiones directas o subredes
La conexión online entre PG/PC y dispositivos conectados es posible mediante una conexión
directa o a través de una subred.
No es posible conectar simultáneamente los dispositivos a través de diferentes subredes si
están conectados físicamente a través de la misma interfaz. Las conexiones simultáneas a
diferentes subredes solo son posibles si se utilizan conexiones enrutadas.
No es posible conectar simultáneamente dispositivos a través de una subred y mediante
conexiones directas a través de la misma interfaz.

Consulte también
Preajustar datos de conexión online (Página 16)
Deshacer la conexión online (Página 20)
Conexión online con varios dispositivos (Página 20)
Vista en el modo online (Página 15)
Uso de direcciones IP temporales (Página 40)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

19

Conectar dispositivos online
3.6 Conexión online con varios dispositivos

3.5

Deshacer la conexión online

Procedimiento
Para deshacer una conexión online existente, proceda del siguiente modo:
1. En el árbol del proyecto, seleccione el dispositivo del que desea deshacer la conexión
online.
2. Elija el comando "Deshacer conexión online" del menú "Online".
Se deshace la conexión online.
Nota
Deshacer acciones
Después de deshacer una conexión online no es posible deshacer acciones.

Consulte también
Establecer o modificar conexión online (Página 17)

3.6

Conexión online con varios dispositivos
Es posible establecer una conexión online con varios dispositivos a la vez sin tener que
seleccionar previamente los diferentes dispositivos en el árbol del proyecto o en la vista de
redes.

Requisitos
● No puede haber ningún dispositivo seleccionado.
● Hay instalada por lo menos una interfaz PG/PC que, a su vez, está conectada físicamente
con un dispositivo (p. ej. con un cable Ethernet). Otra alternativa consiste en establecer una
conexión online virtual mediante PLCSIM, o bien crear una conexión remota.

Procedimiento
Para establecer una conexión online con varios dispositivos a la vez, proceda del siguiente
modo:
1. Seleccione el proyecto en el árbol del proyecto.
2. Elija el comando "Establecer conexión online" del menú "Online".
Se abrirá el cuadro de diálogo "Seleccionar dispositivo para establecer la conexión online"
con una tabla de todos los dispositivos disponibles.
3. En la columna "Conexión online" seleccione los dispositivos con los que desea establecer
una conexión online.
4. Haga clic en el botón "Establecer conexión online".

20

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Conectar dispositivos online
3.7 Deshacer conexiones online de varios dispositivos

Resultado
Se establece una conexión con todos los dispositivos seleccionados sin más consulta, siempre
que previamente haya existido alguna conexión con los dispositivos seleccionados. Si hasta
ahora no se había establecido ninguna conexión online, aparecerá el cuadro de diálogo
"Establecer conexión online". En este caso, configure primero la conexión online tal como se
describe en el capítulo "Establecer y deshacer una conexión online (Página 17)".

Consulte también
Establecer o modificar conexión online (Página 17)
Uso de direcciones IP temporales (Página 40)

3.7

Deshacer conexiones online de varios dispositivos
Es posible deshacer a la vez las conexiones online existentes con varios dispositivos sin tener
que seleccionar previamente los diferentes dispositivos en el árbol del proyecto o en la vista de
redes.

Requisitos
● No hay ningún dispositivo seleccionado.
● Existe una conexión online como mínimo para un dispositivo.

Procedimiento
Para deshacer simultáneamente las conexiones online con varios dispositivos, proceda del
siguiente modo:
1. Elija el comando "Deshacer conexión online" del menú "Online".
Se abre el diálogo "Seleccionar dispositivos" con una tabla de todos los dispositivos
disponibles.
2. En la columna "Deshacer conexión online", seleccione los dispositivos para los que desea
deshacer la conexión online.
3. Haga clic en el botón "Deshacer conexión online".

Resultado
Se deshace la conexión online entre todos los dispositivos seleccionados.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

21

Conectar dispositivos online
3.7 Deshacer conexiones online de varios dispositivos

22

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Creación de una copia de seguridad de una CPU S7
4.1

4

Posibles copias de seguridad para las CPUs S7
Con el paso del tiempo realizará en su instalación de automatización algunas modificaciones,
p. ej. agregar dispositivos nuevos, cambiar dispositivos existentes o adaptar el programa de
usuario. Si los cambios implican procedimientos indeseados, es posible restablecer el estado
anterior de la instalación de automatización. Para seguir procediendo sin problemas después
de cambiar algún dispositivo se pueden aplicar los mismos programas y valores existentes.
Las CPUs ofrecen diferentes posibilidades de realizar la copia de seguridad y restablecer la
configuración hardware y el software.

Posibilidades de copia de seguridad
La tabla siguiente muestra un resumen de las posibilidades de copia de seguridad y
restablecimiento de las CPU S7:
Instantánea de los va‐
lores de observación
Caso de aplicación

Carga de dispositivo
(software)

Restablecimiento de
Carga en el proyecto
un estado determinado de bloques existentes
de un bloque de datos. en una CPU.
Los valores actuales
de bloques de datos,
incluido el sello de
tiempo, se aplican al
proyecto.

Carga del dispositivo
como estación nueva
(hardware y software)

Cargar copia de segu‐
ridad de un dispositivo
online

Carga de la configura‐
ción hardware y del
software desde un dis‐
positivo en el proyecto.

Creación de una copia
de seguridad completa
de una CPU como pun‐
to de restablecimiento.
La copia de seguridad
es coherente y no pue‐
de modificarse ni abrir‐
se.

Requisitos

La CPU ya ha sido
creada en el proyecto.
Los bloques de datos
online y offline deben
ser idénticos.

La CPU está creada en El dispositivo está dis‐ el proyecto.
ponible en el catálogo
de hardware del TIA
Portal. En su caso es‐
tán instalados los HSP
y los archivos GSD ne‐
cesarios.

Posible en el estado
operativo

RUN, STOP

RUN, STOP

RUN, STOP

STOP

Posible para CPU F

Sí

Sí

Sí

Sí

Copia de seguridad
editable

Sí

Sí

Sí

No

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

23

Creación de una copia de seguridad de una CPU S7
4.1 Posibles copias de seguridad para las CPUs S7

Contenidos de la copia de seguridad
La tabla siguiente muestra las posibilidades que existen de cargar datos y hacer una copia de
seguridad de los mismos:
Instantánea de los va‐
lores de observación

Carga de dispositivo
(software)

Carga del dispositivo
como estación nueva
(hardware y software)1

Cargar copia de segu‐
ridad de un dispositivo
online (backup)2

Sí

No

No

No

No

No

No

Sí

Bloques de software

No

Sí

Sí

Sí

Variables PLC (nom‐
bre de variable y de
constante)

No

Sí (en CPU S7-1200 y
S7-1500)

Sí (en CPU S7-1200 y
S7-1500)

Sí

Objetos tecnológicos

No

Sí

Sí

Sí

Configuración Trace

No

No

No

Sí

Configuración hardwa‐ No
re

No

Sí

Sí

Tablas de observación
(servidor web)

No

Sí

Sí

Datos locales, marcas, Sí
temporizadores, conta‐
dores y memoria ima‐
gen de proceso

No

No

Sí

Ficheros y recetas
(PLC)

No

No

No

Sí

Datos generales en la No
Memory Card SIMA‐
TIC, p. ej. ayuda de blo‐
ques de programa o ar‐
chivos GSD

No

No

Sí

Bloque de datos
Valor actual copiado
en instantánea3
Datos remanentes
Bloque de datos y mar‐
ca

No

1

Depende de la versión de TIA Portal utilizada para cargar. Solo puede volver a leerse con la versión de producto con la que
se cargó.

2

El tipo de copia de seguridad "Cargar backup del dispositivo online" realiza una copia de seguridad de los valores actuales
de las variables ajustadas como remanentes. Para asegurar la coherencia de los datos remanentes, es preciso desactivar
todos los accesos de escritura a los datos remanentes durante la copia de seguridad, para evitar p. ej. accesos de escritura
HMI durante dicho proceso.

3

Los valores actuales de los datos no remanentes se ajustan a los valores de arranque cuando cambia el estado operativo
de STOP a RUN. Cuando se realiza una copia de seguridad de la CPU solo se crea una copia de los valores de arranque
de los datos no remanentes.

Particularidades de la copia de seguridad de valores actuales
El tipo de copia de seguridad "Cargar backup del dispositivo online" copia los valores actuales
de las variables ajustadas como remanentes. Para asegurar la coherencia de los datos
remanentes, es preciso desactivar todos los accesos de escritura a los datos remanentes
durante la copia de seguridad.

24

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Creación de una copia de seguridad de una CPU S7
4.2 Creación de una copia de seguridad de CPU S7-300 y S7-400

Consulte también
Crear una copia de seguridad de un dispositivo (Página 25)
Crear una copia de seguridad de un dispositivo (Página 28)

4.2

Creación de una copia de seguridad de CPU S7-300 y S7-400

4.2.1

Crear una copia de seguridad de un dispositivo

Copia de seguridad de la configuración de software y hardware de una CPU S7-300/400
Si ya ha cargado una configuración en una CPU S7-300/400 puede ser conveniente hacer una
copia de seguridad. Posiblemente haya modificado la configuración y desee probar la nueva
configuración. Antes de cargar la nueva configuración en la CPU, cree una copia de seguridad
del estado actual del dispositivo, que le permitirá restablecer la configuración actual más
adelante. La copia de seguridad se realiza con los valores actuales de la CPU. En las CPU
S7-400 con función de seguridad positiva se hacen copias de seguridad de los valores
predeterminados.
Puede crear tantas copias de seguridad como desee para guardar diferentes configuraciones
para una CPU. El nombre de las copias de seguridad incluye el nombre de la CPU y la hora y
fecha de la copia. La copia de seguridad está en la carpeta "Backups online" de la CPU en el
árbol del proyecto.
La figura siguiente muestra a modo de ejemplo una CPU S7 de la que se han realizado dos
copias de seguridad:

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

25

Creación de una copia de seguridad de una CPU S7
4.2 Creación de una copia de seguridad de CPU S7-300 y S7-400

Consulte también
Posibles copias de seguridad para las CPUs S7 (Página 23)

4.2.2

Restablecer el software y la configuración de hardware de un dispositivo
Si previamente ha realizado una copia de seguridad de la configuración de un dispositivo, es
posible volver a transferir dicha copia al dispositivo. En este caso, en el dispositivo se
restablece la configuración guardada.

Requisitos
El dispositivo debe estar configurado y debe haberse guardado una copia de seguridad del
dispositivo en el proyecto.

26

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Creación de una copia de seguridad de una CPU S7
4.2 Creación de una copia de seguridad de CPU S7-300 y S7-400

Procedimiento
Para restablecer en un dispositivo un estado anterior de software y hardware, proceda del
siguiente modo:
1. Abra la carpeta del dispositivo en el árbol del proyecto para visualizar los objetos
subordinados.
2. Abra la carpeta "Backups online".
3. Seleccione la copia de seguridad que desee restablecer.
4. En el menú "Online" seleccione el comando "Cargar en dispositivo".
– Si ya ha establecido una conexión online, aparecerá el cuadro de diálogo "Cargar vista
preliminar". En este cuadro de diálogo se visualizan avisos y se proponen las acciones
necesarias para la carga.
– Si hasta ahora no ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Carga avanzada" y primero deberá seleccionar las interfaces a través de las
que va a establecer la conexión online con el dispositivo.
Consulte también: Establecer y deshacer una conexión online
5. Verifique los mensajes en el cuadro de diálogo "Cargar vista preliminar" y, dado el caso,
active las acciones en la columna "Acción".
Nota
Si lleva a cabo las acciones propuestas con la instalación en marcha, pueden producirse
graves daños materiales y personales en caso de fallos de funcionamiento o errores del
programa.
6. El botón "Cargar" se activará tan pronto como sea posible la carga.
7. Haga clic en el botón "Cargar".
La copia de seguridad se transfiere al dispositivo y se restablece el estado guardado. A
continuación se abre el cuadro de diálogo "Cargar resultados". Este cuadro de diálogo
permite comprobar si la carga se ha realizado correctamente y, en caso necesario,
seleccionar acciones adicionales.
8. Haga clic en el botón "Finalizar".

4.2.3

Copia de seguridad de la configuración de un dispositivo
Puede hacer una copia de seguridad de la configuración de una CPU S7-300/400 en el TIA
Portal. Esto permite cargar y probar sin riesgos una configuración nueva en un dispositivo. En
caso necesario, es posible restablecer la configuración original de la CPU.

Requisitos
● La CPU ya está creada en el proyecto.
● La CPU está conectada online. Si todavía no hay ninguna conexión online, al crear la copia
de seguridad (backup) se establece una conexión online.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

27

Creación de una copia de seguridad de una CPU S7
4.3 Creación de una copia de seguridad de CPU S7-1200 y S7-1500

Procedimiento
Para crear una copia de seguridad de la configuración actual de una CPU, proceda de la
siguiente manera:
1. Seleccione la CPU en el árbol del proyecto.
2. Elija el comando "Cargar backup del dispositivo online" del menú "Online".

Resultado:
Se crea una copia de seguridad de toda la configuración de hardware y del software. La copia
de seguridad se almacena en la carpeta "Nombre de la CPU > Backups online" del árbol del
proyecto. La copia de seguridad lleva el nombre de la CPU con la hora y la fecha de la copia
de seguridad. Puede cambiar el nombre de la copia de seguridad; sin embargo, no se puede
llevar a cabo ninguna modificación en los contenidos de dicha copia.

4.3

Creación de una copia de seguridad de CPU S7-1200 y S7-1500

4.3.1

Crear una copia de seguridad de un dispositivo

Crear una copia de seguridad del software y la configuración hardware de una CPU
Si ya ha cargado una configuración en una CPU S7-1200 o S7-1500, puede ser útil hacer una
copia de seguridad de ella. Posiblemente haya modificado la configuración y desee probar la
nueva configuración. Antes de cargar la configuración nueva en la CPU, cree una copia de
seguridad del estado actual del dispositivo. La configuración actual se puede restablecer
posteriormente.
Puede crear tantas copias de seguridad como desee para guardar diferentes configuraciones
para una CPU. El nombre de las copias de seguridad incluye el nombre de la CPU y la hora y
fecha de la copia. La copia de seguridad está en la carpeta "Backups online" de la CPU en el
árbol del proyecto.
La figura siguiente muestra a modo de ejemplo una CPU S7 de la que se han realizado dos
copias de seguridad:

28

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Creación de una copia de seguridad de una CPU S7
4.3 Creación de una copia de seguridad de CPU S7-1200 y S7-1500

Alcance de la copia de seguridad
La copia de seguridad incluye todos los datos necesarios para restablecer un estado de
configuración determinado de una CPU. Se crea una copia de seguridad de, por ejemplo, los
siguientes datos:
● El contenido de la Memory Card
● Áreas de memoria remanentes, p. ej. de bloques de datos, contadores y marcas
● Otros contenidos de la memoria remanentes, como p. ej. parámetros de direcciones IP
La copia de seguridad se realiza con los valores actuales de la CPU. Las entradas del búfer de
diagnóstico no se incluyen en la copia de seguridad. En las CPU S7-1500 no se copia la hora
actual.

Consulte también
Posibles copias de seguridad para las CPUs S7 (Página 23)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

29

Creación de una copia de seguridad de una CPU S7
4.3 Creación de una copia de seguridad de CPU S7-1200 y S7-1500

4.3.2

Copia de seguridad de la configuración de un dispositivo
Puede hacer una copia de seguridad de la configuración de una CPU en el TIA Portal. Esto
permite cargar y probar sin riesgos una configuración nueva en un dispositivo. En caso
necesario, es posible restablecer la configuración original de la CPU.
Mientras se crea la copia de seguridad la CPU pasará a STOP. Si para la CPU hay configurado
un nivel de acceso, necesitará la contraseña para el acceso de lectura a la CPU.

Requisitos
● La CPU ya está creada en el proyecto.
● El dispositivo está conectado a la PG/al PC directamente a través de la interfaz PROFINET
de la CPU. No se soportan interfaces PROFIBUS de la CPU ni interfaces de CM/CP.
● La CPU está conectada online. Si todavía no hay ninguna conexión online, al crear la copia
de seguridad (backup) se establece una conexión online.
● La CPU está en estado operativo "STOP".

Procedimiento
Para crear una copia de seguridad de la configuración actual de una CPU, proceda de la
siguiente manera:
1. Seleccione la CPU en el árbol del proyecto.
2. Elija el comando "Cargar backup del dispositivo online" del menú "Online".
Dado el caso, introduzca y confirme la contraseña para el acceso de lectura a la CPU para
que la CPU pase al estado operativo "STOP".

Resultado:
Se crea una copia de seguridad de toda la configuración de hardware y del software. La copia
de seguridad se almacena en la carpeta "Nombre de la CPU > Backups online" del árbol del
proyecto. La copia de seguridad lleva el nombre de la CPU con la hora y la fecha de la copia
de seguridad. Puede cambiar el nombre de la copia de seguridad; sin embargo, no se puede
llevar a cabo ninguna modificación en los contenidos de dicha copia.
En el búfer de diagnóstico de la CPU se crea una entrada para cada copia de seguridad que
se cree.

Consulte también
Restablecimiento de la configuración de un dispositivo (Página 30)

4.3.3

Restablecimiento de la configuración de un dispositivo
Si previamente ha realizado una copia de seguridad de la configuración de un dispositivo, es
posible volver a transferir dicha copia al dispositivo. En este caso, en el dispositivo se
restablece la configuración guardada.

30

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Creación de una copia de seguridad de una CPU S7
4.3 Creación de una copia de seguridad de CPU S7-1200 y S7-1500
Mientras se carga una copia de seguridad la CPU pasa a STOP. Si para la CPU hay
configurado un nivel de acceso, necesitará la contraseña para el acceso de escritura a la CPU.
ADVERTENCIA
Carga de copias de seguridad con contenido desconocido
Si durante el funcionamiento de la instalación se activan las acciones propuestas de carga,
es posible que surjan averías de funcionamiento o errores de programa con daños materiales
y personales graves.
Asegúrese de que los contenidos de la copia de seguridad no incluyen ninguna configuración
que implique un comportamiento imprevisto de la instalación.

Requisitos
● El dispositivo está configurado y se ha guardado una copia de seguridad del dispositivo en
el proyecto.
● El dispositivo está conectado a la PG/al PC directamente a través de la interfaz PROFINET
de la CPU.
● La CPU está en estado operativo "STOP".
● Dispone de la contraseña para el acceso de lectura a la CPU, si se ha configurado un nivel
de acceso.

Procedimiento
Para restablecer en un dispositivo un estado anterior de software y hardware, proceda del
siguiente modo:
1. Abra la carpeta del dispositivo en el árbol del proyecto para visualizar los objetos
subordinados.
2. Abra la carpeta "Backups online".
3. Seleccione la copia de seguridad que desee restablecer.
4. En el menú "Online" seleccione el comando "Cargar en dispositivo".
– Si ya ha establecido una conexión online, aparecerá el cuadro de diálogo "Cargar vista
preliminar". En este cuadro de diálogo se visualizan avisos y se proponen las acciones
necesarias para la carga.
– Si hasta ahora no ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Carga avanzada" y primero deberá seleccionar las interfaces a través de las
que va a establecer la conexión online con el dispositivo.
Consulte también: AUTOHOTSPOT
5. Verifique los mensajes en el cuadro de diálogo "Cargar vista preliminar" y, dado el caso,
active las acciones en la columna "Acción".
6. El botón "Cargar" se activará tan pronto como sea posible la carga.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

31

Creación de una copia de seguridad de una CPU S7
4.3 Creación de una copia de seguridad de CPU S7-1200 y S7-1500
7. Haga clic en el botón "Cargar".
La copia de seguridad se transfiere al dispositivo y se restablece el estado guardado. A
continuación se abre el cuadro de diálogo "Cargar resultados". Este cuadro de diálogo
permite comprobar si la carga se ha realizado correctamente y, en caso necesario,
seleccionar acciones adicionales.
8. Haga clic en el botón "Finalizar".
Dado el caso, introduzca y confirme la contraseña para el acceso de lectura a la CPU para
que la CPU pase al estado operativo "STOP".
El contenido de la copia de seguridad se restablece en la CPU. A continuación la CPU se
reinicia.

32

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

5

Configurar interfaces PG/PC
5.1

Accesos online

Acceso online del proyecto
En la carpeta "Accesos online" del árbol del proyecto están todas las interfaces activas de la
PG/el PC. Todos los símbolos de interfaz proporcionan información sobre el estado
correspondiente. Se pueden visualizar los dispositivos accesibles y, desde el menú contextual,
las propiedades de una interfaz, que además pueden modificarse.
La siguiente imagen muestra la carpeta "Accesos online" en el árbol del proyecto:







①
②
③
④
⑤

⑥

Carpeta "Accesos online" en el árbol del proyecto
En la carpeta "Accesos online" se pueden visualizar todas las interfaces instaladas en la PG/el
PC.
Mostrar/ocultar interfaces
La función "Mostrar/ocultar interfaces" permite mostrar y ocultar diferentes interfaces.
Indicador de estado de las interfaces
El estado actual de una interfaz se indica mediante un símbolo situado a la derecha del nombre.
El significado de los símbolos se explica en los respectivos tooltips.
Actualización de la lista de los dispositivos accesibles.
Esta función está disponible para cualquier interfaz de hardware de la PG/del PC. Las interfaces
de software, como por ejemplo, una conexión remota, no disponen de esta función.
Mostrar más información
Esta función está disponible para cualquier interfaz de hardware de la PG/del PC después de
haber ejecutado la función "Actualizar dispositivos accesibles". Encontrará más información en
la vista detallada de la pantalla general.
Dispositivos que están conectados con la programadora o el PC a través de la interfaz corres‐
pondiente
El tipo de dispositivo en cuestión y también su estado se muestran con ayuda del símbolo que
aparece delante.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

33

Configurar interfaces PG/PC
5.1 Accesos online

Mostrar o actualizar los dispositivos accesibles
Las siguientes opciones están disponibles para mostrar los dispositivos accesibles online en
la PG/el PC:
● Mostrar los dispositivos accesibles desde una sola interfaz de la PG/del PC en el árbol del
proyecto. Además, en el árbol del proyecto es posible visualizar información adicional sobre
los distintos dispositivos accesibles.
● Mostrar en una lista los dispositivos accesibles de todas las interfaces.
Consulte también:AUTOHOTSPOT

Vista general de los símbolos de los dispositivos accesibles
Los dispositivos accesibles se marcan con un símbolo conforme a su tipo y a su estado. A
continuación se muestra una vista general de todos los símbolos y su significado.
Símbolo para módulos no identificables
Este símbolo se mostrará siempre que la identificación de un módulo aún no haya finalizado,
o bien cuando la identificación de un módulo no se haya realizado correctamente, por ejemplo,
porque no se han podido leer los datos online necesarios.
Símbolo para los siguientes tipos de dispositivos:
● PLC
● Dispositivos SIMOCODE pro
● Enlaces IE/PB
● CP de sistemas PC
● Módulos de cabecera SCALANCE
● CP S7-300 y S7-400
● Dispositivos PROFINET IO y CP PROFINET
● Módulos SCALANCE y gateways que no han podido ser identificados
Dispositivos PROFINET IO, encóders, aparellaje, sensores y sistemas de identificación que
han sido sustituidos por dispositivos similares porque dichos dispositivos no pudieron ser
identificados
Símbolo para los siguientes tipos de dispositivos:
● Dispositivos HMI
● Dispositivos PROFINET IO del tipo HMI, si estos no pudieron ser identificados y, por eso,
fueron sustituidos por un dispositivo similar
Dispositivos PROFINET IO del tipo accionamiento que no pudieron ser identificados y, por eso,
fueron sustituidos por un dispositivo similar
Dispositivos PROFINET IO del tipo Development Kit y componentes de red que no pudieron
ser identificados y, por eso, fueron sustituidos por un dispositivo similar
Dispositivos PROFINET IO del tipo TeleService Adapter que no pudieron ser identificados y,
por eso, fueron sustituidos por un dispositivo similar

Consulte también
Mostrar y modificar las propiedades de una interfaz (Página 36)

34

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.3 Mostrar u ocultar interfaces

5.2

Principios básicos para parametrizar la interfaz PG/PC

Posibilidades de conexión con sistemas de destino
Si los dispositivos del proyecto están conectados a través de subredes distintas, hay que
asignar a la interfaz PG/PC el acceso de red adecuado para poder establecer conexiones
online con los sistemas de destino. Se admiten automáticamente las siguientes interfaces:
● MPI
● PROFIBUS
● Industrial Ethernet (ISO y TCP/IP)
Las interfaces ofrecen según el tipo distintas posibilidades de parametrización. En los
capítulos siguientes verá las posibilidades de parametrización que existen.
Nota
Tenga en cuenta que los cambios efectuados en los parámetros de interfaz influyen
directamente en el sistema operativo y en la programadora o el PC. Por tanto, algunos
parámetros sólo pueden modificarse si se dispone de suficientes derechos de usuario.

Consulte también
Parametrizar la interfaz Industrial Ethernet (Página 37)
Parametrizar la interfaz MPI y PROFIBUS (Página 41)

5.3

Mostrar u ocultar interfaces
Para tener una visión general más clara, existe la posibilidad de ocultar diferentes interfaces
de la programadora o el PC en el árbol del proyecto y volver a mostrarlas en caso necesario.

Procedimiento
Para mostrar u ocultar interfaces individuales, proceda del siguiente modo:
1. Abra la carpeta "Accesos online" en el árbol del proyecto.
2. Haga doble clic en el icono "Mostrar/ocultar interfaces".
Se abre el cuadro de diálogo "Mostrar/ocultar interfaces".
3. Active o desactive las interfaces deseadas en la columna "Mostrar en el árbol del proyecto".
4. Haga clic en el botón "Aplicar".
Los cambios se aplicarán. La vista de las interfaces se actualiza en la carpeta "Accesos
online".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

35

Configurar interfaces PG/PC
5.5 Agregar interfaces

5.4

Mostrar y modificar las propiedades de una interfaz

Introducción
Es posible visualizar las propiedades de toda interfaz y modificarlas en caso necesario (p. ej.
tipo de red, dirección y estado).

Procedimiento
Para abrir las propiedades, proceda del siguiente modo:
1. En el árbol del proyecto, haga clic con el botón derecho del ratón en la interfaz deseada bajo
"Accesos online".
2. Elija el comando "Propiedades" del menú contextual.
Se abre el diálogo con las propiedades de la interfaz. La navegación local se encuentra en
el lado izquierdo del diálogo. En las distintas entradas de la navegación local es posible
visualizar los parámetros actuales y modificarlos en caso necesario.

5.5

Agregar interfaces
Después de la instalación del TIA Portal, tiene la posibilidad de instalar otras interfaces.

Procedimiento
Para instalar una interfaz a posteriori y agregarla al TIA Portal, proceda del siguiente modo:
1. Instale o actualice los drivers en el sistema operativo, después de haber instalado las
interfaces en el lado del hardware.
2. Cierre el TIA Portal, en caso de que aún esté abierto.
3. Abra el Panel de control de Windows.
4. Abra la entrada "Ajustar interface PG/PC" en el Panel de control.
Se abre el diálogo "Ajustar interface PG/PC".
5. Realice cambios, si es necesario, en la configuración de interfaces y confírmelos con
"Aceptar". Haga clic en cualquier caso en el botón "Aceptar", aunque no haya realizado
ningún cambio.
6. Reinicie el TIA Portal.

Resultado
La nueva interfaz instalada se muestra ahora en el árbol del proyecto, en la carpeta "Accesos
online".

36

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.6 Parametrización de la interfaz Ethernet

5.6

Parametrización de la interfaz Ethernet

5.6.1

Parametrizar la interfaz Industrial Ethernet

Posibilidades para parametrizar la interfaz Industrial Ethernet
Para parametrizar la interfaz Industrial Ethernet existen las siguientes posibilidades:
● Parámetros que predetermina el sistema operativo
La interfaz Industrial Ethernet dispone de parámetros que se ajustan en el sistema
operativo y que son válidos para todos los dispositivos conectados. Estos parámetros sólo
se visualizan, pero pueden modificarse en la configuración de red del sistema operativo.
● Parámetros ajustables en el software
Nota
Tenga en cuenta que los cambios efectuados en los parámetros de interfaz influyen
directamente en el sistema operativo y en la programadora o el PC. Por tanto, algunos
parámetros sólo pueden modificarse si se dispone de suficientes derechos de usuario.

Parámetros de la interfaz Industrial Ethernet
La tabla siguiente ofrece una vista general de los parámetros de la interfaz Industrial Ethernet
predeterminados por el sistema operativo y de los que el usuario puede modificar.
Parámetros no modificables

Parámetros ajustables

Dirección MAC

Fast Acknowledge en el acceso IE-PG y para TCP/
IP

Servidor DHCP activado/desactivado

Timeout en el acceso IE-PG y para TCP/IP

APIPA activado/desactivado

LLDP

Dirección IP

Direcciones IP temporales adicionales para la tar‐
jeta de red

Máscara de subred

-

Direcciones DNS

-

Direcciones DHCP

-

Consulte también
Principios básicos para parametrizar la interfaz PG/PC (Página 35)
Visualizar los parámetros del sistema operativo (Página 38)
Conectar la interfaz PG/PC con una subred (Página 38)
Parametrizar la interfaz Ethernet (Página 39)
Uso de direcciones IP temporales (Página 40)
Gestionar direcciones IP temporales (Página 40)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

37

Configurar interfaces PG/PC
5.6 Parametrización de la interfaz Ethernet

5.6.2

Visualizar los parámetros del sistema operativo
La interfaz Ethernet forma parte del sistema operativo. Por tanto, todos los parámetros de la
tarjeta de red pueden modificarse en la configuración de red del sistema operativo.
Es posible visualizar los siguientes parámetros en el software:
● Dirección física de la tarjeta de red
● Asignación de la dirección IP por un servidor DHCP activada o desactivada
● Asignación de una dirección IP privada por el sistema operativo activada o desactivada
● Dirección IP fija asignada actualmente
● Máscara de subred asignada
● Direcciones DNS
● Direcciones DHCP
Para obtener información sobre cómo modificar los parámetros, consulte la documentación del
sistema operativo o de la tarjeta de red.

Visualizar los parámetros actuales de la interfaz Ethernet
Para visualizar los parámetros actuales de la interfaz Ethernet, proceda del siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.
3. Elija "Configuraciones > Industrial Ethernet" en la navegación local.

Consulte también
Parametrizar la interfaz Ethernet (Página 39)

5.6.3

Conectar la interfaz PG/PC con una subred
Si ha creado varias subredes puede determinar con cuál de ellas debe conectarse la interfaz
Ethernet.

Procedimiento
Para seleccionar la subred con la que está conectada la interfaz Ethernet, proceda del
siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.

38

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.6 Parametrización de la interfaz Ethernet
3. En "General > Asignación", seleccione la subred con la que desea conectar la interfaz
Ethernet de la PG/del PC de la lista desplegable "Conexión con subred".
4. Cierre el diálogo con "Aceptar".

5.6.4

Parametrizar la interfaz Ethernet
Algunos de los parámetros relacionados con el protocolo de red pueden adaptarse
directamente en el software.

Requisitos
Dispone de derechos de usuario suficientes.
Consulte también: Influencia de los derechos de usuario.

Procedimiento
Para modificar los parámetros relacionados con el protocolo de red, proceda del siguiente
modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.
3. Seleccione "Configuraciones > Acceso IE-PG" para adaptar los ajustes de protocolo
relativos a la administración de red.
– Active la casilla de verificación "Fast Acknowledge" para alcanzar tiempos de reacción
más rápidos para paquetes de red pequeños.
– En la lista desplegable "Timeout", seleccione el tiempo máximo que puede transcurrir
hasta la detección de un nodo.
4. Para activar el protocolo LLDP para determinar con mayor precisión la topología de red,
active la casilla de verificación "LLDP activo" en "Configuraciones > LLDP".
5. Seleccione "Configuraciones > TCP/IP" para adaptar el protocolo TCP/IP para el tráfico de
la red durante el servicio.
– Active la casilla de verificación "Fast Acknowledge" para alcanzar tiempos de reacción
más rápidos para paquetes de red pequeños.
– En la lista desplegable "Timeout", seleccione el tiempo máximo que puede transcurrir en
la comunicación con un nodo hasta que se produzca un timeout.

Consulte también
Visualizar los parámetros del sistema operativo (Página 38)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

39

Configurar interfaces PG/PC
5.6 Parametrización de la interfaz Ethernet

5.6.5

Uso de direcciones IP temporales

Agregar una dirección IP temporal
Si la dirección IP de un dispositivo se encuentra en una subred diferente a la de la tarjeta de
red, primero es preciso asignar a esta última una dirección IP adicional con la misma dirección
de subred que la del dispositivo. Solo así se podrá establecer la comunicación entre el
dispositivo y la PG/el PC.
La asignación de una dirección IP temporal adicional se propone automáticamente si se desea
realizar una acción online y la dirección IP actual de la PG/del PC no se encuentra aún en la
subred correcta.
La dirección IP asignada temporalmente es válida hasta el siguiente rearranque de la PG/del
PC o hasta que se borre manualmente. Consulte también: Gestionar direcciones IP
temporales (Página 40)
Nota
Para poder asignar una dirección IP temporal es preciso disponer de derechos de usuario
suficientes.
Consulte también: Influencia de los derechos de usuario

5.6.6

Gestionar direcciones IP temporales
Si la dirección IP de un dispositivo se encuentra en una subred diferente a la de la dirección IP
fija asignada actualmente a la tarjeta de red, se asigna temporalmente a ésta última una
dirección IP adecuada de la misma subred que el dispositivo.
Todas las direcciones asignadas temporalmente se pueden visualizar y borrar. Tenga en
cuenta que las direcciones IP asignadas manualmente en el sistema operativo no se muestran
en el TIA Portal.

Requisitos
Para borrar se requieren derechos de usuario suficientes.

Procedimiento
Para visualizar y borrar direcciones asignadas temporalmente, proceda del siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.
3. Elija "Configuraciones > Acceso IE-PG".
Aparece una tabla con las direcciones IP asignadas.
4. Haga clic en el botón de comando "Borrar direcciones IP específicas del proyecto" para
borrar todas las direcciones IP de una sola vez.

40

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

5.6.7

Restablecimiento de la configuración TCP/IP
Si se han realizado cambios en los ajustes del protocolo TCP/IP, existe la posibilidad de
restablecer los valores predeterminados.

Procedimiento
Para restablecer los valores predeterminados de la configuración TCP/IP, proceda del
siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.
3. Elija "Configuraciones > TCP/IP".
4. Haga clic en el botón "Estándar" para restablecer todos los ajustes.

5.7

Parametrizar la interfaz MPI y PROFIBUS

5.7.1

Parametrizar la interfaz MPI y PROFIBUS

Posibilidades para parametrizar la interfaz MPI y PROFIBUS
Para parametrizar la interfaz MPI y PROFIBUS existen las posibilidades siguientes:
● Configuración automática: es posible detectar automáticamente si un dispositivo está
conectado con la interfaz PG/PC a través de PROFIBUS o MPI.
● Selección de una configuración predeterminada para PROFIBUS o MPI que puede
adaptarse posteriormente.

Posibilidades de parametrización para MPI y PROFIBUS en relación al dispositivo y la red
En las interfaces MPI y PROFIBUS pueden ajustarse parámetros relacionados con el
dispositivo y con la red. Los parámetros relacionados con el dispositivo son los ajustes locales
de la interfaz. En cambio, los parámetros relacionados con la red deben coincidir en todos los
dispositivos.

Parámetros modificables en la interfaz MPI
Es posible ajustar los siguientes parámetros predeterminados para la interfaz MPI:
Parámetros relacionados con el dispositivo

Parámetros relacionados con la red

Es el único maestro

Dirección más alta

Dirección propia

Velocidad de transferencia

Timeout

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

41

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

Parámetros modificables en la interfaz PROFIBUS
Es posible ajustar los siguientes parámetros predeterminados para la interfaz PROFIBUS:
Parámetros relacionados con el dispositivo

Parámetros relacionados con la red

Es el único maestro

Dirección más alta

Dirección propia

Velocidad de transferencia

Timeout

Perfil
Parámetros del bus
Número de maestros en el bus
Número de esclavos en el bus

Nota
Comportamiento en una subred asignada
Si asigna a la interfaz una subred de un proyecto, tendrán prioridad los ajustes de subred del
proyecto. En ese caso los ajustes para la interfaz correspondiente no podrán modificarse.

Consulte también
Principios básicos para parametrizar la interfaz PG/PC (Página 35)

5.7.2

Parametrizar la interfaz MPI o PROFIBUS automáticamente

Configurar la detección automática de los parámetros del bus
Si se selecciona una interfaz con detección automática de los parámetros del bus, p. ej.
CP5611 (Auto), es posible conectar la programadora o el PC a MPI o PROFIBUS sin tener que
ajustar los parámetros del bus. Sin embargo, si la velocidad de transferencia es inferior a 187,5
Kbits/s, los tiempos de espera pueden prolongarse hasta un minuto.

Requisitos
● El bus tiene conectados maestros que distribuyen los parámetros del bus cíclicamente.
● En redes PROFIBUS, la distribución cíclica de los parámetros del bus está activada.
● La interfaz no está asignada a ninguna subred. Si asigna una subred en las propiedades de
la interfaz, tendrán prioridad los ajustes de la subred del proyecto. En ese caso los ajustes
para la configuración automática de la interfaz no podrán modificarse.

42

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

Procedimiento
Para activar la detección automática de los parámetros del bus, proceda del siguiente modo:
1. Seleccione la interfaz en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.
3. En "General > Configuraciones > Configuración activa", seleccione el ajuste "Detección
automática de protocolo".
4. En "Configuraciones > Configuración automática > Configuración local", seleccione la
dirección de la interfaz PG/PC en la lista desplegable "Dirección propia".
5. Si, a continuación, desea visualizar la configuración actual del bus, haga clic en el botón
"Detección de red".

Consulte también
Parametrizar la interfaz MPI (Página 43)
Parametrizar la interfaz PROFIBUS (Página 45)

5.7.3

Parametrizar la interfaz MPI

Modificar los parámetros de la interfaz MPI
Para la interfaz MPI es posible ajustar parámetros de red y parámetros del bus. Primero
debería elegir un ajuste predeterminado y adaptarlo después en caso necesario.

Requisitos
La interfaz no está asignada a ninguna subred. Si asigna una subred en las propiedades de la
interfaz, tendrán prioridad los ajustes de la subred del proyecto. En este caso no es posible
modificar la configuración de la interfaz.

Parametrizar la interfaz MPI con ajustes predeterminados
Para ajustar los parámetros de la interfaz MPI, proceda del siguiente modo:
1. Seleccione la interfaz en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

43

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
3. En "General > Asignación", seleccione la subred con la que debe conectarse la interfaz en
la lista desplegable "Conexión con subred".
4. En "General > Configuraciones", seleccione un ajuste predeterminado para los parámetros
relacionados con el dispositivo y la red. Los ajustes predeterminados son adecuados para
la mayoría de configuraciones. Elija uno de los ajustes siguientes:
– Detección automática del protocolo
La PG puede conectarse al MPI o al PROFIBUS sin tener que ajustar los parámetros de
bus. Sin embargo, si la velocidad de transferencia es inferior a 187,5 Kbits/s, los tiempos
de espera pueden prolongarse hasta un minuto. La condición fundamental para la
detección automática es que haya maestros conectados al bus que distribuyan los
parámetros de bus de forma cíclica. En el caso de las subredes PROFIBUS, la
distribución cíclica de los parámetros del bus no puede estar desactivada (ajuste
predeterminado de red PROFIBUS).
– MPI
Se selecciona el protocolo de transferencia "MPI". Se ajustan parámetros estándar que
resultan adecuados para la mayoría de configuraciones. No obstante, los parámetros
pueden modificarse en caso necesario.
– PROFIBUS
Se selecciona el protocolo de transferencia "PROFIBUS". Se ajustan parámetros
estándar que resultan adecuados para la mayoría de configuraciones. No obstante, los
parámetros pueden modificarse en caso necesario.

Modificar los parámetros predeterminados
Para adaptar los ajustes predeterminados a sus necesidades, cambie los parámetros
correspondientes en "Configuraciones > MPI".
Es posible ajustar los siguientes parámetros relacionados con el dispositivo:
● Es el único maestro
Con ello se desactiva una función de seguridad adicional contra perturbaciones del bus al
acoplar la PG/el PC a la red, porque la PG/el PC es el único maestro del bus.
– Active esta opción sólo si únicamente se han conectado esclavos a la PG o al PC.
– Si la casilla de verificación "Es el único maestro" está activada, no es posible determinar
el dispositivo conectado directamente en la ventana "Dispositivos accesibles".
● Dirección propia
Este dato hace relación a la PG/al PC en la/el que se ha llamado la parametrización de la
interfaz. Ajuste aquí la dirección de dispositivo local de la PG/el PC.
– La dirección debe ser unívoca en la red.
– Es la dirección con la que se accede a la PG/el PC en la red MPI.

44

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
● Comprobar
Con esto se activa una función de seguridad adicional contra fallos de bus al acoplar la PG/
el PC a la red. El driver comprueba si la dirección propia ya está ocupada por otro nodo. En
este caso no sólo se tienen en cuenta los nodos activos, sino también los pasivos. El driver
escucha también en el PROFIBUS. En la verificación automática, el acoplamiento de la PG/
del PC a la red dura un poco más de tiempo. Para poder utilizar la función de verificación,
el driver debe soportar la función. Además, la opción "Es el único maestro" no puede estar
activada.
● Timeout
Aumente el valor del tiempo de vigilancia de conexión si p. ej. existen problemas debido a
tiempos de respuesta elevados en la red.
Es posible ajustar los siguientes parámetros de red:
● Dirección más alta:
Elija aquí la dirección de dispositivo más alta que se haya configurado. Asegúrese de que
en todos los dispositivos de una red MPI está ajustada la misma dirección de dispositivo
más alta.
● Velocidad de transferencia:
Elija aquí la velocidad de transferencia que debe utilizarse en la red MPI.

Consulte también
Parametrizar la interfaz MPI o PROFIBUS automáticamente (Página 42)

5.7.4

Parametrizar la interfaz PROFIBUS

Modificar los parámetros de la interfaz PROFIBUS
Para la interfaz PROFIBUS es posible ajustar con más precisión parámetros de red y
parámetros del bus. Primero debería elegir un ajuste predeterminado y adaptarlo después en
caso necesario.

Requisitos
La interfaz no está asignada a ninguna subred. Si asigna una subred en las propiedades de la
interfaz, tendrán prioridad los ajustes de la subred del proyecto. En este caso no es posible
modificar la configuración de la interfaz.

Parametrizar la interfaz PROFIBUS con ajustes predeterminados
Para ajustar los parámetros de la interfaz PROFIBUS, proceda del siguiente modo:
1. Seleccione la interfaz en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

45

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
3. En "General > Asignación", seleccione la subred con la que debe conectarse la interfaz en
la lista desplegable "Conexión con subred".
4. En "General > Configuración", seleccione un ajuste predeterminado para los parámetros
relacionados con el dispositivo y la red. Los ajustes predeterminados son adecuados para
la mayoría de configuraciones. Elija uno de los ajustes siguientes:
– Detección automática del protocolo
La PG puede conectarse al MPI o al PROFIBUS sin tener que ajustar los parámetros de
bus. Sin embargo, si la velocidad de transferencia es inferior a 187,5 Kbits/s, los tiempos
de espera pueden prolongarse hasta un minuto. La condición fundamental para la
detección automática es que haya maestros conectados al bus que distribuyan los
parámetros de bus de forma cíclica. En el caso de las subredes PROFIBUS, la
distribución cíclica de los parámetros del bus no puede estar desactivada (ajuste
predeterminado de red PROFIBUS).
– MPI
Se selecciona el protocolo de transferencia "MPI". Se ajustan parámetros estándar que
resultan adecuados para la mayoría de configuraciones. No obstante, los parámetros
pueden modificarse en caso necesario.
– PROFIBUS
Se selecciona el protocolo de transferencia "PROFIBUS". Se ajustan parámetros
estándar que resultan adecuados para la mayoría de configuraciones. No obstante, los
parámetros pueden modificarse en caso necesario.

Modificar los parámetros predeterminados
Para adaptar los ajustes predeterminados a sus necesidades, cambie los parámetros
correspondientes en "Configuraciones > PROFIBUS".
Es posible ajustar los siguientes parámetros relacionados con el dispositivo:
● Es el único maestro
Con ello se desactiva una función de seguridad adicional contra perturbaciones del bus al
acoplar la PG/el PC a la red, porque la PG/el PC es el único maestro del bus.
– Active esta opción sólo si únicamente se han conectado esclavos a la PG o al PC.
– Si la casilla de verificación "Es el único maestro" está activada, no es posible determinar
el dispositivo conectado directamente en la ventana "Dispositivos accesibles".
● Dirección propia
Este dato hace relación a la PG/al PC en la/el que se ha llamado la parametrización de la
interfaz. Ajuste aquí la dirección de dispositivo local de la PG/el PC.
– La dirección debe ser unívoca en la red.
– Es la dirección con la que se accede a la PG/el PC en la red PROFIBUS.

46

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
● Comprobar
Con esto se activa una función de seguridad adicional contra fallos de bus al acoplar la PG/
el PC a la red. El driver comprueba si la dirección propia ya está ocupada por otro nodo. En
este caso no sólo se tienen en cuenta los nodos activos, sino también los pasivos. El driver
escucha también en el PROFIBUS. En la verificación automática, el acoplamiento de la PG/
del PC a la red dura un poco más de tiempo. Para poder utilizar la función de verificación,
el driver debe soportar la función. Además, la opción "Es el único maestro" no puede estar
activada.
● Timeout
Aumente el valor del tiempo de vigilancia de conexión si p. ej. existen problemas debido a
tiempos de respuesta elevados en la red.
Es posible ajustar los siguientes parámetros de red:
● Dirección más alta:
Elija aquí la dirección de dispositivo más alta que se haya configurado. Asegúrese de que
en todos los dispositivos de una red PROFIBUS está ajustada la misma dirección de
dispositivo más alta.
● Velocidad de transferencia:
Elija aquí la velocidad de transferencia que debe utilizarse en la red PROFIBUS.
● Perfil:
Existen cuatro alternativas distintas para los ajustes del PROFIBUS. "DP", "Estándar" y
"Universal (DP/FMS)" son ajustes predeterminados que no pueden modificarse. La opción
"Personalizado" permite adaptar los parámetros del bus.
– Si ha seleccionado "Personalizado", vaya a "Configuraciones > PROFIBUS >
Parámetros del bus" en la navegación local.
– Si ha seleccionado uno de los ajustes predeterminados (DP, estándar o universal (DP/
FMS)), debería activar la casilla de verificación "Considerar" en "Configuraciones >
PROFIBUS > Parámetros del bus > Parámetros adicionales". Seguidamente, podrá
ajustar el número de maestros y esclavos en el bus. De este modo, los parámetros del
bus se calculan con más exactitud y es posible excluir posibles fallos del bus. La opción
no puede activarse en un perfil definido por el usuario.

Consulte también
Resumen de los parámetros del bus para PROFIBUS (Página 47)
Parametrizar la interfaz MPI o PROFIBUS automáticamente (Página 42)

5.7.5

Resumen de los parámetros del bus para PROFIBUS

Introducción
La subred PROFIBUS sólo funciona a la perfección si los parámetros del perfil de bus están
sintonizados entre sí. Por esta razón, los valores predeterminados sólo deberían modificarse
si se está familiarizado con la parametrización del perfil de bus para PROFIBUS.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

47

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
En función del perfil de bus, los parámetros podrán ajustarse o no. Siempre se visualizan los
valores offline de los parámetros del bus, incluso si están conectados online con el sistema de
destino.
Los parámetros mostrados son válidos para toda la subred PROFIBUS.

Significado de los diferentes parámetros
● Tslot: tiempo de espera a recepción (slot time)
El tiempo de espera a recepción (slot time) determina cuánto tiempo debe esperar como
máximo el emisor hasta recibir una respuesta del interlocutor direccionado.
● Max. Tsdr: tiempo máximo de procesamiento del protocolo (max. station delay responder).
El tiempo máximo de procesamiento del protocolo determina el tiempo máximo al cabo del
cual el dispositivo que responde debe haber procesado el protocolo.
● Min. Tsdr: tiempo mínimo de procesamiento del protocolo (min. station delay responder).
El tiempo mínimo de procesamiento del protocolo determina el tiempo mínimo que requiere
el dispositivo que responde para procesar el protocolo.
● Tset: tiempo de activación (setup time)
El tiempo de activación es el tiempo que puede transcurrir entre la recepción de un
telegrama de datos y la reacción correspondiente.
● Tqui: tiempo de desactivación del modulador (quiet time for modulator)
El tiempo de desactivación del modulador es el tiempo necesario para conmutar de Enviar
a Recibir.
● Factor GAP: factor de actualización GAP (factor GAP)
El factor de actualización GAP determina al cabo de cuántas rotaciones del testigo debe
incorporarse un nuevo dispositivo al anillo lógico.
● Retry Limit: número máximo de repeticiones de llamada (retry limit).
Con este parámetro se determina cuántos intentos pueden realizarse como máximo para
acceder a un nodo.
● Trdy: tiempo de disponibilidad (ready time)
El tiempo de disponibilidad es el tiempo de acuse o respuesta.
● Tid1: tiempo de estado de reposo 1 (idle time 1)
El tiempo de estado de reposo 1 determina el tiempo de retardo tras recibir una respuesta.
● Tid2: tiempo de estado de reposo 2 (idle time 2)
El tiempo de estado de reposo 2 determina el tiempo de retardo tras enviar una llamada sin
respuesta.

48

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
● Ttr: tiempo consignado de rotación del token (target rotation time)
El tiempo consignado de rotación del token es el tiempo máximo disponible para una
rotación del token. Durante ese tiempo, todos los dispositivos activos (maestros) reciben
una vez el testigo (token). La diferencia entre los tiempos de rotación teórico y real del
testigo determina cuánto tiempo restante tienen los maestros para enviar telegramas de
datos a los esclavos.
Seleccione como Target Rotation Time (Ttr) mínimo = 5000 multiplicado por HSA (Highest
Station Address).
● Supervisión de respuesta: tiempo de supervisión de respuesta (watchdog)
La supervisión de respuesta determina el tiempo que debe pasar para direccionar un
dispositivo.
Elija un tiempo mínimo de supervisión de respuesta = 6250 multiplicado por HSA.
Nota
Si desea crear un perfil de bus personalizado, tenga en cuenta que el tiempo mínimo
consignado de rotación del testigo (Ttr) debe ser 5000 multiplicado por HSA (dirección
PROFIBUS más alta). Además, la supervisión de respuesta mínima (watchdog) debe ser 6250
multiplicado por HSA.

Consulte también
Parametrizar la interfaz PROFIBUS (Página 45)

5.7.6

Restablecer la configuración MPI o PROFIBUS
Si se han realizado cambios en los ajustes del protocolo MPI o PROFIBUS, existe la posibilidad
de restablecer los valores predeterminados.

Requisitos
La interfaz no está asignada a ninguna subred. Si asigna una subred en las propiedades de la
interfaz, tendrán prioridad los ajustes de la subred del proyecto. En este caso no podrán
restablecerse los valores estándar de la configuración de la interfaz.

Procedimiento
Para restablecer los valores predeterminados de la configuración MPI o PROFIBUS, proceda
del siguiente modo:
1. Seleccione la interfaz MPI/PROFIBUS en "Accesos online" en el árbol del proyecto.
2. Elija el comando "Propiedades" del menú contextual de la interfaz.
Se abre el diálogo de configuración de la interfaz.
3. Elija "Configuraciones > MPI" o "Configuraciones > PROFIBUS" en función de las
propiedades de interfaz que desee restablecer.
4. Haga clic en el botón "Estándar" para restablecer todos los ajustes.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

49

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

50

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico

6

Prólogo

Finalidad de la documentación
En la presente documentación se describen las posibilidades de diagnóstico con la función
Trace y de analizador lógico. Las posibilidades de registro pueden variar en función del
dispositivo utilizado.

Conocimientos básicos necesarios
Para una mejor comprensión de la presente documentación se precisan los siguientes
conocimientos:
● Conocimientos generales de automatización
● Conocimientos sobre la utilización de equipos Windows
● S7-1200/1500 CPUs, ET 200SP, ET 200Pro
– Conocimientos del sistema de automatización industrial SIMATIC
– Conocimientos del manejo de STEP 7
● Accionamientos SINAMICS
– Conocimientos en el manejo del accionamiento
● SIRIUS SIMOCODE pro, SIRIUS arrancador suave 3RW
– Conocimientos sobre el uso de estos sistemas

Ámbito de validez de la documentación
Esta documentación es válida para todos los productos de las familias S7-1200, S7-1500,
S7-1500 Software Controller, S7-1500 Drive Controller, ET 200SP, ET 200SP Open Controller,
CPU 1513(F)pro-2 PN, CPU 1516(F)pro-2 PN, accionamientos SINAMICS,
SIRIUS SIMOCODE pro y arrancadores suaves SIRIUS 3RW a partir de TIA Portal V16.

Convenciones
La presente documentación contiene ilustraciones de los dispositivos descritos. Las
ilustraciones pueden diferir del dispositivo suministrado en algunos detalles.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

51

Uso de la función Trace y de analizador lógico
Prólogo
Preste atención también a las notas marcadas del modo siguiente:
Nota
Una nota contiene datos importantes acerca del producto descrito en la documentación, el
manejo de dicho producto o la parte de la documentación a la que debe prestarse especial
atención.

"mySupport"
Con "mySupport", su área de trabajo personal, podrá sacar el máximo partido al Industry
Online Support.
En "mySupport" se pueden guardar filtros, favoritos y etiquetas, solicitar datos CAx y elaborar
una librería personal en el área Documentación. Asimismo, en las consultas de soporte que
realice ya estarán cumplimentados con sus datos, y en todo momento podrá ver una relación
de las solicitudes presentes.
Para usar todas las funciones de "mySupport" es necesario registrarse una sola vez.
Encontrará "mySupport" en Internet (https://support.industry.siemens.com/My/ww/es/).

"mySupport" - Documentación
En "mySupport", bajo "Documentación", se pueden combinar manuales completos o partes de
ellos para elaborar un manual personalizado.
Este manual se puede exportar como archivo PDF o a un formato editable.
Encontrará "mySupport" - "Documentación" en Internet (http://
support.industry.siemens.com/My/ww/es/documentation).

Soporte adicional
● La oferta de documentación técnica de los distintos productos y sistemas de
automatización SIMATIC se encuentra en Internet (http://www.siemens.com/simatic-techdoku-portal).
● Encontrará el catálogo online y el sistema de pedidos online en Internet (https://
mall.industry.siemens.com).

Información de seguridad
Siemens ofrece productos y soluciones con funciones de seguridad industrial con el objetivo
de hacer más seguro el funcionamiento de instalaciones, sistemas, máquinas y redes.
Para proteger las instalaciones, los sistemas, las máquinas y las redes de amenazas
cibernéticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral conforme al estado del arte. Los productos y las soluciones de Siemens
constituyen una parte de este concepto.
Los clientes son responsables de impedir el acceso no autorizado a sus instalaciones,
sistemas, máquinas y redes. Dichos sistemas, máquinas y componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y

52

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.1 Descripción
siempre que se hayan tomado las medidas de protección adecuadas (p. ej. cortafuegos y
segmentación de la red).
Para obtener información adicional sobre las medidas de seguridad industrial que podrían ser
implementadas, por favor visite (https://www.siemens.com/industrialsecurity).
Los productos y las soluciones de Siemens están sometidos a un desarrollo constante con el
fin de hacerlos más seguros. Siemens recomienda expresamente realizar actualizaciones en
cuanto estén disponibles y utilizar únicamente las últimas versiones de los productos. El uso
de versiones de los productos anteriores o que ya no sean soportadas y la falta de aplicación
de las nuevas actualizaciones, puede aumentar el riesgo de amenazas cibernéticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en (https://www.siemens.com/
industrialsecurity).

6.1

Descripción

6.1.1

Hardware admitido
Si un dispositivo soporta la función Trace y de analizador lógico, el árbol del proyecto ofrece la
selección de "Traces" en el dispositivo .
Los dispositivos (Página 120) siguientes admiten la función Trace y de analizador lógico:
● CPU SIMATIC S7-1200 (a partir del firmware de la versión V4.0)
● CPU SIMATIC S7-1500, ET 200SP, CPU 1513pro-2 PN y CPU 1516pro-2 PN
● Controladores por software SIMATIC S7-1500
● ET 200SP Open Controller
● Accionamientos SINAMICS compatibles con Startdrive
● SINAMICS V90 (con HSP 0185)
● SIRIUS SIMOCODE pro (con Simocode ES)
● Arrancador suave SIRIUS 3RW (con Soft Starter ES)

6.1.2

Registro de medidas con la función Trace

Introducción
A la función de Trace y de analizador lógico se accede desde el árbol del proyecto
(Página 59), haciendo doble clic en una entrada de la carpeta de sistema "Traces". Además,
la interfaz de diagnóstico del servidor Web permite leer y visualizar las mediciones guardadas
en la tarjeta de memoria.
La función Trace y de analizador lógico permite registrar las variables de un dispositivo y
evaluar los registros efectuados. Las variables son, p. ej., parámetros de accionamiento o

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

53

Uso de la función Trace y de analizador lógico
6.1 Descripción
variables de sistema y de usuario de una CPU. El número de traces del dispositivo varía en
función del hardware. Con el Trace del proyecto puede registrar variables de varios
dispositivos.
Los registros se guardan en el dispositivo, pueden leerse con el sistema de configuración (ES)
en caso necesario y guardarse de forma permanente. De tal forma, la función Trace y de
analizador lógico es adecuada para visualizar procesos altamente dinámicos. Los valores
registrados se sobrescriben al volver a activarse el registro.
Las funciones Trace y de analizador lógico también se utilizan en los editores de puesta en
marcha de objetos tecnológicos (p. ej., panel de mando del eje). Los registros activos del panel
de mando del eje se muestran como Traces del dispositivo en la carpeta de sistema "Traces".
En el diagrama de curvas del panel de mando del eje o del PID pueden agregarse registros a
las mediciones mediante un comando del menú contextual.
Las posibilidades de registro pueden variar en función del dispositivo (Página 120) utilizado.
En el capítulo Manejo encontrará una guía de inicio rápido (Página 95) para trabajar con la
función Trace y de analizador lógico.
La figura siguiente muestra el funcionamiento de Trace:










&RQILJXUDFLµQGH
7UDFH

7UDQVIHULU
FRQILJXUDFLµQGH
7UDFH

(VSHUDUFRQGLFLµQ
GHGLVSDUR\
UHJLVWUDUGDWRV

7UDQVIHULUPHGLFLµQ
DODSURJUDPDGRUD

9HUDGPLQLVWUDU\
JXDUGDUPHGLFLµQ

① Configuración de Trace con la programadora (PG) en el TIA Portal
En la configuración del Trace se especifican las señales que deben registrarse, la duración del
registro y la condición de disparo. La configuración del Trace depende del dispositivo y se
describe en el correspondiente dispositivo (Página 120).

② Transferir la configuración de Trace de la programadora (PG) al dispositivo
Si existe una conexión online, se efectúa una transferencia de la configuración de Trace
(Página 107) completa al dispositivo.

③ Esperar registro
Si la configuración del Trace está activada (Página 107) en el dispositivo, el registro se realiza
independientemente de la programadora. Cuando se cumple la condición de disparo, se inicia
el registro.

54

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.1 Descripción

④ Transferencia de la medición del dispositivo a la programadora (PG)
El almacenamiento de la medición en el proyecto (Página 109) guarda la medición en el
proyecto abierto del TIA Portal. El almacenamiento de la medición es independiente del
momento de la medición y puede tener lugar en cualquier momento tras concluir el registro.

⑤ Evaluación, administración y almacenamiento de la medición
Para evaluar la medición, hay disponibles numerosas opciones en el diagrama de curvas y en
la tabla de señales (Página 108). Existen diferentes formatos de representación: p. ej.,
representación en bits para señales binarias.
Las evoluciones de señales de diferentes mediciones pueden agruparse en mediciones
superpuestas y compararse entre sí.
También es posible exportar e importar mediciones como archivo.
Con el almacenamiento del proyecto (Página 109) en el TIA Portal, también se guardan las
mediciones transferidas al proyecto.

6.1.3

Configuración de Trace, registro, Trace en dispositivo y medición
En este capítulo se explica el significado y las interrelaciones de los términos "configuración de
Trace", "registro" y "medición".

Configuración de Trace
En la configuración de Trace

deben realizarse los ajustes siguientes:

● Señales que deben registrarse con opciones de representación
● Condiciones de registro
– muestreo
– disparo
– mediciones en el dispositivo (tarjeta de memoria)
Las configuraciones de Trace pueden copiarse en la carpeta "Traces" mediante Drag & Drop
o con el portapapeles. La aplicación de una configuración depende del tipo de dispositivo.
Pueden utilizarse las siguientes fuentes:
● Configuración de Trace
● Medición
● Mediciones en el dispositivo (tarjeta de memoria)
● Medición superpuesta (selección de una medición incluida)

Registro
El registro tiene lugar en el dispositivo. Solo existe un registro para cada configuración de
Trace del dispositivo. Si se reinicia un registro, el registro antiguo se sobrescribe.
Los registros en el dispositivo no son remanentes (se pierden tras conectar/desconectar el
dispositivo), pero pueden guardarse permanentemente, como medición, en el proyecto.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

55

Uso de la función Trace y de analizador lógico
6.1 Descripción

Trace en dispositivo
Un Trace en el dispositivo se compone de una configuración de Trace y, opcionalmente, de
un registro. El número máximo de Traces en el dispositivo depende del dispositivo.
La configuración de Trace se guarda de manera remanente en el dispositivo. En función del
dispositivo, puede configurarse también el almacenamiento remanente de la configuración de
Trace, p. ej., en el S120.

Medición
Una medición
se compone de una configuración de Trace y de un registro, siempre que
haya datos registrados. Todo Trace en dispositivo puede guardarse en el proyecto como
medición.
El registro de una medición puede observarse offline.

Mediciones en el dispositivo (tarjeta de memoria)
En la carpeta "Mediciones en el dispositivo (tarjeta de memoria)" se guardan las mediciones
almacenadas en el dispositivo (p. ej., en la tarjeta de memoria). Estas mediciones son
remanentes y solo puede eliminarlas el usuario.
Las mediciones almacenadas en el dispositivo pueden enviarse a la carpeta "Mediciones"
mediante Drag & Drop, y de ese modo guardarse como mediciones en el proyecto.

Configuración de Trace con un Trace en dispositivo con el mismo nombre
Normalmente, para cada Trace en dispositivo existe en el proyecto una configuración de Trace
con el mismo nombre. Si existe una conexión online, este Trace se muestra en el árbol del
proyecto con el símbolo .
Ver también Interfaz: Árbol del proyecto, carpeta "Traces" (Página 61).

Medición superpuesta
La medición superpuesta

permite comparar y analizar señales de distintas mediciones.

Las mediciones pueden sincronizarse entre sí y visualizarse de manera superpuesta.

6.1.4

Almacenamiento de datos
La barra de herramientas de Trace y el diagrama de curvas permiten, entre otras cosas,
transferir la configuración de Trace y observar el registro.
La figura siguiente muestra esquemáticamente el almacenamiento de datos:

56

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.1 Descripción
'LDJUDPDGHFXUYDV

&RQILJXUDFLµQ7UDFH

7UDFHVHQGLVSRVLWLYR

0HGLFLµQ

,PSRUWD
FLµQ

([SRUWDFLµQ
&RQILJXUDFLµQ
,PSRUWDFLµQ

([SRUWD
FLµQ
3UR\HFWR

5HJLVWUR

3UR\HFWR

Nota
Almacenamiento de configuración de Trace y medición
La configuración de Trace y la medición se guardan con el proyecto en el TIA Portal.
Si cierra el proyecto sin guardar, la configuración de Trace y las mediciones transmitidas al
proyecto quedan descartadas. El editor Trace puede cerrarse y volver a abrirse sin pérdida de
datos hasta el cierre del proyecto.

6.1.5

Trace del proyecto

6.1.5.1

General
Un Trace del proyecto contiene configuraciones Trace de varios dispositivos y registra las
señales de todos ellos.
Cada dispositivo puede disparar, mediante su propio disparador, el registro en todos los
dispositivos participantes. Tras recibir la señal de disparo global, los dispositivos que tienen
una configuración Trace del proyecto válida comienzan el registro.
En los distintos dispositivos (Página 120) se indica si el dispositivo soporta el Trace del
proyecto.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

57

Uso de la función Trace y de analizador lógico
6.1 Descripción

Requisitos
Deben cumplirse los siguientes requisitos para el registro con Trace del proyecto:
● Comunicación PROFINET RT o IRT
● Todos los dispositivos se encuentran en una subred PROFINET (sin routing)
● Hay una conexión online desde el TIA Portal hasta todos los dispositivos para transferir el
Trace del proyecto a los dispositivos
● El modo de disparo "Registrar inmediatamente" puede estar configurado como máximo en
un dispositivo.
● Debe haber un disparador configurado en al menos un dispositivo.

6.1.5.2

Sincronización horaria
La precisión de la sincronización horaria depende de cómo se determine el momento de
registro. La comunicación isócrona ofrece la máxima precisión, ya que se utiliza el ciclo IRT.
En todos los demás casos se utiliza la hora del controlador.
Un Trace del proyecto puede contener dispositivos con comunicación RT e IRT.
Para la representación síncrona de las señales, el eje X debe estar ajustado en modo "Tiempo
(relativo)". En esta representación, las mediciones se organizan temporalmente de modo que
sus eventos de disparo se encuentren en el instante 0 ms.
Para facilitar la evaluación con tiempo absoluto, sincronice las horas de los dispositivos.
Encontrará información sobre el momento de registro en las descripciones específicas de los
dispositivos; por ejemplo, para la CPU S7-1200/1500 (Página 120) en "Niveles de registro".

Instante del disparo en la comunicación RT
Los dispositivos que reciben el disparo de otro dispositivo tienen un evento de disparo con
offset de tiempo. En la comunicación RT, el instante de un evento de disparo se deriva del
tiempo de transmisión y del momento de registro. El evento de disparo no se detecta hasta que
finaliza el OB registrador, y dicho momento se emplea como instante del disparo. En la
comunicación RT, no es posible determinar el offset de tiempo entre el instante del disparo
original y la evaluación en el OB. Por este motivo, las evoluciones de señales de los
dispositivos que reciben el disparo de otro dispositivo aparecen antepuestas en el tiempo. El
valor temporal de estas señales puede corregirse manualmente con un offset después de
guardar las mediciones.

58

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Ejemplo de registro con Trace del proyecto
La siguiente figura muestra un registro con Trace del proyecto y la corrección de la
representación con un offset.
'LVSDUR

&38
'LVSDUR
&38

&38

6H³DO

7LHPSRGHWUDQVPLVLµQ

W

W

352),1(7

W

W

&LFORGHUHJLVWUR

&LFOR2%

W

6H³DO
W

WW
,QVWDQWHGHOGLVSDUR
&38

,QVWDQWHGHOGLVSDUR
&38

5HSUHVHQWDFLµQHQHO7UDFHGHOSUR\HFWR

&38
W

&38
W
&RQRIIVHWPDQXDO

2IIVHW

&38
W

6.2

Interfaz de software de Trace
La interfaz de usuario de la función Trace y de analizador lógico se divide en varias áreas. Aquí
se describe la distribución de la interfaz en el TIA Portal.
La figura siguiente muestra un ejemplo de distribución de la interfaz:

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

59

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

1


2
3
4

5

7

Árbol del proyecto
Gestionar y crear Traces y mediciones directamente en el árbol del proyecto y mediante comandos del
menú contextual.
Área de trabajo

60

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

① Barra de título del área de trabajo
Muestra a qué dispositivo corresponde la representación actual.

② Barra de herramientas de Trace

Botones para administrar los Traces en el proyecto y el dispositivo:
● Activar/desactivar Traces del dispositivo
● Borrar Traces del dispositivo
● Transferir configuraciones de Trace y mediciones entre el dispositivo y el proyecto
● Exportar configuraciones de Trace y mediciones
● Alternar la visualización offline y online

③ Visualización de estado del Trace

Visualización del estado actual del registro.

④ Ficha Configuración

Configuración específica del dispositivo acerca de la duración del registro, la condición de disparo
y la selección de señal.
Configuración de los dispositivos en el Trace del proyecto.
Ver descripciones específicas de dispositivo (Página 120).

⑤ Ficha Diagrama

Visualización de los valores registrados en forma de diagrama de curvas y de las señales de la
medición visualizada.
Definición de las opciones de representación.
Ficha Selección de señal
Muestra todas las señales contenidas en las mediciones superpuestas.
Task Card "Trace"

Muestra los datos de los cursores de medición con evaluación matemática ⑥ y las instantáneas.

⑦ Ventana de inspección

Información general acerca de la configuración de Trace.

6.2.1

Árbol del proyecto

6.2.1.1

Interfaz: Árbol del proyecto, carpeta "Traces"
En la carpeta
dispositivo.

"Traces" se muestran las configuraciones de Trace y los Traces del

Las subcarpetas de "Traces" se describen en detalle en los capítulos siguientes.
Al hacer doble clic en un Trace, se abre la correspondiente ficha "Configuración" o "Diagrama"
en el área de trabajo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

61

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Símbolos de la carpeta "Traces"
En la siguiente tabla se explica el significado de los símbolos de la carpeta
Símbolo

"Traces":

Descripción
Agregar configuración de Trace
Al hacer doble clic en este símbolo se agrega una nueva configuración de Trace.
Configuración de Trace (offline)
Al hacer doble clic en este símbolo se abre la ficha "Configuración".
Trace en el dispositivo (online)
Este símbolo solo se muestra si no existe ninguna configuración de Trace offline con el
mismo nombre que el Trace del dispositivo.
Al hacer doble clic en este símbolo se abre la ficha "Diagrama".
Configuración con un Trace del dispositivo que tenga el mismo nombre
Si está desactivado el botón
, se muestra la configuración de Trace correspondiente al
proyecto. El Trace corresponde a una configuración de Trace.
Si está activado el botón
, se muestra la configuración de Trace correspondiente al
dispositivo. El Trace corresponde a un Trace del dispositivo.
Al hacer doble clic en este símbolo, se abre la ficha "Diagrama" del Trace del dispositivo.

Estado
Si existe una conexión online, el estado se muestra en la columna derecha del árbol del
proyecto. El estado se muestra también como tooltip encima del símbolo correspondiente.
La tabla siguiente explica el significado de los distintos símbolos:
Símbolo

Descripción
Las configuraciones online y offline son idénticas
Las configuraciones online y offline son distintas
La configuración solo existe online

Comandos del menú contextual
En la siguiente tabla se muestran los comandos de menú contextual para la carpeta de
sistema
"Traces":

62

Comando del me‐
nú contextual

Descripción

"Agregar grupo"

Inserta una carpeta nueva.

"Agregar nuevo
Trace"

Agrega una nueva configuración de Trace y abre la ficha Configuración.

"Importar configu‐
ración de Trace"

Importa una configuración de Trace desde un archivo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
La siguiente tabla muestra los comandos de menú contextual para configuración de Trace
Traces en dispositivo
/ :
Comando del menú
contextual

y

Configura‐ Trace en Descripción
ción de Tra‐ el disposi‐
ce
tivo

"Copiar"

x

-

Copia la configuración del Trace o el Trace del dis‐
positivo al portapapeles.

"Insertar"

x

-

Inserta una configuración de Trace o medición des‐
de el portapapeles.

"Borrar"

x

x

Borra los objetos seleccionados del árbol del pro‐
yecto o del dispositivo.

"Cambiar nombre"

x

-

Pasa el objeto seleccionado al modo de edición.

"Exportar configura‐
ción de Trace"

x

-

Exporta una configuración de Trace como archivo
con la extensión "*.ttcfgx" o un Trace del dispositivo
con la extensión "*.ttrecx".
Las extensiones de archivo "*.ttcfg" y "*.ttrec" están
permitidas por motivos de compatibilidad con TIA
Portal V12, pero no contienen información sobre la
familia de dispositivos.

También es posible copiar la configuración de Trace entre los dispositivos de una misma
familia.

6.2.1.2

Interfaz - Árbol del proyecto, carpeta "Mediciones"
En la carpeta

"Mediciones" se muestran las mediciones guardadas.

Símbolos de la carpeta "Mediciones"
En la siguiente tabla se explica el significado de los símbolos de la carpeta
Símbolo

"Mediciones":

Descripción
Medición (offline)
Al hacer doble clic en este símbolo se abre la ficha "Diagrama".
La configuración de una medición puede enviarse a la carpeta "Traces" mediante arrastrar
y soltar.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

63

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Comandos del menú contextual
En la siguiente tabla se muestran los comandos de menú contextual para la carpeta de
sistema
"Mediciones":
Comando del me‐
nú contextual

Descripción

"Agregar grupo"

Inserta una carpeta nueva.

"Importar medi‐
ción"

Importa una medición desde un archivo con la extensión "*.ttrecx".
La importación es independiente del dispositivo.
La extensión de archivo "*.ttrec" está soportada por motivos de compatibilidad con
V12, pero no contiene información sobre la familia de dispositivos.

En la siguiente tabla se muestran los comandos de menú contextual para mediciones

:

Comando del me‐
nú contextual

Descripción

"Copiar"

Copia la configuración de Trace de los objetos seleccionados al portapapeles.

"Pegar"

Inserta una medición desde el portapapeles.

"Borrar"

Borra los objetos seleccionados del árbol del proyecto o del dispositivo.

"Cambiar nombre"

Pasa el objeto seleccionado al modo de edición.

"Crear nueva medi‐ Crea una medición superpuesta a partir de las mediciones seleccionadas.
ción superpuesta"
"Exportar medi‐
ción"

Exporta una medición con la última vista normal almacenada
La medición se guarda con la extensión de archivo "*.ttrecx" o "*.csv". La exten‐
sión de archivo "*.ttrec" está soportada por motivos de compatibilidad con V12,
pero no contiene información sobre la familia de dispositivos.

También es posible copiar mediciones entre dispositivos independientemente de la familia.

6.2.1.3

Interfaz - Árbol del proyecto, carpeta "Mediciones en el dispositivo (tarjeta de memoria)"
"Mediciones en el dispositivo (tarjeta de memoria)" se muestran las
En la carpeta
mediciones existentes en la tarjeta de memoria. La carpeta solo se muestra si existe conexión
online con el dispositivo.
Desplace las carpetas o mediciones contenidas en ella a la carpeta del sistema "Mediciones"
mediante Drag & Drop. Al hacerlo se transfieren las mediciones al proyecto.
Nota
Incorporación de numerosas mediciones Trace de gran tamaño desde el dispositivo (tarjeta de
memoria)
Cuando se aplican mediciones Trace del dispositivo en el proyecto se incrementa la memoria
requerida.
Evite copiar un gran número de mediciones con grandes volúmenes de datos al mismo tiempo,
pues esto consume mucha memoria de trabajo y puede provocar tiempos de copia largos.

64

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Símbolos de la carpeta "Traces"
En la siguiente tabla se explica el significado de los símbolos de la carpeta del sistema
Símbo‐
lo

:

Descripción
Carpeta generada automáticamente con indicación del momento de activación del registro
El nombre de la carpeta no se puede modificar.
Medición en el dispositivo
Al hacer doble clic en este símbolo se abre la ficha "Diagrama".
La marca de tiempo del nombre indica el momento de aparición del evento de disparo.

Comandos del menú contextual
En la siguiente tabla se muestran los comandos de menú contextual para la carpeta de
grupo :
Comando del me‐
nú contextual

Descripción

"Copiar"

Copia los objetos seleccionados al portapapeles.

"Borrar"

Borra los objetos seleccionados del árbol del proyecto y del dispositivo.

En la siguiente tabla se muestran los comandos de menú contextual para mediciones

6.2.1.4

Comando del me‐
nú contextual

Descripción

"Abrir"

Abre la medición en la ficha "Diagrama".

"Copiar"

Copia los objetos seleccionados al portapapeles.

"Borrar"

Borra los objetos seleccionados del árbol del proyecto y del dispositivo.

"Exportar medi‐
ción"

Exporta una medición como archivo con la extensión "*.ttrecx" o "*.csv".

"Propiedades"

Muestra las propiedades generales de la medición (Página 84).

:

La extensión de archivo "*.ttrec" está soportada por motivos de compatibilidad con
V12, pero no contiene información sobre la familia de dispositivos.

Interfaz - Árbol del proyecto, carpeta "Mediciones superpuestas"
En la carpeta del sistema
"Mediciones superpuestas" se muestran las mediciones
superpuestas configuradas.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

65

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Símbolos de la carpeta "Mediciones superpuestas"
En la siguiente tabla se explica el significado de los símbolos de la carpeta del sistema
"Mediciones superpuestas":
Símbolo

Descripción
Agregar nueva medición superpuesta
Al hacer doble clic en este símbolo se agrega una nueva medición superpuesta y se abre
la ficha "Diagrama".
Medición superpuesta
Al hacer doble clic en este símbolo se abre la ficha "Diagrama".

Comandos del menú contextual
En la siguiente tabla se muestran los comandos de menú contextual para la carpeta de
sistema
"Mediciones superpuestas" o una carpeta de grupo
contenida en ella:
Comando del me‐
nú contextual

Descripción

"Agregar grupo"

Inserta una carpeta nueva.

"Agregar nueva
medición super‐
puesta"

Agrega una nueva medición superpuesta y abre la ficha "Diagrama".

"Importar medición
superpuesta"

Importa una medición superpuesta de un archivo con la extensión "*.ttcbmx".

En la siguiente tabla se muestran los comandos de menú contextual para mediciones
superpuestas :
Comando del menú contex‐
tual

Descripción

"Abrir"

Abre en el área de trabajo las mediciones superpuestas seleccionadas.

"Importar medición"

Importa una medición de un archivo con la extensión "*.ttrecx".
La extensión "*.ttrec" está permitida por motivos de compatibilidad con
V12, pero no contiene información sobre la familia de dispositivos.

"Exportar medición super‐
puesta"

Exporta una medición superpuesta.

"Copiar"

Copia los objetos seleccionados al portapapeles.

"Pegar"

Inserta mediciones, mediciones de Traces del dispositivo o de una me‐
dición superpuesta desde el portapapeles.

La medición superpuesta se guarda con la extensión "*.ttcbmx" o
"*.csv". El formato "*.ttcbmx" se puede reimportar.

Es posible insertar varios objetos desde el portapapeles si todos son
del mismo tipo.
"Borrar"

Borra los objetos seleccionados del árbol del proyecto o del dispositivo.

"Cambiar nombre"

Pasa el objeto seleccionado al modo de edición.

"Propiedades"

Se visualizan las propiedades generales de la medición superpuesta.

También es posible copiar mediciones superpuestas entre los dispositivos.

66

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

6.2.2

Área de trabajo

6.2.2.1

Interfaz Barra de herramientas de Trace
Existen botones que permiten acceder a herramientas para el manejo de los Traces.
La tabla siguiente muestra las funciones de los botones:
Símbolo

Descripción
Transferir la configuración de Trace seleccionada al dispositivo.
La configuración de Trace seleccionada se transfiere al dispositivo.
Transferencia de la configuración de Trace seleccionada desde el dispositivo
La configuración de Trace seleccionada se transfiere del dispositivo al proyecto
con las opciones de representación actuales.
Activar/desactivar visualización
Cambiar la visualización de online a offline y viceversa.
Nota
Si están activados simultáneamente la observación y el escalado automático, no
es posible anular más acciones con el botón "Deshacer".
Nota
Al iniciar por primera vez un trace del dispositivo, se ajusta el escalado automático
para su visualización en el diagrama de curvas. Tenga en cuenta que al volver a
iniciar el registro se mantendrán las modificaciones de los ajustes del escalado.
Para observar el registro, active de nuevo manualmente el escalado automático
si es necesario.
Activación de registro
Si se repite el registro de un Trace en el dispositivo, se conservan también para
el nuevo registro los ajustes relevantes para la visualización (diagrama de curvas
y tabla de señales).
Nota
Si se reinicia un registro, los valores registrados hasta el momento se pierden.
Para realizar una copia de seguridad de los valores registrados, guarde la medi‐
ción en el proyecto (Página 109) antes de volver a activar el registro.
Desactivación de registro
Borrado de Trace del dispositivo
Borra el Trace seleccionado del dispositivo.
Repetir automáticamente el registro
Una vez finalizado un registro, este se vuelve a activar automáticamente. La
visualización del diagrama de curvas se actualiza al finalizar el registro.
Este tipo de actualización es especialmente adecuado para la Observación de
señales rápidas (Página 117).
Transferir la medición seleccionada del dispositivo al proyecto
La medición se agrega a la carpeta

"Mediciones".

Nota
Solo se guardan los datos que se han cargado desde el dispositivo. Estos datos
se muestran en un diagrama de curvas. Es posible que deba esperar hasta que
se actualice la visualización.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

67

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Símbolo

Descripción
Exportar configuración de Trace
Exporta una configuración de Trace como archivo con la extensión "*.ttcfgx". La
extensión "*.ttcfg" está permitida por motivos de compatibilidad con V12, pero no
contiene información sobre la familia de dispositivos.
Crear configuración Trace
Crea una configuración de Trace a partir de la medición.
Exportar medición con los ajustes de la vista actual
Exporta una medición como archivo con la extensión "*.ttrecx" o "*.csv". La ex‐
tensión "*.ttrec" está permitida por motivos de compatibilidad con V12, pero no
contiene información sobre la familia de dispositivos.
Importar medición (solo para mediciones superpuestas)
Importa una medición de un archivo con la extensión "*.ttrecx".
La extensión "*.ttrec" está permitida por motivos de compatibilidad con V12, pero
no contiene información sobre la familia de dispositivos.
Exportar medición superpuesta (solo para mediciones superpuestas)
La medición superpuesta se guarda con la extensión "*.ttcbmx" o "*.csv". El for‐
mato "*.ttcbmx" se puede reimportar.
Seleccionar medición (solo para mediciones superpuestas)
La lista desplegable contiene las mediciones importadas. Seleccione la medición
deseada para visualizar la configuración.

6.2.2.2

Interfaz - Ficha Configuración

Interfaz - Configuración
La configuración de Trace depende del dispositivo y se describe en el
correspondiente dispositivo (Página 120).

6.2.2.3

Interfaz Ficha Diagrama

Interfaz Diagrama de curvas
El diagrama de curvas muestra las señales seleccionadas de un registro. Las señales
analógicas se representan en el diagrama de curvas superior. Las señales binarias se
visualizan como traza de bits en el diagrama inferior. La representación de las señales se
puede adaptar en la tabla de señales (Página 74) y con ayuda de la barra de herramientas del
diagrama de curvas.
En el Trace del proyecto, el diagrama de curvas muestra un registro finalizado o interrumpido.
Puede consultar los distintos registros debajo de cada dispositivo.

68

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones en el diagrama de curvas
La figura siguiente muestra un ejemplo de representación:

La escala del diagrama es válida para la señal seleccionada (sobre fondo gris) en la leyenda.
La leyenda puede desplazarse y cambiarse de tamaño con el ratón.
El símbolo muestra con una línea vertical el instante del disparo con el tiempo de disparo del
dispositivo.
Con el ajuste "Tiempo (relativo)" para el eje de tiempo, debajo del diagrama de curvas se
ofrece una lista desplegable para seleccionar la unidad. El ajuste "Automático" adapta la
unidad al rango de tiempo representado.
Nota
Tipos de datos no interpretables
Algunos tipos de datos necesitan un formato definido, p. ej., el tipo de datos
S7 LTime_of_Day. Si no existe este formato, el tipo de datos se interpreta como INT.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

69

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Funciones con la rueda del ratón
La tabla siguiente muestra las funciones que pueden utilizarse con la rueda del ratón en el
diagrama de curvas:
Funciones de la rueda del ratón

Descripción

Desplazamiento del diagrama de
curvas en sentido vertical

Al girar la rueda del ratón, se desplaza la visualización hacia arri‐
ba o hacia abajo en el diagrama de curvas superior.
Si las señales están dispuestas en pistas, se desplazará la visua‐
lización del grupo que se encuentre debajo del cursor.
El puntero del ratón debe estar posicionado encima del diagrama
de curvas con las señales analógicas.

Desplazamiento del diagrama de
curvas en sentido horizontal

Al girar la rueda del ratón con la tecla <Mayús> pulsada, se des‐
plaza la visualización a la izquierda o la derecha en el diagrama
de curvas.
El puntero del ratón debe estar posicionado encima del diagrama
de curvas.

Zoom más y Zoom menos

Al girar la rueda del ratón con la tecla <Control> pulsada, se au‐
menta o se reduce la visualización en el diagrama de curvas. El
punto de partida de la ampliación o la reducción es la posición del
puntero del ratón.
El eje de valores del diagrama de curvas inferior (trazas de bits)
no resulta afectado.
El puntero del ratón debe estar posicionado encima del diagrama
de curvas.

Funciones con el teclado
La tabla siguiente muestra los comandos de teclado que pueden utilizarse al focalizar el
diagrama de curvas:
Combinación de teclas

Descripción

Selección de un cursor de medición
<Ctrl+Mayús+1>

El cursor de medición vertical t1 se selecciona o deselecciona.

<Ctrl+Mayús+2>

El cursor de medición vertical t2 se selecciona o deselecciona.

<Ctrl+Mayús+3>

El cursor de medición horizontal Y1 se selecciona o deselecciona.

<Ctrl+Mayús+4>

El cursor de medición horizontal Y2 se selecciona o deselecciona.

<Tab>

Se selecciona el cursor de medición siguiente.

Posicionamiento de un cursor de medición vertical
<Izquierda>, <Derecha>

Con la unidad "Puntos de medición", el cursor de medición selec‐
cionado se desplaza un punto de medición desde la señal situada
en primer plano. Con la unidad "Tiempo (relativo)", el desplaza‐
miento de los cursores de medición es de un píxel.

<Mayús+Izquierda>, <Mayús+De‐ Con la unidad "Puntos de medición", el cursor de medición selec‐
recha>
cionado se desplaza 10 puntos de medición desde la señal situa‐
da en primer plano. Con la unidad "Tiempo (relativo)", el despla‐
zamiento de los cursores de medición es de 10 píxeles.
Posicionamiento de un cursor de medición horizontal
<Arriba>, <Abajo>

70

El cursor de medición seleccionado se desplaza un píxel a lo largo
del eje de valores.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Combinación de teclas

Descripción

<Mayús+Arriba>, <Mayús+Abajo> El cursor de medición seleccionado se desplaza 10 píxeles a lo
largo del eje de valores.
Visualización de los cursores de medición verticales
<Ctrl+barra espaciadora>

Se muestran u ocultan los cursores de medición verticales.

<Ctrl+Mayús+barra espaciadora>

Los cursores de medición verticales se muestran y se centran
para la vista actual.

Cambio de vista
<Barra espaciadora>

Desplazar la imagen

<Ctrl+0>

Ajustar zoom 100 % en el editor abierto

<Ctrl++>

Aplicar zoom más con 10 %

<Ctrl+->

Aplicar zoom menos con 10 %

Comandos del menú contextual
La tabla siguiente muestra los comandos del menú contextual en el diagrama de curvas:
Comando del menú contextual

Descripción

"Guardar diagrama como imagen
en"

Exporta la visualización actual a un formato gráfico, p. ej., como
mapa de bits.

"Copiar imagen en el portapapeles" Copia la visualización actual en el portapapeles.
"Centrar cursor de medición"

Posiciona los cursores de medición activados en un punto central
de la visualización actual.

Añade el registro visualizado a la carpeta de sistema
(solo panel de mando del eje y PID) ciones".
"Agregar a mediciones"

"Medi‐

"Altura automática de traza de bits" Adapta automáticamente la altura de las trazas de bits y define
así el tamaño del diagrama de curvas inferior.
El ajuste se desactiva automáticamente cuando se modifica ma‐
nualmente el reparto de espacio entre los diagramas de curvas.
Nota
Puede modificar el reparto de espacio vertical entre los diagra‐
mas de curvas superior e inferior. Para ello, estire con el ratón el
eje temporal del diagrama de curvas superior hacia arriba o hacia
abajo.

Barra de herramientas del diagrama de curvas
Mediante botones se ponen a disposición herramientas para ajustar la representación.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

71

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
La tabla siguiente muestra las funciones de los botones:
Símbolo

Función

Descripción

Deshacer zoom

Acción de deshacer la última función de zoom ejecuta‐
da.
Si se han ejecutado varias funciones de zoom, estas
pueden deshacerse paso a paso.

Repetir zoom

Repetición de la última función de zoom deshecha. Si
se han deshecho varias funciones de zoom, estas pue‐
den repetirse paso a paso.

Vista normal

Utilizar la vista actual como estándar para este registro.
Si el registro de Trace se vuelve a mostrar con poste‐
rioridad, la vista normal se restablece.

Desplazar la imagen

Desplazamiento de la visualización con el botón del ra‐
tón pulsado.

Selección de zoom

Selección de un área cualquiera con el botón del ratón
pulsado. La visualización se escala en función del área
seleccionada.

Selección de zoom vertical

Selección de un área vertical con el botón del ratón pul‐
sado. La visualización se escala en función del área
seleccionada.

Selección de zoom horizontal

Selección de un área horizontal con el botón del ratón
pulsado. La visualización se escala en función del área
seleccionada.

Zoom más

Ampliación de la visualización. Las áreas de eje de
tiempo y eje de valor se reducen cada vez que se hace
clic en el botón. Las curvas se representan más gran‐
des.

Zoom menos

Reducción de la visualización. Las áreas de eje de tiem‐
po y eje de valor se amplían cada vez que se hace clic
en el botón. Las curvas se representan más pequeñas.

Visualizar todo

Escala la visualización de los datos existentes de modo
que se muestren todo el rango de tiempo y todos los
valores.

Escalado automático del eje de
valores

Escalado de la visualización de modo que se muestren
todos los valores para el rango de tiempo representado
actualmente.
Se puede modificar relación de escalado entre las se‐
ñales.
Nota
El escalado automático del eje de valores se detiene al
activar una función de zoom del eje de valores. Con
este botón se activan de nuevo las adaptaciones auto‐
máticas a los valores mínimos/máximos.

72

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Símbolo

Función

Descripción

Mostrar rango de tiempo com‐
pleto

Escalado de la visualización de modo que se muestren
los valores del rango de valores representado actual‐
mente para todo el rango de tiempo.
El rango de valores visualizado solo se modifica cuando
también está activado "Mostrar todos los valores" .
Nota
El escalado automático del eje de tiempo se detiene al
activar una función de zoom del eje de tiempo. Con este
botón se activan de nuevo las adaptaciones automáti‐
cas del rango de tiempo.

Disponer en pistas

Activación o desactivación de la disposición en pistas.
Si está activada la disposición en pistas, las señales se
ordenan en mosaico horizontal con sus correspondien‐
tes ejes de valores.
Los grupos de señales se muestran en la misma pista.
Este ajuste no afecta a la visualización de las trazas de
bits.

Conmutación de la unidad del
eje de tiempo

Conmutación de la unidad del eje de tiempo
Pueden ajustarse las siguientes unidades:
● "Puntos de medición"
● "Tiempo (relativo)"
Tiempo relativo referido al momento de disparo
● "Sello de tiempo de los puntos de medición"

Mostrar puntos de medición

Los puntos de medición se muestran como pequeños
círculos en las curvas.

Representación interpolada

Interpolación lineal entre dos puntos de medición con‐
secutivos con números en coma flotante.
En caso de interpolación lineal no activada (estándar),
la unión entre los puntos de medición se traza en esca‐
lones.

Visualizar cursores de medi‐
ción verticales

Visualización de los cursores de medición verticales.
La posición vertical de los dos cursores de medición
puede desplazarse con el ratón. En la tabla de señales
se muestran en función de la posición las medidas co‐
rrespondientes y la diferencia de los cursores de medi‐
ción. Para acceder a más información, visualice la pa‐
leta "Cursores de medición" (Página 85) en la Task
Card Trace.
Use también las teclas de cursor. Las acciones siguien‐
tes se pueden realizar mediante las teclas de cursor con
los cursores de medición verticales:
● Seleccionar
● Posicionar
● Mostrar u ocultar cursor de medición
● Centrar cursor de medición

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

73

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Símbolo

Función

Descripción

Visualizar cursores de medi‐
ción horizontales

Visualización de los cursores de medición horizontal.
La posición horizontal de los dos cursores de medición
se puede modificar con el ratón.
Para ver los valores o introducir una nueva posición
para los cursores de medición, visualice la paleta "Cur‐
sores de medición" (Página 85) en la Task Card Trace.
Use también las teclas de cursor. Las acciones siguien‐
tes se pueden realizar mediante las teclas de cursor con
los cursores de medición horizontales:
● Seleccionar
● Posicionar

Visualización del rango de tiem‐ Mostrar u ocultar el rango de tiempo debajo del diagra‐
po
ma de curvas.
En la visualización del rango de tiempo, el área de vi‐
sualización del diagrama de curvas se representa como
superficie amarilla a partir de una señal seleccionada.
La superficie amarilla puede desplazarse y cambiarse
de tamaño en horizontal por sus bordes con el ratón.

Mostrar leyenda

Mostrar u ocultar la leyenda en el diagrama de curvas y
las denominaciones de trazas de bits.

Mostrar leyenda justificada a la
izquierda

Visualizar la leyenda y las denominaciones de trazas de
bits a la izquierda del diagrama de curvas.

Mostrar leyenda justificada a la
derecha

Visualizar la leyenda y las denominaciones de trazas de
bits a la derecha del diagrama de curvas.

Cambiar color de fondo

Cambio entre diferentes colores de fondo.

Interfaz de la tabla de señales
La tabla de señales muestra una lista de las señales de la medición seleccionada y ofrece
posibilidades de ajuste para algunas propiedades.
Se pueden modificar los ajustes de Trace en el dispositivo en el modo online. Con el botón
se pueden aplicar modificaciones de las opciones de representación en el proyecto. De lo
contrario, las modificaciones se descartan al pasar al modo offline.
Al agregar el Trace del dispositivo a las mediciones, se guardan los ajustes actuales de la tabla
de señales en la medición.
Las señales se pueden ordenar mediante Drag & Drop. Puede cambiar el orden de los bits
dentro de una señal.

74

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones en la tabla de señales
La figura siguiente muestra un ejemplo de representación:

La tabla siguiente muestra los ajustes y las visualizaciones de las señales registradas:
Columna

Descripción

"Estado"

Indicador de estado

(solo Trace del
proyecto en el
modo online)
Ninguna conexión online
La configuración solo existe offline
Las configuraciones online y offline son distintas
No se dispone de derechos de acceso
Las configuraciones online y offline son idénticas
Símbolo de señal
o error
Señal
Señal Failsafe
Señal de un bloque de datos
Señal de un bloque de datos Failsafe
Señal calculada (fórmula)
Error en la fórmula de la señal calculada
Selección para la visualización en el diagrama de curvas: puede seleccionar como
máximo 16 señales.
El punto indica que para la señal en la selección de bits hay al menos un bit se‐
leccionado para visualizar como traza de bits.
"Referencia de
señal"
(solo Trace)

Número de señal generado automáticamente

"Dispositivo"
(solo Trace del
proyecto)

Visualización del nombre de dispositivo

"Nombre"

Visualización del nombre de señal

Con la referencia de señal se accede a la señal en las fórmulas.

A hacer clic una vez sobre el nombre de una señal mostrada se actualiza la escala
en el diagrama de curvas.
En la última fila sin símbolo de señal puede introducirse un nombre para una señal
calculada. Al introducir el nombre, se crea la señal calculada.
"Medición"
(solo mediciones
superpuestas)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Visualización de la medición
Muestra el nombre de la medición a la que pertenece la señal.

75

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Columna

Descripción
Apertura de selección de bits
Para los siguientes tipos de datos pueden seleccionarse también bits por separado
para la visualización como traza de bits en el diagrama de curvas inferior:
● Byte, Word, DWord, LWord
● SInt, USInt, Int, UInt, DInt, UDInt, LInt, ULInt
Ejemplo de una selección de bits abierta para el tipo de datos DWord:

Seleccione o deseleccione el bit correspondiente la visualización haciendo clic en
el símbolo .
"Tipo de datos"

Visualización del tipo de datos

"Formato de vi‐
sualización"

Formato de visualización de la señal
Se ofrecen para su selección los formatos de visualización permitidos para la señal.
En "Ajuste predeterminado" se ajusta un formato de visualización adecuado para
el tipo de datos.

"Dirección"

Visualización de la dirección de la señal
En las variables optimizadas o con seguridad de tipos, el campo permanece vacío.

"Fórmula"
(solo Trace)

Visualización o introducción de una fórmula
Una fórmula puede contener funciones matemáticas con números y señales. Las
fórmulas pueden crearse con total comodidad con el editor de fórmulas.
Llamada del editor de fórmulas para señales calculadas
Haga clic en el símbolo para llamar el editor de fórmulas.

"Color"

Visualización y posibilidad de ajuste del color de la señal

"Grupo de seña‐
les"

Muestra o escribe el nombre de un grupo de señales
Para todas las señales de un grupo de señales se hacen iguales las escalas en Y.
Especifique un mismo nombre de grupo de señales para todas las señales que
deban tener la misma escala.
Para eliminar las señales del grupo de señales, borre el nombre del grupo de
señales
Los grupos de señales se guardan con la función "Usar vista actual como estándar"
(botón
).
Notas
Las señales binarias no se pueden agrupar.
En el formato de visualización Hex, agrupe solamente señales cuyo formato sea
compatible con la visualización en lo que respecta al signo.

76

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Columna
Campo gris
para símbolo
de cadena

Descripción
Para agregar la señal a un grupo de señales o borrarla del grupo, mueva el puntero
o
).
del ratón encima del campo gris o el símbolo de cadena (
Para agregar la señal a un grupo de señales o crear un nuevo grupo, haga clic en
el símbolo de cadena
.
Para eliminar la señal de un grupo de señales, haga clic en el símbolo de cade‐
na
.
El símbolo de cadena
seleccionada.

muestra todas las señales del mismo grupo que la señal

Campo de en‐ El campo de entrada muestra el nombre del grupo de señales.
trada
Al igual que el símbolo de cadena, este campo permite asignar un nombre de grupo
(introduciéndolo como texto) o borrarlo.
"Escala Y mín."

Visualización o introducción del valor mínimo para el escalado de la señal

"Máx. escala Y"

Visualización o introducción del valor máximo para el escalado de la señal

"Y(t1)"

Visualización del valor en la posición del primer cursor de medición

"Y(t2)"

Visualización del valor en la posición del segundo cursor de medición

"ΔY"

Visualización de la diferencia de valor entre el primer y el segundo cursor de me‐
dición
Selección de la escala automática del eje de valores para la señal
Si la casilla de verificación está activada, se ajustan los valores mínimo y máximo
para el escalado de la señal de modo que se muestren todos los valores para el
rango de tiempo representado actualmente.
de la barra de herramientas del diagrama de curvas activa el escalado
El botón
automático en todas las señales escalables.

"Unidad"

Visualización de la unidad
P. ej., para valores de objetos tecnológicos con unidad asignada

"Comentario"

Visualización y posibilidad de introducción de un comentario relativo a la señal

Comandos del menú contextual
La tabla siguiente muestra los comandos del menú contextual de la tabla de señales:
Comando del menú contextual

Descripción

"Insertar nueva señal calculada"

Inserta una nueva señal calculada en la tabla encima del lugar
seleccionado.

"Editar fórmula"

Abre el editor de fórmulas para la señal calculada.

"Cortar"

No seleccionable

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Insertar"

No seleccionable

"Borrar"

No seleccionable

"Cambiar nombre"

No seleccionable

"Formato de visualización"

Permite cambiar el formato de visualización.
Se ofrecen para su selección los formatos de visualización per‐
mitidos para la señal.

"Mostrar señal(es)"

Muestra las señales seleccionadas en el diagrama de curvas.

"Ocultar señal(es)"

Oculta las señales seleccionadas en el diagrama de curvas.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

77

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Consulte también
Utilización de la tabla de señales (Página 114)
Uso del grupo de señales en la tabla de señales (Página 115)

Interfaz: editor de fórmulas
El editor de fórmulas ofrece diversas funciones matemáticas para analizar señales. Abra el
editor en la tabla de señales con el botón
.

Posibilidades de parametrización e indicadores del editor de fórmulas
La figura siguiente muestra un ejemplo de representación:

Figura 6-1

Editor de fórmulas

La tabla siguiente muestra las posibilidades de parametrización y los indicadores del editor de
fórmulas:
Campo/Botón

Descripción

"Nombre"

Visualización e introducción del nombre de la fórmula creada.
El nombre debe ser unívoco y solo debe contener caracteres que también estén
permitidos en los nombres de archivo de Windows.

"Tipo de datos"

Visualización del tipo de datos de la fórmula.
El tipo de datos tiene preasignado un número en coma flotante del tipo LREAL y no
se puede modificar.

"Unidad"

Visualización e introducción de una unidad.
Unidad definida por el usuario de libre elección.

78

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Campo/Botón

Descripción

Lista desplegable
con señales

Selección de las señales.
La lista desplegable contiene las señales de la tabla de señales e inserta la señal
seleccionada en la fórmula.

"Entrada de la fór‐ Campo de texto para visualizar e introducir la fórmula.
mula"
Cree una fórmula introduciéndola en este campo de texto o utilizando los botones
para funciones matemáticas.
En el campo de texto, se pueden referenciar señales en la fórmula mediante la
referencia precedida del símbolo $ o escribiendo el nombre entre comillas dobles.
Es posible utilizar ambos métodos en una misma entrada.
En la fórmula no se permiten bits de una selección de bits (p. ej., bajo el tipo de
datos INT).
Funciones mate‐
máticas

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

79

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Campo/Botón

Descripción

+

Suma

-

Resta

*

Multiplicación

/

División

()

Paréntesis
Agrupación de expresiones

SQR

Cuadrado

SQRT

Raíz cuadrada

ABS

Valor absoluto
Calcula el valor absoluto de un número.
Ejemplos
ABS(5) → 5
ABS(-3) → 3
ABS(-3.14) → 3.14

MOD

Módulo
Calcula el resto de una división
Ejemplos
MOD(5,3) → 2
MOD(3.14,3) → 0.14

REC

Valor recíproco (1/x)

DIFF 1)

Diferenciación numérica
Ejemplos
Fórmula: DIFF($0,SAMPLETIME)

INT

1)

Integración numérica
Ejemplos
Fórmula: INT($0,SAMPLETIME)

RMS 1)

Media cuadrática
La media cuadrática se calcula sumando los cuadrados de todas las medidas y
dividiendo el resultado por el número de medidas. La raíz cuadrada de este valor
representa la media cuadrática.
Ejemplos
Fórmula: RMS($0,SAMPLETIME)

AV

Filtro de media de primer a quinto orden
Si no se indica ningún orden, se ejecuta un filtro de valor medio de 1.er orden.
Ejemplos
AV($0,1) → Filtro de valor medio de 1.er orden
AV($0,5) → Filtro de valor medio de 5.º orden

π

Constante matemática PI

AM

Media aritmética

DIF

Diferenciación simple con filtro de media de primer a quinto orden.

La media aritmética es un valor medio móvil de cinco puntos de medición.
Si no se indica ningún orden, se ejecuta una diferenciación simple con filtro de
1.er orden.
Ejemplos

80

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Campo/Botón

Descripción
DIF($0,1) → Diferenciación simple con filtro de 1.er orden
DIF($0,5) → Diferenciación simple con filtro de 5.º orden
DIF($0) → Diferenciación simple con filtro de 1.er orden
Ejemplo: Cálculo de una curva de aceleración a partir de una señal de velocidad
$0: Señal de velocidad en metros por segundo
Tiempo de ciclo del registro de velocidad equidistante: 1 ms
Fórmula: DIF($0,1)/0.001
Unidad: m/s2

DIF2

Diferenciación doble con filtro de valor medio de 1.er a 5.º orden.
Si no se indica ningún orden, se ejecuta un cálculo de la diferencia doble con filtro
de 1.er orden.
Ejemplos
DIF2($0,1) → Diferenciación doble con filtro de 1.er orden
DIF2($0,5) → Diferenciación doble con filtro de 5.º orden
DIF2($0) → Diferenciación doble con filtro de 1.er orden
Ejemplo: Cálculo de una curva de aceleración a partir de una curva de posición
$0: Curva de posición en metros
Tiempo de ciclo del registro de posición equidistante: 1 ms
Fórmula: DIF2($0,1)/SQR(0.001)
Unidad: m/s2

"Mostrar nombre
de señal"

Visualización del nombre de la señal.
Si la casilla de verificación está activada, en la fórmula se muestran los nombres de
las señales en lugar de sus referencias.

"Validar"

Comprobación de la validez de la fórmula.

"Resultado de la
validación"

Resultado de la validación.
Muestra el resultado de la validación e indica un error y su ubicación.

"OK"

Aplica las entradas en el editor de fórmulas.

"Cancelar"

Rechaza las entradas en el editor de fórmulas.

1)

La constante SAMPLETIME solo se ofrece con ciclos de registro equidistantes. La unidad de tiempo
para SAMPLETIME siempre es μs.

Nota
Las funciones DIF, DIF2, DIFF, AM, RMS, AV e INT solo pueden procesar una señal registrada
como argumento. No todas las fórmulas no válidas se marcan como errores.

Interfaz - Mediciones (Mediciones superpuestas)
La ficha Mediciones muestra las distintas mediciones y ofrece, entre otras cosas, posibilidades
de ajuste para la sincronización.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

81

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones en la ficha Mediciones
La figura siguiente muestra un ejemplo de representación:

La tabla siguiente muestra los ajustes y las visualizaciones para las mediciones:
Columna

Descripción

Alineación de las mediciones
"Disparador/
punto de me‐
dición"

Alineación de las mediciones en función del disparador o el punto de medición

"Marca de
tiempo (tiem‐
po absoluto)"

Alineación de las mediciones según la marca de tiempo

El punto cero individual de la medición se define en la columna "Orientación" de la
tabla.
Las señales se alinean en función del tiempo a partir de la marca de tiempo abso‐
luta.

Columnas de tabla
Visualización estática del símbolo de medición
"Nombre"

Visualización y posibilidad de modificación de los nombres de medición
El nombre debe ser unívoco y puede modificarse.

"Orientación"

Alineación de la medición (ajustable solo con la casilla de verificación "Disparador/
punto de medición" activada)
Define el punto cero individual de una medición. Todas las señales de la medición
se visualizarán con este punto cero como referencia.
Pueden realizarse los siguientes ajustes:
● Disparo
● Primer punto de medición tras el evento de disparo
● Primer punto de medición
● Último punto de medición

"Offset"

Offset relativo al eje temporal
Desplaza la medición hacia la izquierda o hacia la derecha por el eje temporal en
el offset indicado.
El offset también puede transferirse a la celda a través del portapapeles desde el
valor ΔX del cursor de medición. Ver Alineación exacta de mediciones (mediciones
superpuestas) (Página 119).

82

"Marca de
tiempo"

Indicación del instante de disparo

"Comentario"

Visualización y posibilidad de introducción de un comentario relativo a la señal

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Comandos del menú contextual
La tabla siguiente muestra los comandos del menú contextual de la tabla de señales:
Comando del menú contextual

Descripción

"Cortar"

No seleccionable

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Insertar"

No seleccionable

"Borrar"

No seleccionable

"Cambiar nombre"

Pasa la celda seleccionada al modo de edición.

"Importar medición"

Importa una medición desde un archivo con la extensión
"*.ttrecx", p. ej.
La importación es independiente del dispositivo y también resulta
adecuada, p. ej., para comparar las mediciones de un PLC con las
mediciones de un accionamiento.
La extensión de archivo "*.ttrec" está soportada por motivos de
compatibilidad con V12, pero no contiene información sobre la
familia de dispositivos.

"Exportar medición"

Exporta una medición como archivo con la extensión "*.ttrecx" o
"*.csv".
La extensión de archivo "*.ttrec" está soportada por motivos de
compatibilidad con V12, pero no contiene información sobre la
familia de dispositivos.

6.2.2.4

Interfaz - Ficha Selección de señal (Mediciones superpuestas)

Interfaz - Selección de señal (Mediciones superpuestas)
La ficha Selección de señal muestra las señales de todas las mediciones y permite
preseleccionar las señales que aparecen en la tabla de señales del diagrama.

Posibilidades de ajuste y visualizaciones en la ficha Selección de señal
La figura siguiente muestra un ejemplo de representación:

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

83

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
La tabla siguiente muestra los ajustes y las visualizaciones de la tabla:
Columna

Descripción
Visualización estática del símbolo de señal

"Disponible en el diagrama"

Selección para la visualización en el diagrama de curvas
Con la selección activada, la señal se envía a la tabla de señales
del diagrama de curvas.

"Medición"

Visualización de la medición a la que pertenece la señal.

"Nombre"

Visualización del nombre de señal

"Tipo de datos"

Visualización del tipo de datos

"Dirección"

Visualización de la dirección (no con variables simbólicas)

"Grupo de señales"

Visualización del grupo de señales

"Comentario"

Visualización de un comentario relativo a la señal

Encontrará más información sobre cada uno de los ajustes en Interfaz de la tabla de señales
(Página 74).

Comandos del menú contextual
La tabla siguiente muestra los comandos del menú contextual de la selección de señal:
Comando del menú contextual

Descripción

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Mostrar selección en la tabla de
señales"

Las señales seleccionadas se muestran en la tabla de señales y
están disponibles en el diagrama.

"Eliminar selección de la tabla de
señales"

Las señales eliminadas no estarán disponibles en el diagrama.

Es posible seleccionar varios objetos.

6.2.3

Ventana de inspección

6.2.3.1

Interfaz: ventana de inspección
La ventana de inspección muestra información general sobre el Trace.
Se dispone de la siguiente información adicional para las mediciones:
● Área Marca de tiempo
La disponibilidad de las marcas de tiempo depende de las condiciones de registro
configuradas.
● Área Puntos de medición
● Área Tiempo de ciclo
En caso de registros equidistantes, se muestra el tiempo entre dos puntos de medición.
Este tiempo puede utilizarse, p. ej., para realizar análisis en el editor de fórmulas.

84

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Ejemplo de marcas de tiempo
La figura siguiente muestra un ejemplo de marcas de tiempo de una medición:
'XUDFLµQyGHyUHJLVWUR

3ULPHUySXQWRyPHGLGR







0RPHQWRyGHyDFWLYDFLµQ
7UDQVIHUHQFLDGHO7UDFHDO
GLVSRVLWLYR

,QWHUYDORGHWLHPSRGHSUHGLVSDUR







OWLPRySXQWRyPHGLGR









W

0RPHQWRyGHyGLVSDUR

0DUFDyGHyWLHPSRyGHOySULPHUy
SXQWRyPHGLGR

0DUFDyGHyWLHPSRyGHOy¼OWLPRy
SXQWRyPHGLGR

Nota
Análisis de mediciones con aparición esporádica de una condición de registro
Al evaluar las mediciones, tenga en cuenta que puede no haberse cumplido la condición de
registro entre el momento de su activación y el momento de disparo.

6.2.4

Task Card Trace

6.2.4.1

Interfaz - Paleta Cursores de medición
La paleta "Cursores de medición" muestra la posición de los cursores de medición en el
diagrama de curvas y los valores de los puntos de intersección.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

85

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones de la paleta "Cursores de medición"
La figura siguiente muestra la paleta "Cursores de medición":

La tabla siguiente describe los ajustes y las visualizaciones:
Ajuste/visualización

Descripción

Cursores de medición horizontal
Y1

Posición del primer cursor de medición
Este valor indica la posición relativa a la escala de la señal seleccionada ac‐
tualmente.
Además de desplazar con el ratón, puede introducir una nueva posición del
cursor de medición en este campo de entrada.

Y2

Posición del segundo cursor de medición
Este valor indica la posición relativa a la escala de la señal seleccionada ac‐
tualmente.
Además de desplazar con el ratón, puede introducir una nueva posición del
cursor de medición en este campo de entrada.

ΔY

Visualización de la diferencia de posición entre el primer y el segundo cursor de
medición

Cursores de medición verticales

86

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.2 Interfaz de software de Trace
Ajuste/visualización
t1

Descripción
Posición del primer cursor de medición
Además de desplazar con el ratón, puede introducir una nueva posición del
cursor de medición en este campo de entrada.

t2

Posición del segundo cursor de medición
Además de desplazar con el ratón, puede introducir una nueva posición del
cursor de medición en este campo de entrada.

Δt

Visualización de la diferencia de posición entre el primer y el segundo cursor de
medición

Puntos de intersección con señal seleccionada
Y(t1)

Visualización del valor en la posición del primer cursor de medición

Y(t2)

Visualización del valor en la posición del segundo cursor de medición

ΔY

Visualización de la diferencia de valor entre el primer y el segundo cursor de
medición

Evaluación matemática en el área de los cursores de medición [t1;t2] para la señal seleccionada
AM(Y)

Valor medio
Se calcula la media aritmética del área situada entre los cursores de medición
verticales.

INT(Y)

Integral
Se calcula la integral del área situada entre los cursores de medición verticales.

RMS(Y)

Valor efectivo
Se calcula el valor efectivo del área situada entre los cursores de medición
verticales.

Consulte también
Interfaz Diagrama de curvas (Página 68)

6.2.4.2

Interfaz - Paleta Instantáneas
La paleta "Instantáneas" permite guardar y restaurar diferentes vistas de una medición.
Se crea una instantánea de la vista actual en la ficha "Diagrama". Las instantáneas se
almacenan en la medición con el proyecto.

Posibilidades de ajuste y visualizaciones de la paleta "Instantáneas"
La figura siguiente muestra la paleta "Instantáneas":

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

87

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto
La tabla siguiente muestra las funciones de los botones:
Símbolo

Descripción
Crear instantánea de la vista actual
Guarda la vista actual de la ficha "Diagrama" como instantánea.

La tabla siguiente muestra los ajustes y las visualizaciones:
Columna

Descripción
Visualización estática del símbolo de la instantánea

"Nombre"

Visualización y posibilidad de modificación del nombre

"Marca de tiem‐
po"

Visualización de la hora de creación de la instantánea

"Comentario"

Visualización y posibilidad de introducción de un comentario

Es posible seleccionar y eliminar varias líneas.
Haciendo clic en una línea se abre la medición con la vista almacenada en la ficha "Diagrama".

Comandos del menú contextual
La tabla siguiente muestra los comandos del menú contextual de la tabla:
Comando del menú contextual

Descripción

"Restaurar instantánea"

Muestra la medición con la vista almacenada en la ficha "Diagra‐
ma".

"Borrar"

Borra la instantánea

"Cambiar nombre"

Pasa la celda al modo de edición

Es posible seleccionar y eliminar varias líneas.

6.3

Interfaz de software de Trace del proyecto

6.3.1

Estructura de la interfaz
La interfaz de usuario de Trace del proyecto consta de varias áreas.
La siguiente figura muestra un ejemplo de la distribución de la interfaz:

88

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto

1



2
3

4

5

7

Árbol del proyecto
Gestionar y crear Traces del proyecto y mediciones directamente en el árbol del proyecto y mediante
comandos del menú contextual.
Área de trabajo

① Barra de título del área de trabajo

Muestra el nombre del Trace del proyecto.

② Barra de herramientas del Trace del proyecto
Botones para administrar los Traces del proyecto:
● Transferencia de configuraciones de Trace a los dispositivos
● Mostrar la vista general de estados de los dispositivos participantes
● Establecer conexión online con los dispositivos participantes
● Activar/desactivar Traces del proyecto
● Borrado de Traces del proyecto
● Transferencia de mediciones desde los dispositivos al proyecto

③ Visualización de estado del Trace del proyecto

Visualización del estado actual del registro.

④ Ficha Configuración

Configuración de los dispositivos participantes y las señales para el Trace del proyecto.

⑤ Ficha Diagrama

Visualización de los valores registrados en forma de diagrama de curvas y de las señales de la
medición visualizada.
Definición de las opciones de representación.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

89

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto
Task Card "Trace"

Muestra los datos de los cursores de medición con evaluación matemática ⑥ y las instantáneas.

⑦ Ventana de inspección

Configuración específica del dispositivo acerca de la duración del registro, la condición de disparo y la
selección de señal.
Visualización de información general sobre el Trace del proyecto.

Consulte también
Dispositivos (Página 120)

6.3.2

Árbol del proyecto

6.3.2.1

Interfaz - Árbol del proyecto, carpeta "Funciones para varios dispositivos" - "Traces del
proyecto"
En la carpeta de sistema
"Traces del proyecto" se muestran las mediciones
configuraciones de los Traces del proyecto.

y las

Al hacer doble clic en un Trace del proyecto, se abre la correspondiente ficha "Configuración"
o "Diagrama" en el área de trabajo.

Símbolos de la carpeta "Traces del proyecto"
En la siguiente tabla se explica el significado de los símbolos de la carpeta
proyecto":
Símbolo

"Traces del

Descripción
Agregar configuración de Trace del proyecto
Al hacer doble clic en este símbolo, se agrega una nueva configuración de Trace del
proyecto y se abre la ficha "Configuración".
Configuración de Trace del proyecto
Al hacer doble clic en este símbolo, se abre la ficha "Configuración" o "Diagrama".
Carpeta "Mediciones"
La carpeta contiene mediciones superpuestas que se agregan con el botón
. Las
mediciones son compatibles con las mediciones superpuestas dentro de los dispositivos.
Si se copia o se desplaza la medición superpuesta a la carpeta correspondiente de un
dispositivo, se muestran las configuraciones de las distintas mediciones.
Medición
Al hacer doble clic en este símbolo se abre la ficha "Diagrama".

90

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto

Comandos del menú contextual
En la siguiente tabla se muestran los comandos del menú contextual para la carpeta de
sistema
"Traces del proyecto":
Comando del me‐
nú contextual

Descripción

"Agregar nuevo
Agrega un nuevo Trace del proyecto y abre la ficha "Configuración".
trace del proyecto"

En la siguiente tabla se muestran los comandos de menú contextual para la configuración del
Trace del proyecto :
Comando del menú
contextual

Descripción

"Borrar"

Borra los objetos seleccionados del árbol del proyecto o del dispositivo.

"Cambiar nombre"

Pasa el objeto seleccionado al modo de edición.

6.3.3

Área de trabajo

6.3.3.1

Interfaz - Barra de herramientas del Trace del proyecto
Existen botones que permiten acceder a herramientas para el manejo del Trace del proyecto.
La tabla siguiente muestra las funciones de los botones:
Símbolo

Descripción
Transferencia de configuraciones de Trace a los dispositivos
Las configuraciones de Trace se transfieren a los dispositivos participantes.
Visualización de la vista general de estados
Muestra la vista general de estados (Página 92) de los dispositivos participantes.
Establecer conexión online
Se establece la conexión online con los dispositivos participantes.
Activación de registro
Si se repite el registro de un Trace en el dispositivo, se conservan también para
el nuevo registro los ajustes relevantes para la visualización (diagrama de curvas
y tabla de señales).
No se puede repetir un registro interrumpido.
Nota
Si se reinicia un registro, los valores registrados hasta el momento se pierden.
Para realizar una copia de seguridad de los valores registrados, guarde la medi‐
ción en el proyecto antes de volver a activar el registro.
Desactivación de registro
Desactiva los Traces en todos los dispositivos con acceso online.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

91

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto
Símbolo

Descripción
Borrar Traces de los dispositivos
Borra los Traces de los dispositivos participantes con acceso online.
Transferencia de mediciones desde los dispositivos al proyecto
Las mediciones se agregan a la carpeta de sistema

"Mediciones".

Nota
Solo se guardan los datos que se han cargado desde los dispositivos. Estos datos
se muestran en un diagrama de curvas. Es posible que deba esperar hasta que
se actualice la visualización.

6.3.3.2

Interfaz - Vista general de estados de los dispositivos participantes
El cuadro de diálogo muestra información de estado sobre los dispositivos participantes.
En el caso de los dispositivos participantes con estado sin fallo, puede transferir las
configuraciones de Trace a los dispositivos.

Visualización en la tabla de la vista general de estados
La tabla siguiente muestra las visualizaciones de la vista general de estados:
Columna

Descripción

-

Indica si hay un fallo para el Trace del proyecto en un dispositivo parti‐
cipante o si la configuración de Trace es incorrecta.
Un tooltip sobre el símbolo muestra información sobre la causa del error.
Significado en el modo offline
● Configuración de Trace incorrecta
Significado en el modo online
● Configuración de Trace incorrecta
● Se ha interrumpido el registro
● Error de conexión

Dispositivo

Visualización del nombre de dispositivo

Estado del dispositivo

Indicador de estado de la conexión online
Offline
Conectar o desconectar
Online

Estado del Trace

Visualización de estado del Trace
Un tooltip sobre el símbolo muestra información sobre el estado.
Las configuraciones online y offline son idénticas
Las configuraciones online y offline son distintas
La configuración solo existe offline

92

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto

Soluciones en caso de error
La lista siguiente muestra posibles causas de error y sus correspondientes soluciones.
● Firmware
En los dispositivos (Página 120) se describe a partir de que firmware admite un dispositivo
el Trace del proyecto, si lo admite.
● Configuración de Trace
En la ficha "Propiedades" de la ventana de inspección, compruebe los ajustes del
dispositivo en cuestión.
● Registro interrumpido
Con una nueva transferencia de las configuraciones de Trace puede iniciar de nuevo un
registro interrumpido.
● Requisitos del Trace del proyecto
Compruebe si se cumplen los requisitos generales para el Trace del proyecto (Página 57).

6.3.3.3

Interfaz - Ficha Configuración

Interfaz - Configuración
En la ficha "Configuración" se establecen los dispositivos participantes para el Trace del
proyecto. La configuración de Trace dependiente del dispositivo y las propiedades del Trace
del proyecto se configuran en la ventana de inspección (Página 94).
La configuración de Trace indicada se corresponde siempre con la configuración offline,
incluso con una conexión online establecida. Transfiera las modificaciones en las
configuraciones de Trace a los dispositivos mediante el botón
.

Posibilidades de ajuste y visualizaciones en la sinopsis de los dispositivos participantes
La figura siguiente muestra un ejemplo de representación de la tabla sinóptica:

La tabla siguiente muestra los ajustes y las visualizaciones de los dispositivos participantes:
Columna

Descripción

Dispositivo

Introducción del nombre de dispositivo
Botón para abrir la tabla de selección de dispositivos
El botón se muestra al seleccionar la fila de la tabla. Al hacer clic en el
símbolo, se abre una tabla con los dispositivos que pueden seleccionar‐
se. El dispositivo seleccionado se muestra en el campo de entrada.

Disparo

El símbolo

indica qué dispositivos pueden disparar un disparador

Configure este ajuste dependiente del dispositivo en la ficha "Propieda‐
des" de la ventana de inspección.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

93

Uso de la función Trace y de analizador lógico
6.3 Interfaz de software de Trace del proyecto
Columna

Descripción

Momento de registro

Visualización del momento de registro
En la ficha "Propiedades" de la ventana de inspección, configure el ciclo
(OB en una CPU SIMATIC) con el que debe realizarse el registro.

Ciclo de reloj

Visualización del ciclo de reloj resultante de la selección del momento de
registro

Registrar todos

Introducción de la reducción

Número de puntos de medi‐ Introducción del número de puntos de medición que se van a registrar
ción
La duración de registro se adapta consecuentemente a este dato.
Duración de registro

Introducción de la duración de registro
El número de puntos de medición se adapta consecuentemente a este
dato.

Error

Visualización de un error en la configuración de Trace
Un tooltip sobre el símbolo muestra información sobre la causa del error.
Las configuraciones de Trace con estado de error no se pueden trans‐
ferir al dispositivo.

6.3.3.4

Interfaz - Ficha Diagrama
La ficha "Diagrama" del Trace del proyecto se comporta como en Trace y se describe en el
capítulo Interfaz Ficha Diagrama (Página 68).

6.3.4

Ventana de inspección

6.3.4.1

Interfaz: ventana de inspección
La visualización en la ficha "Propiedades" de la ventana de inspección depende de la selección
actual en el área de trabajo.
Si en el área de trabajo no se ha seleccionado una fila de la tabla con un dispositivo, se muestra
información general sobre el Trace del proyecto. Si se ha seleccionado una fila de la tabla con
un dispositivo, se muestra la configuración de Trace dependiente del dispositivo, tal y como se
describe en el dispositivo (Página 120) correspondiente.

94

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Información general en la ficha "Propiedades"
La figura siguiente muestra un ejemplo de representación:

La tabla siguiente muestra los ajustes y las visualizaciones de las señales registradas:
Campo

Descripción

Nombre

Campo de entrada para el nombre del Trace del proyecto

Autor

Campo de entrada para el nombre del autor

Comentario

Campo de entrada para un comentario

ID del trace

Visualización de la ID del Trace
Esta ID le permite diferenciar distintos Traces del proyecto activos.

Número de puerto Campo de entrada para el número de puerto de la conexión
Los dispositivos participantes en el Trace del proyecto se comunican a través de
este puerto. El número debe ser idéntico y unívoco en todos los dispositivos.
Tenga en cuenta también las indicaciones para la asignación de números de puer‐
to en el sistema de información TIA Portal.

6.3.5

Task Card Trace
Las paletas mostradas se describen en el capítulo Task Card Trace (Página 85).

6.4

Manejo

6.4.1

Guía de inicio rápido para Trace
Esta descripción toma como ejemplo los pasos para efectuar un registro con la CPU S7-1500.
Los ajustes mostrados pueden diferir en función del dispositivo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

95

Uso de la función Trace y de analizador lógico
6.4 Manejo

Requisitos
Se ha configurado un dispositivo que admite la función Trace y de analizador lógico.

Creación de Trace
La siguiente figura muestra el árbol del proyecto con la carpeta de sistema
dispositivo:

"Traces" bajo el

Procedimiento:
1. Haga doble clic en la entrada "Agregar nuevo Trace".
Se crea una nueva configuración de Trace y se abre la ficha "Configuración" en el área
de trabajo.
2. Para modificar el nombre de la configuración de Trace, haga clic en el texto.

96

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Selección de señales
La figura siguiente muestra la configuración de las señales:

Procedimiento:
1. Seleccione las señales que deben registrarse en el área "Señales".
O bien:
2. P. ej., arrastre una o varias señales a la tabla de señales desde una tabla de variables
mediante Drag & Drop.

Configuración del ciclo de registro
La figura siguiente muestra la configuración del muestreo:

Procedimiento:
1. Configure el muestreo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

97

Uso de la función Trace y de analizador lógico
6.4 Manejo

Configuración del disparador
La figura siguiente muestra la configuración del disparador:

Procedimiento:
1. Configure el disparador y la condición de disparo para el disparador seleccionado.

Configuración de las opciones de representación (opcional)
La figura siguiente muestra la configuración de las opciones de representación:

Procedimiento:
1. Vaya a la ficha "Diagrama".
2. Ajuste las opciones de representación que desee en el diagrama y en la tabla de señales.

98

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Transmisión de la configuración de Trace al dispositivo
Procedimiento:
1. Transfiera la configuración de Trace al dispositivo con el botón
Se ejecutan las siguientes funciones:

.

– Se establece una conexión online con el dispositivo.
– La configuración de Trace se transfiere al dispositivo.
– Se activa la visualización.
– La vista cambia a la ficha "Diagrama".

Activación de registro
Procedimiento:
1. Haga clic en el botón

.

Visualización de registro
La siguiente figura muestra el diagrama de curvas con un registro:

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

99

Uso de la función Trace y de analizador lógico
6.4 Manejo
Procedimiento:
1. Espere hasta que se muestre el estado "Registro en curso" o "Registro finalizado" en la
visualización de estado del Trace.
2. Cambie a la ficha "Diagrama".
3. Haga clic en el símbolo
de una señal en la tabla de señales.
Se ofrecen los bits de la señal por separado para su visualización como traza de bits.
4. Seleccione o deseleccione en la tabla de señales las señales individuales y los bits con el
símbolo
para su representación.

Almacenamiento de la medición en el proyecto
Procedimiento:
1. Transfiera la medición al proyecto con el botón
.
La medición se muestra en el árbol del proyecto en la carpeta de sistema

"Mediciones".

Consulte también
Interfaz Barra de herramientas de Trace (Página 67)

6.4.2

Guía de inicio rápido para Trace del proyecto
Esta descripción muestra a modo de ejemplo los pasos para el registro con Trace del proyecto
en dos CPU S7-1500. Los ajustes mostrados pueden diferir en función del dispositivo.

Requisitos
● Existen dos CPU S7-1500 con versión de firmware V2.8 o superior configuradas.
● Se cumplen los requisitos generales para el Trace del proyecto (Página 57).

100

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Agregar Trace del proyecto
La siguiente figura muestra el árbol del proyecto con la carpeta de sistema
proyecto" bajo las funciones para varios dispositivos:

"Traces del

Procedimiento:
1. Haga doble clic en la entrada "Agregar nuevo trace del proyecto".
Se crea una nueva configuración de Trace del proyecto y se abre la ficha "Configuración"
en el área de trabajo.
2. Para modificar el nombre de la configuración de Trace del proyecto, haga clic en el texto.

Agregar dispositivos
La figura siguiente muestra cómo se agregan dispositivos:

Procedimiento:
1. En el área "Dispositivos participantes" seleccione los dispositivos correspondientes.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

101

Uso de la función Trace y de analizador lógico
6.4 Manejo

Configurar señales y condiciones de registro de los dispositivos.
La siguiente figura muestra dos dispositivos participantes y la configuración de "PLC_1".

Procedimiento:
1. En el área "Dispositivos participantes" seleccione un dispositivo.
2. Seleccione la ficha "Propiedades" en la ventana de inspección.
3. Seleccione las señales que deben registrarse en el área "Señales".
O bien:
4. P. ej., arrastre una o varias señales a la tabla de señales desde una tabla de variables
mediante Drag & Drop.
5. Configure el muestreo.
6. Configure el disparador y la condición de disparo para el disparador seleccionado.
7. Repita la configuración a partir del paso 1 para cada dispositivo participante.
En el ejemplo que se muestra aquí, para "PLC_2" hay configurado un modo de disparo
"Disparo de otro dispositivo".

102

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Transferir configuraciones de Trace a los dispositivos
Procedimiento:
1. Con el botón

, abra la vista general de estados de los dispositivos participantes.

2. Transfiera las configuraciones de Trace a los dispositivos con el botón

.

3. Compruebe el estado en la vista general de estados (Página 92) y solucione los posibles
errores.

Activación de registro
Procedimiento:
1. Haga clic en el botón

.

Visualizar registros
Procedimiento:
1. En la vista general de estados de los dispositivos participantes, compruebe si han finalizado
ya los registros deseados.
2. Cambie a la ficha "Diagrama".

Almacenamiento de mediciones en el proyecto
Procedimiento:
1. Transfiera las mediciones al proyecto con el botón
.
Las mediciones se muestran en el árbol del proyecto, en la carpeta de sistema
"Mediciones".

6.4.3

Uso de la función Trace: vista general

Requisitos
En el TIA Portal se ha configurado un dispositivo que admite la función Trace y de analizador
lógico y con el que hay establecida una conexión online.

Procedimiento
La tabla siguiente muestra una vista general de las etapas que se siguen normalmente al
trabajar con la función Trace y de analizador lógico.
Paso

Descripción

1

Creación de Trace (Página 104)

2

Configuración de Trace (Página 112)

3

Transmisión de la configuración de Trace al dispositivo (Página 107)

4

Activación/desactivación de Trace en el dispositivo (Página 107)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

103

Uso de la función Trace y de analizador lógico
6.4 Manejo
Paso

Descripción

5

Visualización de registro (Página 108)

6

Almacenamiento de mediciones en el proyecto (Página 109)

7

Visualización de registro (Página 108)

8

Análisis del registro en curso (Página 108)

9

Comparación de registros (mediciones superpuestas) (Página 118)

Consulte también
Ver configuración (Página 104)

6.4.4

Árbol del proyecto

6.4.4.1

Creación de Trace
En el árbol del proyecto pueden crearse Traces en forma de configuraciones de Trace.
Las siguientes instrucciones describen cómo crear una configuración de Trace en la carpeta
de sistema
"Traces".

Procedimiento
Para crear una configuración de Trace, haga lo siguiente:
1. Haga doble clic en la entrada "Agregar nuevo Trace".
Se crea una nueva configuración de Trace.

6.4.4.2

Ver configuración

Requisitos
En la carpeta de sistema
"Traces" existe una configuración de Trace, un Trace en
dispositivo, una medición o una medición superpuesta.

Procedimiento
Para ver una configuración de Trace, haga lo siguiente:
1. Haga doble clic en el árbol del proyecto en el símbolo correspondiente a la configuración de
Trace, a un Trace en dispositivo, a una medición o a una medición superpuesta.
En el área de trabajo se abre la ficha "Configuración" o "Diagrama".
2. Si es necesario, haga clic en la ficha "Configuración" para visualizarla.

104

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Nota
Protección contra escritura
Los datos de configuración de Trace en dispositivo y de todas las mediciones se muestran
protegidos contra escritura.

Consulte también
Interfaz: Árbol del proyecto, carpeta "Traces" (Página 61)

6.4.4.3

Ver diagrama

Requisitos
En la carpeta de sistema
medición superpuesta.

"Traces" existe un Trace en dispositivo, una medición o una

Procedimiento
Para ver un diagrama, haga lo siguiente:
1. Haga doble clic en el árbol del proyecto en el símbolo correspondiente a un Trace en
dispositivo, a una medición o a una medición superpuesta.
En el área de trabajo se abre la ficha "Configuración" o "Diagrama".
2. Si es necesario, haga clic en la ficha "Diagrama" para visualizarla.

Consulte también
Interfaz: Árbol del proyecto, carpeta "Traces" (Página 61)

6.4.4.4

Crear medición superpuesta
En el árbol del proyecto pueden crearse mediciones superpuestas con una funcionalidad de
comparación para distintas mediciones.
Las siguientes instrucciones describen cómo crear una medición superpuesta en la carpeta de
"Mediciones superpuestas".
sistema

Requisitos
Se ha configurado un dispositivo que admite la función Trace y de analizador lógico.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

105

Uso de la función Trace y de analizador lógico
6.4 Manejo

Procedimiento
Para crear una medición superpuesta, haga lo siguiente:
1. Seleccione una o varias mediciones en la carpeta de sistema
2. Arrastre las mediciones a la carpeta de sistema
Drag & Drop.

"Mediciones".

"Mediciones superpuestas" mediante

Se creará una nueva medición superpuesta. En ella se incluyen copias de las mediciones
seleccionadas.

6.4.4.5

Estructuración de los objetos en grupos
En el árbol del proyecto pueden crearse grupos en las carpetas de sistema. Utilice esta
posibilidad para estructurar la vista en caso de existir muchos objetos.
Las siguientes instrucciones describen mediante ejemplos el modo de reunir mediciones en
grupos. La misma funcionalidad está disponible para las carpetas de sistema "Traces" y
"Mediciones superpuestas".
Nota
Posibilidad de visualización de Traces del dispositivo también en grupos
Una configuración de Trace en un grupo que tenga el mismo un Trace en el dispositivo con
el mismo nombre se representa bajo el grupo. Por lo tanto, no todos los Traces del dispositivo
se muestran obligatoriamente en el primer nivel de la carpeta "Traces".

Requisitos
Existen mediciones en la carpeta de sistema

"Mediciones".

Procedimiento
Para estructurar mediciones en grupos, haga lo siguiente:
1. Haga clic con el botón derecho del ratón en la carpeta de sistema
seleccione el comando "Agregar grupo" del menú contextual.
Se creará una carpeta de grupo
nueva.

"Mediciones" y

2. Asigne un nombre explicativo al nuevo grupo.
3. Repita el paso 1 hasta crear todos los grupos deseados.
(También es posible crear subgrupos (grupos dentro de grupos)).
4. Mediante Drag & Drop, arrastre las mediciones correspondientes a las carpetas de grupo
creadas.

106

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

6.4.5

Área de trabajo General

6.4.5.1

Transmisión de la configuración de Trace al dispositivo

Requisitos
● Existe una configuración de Trace válida en la carpeta de sistema "Traces".
● No se ha alcanzado todavía el número máximo de Traces en dispositivo.

Procedimiento
Para transmitir una configuración de Trace al dispositivo, proceda del siguiente modo:
1. Abra una configuración de Trace válida en el área de trabajo.
2. Haga clic en el botón

.

Resultado
La configuración de Trace se transfiere al dispositivo.

6.4.5.2

Activación/desactivación de Trace en el dispositivo

Requisitos
● Existe una conexión online con el dispositivo.
● Existe un Trace en el dispositivo.
● El Trace en dispositivo se muestra en el área de trabajo.
● El botón

de visualización se activa para el Trace visualizado.

Activación de Trace en el dispositivo
Para activar el registro de un Trace en el dispositivo, proceda del siguiente modo:
1. Haga clic en el botón
.
El Trace en el dispositivo se activa y se inicia el registro en función de la condición de
disparo configurada. La condición de disparo es específica del dispositivo y se describe en
el capítulo "Configuración", en el dispositivo (Página 120) correspondiente.
Se muestra el estado actual del registro en la visualización de estado del Trace.
Nota
Si se reinicia el registro, los valores registrados hasta el momento se pierden.
Para realizar una copia de seguridad de los valores registrados, guarde la medición en el
proyecto (Página 109) antes de volver a activar el registro.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

107

Uso de la función Trace y de analizador lógico
6.4 Manejo

Desactivación de Trace en el dispositivo
Para desactivar un Trace en el dispositivo activado, proceda del siguiente modo:
1. Haga clic en el botón
.
El Trace en el dispositivo se desactiva.
La visualización de estado pasa a "inactivo".

6.4.5.3

Visualización de registro

Requisitos
● Existe una conexión online con el dispositivo.
● Existe un Trace con registro en el dispositivo.
O bien:
● Existe una medición en la carpeta de sistema "Mediciones".

Procedimiento
Para visualizar el registro, proceda del siguiente modo:
1. Seleccione un Trace en dispositivo.
2. Haga doble clic en el Trace seleccionado.
3. En caso necesario, active el botón

para la visualización.

O bien:
1. Seleccione una medición

en la carpeta de sistema

"Mediciones".

2. Haga doble clic en la medición seleccionada.

Resultado
El registro se visualiza en la ficha "Diagrama".

Consulte también
Interfaz: Árbol del proyecto, carpeta "Traces" (Página 61)

6.4.5.4

Análisis del registro en curso

Requisitos
● El registro en curso se visualiza en la ficha "Diagrama"

108

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Guardar los datos registrados actualmente como medición
Para analizar un determinado rango de tiempo de un registro en curso, haga lo siguiente:
1. Haga clic en el botón
.
Los datos registrados hasta el momento se agregarán a las mediciones.
El registro actual no se verá afectado y continuará sin interrupción.

Análisis de la medición
Para visualizar la medición guardada, haga lo siguiente:
1. Haga doble clic en la carpeta
"Mediciones" para abrir la medición que acaba de
guardarse
La ficha "Diagrama" de la medición se abrirá en el área de trabajo.

Consulte también
Visualización de registro (Página 108)
Área de trabajo Ficha Diagrama (Página 112)

6.4.5.5

Almacenamiento de mediciones en el proyecto

Requisitos
● Existe una conexión online con el dispositivo.
● Existe un Trace con registro en el dispositivo.
● Los datos del Trace en dispositivo han de haberse mostrado en el diagrama de curvas al
menos una vez. Para la visualización se cargan los datos del registro desde el dispositivo.

Procedimiento
Para guardar un registro en el proyecto, proceda del siguiente modo:
1. Abra el Trace con los datos registrados.
2. Si es necesario, active el botón
procedentes del dispositivo.
3. Tras activarse el botón

para asegurarse de que se carguen los datos actuales

, espere hasta que se carguen y se visualicen todos los datos.

4. Haga clic en el botón
.
La medición se agrega a la carpeta

"Mediciones".

5. Guarde el proyecto en el TIA Portal.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

109

Uso de la función Trace y de analizador lógico
6.4 Manejo

Nota
Creación de mediciones
Puede crearse una medición a partir de un Trace en dispositivo en cualquier momento.
Utilice esta función, p. ej., durante un registro para guardar los datos registrados hasta el
momento y analizarlos posteriormente como medición estática.

6.4.5.6

Exportación e importación de mediciones

Requisitos
Para la exportación existe por lo menos una medición en la carpeta de sistema "Mediciones".

Exportación de mediciones
Para exportar una medición, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en una medición de la carpeta de sistema
"Mediciones" y seleccione el comando del menú contextual "Exportar medición".
2. Seleccione una carpeta, un nombre de archivo y un tipo de archivo para guardar la
medición.
3. Haga clic en el botón "Guardar".

Importación de mediciones
Para importar una medición, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en la carpeta de sistema
seleccione el comando "Importar medición" del menú contextual.

"Mediciones" y

2. Seleccione el archivo que debe importarse, p. ej., del tipo de archivo "*.ttrecx" con la
medición.
3. Haga clic en el botón "Abrir".
La medición importada se muestra en la carpeta de sistema
de archivo.

"Mediciones" con el nombre

Nota
Importación y exportación de configuraciones de Trace
Está disponible la misma función para la exportación e importación de configuraciones de
Trace.

110

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

6.4.5.7

Transmisión de la configuración de Trace del dispositivo al proyecto

Requisitos
● Existe una conexión online con el dispositivo.
● Existe un Trace en el dispositivo.

Procedimiento
Para transmitir una configuración de Trace al proyecto, proceda del siguiente modo:
1. Abra un Trace en dispositivo.
2. En caso necesario, active el botón
3. Haga clic en el botón

para la visualización.

para transferir la configuración de Trace desde el dispositivo.

Resultado
La configuración se transfiere a la carpeta de sistema
de Trace.

"Traces" como nueva configuración

Las opciones de representación actuales están incluidas en la nueva configuración de Trace.
Si existe una configuración de Trace con el mismo nombre en la carpeta de sistema, se
sobrescribirá.

6.4.5.8

Borrado de Traces en el dispositivo

Requisitos
● Existe una conexión online con el dispositivo.
● Existe un Trace en el dispositivo.

Procedimiento
Para borrar un Trace del dispositivo, proceda del siguiente modo:
1. Abra un Trace en dispositivo.
2. En caso necesario, active el botón

para la visualización.

3. Haga clic en el botón
.
Se abre un cuadro de diálogo que solicita confirmación.
4. Confirme el cuadro de diálogo para efectuar el borrado.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

111

Uso de la función Trace y de analizador lógico
6.4 Manejo
O bien:
1. Seleccione uno o varios Traces en dispositivo

/

en el árbol del proyecto.

2. Pulse <Supr> para borrar los Traces en dispositivo.
Se abre un cuadro de diálogo que solicita confirmación.
3. Si es necesario, seleccione una opción de borrado y confirme el cuadro de diálogo para
efectuar el borrado.

6.4.6

Área de trabajo Ficha Configuración

6.4.6.1

Configuración de Trace

Requisitos
La ficha "Configuración" del área de trabajo está abierta.

Configuración de Trace
Durante la configuración se especifican las condiciones de registro y disparo y se seleccionan
las señales que deben registrarse.
Ver capítulo "Configuración" en el dispositivo (Página 120) correspondiente.
Nota
Almacenamiento de configuración de Trace
La configuración de Trace se guarda con el proyecto en el TIA Portal.
Si se cierra el proyecto sin guardar, la configuración queda descartada.

Consulte también
Ver configuración (Página 104)

6.4.7

Área de trabajo Ficha Diagrama

6.4.7.1

Uso del diagrama de curvas
El diagrama de curvas muestra las señales de un registro seleccionadas en la tabla de
señales.
Es posible ampliar o reducir el área de representación a voluntad. Mediante cursores de
medición pueden seleccionarse diferentes valores para visualizarlos en la tabla de señales.

112

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo
A continuación se describe mediante ejemplos el uso del diagrama de curvas y de los cursores
de medición.

Requisitos
● Se han seleccionado para visualización un Trace en dispositivo o una medición.
● Si se trata de un Trace en dispositivo, el botón

de visualización está activado.

● La ficha "Diagrama" del área de trabajo está abierta.

Observación de un registro en curso
Para visualizar todos los datos de un registro en curso, haga lo siguiente:
1. Active "Visualizar todo" mediante el botón

.

Se mostrarán todo el rango de tiempo y todos los valores del registro en curso.
Para visualizar una ventana temporal constante de un registro en curso, haga lo siguiente:
1. Active "Visualizar todo" mediante el botón

.

2. Seleccione el rango de tiempo deseado mediante el botón

.

El visor de curvas se actualizará sin modificación de la escala del rango de tiempo.

Evaluación de un momento concreto de un registro
Para visualizar los valores de un punto de medición concreto, haga lo siguiente:
1. Visualice el cursor de medición vertical con el botón

.

2. Desplace con el ratón un cursor de medición a la posición deseada del registro.
Los valores de las señales se muestran en la tabla de señales y en la paleta "Cursores de
medición" de la Task Card "Trace".

Evaluación de la diferencia entre dos puntos de medición
Para visualizar la diferencia, haga lo siguiente:
1. Visualice el cursor de medición vertical con el botón

.

2. Desplace con el ratón los dos cursores de medición a los puntos de medición deseados del
registro.
Los valores de las señales y la diferencia se muestran en la tabla de señales y en la paleta
"Cursores de medición" de la Task Card "Trace".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

113

Uso de la función Trace y de analizador lógico
6.4 Manejo

Utilización del cursor de medición horizontal
Para comprobar si se alcanza un determinado valor, haga lo siguiente:
1. Visualice el cursor de medición horizontal con el botón

.

2. Desplace con el ratón un cursor de medición al valor deseado del registro.
Los valores de los cursores de medición para la señal seleccionada se muestran en la
paleta "Cursores de medición" de la Task Card "Trace".

Desplazamiento del rango de tiempo visualizado
Para desplazar el rango de tiempo mostrado, haga lo siguiente:
1. Seleccione un rango de tiempo mediante el botón

.

2. Desplace la curva al rango de tiempo deseado girando la rueda del ratón mientras mantiene
pulsada la tecla <Mayús>.

Poner en primer plano una señal
1. Muestre la leyenda con el botón

.

2. Haga clic en una señal en la leyenda.
O bien:
1. Haga clic en una señal en el diagrama de curvas.
La señal se pondrá en primer plano y se resaltará/seleccionará en la tabla de señales. El eje
de valores se actualizará para la señal seleccionada.

Consulte también
Ver diagrama (Página 105)
Interfaz Diagrama de curvas (Página 68)
Interfaz de la tabla de señales (Página 74)

6.4.7.2

Utilización de la tabla de señales
La tabla de señales muestra las señales de un Trace en el dispositivo o de una medición. En
el caso de las mediciones superpuestas, se visualizan las señales preseleccionadas en la
selección de señal. En la tabla es posible mostrar u ocultar cada una de las señales y ajustar
propiedades para la visualización.
Para algunos tipos de datos se pueden seleccionar bits individuales y mostrarse como trazas
de bits.
A continuación se describe el manejo de la tabla de señales.

114

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Requisitos
● Hay un Trace en dispositivo o una medición abiertos en la ficha "Diagrama".
● Si se trata de un Trace en dispositivo, el botón

de visualización está activado.

● Para visualizar bits individuales como trazas de bits:
Al menos una señal registrada soporta la visualización como traza de bit.

Mostrar u ocultar señales individuales y cambiar su color
Para ajustar la visualización a sus necesidades, haga lo siguiente:
1. Haga clic en el símbolo de la señal correspondiente en la columna
deseleccionarlo en la visualización.

para seleccionarlo o

2. Haga clic en la señal en cuestión en la columna "Color" y seleccione un color.
Se modificará el color predeterminado de la señal.

Poner en primer plano una señal
1. Seleccione la fila de la señal en la tabla de señales.
Se mostrará la escala Y de la señal.
La curva de la señal se pondrá en primer plano en el diagrama de curvas.

Seleccionar bits individuales para visualizarlos como traza de bits
Para mostrar bits individuales como traza de bits en el diagrama de curvas inferior, haga lo
siguiente:
1. Haga clic en el símbolo

de una señal en la tabla de señales.

2. Haga clic en el símbolo
en la selección de bits abierta de la señal.
Los bits se seleccionarán o se deseleccionarán para la visualización.

Consulte también
Visualización de registro (Página 108)

6.4.7.3

Uso del grupo de señales en la tabla de señales
Con el grupo de señales puede asignarse la misma escala a varias señales individuales, lo que
permite, p. ej,. comparar mejor los recorridos de curva.
Las señales binarias no pueden agruparse.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

115

Uso de la función Trace y de analizador lógico
6.4 Manejo
Las siguientes instrucciones describen la utilización del grupo de señales.
Nota
Almacenamiento de los grupos de señales
Los grupos de señales pueden guardarse individualmente para cada medición con la función
"Usar vista actual como estándar" (botón
).
Si no se guardan los grupos de señales y el proyecto, los grupos de señales creados se
perderán al cerrar la ficha "Diagrama".

Requisitos
● Se visualizan un Trace en dispositivo o una medición.
● Si se trata de un Trace en dispositivo, el botón

de visualización está activado.

● La ficha "Diagrama" del área de trabajo está abierta.
● En la tabla de señales existen por lo menos dos señales que no son del tipo BOOL.

Asignación de señales a un grupo de señales
Para crear un grupo de señales y asignar señales a dicho grupo, haga lo siguiente:
1. Seleccione la fila o celda de la señal deseada en la tabla de señales.
2. Haga clic en el campo gris en la columna "Grupo de señales"
El símbolo de cadena aparece en el campo gris y se preasigna el nombre del grupo de
señales:
3. Haga clic en el campo gris de las demás señales que desee asignar al grupo de señales en
cuestión.
O bien:
1. Haga clic en el campo de texto de la columna "Grupo de señales" de la señal que desee
agregar al grupo.
2. Introduzca un nombre para el grupo.
3. Para agregar otras señales, introduzca el mismo nombre de grupo en el correspondiente
campo de texto o seleccione el nombre de grupo en la lista desplegable.
Las escalas Y de las señales agregadas al grupo se escalarán con los mismos valores que la
señal seleccionada en primer lugar. Toda modificación de un valor de escala se hace extensiva
siempre a todo el grupo.

116

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Eliminar señales de un grupo de señales
Para anular la asignación de una señal a un grupo de señales, haga lo siguiente:
1. Haga clic en el símbolo de cadena
deseada.

de la columna "Grupo de señales" de la señal

O bien:
1. Haga clic en el campo de texto de la columna "Grupo de señales" de la señal deseada.
2. Pulse la tecla <Supr>.
O bien:
1. Para eliminar varias señales, seleccione el correspondiente campo de texto de la columna
"Grupo de señales" con las teclas <Mayús> y <Control>.
2. Pulse la tecla <Supr>.
Las señales se borrarán del grupo de señales o se eliminará el grupo.

6.4.7.4

Observación de señales rápidas

Requisitos
● Existe una conexión online con el dispositivo.
● Existe un Trace en el dispositivo.

Procedimiento
Para observar de manera permanente la evolución de una señal rápida, haga lo siguiente:
1. Seleccione un Trace en el dispositivo.
2. Haga doble clic en el Trace seleccionado.
3. Active el botón

para la observación.

4. Active el botón

para la repetición automática del registro.

Resultado
El registro vuelve a activarse automáticamente cada vez que finaliza un registro. La
visualización del diagrama de curvas es similar a la de un osciloscopio.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

117

Uso de la función Trace y de analizador lógico
6.4 Manejo

6.4.7.5

Comparación de registros (mediciones superpuestas)

Requisitos
● Se ha creado una medición superpuesta directamente o de manera implícita al arrastrar
mediciones a la carpeta de sistema
"Mediciones superpuestas".
Ver también Crear medición superpuesta (Página 105).

Agregar mediciones para comparar
Para comparar mediciones, agregue las mediciones que desee comparar a la medición
superpuesta. Haga lo siguiente:
1. En el árbol de proyecto, desplace una o varias mediciones
desde la carpeta de
sistema
"Mediciones" hasta el icono de la medición superpuesta
mediante Drag &
Drop.
O bien:
1. Importe mediciones guardadas mediante el comando de menú contextual "Importar
medición".
Se agregará una copia de las mediciones a la medición superpuesta.
Nota
Las modificaciones de ajustes de mediciones realizados dentro de la medición superpuesta no
afectan a las mediciones originales. Las mediciones originales permanecerán sin cambios.

Seleccionar señales de las mediciones para la tabla de señales
Para seleccionar las señales para la tabla de señales en la ficha "Diagrama", haga lo siguiente:
1. Haga doble clic en el árbol de proyecto en el icono de la medición superpuesta
En al área de trabajo se mostrarán las fichas de la medición superpuesta.

.

2. Haga clic en el área de trabajo en la ficha "Selección de señal".
Las señales de todas las mediciones se mostrarán en la tabla.
3. Active o desactive respectivamente las casillas de verificación de las señales que desee
visualizar u ocultar en la tabla de señales.
Las señales activadas se mostrarán en la tabla de señales de la ficha "Diagrama".

118

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.4 Manejo

Utilización de la tabla de señales
Para abrir y utilizar la tabla de señales, haga lo siguiente:
1. Haga clic en el área de trabajo en la ficha "Diagrama".
2. Dentro de la ficha "Diagrama", haga clic en la ficha "Señales".
3. Utilice la tabla de señales como se describe en Utilización de la tabla de señales
(Página 114).

Alineación de mediciones
Para alinear el eje temporal de las mediciones para la comparación, haga lo siguiente:
1. Dentro de la ficha "Diagrama", haga clic en la ficha "Mediciones".
2. Seleccione la alineación de las mediciones con ayuda de las casillas de verificación.
3. Ajuste la alineación y, si es necesario, un offset para la alineación de las distintas
mediciones.
Las mediciones se alinearán entre sí en el eje temporal de acuerdo con los ajustes.
(La alineación exacta de dos mediciones se describe en el capítulo siguiente).

Uso del diagrama de curvas
Para abrir y utilizar el diagrama de curvas, haga lo siguiente:
1. Haga clic en el área de trabajo en la ficha "Diagrama".
2. Utilice el diagrama de curvas como se describe en Uso del diagrama de curvas
(Página 112).

Consulte también
Alineación exacta de mediciones (mediciones superpuestas) (Página 119)

6.4.7.6

Alineación exacta de mediciones (mediciones superpuestas)

Requisitos
● Se ha creado una medición superpuesta.
● Se han agregado a la medición superpuesta mediciones para comparar.
● Se han seleccionado señales de las mediciones para la tabla de señales.
● La ficha "Diagrama" de la medición superpuesta se abrirá en el área de trabajo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

119

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

Alineación exacta de mediciones con diferencia de posición ΔX
Para alinear con exactitud el eje temporal de dos mediciones, haga lo siguiente:
1. Visualice el cursor de medición vertical con el botón

.

2. Amplíe el rango de tiempo, p. ej., con el botón
, hasta poder posicionar el primer cursor
de medición exactamente sobre el punto de referencia deseado de la primera medición.
3. Desplace con el ratón el primer cursor de medición a la posición deseada.
4. Busque el punto de referencia de la segunda medición, p. ej., cambiando a "Visualizar todo"
con el botón
.
5. Amplíe el rango de tiempo, p. ej., con el botón
, hasta poder posicionar el segundo cursor
de medición exactamente sobre el punto de referencia deseado de la segunda medición.
6. Desplace con el ratón el segundo cursor de medición a la posición deseada.
7. Abra la Task Card "Trace".
8. Seleccione el valor de la diferencia de posición ΔX en la paleta "Cursores de medición".
9. Copie el valor al portapapeles.
10.Inserte el valor del portapapeles en la celda Offset de la primera o la segunda medición.
Las dos mediciones estarán alineadas entre sí con exactitud en los puntos de medición
deseados.
Nota
Al insertar la diferencia de posición como offset, adapte el signo si es necesario.

6.4.7.7

Impresión de un registro
El diagrama de curvas permite guardar la visualización como gráfico y copiarlo en el
portapapeles. Utilice también estas funciones (Página 68) para imprimir.

6.5

Dispositivos

6.5.1

CPU S7-1200/1500

6.5.1.1

Captación de variables

Captación de variables en función de dispositivo
A continuación se enumeran las áreas de operandos de las que pueden registrarse variables:
● Memoria imagen de proceso de las entradas
● Memoria imagen de proceso de las salidas

120

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
● Marca
● Bloques de datos
● Periferia

Tipos de datos
Se puede registrar una selección de tipos de datos simples y compuestos. La disponibilidad de
los distintos tipos de datos depende del dispositivo utilizado.
Encontrará más información en la ayuda, en "Vista general de los tipos de datos válidos".
La tabla siguiente muestra una lista de los tipos de datos permitidos:
Tipos de datos

Nota

Números binarios
BOOL

-

Secuencias de bits
BYTE

-

WORD

-

DWORD

-

LWORD 1)

Nombre simbólico necesario

Enteros
SINT

-

USINT

-

INT

-

UINT

-

DINT

-

UDINT

-

LINT

Nombre simbólico necesario

1)

ULINT 1)

Nombre simbólico necesario

Números en coma flotante
REAL

-

LREAL

Nombre simbólico necesario

Temporizadores
TIME
LTIME

1)

-

Fecha y hora
DATE

-

TOD

-

LTOD 1)

-

LDT

-

1)

1) No permitido en el S7-1200.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

121

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

6.5.1.2

Vida útil de la configuración de Trace y de los valores registrados en el dispositivo
Las configuraciones de Trace se conservan en caso de Power Off. Tras el rearranque de la
CPU, el registro se activa de nuevo.
Los valores registrados se pierden con el rearranque.
Nota
Cargar una configuración en el dispositivo en el estado operativo "STOP"
Tras cargar una configuración en el estado operativo "STOP", tenga en cuenta que deberá
comprobar los Traces en el dispositivo y que tal vez tenga que volverlos a activar o a transferir.
Nota
En caso de modificaciones de variables de disparo que repercuten en la dirección, es preciso
volver a transferir también la configuración de Trace al dispositivo.
Este es el caso, p. ej. cuando se ha acortado o alargado un bloque de datos, o si se ha
modificado el tipo de datos.

6.5.1.3

Niveles de registro
Se pueden utilizar todos los niveles de ejecución para el ciclo de registro. Los niveles de
ejecución cíclicos pueden seleccionarse con el botón . En el caso de niveles de registro no
periódicos, la duración de registro es indefinida.
Nota
Las medidas se registran cada vez al final del OB tras la ejecución del programa del usuario.
Nota
Momento de registro con Motion Control
La referencia de tiempo para los valores de medición se determina de forma distinta si se
configura un bloque de organización de Motion Control como momento de registro y el
dispositivo se sincroniza a través de IRT. Este comportamiento se describe en Sincronización
horaria con Motion Control (Página 123).

Consulte también
Sincronización horaria de CPU SIMATIC S7 (https://support.industry.siemens.com/cs/ww/es/
view/82203451/en)

122

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

6.5.1.4

Sincronización horaria con Motion Control
Con Motion Control se necesita para el análisis una referencia de tiempo a los límites de ciclo
del ciclo de aplicación. Esa es la razón por la que la referencia de tiempo para los valores de
medición en la configuración con bloques de organización de Motion Control se determina de
forma distinta al momento de registro. Como momento del valor de medición se guarda
siempre el tiempo (absoluto) sincronizado desde el inicio del ciclo de aplicación actual. Las
variables de los objetos tecnológicos se refieren siempre de forma coherente a los límites de
ciclo.
El comportamiento descrito se aplica a los siguientes bloques de organización de Motion
Control:
● MC‑Servo [OB91]
● MC‑PreServo [OB67]
● MC‑PostServo [OB95]
● MC‑Interpolator [OB92]
● MC‑PreInterpolator [OB68]
Los dispositivos deben comunicarse a través de IRT.
La siguiente figura muestra los momentos almacenados de los valores de medición con un
ciclo de aplicación de 3 y MC‑Interpolator como momento de registro configurado:

6HUYR

7

,32

7

6HUYR

7

T0 … T6

Ciclo IRT

T0

Inicio del ciclo de aplicación n

T3

Inicio del ciclo de aplicación n+1

T6

Inicio del ciclo de aplicación n+2

7

,32

7

7

7

Nota
OB61-OB63 como momento de registro
Con estos OB como momento de registro configurado se utiliza la hora del sistema,
independientemente de la comunicación. El registro se comporta igual que en los dispositivos
sin comunicación IRT.
Sincronice las horas de los dispositivos para facilitar la evaluación con tiempo absoluto.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

123

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

Nota
Valores de medición con tiempos idénticos
El rebase de los niveles de registro (p. ej., OB MC-Interpolator en el ejemplo anterior) puede
producir valores de medición con sello de tiempo idéntico.

6.5.1.5

Capacidad funcional
La tabla siguiente muestra la capacidad funcional máxima que puede registrarse con la función
Trace y de analizador lógico:
Dispositivo

Número máximo de Traces
en dispositivo

Número máximo de señales
por configuración de Trace

2

16

Al menos 4

16

S7-1200
(a partir de versión de firmware V4.0)
S7-1500, ET 200SP,
CPU 1513pro-2 PN,
CPU 1516pro-2 PN, S7-1500 Software
Controller, S7-1500 Drive Contro‐
ller, ET 200SP Open Controller

(en función del tipo de CPU)

Para el Trace del proyecto se aplican las mismas capacidades funcionales que para los
dispositivos.
Ejemplo: CPU 1516-3 PN/DP
● Máximo 7281 puntos de medición con 16 señales de variables PLC del tipo de datos
DWORD
● Máximo 21844 puntos de medición con 16 señales de variables PLC del tipo de datos BOOL
● Máximo 58250 puntos de medición con una señal de una variable PLC del tipo de datos
BOOL
Encontrará más información al respecto en la FAQ con la ID de artículo 102781176 (http://
support.automation.siemens.com/WW/view/es/102781176).

6.5.1.6

Carga de CPU por registro de Trace
Un registro de Trace activado aumenta el tiempo de ejecución del nivel de registro
correspondiente, lo que puede provocar un rebase del nivel de ejecución en caso de carga
elevada de la CPU.
Solución en caso de rebase del nivel de ejecución:
● Modificación de la configuración de Trace
1) Configure menos variables y señales.
2) Aumente a continuación el número de variables y señales gradualmente hasta alcanzar
el número de señales máximo sin rebase del nivel de ejecución.
● Selección de un nivel de registro más lento

124

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

6.5.1.7

Trace del proyecto
Los siguientes dispositivos admiten el Trace del proyecto a partir de la versión de firmware
V2.8:
● CPU SIMATIC S7-1500, ET 200SP, CPU 1513pro-2 PN y CPU 1516pro-2 PN
● Controladores por software SIMATIC S7-1500
● SIMATIC S7-1500 Drive Controller
● ET 200SP Open Controller

6.5.1.8

Interfaz de software de la configuración

Distribución de la interfaz en Trace
Las posibilidades de ajuste varían en función del dispositivo configurado.

Visualización en la ficha "Configuración" del área de trabajo
La figura siguiente muestra un ejemplo de representación:

La navegación local ofrece las siguientes entradas para la selección:
● Configuración
– Señales (Página 126)
– Condiciones de registro (Página 127)

Ver y modificar las propiedades de una configuración de Trace
Un Trace se selecciona en el árbol del proyecto y se visualiza en la ficha "Configuración".
La configuración de Trace se modifica offline. La configuración de Trace online aparece como
de solo lectura.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

125

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

Distribución de la interfaz con Trace del proyecto
La configuración de Trace dependiente del dispositivo se muestra en la ventana de inspección,
en caso de que en la tabla "Dispositivos participantes" de la ficha Configuración se haya
seleccionado un dispositivo.

Configuración en la ficha "Propiedades" de la ventana de inspección
La figura siguiente muestra un ejemplo de representación con un dispositivo seleccionado:

La navegación local ofrece las siguientes entradas para la selección:
● Configuración
– Señales (Página 126)
– Condiciones de registro (Página 127)

Interfaz Señales
El área "Señales" muestra una tabla en la que se configuran las señales que deben registrarse
para la configuración de Trace seleccionada.
Las señales también se pueden insertar en la tabla mediante Drag & Drop.
Las señales se pueden ordenar mediante Drag & Drop.

Posibilidades de ajuste y visualizaciones en "Señales"
La figura siguiente muestra un ejemplo de representación:

126

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
La tabla siguiente muestra los ajustes y las visualizaciones:
Columna

Símbolo

"Nombre"

Descripción
Visualización del símbolo de señal para una señal seleccionada

-

Campo de entrada para el nombre o la dirección de la señal
Ejemplos:
● "Bloque_datos_1".Presión
● M0.0
● DB1.DBW3
Botón para abrir la tabla de selección de señal

-

El botón se muestra al seleccionar la fila de la tabla.
Haciendo clic en el símbolo se abre una tabla que ofrece señales que
pueden seleccionarse. La señal seleccionada se muestra en el campo de
entrada.
"Tipo de datos"

-

Campo de texto con la indicación del tipo de datos de la señal

"Dirección"

-

Campo de entrada para la dirección de la señal
En las variables optimizadas o con seguridad de tipos, el campo perma‐
nece vacío.

"Comentario"

-

Campo de entrada para un comentario sobre la señal

Comandos del menú contextual
La tabla siguiente muestra los comandos del menú contextual de la tabla:
Comando del menú contextual

Descripción

"Cortar"

No seleccionable

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Insertar"

Inserta el contenido del portapapeles a partir de la fila seleccionada.
El contenido existente se sobrescribe.

"Borrar"

Borra las filas seleccionadas de la tabla o borra el contenido de la
celda seleccionada.

"Cambiar nombre"

Pasa la celda seleccionada al modo de edición.

Condiciones de registro
Interfaz Condiciones de registro
El área "Condiciones de registro" muestra la condición de disparo para la configuración de
Trace seleccionada y en qué ciclo, con qué rapidez y durante cuánto tiempo se registra.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

127

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

Muestreo
La figura siguiente muestra un ejemplo de ajustes de muestreo:

La tabla siguiente explica los ajustes y las visualizaciones:
Ajuste/visualización

Descripción

"Momento de registro"
Campo de entrada Ni‐
vel de registro

Selección del momento de registro

Campo de texto Direc‐
ción del OB

Información detallada sobre el momento de registro seleccionado

Ver Niveles de registro (Página 122)

"Registrar todos"
Campo de entrada Re‐
ducción

Introducción de la reducción referida al factor de reducción y a la unidad

Lista desplegable Fac‐
tor de reducción

Selección de la unidad del factor de reducción
Pueden realizarse los siguientes ajustes:
● "Ciclo"
● "s" de segundos
La posibilidad de ajuste depende del nivel de registro seleccionado
en "Momento de registro".

Campo de texto Tiem‐
po de muestreo

Visualización del intervalo de muestreo en función de la reducción con‐
figurada y la unidad seleccionada (solo para OB equidistantes)

"Duración de registro máx."
Campo de texto Dura‐
ción de registro máx.

Visualización de la duración de registro máxima calculada

"Utilizar la duración de
registro máx."

Ajuste de la duración de registro a la duración de registro máxima

La "Duración de registro máx." depende del número de señales que se
registran y del tipo de datos que tienen estas señales.
Al activar la casilla de verificación, la duración de registro se ajusta a la
duración de registro máxima posible. Se tiene en cuenta el factor de
reducción ajustado en el campo de entrada "Registrar todos". Si se agre‐
gan otras señales, se ajusta la duración de registro.
Encontrará más información al respecto en la FAQ con la ID de artículo
102781176 (http://support.automation.siemens.com/WW/view/es/
102781176).

"Duración de registro"

128

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
Ajuste/visualización
Campo de entrada Du‐
ración de registro

Lista desplegable Uni‐
dad

Descripción
Introducción de la duración de registro referida a la unidad seleccionada
Si la casilla de verificación "Duración de registro = Duración de registro
máx." está activada, el valor mostrado en "Duración de registro máx."
sobrescribe las entradas.
Selección de la unidad para la duración de registro
Pueden realizarse los siguientes ajustes:
● "Puntos de medición"
Se registran como máximo los puntos de medición parametrizados
en Duración de registro.
● "s" de segundos
La posibilidad de ajuste depende del nivel de registro seleccionado
en "Momento de registro".

Campo de texto Dura‐ Visualización de la duración de registro calculada (solo para OB equidis‐
ción de registro calcula‐ tantes)
da

Disparo
La figura siguiente muestra un ejemplo de ajustes de disparador:

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

129

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
La tabla siguiente explica los ajustes y las visualizaciones:
Ajuste/visualización

Descripción

"Disparador"

Selección del disparador

Lista desplegable Dis‐
parador

Pueden realizarse los siguientes ajustes:
● "Registro inmediato"
El registro se efectúa inmediatamente después de la activación en el
dispositivo.
El disparador global se dispara de inmediato con independencia del
estado operativo del dispositivo.
● "Disparo a variable"
El registro se efectúa en cuanto se activa el Trace en el dispositivo y
se cumple la condición de disparo configurada.
● "Observar sin disparo" (Traces)
El registro se efectúa en cuanto se activa el Trace en el dispositivo y
no finaliza automáticamente. Cuando el usuario finaliza el registro,
hay como máximo tantos valores de medición en el dispositivo como
los que se han configurado en la duración de registro.
Este modo de disparo es especialmente adecuado para observar
señales lentas y solo está disponible con Trace.
● "Disparo de otro dispositivo" (Trace del proyecto)
El disparador global para el inicio de Trace se dispara desde otro
dispositivo.
Este modo de disparo solo está disponible en Trace del proyecto.

Campo de texto
"Variable de disparo"
Campo de entrada Va‐
riable de disparo

Con la "Variable de disparo" se especifica una señal que se utiliza para
disparar el registro.
Introducción de una señal
Ejemplos:
● "Bloque_datos_1".Temperatura
● M0.0
● DB1.DBW3
Ver también Tipos de datos para la variable de disparo (Página 133).
Abrir la tabla de selección de señal
Al hacer clic en el símbolo, se abre una tabla con señales que pueden
seleccionarse como variable de disparo. La señal seleccionada se mues‐
tra en el campo de entrada.

Campo de texto Direc‐
ción de la variable de
disparo
"Evento"

Visualización de la dirección de la variable de disparo
En las señales puramente simbólicas, el campo permanece vacío.
Conforme al tipo de datos de la variable de disparo, se ofrecen para su
selección los eventos utilizables con esta variable de disparo.
La configuración del evento solo es posible si se ha introducido una señal
válida como variable de disparo.

Lista desplegable Even‐ Selección de evento con el que se comprueba la variable de disparo
tos de disparo
Las entradas de la lista desplegable se describen en el capítulo Evento
de disparo (Página 133).
Campo de texto

130

-

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
Ajuste/visualización

Descripción

"Valor"

Configuración del evento seleccionado
Las posibilidades de configuración varían en función del formato de la
variable de disparo y del evento seleccionado.
Ver Evento de disparo (Página 133).

"Predisparo"

Con el "Predisparo" se define el número de puntos de medición que se
registran antes de que se cumpla la condición de disparo propiamente
dicha.
Si el evento de disparo tiene lugar de inmediato o poco después de la
activación del registro, la duración de registro puede ser menor.
Ejemplos de "Duración de registro (a)" = 20 puntos de medición y "Pre‐
disparo (b)" = 5 puntos de medición:
● Caso 1: El evento de disparo tiene lugar 50 puntos de medición tras
la activación del registro.
Duración de registro real (a) = 20 puntos de medición
● Caso 2: El evento de disparo tiene lugar 2 puntos de medición tras la
activación del registro.
Duración de registro real (a) = 17 puntos de medición

Campo de entrada Du‐
ración

Introducción de la duración referida a la selección de la lista desplegable

Lista desplegable Uni‐
dad

Selección de la unidad
Pueden realizarse los siguientes ajustes:
● "Puntos de medición"
● "s" de segundos
La posibilidad de ajuste depende del nivel de registro seleccionado
en "Momento de registro".

Campo de texto Dura‐
ción de predisparo re‐
sultante

Visualización de la "Duración de predisparo" calculada
La duración se muestra con el registro en OB equidistantes.

Mediciones en el dispositivo (tarjeta de memoria)
La figura siguiente muestra un ejemplo de ajustes para el almacenamiento de mediciones en
el dispositivo:

Con Traces de proyecto no es posible el almacenamiento de mediciones en el dispositivo
(tarjeta de memoria).

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

131

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

Nota
Memoria disponible en el dispositivo (tarjeta de memoria)
Parte de la memoria en el dispositivo (tarjeta de memoria) es usada para funciones relevantes
del sistema o está reservada para ellas.
Por esta razón no está disponible toda la memoria para almacenar las mediciones.
Para más detalles, consultar el Manual de funciones Estructura y utilización de la memoria de
la CPU (https://support.industry.siemens.com/cs/es/es/view/59193101).
Nota
Memoria necesaria para rearranque
Tras un rearranque del dispositivo, se almacenan en el dispositivo como máximo el número de
mediciones que se hayan parametrizado en "Número de mediciones".
Al efectuar un nuevo rearranque, tenga en cuenta que las mediciones ya almacenadas no se
sobrescribirán y el "número de mediciones" parametrizado se guardará de nuevo en el
dispositivo.
La tabla siguiente explica los ajustes y las visualizaciones:
Ajuste/visualización

Descripción

"Guardar las mediciones en Repetir automáticamente la medición y guardarla en el dispositivo de
el dispositivo (tarjeta de me‐ manera permanente
moria)"
Este ajuste solo es posible con el modo de disparo "Disparo a variable".
Las mediciones se guardan en la tarjeta de memoria "Primary".
En los Traces que tienen activada la opción Guardar en dispositivo (tar‐
para la repetición automá‐
jeta de memoria), no se ofrece la función
tica del registro.
Nota
Solo se guardan en el dispositivo las mediciones finalizadas. Los regis‐
tros desactivados por el usuario no se guardan en el dispositivo.
Esta función está disponible con las siguientes versiones de firmware:
● S7-1200 a partir de V4.2
● S7-1500 a partir de V2.0
La CPU S7-1500 R/H no permite esta función.

132

"Número de mediciones"

Introducción del número de mediciones que desea guardar en la tarjeta

"Memoria necesaria"

Visualizar la previsible memoria necesaria para todas las mediciones

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
Ajuste/visualización

Descripción
Mostrar la carga de la memoria
Muestra la ficha con la carga de la memoria.

"Comportamiento al alcan‐
zar el número"

Elección del comportamiento al alcanzar el "Número de mediciones"
Pueden realizarse los siguientes ajustes:
● "Desactivar registro"
Las mediciones se repetirán hasta que se alcance el "Número de
mediciones en la tarjeta" parametrizado.
● "Sobrescribir el registro más antiguo"
Las mediciones se guardan en un búfer en anillo y se repiten hasta
que el usuario desactiva el registro. En el momento en que el número
de mediciones supera el "Número de mediciones en la tarjeta"
parametrizado, se sobrescribe la medición más antigua que exista en
la tarjeta.
Nota
Tenga en cuenta que las operaciones de escritura repetidas con
mucha frecuencia pueden dañar la tarjeta.

Tipos de datos para la variable de disparo
La tabla siguiente muestra los tipos de datos admitidos para la variable de disparo:
Memoria necesaria y formato del número

Tipo de datos

1 byte

BOOL

Enteros de 8 bits

SINT, USINT, BYTE

Enteros de 16 bits

INT, UINT, WORD, DATE

Enteros de 32 bits
Enteros de 64 bits

DINT, UDINT, DWORD, TIME, TOD
1)

LINT, ULINT, LWORD, LTIME, LTOD, LDT

Números en coma flotante de 32 bits

REAL

Números en coma flotante de 64 bits

LREAL

1) No permitido en el S7-1200.

Evento de disparo
En función de la selección de la lista desplegable, se distinguen los siguientes ajustes para
"Evento".
A continuación se describen los diferentes eventos.

"=TRUE"
Tipos de datos admitidos: Bit (Página 133)
El registro se inicia con el estado TRUE del disparador.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

133

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

"=FALSE"
Tipos de datos admitidos: Bit (Página 133)
El registro se inicia con el estado FALSE del disparador.

"Flanco ascendente"
Tipos de datos admitidos: Bit (Página 133)
El registro se inicia cuando el disparador cambia de estado FALSE a TRUE.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"Señal de subida"
Tipos de datos admitidos: Números enteros y números en coma flotante (Página 133) (ningún
temporizador, fecha y hora)
El registro se inicia cuando el valor ascendente del disparador alcanza o excede el valor
configurado para este evento.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"Flanco descendente"
Tipos de datos admitidos: Bit (Página 133)
El registro se inicia cuando el disparador cambia de estado TRUE a FALSE.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"Señal de bajada"
Tipos de datos admitidos: Números enteros y números en coma flotante (Página 133) (ningún
temporizador, fecha y hora)
El registro se inicia cuando el valor descendente del disparador alcanza o está por debajo del
valor configurado para este evento.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"En rango"
Tipos de datos admitidos: Números enteros y números en coma flotante (Página 133)
El registro se inicia en cuanto el valor del disparador se encuentra dentro del rango de valores
configurado para este evento.

"Fuera del rango"
Tipos de datos admitidos: Números enteros y números en coma flotante (Página 133)

134

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
El registro se inicia en cuanto el valor del disparador se encuentra fuera del rango de valores
configurado para este evento.

"Cambio de valor"
Se soportan todos los tipos de datos.
Se comprueban los cambios en el valor a partir de la activación del registro. El registro se inicia
cuando se modifica el valor de disparo.
Este evento de disparo se soporta a partir de V13 SP1. Las versiones anteriores del TIA Portal
no pueden interpretar este disparador. Tenga en cuenta que en este caso no se emite ninguna
indicación explícita. Esto puede suceder, p. ej., si el Trace se transmite de una CPU a un TIA
Portal anterior a V13 SP1 o se importa una configuración de Trace.

"= valor"
Tipos de datos admitidos: Enteros (Página 133)
El registro se inicia cuando el valor del disparador sea igual al valor configurado para este
evento.

"<> valor"
Tipos de datos admitidos: Enteros (Página 133)
El registro se inicia cuando el valor del disparador sea diferente al valor configurado para este
evento.

"= patrón de bits"
Tipos de datos admitidos: Números enteros (Página 133) (ningún temporizador, fecha y hora)
El registro se inicia cuando el valor del disparador coincida con el patrón de bits configurado
para este evento.
La figura siguiente muestra las posibilidades de ajuste de un "patrón de bits":

Haciendo clic en el botón correspondiente, puede cambiarse entre los distintos símbolos.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

135

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
La tabla siguiente muestra los símbolos:
Símbolo

Descripción
El bit no se evalúa.
El bit se comprueba buscando FALSE.
El bit se comprueba buscando TRUE.

"<> patrón de bits"
Tipos de datos admitidos: Números enteros (Página 133) (ningún temporizador, fecha y hora)
El registro se inicia cuando el valor del disparador no coincida con el patrón de bits configurado
para este evento.

Consulte también
Configuración de las condiciones de disparo (Página 138)
Captación de variables (Página 120)

6.5.1.9

Configuración

Configuración de Trace: vista general
La configuración de las condiciones de registro y las señales que deben registrarse es
específica de dispositivo.

Requisitos
Hay una configuración de Trace creada y abierta en el área de trabajo en la ficha
"Configuración".

Procedimiento
La tabla siguiente muestra el procedimiento de configuración.
Paso

Descripción

1

Documentación de la configuración (opcional)
Introduzca un comentario y un autor para la configuración en la ventana de inspección.

2

Selección de señales (Página 137)

3

Configuración del ciclo y la duración de registro (Página 137)

Seleccione las señales que deben registrarse en el área "Señales".
Seleccione un momento de registro, un ciclo y la duración en el área "Condiciones de
registro".

136

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
Paso

Descripción

4

Configuración de las condiciones de disparo (Página 138)
Especifique en el área "Condiciones de registro" si el registro se efectúa de forma inmediata
o conforme a una condición de disparo.

5

Configuración de mediciones en el dispositivo (tarjeta de memoria) (Página 139)
Especifique en el área "Condiciones de registro" si se debe guardar la medición en el dis‐
positivo (tarjeta de memoria).

Selección de señales
Requisitos
● Se ha creado y abierto una configuración de Trace.
● El área "Señales" está abierta en la ficha "Configuración".

Procedimiento
Para configurar las señales que deben registrarse, proceda del siguiente modo:
1. Seleccione una señal. Existen las posibilidades siguientes:
– En la columna "Nombre", haga clic en el botón

y seleccione una variable.

– En la columna "Nombre", introduzca el nombre simbólico de la variable en la celda.
– Introduzca directamente la dirección en la columna "Dirección".
– Arrastre una señal hasta la tabla mediante Drag & Drop.
2. Haga clic en la columna "Comentario" e introduzca un comentario para la señal.
3. Repita las operaciones a partir del paso 1 hasta que todas las señales que deben
registrarse estén introducidas en la tabla.

Configuración del ciclo y la duración de registro
Requisitos
● Se ha creado y abierto una configuración de Trace.
● El área "Condiciones de registro" está abierta en la ficha "Configuración".

Procedimiento
Para configurar el ciclo y la duración de un registro, proceda del siguiente modo:
1. Haga clic en el botón

para el momento de registro.

2. Seleccione un OB para el momento de registro (Página 122).
3. Seleccione una unidad para el factor de reducción en la lista desplegable de "Registrar
cada".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

137

Uso de la función Trace y de analizador lógico
6.5 Dispositivos
4. Introduzca el factor de reducción en el campo de entrada de "Registrar cada".
5. Seleccione una unidad en la lista desplegable "Duración de registro".
6. Defina la duración de registro.
Existen las posibilidades siguientes:
– Introduzca un valor para la duración en el campo de entrada "Duración de registro".
– Active la casilla de verificación "Utilizar la duración de registro máx."

Configuración de las condiciones de disparo
Requisitos
● Se ha creado y abierto una configuración de Trace.
● El área "Condiciones de registro" está abierta en la ficha "Configuración".

Condición de disparo "Registro inmediato"
Para iniciar el registro de forma inmediata, proceda del siguiente modo:
1. Seleccione la entrada "Registro inmediato" en la lista desplegable "Disparador".
Los campos de entrada para la variable de disparo se ocultan.

Condición de disparo "Disparo a variable"
Para iniciar el registro conforme a una condición, proceda del siguiente modo:
1. Seleccione la entrada "Disparo a variable" en la lista desplegable "Disparador".
2. Seleccione una variable de disparo. Existen las posibilidades siguientes:
– Haga clic en el botón

para la variable de disparo y seleccione una variable.

– Introduzca directamente la dirección o el nombre simbólico de la variable en el campo
de entrada de la variable de disparo.
Se muestra una lista desplegable con eventos y campos de entrada. La visualización
depende del tipo de datos de la variable.
3. Configure el evento.
4. Seleccione una unidad del predisparo en la lista desplegable de "Predisparo".
5. Para registrar un intervalo de tiempo antes del evento de disparo, introduzca un valor
superior a 0 en el campo de entrada para el predisparo.
Nota
Comprobación cíclica de la condición de disparo
La condición de disparo se comprueba en cada ciclo independientemente del ajuste de
"Registrar todos". Para la detección segura del disparo, la señal de disparo debe estar
presente al menos un ciclo completo.

138

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

Configuración de mediciones en el dispositivo (tarjeta de memoria)
Requisitos
● Se ha creado y abierto una configuración de Trace.
● El área "Condiciones de registro" está abierta en la ficha "Configuración".
● Está ajustado el modo de disparo "Disparo a variable".
● El firmware del dispositivo soporta el registro de una medición en el dispositivo.

Procedimiento
Para guardar los datos en el dispositivo (en la tarjeta de memoria), haga lo siguiente:
1. Active la casilla de verificación "Guardar las mediciones en el dispositivo (tarjeta de
memoria)".
2. Introduzca en el campo de entrada "Número de mediciones" el número de mediciones que
se guardarán en la tarjeta.
3. Ajuste en la lista desplegable "Comportamiento al alcanzar el número" el comportamiento
deseado al alcanzar el "Número de mediciones".
Nota
No se evalúa el disparo durante el almacenamiento
Mientras se almacena el registro, no es posible evaluar nuevos disparos.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

139

Uso de la función Trace y de analizador lógico
6.5 Dispositivos

140

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con
TeleService
7.1

Principios básicos para el trabajo con TeleService

7.1.1

Introducción a TeleService

7

Introducción
Gracias a TeleService el controlador puede comunicarse a distancia. Ello permite gestionar,
controlar y supervisar de forma centralizada instalaciones descentralizadas a través de
conexiones remotas.

Funcionalidad
TeleService permite utilizar la funcionalidad del TIA Portal a través de una red telefónica o una
conexión a Internet estableciendo una conexión remota con una instalación remota. A través
de la conexión online es posible trabajar también con una instalación remota de la forma
habitual con el TIA portal.

Ventajas
El uso de TeleService proporciona las siguientes ventajas:
● Así también se puede acceder cómodamente a partes de instalaciones remotas e
integrarlas en un sistema más amplio.
● En caso de fallos en una instalación remota, pueden ofrecerse ayuda y soporte con rapidez
sin tener que estar presente.
● Uso eficaz de los recursos.
● Los costes se reducen considerablemente.
● Los tiempos improductivos de las instalaciones pueden reducirse sustancialmente.
● Aumenta la rentabilidad de su instalación.

Consulte también
Funcionalidad de TeleService (Página 142)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

141

Establecimiento de conexiones remotas con TeleService
7.1 Principios básicos para el trabajo con TeleService

7.1.2

Funcionalidad de TeleService

Posibles aplicaciones de TeleService
TeleService le ofrece las siguientes aplicaciones posibles:
● Acceder a instalaciones remotas (asistencia técnica a distancia):
Las instalaciones descentralizadas se pueden gestionar, controlar y supervisar de forma
centralizada a través de conexiones remotas.
Esto es posible con una CPU S7-300/400, una CPU S7-1200 y una CPU S7-1500 y, en
cada caso, con un TS Adapter MPI o un TS Adapter IE.
● Establecer conexiones desde y hacia instalaciones remotas (acoplamiento remoto PGPLC):
Con ayuda de PRODAVE MPI V5.0 y versiones superiores se puede establecer una
conexión a distancia hacia una instalación remota y, con la instrucción de comunicación
"PG_DIAL" , se puede establecer una conexión a distancia desde una instalación remota.
Esto es posible con una CPU S7-300/400 y un TS Adapter MPI.
● Intercambiar datos entre instalaciones (acoplamiento remoto PLC-PLC):
Mediante la instrucción de comunicación "AS_DIAL", dos sistemas de automatización
pueden intercambiar datos de proceso a través de la red telefónica.
Esto es posible con una CPU S7-300/400 y un TS Adapter MPI.
● Enviar un mensaje SMS desde una instalación:
Un sistema de automatización puede enviar un mensaje (SMS) a través de un módem
inalámbrico GSM con la instrucción de comunicación "SMS_SEND" .
Esto es posible con una CPU S7-300/400 y un TS Adapter MPI.
● Enviar un e-mail desde una instalación
Un sistema de automatización también puede enviar un correo electrónico utilizando las
siguientes instrucciones de comunicación y un TS Adapter IE .
– Las CPU S7-300/400 (CPU S7-31x-2PN/DP o CPU 41x-3PN/D) utilizan la instrucción
"AS_MAIL"
– Las CPU S7-1200 utilizan la instrucción "TM_MAIL"
– Las CPU S7-1500 utilizan la instrucción "TMAIL_C"

7.1.3

Listín telefónico en TeleService

Introducción
Haciendo doble clic en la carpeta "Listín telefónico" en el árbol del proyecto, se abre el editor
del listín telefónico, que muestra el Listín telefónico de TeleService.
Cada versión del TIA Portal dispone de un "listín telefónico global" propio. Si en una nueva
versión del TIA Portal se encuentra un listín telefónico global procedente de una versión
anterior del TIA Portal, se le consultará una única vez si desea importar este listín telefónico.

142

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico
Esto tiene la ventaja de que en la nueva versión del TIA Portal también dispondrá de los datos
de instalación de la versión anterior.

Propiedades del listín telefónico global
El listín telefónico global sirve en TeleService para gestionar los datos de instalación
específicos que son necesarios para establecer una conexión remota.
Al abrir el listín telefónico por primera vez, se muestra un listín telefónico vacío con todas las
columnas existentes; en caso contrario, se muestra el último listín telefónico editado.
En un listín telefónico puede introducirse el número de instalaciones que se desee. Las
instalaciones contienen los datos necesarios para establecer una conexión remota, p. ej., el
nombre y la ubicación del nodo, así como el número de teléfono que se debe marcar con los
detalles específicos del país. En las conexiones VPN se puede introducir una dirección IP o un
nombre DNS en vez de un número de teléfono.
Los TS Adapter utilizados para establecer la conexión se muestran en colores distintos en
función de si se emplea un TS Adapter MPI o un TS Adapter IE para establecer la conexión.

7.2

Trabajar con el listín telefónico

7.2.1

Principios básicos para trabajar con el listín telefónico

Trabajar con el listín telefónico
Se dispone de las siguientes posibilidades para trabajar con un listín telefónico:
● Abrir el listín telefónico
● Guardar el listín telefónico
● Importar datos del listín telefónico
● Exportar datos del listín telefónico
● Imprimir datos del listín telefónico
● Utilizar datos del listín telefónico para establecer una conexión remota
Puede implementar estas funciones cómodamente mediante los botones que se muestran en
la barra de herramientas del listín telefónico.
Nota
Acceso a listines telefónicos
El listín telefónico se guarda en TeleService de forma específica para cada usuario. Sin
embargo, no es posible acceder al listín telefónico global con más de una instancia del TIA
Portal al mismo tiempo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

143

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico

Consulte también
Abrir el listín telefónico (Página 145)
Guardar el listín telefónico (Página 146)
Exportar datos del listín telefónico (Página 148)
Imprimir el listín telefónico (Página 149)
Configuración del listín telefónico (Página 144)

7.2.2

Configuración del listín telefónico

Introducción
En TeleService, un listín telefónico global sirve para gestionar los datos necesarios para
establecer una conexión remota. Si ya se han creado una vez los datos de la conexión y se han
almacenado en el listín telefónico, puede volver a acceder a ellos para establecer una conexión
remota.

Configuración del listín telefónico
El listín telefónico global integrado en TeleService contiene las siguientes columnas:
Nombre de columna

Explicación

Nombre de la instalación

Introduzca aquí el nombre que desee para su instalación.

Tipo de adaptador

Seleccione de la lista desplegable el tipo de adaptador utilizado: TS Adapter MPI o TS
Adapter IE.

Tipo de conexión

Seleccione el tipo de conexión deseado: conexión por línea telefónica o conexión VPN.

Código local

Introduzca aquí el código local deseado.
Esta columna solo está activada en las conexiones por línea telefónica. En las cone‐
xiones VPN, esta columna no se puede editar.

Número de teléfono/Dirección remo‐ Introduzca aquí los datos de conexión que desee para establecer la conexión remota.
ta
Estos datos pueden ser un número de teléfono para las conexiones por línea telefónica
y un nombre DNS o una dirección IP para las conexiones VPN.
Huella digital

Introduzca aquí la huella digital correspondiente para establecer una conexión VPN
con el TS Adapter IE Advanced.

País

Introduzca el prefijo correspondiente al país.
Esta columna solo está activada en las conexiones por línea telefónica. En las cone‐
xiones VPN, esta columna no se puede editar.

Nombre de usuario

Introduzca el nombre de usuario con el que se ha registrado.

Contraseña

Introduzca aquí la contraseña correspondiente al nombre de usuario.

Grupo

Introduzca aquí el grupo correspondiente en caso de que haya realizado una agrupa‐
ción.

Empresa

Introduzca la empresa con la que hay que establecer contacto.

Departamento

Introduzca el departamento correspondiente.

Calle

Introduzca la calle.

144

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico
Nombre de columna

Explicación

Localidad

Introduzca la localidad con la que debe establecerse la conexión remota.

Comentario

Si lo desea, introduzca un comentario.

Mostrar u ocultar columnas
Las columnas se pueden mostrar u ocultar individualmente. Para ello, seleccione el título de la
columna deseada y abra el menú contextual con el botón derecho del ratón.

7.2.3

Símbolos del listín telefónico

Significado de los símbolos en TeleService
La tabla siguiente muestra el significado de los símbolos en TeleService:
Símbolo

Significado
Abre el listín telefónico global
Importa un listín telefónico
Exporta un listín telefónico
Establece una conexión remota
Desconecta la conexión remota activa
Establece una conexión remota o la desconecta
Muestra la conexión a un TS Adapter IE en el listín telefónico
Muestra la conexión a un TS Adapter MPI en el listín telefónico
Agrega una nueva fila al listín telefónico
Inserta una nueva fila en el listín telefónico

7.2.4

Administrar el listín telefónico

7.2.4.1

Abrir el listín telefónico

Abrir listines telefónicos
Para abrir el listín telefónico, proceda del siguiente modo:
1. En el árbol del proyecto, haga doble clic en la carpeta "Listín telefónico" bajo "Accesos
online" > "TeleService".
2. El listín telefónico se abre y pueden introducirse o editarse los datos de instalación
deseados.
Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

145

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico

7.2.4.2

Insertar filas en el listín telefónico

Insertar filas en el listín telefónico
Para insertar una nueva fila en el listín telefónico, proceda del siguiente modo:
1. Seleccione la fila antes de la cual desee insertar nueva una fila.
2. Haga clic en el botón "Insertar fila" de la barra de herramientas.

Resultado
Se inserta una nueva fila en el listín telefónico antes de la seleccionada.

7.2.4.3

Mostrar y ocultar columnas en el listín telefónico

Mostrar y ocultar columnas
Para mostrar u ocultar columnas en el listín telefónico, proceda del siguiente modo:
1. Haga clic en el encabezado de una columna.
2. Elija el comando "Mostrar/ocultar columnas" del menú contextual.
Aparece una selección de las columnas disponibles.
3. Para mostrar una columna, active la casilla de verificación correspondiente.
4. Para ocultar una columna, desactive la casilla de verificación de la columna.

Resultado
Las columnas en cuestión se muestran o se ocultan en la vista del listín telefónico.

7.2.4.4

Guardar el listín telefónico

Guardar listines telefónicos
Al salir del editor de listines telefónicos o del TIA Portal, se le preguntará si desea guardar el
listín telefónico global.
Para guardar el listín telefónico haga clic en "Sí".

7.2.4.5

Importar datos del listín telefónico

Introducción
Existe la posibilidad de importar los datos del listín telefónico de un archivo externo o de una
versión anterior del TIA Portal.

146

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico

Requisitos
Ha creado un archivo de listín telefónico importable.
Había creado un listín telefónico con una versión anterior del TIA Portal.

Importar datos del listín telefónico del archivo de listín telefónico
Para importar datos del listín telefónico de un archivo de listín telefónico, proceda de siguiente
modo:
1. Abra la carpeta "TeleService" en "Accesos online" en el árbol del proyecto.
2. Haga doble clic en la carpeta "Listín telefónico".
3. En el listín telefónico, haga clic en el botón "Importar" de la barra de herramientas.
4. Confirme la consulta de si debe guardarse la versión actual del listín telefónico de trabajo
con "Sí", si fuera el caso, y elija en el cuadro de diálogo siguiente la ubicación en la que debe
guardarse el listín telefónico.
5. Si no desea guardar el estado actual del listín telefónico de trabajo, seleccione "No" en la
consulta. Seleccione en el cuadro de diálogo siguiente qué archivo de listín telefónico debe
guardarse en el listín telefónico actual.
6. Cierre el cuadro de diálogo haciendo clic en "Aceptar".

Resultado
Los datos del listín telefónico importados se muestran en el listín telefónico global.

Nota
Definir reglas de marcación
Para poder editar las columnas "Código local" y "País" en el listín telefónico importado para
conexiones por línea telefónica, deben definirse unas reglas de marcación.
Para definir las reglas de marcación, siga el enlace que se muestra en el histórico.

Importar datos del listín telefónico de una versión anterior del TIA Portal
Para importar los datos del listín telefónico de una versión anterior del TIA Portal, proceda del
siguiente modo:
1. Abra la carpeta "TeleService" en "Accesos online" en el árbol del proyecto.
2. Haga doble clic en la carpeta "Listín telefónico".
3. En el listín telefónico, haga clic en el botón "Importar" de la barra de herramientas.
4. Confirme la consulta de si debe guardarse la versión actual del listín telefónico de trabajo
con "Sí", si fuera el caso, y elija en el cuadro de diálogo siguiente la ubicación en la que debe
guardarse el listín telefónico.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

147

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico
5. Si no desea guardar el estado actual del listín telefónico de trabajo, seleccione "No" en la
consulta.
6. Introduzca la ruta siguiente en el cuadro de diálogo que se abre: "%appdata%\siemens
\automation\TeleService\GlobalTeleServicePhoneBook.tel".
7. Cierre el cuadro de diálogo haciendo clic en "Aceptar".

Resultado
Los datos del listín telefónico importados de una versión anterior del TIA Portal se muestran en
el listín telefónico global.

Nota
Definir reglas de marcación
Para poder editar las columnas "Código local" y "País" en el listín telefónico importado para
conexiones por línea telefónica, deben definirse unas reglas de marcación.
Para definir las reglas de marcación, siga el enlace que se muestra en el histórico.

Consulte también
Definir reglas de marcación (Página 149)

7.2.4.6

Exportar datos del listín telefónico

Introducción
Existe la posibilidad de exportar los datos del listín telefónico a un archivo externo.

Requisitos
Ha creado un listín telefónico con los datos de la instalación correspondientes en TeleService.

Procedimiento
Para exportar los datos del listín telefónico, proceda del siguiente modo:
1. Abra la carpeta "TeleService" del árbol del proyecto.
2. Haga doble clic en la carpeta "Listín telefónico".
3. En el listín telefónico, haga clic en el botón "Exportar" de la barra de herramientas.
4. Seleccione en el cuadro de diálogo siguiente a dónde debe exportarse el listín telefónico
actual.
5. Cierre el cuadro de diálogo haciendo clic en "Aceptar".

148

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico

Resultado
Los datos del listín telefónico exportados se guardan en el archivo de exportación indicado.

7.2.4.7

Imprimir el listín telefónico

Imprimir listines telefónicos
Puede imprimir todos los datos de un listín telefónico o sólo una determinada parte de un listín
telefónico.

Proceda del siguiente modo:
1. Abra el listín telefónico.
2. Seleccione el comando Proyecto > Imprimir o haga clic en el botón correspondiente de la
barra de herramientas. Se abre el cuadro de diálogo "Imprimir".
3. En este cuadro de diálogo indique si desea imprimir todo el listín telefónico o sólo una parte
del mismo y ajuste todas las demás opciones.
4. Arranque el proceso de impresión pulsando "Aceptar".

Resultado
Los datos del listín telefónico se imprimen en la impresora predeterminada. Si la impresión
abarca varias páginas, en el borde inferior derecho de la página se imprime el número de
página seguido de una identificación de las páginas que siguen. La última página no tiene esta
identificación.

7.2.4.8

Definir reglas de marcación

Procedimiento
Para definir reglas de marcación específicas para una ubicación, proceda del siguiente modo:
1. Abra la carpeta "Accesos online" del TIA Portal y seleccione la carpeta "TeleService".
2. Abra las propiedades de "TeleService" a través del menú contextual.
3. En el cuadro de diálogo siguiente, abra la ficha "Configuración avanzada" y active la opción
"Utilizar reglas de marcación".
4. Haga clic en el botón "Adaptar".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

149

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el listín telefónico
5. Introduzca en el cuadro de diálogo siguiente la información sobre la ubicación que desee
para establecer la conexión correspondiente.
– Para las nuevas ubicaciones, indique el país o la región y el código local
correspondiente.
– En caso necesario, ajuste el código de red correcto y el prefijo de marcado para línea
urbana para llamadas locales/llamadas de larga distancia.
– Seleccione el método de marcado deseado para la ubicación.
6. Cierre este cuadro de diálogo haciendo clic en "Aceptar".
7. Seleccione en el cuadro de diálogo siguiente la ubicación desde la que debe realizarse el
marcado y haga clic en "Aceptar".
8. Compruebe en el siguiente cuadro de diálogo de TeleService si se ha introducido la
ubicación deseada en "Ubicación".
9. Confirme las entradas realizadas haciendo clic en "Aceptar".
Nota
Utilización del módem en una línea urbana o ubicación secundaria
Si utiliza el módem en una línea urbana (centralita), no necesita indicar ningún prefijo de
marcado para línea urbana. Los campos del prefijo de marcado para línea urbana deben estar
vacíos para llamadas locales y llamadas de larga distancia.
Si opera el módem en una ubicación secundaria, debe introducir el prefijo de marcado que
debe elegirse para obtener una línea urbana.

Ejemplo de utilización de reglas de marcación
En el siguiente ejemplo se muestra la utilización de reglas de marcación específicas para una
ubicación para la localidad de Karlsruhe, Alemania.
● Introduzca en el listín telefónico de TeleService para una instalación el número de teléfono
"1234567", sin prefijo y sin identificador de país.
Resultado:
Siempre se marcará el número de teléfono "1234567", independientemente de la ubicación
de la persona que llama.
● Introduzca en el listín telefónico de TeleService, además del número de teléfono
"1234567", los parámetros de marcado específicos de la ubicación, que son el prefijo
"0721" de Karlsruhe y el identificador de país "+49" para Alemania.
Resultado:
Desde Karlsruhe se marca el número de teléfono "1234567".
Desde otras localidades dentro de Alemania se marca el número de teléfono
"07211234567".
Desde otro país se marca el número de teléfono "00497211234567".

150

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

Nota
Visualización en el listín telefónico
Las columnas "Código local" y "País" del listín telefónico de TeleService solo se pueden editar
si se han definido reglas de marcación tal como se ha descrito antes.

7.3

Conexión remota como conexión por línea telefónica

7.3.1

Principios básicos para el establecimiento de una conexión por línea telefónica

Uso de un TS Adapter para conexiones por línea telefónica
Para poder establecer una conexión remota como conexión por línea telefónica con
TeleService, es necesario utilizar un TS Adapter.
El TS Adapter se utiliza para conectar un sistema de automatización vía módem a la red
telefónica y de este modo preparar el sistema para el uso de TeleService. Para ello, el
TS Adapter dispone de una memoria de parámetros en la que se puede guardar un juego de
parámetros para el uso de TeleService.
La función "Exportación de parámetros del adaptador" permite guardar distintos juegos de
parámetros en archivos externos, mientras que con la función "Importación de parámetros del
adaptador" pueden volver a cargarse en el TS Adapter .

Establecimiento de la conexión remota como conexión por línea telefónica
Puede elegir entre distintos TS Adapter que ofrecen en cada caso una funcionalidad diferente
y distintas posibilidades de conexión.
La siguiente figura muestra dos configuraciones posibles para establecer una conexión por
línea telefónica con una instalación mediante un TS Adapter IE.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

151

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
76$GDSWHU,(
)XQFLRQDPLHQWRFRQPµGHPH[W

0µGHP

(WKHUQHW

0µGHP

3*3&

6LVWHPDGHDXWRPDWL]DFLµQ

76$GDSWHU,(
)XQFLRQDPLHQWRFRQPµGHPLQW
(WKHUQHW

0µGHP
3*3&

6LVWHPDGHDXWRPDWL]DFLµQ

Resumen de los TS Adapter que pueden utilizarse:
Existen los siguientes modelos de TS Adapter:
● TS Adapter II (también denominado "TS Adapter MPI")
● TS Adapter IE Standard (también denominado "TS Adapter IE")
● TS Adapter IE Basic (también denominado "TS Adapter IE")

Denominación "TS Adapter"
A continuación, se utiliza la denominación "TS Adapter" para todos los modelos. En los casos
en los que solo se hace referencia a un modelo determinado, se especifica si se trata de
"TS Adapter II" o "TS Adapter IE Standard".
Nota
Encontrará más información sobre el TS Adapter que está utilizando en la documentación que
se le ha suministrado con su TS Adapter.

Consulte también
Breve descripción del TS Adapter MPI (Página 160)
Breve descripción del TS Adapter IE (Página 168)
Exportación de parámetros del adaptador (Página 166)
Importación de parámetros del adaptador (Página 167)

152

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.2

Redes telefónicas y módems

7.3.2.1

Redes telefónicas y módems permitidos

Redes telefónicas que pueden utilizarse
TeleService se puede utilizar con redes digitales (RDSI), redes analógicas y redes por
radiofrecuencia (con tecnología GSM). La presente versión soporta una conexión remota a un
TS Adapter.

Compatibilidad con módem
TeleService ha sido desarrollado independientemente del módem. Por ello, todos los módems
de venta habitual en el mercado que se puedan instalar desde el Panel de control de Windows
y que allí sean visibles como módem también pueden ser utilizados por TeleService.
El tipo de módem a elegir depende del hardware de la programadora / del PC y de la red
telefónica utilizada.

Tipos de módems/medios compatibles:
● Módems (módems externos en el puerto COM, módems internos y tarjetas PCMCIA)
● Adaptador ISDN (RDSI) externo en el puerto COM o USB
● Adaptador ISDN (RDSI) interno con puerto COM virtual (p. ej., puerto AVM CAPI)
● Módems ISDN (RDSI) externos (adaptador ISDN (RDSI) con funcionalidad de módem
analógico integrada) en el puerto COM o USB
● Módems inalámbricos con tecnología GSM, tarjeta adaptador PCMCIA o cable de datos y
móvil

Routers
En principio es posible utilizar routers entre las distintas redes telefónicas. Las conexiones
remotas de un adaptador ISDN (RDSI) a un módem analógico y a la inversa funcionan sólo con
adaptadores telefónicos ISDN (RDSI) especiales.

Capacidad de las redes telefónicas
El flujo de datos de una conexión remota depende del módem utilizado, de la red telefónica
utilizada y de la calidad de la línea telefónica.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

153

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.2.2

Instalar el módem local

Introducción
Si el sistema operativo ya tiene instalado un módem para la transmisión de datos, puede
utilizarse este módem también para TeleService.
Si el sistema operativo aún no reconoce ningún módem, debe instalarse un módem para
establecer una conexión remota con TeleService.

Procedimiento
Proceda del siguiente modo:
1. Asegúrese de que tanto su programadora/PC como el módem estén desconectados.
2. Conecte físicamente el módem externo a una interfaz COM o USB de su programadora/PC.
También puede instalar un módem interno o una tarjeta PCMCIA siguiendo las
instrucciones del fabricante.
3. Ahora, conecte primero el módem externo y después la programadora o el PC.

Resultado
El sistema operativo reconoce e instala automáticamente los módems plug&play. Se le guiará
por el proceso de instalación con ayuda de cuadros de diálogo.
Nota
Módems no aptos para plug&play
Si su módem no es detectado automáticamente al conectarlo, deberá instalarlo mediante el
Panel de control.
Tenga en cuenta para ello las indicaciones incluidas en la documentación suministrada con su
módem.

7.3.2.3

Conectar y parametrizar el módem remoto

Introducción
Una condición necesaria para el trabajo con TeleService es que a la instalación remota
también esté conectado un módem. Este módem se denomina "módem remoto".

Parametrizar el módem remoto
El módem contiene todos los parámetros del TS Adapter conectado necesarios para el
funcionamiento. Estos son, entre otros, los datos para la inicialización del módem y los ajustes
para la transmisión en serie entre TS Adapter y el módem.

154

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
Los datos necesarios para el módem remoto se determinan durante la parametrización del TS
Adapter.
En función del TS Adapter empleado, puede tratarse de un módem interno o externo.

Procedimiento para conectar un TS Adapter con un módem interno
1. Desconecte el TS Adapter.
2. Conecte el TS Adapter al sistema de automatización.
3. Conecte el TS Adapter a la conexión telefónica.
4. Encienda el TS Adapter.

Procedimiento para conectar un TS Adapter con un módem externo
1. Desconecte el módem.
2. Conecte el TS Adapter al sistema de automatización.
3. Conecte el cable de conexión del TS Adapter al módem.
4. Conecte el módem a la conexión telefónica.
5. Encienda el módem.
6. Encienda el TS Adapter.
Nota
Siga las siguientes indicaciones para parametrizar el módem remoto:
● Los parámetros predeterminados en el TS Adapter para el módem y el puerto serie deben
garantizar un funcionamiento correcto en la mayoría de los casos, de forma que solo sea
necesario realizar una reparametrización en casos excepcionales.
● No es necesario volver a parametrizar el TS Adapter a menos que se lleve a cabo la
conexión al módem o que se desee adaptar u optimizar los ajustes de fábrica.
● El TS Adapter puede reparametrizarse mediante una conexión directa o una conexión
remota.

7.3.3

Protección de acceso en las conexiones por línea telefónica

7.3.3.1

Información sobre los derechos de acceso

Introducción
Al parametrizar el TS Adapter pueden establecerse derechos de acceso tanto para la
parametrización del propio TS Adapter como para las instalaciones remotas.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

155

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

Validez de los derechos de acceso
Los derechos de acceso del TS Adapter MPI son válidos exclusivamente para conexiones
remotas; en la conexión directa puede accederse en todo momento a la parametrización del
TS Adapter.
En el TS Adapter IE existen derechos de acceso también en la conexión directa.

Información sobre los derechos de acceso
El TS Adapter MPI se suministra de fábrica con los derechos de acceso desactivados. En el TS
Adapter IE existe una contraseña predeterminada.
El primer usuario que parametriza el adaptador puede activar los derechos de acceso
definiendo la contraseña para un usuario o el número de rellamada.
Existen varios niveles de protección con varios usuarios, cada uno de ellos con o sin derechos
de administrador. En el TS Adapter MPI sólo existen un administrador y como máximo dos
usuarios.
Sólo el administrador puede crear otros usuarios, modificar los ajustes ya definidos y borrarlos
cuando sea necesario. Al entrar como usuario sin derechos de administrador, sólo puede
modificar su propia contraseña y su propio número de rellamada. Sin embargo, en la conexión
directa del TS Adapter MPI se puede acceder a la parametrización del TS Adapter sin
limitaciones.

Ventajas
Los derechos de acceso ofrecen las siguientes ventajas:
● Queda prácticamente excluida la posibilidad de que accedan personas no autorizadas
ajenas a la empresa.
● El operador de la instalación asume la mayor parte de la tarifa telefónica.

7.3.3.2

Posibilidades de rellamada en TeleService

Variantes de rellamada
Por norma general, los costes de una conexión telefónica corren a cargo de la persona que
llama, es decir, la persona que establece la conexión por línea telefónica.
No obstante, TeleService también puede utilizarse de forma que, tras una breve primera
conexión, la conexión de módem vuelva a establecerse en sentido contrario, es decir,
partiendo del TS Adapter (rellamada). En este caso, el usuario de la instalación corre con los
gastos de la rellamada.

TeleService distingue entre dos variantes de rellamada:
1. Rellamada a un número indicado al establecer la conexión.
2. Rellamada a un número guardado en el TS Adapter.

156

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.3.3

Información sobre los niveles de protección

Introducción
Al configurar los derechos de acceso para el acceso a través de TeleService al TS Adapter
existen dos niveles de protección que están vinculados a diferentes opciones.

Opciones para los derechos de acceso
Nivel de protección 1:
El TS Adapter está protegido mediante el nombre de usuario y la contraseña. Puede acceder
al TS Adapter mediante las conexiones telefónicas que desee y, opcionalmente, indicar un
número de rellamada cualquiera al establecer la conexión.
Nivel de protección 2:
El TS Adapter está protegido por el nombre de usuario, la contraseña y el número de
rellamada. Sólo puede acceder al TS Adapter a través de una conexión telefónica por usuario.
La siguiente tabla muestra las condiciones antes indicadas para los diferentes niveles de
protección:
Nivel de protección

Contraseña de administrador/usuario

Número de rellamada

1

Introducir

No introducir

2

Introducir

Introducir

Iniciar sesión en el TS Adapter
Al iniciar sesión en el TS Adapter, una vez que se hayan creado los derechos de acceso, se
deberá introducir el nombre de usuario, la contraseña y, opcionalmente, un número de
rellamada:
Nivel de protección

Contraseña de administrador/usuario

Número de rellamada

1

Introducir

No introducir o un número de re‐
llamada cualquiera

2

Introducir

No introducir

Si al establecer la conexión se ha introducido un número de devolución de llamada (nivel de
protección de acceso 1) o se ha almacenado un número de devolución de llamada en el
TS Adapter (nivel de protección de acceso 2), la conexión por módem se deshará y el
TS Adapter devolverá la llamada al número indicado.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

157

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.3.4

Crear derechos de acceso y número de rellamada para el TS Adapter

Introducción
En TeleService se pueden crear derechos de acceso y un número de rellamada para
parametrizar el TS Adapter y conectarlo a la instalación remota. A continuación se describe la
parametrización de un TS Adapter MPI. La parametrización de un TS Adapter IE se realiza de
forma análoga. El procedimiento exacto se describe en la ayuda web del adaptador.

Requisitos
Un TS Adapter MPI está conectado a su equipo y se muestra en "Dispositivos accesibles" en
el árbol del proyecto.

Procedimiento
Para crear los derechos de acceso para el TS Adapter, proceda del siguiente modo:
1. Haga clic en el comando "Parametrizar TS Adapter MPI" en el árbol del proyecto.
2. Abra la ficha "Protección de acceso".
3. Introduzca aquí una contraseña para su nombre de usuario o un número al que deba llamar
el módem tras el inicio de sesión.
– Si ha iniciado sesión como administrador, puede modificar todos los ajustes de
administradores y usuarios, así como crear y borrar usuarios.
– Si ha iniciado sesión como usuario, sólo puede modificar sus propios ajustes
(contraseña y número de rellamada).
4. Confirme todas las entradas realizadas con "Aceptar" antes de salir del cuadro de diálogo.
5. Pulse el botón "Sí" para confirmar la siguiente consulta.

Resultado
La parametrización de los derechos de acceso y del número de rellamada se guarda en la
memoria no volátil del TS Adapter MPI.

Nota
Al crear los derechos de acceso debe tenerse en cuenta obligatoriamente lo siguiente:
● Para garantizar la funcionalidad de rellamada debe asegurarse de que los ajustes de la
ficha "Módem" correspondan a las características de la instalación.
● Si en el usuario "ADMIN" se introduce un número de rellamada erróneo, no se podrá volver
a acceder al TS Adapter MPI a través de una conexión remota.
● Pruebe el número de rellamada antes de introducirlo en el usuario "ADMIN"; hágalo
llamando a un número de rellamada indicado al establecer la conexión (nivel de
protección 1).

158

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.3.5

Realizar la rellamada en TeleService

Posibilidades de rellamada
En TeleService existe la posibilidad de configurar dos variantes de rellamada diferentes.
Existen las siguientes posibilidades de rellamada:
● Rellamada a un número indicado al establecer la conexión.
● Rellamada a un número guardado en el TS Adapter.

Rellamada a un número indicado al establecer la conexión
1. Haga clic en la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Dentro de esta, haga clic en la carpeta "TeleService".
3. Haga doble clic en la entrada "Establecer/deshacer conexión a distancia". Se abre el
cuadro de diálogo "Establecer conexión a distancia con la instalación remota".
4. Seleccione en la lista desplegable "Tipo de adaptador" el tipo de adaptador utilizado.
5. Seleccione en "Tipo de conexión" la "Conexión por línea telefónica", si es que no está ya
seleccionada.
6. Seleccione en "Ajustes locales" el módem utilizado.
7. Introduzca el número de teléfono que se debe marcar en el campo de entrada
correspondiente o bien abra el listín telefónico haciendo clic en el botón posterior y
seleccione el número de teléfono deseado del listín telefónico.
8. Introduzca el nombre de usuario y la contraseña correspondiente del TS Adapter.
9. Si desea "Establecer conexión con rellamada", seleccione el botón de opción
correspondiente.
10.Haga clic en el botón "Establecer" para establecer la conexión remota deseada. Este botón
solo se activa una vez introducidos todos los parámetros necesarios para establecer una
conexión remota. En "Estado" se indica si ya existe o no una conexión remota.
11.En caso necesario, introduzca en el cuadro de diálogo siguiente el número de rellamada
deseado.

Resultado
Se establece la conexión remota con la instalación deseada con rellamada.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

159

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
En el árbol del proyecto se muestra la instalación conectada con el símbolo correspondiente.
Nota
Este procedimiento es conveniente cuando los costes de la conexión del módem deben correr
a cargo de la instalación o cuando el número de rellamada es variable, es decir, cuando la
rellamada no debe dirigirse siempre al mismo destinatario. Esta opción es interesante para los
usuarios móviles.

Rellamada a un número guardado en el TS Adapter.
1. Parametrice el número de rellamada deseado en el TS Adapter.
2. Establezca una conexión con el TS Adapter del modo antes descrito teniendo en cuenta las
siguientes particularidades:
– Introduzca el nombre de usuario y la contraseña para los que se ha parametrizado el
número de rellamada en el TS Adapter.
– No es necesario seleccionar el botón de opción "Establecer conexión con rellamada",
puesto que el TS Adapter ya conoce el número de rellamada.

Resultado
La rellamada a un número guardado en el TS Adapter está configurada. Si se establece una
conexión remota, la rellamada se realiza desde la instalación remota.
Nota
Este procedimiento representa el nivel máximo de protección. De todas formas, existe el
peligro de que, si se guarda un número de rellamada erróneo en el TS Adapter, el TS Adapter
ya no sea accesible a través de una conexión de módem y sólo pueda volver a ponerse en
funcionamiento mediante una reparametrización in situ.

7.3.4

TS Adapter MPI

7.3.4.1

Breve descripción del TS Adapter MPI

TS Adapter MPI:
La denominación "TS Adapter MPI" es un término genérico que agrupa todos los TS Adapter
equipados con una interfaz MPI/DP.
El TS Adapter MPI está disponible en los siguientes modelos:
● como TS Adapter I (no puede parametrizarse desde el TIA Portal)
● como TS Adapter II

160

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
La siguiente tabla proporciona una breve descripción de la funcionalidad correspondiente.
Encontrará más información sobre el TS Adapter que está utilizando en la documentación
suministrada con su TS Adapter.
TS Adapter II:
Conexión directa

La conexión se realiza a través del Universal Serial Bus (USB). El
firmware puede intercambiarse.
El módem está integrado o también puede conectarse como módem
externo. El TS Adapter II conmuta automáticamente entre los mó‐
dems. Si no hay ningún módem externo conectado y encendido, uti‐
liza el módem interno.

Hay dos variantes

● Con módem analógico interno. Además puede conectarse un
módem externo a la interfaz RS232.
● Con adaptador ISDN (RDSI) interno. Además, en la interfaz
RS232 puede conectarse un módem externo

Utilización de la denominación "TS Adapter"
En TeleService se utiliza la denominación "TS Adapter" como término genérico para todas los
modelos. En los casos en los que sólo se hace referencia a un modelo determinado de un
TS Adapter, se especifica si se trata de "TS Adapter II", "TS Adapter IE Standard" o
"TS Adapter IE Basic".

7.3.4.2

Funcionamiento del TS Adapter MPI

Funcionamiento del TS Adapter MPI
En función de la configuración, el TS Adapter MPI se conecta al puerto serie o USB de la
programadora/el PC (conexión directa) o al puerto serie de un módem (conexión módem) con
la red MPI-/PROFIBUS del sistema de automatización.
El TS Adapter MPI dispone de una memoria no volátil. En ella están almacenados los
parámetros para las funciones siguientes:
● la red MPI/PROFIBUS (parámetros de red)
● el funcionamiento del módem utilizado
● el puerto serie con el módem
● los derechos de acceso

la parametrización estándar
El TS Adapter se suministra con una parametrización estándar. Los parámetros se pueden
ajustar durante una sesión de parametrización y se pueden guardar en la memoria no volátil
del TS Adapter.
En la configuración "Conexión directa", el TS Adapter sólo utilizará los parámetros de la red
para el acceso a la red MPI/PROFIBUS.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

161

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
En la configuración "Conexión módem" se activarán todos los parámetros almacenados en el
TS Adapter.
Nota
Encontrará más información sobre la parametrización del TS Adapter en la documentación
suministrada con el TS Adapter.

7.3.4.3

Usar el TS Adapter MPI en la conexión directa

Conexión directa con TS Adapter MPI
La conexión directa sirve para parametrizar el TS Adapter MPI. En la misma configuración
también se puede pasar a modo online en el TIA Portal y verificar si los parámetros MPI/
PROFIBUS definidos son compatibles con el bus. Esto permite, al igual que con un PC
Adapter, acceder a sistemas SIMATIC S7/C7 a través de la interfaz MPI/DP sin necesidad de
ocupar ningún slot de programadora/PC con un módulo MPI/PROFIBUS.
En la conexión directa no está activo ningún derecho de acceso para el TS Adapter. Así es
posible modificar sin más la parametrización del TS Adapter, p. ej., importando parámetros del
adaptador.

Nota
Visualización del TS Adapter MPI en el TIA Portal
En cuanto se haya conectado un TS Adapter MPI a la PG/el PC a través del puerto USB, en
el TIA Portal se mostrará la carpeta "TS Adapter" en el árbol del proyecto.
Si se abre la carpeta, se puede parametrizar el TS Adapter MPI conectado de la manera
deseada a través de los cuadros de diálogo siguientes.

Configuración de la conexión directa para TS Adapter MPI
En la conexión directa, la programadora o el PC que tiene instalado TeleService, y el sistema
de automatización están conectados directamente a través del TS Adapter MPI. No se
requiere un módem.
La siguiente figura muestra la conexión directa del TS Adapter MPI.
76$GDSWHU,,
86%

03,'3
&DEOH86%

3*3&

162

6LVWHPDGHDXWRPDWL]DFLµQ

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.4.4

Usar el TS Adapter MPI en la conexión módem

Introducción a la conexión módem con TS Adapter MPI
Esta configuración permite marcar una instalación remota. Para ello debe establecerse una
conexión remota con una instalación remota con TeleService a través de una red telefónica.
Seguidamente, desde la conexión por módem establecida es posible editar la instalación
seleccionada con el TIA Portal del modo habitual.

Configuración de la conexión módem con TS Adapter MPI
La conexión entre la PG o el PC en el que está instalado TeleService y el sistema de
automatización en cuya interfaz MPI/DP se ha insertado el TS Adapter MPI se establece
mediante un módem.
Por lo tanto, con esta configuración se conecta la PG o el PC a la interfaz MPI/DP del sistema
de automatización a través de la red telefónica y el TS Adapter MPI.
La figura siguiente muestra la estructura de la conexión módem.

0µGHP

0µGHP

76$GDSWHU,

03,'3
6LVWHPDGHDXWRPDWL]DFLµQ

3*3&
76$GDSWHU,,
)XQFLRQDPLHQWRFRQPµGHP
H[W
0µGHP

0µGHP

03,'3
6LVWHPDGHDXWRPDWL]DFLµQ

3*3&

76$GDSWHU,,
)XQFLRQDPLHQWRFRQPµGHPLQW

0µGHP

03,'3

3*3&

6LVWHPDGHDXWRPDWL]DFLµQ

Nota
Funcionamiento paralelo de las conexiones directa y módem
El TS Adapter II dispone de dos conexiones para la comunicación con la PG/el PC, que pueden
estar conectadas al mismo tiempo. Conectan el puerto USB con la PG/el PC y, a su vez, el
puerto del módem con la red telefónica.
En esta configuración se puede utilizar la conexión directa o bien la conexión módem.
No es posible el funcionamiento paralelo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

163

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.4.5

Posibilidades de parametrización para el TS Adapter MPI

Información importante sobre la parametrización del TS Adapter MPI
El TS Adapter MPI puede parametrizarse tanto en la conexión directa como también mediante
una conexión remota existente.
Existen las siguientes posibilidades de parametrización:
● Nueva parametrización (Página 165)
● Restauración de la parametrización estándar (Página 165)
● Importación de parámetros del adaptador (Página 167)
● Exportación de parámetros del adaptador (Página 166)
● Crear derechos de acceso (Página 158)

Realizar parametrización
Parametrice su TS Adapter teniendo en cuenta la documentación suministrada con el TS
Adapter. Allí encontrará la información necesaria en relación con el procedimiento exacto
durante la parametrización.
Nota
Durante la parametrización del TS Adapter MPI tenga en cuenta lo siguiente:
● Si modifica los parámetros actuales en una conexión remota existente, puede presentarse
el caso de que ya no pueda establecerse ninguna conexión módem con los parámetros
modificados. En este caso, el TS Adapter MPI sólo puede parametrizarse en la conexión
directa.
● Esto significa que, si utiliza una programadora o un PC, debe realizar la parametrización a
pie de la instalación o bien que debe llevar el TS Adapter MPIal lugar donde se encuentre
la programadora o el PC local para efectuar la parametrización.

Confirmación
Al hacer una parametrización, los datos se escriben en la EEPROM del TS Adapter MPI. La
parametrización se acepta sólo después de que el adaptador haya comprobado que los
cambios realizados son correctos para que en el caso de un corte de alimentación éstos no se
pierdan.

Las modificaciones se hacen efectivas en el TS Adapter MPI del siguiente modo:
● Los parámetros serie, los parámetros de módem y los parámetros para derechos de acceso
se activan después de deshacer la conexión remota.
● Los parámetros de red modificados se activan inmediatamente.

164

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.4.6

Parametrizar el TS Adapter MPI

Introducción
Puede parametrizar el TS Adapter MPI tanto en la conexión directa como también mediante
una conexión remota configurada en la conexión módem.
A continuación se describe el procedimiento para efectuar la parametrización.

Requisitos
Un TS Adapter MPI está conectado al equipo y la carpeta "TS Adapter" se muestra en
"Accesos online", en el árbol del proyecto.

Procedimiento
Para parametrizar el TS Adapter MPI im Direktanschluss , proceda del siguiente modo:
1. Haga doble clic en la carpeta "Accesos online" en el árbol del proyecto.
2. Abra la carpeta deseada:
– En caso de una conexión directa, la carpeta "TS Adapter".
– Si existe una conexión remota, la carpeta "TeleService" y, a continuación, la carpeta con
el nombre de la instalación deseada.
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuación, se abrirá el cuadro
de diálogo "Parametrizar TS Adapter MPI".
4. Ajuste los parámetros deseados en las distintas fichas del cuadro de diálogo.
5. Confirme las entradas realizadas con "Aceptar".

Resultado
Los parámetros ajustados se guardarán en la memoria no volátil del TS Adapter MPI. Con ello
finaliza la parametrización.

7.3.4.7

Restaurar la parametrización estándar para el TS Adapter MPI

Introducción
Es posible restaurar la parametrización estándar existente en el estado de suministro del
TS Adapter MPI.

Requisitos
Un TS Adapter MPI está conectado al equipo y se muestra en el árbol del proyecto, en la
carpeta "TeleService" de "Accesos online".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

165

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

Procedimiento
Para cambiar la parametrización predeterminada del TS Adapter MPI, proceda del siguiente
modo:
1. Abra la carpeta "TeleService" del árbol del proyecto.
2. Haga doble clic en la carpeta "TS Adapter MPI".
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuación, se abrirá el cuadro
de diálogo "Parametrizar TS Adapter MPI".
4. En "General", haga clic en el botón "Resetear".
5. Confirme las entradas realizadas con "Aceptar".

Resultado
Se restaurará la parametrización estándar con la que se suministró el TS Adapter MPI.

Consulte también
Posibilidades de parametrización para el TS Adapter MPI (Página 164)

7.3.4.8

Exportación de parámetros del adaptador

Introducción
Existe la posibilidad de exportar la parametrización de un TS Adapter MPI a un archivo externo.
La parametrización almacenada en dicho archivo se puede volver a importar a cualquier
cantidad de TS Adapter MPI.
Esto es especialmente adecuado si desea parametrizar, por ejemplo, de forma idéntica varios
TS Adapter MPI, o si desea guardar, documentar o distribuir el juego de parámetros.

Requisitos
Un TS Adapter MPI está conectado al equipo y se muestra en el árbol del proyecto, en la
carpeta "TeleService" de "Accesos online".

Procedimiento
Para exportar los parámetro de un TS Adapter MPI, proceda del siguiente modo:
1. Abra la carpeta "TeleService" del árbol del proyecto.
2. Haga doble clic en la carpeta "TS Adapter MPI".
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuación, se abrirá el cuadro
de diálogo "Parametrizar TS Adapter MPI".
4. Haga clic en el botón "Exportar".

166

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
5. En la siguiente ventana, seleccione el archivo al que desea exportar la parametrización del
TS Adapter MPI.
6. Confirme haciendo clic en "Guardar".

Resultado
Los parámetros del TS Adapters MPI se guardarán en el archivo indicado (*.tap). Con ello
finaliza la exportación de los parámetros del adaptador.

7.3.4.9

Importación de parámetros del adaptador

Introducción
Existe la posibilidad de importar la parametrización de un TS Adapter MPI de un archivo de
exportación (*.tap) creado anteriormente.
La parametrización almacenada en dicho archivo se puede importar a cualquier cantidad de
TS Adapter. Esto es especialmente adecuado si se desea parametrizar, por ejemplo, de forma
idéntica varios TS Adapter MPI.
Puede realizar la importación de forma local en la conexión directa o mediante una conexión
remota configurada en la conexión módem.
El TS Adapter incorpora los parámetros del archivo de exportación seleccionado y sigue
trabajando con estos ajustes. Se pierden todos los ajustes realizados que no se hayan
guardado en un archivo de exportación.
Antes de importar el archivo, haga una copia de seguridad de la parametrización actual en un
archivo de exportación. En caso necesario podrá restablecer la parametrización.

Requisitos
● Un TS Adapter MPI está conectado al equipo y se muestra en el árbol del proyecto, en la
carpeta "TeleService" de "Accesos online".

Procedimiento
Para importar los parámetros de adaptador de un TS Adapter MPI proceda del siguiente modo:
1. Abra la carpeta "TeleService" en el árbol del proyecto.
2. Haga doble clic en la carpeta "TS Adapter MPI".
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuación, se abrirá el cuadro
de diálogo "Parametrizar TS Adapter MPI".
4. Haga clic en el botón "Importar".
5. Seleccione ahora el archivo en el que desea importar la parametrización del
TS Adapter MPI.
6. Confirme el cuadro de diálogo posterior con "Sí".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

167

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

Resultado
Los parámetros seleccionados se guardarán en la memoria no volátil del TS Adapter MPI. Con
esto finaliza la importación de los parámetros del adaptador.

7.3.5

TS Adapter IE

7.3.5.1

Breve descripción del TS Adapter IE

TS Adapter IE
La denominación "TS Adapter IE" es un término genérico que agrupa todos los TS Adapter
equipados con una interfaz Ethernet.
El TS Adapter IE está disponible en los siguientes modelos:
● como TS Adapter IE Standard
● como TS Adapter IE Basic
La siguiente tabla proporciona una breve descripción de la funcionalidad correspondiente.
Encontrará más información sobre el TS Adapter que está utilizando en la documentación
suministrada con su TS Adapter.
TS Adapter IE Standard:
Conexión directa a través de Industrial Ethernet (IE). Actualización del firmware posible. Módem inte‐
grado o también conectable como módem externo. No disponible conmutación automática de módem
como en el caso del TS Adapter II. La parametrización se efectúa con una interfaz web.
Existen 2 variantes:
● Con módem analógico interno. Además puede conectarse un módem externo a la interfaz RS232.
● Con adaptador ISDN (RDSI) interno. Además puede conectarse un módem externo a la interfaz
RS232.

TS Adapter IE Basic:
Conexión directa a través de Industrial Ethernet (IE). Actualización del firmware posible. Módulo en‐
chufable. La parametrización se efectúa con una interfaz web.
Existen 4 variantes:
● TS Adapter IE Basic MÓDEM:
equipo base TS Adapter IE Basic con módulo TS MÓDEM para el funcionamiento en la red
telefónica analógica.
● TS Adapter IE Basic RDSI:
equipo base TS Adapter IE Basic con módulo TS RDSI para el funcionamiento en la red telefónica
RDSI.

168

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
TS Adapter IE Basic:
● TS Adapter IE Basic GSM:
equipo base TS Adapter IE Basic con módulo TS GSM para el funcionamiento en la red de
radiofrecuencia GSM.
● TS Adapter IE Basic RS232:
equipo base TS Adapter IE Basic con módulo TS RS232 para la conexión de un módem externo.

Utilización de la denominación "TS Adapter"
En la ayuda en pantalla sobre TeleService aparece la denominación "TS Adapter" como
generalización para todos los modelos. En los casos en los que sólo se hace referencia a un
modelo determinado de un TS Adapter, se explicita si se trata del "TS Adapter I",
"TS Adapter II", "TS Adapter IE Standard" o "TS Adapter IE Basic".

7.3.5.2

Funcionamiento del TS Adapter IE

Funcionamiento del TS Adapter IE
El TS Adapter IE conecta la red telefónica o el puerto serie de un módem con la Industrial
Ethernet del sistema de automatización.
El TS Adapter IE dispone de una memoria no volátil. En ella están almacenados los
parámetros para las funciones siguientes:
● el funcionamiento del módem utilizado
● el puerto serie con el módem
● los derechos de acceso

la parametrización estándar
El TS Adapter IE se suministra con una parametrización estándar. Los parámetros se pueden
ajustar durante una sesión de parametrización y se pueden guardar en la memoria no volátil
del TS Adapter.
Nota
Encontrará más información sobre la parametrización del TS Adapter en la documentación
suministrada con el TS Adapter.

7.3.5.3

Tipos de conexión

Tipos de conexión del TS Adapter IE Basic
Las siguientes figuras muestran los posibles tipos de conexión del TS Adapter IE Basic.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

169

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

Conexión directa
En conexión directa en la PG/el PC puede parametrizar el TS Adapter IE Basic a través de
Ethernet.
Nota
No está permitida la operación del TS Adapter IE Basic sin ningún TS Modul.
760RGXO

76$GDSWHU,(%DVLF

3*3&

(WKHUQHW

Figura 7-1

Conexión directa

Conexión a la red telefónica
Para la conexión directa a la red telefónica, debe operar el TS Adapter IE Basic en
combinación con uno de los siguientes módulos TS:
● TS Module Modem
● TS Module ISDN
760RGXOH0RGHP
760RGXOH,6'1

76$GDSWHU,(%DVLF
6LVWHPDGHDXWRPDWL]DFLµQ

0RGHP

:$1

(WKHUQHW

3*3&

Figura 7-2

Conexión directa a la red telefónica

Más información acerca de los módulos TS encontrará en el manual TS Adapter modular.

170

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

Conexión a la red GSM
Para la conexión a la red GSM debe operar el TS Adapter IE Basic en combinación con este
módulo TS:
● TS Module GSM
760RGXOH*60

76$GDSWHU,(%DVLF
6LVWHPDGHDXWRPDWL]DFLµQ

0RGHP

(WKHUQHW

3*3&

Figura 7-3

Conexión a la red GSM

Más información acerca de los módulos TS encontrará en el manual TS Adapter modular.

Conexión a la red telefónica a través de un módem externo
Para la conexión a un módem externo debe operar el TS Adapter IE Basic en combinación con
este módulo:
● TS Module RS232
760RGXOH56

76$GDSWHU,(%DVLF
6LVWHPDGHDXWRPDWL]DFLµQ

0RGHP

:$1

0RGHP

(WKHUQHW

3*3&

Figura 7-4

Conexión a un módem externo

Más información acerca de los módulos TS encontrará en el manual TS Adapter modular.

7.3.5.4

Posibilidades de parametrización del TS Adapter IE

Información importante para parametrizar el TS Adapter IE
El TS Adapter IE se parametriza con una interfaz web.
Para la parametrización del TS Adapter IE se dispone de una ayuda web asignada a la interfaz
web.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

171

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
Existen las siguientes posibilidades de parametrización:
● Nueva parametrización
● Restauración de la parametrización estándar
● Importación de parámetros del adaptador
● Exportación de parámetros del adaptador
Nota
Realizar la parametrización
Parametrice su TS Adapter teniendo en cuenta la documentación suministrada con su TS
Adapter. Allí encontrará la información necesaria en relación con el procedimiento exacto
durante la parametrización.

7.3.5.5

Parametrizar el TS Adapter IE

Introducción
Puede parametrizar el TS Adapter IE tanto en la conexión directa como también mediante una
conexión remota configurada en la conexión módem.
A continuación se describen ambas posibilidades de parametrización.
Puede obtener detalles específicos sobre la parametrización del TS Adapter IE en la
documentación del TS Adapter IE.

Parametrización del TS Adapter IE en la conexión directa

Requisitos
Existe una conexión LAN con su TS Adapter IE.
El TS Adapter IE Basic está conectado a la alimentación.

Procedimiento
Para parametrizar el TS Adapter IE , proceda del siguiente modo:
1. Abra la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Haga doble clic en la interfaz Ethernet del equipo.
3. Haga doble clic en el comando "Mostrar dispositivos accesibles". A continuación se
muestra el TS Adapter IE.

172

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
4. Haga doble clic en la carpeta <TS Adapter IE> y después en "Online y diagnóstico", y
asigne al TS Adapter IE la dirección IP deseada en los cuadros de diálogo siguientes. Para
ello, tenga en cuenta que la dirección IP que asigne al TS Adapter IE debe encontrarse en
la misma subred que la dirección IP de la tarjeta de interfaz de la PG/el PC.
5. Actualice la vista del árbol del proyecto de los "Dispositivos accesibles" para que se
muestre el TS Adapter IE con la dirección IP recién asignada.
6. Abra la carpeta <TS Adapter IE> en la lista de dispositivos.
7. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuación se abre la
interfaz web asignada para parametrizar el TS Adapter IE.
8. Inicie la sesión en la interfaz web.
9. Ajuste los parámetros deseados en las distintas fichas del cuadro de diálogo.
10.Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los parámetros ajustados se guardarán en la memoria no volátil del TS Adapter IE. Con ello
finaliza la parametrización.

Parametrización del TS Adapter IE a través de la conexión remota

Requisitos
Hay una conexión remota establecida con un TS Adapter IE .

Procedimiento
1. Abra la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Abra la carpeta "TeleService" y, a continuación, la carpeta de la instalación deseada.
3. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuación se abre la
interfaz web correspondiente para parametrizar el TS Adapter IE. El "inicio de sesión" en la
interfaz web se efectúa automáticamente con los datos de inicio de sesión de la conexión
remota.
4. Ajuste los parámetros deseados en las distintas fichas del cuadro de diálogo.
5. Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los parámetros ajustados se guardarán en la memoria no volátil del TS Adapter IE. Con ello
finaliza la parametrización.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

173

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica

7.3.6

Establecimiento de una conexión por línea telefónica con una instalación remota

7.3.6.1

Establecer conexión por línea telefónica

Introducción al establecimiento de una conexión remota como conexión por línea telefónica
Se produce una conexión por línea telefónica cuando se utiliza TeleService para acceder a una
instalación remota a través de una red telefónica. Para ello, la programadora o el PC debe estar
conectado a la red telefónica vía módem local utilizando TeleService. En el otro extremo, el
sistema de automatización está conectado a la línea telefónica a través de un TS Adapter
parametrizado y un módem.

Requisitos
Un módem local está instalado y parametrizado.
En la instalación remota existe un TS Adapter.
Un módem remoto está instalado y parametrizado.

Proceda del siguiente modo:
1. Haga clic en la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Dentro de esta, haga clic en la carpeta "TeleService".
3. Haga doble clic en la entrada "Establecer/deshacer conexión a distancia". Se abre el
cuadro de diálogo "Establecer conexión a distancia con la instalación remota".
4. Seleccione en la lista desplegable "Tipo de adaptador" el tipo de adaptador utilizado.
5. Seleccione en "Tipo de conexión" la "Conexión por línea telefónica".
6. Seleccione en "Ajustes locales" el módem utilizado.
7. Introduzca el número de teléfono que se debe marcar en el campo de entrada
correspondiente o bien abra el listín telefónico haciendo clic en el botón posterior y
seleccione el número de teléfono deseado del listín telefónico.
8. Introduzca su nombre de usuario y la contraseña correspondiente.
9. Si desea "Establecer conexión con rellamada", seleccione el botón de opción
correspondiente.
10.Haga clic en el botón "Establecer" para establecer la conexión remota deseada. Este botón
solo se activa una vez introducidos todos los parámetros necesarios para establecer una
conexión remota. En "Estado" se indica si ya existe o no una conexión remota.

Resultado
Se establece la conexión por línea telefónica con la instalación deseada.
En cuanto se establece la conexión por línea telefónica, se cierra el cuadro de diálogo. En la
barra de estado del TIA Portal aparece el mensaje: "Conexión remota establecida".

174

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexión remota como conexión por línea telefónica
Seguidamente se puede utilizar la conexión remota con el TIA Portal y comunicarse con el
sistema de automatización.

No es posible establecer la conexión
Si no puede establecer conexión, intente averiguar el motivo del fallo por medio de las
"Indicaciones para la búsqueda de errores".

Deshacer la conexión
Si ha terminado de trabajar con la instalación remota, finalice la conexión remota en el árbol del
proyecto haciendo doble clic en la entrada "Establecer/deshacer conexión a distancia".
Al salir del TIA Portal también finaliza la conexión remota.

7.3.6.2

Deshacer conexión por línea telefónica

Deshacer una conexión por línea telefónica activa

Nota
Deshacer la conexión por línea telefónica
Antes de deshacer la conexión remota se debe cambiar al modo offline del TIA Portal.

Proceda del siguiente modo:
1. Haga doble clic en la entrada "Establecer/deshacer conexión a distancia" del TIA Portal.
2. Confirme la consulta del cuadro de diálogo posterior con "Sí".

Resultado
Se deshace la conexión.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

175

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

7.4

Conexión remota como conexión VPN

7.4.1

Principios básicos para el establecimiento de una conexión VPN

Uso de un TS Adapter IE Advanced para conexiones VPN
Para poder establecer una conexión VPN con TeleService, es necesario utilizar un TS Adapter
IE Advanced.

Definición VPN
VPN significa "Virtual Private Network". Es decir, una red informática privada cerrada basada
en una infraestructura de red pública.
Una VPN se utiliza para conectar dispositivos separados de una red privada con un punto de
conexión de otra red con la máxima seguridad posible.
Un dispositivo VPN obtiene acceso directo a un punto de conexión de otra red a través de una
conexión codificada.

Conexiones VPN
Al establecer una conexión VPN con TeleService, para identificar de forma unívoca el TS
Adapter IE Advanced se utiliza un certificado CA y una huella digital única generada a partir del
certificado. La conexión VPN permite una comunicación a prueba de escuchas y
manipulaciones entre el PC remoto y el TS Adapter.
Si desea establecer una conexión VPN a varias redes remotas, necesitará para cada red un
TS Adapter IE Advanced propio como interfaz. Las redes conectadas a través del TS Adapter
pueden utilizar la misma dirección IP interna. Solo deben ser diferentes las direcciones IP
externas (WAN) de cada TS Adapter.
Solo se puede realizar una conexión VPN con un TS Adapter al mismo tiempo.

Nota
Autenticación
Tenga en cuenta que el certificado CA solo autentica el TS Adapter IE Advanced.
Un usuario se autentica a través del inicio de sesión (nombre de usuario y contraseña), igual
que en las conexiones por línea telefónica.
Por lo tanto, utilice únicamente contraseñas seguras para el inicio de sesión.

176

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

Consulte al respecto también
● Establecer conexión VPN (Página 182)
● Deshacer conexión VPN (Página 184)

7.4.2

Principios básicos de los certificados CA

Introducción
Para poder establecer una conexión VPN segura con TeleService, es necesario generar un
certificado CA durante la configuración de TS Adapter IE Advanced con una huella digital
única.
Este certificado CA puede instalarse del siguiente modo en cualquier PC que deba tener
acceso al TS Adapter IE Advanced:
● Mediante descarga automática en el cuadro de diálogo de conexión de TeleService, donde
debe registrar la huella digital que corresponde al certificado CA
● Mediante instalación manual con Microsoft® Management Console.

Definición de certificado CA
Un certificado CA es un certificado digital emitido a través de un organismo de certificación
autorizado ("certificate authority" o "certification authority", en adelante "CA"). En el caso de TS
Adapter IE Advanced, se utilizan certificados autofirmados; el organismo de certificación
autorizado es aquí el propio TS Adapter IE Advanced.
Del certificado CA se derivan los certificados para "SSTP" (Secure Socket Tunneling Protocol)
y "HTTPS" (Hypertext Transfer Protocol Secure).
Los certificados CA contienen una "clave" e información adicional que sirven para la
autenticación, la codificación y la descodificación de datos confidenciales. Se incluye
información adicional como, por ejemplo, el periodo de validez, remisiones a listas de
revocación de certificados, etc., que se introduce en el certificado a través de CA.

Utilización de certificados CA en TeleService
Para identificar de forma inequívoca el TS Adapter IE Advanced como interlocutor respecto al
PC remoto, desde el TS Adapter se genera un certificado CA con una huella digital única.
Para establecer una conexión VPN es imprescindible guardar este certificado CA en el
almacén de certificados de Windows de su PG/PC. Si activa el servidor web en conexión

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

177

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN
directa y falta el certificado CA, se muestra una advertencia de seguridad que puede
aceptarse.
Nota
Gestión de certificados CA
¡La gestión de certificados CA requiere conocimientos especiales sobre el sistema operativo
y solo debe realizarla personal instruido!
Para gestionar los certificados CA necesitará tener derechos de administrador.

Definición de huella digital
La huella digital es una representación hexadecimal con una longitud de 20 bytes. Representa
un valor unívoco para un certificado CA y se usa para identificar un certificado CA determinado.
La huella digital se calcula de forma dinámica con el algoritmo SHA1 y no existe físicamente
en el certificado CA.

Utilización de la huella digital en TeleService
El certificado CA sirve para identificar de forma inequívoca el TS Adapter IE Advanced como
interlocutor. Cada vez que el TS Adapter IE Advanced genera un certificado CA, se genera
automáticamente una huella digital única de ese certificado CA con una longitud de 20 bytes.
TS Adapter IE Advanced la calcula automáticamente cuando se genera un certificado. Cada
certificado tiene una huella digital específica y única. Esta huella digital debe transferirse al
equipo a través de un canal seguro, p. ej., por teléfono o mediante un correo codificado. Al
establecer una conexión VPN con TeleService, deberá introducir la huella digital en el cuadro
de diálogo de conexión, siempre que no haya guardado ya el certificado CA en el almacén de
certificados de Windows de su PC.
Encontrará la huella digital correspondiente al TS Adapter IE Advanced en la interfaz web del
TS Adapter IE Advanced. Para abrir la interfaz web, haga doble clic en el comando
"Parametrizar TS Adapter IE" en la lista de dispositivos del TIA Portal. Inicie sesión en la
interfaz web para visualizar la huella digital en la ficha "Seguridad > Certificados".

Descarga del certificado CA al establecer la conexión
Al establecer la conexión, TeleService comprueba si se ha instalado un certificado CA
adecuado en el almacén de certificados de Windows de su PG/PC. Si se encuentra un
certificado CA adecuado, se establece la conexión VPN como conexión SSTP (Secure Socket
Tunneling Protocol).
Si no se encuentra ningún certificado CA adecuado, se cargará primero el certificado CA del
TS Adapter IE Advanced correspondiente. Para ello, se llamará al TS Adapter IE Advanced a
través de la dirección remota introducida en el cuadro de diálogo de conexión. Si la descarga
del certificado CA es correcta, se calcula la huella digital del certificado CA descargado y se
compara con la huella digital introducida en el cuadro de diálogo de conexión. Si ambas huellas
coinciden, se abre un cuadro de diálogo que le preguntará si desea guardar el certificado CA
en el almacén de certificados de Windows de su PG/PC. Para guardar el certificado CA
necesitará tener derechos de administrador.

178

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN
A continuación, se establece la conexión VPN.

Consulte al respecto también
● Instalar certificado CA para conexión VPN (Página 179)
● Borrar certificado CA para conexión VPN (Página 182)

7.4.3

Instalar certificado CA para conexión VPN

Instalación de certificados CA
Para establecer una conexión VPN segura con TeleService entre su PG/PC y una instalación
remota, necesitará un certificado CA válido generado por el TS Adapter IE Advanced. Dicho
certificado debe estar guardado en el almacén de certificados de Windows de su PG/PC.
La instalación de un certificado CA se puede realizar mediante descarga automática o
manualmente.
La gestión de certificados CA se realiza a través de Microsoft® Management Console.

Nota
Gestión de certificados CA
¡La gestión de certificados CA requiere conocimientos especiales sobre el sistema operativo
y solo debe realizarla personal instruido!
¡Para gestionar los certificados CA necesitará tener derechos de administrador!

Requisitos
Su equipo no tiene instalado todavía ningún certificado CA en el almacén de certificados de
Windows.

Instalación de certificados CA mediante descarga automática
Proceda del siguiente modo:
1. Inicie sesión en el sistema como administrador.
2. Transfiera la huella digital correspondiente al certificado CA a través de un "canal seguro",
p. ej., por teléfono o mediante un correo codificado, del TS Adapter IE Advanced a su
equipo.
Encontrará la huella digital correspondiente al TS Adapter IE Advanced en la interfaz web
del TS Adapter IE Advanced. Para abrir la interfaz web, haga doble clic en el comando
"Parametrizar TS Adapter IE" en la lista de dispositivos del TIA Portal. Inicie sesión en la
interfaz web para visualizar la huella digital en la ficha "Seguridad > Certificados".

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

179

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN
3. Haga clic en la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
4. Dentro de esta, haga clic en la carpeta "TeleService".
5. Haga doble clic en la entrada "Establecer/deshacer conexión a distancia". Se abre el
cuadro de diálogo "Establecer conexión a distancia con la instalación remota".
6. En la lista desplegable, seleccione "TS Adapter IE" como Tipo de adaptador.
7. Seleccione "VPN" como Tipo de conexión.
8. Introduzca la dirección IP o el nombre DNS para el TS Adapter IE Advanced de contacto en
el campo de entrada correspondiente. También puede seleccionar los datos que haya
disponibles en el listín telefónico haciendo clic en el botón posterior.
9. Introduzca su nombre de usuario y la contraseña correspondiente.
10.Copie la huella digital que se muestra en la interfaz web del TS Adapter IE Advanced en la
columna "Huella digital".
11.Haga clic en el botón "Establecer" para establecer la conexión remota deseada. Este botón
solo se activa una vez introducidos todos los parámetros necesarios para establecer una
conexión remota.
12.Como no había ningún certificado CA instalado en su equipo, no se encuentra ningún
certificado CA válido.
Por tanto, se establece una conexión "normal" (no una conexión VPN) y el certificado
necesario se descarga del TS Adapter IE Advanced a la memoria de trabajo de su equipo.
A continuación, se calcula la huella digital (algoritmo SHA1) y se compara con la huella
digital introducida en el cuadro de diálogo de conexión. Si ambas huellas coinciden, se abre
un cuadro de diálogo que le preguntará si desea guardar el certificado CA en el almacén de
certificados de Windows de su PG/PC.
13.Confirme que desea guardar el certificado CA.
Nota
Es necesario reiniciar STEP 7 tras renovar el certificado CA.
Después de renovar el certificado CA en el TS Adapter IE Advanced, debe reiniciarse STEP 7
para poder establecer la conexión remota con la nueva huella digital. De lo contrario, en
determinadas circunstancias es posible que el certificado CA no se guarde en la memoria de
certificados de Windows y no se pueda establecer la conexión remota.

Resultado
Se establece la conexión VPN con el TS Adapter IE Advanced deseado. En cuanto se
establece la conexión, se cierra el cuadro de diálogo.

180

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

Instalación manual de certificados CA
Proceda del siguiente modo:
1. Inicie sesión en el sistema como administrador.
2. Abra el administrador de certificados de Windows de su PG/PC con Microsoft®
Management Console.
Para ello, haga clic en "Inicio", introduzca "mmc" en el campo de búsqueda y pulse la tecla
INTRO.
Se abre la consola.
3. En el menú "Archivo", haga clic en el comando "Agregar o quitar complemento...".
Se abre el cuadro de diálogo "Agregar o quitar complemento".
4. En la lista "Complementos" haga doble clic en "Certificados" y seleccione "Cuenta de
equipo" en el cuadro de diálogo que se abre a continuación.
5. En el cuadro de diálogo siguiente, seleccione "Equipo local" y haga clic en "Finalizar" y en
"Aceptar".
Se abre la Raíz de consola y se muestra la carpeta "Certificados (equipo local)".
6. Abra la carpeta "Certificados (equipo local)" mostrada y haga clic en "Entidades de
certificación raíz de confianza".
7. Haga clic en la carpeta "Certificados" y, a través del menú contextual, abra el comando
"Todas las tareas" > "Importar...".
8. Tenga en cuenta la información mostrada en el cuadro de diálogo "Asistente para
importación de certificados" y haga clic en "Siguiente".
9. En el cuadro de diálogo siguiente, haga clic en "Examinar..." y seleccione el certificado CA
deseado.
10.A continuación, haga clic dos veces en "Siguiente" y después en "Finalizar" para instalar el
certificado CA.

Resultado
El certificado CA seleccionado se instala en la ubicación indicada del almacén de certificados
de Windows.

Nota
Para más información...
... sobre la instalación de certificados CA, pulse la tecla "F1" de ayuda en pantalla de su sistema
operativo.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

181

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

7.4.4

Borrar certificado CA para conexión VPN

Borrar certificados CA
Proceda del siguiente modo:
1. Inicie sesión en el sistema como administrador.
2. Abra el administrador de certificados de Windows de su PG/PC con Microsoft®
Management Console.
Para ello, haga clic en "Inicio", introduzca "mmc" en el campo de búsqueda y pulse la tecla
INTRO.
Se abre la consola.
3. En el menú "Archivo" haga clic en "Agregar o quitar complemento...".
Se abre el cuadro de diálogo de selección de complementos.
4. En la lista "Complementos" haga doble clic en "Certificados" y seleccione "Cuenta de
equipo" en el cuadro de diálogo que se abre a continuación.
5. En el cuadro de diálogo siguiente, seleccione "Equipo local" y haga clic en "Finalizar" y en
"Aceptar".
Se abre la Raíz de consola y se muestra la carpeta "Certificados (equipo local)".
6. Abra la carpeta "Certificados (equipo local)" mostrada y haga clic en "Entidades de
certificación raíz de confianza".
7. Abra la carpeta "Certificados", seleccione el certificado CA que desee y haga clic en
"Borrar" en el menú contextual.
8. Confirme la consulta posterior con "Sí".

Resultado
El certificado CA seleccionado se borra de la lista de certificados disponibles.

7.4.5

Establecimiento de una conexión VPN con una instalación remota

7.4.5.1

Establecer conexión VPN

Introducción al establecimiento de una conexión VPN
Se establece una conexión VPN conectándose a través de TeleService con una instalación
remota a través de Internet.
Para ello, por un lado, la PG/el PC con el TIA Portal instalado tiene conexión a Internet. Por otro
lado, el sistema de automatización está conectado a Internet a través de la interfaz WAN (Wide
Area Network) del TS Adapter IE Advanced parametrizado.

182

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

Requisitos
Su PG/PC está conectado a Internet.
En la instalación remota existe un TS Adapter IE Advanced.
El TS Adapter IE Advanced está parametrizado y conectado a Internet.
El certificado CA necesario para identificar el TS Adapter ha sido creado y se ha instalado en
el almacén de certificados de Windows de su PG/PC.

Proceda del siguiente modo:
1. Haga clic en la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Dentro de esta, haga clic en la carpeta "TeleService".
3. Haga doble clic en la entrada "Establecer/deshacer conexión a distancia". Se abre el
cuadro de diálogo "Establecer conexión a distancia con la instalación remota".
4. En la lista desplegable, seleccione "TS Adapter IE" como "Tipo de adaptador".
5. Como "Tipo de conexión", introduzca "VPN".
6. Introduzca la dirección IP o el nombre DNS para el TS Adapter IE Advanced de contacto en
el campo de entrada correspondiente. También puede seleccionar los datos que haya
disponibles en el listín telefónico haciendo clic en el botón posterior.
7. Introduzca su nombre de usuario y la contraseña correspondiente.
8. Haga clic en el botón "Establecer" para establecer la conexión VPN deseada. Este botón
solo se activa una vez introducidos todos los parámetros necesarios para establecer la
conexión remota.

Resultado
Se establece la conexión VPN con la instalación deseada. En "Estado" se muestra el progreso
del establecimiento de la conexión. En cuanto se establece la conexión VPN, se cierra el
cuadro de diálogo. En la barra de estado del TIA Portal aparece el mensaje: "Conexión remota
establecida". Seguidamente se puede utilizar la conexión remota con el TIA Portal y
comunicarse con el sistema de automatización.

No es posible establecer la conexión
Si no puede establecer conexión, intente averiguar el motivo del fallo por medio de las
"Indicaciones para la búsqueda de errores".
Nota
Reglas para las direcciones IP
● Utilice únicamente direcciones IP que todavía no estén asignadas a la red de planta.
● Si la dirección IP parametrizada para el TS Adapter IE Advanced ya está asignada a la red
de planta, solo podrá acceder al TS Adapter IE Advanced a través de su dirección MAC.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

183

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

Consulte también
Instalar certificado CA para conexión VPN (Página 179)

7.4.5.2

Deshacer conexión VPN

Deshacer una conexión VPN activa

Nota
Deshacer la conexión VPN
Antes de deshacer la conexión VPN se debe cambiar al modo offline del TIA Portal.

Proceda del siguiente modo:
1. Haga doble clic en la entrada "Establecer/deshacer conexión a distancia" del TIA Portal.
2. Confirme la consulta del cuadro de diálogo posterior con "Sí".

Resultado
Se deshace la conexión VPN.

7.4.6

TS Adapter IE Advanced

7.4.6.1

Descripción abreviada del TS Adapter IE Advanced

TS Adapter IE Advanced
El TS Adapter IE Advanced tiene las siguientes propiedades:
● Conexión directa a través de Industrial Ethernet (IE), 2 puertos
● Interfaz WAN (Wide Area Network) para conexiones VPN
● Actualización del firmware posible
● Módulo enchufable
● La parametrización se efectúa con una interfaz web.

184

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

Nota
Más información sobre el TS Adapter IE Advanced
Encontrará más información sobre el TS Adapter que está utilizando en la documentación
suministrada con su TS Adapter.

7.4.6.2

Tipos de conexión

Tipos de conexión del TS Adapter IE Advanced
Las siguientes figuras muestran los posibles tipos de conexión del TS Adapter IE Advanced.

Conexión directa
En conexión directa en la PG/el PC puede parametrizar el TS Adapter IE Advanced a través de
Ethernet.
760RGXOH

76$GDSWHU,($GYDQFHG

3*3&

(WKHUQHW

Figura 7-5

TS Adapter IE Advanced: conexión directa

Conexión a Internet (módem/router ADSL)
Para la conexión a Internet debe operar el módem/router ADSL en la conexión WAN del
TS Adapter IE Advanced.
760RGXOH

76$GDSWHU,($GYDQFHG

:$1
'6/
0RGHP5RXWHU
(WKHUQHW

Figura 7-6

TS Adapter IE Advanced: conexión a Internet

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

185

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

Conexión a la red de empresa (Intranet)
Para la conexión a la Intranet debe operar la red de planta (Ethernet) en una de las dos
conexiones LAN del TS Adapter IE Advanced.
760RGXOH

76$GDSWHU,($GYDQFHG

(QJLQHHULQJ6WDWLRQ

2SHUDWRU6WDWLRQ

6HUYHU

(WKHUQHW
$XWRPDWLVLHUXQJVV\VWHPH

Figura 7-7

TS Adapter IE Advanced: conexión a la red de empresa (Intranet)

Más información
Encontrará más información sobre los módulos TS en la documentación que se le ha
suministrado con su TS Adapter IE Advanced.

7.4.6.3

Posibilidades de parametrización del TS Adapter IE Advanced

Principios básicos para la parametrización del TS Adapter IE
El TS Adapter IE Advanced se parametriza con una interfaz web.
Para la parametrización del TS Adapter IE Advanced se dispone de una ayuda web asignada
a la interfaz web.
Existen, p. ej., las siguientes posibilidades de parametrización:
● Nueva parametrización
● Restauración de la parametrización estándar
● Importación de parámetros del adaptador
● Exportación de parámetros del adaptador
Nota
Realizar la parametrización
Parametrice su TS Adapter IE Advanced teniendo en cuenta la documentación suministrada.
Allí encontrará la información necesaria en relación con el procedimiento exacto durante la
parametrización.

186

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexión remota como conexión VPN

7.4.6.4

Parametrizar el TS Adapter IE Advanced

Introducción
Puede parametrizar el TS Adapter IE Advanced tanto en la conexión directa como también
mediante una conexión remota ya configurada.
A continuación se describen ambas posibilidades de parametrización.
Puede obtener detalles específicos sobre la parametrización del TS Adapter IE Advanced en
la documentación del TS Adapter IE Advanced.

Parametrización del TS Adapter IE Advanced en la conexión directa

Requisitos
Existe una conexión LAN con su TS Adapter IE Advanced.

Procedimiento
Para parametrizar el TS Adapter IE Advanced, proceda del siguiente modo:
1. Abra la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Haga doble clic en la interfaz Ethernet del equipo.
3. Haga doble clic en el comando "Mostrar dispositivos accesibles". A continuación se
muestra el TS Adapter IE Advanced.
4. Haga doble clic en la carpeta "TS Adapter IE Advanced" y después en "Online y
diagnóstico", y asigne al TS Adapter la dirección IP deseada en los cuadros de diálogo
siguientes. Para ello, tenga en cuenta que la dirección IP que asigne al TS Adapter IE
Advanced debe encontrarse en la misma subred que la dirección IP de la tarjeta de interfaz
de la PG/el PC.
5. Actualice la vista del árbol del proyecto de los "Dispositivos accesibles" para que se
muestre el TS Adapter IE Advanced con la dirección IP recién asignada.
6. Abra la carpeta "TS Adapter IE Advanced! en la lista de dispositivos.
7. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuación se abre la
interfaz web asignada para parametrizar el TS Adapter.
8. Inicie la sesión en la interfaz web.
9. Ajuste los parámetros deseados en las distintas fichas del cuadro de diálogo.
10.Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los parámetros ajustados se guardarán en la memoria no volátil del TS Adapter IE Advanced.
Con ello finaliza la parametrización.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

187

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Parametrización del TS Adapter IE Advanced a través de la conexión remota

Requisitos
Hay una conexión remota establecida con un TS Adapter IE Advanced.

Procedimiento
1. Abra la carpeta "Accesos online" en el árbol del proyecto del TIA Portal.
2. Abra la carpeta "TeleService" y, a continuación, la carpeta de la instalación deseada.
3. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuación se abre la
interfaz web correspondiente para parametrizar el TS Adapter IE. El "inicio de sesión" en la
interfaz web se efectúa automáticamente con los datos de inicio de sesión de la conexión
remota.
4. Ajuste los parámetros deseados en las distintas fichas del cuadro de diálogo.
5. Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los parámetros ajustados se guardarán en la memoria no volátil del TS Adapter IE Advanced.
Con ello finaliza la parametrización.

7.5

Conexiones remotas controladas por CPU en TeleService

7.5.1

Vista general de las conexiones remotas controladas por CPU

Introducción
TeleService ofrece, en función de la CPU utilizada en cada caso, diferentes posibilidades para
establecer una conexión remota. La iniciativa para establecer la conexión parte siempre de la
CPU. Para las distintas posibilidades de conexión se utilizan las instrucciones de
comunicación que se indican a continuación.

Posibilidades para el establecimiento de conexiones con CPU S7-300/400
Existen las siguientes instrucciones de comunicación:
● Instrucción de comunicación "PG_DIAL": Establecer una conexión remota con una PG/un
PC
● Instrucción de comunicación "SMS_SEND": Enviar un mensaje SMS

188

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
● Instrucción de comunicación "AS_DIAL": Establecer una conexión remota con el AS
● Instrucción de comunicación "AS_MAIL": Enviar e-mail

Cómo establecer una conexión con CPU S7-1200
Existe la siguiente instrucción de comunicación:
● Instrucción de comunicación "TM_MAIL": Enviar e-mail

Cómo establecer una conexión con CPU S7-1500
Existe la siguiente instrucción de comunicación:
● Instrucción de comunicación "TMAIL_C": Enviar e-mail
Nota
Descripción de las distintas instrucciones de comunicación
Puede encontrar información detallada sobre las instrucciones de comunicación que pueden
utilizarse en el sistema de información del TIA Portal en el directorio "Referencias >
Comunicación > TeleService".

Consulte también
Posibilidades de parametrización del TS Adapter IE (Página 171)

7.5.2

Establecer conexiones desde y hacia instalaciones remotas (acoplamiento
remoto PG-AS)

7.5.2.1

Acceder desde una instalación remota a una programadora/un PC

Introducción
Con la aplicación TeleService y un TS Adapter MPI se puede establecer una conexión remota
con una instalación remota y comunicarse con ella. La iniciativa para establecer la conexión
remota parte de la programadora/del PC.
No obstante, en una instalación remota se producen a menudo eventos que exigen una
intervención rápida. En tal caso, p. ej. cuando se produce un evento asíncrono, el sistema de
automatización puede iniciar el establecimiento de una conexión remota con una
programadora/un PC.
La figura siguiente muestra gráficamente los componentes necesarios para establecer la
conexión desde una instalación con una programadora/un PC.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

189

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
6LVWHPDGHDXWRPDWL]DFLµQ
6&
&38

3*3&

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR

352'$9($3,9

,QVWUXFFLµQಯ3*B',$/ರ

&RQH[LµQUHPRWD

7HOH6HUYLFH
5HPRWH/LQN

&RPXQLFDFLµQE£VLFD6
76b$GDSWHU

0µGHP 5HGGHWHOHIRQ¯D 0µGHP

5HG03,

Figura 7-8

7.5.2.2

Funcionamiento de la instrucción de comunicación "PG_DIAL"

Requisitos para establecer una conexión

Introducción
Para que un sistema de automatización remoto pueda establecer una conexión remota con
una programadora/un PC deben cumplirse ciertos requisitos de hardware y software. A
continuación se describen estos requisitos.

Requisitos de hardware:
Para establecer una conexión remota desde una instalación remota a una programadora/un
PC no se requiere más hardware que el necesario para acceder desde la programadora/el PC
a la instalación remota.
Para establecer la conexión el programa de usuario llama la instrucción de comunicación
"PG_DIAL" . Esta puede ejecutarse en una CPU S7-300 o S7-400 donde esté realizada la
comunicación básica S7.
Debe utilizarse un TS Adapter I con una versión V5.0 o superior o un TS Adapter II .

Requisitos de software en la instalación:
En el volumen de suministro de TeleService está incluida la instrucción de comunicación
"PG_DIAL" que se instala conjuntamente al instalar el TIA Portal. Encontrará las instrucciones
de comunicación instaladas en la Task Card del editor de bloques, dentro de la carpeta
"Comunicación > TeleService".
Para que una instalación remota pueda establecer una conexión remota con una
programadora o un PC, el programa de usuario de la instalación debe llamar la instrucción de
comunicación "PG_DIAL".

190

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de software en la programadora o en el PC:
En la programadora o en el PC se necesita un producto de software que, en combinación con
TeleService, espere la llamada de una instalación remota, la detecte e informe al programa de
usuario.

7.5.3

Intercambio de datos entre instalaciones remotas (acoplamiento remoto AS-AS)

7.5.3.1

Principios básicos para el acoplamiento remoto AS-AS

Introducción
El acoplamiento remoto AS-AS permite que dos sistemas de automatización intercambien
datos de proceso a través de la red telefónica.

Requisitos
La instrucción de comunicación "AS_DIAL" sólo está disponible si utiliza una CPU de la serie
S7-300/400.

Definición: Sistema de automatización local y remoto
● El sistema de automatización del que parte la iniciativa de establecer la conexión remota se
denomina local.
● El sistema de automatización con el que debe establecerse la conexión remota se
denomina remoto.

Intercambio de datos a través del acoplamiento remoto AS-AS
El intercambio de datos tiene lugar a través de instrucciones de comunicación específicas para
conexiones S7 no configuradas. Para el establecimiento de una conexión remota al sistema de
automatización utilice la instrucción de comunicación "AS_DIAL".
Puede encontrar información detallada para el establecimiento de una conexión en el sistema
de información en el directorio "Referencias > Comunicación > TeleService".
La figura siguiente muestra una representación gráfica de los componentes necesarios para
establecer la conexión de un sistema de automatización local a otro remoto.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

191

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
6LVWHPDGHDXWRPDWL]DFLµQ
UHPRWR
6&
&38UHPRWD

6LVWHPDGHDXWRPDWL]DFLµQ
ORFDO
6&
&38ORFDO

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR

,QVWUXFFLµQಯ$6B',$/ರ

;B5&9
&RQH[LµQUHPRWD

;B6(1';B387
;B*(7

76b$GDSWHU
ORFDO
5HG03,3'
ORFDO

Figura 7-9

7.5.3.2

0µGHP
ORFDO

0µGHP
UHPRWR

76b$GDSWHU
UHPRWR
5HG03,3'
UHPRWD

5HGGH
WHOHIRQ¯D

Intercambio de datos a través del acoplamiento remoto AS-AS

Requisitos de hardware y software para el acoplamiento remoto AS-AS

Introducción
Para que un sistema de automatización local pueda establecer una conexión a distancia con
un sistema de automatización remoto deben cumplirse ciertos requisitos de hardware y
software. A continuación se describen estos requisitos.

Requisitos de hardware
Para la transferencia de datos del proceso de un sistema de automatización local a otro
remoto, sólo se necesita el hardware que requiere la programadora/el PC para acceder al
sistema de automatización correspondiente.
Para establecer y deshacer la conexión remota, el programa de usuario del TIA Portal de la
CPU local llama una instrucción de comunicación. Esta instrucción de comunicación se puede
ejecutar en una CPU S7-300/400 o en una CPU C7. La instrucción de comunicación requiere
que en la CPU se haya establecido la comunicación básica S7. Asimismo, la CPU remota debe
ser compatible con la comunicación básica S7.
Debe utilizarse un TS Adapter I con una versión V5.1 o superior o un TS Adapter II.

192

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de software
En el volumen de suministro de TeleService está incluida la instrucción de comunicación
"AS_DIAL", que se incorpora a la librería del TIA Portal durante la instalación, en la Task Card,
en la carpeta de instrucciones de comunicación de TeleService. Para establecer y deshacer
una conexión remota del sistema de automatización local al remoto hay que llamar la
instrucción de comunicación "AS_DIAL" en el programa de usuario del TIA Portal de la CPU
local.
$FRSODPLHQWRUHPRWR$6$6
6LVWHPDGHDXWRPDWL]DFLµQ
6&

6LVWHPDGHDXWRPDWL]DFLµQ
6&

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR

,QVWUXFFLµQಯ$6B',$/ರ

,QVWUXFFLµQಯ$6B',$/ರ

6)&V

6)&V

03,

03,

76b$GDSWHU

76b$GDSWHU

0µGHP

Figura 7-10

5HGGH
WHOHIRQ¯D

0µGHP

Requisitos de hardware y software para el acoplamiento remoto AS-AS

7.5.4

Enviar un SMS desde una instalación

7.5.4.1

Requisitos para enviar un mensaje SMS

Introducción
Para que la instalación pueda enviar un SMS se deben cumplir los requisitos de hardware y
software siguientes. A continuación se describen estos requisitos.

Requisitos de hardware
Para enviar un mensaje SMS desde una instalación se requiere un módem GSM y un
TS Adapter MPI.
Debe utilizarse un TS Adapter I con una versión V5.2 o superior o un TS Adapter II .

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

193

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de software en la instalación
En el volumen de suministro de TeleService está incluida la instrucción de comunicación
"SMS_SEND", que se incorpora a la librería del TIA Portal durante la instalación, en la Task
Card, en la carpeta de instrucciones de comunicación de TeleService. Para que la instalación
pueda enviar el SMS es necesario que el programa de usuario que está cargado en la CPU de
la instalación llame la instrucción de comunicación "SMS_SEND".
6LVWHPDGHDXWRPDWL]DFLµQ
6&
&38

)D[

HPDLO

3URJUDPDGHXVXDULR
,QVWUXFFLµQ
ಯ606B6(1'ರ
&RPXQLFDFLµQE£VLFD6
76b$GDSWHU

0µGHP
LQDO£PEULFR

0µYLO

5HG03,
5HGWHOHIµQLFD
LQDO£PEULFD\
SURYHHGRUGHUHG

Figura 7-11

Funcionamiento de la instrucción de comunicación "SMS_SEND"

Nota
A través de los servicios adicionales de la compañía de telefonía móvil se puede enviar un
SMS, si es necesario, no sólo a un móvil, sino también a una dirección de correo electrónico
o a un fax.

7.5.5

Enviar un correo electrónico desde una instalación

7.5.5.1

Requisitos para enviar un correo electrónico

Introducción
Para que la instalación pueda enviar un correo electrónico se deben cumplir los requisitos de
hardware y software siguientes:

194

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de hardware
Para enviar un correo electrónico desde una instalación se necesita un TS Adapter IE y una de
las CPU indicadas a continuación:
● una CPU 31x-2 PN/DP a partir de la versión de firmware V2.5
● una CPU 41x-3 PN/DP
● una CPU de la familia S7-1200
● una CPU de la familia S7-1500

Requisitos de software en la instalación
En el volumen de suministro de TeleService se incluyen varias instrucciones de comunicación
específicas de la CPU, que se incorporan durante la instalación a la Task Card, en la carpeta
de instrucciones de comunicación de TeleService, en la librería del TIA Portal.
Para que la instalación pueda enviar un mensaje de correo electrónico es necesario que el
programa de usuario de la instalación llame la instrucción de comunicación correspondiente
específica de la CPU.
Existen las siguientes instrucciones de comunicación para enviar un correo electrónico:
● CPU S7-300/400: utiliza la instrucción de comunicación "AS_MAIL": Enviar e-mail
● CPU S7-1200 V2.x y V3.x: utiliza la instrucción de comunicación "TM_MAIL": Enviar e-mail
● CPU S7-1200 >V4.0: Utiliza la instrucción de comunicación "TMAIL_C": Enviar e-mail
● CPU S7-1500: utiliza la instrucción de comunicación "TMAIL_C": Enviar e-mail
Cada instrucción de comunicación transfiere un correo electrónico de una CPU a un servidor
de correo electrónico a través del Simple Mail Transfer Protocol (SMTP) con el procedimiento
de autenticación "LOGIN" . En este procedimiento SMTP se transfieren los datos sin cifrar.
La siguiente imagen muestra un ejemplo con la instrucción de comunicación "AS_MAIL":

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

195

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
HPDLO

8QLILHG0HVVDJLQJ
,63

6LVWHPDGHDXWRPDWL]DFLµQ
66&38
,3

:$1,QWHUQHW

,63
3URJUDPDGHXVXDULR
,QVWUXFFLµQಯ$6B0$,/ರ
&RPXQLFDFLµQDELHUWDY¯D
,QGXVWULDO(WKHUQHW

76$GDSWHU
,QGXVWULDO(WKHUQHW
,3

5HGORFDO,QGXVWULDO(WKHUQHW

Además, al configurar la CPU en la que se ejecuta la instrucción de comunicación "AS_MAIL"
se debe ajustar la propiedad “Router / Utilizar router“ para la interfaz Ethernet. (Se encuentra
en la configuración de dispositivos, en las direcciones Ethernet y, allí, en Protocolo IP) Como
"Dirección" debe indicarse la dirección IP de la interfaz Ethernet del TS Adapter IE.
Nota
Encontrará más información al respecto en la Task Card de la carpeta "Instrucciones de
comunicación" de TeleService.

196

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

7.6

Indicaciones para la búsqueda de errores

7.6.1

Indicaciones generales para la búsqueda de errores en caso de problemas con el
módem

Introducción
Las siguientes indicaciones le facilitan la labor de encontrar y subsanar las causas de posibles
problemas que se presenten con el módem:
1. Active la "grabación de un archivo de registro" para intercambiar datos entre la
programadora/el PC y el módem. La grabación de este archivo puede proporcionar
información valiosa para determinar las causas del error.
2. Conecte los altavoces de su módem local. Seleccione un volumen audible.
De esta forma podrá oír si:
– en la conexión existe una señal de línea libre,
– el módem llamado está ocupado, o
– el módem llamado recibe la llamada.

Problemas frecuentes del módem
Entre los problemas más frecuentes de los módems se incluye la conexión con el módem:
● No se establece la conexión con el módem.
● La conexión módem se interrumpe
En los siguientes temas encontrará tablas en las que se describen posibles causas y se
proporcionan indicaciones para solucionar el error respectivo.

Consulte también
No se establece una conexión por línea telefónica con el TS Adapter (Página 198)
No se establece una conexión por línea telefónica desde el TS Adapter (Página 200)
La conexión módem se interrumpe (Página 201)
Mensajes de error del módem (Página 202)
Grabación de un archivo de informe para el módem (Página 198)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

197

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

7.6.2

Grabación de un archivo de informe para el módem

Introducción
Para poder localizar de forma más sencilla las causas de errores en un módem se recomienda
permitir la grabación de un archivo de informe.

Procedimiento:
Proceda del siguiente modo:
1. Active a través del Panel de control, opción "Opciones de teléfono y módem", el diálogo de
propiedades del módem utilizado.
2. Compruebe los ajustes de la opción "Informe" en la ficha "Diagnóstico" y modifique, si es
necesario, los ajustes del archivo de informe de modo que puedan registrarse las
actividades.

Resultado:
Las actividades realizadas entre la programadora/el PC y el módem se introducen en el archivo
de informe. Cuando se presenten problemas con el establecimiento de la conexión se puede
analizar el archivo de informe para obtener indicaciones sobre la causa del error.

7.6.3

No se establece una conexión por línea telefónica con el TS Adapter

No se establece una conexión por línea telefónica con el TS Adapter
La siguiente tabla muestra posibles causas y la solución en caso de que no pueda establecerse
ninguna conexión remota con el TS Adapter.
Causa posible

Comprobación/Solución

Cableado defectuoso

● ¿Están correctamente conectados todos los cables de conexión?

Ajuste erróneo de las propiedades
de marcado para la centralita y el
supletorio

● Las propiedades y los parámetros de marcado ajustados para su módem, ¿son
adecuados para la línea de teléfono principal o secundaria?

● ¿Está flojo algún conector?

● Si utiliza el módem en una línea urbana (centralita), en el cuadro de diálogo
"Propiedades de marcado" no debe indicar ningún prefijo para línea urbana.
Los campos del prefijo de marcado para línea urbana deben estar vacíos para
llamadas locales y llamadas de larga distancia.

Ajuste erróneo del método de mar‐ ● En el cuadro de diálogo de las propiedades de marcado de su módem, ¿está
cado
ajustado el método de marcado correcto (tonos/impulsos)?
● Compruebe con un teléfono conectado, la toma en la que desee utilizar el módem.
En caso de marcado por impulsos, durante el marcado pueden oírse en el teléfono
ruidos de arrastre, y en caso de marcado por tonos, diferentes tonos.
Ajuste en las propiedades de marcado del módem el procedimiento de marcado
adecuado.

198

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores
Causa posible

Comprobación/Solución

Bloqueo de marcado activado

● El bloqueo de marcado es una propiedad de módem prescrita según el país, y
dependiendo del tipo de módem, se activa después de uno o varios intentos
frustrados al establecer una conexión.
● Si después de varios intentos de marcado el módem no reacciona, puede ser que
esté activado el bloqueo de marcado. Después de la orden de marcado, al módem
se le envían efectivamente señales, pero el módem no inicia el proceso de
marcado. El driver recibe un mensaje de error general.
● Infórmese sobre cómo se ha instalado el bloqueo de marcado en el módem.
● Cree el archivo de informe (Página 198) (modemlog.txt), donde se registrarán las
acciones realizadas entre la programadora/el PC y el módem.
Después compruebe si el archivo contiene una entrada (p. ej. DELAYED) causada
por un bloqueo de marcado.

Conexión telefónica defectuosa u
ocupada

● Conecte un teléfono y compruebe si en esa conexión puede oírse una señal de
línea libre.
● Si en la misma toma hay conectado un teléfono analógico, debe colgarse dicho
teléfono.
Si ya existe una conexión telefónica, puede ser que en esa toma no pueda
establecerse una conexión módem adicional.

Ajuste erróneo de parámetros serie ● ¿Se han introducido los valores correctos en la ficha "Conexión" de las propiedades
del módem (8 bits de datos, sin paridad, 1 bit de parada)?
¿Se ha ajustado la interfaz COM correcta en la ficha "General" de las propiedades
del módem?
La cadena de inicialización del
TS Adapter no se corresponde con
el módem.

● Infórmese sobre los requisitos de la cadena de inicialización del módem y ajústela
según los requisitos.
Procedimiento para parametrizar el TS Adapter IE (Página 169)

Las preferencias ajustadas para la
corrección de errores entre el mó‐
dem del TS Adapter y el módem de
la programadora/del PC no son
compatibles.

● Adapte las preferencias del módem.
Información importante sobre la parametrización del TS Adapter MPI (Página 164)
Restablecer la parametrización estándar de un TS Adapter MPI (Página 165)
Procedimiento para parametrizar el TS Adapter IE (Página 165)

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

199

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

7.6.4

No se establece una conexión por línea telefónica desde el TS Adapter

No se realiza la rellamada desde el TS Adapter
La siguiente tabla muestra posibles causas y su solución en caso de que no pueda realizarse
ninguna rellamada desde el TS Adapter.
Causa posible

Comprobación/Solución

Ajustes erróneos de ubicación y
llamada en el TS Adapter

Compruebe la parametrización del TS Adapter:
● ¿Están correctamente ajustados el método de marcado y el prefijo de marcado para
línea urbana su teléfono?
● ¿El módem del TS Adapter soporta los caracteres parametrizados para el prefijo de
marcado para línea urbana?
● ¿Está desactivado "Esperar señal antes de marcar" en una estación secundaria?

Inicialización insuficiente del mó‐ Compruebe la cadena de inicialización del módem:
dem
● Tal vez el módem necesite una inicialización más amplia para poder establecer una
conexión remota.
● Propiedades de la cadena de inicialización del módem en el TS Adapter MPI
El número de rellamada no coin‐ Compruebe la parametrización del número de rellamada que ha asignado.
cide

No se realiza la llamada desde el TS Adapter MPI
La siguiente tabla muestra posibles causas y su solución en caso de que no pueda realizarse
ninguna llamada desde el TS Adapter MPI.
Causa posible

Comprobación/Solución

El número de teléfono no coincide ¿Transfiere la instrucción de comunicación "PG_DIAL" el número de teléfono deseado?
La parametrización del TS Adap‐ Compruebe la parametrización del TS Adapter MPI:
ter MPI es incorrecta
● ¿Están correctamente ajustados el método de marcado y el prefijo de marcado para
su conexión telefónica?
● ¿El módem del TS Adapter MPI soporta los caracteres parametrizados para el prefijo
de marcado para línea urbana?
● ¿Está desactivado "Esperar señal antes de marcar" en una estación secundaria?

200

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

7.6.5

La conexión módem se interrumpe

Se interrumpe la conexión módem
La siguiente tabla muestra posibles causas y su solución en caso de que se interrumpa la
conexión módem.
Causa posible:

Comprobación/Solución:

Impulsos de tarificación en la línea

Si se ha solicitado a la compañía telefónica una frecuencia de tarificación, se generan
impulsos de tarificación. Estos impulsos pueden impedir que el módem reconozca la
señal portadora y se desconecte.
● Ajuste un tiempo de espera o de desconexión mayor en su módem.
● Solicite a la compañía telefónica que desactive la frecuencia de tarificación.

Blindaje

● ¿Están suficientemente blindados los cables de conexión utilizados?
● Asegúrese de que las líneas de entrada al módem no pasen cerca de cables de red
y que además guardan la mayor distancia posible con fuentes de alimentación y
pantallas.

Timeout de informe

● Ajuste los tiempos de vigilancia fijos.

Desconexión automática

● Desactive la opción de autodesconexión de una conexión existente al transcurrir un
tiempo determinado sin efectuar ninguna transferencia de datos ("Desconectar la
llamada si está inactiva durante más de ...").

Utilizar control de flujo desactivado

● En la ficha "Conexión" de las propiedades del módem haga clic en el botón
"Avanzada" y active en el cuadro de diálogo que aparece a continuación las
siguientes opciones (si se requieren y aún no están activadas):

La cadena de inicialización del
TS Adapter no se corresponde con
el módem

–

Control del flujo de datos

–

Hardware (RTS/CTS)

–

Compresión de datos

–

Controles de error

● Ajuste la cadena de inicialización del módem según los requisitos:
Consulte también: Posibilidades de parametrización del TS Adapter IE
(Página 171)

Consulte también
Posibilidades de parametrización para el TS Adapter MPI (Página 164)

7.6.6

Lista de chequeo en caso de dificultades con el módem

Introducción
La siguiente lista le ayudará a encontrar las posibles causas en caso de tener problemas con
el módem. En los temas de ayuda que figuran a continuación encontrará cómo y en qué
cuadros de diálogo deberá definir los ajustes mencionados.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

201

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

No se establece la conexión módem:
● Compruebe el cableado y los conectores.
● Compruebe si el método de marcado (tonos/pulsos) está ajustado correctamente.
● Si después de varios intentos de marcado fracasados el módem sigue sin reaccionar,
puede ser que esté activado el bloqueo del marcado. Infórmese sobre cómo está
implementado el bloqueo de marcado en el módem.
● ¿Se está utilizando el módem con una toma principal o con una estación secundaria?
Ajuste de forma correspondiente las propiedades y las propiedades de marcado del
módem.
● Active en las propiedades ampliadas la opción para registrar un archivo de protocolos. La
siguiente conexión que se establezca se graba en el archivo de registros del directorio de
Windows.
● Asegúrese de que los TA ISDN empleados utilizan un mismo protocolo del canal B y D.

La conexión módem se interrumpe:
● Los pulsos de tarificación pueden afectar de forma negativa a una conexión. Solicite a su
proveedor de servicios de telefonía que desconecte los pulsos de tarificación.
● Ajuste los tiempos de vigilancia fijos.
● Desactive la opción de autodesconexión de una conexión existente al transcurrir un tiempo
determinado sin efectuar ninguna transferencia de datos (inactividad).
● Asegúrese de haber activado RTS/CTS para el control del flujo de datos.

7.6.7

Mensajes de error del módem

Información visualizada en el archivo de informe
Los mensajes del módem se guardan en un archivo de informe siempre que se haya activado
su grabación.
El archivo de informe contiene la siguiente información:
Aviso:

Causa posible:

NO DIALTONE

En este momento puede estar efectuándose
● Repita el proceso cuando haya terminado la
una conversación telefónica en la misma línea.
conversación telefónica en dicha línea.

NO CARRIER

La estación seleccionada no está preparada,
no existe módem o no puede establecer una
conexión con el modo operativo ajustado.

● Compruebe los números de teléfono y los ajustes.

BUSY

La estación seleccionada está ocupada.

● Vuelva a intentarlo de nuevo más tarde.

DELAYED: ... ...

Bloqueo de marcado

● Infórmese por medio de la documentación sobre
cómo se ha instalado en su módem el bloqueo de
marcado y elimínelo si así lo desea.

202

Solución:

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

7.6.8

Posibles mensajes de error en las conexiones VPN

No se establece la conexión VPN con el TS Adapter IE Advanced
La siguiente tabla muestra posibles errores y la solución en caso de que no pueda establecerse
ninguna conexión VPN con el TS Adapter IE Advanced.
Posibles errores

Comprobación/Solución

Al acceder a la interfaz web, en el ● Nota: Este problema se produce si en el almacén de certificados de Windows hay
explorador aparece el mensaje de
un certificado CA que tiene el mismo nombre que el certificado CA recién creado.
error "No se puede mostrar la pági‐
● Si ya hay instalado un certificado CA para este TS Adapter en la memoria de
na web".
certificados de Windows y se ha generado un certificado CA nuevo en el TS
Adapter, elimine el certificado CA antiguo de la memoria de certificados de
Windows e instale el certificado CA recién generado.
● Consulte también: Instalar certificado CA para conexión VPN (Página 179)
● Consulte también: Borrar certificado CA para conexión VPN (Página 182)
Mensaje de error: "Se ha producido
un error interno en la aplicación".

● Compruebe si se han creado más usuarios en la base de datos de usuario del TS
Adapter IE Advanced.
● El usuario "Administrador" no puede establecer ninguna conexión remota.

Mensaje de error: "No se ha encon‐ ● Utilice la descarga automática de certificados. Para ello, introduzca la huella digital
trado ningún certificado CA apropia‐
en el campo correspondiente del cuadro de diálogo de conexión.
do en el almacén de certificados de
● Consulte también: Establecer conexión VPN (Página 182)
Windows".
O bien:
● Exporte el certificado CA de la interfaz web del TS Adapter IE Advanced e instálelo
manualmente en el almacén de certificados de Windows.
● Consulte también: Instalar certificado CA para conexión VPN (Página 179)
Mensaje de error: "La dirección re‐
mota indicada no concuerda con la
dirección remota del TS Adapter".
Mensaje de error: "No se puede
comprobar la firma del certificado".

● Para establecer la conexión debe utilizar la dirección remota que ha indicado en el
TS Adapter IE Advanced.
● No es posible utilizar la dirección IP estando registrado el nombre DNS (o
viceversa).
● Si ha generado un nuevo certificado CA en el TS Adapter IE Advanced, debe borrar
el certificado CA antiguo del almacén de certificados de Windows e instalar el
nuevo.
● Consulte también: Borrar certificado CA para conexión VPN (Página 182)
● Consulte también: Instalar certificado CA para conexión VPN (Página 179)

Mensaje de error: "Error de informe" ● Compruebe si en la configuración del TS Adapter IE Advanced está definida la
dirección IP del PC de mantenimiento en la red de la instalación (Parámetros > Red
de la instalación).
Mensaje de error: "Se produjo un
error al establecer la conexión".

● Compruebe si la dirección IP LAN del TS Adapter IE Advanced y la dirección IP de
una de sus tarjetas de red se encuentran en la misma subred. En tal caso, desactive
esta tarjeta de red antes de establecer la conexión remota.

No se pueden enviar correos elec‐
trónicos.

● Compruebe si existe una conexión a la red/a Internet en el puerto WAN.
● Compruebe si el servidor de correo es accesible.
● Compruebe si en el TS Adapter IE Advanced se admiten las conexiones salientes.
● Compruebe si el puerto SMTP está abierto en el firewall para conexiones salientes.

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

203

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la búsqueda de errores

204

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Simulación de dispositivos con S7-PLCSIM
8.1

8

Simulación de dispositivos

Introducción
El TIA Portal permite ejecutar y probar el hardware y el software del proyecto en un entorno
simulado. La simulación se ejecuta directamente en la programadora o PC. Por ello no se
requiere hardware adicional.
El software de simulación ofrece una interfaz de usuario gráfica para observar y modificar la
configuración. Ésta varía en función del dispositivo seleccionado actualmente.

Integración en el TIA Portal
El software de simulación está totalmente integrado en el TIA Portal pero sólo es soportado por
determinados dispositivos. Por lo tanto, el botón para iniciar el software de simulación sólo está
activado si el dispositivo seleccionado soporta la simulación.
El software de simulación requiere para algunos dispositivos una interfaz virtual propia para
comunicarse con los dispositivos simulados. La interfaz virtual se encuentra en el árbol del
proyecto en la rúbrica "Accesos online" junto a las interfaces físicas de la progamadora o PC.
Obtendrá ayuda adicional referente a la simulación al abrir el software a través de un enlace
especial.

Consulte también
Iniciar la simulación (Página 205)

8.2

Iniciar la simulación
Algunos dispositivos se pueden simular con un software adicional. Por ello no es necesario
disponer realmente de los dispositivos para poder comprobar el proyecto exhaustivamente.

Procedimiento
Para iniciar el software de simulación, proceda del siguiente modo:
1. Seleccione el dispositivo que desea simular, p. ej. en el árbol del proyecto.
2. Elija el comando "Simulación > Iniciar" del menú "Online".
Se inicia el software de simulación.

Consulte también
Simulación de dispositivos (Página 205)
Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

205

Simulación de dispositivos con S7-PLCSIM
8.2 Iniciar la simulación

206

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Índice alfabético
A

D

Abrir listines telefónicos, 145
Acceder desde una instalación remota a una
programadora/un PC, 189
Acceso de red
Abrir propiedades, 36
Acceso online, 33
Archivo de informe
mensajes de error del módem, 202

Denominación
TS Adapter, 169
TS Adapter, 152, 161
Deshacer la conexión remota, 175

B
Borrar certificado CA, 182

C
Carga de CPU por Trace, 124
Cargar la copia de seguridad de un dispositivo
online, 28, 30
Certificado CA, 177
Condiciones necesarias para establecer una
conexión remota, 174
Conexión de un TS Adapter con un módem
externo., 155
Conexión de un TS Adapter con un módem
interno., 155
Conexión online, 13
Conectar varios dispositivos, 20, 21
Definición de la vía de conexión estándar, 16
Conexión por línea telefónica
Desconectar, 175
Establecer, 174
Conexión remota
Como conexión por línea telefónica, 151
Como conexión remota controlada por CPU, 188
Como conexión VPN, 176
Conexión VPN
Borrar certificado CA, 182
Desconectar, 184
Establecer, 182
Instalar certificado CA, 179

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

E
El TS Adapter no logra conectarse con la estación
remota, 198
Establecer conexión online, 17
Establecimiento de una conexión desde una
instalación remota ("PG_DIAL"), 190
Establecimiento de una conexión remota, 174
procedimiento, 174

F
Función de analizador lógico, 54
Función Trace, 54

G
Grabación de un archivo de informe para el
módem, 198
Guardar listines telefónicos, 146

I
Imposible establecer la conexión remota, 175
Indicaciones generales para la búsqueda de
errores, 197
Indicaciones para parametrizar un módem
remoto, 155
Información importante sobre la parametrización del
TS Adapter MPI, 164
Iniciar la simulación, 205
Instalar certificado CA, 179
Instalar el módem local, 154
Instrucción de comunicación
"AS_DIAL", 191, 192
"AS_MAIL", 194
"PG_DIAL", 189, 190
"SMS_SEND", 193

207

Índice alfabético

Intercambio de datos a través del acoplamiento
remoto AS-AS
instrucción de comunicación "AS_DIAL", 191
Interfaz
agregar, 36
Interfaz Ethernet
Visualizar parámetros, 38
Interfaz PG/PC
Establecer conexión online, 20
Parámetros ajustables en la interfaz MPI, 41
Parámetros ajustables en la interfaz
PROFIBUS, 42

O
O, 13
Online
Deshacer conexión, 20
Establecer conexión, 17
Modificar vía de conexión, 17
Mostrar dispositivos accesibles, 9
Representación del modo online, 19

P
L
La conexión módem se interrumpe, 202
La conexión VPN no se establece
Comprobación y solución, 203
La estación remota no logra conectarse con el TS
Adapter, 200
Lista de chequeo en caso de dificultades con el
módem, 201
Listín telefónico en TeleService, 143

M
Mediciones
Árbol del proyecto, 63
Mensajes de error del módem
archivo de informe, 202
Módem
local, 154
problemas, 197
remoto, 154
Módems no aptos para plug&play, 154
Modificación online de la configuración, 11
Modificación online de la configuración del
dispositivo, 11
Modo online, 13
Establecer conexión online, 17, 20
Modo de espera o estado de reposo de la PG/el
PC, 13
Visualización del modo online, 15
Mostrar estado online, 19
Mostrar/ocultar interfaces, 35

N
No se establece la conexión módem, 202

208

Parametrización de la interfaz Ethernet, 39
Agregar una dirección IP temporal, 40
Parámetros modificables, 37
Posibilidades de parametrización, 37
Parametrización de la interfaz PG/PC, 35
Detección automática de los parámetros del
bus, 42
Parametrizar el módem remoto, 154
Parametrizar la interfaz Ethernet
Borrar direcciones IP temporales, 40
Conectar con subred, 38
Parametrizar la interfaz PG/PC
Parametrizar la interfaz MPI, 43
Parametrizar la interfaz PROFIBUS, 45
Posibilidades de rellamada en TeleService, 159
Protección de acceso
de fábrica, 156
nivel de protección 1, 157
nivel de protección 2, 157
validez, 156
ventajas, 156

R
Reglas de marcación en listines telefónicos, 149
Rellamada a un número indicado al establecer la
conexión, 159
Requisitos de hardware
instrucción de comunicación "AS_MAIL", 195
instrucción de comunicación "PG_DIAL", 190
instrucción de comunicación "SMS_SEND", 193
Requisitos de hardware para el acoplamiento remoto
AS-AS
instrucción de comunicación "AS_DIAL", 192
Requisitos de software en la instalación
instrucción de comunicación "AS_MAIL", 195
instrucción de comunicación "PG_DIAL", 190
instrucción de comunicación "SMS_SEND", 194

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Índice alfabético

Requisitos de software en la programadora o en el PC
instrucción de comunicación "PG_DIAL", 191
Requisitos de software para el acoplamiento remoto
AS-AS
instrucción de comunicación "AS_DIAL", 193
Requisitos para enviar un correo electrónico, 194
Requisitos para enviar un mensaje SMS, 193
Requisitos para establecer una conexión VPN, 183
Restablecer copia de seguridad, 27, 31
Restablecer dispositivo, 27, 31
Restablecer los ajustes MPI o PROFIBUS, 49
Restablecer los ajustes TCP/IP, 41
Resumen de los TS Adapter que pueden
utilizarse, 152

S
Se interrumpe la conexión módem, 201
causas y solución, 201
Símbolos
en TeleService, 145
Simular dispositivos, 205
Simular hardware, 205
Simular módulos, 205
Simular software, 205
Sistema de automatización
local, 191
remoto, 191

T
TeleService
abrir el listín telefónico, 145
Acceso a listines telefónicos, 143
AS_DIAL, 191
Capacidad de las redes telefónicas, 153
Cómo establecer una conexión:CPU
S7-1200, 189
Compatibilidad con módem, 153
Configuración del listín telefónico, 144
Definición de reglas de marcación, 149
Definir reglas de marcación, 149
Establecer una conexión con el AS, 191
Exportar el listín telefónico, 148
Funciones, 142
Guardar el listín telefónico, 146
Importar listín telefónico, 146
Imprimir el listín telefónico, 149
Insertar filas en el listín telefónico, 146
Instrucción de comunicación: "AS_DIAL", 142
Instrucción de comunicación: "PG_DIAL", 142

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Instrucción de comunicación: "SMS_SEND", 142
Instrucción de comunicación:"AS_MAIL", 142
Instrucción de comunicación:"TM_MAIL", 142
Instrucción de comunicación:"TMAIL_C", 142
Listín telefónico, 143
Mostrar u ocultar columnas en el listín
telefónico, 146
Posibilidades para establecer una conexión:CPU
S7-1500, 189
Posibilidades para establecer una conexión:CPU
S7-300/400, 188
Propiedades del listín telefónico, 143
Routers, 153
significado de los símbolos, 145
Tipos de módems/medios, 153
Trabajar con el listín telefónico, 143
variantes de rellamada, 156
Trace, 53, 54, (Instante del disparo)
Alineación de mediciones superpuestas, 120
Almacenamiento de configuración de Trace, 112
almacenamiento de datos, 56
Análisis del registro en curso, 109
Árbol del proyecto, 61
capacidad funcional, 124
Captación de variables, 120
carga de CPU, 124
ciclo de registro, 97, 137
Comandos de teclado, 70
Condiciones de registro, 127, 133
Configuración de Trace, 55, 112
Creación de una configuración de Trace, 104
Crear medición superpuesta, 105
Cursores de medición, 112
diagrama de curvas, 68
Disparador, 130
Disparo, 138
Dispositivos soportados, 53
duración de registro, 137
Estado, 62
Estructuración del árbol de proyecto en
grupos, 106
Funciones matemáticas, 78
Grupo de señales, 116
Guardar mediciones en el dispositivo, 132, 139
guía de inicio rápido, 95
Imprimir, 120
interfaz, 59, 84, 125
Marca de tiempo, 84
medición, 56, 109, 110
Medición superpuesta, 56, 65, 81, 118
mediciones en el dispositivo (tarjeta de
memoria), 64

209

Índice alfabético

muestreo, 97
Niveles de registro, 122
Observar señales rápidas, 117
Opciones de representación, 74, 98
Paleta Cursores de medición, 85
Paleta Instantáneas, 87
Predisparo, 131
Reducción, 128
registro, 107, 108
Rueda del ratón, 70
Señales, 126
Sincronización horaria, 123
Tabla de señales, 115
Trace en dispositivo, 56
traza de bits, 68
Variable de disparo, 130, 133
Ventana de inspección, 84
ver configuración de Trace, 104
Ver diagrama, 105
vida útil de los valores, 122
Trace del proyecto
Árbol del proyecto, 90
Condiciones de registro, 127
Dispositivos soportados, 125
Guía de inicio rápido, 100
interfaz, 88, 94, 126
Trace S7-1200/1500, 120
TS Adapter IE
Descripción, 168
funcionamiento, 169
parametrización estándar, 169
parametrizar, 172, 187
TS Adapter IE Advanced
Descripción, 184
Parametrizar, 187
Posibilidades de parametrización, 186
Tipos de conexión, 185
TS Adapter MPI
conexión directa, 162
conexión módem, 163
configuración de la conexión directa, 162
configuración de la conexión módem, 163
Descripción, 160
funcionamiento, 161
parametrizar, 165
posibilidades de parametrización, 164
realizar parametrización, 164
restaurar la parametrización estándar, 166
TS Adapter MPI
parametrización estándar, 161
TS Adapter IE Basic
conexión a la red GSM, 171

210

conexión a la red telefónica, 170
conexión a la red telefónica a través de un módem
externo, 171
Tipos de conexión, 169
TS Adapter MPI
crear derechos de acceso, 158
exportar parámetros del adaptador, 166
importar parámetros del adaptador, 167

U
Uso de un TS Adapter para TeleService, 151, 176

V
Ventajas del uso de TeleService, 141

Uso de las funciones online y de diagnóstico
Manual de programación y manejo, 11/2019

Procesamiento de datos de energía
y optimización de consumo de
energía
Manual de programación

11/2019

Principios básicos de
SIMATIC Energy Suite

1

Suministrar datos de energía

2

Procesar datos de energía

3

Almacenar temporalmente y
archivar los datos de energía

4

Generar el programa de
energía

5

Visualizar y evaluar datos de
energía

6

Optimizar el consumo de
energía

7

Bloques de Energy Suite –
Adquisición

A

Bloques de Energy Suite Gestión de cargas

B

Notas jurídicas
Filosofía en la señalización de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal así como para la prevención de
daños materiales. Las informaciones para su seguridad personal están resaltadas con un triángulo de advertencia;
las informaciones para evitar únicamente daños materiales no llevan dicho triángulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producirá la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse daños materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad más estricta en cada caso. Si en una
consigna de seguridad con triángulo de advertencia de alarma de posibles daños personales, la misma consigna
puede contener también una advertencia sobre posibles daños materiales.

Personal cualificado

El producto/sistema tratado en esta documentación sólo deberá ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentación correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formación y experiencia,
el personal cualificado está en condiciones de reconocer riesgos resultantes del manejo o manipulación de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens sólo deberán usarse para los casos de aplicación previstos en el catálogo y la
documentación técnica asociada. De usarse productos y componentes de terceros, éstos deberán haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalación, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. También deberán seguirse las indicaciones
y advertencias que figuran en la documentación asociada.

Marcas registradas

Todos los nombres marcados con ® son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilización por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exención de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicación con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicación se revisa periódicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edición.

Siemens AG
Digital Industries
Postfach 48 48
90026 NÜRNBERG
ALEMANIA

Ⓟ 11/2019 Sujeto a cambios sin previo aviso

Copyright © Siemens AG 2019.
Reservados todos los derechos

Índice
1

2

3

4

Principios básicos de SIMATIC Energy Suite.............................................................................................11
1.1

Gestión de energía con SIMATIC Energy Suite.....................................................................11

1.2

Funcionamiento y componentes de SIMATIC Energy Suite ..................................................12

1.3

Descripción general del procedimiento ..................................................................................15

1.4

Características y convenciones .............................................................................................20

Suministrar datos de energía .....................................................................................................................23
2.1

Información importante sobre los datos de energía...............................................................23

2.2

Datos de energía procedentes de hardware de medición ....................................................25

2.3

Datos de energía procedentes de la memoria imagen del proceso o del área de marcas
de la CPU S7 .........................................................................................................................27

2.4

Datos de energía procedentes de bloques de datos .............................................................28

Procesar datos de energía .........................................................................................................................31
3.1

Objetos de adquisición y programa de medición del consumo de energía............................31

3.2

Crear tabla de objetos de adquisición....................................................................................33

3.3

Agregar objetos de adquisición para tablas de objetos de adquisición .................................33

3.4
3.4.1
3.4.2
3.4.3
3.4.4
3.4.5
3.4.6
3.4.6.1
3.4.6.2
3.4.6.3
3.4.7
3.4.7.1
3.4.7.2
3.4.8
3.4.8.1

Ajuste de las propiedades del objeto de adquisición .............................................................36
Configuración del objeto de adquisición ................................................................................36
Ajustes básicos ......................................................................................................................37
Información del proyecto........................................................................................................38
Identification & Maintenance ..................................................................................................38
Modificación de la habilitación de los objetos de adquisición para el programa de energía......39
Fuente de datos de energía ...................................................................................................40
Asignar fuente de datos de energía .......................................................................................40
Fuente de datos de energía ...................................................................................................41
Tipo de datos de energía .......................................................................................................43
Valores de energía periódicos ...............................................................................................46
Especificar valores de energía para archivado periódico ......................................................46
Datos de energía periódicos ..................................................................................................47
Procesamiento .......................................................................................................................49
Ajustes de procesamiento generales .....................................................................................49

Almacenar temporalmente y archivar los datos de energía .......................................................................53
4.1

Definir períodos de archivado ................................................................................................53

4.2

Períodos de archivado ...........................................................................................................54

4.3

Definir archivado en CPU S7 (SIMATIC Memory Card) ........................................................56

4.4

Archivado y respaldo (CPU S7) .............................................................................................57

4.5

Ejemplo para archivado (CPU S7) .........................................................................................59

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

3

Índice

5

6

4

4.6

Definir archivado en estación PC con WinCC Professional (fichero de variables) ................59

4.7

Archivado y respaldo (WinCC Professional) ..........................................................................61

4.8

Ejemplo de archivado y respaldo (WinCC Professional) .......................................................64

Generar el programa de energía ................................................................................................................67
5.1

Definir los ajustes generales para el programa de energía ...................................................67

5.2

Ajustes generales...................................................................................................................68

5.3

Licencias Runtime para Energy Suite ...................................................................................68

5.4

Generar el programa de energía............................................................................................70

5.5
5.5.1
5.5.2
5.5.3
5.5.4
5.5.5
5.5.6
5.5.6.1
5.5.6.2
5.5.6.3
5.5.6.4
5.5.6.5

Estructura del programa de energía ......................................................................................74
Estructura del programa de energía ......................................................................................74
EnS - block types ...................................................................................................................75
Bloques de programa EnS .....................................................................................................78
EnS - Objetos de adquisición.................................................................................................81
Energy Suite: tipos de datos ..................................................................................................82
Bloques de drivers para hardware de medición.....................................................................84
Estructura del programa de energía para hardware de medición..........................................84
Procesamiento de datos de energía según el principio "EPS" ..............................................84
Área: Entrada .........................................................................................................................86
Área: Procesamiento..............................................................................................................86
Área: Salida............................................................................................................................88

5.6

Compilar y cargar programa de PLC .....................................................................................90

5.7

Probar el programa de energía ..............................................................................................90

5.8

Editar programa de PLC sin instalación de Energy Suite ......................................................92

5.9

Programa de PLC sin librería de hardware de medición con bloques de drivers ..................93

Visualizar y evaluar datos de energía ........................................................................................................95
6.1

Descripción general del procedimiento para archivado y visualización con WinCC
Professional ...........................................................................................................................95

6.2

Valores de energía en estación PC con WinCC Professional ...............................................97

6.3

Mostrar valores de energía para archivado en WinCC Professional .....................................97

6.4

Resumen de los datos de energía .........................................................................................99

6.5

Crear estructura de archivado para valores de energía.......................................................100

6.6

Fichero de variables y segmentación para Energy Suite.....................................................102

6.7

Archivar datos de energía ....................................................................................................103

6.8
6.8.1
6.8.2

Creación de imágenes para Energy Suite con SiVArc.........................................................104
Creación de reglas de imagen SiVArc y copia de reglas para Energy Suite .......................104
Generación de imágenes para Energy Suite .......................................................................105

6.9

Visualización de los datos de energía con WinCC Online Trend View................................107

6.10

Evaluación de los datos de energía con Energy Suite Export Tool .....................................107

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Índice

7

A

Optimizar el consumo de energía.............................................................................................................115
7.1

Gestión de cargas con Energy Suite....................................................................................115

7.2

Descripción general del procedimiento de gestión de cargas..............................................116

7.3

Características y convenciones ...........................................................................................118

7.4
7.4.1
7.4.2
7.4.3
7.4.4
7.4.4.1
7.4.4.2
7.4.5
7.4.6
7.4.7
7.4.7.1
7.4.7.2

Optimizar el consumo de energía ........................................................................................120
Programa de energía para la gestión de cargas..................................................................120
Activación de la función de previsión de un objeto de adquisición ......................................122
Crear un sistema de gestión de cargas ...............................................................................123
Configurar las propiedades de un sistema de gestión de cargas ........................................124
Parametrizar un sistema de gestión de cargas....................................................................124
Ajustes generales.................................................................................................................126
Configuración de los parámetros de la gestión de cargas con ayuda de elementos de
librería ..................................................................................................................................127
Agregar actuadores .............................................................................................................130
Ajustar las propiedades del actuador...................................................................................131
Parametrizar actuadores......................................................................................................131
Ajustes generales.................................................................................................................132

7.5
7.5.1
7.5.2
7.5.2.1
7.5.2.2
7.5.2.3
7.5.2.4
7.5.2.5
7.5.2.6

Generar un programa de energía para la gestión de cargas ...............................................133
Generar programas de energía............................................................................................133
Estructura del programa de energía ....................................................................................137
Estructura del programa de energía ....................................................................................137
EnS - block types .................................................................................................................137
EnS - acquisition objects......................................................................................................139
EnS - program blocks...........................................................................................................140
LMGT - systems...................................................................................................................140
Energy Suite data types .......................................................................................................141

Bloques de Energy Suite – Adquisición....................................................................................................145
A.1

Sinopsis de los bloques de Energy Suite para la adquisición..............................................145

A.2
A.2.1
A.2.1.1
A.2.1.2
A.2.1.3
A.2.1.4
A.2.2
A.2.2.1
A.2.2.2
A.2.2.3
A.2.2.4
A.2.2.5
A.2.3
A.2.3.1
A.2.3.2
A.2.3.3
A.2.4
A.2.4.1
A.2.4.2
A.2.4.3

Bloques de función (FB).......................................................................................................149
EnS_ArchiveDataLog: Escribir valores de energía en Data Logs........................................149
Descripción EnS_ArchiveDataLog .......................................................................................149
Parámetro EnS_ArchiveDataLog .........................................................................................150
Parámetro Status .................................................................................................................153
Avisos EnS_ArchiveDataLog ...............................................................................................155
EnS_ArchiveHMI: Escribir valores de energía en fichero de variables ................................158
Descripción EnS_ArchiveHMI ..............................................................................................158
Componente WinCC Professional .......................................................................................160
Parámetro EnS_ArchiveHMI ................................................................................................161
Parámetro Status .................................................................................................................162
Avisos EnS_ArchiveHMI ......................................................................................................163
EnS_BufferRead: Leer valores de energía de bloques de datos .........................................165
Descripción EnS_BufferRead...............................................................................................165
Parámetro - EnS_BufferRead ..............................................................................................166
Parámetro Status .................................................................................................................167
EnS_BufferWrite: Escribir valores de energía en bloques de datos ....................................167
Descripción EnS_BufferWrite...............................................................................................167
Parámetro EnS_BufferWrite.................................................................................................168
Parámetro Status .................................................................................................................169

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

5

Índice

A.2.5
A.2.5.1
A.2.5.2
A.2.5.3
A.2.6
A.2.6.1
A.2.6.2
A.2.6.3
A.2.6.4
A.2.7
A.2.7.1
A.2.7.2
A.2.7.3
A.2.7.4
A.2.8
A.2.8.1
A.2.8.2
A.2.8.3
A.2.8.4
A.2.9
A.2.9.1
A.2.9.2
A.2.9.3
A.2.9.4
A.2.10
A.2.10.1
A.2.10.2
A.2.10.3
A.2.11

6

A.2.11.1
A.2.11.2
A.2.11.3
A.2.12
A.2.12.1
A.2.12.2
A.2.12.3
A.2.12.4
A.2.13
A.2.13.1
A.2.13.2
A.2.14
A.2.14.1
A.2.14.2
A.2.14.3

EnS_CalcEnergyData: Calcular valores de energía ............................................................170
Descripción EnS_CalcEnergyData.......................................................................................170
Parámetro EnS_CalcEnergyData.........................................................................................174
Parámetro Status .................................................................................................................174
EnS_DrvAnalogValue: Adquirir valores de potencia del tipo REAL .....................................176
Descripción EnS_DrvAnalogValue.......................................................................................176
Parámetro EnS_DrvAnalogValue.........................................................................................176
Parámetro Status .................................................................................................................177
Avisos EnS_DrvAnalogValue ...............................................................................................177
EnS_DrvCounterLInt: Adquirir valores de contador de energía del tipo LINT......................178
Descripción EnS_DrvCounterLInt ........................................................................................178
Parámetro EnS_DrvCounterLInt ..........................................................................................178
Parámetro Status .................................................................................................................179
Avisos EnS_DrvCounterLInt.................................................................................................179
EnS_DrvCounterLReal: Adquirir valores de contador de energía del tipo LREAL...............180
Descripción EnS_DrvCounterLReal .....................................................................................180
Parámetro EnS_DrvCounterLReal .......................................................................................180
Parámetro Status .................................................................................................................181
Avisos EnS_DrvCounterLReal .............................................................................................181
EnS_DrvPulse: Adquirir señales de impulso........................................................................182
Descripción EnS_DrvPulse ..................................................................................................182
Parámetro EnS_DrvPulse ....................................................................................................182
Parámetro Status .................................................................................................................183
Avisos EnS_DrvPulse ..........................................................................................................184
EnS_EnergyDataAdv: Poner a disposición valores de energía avanzados.........................184
Descripción EnS_EnergyDataAdv........................................................................................184
Parámetro EnS_EnergyDataAdv..........................................................................................185
Parámetro Status .................................................................................................................185
EnS_EnergyDataAdvMinMax: Poner a disposición valores mínimos y máximos
avanzados............................................................................................................................185
Descripción EnS_EnergyDataAdvMinMax ...........................................................................185
Parámetro EnS_EnergyDataAdvMinMax .............................................................................186
Parámetro Status .................................................................................................................186
EnS_EnergyDataBasic: Poner a disposición metadatos y valores de energía ....................187
Descripción EnS_EnergyDataBasic .....................................................................................187
Parámetro EnS_EnergyDataBasic .......................................................................................187
Parámetro Status .................................................................................................................188
Avisos EnS_EnergyDataBasic .............................................................................................188
EnS_Organization: Poner a disposición datos de organización...........................................191
Descripción EnS_Organization ............................................................................................191
Parámetro EnS_Organization ..............................................................................................192
EnS_TimeSync: Sincronizar horas.......................................................................................192
Descripción EnS_TimeSync.................................................................................................192
Parámetro EnS_TimeSync...................................................................................................194
Parámetro Status .................................................................................................................195

A.3
A.3.1
A.3.1.1
A.3.1.2
A.3.2
A.3.2.1
A.3.2.2

Bloques de datos (DB) .........................................................................................................197
EnS_BufferDB ......................................................................................................................197
Descripción EnS_BufferDB ..................................................................................................197
Estructura EnS_BufferDB.....................................................................................................198
EnS_BufferWorkDB..............................................................................................................198
Descripción EnS_BufferWorkDB..........................................................................................198
Estructura EnS_BufferWorkDB ............................................................................................198

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Índice

A.4
A.4.1
A.4.1.1
A.4.1.2
A.4.2
A.4.2.1
A.4.2.2
A.4.3
A.4.3.1
A.4.3.2
A.4.4
A.4.4.1
A.4.4.2
A.4.5
A.4.5.1
A.4.5.2
A.4.6
A.4.6.1
A.4.6.2
A.4.7
A.4.7.1
A.4.7.2
A.4.8
A.4.8.1
A.4.8.2
A.4.9
A.4.9.1
A.4.9.2
A.4.10
A.4.10.1
A.4.10.2
A.4.11
A.4.11.1
A.4.11.2
A.4.12
A.4.12.1
A.4.12.2
A.4.13
A.4.13.1
A.4.13.2
A.4.14
A.4.14.1
A.4.14.2
A.4.15
A.4.15.1
A.4.15.2

Tipos de datos definidos por el usuario (UDT).....................................................................199
EnS_typeAnalogValue .........................................................................................................199
Descripción EnS_typeAnalogValue......................................................................................199
Estructura EnS_typeAnalogValue ........................................................................................199
EnS_typeBufferReadCtrl ......................................................................................................199
Descripción EnS_typeBufferReadCtrl ..................................................................................199
Estructura EnS_typeBufferReadCtrl.....................................................................................199
EnS_typeBufferReadStat .....................................................................................................200
Descripción EnS_typeBufferReadStat .................................................................................200
Estructura EnS_typeBufferReadStat....................................................................................200
EnS_typeBufferWork............................................................................................................200
Descripción EnS_typeBufferWork ........................................................................................200
Estructura EnS_typeBufferWork ..........................................................................................201
EnS_typeBufferWriteCtrl ......................................................................................................202
Descripción EnS_typeBufferWriteCtrl ..................................................................................202
Estructura EnS_typeBufferWriteCtrl.....................................................................................202
EnS_typeBufferWriteStat .....................................................................................................202
Descripción EnS_typeBufferWriteStat..................................................................................202
Estructura EnS_typeBufferWriteStat ....................................................................................202
EnS_typeEnergyAdv ............................................................................................................203
Descripción EnS_typeEnergyAdv ........................................................................................203
Estructura EnS_typeEnergyAdv...........................................................................................203
EnS_typeEnergyBasic..........................................................................................................204
Descripción EnS_typeEnergyBasic......................................................................................204
Estructura EnS_typeEnergyBasic ........................................................................................204
EnS_typeEnergyCounter......................................................................................................205
Descripción EnS_typeEnergyCounter..................................................................................205
Estructura EnS_typeEnergyCounter ....................................................................................205
EnS_typeEnergyMeta ..........................................................................................................205
Descripción EnS_typeEnergyMeta.......................................................................................205
Estructura EnS_typeEnergyMeta .........................................................................................206
EnS_typeHMIWriteCtrl .........................................................................................................208
Descripción EnS_typeHMIWriteCtrl .....................................................................................208
Estructura EnS_typeHMIWriteCtrl........................................................................................209
EnS_typeHMIWriteStat ........................................................................................................209
Descripción EnS_typeHMIWriteStat.....................................................................................209
Estructura EnS_typeHMIWriteStat .......................................................................................209
EnS_typeOrgData ................................................................................................................210
Descripción EnS_typeOrgData ............................................................................................210
Estructura EnS_typeOrgData...............................................................................................210
EnS_typeSync......................................................................................................................210
Descripción EnS_typeSync ..................................................................................................210
Estructura EnS_typeSync ....................................................................................................211
EnS_typeValue.....................................................................................................................211
Descripción EnS_typeValue.................................................................................................211
Estructura EnS_typeValue ...................................................................................................211

A.5
A.5.1
A.5.2

Definición de las enumeraciones .........................................................................................212
Enumeración para el tipo de conexión del medidor .............................................................212
Enumeración para unidades ................................................................................................212

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

7

Índice

B

8

Bloques de Energy Suite - Gestión de cargas..........................................................................................215
B.1

Sinopsis de los bloques de Energy Suite para la gestión de cargas ..................................215

B.2
B.2.1
B.2.1.1
B.2.1.2
B.2.1.3
B.2.2
B.2.2.1
B.2.2.2
B.2.2.3
B.2.3
B.2.3.1
B.2.3.2
B.2.3.3
B.2.3.4
B.2.4
B.2.4.1
B.2.4.2
B.2.4.3

Bloques de función...............................................................................................................218
EnS_LmgtForecast_x ...........................................................................................................218
Descripción de EnS_LmgtForecast_x ..................................................................................218
Parámetro EnS_LmgtForecast_x .........................................................................................219
Parámetro status..................................................................................................................219
EnS_LmgtControl_Peak .......................................................................................................219
Descripción del bloque EnS_LmgtControl_Peak..................................................................219
Parámetro EnS_LmgtControl_Peak .....................................................................................225
Parámetro status..................................................................................................................225
EnS_LmgtActor_x.................................................................................................................226
Descripción de EnS_LmgtActor_x........................................................................................226
Parámetro EnS_LmgtActor_x...............................................................................................234
Parámetro status..................................................................................................................234
Concepto de peticiones: secuencia de desescalada/escalada............................................235
EnS_LmgtBackupRestore ....................................................................................................242
Descripción de EnS_LmgtBackupRestore ...........................................................................242
Parámetro EnS_LmgtBackupRestore ..................................................................................246
Parámetro status..................................................................................................................247

B.3
B.3.1
B.3.1.1
B.3.1.2
B.3.2
B.3.2.1
B.3.2.2

Bloques de datos .................................................................................................................247
EnS_LmgtGeneralData ........................................................................................................247
Descripción de EnS_LmgtGeneralData ...............................................................................247
Estructura de EnS_LmgtGeneralData..................................................................................247
EnS_LmgtActorList...............................................................................................................248
Descripción de EnS_LmgtActorList......................................................................................248
Estructura de EnS_LmgtActorList ........................................................................................248

B.4
B.4.1
B.4.1.1
B.4.1.2
B.4.2
B.4.2.1
B.4.2.2
B.4.3
B.4.3.1
B.4.3.2
B.4.4
B.4.4.1
B.4.4.2
B.4.5
B.4.5.1
B.4.5.2
B.4.6
B.4.6.1
B.4.6.2
B.4.7
B.4.7.1
B.4.7.2
B.4.8

Tipos de datos definidos por el usuario (UDT).....................................................................248
EnS_typeActorElement ........................................................................................................248
Descripción de EnS_typeActorElement ...............................................................................248
Estructura de EnS_typeActorElement..................................................................................249
EnS_typeLmgtActorMeta .....................................................................................................249
Descripción de EnS_typeLmgtActorMeta.............................................................................249
Estructura de EnS_typeLmgtActorMeta ...............................................................................249
EnS_typeLmgtActorParameter.............................................................................................250
Descripción de EnS_typeLmgtActorParameter....................................................................250
Estructura de EnS_typeLmgtActorParameter ......................................................................250
EnS_typeLmgtActorParameterSet .......................................................................................251
Descripción de EnS_typeLmgtActorParameterSet ..............................................................251
Estructura de EnS_typeLmgtActorParameterSet.................................................................251
EnS_typeLmgtActorStatus ...................................................................................................251
Descripción de EnS_typeLmgtActorStatus ..........................................................................251
Estructura de EnS_typeLmgtActorStatus.............................................................................252
EnS_typeLmgtActorStatusInOut ..........................................................................................252
Descripción de EnS_typeLmgtActorStatusInOut..................................................................252
Estructura de EnS_typeLmgtActorStatusInOut ....................................................................253
EnS_typeLmgtAlarmElement ...............................................................................................253
Descripción de EnS_typeLmgtAlarmElement ......................................................................253
Estructura de EnS_typeLmgtAlarmElement.........................................................................254
EnS_typeLmgtControlLimitConfig ........................................................................................254

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Índice

B.4.8.1
B.4.8.2
B.4.9
B.4.9.1
B.4.9.2
B.4.10
B.4.10.1
B.4.10.2
B.4.11
B.4.11.1
B.4.11.2
B.4.12
B.4.12.1
B.4.12.2
B.4.13
B.4.13.1
B.4.13.2
B.4.14
B.4.14.1
B.4.14.2
B.4.15
B.4.15.1
B.4.15.2
B.4.16
B.4.16.1
B.4.16.2
B.4.17
B.4.17.1
B.4.17.2
B.4.18
B.4.18.1
B.4.18.2
B.4.19
B.4.19.1
B.4.19.2
B.4.20
B.4.20.1
B.4.20.2
B.4.21
B.4.21.1
B.4.21.2

Descripción de EnS_typeLmgtControlLimitConfig ...............................................................254
Estructura de EnS_typeLmgtControlLimitConfig..................................................................254
EnS_typeLmgtControlParameters........................................................................................255
Descripción de EnS_typeLmgtControlParameters...............................................................255
Estructura de EnS_typeLmgtControlParameters .................................................................255
EnS_typeLmgtControlParameterSet ....................................................................................255
Descripción de EnS_typeLmgtControlParameterSet ...........................................................255
Estructura de EnS_typeLmgtControlParameterSet..............................................................256
EnS_typeLmgtControlTimeConfig........................................................................................256
Descripción de EnS_typeLmgtControlTimeConfig ...............................................................256
Estructura de EnS_typeLmgtControlTimeConfig .................................................................256
EnS_typeLmgtForecastValues.............................................................................................257
Descripción de EnS_typeLmgtForecastValues ....................................................................257
Estructura de EnS_typeLmgtForecastValues ......................................................................257
EnS_typeLmgtGeneralData .................................................................................................257
Descripción de EnS_typeLmgtGeneralData.........................................................................257
Estructura de EnS_typeLmgtGeneralData ...........................................................................258
EnS_typeLmgtJobFeedbackElement ...................................................................................258
Descripción de EnS_typeLmgtJobFeedbackElement ..........................................................258
Estructura de EnS_typeLmgtJobFeedbackElement.............................................................259
EnS_typeLmgtJobRequestElement .....................................................................................259
Descripción de EnS_typeLmgtJobRequestElement.............................................................259
Estructura de EnS_typeLmgtJobRequestElement ...............................................................259
EnS_typeLmgtJobRequestStack..........................................................................................260
Descripción de EnS_typeLmgtJobRequestStack.................................................................260
Estructura de EnS_typeLmgtJobRequestStack ...................................................................260
EnS_typeLmgtJobTaskElement ...........................................................................................260
Descripción de EnS_typeLmgtJobTaskElement ..................................................................260
Estructura de EnS_typeLmgtJobTaskElement.....................................................................261
EnS_typeLmgtJobTaskStack ...............................................................................................261
Descripción de EnS_typeLmgtJobTaskStack ......................................................................261
Estructura de EnS_typeLmgtJobTaskStack.........................................................................261
EnS_typeLmgtOrganisation .................................................................................................262
Descripción de EnS_typeLmgtOrganisation.........................................................................262
Estructura de EnS_typeLmgtOrganisation ...........................................................................262
EnS_typeLmgtTriggerBR .....................................................................................................262
Descripción de EnS_typeLmgtTriggerBR.............................................................................262
Estructura de EnS_typeLmgtTriggerBR ...............................................................................263
EnS_typeLmgtVisualization..................................................................................................263
Descripción de EnS_typeLmgtVisualization.........................................................................263
Estructura de EnS_typeLmgtVisualization ...........................................................................263

Índice alfabético........................................................................................................................................265

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

9

Índice

10

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Principios básicos de SIMATIC Energy Suite
1.1

1

Gestión de energía con SIMATIC Energy Suite

Gestión de energía
El incremento global del coste de la energía, sumado a la obligación legal de alcanzar una serie
de objetivos climáticos de ámbito mundial, está haciendo que las instalaciones industriales
dediquen cada vez más esfuerzos a la adquisición de datos de energía y a la gestión de la
energía. El primer paso hacia una gestión sostenible de la energía consiste en identificar los
principales flujos de energía y consumidores de una empresa o planta de producción, y
analizar sus pautas de consumo. Esto es lo que se denomina "transparencia energética".
La adquisición de datos de energía comienza con la definición de una serie de medidas
encaminadas a mejorar la eficiencia energética. A continuación, esas medidas se implantan
siguiendo el orden que resulte más efectivo desde el punto de vista técnico y económico. El
orden de implantación viene determinado por dos factores: "Potencial de ahorro" y "Coste de
implantación". Así, por ejemplo, las medidas que presentan un potencial de ahorro medio y un
coste bajo tienen preferencia sobre las medidas con un potencial alto pero un coste también
alto.
Otros aspecto son los requisitos legales. La normativa exige la vigilancia de las emisiones y la
elaboración de informes periódicos. Los datos de energía adquiridos permiten lograr la
transparencia energética en toda la empresa y un perfecto equilibrio de energía y materias
primas.
Además de recopilar datos de energía, una buena gestión de la energía requiere visualizar y
archivar esos datos, así como calcular indicadores clave y elaborar estadísticas energéticas.
Además de la gestión de la energía, resulta imprescindible optimizar el consumo de energía de
acuerdo con los datos de energía adquiridos.

SIMATIC Energy Suite en STEP 7 y WinCC (TIA Portal)
Gracias a los componentes de SIMATIC Energy Suite, en adelante llamado Energy Suite, las
principales tareas de la gestión de la energía se integran en el propio sistema de
automatización. La configuración se realiza de manera sencilla y cómoda, directamente en el
TIA Portal (STEP 7 y WinCC).
Energy Suite adquiere, archiva y pone a disposición los datos de energía en la CPU de manera
estandarizada. A continuación, el usuario puede visualizar esos datos y utilizarlos en su
programa de automatización (p. ej., para vigilancia).
En Energy Suite puede optimizar adicionalmente el consumo de energía de acuerdo con los
bloques de gestión de cargas introducidos.
Para visualizar en WinCC Professional o en WinCC Basic, Comfort bzw. Advanced los datos
de energía adquiridos, Siemens Industry Online Support dispone de imágenes plantilla y
elementos gráficos.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

11

Principios básicos de SIMATIC Energy Suite
1.2 Funcionamiento y componentes de SIMATIC Energy Suite
Asimismo, los datos de energía pueden procesarse posteriormente en SIMATIC Energy
Manager:
● para calcular indicadores clave, p. ej., el coste energético por unidad producida, o las
emisiones anuales de CO2
● para elaborar cómodamente estadísticas energéticas, p. ej., con el fin de optimizar la
adquisición de energía

Procesamiento posterior de datos de energía con SIMATIC Energy Manager
La información de configuración de Energy Suite puede utilizarse directamente en SIMATIC
Energy Manager , lo que evita tareas de configuración adicionales. SIMATIC Energy Manager,
en adelante llamado Energy Manager , ofrece principalmente funciones para la gestión
comercial del consumo de energía en toda la empresa. Para poder optimizar el consumo de
energía, los principales flujos de energía de la empresa deben ser transparentes.
Con Energy Manager puede elaborar balances de energía y materias primas o calcular
indicadores clave. Los indicadores clave (Key Performance Indicators o KPI) permiten evaluar
y comparar desde el punto de vista de la energía distintos procesos e instalaciones. La
evaluación y comparación se denomina también "benchmarking". La asignación de los costes
energéticos a los consumidores reales conduce a la transparencia de los costes y a la
sensibilización de los empleados sobre el consumo energético de máquinas, procesos e
instalaciones.
Encontrará más información sobre Energy Manager en el Siemens Industry Online Support
(https://support.industry.siemens.com/cs/ww/es/ps/14711).

1.2

Funcionamiento y componentes de SIMATIC Energy S