ntido ...

Produce la sincronizaci√≥n ...

plus

la primera se√±al cero despu√©s de abandonar el sen‚Äê REFPT_TYPE = 0
sor del punto de referencia en el sentido positivo

plus

la primera se√±al cero despu√©s de abandonar el sen‚Äê REFPT_TYPE = 1
sor del punto de referencia en el sentido negativo

menos

la primera se√±al cero despu√©s de abandonar el sen‚Äê REFPT_TYPE = 2
sor del punto de referencia en el sentido positivo

menos

la primera se√±al cero despu√©s de abandonar el sen‚Äê REFPT_TYPE = 3
sor del punto de referencia en el sentido negativo

3. Introduzca la velocidad de inicio;
‚Äì Marcha r√°pida (REFPT_SPD = 0)
‚Äì Marcha lenta (REFPT_SPD = 1)
4. Escriba y active los datos m√°quina.
5. Active la se√±al de control para el modo de operaci√≥n "B√∫squeda del punto de referencia"
(MODE_IN = 3).
6. Active la se√±al de control para la habilitaci√≥n del accionamiento (DRV_EN = 1).
7. Active el selector de funci√≥n para "No evaluar la entrada de habilitaci√≥n" (EI_OFF = 1) o
cablee la entrada de habilitaci√≥n para el canal correspondiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2811

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
8. Conecte la se√±al de control para el sentido de marcha positivo o negativo o la se√±al de inicio
(DIR_P = 1, DIR_M = 1 o START = 1).
9. Llame la instrucci√≥n ABS_CTRL o ABS_CTRL_451.
La tabla siguiente muestra los comandos de inicio para una b√∫squeda del punto de referencia.
Comando de
inicio

Tarea

Comentario

DIR_P

El accionamiento se inicia en el sentido de
los valores positivos. Se mueve, pues, en
el sentido del final de la zona de despla‚Äê
zamiento.

Si en los datos m√°quina se introduce un
sentido negativo, el FM 451 notifica un
error de operador. No se realiza ninguna
b√∫squeda del punto de referencia.

DIR_M

El accionamiento se inicia en el sentido de
los valores negativos. Se mueve, pues, en
el sentido del principio de la zona de des‚Äê
plazamiento.

Si en los datos m√°quina se introduce un
sentido positivo , el FM 451 notifica un
error de operador. No se realiza ninguna
b√∫squeda del punto de referencia.

START

El accionamiento se inicia en el sentido
que se ha introducido en los datos m√°qui‚Äê
na.

Nota
Para el eje rotativo rige lo siguiente: La reproducibilidad del punto de referencia s√≥lo est√°
garantizado si entre el valor Final del eje rotativo y el valor Recorrido por vuelta existe una
relaci√≥n de n√∫mero entero.

La figura siguiente muestra un ejemplo del modo de operaci√≥n "B√∫squeda del punto de
referencia".

2812

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

02'(B,1 
%¬ºVTXHGDGHOSXQWRGHUHIHUHQFLD
'59B(1
+DELOLWDFL¬µQGHODFFLRQDPLHQWR
[O
(QWUDGDGHKDELOLWDFL¬µQ
:$,7B(,
67$57
',5B0',5B3
:25.,1*
6<1&

YU¬£SLGD
YOHQWD
V

6HQVRUGHO
SXQWRGH
UHIHUHQFLD

6H¬≥DOFHUR

* Las se√±ales de inicio se desactivan con la instrucci√≥n ABS_CTRL o ABS_CTRL_451.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar operaci√≥n de posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitaci√≥n del accionamiento

16.0

MODE_IN

BYTE

B#16#0

3 = B√∫squeda del punto de referencia

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Operaci√≥n de posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitaci√≥n externa

25.0

SYNC

BOOL

FALSE

1 = Eje sincronizado

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitaci√≥n

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2813

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia

52.0

REFPT_TYPE

DINT

L#0

Tipo de b√∫squeda del punto de referencia

99.0

REFPT_SPD

BOOL

TRUE

Velocidad de inicio para la b√∫squeda del punto de
referencia
0 = Marcha r√°pida
1 = Marcha lenta

Efectos del modo de operaci√≥n
‚óè Con el inicio de la marcha se elimina la sincronizaci√≥n.
‚óè La posici√≥n real se ajusta al valor de la coordenada del punto de referencia si se activa la
se√±al de respuesta SYNC.
‚óè La zona de trabajo se fija en el eje.
‚óè Los distintos puntos dentro de la zona de trabajo conservan sus valores originales, pero se
encuentran en posiciones nuevas.

Cancelaci√≥n de la b√∫squeda del punto de referencia
El modo de operaci√≥n "B√∫squeda del punto de referencia" se cancela cuando
‚óè la se√±al de habilitaci√≥n del accionamiento se borra (DRV_EN = 0),
‚óè se ha rebasado un l√≠mite de la zona de desplazamiento en un eje lineal.

B√∫squeda del punto de referencia dependiente de la posici√≥n de inicio
En una b√∫squeda del punto de referencia es preciso distinguir diversos casos que dependen
‚óè de la posici√≥n del accionamiento al iniciar una b√∫squeda del punto de referencia,
‚óè del sentido de arranque parametrizado,
‚óè de la posici√≥n parametrizada de la se√±al cero respecto al sensor del punto de referencia.

2814

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los casos de REFPT_TYPE = 0 y REFPT_TYPE = 1. Para
REFPT_TYPE = 2 y REFPT_TYPE = 3 rigen las figuras seg√∫n corresponda.
Condiciones para la b√∫squeda del punto de referencia

Desarrollo de la b√∫squeda del punto de referencia

Ejemplo de b√∫squeda del punto de referencia
(REFPT_TYPE = 0):

1

‚óè El sentido de arranque es positivo.
‚óè La posici√≥n de la se√±al cero del sensor del punto de
referencia est√° parametrizado en el sentido positivo.

5()
YU¬£SLGD
YOHQWD
3RVLFL¬µQLQLFLDO

6<1&

Ejemplo de b√∫squeda del punto de referencia
(REFPT_TYPE = 1):

1

‚óè El sentido de arranque es positivo.
‚óè La posici√≥n de la se√±al cero del sensor del punto de
referencia est√° parametrizado en el sentido negativo.

5()
YU¬£SLGD
YOHQWD
6<1&
3RVLFL¬µQLQLFLDO

5
YOHQWD

Ejemplo de b√∫squeda del punto de referencia
(REFPT_TYPE = 0):

1

‚óè El sentido de inicio debe estar parametrizado en el
sentido positivo.
‚óè La posici√≥n de la se√±al cero del sensor del punto de
referencia est√° parametrizado en el sentido positivo.
‚óè El contacto inversor es m√°s positivo que el sensor del
punto de referencia.

5()
YU¬£SLGD
YOHQWD
3RVLFL¬µQLQLFLDO

6<1&

Ejemplo de b√∫squeda del punto de referencia
(REFPT_TYPE = 1):

1

‚óè El sentido de arranque es positivo.
‚óè La posici√≥n de la se√±al cero del sensor del punto de
referencia est√° parametrizado en el sentido negativo.
‚óè La posici√≥n de inicio de la b√∫squeda del punto de
referencia se encuentra en el sensor del punto de
referencia.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

5()
6<1&

3RVLFL¬µQLQLFLDO

YOHQWD

2815

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Condiciones para la b√∫squeda del punto de referencia

Desarrollo de la b√∫squeda del punto de referencia

Ejemplo de b√∫squeda del punto de referencia
(REFPT_TYPE = 0):

1

‚óè El sentido de arranque es positivo.

5()

‚óè La posici√≥n de la se√±al cero del sensor del punto de
referencia est√° parametrizado en el sentido positivo.
‚óè El contacto inversor es m√°s positivo que el sensor del
punto de referencia.

80
YU¬£SLGD
YOHQWD

6<1& 3RVLFL¬µQLQLFLDO

5

5

YOHQWD
YU¬£SLGD

Ejemplo de b√∫squeda del punto de referencia
(REFPT_TYPE=0):

1

‚óè El sentido de arranque es positivo.
‚óè La posici√≥n de la se√±al cero del sensor del punto de
referencia est√° parametrizado en el sentido positivo.

5()
YOHQWD

‚óè Velocidad de inicio = velocidad lenta
3RVLFL¬µQLQLFLDO

6<1&

R = Inversi√≥n del sentido
REF = Sensor del punto de referencia
UM = Contacto inversor
N = se√±al cero del enc√≥der
SYNC = Se ha alcanzado la sincronizaci√≥n

Modo de operaci√≥n "Modo incremental"
Definici√≥n
En el modo de operaci√≥n "Modo incremental" el FM 451 puede mover el accionamiento
‚óè a destinos absolutos,
‚óè mover el accionamiento de forma relativa alrededor de una parte del trayecto en un sentido
predeterminado.
El objetivo o los recorridos relativos se predeterminan como incrementos del FM 451. Tiene la
posibilidad de insertar un m√°ximo de 100 incrementos en una tabla, que son v√°lidos tanto para
el modo de operaci√≥n "Modo incremental relativo" como para el "Modo incremental absoluto".
Independientemente de la tabla de incrementos, es posible especificar el recorrido con el
n√∫mero de incremento 254 (P√°gina 2868) y eln√∫mero de incremento 255 (P√°gina 2869).

2816

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Con el incremento 252 (P√°gina 2868) es posible mover el accionamiento, en primer lugar sin
destino, en el sentido predeterminado (marcha sin fin). Si se produce un evento externo (xI3)
se realiza el posicionamiento en el destino parametrizado.

Requisitos
‚óè El eje debe estar parametrizado.
‚óè El eje debe estar sincronizado.
‚óè Los incrementos deben estar presentes en el m√≥dulo.

Interpretaci√≥n de los incrementos
En funci√≥n del modo incremental que se seleccione, el FM 451 interpreta los datos
especificados de una manera u otra.
‚óè Modo incremental absoluto: Los incrementos se interpretan como posici√≥n de destino
absoluta.
En el caso del eje rotativo no puede sobrepasarse el final del eje.
‚óè Modo incremental relativo: Los incrementos se interpretan como distancia de la posici√≥n de
inicio.
En el caso del eje rotativo no puede sobrepasarse el final del eje (se admiten vueltas
m√∫ltiples).
Nota
Para el modo de operaci√≥n "Modo incremental relativo" s√≥lo se permiten incrementos positivos.
Los incrementos obtienen su signo de las especificaciones de sentido DIR_P o DIR_M.

Desarrollo del modo de operaci√≥n "Modo incremental" con n√∫mero de incremento 1 a 100
Paso

Modo incremental absoluto

Modo incremental relativa

N√∫mero de incremento 1 a 100
1

Active la se√±al de control para el modo
Active la se√±al de control para el modo de ope‚Äê
de operaci√≥n "Modo incremental absolu‚Äê raci√≥n "Modo incremental relativo" (MO‚Äê
to" (MODE_IN = 5).
DE_IN = 4).

2

Anote los incrementos en las tablas (TRGL1; TRGL2).

3

Escriba las tablas de incrementos (TRGL1/2WR_EN = 1).

4

Active la se√±al de control para la habilitaci√≥n del accionamiento (DRV_EN = 1).

5

Active el selector de funci√≥n para "No evaluar la entrada de habilitaci√≥n" (EI_OFF = 1) o
cablee la entrada de habilitaci√≥n para el canal correspondiente.

6

Introduzca el n√∫mero de incremento (MODE_TYPE = 1 ‚Ä¶ 100).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2817

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Paso

Modo incremental absoluto

Modo incremental relativa

N√∫mero de incremento 1 a 100
7

Active la se√±al de control:

Active la se√±al de control:

‚óè Eje lineal:

‚óè Eje lineal:

‚Äì

START; el sentido se determina
de forma un√≠voca a trav√©s del
destino y el valor real actual.

‚óè Eje rotativo:

8

‚Äì

START; se llega al punto de
destino por el trayecto m√°s corto.

‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

‚óè Eje rotativo:
‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

Llame la instrucci√≥n ABS_CTRL o ABS_CTRL_451.

Los pasos 2 y 3 se necesitan √∫nicamente si no hay a√∫n incrementos o si es preciso modificar las
medidas existentes.

Desarrollo del modo de operaci√≥n "Modo incremental" con n√∫mero de incremento 252
Paso

Modo incremental absoluto

Modo incremental relativa

N√∫mero de incremento 252
1

Active la se√±al de control para el modo
Active la se√±al de control para el modo de ope‚Äê
de operaci√≥n "Modo incremental absolu‚Äê raci√≥n "Modo incremental relativo" (MO‚Äê
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la se√±al de control para la habilitaci√≥n del accionamiento (DRV_EN = 1).

3

Active el selector de funci√≥n para "No evaluar la entrada de habilitaci√≥n" (EI_OFF = 1) o
cablee la entrada de habilitaci√≥n para el canal correspondiente.

4

Introduzca el n√∫mero de incremento (MODE_TYPE = 252).

5

Introduzca la velocidad de inicio;
‚óè Marcha r√°pida (SPEED252 = 1)
‚óè Marcha lenta (SPEED252 = 0)

6

Introduzca el incremento para el n√∫mero de incremento 252 (TRG252_254).

7

Active el bit de inicio para escribir el incremento (TRG252_254_EN = 1).

8

Active la se√±al de control:
‚óè Eje lineal / Eje rotativo:
‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

9

Llame la instrucci√≥n ABS_CTRL o ABS_CTRL_451.

10

Si se produce un evento externo (entrada digital xI3) se realiza el posicionamiento en el
destino parametrizado (incremento).

Las acciones descritas en los pasos 6 y 7 tambi√©n pueden realizarse durante la marcha. En este caso,
el m√≥dulo FM 451 controla, hasta la indicaci√≥n del incremento, un destino que se encuentra a la mitad
de la zona de destino delante del final de carrera por software.

2818

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo del modo de operaci√≥n "Modo incremental" con n√∫mero de incremento 254
Paso

Modo incremental absoluto

Modo incremental relativa

N√∫mero de incremento 254
1

Active la se√±al de control para el modo
Active la se√±al de control para el modo de ope‚Äê
de operaci√≥n "Modo incremental absolu‚Äê raci√≥n "Modo incremental relativo" (MO‚Äê
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la se√±al de control para la habilitaci√≥n del accionamiento (DRV_EN = 1).

3

Active el selector de funci√≥n para "No evaluar la entrada de habilitaci√≥n" (EI_OFF = 1) o
cablee la entrada de habilitaci√≥n para el canal correspondiente.

4

Introduzca el n√∫mero de incremento (MODE_TYPE = 254).

5

Introduzca el incremento para el n√∫mero de incremento 254 (TRG252_254).

6

Active el bit de inicio para escribir el incremento (TRG252_254_EN = 1).

7

Active la se√±al de control:

Active la se√±al de control:

‚óè Eje lineal:

‚óè Eje lineal:

‚Äì

START; el sentido se determina
de forma un√≠voca a trav√©s del
destino y el valor real actual.

‚óè Eje rotativo:

8

‚Äì

START; se llega al punto de
destino por el trayecto m√°s corto.

‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

‚óè Eje rotativo:
‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

Llame la instrucci√≥n ABS_CTRL o ABS_CTRL_451.

Desarrollo del modo de operaci√≥n "Modo incremental" con n√∫mero de incremento 255
Paso

Modo incremental absoluto

Modo incremental relativa

N√∫mero de incremento 255
1

Active la se√±al de control para el modo
Active la se√±al de control para el modo de ope‚Äê
de operaci√≥n "Modo incremental absolu‚Äê raci√≥n "Modo incremental relativo" (MO‚Äê
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la se√±al de control para la habilitaci√≥n del accionamiento (DRV_EN = 1).

3

Active el selector de funci√≥n para "No evaluar la entrada de habilitaci√≥n" (EI_OFF = 1) o
cablee la entrada de habilitaci√≥n para el canal correspondiente.

4

Introduzca el n√∫mero de incremento (MODE_TYPE = 255).

5

Introduzca el incremento para el n√∫mero de incremento 255 (TRG255).

6

Introduzca el valor para la distancia de cambio de velocidad del n√∫mero de incremento 255
(CHGDIF255).

7

Introduzca el valor para la distancia de desconexi√≥n del n√∫mero de incremento 255 (CUT‚Äê
DIF255).

8

Active el bit de inicio para escribir el incremento y la distancia de desconexi√≥n y de cambio
de velocidad (TRG255_EN = 1).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2819

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Paso

Modo incremental absoluto

Modo incremental relativa

N√∫mero de incremento 255
9

Active la se√±al de control:

Active la se√±al de control:

‚óè Eje lineal:

‚óè Eje lineal:

‚Äì

START; el sentido se determina
de forma un√≠voca a trav√©s del
destino y el valor real actual.

‚óè Eje rotativo:

10

‚Äì

START; se llega al punto de
destino por el trayecto m√°s corto.

‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

‚óè Eje rotativo:
‚Äì

DIR_P; Inicio en sentido positivo

‚Äì

DIR_M; Inicio en sentido negativo

Llame la instrucci√≥n ABS_CTRL o ABS_CTRL_451.

La figura siguiente muestra un ejemplo del modo de operaci√≥n "Modo incremental".
02'(B,1 
0RGRLQFUHPHQWDO
'59B(1
+DELOLWDFL¬µQGHODFFLRQDPLHQWR
[O
(QWUDGDGHKDELOLWDFL¬µQ
:$,7B(,


67$57
',5B0',5B3
:25.,1*
326B5&'
3(+ 

YU¬£SLGD
YOHQWD
V

* Las se√±ales de inicio se desactivan con la instrucci√≥n ABS_CTRL o ABS_CTRL_451.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

2820

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.6

SPEED252

BOOL

FALSE

Velocidad de inicio para el modo incremental con n√∫mero
de incremento 252
‚óè 0 = Marcha lenta
‚óè 1 = Marcha r√°pida

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitaci√≥n del accionamiento

16.0

MODE_IN

BYTE

B#16#0

4 = Modo incremental relativo
5 = Modo incremental absoluto

17.0

MODE_TYPE

BYTE

B#16#0

N√∫mero de incremento 1 ‚Ä¶ 100, 252, 254 √≥ 255

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitaci√≥n externa

25.7

POS_RCD

BOOL

FALSE

1 = Posici√≥n alcanzada

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitaci√≥n

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para n√∫mero de incremento 252 √≥
254

36.3

TRG255_EN

BOOL

FALSE

1 = Escribir incremento para n√∫mero de incremento 255

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (n√∫mero de incremento
1 ... 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (n√∫mero de incremento
51 ... 100)

96.0

TRG252_254

DINT

L#0

Incremento para n√∫mero de incremento 252 √≥ 254

100.0

TRG255

DINT

L#0

Incremento para n√∫mero de incremento 255

104.0

CHGDIF_255

DINT

L#0

Distancia de cambio de velocidad para n√∫mero de incre‚Äê
mento 255

108.0

CUTDIF_255

DINT

L#0

Distancia de desconexi√≥n para n√∫mero de incremento 255

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexi√≥n positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexi√≥n negativa

120.0

TRGL1.TRG[1]

DINT

L#0

N√∫mero de incremento 1

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

316.0

TRGL1.TRG[50]

DINT

L#0

N√∫mero de incremento 50

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Tabla de incrementos 1

2821

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

320.0

TRGL2.TRG[51]

DINT

L#0

N√∫mero de incremento 51

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

516.0

TRGL2.TRG[100]

DINT

L#0

N√∫mero de incremento 100

Tabla de incrementos 2

Distancia residual
La distancia residual es la diferencia entre el destino (incremento) y el valor real. La distancia
residual es
‚óè positivo si a√∫n no ha alcanzado el destino.
‚óè negativo si ya se ha rebasado el destino.
En un eje rotativo no puede utilizarse la distancia residual mostrada.

Desactivaci√≥n del modo incremental
El modo de operaci√≥n "Modo incremental" se desactiva si el FM 451 recibe una se√±al de
parada (STOP = 1).
Tras la desactivaci√≥n de la marcha, se mantiene la distancia residual.
La distancia residual en el "Modo incremental relativo" y el "Modo incremental absoluto con el
n√∫mero de incremento 252" puede realizarse hasta el final si
‚óè el modo de operaci√≥n no ha cambiado y
‚óè el n√∫mero de incremento no ha cambiado y
‚óè el sentido no ha cambiado y
‚óè la distancia residual es mayor que la distancia de desconexi√≥n parametrizada.
La distancia residual se realiza ejecutando de nuevo el "Modo incremental relativo" o el "Modo
incremental absoluto" con el n√∫mero de incremento 252 sin cambios.

Cancelaci√≥n del modo incremental
El modo de operaci√≥n "Modo incremental" se cancela si la se√±al "Habilitaci√≥n del
accionamiento" se borra (DRV_EN = 0).

Borrar distancia residual
La petici√≥n "Borrar distancia residual" borra una distancia residual pendiente.
En el "modo incremental con n√∫mero de incremento 252" la marcha comienza de nuevo con
la marcha sin fin despu√©s de la funci√≥n "Borrar distancia residual".
Al llamar otro modo de operaci√≥n o iniciar el modo de operaci√≥n en el otro sentido, tambi√©n se
borra la distancia residual pendiente.

2822

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Dato utilizado en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

35.2

DELDIST_EN

BOOL

FALSE

1 = Borrar distancia residual

Petici√≥n "Ajustar valor real" / "Ajustar valor real al vuelo" / "Cancelar preselecci√≥n del valor real"
Definici√≥n
La petici√≥n "Ajustar valor real" o "Ajustar valor real al vuelo" permite asignar una nueva
coordenada al estado actual del enc√≥der. La zona de trabajo se proyecta sobre otra zona del
eje.
El desplazamiento de la zona de trabajo se calcula con (REALnuevo - REALactual).
‚óè REALnuevo es el valor predeterminado
‚óè REALactual es el valor real en el instante de la ejecuci√≥n

Requisitos
‚óè El eje debe estar parametrizado.
‚óè El eje debe estar sincronizado.
Para la funci√≥n "Ajustar valor real" es preciso finalizar el proceso de posicionamiento.

Desarrollo de la petici√≥n
1. Introduzca las coordenadas AVAL o FVAL para el valor real (REALnuevo).
‚Äì Eje lineal:
El valor real indicado se debe seleccionar de tal modo que los finales de carrera por
software se encuentren todav√≠a dentro de la zona de desplazamiento admitido tras la
llamada de la petici√≥n.
El valor de decalaje que resulta de (REALnuevo - REALactual) tiene que ser menor o igual
al valor de la zona de desplazamiento admisible (m√°ximo 100 m o 1000 m,
respectivamente).
‚Äì Eje rotativo:
Para el valor real indicado rige:
0 ‚â§ Valor real < Final del eje rotativo
2. Active el bit de inicio correspondiente (AVAL_EN = 1 o FVAL_EN = 1).
Se ejecuta de inmediato "Ajustar valor real".
"Ajustar valor real al vuelo" se ejecuta con el flanco ascendente siguiente en la entrada
digital xI3.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2823

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

35.7

AVAL_EN

BOOL

FALSE

1 = Ajustar valor real

36.0

FVAL_EN

BOOL

FALSE

1 = Ajustar valor real al vuelo

84.0

AVAL

DINT

L#0

Coordenada de "Ajustar valor real"

88.0

FVAL

DINT

L#0

Coordenada de "Ajustar valor real al vuelo"

Efectos de la petici√≥n
En el ejemplo "Ajustar valor real" en 300 mm se ve c√≥mo esta petici√≥n proyecta la zona de
trabajo a una posici√≥n concreta del eje. De ello se derivan los siguientes efectos:
‚óè La posici√≥n real se fija en el valor de la coordenada del valor real.
‚óè La zona de trabajo se desplaza hacia el eje.
‚óè Los distintos puntos (p. ej., fin del final de carrera por software) dentro de la zona de trabajo
conservan su valor original, pero se encuentran en posiciones nuevas.
La tabla siguiente muestra el desplazamiento de la zona de trabajo en el eje a trav√©s de la
funci√≥n "Ajustar valor real".
Ajustar valor real

(MH

)&6,

5($/


REA
L

FCSF

-400

100

400

-400

300

400

6LVWHPDGHFRRUGHQDGDVDQWHULRU
)&6)




>PP@

EDM R





FCSI

=RQ

DGH

WUD

3UR\HFFL¬µQGHOD
]RQDGHWUDEDMR
DWUDY¬´VGHOYDORU
UHDO VHGHILQHHQ
PP



)&6,







5($/ )&6)

1XHYRVLVWHPDGHFRRUGHQDGDV

Deshacer una petici√≥n ("Cancelar preselecci√≥n del valor real")
Con la petici√≥n "Cancelar preselecci√≥n del valor real" se deshace el √∫ltimo desplazamiento de
la zona de trabajo que se ha creado con "Ajustar valor real".
Un "Ajustar valor real al vuelo" iniciado no se puede borrar antes de su ejecuci√≥n mediante un
flanco ascendente en la entrada digital xI3. Pero s√≠ puede sobrescribirse con un nuevo "Ajustar
valor real al vuelo". Con un arranque del m√≥dulo estas peticiones se inicializan.

2824

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

35.3

AVALREM_EN

BOOL

FALSE

1 = Cancelar preselecci√≥n del valor real

Petici√≥n "Decalaje de se√±al cero"
Definici√≥n
Con la petici√≥n "Decalaje de se√±al cero" se desplaza en el valor introducido la se√±al cero del
sistema de coordenadas.
El signo define el sentido del decalaje en el sistema de coordenadas.

Calcular nueva coordenada
Todos los valores del sistema desplazado de coordenadas se calculan con la f√≥rmula
siguiente:
Coordenadanueva = coordenadaantigua + (DSCnueva - DSCantigua)
DSCantigua indica un decalaje anterior de se√±al cero.
Si antes de la llamada no ha habido activo ning√∫n decalaje de se√±al cero, introduzca para
DSCantiguo el valor 0.
Con esto es posible calcular qu√© valores de coordenadas adoptan, por ejemplo, los finales de
carrera por software.

Requisitos
‚óè El posicionamiento debe haber finalizado.
‚óè El eje debe estar parametrizado.

Desarrollo de la petici√≥n
1. Introduzca el valor ZOFF para el decalaje de se√±al cero.
‚Äì Eje lineal:
El decalaje de se√±al cero se tiene que escoger de tal modo que los finales de carrera por
software se encuentren todav√≠a dentro de la zona de desplazamiento admisible tras la
llamada de la petici√≥n.
‚Äì Eje rotativo:
Para el decalaje de se√±al cero rige:
Valor del decalaje de se√±al cero ‚â§ Fin del eje rotativo
2. Active el bit de inicio correspondiente (ZOFF_EN = 1).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2825

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

36.1

ZOFF_EN

BOOL

FALSE

1 = Activar decalaje de se√±al cero

80.0

ZOFF

DINT

L#0

Decalaje de se√±al cero

Efectos de la petici√≥n en un eje lineal
En el ejemplo de un decalaje de se√±al cero de -200 mm se ve c√≥mo esta petici√≥n desplaza el
sistema de coordenadas en sentido positivo. De ello se derivan los siguientes efectos:
‚óè La zona de trabajo no se desplaza f√≠sicamente.
‚óè A cada uno de los puntos (como, p.ej. a los finales de carrera por software) se les asignan
nuevos valores de coordenadas.
La tabla siguiente muestra el desplazamiento del sistema de coordenadas mediante el
"Decalaje de se√±al cero".

Decalaje de se√±al cero

(MH

REAL

FCSF

-400

200

400

-200

400

600

6LVWHPDGHFRRUGHQDGDVDQWHULRU
5($/ )&6)

)&6,






=RQDGHWUDEDMR





FCSI

>PP@

'HVSOD]DPLHQWR
GHFRRUGHQDGDV
HQPPD
WUDY¬´VGHO
GHFDODMHGHVH¬≥DO
FHURGHPP




1XHYRVLVWHPDGHFRRUGHQDGDV

Efectos de la petici√≥n en un eje rotativo
En el ejemplo de un decalaje de se√±al cero en -45¬∞ se ve c√≥mo esta petici√≥n gira el sistema
de coordenadas.
La figura siguiente muestra el giro del sistema de coordenadas mediante decalaje de la se√±al
cero.

2826

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

r

/

/DVH¬≥DOFHURVH
JLUDJUDGRV
7RGRVORVSXQWRV
GHOHMH
DGTXLHUHQ
QXHYRVYDORUHV
GHFRRUGHQDGDV

+HUUDPLHQWDFRQ
5($/ r

6

($

r

'&

5

5

($

/

+HUUDPLHQWDFRQ5($/ r

r

r

Considerando un DSCantiguo = 0 resulta un nuevo valor de 385¬∞
Como al final del eje rotativo en un sentido de giro positivo el valor real empieza de nuevo en
0 el valor real de 25¬∫ se calcula a partir de:
Coordenadanueva = coordenadaantigua - (DSCnueva - DSCantigua) -final de eje rotativo

P√©rdida de la sincronizaci√≥n
Si se pierde la sincronizaci√≥n a causa de un error o se reactiva mediante "B√∫squeda del punto
de referencia" se mantiene activo un decalaje de se√±al cero.

Deshacer petici√≥n
Al definir un decalaje de se√±al cero de 0 mm se recupera el decalaje de se√±al cero existente.

Petici√≥n "Definir punto de referencia"
Definici√≥n
Con la petici√≥n "Definir punto de referencia" se sincroniza el eje. Esta petici√≥n desplaza la zona
de trabajo. Todos los decalajes generados por la funci√≥n "Ajustar valor real" se conservan.
Este ajuste proyecta la zona de trabajo sobre el eje. As√≠, con distintas entradas de valores, la
zona de trabajo puede encontrarse en posiciones diferentes dentro del rango f√≠sico del eje.

Requisitos
‚óè El posicionamiento debe haber finalizado.
‚óè El eje debe estar parametrizado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2827

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo de la petici√≥n
1. Introduzca el valor REFPT para las coordenadas del punto de referencia.
‚Äì Eje lineal:
La coordenada del punto de referencia no puede encontrarse fuera de los finales de carrera
por software. Esto rige tambi√©n para la coordenada del punto de referencia de un sistema
de coordenadas desplazado.
‚Äì Eje rotativo:
Para la coordenada del punto de referencia rige:
0 ‚â§ Coordenada del punto de referencia < Final del eje rotativo
2. Active el bit de inicio correspondiente (REFPT_EN = 1).

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

25.0

SYNC

BOOL

FALSE

1 = Eje sincronizado

35.6

REFPT_EN

BOOL

FALSE

1 = Definir punto de referencia

92.0

REFPT

DINT

L#0

Coordenada del punto de referencia

Efectos de la petici√≥n
En el ejemplo "Definir punto de referencia" en 400 mm se ve c√≥mo esta petici√≥n proyecta la
zona de trabajo a una posici√≥n f√≠sica concreta del eje. De ello se derivan los siguientes efectos:
‚óè La posici√≥n real se fija en el valor de la coordenada del punto de referencia.
‚óè La zona de trabajo se desplaza hacia el eje.
‚óè Los distintos puntos (por ejemplo, fin del final de carrera por software) conservan su valor
original pero se encuentran en posiciones f√≠sicas nuevas.
‚óè El bit SYNC de las se√±ales de respuesta se activa.

2828

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra el desplazamiento de la zona de trabajo en el eje a trav√©s de la
funci√≥n "Definir punto de referencia".
Definir punto de referencia

(MH

REAL

FCSF

-400

200

400

-400

400

400

6LVWHPDGHFRRUGHQDGDVDQWHULRU
5($/ )&6)

)&6,










>PP@

DGH

WUD

EDM R

3UR\HFFL¬µQGHOD
]RQDGHWUDEDMR
DFWLYDUDWUDY¬´VGH
SXQWRGHUHIHUHQFLD
PP

=RQ


FCSI



)&6,



5($/ ) &6)
1XHYRVLVWHPDGHFRRUGHQDGDV

Particularidades del enc√≥der absoluto
Esta petici√≥n es necesaria para un reajuste del enc√≥der absoluto (P√°gina 2854).

Selector de funci√≥n "Medici√≥n de longitud" / "Captura de bordes"
Definici√≥n
Con las funciones "Medici√≥n de longitud" y "Captura de bordes" es posible calcular la longitud
de una pieza de trabajo.
El selector de funci√≥n "Medici√≥n de longitud" o "Captura de bordes" se activa y se mantiene as√≠
hasta que se desconecta o se selecciona otro m√©todo de medici√≥n. Si se seleccionan ambos
m√©todos de medici√≥n a la vez, la instrucci√≥n ABS_CTRL o ABS_CTRL_451 activa la medici√≥n
de longitud.

Requisitos
‚óè El posicionamiento debe haber finalizado.
‚óè El eje debe estar parametrizado.
‚óè El eje debe estar sincronizado.
‚óè En la entrada xI3 hay conectado un conector libre de rebotes.
‚óè Si estos selectores de funci√≥n se seleccionan durante un posicionamiento, la "Medici√≥n de
longitud" y la "Captura de bordes" pueden no realizarse hasta el posicionamiento siguiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2829

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo de las mediciones
Seg√∫n el tipo de medici√≥n, el FM 451 actualiza los datos del m√≥dulo en momentos distintos. El
FM 451 notifica cada actualizaci√≥n en un par√°metro en la interfaz de realimentaci√≥n.
La tabla siguiente muestra el desarrollo de las mediciones.
Desa‚Äê
rrollo

Medici√≥n de longitud

Captura de bordes

065B21

('*(B21

[O

[O

$FWXDOL]DFL¬µQGHGDWRV

$FWXDOL]DFL¬µQGHGDWRV

065B'21(

065B'21(

1

Active el selector de funci√≥n para la "Medici√≥n de longi‚Äê Dado el caso, introduzca un valor EDGEDIST para la
tud" (MSR_ON = 1).
separaci√≥n m√≠nima de bordes en el DB de par√°metros.
Escriba y active los datos m√°quina.

2

Inicie un posicionamiento.

Active el selector de funci√≥n de "Captura de bordes"
(EDGE_ON = 1). Se activa el par√°metro MSR_DONE.

3

El flanco ascendente de la entrada xI3 inicia la medici√≥n
de longitud.

Inicie un posicionamiento.

4

El flanco descendente de la entrada xI3 pone fin a una
medici√≥n en curso. El FM 451 actualiza los datos Valor
inicial, Valor final y Longitud.

El flanco ascendente de la entrada xI3 inicia la medici√≥n.
Tras el procedimiento de la parte del trayecto "Distancia
m√≠nima entre bordes" la medici√≥n es v√°lida. Esto se no‚Äê
tifica mediante MSR_DONE = 0. Los resultados de la
medici√≥n se actualizan y se pueden leer, el valor inicial
de la medici√≥n se registra; el valor final y la longitud
pasan a ser -1.

5

Con el par√°metro activado MSR_DONE el FM 451 co‚Äê Tras la actualizaci√≥n, el FM 451 notifica el cambio de‚Äê
munica la actualizaci√≥n de los datos. El par√°metro indi‚Äê sactivando el par√°metro MSR_DONE.
ca que la medici√≥n ha finalizado. Los resultados de la
medici√≥n se pueden leer.

6

El inicio de otra medici√≥n con el flanco ascendente de
xI3 desactiva el par√°metro MSR_DONE.

El flanco descendente de la entrada xI3 pone fin a una
medici√≥n en curso. El FM 451 actualiza los datos del
valor final de la medici√≥n y la longitud.

7

-

Tras la actualizaci√≥n, el FM 451 notifica el cambio acti‚Äê
vando el par√°metro MSR_DONE. Los resultados de la
medici√≥n se pueden leer.

8

-

El inicio de otra medici√≥n con el flanco ascendente de
xI3 desactiva el par√°metro MSR_DONE.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

25.1

MSR_DONE

BOOL

FALSE

1 = Medici√≥n de longitud cancelada/Captura de bordes
finalizada

34.3

EDGE_ON

BOOL

FALSE

1 = Captura de bordes activada

2830

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

34.4

MSR_ON

BOOL

FALSE

1 = Medici√≥n de longitud activada

35.0

MDWR_EN

BOOL

FALSE

1 = Escribir datos m√°quina

35.1

MD_EN

BOOL

FALSE

1 = Activar datos m√°quina

37.0

MSRRD_EN

BOOL

FALSE

1 = Leer valores medidos

136.0

BEG_VAL

DINT

L#0

Valor inicial de la medici√≥n de longitud/Captura de bordes

140.0

END_VAL

DINT

L#0

Valor final de la medici√≥n de longitud/Captura de bordes

144.0

LEN_VAL

DINT

L#0

Longitud

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

4.0

EDGEDIST

DINT

L#0

Distancia m√≠nima entre bordes en la captura de bordes

Si el final del proceso de medici√≥n se encuentra dentro de este rango, la medici√≥n se desestima (BEG_VAL, END_VAL y
LEN_VAL = ‚Äë1).

Condiciones marco para una medici√≥n de longitud
‚óè La distancia entre el flanco de activaci√≥n y el flanco de desactivaci√≥n en la entrada xI3 tiene
que ser tal que su programa en la CPU pueda evaluar correctamente el resultado de la
medici√≥n antes de iniciar una nueva medici√≥n.
‚óè La distancia m√≠nima entre el flanco ascendente y descendente en la entrada xI3, al igual
que entre el flanco descendente y el siguiente ascendente en la entrada xI3, tiene que ser
mayor que 8 ms.

Medici√≥n con errores
En caso de una medici√≥n de longitud/Captura de bordes con errores, el FM 451 devuelve el
valor -1 para la longitud. Una medici√≥n es err√≥nea cuando
‚óè en un eje rotativo la longitud medida es superior a 231,
‚óè al mismo tiempo el FM 451 detecta el flanco de activaci√≥n y el de desactivaci√≥n, por
ejemplo, por rebotes del conector.

Selector de funci√≥n "Aproximaci√≥n en bucle"
Definici√≥n
Con la "Aproximaci√≥n en bucle" define el sentido en el que se avanza hacia el punto de destino
con cierre de fuerza. La aproximaci√≥n en bucle puede utilizarse cuando s√≥lo se puede
garantizar el cierre de fuerza en un sentido entre el motor y el eje.
El destino al que se realiza la aproximaci√≥n en contra del sentido predefinido se rebasa al
principio. A continuaci√≥n, el m√≥dulo realiza una inversi√≥n del sentido y realiza la aproximaci√≥n
al destino en el sentido predeterminado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2831

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
‚óè El eje debe estar parametrizado.
‚óè El eje debe estar sincronizado.
‚óè En una aproximaci√≥n en bucle en contra del sentido del desplazamiento hacia el destino,
la posici√≥n de destino se encuentra:
‚Äì en el sentido de desplazamiento positivo
Destino < SEE - ¬Ω zona de destino - distancia de desconexi√≥n positiva - distancia de
cambio de velocidad negativa
‚Äì en el sentido de desplazamiento negativo
Destino < SEA + ¬Ω zona de destino + distancia de desconexi√≥n negativa + distancia de
cambio de velocidad positiva
‚óè Una aproximaci√≥n en bucle no se lleva a cabo, si la aproximaci√≥n al destino se realiza en
el sentido de la aproximaci√≥n en bucle. En este caso se realiza un posicionamiento en modo
incremental sin inversi√≥n del sentido.
‚óè Hay que conocer el transcurso del modo de operaci√≥n "Modo incremental" (P√°gina 2816).

Desarrollo de la aproximaci√≥n en bucle
1. Active la se√±al de control para el modo de operaci√≥n "Modo incremental absoluto/relativo"
(MODE_IN = 5/4).
2. Active la se√±al de control para la habilitaci√≥n del accionamiento (DRV_EN = 1).
3. Active el selector de funci√≥n "Entrada de habilitaci√≥n" (EI_OFF = 1) o cablee la entrada de
habilitaci√≥n para el canal correspondiente.
4. Introduzca el n√∫mero de incremento (MODE_TYPE = 1 ‚Ä¶ 100, 254, 255).
5. Active el selector de funci√≥n "Aproximaci√≥n en bucle" (PLOOP_ON / MLOOP_ON = 1).
6. Inicie el modo incremental.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitaci√≥n del accionamiento

16.0

MODE_IN

BYTE

B#16#0

4 / 5 = Modo incremental relativo/absoluto

17.0

MODE_TYPE

BYTE

B#16#0

N√∫mero de incremento 1 ‚Ä¶ 100, 254 √≥ 255

34.0

PLOOP_ON

BOOL

FALSE

1 = Aproximaci√≥n en bucle en sentido positivo

34.1

MLOOP_ON

BOOL

FALSE

1 = Aproximaci√≥n en bucle en sentido negativo

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitaci√≥n

2832

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Destino ficticio
Si inicia un posicionamiento en un destino que se encuentra en el sentido opuesto a la
aproximaci√≥n en bucle parametrizada, el m√≥dulo determina para este destino un destino
ficticio en el que √©ste ejecuta una inversi√≥n del sentido y, despu√©s, se aproxima al destino en
el sentido correcto.
Este destino ficticio tiene que encontrarse al menos a media zona de destino delante del final
de carrera por software correspondiente.
La eliminaci√≥n del destino ficticio del destino parametrizado se determina en funci√≥n del
sentido. La tabla siguiente muestra el c√°lculo de la situaci√≥n del destino ficticio en la
aproximaci√≥n en bucle.
Preajustes

Posici√≥n del destino ficticio

Parametrizaci√≥n:

El destino ficticio (Destinof) tiene el valor:

Bucle + (cierre de fuerza positi‚Äê
vo) y marcha en sentido negati‚Äê Destino = Destino - Distancia de desconexi√≥n negativa - distancia de
f
vo
cambio de velocidad positiva
 'HVWLQRILFWLFLR 2EMHWLYR

Parametrizaci√≥n:

3RVLFL¬µQLQLFLDO

El destino ficticio (Destinof) tiene el valor:

Bucle - (cierre de fuerza negati‚Äê
vo) y marcha en el sentido posi‚Äê Destino = Destino + Distancia de desconexi√≥n positiva + distancia
f
tivo
de cambio de velocidad negativa
 3RVLFL¬µQLQLFLDO

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2EMHWLYR

'HVWLQRILFWLFLR

2833

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo
A continuaci√≥n se muestra la posici√≥n del destino ficticio tomando como base un
posicionamiento con aproximaci√≥n en bucle negativa hacia un destino m√°ximo.
YU¬£SLGD

'HVWLQRILFWLFLR

)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ

YOHQWD


2EMHWLYR




&DPELRGH
VHQWLGR

YOHQWD

‚ë†
‚ë°
‚ë¢

Distancia de cambio de velocidad negativa
Distancia de desconexi√≥n positiva
¬Ω zona de destino

Selector de funci√≥n "Entrada de habilitaci√≥n"
Definici√≥n
La entrada de habilitaci√≥n es una entrada externa con la que puede habilitarse un
posicionamiento a trav√©s de un evento externo.

Evaluar entrada de habilitaci√≥n (EI_OFF = 0)
La entrada de habilitaci√≥n correspondiente (xI2) para el canal debe estar cableada.
Con ello tiene la posibilidad de preparar el inicio de un posicionamiento. El posicionamiento se
inicia independientemente del desarrollo del programa de usuario creando una se√±al "1" en la
entrada de habilitaci√≥n.
Tiene las siguientes posibilidades para el tipo de evaluaci√≥n de la entrada de habilitaci√≥n:
‚óè controlado por nivel (EI_TYPE = 0)
La marcha comienza cuando se crea una se√±al "1" en la entrada de habilitaci√≥n y se
desactiva cuando se crea una se√±al "0" en la entrada de habilitaci√≥n.
‚óè controlado por flanco (EI_TYPE = 1)
La marcha comienza con la detecci√≥n de un flanco ascendente en la entrada de
habilitaci√≥n. La siguiente curvav de se√±ales en esta entrada ya no afecta al desarrollo del
desplazamiento iniciado.

2834

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

No evaluar entrada de habilitaci√≥n (EI_OFF = 1)
Si desconecta la evaluaci√≥n de la entrada de habilitaci√≥n, un modo de operaci√≥n comienza
inmediatamente despu√©s de detectar la se√±al de inicio. A continuaci√≥n no es posible preparar
un modo de operaci√≥n ni iniciarlo en un instante posterior concreto.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitaci√≥n

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

99.1

EI_TYPE

BOOL

FALSE

0 = Controlado por nivel
1 = Controlado por flanco

Petici√≥n "Leer datos de posici√≥n"
Definici√≥n
Con la petici√≥n "Leer datos de posici√≥n" es posible leer el incremento, la distancia residual y la
velocidad en el instante actual.

Desarrollo de la petici√≥n
1. Active el bit de inicio en el DB de canal (ACTSPD_EN = 1).
2. Los datos se depositan en el DB de canal.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

37.1

ACTSPD_EN

BOOL

FALSE

1 = Leer datos de posici√≥n

112.0

ACTSPD

DINT

L#0

Velocidad actual

116.0

DIST_TO_GO

DINT

L#0

Distancia residual

120.0

ACT_TRG

DINT

L#0

Incremento actual

Petici√≥n "Leer datos del enc√≥der"
Definici√≥n
Con la petici√≥n "Leer datos de enc√≥der" se leen los datos actuales del enc√≥der, as√≠ como el
valor del reajuste del enc√≥der absoluto.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2835

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
Es posible leer el valor para el reajuste del enc√≥der absoluto (P√°gina 2854) despu√©s de
ejecutar la petici√≥n "Definir punto de referencia" (P√°gina 2827).

Desarrollo de la petici√≥n
1. Active el bit de inicio en el DB de canal (ENCVAL_EN = 1).
2. Los datos se depositan en el DB de canal.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

37.2

ENCVAL_EN

BOOL

FALSE

1 = Leer valores del enc√≥der

124.0

ENCVAL

DINT

L#0

Valor real del enc√≥der (representaci√≥n interna)

128.0

ZEROVAL

DINT

L#0

√öltimo valor de la marca cero (representaci√≥n interna)

132.0

ENC_ADJ

DINT

L#0

Reajuste del enc√≥der absoluto

Se√±ales de realimentaci√≥n del posicionamiento
Definici√≥n
Con la funci√≥n "Se√±ales de realimentaci√≥n para el posicionamiento" se informa del estado
actual del posicionamiento.

Desarrollo
Con cada llamada de la instrucci√≥n ABS_CTRL o ABS_CTRL_451 los datos se depositan en
el DB de canal.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitaci√≥n externa

23.4

SPEED_OUT

BOOL

FALSE

0 = Marcha lenta

23.5

ZSPEED

BOOL

FALSE

1 = El eje se encuentra en la zona de parada

23.6

CUTOFF

BOOL

FALSE

1 = El eje se encuentra en la zona de desconexi√≥n

23.7

CHGOVER

BOOL

FALSE

1 = El eje se encuentra en la zona de cambio de de velo‚Äê
cidad

24.0

MODE_OUT

BYTE

B#16#0

Modo de operaci√≥n activo

25.2

GO_M

BOOL

FALSE

1 = El eje se desplaza en sentido negativo

25.3

GO_P

BOOL

FALSE

1 = El eje se desplaza en sentido positivo

1 = Marcha r√°pida

2836

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

25.5

FVAL_DONE

BOOL

FALSE

1 = Ajuste del valor real al vuelo finalizado

25.7

POS_RCD

BOOL

FALSE

1 = Posici√≥n alcanzada

26.0

ACT_POS

DINT

L#0

Valor real actual (posici√≥n actual del eje)

Consultar las se√±ales de realimentaci√≥n del diagn√≥stico
Definici√≥n
Con las "Se√±ales de respuesta del diagn√≥stico" se recibe informaci√≥n sobre los eventos de
diagn√≥stico que se han producido.

Desarrollo
1. Cuando el m√≥dulo introduce un nuevo evento en el b√∫fer de diagn√≥stico, activa el bit DIAG
en la interfaz de respuesta. Cada aparici√≥n de un error (P√°gina 2882) provoca una entrada
en el b√∫fer de diagn√≥stico. Al borrar el b√∫fer de diagn√≥stico se activa el bit DIAG.
2. Si no es posible llamar un modo de operaci√≥n o controlar un modo de operaci√≥n activo, o
si esta operaci√≥n se ha realizado de forma err√≥nea, el m√≥dulo activa un error de operador
OT_ERR en la interfaz de respuesta. La causa del error se registra en el b√∫fer de
diagn√≥stico. Mientras el error de operador est√° activo, no es posible iniciar un modo de
operaci√≥n ni continuar el modo de operaci√≥n detenido. Un error de operador existente se
confirma con OT_ERR_A = 1.
3. Cuando el m√≥dulo detecta una petici√≥n de escritura con datos err√≥neos, activa el bit
DATA_ERR en la interfaz de respuesta. La causa del error se registra en el b√∫fer de
diagn√≥stico.
4. Las se√±ales de respuesta se depositan en el DB de canal.
5. Si se ha le√≠do el b√∫fer de diagn√≥stico, el m√≥dulo restablece el bit DIAG a 0 en todos los
canales.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

22.2

DIAG

BOOL

FALSE

1 = B√∫fer de diagn√≥stico modificado

22.3

OT_ERR

BOOL

FALSE

1 = Error de operador

22.4

DATA_ERR

BOOL

FALSE

1 = Error de datos

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2837

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.6.3

Configurar FM 451

6.3.6.4

Parametrizaci√≥n del FM 451

Especificar canales
Seleccionar sistema de medidas
Seleccionar sistema de medidas
Para la entrada y salida de datos es posible elegir entre los siguientes sistemas de medida:
‚óè Mil√≠metros (ajuste predeterminado)
‚óè Inch
‚óè Grados
Nota
Si se modifica el sistema de medida en el cuadro de di√°logo "Especificar canales", los valores
se convierten al nuevo sistema. Aqu√≠ se pueden producir errores de redondeo.
Si se modifica el sistema de medida mediante el dato m√°quina, los valores no se convierten
autom√°ticamente.

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentario

8.0

UNITS

DINT

L#1

Sistema de medida
Valores permitidos:
‚óè 1 = 10-3 mm
‚óè 2 = 10-4 pulgadas
‚óè 3 = 10-4 grados
‚óè 4 = 10-2 grados
‚óè 6 = 10-3 grados

2838

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Sistema de medida est√°ndar en la ayuda en pantalla
Para la indicaci√≥n de valores m√≠nimos y m√°ximos se utiliza el sistema de medida mm. Por ello,
para determinar los valores l√≠mite en los otros sistemas de medida, realice la conversi√≥n
siguiente:
Para convertir de

calcule

mm ‚Üí pulgadas

Valor l√≠mite (inch) = valor l√≠mite (mm) √ó 0,1 1)

mm ‚Üí grados

10-4 (4 decimales)

Valor l√≠mite (grados) = valor l√≠mite (mm) √ó 0,1

10 (3 decimales)

Valor l√≠mite (grados) = valor l√≠mite (mm) √ó 1

10-2 (2 decimales)

Valor l√≠mite (grados) = valor l√≠mite (mm) √ó 10

-3

pulgadas ‚Üí grados
1)

Valor l√≠mite (grados) = valor l√≠mite (pulgadas)

En el valor m√°ximo el n√∫mero de decimales repercute en el n√∫mero de d√≠gitos que preceden a la
coma. En el sistema de medida Inch se utilizan 4 decimales, por lo tanto se pueden introducir como
m√°ximo 100 000,0000 inch. El sistema de medida Mil√≠metros utiliza 3 decimales y por lo tanto se
pueden introducir como m√°ximo 1 000 000,000 mm.

Relaci√≥n entre los incrementos y el sistema de medida
Las se√±ales del enc√≥der de un dispositivo conectado son evaluadas por el m√≥dulo y se
convierten al sistema actual. Para la conversi√≥n se utiliza la resoluci√≥n (P√°gina 2862).
Si el m√≥dulo de posicionamiento
‚óè ha contado 10 incrementos y
‚óè ha ajustado una resoluci√≥n de 100 ¬µm por incremento a trav√©s de los datos de enc√≥der
parametrizados,
esto significa que el eje se ha movido un trayecto de 1 mm.

Copiar canales
Copiar canales
Este par√°metro permite copiar un canal en otro canal.
1. Seleccione el canal cuyos par√°metros desee copiar (origen del canal).
2. Active el canal en el que desee copiar los par√°metros (destino del canal).
3. Pulse el bot√≥n "Copiar".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2839

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Accionamiento canal n
Seleccionar el modo de control
Visi√≥n global de los tipos de control
Sinopsis
El modo de control define el modo en que se utiliza un motor en las 4 salidas digitales (Q) de
un canal a trav√©s de la etapa de potencia. Para el m√≥dulo de posicionamiento existen 4 modos
de control por canal:
‚óè Modo de control 1 (P√°gina 2841)
‚óè Modo de control 2 (P√°gina 2841)
‚óè Modo de control 3 (P√°gina 2842)
‚óè Modo de control 4 (P√°gina 2843)
La siguiente tabla muestra los estados de las 4 salidas digitales para cada modo de control,
donde x representa los canales 1, 2 y 3.
Marcha r√°pida
Sentido +

Marcha lenta
Sentido -

Sentido +

Sentido -

PEH
La posici√≥n alcanza la pa‚Äê
rada

Modo de control 1
xQ0

1

1

0

0

-

xQ1

0

0

1

1

-

xQ2

1

0

1

0

-

xQ3

0

1

0

1

-

Modo de control 2
xQ0

1

1

0

0

0

xQ1

0

0

0

0

1

xQ2

1

0

1

0

0

xQ3

0

1

0

1

0

Modo de control 3
xQ0

1

1

0

0

-

xQ1

1

1

1

1

-

xQ2

1

0

1

0

-

xQ3

0

1

0

1

-

Modo de control 4

2840

xQ0

1

0

0

0

-

xQ1

1

0

1

0

-

xQ2

0

1

0

0

-

xQ3

0

1

0

1

-

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modo de control 1
Modo de control 1
En el modo de control 1 se aplican los ajustes siguientes (x representa el canal n):
‚óè xQ0: Marcha r√°pida
‚óè xQ1: Marcha lenta
‚óè xQ2: Desplazamiento +
‚óè xQ3: Desplazamiento La figura siguiente muestra la funci√≥n de las salidas digitales en el modo de control 1.
YU¬£SLGD

6H¬≥DOGHUHWURDOLPHQWDFL¬µQ
3(+ 

YOHQWD

0DUFKDU¬£SLGD

[4

0DUFKDOHQWD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

1 = Modo de control 1

Modo de control 2
Modo de control 2
En el modo de control 2 se aplican los ajustes siguientes (x representa el canal n):
‚óè xQ0: Marcha r√°pida/lenta
‚óè xQ1: Posici√≥n alcanzada
‚óè xQ2: Desplazamiento +
‚óè xQ3: Desplazamiento La figura siguiente muestra la funci√≥n de las salidas digitales en el modo de control 2.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2841

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU¬£SLGD
3(+ 
YOHQWD

0DUFKDU¬£SLGDOHQWD

[4

3RVLFL¬µQDOFDQ]DGD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

2 = Modo de control 2

Modo de control 3
Modo de control 3
En el modo de control 3 se aplican los ajustes siguientes (x representa el canal n):
‚óè xQ0: Marcha r√°pida
‚óè xQ1: Marcha lenta
‚óè xQ2: Desplazamiento +
‚óè xQ3: Desplazamiento La figura siguiente muestra la funci√≥n de las salidas digitales en el modo de control 3.

2842

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU¬£SLGD

6H¬≥DOGHUHWURDOLPHQWDFL¬µQ
3(+ 

YOHQWD

0DUFKDU¬£SLGD

[4

0DUFKDOHQWD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

3 = Modo de control 3

Modo de control 4
Modo de control 4
En el modo de control 4 se aplican los ajustes siguientes (x representa el canal n):
‚óè xQ0: Marcha r√°pida +
‚óè xQ1: Marcha lenta +
‚óè xQ2: Marcha r√°pida ‚óè xQ3: Marcha lenta La figura siguiente muestra la funci√≥n de las salidas digitales en el modo de control 4.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2843

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU¬£SLGD

6H¬≥DOGHUHWURDOLPHQWDFL¬µQ
3(+ 

YOHQWD

0DUFKDU¬£SLGD

[4

0DUFKDOHQWD

[4

0DUFKDU¬£SLGD

[4

0DUFKDOHQWD

[4

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

4 = Modo de control 4

Definir distancia de cambio de velocidad
Distancia de cambio de velocidad
La "Distancia de cambio de velocidad" define la distancia con respecto al punto de destino en
el que el accionamiento cambia la velocidad, de velocidad r√°pida a velocidad lenta.
Los valores predefinidos se aplican a todos los objetivos a los que se aproxima el m√≥dulo de
posicionamiento. Una excepci√≥n est√° constituida por el modo incremental con el incremento
255, para la que se define una distancia de cambio de velocidad especial.

Reglas para la distancia de cambio de velocidad
‚óè La distancia de cambio de velocidad positiva y la distancia de cambio de velocidad negativa
no tienen por qu√© estar dispuestas de forma sim√©trica en torno al destino. Los valores
pueden ser muy distintos.
‚óè La distancia de cambio de velocidad debe ser mayor que la distancia de desconexi√≥n.
‚óè La distancia de cambio de velocidad se encuentra dentro de la zona de trabajo.
‚óè La distancia de cambio de velocidad debe ser menor que el final del eje rotativo.
‚óè Entre el punto de cambio de velocidad y el punto de desconexi√≥n se debe seleccionar una
distancia tan grande que permita cambiar de marcha r√°pida a marcha lenta.
‚óè El punto de cambio de velocidad y el punto de desconexi√≥n se encuentran a una distancia
temporal de al menos 8 ms entre s√≠.

2844

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La figura siguiente muestra la ubicaci√≥n de las √°reas de cambio de velocidad en torno al
destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR











2EMHWLYR







)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§
‚ë•

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‚Äê
tiva
Distancia de desconexi√≥n positiva/negativa

‚ë¶
‚ëß

Zona de destino

‚ë®

Punto de desconexi√≥n

Punto de cambio de velocidad

Zona de parada

Si desea obtener m√°s informaci√≥n sobre la disposici√≥n de las √°reas, consulte "Zonas y puntos
de cambio de velocidad del m√≥dulo de posicionamiento".

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa
Rango de valores admisible:
‚óè 1 ¬µm a 1 000 000 000 ¬µm a una resoluci√≥n ‚â• 1 ¬µm/
impulso
‚óè 1 ¬µm a 100.000.000 ¬µm a una resoluci√≥n < 1 ¬µm/
impulso

Definir distancia de desconexi√≥n
Distancia de desconexi√≥n
La "Distancia de desconexi√≥n" define la distancia hasta el punto de destino en el que se
desconecta el accionamiento (la marcha lenta). Las funciones de vigilancia retoma el m√≥dulo
de posicionamiento a partir de este punto.
Los valores predefinidos se aplican a todos los objetivos a los que se aproxima el m√≥dulo de
posicionamiento. Una excepci√≥n est√° constituida por el modo incremental con el incremento
255, para la que se define una distancia de desconexi√≥n especial.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2845

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Reglas para la distancia de desconexi√≥n
‚óè La distancia de desconexi√≥n positiva y la distancia de desconexi√≥n negativa no tienen por
qu√© estar dispuestas de forma sim√©trica en torno al destino. Los valores pueden ser muy
distintos.
‚óè La distancia de desconexi√≥n debe ser mayor que la mitad de la zona de destino.
‚óè Entre el punto de desconexi√≥n y el destino se debe seleccionar una distancia que permita
que el accionamiento se detenga dentro de la zona de destino.
‚óè El punto de desconexi√≥n y el inicio de la zona de destino se encuentran a una distancia
temporal de al menos 8 ms entre s√≠.
La figura siguiente muestra la ubicaci√≥n de las zonas de cambio de velocidad en torno al
destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR











2EMHWLYR







)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§
‚ë•

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‚Äê
tiva
Distancia de desconexi√≥n positiva/negativa

‚ë¶
‚ëß

Zona de destino

‚ë®

Punto de desconexi√≥n

Punto de cambio de velocidad

Zona de parada

Si desea obtener m√°s informaci√≥n sobre la disposici√≥n de las √°reas, consulte "Zonas y puntos
de conexi√≥n del m√≥dulo de posicionamiento".

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexi√≥n positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexi√≥n negativa
Rango de valores admisible:
‚óè 1 ¬µm a 1 000 000 000 ¬µm a una resoluci√≥n ‚â• 1 ¬µm/
impulso
‚óè 1 ¬µm a 100.000.000 ¬µm a una resoluci√≥n < 1 ¬µm/
impulso

2846

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir la aproximaci√≥n al destino
Definir zona de destino
Zona de destino
El m√≥dulo de posicionamiento crea un √°rea sim√©trica alrededor de cada destino: la zona de
destino. Dentro de esta √°rea es preciso que el valor real se encuentre en una aproximaci√≥n al
destino.
Una especificaci√≥n de valor "0 "desconecta la tolerancia en la aproximaci√≥n al destino. La
velocidad al alcanzar el destino debe ser entonces inferior a la velocidad de parada
(P√°gina 2849) parametrizada.

Reglas para la zona de destino
‚óè La zona de destino est√° situada de forma sim√©trica en torno al destino.
‚óè Una especificaci√≥n de valor "0 "desconecta la vigilancia de la zona de destino.
La figura siguiente muestra la ubicaci√≥n de las zonas en torno al destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR










2EMHWLYR








)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§
‚ë•

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‚Äê
tiva
Distancia de desconexi√≥n positiva/negativa

‚ë¶
‚ëß

Zona de destino

‚ë®

Punto de desconexi√≥n

Punto de cambio de velocidad

Zona de parada

Si desea obtener m√°s informaci√≥n sobre el tema de la aproximaci√≥n al destino, consulte el
apartado "Zonas y puntos de conexi√≥n del m√≥dulo de posicionamiento", as√≠ como "Fin de un
proceso de posicionamiento (P√°gina 2801)".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2847

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

76.0

TRG_RANGE

DINT

L#1000

Zona de destino
Rango de valores admisible:
‚óè 0 = sin vigilancia
‚óè 1 ¬µm a 1 000 000 000 ¬µm a una resoluci√≥n ‚â• 1 ¬µm/
impulso
‚óè 1 ¬µm a 100.000.000 ¬µm a una resoluci√≥n < 1 ¬µm/
impulso

Definir tiempo de vigilancia
Tiempo de vigilancia
Durante el tiempo de vigilancia el m√≥dulo vigila:
‚óè el movimiento del eje hasta el punto de desconexi√≥n.
El tiempo de vigilancia comienza con el inicio de un posicionamiento y se redispara cada
vez que se modifica el valor real en el sentido de la marcha.
Dentro del tiempo de vigilancia, el valor real debe haberse modificado al menos un
incremento (la parte del trayecto de la resoluci√≥n).
‚óè la aproximaci√≥n al destino.
El tiempo de vigilancia se redispara por √∫ltima vez cuando se alcanza el punto de
desconexi√≥n.
Dentro del tiempo de vigilancia debe haberse alcanzado la zona de destino.
Si desea obtener m√°s informaci√≥n sobre el tema de la aproximaci√≥n al destino, consulte el
apartado "Final de un proceso de posicionamiento (P√°gina 2801)".

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

80.0

MON_TIME

DINT

L#2000

Tiempo de vigilancia
Rango de valores admisible:
‚óè 0 = sin vigilancia
‚óè De 1 a 100.000 ms

Tiempo de vigilancia real
Para el tiempo vigilancia es posible predefinir todos los valores a partir del √°rea de valores. El m√≥dulo redondea el tiempo
predefinido a un m√∫ltiplo de 8 ms (ciclo de m√≥dulo).

2848

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir zona de parada
Zona de parada
La zona de parada est√° situada de forma sim√©trica en torno al destino correspondiente. En esta
√°rea se vigila si el accionamiento se detiene en una posici√≥n de destino alcanzada o si se aleja
de ella. La vigilancia comienza despu√©s de que el m√≥dulo de posicionamiento ha notificado
"Posici√≥n alcanzada" (PEH).
Si la zona de parada se abandona sin una petici√≥n de marcha v√°lida, el m√≥dulo de
posicionamiento notifica un error.

Reglas para la zona de parada
‚óè La zona de parada est√° situada de forma sim√©trica en torno al destino correspondiente:
(Destino ‚Äì ¬Ω √ó zona de parada) ‚â§ destino ‚â§ (destino + ¬Ω √ó zona de parada)
‚óè La zona de parada debe ser mayor o igual que la zona de destino.
‚óè Los valores de coordenadas para la zona de parada se encuentran en la zona de trabajo.
‚óè Con el valor "0" se desconecta la vigilancia de parada.
Si desea obtener m√°s informaci√≥n sobre el tema de la aproximaci√≥n al destino, consulte el
apartado "Zonas y puntos de conexi√≥n del m√≥dulo de posicionamiento", as√≠ como "Fin de un
proceso de posicionamiento (P√°gina 2801)".

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

84.0

ZSPEED_R

DINT

L#1000

Zona de parada
Rango de valores admisible:
‚óè 0 = sin vigilancia
‚óè 1 ¬µm a 1 000 000 000 ¬µm a una resoluci√≥n ‚â• 1 ¬µm/
impulso
‚óè 1 ¬µm a 100.000.000 ¬µm a una resoluci√≥n < 1 ¬µm/
impulso

Definir velocidad de parada
Velocidad de parada
La velocidad de parada sirve como velocidad de referencia. Si la velocidad real alcanza la
velocidad de parada durante un posicionamiento y el accionamiento se encuentra en la zona
de destino, se notifica el aviso "Posici√≥n alcanzada" (PEH). El proceso de posicionamiento
queda correctamente finalizado.
La precisi√≥n de posicionamiento aumenta cuando el valor de la velocidad de parada se reduce.
Con el valor "0" se desconecta la vigilancia de parada.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2849

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si desea obtener m√°s informaci√≥n sobre el tema de la aproximaci√≥n al destino, consulte el
apartado "Final de un proceso de posicionamiento (P√°gina 2801)".

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

88.0

ZSPEED_L

DINT

L#30000

Velocidad de parada
Rango de valores admisible:
‚óè 0 = sin vigilancia
‚óè 1 ¬µm/min a 100 000 ¬µm/min

Eje canal n
Definir el tipo de eje
Seleccionar tipo de eje
Tipos de eje
El m√≥dulo de posicionamiento puede controlar los siguientes tipos de ejes:
‚óè Eje lineal
El eje lineal es un eje con una zona de desplazamiento f√≠sico limitado.

,QLFLRI¬ØVLFR

)LQI¬ØVLFR

‚óè Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no est√° limitada por topes mec√°nicos.
9DORUP¬£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

2850

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

12.0

AXIS_TYPE

DINT

L#0

Tipo de eje
Valores permitidos:
‚óè 0 = Eje lineal
‚óè 1 = Eje rotativo

Definir final de carrera por software
Final de carrera por software
Los finales de carrera por software existen s√≥lo para el eje lineal.
El √°rea limitada por el final de carrera por software es la zona de trabajo.
El inicio del final de carrera por software (FCSF) debe ser siempre menor que el fin del final de
carrera por software (SEE).
Los finales de carrera por software se vigilan despu√©s de que el eje est√° sincronizado.
‚óè Si se utiliza un enc√≥der incremental:
La sincronizaci√≥n del eje se alcanza mediante la b√∫squeda del punto de referencia o la
definici√≥n del punto de referencia.
‚óè Si se utiliza un enc√≥der absoluto (SSI):
El eje est√° sincronizado despu√©s de que el m√≥dulo ha recibido un telegrama completo y sin
errores para el canal correspondiente.
El enc√≥der absoluto tiene que abarcar por lo menos la zona de trabajo, incluido el final de
carrera por software.

Relaci√≥n entre la zona de trabajo, el √°rea del enc√≥der y la zona de desplazamiento
‚óè La zona de trabajo es el √°rea que el usuario define para sus tareas mediante los finales de
carrera por software.
‚óè El √°rea del enc√≥der es el √°rea que el enc√≥der cubre claramente. En el caso de un eje lineal
del m√≥dulo, el √°rea del enc√≥der se define de forma sim√©trica por encima de la zona de
trabajo. Es decir, el m√≥dulo desplaza el √°rea del enc√≥der de tal modo que las distancias
entre los finales de carrera por software y los finales del √°rea del enc√≥der son iguales en
cada caso (v√©ase la figura inferior).
‚óè La zona de desplazamiento es el rango de valores que puede procesar el m√≥dulo de
posicionamiento. La zona de desplazamiento depende de la resoluci√≥n.
La figura siguiente muestra la relaci√≥n entre los finales de carrera por software, la zona de
trabajo, el √°rea del enc√≥der y la zona de desplazamiento.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2851

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
=RQDGHWUDEDMR

(MH

)&6,



=RQDGHDOFDQFHGHOHQF¬µGHU
0DUJHQGHGHVSOD]DPLHQWR
)&6)





Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

64.0

SSW_STRT

DINT

L#-100000000

Inicio del final de carrera por software

68.0

SSW_END

DINT

L#100000000

Fin del final de carrera por software
Rango de valores admisible:
‚óè -1 000 000 000 ¬µm a 1 000 000 000 ¬µm a una
resoluci√≥n ‚â• 1 ¬µm/impulso
‚óè -100.000.000 ¬µm a 100.000.000 ¬µm a una resoluci√≥n
< 1 ¬µm/impulso

Definir final del eje rotativo
Final del eje rotativo
El valor "Final del eje rotativo" es el valor m√°ximo te√≥rico que el valor real puede alcanzar. Sin
embargo, el m√°ximo valor te√≥rico nunca se indica porque f√≠sicamente identifica la misma
posici√≥n que el inicio del eje rotativo (0).
El valor m√°s grande que se muestra, en el caso de un eje rotativo, tiene el valor:
Final del eje rotativo [¬µm] - Resoluci√≥n [¬µm / impulso] √ó 1 [impulso]
Ejemplo: Final del eje rotativo 1000 mm, resoluci√≥n 1000 ¬µm/impulso
La visualizaci√≥n pasa:
‚óè con un sentido de giro positivo, de 999 mm a 0 mm
‚óè con un sentido de giro negativo, de 0 mm a 999 mm

Eje rotativo con enc√≥ders absolutos
En el caso de un eje rotativo con un enc√≥der absoluto, el √°rea del eje rotativo (0 hasta el final
del eje rotativo) tiene que coincidir exactamente con el √°rea de sensor del enc√≥der absoluto:
Fin del eje rotativo [¬µm] = N√∫mero de vuelltas del enc√≥der √ó Recorrido/vuelta del enc√≥der [¬µm]

2852

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

16.0

ENDROTAX

DINT

L#100000

Final del eje rotativo
Rango de valores admisible:
‚óè 1 ¬µm a 1.000.000.000 ¬µm a una resoluci√≥n ‚â• 1 ¬µm/
impulso
‚óè 1 ¬µm a 100.000.000 ¬µm a una resoluci√≥n < 1 ¬µm/
impulso

Definir la b√∫squeda del punto de referencia
Seleccionar tipo de b√∫squeda del punto de referencia
Tipo de b√∫squeda del punto de referencia
Con la funci√≥n "Tipo de b√∫squeda del punto de referencia" se determinan las condiciones para
la sincronizaci√≥n del eje:
‚óè El primer dato define el sentido de arranque en el que comienza la b√∫squeda del punto de
referencia.
‚óè El segundo dato define la posici√≥n de la marca cero que conduce a la sincronizaci√≥n, en
referencia con el conmutador de punto de referencia.
Si desea obtener informaci√≥n detallada al respecto consulte Modo de operaci√≥n "B√∫squeda del
punto de referencia" (P√°gina 2810).

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

52.0

REFPT_TYPE

DINT

L#0

Tipo de b√∫squeda del punto de referencia
Valores permitidos:
‚óè 0 = positivo, conmutador del punto de referencia en el
sentido +
‚óè 1 = positivo, conmutador del punto de referencia en el
sentido ‚óè 2 = negativo, conmutador del punto de referencia en
el sentido +
‚óè 3 = negativo, conmutador del punto de referencia en
el sentido -

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2853

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir coordenada del punto de referencia
Coordenada del punto de referencia
‚óè Enc√≥ders inc.:
La coordenada del punto de referencia es necesaria para el modo de operaci√≥n "B√∫squeda
del punto de referencia". Si el eje no est√° sincronizado despu√©s de escribir y activar los
datos m√°quina, el valor real se establece al valor de la coordenada del punto de referencia.
‚óè Enc√≥der absoluto (SSI)
La coordenada del punto de referencia es necesaria para el ajuste mec√°nico del enc√≥der.
Consulte al respecto tambi√©n la descripci√≥n del reajuste del enc√≥der absoluto
(P√°gina 2854), en la que se explica la interacci√≥n de dicho ajuste con el resto de datos.
El valor de la coordenada del punto de referencia debe encontrarse dentro de la zona de
trabajo:
‚óè Eje lineal
Incluido el final de carrera por software.
‚óè Eje rotativo
Mayor o igual que 0 y menor que el valor "Final del eje rotativo" (0 ‚â§ Coordenada del punto
de referencia < Final del eje rotativo).

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia
Rango de valores admisible:
‚óè -1 000.000.000 ¬µm a 1.000.000.000 ¬µm a una
resoluci√≥n ‚â• 1 ¬µm/impulso
‚óè -100.000.000 ¬µm a 100.000.000 ¬µm a una resoluci√≥n
< 1 ¬µm/impulso

Definir el reajuste del enc√≥der absoluto
Calcular reajuste del enc√≥der absoluto
Reajuste del enc√≥der absoluto
El ajuste del enc√≥der absoluto s√≥lo es necesario para un enc√≥der absoluto (SSI).
Con el reajuste del enc√≥der absoluto y las coordenadas del punto de referencia el rango de
valores del sensor se reproduce claramente en el sistema de coordenadas del eje.
Encontrar√° m√°s informaci√≥n al respecto en "Procedimiento de reajuste del enc√≥der absoluto
(P√°gina 2855)", as√≠ como en un ejemplo (P√°gina 2856).

2854

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia
Rango de valores admisible:
‚óè -1.000.000.000 ¬µm a 1.000.000.000 ¬µm a una
resoluci√≥n ‚â• 1 ¬µm/impulso
‚óè -100.000.000 ¬µm a 100.000.000 ¬µm a una
resoluci√≥n < 1 ¬µm/impulso

48.0

ENC_ADJ

DINT

L#0

Reajuste del enc√≥der absoluto
Rango de valores admisible:
‚óè 0 a (225 - 1)

Procedimiento para un reajuste del enc√≥der absoluto
Determinar el reajuste correcto del enc√≥der absoluto
Tras la primera parametrizaci√≥n hay que llevar a cabo otros pasos para que se establezca una
relaci√≥n correcta entre el enc√≥der y el sistema de coordenadas. El procedimiento se
representa utilizando el cuadro de di√°logo de parametrizaci√≥n.
1. Desplace el eje a un punto definido y reproducible que f√≠sicamente sea √∫nico.
Puede ser, por ejemplo, el "Fin del final de carrera por software".
2. Llame la petici√≥n "Definir punto de referencia (P√°gina 2827)" con la coordenada del punto
definido en 1.
El m√≥dulo de posicionamiento determina entonces un valor de enc√≥der para la coordenada
del punto de referencia registrada en el eje en el DB de canal (REFPT): el reajuste del
enc√≥der absoluto. Este valor se puede leer con la petici√≥n "Leer datos de enc√≥der
(P√°gina 2835)".
3. Registre el valor le√≠do en el campo "Reajuste del enc√≥der absoluto".
4. Guarde la parametrizaci√≥n en el DB de par√°metros correspondiente con la funci√≥n de
exportaci√≥n.
5. Cargue los datos de HWCN en la CPU.
6. Para activar los datos, rearranque la CPU.
Nota
Esta sincronizaci√≥n se realiza una vez en la puesta en marcha. Tras una parametrizaci√≥n, el
m√≥dulo de posicionamiento queda sincronizado durante el arranque en cuanto se recibe un
telegrama sin errores del enc√≥der.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2855

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Alternativa: Reajuste mec√°nico de un enc√≥der
Tambi√©n se puede obtener una relaci√≥n correcta entre el sistema de coordenadas y el enc√≥der
del modo siguiente:
1. Desplace el eje a un punto definido y reproducible que f√≠sicamente sea √∫nico.
Puede ser, por ejemplo, el "Inicio del final de carrera por software".
2. Introduzca este valor de coordenadas en los datos m√°quina a modo de "coordenada del
punto de referencia".
3. Lea el valor del enc√≥der que se muestra en esta posici√≥n con la petici√≥n "Leer datos del
enc√≥der (P√°gina 2835)".
4. Introduzca este valor como reajuste del enc√≥der absoluto en los datos m√°quina.
Tras la parametrizaci√≥n se mostrar√° siempre un valor real correcto.
En lugar del paso 3 y 4 tambi√©n es posible resetear a cero el codificador a trav√©s de la opci√≥n
"Reset", si est√° disponible. A continuaci√≥n, introduzca el valor "0" como reajuste del enc√≥der
absoluto en los datos m√°quina.

Ejemplo para un reajuste del enc√≥der absoluto
Ejemplo para un reajuste del enc√≥der absoluto
Para este ejemplo se parte de las premisas siguientes:
‚óè Coordenada del punto de referencia = -125 mm
‚óè √Årea de trabajo de SSW_STRT = -1.000 mm a SSW_END = 1.000 mm
‚óè Reajuste del enc√≥der absoluto = 0
‚óè √Årea del enc√≥der = 2.048 incrementos con una resoluci√≥n de 1 mm/impulso
‚óè El enc√≥der absoluto utilizado no permite un ajuste mec√°nico exacto y tampoco ofrece la
posibilidad de definir el valor del enc√≥der.
La figura siguiente muestra un ejemplo de reajuste del enc√≥der absoluto.

2856

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

GHVHDGR

(MH
9DORUGHOHQF¬µGHUDEVROXWR

(QF¬µGHU

9DORUUHDO  






9DORUGHOHQF¬µGHU



(MH

DFWXDOPHQWH




 



1)

Asignaci√≥n del sistema de coordenadas a los valores del sensor con el reajuste de enc√≥der
absoluto definido. El valor del enc√≥der 0 equivale al valor real -125.

2)

Asignaci√≥n deseada del sistema de coordenadas con respecto al enc√≥der. En esta posici√≥n, la
coordenada tiene que ser -125.

Resultado tras "Definir el punto de referencia"
Tras "Definir el punto de referencia", la relaci√≥n es la siguiente:
La coordenada del punto de referencia en el eje (-125) se asigna al valor del enc√≥der calculado
(1798) a partir del reajuste del enc√≥der absoluto. La figura siguiente muestra esta asignaci√≥n.
$OFDQFHTXHSXHGHFXEULUVHFODUDPHQWHFRQHVWHHQF¬µGHU

(MH



 






)&6)

9DORUGHOHQF¬µGHUDEVROXWR

)&6,







9DORUFDOFXODGRGHO
UHDMXVWHGHOHQF¬µGHU
DEVROXWR




El enc√≥der devuelve 2.048 valores un√≠vocos. La zona de trabajo est√° definida por el final de
carrera por software. Sin embargo, debido a la resoluci√≥n seleccionada de 1 mm por impulso,
el enc√≥der puede abarcar una zona de trabajo mayor que la prevista por el final de carrera por
software.
Con la resoluci√≥n definida, la zona de trabajo est√° ya cubierta con 2.001 valores. Por ello en
el ejemplo quedan 47 impulsos "sobrantes" dispuestos sim√©tricamente alrededor de la zona de
trabajo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2857

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar velocidad de inicio
Velocidad de inicio en la b√∫squeda del punto de referencia
Con este dado se selecciona la velocidad para el inicio de una b√∫squeda del punto de
referencia.

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

99.0

REFPT_SPD

BOOL

TRUE

Velocidad de inicio en la b√∫squeda del punto de refe‚Äê
rencia
Valores permitidos:
‚óè 0 = Marcha r√°pida
‚óè 1 = Marcha lenta

Definir la distancia m√≠nima entre bordes
Distancia m√≠nima entre bordes
Con el dato m√°quina "Distancia m√≠nima entre bordes" se define un rango tras la detecci√≥n del
inicio de la medici√≥n en una captura de bordes. Si el final del proceso de medici√≥n se encuentra
dentro de este rango, la medici√≥n se desestima.

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

4.0

EDGEDIST

DINT

L#0

Distancia m√≠nima entre bordes
Rango de valores admisible:
‚óè 0 a 1.000.000.000 ¬µm a una resoluci√≥n ‚â• 1 ¬µm/
impulso
‚óè 0 a 100.000.000 ¬µm a una resoluci√≥n < 1 ¬µm/impulso

Enc√≥der del canal n
Seleccionar tipo de se√±al
Tipo de se√±al
El enc√≥der da informaci√≥n de recorrido al m√≥dulo, el cual la eval√∫a y la convierte en un valor
real con la resoluci√≥n.

2858

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Es posible seleccionar un tipo de se√±al de uno de los enc√≥ders siguientes:
‚óè Enc√≥der incremental de 5 V
Seleccione el tipo de se√±al "5 V Se√±al diferencial" si utiliza un enc√≥der incremental de 5 V
con se√±ales diferenciales A, /A, B, /B y N, /N.
‚óè Enc√≥der incremental de 24 V
Seleccione el tipo de se√±al "24 V pista A+B desfasado" si desea utilizar un enc√≥der
incremental de 24 V con las se√±ales A*, B* y N*.
‚óè Enc√≥der absoluto (SSI)
Seleccione el tipo de se√±al "SSI absoluto" si desea utilizar un enc√≥der absoluto con una
interfaz en serie.

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

20.0

ENC_TYPE

DINT

L#1

Tipo de se√±al
Valores permitidos:
‚óè 1 = 5 V Se√±al diferencial
‚óè 2 = 24 V pista A+B desfasado
‚óè 3 = SSI longitud del telegrama 13 bits 1)
‚óè 4 = SSI longitud del telegrama 25 bits 1)
‚óè 5 = SSI longitud del telegrama 14 bits 1)
‚óè 6 = SSI longitud del telegrama 15 bits 1)
‚óè 7 = SSI longitud del telegrama 16 bits 1)
‚óè :
‚óè :
‚óè 14 = SSI longitud del telegrama 23 bits 1)
‚óè 15 = SSI longitud del telegrama 24 bits 1)

1)

La selecci√≥n de la longitud del telegrama se realiza en el cuadro de di√°logo "SSI".

Seleccionar sentido de contaje
Sentido de contaje
Con el dato m√°quina "Sentido de contaje" se adapta el sentido de la captura del recorrido al
sentido del movimiento del eje. Para ello, tenga en cuenta todos los sentidos de giro de los
elementos de transmisi√≥n (como p. ej., acoplamientos y engranajes).
‚óè normal = los impulsos de contaje adelantes (enc√≥der incremental) o valores del sensor
(enc√≥der absoluto) equivalen a los valores de posici√≥n real ascendentes
‚óè invertida = los impulsos de contaje adelantes (enc√≥der incremental) o valores del sensor
(enc√≥der absoluto) equivalen a los valores de posici√≥n real descendentes

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2859

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

59.0

CNT_DIR

BOOL

FALSE

Sentido de contaje
Valores permitidos:
‚óè 0 = normal
‚óè 1 = invertida

Definir resoluci√≥n
Definir recorrido por vuelta del enc√≥der
Recorrido por vuelta del enc√≥der
Con el dato m√°quina "Recorrido por vuelta del enc√≥der" se indica al m√≥dulo de
posicionamiento qu√© recorrido realiza el sistema de accionamiento en cada vuelta.
El valor "Recorrido por vuelta del enc√≥der" depende de la estructura del eje y del modo en que
est√° colocado el enc√≥der. Debe tener en cuenta todos los elementos de transmisi√≥n, como
acoplamientos o engranajes. La figura siguiente muestra dos disposiciones de enc√≥der
distintas a modo de ejemplo.

0RWRU

(QF¬µGHU

0RWRU

5HGXFWRUHV

(QF¬µGHU

5HGXFWRUHV

La relaci√≥n entre los datos m√°quina "Recorrido por vuelta del enc√≥der" e "Incrementos por
vuelta del enc√≥der" se describe en el apartado Resoluci√≥n (P√°gina 2862).

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

24.0

DISP_REV

DINT

L#80000

Recorrido por vuelta del enc√≥der
Rango de valores admisible:
‚óè 1 ¬µm a 1.000.000.000 ¬µm

2860

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir incrementos por vuelta del enc√≥der
Incrementos por vuelta
El dato m√°quina "Incremento por vuelta del enc√≥der" indica la cantidad de incrementos que
proporciona un enc√≥der en cada vuelta. A partir de este valor y del dato m√°quina "Recorrido
por vuelta del enc√≥der", el m√≥dulo de posicionamiento calcula la resoluci√≥n (P√°gina 2862).
Enc√≥der incremental
Como entrada es posible indicar cualquier valor dentro del rango de valores. El m√≥dulo eval√∫a
los incrementos en m√∫ltiplos de 4.
Enc√≥der absoluto
Para los l√≠mites debe diferenciarse entre los distintos modelos de enc√≥der. Como entrada se
permiten s√≥lo valores en potencias de 2.
‚óè Enc√≥der monovuelta (n√∫mero de vueltas = 1) con longitud del telegrama de 13 bits:
‚Äì valor m√≠nimo = 4
‚Äì valor m√°ximo = 8192
‚óè Enc√≥der multivuelta (n√∫mero de vueltas > 1) con longitud del telegrama de 25 bits:
‚Äì valor m√≠nimo = 4
‚Äì valor m√°ximo = 8192
‚óè Enc√≥der monovuelta (n√∫mero de vueltas = 1) con longitud del telegrama de 25 bits:
‚Äì valor m√≠nimo = 4
‚Äì valor m√°ximo = 225
Las medidas lineales se parametrizan como enc√≥der multivuelta tal como se indica a
continuaci√≥n:
‚óè Incrementos por vuelta del enc√≥der = 8192
‚óè N√∫mero de vueltas x 8192 ‚â• N√∫mero de pasos de la medida lineal

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

32.0

INC_REV

DINT

L#500

Incrementos por vuelta del enc√≥der
Rango de valores admisible:
‚óè 1 a 225

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2861

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Resoluci√≥n
Resoluci√≥n
La resoluci√≥n indica el desplazamiento que corresponde s un impulso. Es una medida de la
exactitud del posicionamiento y determina tambi√©n la zona de desplazamiento m√°ximo posible
del m√≥dulo de posicionamiento.
Para calcular la resoluci√≥n (RES) se procede tal como se indica en la tabla siguiente:

Valores de
entrada

Enc√≥der incremental

Enc√≥der absoluto

‚óè Recorrido por vuelta del enc√≥der

‚óè Recorrido por vuelta del enc√≥der

‚óè Incrementos por vuelta del enc√≥der:

‚óè Incrementos por vuelta del enc√≥der:

‚Äì

Evaluaci√≥n cu√°druple

‚Äì

1 Incremento = 4 Impulsos

C√°lculo

‚Äì

1 Incremento = 1 Impulso

7UD\HFWR
5(6

9XHOWDGHOHQF¬µGHU
,PSXOVRV
9XHOWDGHOHQF¬µGHU

Nota
Todos los datos de posici√≥n se redondean al m√∫ltiplo entero de la resoluci√≥n. De este modo es
posible diferenciar entre los valores introducidos y los utilizados.

Rango de valores de la resoluci√≥n
El sistema de medida seleccionado determina el margen de valores de la resoluci√≥n.
Sistema de
medici√≥n

Datos en ...

Rango de valores de la resoluci√≥n

mm

10-3 mm

0,1 √ó 10-3 ‚Ä¶ 1000 √ó 10-3 mm/impulso

pulgadas

10-4 pulgadas

0,1 √ó 10-4 ‚Ä¶ 1000 √ó 10-4 pulgada/impulso

grados

10 grados

0,1 √ó 10-4 ‚Ä¶ 1000 √ó 10-4 grados/impulso

10-3 grados

0,1 √ó 10-3 ‚Ä¶ 1000 √ó 10-3 grados/impulso

10 grados

0,1 √ó 10-2 ‚Ä¶ 1000 √ó 10-2 grados/impulso

-4

-2

2862

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo
‚óè Un enc√≥der incremental tiene los datos siguientes:
‚Äì Incrementos por vuelta del enc√≥der: 5000
‚Äì Recorrido por vuelta del enc√≥der: 1.000 mm
‚Äì 1 Incremento = 4 Impulsos
De ello resulta la resoluci√≥n (evaluaci√≥n cu√°druple):
5HVROXFL¬µQ

PP
LQFUHPHQWRV




PP
,QFUHPHQWR



PP
LPSXOVRV

PP
,QFUHPHQWR



PP
,PSXOVR

PP
,PSXOVR

‚óè Un enc√≥der SSI tiene los datos siguientes:
‚Äì Incrementos por vuelta del enc√≥der: 4096
‚Äì Recorrido por vuelta del enc√≥der: 1.000 mm
‚Äì 1 Incremento = 1 Impulso
De ello resulta la resoluci√≥n:
5HVROXFL¬µQ

PP
LQFUHPHQWRV



Dependencia entre la zona de desplazamiento y la resoluci√≥n
La zona de desplazamiento est√° limitada por la representaci√≥n num√©rica en el m√≥dulo de
posicionamiento. Esta representaci√≥n num√©rica var√≠a en funci√≥n de la resoluci√≥n. Por ello, al
definir valores hay que procurar mantenerse siempre dentro de los l√≠mites admitidos.
La zona de desplazamiento m√°xima se muestra en la tabla siguiente:
Resoluci√≥n (RES) dentro del margen

Zona de desplazamiento m√°xima

0,1 ¬µm/impulso ‚â§ RES < 1 ¬µm/impulso

-108 ¬µm a 108 ¬µm (-100 m a +100 m)

1 ¬µm/impulso ‚â§ RES ‚â§ 1000 ¬µm/impulso

-109 ¬µm a 109 ¬µm (-1000 m a +1000 m)

Datos para el enc√≥der absoluto
N√∫mero de vueltas del enc√≥der
N√∫mero de vueltas del enc√≥der
El dato m√°quina "N√∫mero de vueltas del enc√≥der" s√≥lo existe en enc√≥ders absolutos. Con √©l
se indica el n√∫mero de vueltas posibles con este enc√≥der.
El total de pasos del enc√≥der no es un dato m√°quina. Se calcula del modo siguiente:
Total de pasos = Incremento por vuelta x N√∫mero de vueltas

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2863

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

36.0

NO_REV

DINT

L#1

N√∫mero de vueltas del enc√≥der
Rango de valores admisible:
‚óè 1 (enc√≥der monovuelta)
‚óè 2 a 4096 en potencias de 2 (enc√≥der multivuelta)

Velocidad de transferencia
Velocidad de transferencia
Con el dato m√°quina "Velocidad de transferencia" se define la velocidad de transferencia de
datos del enc√≥der SSI al m√≥dulo de posicionamiento.
La velocidad de transferencia m√°xima depende de la longitud del cable:
‚óè 320 m ‚Üí 125 kHz
‚óè 160 m ‚Üí 250 kHz
‚óè 63 m ‚Üí 500 kHz
‚óè 20 m ‚Üí 1000 kHz

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

40.0

BAUDRATE

DINT

L#0

Velocidad de transferencia
Valores permitidos:
‚óè 0 = 125 kHz
‚óè 1 = 250 kHz
‚óè 2 = 500 kHz
‚óè 3 = 1000 kHz

Longitud de telegrama
Longitud de telegrama
Con la "Longitud de telegrama" se define el marco de impulsos que emite el m√≥dulo de
posicionamiento.
Se permite una longitud de telegrama de 13 bits a 25 bits.

Datos utilizados en el DB de par√°metros
La longitud de telegrama seleccionada aqu√≠ se dispone en el DB de par√°metro con el
dato ENC_TYPE (P√°gina 2858).

2864

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Paridad
Paridad
Con la "Paridad" se define si para el enc√≥der absoluto no debe transferirse ninguna paridad o
si debe transferirse una paridad par o impar.

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

28.0

PARITY

DINT

L#0

Paridad
Valores permitidos:
‚óè 0 = ninguno
‚óè 1 = paridad par (even)
‚óè 2 = paridad impar (odd)

Seleccionar vigilancia
Vigilancia
Rotura de hilo
Con la activaci√≥n de la vigilancia, el m√≥dulo de posicionamiento vigila todos los conductos en
un enc√≥der incremental de 5 V y un enc√≥der absoluto. La vigilancia detecta:
‚óè Rotura de hilo
‚óè Cortocircuito de los distintos cables
‚óè Distancia entre flancos de los impulsos de contaje (tambi√©n en un enc√≥der incremental de
24 V)
Para la monitorizaci√≥n en un enc√≥der incremental de 24 V es preciso ajustar un tiempo de
monitorizaci√≥n MON_TIME (P√°gina 2848) > 0.
En enc√≥ders incrementales de 5 V sin marca cero es preciso desactivar la monitorizaci√≥n de
rotura de hilo o bien interconectar las se√±ales N y /N de forma externa.
Error de telegrama
El m√≥dulo monitoriza el telegrama de un enc√≥der absoluto (SSI) para:
‚óè ver si hay errores del bit de inicio y del bit de parada
La monitorizaci√≥n de errores de telegrama en los enc√≥ders absolutos (SSI) no puede
desactivarse.
Impulsos err√≥neos (enc√≥der incremental)
Entre dos marcas cero consecutivas, un enc√≥der incremental siempre tiene que proporcionar
el mismo n√∫mero de incrementos.
El m√≥dulo de posicionamiento comprueba si la marca cero de un enc√≥der incremental aparece
en el estado adecuado del enc√≥der.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2865

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En el caso de enc√≥ders sin marca cero es preciso desactivar la monitorizaci√≥n de los impulsos
de error.
Igualmente es preciso desactivar la monitorizaci√≥n de rotura de hilo o bien interconectar las
entradas de marca cero N y /N de forma externa.

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

63.0

MON_WIRE

BOOL

TRUE

1 = Rotura de hilo

63.1

MON_FRAME

BOOL

TRUE

1 = Error de telegrama (tiene que ser siempre 1)

63.2

MON_PULSE

BOOL

TRUE

1 = Impulsos de error

Vigilancias:

Incremento del canal n
Definir incrementos
Definici√≥n
Los incrementos son destinos especificados que pueden ser controlados por el m√≥dulo de
posicionamiento en el modo de operaci√≥n "Modo incremental relativo" o "Modo incremental
absoluto".

√Årea posible para los incrementos
El destino al que tiene que realizarse una aproximaci√≥n tiene que encontrarse al menos a
media zona de destino delante del final de carrera por software correspondiente. La figura
siguiente muestra los l√≠mites de una especificaci√≥n del incremento.
]RQDGHGHVWLQR

)&6,

2EMHWLYR

=RQDGHWUDEDMR

]RQDGHGHVWLQR



2EMHWLYR

)&6)

¬ÉUHDHQODTXHVHHQFXHQWUDHOREMHWLYR

(QHVWD¬£UHDGHOD]RQDGHWUDEDMRQRSXHGHKDEHUQLQJ¬ºQREMHWLYR

2866

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

N√∫mero de incremento 1 a 100
N√∫mero de incremento 1 a 100
Tiene la posibilidad de insertar un m√°ximo de 100 incrementos en una tabla, que son v√°lidas
tanto el modo de operaci√≥n "Modo incremental relativo" como para el "Modo incremental
absoluto".
Tenga en cuenta que el m√≥dulo de posicionamiento para el "Modo incremental relativo" no
soporta valores negativos. Los valores son interpretados por el m√≥dulo de posicionamiento en
funci√≥n del sentido de movimiento como diferencia positiva o negativa.
Nota
La entrada se realiza en la unidad del sistema de medida ajustado. Tenga en cuenta en este
caso sobre todo las posiciones decimales.
Ejemplo de n√∫meros:
‚óè Incremento: 800 mm
‚óè Sistema de medida: 10-3 mm
‚óè Entrada en el DB de par√°metros: 800000
Recomendaci√≥n: En la tabla de incrementos defina √°reas separadas para incrementos
relativos y absolutos.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (incremento 1 a 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (incremento 1 a 100)

36.6

TRGL1RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 1 (incremento 1 a 50)

36.7

TRGL2RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 2 (incremento 1 a 100)

valor inicial

Comentarios

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

120.0

TRGL1.TRG[1]

DINT

L#0

N√∫mero de incremento 1

.

.

.

.

.

.

.

.

.

.

.

.

.

.

316.0

TRGL1.TRG[50]

L#0

N√∫mero de incremento 50

DINT

320.0

TRGL2.TRG[51]

DINT

L#0

N√∫mero de incremento 51

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

516.0

TRGL2.TRG[100]

DINT

L#0

N√∫mero de incremento 100

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Tabla de incrementos 1

Tabla de incrementos 2

2867

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

N√∫mero de incremento 252
N√∫mero de incremento 252
El n√∫mero de incremento 252 ofrece la posibilidad de mover primero el accionamiento sin
destino (marcha sin fin) y, si se produce un evento externo en la entrada digital xI3, permite
realizar un posicionamiento en el destino parametrizado (incremento).
Para las distancias de cambio de velocidad y de desconexi√≥n, las entradas del DB de
par√°metros tienen validez para este incremento.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para n√∫mero de incre‚Äê
mento 252 √≥ 254

96.0

TRG252_254

DINT

L#0

Incremento para n√∫mero de incremento 252 √≥
254

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexi√≥n positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexi√≥n negativa

N√∫mero de incremento 254
N√∫mero de incremento 254
Independientemente de la tabla de incrementos, es posible utilizar el n√∫mero de incremento
254 como otra especificaci√≥n del recorrido. Para las distancias de cambio de velocidad y de
desconexi√≥n, las entradas del DB de par√°metros tienen validez para este incremento.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para n√∫mero de incre‚Äê
mento 252 √≥ 254

96.0

TRG252_254

DINT

L#0

Incremento para n√∫mero de incremento 252 √≥
254

2868

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de par√°metros
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexi√≥n positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexi√≥n negativa

N√∫mero de incremento 255
N√∫mero de incremento 255
Con el n√∫mero de incremento 255 dispone de otra especificaci√≥n del recorrido.
Las distancias de desconexi√≥n y las distancias de cambio de velocidad se transfieren junto con
el incremento. Al contrario de lo que sucede en otros incrementos, el incremento 255 utiliza los
valores fijados en el DB del canal para la distancia de desconexi√≥n y de la distancia de cambio
de velocidad. Las entradas de los datos m√°quina no tienen validez para este incremento.

Datos utilizados en el DB de canal
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

36.3

TRG255_EN

BOOL

FALSE

1 = Escribir incremento para n√∫mero de incremento
255

100.0

TRG255

DINT

L#0

Incremento para n√∫mero de incremento 255

104.0

CHGDIF255

DINT

L#0

Distancias de cambio de velocidad para n√∫mero de
incremento 255

108.0

CUTDIF255

DINT

L#0

Distancias de desconexi√≥n para n√∫mero de incremen‚Äê
to 255

Interfaz de control y realimentaci√≥n del FM 451
Aplicaci√≥n
En aplicaciones especiales o en un nivel de alarma puede que se necesite un acceso
especialmente r√°pido a se√±ales de realimentaci√≥n y de control. A estos datos se accede
directamente a trav√©s de las √°reas de entradas y salidas del m√≥dulo.
Para coordinar el arranque cada vez que arranca el m√≥dulo (p. ej. tras insertar el m√≥dulo o
despu√©s de una transici√≥n STOP-RUN de la CPU), la instrucci√≥n ABS_CTRL debe llamarse
hasta que se muestre el final del arranque a trav√©s de RETVAL = 0. A continuaci√≥n la
instrucci√≥n ABS_CTRL ya no puede utilizarse.
Nota
No es posible utilizar la instrucci√≥n ABS_CTRL en combinaci√≥n con un acceso de escritura.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2869

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Leer se√±ales de realimentaci√≥n mediante acceso directo
Las direcciones de byte se indican de forma relativa respecto a la direcci√≥n de inicio de las
salidas del canal correspondiente. Los nombres de los par√°metros corresponden a los
nombres del DB de canal.
Direcci√≥n inicial del canal 1 = Direcci√≥n inicial del m√≥dulo
Direcci√≥n inicial del canal 2 = Direcci√≥n inicial del m√≥dulo + 8
Direcci√≥n inicial del canal 3 = Direcci√≥n inicial del m√≥dulo + 16
En AWL se accede a los datos con los comandos PEB (leer 1 byte), PEW (leer 2 bytes) y PED
(leer 4 bytes).
La siguiente tabla muestra la asignaci√≥n de la interfaz de realimentaci√≥n (entradas) del FM 451.
Direc‚Äê
ci√≥n

N√∫mero de bit
7

6

5

4

interno

3

2

1

0

Byte 0

PARA

interno

DATA_ERR

OT_ERR

DIAG

interno

interno

Byte 1

CHGOVER

CUTOFF ZSPEED

SPEED_OUT

0

WAIT_EI

WORKING

ST_ENBLD

POS_RCD

0

0

GO_M

MSR_DONE

SYNC

Byte 2
Byte 3

MODE_OUT
FVAL_DONE

Byte 4

GO_P
ACT_POS

Byte 5
Byte 6
Byte 7

Ejemplo: Valor real de posici√≥n ACT_POS
La direcci√≥n inicial del m√≥dulo es 512.
AWL

Descripci√≥n

L PED 516

//Leer valor real de posici√≥n actual (ACT_POS) del canal 1
//con acceso directo:
//Direcci√≥n inicial del canal + 4

Escribir las se√±ales de control mediante acceso directo
Las direcciones de byte se indican de forma relativa respecto a la direcci√≥n inicial de las
entradas del canal correspondiente. Los nombres de los par√°metros corresponden a los
nombres del DB de canal.
Direcci√≥n inicial del canal 1 = Direcci√≥n inicial del m√≥dulo
Direcci√≥n inicial del canal 2 = Direcci√≥n inicial del m√≥dulo + 8
Direcci√≥n inicial del canal 3 = Direcci√≥n inicial del m√≥dulo + 16
En AWL se accede a los datos con los comandos PAB (escribir 1 byte), PAW (escribir 2 bytes)
y PAD (escribir 4 bytes).

2870

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La siguiente tabla muestra la asignaci√≥n de la interfaz de control (salidas) del FM 451.
Direc‚Äê
ci√≥n

N√∫mero de bit
7

6

5

4

3

2

1

0

Byte 0

0

0

0

0

OT_ERR_A

0

0

0

Byte 1

DRV_EN

SPEED252

0

0

DIR_P

DIR_M

STOP

START

Byte 2

MODE_IN

Byte 3

MODE_TYPE

Byte 4

Reservado

Byte 5
Byte 6
Byte 7

Ejemplo: Se√±ales de inicio del canal 2
La direcci√≥n inicial del m√≥dulo es 512.
AWL

Descripci√≥n

L 2#10001000

//Poner DRV_EN y DIR_P a 1

T PAB 521

//Escribir se√±ales con acceso directo para canal 2:
//Direcci√≥n inicial del m√≥dulo + 8 + 1

V√≠as de transferencia de par√°metros
Se entiende por par√°metros los datos m√°quina y los incrementos que se indican a
continuaci√≥n.
La figura siguiente muestra las v√≠as de transferencia de par√°metros al FM x51.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2871

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
3*3&
RIIOLQH

&38
RQOLQH

0¬µGXORGHSRVLFLRQDPLHQWR

E
6RIWZDUHGH
FRQILJXUDFL¬µQ




'%GH
SDU¬£PHWURV

D
D
E



'%GH
SDU¬£
PHWURV






3URJUDPDGH
XVXDULR




&RQILJ+:

$%6B&75/




3DU¬£PHWURV
'DWRVGH
VLVWHPD 6'%

D

'DWRVGH
VLVWHPD 6'%



1

Guardar los par√°metros en el software de configuraci√≥n.

2

Guardar y compilar la configuraci√≥n hardware.

2a

Cargar configuraci√≥n hardware en la CPU. La CPU ejecuta autom√°ticamente el paso 3.

3

La CPU escribe los par√°metros en el m√≥dulo en parametrizaciones de sistema.

4

Cargar los par√°metros de un canal del m√≥dulo en la programadora con el comando "Cargar sistema de destino en
programadora".

5

Cargar par√°metros del software de configuraci√≥n con el comando "Cargar sistema de destino" en un canal del m√≥dulo.

6

Escribir par√°metros en un canal del m√≥dulo con peticiones del programa de usuario.

7

Leer par√°metros desde un canal del m√≥dulo a trav√©s de peticiones del programa de usuario.

8

Almacenar par√°metros del programa de usuario en el DB Online.

9

Leer par√°metros del DB Online en el programa de usuario.

10

Exportar par√°metros del software de configuraci√≥n al DB Offline.

10a

Cargar DB offline en la CPU.

10b

Exportar par√°metros del software de configuraci√≥n al DB Online.

11

Importar par√°metros del DB Offline en el software de configuraci√≥n.

11a

Cargar par√°metros del DB Online en la programadora.

11b

Importar par√°metros del DB Online en el software de configuraci√≥n.

2872

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Casos de aplicaci√≥n de la transferencia de par√°metros
Caso de aplicaci√≥n

Pasos

Los par√°metros se editan con el software de configuraci√≥n.
A continuaci√≥n, los canales del m√≥dulo s√≥lo pueden para‚Äê
metrizarse de forma autom√°tica en el momento del arran‚Äê
que.

Ejecute los pasos 1, 2 y 2a.

Los par√°metros se modifican durante la puesta en servicio
en el modo de prueba en el software de configuraci√≥n.

Ejecute los pasos 4 y 5.

A continuaci√≥n, los par√°metros modificados durante la
puesta en servicio se tienen que cargar autom√°ticamente
durante el arranque.

Ejecute los pasos 1, 2 y 2a.

Los par√°metros se crean con el software de configuraci√≥n.
Los canales del m√≥dulo s√≥lo pueden parametrizarse con el
programa de usuario a trav√©s de bloques de datos.

Ejecute los pasos 10, 10a y 6 y o 10b y 6.

Desea crear datos de reserva para recetas de forma c√≥mo‚Äê Ejecute los pasos 10 y 10a.
da.
Los par√°metros se crean con el software de configuraci√≥n. Ejecute los pasos 1, 2 y 2a para la para‚Äê
√âstos tienen que estar a disposici√≥n del programa de usua‚Äê metrizaci√≥n autom√°tica.
rio para realizar modificaciones provisionales.
Ejecute los pasos 10, 10a, 9, 8 y 6 para el
acceso por medio del programa de usua‚Äê
rio.
Los par√°metros existentes se modifican exclusivamente
con el programa de usuario.

Ejecute los pasos 7, 9, 8 y 6.

Desea ver los datos modificados por el programa de usuario Ejecute los pasos 11a y 11 o s√≥lo 11b.
con el software de configuraci√≥n.
Los par√°metros modificados por el programa de usuario se Ejecute los pasos 11b u 11a, 11 y, des‚Äê
tienen que cargar autom√°ticamente tambi√©n en el arranque. pu√©s, 1, 2 y 2a.

6.3.6.5

Uso del FM 451 desde el programa de usuario

Inclusi√≥n del FM 451 en un programa de usuario
Para integrar el FM 451 en un programa de usuario, pueden utilizarse instrucciones que le
facilitar√°n en lo posible el manejo de las funciones deseadas:
Las instrucciones ABS_INIT y ABS_CTRL o ABS_CTRL_451 se activan en el programa de
usuario de la CPU. √âstas realizan la comunicaci√≥n entre la CPU y el FM 451.
Si integra la instrucci√≥n ABS_CTRL en el proyecto, el DB de canal se crear√° autom√°ticamente
como DB de instancia en la instrucci√≥n ABS_CTRL.
Si integra la instrucci√≥n ABS_CTRL_451 en el proyecto, entonces deber√° insertar en su
programa como DB de canal un bloque de datos del tipo ABS_CHANTYPE mediante "Bloques
de programa > Agregar bloque".
Todos los datos de par√°metros pertenecientes a un canal del m√≥dulo (datos m√°quina, tablas
de incrementos) se encuentran en el DB de par√°metros del m√≥dulo. Inserte un bloque de datos
del tipo ABS_PARATYPE en el proyecto mediante "Bloques de programa > Agregar bloque".
Adem√°s, para el FM 451 se puede utilizar tambi√©n la instrucci√≥n ABS_DIAG o
ABS_DIAG_451, que permite transferir informaciones de diagn√≥stico al DB de diagn√≥stico.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2873

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si integra la instrucci√≥n ABS_DIAG en el proyecto, el DB de diagn√≥stico se crear√°
autom√°ticamente como DB de instancia en la instrucci√≥n ABS_DIAG.
Si integra la instrucci√≥n ABS_DIAG_451 en el proyecto, entonces deber√° insertar en el
programa como DB de diagn√≥stico un bloque de datos del tipo ABS_DIAGTYPE mediante
"Bloques de programa > Agregar bloque".

Puesta en servicio del m√≥dulo
Incluso sin programa de usuario es posible realizar un primer test del m√≥dulo con el cuadro de
di√°logo "Puesta en servicio". Tenga en cuenta particularmente la advertencia siguiente.
ADVERTENCIA
Se pueden producir da√±os personales y materiales.
Para evitar da√±os personales y materiales observe los puntos siguientes:
‚óè Instale un interruptor de PARADA DE EMERGENCIA en las inmediaciones del equipo.
S√≥lo as√≠ puede garantizarse que en caso de un fallo del software o del equipo sea posible
desconectar la instalaci√≥n de modo seguro.
‚óè Instale finales de carrera por hardware que act√∫en directamente en las etapas de potencia
de todos los accionamientos.
‚óè Aseg√∫rese de que ninguna persona tenga acceso al √°rea de la instalaci√≥n donde hay
piezas en movimiento.
‚óè Si controla y vigila paralelamente el FM 451 desde el programa y desde el cuadro de
di√°logo "Puesta en servicio" pueden producirse conflictos cuyos efectos no est√°n
definidos. Por lo tanto, conmute siempre la CPU al estado STOP cuando trabaje con el
cuadro de di√°logo "Puesta en servicio" o bien desactive su programa.

6.3.6.6

Puesta en servicio del FM 451

6.3.6.7

FM 451: Diagn√≥stico online

Informaci√≥n actual sobre el m√≥dulo
Diagn√≥stico est√°ndar
Indicaci√≥n de errores mediante los diodos de error del FM 451
¬øD√≥nde se indica el error?
Los diodos rojos de error del m√≥dulo indican diferentes estados de error. Los LED se
encienden tambi√©n en caso de errores que aparecen brevemente, por lo menos, durante 3 s.

2874

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En la figura siguiente se muestra la posici√≥n de los diodos de error en el FM 451.
,17)
(;7)

¬øQu√© errores se indican?
La tabla siguiente contiene los tipos de error que se indican mediante los diodos de error.
LED

Significado

Explicaci√≥n

INTF

Error de grupo para
errores internos

Este diodo indica los siguientes estados de error del FM 451:
‚óè una aver√≠a de m√≥dulo;
‚óè un error (de canal) interno;
‚óè El FM 451 no est√° configurado. Configure el m√≥dulo.
Para eliminar el error, ver Clases de error (P√°gina 2882).

EXTF

Error de grupo para
errores externos

Este diodo indica un error (de canal) externo.

Diagn√≥stico espec√≠fico de canal
Disparo de alarmas de diagn√≥stico
Procesamiento de las alarmas
El m√≥dulo de posicionamiento puede activar alarmas de diagn√≥stico. Estas alarmas se
procesan en un OB de alarma. Cuando se dispara una alarma sin que se encuentre cargado
el OB correspondiente, la CPU pasa a STOP.
Para habilitar las alarmas de diagn√≥stico se procede del modo siguiente:
1. Seleccione el m√≥dulo en HWCN.
2. Habilite la alarma de diagn√≥stico en "Edici√≥n > Propiedades del objeto > Par√°metros
b√°sicos".
3. Guardar y compilar la configuraci√≥n.
4. Cargue la configuraci√≥n en la CPU

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2875

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Visi√≥n de conjunto de las alarmas de diagn√≥stico
Los eventos y errores siguientes disparan una alarma de diagn√≥stico:
‚óè Fallo operativo
‚óè Datos m√°quina err√≥neos
‚óè Error de diagn√≥stico
Estos errores se describen con detalle en el apartado "Clases de error (P√°gina 2882)".

Reacci√≥n del m√≥dulo de posicionamiento en caso de error con alarma de diagn√≥stico
‚óè El posicionamiento se interrumpe.
‚óè Con las alarmas de diagn√≥stico siguientes se borra la sincronizaci√≥n:
‚Äì Falta conector frontal, falta tensi√≥n auxiliar externa para la alimentaci√≥n del enc√≥der
‚Äì se ha detectado un error de se√±al cero, error de l√≠nea (se√±ales de enc√≥der de 5 V)
‚Äì se ha rebasado la zona de desplazamiento (se notifica con un error de operador)
‚Äì Ajustar valor real no se puede ejecutar (se notifica con un error de operador)
‚óè Las se√±ales de control START, DIR_P y DIR_M dejan de procesarse excepto en un caso.
Excepci√≥n:
Si se produce un error de operador sigue siendo posible un modo Jog en el sentido de la
zona de trabajo.
‚óè El selector de funci√≥n y las peticiones se siguen procesando.

El m√≥dulo de posicionamiento detecta un fallo ("entrante")
Una alarma de diagn√≥stica es "entrante" cuando por lo menos hay un error en cola de espera.
Si no se han solventado todos los errores, los dem√°s que queden en cola de espera, se
notificar√°n de nuevo como "entrantes".
Secuencia:
1. El m√≥dulo de posicionamiento detecta uno o varios errores y dispara una alarma de
diagn√≥stico. Uno de los LEDs "INTF" o "EXTF" se enciende. El error se registra en el b√∫fer
de diagn√≥stico.
2. El sistema operativo de la CPU solicita el OB de alarma de diagn√≥stico, por ejemplo, OB 82.
3. Es posible evaluar la informaci√≥n de inicio del OB 82.
4. Con el par√°metro OB82_MOD_ADDR se lee qu√© m√≥dulo ha disparado la alarma.
5. Encontrar√° m√°s informaci√≥n si llama la instrucci√≥n ABS_DIAG o ABS_DIAG_451.

El m√≥dulo de posicionamiento detecta el paso al estado libre de fallos ("saliente")
Una alarma s√≥lo es "saliente" cuando se ha eliminado el √∫ltimo error del m√≥dulo.

2876

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Secuencia:
1. El m√≥dulo de posicionamiento detecta que todos los fallos han sido eliminados y dispara
una alarma de diagn√≥stico. El LED "INTF" o "EXTF" est√° apagado. El b√∫fer de diagn√≥stico
no se modifica.
2. El sistema operativo de la CPU solicita el OB de alarma de diagn√≥stico, por ejemplo, OB 82.
3. Con el par√°metro OB82_MOD_ADDR se lee qu√© m√≥dulo ha disparado la alarma.
4. Eval√∫e el bit OB82_MDL_DEFECT.
Si este bit es "0", no hay errores en el m√≥dulo. Su evaluaci√≥n puede finalizar aqu√≠.

Alarmas de diagn√≥stico seg√∫n el estado de la CPU
‚óè En estado STOP de la CPU las alarmas de diagn√≥stico est√°n bloqueadas por el m√≥dulo de
posicionamiento.
‚óè Si con la CPU en estado STOP no se eliminan todos los errores pendientes, el m√≥dulo
vuelve a notificar como "entrantes" los errores todav√≠a no eliminados tras la transici√≥n al
estado RUN.
‚óè Si se eliminan todos los errores pendientes con la CPU en estado STOP, el estado libre de
errores del m√≥dulo no se notificar√° con una alarma de diagn√≥stico tras la transici√≥n al
estado RUN.

Evaluaci√≥n de errores en el programa de usuario
Reacci√≥n a errores en el programa de usuario
En el programa de usuario es posible reaccionar de forma precisa a los errores que aparecen.
Para ello se dispone de los siguientes recursos:
‚óè Los valores de retorno RET_VAL de las instrucciones integradas:
Este valor se vuelve a calcular cada vez que se llama la instrucci√≥n.
RET_VAL = -1 es un indicador de grupo para un error s√≠ncrono en una petici√≥n o en la
comunicaci√≥n con el m√≥dulo.
‚óè A cada petici√≥n le corresponde un bit de error _ERR como indicador de grupo de un error
de la petici√≥n o de uno de sus predecesores en la cadena de peticiones:
El bit de errores se activa para una petici√≥n de escritura y sus peticiones de continuaci√≥n
si el m√≥dulo notifica un error de datos o si se produce un error de comunicaci√≥n.
En el caso de peticiones de lectura, el bit de error se establece para la petici√≥n afectada
cuando se ha producido un error de comunicaci√≥n.
La instrucci√≥n ABS_CTRL o ABS_CTRL_451 activa de nuevo los bits de error despu√©s del
procesamiento de una petici√≥n. No obstante, estos deben ser retomados por el programa
de usuario para una evaluaci√≥n de errores.
‚óè La se√±al de realimentaci√≥n DATA_ERR como indicador de grupo de un error que el m√≥dulo
ha detectado durante una petici√≥n de escritura. La se√±al se vuelve a calcular en la siguiente
petici√≥n de escritura.
‚óè La se√±al de realimentaci√≥n OT_ERR (error de operador) como indicador de grupo de un
error que el m√≥dulo ha detectado al iniciar un recorrido. El bit de error tiene que ser acusado
mediante el OT_ERR_A = 1, una vez solucionada la causa.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2877

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè La se√±al de realimentaci√≥n DIAG se activa cuando el contenido del b√∫fer de diagn√≥stico se
ha modificado. Esta se√±al puede aparecer m√°s tarde que las se√±ales DATA_ERR y
OT_ERR.
‚óè El error de comunicaci√≥n JOB_ERR contiene el c√≥digo de error (P√°gina 2881) si existe un
problema de comunicaci√≥n entre la instrucci√≥n y el m√≥dulo. El valor se recalcula despu√©s
de procesar una petici√≥n y se crea en el DB del canal con la instrucci√≥n ABS_CTRL o
ABS_CTRL_451 o en el DB de diagn√≥stico con la instrucci√≥n ABS_DIAG o ABS_DIAG_451.
‚óè La instrucci√≥n ABS_DIAG o ABS_DIAG_451 para leer el b√∫fer de diagn√≥stico del m√≥dulo.
Aqu√≠ es posible averiguar las causas de error para eventos s√≠ncrono y as√≠ncronos.
‚óè Las alarmas de diagn√≥stico para la respuesta r√°pida a los eventos en el OB de la alarma de
diagn√≥stico (por ejemplo, OB 82).

Evaluaci√≥n de una alarma de diagn√≥stico en el programa de usuario
Las siguientes entradas en los datos locales del OB de la alarma de diagn√≥stico (por ejemplo,
OB 82) son activadas por el m√≥dulo de posicionamiento. Los errores se introducen en el b√∫fer
de diagn√≥stico (clase de error 128 (P√°gina 2889)).
Direcci√≥n

Nombre

Tipo

Comentarios

0.0

OB82_EV_CLASS

BYTE

Clase de evento e identificadores:
B#16#38: evento saliente
B#16#39: evento entrante

1.0

OB82_FLT_ID

BYTE

C√≥digo de error (B#16#42)

2.0

OB82_PRIORITY

BYTE

Clase de prioridad:
B#16#1A en estado operativo RUN
B#16#1C en estado operativo ARRANQUE

3.0

OB82_OB_NUMBR

BYTE

N√∫mero de OB (82)

4.0

OB82_RESERVED_1

BYTE

Reservado

5.0

OB82_IO_FLAG

BYTE

M√≥dulo de entrada: B#16#54

6.0

OB82_MDL_ADDR

INT

Direcci√≥n b√°sica l√≥gica de la tarjeta en la que se
ha producido el error.

8.0

OB82_MDL_DEFECT

BOOL

Fallo del m√≥dulo

8.1

OB82_INT_FAULT

BOOL

Error interno

8.2

OB82_EXT_FAULT

BOOL

Error externo

8.3

OB82_PNT_INFO

BOOL

Error de canal existente

8.4

OB82_EXT_VOLTAGE

BOOL

Falta tensi√≥n auxiliar externa

...

no utilizado

10.3

OB82_WTCH_DOG_FLT

BOOL

Activaci√≥n de la vigilancia de tiempo

...

no utilizado

12.0

OB82_DATE_TIME

DATE_AND_TIME

Fecha y hora en la que se ha solicitado el OB

2878

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

B√∫fer de diagn√≥stico del m√≥dulo
Eventos de diagn√≥stico
El b√∫fer de diagn√≥stico del m√≥dulo contiene como m√°ximo 9 eventos de diagn√≥stico y est√°
organizado como b√∫fer anular.
Un evento de diagn√≥stico se escribe en el b√∫fer cuando se detecta un aviso (de error)
"entrante". Esto puede ser un aviso, un error s√≠ncrono (error de datos, fallo de operador) o
incluso un error as√≠ncrono (error de servicio y error de diagn√≥stico). De una causa de un error
pueden surgir tambi√©n varias entradas como errores consiguientes. Los avisos salientes no
generan entradas en el b√∫fer de diagn√≥stico.
Para cada evento de diagn√≥stico se indican:
‚óè Estado (siempre entrante)
‚óè Error interno
‚óè Error externo
‚óè Clase de error
‚óè N√∫mero de error
‚óè N√∫mero de canal
‚óè N√∫mero de incremento (en errores de la tabla de incrementos)
Cuando se escribe un evento de diagn√≥stico en el b√∫fer de diagn√≥stico, la se√±al de
realimentaci√≥n DIAG = 1 se activa en todos los canales parametrizados.
El b√∫fer de diagn√≥stico puede transferirse como un todo con la instrucci√≥n ABS_DIAG o
ABS_DIAG_451 a un bloque de datos (DB de diagn√≥stico) o visualizarse a trav√©s de un cuadro
de di√°logo de evaluaci√≥n de errores del software de configuraci√≥n. Si se lee el b√∫fer de
diagn√≥stico, el m√≥dulo activa la se√±al de realimentaci√≥n DIAG = 0.
Nota
Si el b√∫fer de diagn√≥stico se lee al mismo tiempo con la instrucci√≥n ABS_DIAG o
ABS_DIAG_451 y el cuadro de di√°logo de evaluaci√≥n de errores, puede ocurrir que uno de los
eventos de diagn√≥stico que se ha producido no sea detectado por el programa.

Datos y estructura del DB de diagn√≥stico
Datos y estructura del DB de diagn√≥stico
Nota
Los datos que no se indican en esta tabla no deben ser modificados.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2879

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra la estructura del DB de diagn√≥stico.
Direcci√≥n

Nombre

Tipo

valor inicial

Comentarios

0.0

MOD_ADDR

INT

0

Direcci√≥n del m√≥dulo

256.0

JOB_ERR

INT

0

N√∫mero de error del error de comunicaci√≥n

258.0

JOBBUSY

BOOL

FALSE

1 = Petici√≥n activa

258.1

DIAGRD_EN

BOOL

FALSE

1 = Leer el b√∫fer de diagn√≥stico necesariamente

260.0

DIAG_CNT

INT

0

N√∫mero de entradas v√°lidas de la lista

262.0

DIAG[1]

STRUCT

Entrada m√°s reciente de datos de diagn√≥stico

272.0

DIAG[2]

STRUCT

Segunda entrada de datos de diagn√≥stico

282.0

DIAG[3]

STRUCT

Tercera entrada de datos de diagn√≥stico

292.0

DIAG[4]

STRUCT

Cuarta entrada de datos de diagn√≥stico

302.0

DIAG[5]

STRUCT

Quinta entrada de datos de diagn√≥stico

312.0

DIAG[6]

STRUCT

Sexta entrada de datos de diagn√≥stico

322.0

DIAG[7]

STRUCT

S√©ptima entrada de datos de diagn√≥stico

332.0

DIAG[8]

STRUCT

Octava entrada de datos de diagn√≥stico

342.0

DIAG[9]

STRUCT

Novena entrada de datos de diagn√≥stico

La tabla siguiente muestra la estructura de una entrada de diagn√≥stico DIAG[n].
Direcci√≥n
+0.0

Nombre
STATE

Tipo
BOOL

valor inicial
FALSE

Comentarios
0 = Evento saliente
1 = Evento entrante

+0.1

INTF

BOOL

FALSE

1 = Error interno

+0.2

EXTF

BOOL

FALSE

1 = Error externo

+2.0

FCL

INT

0

Clase de error:
1: Fallo operativo
2: Error de operador
4: Error de datos
5: Error de datos m√°quina
6: Error de las tablas de incrementos
15: Avisos
128: Error de diagn√≥stico

+4.0

FNO

INT

0

N√∫mero de error

+6.0

CH_NO

INT

0

N√∫mero de canal

+8.0

TRG_NO

INT

0

N√∫mero de incremento

2880

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Lista de los avisos JOB_ERR
Avisos JOB_ERR
JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

80A0

32928

-32608

Acuse negativo al leer del m√≥dulo. M√≥dulo extra√≠do durante la lectura o m√≥‚Äê
dulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el m√≥dulo. M√≥dulo extra√≠do durante la escritura
o m√≥dulo defectuoso.

80A2 1)

32930

-32606

Error de protocolo para capa 2

80A3 1)

32931

-32605

Error de protocolo en User-Interface / User

80A4 1)

32932

-32604

Fallo en la comunicaci√≥n del bus K

80B0

32944

-32592

Registro de datos/Petici√≥n desconocida.

80B1

32945

-32591

Indicaci√≥n de longitud err√≥nea. Par√°metro FM_TYPE del DB de canal para el
m√≥dulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no est√° ocupado.

80B3

32947

-32589

El tipo de m√≥dulo real no es igual al tipo de m√≥dulo previsto.

80C0 1)

32960

-32576

El m√≥dulo a√∫n no tiene preparados los datos que hay que leer.

80C1 1)

32961

-32575

Los datos de una petici√≥n de escritura semejante todav√≠a no se han proce‚Äê
sado en el m√≥dulo.

80C2 1)

32962

-32574

El m√≥dulo procesa de instante el n√∫mero m√°ximo posible de peticiones.

80C3

1)

32963

-32573

Los recursos necesarios (memoria, etc.) est√°n ocupados de momento.

80C4

1)

32964

-32572

Error de comunicaci√≥n

80C5 1)

32965

-32571

La periferia descentralizada no est√° disponible.

80C6 1)

32966

-32570

Cancelaci√≥n de las clases de prioridad (rearranque normal o en segundo
plano)

8522

34082

-31454

DB del canal o DB de par√°metros demasiado corto. No se pueden leer los
datos del DB. (petici√≥n de escritura).

8532

34098

-31438

El n√∫mero de DB del DB de par√°metros es demasiado grande. (petici√≥n de
escritura).

853A

34106

-31430

DB de par√°metros no presente. (petici√≥n de escritura).

8544

34116

-31420

Error en el en√©simo (n > 1) acceso de lectura a un DB tras aparecer un error
(petici√≥n de escritura).

8723

34595

-30941

DB del canal o DB de par√°metros demasiado corto. No se pueden escribir los
datos en el DB. (petici√≥n de lectura).

8730

34608

-30928

DB de par√°metros protegido contra escritura en la CPU No se pueden es‚Äê
cribir los datos en el DB (petici√≥n de lectura)

8732

34610

-30926

El n√∫mero de DB del DB de par√°metros es demasiado grande. (petici√≥n de
lectura).

873A

34618

-30918

DB de par√°metros no presente. (petici√≥n de lectura).

8745

34629

-30907

Error en el en√©simo (n > 1) acceso de escritura a un DB tras aparecer un error
(petici√≥n de lectura).

1)

Los errores 80A2 a 80A4 as√≠ como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de espera sin la
intervenci√≥n del usuario.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2881

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Clases de fallos
Fallo operativo
Clase de error 1: Fallo operativo
Los fallos operativos se detectan de forma as√≠ncrona respecto a un control. Los fallos
operativos hacen que se cancele el posicionamiento a excepci√≥n del n√∫mero de error 9. El
n√∫mero de error 9 hace que se desactive el posicionamiento.
La tabla siguiente muestra los fallos operativos posibles y sus causas.
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

1

Rebase del final de carrera por software Inicio

S√≠

Causa
2

Causa
3

Modificaci√≥n del valor real > ¬Ω zona de parada en el sentido err√≥neo.
S√≠

No hay modificaciones del valor real o modificaci√≥n del valor real en contra del
sentido nominal dentro del tiempo de vigilancia.
S√≠

En "Ajustar valor real a vuelo" se ha rebasado el destino.
S√≠

La zona de destino se ha rebasado despu√©s de la aproximaci√≥n al destino.
S√≠

El eje oscila en el punto de cambio de velocidad.
S√≠

El eje oscila en el punto de desconexi√≥n/punto de inversi√≥n
S√≠

El eje oscila en la zona de destino.

Modificaci√≥n mayor que la mitad de la zona del eje rotativo
Causa

2882

S√≠

Inicio de la zona de destino conectado de forma err√≥nea
Causa

14

El valor real se encuentra fuera de la zona de parada.

Punto de desconexi√≥n conectado de forma err√≥nea
Causa

13

S√≠

Punto de cambio de velocidad conectado de forma err√≥nea
Causa

12

La zona de destino no se ha alcanzado dentro del tiempo de vigilancia.

Rebasar zona de destino
Causa

11

S√≠

Rebasar destino (FM 451)
Causa

10

Rebasar el l√≠mite de la zona de desplazamiento (las coordenadas de los l√≠mites de
la zona de desplazamiento pertenecen a la zona de desplazamiento).

Falta modificaci√≥n del valor real o es demasiado reducida
Causa

9

S√≠

Acoplamiento conjunto
Causa

8

Rebasar el l√≠mite de la zona de desplazamiento (las coordenadas de los l√≠mites de
la zona de desplazamiento pertenecen a la zona de desplazamiento).

Abandonar zona de parada
Causa

7

S√≠

Error en la aproximaci√≥n al destino
Causa

6

El valor real se encuentra fuera de la zona de de trabajo.

Rebase del fin de la zona de desplazamiento
Causa

5

S√≠

Rebase del inicio de la zona de desplazamiento
Causa

4

El valor real se encuentra fuera de la zona de trabajo.

Rebase del final de carrera por software Fin

S√≠

La velocidad/frecuencia es muy alta o existen saltos err√≥neos del valor real.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

15

Modificaci√≥n mayor que la zona del eje rotativo

S√≠

Causa
16

La velocidad/frecuencia es muy alta o existen saltos err√≥neos del valor real.

Incremento para n√∫mero de incremento 252 no transferido (FM 451)
Causa

17

No se ha transferido el incremento.

Incremento para n√∫mero de incremento 252 no aproximable (FM 451)
Causa

18

S√≠
S√≠

La distancia entre la posici√≥n real actual y el incremento especificado es inferior a
la distancia de cambio de velocidad o la distancia de desconexi√≥n.

Incremento err√≥neo para el n√∫mero de incremento 252 (FM 451)
Causa

S√≠

El incremento se encuentra fuera de la zona de trabajo.

Error de operador
Clase de error 2: Error de operador
Los errores de operador se detectan al cambiar las se√±ales de control en el √°rea de datos de
usuario. Los fallos de operador producen una desactivaci√≥n del posicionamiento.
La tabla siguiente muestra los errores de operador posibles y sus causas.
N.¬∫

Significado

Alarma de diag‚Äê
n√≥stico

1

Modo de operaci√≥n no admisible

no

Causa
3

Causa
4

El modo de operaci√≥n seleccionado no est√° permitido.

Petici√≥n de interfaz no permitida
La se√±al seleccionada no est√° permitida en este modo de operaci√≥n.

Par√°metro err√≥neo del modo de operaci√≥n
Causa

no
no

‚óè En el modo de operaci√≥n "Jog" la velocidad especificada es distinta de la
velocidad r√°pida o la velocidad lenta.
‚óè En el modo de operaci√≥n "Modo incremental" el incremento es distinto de 1 a
100 o distinto de 252, 254 y 255.

5

Habilitaci√≥n de inicio no existente
Causa

7

8

10

no

El modo de operaci√≥n "Modo incremental" s√≥lo es posible con un eje ya sincroni‚Äê
zado.

Destino/Parte del trayecto no posicionable
Causa

no

No se han parametrizado datos m√°quina para el eje o se han parametrizado datos
err√≥neos.

El eje no est√° sincronizado.
Causa

no

El destino especificado o calculado se encuentra fuera de los finales de carrera por
software.

Eje no parametrizado
Causa

9

Habilitaci√≥n al iniciar no existente

El destino/La zona de destino se encuentra fuera de la zona de trabajo.
Causa

no

no

La distancia entre la posici√≥n real actual y el destino especificado es inferior a la
distancia de desconexi√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2883

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N.¬∫

Significado

Alarma de diag‚Äê
n√≥stico

17

La b√∫squeda del punto de referencia no es posible

no

Causa
18

Causa
19

no

El incremento no es v√°lido.

La distancia de desconexi√≥n no es mayor que ¬Ω de la zona de destino en el n√∫mero de incremento no
255
Causa

20

Se ha conectado un enc√≥der SSI.

El modo incremental relativo o absoluto no es posible

La distancia de desconexi√≥n para el incremento 255 es inferior a la mitad de la zona
de destino.

Desplazamiento no permitido en el sentido especificado
Causa

no

La distancia del final de carrera por software es insuficiente.

Error de datos
Clase de error 4: Error de datos
Los errores de datos se detectan de forma s√≠ncrona respecto a un control/mando. Los datos de
errores no producen ninguna respuesta al error.
La tabla siguiente muestra los errores de datos posibles y sus causas.
N¬∫

Significado

6

Incremento especificado demasiado grande
Causa

Alarma de diag‚Äê
n√≥stico
no

El valor est√° fuera de ¬±100 m √≥ ¬±1000 m. El recorrido / destino no puede ser
superior a la zona de desplazamiento.
En un eje rotativo la coordenada debe ser ‚â• 0 e inferior al final del eje rotativo.

10

Decalaje de se√±al cero err√≥neo (FM 451)
Causa

no

El decalaje de se√±al cero es mayor que ¬± 100 m o ¬± 1.000 m.
Los finales de carrera por software, tras ajustar el decalaje de se√±al cero, se en‚Äê
cuentran fuera de la zona de desplazamiento (100 m...+100 m o -1.000 m...+1.000
m).
Eje rotativo: El valor del decalaje de se√±al cero es mayor que el final del eje rotativo.

11

Indicaci√≥n del valor real err√≥nea
Causa

no

Eje lineal: La coordenada se encuentra fuera del final de carrera por software actual
(que puede estar desplazado).
Eje rotativo: La coordenada es < 0 o mayor que el final del eje rotativo.

12

Punto de referencia err√≥neo
Causa

no

Eje lineal: La coordenada se encuentra fuera del final de carrera por software actual
(que puede estar desplazado).
Eje rotativo: La coordenada es < 0 o mayor que el final del eje rotativo.

20

Activar datos m√°quina no admisible
Causa

27

Ajuste codificado en bits no permitido
Causa

2884

no

En el m√≥dulo no hay datos m√°quina nuevos sin errores.
no

Los bits no utilizados y no descritos aqu√≠ son distintos a 0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

29

Codificaci√≥n de bits no permitida

no

Causa
34

Causa
36

Los bits no utilizados y no descritos aqu√≠ son distintos a 0.

No es posible cancelar la activaci√≥n del valor real

no

Con un enc√≥der SSI y un eje lineal, tras la ejecuci√≥n del ajuste el valor real de
posici√≥n se encontrar√≠a fuera de la zona de trabajo.

Distancia de cambio de velocidad err√≥nea en n√∫mero de incremento 255
Causa

no

El valor se encuentra fuera del margen num√©rico permitido ¬±100 m o ¬±1000 m.
En un eje rotativo la coordenada debe ser ‚â• 0 e inferior al final del eje rotativo.

37

Distancia de desconexi√≥n err√≥nea en n√∫mero de incremento 255
Causa

no

El valor se encuentra fuera del margen num√©rico permitido ¬±100 m o ¬±1000 m.
La distancia de desconexi√≥n es menor que la distancia de cambio de velocidad.

107

Eje no parametrizado
Causa

108

no

En el eje no hay ning√∫n dato m√°quina o los datos no est√°n activados.

El eje no est√° sincronizado.
Causa

no

Uno de las peticiones "Ajustar valor real" y "Cancelar preselecci√≥n del valor real" se
ha activado a pesar de que el eje no est√° sincronizado.

Error de datos m√°quina
Clase de error 5: Error de datos m√°quina
La alarma de diagn√≥stico s√≥lo se disparar√° con un bloque de datos del sistema (SDB) con
errores. Los errores de datos m√°quina no producen ninguna respuesta al error.
La tabla siguiente muestra errores de datos m√°quina posibles y sus causas.
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

5

Error en el ajuste de la alarma de proceso

S√≠

Causa
6

Causa
7

11

S√≠

El valor del final del eje rotativo se encuentra fuera del rango admitido de 1 a 109 ¬µm
o respectivamente de 1 a 108 ¬µm (seg√∫n sea la resoluci√≥n).
S√≠

El valor del tipo de enc√≥der se encuentra fuera del rango admisible de 1 a 4.

Recorrido err√≥neo por vuelta de enc√≥der
Causa

S√≠

Como tipo de eje no ha indicado ni 0 ni 1.

Tipo de enc√≥der err√≥neo
Causa

S√≠

El valor del sistema de medida se encuentra fuera del rango admisible de 1 a 4 y 6.

Final err√≥neo del eje rotativo
Causa

10

Ha indicado como distancia m√≠nima entre bordes un valor < 0 √≥ > 10 ¬µm.

Tipo de eje err√≥neo
Causa

9

S√≠
9

Sistema de medida err√≥neo
Causa

8

Ha intentado seleccionar una alarma de proceso que el m√≥dulo no soporta.

Distancia m√≠nima entre bordes err√≥nea (FM 451)

S√≠

El valor del recorrido/vuelta del enc√≥der se encuentra fuera del rango admisible de
1 a 109 ¬µm (independientemente de la resoluci√≥n).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2885

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

13

N√∫mero err√≥neo de incrementos por vuelta del enc√≥der(v√©ase el apartado "Incrementos por
vuelta del enc√≥der (P√°gina 2861)")

S√≠

14

N√∫mero err√≥neo de vueltas (v√©ase el apartado ""N√∫mero de vueltas de enc√≥der (P√°gina 2863)") S√≠

15

Velocidad de transferencia err√≥nea
Causa

16

S√≠

Para la velocidad de transferencia se ha indicado un valor fuera del rango admisible
de 0 a 3.

Coordenada del punto de referencia err√≥nea
Causa

S√≠

La coordenada se encuentra fuera del margen de -100 m a +100 m o, respectiva‚Äê
mente, de -1000 m a +1000 m (seg√∫n la resoluci√≥n).
Eje lineal: La coordenada se encuentra fuera de la zona de trabajo.
Eje rotativo: La coordenada es mayor que el final del eje rotativo o < 0.

17

Calibraci√≥n err√≥nea del enc√≥der absoluto
Causa

18

S√≠

Se ha indicado un valor por fuera de los valores admisibles 0, 1, 2 y 3.

Sentido de contaje err√≥neo
Causa

20

Enc√≥der de recorrido SSI: El valor del reajuste del enc√≥der absoluto no se encuen‚Äê
tra dentro del rango del enc√≥der (incrementos por vuelta del enc√≥der √ó cantidad de
vueltas - 1).

Tipo err√≥neo de b√∫squeda del punto de referencia
Causa

19

S√≠

S√≠

Se ha indicado un valor por fuera de los valores admisibles 0 y 1.

Vigilancia de hardware no posible
Causa

S√≠

Se ha puesto en "FALSE" la monitorizaci√≥n de errores de telegrama en el DB de
par√°metros.
En el enc√≥der utilizado, la vigilancia de impulsos err√≥neos no es posible. Desactive
el par√°metro MON_PULSE.

21

Inicio err√≥neo del final de carrera por software
Causa

S√≠

Eje lineal: El inicio del final de carrera por software se encuentra fuera de la zona de
desplazamiento (-100 m...+100 m o 1000 m...+1000 m, dependiendo de la resolu‚Äê
ci√≥n).
Eje lineal: El inicio del final de carrera por software (dado el caso, incluido un de‚Äê
calaje de se√±al cero presente) es menor que -100 m o -1000 m (seg√∫n la resolu‚Äê
ci√≥n).

22

Fin err√≥neo del final de carrera por software
Causa

S√≠

Eje lineal: El fin del final de carrera por software se encuentra fuera de la zona de
desplazamiento (-100 m...+100 m √≥ 1000 m...+1000 m, dependiendo de la resolu‚Äê
ci√≥n) o es menor que el inicio del final de carrera por software.
Eje lineal: El fin del final de carrera por software (dado el caso, incluido un decalaje
de se√±al cero presente) es mayor que +100 m √≥ +1000 m (seg√∫n la resoluci√≥n).

23

Velocidad m√°xima err√≥nea
Causa

24

S√≠

Los datos no mostrados en el DB de par√°metros tienen que ser 0.

Zona de destino err√≥nea
Causa

S√≠

Eje lineal: Zona entre 0 y 100 m √≥ 1000 m, seg√∫n la resoluci√≥n.
Eje rotativo: Zona superior al final del eje rotativo.

25

Tiempo de vigilancia err√≥neo
Causa

2886

S√≠

El valor del tiempo de vigilancia se encuentra fuera del rango admisible de 0 a
100 000 ms.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

26

Zona de parada err√≥nea

S√≠

Causa

Eje lineal: Zona entre 0 y 100 m o 1000 m, seg√∫n la resoluci√≥n.
Eje rotativo: Zona superior al final del eje rotativo.

127

Velocidad de parada err√≥nea
Causa

128

Modo de control err√≥neo
Causa

129
130

S√≠

Como velocidad de inicio no ha indicado ni 0 ni 1.

Distancia de cambio de velocidad err√≥nea en el sentido +
Causa

S√≠

Para el modo de control se ha indicado un valor que est√° fuera del rango admisible
de 1 a 4.

Velocidad de inicio err√≥nea para la b√∫squeda del punto de referencia
Causa

S√≠

El valor de la velocidad de parada se encuentra por fuera del rango admisible de 0
a 100 000 ¬µm/min.

S√≠

Eje lineal: Zona entre 0 y 100 m o 1000 m (seg√∫n la resoluci√≥n).
Eje rotativo: Zona superior al final del eje rotativo e inferior a la mitad de la zona de
destino.

131

Distancia de cambio de velocidad err√≥nea en el sentido Causa

S√≠

Eje lineal: Zona entre 0 y 100 m √≥ 1000 m (seg√∫n la resoluci√≥n).
Eje rotativo: Zona superior al final del eje rotativo e inferior a la mitad de la zona de
destino.

132

Distancia de desconexi√≥n err√≥nea en el sentido +
Causa

133

Distancia de desconexi√≥n err√≥nea en el sentido Causa

200

S√≠

La distancia de desconexi√≥n es mayor que la distancia de cambio de velocidad
negativa, inferior a la mitad de la zona de destino, o se encuentra fuera del margen
admisible entre 0 y 100 m o 1000 m (seg√∫n resoluci√≥n).

Resoluci√≥n err√≥nea
Causa

S√≠

La distancia de desconexi√≥n es mayor que la distancia de cambio de velocidad
positiva, inferior a la mitad de la zona de destino, o se encuentra fuera del margen
admisible entre 0 y 100 m o 1000 m (seg√∫n resoluci√≥n).

S√≠

Ha indicado una resoluci√≥n < 0,1 ¬µm/impulso o >1000 ¬µm/impulso.
Ha indicado un recorrido/vuelta y una cantidad de impulsos/vuelta que dan una
resoluci√≥n < 0,1 √≥ > 1000.

201

El enc√≥der no se adapta a la zona de trabajo / √°rea del eje rotativo
Causa

S√≠

Enc√≥der SSI y eje rotativo: El enc√≥der no cubre exactamente el √°rea del eje rotativo.
Eje lineal: El enc√≥der no cubre ni siquiera la zona de trabajo (finales de carrera por
software incluidos).

Error de las tablas de incrementos
Clase de error 6: Error de las tablas de incrementos
Los errores de tablas de incrementos no producen ninguna respuesta al error.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2887

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los posibles errores de tablas de incrementos y sus causas.
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

6

Incremento especificado demasiado grande en la tabla de incrementos

no

Causa

El valor est√° fuera de ¬±100 m √≥ ¬±1000 m. El recorrido / destino no puede ser superior
a la zona de desplazamiento.
En un eje rotativo, la coordenada debe ser ‚â• 0 e inferior al final del eje rotativo.

Avisos
Clase de error 15: Avisos
Los avisos no producen ninguna respuesta al error.
La tabla siguiente muestra los avisos posibles y sus causas.
N¬∫

Significado

1

Inicio de parametrizaci√≥n
Causa

2

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutaci√≥n es demasiado reducida.
no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutaci√≥n es demasiado reducida.

Distancia insuficiente del principio de la zona de destino
Causa

2888

no

Distancia insuficiente del punto de desconexi√≥n
Causa

15

no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutaci√≥n es demasiado reducida.

Distancia insuficiente del punto de inversi√≥n
Causa

14

no

El m√≥dulo ha procesado sin problemas la parametrizaci√≥n mediante un bloque de
datos del sistema.

Distancia insuficiente del punto de cambio de velocidad
Causa

12

no

El m√≥dulo ha detectado una parametrizaci√≥n mediante un bloque de datos del siste‚Äê
ma.

Final de la parametrizaci√≥n
Causa

11

Alarma de diag‚Äê
n√≥stico

no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutaci√≥n es demasiado reducida.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error de diagn√≥stico
Clase de error 128: Error de diagn√≥stico
La tabla siguiente muestra los errores de diagn√≥stico posibles y sus causas, as√≠ como los
efectos y las soluciones posibles.
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

4

Falta tensi√≥n auxiliar externa

S√≠

Causa

‚óè La tensi√≥n auxiliar externa de 24 V no se ha conectado o ha fallado
‚óè El fusible del m√≥dulo est√° defectuoso.
‚óè Tensi√≥n insuficiente
‚óè Rotura de hilo de masa
‚óè Cortocircuito (p. ej. en el enc√≥der conectado)

Efecto

‚óè El posicionamiento se cancela en todos los canales
‚óè Desactivar las salidas
‚óè Eliminaci√≥n de la sincronizaci√≥n en enc√≥ders incrementales cuando falta la
tensi√≥n auxiliar para la alimentaci√≥n del enc√≥der
‚óè El m√≥dulo de posicionamiento no est√° parametrizado
‚óè Borrado de la habilitaci√≥n de inicio

Soluci√≥n
5

Comprobar que la conexi√≥n de 24 V sea correcta (si la conexi√≥n de 24 V es correcta,
el m√≥dulo est√° averiado).

Falta conector frontal (FM 451)
Causa

El conector frontal del m√≥dulo de posicionamiento no est√° insertado

Efecto

‚óè Falta tensi√≥n auxiliar externa de 24 V

S√≠

‚óè El m√≥dulo no est√° listo para funcionar
Soluci√≥n
51

Enchufar el conector frontal en el m√≥dulo de posicionamiento

La vigilancia de tiempo (watchdog) ha reaccionado
Causa

S√≠

‚óè Interferencias fuertes en el m√≥dulo de posicionamiento
‚óè Error en el m√≥dulo de posicionamiento

Efecto

‚óè El m√≥dulo se resetea
‚óè Desactivar todas las salidas
‚óè Siempre que tras el reseteado del m√≥dulo no se detecte ning√∫n defecto en el
m√≥dulo, este vuelve a estar listo para funcionar.
‚óè El m√≥dulo notifica el transcurso de la vigilancia del tiempo (watchdog) con
"entrante" y "saliente"

Soluci√≥n

‚óè Eliminaci√≥n de interferencias
‚óè Consulte al departamento comercial correspondiente cuando las circunstancias
exactas que han dado lugar al error son de mayor entidad.
‚óè Cambio del m√≥dulo de posicionamiento

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2889

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

144

Rotura de hilo Enc√≥der

S√≠

Causa

‚óè El cable del enc√≥der no est√° enchufado o est√° cortado
‚óè Enc√≥der sin se√±ales de cuadratura
‚óè Asignaci√≥n de pines incorrecta
‚óè Longitud de cable excesiva
‚óè Cortocircuito de las se√±ales del enc√≥der
‚óè Errores de flancos de las se√±ales de enc√≥der
‚óè M√°xima frecuencia de entrada de la entrada del enc√≥der sobrepasada
‚óè Corte de la alimentaci√≥n del enc√≥der

Efecto

‚óè El posicionamiento se interrumpe
‚óè Desactivar las salidas
‚óè Borrado de la sincronizaci√≥n, con enc√≥ders incrementales
‚óè Borrado de la habilitaci√≥n de inicio

Soluci√≥n

‚óè Comprobar el cable del enc√≥der
‚óè Guardar los datos t√©cnicos del enc√≥der
‚óè La vigilancia puede desactivarse de forma provisional con el cuadro de di√°logo
de parametrizaci√≥n bajo la responsabilidad del operador.
‚óè Guardar las especificaciones t√©cnicas del m√≥dulo

145

Error de telegrama Enc√≥der absoluto
Causa

S√≠

El tr√°fico de telegramas entre el m√≥dulo de posicionamiento y el enc√≥der absoluto
(SSI) tiene errores o est√° interrumpido:
‚óè El cable del enc√≥der no est√° enchufado o est√° cortado
‚óè Tipo de enc√≥der err√≥neo
‚óè Enc√≥der mal configurado (enc√≥ders programables)
‚óè Longitud de telegrama mal indicada
‚óè El enc√≥der proporciona valores err√≥neos (enc√≥der defectuoso)
‚óè Interferencia en el cable del sistema de medici√≥n
‚óè Velocidad de transferencia escogida demasiado alta
‚óè Tiempo monoestable del enc√≥der superior a 64 ¬µs

Efecto

‚óè El posicionamiento se interrumpe
‚óè Desactivar las salidas
‚óè Borrado de la habilitaci√≥n de inicio

Soluci√≥n

‚óè Comprobar el cable del enc√≥der
‚óè Comprobar el enc√≥der
‚óè Comprobar el tr√°fico de telegramas entre el enc√≥der y el m√≥dulo de
posicionamiento

2890

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N¬∫

Significado

Alarma de diag‚Äê
n√≥stico

146

Pulsos err√≥neos (enc√≥der incremental)

S√≠

Causa

‚óè Vigilancia del enc√≥der ha detectado pulsos err√≥neos
‚óè El n√∫mero de incrementos por vuelta est√° mal introducido
‚óè Enc√≥der defectuoso: no proporciona el n√∫mero de impulsos indicado
‚óè Marca cero err√≥nea o no presente
‚óè Interferencias en el cable del enc√≥der

Efecto

‚óè El posicionamiento se interrumpe
‚óè Desactivar las salidas
‚óè Borrado de la habilitaci√≥n de inicio

Soluci√≥n

‚óè Indicar correctamente el n√∫mero de incrementos/vuelta del enc√≥der (cuadro de
di√°logo de parametrizaci√≥n)
‚óè Comprobar el enc√≥der y su cable
‚óè Cumplir las normas de apantallamiento y de conexi√≥n a tierra
‚óè La vigilancia puede desactivarse de forma provisional con el cuadro de di√°logo
de parametrizaci√≥n bajo la responsabilidad del operador.

6.3.7

Uso del ET 200S 1PosU

6.3.7.1

Asignaci√≥n de terminales del 1PosU

Reglas de cableado
Al utilizar un enc√≥der de posici√≥n con se√±ales diferenciales de 5 V, los cables a los bornes 9
y 13, los bornes 12 y 16, y, en caso de un enc√≥der incremental, los cables a los bornes 11 y 15
deben estar apantallados y trenzados por pares.
Al utilizar un enc√≥der incremental con se√±ales de 24 V, los cables a los bornes 9, 11 y 12 deben
estar apantallados.
La pantalla tiene que hacer contacto por ambos extremos. Para ello se debe usar el elemento
de contactado de pantallas (ver el anexo de las instrucciones de servicio Sistema de periferia
descentralizada ET 200S (http://support.automation.siemens.com/WW/view/es/1144348)).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2891

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignaci√≥n de terminales
La tabla siguiente muestra la asignaci√≥n de terminales para el 1PosU.
Vista

Asignaci√≥n de termi‚Äê
nales

Conexi√≥n de los interruptores y
Conexi√≥n del enc√≥der de posici√≥n,
del accionamiento: Bornes 1 ‚Ä¶ 8 se√±ales diferenciales de 5 V o se√±a‚Äê
les de 24 V: Bornes 9 ‚Ä¶ 16

3268QLYHUVDO
'LJLWDO
6)






83

Observaciones

'1
326

1: IN0

Final de carrera -

9: A/D

5: IN1

Final de carrera +

13: /A / /D

2: IN2

Leva reductora; se‚Äê 10: DC 24 V
√±al de congelaci√≥n

6: DC 24 V

Alimentaci√≥n para
los interruptores

14: M

3: OUT0

Desplazamiento
negativo o bien
marcha r√°pida

11: B

7: 2L+

Alimentaci√≥n de la
tensi√≥n de carga
para OUT0, OUT1
y OUT2

15: /B

4: OUT1

12: N/C
Desplazamiento
positivo o bien mar‚Äê
cha lenta

8: OUT2

16: /N / /C
Marcha r√°pida/
lenta o bien despla‚Äê
zamiento positivo/
negativo

(6'/$%


$'



 

 

$'



 

 

0



 


 

%





 



 

'&9

%
1&

(QF

Pista A/datos del en‚Äê
c√≥der SSI
Alimentaci√≥n para el
enc√≥der de posici√≥n

Pista B

Pista N/reloj SSI (l√≠‚Äê
nea reloj)

1&

Conexi√≥n de rel√©s y contactores a las salidas digitales
Nota
La conexi√≥n directa de inductancias (p. ej. de rel√©s y contactores) es posible sin cableado
externo. Si los circuitos de salida SIMATIC pueden desactivarse mediante contactos montados
adicionalmente (p. ej. contactos de rel√©), en caso de inductancias deber√° prever unos
dispositivos de protecci√≥n contra sobretensi√≥n adicionales (ver el siguiente ejemplo de la
protecci√≥n contra sobretensi√≥n).

2892

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo de protecci√≥n contra sobretensi√≥n
La figura siguiente muestra un circuito de salida que hace necesarios dispositivos adicionales
de protecci√≥n de sobretensi√≥n. Las bobinas con mando por corriente continua se conectan con
diodos normales o diodos Zener.
6DOLGDGLJLWDOSHM287

6DOLGDGLJLWDOSHM287

&RQWDFWRHQHOFLUFXLWRGHVDOLGD
&RQGLRGR




6.3.7.2

&RQGLRGR=HQHU




Principios b√°sicos del posicionamiento controlado a trav√©s de una marcha r√°pida/lenta

Proceso de posicionamiento
A partir de la posici√≥n de inicio primero se realiza una aproximaci√≥n al punto de destino a una
velocidad mayor (velocidad r√°pida). Al llegar a una distancia predeterminada de la posici√≥n de
destino (punto de cambio de velocidad), se cambia a una velocidad inferior (velocidad lenta).
Poco antes de que el eje llegue al punto de destino, tambi√©n a una distancia predefinida con
respecto al punto de destino, el accionamiento se desconecta (punto de desconexi√≥n).
El accionamiento se controla mediante salidas digitales a marcha r√°pida o lenta y en el sentido
correspondiente.
La figura siguiente muestra los puntos de de conmutaci√≥n y las distancias de cambio de
velocidad. Para simplificar el proceso, el cambio de velocidad se representa a lo largo del
trayecto recorrido.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2893

Control de movimiento

9HORFLGDGUHDO

6.3 Control de movimiento (S7-300, S7-400)

0DUFKDU¬£SLGD

0DUFKDOHQWD
7UD\HFWR

'LVWDQFLDGHFDPELR
GHYHORFLGDG

3RVLFL¬µQLQLFLDO

3XQWRGHFDPELRGHYHORFLGDG

'LIHUHQFLD
GHGHVFRQ
H[L¬µQ

3XQWRGHGHVFRQH[L¬µQ 2EMHWLYR

Definiciones
La tabla siguiente contiene los t√©rminos principales para el posicionamiento controlado a
trav√©s de la marcha r√°pida y la marcha lenta.
T√©rmino

Explicaci√≥n

Zona de trabajo

define la zona que se determina para su tarea, con ayuda de los finales de carrera por hardware.
En un enc√≥der SSI, la zona de trabajo se ve limitada adem√°s por la zona cubierta por el enc√≥der
SSI:
La zona de alcance del enc√≥der debe especificarse en los par√°metros
‚óè Impulsos por vuelta del enc√≥der y
‚óè n√∫mero de vueltas.
Impulsos por vuelta del enc√≥der = impulsos por vuelta √ó vueltas
Zona m√°xima de trabajo:
‚óè Eje lineal m√°x. 0 hasta (√°rea del enc√≥der ‚Äì 1)
‚óè Eje rotativo de 0 a (√°rea del enc√≥der ‚Äì 1)
En los enc√≥ders incrementales, la zona de trabajo est√° limitada a:
‚óè m√°x. 0 hasta 16 777 215 pasos para eje lineal
‚óè 0 hasta fin parametrizado del eje rotativo configurado para eje rotativo

Distancia de cambio de
velocidad

Define la distancia con respecto al punto de destino a la que el accionamiento cambia la velo‚Äê
cidad de velocidad r√°pida a velocidad lenta.

Punto de cambio de velo‚Äê
cidad

Define la posici√≥n en la que el accionamiento cambia la velocidad de velocidad r√°pida a veloci‚Äê
dad lenta.

Distancia de desconexi√≥n define la distancia hasta el punto de destino a la que se desconecta el accionamiento.
Si la distancia de desconexi√≥n ‚â• distancia de cambio de velocidad, no existe punto de cambio de
velocidad. No se cambia la velocidad de velocidad r√°pida a velocidad lenta.
Punto de desconexi√≥n

Define la posici√≥n en la que el accionamiento se desconecta.
El 1PosU indica en este punto el final de la marcha.

2894

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
T√©rmino

Explicaci√≥n

Posici√≥n inicial

Define la posici√≥n del accionamiento dentro de la zona de trabajo desde la que se inicia la
marcha.
Si la posici√≥n inicial se encuentra dentro de la distancia de desconexi√≥n, el accionamiento no se
controla. El 1PosU indica en este punto el final de la marcha.
Si la posici√≥n de inicio se encuentra dentro de la distancia de cambio de velocidad, la marcha
s√≥lo se produce en velocidad lenta.

Objetivo

Define la posici√≥n absoluta o relativa del eje a la que se llega en el posicionamiento.
El punto de destino es la posici√≥n de un eje que debe alcanzarse con una marcha.
En una marcha absoluta se define el punto de destino directamente desde el programa de
control.
En una marcha relativa el punto de destino se calcula a partir de la posici√≥n inicial y del trayecto
predeterminado en el programa de control.
Para determinar la precisi√≥n con la que ha alcanzado el punto de destino debe comparar el valor
real con los datos de la posici√≥n.

Eje lineal

Define el tipo de eje con zona de trabajo limitada.
Est√° limitado por:
‚óè la zona del enc√≥der
‚óè el margen num√©rico representable (0 hasta 16 777 215 pasos)
‚óè Fin de carrera por hardware

Eje rotativo

Define el tipo de eje con zona de trabajo ilimitada.
La posici√≥n del eje se pone de nuevo a 0 tras un giro (final parametrizado del eje rotativo para
enc√≥der incremental o zona del enc√≥der parametrizada para enc√≥der SSI).

Sentido -

Si el accionamiento se mueve en sentido negativo, el valor real indicado se reduce.

Sentido +

Si el accionamiento se mueve en sentido positivo, el valor real indicado aumenta.

6.3.7.3

Funciones del 1PosU

Sinopsis de las funciones
Resumen
El 1PosU proporciona las siguientes funciones para mover los ejes:
‚óè Detener (P√°gina 2901)
‚óè Jog (P√°gina 2902)
‚óè B√∫squeda del punto de referencia (P√°gina 2904)
‚óè Posicionamiento relativo (P√°gina 2910)
‚óè Posicionamiento absoluto (P√°gina 2912)
Adem√°s de los tipos de movimiento, el 1PosU dispone de las siguientes funciones:
‚óè Cancelar procesamiento de JOB (P√°gina 2915)
‚óè Ajustar valor real (P√°gina 2916)
‚óè Mover zona de alcance del enc√≥der (P√°gina 2918)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2895

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè Modificar distancia de desconexi√≥n (P√°gina 2920)
‚óè Modificar distancia de cambio de velocidad (P√°gina 2921)
‚óè Evaluar se√±al de b√∫squeda de referencia (P√°gina 2922)
‚óè Funci√≥n congelar (latch) (P√°gina 2924)
‚óè Ajustar vigilancia de sentido de giro (P√°gina 2925)
‚óè Mostrar valores actuales (P√°gina 2927)
‚óè Detecci√≥n de fallos/Diagn√≥stico (P√°gina 2929)
‚óè Comportamiento en caso de STOP de la CPU/del maestro (P√°gina 2936)

Par√°metro
En los par√°metros se definen una √∫nica vez los valores relacionados con accionamiento, eje
y enc√≥der.

Modo de dosificaci√≥n
Al usar enc√≥ders incrementales es posible utilizar 1PosU para dosificar. El modo de
dosificaci√≥n se ajusta en los par√°metros. En el modo de dosificaci√≥n, el 1PosU s√≥lo eval√∫a la
se√±al de enc√≥der A (/A). El valor real se incrementa con cada flanco ascendente.
En el modo de dosificaci√≥n s√≥lo est√°n disponibles las funciones "Jog" y "Posicionamiento
relativo" para el control de las salidas digitales.
La propia dosificaci√≥n se lanza mediante la funci√≥n "Posicionado relativo". La cantidad de
dosificado se predetermina durante el inicio a trav√©s de la interfaz de control (parte del
trayecto).
Cada vez que se inicia, el valor real se ajusta a 0 y las salidas digitales se controlan en funci√≥n
de la distancia de cambio de velocidad y de desconexi√≥n.

Funcionamiento del 1PosU
La figura siguiente muestra el funcionamiento del 1PosU.

2896

6H¬≥DOHVGHFRQWURO

'2'2'2
)XQFLRQHVGHO
3RV8

6H¬≥DOHVGHUHVSXHVWD

',',',
6H¬≥DOHVGHOVHQVRU

(MHDFFLRQDPLHQWR
6HQVRU

3URJUDPDGHFRQWURO
PHGLDQWH02'(V\-2%V

3DU¬£PHWUR

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Interfaces con el programa de control y con el eje
Para ejecutar la funci√≥n, el 1PosU, como interfaz con el eje, dispone de entradas digitales,
se√±ales de enc√≥der para la conexi√≥n de un enc√≥der y salidas digitales para controlar el
accionamiento.

Inicio de tipos de movimiento (MODEs)
Los tipos de movimiento (MODEs) se controlan y observan desde el programa de control
mediante se√±ales de control y se√±ales de realimentaci√≥n.

Inicio de MODEs
La tabla siguiente muestra la forma en la que se inician los MODE, as√≠ como la respuesta que
puede tener el 1PosU.
Su acci√≥n

Respuesta del 1PosU

Alimente la interfaz de control (P√°gina 2956)
seg√∫n el MODE con los datos necesarios.
Compruebe si el bit de realimentaci√≥n (P√°gi‚Äê
na 2958) es POS_ACK = 0.
Ponga el bit de control START de 0 a 1.

El 1PosU activa el bit de realimentaci√≥n POS_ACK = 1
y POS_DONE = 0.
A continuaci√≥n se detecta que el inicio del 1PosU se ha
reconocido y que en el caso de POS_ERR = 0 se eje‚Äê
cuta el MODE.
En el caso de POS_ERR = 1 el MODE no se ejecuta.

Active el bit de control START de 1 a 0.

El 1PosU activa el bit de realimentaci√≥n POS_ACK = 0.
En las funciones de detenci√≥n, b√∫squeda del punto de
referencia, posicionamiento absoluto y posicionamien‚Äê
to relativo, el 1PosU activa el bit de realimentaci√≥n
POS_DONE = 1 cuando el MODE ha finalizado sin nin‚Äê
g√∫n fallo.
En el caso de POS_ERR = 1 el MODE se finaliza con
un error.

S√≥lo si POS_ACK = 0 puede iniciar un nuevo MODE.
Si se produce un arranque durante un MODEs en marcha, el 1PosU se encarga del nuevo movimiento
y realiza un cambio de sentido en caso necesario.

La siguiente figura muestra la interacci√≥n de las se√±ales de control y realimentaci√≥n al iniciar
el MODEs.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2897

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

67$57
326B$&.
326B'21(

326B(55

Activaci√≥n de otras funciones (JOBs)
El resto de funciones (JOBs) se controla y observa desde el programa de control mediante
se√±ales de control y realimentaci√≥n.

Activaci√≥n de JOBs
La tabla siguiente muestra la forma en que se inician los JOBs, as√≠ como las reacciones que
puede tener el 1PosU.
Su actividad

Reacci√≥n del 1PosU

Suministre los datos necesarios a la interfaz
de control (P√°gina 2956) seg√∫n el JOB.
Compruebe si el bit de realimentaci√≥n (P√°gi‚Äê
na 2958) es JOB_ACK = 0.
Ajuste el bit de control JOB_REQ de 0 a 1.

El 1PosU activa el bit de realimentaci√≥n JOB_ACK = 1.
A continuaci√≥n se detecta que el inicio del 1PosU ha
sido detectado y que en el caso de JOB_ERR = 0 se
ejecuta el JOB.
‚óè En el caso de "Evaluar se√±al de referenciaci√≥n", el
1PosU activa simult√°neamente el bit de
realimentaci√≥n SYNC = 0.
‚óè Para la funci√≥n de congelaci√≥n el 1PosU activa
simult√°neamente el bit de realimentaci√≥n
LATCH_DONE = 0.
‚óè Todos los dem√°s JOBs quedan ejecutados.
En el caso de JOB_ERR = 1, el JOB no se ejecuta.

Ajuste el bit de control JOB_REQ de 1 a 0.

El 1PosU activa el bit de realimentaci√≥n JOB_ACK = 0.
En el caso de "Evaluar se√±al de referenciaci√≥n", el 1Po‚Äê
sU activa el bit de realimentaci√≥n SYNC = 1 tras ejecu‚Äê
tarse la funci√≥n.
En el caso de congelaci√≥n el 1PosU activa el bit de rea‚Äê
limentaci√≥n LATCH_DONE = 1 tras ejecutarse la fun‚Äê
ci√≥n.

S√≥lo si JOB_ACK = 0 podr√° iniciarse otro JOB.

2898

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La siguiente figura muestra la interacci√≥n de las se√±ales de control y realimentaci√≥n al activar
JOBs.
-2%B5(4
-2%B$&.
/$7&+B'21(
R
6<1&
-2%B(55

Eje, accionamiento y enc√≥der
Evaluaci√≥n de las se√±ales del enc√≥der
El 1PosU eval√∫a las se√±ales suministradas por el enc√≥der en funci√≥n del tipo de enc√≥der;
‚óè Enc√≥der SSI:
El 1PosU eval√∫a el valor suministrado por el enc√≥der SSI directamente por pasos y
seguidamente determina el valor real en pasos (valor real = valor del enc√≥der).
El valor real se encuentra dentro del rango del enc√≥der de 0 (n√∫mero de vueltas √ó n√∫mero
de incrementos) ‚Äì 1. En los l√≠mites de la zona de alcance, el 1PosU genera un rebase por
exceso o por defecto del valor real.
‚óè Enc√≥ders incrementales:
El 1PosU eval√∫a cuatro veces los impulsos del enc√≥der y los suma al valor real de forma
espec√≠fica al sentido. Para todos los recorridos especificados en los par√°metros y la interfaz
de control o realimentaci√≥n deber√° tenerse en cuenta esta evaluaci√≥n cu√°druple:
1 impulso del enc√≥der incremental equivale a 4 incrementos del 1PosU.
El valor real se encuentra dentro de la zona de trabajo de 0 ‚Ä¶ 16 777 215 incrementos. En
los l√≠mites de la zona de trabajo el 1PosU genera un rebase por exceso o por defecto del
valor real en la zona de trabajo.
‚óè Enc√≥ders incrementales en modo de dosificaci√≥n:
El 1PosU s√≥lo eval√∫a los flancos ascendentes de la se√±al de enc√≥der A y los suma al valor
real.
El valor real se encuentra dentro de la zona de trabajo entre 0 ‚Ä¶ 16 777 215 incrementos.
En los l√≠mites de la zona de trabajo superior, el 1PosU genera un desbordamiento del valor
real.

Control del accionamiento
Las 3 salidas digitales del 1PosU controlan el accionamiento.
La velocidad se selecciona mediante bit de control SPEED (SPEED = 0 es la marcha lenta;
SPEED = 1 es la marcha r√°pida). La velocidad tambi√©n puede modificarse durante la marcha.
El cambio de sentido (P√°gina 2944) se controla con el par√°metro "Tmin Cambio de sentido".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2899

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El estado de cada una de las salidas puede leerse en la interfaz de realimentaci√≥n
(P√°gina 2958) (DO 0, DO 1 y DO 2).
La funci√≥n de las salidas digitales depende del modo de control:
La figura siguiente muestra los estados de las salidas digitales con el modo de control 0.

9HORFLGDGUHDO

'2
'HVSOD]D
PLHQWR
'2
'HVSOD]D
PLHQWR

9HORFLGDG
U¬£SLGD

'2
9HORFLGDG
U¬£SLGDOHQWD

9HORFLGDGOHQWD
5HFRUULGR
SRVLWLYR







3RVLFL¬µQLQLFLDO

3XQWRGHFDPELRGH
YHORFLGDG

3XQWRGH
GHVFRQH[L¬µQ

3XQWRGHGHVWLQR

9HORFLGDGUHDO

La figura siguiente muestra los estados de las salidas digitales con el modo de control 1.

'2
9HORFLGDGU¬£SLGD




'2
9HORFLGDGOHQWD




9HORFLGDG
U¬£SLGD
9HORFLGDGOHQWD
5HFRUULGR
SRVLWLYR

'2

'HVSOD]DPLHQWR  

 
3RVLFL¬µQLQLFLDO

2900

3XQWRGHFDPELRGH
YHORFLGDG

3XQWRGH
GHVFRQH[L¬µQ

3XQWRGHGHVWLQR

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto de las habilitaciones en funci√≥n del sentido
Descripci√≥n
Los bits de control DIR_M y DIR_P habilitan las salidas digitales en funci√≥n del sentido.
‚óè Con DIR_M = 1 se desplaza en el sentido negativo.
‚óè Con DIR_P = 1 se desplaza en el sentido positivo.

Interrumpir y continuar la marcha
Si, durante la marcha se resetea la habilitaci√≥n relevante dependiente del sentido, el
movimiento del eje se detiene, las 3 salidas digitales se ponen a "0" y la marcha se interrumpe.
Si vuelve a activar la habilitaci√≥n relevante dependiente del sentido, se contin√∫a la marcha.

Detener (MODE 0)
Detener
Si inicia MODE 0, el 1PosU detiene el desplazamiento en curso, las tres salidas digitales se
ponen a "0" y la marcha finaliza (POS_ERR = 0, POS_DONE = 1).
Un marcha finalizada con MODE 0 ya no puede continuarse. Para volver a mover el eje, inicie
un nuevo MODE.

Se√±ales de control
La siguiente tabla muestra los datos relevantes de la funci√≥n "detener" en la interfaz de control
(P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 0.7 ‚Ä¶ 0.4:
Bit

7

6

5

4

0

0

0

0

MODE 0 = Detener

Bit 0: START

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes de la funci√≥n "detener" en la interfaz de
respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2901

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Jog (MODE 1)
JOG
Con "Jog" se controla el accionamiento directamente a trav√©s de los bits de control
(P√°gina 2901)DIR_M o DIR_P en un sentido.
Si inicia MODE 1, el 1PosU mueve el accionamiento con la velocidad predeterminada (bit de
control (P√°gina 2956)SPEED) en el sentido predeterminado (bits de control
(P√°gina 2956)DIR_M o DIR_P).
El accionamiento se detiene activando los bits de control DIR_M = 0 y DIR_P = 0.
Se realiza un cambio de sentido (P√°gina 2944) despu√©s de transcurrido el tiempo Tmin.
El modo Jog tambi√©n puede realizarse en un eje no sincronizado (bit de respuesta SYNC = 0),
si hay un error de enc√≥der existente (bit de respuesta ERR_ENCODER = 1) o si el enc√≥der no
est√° conectado.
La siguiente figura muestra el desarrollo del modo de movimiento "Jog".
START

DIR_P

DIR_M

SPEED

POS_ACK
POS_DONE

POS_ERR

SYNC

Velocidad r√°pida
Velocidad lenta

Recorrido

2902

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de control
La siguiente tabla muestra los datos relevantes para la funci√≥n "Jog" en la interfaz de control
(P√°gina 2956).
Direcci√≥n
Byte 0

Ocupaci√≥n
Bit 0.7 ‚Ä¶ 0.4:
Bit

7

6

5

4

0

0

0

1

MODE 1 = Jog

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha r√°pida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes de la funci√≥n "Jog" en la interfaz de respuesta
(P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

Causas del error para POS_ERR
Las causas de error deben determinarse con el JOB 15 (Mostrar valores actuales
(P√°gina 2927)).
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Jog", con la causa de error
y las posibles soluciones.
N√∫mero de
error.

Causa del error

Soluci√≥n

2

Se indica ERR_2L+

Compruebe la tensi√≥n de carga (2L+) en la ter‚Äê
minal 7.

5

El final de carrera en cuyo sentido
se controla el accionamiento est√°
activo

Revise los enc√≥ders y el cableado, as√≠ como los
par√°metros "DI0 Final de carrera - (P√°gi‚Äê
na 2940)" y "DI1 Final de carrera + (P√°gi‚Äê
na 2940)".

7

Jog: DIR_P = 1 del DIR_M = 1

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2903

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N√∫mero de
error.

Causa del error

Soluci√≥n

13

El sentido de giro del accionamien‚Äê Revise el cableado del accionamiento y el en‚Äê
to y del enc√≥der es diferente
c√≥der, as√≠ como el par√°metro "Inversi√≥n del
sentido de giro (P√°gina 2939)".

15

En el modo de dosificaci√≥n:
DIR_M = 1

B√∫squeda del punto de referencia (MODE 3)
B√∫squeda del punto de referencia (MODE 3)
B√∫squeda del punto de referencia
La b√∫squeda del punto de referencia s√≥lo puede iniciarse en el enc√≥der incremental y con un
accionamiento de dosificaci√≥n no activado.
La b√∫squeda del punto de referencia permite sincronizar el eje a partir de una se√±al de
referencia externa. Como se√±al de b√∫squeda de referencia puede escoger entre 3 entradas
digitales y la se√±al cero (P√°gina 2907).
Las entradas digitales DI0 (final de carrera - ), DI1 (final de carrera + ) y DI2 (leva reductora) se
pueden parametrizar como contacto normalmente cerrado o contacto normalmente abierto.
Alimente la interfaz de control (P√°gina 2956) con la coordenada del punto de referencia e inicie
MODE 3. El 1PosU activa la se√±al de respuesta SYNC = 0 y mueve el accionamiento con la
velocidad predeterminada (bit de control SPEED) hacia el sentido de arranque parametrizado
y busca la se√±al de referencia. A este respecto, el 1PosU realiza autom√°ticamente el cambio
de sentido necesario en los finales de carrera o en la leva de reducci√≥n.
Realice las habilitaciones dependientes del sentido (P√°gina 2901) que sean necesarias
(DIR_M, DIR_P) para que se controle el accionamiento.
Si el 1PosU detecta la se√±al de b√∫squeda de referencia parametrizada, controla el
accionamiento con marcha lenta en el sentido de la b√∫squeda de referencia. √âste se determina
a partir de los par√°metros "Se√±al de b√∫squeda de referencia" y "Sensor punto de referencia".

Se√±al de b√∫squeda
de referencia: Sen‚Äê
sor punto de refe‚Äê
rencia y se√±al cero
Se√±al de b√∫squeda
de referencia: Sen‚Äê
sor de referencia
Se√±al de b√∫squeda
de referencia: se√±al
cero

2904

Sensor de punto
de referencia:
Leva de reducci√≥n
en sentido negati‚Äê
vo

Sensor de punto
de referencia:
Leva de reducci√≥n
en sentido positivo

Sensor de punto
de referencia:
Final de carrera
negativo

Sensor de punto
de referencia:
Final de carrera
positivo

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia -

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia +

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia +

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia -

El sentido de b√∫squeda de referencia no est√° definido. Con la siguiente se√±al
cero se sincroniza el eje.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Tras rebasar la se√±al de b√∫squeda de referencia el eje est√° sincronizado. El 1PosU activa la
se√±al de respuesta SYNC = 1 y asigna la coordenada del punto de referencia al valor real.
La figura siguiente muestra el desarrollo del modo de movimiento "B√∫squeda del punto de
referencia".
67$57

',5B3

',5B0

63(('
326B$&.
326B'21(

326B(55

6<1&

YHORFLGDGU¬£SLGD
YHORFLGDGOHQWD
7UD\HFWR

/HYDUHGXFWRUD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

6H¬≥DOFHUR

2905

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de control
La siguiente tabla muestra los datos relevantes para la funci√≥n "B√∫squeda del punto de
referencia" en la interfaz de control (P√°gina 2956).
Direcci√≥n

Asignaci√≥n

Byte 0

Bit 0.7 ‚Ä¶ 0.4:
Bit

7

6

5

4

0

0

1

1

MODE 3 = B√∫squeda del punto de referencia

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha r√°pida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

Coordenada del punto de referencia:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes de la "B√∫squeda del punto de referencia" en
la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

Causas del error para POS_ERR
Las causas del error deben calcularse con el JOB 15 (Mostrar valores actuales (P√°gina 2927)).
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "B√∫squeda del punto de
referencia", con la causa del error y las posibles soluciones.
N√∫mero de
error

2906

Causa del error

Soluci√≥n

1

MODO no permitido en el modo de dosi‚Äê
ficaci√≥n

2

Se indica ERR_2L+

Compruebe la tensi√≥n de carga (2L+) en
la terminal 7.

3

Se indica ERR_ENCODER

Revise el cableado del enc√≥der.

10

B√∫squeda del punto de referencia: Coor‚Äê
denada del punto de referencia ‚â• Final
del eje rotativo

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N√∫mero de
error

Causa del error

Soluci√≥n

11

No se ha encontrado ninguna se√±al de
b√∫squeda de referencia hasta el final de
carrera o entre los finales de carrera

Revise los interruptores, el enc√≥der y el
cableado.

13

El sentido de giro del accionamiento y del
enc√≥der es diferente

Revise el cableado del accionamiento y el
enc√≥der, as√≠ como el par√°metro "Inver‚Äê
si√≥n del sentido de giro (P√°gina 2939)".

Desarrollo de una b√∫squeda del punto de referencia
Proceso de una b√∫squeda del punto de referencia dependiendo de la parametrizaci√≥n y la posici√≥n de
inicio
Proceso de una b√∫squeda del punto de referencia dependiendo de la parametrizaci√≥n y la
posici√≥n de inicio
En una b√∫squeda del punto de referencia es preciso distinguir diversos casos que dependen
‚óè de la posici√≥n del accionamiento al iniciar una b√∫squeda del punto de referencia,
‚óè del sentido de arranque parametrizado,
‚óè de la se√±al de b√∫squeda de referencia parametrizada y
‚óè del sensor del punto de referencia parametrizado.

Ejemplo 1: B√∫squeda del punto de referencia con leva de reducci√≥n y marca cero
Posici√≥n de inicio y parametrizaci√≥n:
‚óè Posici√≥n de inicio: entre final de carrera negativo y leva de reducci√≥n
‚óè Sentido de arranque: M√°s +
‚óè Se√±al de b√∫squeda de referencia: Sensor punto de referencia y se√±al cero
‚óè Sensor punto de referencia: leva reductora hacia +
La siguiente figura muestra una b√∫squeda del punto de referencia con leva de referencia y
marca cero.
6H¬≥DOFHUR
/5 
9HORFLGDGU¬£SLGD
9HORFLGDGOHQWD

3RVLFL¬µQLQLFLDO

6<1&

/5 /HYDUHGXFWRUD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2907

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La sincronizaci√≥n tambi√©n puede realizarse en la leva de reducci√≥n sin marca cero.
Si la posici√≥n de inicio se encuentra en la leva de reducci√≥n, el 1PosU controla el
accionamiento con marcha lenta directamente en el sentido de la b√∫squeda de referencia.

Ejemplo 2: B√∫squeda del punto de referencia con final de carrera negativo
Posici√≥n de inicio y parametrizaci√≥n:
‚óè Posici√≥n de inicio: entre el final de carrera negativo y el final de carrera positivo
‚óè Sentido de arranque: Negativo
‚óè Se√±al de b√∫squeda de referencia: Sensor punto de referencia
‚óè Sensor punto de referencia: Final de carrera La figura siguiente muestra una b√∫squeda del punto de referencia con final de carrera negativo.
)LQGHFDUUHUD
YHORFLGDGOHQWD

6<1&

3RVLFL¬µQLQLFLDO

YHORFLGDGU¬£SLGD

La sincronizaci√≥n tambi√©n puede realizarse en el final de carrera con la siguiente marca cero.
Si la posici√≥n de inicio se encuentra en el final de carrera, el 1PosU controla el accionamiento
con marcha lenta directamente en el sentido de la b√∫squeda de referencia.

Ejemplo 3: B√∫squeda del punto de referencia con inversi√≥n del sentido en el final de carrera positivo
Posici√≥n de inicio y parametrizaci√≥n:
‚óè Posici√≥n de inicio: entre final de carrera negativo y leva de reducci√≥n
‚óè Sentido de arranque: M√°s +
‚óè Se√±al de b√∫squeda de referencia: Sensor punto de referencia y se√±al cero
‚óè Sensor punto de referencia: leva reductora hacia +
La siguiente figura muestra una b√∫squeda del punto de referencia con inversi√≥n de sentido en
el final de carrera positivo.

2908

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6H¬≥DOFHUR
/5
)LQDOGHFDUUHUD

9HORFLGDGOHQWD

6<1&

3RVLFL¬µQLQLFLDO

YHORFLGDGU¬£SLGD

/5 OHYDUHGXFWRUD

Si la posici√≥n de inicio se encuentra en el final de carrera positivo, el 1PosU controla el
accionamiento con marcha r√°pida directamente en contra del sentido de arranque
parametrizado.

Ejemplo 4: B√∫squeda del punto de referencia s√≥lo con marca cero
Posici√≥n de inicio y parametrizaci√≥n:
‚óè Posici√≥n de inicio: entre el final de carrera negativo y el final de carrera positivo
‚óè Sentido de arranque: Negativo
‚óè Se√±al de b√∫squeda de referencia: Se√±al cero
‚óè Sensor punto de referencia: irrelevante
La figura siguiente muestra una b√∫squeda del punto de referencia s√≥lo con marca cero.
6H¬≥DOFHUR

6<1&
3RVLFL¬µQLQLFLDO

YHORFLGDGU¬£SLGD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2909

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Posicionamiento relativo (MODE 4)
Posicionamiento relativo
Con el "Posicionamiento relativo", el 1PosU controla el accionamiento desde la posici√≥n de
inicio una parte del trayecto predeterminado en un sentido predeterminado.
Alimente la interfaz de control (P√°gina 2956) con la parte del trayecto e inicie el MODE 4 con
la especificaci√≥n de sentido (DIR_M o DIR_P). El 1PosU mueve el accionamiento con la
velocidad predeterminada (bit de control SPEED) en torno a la parte del trayecto. En el punto
de conmutaci√≥n el 1PosU pasa de marcha r√°pida a marcha lenta y, en el punto de
desconexi√≥n, el 1PosU finaliza la marcha.
Si realiza el arranque durante una marcha en curso, el 1PosU ejecuta un cambio de sentido
(P√°gina 2944) necesario una vez transcurrido el tiempo Tmin.
El 1PosU no comprueba la parte del recorrido predeterminada. De esta manera, en el caso de
ejes rotativos puede moverse m√°s de una vuelta.
En el modo de dosificaci√≥n (P√°gina 2895) el "Posicionamiento relativo" s√≥lo es posible en el
sentido positivo. A este respecto, en cada inicio el valor real se establece a 0.
La figura siguiente muestra el desarrollo del modo de movimiento "Posicionamiento relativo".
67$57

',5B3

',5B0

63(('
326B$&.
326B'21(

326B(55

6<1&

YHORFLGDGU¬£SLGD
3XQWRGH
GHVWLQR

YHORFLGDGOHQWD
3RVLFL¬µQLQLFLDO

3XQWRGHFDPELRGHYHORFLGDG

7UD\HFWR

3XQWRGHGHVFRQH[L¬µQ
3DUWHGHOWUD\HFWR

2910

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de control
La siguiente tabla muestra los datos relevantes para el "Posicionamiento relativo" en la interfaz
de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 0.7 ‚Ä¶ 0.4:
Bit

7

6

5

4

0

1

0

0

MODE 4 = Posicionamiento relativo

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha r√°pida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

Parte del trayecto:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ 16 777 215

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para el "Posicionamiento relativo" en la interfaz
de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

Causas del error para POS_ERR
Las causas del error deben calcularse con el dem JOB 15 (Mostrar valores actuales
(P√°gina 2927)).
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Posicionamiento relativo",
con la causa del error y las posibles soluciones.
N√∫mero de
error.

Causa del error

Soluci√≥n

2

Se indica ERR_2L+

Compruebe la tensi√≥n de carga (2L+) en la
terminal 7.

3

Se indica ERR_ENCODER

Revise el cableado del enc√≥der.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2911

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N√∫mero de
error.

Causa del error

Soluci√≥n

5

El final de carrera en cuyo sentido se
controla el accionamiento est√° activo

Revise los enc√≥ders y el cableado, as√≠ como
los par√°metros "DI0 Final de carrera - (P√°‚Äê
gina 2940)" y "DI1 Final de carrera + (P√°gi‚Äê
na 2940)".

7

Posicionamiento relativo:
Inicio con DIR_P = 0 y DIR_M = 0 o
DIR_P = 1 y DIR_M = 1

13

El sentido de giro del accionamiento y
del enc√≥der es diferente

15

En el modo de dosificaci√≥n: DIR_M = 1

Revise el cableado del accionamiento y el
enc√≥der, as√≠ como el par√°metro "Inversi√≥n
del sentido de giro (P√°gina 2939)".

Posicionamiento absoluto (MODE 5)
Posicionamiento absoluto
Con el "Posicionamiento absoluto" el 1PosU mueve el accionamiento hacia destinos
absolutos. Para ello el eje debe estar sincronizado.
El "Posicionamiento absoluto" no es posible en el servicio de dosificaci√≥n activado.
Alimente la interfaz de control (P√°gina 2956) con el destino e inicie el MODE 5 con
lahabilitaci√≥n dependiente del sentido (P√°gina 2901) que sea necesaria (DIR_M, DIR_P). El
1PosU mueve el accionamiento con la velocidad predeterminada (bit de control SPEED) hacia
el destino. En el punto de conmutaci√≥n el 1PosU pasa de marcha r√°pida a marcha lenta y, en
el punto de desconexi√≥n, el 1PosU finaliza la marcha.
Si realiza el arranque durante una marcha en curso, el 1PosU ejecuta un cambio de sentido
(P√°gina 2944) necesario una vez transcurrido el tiempo Tmin.

Eje lineal
El 1PosU determina el sentido en el que se avanza hacia el punto de destino. En el inicio debe
activar la habilitaci√≥n necesaria en funci√≥n del sentido (DIR_M, DIR_P). Tambi√©n puede activar
ambas habilitaciones.

2912

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Eje rotativo
El sentido en el que se avanza hacia el destino se determina mediante la selecci√≥n de la
habilitaci√≥n en funci√≥n del sentido (DIR_M, DIR_P):
Bits de control DIR_P y DIR_M

Sentido

DIR_P = 1

Se avanza al punto de destino en sentido +.

DIR_M = 0
DIR_P = 0

Se avanza al punto de destino en sentido -.

DIR_M = 1
DIR_P = 1

Se llega al punto de destino por el trayecto m√°s corto.
El 1PosU determina el sentido en el que se avanza hacia
el punto de destino. Si el trayecto que debe recorrerse es
m√°s peque√±o que la distancia de desconexi√≥n, no se ini‚Äê
cia ninguna marcha (POS_DONE = 1).

DIR_M = 1

La siguiente figura muestra el desarrollo del modo de movimiento "Posicionamiento absoluto".
67$57

',5B3

',5B0

63(('
326B$&.
326B'21(

326B(55

6<1&

9HORFLGDGU¬£SLGD
9HORFLGDGOHQWD
3RVLFL¬µQLQLFLDO

3XQWRGHFDPELRGHYHORFLGDG

2EMHWLYR 5HFRUULGR

3XQWRGHGHVFRQH[L¬µQ

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2913

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de control
La siguiente tabla muestra los datos relevantes para el "Posicionamiento absoluto" en
la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 0.7 ‚Ä¶ 0.4:
Bit

7

6

5

4

0

1

0

1

MODE 5 = Posicionamiento absoluto

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha r√°pida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

Objetivo:
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para el "Posicionamiento absoluto" en
la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real:
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

Causas del error para POS_ERR
Las causas del error deben calcularse con el JOB 15 (Mostrar valores actuales (P√°gina 2927)).

2914

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Posicionamiento absoluto",
con la causa del error y las posibles soluciones.
N√∫mero de
error.

Causa del error

Soluci√≥n

1

MODO no permitido en el modo de dosifica‚Äê
ci√≥n

2

Se indica ERR_2L+

3

Se indica ERR_ENCODER

Revise el cableado del enc√≥der.

4

El eje no est√° sincronizado (SYNC = 0).

Puede sincronizar el eje:

Compruebe la tensi√≥n de carga (2L
+) en la terminal 7.

‚óè Con b√∫squeda del punto de
referencia
‚óè Evaluar se√±al de b√∫squeda de
referencia
‚óè Activar valor real
5

El final de carrera en cuyo sentido se controla
el accionamiento est√° activo

Revise los enc√≥ders y su cableado,
as√≠ como los par√°metros "DI0 Final
de carrera - (P√°gina 2940)" y "DI1
Final de carrera + (P√°gina 2940)".

7

Inicio con DIR_P = 0 y DIR_M = 0 o bit de
control relevante DIR_P = 0 o DIR_M = 0

8

Destino ‚â• Final del eje rotativo (en enc√≥der
incremental) o
Destino ‚â• Zona de alcance del enc√≥der (en el
caso de enc√≥der SSI)

9

Posicionamiento absoluto cancelado porque
se ha iniciado JOB 9 (s√≥lo en enc√≥ders incre‚Äê
mentales)

13

El sentido de giro del accionamiento y del en‚Äê Revise el cableado del accionamien‚Äê
c√≥der es diferente
to y el enc√≥der, as√≠ como el par√°me‚Äê
tro "Inversi√≥n del sentido de giro (P√°‚Äê
gina 2939)".

Cancelar procesamiento de JOB (JOB 0)
Cancelar procesamiento JOB
Si activa JOB 0, el 1PosU reacciona de la siguiente manera:
‚óè se cancela cualquier proceso JOB 9 "Evaluar se√±al de b√∫squeda de referencia" que est√© en
marcha,
‚óè se cancela cualquier proceso JOB 10 "Funci√≥n de congelaci√≥n" que est√© en marcha,
‚óè activa un JOB_ERR = 0 pendiente.
El JOB 0 puede activarse en cualquier estado del eje.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2915

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
Los MODEs no dependen del JOB 0.

Se√±ales de control
La siguiente tabla muestra los datos relevantes para "Cancelar procesamiento JOB" en
la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

0

0

0

0

JOB 0 = Cancelar procesamiento JOB

Bit 0: JOB_REQ

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para "Cancelar procesamiento JOB" en
la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Ajustar valor real (JOB 1)
Ajustar valor real
La funci√≥n "Ajustar valor real" asigna una nueva coordenada al valor real mostrado. De esta
manera la zona de trabajo se desplaza a otra zona del eje.
El eje se sincroniza en el caso del enc√≥der incremental y si el modo de dosificaci√≥n no est√°
activado.
Alimente la interfaz de control (P√°gina 2956) con la nueva coordenada de valor real y active
JOB 1.
El 1PosU activa la coordenada de valor real predeterminada en el valor real mostrado en
lainterfaz de respuesta (P√°gina 2958) y activa el bit de respuesta SYNC = 1.

2916

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 1 sobre los diferentes MODEs.
MODE

¬øQu√© ocurre?

B√∫squeda del punto de
referencia

Tenga en cuenta que, en el caso del enc√≥der incremental y el modo de do‚Äê
sificaci√≥n no est√° activado durante la evaluaci√≥n de la b√∫squeda del punto de
referencia, el bit de respuesta SYNC = 1 se activa de inmediato.
La b√∫squeda del punto de referencia sigue transcurriendo.

Jog

-

Posicionamiento abso‚Äê
luto

Son posibles las reacciones siguientes:
‚óè Distancia hasta el destino ‚â§ Distancia de desconexi√≥n
El punto de desconexi√≥n se ha alcanzado o sobrepasado; se desconecta
directamente y la marcha finaliza con POS_DONE = 1. En este caso es
posible que se haya sobrepasado el punto de destino.
‚óè Distancia hasta el destino ‚â§ Distancia de cambio de velocidad
El punto de conmutaci√≥n se ha alcanzado o sobrepasado, se reduce
directamente de velocidad r√°pida a velocidad lenta. En este caso el
trayecto recorrido en velocidad lenta es inferior que (distancia de cambio
de velocidad - distancia de desconexi√≥n).
‚óè Distancia hasta el destino > Distancia de cambio de velocidad
El accionamiento se controla a marcha r√°pida aunque antes hubiera
cambiado a marcha lenta.

Posicionamiento relati‚Äê
vo

La parte especificada del trayecto se sigue recorriendo.

Se√±ales de control
La siguiente tabla muestra los datos relevantes para "Ajustar el valor real" en la interfaz de
control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

0

0

0

1

JOB 1 = Ajustar valor real

Bit 0: JOB_REQ
Bytes 5 a 7

Coordenadas del valor real:
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

2917

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para "Ajustar el valor real" en la interfaz de
respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 3: SYNC

Bytes 1 a 3

Valor real:
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì
Byte 4

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Causas del error para JOB_ERR
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Ajustar valor real", con la
causa del error y las posibles soluciones.
N√∫mero de
error.

Significado

Soluci√≥n

23

Se indica ERR_ENCODER

Revise el cableado del enc√≥‚Äê
der.

34

Coordenada del valor real ‚â• Final del eje rotativo (en
enc√≥ders incrementales) o bien Coordenada de va‚Äê
lor real ‚â• Zona del enc√≥der (en enc√≥ders SSI)

Mover zona de alcance del enc√≥der (JOB 2)
Mover zona de alcance del enc√≥der
La funci√≥n "Mover zona de alcance del enc√≥der" s√≥lo se puede ejecutar con enc√≥ders SSI.
La funci√≥n "Mover zona de alcance del enc√≥der" ajusta el valor del enc√≥der de tal modo que
el valor real mostrado corresponde al valor real actual. Para ello la marcha en curso debe haber
finalizado.
Alimente la interfaz de control (P√°gina 2956) con el offset y active el JOB 2.
El offset se determina tal como se indica a continuaci√≥n:
‚óè Offset = valor real mostrado ‚Äì valor real actual
Si aparece un offset negativo, calcule lo siguiente:
‚óè Offset = valor real mostrado ‚Äì valor real actual +
(n√∫mero de vueltas √ó n√∫mero de pasos)
El 1PosU realiza el offset predeterminado y muestra la coordenada actual del valor real en la
interfaz de respuesta (P√°gina 2958).

2918

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
Los MODEs no dependen del JOB 2.

Se√±ales de control
La siguiente tabla muestra los datos relevantes para el "Desplazamiento de la zona del
enc√≥der" en la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

0

0

1

0

JOB 2 = Desplazar zona del enc√≥der

Bit 0: JOB_REQ
Bytes 5 a 7

Offset
(0...zona del enc√≥der)

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para el "Desplazamiento de la zona del
enc√≥der" en la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Bytes 1 a 3

Valor real:

Byte 4

Bit 1: JOB_ERR

‚óè 0 ‚Ä¶ Zona del enc√≥der ‚Äì 1
Bit 0: JOB_ACK

Causas del error para JOB_ERR
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Desplazar zona del enc√≥der",
con la causa del error y las posibles soluciones.
N√∫mero de
error.

Significado

21

JOB no permitido en el caso de enc√≥ders in‚Äê
crementales

23

Se indica ERR_ENCODER

26

JOB 2 "Desplazar zona del enc√≥der" no puede
iniciarse porque hay una marcha en curso

33

en el caso de JOB 2: Offset no en la zona de
alcance del enc√≥der

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Soluci√≥n

Revise el cableado del enc√≥der.

2919

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modificar la distancia de desconexi√≥n (JOB 3)
Modificar distancia de desconexi√≥n
El JOB "Modificar la distancia de desconexi√≥n" adapta el control del accionamiento a
diferentes condiciones de carga y mec√°nicas.
Alimente la interfaz de control (P√°gina 2956) con la nueva distancia de desconexi√≥n y active
JOB 3.
El 1PosU aplica la nueva distancia de desconexi√≥n.
La distancia de desconexi√≥n contin√∫a siendo v√°lida hasta una nueva parametrizaci√≥n
(P√°gina 2936) del 1PosU con par√°metros modificados.

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 3 sobre los diferentes MODEs.
MODE

¬øQu√© ocurre?

B√∫squeda del punto
de referencia

-

JOG
Posicionamiento abso‚Äê Distancia hasta el destino ‚â§ Distancia de desconexi√≥n
luto
El punto de desconexi√≥n se ha alcanzado o sobrepasado; se desconecta
Posicionamiento relati‚Äê directamente y la marcha finaliza con POS_DONE = 1. En este caso es po‚Äê
sible que se haya sobrepasado el punto de destino.
vo

Se√±ales de control
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de desconexi√≥n"
en la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

0

0

1

1

JOB 3 = Modificar distancia de desconexi√≥n

Bit 0: JOB_REQ
Bytes 5 a 7

Distancia de desconexi√≥n:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ 16 777 215

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de desconexi√≥n"
en la interfaz de respuesta (P√°gina 2958).

2920

Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 0: JOB_ACK

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modificar la distancia de cambio de velocidad (JOB 4)
Modificar distancia de cambio de velocidad
La funci√≥n "Modificar la distancia de cambio de velocidad" adapta el control del accionamiento
a diferentes condiciones de carga y mec√°nicas.
Alimente la interfaz de control (P√°gina 2956) con la nueva distancia de cambio de velocidad y
active JOB 4.
El 1PosU aplica la nueva distancia de cambio de velocidad.
La distancia de cambio de velocidad contin√∫a siendo v√°lida hasta una nueva parametrizaci√≥n
(P√°gina 2936) del 1PosU con par√°metros modificados.

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 4 sobre los diferentes MODEs.
MODE

¬øQu√© ocurre?

B√∫squeda del punto
de referencia

-

JOG
Posicionamiento abso‚Äê Son posibles las reacciones siguientes:
luto
‚óè Distancia hasta el punto de destino ‚â§Distancia de cambio de velocidad
Posicionamiento relati‚Äê
Se ha alcanzado o sobrepasado el punto de cambio de velocidad, se
vo
reduce directamente de velocidad r√°pida a velocidad lenta. En este caso
el trayecto recorrido en velocidad lenta es inferior que (distancia de cambio
de velocidad - distancia de desconexi√≥n).
‚óè Distancia hasta el destino >Distancia de cambio de velocidad
El accionamiento se controla a marcha r√°pida aunque antes hubiera
pasado a velocidad lenta.

Se√±ales de control
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de cambio de
velocidad" en la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

0

1

0

0

JOB 4 = Modificar distancia de cambio de velo‚Äê
cidad

Bit 0: JOB_REQ
Bytes 5 a 7

Distancia de cambio de velocidad:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ 16 777 215

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2921

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para "Modificar la distancia de cambio de
velocidad" en la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 0: JOB_ACK

Evaluar se√±al de b√∫squeda de referencia (JOB 9)
Evaluar se√±al de b√∫squeda de referencia
La funci√≥n de "Evaluar se√±al de b√∫squeda de referencia" s√≥lo est√° disponible con enc√≥ders
incrementales y si el modo de dosificaci√≥n no est√° activado.
"Evaluar se√±al de b√∫squeda de referencia" sincroniza el eje a partir de una se√±al externa de
b√∫squeda de referencia durante una marcha en curso en los MODEs "Jog" y "Posicionamiento
relativo". Como se√±al de b√∫squeda de referencia puede escoger entre 3 entradas digitales y
la se√±al cero (P√°gina 2907).
Las entradas digitales DI0 (final de carrera - ), DI1 (final de carrera + ) y DI2 (leva reductora) se
pueden parametrizar como contacto normalmente cerrado o contacto normalmente abierto.
Alimente la interfaz de control (P√°gina 2956) con la coordenada del punto de referencia y active
JOB 9. El 1PosU pone la se√±al de realimentaci√≥n SYNC = 0.
Cuando el 1PosU detecta que se sobrepasa la se√±al parametrizada de b√∫squeda de referencia
en el sentido de b√∫squeda, el eje est√° sincronizado. El 1PosU pone la se√±al de realimentaci√≥n
SYNC = 1 y asigna la coordenada del punto de referencia al valor real.
√âste se determina a partir de los par√°metros "Se√±al de b√∫squeda de referencia" y "Sensor de
punto de referencia".

Se√±al de b√∫squeda
de referencia: Sen‚Äê
sor punto de refe‚Äê
rencia y se√±al cero
Se√±al de b√∫squeda
de referencia: sen‚Äê
sor de referencia
Se√±al de b√∫squeda
de referencia: se√±al
cero

2922

Sensor de punto
de referencia:
Leva de reducci√≥n
en el sentido ne‚Äê
gativo

Sensor de punto
de referencia:
Leva de reducci√≥n
en el sentido posi‚Äê
tivo

Sensor de punto
de referencia:
Final de carrera
negativo

Sensor de punto
de referencia:
Final de carrera
positivo

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia -

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia +

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia +

Sentido de b√∫s‚Äê
queda de referen‚Äê
cia -

El sentido de b√∫squeda de referencia no est√° definido. Con la siguiente se√±al
cero se sincroniza el eje.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Efecto sobre los MODEs
La tabla siguiente muestra los efectos del JOB 9 sobre los diferentes MODEs.
MODE

¬øQu√© ocurre?

B√∫squeda del punto de re‚Äê La coordenada de b√∫squeda de referencia indicada con el JOB 9 es v√°lida
ferencia
JOG

-

Posicionamiento absoluto

Cancelaci√≥n de la marcha con POS_ERR = 1, pues SYNC se ha borrado

Posicionamiento relativo

-

Se√±ales de control
La siguiente tabla muestra los datos relevantes para la "evaluaci√≥n de la se√±al de b√∫squeda
de referencia" en la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

1

0

0

1

JOB 9 = Evaluar se√±al de b√∫squeda de referencia

Bit 0: JOB_REQ
Bytes 5 a 7

Coordenada del punto de referencia:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para "Evaluar la se√±al de b√∫squeda de
referencia" en la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 3: SYNC

Bytes 1 a 3

Valor real:
‚óè Eje lineal: 0 ‚Ä¶ 16 777 215
‚óè Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2923

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas del error para JOB_ERR
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Evaluar se√±al de b√∫squeda
de referencia", con la causa del error y las posibles soluciones.
N√∫mero de
error.

Significado

21

JOB no permitido en enc√≥der SSI o en modo
de dosificaci√≥n

23

Se indica ERR_ENCODER

30

Coordenada del punto de referencia ‚â• Final
del eje rotativo

Soluci√≥n

Revise el cableado del enc√≥der.

Funci√≥n de congelaci√≥n (JOB 10)
Funci√≥n de congelaci√≥n
Con la funci√≥n de congelaci√≥n, el valor real se almacena una vez en un flanco de la entrada
digital DI2. Esta funci√≥n puede utilizarse, por ejemplo, para la captura de bordes o la medici√≥n
longitudinal.
Alimente la interfaz de control (P√°gina 2956) con el flanco deseado y active el JOB 10.
Si el 1PosU detecta el flanco predeterminado en la entrada digital DI2, almacena el valor real
correspondiente, lo muestra como valor de respuesta (P√°gina 2958) y activa el bit de respuesta
LATCH_DONE = 1.
A continuaci√≥n es posible volver a activar la "Funci√≥n de congelaci√≥n".

Funci√≥n de congelaci√≥n y b√∫squeda del punto de referencia o "Evaluar se√±al de b√∫squeda de referencia"
Si el 1PosU realiza la sincronizaci√≥n en el mismo flanco, almacena el valor real antes de
asignar la coordenada del punto de referencia.

Efecto sobre los MODEs
Los MODEs no dependen del JOB 10.

2924

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±ales de control
La siguiente tabla muestra los datos relevantes para la "Funci√≥n de congelaci√≥n" en la interfaz
de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

1

0

1

0

JOB 10 = Funci√≥n de congelaci√≥n

Bit 0: JOB_REQ
Byte 5

Bit 1: Congelaci√≥n con flanco descendente en DI2
Bit 0: Congelaci√≥n con flanco ascendente en DI2

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para la "Funci√≥n de congelaci√≥n" en la interfaz
de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 2: LATCH_DONE
Bit 1: JOB_ERR
Bit 0: JOB_ACK

Bytes 5 a 7

Valor de respuesta: Valor real en el flanco de DI2
‚óè en el caso de enc√≥ders incrementales:
‚Äì

Eje lineal: 0 ‚Ä¶ 16 777 215

‚Äì

Eje rotativo: 0 ‚Ä¶ Final del eje rotativo ‚Äì 1

‚óè con enc√≥ders SSI:
‚Äì

0 ‚Ä¶ Zona del enc√≥der ‚Äì 1

Causas del error para JOB_ERR
La tabla siguiente muestra los n√∫meros relevantes en la "Funci√≥n de congelaci√≥n" con la causa
del error y las posibles soluciones.
N√∫mero de
error.

Significado

Soluci√≥n

23

Se indica ERR_ENCODER

Revise el cableado del enc√≥der.

36

Selecci√≥n de flanco desconocida

Ajustar vigilancia de sentido de giro (JOB 11)
Ajustar vigilancia de sentido de giro
La funci√≥n de "Ajustar vigilancia de sentido de giro" no est√° disponible en el modo de
dosificaci√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2925

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
"Ajustar vigilancia de sentido de giro" adapta la vigilancia de sentido de giro del 1PosU a sus
condiciones de carga y mec√°nicas.
La vigilancia de sentido de giro siempre est√° activada. El 1PosU detecta si el sentido de giro
del accionamiento y del enc√≥der es el mismo. Si no lo es, se aplica una tolerancia hasta la
distancia de trayecto predefinida para la vigilancia de sentido de giro. Si la distancia de trayecto
predefinida se sobrepasa, el 1PosU indica POS_ERR = 1.
Hasta que no se activa el JOB 11, se utiliza como distancia de trayecto para al vigilancia de
sentido de giro la distancia de desconexi√≥n doble resultante de los par√°metros. JOB 3
"Modificar distancia de desconexi√≥n" afecta a la distancia de trayecto para la vigilancia del
sentido de giro.
Alimente la interfaz de control (P√°gina 2956) con la distancia de trayecto y active JOB 11.
El 1PosU aplica la distancia de trayecto predefinida para la vigilancia de sentido de giro.
La distancia de trayecto para el sentido de giro contin√∫a siendo v√°lida hasta una nueva
parametrizaci√≥n (P√°gina 2936) del 1PosU con par√°metros modificados.

Desconectar la vigilancia de sentido de giro
Con una distancia de trayecto 0, la vigilancia de sentido de giro est√° desactivada.

Efecto sobre los MODEs
Los MODEs no dependen del JOB 11.

Se√±ales de control
La siguiente tabla muestra los datos relevantes para el "ajuste de la vigilancia del sentido de
giro" en la interfaz de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

1

0

1

1

JOB 11 = Ajustar vigilancia de sentido de giro

Bit 0: JOB_REQ
Byte 5

0

Byte 6, 7

Distancia de trayecto para vigilancia de sentido de giro:
‚óè 0 ‚Ä¶ 65 535

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para el "Ajuste de la vigilancia del sentido de
giro" en la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

2926

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas del error para JOB_ERR
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n de "Ajuste de la vigilancia del
sentido de giro", con la causa del error y las posibles soluciones.
N√∫mero de
error.

Significado

21

JOB no admisible en el modo de dosificaci√≥n

38

Supervisi√≥n de sentido de giro distancia de trayecto >
65 535

Soluci√≥n

Mostrar valores actuales (JOB 15)
Mostrar valores actuales
Puede visualizar los siguientes valores en la interfaz de realimentaci√≥n en forma de valores de
respuesta:
‚óè Distancia residual
‚óè Velocidad real
‚óè Causas del error para POS_ERR y JOB_ERR
El 1PosU tiene predefinido como valor de respuesta la distancia residual.
Independientemente del valor de respuesta seleccionado, el 1PosU muestra el valor real
correspondiente de forma continua en la interfaz de respuesta.
Alimente la interfaz de control (P√°gina 2956) con el valor de respuesta deseado y active el
JOB 15.
El valor de respuesta seleccionado contin√∫a siendo v√°lida hasta una nueva parametrizaci√≥n
(P√°gina 2936) del 1PosU con par√°metros modificados.

"Mostrar valores actuales" y funci√≥n congelar
Al activar la funci√≥n congelar, el 1PosU activa el valor de realimentaci√≥n = 0 y muestra el valor
real correspondiente al flanco almacenado en la entrada digital DI2.
El JOB 15 no se puede volver a activar hasta que no haya finalizado la funci√≥n de congelaci√≥n.

Distancia residual
El 1PosU calcula la distancia hasta el punto de destino como distancia residual en el MODE
"Posicionamiento absoluto" y "Posicionamiento relativo". El trayecto residual es positivo
siempre que el valor real se encuentre antes del punto de destino. Pasa a ser negativo cuando
se sobrepasa el punto de destino. En los MODEs restantes, la distancia residual es = 0.
El 1PosU indica la distancia residual con signo entre -8 388 608 y 8 388 607 pasos. Los valores
negativos se representan en complemento doble. Si el trayecto residual se encuentra fuera de
estos l√≠mites, se indica el valor l√≠mite correspondiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2927

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Velocidad real
El 1PosU calcula la velocidad real como modificaci√≥n del valor del enc√≥der en pasos de 10 ms.
Indica la velocidad entre 0 y 16 777 215.

Causas del error para POS_ERR y JOB_ERR
El 1PosU muestra las causas del error de POS_ERR y JOB_ERR, as√≠ como el MODE y el JOB
introducidos en lainterfaz de control (P√°gina 2956) .

Efecto sobre los MODEs
Los MODEs no dependen del JOB 15.

Se√±ales de control
La siguiente tabla muestra los datos relevantes para "Mostrar valores actuales" en la interfaz
de control (P√°gina 2956).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4:
Bit

7

6

5

4

1

1

1

1

JOB 15 = Mostrar valores actuales

Bit 0: JOB_REQ
Byte 5

0: Distancia residual
1: Velocidad real
2: Causas del error para POS_ERR y JOB_ERR

Se√±ales de realimentaci√≥n
La siguiente tabla muestra los datos relevantes para la "presentaci√≥n de valores actuales" en
la interfaz de respuesta (P√°gina 2958).
Direcci√≥n

Ocupaci√≥n

Byte 4

Bit 1: JOB_ERR
Bit 0: JOB_ACK

Bytes 5 a 7

En funci√≥n del valor de respuesta seleccionado:
‚óè Para trayecto residual: ‚Äì8 388 608 ‚Ä¶ 8 388 607
‚óè Para velocidad real: 0 ‚Ä¶ 16 777 215
‚óè en el caso de las causas del error para POS_ERR y JOB_ERR

2928

‚Äì

Byte 5: Causas del error (P√°gina 2934) de POS_ERR

‚Äì

Byte 6: Causas del error (P√°gina 2935) de JOB_ERR

‚Äì

Bit 7.3 ‚Ä¶ 7.0: MODE (= Bit 0.7 ‚Ä¶ 0.4 de las se√±ales de control)

‚Äì

Bit 7.7 ‚Ä¶ 7.4: JOB (= Bit 4.7 ‚Ä¶ 4.4 de las se√±ales de control)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas del error para JOB_ERR
La tabla siguiente muestra los n√∫meros relevantes en la funci√≥n "Mostrar valores actuales",
con la causa del error y las posibles soluciones.
N√∫mero de
error.

Significado

35

Mostrar valores actuales: Selecci√≥n desconocida

37

Mostrar valores actuales: El JOB 15 no puede ac‚Äê
tivarse con la funci√≥n congelar en marcha.

Soluci√≥n

Detecci√≥n de errores / Diagn√≥stico
Vista general de los errores con 1PosU
Al utilizar el 1PosU pueden producirse diversos errores. En este caso se distinguen los
siguientes tipos de error:
‚óè Errores de parametrizaci√≥n (P√°gina 2930)
‚óè Fallos externos (P√°gina 2930)
‚óè Errores en el control de MODEs y JOBs (P√°gina 2933)
Los errores de "falta de tensi√≥n de carga 2L+", "cortocircuito alimentaci√≥n del enc√≥der" y
"rotura de hilo/cortocircuito de las se√±ales del enc√≥der" deben acusarse (P√°gina 2933).
Si surgen errores al iniciar MODEs o activar JOBs, aqu√≠ se muestra un resumen:
‚óè Causas de error de POS_ERR (P√°gina 2934)
‚óè Causas de error de JOB_ERR (P√°gina 2935)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2929

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Errores de parametrizaci√≥n
Errores de parametrizaci√≥n
La tabla siguiente indica los errores de parametrizaci√≥n con el 1PosU.
Errores de parametrizaci√≥n

Reacci√≥n del 1PosU

Causas:

‚óè El 1PosU no est√° parametrizado y no puede ejecutar sus
funciones

‚óè El 1PosU no puede identificar como propios los
siguientes par√°metros.

‚óè Generar un diagn√≥stico de canal

‚óè El slot del 1PosU que se ha configurado no coincide
con la configuraci√≥n real.
S√≥lo con enc√≥ders SSI:
‚óè Valor no permitido en el par√°metro "Impulsos por
vuelta del enc√≥der".
‚óè Valor no permitido en el par√°metro "Vueltas".
‚óè Impulsos por vuelta del enc√≥der √ó vueltas es mayor
que 4096 √ó 4096.
S√≥lo en modo de dosificaci√≥n:
‚óè "Diagn√≥stico se√±ales de enc√≥der" activado
‚óè "Inversi√≥n del sentido de giro" activada
Soluci√≥n:
‚óè Revise la configuraci√≥n y la configuraci√≥n real.

Errores externos
Fallos externos
La tabla siguiente indica los fallos externos con el 1PosU.
Tensi√≥n de carga 2L+ no existe

Reacci√≥n del 1PosU

Causas:

‚óè El desplazamiento en curso se detiene; no es posible iniciar
otro desplazamiento:

‚óè Falta tensi√≥n de carga 2L+ o es insuficiente en el
borne 7

‚Äì

Las 3 salidas digitales pasan a 0.

Soluci√≥n:

‚Äì

Bit de respuesta POS_ERR = 1

‚óè Compruebe el cableado. Elimine el cortocircuito que
pueda existir.

‚Äì

Bit de respuesta POS_DONE = 0

‚óè Acuse (P√°gina 2933) el error con el bit de control
EXTF_ACK.
Cortocircuito en alimentaci√≥n del enc√≥der

2930

‚óè Bit de respuesta ERR_2L+ = 1
‚óè Generar un diagn√≥stico de canal
‚óè espera a acuse de error EXTF_ACK
Reacci√≥n del 1PosU

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Causas:
‚óè Cortocircuito en la alimentaci√≥n del enc√≥der dispone
en los bornes 6 y 10
Soluci√≥n:

‚óè Los MODEs en ejecuci√≥n "B√∫squeda del punto de referencia",
"Posicionamiento relativo" y "Posicionamiento absoluto" se
detienen. No es posible volver a iniciar un desplazamiento en
estos MODEs:

‚óè Revise el cableado y elimine el cortocircuito.

‚Äì

Las 3 salidas digitales pasan a 0.

‚óè Acuse (P√°gina 2933) el error con el bit de control
EXTF_ACK.

‚Äì

Bit de respuesta POS_ERR = 1

‚Äì

Bit de respuesta POS_DONE = 0

‚óè Bit de respuesta ERR_ENCODER = 1
‚óè Bit de respuesta SYNC = 0
‚óè Generar un diagn√≥stico de canal
‚óè espera a acuse de error EXTF_ACK
‚óè El MODE "Jog" no se ve afectado por este error.
‚óè El JOB activo "Evaluar se√±al de b√∫squeda de referencia" se
interrumpe.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2931

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Rotura de hilo/cortocircuito se√±ales de enc√≥der

Reacci√≥n del 1PosU

En caso de utilizar un enc√≥der SSI, rige lo siguiente:

‚óè Los MODEs en ejecuci√≥n "Posicionamiento relativo" y
"Posicionamiento absoluto" se detienen. No es posible volver
a iniciar una marcha en estos MODEs.

Requisitos:
‚óè Para la detecci√≥n de errores en las se√±ales del
enc√≥der es preciso habilitar el par√°metro
"Diagn√≥stico de se√±ales de enc√≥der".
Causas:

‚Äì

Las 3 salidas digitales pasan a 0.

‚Äì

Bit de respuesta POS_ERR = 1

‚Äì

Bit de respuesta POS_DONE = 0

‚óè Rotura de hilo o cortocircuito de las se√±ales del
enc√≥der en los bornes 9 y 13 o 12 y 16.

‚óè Bit de respuesta ERR_ENCODER = 1

‚óè Los par√°metros correspondientes al enc√≥der SSI no
concuerdan con el enc√≥der conectado.

‚óè Generar un diagn√≥stico de canal

Soluci√≥n:
‚óè Revise el cableado y elimine el cortocircuito.
‚óè Compare la parametrizaci√≥n con las especificaciones
t√©cnicas del enc√≥der.

‚óè Bit de respuesta SYNC = 0
‚óè espera a acuse de error EXTF_ACK
‚óè El MODE "Jog" no se ve afectado por este error.
‚óè El JOB en marcha "Evaluar se√±al de b√∫squeda de referencia"
se interrumpe.

‚óè Acuse (P√°gina 2933) el error con el bit de control
EXTF_ACK.
Si se utiliza un enc√≥der incremental rige lo siguiente:
Requisitos:
‚óè Para la detecci√≥n de fallos de las se√±ales A, /A y B, /
B con se√±ales diferenciales 5V o de las se√±ales A* y
B* con se√±ales de 24 V, es preciso habilitar el
par√°metro "Diagn√≥stico de se√±ales de enc√≥der".
‚óè Para la detecci√≥n de fallos de las se√±ales N, /N con
se√±ales diferenciales 5 V es preciso habilitar el
par√°metro "Diagn√≥stico de se√±ales de cero". Si se
utiliza un enc√≥der sin marca cero, la detecci√≥n de
fallos se desconecta. Si est√° activado el modo de
dosificaci√≥n no ser√° posible el "Diagn√≥stico de
se√±ales de cero".
Causas:
‚óè S√≥lo para se√±ales diferenciales 5 V:
rotura de hilo o cortocircuito de las se√±ales de
enc√≥der en los bornes 9 y 13 u 11 y 15 √≥ 12 y 16.
‚óè Detectado error de flanco de la se√±al de enc√≥der de
forma que el 1PosU no puede detectar el sentido con
claridad.
Soluci√≥n:
‚óè Revise el cableado y elimine el cortocircuito.
‚óè Acuse (P√°gina 2933) el error con el bit de control
EXTF_ACK.

2932

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error en el control de MODEs y JOBs
Error en el control de MODEs y JOBs
La tabla siguiente muestra los errores en el control de los MODEs y JOBs con el 1PosU.
POS_ERR

Reacci√≥n del 1PosU

Causas:

‚óè El MODE iniciado no se ejecuta.

‚óè Al iniciar un MODEs hay determinados requisitos o
condiciones que no se cumplen.

‚óè La marcha en curso se detiene:
‚Äì

Las 3 salidas digitales pasan a 0.

‚Äì

Bit de respuesta POS_ERR = 1

‚Äì

Bit de respuesta POS_DONE = 0

JOB_ERR

Reacci√≥n del 1PosU

Causas:

‚óè El JOB activado no se ejecuta.

‚óè Al activar un JOBs hay determinados requisitos o
condiciones que no se cumplen.

‚Äì

Bit de respuesta JOB_ERR = 1

Acuse del error EXTF_ACK
Acuse del error EXTF_ACK
Los errores externos (P√°gina 2930) eliminados "Falta de tensi√≥n de carga 2L+", "Cortocircuito
alimentaci√≥n de enc√≥ders" y "Rotura de hilo/cortocircuito de las se√±ales de enc√≥der" deben
acusarse. La siguiente tabla muestra el proceso necesario para ello
Su acci√≥n

Reacci√≥n del 1PosU
‚óè Bit de respuesta ERR_2L+ = 1
y/o
‚óè Bit de respuesta ERR_ENCODER = 1

El programa de control detecta el bit de respuesta activado
ERR_2L+ o ERR_ENCODER.
Ejecute la respuesta al error espec√≠fica de la aplicaci√≥n.
Elimine la causa del error.
Ponga el bit de control (P√°gina 2956)EXTF_ACK de 0 a 1.

El 1PosU activa los bits de respuesta (P√°gina 2958)ERR_2L
+ = 0 y ERR_ENCODER = 0.
Eso le permite saber que el error ha sido eliminado y acusado.
Si ERR_2L+ = 1 y ERR_ENCODER = 1, la causa del error
todav√≠a no se ha eliminado.

Ponga el bit de control (P√°gina 2956)EXTF_ACK de 1 a 0.
Con un acuse de error constante (EXTF_ACK = 1) o una parada de CPU/maestro, el 1PosU indica los errores en cuanto los
detecta y los borra en cuanto se eliminan.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2933

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Causas de error para POS_ERR
Causas del error para POS_ERR
La tabla siguiente muestra las causas de error y las soluciones posibles para POS_ERR.
N√∫mero de error Causa del error

Soluci√≥n

1

MODEs permitidos son:

MODE desconocido o no permitido

‚óè MODE 0
‚óè MODE 1
‚óè MODE 3 (no es posible con enc√≥der SSI o en
modo de dosificaci√≥n)
‚óè MODE 4
‚óè MODE 5 (no es posible en modo de dosificaci√≥n)
2

Se indica ERR_2L+

Compruebe la tensi√≥n de carga (2L+) en terminal 7.

3

Se indica ERR_ENCODER

Revise el cableado del enc√≥der.

4

El eje no est√° sincronizado (SYNC = 0).

Enc√≥der SSI:
‚óè Elimine el error de enc√≥der.
Con enc√≥der incremental y modo de dosificaci√≥n no
activado el eje puede sincronizarse con:
‚óè B√∫squeda del punto de referencia
‚óè Evaluar se√±al de b√∫squeda de referencia
‚óè Ajustar valor real

5

El final de carrera en cuyo sentido se controla el
accionamiento est√° activo

7

Jog: DIR_P = 1 del DIR_M = 1

Revise los enc√≥ders y el cableado, as√≠ como los pa‚Äê
r√°metros "DI0 Final de carrera - (P√°gina 2940)" y "DI1
Final de carrera + (P√°gina 2940)".

Posicionamiento absoluto:
Iniciar con DIR_P = 0 y DIR_M = 0 o bit de control
relevante DIR_P = 0 o DIR_M = 0
Posicionamiento relativo:
Inicio con DIR_P = 0 y DIR_M = 0 o DIR_P = 1 y
DIR_M = 1
8

Posicionamiento absoluto:
Punto de destino ‚â• fin del eje rotativo con enc√≥der
incremental o destino ‚â• zona de alcance del en‚Äê
c√≥der con enc√≥der SSI

9

Posicionamiento absoluto cancelado porque se
ha iniciado JOB 9

10

B√∫squeda del punto de referencia: Coordenada
del punto de referencia ‚â• Final del eje rotativo

11

B√∫squeda del punto de referencia:
No se ha encontrado ninguna se√±al de b√∫squeda
de referencia hasta el final de carrera o entre los
finales de carrera

2934

Revise los interruptores, el enc√≥der y el cableado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N√∫mero de error Causa del error

Soluci√≥n

13

El sentido de giro del accionamiento y del enc√≥der
es diferente

Revise el cableado del accionamiento y el enc√≥der,
as√≠ como el par√°metro "Inversi√≥n del sentido de giro
(P√°gina 2939)".

15

Jog, posicionamiento relativo:
En el modo de dosificaci√≥n DIR_M = 1

Causas de error para JOB_ERR
Causas del error para JOB_ERR
La tabla siguiente muestra las causas de error y las soluciones posibles para POS_ERR.
N√∫mero de error. Significado

Soluci√≥n

21

JOBs permitidos son:

JOB desconocido o no permitido

‚óè JOB 0
‚óè JOB 1
‚óè JOB 2 (s√≥lo es posible con enc√≥der SSI)
‚óè JOB 3
‚óè JOB 4
‚óè JOB 9 (no es posible con enc√≥der SSI o
en modo de dosificaci√≥n (P√°gina 2895))
‚óè JOB 10
‚óè JOB 11 (no es posible en modo de dosificaci√≥n)
‚óè JOB 15
23

Se indica ERR_ENCODER

26

JOB 2 "Desplazar zona del enc√≥der" no puede ini‚Äê
ciarse porque hay una marcha en curso

29

Evaluar se√±al de b√∫squeda de referencia: Coorde‚Äê
nada del punto de referencia ‚â• Final del eje rotativo

34

Ajustar valor real: Coordenadas de valor real ‚â• Zona
de alcance del enc√≥der

35

Mostrar valores actuales: Selecci√≥n desconocida

36

Funci√≥n congelar (latch): Selecci√≥n de flanco desco‚Äê
nocida

37

Mostrar valores actuales: El JOB 15 no puede acti‚Äê
varse con la funci√≥n congelar en marcha.

38

Supervisi√≥n de sentido de giro
distancia de trayecto > 65 535

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Revise el cableado del enc√≥der.

2935

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

STOP de CPU/maestro y estado RESET
Comportamiento en caso de STOP de la CPU/del maestro
La siguiente tabla muestra el comportamiento del 1PosU en STOP de la CPU/del maestro.
Reacci√≥n a STOP de la CPU/del maestro

Reacci√≥n del 1PosU

‚óè por desconexi√≥n (POWER OFF) de la CPU/del
maestro del bus

‚óè La marcha en curso se detiene.

o bien

‚óè Las 3 salidas digitales pasan a 0.

‚óè Bit de respuesta (P√°gina 2958)POS_ERR = 0
‚óè Por desconexi√≥n (POWER OFF) IM 151 / IM 151 FO ‚óè Bit de respuesta (P√°gina 2958)POS_DONE = 1
o bien
‚óè Por fallo en la transmisi√≥n de bus
o bien
‚óè Por cambio de estado operativo de RUN a STOP

Abandono del estado STOP de la CPU/del maestro
La siguiente tabla muestra el comportamiento del 1PosU despu√©s de abandonar el estado
STOP de la CPU/del maestro.
Abandono del estado STOP de la CPU/del maestro

Reacci√≥n del 1PosU

‚óè Por conexi√≥n (POWER ON) de la CPU/del maestro
del bus

‚óè La interfaz de respuesta (P√°gina 2958) del 1PosU permanece
actual.

o bien

‚óè El eje permanece sincronizado y el valor real est√° actualizado.

‚óè Por conexi√≥n (POWER ON) IM 151 / IM 151 FO

‚óè La zona de alcance del enc√≥der que ha sido desplazada
permanece vigente.

o bien
‚óè Despu√©s de un fallo en la transmisi√≥n de bus
o bien
‚óè Tras cambio de estado operativo de STOP a RUN

‚óè La distancia de desconexi√≥n y de cambio de velocidad
modificada as√≠ como la distancia de trayecto para la vigilancia
de sentido de giro permanecen vigentes.
‚óè Un JOB 9 iniciado "Evaluar se√±al de b√∫squeda de referencia
(P√°gina 2922)" y JOB 10 "Funci√≥n de congelaci√≥n
(P√°gina 2924)" permanecen activos.
‚óè El JOB 15Valor de respuesta (P√°gina 2927) seleccionado
est√° actualizado.

2936

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Estado RESET del 1PosU
La siguiente tabla muestra el comportamiento del 1PosU en el estado RESET.
Estado RESET del 1PosU y cambio de par√°metros del
1PosU

Reacci√≥n del 1PosU

‚óè Por la modificaci√≥n de los par√°metros del 1PosU y
por la carga de la parametrizaci√≥n o configuraci√≥n de
la estaci√≥n ET 200S en la CPU/el maestro del bus

‚óè El eje est√° sincronizado y el valor real equivale al valor de
enc√≥der actual.

o bien

‚óè Las distancias de desconexi√≥n y cambio de velocidad se
adoptan de los par√°metros.

‚óè Por conexi√≥n (POWER ON) en el m√≥dulo de potencia
del 1PosU
o bien
‚óè Inserci√≥n del 1PosU bajo tensi√≥n

‚óè La zona de alcance del enc√≥der no ha sido desplazada.

‚óè A la distancia de trayecto para la vigilancia de sentido de giro
se le asigna el valor correspondiente al doble de la distancia
de desconexi√≥n.
‚óè Un JOB 9 iniciado "Evaluar se√±al de b√∫squeda de referencia
(P√°gina 2922)" y JOB 10 "Funci√≥n de congelaci√≥n
(P√°gina 2924)" permanecen activos.
‚óè La distancia residual se indica como valor de respuesta
(P√°gina 2927).

6.3.7.4

Configurar y parametrizar 1PosU

En servicio
Seleccionar interfaz del enc√≥der
Interfaz del enc√≥der
Al preseleccionar la interfaz del enc√≥der se elige el tipo de se√±al con el que se desea controlar
el 1PosU.
Interfaz del enc√≥der

Descripci√≥n

Incremental 5 V (P√°‚Äê El 1PosU recibe las se√±ales de los enc√≥ders incrementales con se√±ales dife‚Äê
gina 2938)
renciales de 5 V.
Incremental 24 V
(P√°gina 2944)

El 1PosU recibe las se√±ales de los enc√≥ders incrementales con se√±ales de 24
V.

SSI absoluto (P√°gi‚Äê
na 2950)

El 1PosU recibe las se√±ales de los enc√≥ders absolutos (SSI).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2937

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Par√°metros en enc√≥ders incrementales con se√±ales diferenciales de 5 V.
Habilitar
Activar el diagn√≥stico de grupo
Diagn√≥stico de grupo
El diagn√≥stico de grupo se activa en la casilla de verificaci√≥n correspondiente.
Un error de enc√≥der ERR_ENCODER, la falta de tensi√≥n de carga ERR_2L+ o un error de
parametrizaci√≥n provocan un diagn√≥stico espec√≠fico de canal con diagn√≥stico de grupo
habilitado.

Activaci√≥n del diagn√≥stico de las se√±ales de enc√≥der
Diagn√≥stico de las se√±ales del enc√≥der
El diagn√≥stico de las se√±ales del enc√≥der se activa en la casilla de verificaci√≥n
correspondiente.
Si se ha habilitado el "Diagn√≥stico de las se√±ales del enc√≥der" las se√±ales en del enc√≥der A, /
A y B, /B se someten a una vigilancia de cortocircuito y rotura de hilo. Si no est√° activado el
modo de dosificaci√≥n se vigila adem√°s la secuencia de se√±ales. Un cambio de flanco
simult√°neo de las se√±ales A y B provoca un error.

Activar diagn√≥stico de se√±ales de marca cero
Diagn√≥stico de se√±ales de marca cero
El diagn√≥stico de las se√±ales de marca cero se activa en la casilla de verificaci√≥n
correspondiente.
Si se ha habilitado el "Diagn√≥stico de se√±ales de marca cero", las se√±ales de marca cero N, /
N se vigilan para ver si presentan cortocircuito o rotura de hilo.

Enc√≥ders y ejes
Activar modo de dosificaci√≥n
Modo de dosificaci√≥n
El modo de dosificaci√≥n se activa en la casilla de verificaci√≥n correspondiente.

2938

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En el modo de dosificaci√≥n (P√°gina 2895) el 1PosU s√≥lo eval√∫a las se√±ales del enc√≥der A y /
A. De esta forma s√≥lo es posible realizar una modificaci√≥n del desplazamiento en sentido
positivo. El valor real se incrementa con cada flanco ascendente.

Activar inversi√≥n del sentido de giro
Inversi√≥n del sentido de giro
La inversi√≥n del sentido de giro activa en la casilla de verificaci√≥n correspondiente.
Con el par√°metro "Inversi√≥n del sentido de giro" es posible adaptar el sentido de giro del
enc√≥der al del accionamiento y al del eje.
En el modo de dosificaci√≥n (P√°gina 2895) no es posible realizar una inversi√≥n del sentido de
giro.

Seleccionar tipo de eje
Tipos de eje
El m√≥dulo de posicionamiento 1PosU puede controlar los siguientes tipos de ejes:
‚óè Eje lineal
El eje lineal es un eje con una zona de desplazamiento f√≠sica limitada.

,QLFLRI¬ØVLFR

)LQI¬ØVLFR

‚óè Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no est√° limitada por topes mec√°nicos.
9DORUP¬£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Definir final del eje rotativo
Final del eje rotativo
Este par√°metro s√≥lo es relevante para el tipo de eje "Eje rotativo".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2939

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El valor "Final del eje rotativo" es el valor m√°ximo te√≥rico que el valor real puede alcanzar. Sin
embargo, el m√°ximo valor te√≥rico nunca se indica porque f√≠sicamente identifica la misma
posici√≥n que el inicio del eje rotativo (0).
La indicaci√≥n salta
‚óè si se rebasa (el fin del eje rotativo ‚Äì 1) a 0
‚óè si se rebasa por 0 al (final del eje rotativo ‚Äì 1)
Rango de valores permitido para el final del eje rotativo: 1 ‚Ä¶ 16 777 215
La entrada "0" provoca un error de parametrizaci√≥n.

Entradas digitales
Seleccionar final de carrera negativo y final de carrera positivo
Efecto del final de carrera por hardware
Las dos entradas digitales DI0 y DI1 son evaluadas por el 1PosU como final de carrera por
hardware:
‚óè DI0 es el de final de carrera - y limita la zona de trabajo en sentido ‚óè DI1 es el de final de carrera + y limita la zona de trabajo en sentido +
Puede parametrizar cada uno de los finales de carrera por hardware individualmente como
contacto normalmente cerrado o contacto normalmente abierto.
Los finales de carrera por hardware se eval√∫an para ejes lineales y para ejes rotativos.
S√≥lo se eval√∫a el final de carrera por hardware correspondiente al sentido en el que se controla
el accionamiento.
As√≠, al alcanzar o sobrepasar un final de carrera por hardware, es posible abandonarlo sin
ninguna indicaci√≥n de fallo simplemente iniciando la marcha en el sentido contrario.
El nivel actual de las entradas digitales, retardado por la velocidad de actualizaci√≥n, est√°
indicado en la interfaz de realimentaci√≥n.
La tabla siguiente muestra la forma en la que los finales de carrera por hardware tienen efecto
sobre los distintos MODEs.
MODE

Efecto del final de carrera por hardware

B√∫squeda del punto de
referencia

En el final de carrera por hardware el 1PosU ejecuta una inversi√≥n de sentido
autom√°tica.

Jog

En el final de carrera por hardware se detiene el movimiento del eje, las 3
salidas digitales pasan a 0 y se notifica el bit de respuesta POS_ERR.

Posicionamiento abso‚Äê
luto
Posicionamiento relativo

2940

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Arrancar en el final de carrera por hardware
La tabla siguiente muestra la reacci√≥n del 1PosU al iniciar un MODE en el final de carrera por
hardware.
Sentido

Reacci√≥n del 1PosU

Arrancar dentro de la zona de trabajo

El 1PosU inicia el MODE predeterminado.

Arrancar fuera de la zona de trabajo

El bit de respuesta POS_ERR = 1 se activa.

Seleccionar leva de reducci√≥n
Efecto de la leva de reducci√≥n
La entrada digital DI2 es evaluada por el 1PosU como leva de reducci√≥n o entrada de
congelaci√≥n:
‚óè Evaluar como leva de reducci√≥n en MODE 3 "B√∫squeda del punto de referencia
(P√°gina 2904)" y JOB 9 "Se√±al de b√∫squeda de referencia (P√°gina 2922)"
‚óè como entrada de congelaci√≥n en JOB 10 "funci√≥n de congelaci√≥n (P√°gina 2924)"
La leva de reducci√≥n puede parametrizarse como contacto normalmente cerrado o contacto
normalmente abierto.

Evaluar b√∫squeda del punto de referencia y se√±al de b√∫squeda de referencia
Seleccionar se√±al de b√∫squeda de referencia
Se√±al de b√∫squeda de referencia
El par√°metro "Se√±al de b√∫squeda de referencia" determina para MODE 3 "B√∫squeda del punto
de referencia (P√°gina 2904)" y JOB 9 "Evaluar se√±al de b√∫squeda de referencia
(P√°gina 2922)" el enc√≥der relevante o la combinaci√≥n de enc√≥der y la marca cero. Opciones
posibles:
‚óè Sensor del punto de referencia y se√±al cero
‚óè Sensor del punto de referencia
‚óè Se√±al cero
El tipo de enc√≥der de referencia se selecciona con el par√°metro "Sensor del punto de
referencia (P√°gina 2942)".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2941

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar el sensor del punto de referencia
Sensor del punto de referencia
El par√°metro "Sensor punto de referencia" determina el interruptor relevante y el sentido de
b√∫squeda de referencia en el que debe sobrepasarse el enc√≥der. Posibilidades de selecci√≥n:
‚óè Leva reductora a ‚óè Leva reductora +
‚óè Final de carrera ‚óè Final de carrera +
Este par√°metro s√≥lo es relevante si en "Se√±al de b√∫squeda de referencia (P√°gina 2941)" ha
seleccionado:
‚óè Sensor del punto de referencia y se√±al cero
o bien
‚óè Sensor del punto de referencia

Seleccionar sentido de arranque
Sentido de arranque:
El par√°metro "Sentido de arranque" determina el sentido de inicio para la MODE 3 "b√∫squeda
del punto de referencia (P√°gina 2904)". Posibilidades de selecci√≥n:
‚óè M√°s (+)
‚óè Menos (-)

2942

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Accionamiento
Seleccionar el modo de control
Modo de control
El par√°metro "Modo de control" define la funci√≥n de las salidas digitales para la activaci√≥n del
accionamiento (P√°gina 2899). Posibilidades de selecci√≥n:
‚óè Modo de control 0:
‚Äì DO0 Desplazamiento negativo
‚Äì DO1 Desplazamiento positivo
‚Äì DO2 Marcha r√°pida/lenta
‚óè Modo de control 1:
‚Äì DO0 Marcha r√°pida
‚Äì DO1 Marcha lenta (en tal caso la marcha r√°pida es 0)
‚Äì DO2 Desplazamiento positivo (1) / Desplazamiento negativo (0)

Introducir distancia de desconexi√≥n
Distancia de desconexi√≥n
La distancia de desconexi√≥n (P√°gina 2893) define la distancia con respecto al destino a la que
el accionamiento decelera la marcha lenta a 0.
Si la distancia de desconexi√≥n ‚â• distancia de cambio de velocidad, no existe punto de cambio
de velocidad. No se reduce la marcha r√°pida a marcha lenta, sino que se ejecuta directamente
la reacci√≥n en el punto de desconexi√≥n.
Rango de valores admisible:
‚óè 0 a 65 535
El JOB 3 (P√°gina 2920) permite modificar la distancia de desconexi√≥n.

Introducir la distancia de cambio de velocidad
Distancia de cambio de velocidad
La distancia de cambio de velocidad (P√°gina 2893) define la distancia con respecto al destino
a la que el accionamiento reduce de marcha r√°pida a marcha lenta.
Rango de valores admisible:
‚óè 0 a 65 535
El JOB 4 (P√°gina 2921) permite modificar la distancia de cambio de velocidad.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2943

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Introducir el tiempo de deceleraci√≥n para el cambio de sentido
Tmin Cambio de sentido
El par√°metro "Tmin Cambio de sentido" determina el tiempo de deceleraci√≥n para el cambio de
sentido. Las salidas digitales se desconectan y a continuaci√≥n se ejecuta el cambio de sentido
con una deceleraci√≥n de Tmin. Tmin se aplica en cada cambio de sentido durante un
desplazamiento.
Tmin no es efectivo al iniciar tras POS_DONE = 1 o POS_ERR = 1.
Rango de valores admisible:
‚óè 0 a 255
El valor que introduzca se multiplica por 10. Introduzca pues Tmin en incrementos de 10 ms
(p. ej: 0 ms, 10 ms o 2550 ms).

Par√°metros en enc√≥ders incrementales con se√±ales de 24 V
Habilitaciones
Activar el diagn√≥stico de grupo
Diagn√≥stico de grupo
El diagn√≥stico de grupo se activa en la casilla de verificaci√≥n correspondiente.
Un error de enc√≥der ERR_ENCODER, la falta de tensi√≥n de carga ERR_2L+ o un error de
parametrizaci√≥n provocan un diagn√≥stico espec√≠fico de canal con diagn√≥stico de grupo
habilitado.

Activaci√≥n del diagn√≥stico de las se√±ales del enc√≥der
Diagn√≥stico de las se√±ales de enc√≥der
El diagn√≥stico de las se√±ales del enc√≥der se activa en la casilla de verificaci√≥n
correspondiente.
Si se habilita el "Diagn√≥stico de las se√±ales del enc√≥der", un cambio de flanco simult√°neo de
las se√±ales A* y B* provoca un error.

2944

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Enc√≥der y ejes
Activar el modo de dosificaci√≥n
Modo de dosificaci√≥n
El modo de dosificaci√≥n se activa en la casilla de verificaci√≥n correspondiente.
En el modo de dosificaci√≥n (P√°gina 2895) el 1PosU eval√∫a s√≥lo la se√±al de enc√≥der A*. De esta
forma s√≥lo es posible realizar una modificaci√≥n del desplazamiento en sentido positivo. El valor
real se incrementa con cada flanco ascendente.

Seleccionar entradas de enc√≥der
Entradas de enc√≥der
En las entradas del enc√≥der es posible conectar diferentes enc√≥ders:
‚óè Salida tipo PNP/sim√©trica
‚óè Salida tipo NPN
Nota
Si se ha seleccionado el ajuste "Salida tipo NPN" en el par√°metro "Entradas del enc√≥der",
es preciso utilizar tambi√©n sensores tipo NPN.

En la lista desplegable seleccione la salida del enc√≥der utilizado para las se√±ales A*, B* y N*.

Activar inversi√≥n del sentido de giro
Inversi√≥n del sentido de giro
La inversi√≥n del sentido de giro activa en la casilla de verificaci√≥n correspondiente.
Con el par√°metro "Inversi√≥n del sentido de giro" es posible adaptar el sentido de giro del
enc√≥der al del accionamiento y al del eje.
En el modo de dosificaci√≥n (P√°gina 2895) no es posible realizar una inversi√≥n del sentido de
giro.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2945

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar tipo de eje
Tipos de eje
El m√≥dulo de posicionamiento 1PosU puede controlar los siguientes tipos de ejes:
‚óè Eje lineal
El eje lineal es un eje con una zona de desplazamiento f√≠sica limitada.

,QLFLRI¬ØVLFR

)LQI¬ØVLFR

‚óè Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no est√° limitada por topes mec√°nicos.
9DORUP¬£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Definir final del eje rotativo
Final del eje rotativo
Este par√°metro s√≥lo es relevante para el tipo de eje "Eje rotativo".
El valor "Final del eje rotativo" es el valor m√°ximo te√≥rico que el valor real puede alcanzar. Sin
embargo, el m√°ximo valor te√≥rico nunca se indica porque f√≠sicamente identifica la misma
posici√≥n que el inicio del eje rotativo (0).
La indicaci√≥n salta
‚óè si se rebasa (el fin del eje rotativo ‚Äì 1) a 0
‚óè si se rebasa por 0 al (final del eje rotativo ‚Äì 1)
Rango de valores permitido para el final del eje rotativo: 1 ‚Ä¶ 16 777 215
La entrada "0" provoca un error de parametrizaci√≥n.

2946

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Entradas digitales
Seleccionar final de carrera negativo y final de carrera positivo
Efecto del final de carrera por hardware
Las dos entradas digitales DI0 y DI1 son evaluadas por el 1PosU como final de carrera por
hardware:
‚óè DI0 es el de final de carrera - y limita la zona de trabajo en sentido ‚óè DI1 es el de final de carrera + y limita la zona de trabajo en sentido +
Puede parametrizar cada uno de los finales de carrera por hardware individualmente como
contacto normalmente cerrado o contacto normalmente abierto.
Los finales de carrera por hardware se eval√∫an para ejes lineales y para ejes rotativos.
S√≥lo se eval√∫a el final de carrera por hardware correspondiente al sentido en el que se controla
el accionamiento.
As√≠, al alcanzar o sobrepasar un final de carrera por hardware, es posible abandonarlo sin
ninguna indicaci√≥n de fallo simplemente iniciando la marcha en el sentido contrario.
El nivel actual de las entradas digitales, retardado por la velocidad de actualizaci√≥n, est√°
indicado en la interfaz de realimentaci√≥n.
La tabla siguiente muestra la forma en la que los finales de carrera por hardware tienen efecto
sobre los distintos MODEs.
MODE

Efecto del final de carrera por hardware

B√∫squeda del punto de
referencia

En el final de carrera por hardware el 1PosU ejecuta una inversi√≥n de sentido
autom√°tica.

Jog

En el final de carrera por hardware se detiene el movimiento del eje, las 3
salidas digitales pasan a 0 y se notifica el bit de respuesta POS_ERR.

Posicionamiento abso‚Äê
luto
Posicionamiento relativo

Arrancar en el final de carrera por hardware
La tabla siguiente muestra la reacci√≥n del 1PosU al iniciar un MODE en el final de carrera por
hardware.
Sentido

Reacci√≥n del 1PosU

Arrancar dentro de la zona de trabajo

El 1PosU inicia el MODE predeterminado.

Arrancar fuera de la zona de trabajo

El bit de respuesta POS_ERR = 1 se activa.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2947

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar leva de reducci√≥n
Efecto de la leva de reducci√≥n
La entrada digital DI2 es evaluada por el 1PosU como leva de reducci√≥n o entrada de
congelaci√≥n:
‚óè Evaluar como leva de reducci√≥n en MODE 3 "B√∫squeda del punto de referencia
(P√°gina 2904)" y JOB 9 "Se√±al de b√∫squeda de referencia (P√°gina 2922)"
‚óè como entrada de congelaci√≥n en JOB 10 "funci√≥n de congelaci√≥n (P√°gina 2924)"
La leva de reducci√≥n puede parametrizarse como contacto normalmente cerrado o contacto
normalmente abierto.

Evaluar b√∫squeda del punto de referencia y se√±al de b√∫squeda de referencia
Seleccionar se√±al de b√∫squeda de referencia
Se√±al de b√∫squeda de referencia
El par√°metro "Se√±al de b√∫squeda de referencia" determina para MODE 3 "B√∫squeda del punto
de referencia (P√°gina 2904)" y JOB 9 "Evaluar se√±al de b√∫squeda de referencia
(P√°gina 2922)" el enc√≥der relevante o la combinaci√≥n de enc√≥der y la marca cero. Opciones
posibles:
‚óè Sensor del punto de referencia y se√±al cero
‚óè Sensor del punto de referencia
‚óè Se√±al cero
El tipo de enc√≥der de referencia se selecciona con el par√°metro "Sensor del punto de
referencia (P√°gina 2948)".

Seleccionar el sensor del punto de referencia
Sensor del punto de referencia
El par√°metro "Sensor punto de referencia" determina el interruptor relevante y el sentido de
b√∫squeda de referencia en el que debe sobrepasarse el enc√≥der. Posibilidades de selecci√≥n:
‚óè Leva reductora a ‚óè Leva reductora +
‚óè Final de carrera ‚óè Final de carrera +

2948

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Este par√°metro s√≥lo es relevante si en "Se√±al de b√∫squeda de referencia (P√°gina 2948)" ha
seleccionado:
‚óè Sensor del punto de referencia y se√±al cero
o bien
‚óè Sensor del punto de referencia

Seleccionar sentido de arranque
Sentido de arranque:
El par√°metro "Sentido de arranque" determina el sentido de inicio para la MODE 3 "b√∫squeda
del punto de referencia (P√°gina 2904)". Posibilidades de selecci√≥n:
‚óè M√°s (+)
‚óè Menos (-)

Accionamiento
Seleccionar el modo de control
Modo de control
El par√°metro "Modo de control" define la funci√≥n de las salidas digitales para la activaci√≥n del
accionamiento (P√°gina 2899). Posibilidades de selecci√≥n:
‚óè Modo de control 0:
‚Äì DO0 Desplazamiento negativo
‚Äì DO1 Desplazamiento positivo
‚Äì DO2 Marcha r√°pida/lenta
‚óè Modo de control 1:
‚Äì DO0 Marcha r√°pida
‚Äì DO1 Marcha lenta (en tal caso la marcha r√°pida es 0)
‚Äì DO2 Desplazamiento positivo (1) / Desplazamiento negativo (0)

Introducir distancia de desconexi√≥n
Distancia de desconexi√≥n
La distancia de desconexi√≥n (P√°gina 2893) define la distancia con respecto al destino a la que
el accionamiento decelera la marcha lenta a 0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2949

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si la distancia de desconexi√≥n ‚â• distancia de cambio de velocidad, no existe punto de cambio
de velocidad. No se reduce la marcha r√°pida a marcha lenta, sino que se ejecuta directamente
la reacci√≥n en el punto de desconexi√≥n.
Rango de valores admisible:
‚óè 0 a 65 535
El JOB 3 (P√°gina 2920) permite modificar la distancia de desconexi√≥n.

Introducir la distancia de cambio de velocidad
Distancia de cambio de velocidad
La distancia de cambio de velocidad (P√°gina 2893) define la distancia con respecto al destino
a la que el accionamiento reduce de marcha r√°pida a marcha lenta.
Rango de valores admisible:
‚óè 0 a 65 535
El JOB 4 (P√°gina 2921) permite modificar la distancia de cambio de velocidad.

Introducir el tiempo de deceleraci√≥n para el cambio de sentido
Tmin Cambio de sentido
El par√°metro "Tmin Cambio de sentido" determina el tiempo de deceleraci√≥n para el cambio de
sentido. Las salidas digitales se desconectan y a continuaci√≥n se ejecuta el cambio de sentido
con una deceleraci√≥n de Tmin. Tmin se aplica en cada cambio de sentido durante un
desplazamiento.
Tmin no es efectivo al iniciar tras POS_DONE = 1 o POS_ERR = 1.
Rango de valores admisible:
‚óè 0 a 255
El valor que introduzca se multiplica por 10. Introduzca pues Tmin en incrementos de 10 ms
(p. ej: 0 ms, 10 ms o 2550 ms).

Par√°metros en enc√≥ders SSI
Habilitaciones
Activar el diagn√≥stico de grupo
Diagn√≥stico de grupo
El diagn√≥stico de grupo se activa en la casilla de verificaci√≥n correspondiente.

2950

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Un error de enc√≥der ERR_ENCODER, la falta de tensi√≥n de carga ERR_2L+ o un error de
parametrizaci√≥n provocan un diagn√≥stico espec√≠fico de canal con diagn√≥stico de grupo
habilitado.

Activaci√≥n del diagn√≥stico de las se√±ales del enc√≥der
Diagn√≥stico de las se√±ales de enc√≥der
El diagn√≥stico de las se√±ales del enc√≥der se activa en la casilla de verificaci√≥n
correspondiente.
Si se ha habilitado el "Diagn√≥stico de se√±ales" de marca cero, las se√±ales de marca cero D, /
D se vigilan para ver si presentan cortocircuito o rotura de hilo. Se controla adem√°s el
telegrama (bit de inicio y bit de parada)

Enc√≥der y ejes
Seleccionar tipo de enc√≥der
Tipo de enc√≥der
Seleccione el enc√≥der absoluto utilizado en la lista desplegable:
‚óè Enc√≥der monovuelta (SSI-13 bits)
‚óè Enc√≥der multivuelta (SSI-25 bits)

Seleccionar velocidad de transferencia
Velocidad de transferencia
Con el par√°metro "Velocidad de transferencia" se define la velocidad de la transferencia de
datos del enc√≥der SSI al m√≥dulo de posicionamiento.
La velocidad de transferencia m√°xima depende de la velocidad de transferencia:
‚óè 320 m ‚Üí 125 kHz
‚óè 160 m ‚Üí 250 kHz
‚óè 60 m ‚Üí 500 kHz
‚óè 20 m ‚Üí 1 MHz

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2951

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar incrementos por vuelta del enc√≥der
Incrementos por vuelta del enc√≥der
El par√°metro "Incrementos por vuelta del enc√≥der" indica el n√∫mero de incrementos que emite
un enc√≥der absoluto por cada vuelta.
Para los l√≠mites debe diferenciarse entre los distintos modelos de enc√≥der. S√≥lo pueden
seleccionarse valores en potencias de 2.
‚óè Enc√≥der monovuelta (n√∫mero de vueltas = 1) con longitud del telegrama de 13 bits:
‚Äì valor m√≠nimo = 4
‚Äì valor m√°ximo = 8192
‚óè Enc√≥der multivuelta (n√∫mero de vueltas > 1) con longitud del telegrama de 25 bits:
‚Äì valor m√≠nimo = 4
‚Äì valor m√°ximo = 8192

Seleccionar n√∫mero de vueltas del enc√≥der
N√∫mero de vueltas del enc√≥der
Con este par√°metro se indica el n√∫mero de vueltas posibles con este enc√≥der.
La indicaci√≥n s√≥lo es relevante para el enc√≥der multivuelta. En los enc√≥ders monovuelta, el
1PosU establece el n√∫mero de vueltas en 1.
Rango de valores admisible:
‚óè 2 a 4096 en potencias de 2

Activar inversi√≥n del sentido de giro
Inversi√≥n del sentido de giro
La inversi√≥n del sentido de giro activa en la casilla de verificaci√≥n correspondiente.
Con el par√°metro "Inversi√≥n del sentido de giro" es posible adaptar el sentido de giro del
enc√≥der al del accionamiento y al del eje.

2952

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar tipo de eje
Tipos de eje
El m√≥dulo de posicionamiento 1PosU puede controlar los siguientes tipos de ejes:
‚óè Eje lineal
El eje lineal es un eje con una zona de desplazamiento f√≠sica limitada.

,QLFLRI¬ØVLFR

)LQI¬ØVLFR

‚óè Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no est√° limitada por topes mec√°nicos.
9DORUP¬£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

Entradas digitales
Seleccionar final de carrera negativo y final de carrera positivo
Efecto del final de carrera por hardware
Las dos entradas digitales DI0 y DI1 son evaluadas por el 1PosU como final de carrera por
hardware:
‚óè DI0 es el de final de carrera - y limita la zona de trabajo en sentido ‚óè DI1 es el de final de carrera + y limita la zona de trabajo en sentido +
Puede parametrizar cada uno de los finales de carrera por hardware individualmente como
contacto normalmente cerrado o contacto normalmente abierto.
Los finales de carrera por hardware se eval√∫an para ejes lineales y para ejes rotativos.
S√≥lo se eval√∫a el final de carrera por hardware correspondiente al sentido en el que se controla
el accionamiento.
As√≠, al alcanzar o sobrepasar un final de carrera por hardware, es posible abandonarlo sin
ninguna indicaci√≥n de fallo simplemente iniciando la marcha en el sentido contrario.
El nivel actual de las entradas digitales, retardado por la velocidad de actualizaci√≥n, est√°
indicado en la interfaz de realimentaci√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2953

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra la forma en la que los finales de carrera por hardware tienen efecto
sobre los distintos MODEs.
MODE

Efecto del final de carrera por hardware

B√∫squeda del punto de
referencia

En el final de carrera por hardware el 1PosU ejecuta una inversi√≥n de sentido
autom√°tica.

Jog

En el final de carrera por hardware se detiene el movimiento del eje, las 3
salidas digitales pasan a 0 y se notifica el bit de respuesta POS_ERR.

Posicionamiento abso‚Äê
luto
Posicionamiento relativo

Arrancar en el final de carrera por hardware
La tabla siguiente muestra la reacci√≥n del 1PosU al iniciar un MODE en el final de carrera por
hardware.
Sentido

Reacci√≥n del 1PosU

Arrancar dentro de la zona de trabajo

El 1PosU inicia el MODE predeterminado.

Arrancar fuera de la zona de trabajo

El bit de respuesta POS_ERR = 1 se activa.

Seleccionar leva de reducci√≥n
Efecto de la leva de reducci√≥n
La entrada digital DI2 es evaluada por el 1PosU como leva de reducci√≥n o entrada de
congelaci√≥n:
‚óè Evaluar como leva de reducci√≥n en MODE 3 "B√∫squeda del punto de referencia
(P√°gina 2904)" y JOB 9 "Se√±al de b√∫squeda de referencia (P√°gina 2922)"
‚óè como entrada de congelaci√≥n en JOB 10 "funci√≥n de congelaci√≥n (P√°gina 2924)"
La leva de reducci√≥n puede parametrizarse como contacto normalmente cerrado o contacto
normalmente abierto.

2954

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Accionamiento
Seleccionar el modo de control
Modo de control
El par√°metro "Modo de control" define la funci√≥n de las salidas digitales para la activaci√≥n del
accionamiento (P√°gina 2899). Posibilidades de selecci√≥n:
‚óè Modo de control 0:
‚Äì DO0 Desplazamiento negativo
‚Äì DO1 Desplazamiento positivo
‚Äì DO2 Marcha r√°pida/lenta
‚óè Modo de control 1:
‚Äì DO0 Marcha r√°pida
‚Äì DO1 Marcha lenta (en tal caso la marcha r√°pida es 0)
‚Äì DO2 Desplazamiento positivo (1) / Desplazamiento negativo (0)

Introducir distancia de desconexi√≥n
Distancia de desconexi√≥n
La distancia de desconexi√≥n (P√°gina 2893) define la distancia con respecto al destino a la que
el accionamiento decelera la marcha lenta a 0.
Si la distancia de desconexi√≥n ‚â• distancia de cambio de velocidad, no existe punto de cambio
de velocidad. No se reduce la marcha r√°pida a marcha lenta, sino que se ejecuta directamente
la reacci√≥n en el punto de desconexi√≥n.
Rango de valores admisible:
‚óè 0 a 65 535
El JOB 3 (P√°gina 2920) permite modificar la distancia de desconexi√≥n.

Introducir la distancia de cambio de velocidad
Distancia de cambio de velocidad
La distancia de cambio de velocidad (P√°gina 2893) define la distancia con respecto al destino
a la que el accionamiento reduce de marcha r√°pida a marcha lenta.
Rango de valores admisible:
‚óè 0 a 65 535
El JOB 4 (P√°gina 2921) permite modificar la distancia de cambio de velocidad.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2955

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Introducir el tiempo de deceleraci√≥n para el cambio de sentido
Tmin Cambio de sentido
El par√°metro "Tmin Cambio de sentido" determina el tiempo de deceleraci√≥n para el cambio de
sentido. Las salidas digitales se desconectan y a continuaci√≥n se ejecuta el cambio de sentido
con una deceleraci√≥n de Tmin. Tmin se aplica en cada cambio de sentido durante un
desplazamiento.
Tmin no es efectivo al iniciar tras POS_DONE = 1 o POS_ERR = 1.
Rango de valores admisible:
‚óè 0 a 255
El valor que introduzca se multiplica por 10. Introduzca pues Tmin en incrementos de 10 ms
(p. ej: 0 ms, 10 ms o 2550 ms).

Interfaz de control y reacci√≥n del 1PosU
Interfaz de control del 1PosU
Asignaci√≥n de la interfaz de control
La siguiente tabla muestra la asignaci√≥n de la interfaz de control (salidas) del 1PosU.
Direcci√≥n

Asignaci√≥n

Byte 0

Bit 0.7 ‚Ä¶ 0.4 representan los MODEs
Bit

7

6

5

4

0

0

0

0

MODE 0 = Detener

0

0

0

1

MODE 1 = Jog

0

0

1

1

MODE 3 = B√∫squeda del punto de referencia

0

1

0

0

MODE 4 = Posicionamiento relativo

0

1

0

1

MODE 5 = Posicionamiento absoluto

Bit 3: SPEED (SPEED = 0 es marcha lenta; SPEED = 1 es marcha r√°pida)
Bit 2: DIR_M
Bit 1: DIR_P
Bit 0: START
Bytes 1 a 3

en MODE 3 = B√∫squeda del punto de referencia: coordenada del punto de referencia
en MODE 4 = Posicionamiento relativo: parte del trayecto
en MODE 5 = Posicionamiento absoluto: punto de destino

2956

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direcci√≥n

Asignaci√≥n

Byte 4

Bit 4.7 ‚Ä¶ 4.4 representan los JOBs
Bit

7

6

5

4

0

0

0

0

JOB 0 = Cancelar procesamiento JOB

0

0

0

1

JOB 1 = Ajustar valor real

0

0

1

0

JOB 2 = Desplazar zona del enc√≥der (s√≥lo con enc√≥der SSI)

0

0

1

1

JOB 3 = Modificar distancia de desconexi√≥n

0

1

0

0

JOB 4 = Modificar distancia de cambio de velocidad

1

0

0

1

JOB 9 = Evaluar se√±al de b√∫squeda de referencia

1

0

1

0

JOB 10 = Funci√≥n de congelaci√≥n

1

0

1

1

JOB 11 = Ajustar vigilancia de sentido de giro

1

1

1

1

JOB 15 = Mostrar valores actuales

Bit 3: EXTF_ACK
Bit 2: reservado = 0
Bit 1: reservado = 0
Bit 0: JOB_REQ
Bytes 5 a 7

en funci√≥n del JOB seleccionado:
‚óè en JOB 1 = Coordenada del valor real
‚óè en JOB 2 = Offset
‚óè en JOB 3 = Distancia de desconexi√≥n
‚óè en JOB 4 = Distancia de cambio de diferencia
‚óè en JOB 9 = Coordenada del punto de referencia
‚óè en JOB 10
‚Äì

Byte 5: Bit 0 = Congelaci√≥n con flanco ascendente en DI2

‚Äì

Byte 5: Bit 1 = Congelaci√≥n con flanco descendente en DI2

‚óè en JOB 11 = Distancia de trayecto para vigilancia de sentido de giro
‚óè en JOB 15
‚Äì

Byte 5: 0 = trayecto residual

‚Äì

Byte 5: 1 = velocidad real

‚Äì

Byte 5: 2 = Informaci√≥n de error

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2957

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Interfaz de realimentaci√≥n del 1PosU
Asignaci√≥n de la interfaz de realimentaci√≥n
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta (entradas) del 1PosU.
Direcci√≥n

Ocupaci√≥n

Byte 0

Bit 7: ERR_ENCODER
Bit 6: STATUS DO 2
Bit 5: STATUS DO 1
Bit 4: STATUS DO 0
Bit 3: SYNC
Bit 2: POS_DONE
Bit 1: POS_ERR
Bit 0: POS_ACK

Bytes 1 a 3

Valor real

Byte 4

Bit 7: ERR_2L+
Bit 6: STATUS DI 2 Leva de reducci√≥n
Bit 5: STATUS DI 1 Final de carrera positivo
Bit 4: STATUS DI 0 Final de carrera negativo
Bit 3: reservado = 0
Bit 2: LATCH_DONE
Bit 1: JOB_ERR
Bit 0: JOB_ACK

Bytes 5 a 7

2958

Valor de respuesta

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.7.5

Diagn√≥stico del 1PosU

Diagn√≥stico con indicadores LED
Indicaci√≥n LED del 1PosU
6)




83



1

'1

2

326

3

4


‚ë†
‚ë°
‚ë¢
‚ë£

Error de grupo (rojo)
Indicador de estado de cambio de valor real (verde)
Posicionamiento en curso (verde)
Indicadores de estado de las entradas digitales (verde)

Indicadores de estado y error mediante los LED del 1PosU
La tabla muestra los indicadores de estado y error del 1PosU.
Evento (LED)
SF

1

5

2

UP

DN

Causa

Soluci√≥n

No hay parametrizaci√≥n.
Hay un aviso de diagn√≥sti‚Äê
co.

Compruebe la para‚Äê
metrizaci√≥n. Eval√∫e
el aviso de diagn√≥sti‚Äê
co.

POS

ON

ON

DI 0 activada
ON

DI 1 activada
ON

DI 2 activada
ON

cuando el valor real cambia
de un valor menor a uno
mayor
ON

cuando el valor real cambia
de un valor mayor a uno
menor
ON

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Se est√° realizando el posi‚Äê
cionamiento y una de las 3
salidas digitales est√° acti‚Äê
vada.

2959

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Tipos de error
En el manual de producto del m√≥dulo de interfaz utilizado en la estaci√≥n ET 200S encontrar√°
informaci√≥n sobre la estructura del diagn√≥stico de canal.

Tipos de error del 1PosU
La tabla muestra los tipos de error del 1PosU.
Tipo de error

Significado

Soluci√≥n

1D

00001:
Cortocircuito

Cortocircuito en la alimentaci√≥n del
enc√≥der.

Compruebe el cableado del enc√≥‚Äê
der. Corregir el cableado del proce‚Äê
so.

16D

10000:
Error de parametri‚Äê
zaci√≥n

M√≥dulo no parametrizado.

Corregir la parametrizaci√≥n.

17D

10001:
Falta la tensi√≥n de
carga 2L+

No hay tensi√≥n de alimentaci√≥n o
bien es insuficiente.

Corregir el cableado del proceso.
Compruebe la tensi√≥n de alimenta‚Äê
ci√≥n.

26D

11010:
Error externo

Rotura de hilo/cortocircuito de las
se√±ales del enc√≥der.

Corregir el cableado del proceso

Corregir la parametrizaci√≥n
Rotura de hilo en el cable del enc√≥‚Äê Sustituir el enc√≥der.
der o cable no conectado.
El enc√≥der est√° defectuoso o hay
interferencias.
El tipo de enc√≥der, la velocidad de
transferencia o el tiempo monoflop
no se corresponden con el enc√≥der
conectado; los enc√≥ders programa‚Äê
bles no coinciden con los ajustes
del m√≥dulo.

6.3.8

Utilizar ET 200S 1STEP 5V

6.3.8.1

Asignaci√≥n de terminales del 1STEP 5V

Reglas de cableado
Los cables (terminales 1 y 5 y terminales 4 y 8) conectados a la etapa de potencia deben estar
apantallados y deben ser de par trenzado. La pantalla tiene que hacer contacto por ambos
extremos. Para ello se debe usar el elemento de contactado de pantallas (ver el anexo de las
instrucciones de servicio Sistema de periferia descentralizada ET 200S (http://
support.automation.siemens.com/WW/view/es/1144348)).

2960

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignaci√≥n de terminales
La tabla siguiente muestra la asignaci√≥n de terminales para el 1STEP 5V.
Vista

Asignaci√≥n de terminales

Observaciones
DC 24 V: tensi√≥n de carga

67(3
9

DI0: habilitaci√≥n de impulsos externa,
STOP externo o final de carrera en sen‚Äê
tido adelante/atr√°s

70(6\67(39

6)

DI1: sensor del punto de referencia o
sensor del punto de referencia y final de
carrera en sentido adelante/atr√°s

,PSXOVRV

3 
'&9 
', 
' 

 3





,PSXOVR

 '&9 



 ',



 '




,PSXOVRB1



',5

0RWRUSDVRDSDVR

'&$%

P, /P y D, /D son se√±ales seg√∫n RS 422.

(WDSDGHSRWHQFLD

5'< 326


(6

',5B1
6HQWLGR

67(3
9

DC 24 V: tensi√≥n de carga

70(6$\67(39

DI0: habilitaci√≥n de impulsos externa,
STOP externo o final de carrera en sen‚Äê
tido adelante/atr√°s

6)

DI1: sensor del punto de referencia o
sensor del punto de referencia y final de
carrera en sentido adelante/atr√°s

,PSXOVRV
5'< 326


(6

'&9 
', 
' 
$

$8; 
$

$8; 

 3



,PSXOVR

 '&9 



 ',



 '
$




,PSXOVRB1



',5

(WDSDGHSRWHQFLD

3 



0RWRUSDVRDSDVR

P, /P y D, /D son se√±ales seg√∫n RS 422.

'&$%

',5B1

 $8;
$

 $8;

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

6HQWLGR

2961

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.8.2

Principios b√°sicos del posicionamiento con motor paso a paso

Interacci√≥n de los componentes
A continuaci√≥n se explica la interrelaci√≥n entre los diferentes componentes para el
posicionamiento con motor paso a paso.

1STEP 5V
El 1STEP 5V genera impulsos y una se√±al de sentido para etapas de potencia de motores paso
a paso. En n√∫mero de impulsos generados depende de la longitud del trayecto a recorrer. La
frecuencia de impulsos es una medida para la velocidad. La variaci√≥n de la frecuencia de
impulsos por unidad de tiempo (segundo) es una medida para la aceleraci√≥n o deceleraci√≥n.
El funcionamiento del 1STEP 5V se ajusta mediante sus par√°metros y ajustes.

Etapa de potencia para motores paso a paso
La etapa de potencia es el elemento de uni√≥n entre el 1STEP 5V y el motor paso a paso. El
1STEP 5V env√≠a se√±ales diferenciales RS 422 para frecuencia y sentido. Una vez en la etapa
de potencia, estas se√±ales se convierten en corrientes de motor que controlan los movimientos
del motor con m√°xima precisi√≥n.

Motores paso a paso
Los motores paso a paso se utilizan para el posicionamiento de ejes. Son la soluci√≥n f√°cil y
econ√≥mica para trabajos de posicionamiento de alta precisi√≥n dentro de un amplio campo de
aplicaci√≥n.
El √°rbol de un motor paso a paso gira un √°ngulo determinado con cada impulso, de tal modo
que, con secuencias de impulsos r√°pidas, el movimiento paso a paso se convierte en un
movimiento de giro continuado.

2962

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Par√°metros y ajustes
Informaciones necesarias
Para obtener una interrelaci√≥n √≥ptima entre los diferentes componentes debe proporcionar al
1STEP 5V diferentes datos:
‚óè una √∫nica vez; en la configuraci√≥n de los par√°metros con su software de configuraci√≥n
‚Äì Frecuencia base (P√°gina 2966) Fb
‚Äì Multiplicador n (P√°gina 2964) para el ajuste de frecuencia de inicio y parada Fss
‚Äì Multiplicador i (P√°gina 2964) para el ajuste de la aceleraci√≥n/deceleraci√≥n
‚Äì Funci√≥n y respuesta de las entradas digitales (P√°gina 2986)
‚Äì Zona de desplazamiento (P√°gina 2982)
‚óè durante el funcionamiento; movimiento del motor por medio de una tarea de
desplazamiento en su programa de usuario
‚Äì Multiplicador G (P√°gina 2964) para la velocidad/frecuencia de salida Fa
‚Äì Factor de reducci√≥n R (P√°gina 2966)
‚Äì Trayecto, posici√≥n o frecuencia
‚Äì Modo de operaci√≥n
‚Äì Preajuste de sentido (tarea de desplazamiento) al inicio
‚óè durante el funcionamiento; para la adaptaci√≥n a diferentes condiciones de carga como
orden de parametrizaci√≥n en su programa de usuario
‚Äì Frecuencia base (P√°gina 2966) Fb
‚Äì Multiplicador n (P√°gina 2964) para el ajuste de frecuencia de inicio y parada Fss
‚Äì Multiplicador i (P√°gina 2964) para el ajuste de la aceleraci√≥n/deceleraci√≥n

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2963

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Curva de desplazamiento del 1STEP 5V
Curva de desplazamiento
El 1STEP 5V ejecuta un modo incremental de acuerdo con la siguiente curva de
desplazamiento. El 1STEP 5V genera los valores pico (frecuencia de inicio y parada,
frecuencia de salida y aceleraci√≥n/deceleraci√≥n) de la curva de desplazamiento con
una frecuencia base (P√°gina 2966) definida por el usuario.
I
) P¬£[
)D

)VV
0DUJHQGH
DFHOHUDFL¬µQ

0DUJHQGHIUHFXHQFLD
YHORFLGDGFRQVWDQWHV

0DUJHQGH
GHFHOHUDFL¬µQ
W

)VV )UHFXHQFLDGHLQLFLR\SDUDGD
)D )UHFXHQFLDGHVDOLGD
)P¬£[ )UHFXHQFLDP¬£[LPDGHOPRWRUSDVRDSDVR

Frecuencia de inicio y parada Fss
La frecuencia de inicio y parada Fss es la frecuencia a la que puede acelerarse el motor con
carga en parado.
El valor de Fss depende del momento de inercia de la carga. Se puede determinar mediante
pruebas.
La frecuencia de inicio y parada Fss es al mismo tiempo la frecuencia de salida m√≠nima Fa, con
la que puede mover el motor.

Ajuste de la frecuencia de inicio y parada Fss
Mediante la parametrizaci√≥n, el 1STEP 5V permite el ajuste escalonado de la frecuencia de
inicio y parada Fss. Para ello, seleccione el multiplicador n entre 1 y 255 que va a multiplicarse
con la frecuencia base Fb. Con el factor de reducci√≥n R (1 √≥ 0,1) en la tarea de desplazamiento
es posible volver a reducir la frecuencia de inicio y parada Fss.
La frecuencia de inicio y parada se calcula seg√∫n la f√≥rmula siguiente:
Fss = Fb √ó n √ó R
Encontrar√° m√°s informaci√≥n al respecto en la tabla (P√°gina 2966) con los rangos para la
frecuencia de inicio y parada, frecuencia de salida y aceleraci√≥n.

2964

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Frecuencia/velocidad m√°xima del eje Fm√°x
A la hora de elegir el motor paso a paso deben tenerse en cuenta los siguientes aspectos:
La frecuencia/velocidad m√°xima var√≠a en funci√≥n de la aplicaci√≥n. Con esta frecuencia el motor
debe alcanzar un par de giro suficientemente elevado para mover su carga.
Recuerde que aqu√≠ no se trata de la m√°xima frecuencia posible que puede soportar el motor
o la etapa de potencia.
Con la curva caracter√≠stica correspondiente puede determinar la frecuencia m√°xima Fmax. La
figura siguiente muestra la curva caracter√≠stica de pares de giro de un motor paso a paso.
3DUGHJLUR

0RPHQWR
GHFDUJD

)PD[

)PD[GHOPRWRU

I

Frecuencia de salida/velocidad Fa
La frecuencia de salida puede regularse de forma diferente para cada marcha.
Al seleccionar la frecuencia de salida debe tener en cuenta tambi√©n la duraci√≥n m√≠nima del
impulso de la etapa de potencia utilizada (ver f√≥rmula y tabla (P√°gina 2966) con los rangos
para la frecuencia de inicio y parada, la frecuencia de salida y la aceleraci√≥n).
Si la frecuencia de salida seleccionada es menor que la frecuencia de inicio y parada Fss
ajustada, el 1STEP 5V iguala la frecuencia de salida con la frecuencia de inicio y parada Fss.
Fa siempre debe ser inferior a Fmax.

Ajuste de la frecuencia de salida/velocidad Fa
El 1STEP 5V permite el ajuste escalonado de la frecuencia de salida Fa. Para ello, seleccione
el multiplicador G entre 1 y 255 que va a multiplicarse con la frecuencia base Fb. Con el factor
de reducci√≥n R (1 √≥ 0,1) en la tarea de desplazamiento es posible volver a reducir la frecuencia
de salida Fa.
La frecuencia de salida se calcula seg√∫n la f√≥rmula siguiente:
Fa = Fb √ó G √ó R

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2965

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Encontrar√° m√°s informaci√≥n al respecto en la tabla (P√°gina 2966) con los rangos para la
frecuencia de inicio y parada, frecuencia de salida y aceleraci√≥n.

Aceleraci√≥n/deceleraci√≥n a
La aceleraci√≥n/deceleraci√≥n m√°xima permitida depende de la carga que se vaya a mover.
El motor debe alcanzar un par de giro lo suficientemente alto como para poder acelerar o
decelerar la carga sin p√©rdida de pasos.
Tambi√©n deben considerarse otros criterios para determinar la aceleraci√≥n/deceleraci√≥n en
funci√≥n de la aplicaci√≥n, como p.ej. un arranque y un frenado suaves.

Ajuste de la aceleraci√≥n/deceleraci√≥n a
El 1STEP 5V permite un ajuste escalonado de la aceleraci√≥n/deceleraci√≥n mediante
parametrizaci√≥n aplicando el multiplicador i.
Durante la fase de aceleraci√≥n, la frecuencia va aumentando continuamente desde la
frecuencia de inicio y parada Fss hasta alcanzar la frecuencia de salida Fa.
El intervalo de tiempo para el aumento continuo de la frecuencia se ajusta de forma
escalonada. Para ello, seleccione un multiplicador i entre 1 y 255.
En la fase de deceleraci√≥n, la frecuencia de salida se reduce de la misma forma.
Con el factor de reducci√≥n R (1 √≥ 0,1) en la tarea de desplazamiento es posible volver a reducir
la aceleraci√≥n/deceleraci√≥n a.
La aceleraci√≥n/deceleraci√≥n se calcula seg√∫n la f√≥rmula siguiente:
a = Fb √ó R / (i √ó 0,128 ms)
Encontrar√° m√°s informaci√≥n al respecto en la tabla (P√°gina 2966) con los rangos para la
frecuencia de inicio y parada, frecuencia de salida y aceleraci√≥n.

Ajuste de la frecuencia base
Introducci√≥n
El 1STEP 5V permite el ajuste escalonado de la frecuencia base mediante parametrizaci√≥n.
La frecuencia base determina el margen para la frecuencia de inicio y parada, la frecuencia de
salida y la aceleraci√≥n.

2966

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Procedimiento
1. Dependiendo de la prioridad de su solicitud, seleccione de la siguiente tabla un margen
adecuado de la frecuencia de inicio y parada Fss y de la frecuencia de salida Fa o bien de la
aceleraci√≥n a seg√∫n los siguientes criterios:
‚Äì Margen de la frecuencia de inicio y parada Fss,
p. ej. para un arranque y un frenado tan r√°pidos como sea posible.
‚Äì Margen de la frecuencia de salida Fa,
p. ej. para un ajuste de velocidad lo m√°s exacto posible.
‚Äì Margen de aceleraci√≥n a,
p. ej. para procesos de posicionamiento tan r√°pidos como sea posible.
2. Determine la frecuencia base Fb con ayuda de la tabla.
Para optimizar la frecuencia base Fb proceda del siguiente modo:
3. Compruebe si el resto de valores correspondientes cubren sus necesidades. Si es
necesario, seleccione una frecuencia base Fb diferente, m√°s adecuada a sus necesidades.
4. Determine los multiplicadores para el ajuste de la frecuencia de salida Fa, la aceleraci√≥n/
deceleraci√≥n a y la frecuencia de inicio y parada Fss.
5. Consulte en la tabla el factor de reducci√≥n R correspondiente.
La tabla siguiente muestra los rangos para la frecuencia de inicio y parada, la frecuencia de
salida y la aceleraci√≥n.
Frecuencia base Fb
en Hz

Margen de

Margen de

frecuencia de inicio y para‚Äê
da Fss
Frecuencia de salida Fa
en Hz

aceleraci√≥n a
en Hz/ms

F√≥rmula:
Fss = Fb √ó n √ó R
Fa = Fb √ó G √ó R

F√≥rmula:
a = Fb √ó R / (i √ó 0,128 ms)

0,1

0,4 ‚Ä¶ 102

0,01 ‚Ä¶ 3,13

8

0,1

0,8 ‚Ä¶ 204

0,02 ‚Ä¶ 6,25

20

0,1

2 ‚Ä¶ 510

0,06 ‚Ä¶ 15,6

4

Factor de re‚Äê
ducci√≥n R

4

1

4 ‚Ä¶ 1020

0,12 ‚Ä¶ 31,3

8

1

8 ‚Ä¶ 2040

0,25 ‚Ä¶ 62,5

20

1

20 ‚Ä¶ 5100

0,61 ‚Ä¶ 156

40

1

40 ‚Ä¶ 10200

1,23 ‚Ä¶ 313

80

1

80 ‚Ä¶ 20400

2,45 ‚Ä¶ 625

200

1

200 ‚Ä¶ 51000

6,13 ‚Ä¶ 1563

400

1

400 ‚Ä¶ 102000

12,25 ‚Ä¶ 3125

800

1

800 ‚Ä¶ 204000

24,51 ‚Ä¶ 6250

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2967

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Frecuencia base Fb
en Hz

Factor de re‚Äê
ducci√≥n R

2000 1)

1

Margen de

Margen de

frecuencia de inicio y para‚Äê
da Fss
Frecuencia de salida Fa
en Hz

aceleraci√≥n a
en Hz/ms

F√≥rmula:
Fss = Fb √ó n √ó R
Fa = Fb √ó G √ó R

F√≥rmula:
a = Fb √ó R / (i √ó 0,128 ms)

2000 ‚Ä¶ 510000

61,27 ‚Ä¶ 15625

Fb = frecuencia base
Fss = frecuencia de inicio y parada
Fa = frecuencia de salida
a = aceleraci√≥n/deceleraci√≥n
R = factor de reducci√≥n
n = multiplicador para el ajuste escalonado de la frecuencia de inicio y parada
G = multiplicador para el ajuste escalonado de la frecuencia de salida
i = multiplicador para el ajuste escalonado de la aceleraci√≥n/deceleraci√≥n
1)

a partir de 6ES7138-4DD01-0AB0

La duraci√≥n m√≠nima del impulso resulta de la frecuencia de salida Fa ajustada y se calcula
seg√∫n la f√≥rmula TPuls = 1 / (2 √ó Fa).

6.3.8.3

Funciones del 1STEP 5V

Vista general de las funciones
Vista general
La funci√≥n del 1STEP 5V es el posicionamiento de un accionamiento en determinados puntos
de destino predefinidos (modos incrementales) y el desplazamiento sin fin con frecuencias
predefinibles (modo de velocidad).
Para realizar esta tarea dispone de las siguientes funciones:
‚óè B√∫squeda del punto de referencia (P√°gina 2970): el eje se sincroniza en funci√≥n de un
punto de referencia
‚óè Definir punto de referencia (P√°gina 2975) (a partir de 6ES7138‚Äë4DC01‚Äë0AB0): se asigna
un valor a la posici√≥n actual.
‚óè Modo incremental relativo (P√°gina 2976) (posicionamiento relativo): el eje se desplaza un
trayecto predeterminado
‚óè Modo incremental absoluto (P√°gina 2977) (posicionamiento absoluto) (a partir de
6ES7138‚Äë4DC01‚Äë0AB0): el eje se desplaza a una posici√≥n predeterminada.
‚óè Modo de velocidad (P√°gina 2978) (a partir de 6ES7138‚Äë4DC01‚Äë0AB0): el accionamiento se
mueve con una velocidad flexible predefinible (frecuencia de impulsos).

2968

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè Detener la petici√≥n de desplazamiento (P√°gina 2980)
‚óè Modificar par√°metros durante el funcionamiento (P√°gina 2985)
Encontrar√° informaci√≥n sobre c√≥mo controlar las funciones en la descripci√≥n de la interfaz de
control (P√°gina 2993).

Inicio de una petici√≥n de desplazamiento
Iniciar la petici√≥n de desplazamiento
La figura siguiente muestra el desarrollo de la solicitud de inicio para una petici√≥n de
desplazamiento hasta finalizar el desplazamiento.

%LWGHHUURU
(55B-2%

W

%LWGHFRQWURO
',5B3
',5B0

W

%LWGHUHVSXHVWD

W

676B-2%

,QVWDQWH
(OGHVSOD]DPLHQWRKDILQDOL]DGRODVUHVSXHVWDV FDXVDGHSDUDGD
326B5&'WUD\HFWRUHVWDQWH SXHGHQHYDOXDUVH
6LVHKDDOFDQ]DGRODSRVLFL¬µQHVSHFLILFDGDVHDFWLYD326B5&'
6LVHKDDFWLYDGRHOELWGHHUURU(55B-2%VHGHVDFWLYDFRQOD
VLJXLHQWHVROLFLWXGGHLQLFLRY¬£OLGD

,QVWDQWH
%RUUDUVROLFLWXGGHLQLFLRHLQLFLDUFRQHOORHOGHVSOD]DPLHQWR
PDQWHQHUGLVSRQLEOHVORVYDORUHVSDUDODWDUHDGHGHVSOD]DPLHQWR

,QVWDQWH
67(39KDFRPSUHQGLGRODVROLFLWXG(OELWGHHUURU(55B-2%
VHDFWLYDVLODPDUFKDQRSXHGHLQLFLDUVH FRQVXOWHVLJQLILFDGRGH
ORVELWVGHUHVSXHVWD 

,QVWDQWH
6ROLFLWDULQLFLR\SUHSDUDUORVYDORUHVSDUDODWDUHDGHGHVSOD]DPLHQWR

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2969

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Evaluaci√≥n del bit de error ERR_JOB
En cuanto el bit de realimentaci√≥n (P√°gina 2997) STS_JOB se haya borrado en el instante 4,
deber√° evaluar el bit de error ERR_JOB. Recuerde que el bit de realimentaci√≥n STS_JOB no
se borra hasta que los bits de control (P√°gina 2993) DIR_P, DIR_M y C_PAR se han borrado.

B√∫squeda del punto de referencia
Descripci√≥n del funcionamiento
El punto de referencia marca la referencia de su sistema de accionamiento (leva de referencia)
para realizar las siguientes peticiones de desplazamiento. Puede determinar el punto de
referencia p. ej. si monta un iniciador en la leva de referencia y lo conecta a la entrada digital
DI1.
El 1STEP 5V garantiza una reproducci√≥n exacta del punto de referencia, ya que siempre parte
en el mismo sentido. Este sentido debe definirse iniciando la b√∫squeda del punto de referencia
siempre en el mismo sentido.

Petici√≥n de desplazamiento para b√∫squeda del punto de referencia
La petici√≥n de desplazamiento contiene la siguiente informaci√≥n:
‚óè Multiplicador G para la velocidad/frecuencia de salida Fa
‚óè Factor de reducci√≥n R para la frecuencia base Fb parametrizada
‚óè Posici√≥n del punto de referencia
‚óè Modo de operaci√≥n = 1 para la b√∫squeda del punto de referencia
‚óè Parada en la leva de referencia (P√°gina 2980)
‚óè Preajuste de sentido como inicio (P√°gina 2993)
Nota
El 1STEP 5V comprueba los valores l√≠mite de la posici√≥n definida (m√≠nimo 0 y m√°ximo
16777215). El valor final se puede parametrizar.
Nota
Si ha parametrizado la reacci√≥n de la entrada digital (P√°gina 2986) DI1 (7) como "Sensor punto
de referencia y final de carrera", el 1STEP 5V elegir√° autom√°ticamente el sentido de arranque
hacia el final de carrera, independientemente del preajuste de sentido de la petici√≥n de
desplazamiento.

2970

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nota
Estado los finales de carrera
Si se utilizan finales de carrera es posible que al iniciar la b√∫squeda del punto de referencia
estos a√∫n no proporcionen el estado correcto. Esto puede ocurrir p. ej. si los finales de carrera
est√°n parametrizados como contacto normalmente cerrado (activo con nivel 0) y la
alimentaci√≥n de tensi√≥n de los finales de carrera no est√° disponible antes de iniciar la
b√∫squeda del punto de referencia.
En este caso puede suceder que la b√∫squeda del punto de referencia se inicie en el sentido
incorrecto.
Antes de iniciar un desplazamiento, aseg√∫rese de que los finales de carrera ya proporcionan
el estado correcto en cada caso.

Bit de estado SYNC
El bit de estado (P√°gina 2997) SYNC indica la sincronizaci√≥n del eje, es decir, este bit est√°
activado tras la b√∫squeda correcta del punto de referencia y se ha borrado durante la marcha.
El bit de estado SYNC est√° borrado
‚óè tras la parametrizaci√≥n de la estaci√≥n ET 200S
‚óè tras borrar la habilitaci√≥n de impulsos
‚óè tras un STOP de la CPU/del maestro
En estos casos resulta √∫til realizar una b√∫squeda del punto de referencia.

Bits de estado POS y POS_RCD
Durante la b√∫squeda del punto de referencia, su ejecuci√≥n se indica con el bit de
realimentaci√≥n (P√°gina 2997) POS activado.
Una vez finalizada correctamente la b√∫squeda del punto de referencia, el bit de realimentaci√≥n
POS_RCD activado indica que se ha llegado a la posici√≥n.
Si la b√∫squeda del punto de referencia se cancela, el bit de realimentaci√≥n POS_RCD
permanece desactivado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2971

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Distancia residual, posici√≥n, frecuencia
El valor indicado como respuesta (P√°gina 2997) es irrelevante durante la b√∫squeda del punto
de referencia.
Nota
Para que el 1STEP 5V pueda llegar con exactitud al punto de referencia una y otra vez, el
per√≠odo de la frecuencia de inicio y parada debe ser mayor que el tiempo de operaci√≥n de un
paso individual, que va del 1STEP 5V al motor paso a paso y regresa al 1STEP 5V pasando
por la leva de referencia (retardo de las entradas digitales: 4 ms).
Al detenerse en la leva de referencia o en un final de carrera durante la fase de aceleraci√≥n, el
1STEP 5V sigue emitiendo impulsos durante 50 ms como m√°ximo con la frecuencia ya
alcanzada antes de iniciar el proceso de frenado. Con ello se evitan cambios de frecuencia
abruptos que pueden provocar p√©rdidas de pasos.

Desarrollo de la b√∫squeda del punto de referencia
Fases de la b√∫squeda del punto de referencia
Una b√∫squeda del punto de referencia se compone como m√°ximo de tres fases.
En la primera fase (1) y en la segunda fase (2) se garantiza que se encuentre la leva de
referencia.
Ambas fases se recorren con la frecuencia de salida Fa predeterminada.
En la tercera fase (3) se avanza hasta la leva de referencia de forma reproducible con
frecuencia de inicio y parada Fss en el sentido seleccionado hasta llegar al punto de referencia
.
Nota
El n√∫mero de impulsos generados en una fase equivale como m√°ximo a la longitud
parametrizada de la zona de desplazamiento menos 1.

Diferentes operaciones
Dependiendo de la ubicaci√≥n 3 al iniciar la b√∫squeda del punto de referencia se obtienen
diferentes modelos de la marcha (REF es la leva de referencia, cableada a la entrada digital
DI1). La representaci√≥n es aplicable al sentido de arranque Adelante (DIR_P).
‚óè Inicio antes del REF o en el final de carrera LIMIT_M
La figura siguiente muestra una b√∫squeda del punto de referencia con inicio antes de REF.

2972

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
',5B3

)D




)VV
/,0,7B0

5()

3

/,0,7B3

)VV


)D

‚óè Inicio tras REF
La figura siguiente muestra una b√∫squeda del punto de referencia con inicio despu√©s de REF.
',5B3
)D


)VV
5()

/,0,7B0



/,0,7B3

3

)VV
)D



‚óè Inicio sobre REF
La figura siguiente muestra una b√∫squeda del punto de referencia con inicio sobre REF.
',5B3
)D 

/,0,7B0

)VV
5()
3

/,0,7B3

)VV


)D

‚óè Inicio sobre el final de carrera en sentido de arranque
La figura siguiente muestra una b√∫squeda del punto de referencia con inicio sobre el final de
carrera en sentido de arranque.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2973

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
',5B3


/,0,7B0

/,0,7B3
3

5()

)VV
)D



El sensor punto de referencia es a la vez final de carrera
Nota
Si el sensor punto de referencia REF es a la vez un final de carrera, 1STEP 5V selecciona el
sentido de arranque autom√°ticamente hacia el final de carrera, independientemente del
sentido especificado en la petici√≥n de desplazamiento.
‚óè Inicio dentro de la zona de desplazamiento
La siguiente figura muestra una b√∫squeda del punto de referencia con inicio dentro de la zona
de desplazamiento, siendo REF al mismo tiempo el final de carrera LIMIT_M.


5()/,0,7B0

)D
)VV

',5B3',5B0
/,0,7B3

3

)VV
)D



‚óè Inicio en el final de carrera
La figura siguiente muestra una b√∫squeda del punto de referencia con inicio en el final de
carrera LIMIT_P, siendo REF al mismo tiempo LIMIT_P.
',5B3',5B0
)VV
/,0,7B0


5()/,0,7B3
3
)VV


2974

)D

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Reacci√≥n ante leva de referencia defectuosa con final de carrera (interrupci√≥n de la marcha)
La figura siguiente muestra una b√∫squeda del punto de referencia con la leva de referencia
defectuosa e inicio antes de REF.
',5B3
)D



)VV
/,0,7B0

5()

3

/,0,7B3

)DOOR
)VV
)D



La figura siguiente muestra una b√∫squeda del punto de referencia con leva de referencia
defectuosa e inicio sobre LIMIT_P.
',5B3

/,0,7B0

5()
)DOOR

/,0,7B3
3
)VV



)D

Reacci√≥n en caso de leva de referencia siempre activada sin final de carrera
Al final de la primera fase, una vez emitidos 16777215 impulsos, la marcha finaliza con los bits
de estado SYNC y POS_RCD borrados.

Reacci√≥n en caso de fallo de la leva de referencia sin final de carrera
Las tres fases de la marcha se ejecutan con la emisi√≥n de 16777215 impulsos en cada una. A
continuaci√≥n, la marcha se interrumpe con los bits de estado SYNC y POS_RCD borrados.

Definir punto de referencia (a partir de 6ES7138-4DC01-0AB0)
Descripci√≥n del funcionamiento
El punto de referencia marca la referencia de su sistema de accionamiento. Con base en esta
referencia se orientar√°n tanto modos incrementales absolutos subsiguientes como el valor de
posici√≥n en la interfaz de realimentaci√≥n. Para definir el punto de referencia debe asignarse el
valor de posici√≥n absoluto a la posici√≥n actual del motor paso a paso.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2975

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Petici√≥n de definici√≥n del punto de referencia
Una petici√≥n de definici√≥n del punto de referencia es una petici√≥n virtual sin desplazamiento.
Contiene la siguiente informaci√≥n:
‚óè Posici√≥n del punto de referencia
‚óè Modo de operaci√≥n = 4 para la definici√≥n del punto de referencia
‚óè Libre preajuste de sentido como inicio (P√°gina 2993)
Nota
El 1STEP 5V comprueba los valores l√≠mite de la posici√≥n definida (m√≠nimo 0 y m√°ximo
16777215). El valor final se puede parametrizar.
Nota
Dado que el punto de referencia dentro de la zona de desplazamiento se puede ajustar a un
valor entre 0 y 16777215, pueden darse situaciones en las que un final de carrera ya no sea
alcanzable.
Ejemplos:
‚óè Si el punto de referencia dentro de la zona de desplazamiento se ajusta a "0", el final de
carrera en sentido hacia atr√°s ya no podr√° alcanzarse mediante una petici√≥n de
desplazamiento, ya que no se puede ir a posiciones negativas.
Aseg√∫rese de que todas las posiciones de destino se encuentren en el rango de valores
positivo.
‚óè En estado no sincronizado el eje no puede recorrer ninguna distancia que sea superior a la
zona de desplazamiento parametrizada. Si la zona de desplazamiento parametrizada es
inferior a la distancia entre ambos finales de carrera y el eje se encuentra en el final de
carrera en sentido adelante, el eje no podr√° moverse hasta el final de carrera en sentido
atr√°s con un desplazamiento relativo.

Respuestas
Tras ejecutarse correctamente la petici√≥n, los bits de realimentaci√≥n (P√°gina 2997) SYNC y
POS_RCD est√°n activados.
Si el bit de realimentaci√≥n SYNC ya est√° activado antes de ejecutar la petici√≥n, permanece
activado. La ejecuci√≥n correcta se reconoce tambi√©n por el cambio del valor de posici√≥n en la
interfaz de realimentaci√≥n.

Modo incremental relativo (posicionamiento relativo)
Descripci√≥n del funcionamiento
Con el modo incremental relativo se puede seguir moviendo el motor paso a paso durante un
trayecto predefinido y llegar de ese modo a una posici√≥n concreta.
El sentido y la velocidad de desplazamiento se definen con el arranque.

2976

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Petici√≥n de desplazamiento para modo incremental relativo
La petici√≥n de desplazamiento contiene la siguiente informaci√≥n:
‚óè Trayecto (n√∫mero de impulsos a ejecutar)
‚óè Multiplicador G para la velocidad/frecuencia de salida Fa
‚óè Factor de reducci√≥n R para la frecuencia base Fb parametrizada
‚óè Modo de operaci√≥n =0 para modo incremental relativo
‚óè Parada en la leva de referencia (P√°gina 2980)
‚óè Preajuste de sentido como inicio (P√°gina 2993)
Nota
El 1STEP 5V comprueba los valores l√≠mite del recorrido definido (m√≠nimo 1 impulso y m√°ximo
16777215 impulsos). El 1STEP 5V no comprueba la distancia hasta el final de carrera. La
marcha se detiene como m√°ximo al llegar al final de carrera.

Respuestas
Cuando se inicia el modo incremental se desactiva el bit de realimentaci√≥n
(P√°gina 2997)POS_RCD.
Durante el modo incremental, su ejecuci√≥n se indica con el bit de realimentaci√≥n POS activado.
Una vez finalizado correctamente el modo incremental, el bit de realimentaci√≥n POS_RCD
activado indica que se ha llegado a la posici√≥n.
Si el modo incremental se cancela, el bit de realimentaci√≥n POS_RCD permanece
desactivado. Si el valor de realimentaci√≥n (P√°gina 2997) est√° ajustado en "Distancia residual",
una vez se detiene el modo incremental se indica el trayecto que queda por recorrer.

Modo incremental absoluto (posicionamiento absoluto) (a partir de 6ES7138-4DC01-0AB0)
Descripci√≥n del funcionamiento
Con el modo incremental absoluto se puede mover el motor paso a paso hasta una posici√≥n
predefinida y llegar de ese modo a una posici√≥n concreta.
La velocidad se define con el arranque. El 1STEP 5V define autom√°ticamente el sentido y el
trayecto a recorrer con base en la posici√≥n de salida (valor real de la posici√≥n). Tambi√©n es
posible predefinir el sentido de un eje de valor m√≥dulo.
Nota
Si se activa simult√°neamente inicio adelante e inicio atr√°s (DIR_P y DIR_M) para un eje de
valor m√≥dulo, el 1STEP 5V elegir√° autom√°ticamente el trayecto m√°s corto hasta alcanzar
(P√°gina 2982) la posici√≥n de destino.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2977

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Petici√≥n de desplazamiento para modo incremental absoluto
La petici√≥n de desplazamiento contiene la siguiente informaci√≥n:
‚óè Posici√≥n de destino
‚óè Multiplicador G para la velocidad/frecuencia de salida Fa
‚óè Factor de reducci√≥n R para la frecuencia base Fb parametrizada
‚óè Modo de operaci√≥n = 2 para modo incremental absoluto
‚óè Libre preajuste de sentido como inicio (P√°gina 2993)
Nota
El 1STEP 5V comprueba los valores l√≠mite de la posici√≥n definida (m√≠nimo 0 y m√°ximo
16777215). El valor final se puede parametrizar.
La petici√≥n de desplazamiento s√≥lo se ejecuta si previamente se ha calculado o definido la
posici√≥n del punto de referencia (el bit SYNC debe estar activado, ver "B√∫squeda del punto de
referencia (P√°gina 2970)" o bien "Definici√≥n del punto de referencia (P√°gina 2975)").
La se√±al de control (P√°gina 2993) "Parada en leva de referencia" no se tiene en cuenta.

Respuestas
Cuando se inicia el modo incremental se desactiva el bit de realimentaci√≥n
(P√°gina 2997)POS_RCD.
Durante el modo incremental, su ejecuci√≥n se indica con el bit de realimentaci√≥n POS activado.
Una vez finalizado correctamente el modo incremental, el bit de realimentaci√≥n POS_RCD
activado indica que se ha llegado a la posici√≥n.
Si el modo incremental se cancela, el bit de realimentaci√≥n POS_RCD permanece
desactivado. Si el valor de realimentaci√≥n (P√°gina 2997) est√° ajustado en "Distancia residual",
una vez se detiene el modo incremental se indica el trayecto que queda por recorrer.

Modo de velocidad (a partir de 6ES7138-4DC01-0AB0)
Descripci√≥n del funcionamiento
En este modo de operaci√≥n se define la frecuencia con la que se deben generar los impulsos
(pasos). Si se modifica la frecuencia, tras una fase de aceleraci√≥n o deceleraci√≥n se generan
los impulsos con la nueva frecuencia. Los impulsos se generan de modo continuo hasta que
se detenga la petici√≥n de desplazamiento o, en el caso de un eje lineal, hasta que se alcance
un l√≠mite de la zona de desplazamiento.
La figura siguiente muestra el modo de velocidad con un eje de valor m√≥dulo.

2978

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
I

DVFHQGHQWH

N+]
&RQVLJQDGHIUHFXHQFLD

)UHFXHQFLDUHDO

)VV

W
)VV

















 




N+]
GHVFHQGHQWH

‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§
‚ë•
‚ë¶
‚ëß
‚ë®
‚ë©
‚ë™
‚ë´

Especificaci√≥n consigna de frecuencia
Inicio del modo de velocidad con frecuencia FSS, rampa de aceleraci√≥n hasta la consigna de frecuencia
Nueva consigna de frecuencia (< FSS)
Rampa de deceleraci√≥n hasta FSS, a continuaci√≥n se detiene la salida de impulsos (no se detiene el modo de
velocidad)
Especificaci√≥n consigna de frecuencia: Continuaci√≥n del modo de velocidad con frecuencia FSS, rampa de acelera‚Äê
ci√≥n hasta la consigna de frecuencia
Especificaci√≥n consigna de frecuencia no v√°lida: Se detiene el modo de velocidad
Inicio del modo de velocidad con frecuencia FSS, rampa de aceleraci√≥n hasta la consigna de frecuencia
Especificaci√≥n consigna de frecuencia
Especificaci√≥n consigna de frecuencia: Cambio de la rampa de aceleraci√≥n a la rampa de deceleraci√≥n
Especificaci√≥n consigna de frecuencia: Continuaci√≥n de la rampa de deceleraci√≥n
Especificaci√≥n consigna de frecuencia
Especificaci√≥n consigna de frecuencia negativa: Cambio de sentido

Petici√≥n de desplazamiento para modo de velocidad
La petici√≥n de desplazamiento contiene la siguiente informaci√≥n:
‚óè Frecuencia nominal como valor de 32 bits (tipo de datos STEP 7 REAL)
‚óè Preajuste de sentido mediante el signo de la frecuencia nominal (positivo: adelante)
‚óè Modo de operaci√≥n = 3 para modo de velocidad
‚óè Libre preajuste de sentido como inicio (P√°gina 2993)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2979

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
El 1STEP 5V comprueba los valores l√≠mite de la frecuencia definida (m√≠nimo -510,0 kHz y
m√°ximo +510,0 kHz).
La frecuencia definida se alcanza con la aceleraci√≥n a parametrizada teniendo en cuenta la
frecuencia de inicio y parada Fss. Si la frecuencia definida es menor que el valor Fss, no se
generar√°n impulsos.
La emisi√≥n continua de la frecuencia finaliza si surgen los siguientes eventos:
‚óè Se alcanzan los l√≠mites de la zona de desplazamiento parametrizado (0 en sentido atr√°s),
si no est√° parametrizado ning√∫n eje de valor m√≥dulo
‚óè Otras condiciones de interrupci√≥n para peticiones de desplazamiento (P√°gina 2980)

Respuestas
Durante la tarea de desplazamiento, su ejecuci√≥n se indica con el bit de realimentaci√≥n
(P√°gina 2997) POS activado.
Si se define una nueva frecuencia, el bit de realimentaci√≥n POS_RCD se borra. Una vez se
alcanza la nueva frecuencia tras una fase de aceleraci√≥n o deceleraci√≥n, se vuelve a activar
el bit de realimentaci√≥n POS_RCD.
Si el valor de realimentaci√≥n (P√°gina 2997) est√° ajustado en "Frecuencia", la frecuencia actual
se indica en la interfaz de realimentaci√≥n como valor de 32 bits (tipo de datos STEP 7 REAL).
Nota
Si, durante una tarea de desplazamiento en curso con una frecuencia de 0,0 Hz, se solicita una
frecuencia distinta a 0,0 Hz y la parada de la tarea de desplazamiento mediante el bit de control
STOP, se detiene la tarea de desplazamiento. En tal caso, el bit de respuesta POS_RCD
queda en un estado indefinido.

Detener la petici√≥n de desplazamiento
Parada selectiva de la petici√≥n de desplazamiento

2980

- causada por

indicada por el bit de realimentaci√≥n

STOP por bit de control

-

STOP externo en la entrada digital

STOP_EXT

Se ha alcanzado el final de carrera en sentido adelante (LI‚Äê
MIT_P o bien entrada digital)

STOP_LIMIT_P

Se ha alcanzado el final de carrera en sentido atr√°s (LIMIT_M
o bien entrada digital)

STOP_LIMIT_M

Parada en leva de referencia

STOP_REF

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Recuerde que los finales de carrera tambi√©n se utilizan en el modo de operaci√≥n B√∫squeda del
punto de referencia para la b√∫squeda de la leva de referencia.
Si una petici√≥n de desplazamiento se ha detenido en LIMIT_P, podr√° retirar el eje del final de
carrera con una nueva tarea de desplazamiento con DIR_M. Al detenerse en LIMIT_M podr√°
retirar el eje del final de carrera con DIR_P.

Parada en leva de referencia
Si al iniciar una marcha est√° seleccionada la funci√≥n "Parada en leva de referencia" (el bit de
control STOP_REF_EN est√° activado) y durante la marcha se reconoce la leva de referencia,
se realiza una parada y la marcha finaliza.

Parada de la petici√≥n de desplazamiento en caso excepcional
En los siguientes casos se detiene la petici√≥n de desplazamiento con p√©rdida de
sincronizaci√≥n:
‚óè Control manual incorrecto en la interfaz de control con la tarea de desplazamiento en curso
‚óè Fallo externo ERR_24V por sobrecarga en la alimentaci√≥n del sensor (p. ej. cortocircuito)
‚óè STOP de la CPU/del maestro
‚óè Con eje lineal: se alcanzan los l√≠mites de la zona de desplazamiento

Efectos
Si se da una de las causas citadas que provocan la parada del posicionamiento en curso, √©ste
finalizar√° con una rampa de deceleraci√≥n.
Incluso en caso de parada excepcional de la tarea de desplazamiento, el valor de
realimentaci√≥n se sigue actualizando. Des este modo es posible recorrer la distancia residual
en el momento de la parada mediante una nueva petici√≥n de desplazamiento en el modo
incremental relativo.

Final de carrera y parada externa
Mediante la parametrizaci√≥n se especifica si para la parada externa y los finales de carrera se
conectan contactos normalmente cerrados o normalmente abiertos.
‚óè Contacto normalmente cerrado significa: la parada externa y el efecto de los finales de
carrera se ejecutan con una se√±al 0. Al llegar a los finales de carrera se borra el bit de
control correspondiente.
‚óè Contacto normalmente abierto significa: la parada externa y el efecto de los finales de
carrera se ejecutan con una se√±al 1. Al llegar a los finales de carrera se activa el bit de
control correspondiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2981

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Al detenerse durante la fase de aceleraci√≥n, el 1STEP 5V sigue emitiendo impulsos durante
50 ms como m√°ximo con la frecuencia ya alcanzada antes de iniciar el proceso de frenado.
Con ello se evitan cambios de frecuencia abruptos, que podr√≠an provocar p√©rdidas de pasos.

Tipo de eje y √°rea de desplazamiento (a partir de 6ES7138-4DC01-0AB0)
Resumen
Durante la parametrizaci√≥n se define el tipo de eje que va a controlar el motor paso a paso, el
cual a su vez es controlado por el 1STEP 5V. Es posible elegir uno de los siguientes tipos de
eje:
‚óè Eje lineal
‚óè Eje de valor m√≥dulo

Descripci√≥n del funcionamiento
Eje lineal
Es posible ajustar la zona de desplazamiento de un eje lineal. El l√≠mite inferior siempre es 0, el
l√≠mite superior se parametriza y tiene un rango de valores entre 1 y 16777215.
La zona de desplazamiento se puede limitar a√∫n m√°s con finales de carrera (√°rea de trabajo).
La figura siguiente muestra un eje lineal.

0RYLPLHQWR
M

0RWRU
Eje de valor m√≥dulo
Un eje de valor m√≥dulo es una versi√≥n del eje rotativo. La figura siguiente muestra un eje de
valor m√≥dulo.





2982

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Fin del eje de valor m√≥dulo
Con el par√°metro "Zona de desplazamiento" se define el fin del eje de valor m√≥dulo.
El valor real de posici√≥n no puede alcanzar el valor de la zona de desplazamiento debido a que,
desde el punto de vista f√≠sico, este valor m√°ximo se encuentra en la misma posici√≥n que
corresponde al inicio del eje de valor m√≥dulo (0).
Ejemplo:
Para la zona de desplazamiento se especifica el valor 10000, ver figura anterior.
Durante el movimiento hacia delante, el valor de posici√≥n salta de 9999 a 0 en la interfaz de
realimentaci√≥n y, durante el movimiento hacia atr√°s, de 0 a 9999.

B√∫squeda del punto de referencia
Si durante la parametrizaci√≥n ha seleccionado el eje de valor m√≥dulo y el sistema de
accionamiento est√° provisto de una leva de referencia, es posible llevar a cabo una b√∫squeda
del punto de referencia (P√°gina 2970).
Si despu√©s de generar un n√∫mero de impulsos que corresponden a la zona de desplazamiento
parametrizada no se encuentra la leva de referencia, se interrumpe la marcha. En ese caso
permanecen borrados los bits de estado (P√°gina 2997)SYNC y POS_RCD.

Definici√≥n del punto de referencia
La posici√≥n del punto de referencia s√≥lo admite valores que van de 0 hasta el fin parametrizado
de la zona de desplazamiento - 1.

Posicionamiento relativo
El fin de la zona de desplazamiento (fin del eje de valor m√≥dulo) puede sobrepasarse en ambos
sentidos.

Posicionamiento absoluto
Si durante la parametrizaci√≥n se ha seleccionado el eje de valor m√≥dulo, para la posici√≥n de
destino s√≥lo pueden asignarse valores que van de 0 hasta el fin parametrizado de la zona de
desplazamiento - 1.
A diferencia del eje lineal, indique al principio de la tarea de desplazamiento mediante la
especificaci√≥n de sentido (P√°gina 2993) con qu√© recorrido debe alcanzarse la posici√≥n de
destino:
‚óè Inicio atr√°s (DIR_M): el 1STEP 5V llega a la posici√≥n de destino siguiendo la direcci√≥n en
que los valores reales de la posici√≥n son m√°s bajos (posibilidad 1 en la siguiente figura).
‚óè Inicio adelante (DIR_P): el 1STEP 5V llega a la posici√≥n de destino siguiendo la direcci√≥n
en que los valores reales de la posici√≥n son m√°s altos (posibilidad 2 en la siguiente figura).
‚óè Inicio adelante e inicio atr√°s simult√°neamente (DIR_P y DIR_M): el 1STEP 5V elige
autom√°ticamente el trayecto m√°s corto hasta alcanzar la posici√≥n de destino (posibilidad 1
en la siguiente figura).
La figura siguiente muestra el posicionamiento absoluto con un eje de valor m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2983

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

3RVLELOLGDG
3RVLFL¬µQGH
FRQVLJQD




3RVLELOLGDG
3RVLFL¬µQUHDO


3RVLFL¬µQGH
FRQVLJQD




3RVLFL¬µQUHDO


Habilitaci√≥n de impulsos
Descripci√≥n del funcionamiento
La habilitaci√≥n de impulsos habilita la emisi√≥n de impulsos desde el 1STEP 5V hasta la etapa
de potencia. Sin la habilitaci√≥n de impulsos no es posible realizar ninguna marcha.

Activar la habilitaci√≥n de impulsos
La habilitaci√≥n de impulsos se activa
‚óè a trav√©s de la entrada digital DI0 con la "Funci√≥n DI0" parametrizada como habilitaci√≥n de
impulsos externa (P√°gina 2986);
o bien
‚óè a trav√©s del bit de control DRV_EN con la "Funci√≥n DI0" parametrizada como parada
externa (P√°gina 2986) o final de carrera adelante o atr√°s (P√°gina 2986).
Se puede saber que la habilitaci√≥n de impulsos est√° activada:
‚óè porque el LED (P√°gina 3000)RDY del 1STEP 5V luce cuando la parametrizaci√≥n es
correcta;
‚óè porque el bit de realimentaci√≥n (P√°gina 2997)STS_DRV_EN est√° activado.

Desactivar la habilitaci√≥n de impulsos
Si la habilitaci√≥n de impulsos se desactiva durante el desplazamiento, este se detiene
inmediatamente, ya que no se emiten m√°s impulsos a la etapa de potencia. La distancia
residual y el valor real de la posici√≥n ya no son v√°lidos. La sincronizaci√≥n del eje con el punto
de referencia se pierde. El bit de realimentaci√≥n SYNC y el LED RDY est√°n borrados.
La desactivaci√≥n de la habilitaci√≥n de impulsos durante una parada provoca el borrado del bit
de realimentaci√≥n SYNC y la desactivaci√≥n del LED RDY.
En este caso puede ser necesario llevar a cabo una b√∫squeda del punto de referencia
(P√°gina 2970).

2984

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modificar par√°metros durante el funcionamiento
Introducci√≥n
Algunos par√°metros del 1STEP 5V se pueden modificar durante el funcionamiento sin que sea
necesaria una reparametrizaci√≥n de toda la estaci√≥n ET 200S.

Par√°metros modificables
Los siguientes par√°metros pueden modificarse:
‚óè Frecuencia base Fb:
‚óè Multiplicador n para frecuencia de inicio y parada Fss
‚óè Multiplicador i para aceleraci√≥n/deceleraci√≥n
‚óè Valor de realimentaci√≥n en la interfaz de realimentaci√≥n
Al iniciar la modificaci√≥n de par√°metros con el bit de control (P√°gina 2993)C_PAR, se
comprueban sus valores. Si se han aplicado valores no admisibles, se activa el bit de
realimentaci√≥n (P√°gina 2997)ERR_JOB.
La orden de parametrizaci√≥n s√≥lo afecta a los bits de realimentaci√≥n correspondientes al
desarrollo de la orden ERR_JOB y STS_JOB.

Modificaci√≥n de par√°metros
La figura siguiente muestra el proceso para la modificaci√≥n de par√°metros.

%LWGHHUURU
(55B-2%

W

%LWGHFRQWURO

W

&B3$5
%LWGHUHVSXHVWD
676B-2%

W

/RVSDU¬£PHWURVVRQDFHSWDGRV)LQGHODWUDQVIHUHQFLD
$QXODFL¬µQGHODVROLFLWXG\PDQWHQHUGLVSRQLEOHVORVSDU¬£PHWURV
67(39KDFRPSUHQGLGRODVROLFLWXG
6ROLFLWDUPRGLILFDFL¬µQGHSDU¬£PHWURV\SUHSDUDUSDU¬£PHWURV

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2985

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
S√≥lo uno de los siguientes bits de control debe estar activado en cada momento:
DIR_P, DIR_M o C_PAR.
De lo contrario, se notifica el error ERR_JOB. El mensaje de error de la orden se borra cuando
se inicia la siguiente orden.

Comportamiento de las entradas digitales
Introducci√≥n
Es posible parametrizar la funci√≥n y la reacci√≥n (niveles activos) de las entradas digitales
DI0 (3) y DI1 (7). Estos par√°metros no pueden ser modificados desde el programa de usuario.

Entrada digital DI0 (3)
La funci√≥n de la entrada digital DI0 (3) se puede parametrizar como:
‚óè Habilitaci√≥n de impulsos externa
‚óè Parada externa
‚óè Final de carrera en sentido adelante
‚óè Final de carrera en sentido atr√°s
Adem√°s, es posible parametrizar la reacci√≥n de la entrada digital DI0 (3) como:
‚óè Contacto normalmente cerrado
‚óè Contacto normalmente abierto

Entrada digital DI0 (3) como habilitaci√≥n de impulsos externa
La entrada debe estar activada (P√°gina 2984) durante el funcionamiento. Si la entrada est√°
activada y no hay errores en la parametrizaci√≥n, el 1STEP 5V est√° preparado para el
funcionamiento.

Entrada digital DI0 (3) como parada externa
Esta funci√≥n de entrada permite detener (P√°gina 2980) una tarea de desplazamiento en curso
con una se√±al externa.

Entrada digital DI0 (3) como final de carrera en sentido adelante/atr√°s
Estas funciones de entrada le permiten limitar la zona de desplazamiento en sentido adelante
o atr√°s con una se√±al externa. La se√±al tiene el mismo efecto que uno de los dos bits de control
LIMIT_P o LIMIT_M en la interfaz de control (P√°gina 2993).

2986

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Entrada digital DI1 (7)
La funci√≥n de la entrada digital DI1 (7) se puede parametrizar como:
‚óè Sensor punto de referencia: Leva de referencia
‚óè Sensor punto de referencia y final de carrera en sentido adelante
Esta opci√≥n de parametrizaci√≥n solo est√° disponible si la "Funci√≥n DI0" no est√°
parametrizada como "Final de carrera en sentido adelante".
‚óè Sensor punto de referencia y final de carrera en sentido atr√°s
Esta opci√≥n de parametrizaci√≥n solo est√° disponible si la "Funci√≥n DI0" no est√°
parametrizada como "Final de carrera en sentido atr√°s".
Adem√°s, es posible parametrizar la reacci√≥n de la entrada digital DI1 (7) como:
‚óè Contacto normalmente cerrado
‚óè Contacto normalmente abierto

Entrada digital DI1 (7) como sensor punto de referencia
A esta entrada se conecta un sensor para la leva de referencia.
Se necesita una leva de referencia
‚óè para una b√∫squeda del punto de referencia
‚óè para un modo incremental con parada en la leva de referencia

Entrada digital DI1 (7) como sensor punto de referencia y final de carrera en sentido adelante/atr√°s
Estas funciones de entrada permiten limitar adicionalmente la zona de desplazamiento en
sentido adelante o atr√°s con la leva de referencia. La se√±al tiene adem√°s el mismo efecto que
uno de los dos bits de control LIMIT_P o LIMIT_M en la interfaz de control (P√°gina 2993).
Si se ha parametrizado la reacci√≥n de la entrada digital DI1 (7) como "Sensor del punto de
referencia y final de carrera", el 1STEP 5V elige el sentido de arranque autom√°ticamente hacia
el final de carrera, independientemente del preajuste de sentido de la tarea de desplazamiento.

Reacci√≥n a STOP de la CPU/del maestro
Introducci√≥n
El 1STEP 5V detecta la parada de CPU/del maestro. Su reacci√≥n consiste en detener la tarea
de desplazamiento (P√°gina 2980) en curso.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2987

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Abandono del estado de parada de CPU/del maestro
Estaci√≥n ET 200S

1STEP 5V

Sin reparametrizaci√≥n de la estaci√≥n ET 200S ‚óè La interfaz de realimentaci√≥n del 1STEP 5V
permanece actualizada.
‚óè Los valores modificados por orden de
parametrizaci√≥n se mantienen.
‚óè Si en el momento de la parada de la CPU/del
maestro hab√≠a un bit de control activado (DIR_P,
DIR_M, C_PAR), al abandonar el estado de
parada de la CPU/del maestro los bits STS_JOB y
ERR_JOB est√°n activados. Borre el bit de control.
La marcha / orden de parametrizaci√≥n no se
ejecuta. A continuaci√≥n puede iniciar una nueva
marcha mediante el bit de control.
‚óè Tras la rampa de deceleraci√≥n se desactivan la
habilitaci√≥n de impulsos, el LED RDY y el bit de
estado SYNC.
Con reparametrizaci√≥n de la estaci√≥n ET 200S ‚óè Se reinician los datos sobre marchas y √≥rdenes de
parametrizaci√≥n anteriores.
‚óè Si en el momento de la parada de la CPU/del
maestro la habilitaci√≥n de impulsos estaba
activada a trav√©s del bit de control DRV_EN, tras
la rampa de deceleraci√≥n se desactivan la
habilitaci√≥n de impulsos, el LED RDY y el bit de
estado SYNC.

Reparametrizaci√≥n de la estaci√≥n ET 200S
Una reparametrizaci√≥n de la estaci√≥n ET 200S por medio de la CPU/del maestro DP tiene lugar
en los siguientes casos:
‚óè Conexi√≥n (POWER ON) de la CPU/el maestro DP
‚óè Conexi√≥n (POWER ON) de IM 151 / IM 151 FO
‚óè Tras fallo de la transmisi√≥n DP
‚óè Tras cargar una parametrizaci√≥n o una configuraci√≥n modificada de la estaci√≥n ET 200S en
la CPU/ el maestro DP
‚óè Al insertar el 1STEP 5V
‚óè Con conexi√≥n de alimentaci√≥n o inserci√≥n del correspondiente m√≥dulo de potencia

Consulte tambi√©n
Habilitaci√≥n de impulsos (P√°gina 2984)

2988

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Comportamiento de las entradas digitales (-4DC00-)
Entrada digital DI 3
La funci√≥n de la entrada digital DI 3 se puede parametrizar como:
‚óè Habilitaci√≥n de impulsos externa
‚óè Parada externa
Adem√°s, es posible parametrizar la reacci√≥n de la entrada digital DI 3 como:
‚óè Contacto normalmente cerrado
‚óè Contacto normalmente abierto

Entrada digital DI 3 como habilitaci√≥n de impulsos externa
La entrada debe estar activada (P√°gina 2989) durante el funcionamiento. Si se ha definido la
entrada y no hay errores en la parametrizaci√≥n, el 1STEP 5V/204kHz est√° preparado para el
funcionamiento.

Entrada digital DI 3 como parada externa
Esta funci√≥n de entrada permite detener una tarea de desplazamiento en curso con una se√±al
externa.

Entrada digital REF
A esta entrada se conecta un sensor para la leva de referencia.
Se necesita una leva de referencia
‚óè para una b√∫squeda del punto de referencia
‚óè para un modo incremental con parada en la leva de referencia

Habilitaci√≥n de impulsos (-4DC00-)
Descripci√≥n del funcionamiento
La habilitaci√≥n de impulsos habilita la emisi√≥n de impulsos desde el 1STEP 5V/204kHz hasta
la etapa de potencia. Sin la habilitaci√≥n de impulsos no es posible realizar ninguna marcha.

Activar la habilitaci√≥n de impulsos
La habilitaci√≥n de impulsos se activa
‚óè a trav√©s de la entrada digital DI 3 con la "Funci√≥n DI" parametrizada como habilitaci√≥n de
impulsos externa (P√°gina 2989);

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2989

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
o bien
‚óè a trav√©s del bit de control DRV_EN con la "Funci√≥n DI" parametrizada como parada externa
(P√°gina 2989)
Se puede saber que la habilitaci√≥n de impulsos est√° activada:
‚óè porque el LED (P√°gina 3000)RDY del 1STEP 5V/204kHz luce cuando la parametrizaci√≥n
es correcta;
‚óè porque est√° activado el bit de retroalimentaci√≥n STS_DRV_EN.

Desactivar la habilitaci√≥n de impulsos
Si la habilitaci√≥n de impulsos se desactiva durante la marcha, √©sta se detiene inmediatamente,
ya que no se emiten m√°s impulsos a la etapa de potencia. El motor paso a paso termina sin
control de impulsos. De este modo, la distancia residual ya no es v√°lida. La sincronizaci√≥n del
eje con el punto de referencia se pierde. El bit de retroalimentaci√≥n SYNC y el LED RDY est√°n
borrados.
La desactivaci√≥n de la habilitaci√≥n de impulsos durante una parada provoca el borrado del bit
de retroalimentaci√≥n SYNC y la desactivaci√≥n del LED RDY.
En este caso puede que sea necesario realizar una b√∫squeda del punto de referencia.

6.3.8.4

Configurar y parametrizar 1STEP 5V

Par√°metros
Activar diagn√≥stico de grupo
Diagn√≥stico de grupo
El diagn√≥stico de grupo se activa en la casilla de verificaci√≥n correspondiente.
"Cortocircuito en la alimentaci√≥n del sensor" ERR_24V o "Error de parametrizaci√≥n"
ERR_PARA con diagn√≥stico de grupo habilitado provocan un diagn√≥stico de canal.

Seleccionar frecuencia base
Frecuencia base Fb
La frecuencia base Fb es el valor base para el ajuste de la frecuencia de inicio y parada, la
frecuencia de salida y la aceleraci√≥n/deceleraci√≥n.
Seleccione la frecuencia base adecuada para su aplicaci√≥n.
Encontrar√° informaci√≥n detallada al respecto en Ajuste de la frecuencia base (P√°gina 2966).

2990

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir el multiplicador n
Multiplicador n
El multiplicador n permite ajustar la frecuencia de inicio y parada de forma escalonada:
Fss = Fb √ó n
Rango de valores permitidos: 1 ‚Ä¶ 255

Consulte tambi√©n
Ajuste de la frecuencia base (P√°gina 2966)

Definir el intervalo de tiempo i
Intervalo de tiempo i
El multiplicador i permite ajustar la aceleraci√≥n/deceleraci√≥n de forma escalonada:
a = Fb / (i √ó 0,128 ms)
Rango de valores permitidos: 1 ‚Ä¶ 255

Consulte tambi√©n
Ajuste de la frecuencia base (P√°gina 2966)

Seleccionar el valor de realimentaci√≥n
Valor de realimentaci√≥n
Seleccione qu√© valor de realimentaci√≥n estar√° disponible en la interfaz de realimentaci√≥n
(P√°gina 2997):
‚óè Distancia residual
‚óè Posici√≥n
‚óè Frecuencia

Seleccionar funci√≥n DI0
Funci√≥n DI0
Seleccione qu√© funci√≥n debe tener la entrada digital DI0 (3) (P√°gina 2986):
‚óè Habilitaci√≥n de impulsos externa
‚óè Parada externa

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2991

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè Final de carrera en sentido adelante
‚óè Final de carrera en sentido atr√°s

Seleccionar funci√≥n DI1
Funci√≥n DI1
Seleccione qu√© funci√≥n debe tener la entrada digital DI1 (7) (P√°gina 2986):
‚óè Sensor punto de referencia (leva de referencia)
‚óè Sensor punto de referencia y final de carrera en sentido adelante
Esta opci√≥n s√≥lo est√° disponible si la "Funci√≥n DI0" no est√° parametrizada como "Final de
carrera adelante".
‚óè Sensor punto de referencia y final de carrera en sentido atr√°s
Esta opci√≥n s√≥lo est√° disponible si la "Funci√≥n DI0" no est√° parametrizada como "Final de
carrera atr√°s".

Seleccionar la reacci√≥n de las entradas DI0 y DI1
Entrada DI0, entrada DI1
Seleccione la reacci√≥n de las entradas digitales DI0 (3) y DI1 (7):
‚óè Contacto normalmente cerrado
‚óè Contacto normalmente abierto

Consulte tambi√©n
Comportamiento de las entradas digitales (P√°gina 2986)
Detener la petici√≥n de desplazamiento (P√°gina 2980)

Seleccionar la reacci√≥n de final de carrera en la interfaz de control
Final de carrera en la interfaz de control
Seleccione la reacci√≥n del final de carrera en la interfaz de control (P√°gina 2993):
‚óè Contacto normalmente cerrado
‚óè Contacto normalmente abierto

Consulte tambi√©n
Detener la petici√≥n de desplazamiento (P√°gina 2980)

2992

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Activar eje de valor m√≥dulo
Eje de valor m√≥dulo
En el 1STEP 5V est√° preajustado el tipo de eje "Eje lineal". Si desea controlar un "Eje de valor
m√≥dulo", debe activar la casilla de verificaci√≥n "Eje de valor m√≥dulo".

Consulte tambi√©n
Tipo de eje y √°rea de desplazamiento (a partir de 6ES7138-4DC01-0AB0) (P√°gina 2982)

Definir la zona de desplazamiento
Zona de desplazamiento
El fin del eje de valor m√≥dulo se define con el par√°metro "Zona de desplazamiento".
Rango de valores permitidos: 1 ‚Ä¶ 16777216

Consulte tambi√©n
Tipo de eje y √°rea de desplazamiento (a partir de 6ES7138-4DC01-0AB0) (P√°gina 2982)

Interfaz de control y respuesta del 1STEP 5V
Interfaz de control del 1STEP 5V
Nota
Para el 1STEP 5V los datos siguientes de la interfaz de control est√°n interrelacionados, es
decir, son datos coherentes:
‚óè Bytes 0 ‚Ä¶ 3
‚óè Bytes 4 ‚Ä¶ 7

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2993

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignaci√≥n de la interfaz de control
La tabla siguiente muestra la asignaci√≥n de la interfaz de control (salidas) del 1STEP 5V.
Direcci√≥n

Asignaci√≥n

Bytes 0 a 3

Modo incremental relativo (de byte 4 bit 2 a bit 0 es 0),
Modo incremental absoluto (de byte 4 bit 2 a bit 0 es 2)
Byte 0

Multiplicador G: Fa = Fb √ó R √ó G (rango de valores 1 ‚Ä¶ 255)

Byte 1

Trayecto o posici√≥n bit 23 ‚Ä¶ bit 16

Byte 2

Trayecto o posici√≥n bit 15 ‚Ä¶ bit 8

Byte 3

Trayecto o posici√≥n bit 7 ‚Ä¶ bit 0

B√∫squeda del punto de referencia (de byte 4 bit 2 a bit 0 es 1)
Byte 0

Multiplicador G: Fa = Fb √ó R √ó G (rango de valores 1 ‚Ä¶ 255)

Byte 1

Posici√≥n bit 23 ‚Ä¶ bit 16

Byte 2

Posici√≥n bit 15 ‚Ä¶ bit 8

Byte 3

Posici√≥n bit 7 ‚Ä¶ bit 0

Establecer punto de referencia (de byte 4 bit 2 a bit 0 es 4)
Byte 0

Reservado = 0

Byte 1

Posici√≥n bit 23 ‚Ä¶ bit 16

Byte 2

Posici√≥n bit 15 ‚Ä¶ bit 8

Byte 3

Posici√≥n bit 7 ‚Ä¶ bit 0

Modo de velocidad (de byte 4 bit 2 a bit 0 es 3)
Bytes 0 a 3

Frecuencia como tipo de datos STEP 7 REAL

Petici√≥n de parametrizaci√≥n (byte 5 bit 6 es 1)
Byte 0

Reservado = 0

Byte 1

Multiplicador i: a = Fb √ó R / (i √ó 0,128 ms) (rango de valores 1 ‚Ä¶ 255)

Byte 2

Multiplicador n: Fss = Fb √ó n √ó R (rango de valores 1 ‚Ä¶ 255)

Byte 3

Frecuencia base Fb:
‚óè 0 = 800 Hz
‚óè 1 = 400 Hz
‚óè 2 = 200 Hz
‚óè 3 = 80 Hz
‚óè 4 = 40 Hz
‚óè 5 = 20 Hz
‚óè 6 = 8 Hz
‚óè 7 = 4 Hz
‚óè 8 = 2000 Hz

2994

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direcci√≥n

Asignaci√≥n

Byte 4

Petici√≥n de desplazamiento
Bit 7

Factor de reducci√≥n

R

‚óè 0 = factor 1,0 (sin reducci√≥n)
‚óè 1 = factor 0,1
Bit 6

Detener la tarea de desplazamiento

STOP

Bit 5

Inicio atr√°s

DIR_M

Bit 4

Inicio adelante

DIR_P

Bit 3

Versi√≥n de firmware V1.0.0:
Reservado = 0

EN_LF

A partir de la versi√≥n de firmware V1.0.1:
Habilitaci√≥n de frecuencias inferiores a FSS en el modo de
velocidad
De bit 2 a bit 0 Modo de operaci√≥n

MODE

‚óè 0 = modo incremental relativo (posicionamiento relativo)
‚óè 1 = b√∫squeda del punto de referencia
‚óè 2 = modo incremental absoluto (posicionamiento
absoluto)
‚óè 3 = modo de velocidad
‚óè 4 = definici√≥n del punto de referencia
Petici√≥n de parametrizaci√≥n
De bit 7 a bit 0 El valor es irrelevante y se ignora
Byte 5

Petici√≥n de desplazamiento
Bit 7

Acuse de error de diagn√≥stico

Bit 6

Debe estar establecido en 0

EXTF_ACK
C_PAR

De bit 5 a bit 4 El valor es irrelevante y se ignora

FEEDBACK

Bit 3

Parada en leva de referencia

STOP_REF_EN

Bit 2

Habilitaci√≥n de impulsos

DRV_EN

Bit 1

Final de carrera en sentido adelante

LIMIT_P

Bit 0

Final de carrera en sentido atr√°s

LIMIT_M

Petici√≥n de parametrizaci√≥n
Bit 7

Acuse de error de diagn√≥stico

EXTF_ACK

Bit 6

Modificar par√°metro; debe estar establecido en 1

C_PAR

De bit 5 a bit 4 Valor de realimentaci√≥n en la interfaz de realimentaci√≥n

FEEDBACK

‚óè 00 = distancia residual
‚óè 01 = posici√≥n
‚óè 10 = frecuencia
‚óè 11 = reservado
Bit 3

El valor es irrelevante y se ignora

STOP_REF_EN

Bit 2

Habilitaci√≥n de impulsos

DRV_EN

Bit 1

El valor es irrelevante y se ignora

LIMIT_P

Bit 0

El valor es irrelevante y se ignora

LIMIT_M

Byte 6

Reservado = 0

Byte 7

Reservado = 0

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2995

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Aclaraciones sobre los bits de control
Bits

Aclaraci√≥n

Frecuencia base Fb Codificaci√≥n para el ajuste escalonado de la frecuencia base:
‚óè 0 = 800 Hz
‚óè 1 = 400 Hz
‚óè 2 = 200 Hz
‚óè 3 = 80 Hz
‚óè 4 = 40 Hz
‚óè 5 = 20 Hz
‚óè 6 = 8 Hz
‚óè 7 = 4 Hz
‚óè 8 = 2000 Hz
Este par√°metro se puede modificar durante el funcionamiento mediante una petici√≥n de parametriza‚Äê
ci√≥n (P√°gina 2985) con el bit de control C_PAR.
Modo de operaci√≥n Codificaci√≥n para modo de operaci√≥n:
‚óè 0 = modo incremental relativo (posicionamiento relativo)
‚óè 1 = b√∫squeda del punto de referencia
‚óè 2 = modo incremental absoluto (posicionamiento absoluto)
‚óè 3 = modo de velocidad
‚óè 4 = definici√≥n del punto de referencia
C_PAR

Con este bit se solicita una modificaci√≥n de par√°metros.

DIR_M

Con este bit se solicita y se inicia una tarea de desplazamiento en sentido hacia atr√°s.

DIR_P

Con este bit se solicita y se inicia una tarea de desplazamiento en sentido hacia delante.

DRV_EN

Si la entrada digital DI0 (3) no se utiliza como habilitaci√≥n de impulsos externa, este bit se eval√∫a como
habilitaci√≥n de impulsos. Si no se ha parametrizado una habilitaci√≥n de impulsos externa y DRV_RN
cambia a 0, se puede perder el referenciado (SYNC).

EN_LF

A partir de la versi√≥n de firmware V1.0.1, con este bit en el modo de velocidad se permite la emisi√≥n de
frecuencias cuyo valor absoluto sea menor que la frecuencia de arranque-parada parametrizada.
Si el valor absoluto de la frecuencia predeterminada es menor que la frecuencia de arranque-parada,
la frecuencia predeterminada se emite sin rampa de aceleraci√≥n ni de deceleraci√≥n. Las frecuencias
mayores que la frecuencia de arranque-parada se emiten con rampa de aceleraci√≥n o deceleraci√≥n.
El valor absoluto de la frecuencia m√≠nima que puede emitirse es 0,1 Hz.
El bit se eval√∫a solamente al comenzar el modo de velocidad. Si el bit cambia durante una petici√≥n de
desplazamiento Modo de velocidad, el cambio no surte efecto.

Final de carrera
LIMIT_M

Este final de carrera limita la zona de desplazamiento en sentido hacia atr√°s. Este bit se activa o se
borra en el programa de usuario.

Final de carrera
LIMIT_P

Este final de carrera limita la zona de desplazamiento en sentido hacia delante. Este bit se activa o se
borra en el programa de usuario.

EXTF_ACK

Bit de acuse para aviso de diagn√≥stico

2996

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Bits

Aclaraci√≥n

FEEDBACK

Codificaci√≥n para el valor de realimentaci√≥n en la interfaz de realimentaci√≥n:
‚óè 00 = distancia residual
‚óè 01 = posici√≥n
‚óè 10 = frecuencia
‚óè 11 = reservado
Este par√°metro se puede modificar durante el funcionamiento mediante una petici√≥n de parametriza‚Äê
ci√≥n (P√°gina 2985) con el bit de control C_PAR.

Frecuencia

Valor de 32 bits (tipo de datos STEP 7 REAL) que contiene la frecuencia de impulsos que se va a
generar.

Multiplicador G

Factor para el ajuste escalonado de la velocidad/frecuencia de salida

Multiplicador i

Factor para el ajuste escalonado de la aceleraci√≥n/deceleraci√≥n
Este par√°metro se puede modificar durante el funcionamiento mediante una petici√≥n de parametriza‚Äê
ci√≥n (P√°gina 2985) con el bit de control C_PAR.

Multiplicador n

Factor para el ajuste escalonado de la frecuencia de inicio y de parada
Este par√°metro se puede modificar durante el funcionamiento mediante una petici√≥n de parametriza‚Äê
ci√≥n (P√°gina 2985) con el bit de control C_PAR.

Posici√≥n

Valor de 24 bits que contiene la posici√≥n de destino que se debe alcanzar

Factor de reduc‚Äê
ci√≥n R

Con el bit activado la frecuencia base Fb se multiplica por 0,1. Con ello se reducen en igual medida la
frecuencia de salida Fa, la frecuencia de inicio y parada Fss y la aceleraci√≥n/deceleraci√≥n a.

STOP

Este bit permite detener en cualquier momento una tarea de desplazamiento con una rampa de de‚Äê
celeraci√≥n (ver "Detener la tarea de desplazamiento (P√°gina 2980)").

STOP_REF_EN

Con el bit activado la funci√≥n "Parada en leva de referencia" est√° activa. Cuando se detecta la leva de
referencia, la tarea de desplazamiento se detiene con una rampa de deceleraci√≥n (ver "Detener la tarea
de desplazamiento (P√°gina 2980)").

Trayecto

Valor de 24 bits que contiene el n√∫mero de impulsos que deben avanzarse (sin signo)

Interfaz de realimentaci√≥n del 1STEP 5V
Nota
Para el 1STEP 5V los datos siguientes de la interfaz de realimentaci√≥n est√°n
interrelacionados, es decir, son datos coherentes:
‚óè Bytes 0 ‚Ä¶ 3
‚óè Bytes 4 ‚Ä¶ 7

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2997

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignaci√≥n de la interfaz de realimentaci√≥n
La tabla siguiente muestra la asignaci√≥n de la interfaz de realimentaci√≥n (entradas) del
1STEP 5V.
Direcci√≥n

Asignaci√≥n

Bytes 0 a 3

Distancia residual (bit 23 ‚Ä¶ bit 0 de 32 bits)/
Posici√≥n (bit 23 ‚Ä¶ bit 0 de 32 bits)/
Frecuencia (32 bits, tipo de datos STEP 7 REAL)

Byte 4

Bit 7

Cortocircuito en la alimentaci√≥n del sensor

Bit 6

Reservado = 0

Bit 5

Error de parametrizaci√≥n

ERR_PARA

Bit 4

Punto de referencia calculado

SYNC

Bit 3

Reservado = 0

Bit 2

Posici√≥n alcanzada

POS_RCD

Bit 1

Error en la transmisi√≥n de la orden

ERR_JOB

Bit 0

Transmisi√≥n de la orden en curso

STS_JOB

Bit 7

Tarea de desplazamiento en curso

POS

Bit 6

El final de carrera adelante es la causa de la parada

STOP_LIMIT_P

Bit 5

El final de carrera atr√°s es la causa de la parada

STOP_LIMIT_M

Bit 4

La parada externa es la causa de la parada

STOP_EXT

Bit 3

La leva de referencia es la causa de la parada

STOP_REF

Bit 2

Estado DI0

STS_DI0

Bit 1

Estado DI1

STS_DI1

Bit 0

Estado habilitaci√≥n de impulso activada

STS_DRV_EN

Byte 5

Byte 6

N√∫mero de error en caso de error en la transmisi√≥n de la orden

Byte 7

Reservado = 0

ERR_24V

Aclaraciones sobre los bits de realimentaci√≥n
Bits

Aclaraci√≥n

Frecuencia

Valor de 32 bits (tipo de datos STEP 7 REAL) que contiene la frecuencia de impulsos actual. La
frecuencia de impulsos puede presentar valores positivos (sentido adelante ) y negativos (sentido
atr√°s).

ERR_JOB

Este bit se activa cuando la orden no es clara o no es posible.
La causa del error se especifica mediante el n√∫mero de error que se devuelve (ver la tabla "N√∫mero de
error en la interfaz de realimentaci√≥n" que aparece m√°s abajo).

ERR_PARA

Hay par√°metros incorrectos en la parametrizaci√≥n de la estaci√≥n ET 200S.
La causa del error se especifica mediante el n√∫mero de error que se devuelve (ver la tabla "N√∫mero de
error en la interfaz de realimentaci√≥n" que aparece m√°s abajo).
El bit err√≥neo del par√°metro se borra al transferir una parametrizaci√≥n correcta.

ERR_24V

La alimentaci√≥n del enc√≥der se ha sobrecargado (p. ej. por un cortocircuito) y actualmente est√° des‚Äê
conectada. ERR_24V se pone a cero si ha sido acusado con el bit de control EXTF_ACK. Una vez
eliminada la sobrecarga, se vuelve a conectar la alimentaci√≥n del enc√≥der y ERR_24V permanece
borrado.

N√∫mero de error

Indica la causa del error si ERR_JOB o ERR_PARA est√°n activados (ver la tabla "N√∫mero de error en
la interfaz de realimentaci√≥n" que aparece m√°s abajo).

2998

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Bits

Aclaraci√≥n

POS

Desplazamiento: este bit permanece activado mientras la tarea de desplazamiento est√° en curso.

POS_RCD

Al iniciar un modo incremental o al especificar una nueva frecuencia nominal en el modo de velocidad,
se borra POS_RCD. Una vez finalizado correctamente el modo incremental o alcanzada la frecuencia
nominal en el modo de velocidad, se activa POS_RCD.
Si la marcha se interrumpe (por parada de la tarea de desplazamiento (P√°gina 2980) o por borrado de
la habilitaci√≥n de impulsos (P√°gina 2984)), POS_RCD permanece borrado.

Posici√≥n

Valor de 24 bits que contiene la posici√≥n absoluta actual (sin signo).

Distancia residual

Valor de 24 bits que contiene el n√∫mero de impulsos que todav√≠a deben avanzarse (sin signo).

El byte 0 de la interfaz de realimentaci√≥n es 0.
El byte 0 de la interfaz de realimentaci√≥n es 0.
STOP_EXT

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido con una
parada externa.

STOP_LIMIT_M

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido al
alcanzar el final de carrera atr√°s.

STOP_LIMIT_P

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido al
alcanzar el final de carrera adelante.

STOP_REF

Causa de la parada: este bit permanece activado si la tarea de desplazamiento se ha detenido al
alcanzar la leva de referencia.

STS_DI0

El bit indica el estado de la entrada digital DI0 (3).

STS_DI1

El bit indica el estado de la entrada digital DI1 (7).

STS_DRV_EN

Este bit est√° activado si, dependiendo de la funci√≥n parametrizada de la entrada digital DI0,
‚óè la habilitaci√≥n de impulsos externa est√° activada
o bien
‚óè el bit de control DRV_EN para la habilitaci√≥n de impulsos est√° activado.

STS_JOB

Este bit se activa como respuesta al detectar una solicitud de tarea de desplazamiento o parametri‚Äê
zaci√≥n y despu√©s se reinicia una vez ejecutada la orden.

SYNC

Este bit se activa tras una b√∫squeda del punto de referencia finalizada correctamente o tras definir
manualmente el punto de referencia.
Tras la parametrizaci√≥n con nuevos par√°metros de la estaci√≥n ET 200S o tras el borrado de la habili‚Äê
taci√≥n de impulsos, el bit SYNC est√° borrado.

N√∫mero de error
Si en la interfaz de realimentaci√≥n se indica un error en la transmisi√≥n de la orden (ERR_JOB
activado) o un error en la parametrizaci√≥n b√°sica (ERR_PARA activado), la causa de dicho
error se especifica mediante un n√∫mero de error.
La tabla siguiente muestra los n√∫meros de error de la interfaz de realimentaci√≥n.
N√∫mero de error

Significado

Causas de error generales
0D

Ning√∫n error (en este caso ERR_JOB o ERR_PARA no est√°n activados)

1D

La combinaci√≥n de bits de control no es admisible (DIR_P, DIR_M, C_PAR)

2D

Otra tarea ya est√° en curso

Causas de error en una tarea de desplazamiento
16D

Inicio adelante (DIR_P) con final de carrera adelante (LIMIT_P) activado

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

2999

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N√∫mero de error

Significado

17D

Inicio atr√°s (DIR_M) con final de carrera atr√°s (LIMIT_M) activado

18D

Inicio con el bit de control de parada activado

19D

Inicio con parada externa activada

20D

Inicio aunque falte la habilitaci√≥n de impulsos (interna o externa)

21D

Inicio con STOP_REF_EN activado estando la leva de referencia activada

22D

Inicio sin referencia (en modo incremental absoluto)

23D

Inicio con error de diagn√≥stico pendiente

24D

Inicio interrumpido por parada de CPU/maestro

25D

Inicio con el modo de operaci√≥n equivocado (difiere de la solicitud)

26D

Trayecto o datos de la posici√≥n no admisibles

27D

Multiplicador G para la velocidad es cero

28D

Frecuencia en modo de velocidad no admisible

Causas de error en una orden de parametrizaci√≥n o en la parametrizaci√≥n b√°sica
32D

Los datos de la frecuencia base no son admisibles

33D

El multiplicador n para la frecuencia de inicio y parada es cero

34D

El multiplicador i para la aceleraci√≥n/deceleraci√≥n es cero

35D

El valor de realimentaci√≥n para la interfaz de realimentaci√≥n no es admisible

36D

Combinaci√≥n de funciones de DI0 y DI1 no admisible (final de carrera)

37D

Los datos correspondientes al fin de la zona de desplazamiento no son admisibles

6.3.8.5

Diagn√≥stico del 1STEP 5V

Diagn√≥stico con indicadores LED
Indicador LED del 1STEP 5V

6)


‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§

3000

1

2

5'<

326

3

4





5

Error de grupo (rojo)
Listo para tarea de desplazamiento (verde)
Posicionamiento en curso (verde)
Indicador de estado de la entrada digital 0 (verde)
Indicador de estado de la entrada digital 1 (verde)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Indicadores de estado y error mediante los LEDs del 1STEP 5V
La tabla siguiente muestra la indicaci√≥n de estado y error del 1STEP 5V.
Evento (LED)
SF

RDY

POS

3

Causa

Soluci√≥n

7
No hay parametrizaci√≥n o el m√≥du‚Äê Compruebe la parametriza‚Äê
lo enchufado es incorrecto. Hay un ci√≥n. Eval√∫e el aviso de
aviso de diagn√≥stico.
diagn√≥stico.

ON

ON

si el m√≥dulo est√° parametrizado co‚Äê
rrectamente y hay habilitaci√≥n de
pulsos
ON

si la tarea de desplazamiento est√°
en curso
ON

DI 0 est√° activada
ON

DI 1 est√° activada

Tipos de error
En el manual de producto del m√≥dulo de interfaz utilizado en la estaci√≥n ET 200S encontrar√°
informaci√≥n sobre la estructura del diagn√≥stico de canal.

Tipos de error del 1STEP 5V
La tabla siguiente muestra los tipos de error del 1STEP 5V.
Tipo de error

Significado

Soluci√≥n

1D

00001:
Cortocircuito

Cortocircuito en la ali‚Äê
mentaci√≥n de sensor.

Compruebe el cableado de los interruptores. Co‚Äê
rregir el cableado del proceso.

9D

01001:
Error

Ha aparecido un error
interno en el m√≥dulo.

Sustituir el m√≥dulo.

16D

10000:
Error de parametri‚Äê
zaci√≥n

M√≥dulo no parametri‚Äê
zado.

Corregir la parametrizaci√≥n.

6.3.9

Uso del IM 174

6.3.9.1

Vista general

M√≥dulo de interfaz para accionamientos anal√≥gicos y motores paso a paso
Un m√≥dulo IM 174 (Interface Module) es un m√≥dulo de interfaz, capaz de accionar hasta 4
accionamientos con interfaz anal√≥gica de consigna con un enc√≥der TTL o SSI por eje en el
PROFIBUS is√≥crono.
La comunicaci√≥n entre el controlador y el IM 174 se realiza exclusivamente a trav√©s de
PROFIBUS, a trav√©s de un tipo de telegrama espec√≠fico del IM 174, el cual contiene, junto a los

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3001

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
datos digitales de entrada/salida por cada accionamiento un tipo de telegrama especificado
seg√∫n el perfil PROFIDrive (telegrama est√°ndar 3 y 81). En el marco de la comunicaci√≥n c√≠clica
DP se transmiten al controlador los valores reales del accionamiento (valores de enc√≥der) del
m√≥dulo IM 174 a trav√©s del PROFIBUS is√≥crono y las consignas de velocidad calculadas por
el controlador al m√≥dulo IM 174.
Las consignas de velocidad transmitidas son emitidas a continuaci√≥n por el m√≥dulo IM 174
como valores anal√≥gicos o impulsos a los accionamientos.

Campo de aplicaci√≥n
El IM 174 realiza las siguientes tareas de control:
‚óè Controlar accionamientos anal√≥gicos
‚óè Controlar motores paso a paso
‚óè Leer datos de enc√≥der

6.3.9.2

Configuraci√≥n y programaci√≥n del IM174

Configuraci√≥n del IM174
Pasos necesarios - Descripci√≥n general
El IM 174 se configura en el √°rea "Propiedades" de la ventana de inspecci√≥n. Para ello es
preciso ejecutar los siguientes pasos:
1. Agregar un m√≥dulo PROFIBUS a la configuraci√≥n hardware
2. Parametrizar PROFIBUS is√≥crono
3. Definir par√°metros del accionamiento y enc√≥der para los ejes

Parametrizar PROFIBUS is√≥crono
1. En el √°rea "Direcci√≥n PROFIBUS" seleccione la red PROFIBUS y asigne una direcci√≥n
PROFIBUS.
Nota
Direcci√≥n PROFIBUS en el interruptor DIL
En el m√≥dulo PROFIBUS IM 174 la direcci√≥n PROFIBUS se ajusta a trav√©s de interruptores
DIL. Para que una direcci√≥n PROFIBUS ajustada en el interruptor DIL est√© activa, es
preciso realizar una transici√≥n de apagado y encendido del IM 174. La direcci√≥n PROFIBUS
asignada debe coincidir con la direcci√≥n PROFIBUS ajustada en el interruptor DIL.
2. En el √°rea "Modo is√≥crono" active la casilla de verificaci√≥n "Sincronizar esclavo DP con
ciclo DP equidistante" y ajuste los tiempos Ti/To.
3. En el √°rea "Enc√≥der y accionamientos" seleccione el tipo de telegrama (P√°gina 3012).
4. En el √°rea "Direcciones" defina las √°reas de direcciones para los par√°metros de entrada y
salida de los ejes y asigne una imagen de proceso.

3002

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir par√°metros de accionamiento y de enc√≥der para los ejes
1. En el √°rea "Enc√≥der y accionamientos" seleccione para cada eje eltipo de accionamiento
(P√°gina 3003) y ajuste los par√°metros de accionamiento (P√°gina 3003).
2. En el √°rea "Enc√≥der y accionamientos" seleccione para cada eje el tipo de enc√≥der
(P√°gina 3003) y, en caso necesario, ajuste los par√°metros de enc√≥der (P√°gina 3008)
necesarios.
3. En el √°rea "Par√°metros" puede ajustar los par√°metros (P√°gina 3011) para el
comportamiento de desconexi√≥n.

Enc√≥der y accionamientos
La propiedad "Enc√≥der y accionamientos" de la navegaci√≥n local permite parametrizar los
accionamientos y enc√≥ders conectados al IM 174.

Tipos de accionamientos
Se pueden seleccionar los siguientes tipos de accionamientos:
‚óè Servomotor (accionamiento anal√≥gico)
‚óè Stepper (motor paso a paso)

Tipos de enc√≥der para accionamientos anal√≥gicos
Para los servomotores se pueden seleccionar los siguientes tipos de enc√≥der
‚óè Tipo de enc√≥der no disponible
‚óè Enc√≥der TTL
‚óè Enc√≥der SSI

Tipos de enc√≥ders para motores paso a paso
Para los motores paso a paso se pueden seleccionar los siguientes tipos de enc√≥der
‚óè Tipo de enc√≥der no disponible
‚óè Enc√≥der TTL
‚óè Enc√≥der SSI
‚óè Enc√≥der Stepper

Par√°metros de accionamiento
Tipos de accionamiento
Se pueden seleccionar los siguientes tipos de accionamiento:
‚óè Servo (accionamiento anal√≥gico)
‚óè Stepper (motor paso a paso)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3003

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Tipo de accionamiento Servo
Si ha seleccionado el tipo de accionamiento Servo, puede cambiar el rango de tensi√≥n de la
tensi√≥n de salida anal√≥gica con el bot√≥n de opci√≥n "Unipolar".

Unipolar no seleccionado
Si la casilla "Unipolar" no est√° activada, se emite como consigna una se√±al anal√≥gica con una
tensi√≥n comprendida en el rango de -10V a +10V. Esto permite desplazar el accionamiento en
dos sentidos.

Unipolar seleccionado
Si la casilla "Unipolar" no est√° activada, se emite como consigna una se√±al anal√≥gica con una
tensi√≥n comprendida en el rango de 0V a +10V. El IM 174 define a continuaci√≥n el sentido de
giro en funci√≥n de la consigna actual de velocidad, a trav√©s de una salida digital del IM 174:
‚óè Se√±al de sentido de giro para el eje 1 -> salida digital X11, Pin 13
‚óè Se√±al de sentido de giro para el eje 2 -> salida digital X11, Pin 15
‚óè Se√±al de sentido de giro para el eje 3 -> salida digital X11, Pin 17
‚óè Se√±al de sentido de giro para el eje 4 -> salida digital X11, Pin 19

Alt.DrvRdy
En funci√≥n del accionamiento que se utilice, la se√±al actual Drive Ready emitir√° distintos avisos
de estado:
‚óè El accionamiento notifica el estado "Listo para conexi√≥n" mediante la se√±al Drive Ready.
Para conectar el accionamiento, es necesario habilitarlo por medio del controlador.
‚óè El accionamiento notifica el estado "Disponibilidad" mediante la se√±al Drive Ready. En este
estado, el accionamiento est√° listo para ser regulado y se gu√≠a directamente por una
consigna.
No active la funci√≥n "Alt.DrvRdy" si su accionamiento emite el estado "Listo para conexi√≥n" con
la se√±al Drive Ready (por lo general accionamientos servo).
Active la funci√≥n "Alt.DrvRdy" si su accionamiento emite el estado "Disponibilidad" con la se√±al
Drive Ready (por lo general accionamientos Stepper).
En la informaci√≥n del producto del accionamiento se ofrecen datos sobre el aviso de estado
que emitir√° el accionamiento utilizado.

Tipo de accionamiento "Stepper"
Para accionamientos "Stepper" en los campos "Frecuencia m√°x. [Hz]" y "Frecuencia norm.
[Hz]" es preciso introducir frecuencias [Hz] espec√≠ficas del accionamiento o del proceso. Para
poder operar un motor Stepper con un IM 174 se requiere la electr√≥nica de potencia
correspondiente (p. ej. FM Stepdrive), as√≠ como el motor Stepper.
En la siguiente figura se representa una configuraci√≥n b√°sica de un IM 174 con accionamientos
Stepper con y sin enc√≥der:

3004

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

0DHVWUR'3FRQ
LQWHUID]'3352),%86
'3'5,9(

,0
)067(3'5,9(

)067(3'5,9(

6,0267(3 77/9

6,0267(3 66,

FRQVHQVRU

Figura 6-1

6,0267(3
VLQVHQVRU

Estructura b√°sica de un IM 174 con FM-STEPDRIVE y motor SIMOSTEP

Alt.DrvRdy
En funci√≥n del accionamiento que utilice, la se√±al actual Drive Ready emitir√° distintos avisos
de estado:
‚óè El accionamiento emite el estado "disponible" mediante la se√±al Drive Ready. Para
conectar el accionamiento, es necesario habilitarlo por medio del controlador.
‚óè El accionamiento emite el estado "Disponibilidad" mediante la se√±al Drive Ready. En este
estado, el accionamiento est√° listo para ser regulado y se gu√≠a directamente por una
consigna.
No active la funci√≥n "Alt.DrvRdy" si su accionamiento emite el estado "Listo para conexi√≥n" con
la se√±al Drive Ready (por lo general accionamientos servo).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3005

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Active la funci√≥n "Alt.DrvRdy" si su accionamiento emite el estado "Disponibilidad" con la se√±al
Drive Ready (por lo general accionamientos Stepper).
En la informaci√≥n del producto del accionamiento se ofrecen datos sobre el aviso de estado
que emitir√° el accionamiento utilizado.

Frecuencia m√°x. [Hz] y frecuencia norm. [Hz]
En los campos "Frecuencia m√°x. [Hz]" (frecuencia m√°xima) y "Frecuencia normal [Hz]"
(frecuencia nominal) es preciso introducir frecuencias [Hz] espec√≠ficas del accionamiento o del
proceso.

C√°lculo de la frecuencia normal
La frecuencia normal se calcula con la f√≥rmula:
Frecuencia normal [Hz] = n [r/min] / 60 * Resoluci√≥n en el motor paso a paso
n [r/min]:

Velocidad del motor Stepper
(los valores caracter√≠sticos oscilan entre 500 y 1000 re‚Äê
voluciones por minuto)
Resoluci√≥n en el motor paso a pa‚Äê N√∫mero de incrementos en el motor Stepper (valores ca‚Äê
so:
racter√≠sticos: 500, 1000, 5000)

C√°lculo de la frecuencia m√°x.
La frecuencia m√°x. se calcula con la f√≥rmula:
Frecuencia mas [Hz] = nm√°x [r/min] / 60 * Resoluci√≥n en el motor paso a paso
nmax [r/min]:

Velocidad m√°xima del motor Stepper
(los valores caracter√≠sticos oscilan entre 500 y 1000 re‚Äê
voluciones por minuto)
Resoluci√≥n en el motor paso a pa‚Äê N√∫mero de incrementos en el motor Stepper (valores ca‚Äê
so:
racter√≠sticos: 500, 1000, 5000)
La velocidad m√°xima nmax puede determinarse en base a las curvas caracter√≠sticas de
funcionamiento
de los motores Stepper. En este caso, con el momento M_t tecnol√≥gicamente necesario hay
que
determinar una velocidad m√°xima nmax del motor que se corresponda con la velocidad m√°xima
del eje.

3006

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
0
0BW












Q>8PLQ@

Q


Figura 6-2

 
QPD[

Curvas caracter√≠sticas de un motor paso a paso

Nota
Zona de sobrecarga
Para evitar un funcionamiento en la zona de sobrecarga utilice el accionamiento
exclusivamente en la frecuencia norm.

Descripci√≥n del comportamiento de un motor Stepper
La precisi√≥n de la posici√≥n, la velocidad n y el par M desarrollado por el motor resultan
decisivos para exigencias espec√≠ficas de procesos. Se debe tener en cuenta el
comportamiento del motor Stepper para poder determinar dichos valores √≥ptimamente. A
partir de una determinada velocidad del motor Stepper (aprox. a 500U/min), el par desarrollado
por el motor decae de forma logar√≠tmica, tendiendo a 0 a partir a velocidad m√°xima (aprox. a
3000U/min). Consulte los datos espec√≠ficos en la hoja de datos del motor utilizado.

Seguimiento del modo de funcionamiento en la zona de sobrecarga
Si el motor Stepper no es capaz de desarrollar el momento requerido, se desincroniza con
respecto a la frecuencia predeterminada y su velocidad se colapsa. Ello puede provocar
incluso su parada. En este estado s√≥lo se puede realizar un nuevo registro de movimiento
despu√©s de una consigna temporal predeterminada de 0. En un eje de posicionamiento sin
sensor adicional, la posici√≥n del recorrido se pierde y con ello la sincronizaci√≥n del eje.
Nota
Accionamiento paso a paso con un sensor tipo "Stepper" (modo PULSE REFEED)
Si se opera con un sensor del tipo "Stepper" (modo PULSE REFEED) en estado de parada
puede oscilar el motor paso a paso.
Si el proyecto est√° parametrizado con los ajustes por defecto, esto puede ocurrir cuando el
motor paso a paso, debido a un movimiento de desplazamiento previo, se ha llevado a una
posici√≥n que queda exactamente entre dos pasos naturales del mismo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3007

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Motor paso a paso con enc√≥ders TTL / SSI
Si se usan enc√≥ders TTL / SSI es necesario atender a la relaci√≥n entre resoluci√≥n del enc√≥der
(incl. resoluci√≥n fina) y la resoluci√≥n de pasos del motor.
Para evitar la oscilaci√≥n del motor entre dos valores de posici√≥n cuando est√° parado, el
incremento del motor paso a paso debe ser inferior, en distancia, a la representaci√≥n de la
realimentaci√≥n del sensor (es decir, el incremento del motor paso a paso debe ser superior a
la resoluci√≥n del sensor). Dado el caso debe aplicarse un sensor con menor resoluci√≥n o
aumentar la resoluci√≥n de pasos en el motor paso a paso.

Par√°metros de sensores
Tipos de enc√≥der para accionamientos anal√≥gicos
Para accionamientos anal√≥gicos es posible seleccionar los siguientes tipos de enc√≥der:
‚óè Tipo de sensor no existe
‚óè Enc√≥der TTL
‚óè Sensor SSI

Tipos de enc√≥der para accionamientos paso a paso
Para accionamientos paso a paso es posible seleccionar los siguientes tipos de enc√≥der:
‚óè Tipo de sensor no existe
‚óè Enc√≥der TTL
‚óè Sensor SSI
‚óè Enc√≥der Stepper

Tipo de sensor "Ninguno"
Para el tipo de accionamiento "Servo" se aplica: El eje x no existe o no debe utilizarse. En el
telegrama PROFIBUS s√≥lo se transmiten datos de usuario vac√≠os para este eje.
Para el tipo de accionamiento "Stepper" se aplica: El Stepper se opera sin sensor.
Si el Stepper est√° parametrizado para el modo de funcionamiento sin sensor, s√≥lo se autoriza
la utilizaci√≥n como eje de velocidad.
Si no se utiliza un sensor (SSI/TTL), es posible seleccionar el tipo de enc√≥der "Stepper" para
permitir un posicionamiento, incluso si no se ha conectado ning√∫n sensor.

Enc√≥der TTL
En el enc√≥der tipo "TTL" se pueden ajustar los siguientes par√°metros:
‚óè Resoluci√≥n: Resoluci√≥n del sensor expresada en impulsos por vuelta
‚óè C√°lculo de la velocidad activado: IM 174 calcula la velocidad si la casilla de verificaci√≥n se
encuentra activada.

3008

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè Velocidad normalizada: Este campo de entrada s√≥lo es visible si se ha activado la opci√≥n
"C√°lculo de la velocidad activado". Indique la velocidad nominal del motor en r/min. Con el
c√°lculo de la velocidad a trav√©s del IM 174, la velocidad se calcula con menos ruido.
‚óè Bits reservados para una resoluci√≥n precisa: Ajuste 0 - 15
A trav√©s del par√°metro "Bits reservados para resoluci√≥n fina" se indica la multiplicaci√≥n de
impulsos deseada para los incrementos transferidos en la se√±al de valor real del sensor
G1_XIST1 y G1_XIST2.
El ajuste representa una multiplicaci√≥n de impulso entre 20 = 1 hasta 215 = 32768.
Nota
Resoluci√≥n fina m√≠nima para sensores TTL
En los sensores TTL se debe considerar y ajustar siempre una resoluci√≥n fina m√≠nima de
22(=4).
7UDQVPLWWHGDFWXDOHQFRGHUYDOXH*B;,67RU*B;,67




2YHUIORZV

&XUUHQWHQFRGHULQFUHPHQWV

5HVHUYHGELWVIRUILQHUHVROXWLRQ

Sensor SSI
En el enc√≥der tipo "SSI" se pueden ajustar los siguientes par√°metros:
‚óè Paridad: Se debe seleccionar esta opci√≥n si los datos del enc√≥der se transmiten al IM174
con bit de paridad.
‚óè Longitud del telegrama: Ajuste 0 - 25
N√∫mero de bits de datos de usuario enviados por el enc√≥der
‚óè Encoding: Se soportan los siguientes tipos de codificaci√≥n del enc√≥der:
‚Äì Binary
‚Äì Gray

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3009

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè Velocidad de transferencia: La velocidad ajustada debe ser id√©ntica en todos los enc√≥ders
SSI. Si hay ajustadas diferentes velocidades, se adopta la velocidad del enc√≥der SSI que
tenga asignado el n√∫mero de enc√≥der m√°s alto.
Se soportan las siguientes velocidades:
‚Äì 187,5 kbits/s
‚Äì 375 kbits/s
‚Äì 750 kbits/s
‚Äì 1,5 Mbits/s
‚Äì 3,0 Mbits/s
Nota
Ajuste como m√°ximo 187,5 kbits/s. No es conveniente asignar a este m√≥dulo
velocidades m√°s altas.
‚óè Bits reservados para una resoluci√≥n fina: Ajuste 0 - 15
A trav√©s del par√°metro "Bits reservados para resoluci√≥n fina" se indica la multiplicaci√≥n de
impulsos deseada para los incrementos transferidos en la se√±al de valor real del sensor
G1_XIST1 y G1_XIST2.
El ajuste representa una multiplicaci√≥n de impulso entre 20 = 1 hasta 215 = 32768.

Sensor Stepper
Accionamiento en modo PULSE REFEED
Un eje x con el tipo de accionamiento "Stepper" se puede operar con un sensor tipo "Stepper".
En este modo de operaci√≥n, el IM 174 retroalimenta las consignas al controlador en forma de
valores reales.
En el enc√≥der tipo "Stepper" se pueden ajustar los siguientes par√°metros:
‚óè Vigilancia del motor: Activando la casilla de verificaci√≥n "Vigilancia motor" se supervisa
continuamente la cantidad de pasos de un motor Stepper con base en la distancia al punto
de referencia definido (ver "Distancia Bero"). Cuando se trabaja sin sensor, el
accionamiento Stepper sirve tambi√©n para realimentar el valor real (pulse refeed).
‚óè Distancia Bero: En "Distancia Bero" se introduce la cantidad de pasos (para el
accionamiento Stepper usado) entre dos se√±ales Bero. El recorrido entre las dos se√±ales
Bero es la distancia al punto de referencia.
‚óè Tolerancia Bero: Ajuste 0 - 65535
En "Tolerancia Bero" se introduce la desviaci√≥n de pasos permitida con respecto a la
distancia Bero. El rango del n√∫mero de pasos resultante se encuentra dentro de la siguiente
tolerancia:
Rango del n√∫mero de pasos resultante = Distancia Bero ¬± 1/2 * Tolerancia Bero
‚óè Bits reservados para una resoluci√≥n precisa: Ajuste 0 - 15
A trav√©s del par√°metro "Bits reservados para resoluci√≥n fina" se indica la multiplicaci√≥n de
impulsos deseada para los incrementos transferidos en la se√±al de valor real del sensor
G1_XIST1 y G1_XIST2.
El ajuste representa una multiplicaci√≥n de impulso entre 20 = 1 hasta 215 = 32768.

3010

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Par√°metros
La propiedad "Par√°metros" de la navegaci√≥n local permite definir par√°metros importantes para
el IM 174.

Rampa de parada [ms]
El rango de valores oscila entre 0 y 65535 ms.
A trav√©s del par√°metro "Rampa de parada" se puede definir una funci√≥n lineal en el tiempo que,
en caso de detectarse un fallo, haga que todos los accionamientos conectados al IM 174 se
frenen hasta la consigna 0.
La rampa de parada act√∫a tras los fallos siguientes:
‚óè Alarma de temperatura del m√≥dulo (aprox. 90¬∞C CON, aprox. 85¬∞C DES)
‚óè Errores de se√±ales de vida
‚óè Error de sincronizaci√≥n entre maestro y esclavo
Nota
Valor de par√°metro 0
En presencia de un fallo, un valor de par√°metro 0 hace que el accionamiento se pare de
forma natural.





W>PV@


1)

Consigna m√°xima

2)

Consigna actual

3)
Valor del par√°metro: Rampa de parada
Figura 6-3
Par√°metros: Rampa de parada

Tiempo de retardo de apagado
El rango de valores oscila entre 0 y 65535 s.
El par√°metro "Tiempo de retardo de apagado" permite especificar una temporizaci√≥n tras la
que, en caso de que se produzca una alarma de temperatura, se activa la rampa de parada.
El tiempo de retardo de apagado inicia al superarse una temperatura de 90 ¬∞C en el m√≥dulo.
Si mientras est√° activo el tiempo de retardo la temperatura baja a aprox. 85 ¬∞C, entonces no se
activa la rampa de parada y se desactiva el tiempo de retardo de apagado.

Errores de se√±ales de vida tolerables
El rango de valores oscila entre 0 y 15.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3011

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Con el par√°metro "Errores de se√±ales de vida tolerables" se especifica el n√∫mero de errores
de se√±ales de vida tolerables del maestro DP. Si se sobrepasa el n√∫mero parametrizado se
activa la rampa de parada. El rango de valores se encuentra en

Modo conforme 611U
En el modo conforme 611U el origen de la se√±al para referenciar los ejes ya no se especifica
mediante el telegrama est√°ndar PROFIDrive (STD3, palabra de control del enc√≥der G1_STW)
sino a trav√©s de la palabra digital de salida adicional contenida en el telegrama PROFIBUS del
IM 174 (ver tabla "Estructura de telegrama" en el apartado "Tipo de telegrama").
Modo conforme 611U:
‚óè Desactivado
La fuente de la se√±al para el referenciado se especifica a trav√©s de la palabra de control del
enc√≥der Gx_STW en el telegrama est√°ndar PROFIDrive.
‚óè Activado
La fuente de la se√±al para el referenciado se especifica a trav√©s de la palabra digital de
salida adicional contenida en el telegrama PROFIBUS.

Seleccionar tipo de telegrama
Tipo de telegrama
El Esclavo DP IM 174 opera con dos tipos de telegramas espec√≠ficos: cuatro ejes con un
sensor cada uno (telegrama est√°ndar 3 y 81) y datos E/S.
Nota
Telegrama est√°ndar 81
El telegrama est√°ndar 81 s√≥lo puede utilizarse para sensores.

3012

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Estructura de telegrama
Estructura de telegrama
La siguiente visi√≥n global explica la estructura del telegrama.
Tabla 6-1
Tipo de telegrama

Descripci√≥n

4 ejes con un sensor cada uno, telegrama est√°n‚Äê
dar 3 + EA, PZD-5/9 A/E 1/1 o telegrama 81 + EA,
PZD-2/6 + A/E 1/1

4 telegramas est√°ndar 3 √≥ 81 y por cada uno una
palabra PZD para datos E/S digitales

PZD x/y N√∫mero de datos de proceso/palabras, x: consigna, y: valor real,
p. ej. PZD-5/9:
5 datos de proceso/palabras para consignas
9 datos de proceso/palabras para valores reales
(VWUXFWXUDGHWHOHJUDPDGHO,0
(MH
67'¬µ67'
/RZ

(MH

(MH

(MH

(6

67'

67'

67'

$:RUG

(MH

(MH

(MH

(6

67'

67'

67'

(:RUG

(MH
67'¬µ67'

&RQVLJQDV
PDHVWUR!HVFODYR
+LJK
9DORUHVUHDOHV
HVFODYR!PDHVWUR

67'7HOHJUDPDHVW¬£QGDUFRQIRUPHODHVSHFLILFDFL¬µQ352),'ULYH9
$:RUGGDWRVGHVDOLGDGLJLWDOHV ELW
(:RUGGDWRVGHHQWUDGDGLJLWDOHV ELW

7HOHJUDPDHVW¬£QGDU,QWHUID]FRQVLJQDGHYHORFLGDGELWFRQVHQVRU
3='

3='

67:
/RZ

3='

3='

3='

162//B%
3='

=6:

67:

3='

1,67B%

3='
&RQVLJQD PDHVWUR!HVFODYR

*B67:

+LJK
3='

3='

3='

=6:

*B=6:

3='

3='

3='

*B;,67
9DORUUHDO HVFODYR!PDHVWUR

*B;,67

7HOHJUDPDHVW¬£QGDU,QWHUID]FRQVLJQDGHYHORFLGDGELWFRQVHQVRU
3='

3='

67:

*B67:

3='

3='

=6:

*B=67:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

&RQVLJQD PDHVWUR!HVFODYR
3='

3='

*B;,67

3='

3='

*B;,67

9DORUUHDO
HVFODYR!PDHVWUR

3013

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Tipo de telegrama

Descripci√≥n

$:RUG GDWRVGHVDOLGDGLJELW
+LJK%\WH


 

/RZ%\WH
 

 



6DOLGDGLJ‡≤¶‡≤¶!;3LQ
6DOLGDGLJ‡≤¶6H¬≥DOGHGLUHFFL¬µQ‡≤¶FRQ
XQLS+XVLOOR‡≤¶!;3LQ
6HOHFFL¬µQ5HIHUHQFLDGRPHGLDQWHVH¬≥DO
FHURH[WHUQD
0RGRFRQIRUPH8
1RXWLOL]DGR

(:RUG GDWRVGHHQWUDGDGLJELW
+LJK%\WH


   

/RZ%\WH




 

 
(QWUDGDGLJ‡≤¶6H¬≥DOFHURH[W‡≤¶
!;3LQ
(QWUDGDGLJ‡≤¶3DOSDGRU‡≤¶
!;3LQ
(QWUDGDGLJ‡≤¶'UYB5G\‡≤¶
!;3LQ
(QWUDGDGLJ‡≤¶'UYB5G\‡≤¶
!;3LQ
1RXWLOL]DGR

Nota
El tipo de telegrama del esclavo DP IM 174 ajustado debe coincidir con el tipo de telegrama
ajustado en el controlador. No tiene lugar una sincronizaci√≥n autom√°tica.

3014

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Palabra de control del sensor Gx_STW
La siguiente visi√≥n global contiene una descripci√≥n de la palabra de control del enc√≥der
(extracto). La visi√≥n global se refiere a los siguientes requisitos:
‚óè B√∫squeda de la marca de referencia
‚óè Medida al vuelo
‚óè Fallo de sensor

Nota
Medici√≥n de flancos ascendentes o descendentes
El IM 174 soporta √∫nicamente la medici√≥n de flancos ascendentes o descendentes.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3015

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Valor real adicional del sensor Gx_XIST2
La siguiente visi√≥n global describe los c√≥digos de error en Gx_XIST2 con G1_ZSW, Bit15 ==
1:
Tabla 6-2
G1_XIST2

C√≥digos de error en Gx_XIST2
Significado

Causas posibles/descripci√≥n

1Hex

Error de suma del sen‚Äê
sor

El nivel de se√±al de los sensores es demasiado bajo, presenta
fallos (blindaje insuficiente) o la vigilancia de rotura de hilo se ha
activado.

2Hex

Vigilancia de se√±ales
cero

Entre dos se√±ales cero del sensor ha surgido una fluctuaci√≥n en
la medici√≥n de la posici√≥n del rotor (posiblemente se han perdi‚Äê
do 2 rayas del sensor).

Palabra de estado ZSW_1 - bit 11 a bit 14
La siguiente visi√≥n global describe la palabra de estado ZSW_1 en relaci√≥n a los avisos
espec√≠ficos del m√≥dulo bit 11 a bit 14:
Tabla 6-3

Palabra de estado ZSW_1

Bit

Nombre

Descripci√≥n

11

Error de temperatura

Se ha excedido una temperatura determinada en la carcasa del m√≥dulo IM 174.

12

Error de sincronizaci√≥n PLL

El IM 174 no puede sincronizarse con la se√±al de control global.

13

Error Master Life Sign

El IM 174 no puede sincronizarse con la se√±al de vida maestra.

14

Error de accionamiento

Se ha producido un error de accionamiento, p. ej. falta la se√±al Drive Ready.

Vigilancia de la marca cero
Funcionamiento de la vigilancia de la marca cero del sensor
La vigilancia de la marca cero compara los incrementos detectados entre dos marcas cero con
la resoluci√≥n del sensor configurada. Si se detecta una diferencia se notifica un error del
sensor.
Las pistas A y B, as√≠ como la pista Z del sensor, deben encontrarse simult√°neamente en el nivel
High, para que la vigilancia de la marca cero puede ejecutarse correctamente.
Limitaciones:
‚óè El fallo de una marca cero en s√≠ no provoca irremediablemente un error, ya que la
comprobaci√≥n solo se ejecuta al alcanzar la marca cero.
‚óè El resultado de los incrementos MOD 16 contados debe ser distinto de cero para notificar
un error.
‚óè El resultado de los incrementos MOD 10 contados debe ser distinto de cero para notificar
un error.
Ejemplo:
Configuraci√≥n del sensor: rayas TTL 2048

3016

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
incrementos del sensor contados 2049 -> error del sensor
incrementos del sensor contados 1024 -> ning√∫n error del sensor

Programar IM 174
Para la programaci√≥n del IM 174 se recomienda el paquete opcional "Easy Motion Control".

Instrucciones para IM 174
La lista de instrucciones Easy Motion Control incluye las siguientes instrucciones para IM 174:
‚óè EncoderIM174 - Uso del IM 174 como m√≥dulo de lectura de recorrido para enc√≥ders
incrementales y absolutos
‚óè OutputIM174 - Uso de un canal del m√≥dulo IM 174 como m√≥dulo de salida

6.3.10

Uso de Easy Motion Control

6.3.10.1

Posicionamiento con Easy Motion Control

Descripci√≥n del producto
Descripci√≥n general
Easy Motion Control permite posicionar accionamientos de forma regulada. El movimiento se
controla exclusivamente por software (instrucciones) en la CPU. Para la conexi√≥n con los
accionamientos no se requiere hardware especial, pero para detectar los valores de posici√≥n
real y para emitir las consignas de velocidad es obvio que debe estar presente la periferia
correspondiente.
Las instrucciones de Easy Motion Control se han elaborado de conformidad con la "Technical
Specification Function blocks for motion control V1.0" de PLCopen.
La parametrizaci√≥n se lleva a cabo mediante un software de configuraci√≥n que tambi√©n ofrece
soporte en la puesta en marcha mediante funciones de prueba. Todos los par√°metros de un
eje se encuentran en un bloque de datos, el DB de eje.
Los accionamientos pueden conectarse a periferia centralizada o bien, a trav√©s de un maestro
DP/controlador IO, a periferia descentralizada.
El desplazamiento se realiza interconectando las instrucciones correspondientes y
ejecut√°ndolas en el programa de usuario.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3017

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Componentes para el posicionamiento
La figura siguiente muestra una configuraci√≥n de ejemplo con Easy Motion Control.
,QWHUUXSWRUGH
SDUDGDGHHPHUJHQFLD

SHM&38'3

5HG

+DELOLWDFL¬µQ
'LVSRVLWLYRGH
VHJXULGDG

(WDSDGH
SRWHQFLD

YROWLRV
67(3
(0&

(VWDFLRQHVGH
PHFDQL]DGR

3&3*

0RYLPLHQWR
0

(QF¬µGHU

0RWRU

)LQDOGH
FDUUHUDGH
VHJXULGDG

(DV\0RWLRQ&RQWUROFRQ
VRIWZDUHGHSDUDPHWUL
]DFL¬µQLQVWUXFFLRQHV\
PDQXDO

Dispositivo de seguridad
Cuando se dispara el dispositivo de seguridad, el interruptor de parada de emergencia
desconecta la alimentaci√≥n.

Etapa de potencia
La etapa de potencia controla el motor. Los finales de carrera de seguridad desconectan la
etapa de potencia.

Motor
El motor es controlado por la etapa de potencia y acciona el eje.

Enc√≥der
El enc√≥der proporciona informaci√≥n de recorrido y sentido.

3018

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Easy Motion Control
Easy Motion Control ofrece las siguientes funciones:
‚óè JOG
‚óè B√∫squeda del punto de referencia
‚óè Posicionamiento absoluto/relativo
‚óè Reductor electr√≥nico
‚óè Posicionamiento del punto de referencia
‚óè Todas las funciones de vigilancia habituales para posicionamiento
‚óè Correcci√≥n de velocidad
‚óè Regulaci√≥n de posici√≥n
‚óè Simulaci√≥n
‚óè Drivers de entrada preconfeccionados para registro de valores del enc√≥der o drivers de
salida para m√≥dulos de salidas anal√≥gicas

M√≥dulos para lectura de recorrido y salida de consigna
Los m√≥dulos constituyen la interfaz entre la CPU y la m√°quina. Leen las posiciones del eje y
env√≠an consignas a la etapa de potencia.

CPU
La CPU ejecuta el programa de usuario que incorpora las instrucciones de Easy Motion
Control.

PC/PG
Un PC o programadora sirve para
‚óè Parametrizar: Easy Motion Control se parametriza con el software de configuraci√≥n o
directamente en el bloque de datos de eje (ver Configuraci√≥n del objeto tecnol√≥gico Eje
(P√°gina 3030)).
‚óè Programar: Las instrucciones de Easy Motion Control se incorporan directamente en el
programa.

Configuraciones hardware admitidas
Las configuraciones hardware representadas a continuaci√≥n son soportadas c√≥modamente
por instrucciones de driver. Estas instrucciones se suministran con Easy Motion Control.
La adaptaci√≥n a configuraciones que no son soportadas directamente es posible mediante
instrucciones de driver libres que se suministran de igual forma.
La figura siguiente muestra configuraciones descentralizadas para Easy Motion Control.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

,0

6,02'5,9(
VHQVRU
352),%86'3

,0

6

60
(76
66,

6

,0
&RQH[L¬µQGH
HQF¬µGHU

,0
6DOLGD
DQDO¬µJLFD
(76
$QDO¬µJLFR

,0
(QF¬µGHULQFUHPHQWDO

6,1$0,&6

:LQ$&

6,1$0,&6

352),%86'3
352),1(7,2

6HUYRFRQYHUWLGRU

(QF¬µGHUDEVROXWR

6,1$0,&6

60

00PLW'3
%DXJUXSSH

)0
(76
&RXQW
99

3020

6
60

60

&38&

&38&

6
)0

6HUYRFRQYHUWLGRU

(QF¬µGHULQFUHPHQWDO

(QF¬µGHUDEVROXWR

La figura siguiente muestra configuraciones centralizadas para Easy Motion Control.

60

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Principios b√°sicos del posicionamiento con Easy Motion Control
Dise√±o de la regulaci√≥n de posici√≥n
En el posicionamiento regulado, la posici√≥n actual del eje se compara con la posici√≥n de
consigna. Las desviaciones se corrigen por medio del regulador de posici√≥n durante el
desplazamiento y tambi√©n en parada.
La figura siguiente muestra el esquema de principio para el posicionamiento regulado con
Easy Motion Control. Una instrucci√≥n de desplazamiento (P√°gina 3053) especifica consignas
de posici√≥n. El driver de entrada detecta la posici√≥n real del eje. El regulador de posici√≥n
(P√°gina 3040) compara el valor de la posici√≥n real con la consigna y genera una consigna de
velocidad a partir de la diferencia. El driver de salida emite la consigna de velocidad
normalizada.

(DV\0RWLRQ&RQWURO
,QVWUXFFL¬µQGH
GHVSOD]DPLHQWR 
JHQHUDFRQVLJQD
GHSRVLFL¬µQ



5HJXODGRUGH
SRVLFL¬µQJHQHUD
FRQVLJQDGH
YHORFLGDG

'ULYHUGHVDOLGD
QRUPDOL]D
FRQVLJQDGH
YHORFLGDG

'ULYHUGHHQWUDGD
OHHYDORUGHO
HQF¬µGHU\JHQHUD
YDORUUHDOGH
SRVLFL¬µQ

0¬µGXORGH
VDOLGDJHQHUD
WHQVL¬µQ

$FFLRQD
PLHQWR

0

0¬µGXORGH
HQWUDGD
FDSWXUDYDORU
GHOHQF¬µGHU

La figura siguiente muestra la relaci√≥n entre la velocidad y el trayecto recorrido por el eje
durante un desplazamiento.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3021

Control de movimiento

9HORFLGDG

6.3 Control de movimiento (S7-300, S7-400)

7LHPSR

5HFRUULGR

'HVSOD]DPLHQWR
FRQVWDQWH

$FHOHUDFL¬µQ

)UHQDGR

7LHPSR

Definiciones de t√©rminos
Destino
Define la posici√≥n absoluta o relativa del eje que se alcanza en el posicionamiento.

Desplazamiento
Los desplazamientos son iniciados por la llamada de instrucciones, que en adelante
llamaremos instrucciones de desplazamiento.

Distancia residual
La distancia residual es la diferencia entre la posici√≥n de destino y la consigna de posici√≥n
actual.

Error de seguimiento
Durante un desplazamiento, debido a la inercia del eje, se produce una diferencia entre la
consigna de posici√≥n actual y la posici√≥n real. Esta diferencia se denomina error de
seguimiento. Si la diferencia supera un valor parametrizable, se produce un error de
seguimiento.

3022

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Zonas de vigilancia
‚óè Zona de trabajo:
Define la zona de desplazamiento permitida del eje, la cual se determina para la tarea en
cuesti√≥n con ayuda de los finales de carrera por software (P√°gina 3023) o con el final deleje
rotativo (P√°gina 3024).
‚óè Zona de velocidad cero:
Define una zona parametrizable que el eje no puede abandonar a velocidad cero. La zona
de velocidad cero se encuentra a izquierda y derecha del punto de destino.
‚óè Zona de destino:
Cuando la consigna alcanza el destino al final de un desplazamiento, se vigila la entrada del
eje en la zona de destino. La zona de destino sirve para vigilar la precisi√≥n de
posicionamiento de la aplicaci√≥n en cuesti√≥n, y se encuentra a izquierda y derecha del
punto de destino.
Nada m√°s alcanzarse la zona de destino comienza la vigilancia de la zona de velocidad
cero. Por consiguiente, la zona de velocidad cero debe ser mayor que la zona de destino.
La figura siguiente muestra la ubicaci√≥n de las distintas zonas en torno al punto de destino.
,QLFLRGHOILQDOGHFDUUHUDSRUVRIWZDUH

'HVWLQR

)LQGHOILQDOGHFDUUHUDSRUVRIWZDUH

=RQD =RQD
GH
GH
GHVWLQR GHVWLQR
=RQDGH
YHORFLGDG
FHUR

=RQDGH
YHORFLGDG
FHUR

=RQDGH
WUDEDMR

Eje lineal
Descripci√≥n
La zona de trabajo va desde el inicio del final de carrera por software hasta el fin del final de
carrera por software, y est√° limitada a 1 √ó 224 unidades de longitud (en la zona de coordenadas
entre -224+6 y +224-6).
La longitud f√≠sica del eje est√° limitada por los topes mec√°nicos del eje.
El rango num√©rico de Easy Motion Control tan solo es relevante si la vigilancia de la zona de
trabajo est√° desactivada. Est√° limitado a 2 √ó 224-12 unidades de longitud (de -224+6 a +224-6).
El rango del enc√≥der es
‚óè en el caso de un enc√≥der absoluto, el rango abarcado por el enc√≥der.
‚óè en el caso de un enc√≥der incremental, el trayecto desde -231 hasta +231 incrementos.
En los ejes lineales, la zona de trabajo (= zona de desplazamiento) est√° limitada de la manera
siguiente:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3023

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Zona de trabajo < Longitud f√≠sica del eje < Rango num√©rico de Easy Motion Control < Rango
del enc√≥der
La figura siguiente muestra las diferentes zonas de un eje lineal.

,QLFLRGHOILQDOGHFDUUHUDSRUVRIWZDUHP¬ØQLPR






>XQLGDGGHORQJLWXG@

)LQGHOILQDOGHFDUUHUDSRUVRIWZDUHP¬£[LPR
 

>XQLGDGGHORQJLWXG@

,QLFLR
I¬ØVLFR



>8QLGDGGHORQJLWXG@

)LQDO
I¬ØVLFR

  

>8QLGDGGHORQJLWXG@

=RQDGHWUDEDMR
/RQJLWXGGHHMHI¬ØVLFD
5DQJRQXP¬´ULFRGH(DV\0RWLRQ&RQWURO
5DQJRGHOHQF¬µGHU
(QF¬µGHUDEVROXWRUDQJRFXELHUWRSRUHOHQF¬µGHU
(QF¬µGHULQFUHPHQWDO  
B ,QFUHPHQWRV

Eje rotativo
Descripci√≥n
La zona de trabajo va desde el inicio del eje rotativo hasta el final del eje rotativo, y est√° limitada
a 1 √ó 224 unidades de longitud (en la zona de coordenadas entre -224+6 y +224-6).

3024

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El rango del enc√≥der
‚óè en el caso de un enc√≥der incremental, puede ser cualquiera.
‚óè en el caso de un enc√≥der absoluto, viene determinado por lo siguiente:
Rango del enc√≥der = zona de trabajo √ó n
con:
‚Äì n = 1 para enc√≥ders monovuelta
‚Äì n > 1 y valor entero para enc√≥ders multivuelta
En el caso de un eje rotativo, el valor real retorna al comienzo del eje despu√©s de cada vuelta.
Por lo tanto, los ejes rotativos pueden desplazarse de forma continua m√°s all√° del final o del
principio del eje. La posici√≥n del eje se indica siempre como valor entre el principio y el final del
eje rotativo.
9DORUP¬£[LPRLQGLFDEOH

6.3.10.2

,QLFLRGHOHMHURWDWLYR ILQGHOHMHURWDWLYR

Funciones con Easy Motion Control

Resumen
Easy Motion Control sirve para posicionar un eje en un punto de destino con la aceleraci√≥n,
velocidad y retardo que elija el usuario o para desplazarlo a velocidad constante. Los
movimientos de desplazamiento necesarios para ello se inician mediante la llamada de
instrucciones de desplazamiento.
Al lanzar una petici√≥n de desplazamiento, en la instrucci√≥n de desplazamiento se parametriza
el punto de destino o el trayecto del movimiento de desplazamiento, y, dado el caso, tambi√©n
la aceleraci√≥n, velocidad o retardo que el usuario desee. El sistema de medida (unidad de
longitud) de estos valores puede elegirse a discreci√≥n (p. ej. mm).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3025

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

JOG
Con la funci√≥n "Jog" se mueve el accionamiento en sentido positivo o negativo. No se
preselecciona ning√∫n destino.
La funci√≥n Jog se ejecuta con la instrucci√≥n MC_MoveJog.

Sincronizar
Para asignar un valor de enc√≥der reproducible a la posici√≥n real debe establecerse una
referencia (sincronizaci√≥n) entre la posici√≥n del eje y el valor del enc√≥der.
La funci√≥n Sincronizar se ejecuta con la instrucci√≥n MC_Home.

Sincronizar con enc√≥der incremental
Al conectar la instalaci√≥n, un enc√≥der incremental no proporciona informaci√≥n sobre la
posici√≥n actual del eje. En lugar de ello, empieza a contar desde la posici√≥n actual del eje.
Es necesario realizar una sincronizaci√≥n cada vez que se conecte la instalaci√≥n, despu√©s de
un fallo y despu√©s de sustituir el enc√≥der.
La sincronizaci√≥n de un enc√≥der incremental puede llevarse a cabo
‚óè mediante b√∫squeda del punto de referencia
‚óè mediante posicionamiento del punto de referencia

Sincronizar con enc√≥der absoluto
Al poner en servicio un enc√≥der absoluto, el valor indicado por el enc√≥der debe sincronizarse
con la posici√≥n real del eje.
No es necesario repetir la sincronizaci√≥n tras una nueva conexi√≥n de la instalaci√≥n ni despu√©s
de un fallo. Sin embargo, despu√©s de sustituir el enc√≥der s√≠ es necesario realizar de nuevo la
sincronizaci√≥n.
La sincronizaci√≥n de un enc√≥der absoluto solo puede llevarse a cabo mediante el
posicionamiento del punto de referencia (tambi√©n denominado reajuste del enc√≥der
absoluto).

B√∫squeda del punto de referencia
El eje se mueve en direcci√≥n al punto de referencia. Al rebasar el punto de referencia, el eje
queda sincronizado, es decir, se asigna un valor de posici√≥n al valor num√©rico del enc√≥der
incremental. En cada b√∫squeda del punto de referencia se puede asignar un nuevo valor de
coordenadas al punto de referencia.
La b√∫squeda del punto de referencia tan solo es posible con enc√≥ders incrementales.

Posicionamiento del punto de referencia
En el posicionamiento del punto de referencia se asigna un nuevo valor de coordenadas a la
posici√≥n actual.

3026

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El posicionamiento del punto de referencia es posible con enc√≥ders incrementales y absolutos.

Posicionamiento absoluto o relativo
Easy Motion Control puede
‚óè mover el eje a puntos de destino absolutos,
‚óè desplazar el eje de forma relativa por un tramo en un sentido predeterminado.
Las funciones Posicionamiento absoluto y Posicionamiento relativo se ejecutan con las
instrucciones MC_MoveAbsolute y MC_MoveRelative.

Reductor
Easy Motion Control implementa un reductor electr√≥nico entre dos ejes con la instrucci√≥n
MC_GearIn.

Detenci√≥n de un desplazamiento
Un desplazamiento en curso puede ser detenido en cualquier momento.
La funci√≥n Detener se ejecuta con la instrucci√≥n MC_StopMotion.

Anulaci√≥n de un desplazamiento
Una instrucci√≥n de desplazamiento activa
‚óè puede anularse en cualquier momento iniciando otra instrucci√≥n de desplazamiento.
‚óè puede cancelarse en cualquier momento mediante la instrucci√≥n MC_StopMotion
(ver Desarrollo de movimientos de desplazamiento (P√°gina 3059)).

Seguimiento
La funci√≥n "Seguimiento" consiste en corregir de manera continua la consigna de posici√≥n
conforme a la posici√≥n real en el regulador de posici√≥n. Durante el seguimiento no se vigila si
el eje abandona la zona de velocidad cero.
La funci√≥n se activa retirando la se√±al "EnableDrive" en la instrucci√≥n MC_Control o despu√©s
de producirse un fallo.

Correcci√≥n de velocidad
La correcci√≥n de velocidad permite modificar de manera din√°mica la velocidad parametrizada
de una instrucci√≥n de desplazamiento. Los valores de aceleraci√≥n y deceleraci√≥n no se ven
afectados.
Para m√°s informaci√≥n sobre la correcci√≥n de la velocidad, ver Definir la correcci√≥n de la
velocidad (P√°gina 3046).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3027

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Simulaci√≥n
El modo de simulaci√≥n permite verificar el programa de desplazamiento sin necesidad de
mover el eje.
La simulaci√≥n se ejecuta con la instrucci√≥n MC_Simulation.

Reacciones a errores y diagn√≥stico
Todos los errores detectados por las instrucciones se indican en el DB de eje por medio de
‚óè activaci√≥n de un error agrupado y
‚óè una se√±alizaci√≥n de error espec√≠fica.
En los errores de acuse obligatorio, despu√©s de subsanar el error es necesario activar un
acuse de error.
Si el error ha sido causado o detectado por una instrucci√≥n de desplazamiento (p. ej.
MC_MoveJog o MC_MoveAbsolute), en esa instrucci√≥n se activa la salida de error "Error".
Sin embargo, si el error ha sido detectado por una instrucci√≥n de driver, la causa exacta del
error se indicar√° en los datos est√°ticos de la instrucci√≥n (ver Driver de entrada).
Encontrar√° informaci√≥n detallada sobre reacciones a errores, se√±alizaci√≥n de errores y acuse
de errores en Se√±alizaci√≥n y acuse de errores en el DB de eje (P√°gina 3074).

6.3.10.3

Configuraci√≥n de Easy Motion Control

Gu√≠a para utilizar Easy Motion Control
La gu√≠a aqu√≠ descrita muestra el procedimiento b√°sico para utilizar Easy Motion Control con
una CPU S7-300/400.

Requisitos
Para utilizar el objeto tecnol√≥gico "Eje" es necesario haber creado un proyecto con una CPU.

Procedimiento
Proceda seg√∫n el orden recomendado a continuaci√≥n para utilizar Easy Motion Control con la
CPU S7-300/400. Para ello consulte los enlaces listados:
1. Agregar el objeto tecnol√≥gico Eje (P√°gina 3029)
2. Trabajando con el di√°logo de configuraci√≥n (P√°gina 3030)
3. Cargar en la CPU (P√°gina 3051)
4. Test de funcionamiento del eje en la ventana de puesta en marcha
5. Programaaci√≥n de Easy Motion Control (P√°gina 3053)
6. Diagnosticar el control del eje

3028

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Agregar el objeto tecnol√≥gico Eje
Agregar objeto tecnol√≥gico Eje en el √°rbol del proyecto
Al agregar un objeto tecnol√≥gico, se genera un DB de instancia para este objeto tecnol√≥gico.
En √©l se guarda la configuraci√≥n del eje.

Requisitos
Hay un proyecto creado con una CPU.

Procedimiento
Para agregar un objeto tecnol√≥gico Eje en el √°rbol del proyecto, proceda del siguiente modo:
1. Abra la carpeta de la CPU en el √°rbol del proyecto.
2. Abra la carpeta "Objetos tecnol√≥gicos".
3. Haga doble clic en "Agregar objeto".
Se abre el cuadro de di√°logo "Agregar objeto".
4. Seleccione la tecnolog√≠a "Motion".
5. Abra la carpeta "Motion Control".
6. Abra la carpeta "Easy Motion Control".
7. Seleccione la instrucci√≥n para el objeto tecnol√≥gico: en este caso AXIS_REF.
8. En el campo de entrada "Nombre", introduzca un nombre personalizado para el eje.
9. Seleccione la opci√≥n "Manual" si desea modificar el n√∫mero de bloque de datos propuesto
para el DB de instancia.
10.Haga clic en "M√°s informaci√≥n" para a√±adir informaci√≥n propia sobre el objeto tecnol√≥gico.
11.Haga clic en el bot√≥n "Aceptar" para agregar el objeto tecnol√≥gico.
Haga clic en el bot√≥n "Cancelar" para rechazar las entradas realizadas.

Resultado
El nuevo objeto tecnol√≥gico se genera y se guarda en la capeta "Objetos tecnol√≥gicos" del
√°rbol del proyecto. El objeto tecnol√≥gico se utiliza cuando las instrucciones de este objeto
tecnol√≥gico se llaman en un OB de alarma c√≠clica o de alarma de sincronismo.
Encontrar√° m√°s informaci√≥n al respecto en "Dise√±o de un programa de usuario (P√°gina 3053)".
Nota
Existe la posibilidad de activar la casilla de verificaci√≥n "Agregar nuevo y abrir" situada en la
parte inferior del di√°logo. De ese modo, la configuraci√≥n del objeto tecnol√≥gico se abrir√° una
vez agregado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3029

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Configuraci√≥n del objeto tecnol√≥gico Eje
Trabajando con el di√°logo de configuraci√≥n
Las propiedades del objeto tecnol√≥gico se configuran en la ventana de configuraci√≥n. Para
abrir la ventana de configuraci√≥n del objeto tecnol√≥gico, proceda del siguiente modo:
1. Abra el grupo correspondiente al objeto tecnol√≥gico deseado en el √°rbol del proyecto.
2. Haga doble clic en el objeto "Configuraci√≥n".
La configuraci√≥n se divide en las siguientes categor√≠as:
‚óè Par√°metros b√°sicos
Los par√°metros b√°sicos contienen todos los par√°metros que deben configurarse para un
eje listo para funcionar.
‚óè Par√°metros avanzados
Los par√°metros avanzados contienen par√°metros que se pueden adaptar al propio
accionamiento o bien a la instalaci√≥n.

S√≠mbolos de la ventana de configuraci√≥n
Los s√≠mbolos que aparecen en la navegaci√≥n local de la configuraci√≥n muestran m√°s detalles
sobre el estado de la configuraci√≥n:
La configuraci√≥n contiene valores predeterminados y est√° completa.
La configuraci√≥n contiene exclusivamente valores predeterminados. Con ellos es posible utilizar el objeto tecnol√≥gico
sin m√°s modificaciones.
La configuraci√≥n contiene valores definidos por el usuario y est√° completa
Todos los campos de entrada de la configuraci√≥n contienen valores v√°lidos y al menos un valor predeterminado ha sido
modificado.
La configuraci√≥n es err√≥nea o est√° incompleta
Al menos un campo de entrada o una lista desplegable contiene un valor no v√°lido. El campo o la lista desplegable en
cuesti√≥n se marca en rojo. Al hacer clic, el roll out con el aviso de error indica la causa del error.
La configuraci√≥n es v√°lida, pero contiene advertencias
S√≥lo se ha configurado un final de carrera por hardware. Dependiendo de la instalaci√≥n, si un final de carrera por
hardware no est√° configurado ello puede representar un peligro. El campo o la lista desplegable en cuesti√≥n se marca
en amarillo.

Par√°metros b√°sicos
Definir el nombre del eje
Nombre del eje
Defina en este campo el nombre del eje y del objeto tecnol√≥gico "Eje". El objeto tecnol√≥gico
aparece con ese nombre en el √°rbol del proyecto.

3030

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar tipo de eje
Tipos de eje
Easy Motion Control puede controlar los siguientes tipos de eje:
‚óè Eje lineal
El eje lineal es un eje con una zona de desplazamiento f√≠sico limitado.

,QLFLRI¬ØVLFR

)LQI¬ØVLFR

‚óè Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no est√° limitada por topes mec√°nicos.
0¬£[LPRYDORULQGLFDEOH
ILQGHOHMHURWDWLYR

,QLFLRGHOHMHURWDWLYR FRRUGHQDGD
ILQGHOHMHURWDWLYR

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

4.0

AxisType

BOOL

FALSE

Tipo de eje
Valores permitidos:
‚óè FALSE = eje lineal
‚óè TRUE = eje rotativo

Seleccionar la unidad de longitud
Unidad de longitud
En la lista desplegable, seleccione la unidad de longitud deseada para el sistema de medida
del eje. La unidad seleccionada se utiliza para una nueva configuraci√≥n del objeto tecnol√≥gico
"Eje" y la visualizaci√≥n de los datos actuales del eje.
Para la entrada y salida de datos es posible elegir entre las siguientes unidades de longitud:
‚óè Mil√≠metros (ajuste predeterminado)
‚óè Grados
‚óè Pulgadas

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3031

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Los valores en los par√°metros de entrada (Position, Distance, Velocity, ...) de las instrucciones
de Easy Motion Control tambi√©n se refieren a esta unidad.
Nota
El cambio de la unidad de longitud no influye en los valores de los par√°metros. No tiene lugar
una conversi√≥n.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

196.0

LengthUnit

STRING [4]

mm

Unidad de longitud para software de configuraci√≥n
Valores permitidos:
‚óè mm (ajuste predeterminado)
‚óè Grados
‚óè Pulgadas

Activar el modo de simulaci√≥n
Modo de simulaci√≥n
Active la casilla de verificaci√≥n si desea probar el programa de desplazamiento sin necesidad
de mover el eje.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

4.2

Sim

BOOL

FALSE

Modo de simulaci√≥n
Valores permitidos:
‚óè FALSE = desactivado
‚óè TRUE = activado

3032

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Par√°metros avanzados
Interfaces de driver
Driver de entrada
Seleccionar el m√≥dulo de entradas
M√≥dulo de entradas
Seleccione en la lista desplegable el m√≥dulo de entradas al que est√° conectado el enc√≥der.
Conforme a su selecci√≥n, en el campo "Instrucci√≥n" se muestra el nombre de la instrucci√≥n que
debe llamar para la adquisici√≥n del valor real.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

202.0

InputModuleType

STRING [24]

IM 174

Driver de entrada del m√≥dulo.
Este par√°metro no se puede sobrescribir manualmente.

Seleccionar el tipo de enc√≥der
Tipo de enc√≥der
Active el bot√≥n de opci√≥n correspondiente al enc√≥der utilizado.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

4.1

EncoderType

BOOL

FALSE

Tipo de enc√≥der
Valores permitidos:
‚óè FALSE = enc√≥der incremental
‚óè TRUE = enc√≥der absoluto

M√≥dulo de entradas: Direcci√≥n del m√≥dulo Entradas
Direcci√≥n del m√≥dulo Entradas
Introduzca en el campo de entrada el valor asignado al m√≥dulo de entradas en la configuraci√≥n
hardware.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3033

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

58.0

InputModuleInAddr

INT

0

Direcci√≥n inicial de las entradas del m√≥dulo
de lectura de recorrido
Rango:
‚óè determinado por la configuraci√≥n
hardware

M√≥dulo de entradas: Direcci√≥n del m√≥dulo Salidas
Direcci√≥n del m√≥dulo Salidas
Este par√°metro tan solo se utiliza en aquellos m√≥dulos en que la "Direcci√≥n del m√≥dulo
Salidas" se ajusta por separado de la "Direcci√≥n del m√≥dulo Entradas" en la configuraci√≥n
hardware.
Introduzca en el campo de entrada el valor asignado al m√≥dulo de entradas en la configuraci√≥n
hardware.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

60.0

InputModuleOutAddr

INT

0

Direcci√≥n inicial de las salidas del m√≥dulo de
lectura de recorrido
Rango:
‚óè determinado por la configuraci√≥n
hardware

M√≥dulo de entradas: N√∫mero de canal
N√∫mero de canal
‚óè M√≥dulos monocanal: el campo de entrada est√° predeterminado con el valor "0" y no se
puede editar.
‚óè M√≥dulos multicanal: introduzca en el campo de entrada el n√∫mero del canal utilizado.
Introduzca "0" para el primer canal, etc.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

62.0

InputChannelNo

INT

0

N√∫mero de canal del m√≥dulo de lectura de
recorrido
Rango:
‚óè depende del m√≥dulo

3034

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Driver de salida
Seleccionar el m√≥dulo de salidas
M√≥dulo de salidas
Seleccione en la lista desplegable el m√≥dulo de salidas al que est√° conectado el
accionamiento.
Conforme a su selecci√≥n, en el campo "Instrucci√≥n" se muestra el nombre de la instrucci√≥n que
debe llamar para la salida de la consigna de velocidad.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

228.0

OutputModuleType

STRING [24]

IM 174

Driver de salida del m√≥dulo.
Este par√°metro no se puede sobrescribir manualmen‚Äê
te.

M√≥dulo de salidas: Direcci√≥n del m√≥dulo Entradas
Direcci√≥n del m√≥dulo Entradas
El par√°metro tan solo se utiliza en aquellos m√≥dulos en que la "Direcci√≥n del m√≥dulo Entradas"
se ajusta por separado de la "Direcci√≥n del m√≥dulo Salidas" en la configuraci√≥n hardware.
Introduzca en el campo de entrada el valor asignado al m√≥dulo de salidas en la configuraci√≥n
hardware.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

82.0

OutputModuleInAddr

INT

0

Direcci√≥n inicial de las entradas del m√≥dulo
de salidas
Rango:
‚óè determinado por la configuraci√≥n
hardware

M√≥dulo de salidas: Direcci√≥n del m√≥dulo Salidas
Direcci√≥n del m√≥dulo Salidas
Introduzca en el campo de entrada el valor asignado al m√≥dulo de salidas en la configuraci√≥n
hardware.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3035

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Direcci√≥n Nombre

Tipo

Valor inicial

Comentario

80.0

INT

0

Direcci√≥n inicial de las salidas del m√≥dulo de
salidas

OutputModuleOutAddr

Rango:
‚óè determinado por la configuraci√≥n
hardware

M√≥dulo de salidas: N√∫mero de canal
N√∫mero de canal
‚óè M√≥dulos monocanal: el campo de entrada est√° predeterminado con el valor "0" y no se
puede editar.
‚óè M√≥dulos multicanal: introduzca en el campo de entrada el n√∫mero del canal utilizado.
Introduzca "0" para el primer canal, etc.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

84.0

OutputChannelNo

INT

0

N√∫mero de canal del m√≥dulo de salidas
Rango:
‚óè depende del m√≥dulo

Mec√°nica
Enc√≥der
Definir incrementos por vuelta del enc√≥der
Incrementos por vuelta del enc√≥der
Introduzca en el campo de entrada el n√∫mero de incrementos que emite el m√≥dulo de lectura
de recorrido por cada vuelta del enc√≥der.
Con este valor y el par√°metro "Recorrido del eje por vuelta del enc√≥der" (DB de eje Direcci√≥n
68.0 (P√°gina 3038)) tiene lugar la conversi√≥n de incrementos a unidad de longitud.

3036

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

64.0

StepsPerRev

DINT

L#1

Incrementos por vuelta del enc√≥der
Rango admisible:
‚óè ‚â• 1 [incrementos/vuelta del enc√≥der]

Enc√≥der incremental
Si el enc√≥der incremental se lee con un m√≥dulo que realiza una evaluaci√≥n doble o cu√°druple
de los impulsos, esto debe tenerse en cuenta al introducir los par√°metros.
Ejemplo:
‚óè Impulsos de enc√≥der por vuelta: 500
‚óè Evaluaci√≥n cu√°druple
En el campo de entrada "Incrementos por vuelta del enc√≥der" se introduce: 2000

Enc√≥der absoluto
Con enc√≥ders absolutos, el n√∫mero de incrementos por vuelta del enc√≥der generalmente es
una potencia de dos.
Son valores habituales:
‚óè En caso de enc√≥der monovuelta: 4096 y 8192
‚óè En caso de enc√≥der multivuelta (12 √ó 12 bits en el telegrama de 25 bits): 4096
En caso de duda, el valor correcto se determina moviendo el enc√≥der una vuelta y observando
la variaci√≥n del valor de enc√≥der en el software de configuraci√≥n.
Si hay una regla de medida, en el campo "Incrementos por vuelta del enc√≥der" introduzca el
n√∫mero total de incrementos que corresponda a la longitud de la regla de medida.

Definir el n√∫mero de vueltas del enc√≥der
N√∫mero de vueltas del enc√≥der
Si se trata de un enc√≥der absoluto, introduzca en el campo de entrada el n√∫mero de vueltas del
enc√≥der.
Para un enc√≥der monovuelta, introduzca un "1".
Si hay una regla de medida, en el campo "N√∫mero de vueltas del enc√≥der" introduzca un "1".
Si se trata de un enc√≥der incremental, este par√°metro carece de significado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3037

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

72.0

NumberRevs

INT

1

N√∫mero de vueltas de un enc√≥der absoluto
Rango admisible:
‚óè >0

Definir el recorrido del eje por vuelta del enc√≥der
Recorrido del eje por vuelta del enc√≥der
Introduzca en el campo de entrada la distancia que recorre el eje en una vuelta del enc√≥der.
El valor depende del dise√±o del eje y del modo en que est√© montado el enc√≥der. Debe tener
en cuenta todos los elementos de transmisi√≥n, como acoplamientos o engranajes.

0RWRU

(QF¬µGHU
5HGXFWRU

0RWRU

(QF¬µGHU
5HGXFWRU

Si hay una regla de medida, en el campo "Recorrido del eje por vuelta del enc√≥der" debe
introducirse la longitud de dicha regla.

Datos utilizados en el DB de eje
Direcci√≥n Nombre

Tipo

Valor inicial

Comentario

68.0

REAL

1.0

Recorrido del eje por vuelta del enc√≥der

DisplacementPerRev

Rango admisible:
‚óè > 0.0 [unidad de longitud/vuelta del enc√≥der]

Particularidades de los ejes rotativos
Con cada vuelta del eje rotativo el enc√≥der debe desplazarse un n√∫mero entero de
incrementos:
)LQGHOHMHURWDWLYRLQLFLRGHOHMHURWDWLYR
5HFRUULGRGHOHMHSRUYXHOWDGHOHQF¬µGHU

3038

[ ,QFUHPHQWRVSRUYXHOWDGHOHQF¬µGHU Q¬ºPHURHQWHUR

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Particularidades de ejes rotativos con enc√≥ders absolutos
A fin de garantizar la reproducibilidad de cada posici√≥n, el recorrido del eje abarcado por el
enc√≥der debe ser un m√∫ltiplo entero de la distancia recorrida por el eje rotativo en una vuelta:
Q¬ºPHURGHYXHOWDVGHOHQF¬µGHU [ UHFRUULGRGHOHMHSRUYXHOWDGHOHQF¬µGHU
)LQGHOHMHURWDWLYRLQLFLRGHOHMHURWDWLYR

Q¬ºPHURHQWHUR

Ejemplo:
Enc√≥der absoluto 24 bits
=> N√∫mero de vueltas del enc√≥der = 4096
Principio del eje rotativo = 0.0¬∞
Fin del eje rotativo = 360.0¬∞
=> Fin del eje rotativo - Principio del eje rotativo = 360.0¬∞
Recorrido del eje por vuelta del enc√≥der = 45¬∞
[r
r

 HQWHUR

Seleccionar la correcci√≥n de sentido del enc√≥der
Correcci√≥n de sentido del enc√≥der
Aqu√≠ se adapta el sentido de la lectura del recorrido al sentido de movimiento del eje:
‚óè positivo = los impulsos de contaje ascendentes (enc√≥der incremental) o valores del
enc√≥der (enc√≥der absoluto) equivalen a los valores de posici√≥n real ascendentes.
‚óè negativo = los impulsos de contaje ascendentes (enc√≥der incremental) o los valores de
enc√≥der (enc√≥der absoluto) equivalen a valores reales de posici√≥n descendentes.
Seleccione la opci√≥n correspondiente en la lista desplegable.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

74.0

PolarityEncoder

INT

1

Correcci√≥n de sentido del enc√≥der
Valores permitidos:
‚óè +1 √≥ -1

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3039

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Regulador
Definir la ganancia del regulador
Ganancia del regulador
La ganancia √≥ptima del regulador se puede determinar experimentalmente en el eje.
Aumente la ganancia del regulador en incrementos de 1.0 hasta que el eje comience a vibrar
en marcha o en parada. Cuando esto ocurra, reduzca la ganancia del regulador hasta que deje
de observarse una tendencia a la vibraci√≥n.
Introduzca el valor correspondiente en el campo de entrada.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

44.0

FactorP

REAL

1.0

Ganancia del regulador
Rango admisible:
‚óè > 0.0 [1/s]

Definir la velocidad de consigna en modo manual
Velocidad de consigna en el modo manual
Introduzca en el campo de entrada la velocidad consignada que desee para el modo manual.
Si el modo manual est√° activado, el regulador emite el valor de "velocidad consignada en modo
manual" como magnitud manipulada y lo limita a "MaxVelocity". La consigna de posici√≥n se
corrige conforme al valor de posici√≥n real.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

48.0

ManVelocity

REAL

0.0

Velocidad de consigna en el modo manual
Rango admisible:
‚óè ‚â§ ¬± MaxVelocity (P√°gina 3045) [unidad de longitud/s]

52.0

ManEnable

BOOL

FALSE

Activar el modo manual
Valores permitidos:
‚óè FALSE = desactivado
‚óè TRUE = activado

3040

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Motor
Definir el valor de referencia para una velocidad del 100%
Valor de referencia para una velocidad del 100%
Si se utilizan etapas de potencia controladas con ¬±10 V, este par√°metro es irrelevante.
Si se utiliza el driver de salida OutputMM4_DP (m√≥dulo MICROMASTER DP controlado por
bus), en este par√°metro debe introducirse la frecuencia con la que deber√° controlarse el
accionamiento para que alcance el 100% de su velocidad.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

96.0

DriveInputAt100

REAL

10.0

Valor de referencia para una velocidad del
100%
Rango admisible:
‚óè -10.0 hasta +10.0 [V]

Ejemplo
‚óè Velocidad nominal del motor (velocidad 100%): = 1380 r/min
‚óè El motor est√° calibrado a: = 1380 r/min a 50 Hz
=> En el campo "Valor de referencia para una velocidad del 100%", introduzca: = 50 Hz

Definir el valor de referencia para la velocidad m√°xima del eje
Valor de referencia para velocidad m√°xima del eje
Si se utilizan etapas de potencia controladas con ¬±10 V, en el campo de entrada deber√°
introducirse el valor de tensi√≥n en el que se alcanza la "velocidad m√°xima" del accionamiento
(ver DB de eje Direcci√≥n 14.0 (P√°gina 3045)).
Ejemplo:
‚óè Velocidad nominal del motor: = 3000 r/min
‚óè El motor est√° calibrado a: = 9 V a 3000 r/min
‚óè Quiere alcanzar la velocidad m√°xima: = 1500 r/min
=> En el campo "Valor de referencia para la velocidad m√°xima del eje", introduzca: = 4.5 V
Si se utiliza el driver de salida OutputMM4_DP, en este campo de entrada se debe introducir
el valor con el que debe controlarse el accionamiento para que alcance la "velocidad m√°xima"
(ver DB de eje Direcci√≥n 14.0 (P√°gina 3045)).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3041

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Ejemplo:
‚óè Velocidad nominal del motor: = 1380 r/min
‚óè El motor est√° calibrado a: = 1380 r/min a 50 Hz
‚óè Quiere alcanzar la velocidad m√°xima: = 690 r/min
=> En el campo "Valor de referencia para la velocidad m√°xima del eje", introduzca: = 25 Hz

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

88.0

DriveInputAtMaxVel

REAL

9.0

Valor de referencia para velocidad m√°xima
del eje [V]
Rango admisible:
‚óè En funci√≥n de la etapa de potencia

Definir la compensaci√≥n del punto cero
Compensaci√≥n del punto cero
Este par√°metro permite realizar una compensaci√≥n del punto cero si el accionamiento no
ofrece tal posibilidad, El valor parametrizado aqu√≠ se suma al valor de salida.
El par√°metro no se tiene en cuenta en el driver de salida OutputMM4_DP.

Datos utilizados en el DB de eje
Direcci√≥n Nombre

Tipo

Valor inicial

Comentario

92.0

REAL

0.0

Compensaci√≥n del punto cero

OffsetCompensation

Rango admisible:
‚óè -10.0 hasta +10.0 [V]

Seleccionar la correcci√≥n de sentido del accionamiento
Correcci√≥n de sentido del accionamiento
Aqu√≠ se selecciona el sentido de movimiento del accionamiento:
‚óè positiva = las consignas de velocidad positivas provocan un movimiento en sentido positivo.
‚óè negativa = las consignas de velocidad positivas provocan un movimiento en sentido
negativo.
Seleccione la opci√≥n correspondiente en la lista desplegable.
Si se modifica la "Correcci√≥n de sentido del accionamiento", tambi√©n es necesario modificar la
"Correcci√≥n de sentido del enc√≥der" (DB de eje Direcci√≥n 74.0 (P√°gina 3039)).

3042

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

86.0

PolarityDrive

INT

1

Incrementos por vuelta del enc√≥der
Valores permitidos:
‚óè +1 √≥ -1

Final de carrera
Activar finales de carrera por software
Fin de carrera por software
Los finales de carrera por software existen solo para los ejes lineales.
La vigilancia comienza en cuanto el eje se sincroniza y la vigilancia de los finales de carrera por
software est√° activada.
Si la vigilancia de los finales de carrera por software est√° desactivada, los par√°metros "Inicio
Final de carrera por software" y "Fin Final de carrera por software" (DB de eje Direcci√≥n 6.0 y
10.0 (P√°gina 3043)) carecen de significado.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

42.1

SWLimitEnable

BOOL

TRUE

Vigilar finales de carrera por software
Valores permitidos:
‚óè TRUE = vigilancia activada
‚óè FALSE = vigilancia desactivada

Definir final de carrera por software
Fin de carrera por software
Los finales de carrera por software existen solo para los ejes lineales.
Con eje lineal: inicio/fin del final de carrera por software
La vigilancia comienza en cuanto el eje se sincroniza y la vigilancia de los finales de carrera por
software est√° activada (ver "Activar finales de carrera por software (P√°gina 3043)"). La zona de
trabajo est√° limitada por los finales de carrera por software.
El "Inicio del final de carrera por software" debe ser siempre menor que el "Fin del final de
carrera por software".
Enc√≥der incremental

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3043

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Despu√©s de cada arranque de la CPU el eje no est√° sincronizado. El eje no se sincroniza y la
vigilancia de los finales de carrera por software no comienza hasta despu√©s de la b√∫squeda del
punto de referencia o el posicionamiento del punto de referencia.
Enc√≥der absoluto
Una vez se ha realizado el posicionamiento del punto de referencia, √©ste no se pierde con el
siguiente arranque de la CPU. Los finales de carrera por software se pueden vigilar.
El rango del enc√≥der absoluto debe abarcar al menos la zona de trabajo.
Con eje rotativo: inicio del eje rotativo/final del eje rotativo
Con los valores "Inicio del eje rotativo" y "Final del eje rotativo" se determina el rango de valores
en que se indicar√°n las posiciones de eje durante una vuelta del eje.
El valor "Final del eje rotativo" es el valor m√°ximo te√≥rico que el valor real puede alcanzar:
0¬£[LPRYDORULQGLFDEOH ILQGHOHMHURWDWLYR 

5HFRUULGRSRUYXHOWDGHOHQF¬µGHU
,QFUHPHQWRVSRUYXHOWD

Sin embargo, el m√°ximo valor te√≥rico nunca se indica porque f√≠sicamente identifica la misma
posici√≥n que el inicio del eje rotativo.
Ejemplo:
‚óè AxisLimitMin = 0.0¬∞
‚óè AxisLimitMax = 360.0¬∞
En sentido positivo, el valor real adopta los valores ...359.8, 359.9, 0.0, 0.1, ‚Ä¶
Si se utilizan enc√≥ders absolutos, debe tenerse en cuenta el par√°metro "Recorrido del eje por
vuelta del enc√≥der (P√°gina 3038)".

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

6.0

AxisLimitMax

REAL

1.0e

Con eje lineal: Final de carrera por software Fin

+6

Con eje rotativo: Final del eje rotativo
Rango admisible:
‚óè -224+6 ‚â§ AxisLimitMin < AxisLimitMax ‚â§ +224-6
[unidad de longitud]
10.0

AxisLimitMin

REAL

-1.0e+6

Con eje lineal: Inicio del final de carrera por software
Con eje rotativo: Inicio del eje rotativo
Rango admisible:
‚óè -224+6 ‚â§ AxisLimitMin < AxisLimitMax ‚â§ +224-6
[unidad de longitud]

3044

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Din√°mica
General
Definir la velocidad m√°xima del eje
Velocidad m√°xima del eje
Aqu√≠ se parametriza la velocidad que alcanza el eje cuando el motor se controla con el valor
introducido en el par√°metro "Valor de referencia para la velocidad m√°xima del eje" (DB de eje
Direcci√≥n 88.0 (P√°gina 3041)).
La "Velocidad m√°xima del eje" sirve como factor para el c√°lculo de la se√±al de salida al
accionamiento y tambi√©n para limitar la velocidad del eje.

Particularidades de ejes rotativos con enc√≥ders absolutos
Para poder registrar cada una de las vueltas del eje rotativo, la velocidad m√°xima del eje debe
ser la m√≠nima que permita que por cada tiempo de muestreo se recorra una distancia inferior
a la mitad del rango del enc√≥der absoluto.
Ejemplo de enc√≥der monovuelta:
Requisito => una vuelta del eje equivale a una vuelta del enc√≥der.
Recorrido/rango del enc√≥der = 360.0¬∞
Recorrido/mitad del rango del enc√≥der = 180.0¬∞
Tiempo de muestreo = 0.01 s


!‡≤±9HORFLGDGP¬£[LPD‡≤Ø

5HFRUULGRGHGHVSOD]DPLHQWRPLWDGGHOUDQJRGHOHQF¬µGHU
7LHPSRGHPXHVWUHR

=> "velocidad m√°xima" < 180.0¬∞ / 0.01 s = 18000/s corresponde a 50 vueltas de eje/s

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

14.0

MaxVelocity

REAL

0.1

Velocidad m√°xima del eje
Rango admisible:
‚óè > 0.0 [unidad de longitud/s]

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3045

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir la correcci√≥n de la velocidad
Correcci√≥n de velocidad
La "Correcci√≥n de la velocidad" act√∫a de forma continua sobre la velocidad parametrizada de
una instrucci√≥n de desplazamiento.
Los valores de aceleraci√≥n y deceleraci√≥n no se ven afectados.
Ejemplo: curvas de desplazamiento con correcci√≥n del 50% y del 100%

9HORFLGDG




5HFRUULGR

7LHPSR

7LHPSR

Al cambiar del 50% al 100%, la velocidad se dobla. Sin embargo, como la aceleraci√≥n y la
deceleraci√≥n no se ven afectadas por el par√°metro "Correcci√≥n de velocidad", el tiempo de
posicionamiento no se reduce a la mitad.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

100.0

Override

REAL

100.0

Correcci√≥n de velocidad
Rango admisible:
‚óè 0.0 hasta +100.0 [%]

3046

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir la aceleraci√≥n m√°xima del eje
Aceleraci√≥n m√°xima del eje
En modo regulado, este valor determina el l√≠mite de la pendiente de la rampa de aceleraci√≥n
del eje.
La aceleraci√≥n m√°xima posible se puede determinar experimentalmente.
Debe ser la m√≠nima que permita que al acelerar hasta la velocidad m√°xima (con carga) no se
alcance por poco el l√≠mite de intensidad del accionamiento.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

18.0

MaxAcceleration

REAL

0.1

Aceleraci√≥n m√°xima del eje
Rango admisible:
‚óè > 0.0 [unidad de longitud/s2]

Definir la deceleraci√≥n m√°xima del eje
Deceleraci√≥n m√°xima del eje
En modo regulado, este valor determina el l√≠mite de la pendiente de la rampa de frenado del
eje.
La deceleraci√≥n m√°xima posible se puede determinar experimentalmente.
Debe ser la m√≠nima que permita que al frenar desde la velocidad m√°xima (con carga) no se
alcance por poco el l√≠mite de intensidad del accionamiento.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

22.0

MaxDeceleration

REAL

0.1

Deceleraci√≥n m√°xima del eje
Rango admisible:
‚óè > 0.0 [unidad de longitud/s2]

Definir el tiempo de muestreo
Tiempo de muestreo
Para el correcto funcionamiento de una regulaci√≥n de posici√≥n es importante que todas las
funciones de un eje se procesen en una base de tiempo fija. Esta base de tiempo se obtiene
llamando todas las instrucciones de un eje en el mismo OB de alarma c√≠clica o de alarma de
sincronismo. La base de tiempo de este OB se selecciona en la configuraci√≥n hardware de la
CPU.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3047

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Como "Tiempo de muestreo" se introduce la base de tiempo del OB en el que se llaman todas
las instrucciones de un eje.
Ejemplo:
Se llama el programa con las instrucciones de Easy Motion Control en el OB 35. En la
configuraci√≥n hardware, la base de tiempo de la alarma c√≠clica del OB 35 est√° ajustada a 10 ms.
Como "Tiempo de muestreo" se introduce 0.010.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

0.0

Sample_T

REAL

0.01

Comentario
Tiempo de muestreo de las instrucciones de eje
Sugerencia:
‚óè En el S7‚Äë300 hasta CPU 316 ‚â• 0.020 [s]
‚óè En el S7‚Äë400 y desde CPU 317 ‚â• 0.004 [s]

Mostrar el tiempo de aceleraci√≥n
Tiempo aceleraci√≥n
El tiempo de aceleraci√≥n es el tiempo durante el cual el eje acelera desde la velocidad cero
hasta la velocidad m√°xima.
El tiempo de aceleraci√≥n se calcula a partir de los siguientes par√°metros:
Tiempo
acelera‚Äê
ci√≥n

= velocidad m√°xima del eje √ó correcci√≥n de velocidad /
aceleraci√≥n m√°xima

En el campo de salida se muestra el tiempo de aceleraci√≥n calculado.

Mostrar el tiempo de deceleraci√≥n
Tiempo de deceleraci√≥n
El tiempo de deceleraci√≥n es el tiempo durante el cual el eje decelera sin limitaci√≥n de tirones
desde la velocidad m√°xima hasta la velocidad cero.
El tiempo de deceleraci√≥n se calcula a partir de los siguientes par√°metros:
Tiempo = velocidad m√°xima del eje √ó correcci√≥n de velocidad /
de dece‚Äê deceleraci√≥n m√°xima
leraci√≥n
En el campo de salida se muestra el tiempo de deceleraci√≥n calculado.

3048

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Parada de emergencia
Definir la deceleraci√≥n para la parada de emergencia
Deceleraci√≥n para parada de emergencia (parada brusca)
Aqu√≠ se parametriza la pendiente de la rampa de frenado controlada por tiempo con la que
debe frenarse el accionamiento en caso de producirse un error con parada brusca.

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

54.0

EmergencyDec

REAL

1.0

Deceleraci√≥n para parada de emergencia
Rango admisible:
‚óè > 0.0 [unidad de longitud/s2]

Mostrar el tiempo de deceleraci√≥n
Tiempo de deceleraci√≥n
El tiempo de deceleraci√≥n es el tiempo durante el cual el eje decelera en modo de parada de
emergencia desde la velocidad m√°xima hasta la velocidad cero.
El tiempo de deceleraci√≥n se calcula a partir de los siguientes par√°metros:
Tiempo = velocidad m√°xima del eje/deceleraci√≥n de parada de emergencia
de dece‚Äê
leraci√≥n
En el campo de salida se muestra el tiempo de deceleraci√≥n calculado.

Vigilancias
Definir la zona de destino
Zona de destino
La "zona de destino" se encuentra a izquierda y derecha del punto de destino (ver Definiciones
de t√©rminos (P√°gina 3022)).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3049

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

30.0

TargetRange

REAL

1.0

Zona de destino
Rango admisible:
‚óè > 0.0 [unidad de longitud]

Definir la zona de velocidad cero
Zona de velocidad cero
A la velocidad cero se vigila si el eje permanece fijo en una posici√≥n o se va alejando de ella.
En cuanto el eje abandona la "Zona de velocidad cero" sin una petici√≥n de desplazamiento
activa, en el DB de eje se activa el bit de error "Zona de velocidad cero abandonada" (DB de
eje Direcci√≥n 130.3 (P√°gina 3079)). La "Zona de velocidad cero" se encuentra a izquierda y
derecha del punto de destino (ver Definiciones de t√©rminos (P√°gina 3022)).
Recomendaci√≥n: La "Zona de velocidad cero" debe ser mayor que la "zona de destino" (DB de
eje Direcci√≥n 30.0 (P√°gina 3049)).

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

34.0

StandstillRange

REAL

1.5

Zona de velocidad cero
Rango admisible:
‚óè > 0.0 [unidad de longitud]

Vigilar la aproximaci√≥n al destino
Vigilancia de la aproximaci√≥n al destino
SI la vigilancia de la aproximaci√≥n al destino est√° activada, un desplazamiento concluye en
cuanto la posici√≥n real ha alcanzado la "zona de destino" (DB de eje Direcci√≥n 30.0) dentro del
"Tiempo de vigilancia para aproximaci√≥n a destino" (DB de eje Direcci√≥n 26.0).
Si la vigilancia de la aproximaci√≥n a destino est√° desactivada, un desplazamiento concluye en
cuanto la consigna de posici√≥n ha alcanzado el destino (ver Definiciones de t√©rminos
(P√°gina 3022)).

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

42.0

MonitorTargetAppr

BOOL

TRUE

Vigilar la aproximaci√≥n al destino
Valores permitidos:
‚óè TRUE = vigilancia activada
‚óè FALSE = vigilancia desactivada

3050

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir el tiempo de vigilancia para la aproximaci√≥n al destino
Tiempo de vigilancia para la aproximaci√≥n al destino
Despu√©s de que en un desplazamiento la consigna de posici√≥n haya alcanzado el destino,
comienza el "Tiempo de vigilancia para la aproximaci√≥n a destino", si es que el bit "Vigilar
aproximaci√≥n a destino" (DB de eje Direcci√≥n 42.0 (P√°gina 3050)) est√° activado. Si
transcurrido este tiempo la posici√≥n real no ha alcanzado la zona definida en el par√°metro
"Zona de destino" (DB de eje Direcci√≥n 30.0 (P√°gina 3049)), en el DB de eje se activa el bit de
error "Error en la aproximaci√≥n al destino" (DB de eje Direcci√≥n 130.4 (P√°gina 3079)).

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

26.0

MonTimeTargetAppr

REAL

1.0

Tiempo de vigilancia para la aproximaci√≥n al
destino
Rango admisible:
‚óè > 2 √ó Sample_T [s] (tiempo de muestreo
(P√°gina 3047))

Definir el error de seguimiento m√°ximo permitido
Error de seguimiento m√°ximo permitido
Con la vigilancia del error de seguimiento se comprueba si la posici√≥n real durante un
desplazamiento se encuentra a una distancia excesivamente grande por detr√°s de la consigna
de posici√≥n. Si se rebasa el error de seguimiento m√°ximo, en el DB de eje se activa el bit de
error "Error de seguimiento rebasado" (DB de eje Direcci√≥n 130.2 (P√°gina 3079)).
Recomendaci√≥n de ajuste: ("velocidad m√°xima" / "ganancia del regulador") √ó 1.1 (ver DB de
eje Direcci√≥n 14.0 (P√°gina 3045) y 44.0 (P√°gina 3040))

Datos utilizados en el DB de eje
Direcci√≥n

Nombre

Tipo

Valor inicial

Comentario

38.0

MaxFollowingDist

REAL

5.0

Error de seguimiento m√°ximo permitido
Rango admisible:
‚óè > 0.0 [unidad de longitud]

6.3.10.4

Cargar en la CPU
Los datos de proyecto nuevos o modificados se deben cargar en la CPU.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3051

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Carga de los bloques de programa y de la configuraci√≥n del objeto tecnol√≥gico en la CPU
Para cargar proceda del siguiente modo:
1. En el √°rbol del proyecto seleccione el objeto "Bloques de programa" o el objeto "Objetos
tecnol√≥gicos".
2. Seleccione el comando "Online > Cargar en dispositivo".
Nota
Al cargar bloques en la CPU, el TIA Portal se asegura siempre de que tras cada operaci√≥n de
carga los bloques offline en el proyecto y los bloques online en la CPU sean coherentes los
unos con los otros.
En la CPU se cargan siempre todos los bloques offline modificados y nuevos y los objetos
tecnol√≥gicos, independientemente de la marca en el √°rbol del proyecto.
En cada opreaci√≥n de carga los valores actuales de los bloques de datos se resetean a los
valores iniciales.

Carga de la configuraci√≥n hardware en la CPU
Para cargar la configuraci√≥n hardware proceda del siguiente modo:
1. Marque el objeto de la CPU en el √°rbol del proyecto.
2. Seleccione el comando "Cargar en dispositivo > Configuraci√≥n hardware" en el men√∫
contextual.

Carga de la configuraci√≥n hardware, de los bloques de programa y de la configuraci√≥n del objeto
tecnol√≥gico en la CPU
Para cargar proceda del siguiente modo:
1. Marque el objeto de la CPU en el √°rbol del proyecto.
2. Seleccione el comando de men√∫ "Online > Cargar en dispositivo".

3052

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.10.5

Programaaci√≥n de Easy Motion Control

Dise√±o de un programa de usuario
Interacci√≥n de las instrucciones
La figura siguiente muestra la interacci√≥n de las instrucciones para Easy Motion Control.
0&B,QLW

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR
0&B0RYH
-RJ

0&B0RYH
$EVROXWH

0&B0RYH
5HODWLYH

0&B+RPH

0&B6WRS
0RWLRQ

0&B*HDU,Q

'%GHHMH

'ULYHUGHHQWUDGD
(QF¬µGHU

5HJXODGRUGH
SRVLFL¬µQ
0&B&RQWURO

(QF¬µGHU

'ULYHUGHVDOLGD
2XWSXW

0RWRU

0

La instrucci√≥n MC_Init sirve para inicializar las instrucciones.
El driver de entrada (instrucci√≥n Encoder‚Ä¶) lee la posici√≥n real de un eje del m√≥dulo de
periferia y la normaliza convirti√©ndola a la unidad de longitud seleccionada por el usuario.
Una de las instrucciones de desplazamiento genera la consigna de posici√≥n.
El regulador de posici√≥n (posici√≥n MC_Control) compara el valor de posici√≥n real con la
consigna y genera una consigna de velocidad a partir de la diferencia.
El driver de salida (instrucci√≥n Output‚Ä¶) normaliza la consigna de velocidad convirti√©ndola al
formato adecuado y la escribe en el m√≥dulo de periferia conectado.
El programa para un lazo de regulaci√≥n cerrado se compone de un driver de entrada
(Encoder‚Ä¶), al menos una instrucci√≥n de desplazamiento, el regulador (MC_Control) y un
driver de salida (Output‚Ä¶).
Todas las instrucciones de un eje act√∫an junto con un DB de eje. El DB contiene todos los datos
necesarios para la operaci√≥n del eje, y hay uno para cada eje. A este respecto, tenga en cuenta
las indicaciones relativas a la Carga del DB de eje (P√°gina 3063).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3053

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Entorno de llamada
Para el correcto funcionamiento de una regulaci√≥n de posici√≥n es importante que todas las
funciones de un eje se procesen en una base de tiempo fija. Esta base de tiempo se determina
llamando las instrucciones de Easy Motion Control en un nivel de ejecuci√≥n. Para ello existen
dos procedimientos, seg√∫n la CPU utilizada y seg√∫n el tipo de conexi√≥n de periferia:
OB de alarma c√≠clica (OB 30 a OB 38)
Se utiliza en caso de conexi√≥n centralizada de la periferia o en caso de conexi√≥n
descentralizada a trav√©s de un bus de periferia no equidistante. El tiempo de alarma c√≠clica
equivale al ciclo de regulaci√≥n de posici√≥n.
OB de alarma de sincronismo (OB 61 a OB 64)
En caso de conexi√≥n de periferia mediante un bus de periferia siempre is√≥crono, el ciclo de
regulaci√≥n de posici√≥n equivale al valor que se haya seleccionado como "ciclo equidistante" al
parametrizar el bus.
En ambos casos este valor debe introducirse en el DB de eje.
Hallar√° informaci√≥n general sobre el modo is√≥crono en la ayuda en pantalla del TIA portal y en
el manual de funciones Isochrone Mode (http://support.automation.siemens.com/WW/view/en/
15218045).
Desde el punto de vista de Easy Motion Control, deber√≠an tenerse en cuenta las siguientes
particularidades:
‚óè Al configurar el bus de periferia y los esclavos DP/IO-Devices (y quiz√° tambi√©n sus
m√≥dulos), es preciso seleccionar y parametrizar la "equidistancia".
‚óè Las direcciones de periferia de un eje utilizadas para la lectura de posici√≥n y para la salida
de consigna deben estar en la misma memoria imagen parcial del (MIPP). En los ejes de
reductor, ambos ejes deben estar en la misma MIPP.
‚óè Al configurar la CPU, esta MIPP se asigna a la alarma de sincronismo utilizada.
‚óè Esta MIPP debe actualizarse en el OB de alarma antes/despu√©s de llamar las instrucciones
de Easy Motion Control con las instrucciones de sistema "SYNC_PI"/"SYNC_PO".
‚óè Eval√∫e en su programa las respuestas de estas instrucciones de sistema y reaccione en
consecuencia. (en caso de error, la MIPP podr√≠a no actualizarse, y entonces el valor real
le√≠do podr√≠a ser err√≥neo).

3054

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Orden de llamada recomendado
La figura siguiente muestra el orden de llamada recomendado para las instrucciones de Easy
Motion Control.
2%GHDUUDQTXH
SHM2%

2%GHDODUPDF¬ØFOLFD
SHM2%

2%GHDODUPDGHVLQFURQLVPR
SHM2%
/HHUPHPRULDLPDJHQ
SDUFLDOGHSURFHVR
6)&

'HILQLUFRQGLFL¬µQSDUD
OODPDGD0&B,QLW
/ODPDGDFRQGLFLRQDGD
0&B,QLW

/ODPDGDFRQGLFLRQDGD

/ODPDGD
0&B6LPXODWLRQ

/ODPDGD
0&B6LPXODWLRQ

/ODPDGD
(QFRGHU

/ODPDGD
(QFRGHU

3URJUDPDGHXVXDULR

0&B,QLW

3URJUDPDGHXVXDULR

/ODPDGD
0&B0RYH-RJ

/ODPDGD
0&B0RYH-RJ

/ODPDGD
0&B0RYH$EVROXWH

/ODPDGD
0&B0RYH$EVROXWH

/ODPDGD
0&B0RYH5HODWLYH

/ODPDGD
0&B0RYH5HODWLYH

/ODPDGD
0&B*HDU,Q

/ODPDGD
0&B*HDU,Q

/ODPDGD
0&B+RPH

/ODPDGD
0&B+RPH

/ODPDGD
0&B6WRS0RWLRQ

/ODPDGD
0&B6WRS0RWLRQ

/ODPDGD
0&B&RQWURO

/ODPDGD
0&B&RQWURO

/ODPDGD
2XWSXW

/ODPDGD
2XWSXW
(VFULELUPHPRULDLPDJHQ
SDUFLDOGHSURFHVR
6)&

(*) La llamada de la instrucci√≥n de reductor MC_GearIn solo tiene sentido con ejes esclavos.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3055

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Varios ejes
Para el funcionamiento de varios ejes en una CPU se recomiendan las estructuras siguientes
para el programa de usuario:
2%GHDODUPDF¬ØFOLFD

2%GHDODUPDGHVLQFURQLVPR

+DUGZDUHGHHQWUDGD

+DUGZDUHGHHQWUDGD
6)&OHHU0,33

(MHGULYHUGHHQWUDGD
(MHGULYHUGHHQWUDGD
(MHGULYHUGHHQWUDGD

(MHQGULYHUGHHQWUDGD
(MHQ
,QVWUXFFLRQHVGHGHVSOD]DPLHQWR
\UHJXODGRU
(MHQGULYHUGHVDOLGD

(MH

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR
\UHJXODGRU

6)&HVFULELU0,33

(MH

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR\
UHJXODGRU

(MH

,QVWUXFFLRQHVGHGHVSOD]DPLHQWR\
UHJXODGRU

(MHGULYHUGHVDOLGD
(MHGULYHUGHVDOLGD
(MHGULYHUGHVDOLGD

Recomendaci√≥n para OB de alarma c√≠clica.

Recomendaci√≥n para OB de alarma de sincronis‚Äê
mo.

Ventaja: Llamar los drivers de entrada al inicio del
OB se traduce en un m√≠nimo desfase y una m√≠ni‚Äê
ma fluctuaci√≥n al leer la periferia.

Ventaja: es posible resumir todas las instruccio‚Äê
nes de un eje en una √∫nica instrucci√≥n multiins‚Äê
tancia.

Gracias a la MIPP necesaria en los OB de alarma
Desventaja: no es posible resumir todas las ins‚Äê
trucciones de un eje en una √∫nica instrucci√≥n mul‚Äê de sincronismo, los datos de periferia le√≠dos son
coherentes con independencia de la llamada del
tiinstancia.
driver.

Todos los ejes que est√°n relacionados entre s√≠ deben llamarse en el mismo OB.
En una aplicaci√≥n is√≥crona, todos los ejes implicados deben estar en la misma memoria
imagen parcial del proceso.

Tratamiento de los datos de instancia
Los datos de instancia se pueden guardar en un DB propio para cada instrucci√≥n o en un DB
multiinstancia para todas las instrucciones.
Despu√©s de cargar en el m√≥dulo los datos de instancia de una instrucci√≥n es necesario
inicializar la instrucci√≥n. Para ello hay que activar la entrada "Init" de la instrucci√≥n. Ver tambi√©n

3056

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Inicializaci√≥n y modificaciones de par√°metros (P√°gina 3058) yGuardar y cargar el bloque de
datos de eje (P√°gina 3063).

Interconexi√≥n de instrucciones
Las conexiones entre las instrucciones y el DB de eje representadas en la figura del apartado
anterior sobre interacci√≥n de las instrucciones, se realizan por medio de estos par√°metros:
‚óè Axis
‚óè Init
(ver Significado de los par√°metros comunes (P√°gina 3058))
Adem√°s, se requieren las interconexiones siguientes:
‚óè La entrada "EnableDrive" de la instrucci√≥n MC_Control debe interconectarse con un
interruptor de habilitaci√≥n. La instrucci√≥n MC_Control emite una consigna de velocidad
√∫nicamente cuando "EnableDrive" = TRUE.
‚óè La entrada "EnableDrive" de la instrucci√≥n Output‚Ä¶ debe interconectarse con la salida
"DriveEnabled" de la instrucci√≥n MC_Control. La instrucci√≥n Output‚Ä¶ emite un valor
distinto de cero √∫nicamente cuando "EnableDrive" = TRUE.
‚óè La salida "DriveEnabled" de la instrucci√≥n MC_Control debe interconectarse con una
entrada de habilitaci√≥n del accionamiento.
6DOLGDGHKDELOLWDFL¬µQ
$ODHWDSDGHSRWHQFLD

0&B&RQWURO
(QWUDGDGH
KDELOLWDFL¬µQ

(QDEOH'ULYH

'ULYH(QDEOHG

2XWSXW
(QDEOH'ULYH

Factores que influyen en la regulaci√≥n de posici√≥n en la CPU
Recomendaciones para optimizar la regulaci√≥n de posici√≥n:
‚óè El tiempo de muestreo debe respetarse con la mayor exactitud posible.
‚Äì En la configuraci√≥n hardware de la CPU debe parametrizarse la prioridad m√°s alta
posible para el OB de alarma c√≠clica llamando las instrucciones.
‚Äì En la configuraci√≥n hardware de la CPU debe parametrizarse la carga de ciclo por
comunicaci√≥n m√°s baja posible.
‚Äì Debe utilizarse un entorno is√≥crono; no se requieren otras medidas
‚óè Al conectar la adquisici√≥n de valores de enc√≥der mediante periferia descentralizada
(PROFIBUS DP/PROFINET IO), debe ajustarse una velocidad de transferencia del bus de
periferia lo m√°s alta posible (p. ej. 12 Mbits/s).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3057

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Significado de los par√°metros comunes
La tabla siguiente muestra los par√°metros que se utilizan en todas las instrucciones.
Par√°metro

Declaraci√≥n Tipo de da‚Äê Descripci√≥n
tos

EN

INPUT

BOOL

Entrada de habilitaci√≥n del cuadro KOP/FUP

ENO

OUTPUT

BOOL

Salida de habilitaci√≥n del cuadro KOP/FUP

Axis

IN‚ÄëOUT

STRUCT

Este par√°metro se interconecta con el DB de eje.
Con un DB del tipo AXIS_REF, la interconexi√≥n es la siguiente:
‚óè Axis := DBname.Ax
Con un DB que contiene una variable del tipo AXIS_REF, la interconexi√≥n es la
siguiente:
‚óè Axis := DBname.Variablenname.Ax

Init

IN‚ÄëOUT

BOOL

Este par√°metro se interconecta con un bit de inicializaci√≥n en el DB de eje que no es
utilizado por ninguna otra instrucci√≥n ("Init.I0" ‚Ä¶ "Init.I31", verCampo de bits para la
funci√≥n de inicializaci√≥n (P√°gina 3066)).
Con Init = TRUE, la instrucci√≥n ejecuta la inicializaci√≥n y a continuaci√≥n resetea el bit.
Con un DB del tipo AXIS_REF, la interconexi√≥n es la siguiente:
‚óè Init := DBname.Ax.Init.Ix
Con un DB que contiene una variable del tipo AXIS_REF, la interconexi√≥n es la
siguiente:
‚óè Init := DBname.Variablenname.Ax.Init.Ix
con Ix = I0 ‚Ä¶ I31

Inicializaci√≥n y modificaciones de par√°metros
La funci√≥n de las instrucciones de Easy Motion Control est√° basada en los datos guardados en
el DB de eje. All√≠ tambi√©n se encuentran par√°metros que describen el eje sustancialmente. Si
estos par√°metros se modifican, es necesario que cada una de las instrucciones de Easy
Motion Control llamadas en el programa de usuario ejecute una vez su inicializaci√≥n despu√©s
de la modificaci√≥n. En los apartados sobre configuraci√≥n (P√°gina 3030), estos par√°metros se
identifican con el siguiente s√≠mbolo:

Para la inicializaci√≥n, en el DB de eje est√° definido el campo de bits "Init.Ix" y cada instrucci√≥n
tiene el par√°metro "Init". Las instrucciones ejecutan su rutina de inicializaci√≥n si su entrada
"Init" est√° activada y a continuaci√≥n desactivan el bit de inicializaci√≥n interconectado.
Los bits del campo de bits "Init.Ix" del DB de eje son activados:
‚óè cada vez que se llama la instrucci√≥n MC_Init.
‚óè por el software de configuraci√≥n cuando se modifican los par√°metros correspondientes del
DB de eje.
Para cada instrucci√≥n de Easy Motion Control llamada en el programa de usuario, el par√°metro
"Init" debe interconectarse con un bit de inicializaci√≥n del DB de eje que no sea utilizado por
ninguna otra instrucci√≥n. De este modo se garantiza que las instrucciones se inicializar√°n

3058

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
cuando sea necesario debido a una modificaci√≥n de par√°metros o a un arranque de la CPU
("Init.I0" ‚Ä¶ "Init.I31", ver Campo de bits para la funci√≥n de inicializaci√≥n (P√°gina 3066)).
La instrucci√≥n MC_Init se llama una vez en los siguientes casos:
‚óè cada vez que arranca la CPU
‚óè si se ha modificado sin el software de configuraci√≥n uno de los par√°metros que en
los apartados sobre configuraci√≥n (P√°gina 3030) est√°n identificados con el siguiente
s√≠mbolo:

Encontrar√° informaci√≥n complementaria sobre la instrucci√≥n de inicializaci√≥n en MC_Init.
ADVERTENCIA
Los par√°metros que en los apartados sobre configuraci√≥n (P√°gina 3030) est√°n identificados
con el s√≠mbolo siguiente √∫nicamente pueden modificarse con el eje parado:
Si se incumple este requisito, no se garantiza un movimiento controlado del eje.

ADVERTENCIA
En la inicializaci√≥n se calculan valores auxiliares que se guardan en los par√°metros est√°ticos
de las instrucciones y en el DB de eje. Por tanto, los bloques de datos de instancia y el DB de
eje √∫nicamente pueden sobrescribirse cuando el eje est√° parado.
Si se incumple este requisito, no se garantiza un movimiento controlado del eje.

Desarrollo de los movimientos de desplazamiento
Inicio de una petici√≥n de desplazamiento
Los par√°metros de entrada de las instrucciones de desplazamiento se interpretan una vez al
iniciar una petici√≥n de desplazamiento. La modificaci√≥n de estos valores mientras se ejecuta
la petici√≥n no influye en el desplazamiento en curso.
Recorrido m√°ximo
Para cada desplazamiento, el recorrido est√° limitado a la distancia equivalente a
224 incrementos del enc√≥der. Se calcula
del modo siguiente:
5HFRUULGRGHOHMHSRUYXHOWDGHOHQF¬µGHU
0¬£[LPRUHFRUULGR    ;

,QFUHPHQWRVSRUYXHOWDGHOHQF¬µGHU

Ejemplo:
Recorrido del eje por vuelta del enc√≥der

= 2,5 mm

Incrementos por vuelta del enc√≥der

= 4096

recorrido m√°ximo = 2 x 2,5 mm / 4096

= 10240 mm

24

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3059

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Excepci√≥n:
Las instrucciones MC_MoveJog y MC_GearIn no tienen limitaci√≥n de recorrido en el caso de
un eje rotativo.

Anulaci√≥n de un desplazamiento
Una instrucci√≥n de desplazamiento activa
‚óè puede anularse en cualquier momento iniciando otra instrucci√≥n de desplazamiento,
‚óè puede cancelarse iniciando la instrucci√≥n MC_StopMotion,
‚óè puede cancelarse activando el modo manual.
En caso de anulaci√≥n mediante otra instrucci√≥n de desplazamiento, el eje se frena o se acelera
hasta alcanzar la velocidad de la instrucci√≥n que causa la anulaci√≥n y a continuaci√≥n se
desplaza hasta la nueva posici√≥n de destino sin realizar ninguna parada intermedia. La
instrucci√≥n de desplazamiento anulada activa la salida "CommandAborted".
Si el nuevo desplazamiento requiere un cambio de sentido del eje, primero se para y a
continuaci√≥n se mueve en sentido contrario (inversi√≥n).
Por motivos de seguridad, las deceleraciones de las dos instrucciones de desplazamiento que
se anulan deben coincidir. De este modo en caso de inversi√≥n se garantiza que no se
sobrepase el destino original del movimiento.

Uso repetido de una instrucci√≥n de desplazamiento
Una instrucci√≥n de desplazamiento puede llamarse varias veces para un eje si as√≠ lo requiere
el programa.

Reacci√≥n a errores
Todos los errores que se producen se muestran en el DB de eje, donde el usuario debe
acusarlos (ver Se√±alizaci√≥n y acuse de errores en el DB de eje (P√°gina 3074)). Cada error
causa la cancelaci√≥n de una petici√≥n de desplazamiento activa. La condici√≥n para que pueda
iniciarse una nueva petici√≥n de desplazamiento es que no haya ning√∫n error presente.

3060

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Diagramas de evoluci√≥n de se√±al

&RQVLJQDYHO
9HOUHDO

9HORFLGDG

La figura siguiente muestra las se√±ales en un desplazamiento sin error.

7LHPSR

([HFXWH

%XV\

'RQH











,QLFLRGHODLQVWUXFFL¬µQGHGHVSOD]DPLHQWR



3XQWRGHIUHQDGR



/DFRQVLJQDKDDOFDQ]DGRODSRVLFL¬µQGHGHVWLQR



(OHMHKDDOFDQ]DGROD]RQDGHGHVWLQR



$OUHVHWHDU([HFXWHVHUHVHWHD'RQH(OSURFHVRKDILQDOL]DGR&XDQGRVHUHVHWHD
([HFXWHDQWHVGHDOFDQ]DUVHODSRVLFL¬µQGHGHVWLQRVHDFWLYD'RQHGXUDQWHXQ
FLFORDODOFDQ]DUVHODSRVLFL¬µQGHGHVWLQR\GHVSX¬´VVHYXHOYHDUHVHWHDU

La figura siguiente muestra las se√±ales en un desplazamiento con error.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3061

Control de movimiento

9HORFLGDG

6.3 Control de movimiento (S7-300, S7-400)

7LHPSR

([HFXWH

%XV\

&RPPDQG$ERUWHG

6H¬≥DOL]DFL¬µQGHHUURUHV
HQHO'%GHHMH









,QLFLRGHODLQVWUXFFL¬µQGHGHVSOD]DPLHQWR



6HKDSURGXFLGRXQHUURU



$OUHVHWHDU([HFXWHVHUHVHWHDODUHVSXHVWD&RPPDQG$ERUWHG&XDQGRVHUHVHWHD
([HFXWHDQWHVGHSURGXFLUVHHOHUURUVHDFWLYD0RWLRQ$ERUWHGGXUDQWHXQFLFORDO
DSDUHFHUHOHUURU\GHVSX¬´VVHYXHOYHDUHVHWHDU

Bloque de datos de eje
Tarea
El DB de eje es el elemento central de la gesti√≥n de datos de Easy Motion Control. Contiene:
‚óè Par√°metros que describen el eje sustancialmente (p. ej. direcciones de periferia)
‚óè Par√°metros de la regulaci√≥n de posici√≥n que se calculan a partir de estos par√°metros
b√°sicos al inicializarse las instrucciones de Easy Motion Control
‚óè Valores actuales de la regulaci√≥n de posici√≥n (p. ej. posici√≥n, estados de fallo...)
‚óè Bits de inicializaci√≥n para coordinar el arranque de las instrucciones

3062

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La interacci√≥n de estos tipos de par√°metros queda garantizada cuando se toma una de las
medidas siguientes:
‚óè Editar y transferir el DB de eje con el software de configuraci√≥n
‚óè Asegurarse de que se llama la instrucci√≥n MC_Init despu√©s de modificar determinados
par√°metros
En ambos casos se comprueba en la medida de lo posible la plausibilidad de los par√°metros
introducidos y se calculan los valores que Easy Motion Control necesita internamente.
Asimismo, el software de configuraci√≥n analiza el tipo de modificaciones y se encarga de
controlar los procesos de carga.

Guardar y cargar el bloque de datos de eje
ADVERTENCIA
√önicamente est√° permitido sobrescribir todo el DB de eje cuando el eje est√° parado.
El DB de eje NO se debe cargar en RUN.
Si se carga el DB de eje en el m√≥dulo sin tener en cuenta las indicaciones de los apartados
siguientes, no se garantiza el movimiento correcto del eje.

Offline
Despu√©s de modificar determinados par√°metros es necesario que todas las instrucciones de
Easy Motion Control ejecuten una inicializaci√≥n.
En la descripci√≥n del DB de eje estos par√°metros se identifican con el siguiente s√≠mbolo:

Modificar y cargar estos par√°metros
‚óè tan solo es posible cuando el eje est√° parado,
‚óè debe incluir la activaci√≥n de los bits de inicializaci√≥n (ver Inicializaci√≥n y modificaciones de
par√°metros (P√°gina 3058)).

Online
No es posible que par√°metros modificados online (p. ej. las coordenadas del punto de
referencia en el caso de enc√≥ders absolutos) se apliquen a la gesti√≥n de datos offline.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3063

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Par√°metros de eje
Todos los datos de longitud, velocidad o deceleraci√≥n mencionados en el apartado "Configurar
Easy Motion Control (P√°gina 3028)" hacen referencia a una unidad de longitud cualquiera pero
unificada. Todas las indicaciones de tiempo son en segundos.
En la columna "Nombre" de las tablas se indica el nombre de par√°metro que hay en el DB de
eje, mientras que en la columna "Comentario" figura el nombre de par√°metro utilizado en el
software de configuraci√≥n.
Nota
Los par√°metros no listados al configurar est√°n reservados para uso interno por las
instrucciones de Easy Motion Control y no deben modificarse.

Valores actuales
Resumen
Los siguientes par√°metros del DB de eje muestran informaci√≥n actualizada sobre el estado del
eje durante un desplazamiento. Est√° prohibido modificar el contenido de estos par√°metros.

Valor real de posici√≥n
Aqu√≠ se muestra el valor real de posici√≥n actual.
Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

Comentario

104.0

ActPosition

REAL

0.0

Valor real de posici√≥n
Rango de valores:
N√∫mero en coma flotante [unidad de lon‚Äê
gitud]

Error de seguimiento
Error de seguimiento = consigna de posici√≥n actual ‚Äì valor real de posici√≥n actual
Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

Comentario

108.0

FollowingDistance

INT

0

Error de seguimiento
Rango de valores:
N√∫mero en coma flotante [unidad de lon‚Äê
gitud]

3064

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Distancia residual
Aqu√≠ se indica durante un desplazamiento con indicaci√≥n del destino (MC_MoveAbsolute,
MC_MoveRelative) la distancia residual hasta la posici√≥n de destino.
Un desplazamiento sin destino (MC_MoveJog, MC_Home) o un error con parada brusca
ajustan la distancia residual a 0.
Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

112.0

RemainingDistance

REAL

0.0

Comentario
Distancia residual hasta el destino
Rango de valores:
N√∫mero en coma flotante [unidad de lon‚Äê
gitud]

Velocidad consignada
Durante un desplazamiento, aqu√≠ se muestra la velocidad consignada del eje calculada por la
instrucci√≥n de desplazamiento.
Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

Comentario

116.0

NomVelocity

REAL

0.0

Velocidad consignada
Rango de valores:
N√∫mero en coma flotante [unidad de lon‚Äê
gitud/s]

Velocidad real
Aqu√≠ se muestra la velocidad real del eje.
Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

Comentario

120.0

ActVelocity

REAL

0.0

Velocidad real
Rango de valores:
N√∫mero en coma flotante [unidad de lon‚Äê
gitud/s]

Eje sincronizado
Si se utiliza un enc√≥der incremental:
‚óè FALSE: tras arrancar la CPU o detectarse un error de enc√≥der
‚óè TRUE: tras llevarse a cabo una b√∫squeda del punto de referencia o un posicionamiento del
punto de referencia
Si se utiliza un enc√≥der absoluto:
‚óè FALSE: antes del primer posicionamiento del punto de referencia
‚óè TRUE: despu√©s del posicionamiento del punto de referencia

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3065

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

Comentario

124.0

Sync

BOOL

FALSE

Eje sincronizado
FALSE = no sincronizado
TRUE = sincronizado

Valor actual del enc√≥der
Aqu√≠ se muestra el valor actual del enc√≥der.
Direc‚Äê
ci√≥n

Nombre

Tipo

Valor inicial

Comentario

136.0

EncoderValue

DINT

L#0

Valor actual del enc√≥der
Rango de valores:
Decimal [incrementos]

Campo de bits para la funci√≥n de inicializaci√≥n
Funcionamiento del campo de bits
Todas las instrucciones de Easy Motion Control deben inicializarse despu√©s de cada arranque
de la CPU y despu√©s de modificarse determinados par√°metros.
Para este fin, en el DB de eje est√° definido el campo de bits "Init.Ix" y cada instrucci√≥n tiene el
par√°metro "Init". Las instrucciones ejecutan su rutina de inicializaci√≥n cuando su entrada "Init"
est√° activada. A continuaci√≥n desactivan el bit de inicializaci√≥n interconectado.
Cada vez que se llama una instrucci√≥n, el par√°metro "Init" debe interconectarse con un bit del
campo de bits. Este bit no puede ser utilizado por ninguna otra instrucci√≥n (ver Inicializaci√≥n y
modificaciones de par√°metros (P√°gina 3058)).
Siempre que se llama la instrucci√≥n MC_Init o en el software de configuraci√≥n se modifica un
par√°metro que no se activa hasta despu√©s de haberse inicializado las instrucciones, todos los
bits de este campo se ajustan a TRUE simult√°neamente. De este modo, todas las
instrucciones ejecutan una inicializaci√≥n la siguiente vez que se llaman.
Direcci√≥n Nombre

Tipo

Valor inicial

Comentario

278.0

STRUCT

TRUE

Campo de bits para inicializaci√≥n de las ins‚Äê
trucciones

Init

Programa de usuario como FB multiinstancia
En caso de guardar todos los par√°metros de las instrucciones de desplazamiento en un DB o
si se quiere utilizar el mismo programa para varios ejes, el programa de usuario se crea en un
FB multiinstancia.
Los datos de eje tambi√©n deben crearse en este DB multiinstancia. Para ello, en el FB
multiinstancia defina una variable est√°tica del tipo AXIS_REF de la librer√≠a "Easy Motion
Control".

3066

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Interconecte los par√°metros Axis y Init de las instrucciones de Easy Motion Control con estas
variables.
Llame la instrucci√≥n MC_Init en el bloque multiinstancia como primera instrucci√≥n de forma
condicionada. La condici√≥n debe activarse en el OB de arranque (p. ej. OB 100) y desactivarse
despu√©s de llamar la instrucci√≥n MC_Init.
√önicamente es posible crear nuevos DB multiinstancia con el TIA Portal o con el editor
KOP/AWL/FUP.

6.3.10.6

Puesta en servicio de Easy Motion Control

Consignas de seguridad
Introducci√≥n
Antes de la puesta en marcha debe tenerse en cuenta lo siguiente:

ADVERTENCIA
Las funciones de puesta en marcha producen el movimiento del eje.
En la puesta en marcha y durante el funcionamiento puede haber movimientos de
desplazamiento incontrolados del eje que causen da√±os personales y materiales graves.
Para evitar da√±os personales y materiales es necesario tomar las medidas siguientes:
‚óè Instale un interruptor de PARADA DE EMERGENCIA en las inmediaciones del equipo.
Solo as√≠ puede garantizarse que en caso de un fallo del hardware o del software sea
posible desconectar la instalaci√≥n de modo seguro.
‚óè Instale finales de carrera de seguridad que act√∫en directamente en las etapas de potencia
de todos los accionamientos.
‚óè Aseg√∫rese de que ninguna persona tenga acceso al √°rea de la instalaci√≥n donde hay
piezas en movimiento.

Puesta en marcha del objeto tecnol√≥gico Eje
El editor de puesta en marcha le ayudar√° a poner en servicio el objeto tecnol√≥gico Eje y probar
su funcionalidad. Se pueden realizar los siguientes tests y mediciones:
‚óè Test de cableado (P√°gina 3068)
‚óè Medici√≥n de velocidad (P√°gina 3069)
‚óè Referenciaci√≥n del eje (P√°gina 3069)
‚óè Medici√≥n de recorrido (P√°gina 3070)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3067

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Procedimiento
Para abrir el editor de puesta en marcha del objeto tecnol√≥gico Eje, haga lo siguiente:
1. Abra la carpeta "Objetos tecnol√≥gicos" en el √°rbol del proyecto.
2. En el √°rbol del proyecto, abra la instancia correspondiente al objeto tecnol√≥gico AXIS_REF
(p. ej. EMC_AXIS_1).
3. Haga doble clic en el objeto "Puesta en marcha".

Soluci√≥n de errores
Si se producen errores durante la puesta en marcha, consulte la informaci√≥n sobre posibles
soluciones que se ofrece en el apartado S√≠ntomas de error y soluciones posibles durante la
puesta en marcha del programa de usuario (P√°gina 3071).

Informaci√≥n adicional
Encontrar√° informaci√≥n detallada sobre los par√°metros y los botones de las interfaces de
puesta en marcha en las respectivas etiquetas emergentes.

Test de cableado
El test de cableado sirve para determinar el sentido de giro del eje.

Procedimiento
Para realizar el test de cableado, haga lo siguiente:
1. En la vista de configuraci√≥n, haga clic en "Test de cableado".
2. Haga clic en el bot√≥n "Activar".
Se le preguntar√° si desea activar el control manual.
3. Haga clic en el bot√≥n "Aceptar".
Se establecer√° una conexi√≥n online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad m√°xima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleraci√≥n".
6. Aseg√∫rese de que la posici√≥n inicial permita el movimiento del eje en ambos sentidos.
7. Para mover el eje, haga clic en el bot√≥n "Jog hacia atr√°s" o "Jog hacia delante".
8. Indique en "Resultado" si el eje se ha desplazado en el sentido deseado.
9. Si selecciona "S√≠" como resultado, haga clic en el bot√≥n "Aceptar" de la ventana que se
mostrar√°.
10.Si selecciona "No" como resultado, haga clic en el bot√≥n "S√≠" de la ventana que se mostrar√°.
Los par√°metros "Correcci√≥n de sentido del enc√≥der" y "Correcci√≥n de sentido del
accionamiento" cambiar√°n.

3068

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Medici√≥n de velocidad del eje
La medici√≥n de velocidad sirve para calcular la velocidad m√°xima del eje.

Procedimiento
Para medir la velocidad, haga lo siguiente:
1. En la vista de configuraci√≥n, haga clic en "Medici√≥n de velocidad".
2. Haga clic en el bot√≥n "Activar".
Se le preguntar√° si desea activar el control manual.
3. Haga clic en el bot√≥n "Aceptar".
Se establecer√° una conexi√≥n online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad m√°xima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleraci√≥n".
6. Aseg√∫rese de que la posici√≥n inicial permita el desplazamiento con una distancia suficiente
en al menos un sentido.
7. Haga clic en el bot√≥n "Jog hacia atr√°s" o "Jog hacia delante" y mant√©ngalo pulsado hasta
que el valor del campo de salida "Salida v. real" alcance el valor de "Salida consigna".
Easy Motion Control calcula la velocidad m√°xima del eje y la indica en el campo de salida
"Valor determinado".
8. Si desea guardar en el proyecto la velocidad calculada del eje, haga clic en el bot√≥n
"Aplicar".
El valor calculado sobrescribir√° la "Velocidad m√°xima" en la gesti√≥n de datos online/offline
del objeto tecnol√≥gico.

B√∫squeda del punto de referencia
La especificaci√≥n de un punto de referencia est√° prevista para enc√≥ders absolutos y, en este
caso, se denomina ajuste del enc√≥der absoluto.

Procedimiento
Para especificar un punto de referencia para un enc√≥der absoluto, proceda del siguiente modo:
1. En la vista de configuraci√≥n, haga clic en "Referenciaci√≥n del eje".
2. Haga clic en el bot√≥n "Activar".
Se le preguntar√° si desea activar el control manual.
3. Haga clic en el bot√≥n "Aceptar".
Se establecer√° una conexi√≥n online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad m√°xima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleraci√≥n".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3069

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
6. Haga clic en el bot√≥n "Jog hacia atr√°s" o "Jog hacia delante" hasta que el eje se haya
desplazado al punto de referencia.
Alternativa:
desplace el eje manualmente hasta el punto de referencia.
7. Introduzca un valor de posici√≥n como punto de referencia en el campo de entrada "Entrada
de la posici√≥n de referencia".
Se determina el offset entre la posici√≥n de referencia y la posici√≥n f√≠sica del eje y se
almacena en el DB del eje.
8. En la ventana que aparece a continuaci√≥n, confirme si desea almacenar el offset para el
ajuste del enc√≥der absoluto en la gesti√≥n de datos offline del objeto tecnol√≥gico.
Nota
Si sustituye el enc√≥der absoluto, deber√° volver a especificar el punto de referencia.

Medici√≥n del recorrido del eje
La medici√≥n del recorrido sirve para calcular el recorrido del eje por vuelta del enc√≥der.

Procedimiento
Para realizar la medici√≥n del recorrido, proceda del siguiente modo:
1. En la vista de configuraci√≥n, haga clic en "Medici√≥n del recorrido".
2. Haga clic en el bot√≥n "Activar".
Se le preguntar√° si desea activar el control manual.
3. Haga clic en el bot√≥n "Aceptar".
Se establecer√° una conexi√≥n online entre STEP 7 (TIA Portal) y la CPU.
4. Introduzca una velocidad como porcentaje de la velocidad m√°xima en el campo de entrada
"Velocidad especificada".
5. Introduzca un valor en el campo de entrada "Tiempo de aceleraci√≥n".
6. Haga clic en el bot√≥n "Jog hacia atr√°s" o "Jog hacia delante" hasta que el eje se haya
desplazado a la posici√≥n inicial.
Alternativa:
desplace el eje manualmente a la posici√≥n inicial.
7. Introduzca un valor de posici√≥n como posici√≥n inicial en el campo de entrada "Entrada de
la posici√≥n inicial".
8. Haga clic en el bot√≥n "Jog hacia atr√°s" o "Jog hacia delante" hasta que el eje se haya
desplazado a la posici√≥n final.
Alternativa:
desplace el eje manualmente a la posici√≥n final.

3070

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
9. Introduzca un valor de posici√≥n como posici√≥n final en el campo de entrada "Entrada de la
posici√≥n final".
Easy Motion Control calcula el recorrido del eje por cada vuelta del enc√≥der y lo indica en
el campo de salida "Valor calculado".
10.Si desea guardar en el proyecto el valor calculado de recorrido del eje por vuelta del
enc√≥der, haga clic en el bot√≥n "Aplicar".
El valor calculado se aplica en la gesti√≥n de datos online/offline del objeto tecnol√≥gico.

S√≠ntomas de error y soluciones posibles durante la puesta en marcha del programa de usuario
El eje est√° parado a pesar de una petici√≥n de desplazamiento
Si el eje est√° parado a pesar de una petici√≥n de desplazamiento, realice las comprobaciones
siguientes:
Error

Soluciones

Cableado incorrecto del ac‚Äê ‚óè Compruebe si la salida "DriveEnabled" de la instrucci√≥n MC_Control est√° interconectada
cionamiento
sin discontinuidades con la entrada de habilitaci√≥n de la etapa de potencia.
‚óè Compruebe si la salida "DriveEnabled" de la instrucci√≥n MC_Control est√° interconectada
con la entrada "EnableDrive" del driver de salida.
Error en las direcciones de Ajuste correctamente las direcciones de periferia y los n√∫meros de canal:
periferia o n√∫meros de canal En el DB de eje se esperan las direcciones iniciales de los m√≥dulos. A partir de la direcci√≥n
inicial y el n√∫mero de canal (modo de contaje: a partir del canal 0), los bloques driver calculan
las direcciones de periferia espec√≠ficas de cada m√≥dulo para consigna y valor real.
Modo de simulaci√≥n activa‚Äê
do

Desactive el modo de simulaci√≥n ("Sim" = FALSE).

Modo manual activado sin
consigna de velocidad

Si est√° activado el modo manual ("ManEnable" = TRUE), especifique una "velocidad consig‚Äê
nada para modo manual" ("ManVelocity" <> 0.0 [unidad de longitud/s]).

Habilitaci√≥n de acciona‚Äê
miento no concedida

Ajuste la entrada "EnableDrive" de la instrucci√≥n MC_Control a TRUE.

Error de eje presente

Si en el DB de eje est√° activado el bit "Error agrupado" ("Error"), el tipo de error del eje puede
verse en los campos de bits para la se√±alizaci√≥n de errores:

Si el modo de simulaci√≥n est√° activado ("Sim" = TRUE), no se leen ni escriben valores de
periferia.

‚óè Despu√©s de llamar la instrucci√≥n MC_Init, el error "Estado de parada de acuse obligatorio"
("Err.StoppedMotion") est√° siempre activado. Confirme el error activando "Acuse
agrupado" "ErrorAck" = TRUE.
‚óè En caso de error de parametrizaci√≥n, vuelva a ejecutar MC_Init despu√©s de corregir los
valores err√≥neos.
‚óè En caso de error del enc√≥der, compruebe si el m√≥dulo de lectura de recorrido se ha
parametrizado por completo (en caso necesario, con ayuda del software de configuraci√≥n
de m√≥dulos).
‚óè Otros errores: elimine el error y ac√∫selo activando "Acuse agrupado" "ErrorAck" = TRUE.
"Acuse agrupado" no se re‚Äê Si despu√©s de activar un "Acuse agrupado" ("ErrorAck"), Easy Motion Control no lo detecta ni
setea
resetea:
‚óè Evite que las instrucciones de Easy Motion Control permanezcan en su rama de
inicializaci√≥n debido a una llamada continua a la instrucci√≥n MC_Init.
‚óè Compruebe si el m√≥dulo de lectura de recorrido reacciona al acuse de error.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3071

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Error

Soluciones

La "correcci√≥n de la veloci‚Äê
dad" es distinta a 0%

Parametrice "correcci√≥n de la velocidad" = 0% ("Override").

Petici√≥n de desplazamiento En la instrucci√≥n de desplazamiento, ajuste el par√°metro "Busy" = TRUE.
no procesada por el progra‚Äê
ma
"Par√°metro inadmisible de
instrucci√≥n de desplaza‚Äê
miento" ("Err.DataErr") o
"Destino fuera del rango de
desplazamiento" ("Err.Tar‚Äê
getErr")

Si carga el DB de eje en la CPU sin utilizar el software de configuraci√≥n Easy Motion Control,
aseg√∫rese de que a continuaci√≥n se llama la instrucci√≥n MC_Init . MC_Init guarda valores
auxiliares en el DB de eje.

El eje se desplaza sin petici√≥n de desplazamiento
Si el eje se desplaza sin petici√≥n de desplazamiento, puede ser por las siguientes causas:
Error

Causas

Soluciones

El eje arranca
muy r√°pido.

El sentido de acci√≥n de la regulaci√≥n est√° mal
ajustado.

Configure con ayuda del asistente "Test de cableado"
los par√°metros "Correcci√≥n de sentido del enc√≥der"
("PolarityEncoder") y "Correcci√≥n de sentido del ac‚Äê
cionamiento" ("PolarityDrive"). De este modo, las ins‚Äê
trucciones se adecuan a la instalaci√≥n de hardware.

El eje se despla‚Äê La etapa de potencia del accionamiento est√° ha‚Äê ‚Äî
za lentamente.
bilitada y el eje no est√° regulado (la instrucci√≥n
MC_Control emite "DriveEnabled" = FALSE).
La salida anal√≥gica no est√° bien cableada con la
etapa de potencia del accionamiento.

Corrija el cableado entre la salida anal√≥gica y la etapa
de potencia del accionamiento.

El driver de entrada o el driver de salida no acce‚Äê Ajuste los par√°metros con ayuda del asistente "Test
de a los m√≥dulos pertenecientes al accionamien‚Äê de cableado".
to porque la direcci√≥n del m√≥dulo o el n√∫mero de
canal no est√°n bien ajustados en el DB de eje.

La velocidad del eje es distinta a la esperada o el eje vibra
¬øSon correctos los par√°metros que describen el eje?
Entre estos par√°metros existen ciertas correlaciones que se aclarar√°n por medio del siguiente
ejemplo.
‚óè "Ganancia del regulador" ("FactorP"):
Si la "Ganancia del regulador" ("FactorP") seleccionada es demasiado grande, puede que
el eje vibre.
‚óè "Velocidad m√°xima del eje" ("MaxVelocity")

3072

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
‚óè "Valor de referencia para velocidad m√°xima del eje" ("DriveInputAtMaxVel"):
Ejemplo para un control de ¬±10 V:
)DFWRU

0RWRU

Q P¬£[ bUPLQ
bUV
D9

PPSRUYXHOWD

&DEH]DO

Q PD[ bUPLQ
bUV

(QF¬µGHU

SDVRVSRUYXHOWD

Es aplicable la siguiente relaci√≥n:
Si el m√≥dulo de salidas emite 9 V, el accionamiento girar√° a 3000 r/min. En el cabezal son
300 r/min o 5 r/s. El carro se desplaza 10 mm por cada vuelta del cabezal. De esto resulta
que la velocidad m√°xima del carro es de 10 mm/r ‚Ä¢ 300 r/min = 50 mm/s.
As√≠ pues, debe ajustarse lo siguiente:
‚Äì "Velocidad m√°xima del eje" = 50 mm/s y "Valor de referencia para velocidad m√°xima del
eje" = 9 V.
‚óè "Incrementos por vuelta del enc√≥der" ("StepsPerRev"):
Para comprobar si el n√∫mero de incrementos suministrado por el enc√≥der coincide con el
valor parametrizado, puede observar el par√°metro "Valor del enc√≥der" con el software de
configuraci√≥n mientras gira el enc√≥der una vez con la mano.
Ejemplo: El "valor del enc√≥der" var√≠a 4096 incrementos con cada vuelta del cabezal.
‚óè "Recorrido del eje por vuelta del enc√≥der" ("DisplacementPerRev"):
Este par√°metro asigna un determinado recorrido a una vuelta del enc√≥der. Para comprobar
si es correcto, puede observar el par√°metro "Valor real de posici√≥n" con el software de
configuraci√≥n mientras gira el enc√≥der una vez con la mano.
Ejemplo: El "valor real de posici√≥n" var√≠a 10 mm con cada vuelta del cabezal.
‚óè "Tiempo de muestreo" ("Sample_T"):
El tiempo de muestreo se utiliza, junto con la distancia recorrida desde el √∫ltimo muestreo,
para calcular la velocidad del eje. Debe equivaler al tiempo de llamada del OB en el que se
llaman las instrucciones de Easy Motion Control.
En el DB de eje debe introducirse "Sample_T" en segundos.

El posicionamiento no es lo suficientemente exacto
Si el posicionamiento no se lleva a cabo con la suficiente exactitud:
‚óè compruebe el valor ajustado en el par√°metro "Incrementos por vuelta del enc√≥der"
("StepsPerRev").
‚óè determine el par√°metro "Recorrido del eje por vuelta del enc√≥der" ("DisplacementPerRev")
con la mayor exactitud posible (asistente "Medici√≥n del recorrido").

Consulte tambi√©n
Medici√≥n del recorrido del eje (P√°gina 3070)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3073

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error de seguimiento m√°ximo rebasado
El error de seguimiento m√°ximo puede rebasarse por varias razones:
‚óè Para que se alcance la "Velocidad m√°xima del eje" ("MaxVelocity") debe cumplirse lo
siguiente:
‡≤±0D[)ROORZLQJ'LVWDQFH‡≤Ø !

‡≤±0D[9HORFLW\‡≤Ø
‡≤±)DFWRU3‡≤Ø

‚óè El eje real no puede alcanzar la aceleraci√≥n parametrizada.
‚óè Los par√°metros "Velocidad m√°xima del eje" ("MaxVelocity") y "Valor de referencia para la
velocidad m√°xima del eje" ("DriveInputAtMaxVel"), as√≠ como, dado el caso, "Valor de
referencia para velocidad 100%" ("DriveInputAt100") no est√°n correctamente ajustados
(ver La velocidad del eje es distinta a la esperada o el eje vibra (P√°gina 3072)).

La instrucci√≥n MC_GearIn no muestra ni "InGear" ni "Coupled"
La instrucci√≥n MC_GearIn no muestra ni "InGear" ni "Coupled" en los casos siguientes:
‚óè El eje esclavo se acopla a un eje maestro que ya est√° desplaz√°ndose y (todav√≠a) no ha
alcanzado la velocidad de salida del reductor.
‚óè El eje esclavo ha soltado el acoplamiento debido a un error.

La instrucci√≥n MC_GearIn muestra "InGear", pero no "Coupled"
La instrucci√≥n MC_GearIn muestra "InGear" pero no "Coupled" en los casos siguientes:
‚óè El eje esclavo ha alcanzado la velocidad de salida del reductor (posiblemente durante un
solo ciclo), pero a continuaci√≥n la ha perdido de nuevo:
‚Äì El eje maestro ha acelerado o decelerado m√°s de lo que le es posible al eje esclavo de
acuerdo con su parametrizaci√≥n y el factor de reducci√≥n.
‚Äì El eje esclavo no puede alcanzar la velocidad que resulta de la velocidad consignada del
eje maestro y del factor de reducci√≥n.

6.3.10.7

Diagn√≥stico

Se√±alizaci√≥n y acuse de errores en el DB de eje
Se√±alizaci√≥n y acuse de errores
Todos los errores detectados por las instrucciones se muestran en el DB de eje de la manera
siguiente:
‚óè Mediante activaci√≥n del error agrupado "Error"
‚óè Mediante una se√±alizaci√≥n de error espec√≠fica "Err.xxxx"
En los errores de acuse obligatorio, despu√©s de subsanar el error es necesario activar un
acuse de error (par√°metro "ErrorAck" en el DB de eje, ver abajo).

3074

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Existen tres tipos de errores con distintas reacciones:
‚óè Los errores con los que ya no se garantiza el correcto funcionamiento de la regulaci√≥n de
posici√≥n dan lugar a una parada brusca:
La instrucci√≥n MC_Control hace que el eje se detenga con la rampa de frenado consignada
en "EmergencyDec". A continuaci√≥n, la instrucci√≥n MC_Control ajusta su salida
"DriveEnabled" a "0".
Despu√©s de eliminar el error hay que activar el acuse de error en el DB de eje. A
continuaci√≥n se activa de nuevo DriveEnabled.
‚óè Los errores con los que la regulaci√≥n de posici√≥n contin√∫a funcionando dan lugar a
una parada suave:
La instrucci√≥n de desplazamiento activa frena el eje con la deceleraci√≥n parametrizada. El
eje contin√∫a estando regulado, pero "DriveEnabled" no se resetea.
En este estado el desplazamiento tan solo puede anularse mediante MC_StopMotion.
Despu√©s de eliminar el error hay que activar el acuse de error en el DB de eje.
‚óè Errores en los par√°metros de eje (errores de parametrizaci√≥n):
La instrucci√≥n MC_Init comprueba, dentro de lo posible, los par√°metros introducidos en el
DB de eje. En caso de error, activa el bit "Err.ConfigErr" e introduce la causa exacta del error
en "Config.Err_xxx".
Los errores de parametrizaci√≥n no se pueden eliminar mediante acuse. Se impide el
arranque del eje. Despu√©s de corregir el par√°metro mal introducido es necesario llamar de
nuevo la instrucci√≥n MC_Init. De este modo se resetean las se√±alizaciones de errores de
parametrizaci√≥n si ya no hay ning√∫n error presente.
Nota
Para los errores con parada brusca y parada suave se aplica lo siguiente:
Mientras haya uno o m√°s errores pendientes y no acusados, no es posible realizar ninguna
petici√≥n de desplazamiento.
Excepci√≥n:
Si tan solo se rebasa un final de carrera por software, es posible una petici√≥n de
desplazamiento en el sentido contrario. Despu√©s de salir del final de carrera por software, este
error se acusa autom√°ticamente.

Nota
Si el error ha sido detectado por una instrucci√≥n de desplazamiento (p. ej. MC_MoveJog o
MC_MoveAbsolute) en esa instrucci√≥n se activa la salida de error "Error".
Si el error ha sido detectado por una instrucci√≥n de driver, en esa instrucci√≥n se muestra la
causa exacta del error (ver Driver de entrada).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3075

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Se√±alizaci√≥n de errores en el DB de eje
El error agrupado est√° en TRUE mientras haya pendiente al menos un error.
Direcci√≥n Nombre

Tipo

Valor inicial

Comentario

124.1

BOOL

TRUE

Error de grupo

Error

FALSE = no hay error
TRUE = error agrupado

Acuse de errores en el DB de eje
Al activar el acuse agrupado se suprimen todas las se√±alizaciones de error acusables.
El acuse agrupado solo act√∫a cuando el eje est√° parado y despu√©s de la inicializaci√≥n.
Tras evaluar el acuse de error, "ErrorAck" se resetea autom√°ticamente.
Direcci√≥n Nombre

Tipo

Valor inicial

Comentario

124.2

BOOL

FALSE

Acuse agrupado para todos los errores.

ErrorAck

FALSE = no hay acuse
TRUE = acusar errores

Error en eje
Error con parada suave
Descripci√≥n
Para todos los errores descritos a continuaci√≥n se aplica lo siguiente: TRUE = el error est√°
presente.
Cuando el error requiere un acuse, esto se indica con el siguiente s√≠mbolo:

La tabla siguiente muestra todos los errores con parada suave.
Direc‚Äê
ci√≥n

Nombre:
Err.xxx

Descripci√≥n

128.0

SWLimitMinExceeded

Inicio del final de carrera por software sobrepasado
Causa:

‚Äî

‚óè El valor real de posici√≥n se encuentra fuera de la zona de trabajo.
‚óè Sustituci√≥n en caso de un enc√≥der absoluto.

Soluci√≥n:

‚óè Desplace el eje fuera del final de carrera.
‚óè Desactive los finales de carrera por software ("SWLimitEnable" =
FALSE), vuelva a sincronizar el eje y active de nuevo los finales de
carrera por software.

3076

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‚Äê
ci√≥n

Nombre:
Err.xxx

Descripci√≥n

128.1

SWLimitMaxExceeded

Fin del final de carrera por software sobrepasado
Causa:

‚Äî

‚óè El valor real de posici√≥n se encuentra fuera de la zona de trabajo.
‚óè Sustituci√≥n en caso de un enc√≥der absoluto.

Soluci√≥n:

‚óè Desplace el eje fuera del final de carrera.
‚óè Desactive los finales de carrera por software ("SWLimitEnable" =
FALSE), vuelva a sincronizar el eje y active de nuevo los finales de
carrera por software.

128.2

TargetErr

Destino fuera de la zona de desplazamiento
Causa:

‚óè MC_MoveAbsolute:
‚Äì

El destino se encuentra en un final de carrera por software.

‚Äì

El destino es < "Inicio del eje rotativo" o ‚â• "Fin del eje rotativo".

‚Äì

El recorrido de desplazamiento calculado es mayor que la distancia
equivalente a 224 incrementos del enc√≥der.

‚Äì

Las magnitudes auxiliares en el DB de eje no se han calculado
porque no se ha llamado la instrucci√≥n MC_Init.

‚óè MC_MoveRelative:
‚Äì

El recorrido de desplazamiento introducido lleva a un punto de
destino en un final de carrera por software.

‚Äì

El recorrido de desplazamiento predeterminado es mayor que la
distancia equivalente a 224 incrementos del enc√≥der.

‚Äì

Las magnitudes auxiliares en el DB de eje no se han calculado
porque no se ha llamado la instrucci√≥n MC_Init.

‚óè MC_Home:

Soluci√≥n:

‚Äì

La coordenada del punto de referencia se encuentra en un final de
carrera por software.

‚Äì

La coordenada del punto de referencia es < "Inicio del eje rotativo" o
‚â• "Fin del eje rotativo".

‚Äì

Las magnitudes auxiliares en el DB de eje no se han calculado
porque no se ha llamado la instrucci√≥n MC_Init.

‚óè Corrija los par√°metros.
‚óè Llame la instrucci√≥n MC_Init.

128.3

128.4

NoSync

DirectionErr

El eje no est√° sincronizado
Causa:

La instrucci√≥n MC_MoveAbsolute se ha iniciado con el eje no sincronizado.

Soluci√≥n:

Sincronice el eje (b√∫squeda del punto de referencia, posicionamiento del
punto de referencia).

Desplazamiento no permitido en el sentido especificado
Causa:

El movimiento no puede continuar hacia un final de carrera por software.

Soluci√≥n:

Inicie un petici√≥n de desplazamiento alej√°ndose del final de carrera por
software.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3077

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‚Äê
ci√≥n

Nombre:
Err.xxx

Descripci√≥n

128.5

DataErr

Par√°metro inadmisible de una instrucci√≥n de desplazamiento
Causa:

MC_MoveHome:
‚óè "Velocity" < 0
‚óè "Velocity" > 0 y "Acceleration" ‚â§ 0
‚óè "Velocity" > 0 y "Deceleration" ‚â§ 0
‚óè "Velocity" > 0 con enc√≥der absoluto
‚óè Para un eje lineal, "Position" est√° fuera del rango num√©rico.
‚óè Las magnitudes auxiliares en el DB de eje no se han calculado porque
no se ha llamado la instrucci√≥n MC_Init.
MC_MoveAbsolute, MC_MoveRelative y MC_MoveJog:
‚óè "Velocity" ‚â§ 0
‚óè "Acceleration" ‚â§ 0
‚óè "Deceleration" ‚â§ 0
‚óè La coordenada de destino introducida o calculada est√° fuera del rango
num√©rico (con MC_MoveAbsolute y MC_MoveRelative).
‚óè Denominador del factor de reducci√≥n (RatioDenominator") ‚â§ 0
(MC_GearIn)
‚óè Numerador del factor de reducci√≥n ("RatioNumerator") = 0 (MC_GearIn)
‚óè Una instrucci√≥n de desplazamiento se ha interrumpido y "Deceleration"
de la instrucci√≥n que ha causado la interrupci√≥n no coincide con la
deceleraci√≥n parametrizada en la instrucci√≥n interrumpida
(ver Anulaci√≥n de un desplazamiento (P√°gina 3027)).
‚óè Las magnitudes auxiliares en el DB de eje no se han calculado porque
no se ha llamado la instrucci√≥n MC_Init.

Soluci√≥n:

‚óè Especifique los valores permitidos.
‚óè Inicialice las instrucciones.
‚óè Llame la instrucci√≥n MC_Init.

3078

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‚Äê
ci√≥n

Nombre:
Err.xxx

Descripci√≥n

128.6

StartErr

Imposible iniciar en el estado actual del eje
Causa:

‚óè En una instrucci√≥n de desplazamiento o en MC_StopMotion, la entrada
Execute se ha activado en un momento en que el eje se encontraba en
un estado de error o en modo manual ("ManEnable" = TRUE) o
mientras estaba activa una instrucci√≥n MC_StopMotion.
‚óè La instrucci√≥n MC_Home se ha iniciado con el eje no parado.
‚óè En la instrucci√≥n MC_MoveJog est√°n activados ambos sentidos.
‚óè El eje maestro para la instrucci√≥n MC_GearIn se encuentra en un
estado inadmisible:

Soluci√≥n:

‚Äì

Error con parada brusca

‚Äì

MC_Home est√° activo

‚Äì

Modo manual ("ManEnable" = TRUE)

‚óè Subsane los errores que pueda haber presentes.
‚óè Ponga el eje maestro en un estado admisible.

128.7

DistanceErr

Recorrido demasiado largo
Causa:

Un desplazamiento sin destino (MC_Home, MC_MoveJog, MC_GearIn) ha
recorrido un trayecto que equivale a m√°s de 224 incrementos del enc√≥der.
El eje se frena aproximadamente en este punto.
Para un eje lineal sincronizado, la instrucci√≥n MC_MoveJog o MC_GearIn
ha frenado en un final de carrera por software. Adem√°s, en la mayor√≠a de
los casos est√° activado "SWLimitMinExceeded" o "SWLimitMaxExceeded".

Soluci√≥n:
129.0

MasterErr

Procure que el trayecto recorrido no sobrepase el l√≠mite arriba indicado
(ver Recorrido m√°ximo (P√°gina 3059)).

Eje maestro en estado inadmisible
Causa:

Durante el acoplamiento del reductor, el eje maestro ha quedado en un
estado inadmisible:
‚óè Error con parada brusca
‚óè MC_Home est√° activo
‚óè Modo manual ("ManEnable" = TRUE)

Soluci√≥n:

Corrija el estado inadmisible del eje maestro.

Error con parada brusca
Descripci√≥n
Para todos los errores descritos a continuaci√≥n se aplica lo siguiente: TRUE = el error est√°
presente.
Cuando el error requiere un acuse, esto se indica con el siguiente s√≠mbolo:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3079

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

La tabla siguiente indica todos los errores con parada brusca.
Direc‚Äê
ci√≥n

Nombre:
Err.xxx

Descripci√≥n

130.0

StoppedMotion

Eje en estado de parada de acuse obligatorio
Causa:

El eje se encuentra en el estado de parada de acuse obligatorio
‚óè tras la inicializaci√≥n por llamada de la instrucci√≥n MC_Init.
‚óè debido a uno de los errores listados en esta tabla.

Soluci√≥n:
130.1

130.2

EnableDriveErr

FollowingDistErr

Resuelva un posible error pendiente.

Falta habilitaci√≥n de accionamiento
Causa:

En la instrucci√≥n MC_Control, "EnableDrive" no est√° activado.

Soluci√≥n:

Active "EnableDrive".

Error de seguimiento rebasado
Causa:

El eje no sigue las consignas, o las sigue demasiado lentamente.

Soluci√≥n:

‚óè Conecte el accionamiento.
‚óè Optimice la "ganancia del regulador" (DB de eje direcci√≥n 44.0
(P√°gina 3040)).
‚óè Adapte la "correcci√≥n de sentido del enc√≥der" (DB de eje direcci√≥n 74.0
(P√°gina 3039)) de acuerdo con la "correcci√≥n de sentido del
accionamiento" (DB de eje direcci√≥n 86.0 (P√°gina 3042)).
‚óè Aumente el m√°ximo error de seguimiento admisible (DB de eje
direcci√≥n 38.0 (P√°gina 3051)).

130.3

StandstillErr

Zona de velocidad cero abandonada
Causa:

‚óè El eje ha salido de la "zona de velocidad cero" sin petici√≥n de
desplazamiento.
‚óè La "zona de velocidad cero" es menor que la "zona de destino".
‚óè La "correcci√≥n de sentido del enc√≥der" o la "correcci√≥n de sentido del
accionamiento" est√°n mal parametrizadas.

Soluci√≥n:

‚óè Compruebe la conexi√≥n con la entrada de consignas de la etapa de
potencia.
‚óè Corrija los par√°metros "Zona de parada"/"Zona de destino" (DB de eje
direcci√≥n 34.0 (P√°gina 3050)/30.0 (P√°gina 3049))
‚óè Durante la primera puesta en marcha:
Efect√∫e un test de cableado (DB de eje direcci√≥n 74.0 (P√°gina 3039)/86.0
(P√°gina 3042)).

3080

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Direc‚Äê
ci√≥n

Nombre:
Err.xxx

Descripci√≥n

130.4

TargetApproachErr

Error en la aproximaci√≥n al destino
Causa:

El valor real no ha alcanzado la "zona de destino" dentro del "tiempo de
vigilancia para la aproximaci√≥n a destino".

Soluci√≥n:

‚óè Optimice la "zona de destino" y el "tiempo de vigilancia para la
aproximaci√≥n a destino" (DB de eje direcci√≥n 30.0 (P√°gina 3049)/26.0
(P√°gina 3051)).
‚óè Compruebe el accionamiento y el eje.

130.5

EncoderErr

Error del enc√≥der
Causa:

‚óè El driver de entrada ha detectado un error del enc√≥der. La causa concreta
del error se indica en el DB de instancia de la instrucci√≥n del driver. V√©ase
Driver de entrada.
‚óè En el driver de entrada se ha activado la entrada "EncErr" (v√©ase Driver
de entrada, apartado Tratamiento de errores).

Soluci√≥n:
130.6

130.7

131.0

OutputErr

elimine la causa del error.

Error en driver de salida

ConfigErr

Causa:

En el driver de salida se ha activado la entrada "OutErr" (v√©ase Driver de
salida, apartado Tratamiento de errores).

Soluci√≥n:

elimine la causa del error.

Se√±alizaci√≥n agrupada: Datos del eje mal parametrizados

DriveErr

Acuse no posi‚Äê
ble

Causa:

Los par√°metros del DB de eje son err√≥neos. Para la causa concreta del error,
v√©ase Error de parametrizaci√≥n (P√°gina 3081).

Soluci√≥n:

Modifique los par√°metros err√≥neos y tome medidas para que se llame la
instrucci√≥n MC_Init.

Error en accionamiento

Acuse no posi‚Äê
ble

Causa:

El driver de salida ha detectado un error en la etapa de potencia/el acciona‚Äê
miento. La causa concreta del error se indica en el DB de instancia de la
instrucci√≥n del driver. V√©ase Driver de salida.

Soluci√≥n:

elimine la causa del error.

Error de parametrizaci√≥n
Error de parametrizaci√≥n
La tabla siguiente muestra los posibles errores de parametrizaci√≥n con Easy Motion Control.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3081

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La columna "Direcci√≥n" contiene la direcci√≥n de la se√±alizaci√≥n de errores en el DB de eje. La
columna "Direcci√≥n del par√°metro" remite a la direcci√≥n del par√°metro err√≥neo en el DB de eje
(v√©ase Estructura del bloque de datos de eje).
Direc‚Äê
ci√≥n

Nombre
Config.xxx

Error de parametrizaci√≥n

Direcci√≥n del par√°‚Äê
metro

132.0

Err_AxisLimit

"Inicio del final de carrera por software" < -224+6 [unidad de
longitud]

6.0 (P√°gina 3043) ,
10.0 (P√°gina 3043)

"Fin del final de carrera por software" > +224-6 [unidad de
longitud]
"Fin del final de carrera por software" ‚â§ "Inicio del final de
carrera por software"
132.1

Err_MaxVelocity

"Velocidad m√°xima del eje" ‚â§ 0.0 [unidad de longitud/s]

14.0 (P√°gina 3045)

132.2

Err_MaxAcceleration

"Aceleraci√≥n m√°xima" ‚â§ 0.0 [unidad de longitud/s2]

18.0 (P√°gina 3047)

132.3

Err_MaxDeceleration

"Deceleraci√≥n m√°xima" ‚â§ 0.0 [unidad de longitud/s2]

22.0 (P√°gina 3047)

132.4

Err_MonTimeTargetAppr

"Tiempo de vigilancia para la aproximaci√≥n a destino" ‚â§ 0.0 [s] 26.0 (P√°gina 3051)

132.5

Err_TargetRange

"Zona de destino" ‚â§ 0.0 [unidad de longitud]

132.6

Err_StandstillRange

"Zona de velocidad cero" ‚â§ 0.0 [unidad de longitud]

34.0 (P√°gina 3050)

132.7

Err_MaxFollowingDist

"Error de seguimiento m√°x. admisible" ‚â§ 0.0 [unidad de lon‚Äê
gitud]

38.0 (P√°gina 3051)

133.0

Err_EmergencyDec

"Deceleraci√≥n para parada brusca" ‚â§ 0.0 [unidad de longitud/ 54.0 (P√°gina 3049)
s2]

133.1

Err_StepsPerRev

"Incrementos por vuelta del enc√≥der" < 1

64.0 (P√°gina 3036)

133.2

Err_DisplacementPerRev

"Recorrido del eje por vuelta del enc√≥der" ‚â§ 0.0 [unidad de
longitud]

68.0 (P√°gina 3038)

133.3

Err_NumberRevs

"N√∫mero de vueltas del enc√≥der" < 1 para enc√≥der absoluto 72.0 (P√°gina 3037)

133.4

Err_PolarityEncoder

"Correcci√≥n del sentido del enc√≥der" distinto de ¬±1

74.0 (P√°gina 3039)

133.5

Err_PolarityDrive

"Correcci√≥n de sentido del accionamiento" distinto de ¬±1

86.0 (P√°gina 3042)

133.6

Err_DriveInputAtMaxVel

"Valor de referencia para m√°xima velocidad del eje" ‚â§ 0.0 o >
"DriveInputAt100"

88.0 (P√°gina 3041) ,
96.0 (P√°gina 3041)

133.7

Err_AxisLength

Longitud del eje > 224 [unidad de longitud] o
longitud del eje > (231 -1) [incrementos]

6.0 (P√°gina 3043) ,
10.0 (P√°gina 3043)

134.0

Err_EncoderRange

El rango del enc√≥der no concuerda con la longitud del eje
(v√©ase "Recorrido del eje por vuelta del enc√≥der", DB de eje
direcci√≥n 68.0 (P√°gina 3038))

6.0 (P√°gina 3043) ,
10.0 (P√°gina 3043) ,
68.0 (P√°gi‚Äê
na 3038) , 72.0 (P√°‚Äê
gina 3037)

134.1

Err_MaxVelRotaryAxis

La velocidad m√°xima y el tiempo de muestreo no concuerdan
con la longitud del eje rotativo
(v√©ase "Velocidad m√°xima del eje", DB de eje direcci√≥n 14.0
(P√°gina 3045))

14.0 (P√°gina 3045) ,
0.0 (P√°gina 3047) ,
68.0 (P√°gi‚Äê
na 3038) , 72.0 (P√°‚Äê
gina 3037)

134.2

Err_DriveInputAt100

"Valor de referencia para una velocidad del 100%" ‚â§ 0

96.0 (P√°gina 3041)

3082

30.0 (P√°gina 3049)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Avisos JOB_ERR
Avisos JOB_ERR
JOB_ERR

JOB_ERR

JOB_ERR

Significado

(Hex)

(Dec)

(Int)

80A0

32928

-32608

Acuse negativo al leer del m√≥dulo. M√≥dulo extra√≠do durante la lectura o
m√≥dulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el m√≥dulo. M√≥dulo extra√≠do durante la escri‚Äê
tura o m√≥dulo defectuoso.

80A2 1)

32930

-32606

Error de protocolo para capa 2

80A3

1)

32931

-32605

Error de protocolo en User-Interface/User

80A4

1)

32932

-32604

Fallo en la comunicaci√≥n del bus K

80B0

32944

-32592

Registro / petici√≥n desconocida

80B1

32945

-32591

Indicaci√≥n de longitud err√≥nea. Par√°metro FM_TYPE del DB de canal para
el m√≥dulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no est√° ocupado.

80B3

32947

-32589

El tipo de m√≥dulo real no es igual al tipo de m√≥dulo previsto.

80C0 1)

32960

-32576

El m√≥dulo a√∫n no tiene preparados los datos que hay que leer.

80C1 1)

32961

-32575

Los datos de una petici√≥n de escritura semejante todav√≠a no se han pro‚Äê
cesado en el m√≥dulo.

80C2 1)

32962

-32574

El m√≥dulo est√° procesando en este momento el n√∫mero m√°ximo posible de
peticiones.

80C3 1)

32963

-32573

Los recursos necesarios (memoria, etc.) est√°n ocupados en este momento.

80C4

1)

32964

-32572

Error de comunicaci√≥n

80C5

1)

32965

-32571

La periferia descentralizada no est√° disponible

80C6 1)

32966

-32570

Cancelaci√≥n de las clases de prioridad (rearranque normal o en segundo
plano)

8522

34082

-31454

DB del canal o DB de par√°metros demasiado corto. No se pueden leer los
datos del DB (petici√≥n de escritura).

8532

34098

-31438

El n√∫mero del DB de par√°metros es demasiado grande (petici√≥n de escri‚Äê
tura).

853A

34106

-31430

DB de par√°metros no presente (petici√≥n de escritura).

8544

34116

-31420

Error en el en√©simo (n > 1) acceso de lectura a un DB tras aparecer un error
(petici√≥n de escritura).

8723

34595

-30941

DB del canal o DB de par√°metros demasiado corto. No se pueden escribir
los datos en el DB (petici√≥n de lectura).

8730

34608

-30928

DB de par√°metros protegido contra escritura en la CPU. No se pueden
escribir los datos en el DB (petici√≥n de lectura).

8732

34610

-30926

El n√∫mero del DB de par√°metros es demasiado grande (petici√≥n de lectura).

873A

34618

-30918

DB de par√°metros no presente (petici√≥n de lectura).

8745

34629

-30907

Error en el en√©simo (n > 1) acceso de escritura a un DB tras aparecer un
error (petici√≥n de lectura).

1) Los errores 80A2 ... 80A4 as√≠ como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de espera sin la
intervenci√≥n del usuario.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3083

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

3084

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.1

7

Objetos tecnol√≥gicos "SIMATIC Ident"
Los objetos tecnol√≥gicos del grupo "SIMATIC Ident" le ayudan a configurar sus dispositivos y
sistemas de identificaci√≥n SIMATIC.
El grupo "SIMATIC Ident" contiene los siguientes objetos tecnol√≥gicos:
‚óè TO_Ident
‚óè TO_TagLayout

TO_Ident
El objeto tecnol√≥gico "TO_Ident" es un objeto tecnol√≥gico universal para sistemas de
identificaci√≥n SIMATIC que le ayuda a preparar, configurar y diagnosticar los dispositivos y
sistemas de identificaci√≥n SIMATIC.

TO_TagLayout
El objeto tecnol√≥gico "TO_TagLayout" permite definir √°reas de memoria del transpondedor
(que se denominan campos de variables) y asignarles un nombre un√≠voco. Esto facilita el
acceso posterior.

7.2

Agregar objeto tecnol√≥gico

Agregar objeto tecnol√≥gico en el √°rbol del proyecto
Al agregar un objeto tecnol√≥gico se genera un bloque de datos. En √©l se guarda la
configuraci√≥n del objeto tecnol√≥gico.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3085

SIMATIC Ident
7.2 Agregar objeto tecnol√≥gico

Requisitos
Para utilizar uno de los objetos tecnol√≥gicos "SIMATIC Ident" deben cumplirse los siguientes
requisitos:
‚óè Se ha creado un proyecto.
‚Äì TO_Ident: V14 SP1 o superior
‚Äì TO_TagLayout: V16 o superior
‚óè En funci√≥n del hardware utilizado, se han agregado los dispositivos conectados a la
configuraci√≥n hardware ("Dispositivos y redes"), se han conectado en red entre ellos y se
han configurado.
‚óè El proyecto contiene como m√≠nimo un controlador S7 y como m√≠nimo un dispositivo de
identificaci√≥n (p. ej. m√≥dulo de comunicaci√≥n, lector o lector √≥ptico).
Los controladores compatibles son los siguientes:
‚Äì S7-1200 V4.0 o superior
‚Äì S7-1500 V1.8 o superior
‚Äì ET200pro (CPU 1516pro) V1.8 o superior
‚Äì ET200SP V1.8 o superior

Procedimiento
Para agregar un objeto tecnol√≥gico, proceda del siguiente modo:
1. Abra la carpeta de la CPU en el √°rbol del proyecto.
2. Abra la carpeta "Objetos tecnol√≥gicos".
3. Haga doble clic en "Agregar objeto".
Se abre el cuadro de di√°logo "Agregar objeto".
4. Haga clic en el bot√≥n "SIMATIC Ident".
5. En la columna "Versi√≥n", seleccione la versi√≥n m√°s reciente ("V5.0" o superior).
6. Seleccione el objeto tecnol√≥gico deseado.
7. En en campo de entrada "Nombre", introduzca un nombre personalizado para el objeto
tecnol√≥gico.
8. Haga clic en "M√°s informaci√≥n" para guardar informaci√≥n propia sobre el objeto tecnol√≥gico.
9. Confirme con "Aceptar".

Resultado
El nuevo objeto tecnol√≥gico se genera y se guarda en la capeta "Objetos tecnol√≥gicos" del
√°rbol del proyecto.

3086

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"

7.3

Trabajar con el cuadro de di√°logo de configuraci√≥n
Las propiedades del objeto tecnol√≥gico se configuran en la ventana de configuraci√≥n. Para
abrir la ventana de configuraci√≥n del objeto tecnol√≥gico, proceda del siguiente modo:
1. Abra la carpeta "Objetos tecnol√≥gicos" en el √°rbol del proyecto.
2. Abra el objeto tecnol√≥gico en el √°rbol del proyecto.
3. Haga doble clic en el objeto "Configuraci√≥n".

S√≠mbolos de la ventana de configuraci√≥n
Los s√≠mbolos que aparecen en la navegaci√≥n local de la ventana de configuraci√≥n e inspecci√≥n
muestran m√°s detalles sobre la integridad de la configuraci√≥n:
La configuraci√≥n contiene valores predeterminados y est√° completa.
La configuraci√≥n solo contiene valores predeterminados. Con ellos es posible utilizar el objeto tecnol√≥gico sin m√°s
modificaciones.
La configuraci√≥n contiene valores definidos por el usuario o adaptados autom√°ticamente y est√° completa.
Todos los campos de entrada de la configuraci√≥n contienen valores v√°lidos y se ha modificado como m√≠nimo un valor
predeterminado.
La configuraci√≥n es v√°lida, aunque contiene valores imprevistos
Por lo menos un campo de entrada o una lista desplegable contiene un valor imprevisto. El campo o la lista desplegable
en cuesti√≥n se marca en amarillo. Al hacer clic, el roll out con el mensaje de advertencia le indica la causa de la
advertencia.
La configuraci√≥n es incompleta o err√≥nea.
Por lo menos un campo de entrada o una lista desplegable no contiene valor alguno o no es v√°lido. El campo o la lista
desplegable en cuesti√≥n se marca en rojo. Al hacer clic, el roll out con el mensaje de error le indica la causa del error.

7.4

Objeto tecnol√≥gico "TO_Ident"

Introducci√≥n
El objeto tecnol√≥gico "TO_Ident" para productos SIMATIC Ident permite parametrizar
f√°cilmente un sistema de identificaci√≥n en TIA Portal. Crea una interfaz de f√°cil
parametrizaci√≥n entre el hardware configurado y los bloques de funci√≥n en la librer√≠a "SIMATIC
Ident".
Por medio del objeto "Configuraci√≥n" es posible seleccionar un dispositivo configurado,
determinar el canal / punto de lectura y, en su caso, definir el sistema de identificaci√≥n
conectado. De este modo, el objeto tecnol√≥gico determina autom√°ticamente todos los
par√°metros necesarios para el funcionamiento.
En el objeto "Diagn√≥stico" se muestran los 5 √∫ltimos mensajes de error que el dispositivo de
identificaci√≥n ha notificado a los bloques de funci√≥n. Adem√°s, en cada mensaje de error se
muestra tambi√©n una descripci√≥n del error e informaci√≥n detallada sobre el comando
ejecutado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3087

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
La descripci√≥n siguiente muestra el procedimiento b√°sico para agregar y configurar un objeto
tecnol√≥gico "TO_Ident".

Procedimiento
Para configurar el objeto tecnol√≥gico "TO_Ident", proceda del siguiente modo:
Paso

Descripci√≥n

1

Agregar objeto tecnol√≥gico (P√°gina 3085)

2

Configurar dispositivos utilizando un objeto tecnol√≥gico (P√°gina 3088)

3

Llamar una instrucci√≥n de identificaci√≥n en el programa de usuario (P√°gina 3095)

4

Cargar objeto tecnol√≥gico en la CPU

5

Diagnosticar dispositivos (P√°gina 3097)

7.4.1

Configurar sistemas de identificaci√≥n

7.4.1.1

Configurar dispositivos utilizando un objeto tecnol√≥gico

Configurar los par√°metros b√°sicos
En este grupo de par√°metros se configuran los par√°metros del sistema relativos al m√≥dulo.
Tabla 7-1

Par√°metros del grupo "Par√°metros b√°sicos"

Par√°metro

Descripci√≥n

Dispositivo de identificaci√≥n

Haga clic en el s√≠mbolo "..." y seleccione el dispositivo de identificaci√≥n que debe configurarse
en la carpeta "Periferia descentralizada" o "M√≥dulos locales".
Es posible seleccionar los siguientes dispositivos de identificaci√≥n:
‚óè ASM 456
‚óè RF166C
‚óè RF120C, RF170C, RF180C
‚óè RF185C, RF186C, RF188C, RF186CI, RF188CI
‚óè RF610R, RF615R
‚óè RF680R, RF685R
‚óè MV400, MV500
Mostrar todos los dispositivos/m√≥dulos de identificaci√≥n
Si desea configurar un dispositivo de identificaci√≥n que todav√≠a no est√° completamente in‚Äê
tegrado en la versi√≥n actual de TIA Portal, active la casilla de verificaci√≥n "Mostrar todos los
dispositivos/m√≥dulos de identificaci√≥n". Cuando se activa este par√°metro se muestra el pa‚Äê
r√°metro "LADDR". Encontrar√° informaci√≥n detallada sobre esta funci√≥n en el apartado si‚Äê
guiente.

Canal

3088

Abra la lista desplegable y, dado el caso, seleccione el canal del m√≥dulo de comunicaci√≥n al
que est√° conectado el dispositivo que debe configurarse.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Par√°metro

Descripci√≥n

Parametrizaci√≥n del lector

Abra la lista desplegable y seleccione el dispositivo/sistema que est√° conectado al dispositivo
de identificaci√≥n y debe parametrizarse.

LADDR

Recuerde que este par√°metro solo se muestra si se ha activado la casilla de verificaci√≥n
"Mostrar todos los dispositivos/m√≥dulos de identificaci√≥n".
Introduzca la direcci√≥n E/S del m√≥dulo seleccionado. Este par√°metro viene predeterminado
por los par√°metros "Canal" y, en su caso, "Punto de lectura".

Punto de lectura

Requisitos: En el par√°metro "Parametrizaci√≥n del lector" se ha seleccionado un lector RF600.
Abra la lista desplegable y seleccione el punto de lectura que debe utilizarse.

Mostrar todos los dispositivos/m√≥dulos de identificaci√≥n
Esta funci√≥n permite configurar dispositivos de identificaci√≥n que todav√≠a no est√°n
completamente integrados en la versi√≥n actual de TIA Portal. En este caso debe configurar
manualmente el objeto tecnol√≥gico. Tenga en cuenta que este ajuste repercute en algunos
par√°metros y algunas funciones:
‚óè LADDR
El valor de este par√°metro se calcula a partir de la direcci√≥n inicial del dispositivo de
identificaci√≥n seleccionado y del canal. De todas formas, es posible adaptar manualmente
este valor.
‚óè Par√°metros del dispositivo de identificaci√≥n y Web Based Management
La funci√≥n no soporta estos grupos de par√°metros.
‚óè Par√°metros del lector
Dentro de este grupo de par√°metros no se soporta el par√°metro "Velocidad de
transferencia".
‚óè Diagn√≥stico > Diagn√≥stico de hardware
La funci√≥n no soporta el diagn√≥stico de hardware.

Configurar los par√°metros del dispositivo de identificaci√≥n
En este grupo de par√°metros se muestran los siguientes par√°metros del dispositivo de
identificaci√≥n, seg√∫n sea el que se ha seleccionado. Los par√°metros mostrados para el
dispositivo de identificaci√≥n se aplican autom√°ticamente desde la configuraci√≥n de los
dispositivos conectados.
Tenga en cuenta que no todos los valores de par√°metros mostrados y aplicados desde la
configuraci√≥n de los dispositivos conectados est√°n permitidos en combinaci√≥n con el objeto
tecnol√≥gico. Si se han ajustado valores no permitidos en la configuraci√≥n de dispositivos,

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3089

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
pueden modificarse autom√°ticamente mediante el bot√≥n "Configuraci√≥n autom√°tica" o
manualmente desde la configuraci√≥n de dispositivos.
Tabla 7-2

Par√°metros del grupo "Par√°metros del dispositivo de identificaci√≥n"

Par√°metro

Valor de par√°metro visua‚Äê Valores de par√°metro
lizado posiblemente
permitidos

Descripci√≥n

Modo de usuario

Perfil Ident/perfil normali‚Äê
zado RFID

Con este par√°metro se selecciona el bloque.

Perfil Ident/perfil nor‚Äê
malizado RFID

FB 45 / FC 45
FB 55 / FC 55

Modo MOBY

Tenga en cuenta que √∫nicamente los valores de
par√°metros siguientes est√°n permitidos en com‚Äê
binaci√≥n con el objeto tecnol√≥gico:
‚óè Perfil Ident/perfil normalizado RFID: En el
controlador se utiliza el bloque de programa
para el perfil Ident/perfil normalizado RFID.

RF200/RF300/RF600;
RF200/RF300/RF600; Con este par√°metro se ajusta el modo de ope‚Äê
MV400/MV500; MOBY U/ MV400/MV500; MOBY raci√≥n del m√≥dulo de comunicaci√≥n.
U/D
D
Tenga en cuenta que √∫nicamente los valores de
RF680R/RF685R
par√°metros siguientes est√°n permitidos en com‚Äê
RF680R/RF685R
binaci√≥n con el objeto tecnol√≥gico:
MOBY I/E
‚óè RF200/RF300/RF600; MV400/MV500;
MOBY U/D

Direccionamiento normal
RF300 Filehandler

‚óè RF680R/RF685R

MOBY U Filehandler
MOBY I Filehandler
Dispositivo conecta‚Äê Par√°metros v√≠a FB / lec‚Äê
do
tores √≥pticos

Par√°metros v√≠a FB /
lectores √≥pticos

Este par√°metro solo se muestra en combinaci√≥n
con el m√≥dulo de comunicaci√≥n RF120C.
Tenga en cuenta que √∫nicamente los valores de
par√°metros siguientes est√°n permitidos en com‚Äê
binaci√≥n con el objeto tecnol√≥gico:
‚óè Par√°metros v√≠a FB / lectores √≥pticos

Bot√≥n "Configuraci√≥n autom√°tica"
Los par√°metros HWCN mostrados se aplican autom√°ticamente desde la configuraci√≥n de los
dispositivos conectados. Tenga en cuenta que no todos los valores de par√°metros est√°n
permitidos en combinaci√≥n con el objeto tecnol√≥gico. Los valores de par√°metros no permitidos
se destacan en color.
Haga clic en el bot√≥n "Configuraci√≥n autom√°tica" para ajustar autom√°ticamente los valores de
par√°metros adecuados (p. ej. Modo de usuario). Los valores de par√°metros del dispositivo
conectado se preparan para ser utilizados con el objeto tecnol√≥gico.
Nota
Comportamiento con MV400/MV500
Recuerde que con los lectores √≥pticos MV400 y MV500 el bot√≥n "Configuraci√≥n autom√°tica"
no funciona. En estos dispositivos hay que introducir manualmente los par√°metros HWCN en
la configuraci√≥n de los dispositivos conectados.

3090

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"

Configurar los par√°metros del lector
En funci√≥n de los par√°metros b√°sicos ajustados, en este grupo de par√°metros se muestran los
siguientes par√°metros del lector.
Tabla 7-3

Descripci√≥n de los "Par√°metros del lector"

Parametriza‚Äê Velocidad
ci√≥n del lec‚Äê de transfe‚Äê
tor con "Pa‚Äê rencia 1)
r√°metros b√°‚Äê
sicos"

Control
de pre‚Äê
sencia

Rese‚Äê
tear el
LED
de
error

Poten‚Äê
cia HF

N√∫mero
m√°x. de
transpon‚Äê
dedores

Tipo de
transpon‚Äê
dedor

Verifi‚Äê
caci√≥n

Selec‚Äê
ci√≥n del
progra‚Äê
ma con
reset

Secuen‚Äê
cia de
bytes del
par√°metro
Reset
[hex]

Con‚Äê
fig mo‚Äê
de 2)

IS
O
1
5
6
9
3

R
F
3
0
0

M
OB
YE

-

-

-

-

-

-

RF200
general

‚úì

‚úì

‚úì

-

‚úì

‚úì

RF290R

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

-

-

-

-

-

-

RF300
general

‚úì

‚úì

‚úì

-

‚úì

‚úì

‚úì

-

-

-

-

-

RF380R

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

-

-

-

-

-

RF300
Gen 2
general

‚úì

‚úì

‚úì

-

‚úì

‚úì

‚úì

‚úì

‚úì

-

-

-

RF380R
Gen 2

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

‚úì

-

-

-

MV400/
MV500

-

-

-

-

-

-

-

-

-

‚úì

-

-

Lector gene‚Äê
ral

‚úì

-

-

-

-

-

-

-

-

-

‚úì

‚úì

1)

Recuerde que este par√°metro no se muestra si se ha activado la casilla de verificaci√≥n "Mostrar todos los dispositivos/
m√≥dulos de identificaci√≥n".

2)

Recuerde que este par√°metro solo se muestra si se ha activado la casilla de verificaci√≥n "Mostrar todos los dispositivos/
m√≥dulos de identificaci√≥n".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3091

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Los par√°metros espec√≠ficos del dispositivo para los sistemas de lectura √≥pticos SIMATIC
MV400 y MV500, as√≠ como para los lectores SIMATIC RF600 (RF61xR y RF68xR), se ajustan
en el WBM de cada dispositivo en caso de conexi√≥n directa al controlador.
Tabla 7-4

Par√°metros del grupo "Par√°metros del lector"

Par√°metro

Valor de par√°metro

Valor predetermina‚Äê
do

Descripci√≥n

Velocidad de
transferencia

19,2 kBd

115,2 kBd

La selecci√≥n depende del m√≥dulo de comunica‚Äê
ci√≥n y del sistema de identificaci√≥n utilizados.
Tenga en cuenta que el valor que se indica aqu√≠
se aplica autom√°ticamente desde la configura‚Äê
ci√≥n de los dispositivos conectados.

57,6 kBd
115,2 kBd

Con este par√°metro se ajusta la velocidad de
transferencia de datos entre el m√≥dulo de comu‚Äê
nicaci√≥n y el lector.
Si hay un lector RFID conectado: tras cambiar la
velocidad de transferencia es necesario desco‚Äê
nectar y volver a conectar el lector (desconectar/
conectar la tensi√≥n).
Con un lector √≥ptico conectado: la velocidad de
transferencia seleccionada aqu√≠ debe coincidir
con la velocidad de transferencia seleccionada
en el firmware del lector.
Control de presencia

Activado
Desactivado (campo HF
activado)
Desactivado (campo HF
desactivado)

Activado

Activado = se notifica la presencia de un trans‚Äê
pondedor en cuanto hay uno en el campo de
antena del lector.
Desactivado (campo HF activado) = se suprime
la indicaci√≥n de presencia en el FB. De todas
formas, la antena del lector sigue conectada
mientras no se desconecte por medio de un co‚Äê
mando.
Desactivado (campo HF desactivado) = se su‚Äê
prime la indicaci√≥n de presencia en el FB. La
antena solo se conecta cuando se env√≠a un co‚Äê
mando y despu√©s vuelve a desconectarse.

3092

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Par√°metro

Valor de par√°metro

Valor predetermina‚Äê
do

Descripci√≥n

Resetear el LED de
error

Activado

Activado

Activado = cada reset del FB provoca el reset del
parpadeo del LED de error en el m√≥dulo de co‚Äê
municaci√≥n.

Desactivado

Desactivado = el LED de error indica siempre el
√∫ltimo error. Solo es posible resetear la indica‚Äê
ci√≥n desconectando el m√≥dulo de comunicaci√≥n.
Activado = El parpadeo del LED en caso de error
solo se resetea desconectando la tensi√≥n de ali‚Äê
mentaci√≥n del lector.

Activado
Tras un comando correc‚Äê
to

Tras un comando correcto = El parpadeo del
LED en caso de error se resetea tras ejecutar
correctamente un comando. Esto solo se aplica
a errores de comunicaci√≥n.

Tras un comando Reset
Tras un comando Reset o
correcto

Tras un comando Reset = El parpadeo del LED
en caso de error se resetea mediante "init_run" o
"WRITE-CONFIG" con "Init" (RESET).
Tras un comando Reset o correcto = El parpa‚Äê
deo del LED en caso de error se resetea me‚Äê
diante "init_run" o "WRITE-CONFIG" con "Init"
(RESET) o tras ejecutar correctamente un co‚Äê
mando.
Potencia HF 1)

0,50 ... 2,00

1,00

Ajuste de la potencia de salida del lector

0,50 ... 5,00

1,25

Los valores seleccionables dependen del dispo‚Äê
sitivo conectado.

N√∫mero m√°x. de trans‚Äê 1 ... 4
pondedores

1

N√∫mero de transpondedores esperados en el
campo de la antena

Modo de operaci√≥n del
lector

Modo normal

Selecci√≥n del modo de operaci√≥n deseado para
el lector

1)

Selecci√≥n de los tipos de transpondedor utiliza‚Äê
dos

La selecci√≥n depende del dispositivo conectado.
Modo normal
Maestro P2P
Esclavo P2P
Tipo de transpondedor

1)

La selecci√≥n depende del dispositivo conectado.
Verificaci√≥n

‚òê
‚òë

‚òê

Este par√°metro activa el modo ECC. En modo
ECC, el lector puede detectar errores de bit en el
transpondedor con gran probabilidad. Siempre
que sea posible, con un acceso de lectura se
devuelven datos corregidos (los datos del trans‚Äê
pondedor no cambian). Con un acceso de escri‚Äê
tura, siempre que sea posible se corrigen los da‚Äê
tos pertinentes en el transpondedor. Si se han
detectado y corregido errores de bit, se pone el
par√°metro "ANZ_ECC = True" o "STATUS =
0xF0FE0002". Si no ha sido posible corregir el
error, se emite el error "0x0B" o "0xE2FE0100".
Requisitos: el transpondedor se formate√≥ con el
bit ECC activado.
√önicamente se soportan transpondedores del ti‚Äê
po RF300 e ISO 14443 (p. ej. MOBY E).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3093

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Par√°metro

Valor de par√°metro

Valor predetermina‚Äê
do

Descripci√≥n

Selecci√≥n del progra‚Äê
ma con reset

Sin cambios de programa Sin cambios de pro‚Äê
grama
1 ... 15

Selecci√≥n del programa que debe utilizarse des‚Äê
pu√©s de rearrancar el lector √≥ptico. Si se ajusta
el valor de par√°metro "Sin cambios de progra‚Äê
ma", tras un rearranque del dispositivo se selec‚Äê
cionar√° el √∫ltimo programa activo.

Secuencia de bytes
del par√°metro Reset
[hex]

1)

1)

Representaci√≥n hexadecimal de la secuencia de
bytes del par√°metro Reset del lector.

Config mode

0 ... 255

3

Definici√≥n de los ajustes de reset
Indique si en caso de reset se transfieren los
datos de configuraci√≥n (secuencia de bytes).
1: en caso de reset no se transfieren datos de
configuraci√≥n.
3: en caso de reset se transfieren los datos de
configuraci√≥n.

1)

Encontrar√° una descripci√≥n completa de estos par√°metros en los apartados siguientes.

El par√°metro "Potencia HF"
Los valores seleccionables dependen del valor indicado en el par√°metro "Parametrizaci√≥n del
lector".
‚óè RF290R
‚Äì Rango de valores: 0,50 ... 5,00 W
‚Äì Valor predeterminado: 1,00 W
‚óè RF380R; RF380R Gen 2
‚Äì Rango de valores: 0,50 ... 2,00 W
‚Äì Valor predeterminado: 1,25 W

El par√°metro "Tipo de transpondedor"
Selecci√≥n de los transpondedores utilizados. La selecci√≥n depende del valor indicado en el
par√°metro "Parametrizaci√≥n del lector". Es posible seleccionar los siguientes tipos de
transpondedor:
‚óè ISO 15693
‚óè RF300
‚óè MOBY E
Si se selecciona "ISO 15693", se mostrar√°n las siguientes posibilidades de selecci√≥n, en
funci√≥n de la parametrizaci√≥n del lector:
Parametrizaci√≥n del lector

Valores

RF200 general

General

RF290R

General
MDS D3xx, Infineon

3094

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Parametrizaci√≥n del lector

Valores

RF300 general

General

RF380R

MDS D3xx, Infineon
MDS D4xx, Fujitsu - 4 kB
MDS D1xx, NXP
MDS D2xx, TI
MDS D261, STM

RF300 Gen 2 general

General

RF380R Gen 2

MDS D3xx, Infineon
MDS D4xx, Fujitsu - 4 kB
MDS D1xx, NXP
MDS D2xx, TI
MDS D261, STM
MDS D5xx, Fujitsu - 8 kB

El par√°metro "Secuencia de bytes del par√°metro Reset [hex]"
Esta funci√≥n permite indicar los par√°metros de reset en representaci√≥n hexadecimal. Estos
par√°metros solo deben ser utilizados por usuarios expertos.
Est√°n disponibles los siguientes par√°metros de reset:
Byte

1

2...5 1)

6

7...8

9

10

11

12

13...14

15

16

Valor

0x04

0x00

0x0A

0x00

scan‚Äê
ning_
time

param

op‚Äê
tion_1

distance_
limiting

multitag

field_on_
control

field_on_
time

1)

En el m√≥dulo de comunicaci√≥n RF180C V2.2 y superior en combinaci√≥n con MOBY U, el byte 4 est√° preasignado a la
semana natural y el byte 5, al a√±o.

7.4.1.2

Llamar una instrucci√≥n de identificaci√≥n en el programa de usuario

Procedimiento
Para llamar la instrucci√≥n el programa de usuario, proceda del siguiente modo:
1. Abra la carpeta de la CPU en el √°rbol del proyecto.
2. Abra la carpeta. "Bloques de programa".
3. Haga doble clic en el OB para la ejecuci√≥n c√≠clica del programa.
El bloque se abre en el √°rea de trabajo.
4. En la ventana "Instrucciones", abra el grupo "Paquetes opcionales" y la carpeta "SIMATIC
Ident".
La carpeta y las subcarpetas contienen las instrucciones.
5. Seleccione una instrucci√≥n y arr√°strela a su OB mediante Drag & Drop.
Se abre el cuadro de di√°logo "Opciones de llamada".
6. En la lista "Nombre" seleccione un bloque de datos de instancia o introduzca el nombre de
un bloque de datos de instancia nuevo.
Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3095

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
7. Confirme con "Aceptar".
8. Seleccione el objeto tecnol√≥gico configurado y arr√°strelo al par√°metro "HW_CONNECT"
mediante Drag & Drop.

Resetear los lectores mediante el "perfil Ident" o el bloque "Reset_Reader"
Hay diferentes formas de resetear lectores:
‚óè Si se trabaja con los bloques Ident, los tipos de lectores se resetean con el bloque
"Reset_Reader". Con ello, se transfieren al lector los valores ajustados en el objeto
tecnol√≥gico.
‚óè Si se trabaja con el perfil Ident, al activar el bit "INIT" se transfieren al lector los valores
ajustados en el objeto tecnol√≥gico.
‚óè Si desea enviar un comando "WRITE-CONFIG" propio, en lugar del bit "INIT" debe
utilizarse el bit "EXECUTE".
Si durante el tiempo de ejecuci√≥n debe modificarse un par√°metro de reset del objeto
tecnol√≥gico, el valor correspondiente puede sobrescribirse en el bloque de datos del objeto
tecnol√≥gico utilizando el programa de usuario. Los par√°metros de reset se encuentran en el
bloque de datos del objeto tecnol√≥gico, bajo "Static.CONFIGURATION.param_buffer[]".
Encontrar√° informaci√≥n detallada sobre el perfil Ident y los bloques Ident en el manual "Perfil
Ident y bloques Ident, Funci√≥n est√°ndar para sistemas Ident" en las p√°ginas del "Industry
Online Support (https://support.industry.siemens.com/cs/ww/es/ps/14971/man)".

7.4.1.3

Cargar la configuraci√≥n en la CPU
Despu√©s de llevar a cabo la configuraci√≥n, los cambios deben traspasarse del objeto
tecnol√≥gico o del controlador S7 a los dispositivos conectados.

Cargar en dispositivo
Tenga en cuenta que para cargar en los dispositivos hay que distinguir entre "Software (solo
cambios)" y "Hardware y software (solo cambios)". Si √∫nicamente se han realizados cambios
en el software, la carga se lleva a cabo a trav√©s del objeto tecnol√≥gico. Si se han realizados
cambios tanto en el hardware como en el software, la carga se lleva a cabo a trav√©s del
controlador S7.
ATENCI√ìN
Cargar en dispositivo utilizando el bot√≥n "Configuraci√≥n autom√°tica"
Si durante la configuraci√≥n se ha utilizado el bot√≥n "Configuraci√≥n autom√°tica", los cambios
deben cargarse en los dispositivos conectados a trav√©s del controlador S7 ("Hardware y
software (solo cambios)").

3096

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"

7.4.2

Diagnosticar sistemas de identificaci√≥n
Una vez finalizada la configuraci√≥n del objeto tecnol√≥gico, existe la posibilidad de vigilar los
dispositivos configurados en el objeto tecnol√≥gico utilizando la funci√≥n de diagn√≥stico.

Requisitos
‚óè Hay una conexi√≥n online entre STEP 7 (TIA Portal) y el controlador S7.
‚óè La instrucci√≥n de identificaci√≥n se llama en el programa de usuario.
‚óè Se ha creado un objeto tecnol√≥gico y se ha cargado en el controlador S7.
‚óè El controlador S7 est√° en estado operativo "RUN".

Procedimiento
Para abrir el editor de visualizaci√≥n para las funciones de diagn√≥stico, proceda del siguiente
modo:
1. Abra la carpeta "Objetos tecnol√≥gicos" en el √°rbol del proyecto.
2. Abra el objeto tecnol√≥gico correspondiente en el √°rbol del proyecto.
3. Haga doble clic en el objeto "Diagn√≥stico".
4. Haga clic en el s√≠mbolo "Observar todos" para activar el modo de observaci√≥n.

7.4.2.1

Diagn√≥stico de bloques
El diagn√≥stico de bloques permite visualizar los √∫ltimos mensajes de error que se han
producido al ejecutar el comando.
El objeto tecnol√≥gico lee y muestra los valores siguientes:

Tabla 7-5

Valores visualizados del "diagn√≥stico de bloques"

Valores visualizados

Descripci√≥n

Fecha y hora

Muestra la fecha y hora en las que se ha producido el error.

Comando

Muestra el comando con el que se ha producido el error.

Descripci√≥n del error

Muestra una breve descripci√≥n del error que se ha presentado.
Nota: En la tabla se visualizan y describen los cinco √∫ltimos mensajes de error. Cuando se
visualiza un nuevo mensaje de error, los mensajes de error que se mostraban hasta el mo‚Äê
mento se desplazan una fila hacia abajo. Se muestran como m√°ximo los cinco √∫ltimos men‚Äê
sajes de error.

Mensaje de error

Muestra el mensaje de error del error que se ha presentado.

Descripci√≥n del error

Muestra una descripci√≥n detallada del error que se ha presentado.

Fecha y hora

Muestra la fecha y hora en las que se ha producido el error.

C√≥digo de comando

Muestra el c√≥digo del comando con el que se ha producido el error.

Comando

Muestra el comando con el que se ha producido el error.

Atributo

Muestra el atributo del comando con el que se ha producido el error.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3097

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"

7.4.2.2

Diagn√≥stico de hardware
El diagn√≥stico de hardware permite visualizar los par√°metros de estado del lector
seleccionado y del transpondedor que est√° actualmente en el campo de la antena.

Estado de monitorizaci√≥n
En este √°rea pueden actualizarse los par√°metros de lector y transpondedor, adem√°s de
resetear los estados de los contadores de errores del lector.

Estado del lector
El objeto tecnol√≥gico lee y muestra los par√°metros siguientes:
Tabla 7-6

Par√°metros visualizados del √°rea "Estado del lector"

Par√°metros visualizados

Descripci√≥n

Tipo de hardware

Tipo de hardware del lector

Versi√≥n de hardware

Versi√≥n de hardware del lector

Versi√≥n del Bootloader

Versi√≥n del Bootloader del lector

Versi√≥n de firmware

Versi√≥n de firmware del lector

Tipo de driver

Tipo de driver de la interfaz serie del lector

Versi√≥n del driver

Versi√≥n del driver de la interfaz serie del lector

Interfaz

Interfaz serie utilizada en el lector
Valores posibles: RS232, RS422

Velocidad de transferencia

Velocidad de transferencia utilizada en el lector
Valores posibles: 19,2; 57,6; 115,2 kBd

Distance limiting

Potencia de emisi√≥n ajustada en el lector (RF380R)
Se pueden ajustar los siguientes valores:
Valor

Significado

02

0,5 W

03

0,75 W

04

1,0 W

05

1,25 W

06

1,5 W

07

1,75 W

08

2,0 W

N√∫mero m√°x. de transponde‚Äê N√∫mero m√°ximo de transpondedores previstos que pueden estar simult√°neamente en el
dores
campos de antena del lector.

3098

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Par√°metros visualizados

Descripci√≥n

Tipo de transpondedor

Perfil de tipo de transpondedor ajustado
Se pueden ajustar los siguientes valores:
Valor

Significado

00

RF300 (RF3xxT)

01

ISO 15693 general

03

MDS D3xx, Infineon

04

MDS D4xx,Fujitsu - 2 kB

05

MDS D1xx, NXP

06

MDS D2xx, TI

07

MDS D261, ISTM

08

MDS D5xx, Fujitsu - 8 kB

10

RF300 (RF3xxT)

20

ISO 14443 (MOBY E, E6xx)

31

Modo general

40

Maestro P2P

41

Maestro P2P y modo mixto con transpondedor ISO (MDS Dxxx)

50

Maestro P2P y modo mixto con transpondedor RF300

4F

Esclavo P2P

Estado de la antena

Estado de la antena

Control de presencia

Perfil de control de presencia ajustado

Estado del transpondedor
El objeto tecnol√≥gico lee y muestra los par√°metros siguientes:
Tabla 7-7

Par√°metros visualizados del √°rea "Estado del transpondedor"

Par√°metros visualizados

Descripci√≥n

UID

Unique Identifier del transpondedor

Tipo de transpondedor

Tipo de transpondedor (fabricante, nombre)

Versi√≥n

Versi√≥n del chip del transpondedor

Estado de bloqueo del rango
OTP

Bloques bloqueados del rango OTP en el chip

Tama√±o de la memoria de
usuario

Tama√±o de la memoria de usuario en bytes

Tama√±o de un bloque de me‚Äê Tama√±o de los bloques de memoria del chip del transpondedor
moria
N√∫mero de bloques de me‚Äê
moria

N√∫mero de bloques de memoria del chip del transpondedor

Valor medido para densidad
de flujo de potencia

Potencia radiada que llega al transpondedor.

Contador de errores pasivo

N√∫mero de errores ocurridos en reposo

Cuanto menor sea el valor, m√°s potencia recibe el transpondedor.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3099

SIMATIC Ident
7.4 Objeto tecnol√≥gico "TO_Ident"
Par√°metros visualizados

Descripci√≥n

Contador de errores activo

N√∫mero de errores ocurridos
Suma de los errores de firma y CRC

Contador de presencias

Tiempo en [ms] que el transpondedor ha pasado en el campo de la antena.

Contadores de errores
El objeto tecnol√≥gico lee y muestra los siguientes tipos de errores:
Tabla 7-8

Tipos de errores visualizados del √°rea "Contadores de errores"

Tipos de errores visualizados Descripci√≥n
FZP

Contador de errores pasivo (contador de errores en reposo)
Este contador de errores es un indicador de un entorno con interferencias. Solo es relevante
para un transpondedor de tipo "RF300"

ABZ

Contador de cancelaciones
Contadores de errores de protocolo en la interfaz a√©rea, en los que el transpondedor ha
interrumpido la comunicaci√≥n.

CFZ

Contador de errores de c√≥digo
Contador de fallos o colisiones en la interfaz a√©rea en la que ha fallado la comunicaci√≥n.

SFZ

Contador de errores de firma
Contador de errores en el cifrado de firmas de bloques de datos escritos

CRCFZ

Contador de errores CRC
Contador de errores en las comprobaciones CRC

ASMFZ

Contador de errores para problemas de interfaz con el host (CM/PC)
Contador de errores en la interfaz serie.

Intensidad de se√±al
AMLI

Indicador de potencia AM
Intensidad de se√±al de recepci√≥n [dB] para la modulaci√≥n de amplitud con la que se ha
detectado el transpondedor.

PMLI

Indicador de potencia PM
Intensidad de se√±al de recepci√≥n [dB] para la modulaci√≥n de fase con la que se ha detectado
el transpondedor.

Nota
Estados de los contadores de errores
Los estados visualizados de los contadores de errores se cuentan a partir del √∫ltimo
rearranque del lector o desde la √∫ltima inicializaci√≥n manual de los contadores de errores.

3100

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.5 Objeto tecnol√≥gico "TO_TagLayout"

7.5

Objeto tecnol√≥gico "TO_TagLayout"

Introducci√≥n
El objeto tecnol√≥gico "TO_TagLayout" permite dividir el √°rea de memoria de los
transpondedores en un m√°ximo de 64 √°reas de direcciones (que se denominan campos de
variables), direccionar dichas √°reas simb√≥licamente, determinar su tama√±o y tipo de datos y
asignarles nombres un√≠vocos. La asignaci√≥n de nombres espec√≠ficos a las √°reas de
direcciones facilita la programaci√≥n posterior con los bloques "Read_Tagfield" y
"Write_Tagfield".

7.5.1

Configurar par√°metros
En este grupo de par√°metros se configuran los par√°metros de las √°reas de direcciones del
transpondedor.

Tabla 7-9

Par√°metros del grupo "Configuraci√≥n"

Par√°metro

Descripci√≥n

Direcci√≥n
m√°s baja del transpondedor

Introduzca la direcci√≥n m√°s baja posible del transpondedor. Por lo general, la direcci√≥n m√°s
baja siempre es "0", excepto en el transpondedor siguiente:
RF320T: 65280

Direcci√≥n
m√°s alta del transpondedor

Introduzca la direcci√≥n m√°s alta posible del transpondedor. La direcci√≥n m√°s alta depende del
tama√±o de memoria del transpondedor. Son posibles las siguientes direcciones m√°ximas:
‚óè MDS D
‚Äì

MDS D1xx: 111

‚Äì

MDS D2xx: 255

‚Äì

MDS D3xx: 991

‚Äì

MDS D4xx: 1999

‚Äì

MDS D5xx: 8191

‚óè RF300
‚Äì

RF320T: 65299

‚Äì

RF340T/RF360T: 8188

‚Äì

RF330T/RF340T/RF350T/RF360T/RF380T: 32764

‚Äì

RF370T: 65276

‚óè RF600 (Bank 3)
‚Äì

RF630L/RF690L/RF610T/RF620T/RF625T/
RF630T/RF640T/RF680T: 63

‚Äì

RF642L/RF645T: 255

‚Äì

RF682T: 383

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3101

SIMATIC Ident
7.5 Objeto tecnol√≥gico "TO_TagLayout"
Par√°metro

Descripci√≥n

Selecci√≥n del
banco de memoria

Seleccione el banco de memoria en el que deben crearse los campos de variables siguientes.
Este par√°metro solo es relevante para transpondedores de la familia de productos SIMATIC
RF600.
Los transpondedores RF600 est√°n divididos en los 4 bancos siguientes:
‚óè Bank 0: Reservierd
‚óè Bank 1: EPC
‚óè Bank 2: TID
‚óè Bank 3: User
El banco 3 contiene los datos de usuario configurables.

Campo de variables

Seleccione el campo de variables que desee editar. Para cada objeto tecnol√≥gico "TO_Ta‚Äê
gLayout" est√°n disponibles 64 campos de variables como m√°ximo.

Nombre

Introduzca el nombre para el campo de variables seleccionado (m√°x. 20 caracteres). El
nombre introducido se muestra autom√°ticamente en el par√°metro "Campo de variables" de
la lista desplegable y, en su caso, se transfiere.

Tipo de datos

Seleccione el tipo de datos del campo de variables. Tenga en cuenta que la selecci√≥n del tipo
de datos repercute en los par√°metros "Elementos" y "Longitud".

Direcci√≥n inicial

Introduzca la direcci√≥n inicial del campo de variables seleccionado. La direcci√≥n inicial debe
estar comprendida entre la direcci√≥n m√°s baja y m√°s alta que se ha definido anteriormente
para el transpondedor y no puede solaparse con el rango que ocupan otros campos de
variables.

Elementos

Visualizaci√≥n y emisi√≥n de los elementos de array/string. Este par√°metro solo es relevante
para los tipos de datos "Array" o "String" (1 ... 254).

Longitud

Visualizaci√≥n y emisi√≥n de la longitud del campo de variables. Tenga en cuenta que el valor
de este par√°metro viene predefinido por el par√°metro "Tipo de datos".
Si se ha seleccionado el tipo de datos "Array", el valor es id√©ntico al valor del par√°metro
"Elementos". Si se ha seleccionado el tipo de datos "String", el valor indicado aqu√≠ es 2 bytes
mayor que el valor del par√°metro "Elementos".

Crear DB/DT

Haga clic en el bot√≥n "Crear DB/DT" para crear un bloque de datos/tipo de datos que permita
acceder f√°cilmente a los campos de variables definidos. Si se ha revisado un objeto tecno‚Äê
l√≥gico "TO_TagLayout" que ya exist√≠a, el bloque de datos/tipo de datos se actualiza.
El bloque de datos contiene una lista de todos los campos de variables del objeto tecnol√≥gico
junto con las respectivas ID y sirve para la selecci√≥n simb√≥lica de un campo de variables en
el par√°metro "TAGFIELD" de los bloques de funci√≥n "Read_Tagfield" y "Write_Tagfield".
Nombre del DB: <nombre del TO>_Indexes
El tipo de datos puede utilizarse en un bloque de datos y suministra datos de usuario al
par√°metro "IDENT_DATA" de los bloques de funci√≥n "Read_Tagfield" y "Write_Tagfield". En
el par√°metro se crea un elemento del tipo de datos (campo de variables).
Nombre del DT: <nombre del DT>_Datatypes

Los cambios en los par√°metros del √°rea de direcciones se transfieren directamente al objeto
tecnol√≥gico "TO_TagLayout".

3102

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

SIMATIC Ident
7.5 Objeto tecnol√≥gico "TO_TagLayout"

7.5.2

Cargar la configuraci√≥n en la CPU
Despu√©s de llevar a cabo la configuraci√≥n, los cambios deben traspasarse del objeto
tecnol√≥gico o del controlador S7 a los dispositivos conectados.

Cargar en dispositivo
Tenga en cuenta que para cargar en los dispositivos hay que distinguir entre "Software (solo
cambios)" y "Hardware y software (solo cambios)". Si √∫nicamente se han realizados cambios
en el software, la carga se lleva a cabo a trav√©s del objeto tecnol√≥gico. Si se han realizados
cambios tanto en el hardware como en el software, la carga se lleva a cabo a trav√©s del
controlador S7.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3103

SIMATIC Ident
7.5 Objeto tecnol√≥gico "TO_TagLayout"

3104

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico
1
1Count24V, 338
1Count5V, 402
1PosU
Activar JOBs, 2898
Acuse de fallo EXTF_ACK,
Ajustar valor real (JOB 1), 2916
Ajustar vigilancia de sentido de giro (JOB
11), 2925
B√∫squeda del punto de referencia (MODE
3), 2904
Cancelar procesamiento de JOB (JOB 0), 2915
Causas de error para JOB_ERR, 2935
Causas de error para POS_ERR, 2934
Control del accionamiento, 2899, 2943, 2949,
2955
Detener (MODE 0), 2901
Distancia de cambio de velocidad, 2943, 2950,
2955
Distancia de desconexi√≥n, 2943, 2949, 2955
Entradas del enc√≥der, 2945
Error en el control de MODEs y JOBs, 2933
Errores de parametrizaci√≥n, 2930
Errores externos, 2930
Estado RESET, 2937
Evaluaci√≥n de las se√±ales del enc√≥der, 2899
Evaluar se√±al de b√∫squeda de referencia (JOB
9), 2922
Final de carrera por hardware, 2940, 2947, 2953
Final del eje rotativo, 2939, 2946
Funciones, 2895
Habilitaciones en funci√≥n del sentido, 2901
Incrementos por vuelta del enc√≥der, 2952
Iniciar MODEs, 2897
Interfaz de control, 2956
Interfaz de realimentaci√≥n, 2958
Inversi√≥n del sentido de giro, 2939, 2945, 2952
Jog (MODE 1), 2902
Leva de reducci√≥n, 2941, 2948, 2954
Modificar la distancia de cambio de velocidad
(JOB 4), 2921
Modificar la distancia de desconexi√≥n (JOB
3), 2920
Modo de dosificaci√≥n, 2896, 2938, 2945
Mostrar valores actuales (JOB 15), 2927
Mover zona de alcance del enc√≥der (JOB
2), 2918

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

N√∫mero de vueltas del enc√≥der, 2952
Posicionamiento absoluto (MODE 5), 2912
Posicionamiento relativo (MODE 4), 2910
Sensor del punto de referencia, 2942, 2948
Sentido de arranque para la b√∫squeda del punto
de referencia, 2942, 2949
Se√±al de b√∫squeda de referencia, 2941, 2948
STOP de CPU/maestro, 2936
Tipo de eje, 2939, 2946, 2953
Tipo de enc√≥der, 2951
Tmin Cambio de sentido, 2944, 2950, 2956
Velocidad de transferencia, 2951
1SSI
Lectura de los valores del sensor, 2657, 2672,
2684
1STEP 5V
Aceleraci√≥n/deceleraci√≥n a, 2966
B√∫squeda del punto de referencia, 2970
b√∫squeda del punto de referencia,
desarrollo, 2972
curva de desplazamiento, 2964
Definici√≥n del punto de referencia, 2975
detener la petici√≥n de desplazamiento, 2980
eje de valor m√≥dulo, 2982
Entrada digital DI0 (3), 2986
Entrada digital DI1 (7), 2987
Frecuencia base, 2966
Frecuencia de inicio y parada Fss, 2964
Frecuencia de salida/velocidad Fa, 2965
Frecuencia/velocidad m√°xima del eje
Fmax, 2965
habilitaci√≥n de impulsos, 2984
inicio de una petici√≥n de desplazamiento, 2969
modificar par√°metros durante el
funcionamiento, 2985
Modo de velocidad, 2978
Modo incremental absoluto, 2977
Modo incremental relativo, 2976
reacci√≥n a STOP de la CPU/del maestro, 2987
Tipo de eje, 2982

2
2PULSE
Conexi√≥n en paralelo de ambos canales, 1194
contador de secuencias, 1190
Control directo de DO, 1191
Medici√≥n de intensidad, 1190
Modulaci√≥n de ancho de impulsos, 1159

3105

√çndice alfab√©tico

retardo a la conexi√≥n/desconexi√≥n, 1175
salida de frecuencia, 1184
salida de impulsos, 1154
tren de impulsos, 1169

A
Absolute actual value, 1558, 1559
Absolute encoder adjustment, 1590
Absolute value adjustment, 1607
Accionamiento
Datos m√°quina, 2840
Accionamiento paso a paso, 3004
Accionamiento paso a paso con un sensor tipo
Stepper, modo PULSE REFEED, 3007
Activar
Datos m√°quina, 479, 2705, 2797
Activar contador, 319
con la entrada digital 1I2, 320
Con la marca cero, 322
Mediante una se√±al externa, 319
Active homing, 1590, 1592, 1596, 1597, 1649, 1927
Actualizaci√≥n de datos, (PIP_Mode)
Actuator, 1386
Additive leading value, 1876
Tags, 1878
Additive setpoint torque, 1586
Agregar fila de separaci√≥n, 2427
Agregar fila Empty, 2427
Ajustar valor real, 487, 564, 2729, 2823
Datos en el DB de canal, 488, 565, 2730, 2824
Desarrollo, 487, 565, 2730, 2823
Efecto, 488, 565
Efectos, 2730, 2824
Requisitos, 487, 565, 2730, 2823
Ajustar valor real al vuelo, 487, 564, 2823
Datos en el DB de canal, 488, 565, 2824
Desarrollo, 487, 565, 2823
Requisitos, 487, 565, 2823
Ajuste
din√°micos, 471
Ajuste del canal
FM 350-2, 282
Ajuste din√°mico, 471, 538, 616
Ajuste por defecto
Alarma de diagn√≥stico, 1110
Ajuste predeterminado, 1222
Alarma de diagn√≥stico, 62, 273, 300, 333
¬øQu√© es una alarma de diagn√≥stico?, 1109, 1142
Ajuste por defecto, 1059, 1110, 1143
Definici√≥n, 1059, 1109
Disparar, 1058, 1059, 1109, 1142, 1143

3106

en casos de error, 1142
habilitaci√≥n, 137
habilitar, 1059, 1110, 1143
OB 82, 1059, 1110, 1143
Alarma de proceso, 62, 81, 258, 296, 329
Habilitaci√≥n, 146
habilitar, 258, 329
perdida, 144
Alarmas de diagn√≥stico, 547, 627, 2775, 2875
Evaluaci√≥n, 2778, 2878
Alarmas de proceso
habilitar, 541, 619
√Åmbito de aplicaci√≥n, 3002
Amplitud de dither, 1259
Ancho de impulso m√≠nimo, 238, 318
Anulaci√≥n de un desplazamiento
Easy Motion Control, 3027, 3060
Aproximaci√≥n al destino, 2709, 2802
Aproximaci√≥n en bucle, 2733, 2831
Datos en el DB de canal, 2734, 2832
Desarrollo, 2734, 2832
Requisitos, 2733, 2832
Articulated arm
2D, 2107
2D with orientation, 2110
3D, 2113
3D with orientation, 2118
Asignaci√≥n
Registro de diagn√≥stico DS0, 1111
Registro de diagn√≥stico DS1 del FM 355-2, 1112
Asignaci√≥n de terminales
Conector frontal del FM 350-1, 222
Conector frontal del FM 350-2, 279
conector frontal del FM 351, 2701
conector frontal del FM 352, 484
Conector frontal del FM 450-1, 307
conector frontal del FM 451, 2792
conector frontal del FM 452, 561
conector frontal del SM 338, 2660
interfaz del enc√≥der del FM 351, 2700
interfaz del enc√≥der del FM 352, 483
interfaz del enc√≥der del FM 451, 2792
Avisos RET_REALU, 1064, 1065, 1114, 1115, 1150,
1151
AxesGroup, 2059
Axis control panel, 1495, 1677, 1682
Axis type, 1551

B
Blocked zones, 2182, 2183

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Bloque de datos de eje
Cargar, 3063
Guardar, 3063
Borrar distancia residual, 2729, 2822
B√∫squeda de la marca de referencia, 3015
B√∫squeda del punto de referencia, 2718, 2810
Cancelar, 2722, 2814
Datos en el DB de canal, 2721, 2813
Datos en el DB de par√°metros, 2722, 2814
Efectos, 2722, 2814
Requisitos, 2719, 2811
Sincronizaci√≥n, 2718, 2810
Tipos, 2722, 2814
Velocidad de inicio, 2759, 2858

C
Calcular coordenada
Decalaje de se√±al cero, 489, 567
Cam, 1867, 1938
Basics, 1867
Configuration, 1938, 1941, 1975
Functions, 1863
Import/export, 1975
Interpolation, 1891
Tags, 2045
Cam editor, 1889, 1938, 1941, 1975
Cam track
Basics, 1814
Configuration, 1833
Diagnostics, 1840, 1842
Functions, 1787
Tags, 1856
Cambio de sentido, 2734, 2833
Cambio en el valor real, 486, 563
Cambio r√°pido de levas
Comprobaci√≥n de datos, 496, 574
Datos utilizados en el DB de canal, 496, 573
Definici√≥n, 495, 573
Desarrollo, 495, 573
Deshacer, 497, 574
Efectos, 497, 574
Requisitos, 495, 573
Camming, 1889
Tags, 1901
Campo de aplicaci√≥n, 3002
Cancelar, 2714, 2806
B√∫squeda del punto de referencia, 2722, 2814
JOG, 2717, 2809
Modo incremental, 2729, 2822

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Cancelar preselecci√≥n del valor real, 487, 564, 2731,
2824
AREALREM_EN, 489, 566
Datos en el DB de canal, 2731, 2825
Captura (Capture), 29, 32
Captura de bordes, 2829
Datos en el DB de canal, 2830
Datos en el DB de par√°metros, 2831
Desarrollo, 2830
Err√≥nea, 2831
Requisitos, 2829
Capture, 22, 23, 96, 118, 154, 166
Cargar
Bloque de datos de eje, 3063
Ciclo de aplicaci√≥n, 1218, 1223
CircMode, 2171
Circular motion, 2170
Circular path
Definition, 2171
Clases de error
Avisos, 557, 637
Error de datos de leva, 556, 636
Error de diagn√≥stico, 558, 638
Fallo operativo, 552, 632
Clases de errores
Error de datos, 553, 633, 2784, 2884
Error de datos m√°quina, 2785, 2885
Error de las tablas de incrementos, 2787, 2887
Error de operador, 2783, 2883
Fallo operativo, 2782, 2882
Clases de fallos
Avisos, 2788, 2888
Error de datos m√°quina, 554, 634
Error de diagn√≥stico, 2789, 2889
Closed loop position control, 1613, 1614, 1616, 1659,
1661, 1675, 1935, 1937
Closed-loop control, 1613, 1614, 1616, 1659, 1661,
1675, 1935, 1937
C√≥digos de error
Gx_XIST2, 3016
Compatibility list, 1543
Comportamiento de conmutaci√≥n
de la leva de tiempo, 486, 563
Comportamiento de las salidas digitales
Activar al alcanzarse el valor de comparaci√≥n por
la duraci√≥n del impulso hacia atr√°s, 249, 328
Activar al alcanzarse el valor de comparaci√≥n por
la duraci√≥n del impulso hacia delante, 248, 328
Activar cuando se alcance el valor de
comparaci√≥n para la duraci√≥n del impulso hacia
delante/atr√°s, 248, 328

3107

√çndice alfab√©tico

Activar si la lectura del contador <= valor de
comparaci√≥n, 248, 327
Activar si la lectura del contador >= valor de
comparaci√≥n, 247, 327
Ajuste predeterminado, 246, 292
Condiciones marco, 251
Conmutar en los valores de comparaci√≥n, 250
en los modos de contaje, 244, 325
en los modos de medici√≥n, 255
en modo is√≥crono, 246
No se compara, 247
Requisitos, 329
Sin comparaci√≥n, 327
Comportamiento de un motor Stepper, 3007
Comportamiento en el tiempo
Tecnolog√≠a est√°ndar, 1212
Time-based IO, 1212
Comprobaci√≥n de datos, 496, 574
por el m√≥dulo, 496, 574
Conexi√≥n de accionamiento S7-1200 Motion
Control, 2314
Conexi√≥n de enc√≥der S7-1200 Motion Control, 2314
Configuraci√≥n, (Entorno del sistema)
Configuraci√≥n est√°ndar, 1220
Espacio de direcciones, 1250, 1272, 1288, 1302,
1313, 1326
Configuraci√≥n de canal, 1354
M√≥dulo tecnol√≥gico, 1227
Configuraci√≥n de canales, 1365
Configuraci√≥n hardware para Motion Control
S7-1200, 2304
Congelar, 228
Congelar/redisparar, 230
Contacto inversor, 2719, 2811
Contaje
Continuo, 195
Peri√≥dico, 197
√önico, 196
Valor de comparaci√≥n, 101, 158
Contaje peri√≥dico, 197
Contaje sin fin, 195
Contaje √∫nico, 196
Control de puerta, 22, 26, 52, 76, 78, 96, 154
en modo is√≥crono, 216
Control directo de una salida digital, 1333
Controller-controller data exchange, 1988
Setting up, 1992
Conveyor tracking, 2177
Coordenada del punto de referencia, 515, 593, 2755,
2854
Correcci√≥n de velocidad
Easy Motion Control, 3027

3108

Coupling factor, 2160
CPU compactas
Caracter√≠sticas, 11, 14, 1241
CPU compactas S7-1500, (M√≥dulo tecnol√≥gico)
Cross-PLC synchronous operation, 1986
Cascading, 1989
Communication, 1988
Controller-controller data exchange, 1988
Delay time, 1990, 1999
Interconnection overview, 1996, 1997
Interconnection possibilities, 1989
Recursive interconnection, 1991
Routes, 1999
Tags, 1991
Time response, 1990
Tolerance time, 1988
Cylindrical robot
3D, 2137
3D with orientation, 2141

D
Data type
DB_Any, 1462
Datos de enc√≥der, 2737, 2835
Datos en el DB de canal, 2738, 2836
Desarrollo durante la lectura, 2737, 2836
Requisitos, 2737, 2836
Datos de leva
Escribir, 481
Leer, 482
Datos de posici√≥n, 2737, 2835
Datos en el DB de canal, 2737, 2835
Desarrollo durante la lectura, 2737, 2835
Datos en el DB de canal
Ajustar valor real, 2730, 2824
Ajustar valor real al vuelo, 2824
Aproximaci√≥n en bucle, 2734, 2832
B√∫squeda del punto de referencia, 2721, 2813
Cancelar preselecci√≥n del valor real, 2731, 2825
Captura de bordes, 2830
Datos de enc√≥der, 2738, 2836
Datos de posici√≥n, 2737, 2835
Datos m√°quina, 2706, 2798
Decalaje de se√±al cero, 2826
Definir punto de referencia, 2732, 2828
Entrada de habilitaci√≥n, 2737, 2835
JOG, 2716, 2808
Medici√≥n de longitud, 2830
Modo incremental, 2728, 2729, 2820, 2823
Se√±ales de realimentaci√≥n del diagn√≥stico, 2739,
2837

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Se√±ales de realimentaci√≥n para el
posicionamiento, 2836
Se√±ales de respuesta del posicionamiento, 2738
tablas de incrementos, 2708
Datos en el DB de par√°metros
B√∫squeda del punto de referencia, 2722, 2814
Captura de bordes, 2831
Entrada de habilitaci√≥n, 2835
Final de una operaci√≥n de posicionamiento, 2715,
2807
Modo incremental, 2728, 2821
Datos m√°quina, 2705, 2797
Accionamiento, 2840
Activar, 479
Datos en el DB de canal, 2706, 2798
Entrada, 2741
Entrada de habilitaci√≥n, 532, 610
Escribir, 479
escribir, activar, modificar, leer, 2705, 2797
Leer, 481
Datos m√°quina del enc√≥der
Datos en el DB de par√°metros, 525, 603
DB de diagn√≥stico
Configuraci√≥n, 2779, 2879
Datos, 550, 630, 2779, 2879
Estructura, 550, 630
DB de eje
Tarea, 3062
DB_Any, 1462
Decalaje de se√±al cero, 2825
Datos en el DB de canal, 2826
Datos utilizados en el DB de canal, 490, 567
Definici√≥n, 489, 567
Desarrollo, 490, 567, 2825
Deshacer, 492, 569, 2827
Efectos, 2826
en un eje lineal, 490, 568
en un eje rotativo, 491, 568
Requisitos, 2825
ZOFF_EN, 489, 567
Definici√≥n
Alarma de diagn√≥stico, 1109
Definir punto de referencia, 492, 569, 2731, 2827
Datos en el DB de canal, 2732, 2828
Datos utilizados en el DB de canal, 492, 570
Definici√≥n, 492, 569
Desarrollo, 492, 570, 2732, 2828
Efectos, 493, 570, 2732, 2828
Particularidades del enc√≥der absoluto, 493, 571
Requisitos, 492, 570, 2732, 2827
Sincronizaci√≥n, 2731, 2827

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Delta picker
2D, 2124
2D with orientation, 2127
3D, 2130
3D with orientation, 2133
Desactivaci√≥n, 2713, 2805
JOG, 2716, 2808
Modo incremental, 2729, 2822
Desarrollo
Ajustar valor real, 2730, 2823
Ajustar valor real al vuelo, 2823
Aproximaci√≥n en bucle, 2734, 2832
Captura de bordes, 2830
Decalaje de se√±al cero, 2825
Definir punto de referencia, 2732, 2828
JOG, 2715, 2807
Leer datos de posici√≥n, 2737, 2835
Leer datos del enc√≥der, 2737, 2836
Medici√≥n de longitud, 2830
Modo incremental con n√∫mero de incremento
1-100, 2725, 2817
Modo incremental con n√∫mero de incremento
252, 2818
Modo incremental con n√∫mero de incremento
254, 2726, 2819
Modo incremental con n√∫mero de incremento
255, 2726, 2819
Se√±ales de realimentaci√≥n del diagn√≥stico, 2739,
2837
Se√±ales de realimentaci√≥n para el
posicionamiento, 2836
Se√±ales de respuesta del posicionamiento, 2738
Deshacer
Decalaje de se√±al cero, 2827
Deshacer la funci√≥n
Cancelar preselecci√≥n del valor real, 489, 566
Destino ficticio, 2734, 2833
Posici√≥n, 2735, 2833
Detector de proximidad, 474, 477
Detener
Easy Motion Control, 3027
Determinismo, (Previsibilidad)
Diagn√≥stico
Easy Motion Control, 3028, 3074
High_Speed_Counter, 109
M√≥dulo tecnol√≥gico, 174, 189, 1240, 1364, 1371
SIMATIC Drive Controller, 191
SSI_Absolute_Encoder, 130
Diagnostics
S7-1500 Motion Control, 1480, 1481, 1484
Direct homing, 1590, 1605

3109

√çndice alfab√©tico

Direction reversal at the hardware limit switch, 1591,
1599, 1651, 1928
Disparar
Alarma de diagn√≥stico, 1109
Distancia de cambio de velocidad, 2693, 2745, 2844
Distancia de cambio de velocidad negativa, 2746,
2845
Distancia de cambio de velocidad positiva, 2746,
2845
Distancia de desconexi√≥n, 2693, 2746, 2845
Distancia de desconexi√≥n negativa, 2747, 2846
Distancia de desconexi√≥n positiva, 2747, 2846
Distancia m√≠nima entre bordes, 521, 599, 2858
Distancia residual, 2729, 2822
Dithering, 1259
Dosificaci√≥n, 210, (Ejemplos de aplicaci√≥n de Timebased IO)
Drive
Compatibility list, 1543
Drives compatibility list, 1412
DSC (Dynamic Servo Control), 1614, 1616, 1659,
1935
Duraci√≥n del impulso, 256, 324
Ajuste predeterminado, 256, 324
Rango de valores, 256, 324
Duraci√≥n del periodo de dither, 1259
Dynamic default values, 1579, 1641, 1918
Dynamic Servo Control (DSC), 1614, 1616, 1659,
1935

E
Easy Motion Control
Anulaci√≥n de un desplazamiento, 3027, 3060
B√∫squeda del punto de referencia, 3026
Campo de bits para inicializaci√≥n, 3066
Configuraciones hardware, 3019
Correcci√≥n de velocidad, 3027
DB de eje, 3062
Destino, 3022
Detener, 3027
Diagn√≥stico, 3028, 3074
Dise√±o del programa de usuario, 3053
Distancia residual, 3022
Eje lineal, 3023
Eje parado, 3071
Eje rotativo, 3024
El eje se desplaza sin petici√≥n de
desplazamiento, 3072
El eje vibra, 3072
Entorno de llamada, 3054
Error con parada brusca, 3079

3110

Error con parada suave, 3076
Error de parametrizaci√≥n, 3075, 3081
Error de seguimiento, 3022, 3074
FB multiinstancia, 3066
Inicio de una petici√≥n de desplazamiento, 3059
Interacci√≥n de las instrucciones, 3053
Interruptor de PARADA DE EMERGENCIA, 3067
JOG, 3026
Medici√≥n de recorrido, 3070
Medici√≥n de velocidad, 3069
Orden de llamada de las instrucciones, 3055
Par√°metros comunes para todas las
instrucciones, 3058
Par√°metros de eje, 3064
Posicionamiento, 3021
Posicionamiento absoluto, 3027
Posicionamiento del punto de referencia, 3026
Posicionamiento relativo, 3027
Reacciones a errores, 3028
Reajuste del enc√≥der absoluto, 3026
Reductor, 3027
Seguimiento, 3027
Simulaci√≥n, 3028
Sincronizar, 3026
Test de cableado, 3068
Valores actuales, 3064
Velocidad del eje, 3072
Zona de desplazamiento, 3023
Zona de destino, 3023
Zona de trabajo, 3023
Zona de velocidad cero, 3023
Zonas de vigilancia, 3023
Efectos
Ajustar valor real, 2730, 2824
B√∫squeda del punto de referencia, 2722, 2814
Decalaje de se√±al cero, 2826
Definir punto de referencia, 2732, 2828
Eje
Coordenada del punto de referencia, 515, 593,
2755, 2854
Distancia m√≠nima entre bordes, 521, 599, 2858
Final de carrera por software, 512, 590, 2752,
2851
Final del eje rotativo, 2753, 2852
Hist√©resis, 519, 597
Reajuste del enc√≥der absoluto, 516, 594, 2755,
2854
Tipo de b√∫squeda del punto de referencia, 2754,
2853
Tipo de eje, 2751, 2850
Tipos de eje, 512, 590

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Velocidad de inicio en la b√∫squeda del punto de
referencia, 2759, 2858
Velocidad de simulaci√≥n, 521, 599
Eje de posicionamiento
Variables, 2513, 2615
Eje lineal
Easy Motion Control, 3023
Eje parado
Easy Motion Control, 3071
Eje rotativo
Easy Motion Control, 3024
Ejemplos de aplicaci√≥n de Time-based IO, 1211
El eje se desplaza sin petici√≥n de desplazamiento
Easy Motion Control, 3072
Emergency stop deceleration, 1581, 1643, 1919
Enc√≥der
conectable, 218
incremental, 218
incremental de posici√≥n, 218
Incrementos por vuelta, 2761, 2861
Incrementos por vuelta del enc√≥der, 524, 602
Longitud de telegrama, 530, 608, 2765, 2864
N√∫mero de vueltas del enc√≥der, 529, 607, 2764,
2863
Paridad, 2766, 2865
recorrido por vuelta del enc√≥der, 523, 601
Seleccionar tipo de se√±al, 234, 288, 315
Sentido de contaje, 527, 605, 2760, 2859
Sentido del detector de proximidad, 530, 608
Tipo de se√±al, 522, 600, 2759, 2858
Velocidad de transferencia, 529, 607, 2765, 2864
Vigilancia, 527, 605, 2766, 2865
Enc√≥der absoluto, 23, 474, 2696
Escuchar, 477
Evaluaci√≥n de impulsos, 477, 2698
Incrementos por vuelta del enc√≥der, 2761, 2861
Tiempo monoestable, 478, 2699
Tiempos de ejecuci√≥n de telegramas, 478, 2699
Tiempos de respuesta, 478, 2698
Enc√≥der absoluto SSI, 115, 164
Encoder connection
S7-1500 Motion Control, 1630, 1905
S7-1500T Motion Control, 1630, 1905
Enc√≥der incremental, 474, 2695
Formas de se√±al, 475, 2697
Impulso, 476, 2697
Incremento, 475, 2697
Incrementos por vuelta del enc√≥der, 2761, 2861
Tiempos de respuesta, 476, 2698
Encoder mounting type, 1572, 1573, 1637, 1914
Enc√≥ders sim√©tricos, 218
ENSET_DN, 240, 320

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

ENSET_UP, 240, 320
Entorno del sistema, 1214, 1247, 1268, 1285, 1298,
1310, 1323
Entorno TIA, 3002
Entrada
Datos m√°quina, 2741
Distancia de cambio de velocidad, 2745, 2844
Distancia de desconexi√≥n, 2746, 2845
Modo de control 1, 2742, 2841
Modo de control 2, 2743, 2841
Modo de control 3, 2744, 2842
Modo de control 4, 2744, 2843
Tiempo de vigilancia, 2749, 2848
Velocidad de parada, 2750, 2849
Zona de destino, 2748, 2847
Zona de parada, 2750, 2849
Entrada de habilitaci√≥n, 2719, 2736, 2811, 2834
Datos en el DB de canal, 2737, 2835
Datos en el DB de par√°metros, 2835
evaluar, 2736, 2834
no evaluar, 2736, 2835
Entrada digital
Configuraci√≥n, 1236
Funciones, 96, 118, 154, 166
Modo de operaci√≥n, 1236
Entradas digitales
Filtro de entrada, 238, 318
Error
externo, 1058, 1109, 1142
interno, 1058, 1109, 1142
Error con parada brusca
Easy Motion Control, 3079
Error con parada suave
Easy Motion Control, 3076
Error de datos, 277, 337
Error de operador, 338
Error de parametrizaci√≥n
Easy Motion Control, 3075, 3081
Error de se√±al de vida, 1370
Error de telegrama, 528, 606, 2766, 2865
Error ID, 1484, 1537, 2300
Errores de operador, 278
Errores de se√±ales de vida, 3011
Errores de se√±ales de vida tolerables, 3011
Errores externos, 1058, 1109, 1142
Errores internos, 1058, 1109, 1142
ErrorID
Basics, 1480, 1484
List of ErrorIDs, 1537, 2300
Errors in Motion Control instructions, 1480, 1484,
1537, 2300

3111

√çndice alfab√©tico

Escribir
Datos de leva, 481
Datos m√°quina, 479
Escritura
Datos m√°quina, 2705, 2797
tablas de incrementos, 2707
Espacio de direcciones, 1250, 1272, 1288, 1302,
1313, 1326
Estructura de telegrama, 3013
ET 200, 1215, 1221
TM Timer DIDQ, 1215
Evaluaci√≥n
Alarmas de diagn√≥stico, 2778, 2878
Evaluaci√≥n cu√°druple, 221
Evaluaci√≥n de errores
Programa de usuario, 549
Evaluaci√≥n de fallos
Programa de usuario, 629, 2777, 2877
Evaluaci√≥n de se√±al, 91, 149
Evaluaci√≥n doble, 221
Evaluaci√≥n simple, 221
Eventos de diagn√≥stico, 549, 629, 2779, 2879
External encoder
Adding, 1420
Basics, 1550
Configuration, 1662
Delay time, 1990
Deleting, 1422
Diagnostics, 1698, 1700, 1701
Functions, 1545
Moving, 1421
Tags, 1759

F
Fallo del transductor de medida, 1063, 1113, 1148
FB multiinstancia
Easy Motion Control, 3066
FCS, 2066
Filtro de entrada, 238, 318
Fin
Proceso de posicionamiento, 2708, 2801
Final de carrera por software, 512, 590, 2752, 2851
Final de una operaci√≥n de posicionamiento
Datos en el DB de par√°metros, 2715, 2807
Se√±ales de respuesta en el DB de canal, 2715,
2807
Final del eje rotativo, 2753, 2852
Finales de carrera por hardware y por software
Funci√≥n, 2329
Fixed stop, 1606
Flange coordinate system (FCS), 2066

3112

Flange zones, 2185
FM 350-1, 222
FM 350-2, 279
Ajuste del canal, 282
FM 351, 2700
FM 352, 483
FM 355, 1031
FM 355-2, 1065
FM 450-1, 307
FM 451, 2791
FM 452, 561
FM 455, 1115
FNP, 2058
Following error monitoring, 1610, 1611, 1612, 1658,
1934
Frame definition, 2070
Frecuencia de filtrado, 91, 149
Frecuencia m√°x., 3006
Frecuencia normal, 3006
Funci√≥n
Ajustar valor real, 564
Ajustar valor real al vuelo, 487, 564
Cancelar preselecci√≥n del valor real, 487, 564
Funci√≥n de paro de puerta, 214
Funci√≥n de puerta
de cancelaci√≥n, 216
de interrupci√≥n, 216
Funci√≥n de puerta de cancelaci√≥n, 216
Funci√≥n de puerta de interrupci√≥n, 216
Funcionamiento
Ajustar valor real, 487
Decalaje de se√±al cero, 489, 567
Definir punto de referencia, 492, 569
Modificar flancos de leva, 493, 571
Funciones de contaje, 21, 71, 72, 76
Funciones de medici√≥n, 52
Funciones de SIMATIC, 1216

G
Gear ratio, 1878, 1879
Gearing, 1878, 1879
Tags, 1888
Guardar
Bloque de datos de eje, 3063
Gx_STW, 3015, 3016
Gx_XIST2, 3016

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

H
Habilitaci√≥n
Alarma de diagn√≥stico, 62
Alarma de proceso, 62, 81
Habilitar
Alarma de diagn√≥stico, 1110
Habilitar alarmas de diagn√≥stico, 1367
Hardware limit switches, 1574, 1643, 1920
High_Speed_Counter, 84
configurar, 87
Diagn√≥stico, 109
Par√°metros b√°sicos, 89
programar, 107
Puesta en servicio, 108
Hist√©resis, 23, 24, 58, 60, 104, 123, 161, 171, 257,
289, 519, 597
Leva de recorrido, 519, 597
Leva de tiempo, 520, 598
Home position, 1591
Homing, 1606
Homing mark, 1590

I
IM 174
Configurar, 3002
Impulsos err√≥neos (enc√≥der incremental), 528, 606,
2766, 2865
Incremental actual value, 1558, 1559
Incrementos, 2767, 2866
Indicadores de error, 1058, 1108, 1141
Inicializar contador, 238
Con la entrada digital I2, 239
Con la se√±al de paso por cero, 241
Mediante una se√±al externa, 239
Inicio de una petici√≥n de desplazamiento
Easy Motion Control, 3059
Insertar fila de separaci√≥n, 2427
Insertar fila Empty, 2427
Instrucciones de TIO, 1216
Enumerar instrucciones de TIO, 1222
TM Timer DIDQ, 1216
Interconnection overview, 1996
Configuration, 1997
Interfaz de control, 175
1Count24V para la lectura del recorrido, 391
1Count24V para modos de contaje, 360
1Count24V para modos de medici√≥n, 379
1Count5V para la lectura del recorrido, 454

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1Count5V para modos de contaje, 424
1Count5V para modos de medici√≥n, 440
1SSI en el modo est√°ndar, 2681, 2682
1STEP 5V, 2994
2PULSE (corto), 1201
2PULSE (largo), 1202
FM 350-1 para modos de contaje, 260
FM 350-1 para modos de medici√≥n, 267
FM 351, 2771
FM 352, 543
FM 451, 2870
FM 452, 621
Interfaz de impulsos
Principio, 2309
Interfaz de notificaci√≥n
1Count5V para la lectura del recorrido, 455
1Count5V para modos de contaje, 426
1Count5V para modos de medici√≥n, 442
Interfaz de realimentaci√≥n
1Count24V para el modo Fast, 400
1Count24V para la lectura del recorrido, 393
1Count24V para modos de contaje, 362
1Count24V para modos de medici√≥n, 381
1Count5V para el modo Fast, 462
1SSI en el modo Fast, 2690
1STEP 5V, 2998
2PULSE, 1204
FM 350-1 para modos de contaje, 264
FM 350-1 para modos de medici√≥n, 269
FM 351, 2770
FM 352, 542
FM 451, 2870
FM 452, 621
Interfaz de respuesta, 177
Interpolator OB, 1390, 1393
Interpretaci√≥n de la se√±al, 220
Interruptor de PARADA DE EMERGENCIA
Easy Motion Control, 3067
Interruptor libre de rebotes, 2829
Intervalo de medida, 53, 56
Introducir
Tipo de telegrama, 3012

J
Jerk limit, 1579, 1641, 1645, 1918, 1922
Jitter, 1219
Job sequence, 2059, 2211
JOG, 2715, 2807
Cancelar, 2717, 2809
Datos en el DB de canal, 2716, 2808
Desactivaci√≥n, 2716, 2808

3113

√çndice alfab√©tico

Desarrollo, 2715, 2807
Easy Motion Control, 3026
L√≠mite de la zona de trabajo, 2717, 2809
Requisitos, 2715, 2807
Vigilancias, 2717, 2809
Joint position space, 2156

K
KCS, 2065
Kinematics, 2058, 2072
Adding, 2190
Circular motion, 2170
Configuration, 2191
Conveyor tracking, 2177
Coordinate systems, 2064
Copying, 2210
Degrees of freedom, 2058
Deleting, 2210
Diagnostics, 2229, 2231, 2233, 2234, 2236
Dynamic adaptation, 2174
Dynamic defaults, 2173
Dynamic limits, 2174
Dynamic settings, 2175
Frames, 2064
Functions, 2059
Interconnection rules, 2061
Joint position space, 2156
Kinematics control panel, 2223
Linear motion, 2170
Mechanical couplings, 2160
Motion, 2170
Point-to-point motion, 2173
Simulation, 2062
Singular positions, 2159
Tags, 2259
Term definition, 2058
User transformation, 2161
Zone monitoring, 2180
Kinematics axes, 2058
Kinematics control panel, 2223, 2228
Kinematics coordinate system, 2065
Kinematics motion, 2170
Circular motion, 2216
continue, 2213
Dynamics, 2173
Interrupting, 2213
Linear motion, 2215
Motion transition, 2215
Motion transition dynamics, 2220
Remaining distance, 2213
sPTP motion, 2217

3114

Status, 2213
stop, 2214
Kinematics transformation, 2154, 2155
Kinematics type
Articulated arm 2D, 2107
Articulated arm 2D with orientation, 2110
Articulated arm 3D, 2113
Articulated arm 3D with orientation, 2118
Cylindrical robot 3D, 2137
Cylindrical robot 3D with orientation, 2141
Delta picker 2D, 2124
Delta picker 2D with orientation, 2127
Delta picker 3D, 2130
Delta picker 3D with orientation, 2133
Portal 2D, 2074
Portal 2D with orientation, 2076
Portal 3D, 2078
Portal 3D with orientation, 2081
Roller picker 2D, 2085
Roller picker 2D with orientation, 2087
Roller picker 3D (vertical), 2089
Roller picker 3D with orientation
(horizontal), 2095
Roller picker 3D with orientation (vertical), 2092
SCARA 2D with orientation, 2099
SCARA 3D with orientation, 2102
Tripod 3D, 2146
Tripod 3D with orientation, 2150
User-defined, 2153
Kinematics types, 2072
Kinematics zero point, 2058
Kinematics zones, 2182, 2184
KZP, 2058

L
Latch, (Capture)
LD_SLOT, 1335
Leading axis proxy
Basics, 1987
Configuration, 1995
Delay time, 1990
Diagnostics, 2000
Functions, 1863
Tags, 2052
Leading value
Routes, 1999
Leading value coupling, 1870
Leadscrew pitch, 1572, 1573, 1637, 1914
Lectura
Datos m√°quina, 2706, 2798

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Lectura de los valores del sensor
is√≥crono, 2672, 2684
libre, 2657, 2672, 2684
modo is√≥crono, 2657, 2684
Lectura de posici√≥n
con enc√≥der absoluto SSI, 23
Valor de comparaci√≥n, 120, 168
Lectura de recorrido
con enc√≥der absoluto SSI, 23
con Motion Control, 62
LED de error agrupado
SM 338, 2668
LED de error de grupo, 1058, 1108
FM 350-1, 272
LED de error general
FM 351, 2774
FM 352, 546
LEDs de error, 1141
Leer
Datos de leva, 482
Datos m√°quina, 481
Tablas de incrementos, 2707, 2800
Leva
Ajuste din√°mico, 538, 616
Alarma de proceso, 541, 619
Alcance, 533, 611
Cambio de sentido, 471
Comportamiento de conmutaci√≥n, 540, 618
Datos de leva, 533, 611
Final de leva en levas de recorrido, 535, 613
Inicio de leva en levas de recorrido, 535, 613
Inicio de leva en levas de tiempo, 536, 614
Inicio de levas en levas de tiempo, 536, 614
Leva "v√°lida", 534, 612
N√∫mero de pista, 534, 612
Sentido de actuaci√≥n, 539, 617
Tiempo de anticipaci√≥n, 537, 615
Tiempo de conexi√≥n, 536, 614
Tipo de leva, 535, 613
Leva de recorrido, 465, 466
Leva de tiempo, 465, 466
Activar, 486, 564
Comportamiento de conmutaci√≥n, 486, 563
Influencia de las funciones, 486, 563
Leva electr√≥nica, (Ejemplos de aplicaci√≥n de Timebased IO)
Limit switches, 1574, 1577, 1643, 1920
Limitaci√≥n de tirones
Funci√≥n, 2330
L√≠mite de la zona de trabajo
JOG, 2717, 2809
L√≠mite superior de contaje, 227, 286, 359, 423

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

L√≠mites de contaje, 21, 24, 71, 72, 76, 94, 152, 187
Limits for dynamics, 1579, 1645, 1922
Linear axis, 1551
Linear motion, 2170
Load gear, 1572, 1573, 1637, 1914

M
Machine coordinate system, 2059
Master control, 1495, 1677
MC_TorqueAdditive, 1586
MC_TorqueRange, 1587
MC-Interpolator OB, 1390, 1393
MC-PostServo, 1217
MC-PreServo, 1217
MCS, 2059
MC-Servo OB, 1390, 1393
MC-Transformation-OB, 2163
Measuring input
Basics, 1787
Configuration, 1827
Diagnostics, 1837
Functions, 1787
Tags, 1843
Mechanical couplings, 2160
Medici√≥n
Frecuencia, 205
Per√≠odo, 208
Velocidad, 206
Medici√≥n de frecuencia, 52, 205
Medici√≥n de intensidad, 1263, 1283
Medici√≥n de longitud, 2829, (Ejemplos de aplicaci√≥n
de Time-based IO)
Datos en el DB de canal, 2830
Desarrollo, 2830
Distancia de flanco, 2831
Err√≥nea, 2831
Requisitos, 2829
Medici√≥n de recorrido
Easy Motion Control, 3070
Medici√≥n de velocidad, 52, 206
Easy Motion Control, 3069
Medici√≥n del per√≠odo, 52, 208
Medida al vuelo, 3015
Medir tiempos, 243
entre dos flancos, 243
Memoria imagen parcial de proceso
IPP1, 1221
PIP, 1223
MODE_SLOT, 1335
Modelo AEV
Entender AEV, 1219

3115

√çndice alfab√©tico

Modelo EVA
Entender EVA, 1218
Modificaci√≥n
Datos m√°quina, 2705, 2797
Tablas de incrementos, 2707, 2799
Modificar flancos de leva, 493, 571
Datos utilizados en el DB de canal, 494, 572
Definici√≥n, 493, 571
Desarrollo, 494, 571
Deshacer, 495, 572
Efectos, 494, 572
Requisitos, 493, 571
Modo conforme 611U, 3012
Modo de control 1, 2742, 2841
Modo de control 2, 2743, 2841
Modo de control 3, 2744, 2842
Modo de control 4, 2744, 2843
Modo de funcionamiento, 138
Modo de operaci√≥n, 1355, 1366, 1373
B√∫squeda del punto de referencia, 2718, 2810
Contaje peri√≥dico, 197
Contaje sin fin, 195
Contaje √∫nico, 196
Dosificaci√≥n, 210
Entrada digital, 1236
High_Speed_Counter, 100
JOG, 2715, 2807
Medici√≥n de frecuencia, 205
Medici√≥n de velocidad, 206
Medici√≥n del per√≠odo, 208
Modo incremental, 2724, 2816
Salida digital, 1229, 1233, 1239
Modo de operaci√≥n Modulaci√≥n por ancho de impulso
PWM, 1255
Ciclo de trabajo, 1257
Duraci√≥n del periodo, 1257
Duraci√≥n m√≠nima de impulso, 1265
Interfaz de control, 1273
Interfaz de respuesta, 1275
Modo is√≥crono, 1277
Retardo a la conexi√≥n, 1258
Modo de operaci√≥n PWM con motor DC, 1318
Ciclo de trabajo, 1320
Duraci√≥n del periodo, 1321
Interfaz de control, 1326
Interfaz de respuesta, 1328
Modo is√≥crono, 1330
Retardo a la conexi√≥n, 1322
Modo de operaci√≥n Retardo a la conexi√≥n/
desconexi√≥n, 1293
Duraci√≥n m√≠nima de impulso, 1295
Interfaz de control, 1302

3116

Interfaz de respuesta, 1304
Redisparo del retardo a la conexi√≥n, 1296
Redisparo del retardo a la desconexi√≥n, 1296
Retardo a la conexi√≥n, 1297
Retardo a la desconexi√≥n, 1297
Modo de operaci√≥n Salida de frecuencia, 1306
Frecuencia, 1308
Interfaz de control, 1314
Interfaz de respuesta, 1316
Retardo a la conexi√≥n, 1308
Modo de operaci√≥n Salida de impulso (impulso
√∫nico), 1243
Duraci√≥n del impulso, 1245
Interfaz de control, 1251
Interfaz de respuesta, 1253, 1291
Retardo a la conexi√≥n, 1246
Modo de operaci√≥n Tren de impulsos, 1279
Ciclo de trabajo, 1281
Duraci√≥n del periodo, 1282
Interfaz de control, 1289
N√∫mero de impulsos, 1280
Retardo a la conexi√≥n, 1282
Modo incremental, 2724, 2816
absoluta, 2816
absoluto, 2724
Cancelar, 2729, 2822
Datos en el DB de canal, 2728, 2729, 2820, 2823
Datos en el DB de par√°metros, 2728, 2821
Desactivaci√≥n, 2729, 2822
N√∫mero de incremento 1-100:, 2725, 2817
N√∫mero de incremento 252, 2818
N√∫mero de incremento 254, 2726, 2819
N√∫mero de incremento 255, 2726, 2819
relativo, 2724, 2816
Requisitos, 2725, 2817
Modo incremental con n√∫mero de incremento 252
Desarrollo, 2818
Modo incremental con n√∫mero de incremento 254
Desarrollo, 2726, 2819
Modo incremental con n√∫mero de incremento 255
Desarrollo, 2726, 2819
Modo is√≥crono, 69, 74, 82
Modo de operaci√≥n Modulaci√≥n por ancho de
impulso PWM, 1277
Modo de operaci√≥n PWM con motor DC, 1330
Modos, (PIP_Mode)
Seleccionar modelo de ejecuci√≥n del
programa, 1217
Modos de operaci√≥n
Modulaci√≥n por ancho de impulso PWM, 1255
PWM con motor DC, 1318
Retardo a la conexi√≥n/desconexi√≥n, 1293

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Salida de frecuencia, 1306
Salida de impulso (impulso √∫nico), 1243
Tren de impulsos, 1279
Modulo, 1551, 1627, 1902
M√≥dulo de entradas digitales
Aplicaciones posibles, 74
Caracter√≠sticas, 11, 14
Configuraci√≥n hardware, 184
M√≥dulo de entradas/salidas digitales
Caracter√≠sticas, 15
M√≥dulo de salidas digitales
Caracter√≠sticas, 1241
M√≥dulo tecnol√≥gico
Aplicaciones posibles, 16, 70, 83
√Årbol del proyecto, 133
Caracter√≠sticas, 11, 14, 1241
Configuraci√≥n de canal, 1227
configuraci√≥n de hardware, 1226
Configuraci√≥n hardware, 133, 1353, 1365, 1371
Interfaz de control, 175
Interfaz de respuesta, 177
Online y diagn√≥stico, 174, 189, 1240, 1364, 1371
Parametrizar, 135
Par√°metros b√°sicos, 136
PWM, 1228
Reacci√≥n a STOP de la CPU, 1228
Retardo a la entrada, 1231, 1234, 1237
M√≥dulo TIO, 1215, 1221
Motion Control CPU S7-1200
Manual, 2333
Motion Control S7-1200
Conexi√≥n de accionamientos y enc√≥ders, 2314
PROFIdrive, 2314
Telegrama, 2314
Motion transition, 2215
Motor paso a paso, 2304

N
N√∫mero de incremento 1 a 100, 2768, 2867
N√∫mero de incremento 1-100, 2725, 2817
N√∫mero de incremento 252, 2818, 2868
N√∫mero de incremento 254, 2726, 2769, 2819, 2868
N√∫mero de incremento 255, 2726, 2769, 2819, 2869

O
OB 82
Alarma de diagn√≥stico, 1059, 1110, 1143
OB Interpolator, 2325, 2327
OB MC-Interpolator, 2325, 2327

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

OB MC-Servo, 2325, 2327
OB Servo, 2325, 2327
Object coordinate system, 2067
Objetivo, 2693
Objeto tecnol√≥gico
High_Speed_Counter, 84
SSI_Absolute_Encoder, 111
Tipos de datos, 2466
Objeto tecnol√≥gico Eje
Variable Config, 2615
Variable ErrorBits, 2625
Variable MotionStatus, 2620
Variable StatusBits, 2621
Objeto tecnol√≥gico Eje de posicionamiento
Actualizaci√≥n de las variables, 2552, 2654
Agregar objeto, 2354
Componentes de hardware y software, 2349
Comportamiento con la limitaci√≥n de tirones
activada, 2382
Configuraci√≥n de accionamiento listo, 2570
Configuraci√≥n de la aceleraci√≥n, 2378
Configuraci√≥n de la deceleraci√≥n, 2378
Configuraci√≥n de la deceleraci√≥n de parada de
emergencia, 2380
Configuraci√≥n de la din√°mica general, 2377
Configuraci√≥n de la entrada del sensor del punto
de referencia, 2386, 2389, 2573, 2574
Configuraci√≥n de la habilitaci√≥n del
accionamiento, 2570
Configuraci√≥n de la interfaz del hardware, 2358,
2568
Configuraci√≥n de la inversi√≥n de sentido, 2370,
2571
Configuraci√≥n de la limitaci√≥n de tirones, 2379
Configuraci√≥n de la referenciaci√≥n pasiva, 2572
Configuraci√≥n de la unidad de medida, 2357
Configuraci√≥n de la unidad de usuario, 2570
Configuraci√≥n de la unidad del l√≠mite de
velocidad, 2377
Configuraci√≥n de la velocidad de
referenciado, 2387, 2575
Configuraci√≥n de la velocidad m√°xima/velocidad
de arranque y parada, 2377
Configuraci√≥n de las se√±ales del
accionamiento, 2360, 2570
Configuraci√≥n de los impulsos por vuelta del
motor, 2369, 2571
Configuraci√≥n de PTO y HSC, 2359, 2568
Configuraci√≥n del lado del sensor del punto de
referencia, 2387, 2389, 2573, 2575
Configuraci√≥n del mecanismo, 2369, 2370, 2571
Configuraci√≥n del nombre del eje, 2356, 2568

3117

√çndice alfab√©tico

Configuraci√≥n del offset del punto de
referencia, 2387, 2575
Configuraci√≥n del permiso de inversi√≥n del
sentido en el final de carrera por hardware, 2574
Configuraci√≥n del recorrido por vuelta del
motor, 2369, 2571
Configuraci√≥n del referenciado activo, 2385,
2573
Configuraci√≥n del referenciado pasivo, 2388
Configuraci√≥n del sensor del punto de
referencia, 2387, 2389, 2573, 2575
Configuraci√≥n del sentido de aproximaci√≥n/
referenciado, 2387, 2575
Configuraci√≥n del tiempo de aceleraci√≥n, 2378
Configuraci√≥n del tiempo de deceleraci√≥n, 2378
Configuraci√≥n del tiempo de redondeo, 2379
Herramientas, 2352
Modificar los par√°metros de configuraci√≥n de la
din√°mica en el programa de usuario, 2383
Modificar los par√°metros de configuraci√≥n del
referenciado en el programa de usuario, 2392
Par√°metros avanzados, 2570
Par√°metros b√°sicos, 2356, 2568
Procedimiento de referenciado activo, 2389
Procedimiento de referenciado pasivo, 2391
Resumen de la configuraci√≥n, 2353
Resumen de la puesta en servicio, 2353
Resumen del diagn√≥stico, 2353
S√≠mbolos de la ventana de configuraci√≥n, 2355
Variable ActualPosition, 2514
Variable ActualVelocity, 2514
Variable DynamicDefaults, 2530, 2638
Variable DynamicLimits, 2529, 2637
Variable ErrorBits, 2546, 2652
Variable FollowingError, 2536, 2642
Variable Homing, 2535, 2640
Variable Mechanics, 2528, 2636
Variable M√≥dulo, 2529, 2636
Variable Position, 2514, 2627
Variable PositionControl, 2536, 2641
Variable PositionLimitsHW, 2532, 2639
Variable PositionLimitsSW, 2531, 2638
Variable PositionMonitoring, 2537, 2643
Variable Sensor, 2520, 2631
Variable Simulation, 2515
Variable StandstillSignal, 2538, 2643
Variable StatusBits, 2541, 2647
Variable StatusDrive, 2539, 2645
Variable StatusPositioning, 2539, 2644
Variable StatusSensor, 2540, 2646
Variable Units, 2527, 2635

3118

Variable Velocity, 2514
Variables Actor, 2515, 2628
Objeto tecnol√≥gico Eje y tabla de √≥rdenes
Lista de los ErrorIDs y las ErrorInfos, 2488, 2578
Objeto tecnol√≥gico Tabla de √≥rdenes
Agregar objeto, 2421
Comandos del men√∫ contextual, 2427
Configuraci√≥n de la activaci√≥n de
advertencias, 2424
Configuraci√≥n de la duraci√≥n, 2426
Configuraci√≥n de la tabla de √≥rdenes, 2423
Configuraci√≥n de la velocidad, 2425
Configuraci√≥n de posici√≥n/recorrido de
desplazamiento, 2425
Configuraci√≥n de Utilizar par√°metros del eje
de, 2424
Configuraci√≥n del c√≥digo de paso, 2426
Configuraci√≥n del paso siguiente, 2426
Configuraci√≥n del tipo de orden, 2424
Herramientas, 2420
Par√°metros avanzados, 2436
S√≠mbolos de la ventana de configuraci√≥n, 2422
Uso, 2419
Variable Command[1...32], 2553, 2655
Variable
Config.Command.Command[1...32], 2654
Objeto tecnol√≥gico Tabla de peticiones
Configuraci√≥n general, 2423
Par√°metros b√°sicos, 2423
Objetos tecnol√≥gicos
CONT_C, 817
CONT_S, 821
PID_3Step, 731
PID_Compact, 692
PID_CP, 847
PID_ES, 896
PID_Temp, 769
TCONT_CP, 823
TCONT_S, 844
OCS, 2067
Optimizaci√≥n, 2443
Optimizar el regulador de posici√≥n, 2443
Optimize position controller, 1499, 1683, 1686
Orden de llamada, 1224
Orientation movement, 2170
Output cam
Basics, 1800
Configuration, 1830
Diagnostics, 1838
Functions, 1787
Tags, 1850

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

P
Palabra de control del sensor, 3015
Parametrizaci√≥n
CPU compactas, 20
M√≥dulo tecnol√≥gico, 20, 135
Par√°metros b√°sicos
High_Speed_Counter, 89
M√≥dulo tecnol√≥gico, 136
SSI_Absolute_Encoder, 114
Paso por cero, 232, 315
Passive homing, 1590, 1600, 1602, 1604, 1654,
1931
PathChoice, 2171
P√©rdida
Sincronizaci√≥n, 2827
P√©rdida de la sincronizaci√≥n, 492, 569
Per√≠odo
Resoluci√≥n, 233, 376, 437
Petici√≥n
Ajustar valor real, 2729, 2823
Ajustar valor real al vuelo, 2823
Cancelar preselecci√≥n del valor real, 2731, 2824
Decalaje de se√±al cero, 2825
Definir punto de referencia, 2731, 2827
PID_Temp
Aplicaciones multizona, 810
Conexi√≥n en cascada, 803
PIP_Mode
Configurar PIP_Mode, 1224
Pista de leva de contaje, 469
Pista de leva de freno, 470
Pistas
Activar se√±al de pista, 468
Control de las salidas de pista, 531, 609
Desbloquear, 468
Habilitaci√≥n externa, 468
Pista de leva de contaje, 531, 609
Pista de leva de freno, 531, 609
Pistas especiales, 531, 609
Resultado de pista, 467
Valor de contaje superior pista de leva de
contaje, 532, 610
Pistas de levas, 467
Pistas especiales, 469
Point-to-point motion, 2173
Portal
2D, 2074
2D with orientation, 2076
3D, 2078
3D with orientation, 2081

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Posicionamiento absoluto
Easy Motion Control, 3027
Posicionamiento relativo
Easy Motion Control, 3027
Position limits, 1574, 1577, 1578, 1643, 1920
Positioning axis
Adding, 1420
Basics, 1549
Configuration, 1627
Delay time, 1990
Deleting, 1422
Diagnostics, 1505, 1509, 1693, 1697, 1698
Functions, 1545
Moving, 1421
Tags, 1718
Positioning monitoring, 1610, 1612, 1657, 1934
Precisi√≥n, 1213
Calcular TIO_Time, 1219
Previsibilidad, 1213
Proceso de posicionamiento
Fin, 2708, 2801
Process image partition "OB Servo PIP", 1393
PROFIdrive, 1554, 1560, 2314
PROFINET, 1215, 1220, 1221
Utilizar PROFINET IRT, 1216
Programa de usuario, (Synchronous Cycle)
Evaluaci√≥n de fallos, 549, 629, 2777, 2877
Programaci√≥n, 1223
Puerta
hardware, 213
interna, 213
software, 213
Puerta hardware, 22, 27, 76, 78, 96, 154, 213
Puerta HW
Abrir y cerrar de forma controlada por flanco, 215
Abrir y cerrar de forma controlada por nivel, 215
Puerta interna, 213
Puerta software, 26, 76, 78, 213
Puerta SW, 22
Abrir y cerrar, 214
Puesta en servicio
High_Speed_Counter, 108
SSI_Absolute_Encoder, 129
PULSE REFEED, 3007
Punto de cambio de velocidad, 2693
Punto de desconexi√≥n, 2693
Puntos de conmutaci√≥n, 2693
PWM
M√≥dulo tecnol√≥gico, 1228

3119

√çndice alfab√©tico

R
Rampa de conexi√≥n dither, 1260
Rampa de desconexi√≥n dither, 1260
Ramp-down time, 1641, 1645, 1918, 1922
Ramp-up time, 1641, 1645, 1918, 1922
Rango de contaje, 232, 314
Rango de hist√©resis, 470
Rango de medici√≥n, 53, 56
Reacci√≥n a STOP de la CPU, 136, 1357, 1374
M√≥dulo tecnol√≥gico, 1228
Reacci√≥n a STOP de la CPU/del maestro
1STEP 5V, 2987
Reacciones a errores
Easy Motion Control, 3028
Reajuste del enc√≥der absoluto, 516, 594, 2755,
2854
Calcular, 516, 594, 2756, 2855
Ejemplo, 517, 595, 2757, 2856
Reajuste mec√°nico, 517, 595, 2757, 2856
Rebase del margen de medici√≥n, 1063, 1113, 1148
Rebase por defecto del rango de medici√≥n, 1063,
1113, 1148
Recorrido de anticipaci√≥n, 472
Redisparar el punto de referencia, 514, 592
Reducci√≥n de ciclo, 1217
Reduction ratio, 1390
Reductor
Easy Motion Control, 3027
Reference cam, 1591
Referenciado
Modos de referenciado, 2331
Registro de diagn√≥stico, 1059, 1060, 1110, 1144
Registro de diagn√≥stico DS0
Asignaci√≥n, 1061, 1111, 1145
Registro de diagn√≥stico DS1
Asignaci√≥n, 1062, 1112, 1146
Registro de diagn√≥stico DS1 del FM 355-2
Asignaci√≥n, 1112
Regulaci√≥n, 2395
Regulaci√≥n de intensidad, 1263
Regulaci√≥n de posici√≥n, 2395
Regulador PID, 1263
Reguladores de software
Configuraci√≥n, 662
Reinicializaci√≥n de objetos tecnol√≥gicos, 2465
Reinicializar objetos tecnol√≥gicos, 2465
Reinitialization of technology objects, 1476
Reproducibilidad, 1211
Requisitos
Ajustar valor real, 2730, 2823

3120

Ajustar valor real al vuelo, 2823
Aproximaci√≥n en bucle, 2733, 2832
B√∫squeda del punto de referencia, 2719, 2811
Captura de bordes, 2829
Datos de enc√≥der, 2737, 2836
Decalaje de se√±al cero, 2825
Definir punto de referencia, 2732, 2827
JOG, 2715, 2807
Medici√≥n de longitud, 2829
Modo incremental, 2725, 2817
Requisitos de hardware, 1214
Resoluci√≥n, 525, 603, 2762, 2862
Valores admitidos, 525, 603
Valores posibles, 2763, 2862
Resoluci√≥n del per√≠odo, 233, 376, 437
Restart of technology objects, 1476
Retardo a la entrada
M√≥dulo tecnol√≥gico, 1231, 1234, 1237
Reversing cam, 1591, 1599
Reversing output cam, 1651, 1928
Roller picker
2D, 2085
2D with orientation, 2087
3D (vertical), 2089
3D with orientation (horizontal), 2095
3D with orientation (vertical), 2092
Rotary axis, 1551
Rotation conventions, 2070
Rotura de hilo, 137, 527, 605, 1063, 1113, 1148,
2766, 2865
Routes
Show, 1999

S
S7-1500 Motion Control, 1545, 1863
Actual value, 1558, 1559
Axis type, 1551
Closed-loop control, 1613, 1614, 1616, 1659,
1661, 1675, 1935, 1937
Commissioning, 1478, 1495, 1499, 1677, 1682,
1683, 1686
Configuration, 1422, 1423, 1627, 1902, 1938
Configuration limits, 1388
Diagnostics, 1480, 1481, 1484
Downloading to CPU, 1477
Drive and encoder connection, 1386, 1412, 1413,
1415, 1418, 1554, 1555, 1560, 1571, 1628, 1630,
1903, 1905
Dynamic defaults, 1581
Dynamic settings, 1579, 1587, 1641, 1645, 1918,
1922

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Guidelines for operation, 1386
Homing, 1589, 1590, 1591, 1592, 1599, 1600,
1605, 1607, 1608, 1648, 1649, 1654, 1926, 1927,
1931
How it works, 1383
Introduction, 1383
Mechanics, 1572, 1573, 1637, 1914
Modulo, 1551, 1627, 1902
Motion Control instruction, 1385, 1457, 1460,
1545, 1787, 1863
Position limits, 1574, 1577, 1578, 1643, 1920
Position monitoring, 1610, 1611, 1612, 1657,
1658, 1659, 1934, 1935
Process response, 1390, 1393, 1397
PROFIdrive, 1554, 1560
Programming, 1453, 1457, 1463, 1476
Synchronous operation, 1870, 1878, 1879, 1889
Technology alarms, 1480, 1481, 1510, 2291
Technology data block, 1385, 1453, 1455, 1456
Technology object, 1384, 1422, 1476, 1545, 1548,
1549, 1550, 1627, 1787, 1800, 1814, 1863, 1866,
1867, 1902, 1938, 1987
Telegram, 1555, 1560, 1571
Unit of measure, 1389, 2062
Versions, 1399, 1410, 2188
S7-1500 Motion Control actual value, 1558, 1559
S7-1500 Motion Control commissioning, 1478, 1495,
1499, 1677, 1682, 1683, 1686
S7-1500 Motion Control drive connection, 1386,
1412, 1413, 1415, 1418, 1554, 1555, 1560, 1571,
1628, 1903
S7-1500 Motion Control encoder connection, 1386,
1412, 1413, 1415, 1418, 1554, 1555, 1560, 1571
S7-1500 Motion Control homing
Absolute encoder adjustment, 1590
Absolute value adjustment, 1607
Active, 1590, 1592, 1649, 1927
Basics, 1589
Configuration, 1648, 1926
Direct, 1590
Home position, 1591
Homing mark, 1590
Homing mode, 1590, 1591
On the fly, 1590, 1600, 1654, 1931
Passive, 1590, 1600, 1654, 1931
Reference cam, 1591
Reversing cam, 1591, 1599
Reversing output cam, 1651, 1928
Zero mark, 1590
S7-1500 Motion Control instruction, 1385
Ending a Motion Control job, 1475

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Errors in Motion Control instructions, 1480, 1484,
1537
Inserting, 1460
Overview, 1545, 1787, 1863
Parameters, 1457
Starting Motion Control job, 1463
Tracking Motion Control job, 1465
S7-1500 Motion Control mechanics, 1572, 1573,
1637, 1914
S7-1500 Motion Control operating mode, 1397
S7-1500 Motion Control optimization, 1499, 1683,
1686
S7-1500 Motion Control telegram, 1555, 1560, 1571
S7‚Äë1500 Motion Control
Configuration, 1420, 1421
Technology object, 1420, 1421
S7-1500T Motion Control
Commissioning, 2228
Drive and encoder connection, 1630, 1905
Motion Control instruction, 1545, 1787, 1863
Technology object, 1545, 1787, 1863
S7-1500T Motion Control instruction
Errors in Motion Control instructions, 2300
Salida de sentido y sentido de la marcha
Relaci√≥n, 2310
Salida digital
Funciones, 101, 120, 158, 168
Modo de operaci√≥n, 1229, 1233, 1239
Salida High Speed, 1230
Valor de comparaci√≥n, 41, 101, 120, 158, 168
Salida High Speed, 1230
Salidas digitales
Activar y desactivar, 245
comportamiento en los modos de contaje, 244
comportamiento en los modos de medici√≥n, 255
Comportamiento en los modos de montaje, 325
habilitar, 245, 255, 326
SCARA
2D with orientation, 2099
3D with orientation, 2102
Seguimiento
Easy Motion Control, 3027
Selecci√≥n de la funci√≥n de puerta, 195
Seleccionar el control de puerta, 196, 197, 205, 207,
208, 210
Sensor, 1386
Sensor del punto de referencia, 2719, 2811
Sensor tipo NPN, 91, 149
Sensor tipo PNP, 91, 149
Sensores NAMUR, 283
Sentido principal de contaje, 198, 233, 287, 354,
415

3121

√çndice alfab√©tico

Se√±al de sentido de giro, 3004
Se√±al de velocidad cero, 2395
Se√±al N, 91, 149
Se√±ales de realimentaci√≥n del diagn√≥stico, 2738,
2837
Datos en el DB de canal, 2739, 2837
Desarrollo, 2739, 2837
Se√±ales de realimentaci√≥n del
posicionamiento, 2836
Datos en el DB de canal, 2836
Se√±ales de realimentaci√≥n para el posicionamiento
Desarrollo, 2836
Se√±ales de respuesta del posicionamiento, 2738
Datos en el DB de canal, 2738
Desarrollo, 2738
Se√±ales de respuesta en el DB de canal
Final de una operaci√≥n de posicionamiento, 2715,
2807
Se√±ales del enc√≥der de 24 V, 219
Filtro de entrada, 237, 238, 318
Se√±ales del enc√≥der de 5 V, 218
Vigilancia, 219
Servo OB, 1390, 1393
Servomotor, 2304
SET, 238
Signal zones, 2182, 2183
SIMATIC Drive Controller, 83
Configuraci√≥n hardware, 189
Online y diagn√≥stico, 191
S√≠mbolo
Para comparaci√≥n de valores, 669
Simulaci√≥n
Easy Motion Control, 3028
SINAMICS V90 PN, 1412
Sincronizaci√≥n, 23, 34, 96, 154
B√∫squeda del punto de referencia, 2718, 2810
Con se√±al N, 96, 154
Definir punto de referencia, 2731, 2827
mediante entrada digital, 37
P√©rdida, 492, 569, 2827
Sincronizaci√≥n de relojes, 1216
Sincronizar
Easy Motion Control, 3026
Singular positions, 2159
Sistema de medida
Seleccionar, 510, 588, 2739, 2838
SLOT, 1335
SM 338
alarma de diagn√≥stico, 2662
Avisos de diagn√≥stico, 2668
direccionarlo, 2665

3122

modo is√≥crono, 2661
velocidad de transferencia, 2663
Software de configuraci√≥n, 1215, 1246, 1267, 1284,
1298, 1309, 1322
Software limit switches, 1574, 1577, 1643, 1920
Speed axis
Adding, 1420
Basics, 1548
Configuration, 1617
Deleting, 1422
Diagnostics, 1502, 1504, 1689, 1692
Functions, 1545
Moving, 1421
Tags, 1702
sPTP motion, 2173
SSI_Absolute_Encoder, 111
configurar, 113
Diagn√≥stico, 130
Par√°metros b√°sicos, 114
programar, 129
Puesta en servicio, 129
Startdrive, 1412
STEP 7, 1215
STOP de la CPU, 136, 1357, 1374
SW_GATE, 26, 78
SYNC_PI, 1218
SYNC_PO, 1218
Synchronous axis
Adding, 1420
Basics, 1866
Configuration, 1902
Delay time, 1990
Deleting, 1422
Diagnostics, 1505, 1509, 1697, 1698, 1979, 1984,
1985
Functions, 1863
Moving, 1421
Tags, 2003
Synchronous Cycle, 1223
Entender las instrucciones de TIO, 1217
Synchronous operation, 1870, 1878, 1879, 1889
Synchronous operation is being simulated, 1876
Tags, 1876
Synchronous point-to-point motion, 2173

T
tablas de incrementos, 2706
Cambiar,
Datos en el DB de canal, 2708
Escribir,
Leer,

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Tags
Additive leading value, 1878
Cam technology object, 2045
Cam track technology object, 1856
Camming, 1901
Closed-loop control, 1616
Cross-PLC synchronous operation, 1991
Drive and encoder connection, 1571
Gearing, 1888
Homing, 1608
Kinematics technology object, 2259
Leading axis proxy technology object, 2052
Mechanics, 1573
Motion control and limits for dynamics, 1587
Output cam technology object, 1850
Position monitoring functions, 1612
Positioning axis technology object, 1718
Speed axis technology object, 1702
Synchronous axis technology object, 2003
Synchronous operation is being simulated, 1876
Technology object external encoder, 1759
Technology object measuring input, 1843
Traversing range limitation, 1578
TAPP, (Ciclo de aplicaci√≥n)
Tareas de control, 3002
TCP, 2058, 2066
T-CPU, 1545, 1863
TCS, 2066
Technology alarms
Basics, 1480, 1481
List of the technology alarms, 1510, 2291
Technology data block
Analyzing, 1453
Basics, 1385, 1453
Change restart-relevant data, 1456
Evaluating StatusWord, ErrorWord and
WarningWord, 1455
Tags of the cam technology object, 2045
Tags of the cam track technology object, 1856
Tags of the kinematics technology object, 2259
Tags of the leading axis proxy technology
object, 2052
Tags of the output cam technology object, 1850
Tags of the positioning axis technology
object, 1718
Tags of the speed axis technology object, 1702
Tags of the synchronous axis technology
object, 2003
Tags of the technology object external
encoder, 1759
Tags of the technology object measuring
input, 1843

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Technology object
Cam, 1863, 1867, 1891, 1938, 1975
Cam track, 1787, 1814, 1833, 1840, 1842
Data types, 1462
External encoder, 1420, 1421, 1422, 1545, 1550,
1662, 1698, 1700, 1701
Kinematics, 2059, 2060, 2190
Leading axis proxy, 1863, 1987, 1995, 2000
Measuring input, 1787, 1827, 1837
Output cam, 1787, 1800, 1830, 1838
Positioning axis, 1420, 1421, 1422, 1505, 1509,
1545, 1549, 1627, 1693, 1697, 1698
Speed axis, 1420, 1421, 1422, 1502, 1504, 1545,
1548, 1617, 1689, 1692
Synchronous axis, 1420, 1421, 1422, 1505, 1509,
1697, 1698, 1863, 1866, 1902, 1979, 1984, 1985
Technology objects, 1384
Telegrama S7-1200 Motion Control, 2314
Test de cableado
Easy Motion Control, 3068
Texto de diagn√≥stico, 1060, 1111, 1144
Tiempo de actualizaci√≥n, 52, 200
Tiempo de anticipaci√≥n, 471
Tiempo de ciclo, 1212
Tiempo de ciclo de la CPU, 1211
Tiempo de ciclo de la leva, 533, 611
Tiempo de integraci√≥n, 200
Tiempo de medici√≥n, 200
Tiempo de reacci√≥n, 1213
Tiempo de reacci√≥n m√≠nimo, 1213
Tiempos de reacci√≥n definidos, (Ejemplos de
aplicaci√≥n de Time-based IO)
Tiempo de retardo, 1218
Tiempo de retardo de apagado, 3011
Tiempo de vigilancia, 2709, 2710, 2749, 2801, 2802,
2848
Time-based IO
Configurar Time-based IO, 1221
Conocer las funciones de SIMATIC, 1216
Utilizar ajuste predeterminado, 1222
TIO_SYNC
M√≥dulos TIO sincronizados, 1217
TIO_Time, 1212, 1222
Entender TIO_Time, 1216
Tipo de accionamiento, 3003, 3004, 3011
Tipo de accionamiento Servo, 3004
Tipo de accionamiento Stepper, 3004
Tipo de b√∫squeda del punto de referencia, 2754,
2853
Tipo de eje, 2751, 2850
Tipo de enc√≥der, 3003
TTL, 3008

3123

√çndice alfab√©tico

Tipo de enc√≥der no disponible, 3003
Tipo de sensor, 91, 149, 3008
SSI, 3009
Tipo de sensor no existe, 3008
Tipo de se√±al, 90, 148, 164, 1366
Tipo de telegrama
Introducir, 3012
Tipos
B√∫squeda del punto de referencia, 2722, 2814
Tipos de eje, 512, 590
TO_PositioningAxis, 2354
Tolerance time, 1988
Tool center point, 2058, 2066
Tool coordinate system, 2066
Tool zones, 2184
Torque limits, 1587
Torque setpoint, 1586
Transfer area
Setting up, 1992
Transformation area, 2155
Transformation-OB, 2163
Traversing range, 2155
Traversing range limitation, 1574, 1577, 1578, 1643,
1920
Tripod
3D, 2146
3D with orientation, 2150

U
Unit of measure, 1389, 2062
User transformation, 2161
Example, 2165
User-defined kinematics systems, 2153

V
Valor de arranque, 95
Valor de carga, 212, 238, 319
con anticipaci√≥n, 212
directo, 212
Valor de comparaci√≥n, 41, 101, 120, 158, 168, 244,
325
Contaje, 101, 158
Lectura de posici√≥n, 120, 168
Valor de referencia
M√≥dulo de entradas digitales, 79
Valor inicial, 22, 76, 153, 188
Valor l√≠mite inferior, 254, 378, 439
Valor l√≠mite superior, 254, 378, 439
Valor real adicional del sensor, 3016

3124

Valor real del sensor
adicional, 3016
Valor sustitutivo, 246, 295
Valores
Comparar, 669
Valores actuales
Easy Motion Control, 3064
Variables del objeto tecnol√≥gico Eje de
posicionamiento, 2513, 2615
Velocidad de inicio en la b√∫squeda del punto de
referencia, 2759, 2858
Velocidad de parada, 2750, 2849
Vigilancia, 2709, 2801
Velocidad de simulaci√≥n, 521, 599
Velocidad de transferencia, 2673, 2685
Velocity precontrol, 1613
Velocity profile, 1579
Vigilancia
Velocidad de parada, 2709, 2801
Zona de destino, 2709, 2801
Vigilancia de errores de seguimiento, 2394
Vigilancia de las se√±ales del enc√≥der de 5 V, 219
Vigilancia de l√≠mites, 203
Vigilancia de posicionamiento, 2393
Vigilancias, 2709, 2801
JOG, 2717, 2809

W
WCS, 2065
Work zones, 2182, 2183
Workspace zones, 2182, 2183
World coordinate system, 2065

Z
Zero mark, 1590
Zona de destino, 2693, 2748, 2847
Vigilancia, 2709, 2801
Zona de parada, 2693, 2750, 2849
Zona de sobrecarga, 3007
Zona de trabajo, 2693
Zonas de conexi√≥n, 2693
Zone geometry, 2185
Zone monitoring, 2180
Zones
Flange zones, 2185
Kinematics zones, 2184
Signal zones, 2183
Subentry, 2180, 2183
Tool zones, 2184

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Work zones, 2183
Workspace zones, 2183
Zone geometry, 2185

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

3125

√çndice alfab√©tico

3126

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Uso de las funciones online y de
diagn√≥stico
Manual de programaci√≥n y manejo

11/2019

Mostrar nodos accesibles

1

Modificaci√≥n online de la
configuraci√≥n del dispositivo

2

Conectar dispositivos online

3

Creaci√≥n de una copia de
seguridad de una CPU S7

4

Configurar interfaces PG/PC

5

Uso de la funci√≥n Trace y de
analizador l√≥gico

6

Establecimiento de
conexiones remotas con
TeleService

7

Simulaci√≥n de dispositivos
con S7-PLCSIM

8

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Digital Industries
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

Mostrar nodos accesibles.............................................................................................................................9

2

Modificaci√≥n online de la configuraci√≥n del dispositivo ..............................................................................11

3

Conectar dispositivos online.......................................................................................................................13

4

5

3.1

Informaci√≥n general sobre el modo online .............................................................................13

3.2

Vista en el modo online..........................................................................................................15

3.3

Preajustar datos de conexi√≥n online ......................................................................................16

3.4

Establecer o modificar conexi√≥n online..................................................................................17

3.5

Deshacer la conexi√≥n online ..................................................................................................20

3.6

Conexi√≥n online con varios dispositivos ................................................................................20

3.7

Deshacer conexiones online de varios dispositivos...............................................................21

Creaci√≥n de una copia de seguridad de una CPU S7................................................................................23
4.1

Posibles copias de seguridad para las CPUs S7...................................................................23

4.2
4.2.1
4.2.2
4.2.3

Creaci√≥n de una copia de seguridad de CPU S7-300 y S7-400............................................25
Crear una copia de seguridad de un dispositivo ....................................................................25
Restablecer el software y la configuraci√≥n de hardware de un dispositivo............................26
Copia de seguridad de la configuraci√≥n de un dispositivo .....................................................27

4.3
4.3.1
4.3.2
4.3.3

Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500........................................28
Crear una copia de seguridad de un dispositivo ....................................................................28
Copia de seguridad de la configuraci√≥n de un dispositivo .....................................................30
Restablecimiento de la configuraci√≥n de un dispositivo.........................................................30

Configurar interfaces PG/PC ......................................................................................................................33
5.1

Accesos online .......................................................................................................................33

5.2

Principios b√°sicos para parametrizar la interfaz PG/PC ........................................................35

5.3

Mostrar u ocultar interfaces....................................................................................................35

5.4

Mostrar y modificar las propiedades de una interfaz .............................................................36

5.5

Agregar interfaces..................................................................................................................36

5.6
5.6.1
5.6.2
5.6.3
5.6.4
5.6.5
5.6.6
5.6.7

Parametrizaci√≥n de la interfaz Ethernet .................................................................................37
Parametrizar la interfaz Industrial Ethernet............................................................................37
Visualizar los par√°metros del sistema operativo....................................................................38
Conectar la interfaz PG/PC con una subred ..........................................................................38
Parametrizar la interfaz Ethernet ...........................................................................................39
Uso de direcciones IP temporales .........................................................................................40
Gestionar direcciones IP temporales .....................................................................................40
Restablecimiento de la configuraci√≥n TCP/IP........................................................................41

5.7
5.7.1

Parametrizar la interfaz MPI y PROFIBUS ............................................................................41
Parametrizar la interfaz MPI y PROFIBUS ............................................................................41

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

3

√çndice

5.7.2
5.7.3
5.7.4
5.7.5
5.7.6
6

Parametrizar la interfaz MPI o PROFIBUS autom√°ticamente................................................42
Parametrizar la interfaz MPI...................................................................................................43
Parametrizar la interfaz PROFIBUS.......................................................................................45
Resumen de los par√°metros del bus para PROFIBUS..........................................................47
Restablecer la configuraci√≥n MPI o PROFIBUS ....................................................................49

Uso de la funci√≥n Trace y de analizador l√≥gico..........................................................................................51
Pr√≥logo...................................................................................................................................51
Informaci√≥n de seguridad.......................................................................................................52

4

6.1
6.1.1
6.1.2
6.1.3
6.1.4
6.1.5
6.1.5.1
6.1.5.2

Descripci√≥n ............................................................................................................................53
Hardware admitido .................................................................................................................53
Registro de medidas con la funci√≥n Trace.............................................................................53
Configuraci√≥n de Trace, registro, Trace en dispositivo y medici√≥n........................................55
Almacenamiento de datos......................................................................................................56
Trace del proyecto .................................................................................................................57
General ..................................................................................................................................57
Sincronizaci√≥n horaria............................................................................................................58

6.2
6.2.1
6.2.1.1
6.2.1.2
6.2.1.3
6.2.1.4
6.2.2
6.2.2.1
6.2.2.2
6.2.2.3
6.2.2.4
6.2.3
6.2.3.1
6.2.4
6.2.4.1
6.2.4.2

Interfaz de software de Trace ................................................................................................59
√Årbol del proyecto ..................................................................................................................61
Interfaz: √Årbol del proyecto, carpeta "Traces"........................................................................61
Interfaz - √Årbol del proyecto, carpeta "Mediciones" ...............................................................63
Interfaz - √Årbol del proyecto, carpeta "Mediciones en el dispositivo (tarjeta de memoria)"......64
Interfaz - √Årbol del proyecto, carpeta "Mediciones superpuestas".........................................65
√Årea de trabajo.......................................................................................................................67
Interfaz Barra de herramientas de Trace ...............................................................................67
Interfaz - Ficha Configuraci√≥n ................................................................................................68
Interfaz Ficha Diagrama.........................................................................................................68
Interfaz - Ficha Selecci√≥n de se√±al (Mediciones superpuestas)............................................83
Ventana de inspecci√≥n...........................................................................................................84
Interfaz: ventana de inspecci√≥n .............................................................................................84
Task Card Trace ....................................................................................................................85
Interfaz - Paleta Cursores de medici√≥n..................................................................................85
Interfaz - Paleta Instant√°neas ................................................................................................87

6.3
6.3.1
6.3.2
6.3.2.1
6.3.3
6.3.3.1
6.3.3.2
6.3.3.3
6.3.3.4
6.3.4
6.3.4.1
6.3.5

Interfaz de software de Trace del proyecto............................................................................88
Estructura de la interfaz .........................................................................................................88
√Årbol del proyecto ..................................................................................................................90
Interfaz - √Årbol del proyecto, carpeta "Funciones para varios dispositivos" - "Traces del
proyecto" ................................................................................................................................90
√Årea de trabajo.......................................................................................................................91
Interfaz - Barra de herramientas del Trace del proyecto........................................................91
Interfaz - Vista general de estados de los dispositivos participantes.....................................92
Interfaz - Ficha Configuraci√≥n ................................................................................................93
Interfaz - Ficha Diagrama.......................................................................................................94
Ventana de inspecci√≥n...........................................................................................................94
Interfaz: ventana de inspecci√≥n .............................................................................................94
Task Card Trace ....................................................................................................................95

6.4
6.4.1
6.4.2
6.4.3

Manejo ...................................................................................................................................95
Gu√≠a de inicio r√°pido para Trace............................................................................................95
Gu√≠a de inicio r√°pido para Trace del proyecto .....................................................................100
Uso de la funci√≥n Trace: vista general.................................................................................103

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

√çndice

7

6.4.4
6.4.4.1
6.4.4.2
6.4.4.3
6.4.4.4
6.4.4.5
6.4.5
6.4.5.1
6.4.5.2
6.4.5.3
6.4.5.4
6.4.5.5
6.4.5.6
6.4.5.7
6.4.5.8
6.4.6
6.4.6.1
6.4.7
6.4.7.1
6.4.7.2
6.4.7.3
6.4.7.4
6.4.7.5
6.4.7.6
6.4.7.7

√Årbol del proyecto ................................................................................................................104
Creaci√≥n de Trace................................................................................................................104
Ver configuraci√≥n .................................................................................................................104
Ver diagrama........................................................................................................................105
Crear medici√≥n superpuesta ................................................................................................105
Estructuraci√≥n de los objetos en grupos ..............................................................................106
√Årea de trabajo General.......................................................................................................107
Transmisi√≥n de la configuraci√≥n de Trace al dispositivo......................................................107
Activaci√≥n/desactivaci√≥n de Trace en el dispositivo ............................................................107
Visualizaci√≥n de registro ......................................................................................................108
An√°lisis del registro en curso ...............................................................................................108
Almacenamiento de mediciones en el proyecto...................................................................109
Exportaci√≥n e importaci√≥n de mediciones ...........................................................................110
Transmisi√≥n de la configuraci√≥n de Trace del dispositivo al proyecto .................................111
Borrado de Traces en el dispositivo.....................................................................................111
√Årea de trabajo Ficha Configuraci√≥n....................................................................................112
Configuraci√≥n de Trace........................................................................................................112
√Årea de trabajo Ficha Diagrama ..........................................................................................112
Uso del diagrama de curvas ................................................................................................112
Utilizaci√≥n de la tabla de se√±ales.........................................................................................114
Uso del grupo de se√±ales en la tabla de se√±ales ................................................................115
Observaci√≥n de se√±ales r√°pidas..........................................................................................117
Comparaci√≥n de registros (mediciones superpuestas)........................................................118
Alineaci√≥n exacta de mediciones (mediciones superpuestas).............................................119
Impresi√≥n de un registro ......................................................................................................120

6.5
6.5.1
6.5.1.1
6.5.1.2
6.5.1.3
6.5.1.4
6.5.1.5
6.5.1.6
6.5.1.7
6.5.1.8
6.5.1.9

Dispositivos ..........................................................................................................................120
CPU S7-1200/1500 ..............................................................................................................120
Captaci√≥n de variables.........................................................................................................120
Vida √∫til de la configuraci√≥n de Trace y de los valores registrados en el dispositivo...........122
Niveles de registro ...............................................................................................................122
Sincronizaci√≥n horaria con Motion Control ..........................................................................123
Capacidad funcional.............................................................................................................124
Carga de CPU por registro de Trace ...................................................................................124
Trace del proyecto ...............................................................................................................125
Interfaz de software de la configuraci√≥n ..............................................................................125
Configuraci√≥n .......................................................................................................................136

Establecimiento de conexiones remotas con TeleService .......................................................................141
7.1
7.1.1
7.1.2
7.1.3

Principios b√°sicos para el trabajo con TeleService..............................................................141
Introducci√≥n a TeleService...................................................................................................141
Funcionalidad de TeleService..............................................................................................142
List√≠n telef√≥nico en TeleService ...........................................................................................142

7.2
7.2.1
7.2.2
7.2.3
7.2.4
7.2.4.1
7.2.4.2
7.2.4.3
7.2.4.4

Trabajar con el list√≠n telef√≥nico ............................................................................................143
Principios b√°sicos para trabajar con el list√≠n telef√≥nico........................................................143
Configuraci√≥n del list√≠n telef√≥nico ........................................................................................144
S√≠mbolos del list√≠n telef√≥nico................................................................................................145
Administrar el list√≠n telef√≥nico ..............................................................................................145
Abrir el list√≠n telef√≥nico .........................................................................................................145
Insertar filas en el list√≠n telef√≥nico ........................................................................................146
Mostrar y ocultar columnas en el list√≠n telef√≥nico ................................................................146
Guardar el list√≠n telef√≥nico ...................................................................................................146

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

5

√çndice

6

7.2.4.5
7.2.4.6
7.2.4.7
7.2.4.8

Importar datos del list√≠n telef√≥nico .......................................................................................146
Exportar datos del list√≠n telef√≥nico .......................................................................................148
Imprimir el list√≠n telef√≥nico....................................................................................................149
Definir reglas de marcaci√≥n .................................................................................................149

7.3
7.3.1
7.3.2
7.3.2.1
7.3.2.2
7.3.2.3
7.3.3
7.3.3.1
7.3.3.2
7.3.3.3
7.3.3.4
7.3.3.5
7.3.4
7.3.4.1
7.3.4.2
7.3.4.3
7.3.4.4
7.3.4.5
7.3.4.6
7.3.4.7
7.3.4.8
7.3.4.9
7.3.5
7.3.5.1
7.3.5.2
7.3.5.3
7.3.5.4
7.3.5.5
7.3.6
7.3.6.1
7.3.6.2

Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica .........................................................151
Principios b√°sicos para el establecimiento de una conexi√≥n por l√≠nea telef√≥nica................151
Redes telef√≥nicas y m√≥dems ...............................................................................................153
Redes telef√≥nicas y m√≥dems permitidos .............................................................................153
Instalar el m√≥dem local ........................................................................................................154
Conectar y parametrizar el m√≥dem remoto..........................................................................154
Protecci√≥n de acceso en las conexiones por l√≠nea telef√≥nica..............................................155
Informaci√≥n sobre los derechos de acceso..........................................................................155
Posibilidades de rellamada en TeleService .........................................................................156
Informaci√≥n sobre los niveles de protecci√≥n ........................................................................157
Crear derechos de acceso y n√∫mero de rellamada para el TS Adapter ..............................158
Realizar la rellamada en TeleService ..................................................................................159
TS Adapter MPI....................................................................................................................160
Breve descripci√≥n del TS Adapter MPI ................................................................................160
Funcionamiento del TS Adapter MPI ...................................................................................161
Usar el TS Adapter MPI en la conexi√≥n directa ...................................................................162
Usar el TS Adapter MPI en la conexi√≥n m√≥dem ..................................................................163
Posibilidades de parametrizaci√≥n para el TS Adapter MPI..................................................164
Parametrizar el TS Adapter MPI ..........................................................................................165
Restaurar la parametrizaci√≥n est√°ndar para el TS Adapter MPI .........................................165
Exportaci√≥n de par√°metros del adaptador ...........................................................................166
Importaci√≥n de par√°metros del adaptador ...........................................................................167
TS Adapter IE.......................................................................................................................168
Breve descripci√≥n del TS Adapter IE ...................................................................................168
Funcionamiento del TS Adapter IE ......................................................................................169
Tipos de conexi√≥n ................................................................................................................169
Posibilidades de parametrizaci√≥n del TS Adapter IE ...........................................................171
Parametrizar el TS Adapter IE .............................................................................................172
Establecimiento de una conexi√≥n por l√≠nea telef√≥nica con una instalaci√≥n remota .............174
Establecer conexi√≥n por l√≠nea telef√≥nica .............................................................................174
Deshacer conexi√≥n por l√≠nea telef√≥nica ...............................................................................175

7.4
7.4.1
7.4.2
7.4.3
7.4.4
7.4.5
7.4.5.1
7.4.5.2
7.4.6
7.4.6.1
7.4.6.2
7.4.6.3
7.4.6.4

Conexi√≥n remota como conexi√≥n VPN ................................................................................176
Principios b√°sicos para el establecimiento de una conexi√≥n VPN.......................................176
Principios b√°sicos de los certificados CA.............................................................................177
Instalar certificado CA para conexi√≥n VPN ..........................................................................179
Borrar certificado CA para conexi√≥n VPN............................................................................182
Establecimiento de una conexi√≥n VPN con una instalaci√≥n remota ....................................182
Establecer conexi√≥n VPN ....................................................................................................182
Deshacer conexi√≥n VPN ......................................................................................................184
TS Adapter IE Advanced......................................................................................................184
Descripci√≥n abreviada del TS Adapter IE Advanced ...........................................................184
Tipos de conexi√≥n ................................................................................................................185
Posibilidades de parametrizaci√≥n del TS Adapter IE Advanced ..........................................186
Parametrizar el TS Adapter IE Advanced ............................................................................187

7.5
7.5.1

Conexiones remotas controladas por CPU en TeleService.................................................188
Vista general de las conexiones remotas controladas por CPU ..........................................188

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

√çndice

7.5.2
7.5.2.1
7.5.2.2
7.5.3
7.5.3.1
7.5.3.2
7.5.4
7.5.4.1
7.5.5
7.5.5.1
7.6
7.6.1
7.6.2
7.6.3
7.6.4
7.6.5
7.6.6
7.6.7
7.6.8
8

Establecer conexiones desde y hacia instalaciones remotas (acoplamiento remoto PGAS) .......................................................................................................................................189
Acceder desde una instalaci√≥n remota a una programadora/un PC ...................................189
Requisitos para establecer una conexi√≥n ............................................................................190
Intercambio de datos entre instalaciones remotas (acoplamiento remoto AS-AS)..............191
Principios b√°sicos para el acoplamiento remoto AS-AS ......................................................191
Requisitos de hardware y software para el acoplamiento remoto AS-AS............................192
Enviar un SMS desde una instalaci√≥n .................................................................................193
Requisitos para enviar un mensaje SMS .............................................................................193
Enviar un correo electr√≥nico desde una instalaci√≥n.............................................................194
Requisitos para enviar un correo electr√≥nico.......................................................................194
Indicaciones para la b√∫squeda de errores ...........................................................................197
Indicaciones generales para la b√∫squeda de errores en caso de problemas con el
m√≥dem .................................................................................................................................197
Grabaci√≥n de un archivo de informe para el m√≥dem ...........................................................198
No se establece una conexi√≥n por l√≠nea telef√≥nica con el TS Adapter................................198
No se establece una conexi√≥n por l√≠nea telef√≥nica desde el TS Adapter............................200
La conexi√≥n m√≥dem se interrumpe......................................................................................201
Lista de chequeo en caso de dificultades con el m√≥dem.....................................................201
Mensajes de error del m√≥dem .............................................................................................202
Posibles mensajes de error en las conexiones VPN ...........................................................203

Simulaci√≥n de dispositivos con S7-PLCSIM.............................................................................................205
8.1

Simulaci√≥n de dispositivos ...................................................................................................205

8.2

Iniciar la simulaci√≥n..............................................................................................................205

√çndice alfab√©tico........................................................................................................................................207

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

7

√çndice

8

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Mostrar nodos accesibles

1

Los dispositivos accesibles son todos aquellos dispositivos que est√°n conectados con una
interfaz de la PG o del PC. Por tanto, tambi√©n es posible mostrar dispositivos que, con los
productos instalados actualmente, solo pueden configurarse con restricciones o que no
pueden configurarse en absoluto.
Para acelerar la visualizaci√≥n en redes grandes con muchos dispositivos, en los dispositivos
PROFINET se muestran los nombres de los mismos ligeramente adaptados. Los caracteres
espec√≠ficos de Unicode de los nombres de dispositivos PROFINET se convierten en
caracteres compatibles con ASCII tras aplicar el procedimiento Punicode (conforme a RFC
3492).

Mostrar los dispositivos accesibles en el √°rbol del proyecto
Para mostrar los dispositivos accesibles en una interfaz de la PG o del PC, proceda del
siguiente modo:
1. Abra la carpeta "Accesos online" en el √°rbol del proyecto.
2. Haga clic en el s√≠mbolo de flecha que aparece a la izquierda de la interfaz para mostrar
todos los objetos subordinados.
3. Haga doble clic en "Actualizar dispositivos accesibles" debajo de la interfaz.
El progreso de la b√∫squeda se observa en la barra de estado. Si encuentra el dispositivo
deseado antes de que finalice el proceso de b√∫squeda, puede cancelar este √∫ltimo. Para
ello, haga clic en la cruz situada a la derecha de la barra de progreso.
Los dispositivos de red que se han encontrado en la b√∫squeda se muestran debajo de la
interfaz.
4. Opcionalmente: seleccione la interfaz en el √°rbol del proyecto. A continuaci√≥n abra la
ventana general de la vista detallada para mostrar otros detalles de los dispositivos
correspondientes. Otros detalles son, p. ej., el tipo de dispositivo, la direcci√≥n MAC o el
nombre de dispositivo configurado.
Si hay muchos dispositivos de red, la visualizaci√≥n detallada de los dispositivos en la
ventana general puede requerir alg√∫n tiempo, puesto que cada dispositivo debe transferir
los detalles.

Mostrar los dispositivos accesibles en una tabla
Para ver los dispositivos accesibles en una tabla sin√≥ptica fuera del √°rbol del proyecto, proceda
del siguiente modo:
1. Elija el comando "Dispositivos accesibles" del men√∫ "Online".
Se abre el cuadro de di√°logo "Dispositivos accesibles".
2. Seleccione el tipo de interfaz en la lista desplegable "Tipo de interfaz PG/PC".
3. Elija la interfaz deseada de la PG o del PC en la lista desplegable "Interfaz PG/PC".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

9

Mostrar nodos accesibles

4. Haga clic en el bot√≥n "Iniciar b√∫squeda".
Los dispositivos accesibles en la interfaz seleccionada de la PG o del PC se muestran en
la tabla. En el gr√°fico, la l√≠nea de uni√≥n entre la programadora o PC y la red se representa
en forma de l√≠nea continua verde. Si en una interfaz no hay dispositivos accesibles, la uni√≥n
se representa en forma de l√≠nea discontinua.
5. Para saltar a un dispositivo en el √°rbol del proyecto, selecci√≥nelo de la lista de dispositivos
accesibles y haga clic en el bot√≥n "Mostrar".
En el √°rbol del proyecto se selecciona el dispositivo seleccionado.

Mostrar informaci√≥n adicional sobre los dispositivos en el √°rbol del proyecto
Para mostrar informaci√≥n adicional sobre los distintos dispositivos accesibles en el √°rbol del
proyecto, proceda del siguiente modo:
1. En el √°rbol del proyecto, haga clic en el s√≠mbolo de flecha que aparece a la izquierda de uno
de los dispositivos accesibles.
Para los dispositivos conocidos se muestran todos los datos disponibles online, p. ej. los
bloques o los datos del sistema. Si para un dispositivo existen otras posibilidades de edici√≥n
a trav√©s del men√∫ contextual, el dispositivo se muestra en negro. A los objetos con fondo
gris, p. ej. bloques, solo se tiene acceso de lectura.

Mostrar informaci√≥n adicional sobre los dispositivos en la vista detallada
Para mostrar informaci√≥n adicional sobre los dispositivos en la vista detallada de la ventana
general, haga lo siguiente:
1. En la carpeta "Accesos online", haga doble clic en la entrada "Actualizar dispositivos
accesibles" en el nodo de la tarjeta de red.
Se mostrar√° una lista de todos los dispositivos accesibles en la red debajo de la interfaz.
2. Haga doble clic en la entrada "Mostrar m√°s informaci√≥n".
Se mostrar√° m√°s informaci√≥n en la vista detallada de la ventana general.

Consulte tambi√©n
Modificaci√≥n online de la configuraci√≥n del dispositivo (P√°gina 11)
Preajustar datos de conexi√≥n online (P√°gina 16)

10

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Modificaci√≥n online de la configuraci√≥n del dispositivo

2

Algunos dispositivos, preferentemente en configuraciones hardware reducidas, se pueden
parametrizar directamente online. Para ello hay que crear un proyecto y disponer de datos
offline. De ese modo es posible modificar la configuraci√≥n del dispositivo r√°pida y f√°cilmente.
No es necesario compilar la configuraci√≥n hardware ni realizar una descarga. En funci√≥n del
dispositivo, todos los cambios ser√°n efectivos de forma inmediata o se escribir√°n en el
dispositivo tras una confirmaci√≥n.

Requisitos
‚óè El dispositivo debe soportar la parametrizaci√≥n online. Para saber si los dispositivos
soportan esta funci√≥n, consulte el manual de producto correspondiente.
‚óè El dispositivo debe estar conectado a la programadora o el PC y estar disponible en la lista
de dispositivos accesibles.

Procedimiento
Para modificar online la configuraci√≥n del dispositivo, proceda del siguiente modo:
1. Visualice los dispositivos accesibles en la interfaz a trav√©s de la cual est√° conectado el
dispositivo. Para saber c√≥mo visualizar los dispositivos accesibles, consulte el cap√≠tulo
"Visualizaci√≥n de los dispositivos accesibles (P√°gina 9)".
2. Abra el dispositivo para visualizar los elementos subordinados.
3. Haga doble clic en la entrada "Parametrizar dispositivo".
En el √°rea de trabajo se abre una p√°gina de configuraci√≥n para el dispositivo.
4. Realice todos los ajustes necesarios.
En algunos dispositivos los cambios en los ajustes son efectivos de forma inmediata.
5. Opcionalmente y en funci√≥n del dispositivo: Haga clic en el bot√≥n "Transferir al dispositivo".
Los ajustes se transfieren al dispositivo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

11

Modificaci√≥n online de la configuraci√≥n del dispositivo

12

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Conectar dispositivos online
3.1

3

Informaci√≥n general sobre el modo online

Modo online
En modo online existe una conexi√≥n online entre la PG/el PC y uno o varios dispositivos.
En las siguientes actividades se necesita una conexi√≥n online entre la PG/el PC y el dispositivo:
‚óè Comprobar programas de usuario
‚óè Visualizar y cambiar el estado operativo de la CPU
‚óè Visualizar y ajustar la fecha y hora de la CPU
‚óè Visualizar la informaci√≥n del m√≥dulo
‚óè Comparar bloques
‚óè Diagnosticar el hardware
Para establecer una conexi√≥n online, la PG/el PC y el dispositivo deben estar interconectados
f√≠sicamente o a trav√©s de una conexi√≥n remota. Alternativamente, algunos dispositivos
soportan un modo de simulaci√≥n. En este caso, se simula una conexi√≥n con el dispositivo a
trav√©s de la interfaz virtual PLCSIM.
Una vez establecida la conexi√≥n, es posible acceder a los datos del dispositivo en la vista
online y de diagn√≥stico o desde la Task Card "Herramientas online". Adem√°s, el estado online
actual de un dispositivo se representa mediante un s√≠mbolo situado a la derecha de √©ste en el
√°rbol del proyecto. El significado de los distintos s√≠mbolos de estado se explica en los
respectivos tooltips.
Nota
Algunas funciones online dependen del volumen de software instalado, o bien de si un
proyecto est√° abierto.

Modo de espera o estado de reposo de la PG/el PC
Si la PG/el PC pasa al modo de espera o al estado de reposo en una conexi√≥n online existente,
se deshacen todas las conexiones online. Una vez la PG/el PC sale del modo de reposo, las
conexiones online no se restablecen autom√°ticamente.
En este contexto, tenga en cuenta que el corte repentino de la conexi√≥n online puede provocar
la p√©rdida de datos o bien un dispositivo conectado puede interrumpir la ejecuci√≥n del
programa.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

13

Conectar dispositivos online
3.1 Informaci√≥n general sobre el modo online

Realizar test de parpadeo LED
En muchos cuadros de di√°logo online es posible realizar un test de parpadeo LED si el
dispositivo conectado online soporta esta funci√≥n. Si activa la casilla de verificaci√≥n
"Parpadear LED", parpadear√° el LED del dispositivo seleccionado en ese momento. Esta
funci√≥n resulta √∫til por ejemplo cuando no se est√° seguro del dispositivo dentro de la estructura
de hardware que corresponde al nodo que se ha seleccionado en el software en la actualidad.
Tenga en cuenta las indicaciones y las posibles limitaciones para el test de parpadeo LED que
se indiquen en la documentaci√≥n correspondiente del dispositivo.

Consulte tambi√©n
Vista en el modo online (P√°gina 15)

14

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Conectar dispositivos online
3.2 Vista en el modo online

3.2

Vista en el modo online

Indicaciones online
Una vez establecida la conexi√≥n online, el aspecto de la interfaz de usuario cambia. Si un
dispositivo no est√° accesible, se indica simb√≥licamente. La figura siguiente muestra un
dispositivo conectado online y la interfaz de usuario correspondiente:





 







‚ë† La barra de t√≠tulo de la ventana activa se muestra entonces sobre un fondo naranja en

‚ë°
‚ë¢

cuanto como m√≠nimo uno de los dispositivos visualizados en el editor se ha conectado
online correctamente. Si uno o varios dispositivos no est√°n accesibles, en la barra de
t√≠tulo del editor se muestra un s√≠mbolo de conexi√≥n interrumpida.
Las barras de t√≠tulo de las ventanas inactivas de la estaci√≥n correspondiente aparecen
con una raya naranja en su borde inferior.
En el margen derecho de la barra de estado aparece una barra naranja animada. Si la
conexi√≥n se ha establecido pero es defectuosa, en lugar de la barra se muestra un
s√≠mbolo que indica la interrupci√≥n de la conexi√≥n. En el apartado "Diagn√≥stico" de la
ventana de inspecci√≥n obtendr√° m√°s informaci√≥n relacionada el error. Adicionalmente la
barra de estado muestra cu√°ndo se produce la conexi√≥n online con el hardware SIMA‚Äê
TIC a trav√©s del TIA Portal Cloud Connector.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

15

Conectar dispositivos online
3.3 Preajustar datos de conexi√≥n online

‚ë£ La columna izquierda del √°rbol del proyecto muestra el estado de diagn√≥stico de los
objetos de hardware en el modo online mediante s√≠mbolos.

‚ë§ La columna derecha del √°rbol del proyecto muestra el estado de comparaci√≥n de los

‚ë•

objetos de software en el modo online mediante s√≠mbolos. Se ejecuta una comparaci√≥n
autom√°tica entre el estado online y offline. Las diferencias entre los objetos online y
offline tambi√©n se marcan con s√≠mbolos.
El √°rea "Diagn√≥stico > Informaci√≥n del dispositivo" aparece en primer plano en la ven‚Äê
tana de inspecci√≥n.

Corte de la conexi√≥n online
El modo online y su visualizaci√≥n se mantienen mientras haya como m√≠nimo un dispositivo
conectado online. Si la conexi√≥n online se corta en uno o varios dispositivos, el TIA Portal se
mantiene en modo online. La representaci√≥n del TIA Portal no cambia al modo offline hasta
que ya no queda ninguna conexi√≥n online con los dispositivos.

Conexi√≥n online a trav√©s del TIA Portal Cloud Connector
Si utiliza el TIA Portal en un entorno virtual existe la posibilidad de establecer una conexi√≥n
online con el hardware SIMATIC conectado a un dispositivo de usuario a trav√©s del TIA Portal
Cloud Connector. Si la conexi√≥n online se establece a trav√©s del TIA Portal Cloud Connector,
en la barra de estado se muestra el siguiente s√≠mbolo:

Encontrar√° instrucciones para el uso del TIA Portal en un entorno virtual (Private Cloud) en el
soporte de datos de instalaci√≥n, en el directorio "Documents\Readme\<directorio de idioma".
Abra aqu√≠ el documento PDF "TIAPortalCloudConnectorHowTo<Identificador de idioma>.pdf".

Consulte tambi√©n
Informaci√≥n general sobre el modo online (P√°gina 13)

3.3

Preajustar datos de conexi√≥n online
Si utiliza preferentemente una interfaz de red determinada de su PG o PC para establecer una
conexi√≥n online, la puede ajustar previamente. De ese modo, la v√≠a de conexi√≥n especificada
ya aparecer√° seleccionada en los cuadros de di√°logo para la conexi√≥n online.

Procedimiento
Para definir la v√≠a de conexi√≥n est√°ndar, proceda del siguiente modo:
1. Elija el comando "Configuraci√≥n" del men√∫ "Opciones".
Se abren los ajustes del TIA Portal.
2. Seleccione la entrada "Online y diagn√≥stico" en la navegaci√≥n local.

16

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Conectar dispositivos online
3.4 Establecer o modificar conexi√≥n online
3. En la secci√≥n "V√≠a de conexi√≥n predeterminada para el acceso online" establezca el tipo
para la interfaz PG/PC y la interfaz en s√≠.
4. Active la casilla de verificaci√≥n "Utilizar la v√≠a de conexi√≥n predeterminada para el acceso
online".

Consulte tambi√©n
Establecer o modificar conexi√≥n online (P√°gina 17)
Mostrar nodos accesibles (P√°gina 9)
Accesos online (P√°gina 33)

3.4

Establecer o modificar conexi√≥n online
Para aprovechar las funciones online de un dispositivo, en el primer intento de conexi√≥n debe
definirse la v√≠a de conexi√≥n.

Requisitos
Hay instalada por lo menos una interfaz PG/PC que, a su vez, est√° conectada f√≠sicamente con
un dispositivo (p. ej. con un cable Ethernet). Otra alternativa consiste en establecer conexiones
online virtuales mediante PLCSIM.

Procedimiento
Para establecer o modificar una conexi√≥n online, proceda del siguiente modo:
1. Seleccione en el √°rbol del proyecto uno o varios dispositivos para la conexi√≥n online.
2. Elija el comando "Establecer conexi√≥n online" del men√∫ "Online".
‚Äì Si ya se hab√≠a establecido antes una conexi√≥n online con el dispositivo, la conexi√≥n
online se establece autom√°ticamente a trav√©s de la v√≠a de conexi√≥n definida
previamente.
‚Äì Si hasta entonces no se hab√≠a establecido ninguna conexi√≥n o si la direcci√≥n del
dispositivo no est√° en la misma subred que el dispositivo PG/PC, aparecer√° el cuadro
de di√°logo "Establecer conexi√≥n online".
Si desea modificar una v√≠a de conexi√≥n definida, seleccione en su lugar el comando
"Conexi√≥n online avanzada" del men√∫ "Online". En este caso se abre de nuevo el cuadro
de di√°logo "Establecer conexi√≥n online".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

17

Conectar dispositivos online
3.4 Establecer o modificar conexi√≥n online
3. Elija la v√≠a de conexi√≥n:
‚Äì Seleccione el tipo de interfaz en la lista desplegable "Tipo de interfaz PG/PC".
‚Äì Seleccione la interfaz de la programadora o el PC en la lista desplegable "Interfaz PG/
PC".
La selecci√≥n no es necesaria si ya se ha especificado una interfaz PG/PC en la
configuraci√≥n.
‚Äì En la lista desplegable "Conexi√≥n con interfaz/subred", seleccione la interfaz o la subred
para la conexi√≥n. Si no hay ning√∫n gateway S7 interconectado, seleccione una conexi√≥n
directa. Seleccione la subred adecuada para la conexi√≥n con la programadora o el PC
si es posible acceder al dispositivo a trav√©s de un gateway S7. Seleccione la entrada
"Probar todas las interfaces" si el dispositivo dispone de varias interfaces y no se sabe
la interfaz a trav√©s de la cual est√° conectado con la programadora o el PC.
Si se ha seleccionado una subred MPI o Profibus, en este momento se aplicar√°n a la
interfaz PG/PC los par√°metros configurados para el bus.
‚Äì Si el dispositivo es accesible mediante una pasarela, elija en la lista desplegable "Primer
gateway" la pasarela que interconecta las subredes en cuesti√≥n.
4. Opcionalmente: si no es posible acceder a ning√∫n dispositivo a trav√©s de la v√≠a de conexi√≥n
seleccionada, la conexi√≥n entre la programadora o el PC y el dispositivo se representar√° en
forma de l√≠nea discontinua. Tal es el caso, por ejemplo, cuando el dispositivo se conecta
con la red mediante un router NAT.
Para visualizar todos los dispositivos activados y conectados a una interfaz de la PG o el
PC, seleccione la entrada "Mostrar dispositivos accesibles" y vuelva a hacer clic en "Iniciar
b√∫squeda".
5. Opcionalmente: Para acceder al dispositivo a pesar de que la subred sea diferente, existen
dos posibilidades: En redes administrativas, utilice ambas posibilidades solo tras consultar
al administrador.
‚Äì En Windows, asigne una direcci√≥n IP est√°tica a la interfaz PG/PC.
‚Äì Al crear una conexi√≥n online, a la interfaz de la programadora o del PC se le asigna
temporalmente otra direcci√≥n IP, que se encuentra en la misma subred que el
dispositivo. Haga clic en "Conectar" y confirme la pregunta que se efect√∫a a
continuaci√≥n.
6. Haga clic en el bot√≥n "Iniciar b√∫squeda".
En la tabla de dispositivos de destino se muestran los dispositivos accesibles a trav√©s de
la v√≠a de conexi√≥n configurada. En el gr√°fico de la parte izquierda la conexi√≥n se representa
en forma de l√≠nea continua.
7. Opcionalmente: realice un test de intermitencia. En el lado izquierdo del gr√°fico, active la
casilla de verificaci√≥n "Parpadear LED". Con el test de intermitencia se comprueba si se ha
seleccionado el dispositivo correcto. No todos los dispositivos soportan el test de
intermitencia.
8. Seleccione el dispositivo de destino en la tabla y confirme la selecci√≥n con "Conectar".
Se establece la conexi√≥n online con el dispositivo de destino seleccionado.

18

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Conectar dispositivos online
3.4 Establecer o modificar conexi√≥n online

Resultado
Una vez establecida la conexi√≥n online, las barras de t√≠tulo de los editores aparecen en color
naranja. Adem√°s, en la barra de t√≠tulo de un editor y en la barra de estado se visualizan sendos
indicadores de progreso en color naranja. Los s√≠mbolos de estado en el √°rbol del proyecto
muestran la diferencia entre los objetos disponibles online y offline.
La v√≠a de conexi√≥n configurada se guarda para intentos de conexi√≥n futuros.
Si la direcci√≥n PG/PC se asigna din√°micamente, el cuadro de di√°logo volver√° a aparecer
cuando se haya reiniciado el equipo. En ese caso ser√° necesario crear la conexi√≥n
nuevamente.
Nota
Deshacer acciones
Despu√©s de establecer una conexi√≥n online no es posible deshacer acciones.
Nota
Uso de conexiones directas o subredes
La conexi√≥n online entre PG/PC y dispositivos conectados es posible mediante una conexi√≥n
directa o a trav√©s de una subred.
No es posible conectar simult√°neamente los dispositivos a trav√©s de diferentes subredes si
est√°n conectados f√≠sicamente a trav√©s de la misma interfaz. Las conexiones simult√°neas a
diferentes subredes solo son posibles si se utilizan conexiones enrutadas.
No es posible conectar simult√°neamente dispositivos a trav√©s de una subred y mediante
conexiones directas a trav√©s de la misma interfaz.

Consulte tambi√©n
Preajustar datos de conexi√≥n online (P√°gina 16)
Deshacer la conexi√≥n online (P√°gina 20)
Conexi√≥n online con varios dispositivos (P√°gina 20)
Vista en el modo online (P√°gina 15)
Uso de direcciones IP temporales (P√°gina 40)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

19

Conectar dispositivos online
3.6 Conexi√≥n online con varios dispositivos

3.5

Deshacer la conexi√≥n online

Procedimiento
Para deshacer una conexi√≥n online existente, proceda del siguiente modo:
1. En el √°rbol del proyecto, seleccione el dispositivo del que desea deshacer la conexi√≥n
online.
2. Elija el comando "Deshacer conexi√≥n online" del men√∫ "Online".
Se deshace la conexi√≥n online.
Nota
Deshacer acciones
Despu√©s de deshacer una conexi√≥n online no es posible deshacer acciones.

Consulte tambi√©n
Establecer o modificar conexi√≥n online (P√°gina 17)

3.6

Conexi√≥n online con varios dispositivos
Es posible establecer una conexi√≥n online con varios dispositivos a la vez sin tener que
seleccionar previamente los diferentes dispositivos en el √°rbol del proyecto o en la vista de
redes.

Requisitos
‚óè No puede haber ning√∫n dispositivo seleccionado.
‚óè Hay instalada por lo menos una interfaz PG/PC que, a su vez, est√° conectada f√≠sicamente
con un dispositivo (p. ej. con un cable Ethernet). Otra alternativa consiste en establecer una
conexi√≥n online virtual mediante PLCSIM, o bien crear una conexi√≥n remota.

Procedimiento
Para establecer una conexi√≥n online con varios dispositivos a la vez, proceda del siguiente
modo:
1. Seleccione el proyecto en el √°rbol del proyecto.
2. Elija el comando "Establecer conexi√≥n online" del men√∫ "Online".
Se abrir√° el cuadro de di√°logo "Seleccionar dispositivo para establecer la conexi√≥n online"
con una tabla de todos los dispositivos disponibles.
3. En la columna "Conexi√≥n online" seleccione los dispositivos con los que desea establecer
una conexi√≥n online.
4. Haga clic en el bot√≥n "Establecer conexi√≥n online".

20

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Conectar dispositivos online
3.7 Deshacer conexiones online de varios dispositivos

Resultado
Se establece una conexi√≥n con todos los dispositivos seleccionados sin m√°s consulta, siempre
que previamente haya existido alguna conexi√≥n con los dispositivos seleccionados. Si hasta
ahora no se hab√≠a establecido ninguna conexi√≥n online, aparecer√° el cuadro de di√°logo
"Establecer conexi√≥n online". En este caso, configure primero la conexi√≥n online tal como se
describe en el cap√≠tulo "Establecer y deshacer una conexi√≥n online (P√°gina 17)".

Consulte tambi√©n
Establecer o modificar conexi√≥n online (P√°gina 17)
Uso de direcciones IP temporales (P√°gina 40)

3.7

Deshacer conexiones online de varios dispositivos
Es posible deshacer a la vez las conexiones online existentes con varios dispositivos sin tener
que seleccionar previamente los diferentes dispositivos en el √°rbol del proyecto o en la vista de
redes.

Requisitos
‚óè No hay ning√∫n dispositivo seleccionado.
‚óè Existe una conexi√≥n online como m√≠nimo para un dispositivo.

Procedimiento
Para deshacer simult√°neamente las conexiones online con varios dispositivos, proceda del
siguiente modo:
1. Elija el comando "Deshacer conexi√≥n online" del men√∫ "Online".
Se abre el di√°logo "Seleccionar dispositivos" con una tabla de todos los dispositivos
disponibles.
2. En la columna "Deshacer conexi√≥n online", seleccione los dispositivos para los que desea
deshacer la conexi√≥n online.
3. Haga clic en el bot√≥n "Deshacer conexi√≥n online".

Resultado
Se deshace la conexi√≥n online entre todos los dispositivos seleccionados.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

21

Conectar dispositivos online
3.7 Deshacer conexiones online de varios dispositivos

22

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Creaci√≥n de una copia de seguridad de una CPU S7
4.1

4

Posibles copias de seguridad para las CPUs S7
Con el paso del tiempo realizar√° en su instalaci√≥n de automatizaci√≥n algunas modificaciones,
p. ej. agregar dispositivos nuevos, cambiar dispositivos existentes o adaptar el programa de
usuario. Si los cambios implican procedimientos indeseados, es posible restablecer el estado
anterior de la instalaci√≥n de automatizaci√≥n. Para seguir procediendo sin problemas despu√©s
de cambiar alg√∫n dispositivo se pueden aplicar los mismos programas y valores existentes.
Las CPUs ofrecen diferentes posibilidades de realizar la copia de seguridad y restablecer la
configuraci√≥n hardware y el software.

Posibilidades de copia de seguridad
La tabla siguiente muestra un resumen de las posibilidades de copia de seguridad y
restablecimiento de las CPU S7:
Instant√°nea de los va‚Äê
lores de observaci√≥n
Caso de aplicaci√≥n

Carga de dispositivo
(software)

Restablecimiento de
Carga en el proyecto
un estado determinado de bloques existentes
de un bloque de datos. en una CPU.
Los valores actuales
de bloques de datos,
incluido el sello de
tiempo, se aplican al
proyecto.

Carga del dispositivo
como estaci√≥n nueva
(hardware y software)

Cargar copia de segu‚Äê
ridad de un dispositivo
online

Carga de la configura‚Äê
ci√≥n hardware y del
software desde un dis‚Äê
positivo en el proyecto.

Creaci√≥n de una copia
de seguridad completa
de una CPU como pun‚Äê
to de restablecimiento.
La copia de seguridad
es coherente y no pue‚Äê
de modificarse ni abrir‚Äê
se.

Requisitos

La CPU ya ha sido
creada en el proyecto.
Los bloques de datos
online y offline deben
ser id√©nticos.

La CPU est√° creada en El dispositivo est√° dis‚Äê el proyecto.
ponible en el cat√°logo
de hardware del TIA
Portal. En su caso es‚Äê
t√°n instalados los HSP
y los archivos GSD ne‚Äê
cesarios.

Posible en el estado
operativo

RUN, STOP

RUN, STOP

RUN, STOP

STOP

Posible para CPU F

S√≠

S√≠

S√≠

S√≠

Copia de seguridad
editable

S√≠

S√≠

S√≠

No

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

23

Creaci√≥n de una copia de seguridad de una CPU S7
4.1 Posibles copias de seguridad para las CPUs S7

Contenidos de la copia de seguridad
La tabla siguiente muestra las posibilidades que existen de cargar datos y hacer una copia de
seguridad de los mismos:
Instant√°nea de los va‚Äê
lores de observaci√≥n

Carga de dispositivo
(software)

Carga del dispositivo
como estaci√≥n nueva
(hardware y software)1

Cargar copia de segu‚Äê
ridad de un dispositivo
online (backup)2

S√≠

No

No

No

No

No

No

S√≠

Bloques de software

No

S√≠

S√≠

S√≠

Variables PLC (nom‚Äê
bre de variable y de
constante)

No

S√≠ (en CPU S7-1200 y
S7-1500)

S√≠ (en CPU S7-1200 y
S7-1500)

S√≠

Objetos tecnol√≥gicos

No

S√≠

S√≠

S√≠

Configuraci√≥n Trace

No

No

No

S√≠

Configuraci√≥n hardwa‚Äê No
re

No

S√≠

S√≠

Tablas de observaci√≥n
(servidor web)

No

S√≠

S√≠

Datos locales, marcas, S√≠
temporizadores, conta‚Äê
dores y memoria ima‚Äê
gen de proceso

No

No

S√≠

Ficheros y recetas
(PLC)

No

No

No

S√≠

Datos generales en la No
Memory Card SIMA‚Äê
TIC, p. ej. ayuda de blo‚Äê
ques de programa o ar‚Äê
chivos GSD

No

No

S√≠

Bloque de datos
Valor actual copiado
en instant√°nea3
Datos remanentes
Bloque de datos y mar‚Äê
ca

No

1

Depende de la versi√≥n de TIA Portal utilizada para cargar. Solo puede volver a leerse con la versi√≥n de producto con la que
se carg√≥.

2

El tipo de copia de seguridad "Cargar backup del dispositivo online" realiza una copia de seguridad de los valores actuales
de las variables ajustadas como remanentes. Para asegurar la coherencia de los datos remanentes, es preciso desactivar
todos los accesos de escritura a los datos remanentes durante la copia de seguridad, para evitar p. ej. accesos de escritura
HMI durante dicho proceso.

3

Los valores actuales de los datos no remanentes se ajustan a los valores de arranque cuando cambia el estado operativo
de STOP a RUN. Cuando se realiza una copia de seguridad de la CPU solo se crea una copia de los valores de arranque
de los datos no remanentes.

Particularidades de la copia de seguridad de valores actuales
El tipo de copia de seguridad "Cargar backup del dispositivo online" copia los valores actuales
de las variables ajustadas como remanentes. Para asegurar la coherencia de los datos
remanentes, es preciso desactivar todos los accesos de escritura a los datos remanentes
durante la copia de seguridad.

24

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Creaci√≥n de una copia de seguridad de una CPU S7
4.2 Creaci√≥n de una copia de seguridad de CPU S7-300 y S7-400

Consulte tambi√©n
Crear una copia de seguridad de un dispositivo (P√°gina 25)
Crear una copia de seguridad de un dispositivo (P√°gina 28)

4.2

Creaci√≥n de una copia de seguridad de CPU S7-300 y S7-400

4.2.1

Crear una copia de seguridad de un dispositivo

Copia de seguridad de la configuraci√≥n de software y hardware de una CPU S7-300/400
Si ya ha cargado una configuraci√≥n en una CPU S7-300/400 puede ser conveniente hacer una
copia de seguridad. Posiblemente haya modificado la configuraci√≥n y desee probar la nueva
configuraci√≥n. Antes de cargar la nueva configuraci√≥n en la CPU, cree una copia de seguridad
del estado actual del dispositivo, que le permitir√° restablecer la configuraci√≥n actual m√°s
adelante. La copia de seguridad se realiza con los valores actuales de la CPU. En las CPU
S7-400 con funci√≥n de seguridad positiva se hacen copias de seguridad de los valores
predeterminados.
Puede crear tantas copias de seguridad como desee para guardar diferentes configuraciones
para una CPU. El nombre de las copias de seguridad incluye el nombre de la CPU y la hora y
fecha de la copia. La copia de seguridad est√° en la carpeta "Backups online" de la CPU en el
√°rbol del proyecto.
La figura siguiente muestra a modo de ejemplo una CPU S7 de la que se han realizado dos
copias de seguridad:

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

25

Creaci√≥n de una copia de seguridad de una CPU S7
4.2 Creaci√≥n de una copia de seguridad de CPU S7-300 y S7-400

Consulte tambi√©n
Posibles copias de seguridad para las CPUs S7 (P√°gina 23)

4.2.2

Restablecer el software y la configuraci√≥n de hardware de un dispositivo
Si previamente ha realizado una copia de seguridad de la configuraci√≥n de un dispositivo, es
posible volver a transferir dicha copia al dispositivo. En este caso, en el dispositivo se
restablece la configuraci√≥n guardada.

Requisitos
El dispositivo debe estar configurado y debe haberse guardado una copia de seguridad del
dispositivo en el proyecto.

26

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Creaci√≥n de una copia de seguridad de una CPU S7
4.2 Creaci√≥n de una copia de seguridad de CPU S7-300 y S7-400

Procedimiento
Para restablecer en un dispositivo un estado anterior de software y hardware, proceda del
siguiente modo:
1. Abra la carpeta del dispositivo en el √°rbol del proyecto para visualizar los objetos
subordinados.
2. Abra la carpeta "Backups online".
3. Seleccione la copia de seguridad que desee restablecer.
4. En el men√∫ "Online" seleccione el comando "Cargar en dispositivo".
‚Äì Si ya ha establecido una conexi√≥n online, aparecer√° el cuadro de di√°logo "Cargar vista
preliminar". En este cuadro de di√°logo se visualizan avisos y se proponen las acciones
necesarias para la carga.
‚Äì Si hasta ahora no ha establecido ninguna conexi√≥n online, aparecer√° el cuadro de
di√°logo "Carga avanzada" y primero deber√° seleccionar las interfaces a trav√©s de las
que va a establecer la conexi√≥n online con el dispositivo.
Consulte tambi√©n: Establecer y deshacer una conexi√≥n online
5. Verifique los mensajes en el cuadro de di√°logo "Cargar vista preliminar" y, dado el caso,
active las acciones en la columna "Acci√≥n".
Nota
Si lleva a cabo las acciones propuestas con la instalaci√≥n en marcha, pueden producirse
graves da√±os materiales y personales en caso de fallos de funcionamiento o errores del
programa.
6. El bot√≥n "Cargar" se activar√° tan pronto como sea posible la carga.
7. Haga clic en el bot√≥n "Cargar".
La copia de seguridad se transfiere al dispositivo y se restablece el estado guardado. A
continuaci√≥n se abre el cuadro de di√°logo "Cargar resultados". Este cuadro de di√°logo
permite comprobar si la carga se ha realizado correctamente y, en caso necesario,
seleccionar acciones adicionales.
8. Haga clic en el bot√≥n "Finalizar".

4.2.3

Copia de seguridad de la configuraci√≥n de un dispositivo
Puede hacer una copia de seguridad de la configuraci√≥n de una CPU S7-300/400 en el TIA
Portal. Esto permite cargar y probar sin riesgos una configuraci√≥n nueva en un dispositivo. En
caso necesario, es posible restablecer la configuraci√≥n original de la CPU.

Requisitos
‚óè La CPU ya est√° creada en el proyecto.
‚óè La CPU est√° conectada online. Si todav√≠a no hay ninguna conexi√≥n online, al crear la copia
de seguridad (backup) se establece una conexi√≥n online.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

27

Creaci√≥n de una copia de seguridad de una CPU S7
4.3 Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500

Procedimiento
Para crear una copia de seguridad de la configuraci√≥n actual de una CPU, proceda de la
siguiente manera:
1. Seleccione la CPU en el √°rbol del proyecto.
2. Elija el comando "Cargar backup del dispositivo online" del men√∫ "Online".

Resultado:
Se crea una copia de seguridad de toda la configuraci√≥n de hardware y del software. La copia
de seguridad se almacena en la carpeta "Nombre de la CPU > Backups online" del √°rbol del
proyecto. La copia de seguridad lleva el nombre de la CPU con la hora y la fecha de la copia
de seguridad. Puede cambiar el nombre de la copia de seguridad; sin embargo, no se puede
llevar a cabo ninguna modificaci√≥n en los contenidos de dicha copia.

4.3

Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500

4.3.1

Crear una copia de seguridad de un dispositivo

Crear una copia de seguridad del software y la configuraci√≥n hardware de una CPU
Si ya ha cargado una configuraci√≥n en una CPU S7-1200 o S7-1500, puede ser √∫til hacer una
copia de seguridad de ella. Posiblemente haya modificado la configuraci√≥n y desee probar la
nueva configuraci√≥n. Antes de cargar la configuraci√≥n nueva en la CPU, cree una copia de
seguridad del estado actual del dispositivo. La configuraci√≥n actual se puede restablecer
posteriormente.
Puede crear tantas copias de seguridad como desee para guardar diferentes configuraciones
para una CPU. El nombre de las copias de seguridad incluye el nombre de la CPU y la hora y
fecha de la copia. La copia de seguridad est√° en la carpeta "Backups online" de la CPU en el
√°rbol del proyecto.
La figura siguiente muestra a modo de ejemplo una CPU S7 de la que se han realizado dos
copias de seguridad:

28

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Creaci√≥n de una copia de seguridad de una CPU S7
4.3 Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500

Alcance de la copia de seguridad
La copia de seguridad incluye todos los datos necesarios para restablecer un estado de
configuraci√≥n determinado de una CPU. Se crea una copia de seguridad de, por ejemplo, los
siguientes datos:
‚óè El contenido de la Memory Card
‚óè √Åreas de memoria remanentes, p. ej. de bloques de datos, contadores y marcas
‚óè Otros contenidos de la memoria remanentes, como p. ej. par√°metros de direcciones IP
La copia de seguridad se realiza con los valores actuales de la CPU. Las entradas del b√∫fer de
diagn√≥stico no se incluyen en la copia de seguridad. En las CPU S7-1500 no se copia la hora
actual.

Consulte tambi√©n
Posibles copias de seguridad para las CPUs S7 (P√°gina 23)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

29

Creaci√≥n de una copia de seguridad de una CPU S7
4.3 Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500

4.3.2

Copia de seguridad de la configuraci√≥n de un dispositivo
Puede hacer una copia de seguridad de la configuraci√≥n de una CPU en el TIA Portal. Esto
permite cargar y probar sin riesgos una configuraci√≥n nueva en un dispositivo. En caso
necesario, es posible restablecer la configuraci√≥n original de la CPU.
Mientras se crea la copia de seguridad la CPU pasar√° a STOP. Si para la CPU hay configurado
un nivel de acceso, necesitar√° la contrase√±a para el acceso de lectura a la CPU.

Requisitos
‚óè La CPU ya est√° creada en el proyecto.
‚óè El dispositivo est√° conectado a la PG/al PC directamente a trav√©s de la interfaz PROFINET
de la CPU. No se soportan interfaces PROFIBUS de la CPU ni interfaces de CM/CP.
‚óè La CPU est√° conectada online. Si todav√≠a no hay ninguna conexi√≥n online, al crear la copia
de seguridad (backup) se establece una conexi√≥n online.
‚óè La CPU est√° en estado operativo "STOP".

Procedimiento
Para crear una copia de seguridad de la configuraci√≥n actual de una CPU, proceda de la
siguiente manera:
1. Seleccione la CPU en el √°rbol del proyecto.
2. Elija el comando "Cargar backup del dispositivo online" del men√∫ "Online".
Dado el caso, introduzca y confirme la contrase√±a para el acceso de lectura a la CPU para
que la CPU pase al estado operativo "STOP".

Resultado:
Se crea una copia de seguridad de toda la configuraci√≥n de hardware y del software. La copia
de seguridad se almacena en la carpeta "Nombre de la CPU > Backups online" del √°rbol del
proyecto. La copia de seguridad lleva el nombre de la CPU con la hora y la fecha de la copia
de seguridad. Puede cambiar el nombre de la copia de seguridad; sin embargo, no se puede
llevar a cabo ninguna modificaci√≥n en los contenidos de dicha copia.
En el b√∫fer de diagn√≥stico de la CPU se crea una entrada para cada copia de seguridad que
se cree.

Consulte tambi√©n
Restablecimiento de la configuraci√≥n de un dispositivo (P√°gina 30)

4.3.3

Restablecimiento de la configuraci√≥n de un dispositivo
Si previamente ha realizado una copia de seguridad de la configuraci√≥n de un dispositivo, es
posible volver a transferir dicha copia al dispositivo. En este caso, en el dispositivo se
restablece la configuraci√≥n guardada.

30

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Creaci√≥n de una copia de seguridad de una CPU S7
4.3 Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500
Mientras se carga una copia de seguridad la CPU pasa a STOP. Si para la CPU hay
configurado un nivel de acceso, necesitar√° la contrase√±a para el acceso de escritura a la CPU.
ADVERTENCIA
Carga de copias de seguridad con contenido desconocido
Si durante el funcionamiento de la instalaci√≥n se activan las acciones propuestas de carga,
es posible que surjan aver√≠as de funcionamiento o errores de programa con da√±os materiales
y personales graves.
Aseg√∫rese de que los contenidos de la copia de seguridad no incluyen ninguna configuraci√≥n
que implique un comportamiento imprevisto de la instalaci√≥n.

Requisitos
‚óè El dispositivo est√° configurado y se ha guardado una copia de seguridad del dispositivo en
el proyecto.
‚óè El dispositivo est√° conectado a la PG/al PC directamente a trav√©s de la interfaz PROFINET
de la CPU.
‚óè La CPU est√° en estado operativo "STOP".
‚óè Dispone de la contrase√±a para el acceso de lectura a la CPU, si se ha configurado un nivel
de acceso.

Procedimiento
Para restablecer en un dispositivo un estado anterior de software y hardware, proceda del
siguiente modo:
1. Abra la carpeta del dispositivo en el √°rbol del proyecto para visualizar los objetos
subordinados.
2. Abra la carpeta "Backups online".
3. Seleccione la copia de seguridad que desee restablecer.
4. En el men√∫ "Online" seleccione el comando "Cargar en dispositivo".
‚Äì Si ya ha establecido una conexi√≥n online, aparecer√° el cuadro de di√°logo "Cargar vista
preliminar". En este cuadro de di√°logo se visualizan avisos y se proponen las acciones
necesarias para la carga.
‚Äì Si hasta ahora no ha establecido ninguna conexi√≥n online, aparecer√° el cuadro de
di√°logo "Carga avanzada" y primero deber√° seleccionar las interfaces a trav√©s de las
que va a establecer la conexi√≥n online con el dispositivo.
Consulte tambi√©n: AUTOHOTSPOT
5. Verifique los mensajes en el cuadro de di√°logo "Cargar vista preliminar" y, dado el caso,
active las acciones en la columna "Acci√≥n".
6. El bot√≥n "Cargar" se activar√° tan pronto como sea posible la carga.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

31

Creaci√≥n de una copia de seguridad de una CPU S7
4.3 Creaci√≥n de una copia de seguridad de CPU S7-1200 y S7-1500
7. Haga clic en el bot√≥n "Cargar".
La copia de seguridad se transfiere al dispositivo y se restablece el estado guardado. A
continuaci√≥n se abre el cuadro de di√°logo "Cargar resultados". Este cuadro de di√°logo
permite comprobar si la carga se ha realizado correctamente y, en caso necesario,
seleccionar acciones adicionales.
8. Haga clic en el bot√≥n "Finalizar".
Dado el caso, introduzca y confirme la contrase√±a para el acceso de lectura a la CPU para
que la CPU pase al estado operativo "STOP".
El contenido de la copia de seguridad se restablece en la CPU. A continuaci√≥n la CPU se
reinicia.

32

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

5

Configurar interfaces PG/PC
5.1

Accesos online

Acceso online del proyecto
En la carpeta "Accesos online" del √°rbol del proyecto est√°n todas las interfaces activas de la
PG/el PC. Todos los s√≠mbolos de interfaz proporcionan informaci√≥n sobre el estado
correspondiente. Se pueden visualizar los dispositivos accesibles y, desde el men√∫ contextual,
las propiedades de una interfaz, que adem√°s pueden modificarse.
La siguiente imagen muestra la carpeta "Accesos online" en el √°rbol del proyecto:







‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§

‚ë•

Carpeta "Accesos online" en el √°rbol del proyecto
En la carpeta "Accesos online" se pueden visualizar todas las interfaces instaladas en la PG/el
PC.
Mostrar/ocultar interfaces
La funci√≥n "Mostrar/ocultar interfaces" permite mostrar y ocultar diferentes interfaces.
Indicador de estado de las interfaces
El estado actual de una interfaz se indica mediante un s√≠mbolo situado a la derecha del nombre.
El significado de los s√≠mbolos se explica en los respectivos tooltips.
Actualizaci√≥n de la lista de los dispositivos accesibles.
Esta funci√≥n est√° disponible para cualquier interfaz de hardware de la PG/del PC. Las interfaces
de software, como por ejemplo, una conexi√≥n remota, no disponen de esta funci√≥n.
Mostrar m√°s informaci√≥n
Esta funci√≥n est√° disponible para cualquier interfaz de hardware de la PG/del PC despu√©s de
haber ejecutado la funci√≥n "Actualizar dispositivos accesibles". Encontrar√° m√°s informaci√≥n en
la vista detallada de la pantalla general.
Dispositivos que est√°n conectados con la programadora o el PC a trav√©s de la interfaz corres‚Äê
pondiente
El tipo de dispositivo en cuesti√≥n y tambi√©n su estado se muestran con ayuda del s√≠mbolo que
aparece delante.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

33

Configurar interfaces PG/PC
5.1 Accesos online

Mostrar o actualizar los dispositivos accesibles
Las siguientes opciones est√°n disponibles para mostrar los dispositivos accesibles online en
la PG/el PC:
‚óè Mostrar los dispositivos accesibles desde una sola interfaz de la PG/del PC en el √°rbol del
proyecto. Adem√°s, en el √°rbol del proyecto es posible visualizar informaci√≥n adicional sobre
los distintos dispositivos accesibles.
‚óè Mostrar en una lista los dispositivos accesibles de todas las interfaces.
Consulte tambi√©n:AUTOHOTSPOT

Vista general de los s√≠mbolos de los dispositivos accesibles
Los dispositivos accesibles se marcan con un s√≠mbolo conforme a su tipo y a su estado. A
continuaci√≥n se muestra una vista general de todos los s√≠mbolos y su significado.
S√≠mbolo para m√≥dulos no identificables
Este s√≠mbolo se mostrar√° siempre que la identificaci√≥n de un m√≥dulo a√∫n no haya finalizado,
o bien cuando la identificaci√≥n de un m√≥dulo no se haya realizado correctamente, por ejemplo,
porque no se han podido leer los datos online necesarios.
S√≠mbolo para los siguientes tipos de dispositivos:
‚óè PLC
‚óè Dispositivos SIMOCODE pro
‚óè Enlaces IE/PB
‚óè CP de sistemas PC
‚óè M√≥dulos de cabecera SCALANCE
‚óè CP S7-300 y S7-400
‚óè Dispositivos PROFINET IO y CP PROFINET
‚óè M√≥dulos SCALANCE y gateways que no han podido ser identificados
Dispositivos PROFINET IO, enc√≥ders, aparellaje, sensores y sistemas de identificaci√≥n que
han sido sustituidos por dispositivos similares porque dichos dispositivos no pudieron ser
identificados
S√≠mbolo para los siguientes tipos de dispositivos:
‚óè Dispositivos HMI
‚óè Dispositivos PROFINET IO del tipo HMI, si estos no pudieron ser identificados y, por eso,
fueron sustituidos por un dispositivo similar
Dispositivos PROFINET IO del tipo accionamiento que no pudieron ser identificados y, por eso,
fueron sustituidos por un dispositivo similar
Dispositivos PROFINET IO del tipo Development Kit y componentes de red que no pudieron
ser identificados y, por eso, fueron sustituidos por un dispositivo similar
Dispositivos PROFINET IO del tipo TeleService Adapter que no pudieron ser identificados y,
por eso, fueron sustituidos por un dispositivo similar

Consulte tambi√©n
Mostrar y modificar las propiedades de una interfaz (P√°gina 36)

34

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.3 Mostrar u ocultar interfaces

5.2

Principios b√°sicos para parametrizar la interfaz PG/PC

Posibilidades de conexi√≥n con sistemas de destino
Si los dispositivos del proyecto est√°n conectados a trav√©s de subredes distintas, hay que
asignar a la interfaz PG/PC el acceso de red adecuado para poder establecer conexiones
online con los sistemas de destino. Se admiten autom√°ticamente las siguientes interfaces:
‚óè MPI
‚óè PROFIBUS
‚óè Industrial Ethernet (ISO y TCP/IP)
Las interfaces ofrecen seg√∫n el tipo distintas posibilidades de parametrizaci√≥n. En los
cap√≠tulos siguientes ver√° las posibilidades de parametrizaci√≥n que existen.
Nota
Tenga en cuenta que los cambios efectuados en los par√°metros de interfaz influyen
directamente en el sistema operativo y en la programadora o el PC. Por tanto, algunos
par√°metros s√≥lo pueden modificarse si se dispone de suficientes derechos de usuario.

Consulte tambi√©n
Parametrizar la interfaz Industrial Ethernet (P√°gina 37)
Parametrizar la interfaz MPI y PROFIBUS (P√°gina 41)

5.3

Mostrar u ocultar interfaces
Para tener una visi√≥n general m√°s clara, existe la posibilidad de ocultar diferentes interfaces
de la programadora o el PC en el √°rbol del proyecto y volver a mostrarlas en caso necesario.

Procedimiento
Para mostrar u ocultar interfaces individuales, proceda del siguiente modo:
1. Abra la carpeta "Accesos online" en el √°rbol del proyecto.
2. Haga doble clic en el icono "Mostrar/ocultar interfaces".
Se abre el cuadro de di√°logo "Mostrar/ocultar interfaces".
3. Active o desactive las interfaces deseadas en la columna "Mostrar en el √°rbol del proyecto".
4. Haga clic en el bot√≥n "Aplicar".
Los cambios se aplicar√°n. La vista de las interfaces se actualiza en la carpeta "Accesos
online".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

35

Configurar interfaces PG/PC
5.5 Agregar interfaces

5.4

Mostrar y modificar las propiedades de una interfaz

Introducci√≥n
Es posible visualizar las propiedades de toda interfaz y modificarlas en caso necesario (p. ej.
tipo de red, direcci√≥n y estado).

Procedimiento
Para abrir las propiedades, proceda del siguiente modo:
1. En el √°rbol del proyecto, haga clic con el bot√≥n derecho del rat√≥n en la interfaz deseada bajo
"Accesos online".
2. Elija el comando "Propiedades" del men√∫ contextual.
Se abre el di√°logo con las propiedades de la interfaz. La navegaci√≥n local se encuentra en
el lado izquierdo del di√°logo. En las distintas entradas de la navegaci√≥n local es posible
visualizar los par√°metros actuales y modificarlos en caso necesario.

5.5

Agregar interfaces
Despu√©s de la instalaci√≥n del TIA Portal, tiene la posibilidad de instalar otras interfaces.

Procedimiento
Para instalar una interfaz a posteriori y agregarla al TIA Portal, proceda del siguiente modo:
1. Instale o actualice los drivers en el sistema operativo, despu√©s de haber instalado las
interfaces en el lado del hardware.
2. Cierre el TIA Portal, en caso de que a√∫n est√© abierto.
3. Abra el Panel de control de Windows.
4. Abra la entrada "Ajustar interface PG/PC" en el Panel de control.
Se abre el di√°logo "Ajustar interface PG/PC".
5. Realice cambios, si es necesario, en la configuraci√≥n de interfaces y conf√≠rmelos con
"Aceptar". Haga clic en cualquier caso en el bot√≥n "Aceptar", aunque no haya realizado
ning√∫n cambio.
6. Reinicie el TIA Portal.

Resultado
La nueva interfaz instalada se muestra ahora en el √°rbol del proyecto, en la carpeta "Accesos
online".

36

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.6 Parametrizaci√≥n de la interfaz Ethernet

5.6

Parametrizaci√≥n de la interfaz Ethernet

5.6.1

Parametrizar la interfaz Industrial Ethernet

Posibilidades para parametrizar la interfaz Industrial Ethernet
Para parametrizar la interfaz Industrial Ethernet existen las siguientes posibilidades:
‚óè Par√°metros que predetermina el sistema operativo
La interfaz Industrial Ethernet dispone de par√°metros que se ajustan en el sistema
operativo y que son v√°lidos para todos los dispositivos conectados. Estos par√°metros s√≥lo
se visualizan, pero pueden modificarse en la configuraci√≥n de red del sistema operativo.
‚óè Par√°metros ajustables en el software
Nota
Tenga en cuenta que los cambios efectuados en los par√°metros de interfaz influyen
directamente en el sistema operativo y en la programadora o el PC. Por tanto, algunos
par√°metros s√≥lo pueden modificarse si se dispone de suficientes derechos de usuario.

Par√°metros de la interfaz Industrial Ethernet
La tabla siguiente ofrece una vista general de los par√°metros de la interfaz Industrial Ethernet
predeterminados por el sistema operativo y de los que el usuario puede modificar.
Par√°metros no modificables

Par√°metros ajustables

Direcci√≥n MAC

Fast Acknowledge en el acceso IE-PG y para TCP/
IP

Servidor DHCP activado/desactivado

Timeout en el acceso IE-PG y para TCP/IP

APIPA activado/desactivado

LLDP

Direcci√≥n IP

Direcciones IP temporales adicionales para la tar‚Äê
jeta de red

M√°scara de subred

-

Direcciones DNS

-

Direcciones DHCP

-

Consulte tambi√©n
Principios b√°sicos para parametrizar la interfaz PG/PC (P√°gina 35)
Visualizar los par√°metros del sistema operativo (P√°gina 38)
Conectar la interfaz PG/PC con una subred (P√°gina 38)
Parametrizar la interfaz Ethernet (P√°gina 39)
Uso de direcciones IP temporales (P√°gina 40)
Gestionar direcciones IP temporales (P√°gina 40)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

37

Configurar interfaces PG/PC
5.6 Parametrizaci√≥n de la interfaz Ethernet

5.6.2

Visualizar los par√°metros del sistema operativo
La interfaz Ethernet forma parte del sistema operativo. Por tanto, todos los par√°metros de la
tarjeta de red pueden modificarse en la configuraci√≥n de red del sistema operativo.
Es posible visualizar los siguientes par√°metros en el software:
‚óè Direcci√≥n f√≠sica de la tarjeta de red
‚óè Asignaci√≥n de la direcci√≥n IP por un servidor DHCP activada o desactivada
‚óè Asignaci√≥n de una direcci√≥n IP privada por el sistema operativo activada o desactivada
‚óè Direcci√≥n IP fija asignada actualmente
‚óè M√°scara de subred asignada
‚óè Direcciones DNS
‚óè Direcciones DHCP
Para obtener informaci√≥n sobre c√≥mo modificar los par√°metros, consulte la documentaci√≥n del
sistema operativo o de la tarjeta de red.

Visualizar los par√°metros actuales de la interfaz Ethernet
Para visualizar los par√°metros actuales de la interfaz Ethernet, proceda del siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.
3. Elija "Configuraciones > Industrial Ethernet" en la navegaci√≥n local.

Consulte tambi√©n
Parametrizar la interfaz Ethernet (P√°gina 39)

5.6.3

Conectar la interfaz PG/PC con una subred
Si ha creado varias subredes puede determinar con cu√°l de ellas debe conectarse la interfaz
Ethernet.

Procedimiento
Para seleccionar la subred con la que est√° conectada la interfaz Ethernet, proceda del
siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.

38

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.6 Parametrizaci√≥n de la interfaz Ethernet
3. En "General > Asignaci√≥n", seleccione la subred con la que desea conectar la interfaz
Ethernet de la PG/del PC de la lista desplegable "Conexi√≥n con subred".
4. Cierre el di√°logo con "Aceptar".

5.6.4

Parametrizar la interfaz Ethernet
Algunos de los par√°metros relacionados con el protocolo de red pueden adaptarse
directamente en el software.

Requisitos
Dispone de derechos de usuario suficientes.
Consulte tambi√©n: Influencia de los derechos de usuario.

Procedimiento
Para modificar los par√°metros relacionados con el protocolo de red, proceda del siguiente
modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.
3. Seleccione "Configuraciones > Acceso IE-PG" para adaptar los ajustes de protocolo
relativos a la administraci√≥n de red.
‚Äì Active la casilla de verificaci√≥n "Fast Acknowledge" para alcanzar tiempos de reacci√≥n
m√°s r√°pidos para paquetes de red peque√±os.
‚Äì En la lista desplegable "Timeout", seleccione el tiempo m√°ximo que puede transcurrir
hasta la detecci√≥n de un nodo.
4. Para activar el protocolo LLDP para determinar con mayor precisi√≥n la topolog√≠a de red,
active la casilla de verificaci√≥n "LLDP activo" en "Configuraciones > LLDP".
5. Seleccione "Configuraciones > TCP/IP" para adaptar el protocolo TCP/IP para el tr√°fico de
la red durante el servicio.
‚Äì Active la casilla de verificaci√≥n "Fast Acknowledge" para alcanzar tiempos de reacci√≥n
m√°s r√°pidos para paquetes de red peque√±os.
‚Äì En la lista desplegable "Timeout", seleccione el tiempo m√°ximo que puede transcurrir en
la comunicaci√≥n con un nodo hasta que se produzca un timeout.

Consulte tambi√©n
Visualizar los par√°metros del sistema operativo (P√°gina 38)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

39

Configurar interfaces PG/PC
5.6 Parametrizaci√≥n de la interfaz Ethernet

5.6.5

Uso de direcciones IP temporales

Agregar una direcci√≥n IP temporal
Si la direcci√≥n IP de un dispositivo se encuentra en una subred diferente a la de la tarjeta de
red, primero es preciso asignar a esta √∫ltima una direcci√≥n IP adicional con la misma direcci√≥n
de subred que la del dispositivo. Solo as√≠ se podr√° establecer la comunicaci√≥n entre el
dispositivo y la PG/el PC.
La asignaci√≥n de una direcci√≥n IP temporal adicional se propone autom√°ticamente si se desea
realizar una acci√≥n online y la direcci√≥n IP actual de la PG/del PC no se encuentra a√∫n en la
subred correcta.
La direcci√≥n IP asignada temporalmente es v√°lida hasta el siguiente rearranque de la PG/del
PC o hasta que se borre manualmente. Consulte tambi√©n: Gestionar direcciones IP
temporales (P√°gina 40)
Nota
Para poder asignar una direcci√≥n IP temporal es preciso disponer de derechos de usuario
suficientes.
Consulte tambi√©n: Influencia de los derechos de usuario

5.6.6

Gestionar direcciones IP temporales
Si la direcci√≥n IP de un dispositivo se encuentra en una subred diferente a la de la direcci√≥n IP
fija asignada actualmente a la tarjeta de red, se asigna temporalmente a √©sta √∫ltima una
direcci√≥n IP adecuada de la misma subred que el dispositivo.
Todas las direcciones asignadas temporalmente se pueden visualizar y borrar. Tenga en
cuenta que las direcciones IP asignadas manualmente en el sistema operativo no se muestran
en el TIA Portal.

Requisitos
Para borrar se requieren derechos de usuario suficientes.

Procedimiento
Para visualizar y borrar direcciones asignadas temporalmente, proceda del siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.
3. Elija "Configuraciones > Acceso IE-PG".
Aparece una tabla con las direcciones IP asignadas.
4. Haga clic en el bot√≥n de comando "Borrar direcciones IP espec√≠ficas del proyecto" para
borrar todas las direcciones IP de una sola vez.

40

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

5.6.7

Restablecimiento de la configuraci√≥n TCP/IP
Si se han realizado cambios en los ajustes del protocolo TCP/IP, existe la posibilidad de
restablecer los valores predeterminados.

Procedimiento
Para restablecer los valores predeterminados de la configuraci√≥n TCP/IP, proceda del
siguiente modo:
1. Seleccione la interfaz Ethernet en "Accesos online" en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.
3. Elija "Configuraciones > TCP/IP".
4. Haga clic en el bot√≥n "Est√°ndar" para restablecer todos los ajustes.

5.7

Parametrizar la interfaz MPI y PROFIBUS

5.7.1

Parametrizar la interfaz MPI y PROFIBUS

Posibilidades para parametrizar la interfaz MPI y PROFIBUS
Para parametrizar la interfaz MPI y PROFIBUS existen las posibilidades siguientes:
‚óè Configuraci√≥n autom√°tica: es posible detectar autom√°ticamente si un dispositivo est√°
conectado con la interfaz PG/PC a trav√©s de PROFIBUS o MPI.
‚óè Selecci√≥n de una configuraci√≥n predeterminada para PROFIBUS o MPI que puede
adaptarse posteriormente.

Posibilidades de parametrizaci√≥n para MPI y PROFIBUS en relaci√≥n al dispositivo y la red
En las interfaces MPI y PROFIBUS pueden ajustarse par√°metros relacionados con el
dispositivo y con la red. Los par√°metros relacionados con el dispositivo son los ajustes locales
de la interfaz. En cambio, los par√°metros relacionados con la red deben coincidir en todos los
dispositivos.

Par√°metros modificables en la interfaz MPI
Es posible ajustar los siguientes par√°metros predeterminados para la interfaz MPI:
Par√°metros relacionados con el dispositivo

Par√°metros relacionados con la red

Es el √∫nico maestro

Direcci√≥n m√°s alta

Direcci√≥n propia

Velocidad de transferencia

Timeout

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

41

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

Par√°metros modificables en la interfaz PROFIBUS
Es posible ajustar los siguientes par√°metros predeterminados para la interfaz PROFIBUS:
Par√°metros relacionados con el dispositivo

Par√°metros relacionados con la red

Es el √∫nico maestro

Direcci√≥n m√°s alta

Direcci√≥n propia

Velocidad de transferencia

Timeout

Perfil
Par√°metros del bus
N√∫mero de maestros en el bus
N√∫mero de esclavos en el bus

Nota
Comportamiento en una subred asignada
Si asigna a la interfaz una subred de un proyecto, tendr√°n prioridad los ajustes de subred del
proyecto. En ese caso los ajustes para la interfaz correspondiente no podr√°n modificarse.

Consulte tambi√©n
Principios b√°sicos para parametrizar la interfaz PG/PC (P√°gina 35)

5.7.2

Parametrizar la interfaz MPI o PROFIBUS autom√°ticamente

Configurar la detecci√≥n autom√°tica de los par√°metros del bus
Si se selecciona una interfaz con detecci√≥n autom√°tica de los par√°metros del bus, p. ej.
CP5611 (Auto), es posible conectar la programadora o el PC a MPI o PROFIBUS sin tener que
ajustar los par√°metros del bus. Sin embargo, si la velocidad de transferencia es inferior a 187,5
Kbits/s, los tiempos de espera pueden prolongarse hasta un minuto.

Requisitos
‚óè El bus tiene conectados maestros que distribuyen los par√°metros del bus c√≠clicamente.
‚óè En redes PROFIBUS, la distribuci√≥n c√≠clica de los par√°metros del bus est√° activada.
‚óè La interfaz no est√° asignada a ninguna subred. Si asigna una subred en las propiedades de
la interfaz, tendr√°n prioridad los ajustes de la subred del proyecto. En ese caso los ajustes
para la configuraci√≥n autom√°tica de la interfaz no podr√°n modificarse.

42

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

Procedimiento
Para activar la detecci√≥n autom√°tica de los par√°metros del bus, proceda del siguiente modo:
1. Seleccione la interfaz en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.
3. En "General > Configuraciones > Configuraci√≥n activa", seleccione el ajuste "Detecci√≥n
autom√°tica de protocolo".
4. En "Configuraciones > Configuraci√≥n autom√°tica > Configuraci√≥n local", seleccione la
direcci√≥n de la interfaz PG/PC en la lista desplegable "Direcci√≥n propia".
5. Si, a continuaci√≥n, desea visualizar la configuraci√≥n actual del bus, haga clic en el bot√≥n
"Detecci√≥n de red".

Consulte tambi√©n
Parametrizar la interfaz MPI (P√°gina 43)
Parametrizar la interfaz PROFIBUS (P√°gina 45)

5.7.3

Parametrizar la interfaz MPI

Modificar los par√°metros de la interfaz MPI
Para la interfaz MPI es posible ajustar par√°metros de red y par√°metros del bus. Primero
deber√≠a elegir un ajuste predeterminado y adaptarlo despu√©s en caso necesario.

Requisitos
La interfaz no est√° asignada a ninguna subred. Si asigna una subred en las propiedades de la
interfaz, tendr√°n prioridad los ajustes de la subred del proyecto. En este caso no es posible
modificar la configuraci√≥n de la interfaz.

Parametrizar la interfaz MPI con ajustes predeterminados
Para ajustar los par√°metros de la interfaz MPI, proceda del siguiente modo:
1. Seleccione la interfaz en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

43

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
3. En "General > Asignaci√≥n", seleccione la subred con la que debe conectarse la interfaz en
la lista desplegable "Conexi√≥n con subred".
4. En "General > Configuraciones", seleccione un ajuste predeterminado para los par√°metros
relacionados con el dispositivo y la red. Los ajustes predeterminados son adecuados para
la mayor√≠a de configuraciones. Elija uno de los ajustes siguientes:
‚Äì Detecci√≥n autom√°tica del protocolo
La PG puede conectarse al MPI o al PROFIBUS sin tener que ajustar los par√°metros de
bus. Sin embargo, si la velocidad de transferencia es inferior a 187,5 Kbits/s, los tiempos
de espera pueden prolongarse hasta un minuto. La condici√≥n fundamental para la
detecci√≥n autom√°tica es que haya maestros conectados al bus que distribuyan los
par√°metros de bus de forma c√≠clica. En el caso de las subredes PROFIBUS, la
distribuci√≥n c√≠clica de los par√°metros del bus no puede estar desactivada (ajuste
predeterminado de red PROFIBUS).
‚Äì MPI
Se selecciona el protocolo de transferencia "MPI". Se ajustan par√°metros est√°ndar que
resultan adecuados para la mayor√≠a de configuraciones. No obstante, los par√°metros
pueden modificarse en caso necesario.
‚Äì PROFIBUS
Se selecciona el protocolo de transferencia "PROFIBUS". Se ajustan par√°metros
est√°ndar que resultan adecuados para la mayor√≠a de configuraciones. No obstante, los
par√°metros pueden modificarse en caso necesario.

Modificar los par√°metros predeterminados
Para adaptar los ajustes predeterminados a sus necesidades, cambie los par√°metros
correspondientes en "Configuraciones > MPI".
Es posible ajustar los siguientes par√°metros relacionados con el dispositivo:
‚óè Es el √∫nico maestro
Con ello se desactiva una funci√≥n de seguridad adicional contra perturbaciones del bus al
acoplar la PG/el PC a la red, porque la PG/el PC es el √∫nico maestro del bus.
‚Äì Active esta opci√≥n s√≥lo si √∫nicamente se han conectado esclavos a la PG o al PC.
‚Äì Si la casilla de verificaci√≥n "Es el √∫nico maestro" est√° activada, no es posible determinar
el dispositivo conectado directamente en la ventana "Dispositivos accesibles".
‚óè Direcci√≥n propia
Este dato hace relaci√≥n a la PG/al PC en la/el que se ha llamado la parametrizaci√≥n de la
interfaz. Ajuste aqu√≠ la direcci√≥n de dispositivo local de la PG/el PC.
‚Äì La direcci√≥n debe ser un√≠voca en la red.
‚Äì Es la direcci√≥n con la que se accede a la PG/el PC en la red MPI.

44

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
‚óè Comprobar
Con esto se activa una funci√≥n de seguridad adicional contra fallos de bus al acoplar la PG/
el PC a la red. El driver comprueba si la direcci√≥n propia ya est√° ocupada por otro nodo. En
este caso no s√≥lo se tienen en cuenta los nodos activos, sino tambi√©n los pasivos. El driver
escucha tambi√©n en el PROFIBUS. En la verificaci√≥n autom√°tica, el acoplamiento de la PG/
del PC a la red dura un poco m√°s de tiempo. Para poder utilizar la funci√≥n de verificaci√≥n,
el driver debe soportar la funci√≥n. Adem√°s, la opci√≥n "Es el √∫nico maestro" no puede estar
activada.
‚óè Timeout
Aumente el valor del tiempo de vigilancia de conexi√≥n si p. ej. existen problemas debido a
tiempos de respuesta elevados en la red.
Es posible ajustar los siguientes par√°metros de red:
‚óè Direcci√≥n m√°s alta:
Elija aqu√≠ la direcci√≥n de dispositivo m√°s alta que se haya configurado. Aseg√∫rese de que
en todos los dispositivos de una red MPI est√° ajustada la misma direcci√≥n de dispositivo
m√°s alta.
‚óè Velocidad de transferencia:
Elija aqu√≠ la velocidad de transferencia que debe utilizarse en la red MPI.

Consulte tambi√©n
Parametrizar la interfaz MPI o PROFIBUS autom√°ticamente (P√°gina 42)

5.7.4

Parametrizar la interfaz PROFIBUS

Modificar los par√°metros de la interfaz PROFIBUS
Para la interfaz PROFIBUS es posible ajustar con m√°s precisi√≥n par√°metros de red y
par√°metros del bus. Primero deber√≠a elegir un ajuste predeterminado y adaptarlo despu√©s en
caso necesario.

Requisitos
La interfaz no est√° asignada a ninguna subred. Si asigna una subred en las propiedades de la
interfaz, tendr√°n prioridad los ajustes de la subred del proyecto. En este caso no es posible
modificar la configuraci√≥n de la interfaz.

Parametrizar la interfaz PROFIBUS con ajustes predeterminados
Para ajustar los par√°metros de la interfaz PROFIBUS, proceda del siguiente modo:
1. Seleccione la interfaz en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

45

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
3. En "General > Asignaci√≥n", seleccione la subred con la que debe conectarse la interfaz en
la lista desplegable "Conexi√≥n con subred".
4. En "General > Configuraci√≥n", seleccione un ajuste predeterminado para los par√°metros
relacionados con el dispositivo y la red. Los ajustes predeterminados son adecuados para
la mayor√≠a de configuraciones. Elija uno de los ajustes siguientes:
‚Äì Detecci√≥n autom√°tica del protocolo
La PG puede conectarse al MPI o al PROFIBUS sin tener que ajustar los par√°metros de
bus. Sin embargo, si la velocidad de transferencia es inferior a 187,5 Kbits/s, los tiempos
de espera pueden prolongarse hasta un minuto. La condici√≥n fundamental para la
detecci√≥n autom√°tica es que haya maestros conectados al bus que distribuyan los
par√°metros de bus de forma c√≠clica. En el caso de las subredes PROFIBUS, la
distribuci√≥n c√≠clica de los par√°metros del bus no puede estar desactivada (ajuste
predeterminado de red PROFIBUS).
‚Äì MPI
Se selecciona el protocolo de transferencia "MPI". Se ajustan par√°metros est√°ndar que
resultan adecuados para la mayor√≠a de configuraciones. No obstante, los par√°metros
pueden modificarse en caso necesario.
‚Äì PROFIBUS
Se selecciona el protocolo de transferencia "PROFIBUS". Se ajustan par√°metros
est√°ndar que resultan adecuados para la mayor√≠a de configuraciones. No obstante, los
par√°metros pueden modificarse en caso necesario.

Modificar los par√°metros predeterminados
Para adaptar los ajustes predeterminados a sus necesidades, cambie los par√°metros
correspondientes en "Configuraciones > PROFIBUS".
Es posible ajustar los siguientes par√°metros relacionados con el dispositivo:
‚óè Es el √∫nico maestro
Con ello se desactiva una funci√≥n de seguridad adicional contra perturbaciones del bus al
acoplar la PG/el PC a la red, porque la PG/el PC es el √∫nico maestro del bus.
‚Äì Active esta opci√≥n s√≥lo si √∫nicamente se han conectado esclavos a la PG o al PC.
‚Äì Si la casilla de verificaci√≥n "Es el √∫nico maestro" est√° activada, no es posible determinar
el dispositivo conectado directamente en la ventana "Dispositivos accesibles".
‚óè Direcci√≥n propia
Este dato hace relaci√≥n a la PG/al PC en la/el que se ha llamado la parametrizaci√≥n de la
interfaz. Ajuste aqu√≠ la direcci√≥n de dispositivo local de la PG/el PC.
‚Äì La direcci√≥n debe ser un√≠voca en la red.
‚Äì Es la direcci√≥n con la que se accede a la PG/el PC en la red PROFIBUS.

46

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
‚óè Comprobar
Con esto se activa una funci√≥n de seguridad adicional contra fallos de bus al acoplar la PG/
el PC a la red. El driver comprueba si la direcci√≥n propia ya est√° ocupada por otro nodo. En
este caso no s√≥lo se tienen en cuenta los nodos activos, sino tambi√©n los pasivos. El driver
escucha tambi√©n en el PROFIBUS. En la verificaci√≥n autom√°tica, el acoplamiento de la PG/
del PC a la red dura un poco m√°s de tiempo. Para poder utilizar la funci√≥n de verificaci√≥n,
el driver debe soportar la funci√≥n. Adem√°s, la opci√≥n "Es el √∫nico maestro" no puede estar
activada.
‚óè Timeout
Aumente el valor del tiempo de vigilancia de conexi√≥n si p. ej. existen problemas debido a
tiempos de respuesta elevados en la red.
Es posible ajustar los siguientes par√°metros de red:
‚óè Direcci√≥n m√°s alta:
Elija aqu√≠ la direcci√≥n de dispositivo m√°s alta que se haya configurado. Aseg√∫rese de que
en todos los dispositivos de una red PROFIBUS est√° ajustada la misma direcci√≥n de
dispositivo m√°s alta.
‚óè Velocidad de transferencia:
Elija aqu√≠ la velocidad de transferencia que debe utilizarse en la red PROFIBUS.
‚óè Perfil:
Existen cuatro alternativas distintas para los ajustes del PROFIBUS. "DP", "Est√°ndar" y
"Universal (DP/FMS)" son ajustes predeterminados que no pueden modificarse. La opci√≥n
"Personalizado" permite adaptar los par√°metros del bus.
‚Äì Si ha seleccionado "Personalizado", vaya a "Configuraciones > PROFIBUS >
Par√°metros del bus" en la navegaci√≥n local.
‚Äì Si ha seleccionado uno de los ajustes predeterminados (DP, est√°ndar o universal (DP/
FMS)), deber√≠a activar la casilla de verificaci√≥n "Considerar" en "Configuraciones >
PROFIBUS > Par√°metros del bus > Par√°metros adicionales". Seguidamente, podr√°
ajustar el n√∫mero de maestros y esclavos en el bus. De este modo, los par√°metros del
bus se calculan con m√°s exactitud y es posible excluir posibles fallos del bus. La opci√≥n
no puede activarse en un perfil definido por el usuario.

Consulte tambi√©n
Resumen de los par√°metros del bus para PROFIBUS (P√°gina 47)
Parametrizar la interfaz MPI o PROFIBUS autom√°ticamente (P√°gina 42)

5.7.5

Resumen de los par√°metros del bus para PROFIBUS

Introducci√≥n
La subred PROFIBUS s√≥lo funciona a la perfecci√≥n si los par√°metros del perfil de bus est√°n
sintonizados entre s√≠. Por esta raz√≥n, los valores predeterminados s√≥lo deber√≠an modificarse
si se est√° familiarizado con la parametrizaci√≥n del perfil de bus para PROFIBUS.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

47

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
En funci√≥n del perfil de bus, los par√°metros podr√°n ajustarse o no. Siempre se visualizan los
valores offline de los par√°metros del bus, incluso si est√°n conectados online con el sistema de
destino.
Los par√°metros mostrados son v√°lidos para toda la subred PROFIBUS.

Significado de los diferentes par√°metros
‚óè Tslot: tiempo de espera a recepci√≥n (slot time)
El tiempo de espera a recepci√≥n (slot time) determina cu√°nto tiempo debe esperar como
m√°ximo el emisor hasta recibir una respuesta del interlocutor direccionado.
‚óè Max. Tsdr: tiempo m√°ximo de procesamiento del protocolo (max. station delay responder).
El tiempo m√°ximo de procesamiento del protocolo determina el tiempo m√°ximo al cabo del
cual el dispositivo que responde debe haber procesado el protocolo.
‚óè Min. Tsdr: tiempo m√≠nimo de procesamiento del protocolo (min. station delay responder).
El tiempo m√≠nimo de procesamiento del protocolo determina el tiempo m√≠nimo que requiere
el dispositivo que responde para procesar el protocolo.
‚óè Tset: tiempo de activaci√≥n (setup time)
El tiempo de activaci√≥n es el tiempo que puede transcurrir entre la recepci√≥n de un
telegrama de datos y la reacci√≥n correspondiente.
‚óè Tqui: tiempo de desactivaci√≥n del modulador (quiet time for modulator)
El tiempo de desactivaci√≥n del modulador es el tiempo necesario para conmutar de Enviar
a Recibir.
‚óè Factor GAP: factor de actualizaci√≥n GAP (factor GAP)
El factor de actualizaci√≥n GAP determina al cabo de cu√°ntas rotaciones del testigo debe
incorporarse un nuevo dispositivo al anillo l√≥gico.
‚óè Retry Limit: n√∫mero m√°ximo de repeticiones de llamada (retry limit).
Con este par√°metro se determina cu√°ntos intentos pueden realizarse como m√°ximo para
acceder a un nodo.
‚óè Trdy: tiempo de disponibilidad (ready time)
El tiempo de disponibilidad es el tiempo de acuse o respuesta.
‚óè Tid1: tiempo de estado de reposo 1 (idle time 1)
El tiempo de estado de reposo 1 determina el tiempo de retardo tras recibir una respuesta.
‚óè Tid2: tiempo de estado de reposo 2 (idle time 2)
El tiempo de estado de reposo 2 determina el tiempo de retardo tras enviar una llamada sin
respuesta.

48

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS
‚óè Ttr: tiempo consignado de rotaci√≥n del token (target rotation time)
El tiempo consignado de rotaci√≥n del token es el tiempo m√°ximo disponible para una
rotaci√≥n del token. Durante ese tiempo, todos los dispositivos activos (maestros) reciben
una vez el testigo (token). La diferencia entre los tiempos de rotaci√≥n te√≥rico y real del
testigo determina cu√°nto tiempo restante tienen los maestros para enviar telegramas de
datos a los esclavos.
Seleccione como Target Rotation Time (Ttr) m√≠nimo = 5000 multiplicado por HSA (Highest
Station Address).
‚óè Supervisi√≥n de respuesta: tiempo de supervisi√≥n de respuesta (watchdog)
La supervisi√≥n de respuesta determina el tiempo que debe pasar para direccionar un
dispositivo.
Elija un tiempo m√≠nimo de supervisi√≥n de respuesta = 6250 multiplicado por HSA.
Nota
Si desea crear un perfil de bus personalizado, tenga en cuenta que el tiempo m√≠nimo
consignado de rotaci√≥n del testigo (Ttr) debe ser 5000 multiplicado por HSA (direcci√≥n
PROFIBUS m√°s alta). Adem√°s, la supervisi√≥n de respuesta m√≠nima (watchdog) debe ser 6250
multiplicado por HSA.

Consulte tambi√©n
Parametrizar la interfaz PROFIBUS (P√°gina 45)

5.7.6

Restablecer la configuraci√≥n MPI o PROFIBUS
Si se han realizado cambios en los ajustes del protocolo MPI o PROFIBUS, existe la posibilidad
de restablecer los valores predeterminados.

Requisitos
La interfaz no est√° asignada a ninguna subred. Si asigna una subred en las propiedades de la
interfaz, tendr√°n prioridad los ajustes de la subred del proyecto. En este caso no podr√°n
restablecerse los valores est√°ndar de la configuraci√≥n de la interfaz.

Procedimiento
Para restablecer los valores predeterminados de la configuraci√≥n MPI o PROFIBUS, proceda
del siguiente modo:
1. Seleccione la interfaz MPI/PROFIBUS en "Accesos online" en el √°rbol del proyecto.
2. Elija el comando "Propiedades" del men√∫ contextual de la interfaz.
Se abre el di√°logo de configuraci√≥n de la interfaz.
3. Elija "Configuraciones > MPI" o "Configuraciones > PROFIBUS" en funci√≥n de las
propiedades de interfaz que desee restablecer.
4. Haga clic en el bot√≥n "Est√°ndar" para restablecer todos los ajustes.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

49

Configurar interfaces PG/PC
5.7 Parametrizar la interfaz MPI y PROFIBUS

50

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico

6

Pr√≥logo

Finalidad de la documentaci√≥n
En la presente documentaci√≥n se describen las posibilidades de diagn√≥stico con la funci√≥n
Trace y de analizador l√≥gico. Las posibilidades de registro pueden variar en funci√≥n del
dispositivo utilizado.

Conocimientos b√°sicos necesarios
Para una mejor comprensi√≥n de la presente documentaci√≥n se precisan los siguientes
conocimientos:
‚óè Conocimientos generales de automatizaci√≥n
‚óè Conocimientos sobre la utilizaci√≥n de equipos Windows
‚óè S7-1200/1500 CPUs, ET 200SP, ET 200Pro
‚Äì Conocimientos del sistema de automatizaci√≥n industrial SIMATIC
‚Äì Conocimientos del manejo de STEP 7
‚óè Accionamientos SINAMICS
‚Äì Conocimientos en el manejo del accionamiento
‚óè SIRIUS SIMOCODE pro, SIRIUS arrancador suave 3RW
‚Äì Conocimientos sobre el uso de estos sistemas

√Åmbito de validez de la documentaci√≥n
Esta documentaci√≥n es v√°lida para todos los productos de las familias S7-1200, S7-1500,
S7-1500 Software Controller, S7-1500 Drive Controller, ET 200SP, ET 200SP Open Controller,
CPU 1513(F)pro-2 PN, CPU 1516(F)pro-2 PN, accionamientos SINAMICS,
SIRIUS SIMOCODE pro y arrancadores suaves SIRIUS 3RW a partir de TIA Portal V16.

Convenciones
La presente documentaci√≥n contiene ilustraciones de los dispositivos descritos. Las
ilustraciones pueden diferir del dispositivo suministrado en algunos detalles.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

51

Uso de la funci√≥n Trace y de analizador l√≥gico
Pr√≥logo
Preste atenci√≥n tambi√©n a las notas marcadas del modo siguiente:
Nota
Una nota contiene datos importantes acerca del producto descrito en la documentaci√≥n, el
manejo de dicho producto o la parte de la documentaci√≥n a la que debe prestarse especial
atenci√≥n.

"mySupport"
Con "mySupport", su √°rea de trabajo personal, podr√° sacar el m√°ximo partido al Industry
Online Support.
En "mySupport" se pueden guardar filtros, favoritos y etiquetas, solicitar datos CAx y elaborar
una librer√≠a personal en el √°rea Documentaci√≥n. Asimismo, en las consultas de soporte que
realice ya estar√°n cumplimentados con sus datos, y en todo momento podr√° ver una relaci√≥n
de las solicitudes presentes.
Para usar todas las funciones de "mySupport" es necesario registrarse una sola vez.
Encontrar√° "mySupport" en Internet (https://support.industry.siemens.com/My/ww/es/).

"mySupport" - Documentaci√≥n
En "mySupport", bajo "Documentaci√≥n", se pueden combinar manuales completos o partes de
ellos para elaborar un manual personalizado.
Este manual se puede exportar como archivo PDF o a un formato editable.
Encontrar√° "mySupport" - "Documentaci√≥n" en Internet (http://
support.industry.siemens.com/My/ww/es/documentation).

Soporte adicional
‚óè La oferta de documentaci√≥n t√©cnica de los distintos productos y sistemas de
automatizaci√≥n SIMATIC se encuentra en Internet (http://www.siemens.com/simatic-techdoku-portal).
‚óè Encontrar√° el cat√°logo online y el sistema de pedidos online en Internet (https://
mall.industry.siemens.com).

Informaci√≥n de seguridad
Siemens ofrece productos y soluciones con funciones de seguridad industrial con el objetivo
de hacer m√°s seguro el funcionamiento de instalaciones, sistemas, m√°quinas y redes.
Para proteger las instalaciones, los sistemas, las m√°quinas y las redes de amenazas
cibern√©ticas, es necesario implementar (y mantener continuamente) un concepto de seguridad
industrial integral conforme al estado del arte. Los productos y las soluciones de Siemens
constituyen una parte de este concepto.
Los clientes son responsables de impedir el acceso no autorizado a sus instalaciones,
sistemas, m√°quinas y redes. Dichos sistemas, m√°quinas y componentes solo deben estar
conectados a la red corporativa o a Internet cuando y en la medida que sea necesario y

52

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.1 Descripci√≥n
siempre que se hayan tomado las medidas de protecci√≥n adecuadas (p. ej. cortafuegos y
segmentaci√≥n de la red).
Para obtener informaci√≥n adicional sobre las medidas de seguridad industrial que podr√≠an ser
implementadas, por favor visite (https://www.siemens.com/industrialsecurity).
Los productos y las soluciones de Siemens est√°n sometidos a un desarrollo constante con el
fin de hacerlos m√°s seguros. Siemens recomienda expresamente realizar actualizaciones en
cuanto est√©n disponibles y utilizar √∫nicamente las √∫ltimas versiones de los productos. El uso
de versiones de los productos anteriores o que ya no sean soportadas y la falta de aplicaci√≥n
de las nuevas actualizaciones, puede aumentar el riesgo de amenazas cibern√©ticas.
Para mantenerse informado de las actualizaciones de productos, recomendamos que se
suscriba al Siemens Industrial Security RSS Feed en (https://www.siemens.com/
industrialsecurity).

6.1

Descripci√≥n

6.1.1

Hardware admitido
Si un dispositivo soporta la funci√≥n Trace y de analizador l√≥gico, el √°rbol del proyecto ofrece la
selecci√≥n de "Traces" en el dispositivo .
Los dispositivos (P√°gina 120) siguientes admiten la funci√≥n Trace y de analizador l√≥gico:
‚óè CPU SIMATIC S7-1200 (a partir del firmware de la versi√≥n V4.0)
‚óè CPU SIMATIC S7-1500, ET 200SP, CPU 1513pro-2 PN y CPU 1516pro-2 PN
‚óè Controladores por software SIMATIC S7-1500
‚óè ET 200SP Open Controller
‚óè Accionamientos SINAMICS compatibles con Startdrive
‚óè SINAMICS V90 (con HSP 0185)
‚óè SIRIUS SIMOCODE pro (con Simocode ES)
‚óè Arrancador suave SIRIUS 3RW (con Soft Starter ES)

6.1.2

Registro de medidas con la funci√≥n Trace

Introducci√≥n
A la funci√≥n de Trace y de analizador l√≥gico se accede desde el √°rbol del proyecto
(P√°gina 59), haciendo doble clic en una entrada de la carpeta de sistema "Traces". Adem√°s,
la interfaz de diagn√≥stico del servidor Web permite leer y visualizar las mediciones guardadas
en la tarjeta de memoria.
La funci√≥n Trace y de analizador l√≥gico permite registrar las variables de un dispositivo y
evaluar los registros efectuados. Las variables son, p. ej., par√°metros de accionamiento o

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

53

Uso de la funci√≥n Trace y de analizador l√≥gico
6.1 Descripci√≥n
variables de sistema y de usuario de una CPU. El n√∫mero de traces del dispositivo var√≠a en
funci√≥n del hardware. Con el Trace del proyecto puede registrar variables de varios
dispositivos.
Los registros se guardan en el dispositivo, pueden leerse con el sistema de configuraci√≥n (ES)
en caso necesario y guardarse de forma permanente. De tal forma, la funci√≥n Trace y de
analizador l√≥gico es adecuada para visualizar procesos altamente din√°micos. Los valores
registrados se sobrescriben al volver a activarse el registro.
Las funciones Trace y de analizador l√≥gico tambi√©n se utilizan en los editores de puesta en
marcha de objetos tecnol√≥gicos (p. ej., panel de mando del eje). Los registros activos del panel
de mando del eje se muestran como Traces del dispositivo en la carpeta de sistema "Traces".
En el diagrama de curvas del panel de mando del eje o del PID pueden agregarse registros a
las mediciones mediante un comando del men√∫ contextual.
Las posibilidades de registro pueden variar en funci√≥n del dispositivo (P√°gina 120) utilizado.
En el cap√≠tulo Manejo encontrar√° una gu√≠a de inicio r√°pido (P√°gina 95) para trabajar con la
funci√≥n Trace y de analizador l√≥gico.
La figura siguiente muestra el funcionamiento de Trace:










&RQILJXUDFL¬µQGH
7UDFH

7UDQVIHULU
FRQILJXUDFL¬µQGH
7UDFH

(VSHUDUFRQGLFL¬µQ
GHGLVSDUR\
UHJLVWUDUGDWRV

7UDQVIHULUPHGLFL¬µQ
DODSURJUDPDGRUD

9HUDGPLQLVWUDU\
JXDUGDUPHGLFL¬µQ

‚ë† Configuraci√≥n de Trace con la programadora (PG) en el TIA Portal
En la configuraci√≥n del Trace se especifican las se√±ales que deben registrarse, la duraci√≥n del
registro y la condici√≥n de disparo. La configuraci√≥n del Trace depende del dispositivo y se
describe en el correspondiente dispositivo (P√°gina 120).

‚ë° Transferir la configuraci√≥n de Trace de la programadora (PG) al dispositivo
Si existe una conexi√≥n online, se efect√∫a una transferencia de la configuraci√≥n de Trace
(P√°gina 107) completa al dispositivo.

‚ë¢ Esperar registro
Si la configuraci√≥n del Trace est√° activada (P√°gina 107) en el dispositivo, el registro se realiza
independientemente de la programadora. Cuando se cumple la condici√≥n de disparo, se inicia
el registro.

54

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.1 Descripci√≥n

‚ë£ Transferencia de la medici√≥n del dispositivo a la programadora (PG)
El almacenamiento de la medici√≥n en el proyecto (P√°gina 109) guarda la medici√≥n en el
proyecto abierto del TIA Portal. El almacenamiento de la medici√≥n es independiente del
momento de la medici√≥n y puede tener lugar en cualquier momento tras concluir el registro.

‚ë§ Evaluaci√≥n, administraci√≥n y almacenamiento de la medici√≥n
Para evaluar la medici√≥n, hay disponibles numerosas opciones en el diagrama de curvas y en
la tabla de se√±ales (P√°gina 108). Existen diferentes formatos de representaci√≥n: p. ej.,
representaci√≥n en bits para se√±ales binarias.
Las evoluciones de se√±ales de diferentes mediciones pueden agruparse en mediciones
superpuestas y compararse entre s√≠.
Tambi√©n es posible exportar e importar mediciones como archivo.
Con el almacenamiento del proyecto (P√°gina 109) en el TIA Portal, tambi√©n se guardan las
mediciones transferidas al proyecto.

6.1.3

Configuraci√≥n de Trace, registro, Trace en dispositivo y medici√≥n
En este cap√≠tulo se explica el significado y las interrelaciones de los t√©rminos "configuraci√≥n de
Trace", "registro" y "medici√≥n".

Configuraci√≥n de Trace
En la configuraci√≥n de Trace

deben realizarse los ajustes siguientes:

‚óè Se√±ales que deben registrarse con opciones de representaci√≥n
‚óè Condiciones de registro
‚Äì muestreo
‚Äì disparo
‚Äì mediciones en el dispositivo (tarjeta de memoria)
Las configuraciones de Trace pueden copiarse en la carpeta "Traces" mediante Drag & Drop
o con el portapapeles. La aplicaci√≥n de una configuraci√≥n depende del tipo de dispositivo.
Pueden utilizarse las siguientes fuentes:
‚óè Configuraci√≥n de Trace
‚óè Medici√≥n
‚óè Mediciones en el dispositivo (tarjeta de memoria)
‚óè Medici√≥n superpuesta (selecci√≥n de una medici√≥n incluida)

Registro
El registro tiene lugar en el dispositivo. Solo existe un registro para cada configuraci√≥n de
Trace del dispositivo. Si se reinicia un registro, el registro antiguo se sobrescribe.
Los registros en el dispositivo no son remanentes (se pierden tras conectar/desconectar el
dispositivo), pero pueden guardarse permanentemente, como medici√≥n, en el proyecto.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

55

Uso de la funci√≥n Trace y de analizador l√≥gico
6.1 Descripci√≥n

Trace en dispositivo
Un Trace en el dispositivo se compone de una configuraci√≥n de Trace y, opcionalmente, de
un registro. El n√∫mero m√°ximo de Traces en el dispositivo depende del dispositivo.
La configuraci√≥n de Trace se guarda de manera remanente en el dispositivo. En funci√≥n del
dispositivo, puede configurarse tambi√©n el almacenamiento remanente de la configuraci√≥n de
Trace, p. ej., en el S120.

Medici√≥n
Una medici√≥n
se compone de una configuraci√≥n de Trace y de un registro, siempre que
haya datos registrados. Todo Trace en dispositivo puede guardarse en el proyecto como
medici√≥n.
El registro de una medici√≥n puede observarse offline.

Mediciones en el dispositivo (tarjeta de memoria)
En la carpeta "Mediciones en el dispositivo (tarjeta de memoria)" se guardan las mediciones
almacenadas en el dispositivo (p. ej., en la tarjeta de memoria). Estas mediciones son
remanentes y solo puede eliminarlas el usuario.
Las mediciones almacenadas en el dispositivo pueden enviarse a la carpeta "Mediciones"
mediante Drag & Drop, y de ese modo guardarse como mediciones en el proyecto.

Configuraci√≥n de Trace con un Trace en dispositivo con el mismo nombre
Normalmente, para cada Trace en dispositivo existe en el proyecto una configuraci√≥n de Trace
con el mismo nombre. Si existe una conexi√≥n online, este Trace se muestra en el √°rbol del
proyecto con el s√≠mbolo .
Ver tambi√©n Interfaz: √Årbol del proyecto, carpeta "Traces" (P√°gina 61).

Medici√≥n superpuesta
La medici√≥n superpuesta

permite comparar y analizar se√±ales de distintas mediciones.

Las mediciones pueden sincronizarse entre s√≠ y visualizarse de manera superpuesta.

6.1.4

Almacenamiento de datos
La barra de herramientas de Trace y el diagrama de curvas permiten, entre otras cosas,
transferir la configuraci√≥n de Trace y observar el registro.
La figura siguiente muestra esquem√°ticamente el almacenamiento de datos:

56

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.1 Descripci√≥n
'LDJUDPDGHFXUYDV

&RQILJXUDFL¬µQ7UDFH

7UDFHVHQGLVSRVLWLYR

0HGLFL¬µQ

,PSRUWD
FL¬µQ

([SRUWDFL¬µQ
&RQILJXUDFL¬µQ
,PSRUWDFL¬µQ

([SRUWD
FL¬µQ
3UR\HFWR

5HJLVWUR

3UR\HFWR

Nota
Almacenamiento de configuraci√≥n de Trace y medici√≥n
La configuraci√≥n de Trace y la medici√≥n se guardan con el proyecto en el TIA Portal.
Si cierra el proyecto sin guardar, la configuraci√≥n de Trace y las mediciones transmitidas al
proyecto quedan descartadas. El editor Trace puede cerrarse y volver a abrirse sin p√©rdida de
datos hasta el cierre del proyecto.

6.1.5

Trace del proyecto

6.1.5.1

General
Un Trace del proyecto contiene configuraciones Trace de varios dispositivos y registra las
se√±ales de todos ellos.
Cada dispositivo puede disparar, mediante su propio disparador, el registro en todos los
dispositivos participantes. Tras recibir la se√±al de disparo global, los dispositivos que tienen
una configuraci√≥n Trace del proyecto v√°lida comienzan el registro.
En los distintos dispositivos (P√°gina 120) se indica si el dispositivo soporta el Trace del
proyecto.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

57

Uso de la funci√≥n Trace y de analizador l√≥gico
6.1 Descripci√≥n

Requisitos
Deben cumplirse los siguientes requisitos para el registro con Trace del proyecto:
‚óè Comunicaci√≥n PROFINET RT o IRT
‚óè Todos los dispositivos se encuentran en una subred PROFINET (sin routing)
‚óè Hay una conexi√≥n online desde el TIA Portal hasta todos los dispositivos para transferir el
Trace del proyecto a los dispositivos
‚óè El modo de disparo "Registrar inmediatamente" puede estar configurado como m√°ximo en
un dispositivo.
‚óè Debe haber un disparador configurado en al menos un dispositivo.

6.1.5.2

Sincronizaci√≥n horaria
La precisi√≥n de la sincronizaci√≥n horaria depende de c√≥mo se determine el momento de
registro. La comunicaci√≥n is√≥crona ofrece la m√°xima precisi√≥n, ya que se utiliza el ciclo IRT.
En todos los dem√°s casos se utiliza la hora del controlador.
Un Trace del proyecto puede contener dispositivos con comunicaci√≥n RT e IRT.
Para la representaci√≥n s√≠ncrona de las se√±ales, el eje X debe estar ajustado en modo "Tiempo
(relativo)". En esta representaci√≥n, las mediciones se organizan temporalmente de modo que
sus eventos de disparo se encuentren en el instante 0 ms.
Para facilitar la evaluaci√≥n con tiempo absoluto, sincronice las horas de los dispositivos.
Encontrar√° informaci√≥n sobre el momento de registro en las descripciones espec√≠ficas de los
dispositivos; por ejemplo, para la CPU S7-1200/1500 (P√°gina 120) en "Niveles de registro".

Instante del disparo en la comunicaci√≥n RT
Los dispositivos que reciben el disparo de otro dispositivo tienen un evento de disparo con
offset de tiempo. En la comunicaci√≥n RT, el instante de un evento de disparo se deriva del
tiempo de transmisi√≥n y del momento de registro. El evento de disparo no se detecta hasta que
finaliza el OB registrador, y dicho momento se emplea como instante del disparo. En la
comunicaci√≥n RT, no es posible determinar el offset de tiempo entre el instante del disparo
original y la evaluaci√≥n en el OB. Por este motivo, las evoluciones de se√±ales de los
dispositivos que reciben el disparo de otro dispositivo aparecen antepuestas en el tiempo. El
valor temporal de estas se√±ales puede corregirse manualmente con un offset despu√©s de
guardar las mediciones.

58

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Ejemplo de registro con Trace del proyecto
La siguiente figura muestra un registro con Trace del proyecto y la correcci√≥n de la
representaci√≥n con un offset.
'LVSDUR

&38
'LVSDUR
&38

&38

6H¬≥DO

7LHPSRGHWUDQVPLVL¬µQ

W

W

352),1(7

W

W

&LFORGHUHJLVWUR

&LFOR2%

W

6H¬≥DO
W

WW
,QVWDQWHGHOGLVSDUR
&38

,QVWDQWHGHOGLVSDUR
&38

5HSUHVHQWDFL¬µQHQHO7UDFHGHOSUR\HFWR

&38
W

&38
W
&RQRIIVHWPDQXDO

2IIVHW

&38
W

6.2

Interfaz de software de Trace
La interfaz de usuario de la funci√≥n Trace y de analizador l√≥gico se divide en varias √°reas. Aqu√≠
se describe la distribuci√≥n de la interfaz en el TIA Portal.
La figura siguiente muestra un ejemplo de distribuci√≥n de la interfaz:

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

59

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

1


2
3
4

5

7

√Årbol del proyecto
Gestionar y crear Traces y mediciones directamente en el √°rbol del proyecto y mediante comandos del
men√∫ contextual.
√Årea de trabajo

60

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

‚ë† Barra de t√≠tulo del √°rea de trabajo
Muestra a qu√© dispositivo corresponde la representaci√≥n actual.

‚ë° Barra de herramientas de Trace

Botones para administrar los Traces en el proyecto y el dispositivo:
‚óè Activar/desactivar Traces del dispositivo
‚óè Borrar Traces del dispositivo
‚óè Transferir configuraciones de Trace y mediciones entre el dispositivo y el proyecto
‚óè Exportar configuraciones de Trace y mediciones
‚óè Alternar la visualizaci√≥n offline y online

‚ë¢ Visualizaci√≥n de estado del Trace

Visualizaci√≥n del estado actual del registro.

‚ë£ Ficha Configuraci√≥n

Configuraci√≥n espec√≠fica del dispositivo acerca de la duraci√≥n del registro, la condici√≥n de disparo
y la selecci√≥n de se√±al.
Configuraci√≥n de los dispositivos en el Trace del proyecto.
Ver descripciones espec√≠ficas de dispositivo (P√°gina 120).

‚ë§ Ficha Diagrama

Visualizaci√≥n de los valores registrados en forma de diagrama de curvas y de las se√±ales de la
medici√≥n visualizada.
Definici√≥n de las opciones de representaci√≥n.
Ficha Selecci√≥n de se√±al
Muestra todas las se√±ales contenidas en las mediciones superpuestas.
Task Card "Trace"

Muestra los datos de los cursores de medici√≥n con evaluaci√≥n matem√°tica ‚ë• y las instant√°neas.

‚ë¶ Ventana de inspecci√≥n

Informaci√≥n general acerca de la configuraci√≥n de Trace.

6.2.1

√Årbol del proyecto

6.2.1.1

Interfaz: √Årbol del proyecto, carpeta "Traces"
En la carpeta
dispositivo.

"Traces" se muestran las configuraciones de Trace y los Traces del

Las subcarpetas de "Traces" se describen en detalle en los cap√≠tulos siguientes.
Al hacer doble clic en un Trace, se abre la correspondiente ficha "Configuraci√≥n" o "Diagrama"
en el √°rea de trabajo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

61

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

S√≠mbolos de la carpeta "Traces"
En la siguiente tabla se explica el significado de los s√≠mbolos de la carpeta
S√≠mbolo

"Traces":

Descripci√≥n
Agregar configuraci√≥n de Trace
Al hacer doble clic en este s√≠mbolo se agrega una nueva configuraci√≥n de Trace.
Configuraci√≥n de Trace (offline)
Al hacer doble clic en este s√≠mbolo se abre la ficha "Configuraci√≥n".
Trace en el dispositivo (online)
Este s√≠mbolo solo se muestra si no existe ninguna configuraci√≥n de Trace offline con el
mismo nombre que el Trace del dispositivo.
Al hacer doble clic en este s√≠mbolo se abre la ficha "Diagrama".
Configuraci√≥n con un Trace del dispositivo que tenga el mismo nombre
Si est√° desactivado el bot√≥n
, se muestra la configuraci√≥n de Trace correspondiente al
proyecto. El Trace corresponde a una configuraci√≥n de Trace.
Si est√° activado el bot√≥n
, se muestra la configuraci√≥n de Trace correspondiente al
dispositivo. El Trace corresponde a un Trace del dispositivo.
Al hacer doble clic en este s√≠mbolo, se abre la ficha "Diagrama" del Trace del dispositivo.

Estado
Si existe una conexi√≥n online, el estado se muestra en la columna derecha del √°rbol del
proyecto. El estado se muestra tambi√©n como tooltip encima del s√≠mbolo correspondiente.
La tabla siguiente explica el significado de los distintos s√≠mbolos:
S√≠mbolo

Descripci√≥n
Las configuraciones online y offline son id√©nticas
Las configuraciones online y offline son distintas
La configuraci√≥n solo existe online

Comandos del men√∫ contextual
En la siguiente tabla se muestran los comandos de men√∫ contextual para la carpeta de
sistema
"Traces":

62

Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Agregar grupo"

Inserta una carpeta nueva.

"Agregar nuevo
Trace"

Agrega una nueva configuraci√≥n de Trace y abre la ficha Configuraci√≥n.

"Importar configu‚Äê
raci√≥n de Trace"

Importa una configuraci√≥n de Trace desde un archivo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
La siguiente tabla muestra los comandos de men√∫ contextual para configuraci√≥n de Trace
Traces en dispositivo
/ :
Comando del men√∫
contextual

y

Configura‚Äê Trace en Descripci√≥n
ci√≥n de Tra‚Äê el disposi‚Äê
ce
tivo

"Copiar"

x

-

Copia la configuraci√≥n del Trace o el Trace del dis‚Äê
positivo al portapapeles.

"Insertar"

x

-

Inserta una configuraci√≥n de Trace o medici√≥n des‚Äê
de el portapapeles.

"Borrar"

x

x

Borra los objetos seleccionados del √°rbol del pro‚Äê
yecto o del dispositivo.

"Cambiar nombre"

x

-

Pasa el objeto seleccionado al modo de edici√≥n.

"Exportar configura‚Äê
ci√≥n de Trace"

x

-

Exporta una configuraci√≥n de Trace como archivo
con la extensi√≥n "*.ttcfgx" o un Trace del dispositivo
con la extensi√≥n "*.ttrecx".
Las extensiones de archivo "*.ttcfg" y "*.ttrec" est√°n
permitidas por motivos de compatibilidad con TIA
Portal V12, pero no contienen informaci√≥n sobre la
familia de dispositivos.

Tambi√©n es posible copiar la configuraci√≥n de Trace entre los dispositivos de una misma
familia.

6.2.1.2

Interfaz - √Årbol del proyecto, carpeta "Mediciones"
En la carpeta

"Mediciones" se muestran las mediciones guardadas.

S√≠mbolos de la carpeta "Mediciones"
En la siguiente tabla se explica el significado de los s√≠mbolos de la carpeta
S√≠mbolo

"Mediciones":

Descripci√≥n
Medici√≥n (offline)
Al hacer doble clic en este s√≠mbolo se abre la ficha "Diagrama".
La configuraci√≥n de una medici√≥n puede enviarse a la carpeta "Traces" mediante arrastrar
y soltar.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

63

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Comandos del men√∫ contextual
En la siguiente tabla se muestran los comandos de men√∫ contextual para la carpeta de
sistema
"Mediciones":
Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Agregar grupo"

Inserta una carpeta nueva.

"Importar medi‚Äê
ci√≥n"

Importa una medici√≥n desde un archivo con la extensi√≥n "*.ttrecx".
La importaci√≥n es independiente del dispositivo.
La extensi√≥n de archivo "*.ttrec" est√° soportada por motivos de compatibilidad con
V12, pero no contiene informaci√≥n sobre la familia de dispositivos.

En la siguiente tabla se muestran los comandos de men√∫ contextual para mediciones

:

Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Copiar"

Copia la configuraci√≥n de Trace de los objetos seleccionados al portapapeles.

"Pegar"

Inserta una medici√≥n desde el portapapeles.

"Borrar"

Borra los objetos seleccionados del √°rbol del proyecto o del dispositivo.

"Cambiar nombre"

Pasa el objeto seleccionado al modo de edici√≥n.

"Crear nueva medi‚Äê Crea una medici√≥n superpuesta a partir de las mediciones seleccionadas.
ci√≥n superpuesta"
"Exportar medi‚Äê
ci√≥n"

Exporta una medici√≥n con la √∫ltima vista normal almacenada
La medici√≥n se guarda con la extensi√≥n de archivo "*.ttrecx" o "*.csv". La exten‚Äê
si√≥n de archivo "*.ttrec" est√° soportada por motivos de compatibilidad con V12,
pero no contiene informaci√≥n sobre la familia de dispositivos.

Tambi√©n es posible copiar mediciones entre dispositivos independientemente de la familia.

6.2.1.3

Interfaz - √Årbol del proyecto, carpeta "Mediciones en el dispositivo (tarjeta de memoria)"
"Mediciones en el dispositivo (tarjeta de memoria)" se muestran las
En la carpeta
mediciones existentes en la tarjeta de memoria. La carpeta solo se muestra si existe conexi√≥n
online con el dispositivo.
Desplace las carpetas o mediciones contenidas en ella a la carpeta del sistema "Mediciones"
mediante Drag & Drop. Al hacerlo se transfieren las mediciones al proyecto.
Nota
Incorporaci√≥n de numerosas mediciones Trace de gran tama√±o desde el dispositivo (tarjeta de
memoria)
Cuando se aplican mediciones Trace del dispositivo en el proyecto se incrementa la memoria
requerida.
Evite copiar un gran n√∫mero de mediciones con grandes vol√∫menes de datos al mismo tiempo,
pues esto consume mucha memoria de trabajo y puede provocar tiempos de copia largos.

64

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

S√≠mbolos de la carpeta "Traces"
En la siguiente tabla se explica el significado de los s√≠mbolos de la carpeta del sistema
S√≠mbo‚Äê
lo

:

Descripci√≥n
Carpeta generada autom√°ticamente con indicaci√≥n del momento de activaci√≥n del registro
El nombre de la carpeta no se puede modificar.
Medici√≥n en el dispositivo
Al hacer doble clic en este s√≠mbolo se abre la ficha "Diagrama".
La marca de tiempo del nombre indica el momento de aparici√≥n del evento de disparo.

Comandos del men√∫ contextual
En la siguiente tabla se muestran los comandos de men√∫ contextual para la carpeta de
grupo :
Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Copiar"

Copia los objetos seleccionados al portapapeles.

"Borrar"

Borra los objetos seleccionados del √°rbol del proyecto y del dispositivo.

En la siguiente tabla se muestran los comandos de men√∫ contextual para mediciones

6.2.1.4

Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Abrir"

Abre la medici√≥n en la ficha "Diagrama".

"Copiar"

Copia los objetos seleccionados al portapapeles.

"Borrar"

Borra los objetos seleccionados del √°rbol del proyecto y del dispositivo.

"Exportar medi‚Äê
ci√≥n"

Exporta una medici√≥n como archivo con la extensi√≥n "*.ttrecx" o "*.csv".

"Propiedades"

Muestra las propiedades generales de la medici√≥n (P√°gina 84).

:

La extensi√≥n de archivo "*.ttrec" est√° soportada por motivos de compatibilidad con
V12, pero no contiene informaci√≥n sobre la familia de dispositivos.

Interfaz - √Årbol del proyecto, carpeta "Mediciones superpuestas"
En la carpeta del sistema
"Mediciones superpuestas" se muestran las mediciones
superpuestas configuradas.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

65

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

S√≠mbolos de la carpeta "Mediciones superpuestas"
En la siguiente tabla se explica el significado de los s√≠mbolos de la carpeta del sistema
"Mediciones superpuestas":
S√≠mbolo

Descripci√≥n
Agregar nueva medici√≥n superpuesta
Al hacer doble clic en este s√≠mbolo se agrega una nueva medici√≥n superpuesta y se abre
la ficha "Diagrama".
Medici√≥n superpuesta
Al hacer doble clic en este s√≠mbolo se abre la ficha "Diagrama".

Comandos del men√∫ contextual
En la siguiente tabla se muestran los comandos de men√∫ contextual para la carpeta de
sistema
"Mediciones superpuestas" o una carpeta de grupo
contenida en ella:
Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Agregar grupo"

Inserta una carpeta nueva.

"Agregar nueva
medici√≥n super‚Äê
puesta"

Agrega una nueva medici√≥n superpuesta y abre la ficha "Diagrama".

"Importar medici√≥n
superpuesta"

Importa una medici√≥n superpuesta de un archivo con la extensi√≥n "*.ttcbmx".

En la siguiente tabla se muestran los comandos de men√∫ contextual para mediciones
superpuestas :
Comando del men√∫ contex‚Äê
tual

Descripci√≥n

"Abrir"

Abre en el √°rea de trabajo las mediciones superpuestas seleccionadas.

"Importar medici√≥n"

Importa una medici√≥n de un archivo con la extensi√≥n "*.ttrecx".
La extensi√≥n "*.ttrec" est√° permitida por motivos de compatibilidad con
V12, pero no contiene informaci√≥n sobre la familia de dispositivos.

"Exportar medici√≥n super‚Äê
puesta"

Exporta una medici√≥n superpuesta.

"Copiar"

Copia los objetos seleccionados al portapapeles.

"Pegar"

Inserta mediciones, mediciones de Traces del dispositivo o de una me‚Äê
dici√≥n superpuesta desde el portapapeles.

La medici√≥n superpuesta se guarda con la extensi√≥n "*.ttcbmx" o
"*.csv". El formato "*.ttcbmx" se puede reimportar.

Es posible insertar varios objetos desde el portapapeles si todos son
del mismo tipo.
"Borrar"

Borra los objetos seleccionados del √°rbol del proyecto o del dispositivo.

"Cambiar nombre"

Pasa el objeto seleccionado al modo de edici√≥n.

"Propiedades"

Se visualizan las propiedades generales de la medici√≥n superpuesta.

Tambi√©n es posible copiar mediciones superpuestas entre los dispositivos.

66

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

6.2.2

√Årea de trabajo

6.2.2.1

Interfaz Barra de herramientas de Trace
Existen botones que permiten acceder a herramientas para el manejo de los Traces.
La tabla siguiente muestra las funciones de los botones:
S√≠mbolo

Descripci√≥n
Transferir la configuraci√≥n de Trace seleccionada al dispositivo.
La configuraci√≥n de Trace seleccionada se transfiere al dispositivo.
Transferencia de la configuraci√≥n de Trace seleccionada desde el dispositivo
La configuraci√≥n de Trace seleccionada se transfiere del dispositivo al proyecto
con las opciones de representaci√≥n actuales.
Activar/desactivar visualizaci√≥n
Cambiar la visualizaci√≥n de online a offline y viceversa.
Nota
Si est√°n activados simult√°neamente la observaci√≥n y el escalado autom√°tico, no
es posible anular m√°s acciones con el bot√≥n "Deshacer".
Nota
Al iniciar por primera vez un trace del dispositivo, se ajusta el escalado autom√°tico
para su visualizaci√≥n en el diagrama de curvas. Tenga en cuenta que al volver a
iniciar el registro se mantendr√°n las modificaciones de los ajustes del escalado.
Para observar el registro, active de nuevo manualmente el escalado autom√°tico
si es necesario.
Activaci√≥n de registro
Si se repite el registro de un Trace en el dispositivo, se conservan tambi√©n para
el nuevo registro los ajustes relevantes para la visualizaci√≥n (diagrama de curvas
y tabla de se√±ales).
Nota
Si se reinicia un registro, los valores registrados hasta el momento se pierden.
Para realizar una copia de seguridad de los valores registrados, guarde la medi‚Äê
ci√≥n en el proyecto (P√°gina 109) antes de volver a activar el registro.
Desactivaci√≥n de registro
Borrado de Trace del dispositivo
Borra el Trace seleccionado del dispositivo.
Repetir autom√°ticamente el registro
Una vez finalizado un registro, este se vuelve a activar autom√°ticamente. La
visualizaci√≥n del diagrama de curvas se actualiza al finalizar el registro.
Este tipo de actualizaci√≥n es especialmente adecuado para la Observaci√≥n de
se√±ales r√°pidas (P√°gina 117).
Transferir la medici√≥n seleccionada del dispositivo al proyecto
La medici√≥n se agrega a la carpeta

"Mediciones".

Nota
Solo se guardan los datos que se han cargado desde el dispositivo. Estos datos
se muestran en un diagrama de curvas. Es posible que deba esperar hasta que
se actualice la visualizaci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

67

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
S√≠mbolo

Descripci√≥n
Exportar configuraci√≥n de Trace
Exporta una configuraci√≥n de Trace como archivo con la extensi√≥n "*.ttcfgx". La
extensi√≥n "*.ttcfg" est√° permitida por motivos de compatibilidad con V12, pero no
contiene informaci√≥n sobre la familia de dispositivos.
Crear configuraci√≥n Trace
Crea una configuraci√≥n de Trace a partir de la medici√≥n.
Exportar medici√≥n con los ajustes de la vista actual
Exporta una medici√≥n como archivo con la extensi√≥n "*.ttrecx" o "*.csv". La ex‚Äê
tensi√≥n "*.ttrec" est√° permitida por motivos de compatibilidad con V12, pero no
contiene informaci√≥n sobre la familia de dispositivos.
Importar medici√≥n (solo para mediciones superpuestas)
Importa una medici√≥n de un archivo con la extensi√≥n "*.ttrecx".
La extensi√≥n "*.ttrec" est√° permitida por motivos de compatibilidad con V12, pero
no contiene informaci√≥n sobre la familia de dispositivos.
Exportar medici√≥n superpuesta (solo para mediciones superpuestas)
La medici√≥n superpuesta se guarda con la extensi√≥n "*.ttcbmx" o "*.csv". El for‚Äê
mato "*.ttcbmx" se puede reimportar.
Seleccionar medici√≥n (solo para mediciones superpuestas)
La lista desplegable contiene las mediciones importadas. Seleccione la medici√≥n
deseada para visualizar la configuraci√≥n.

6.2.2.2

Interfaz - Ficha Configuraci√≥n

Interfaz - Configuraci√≥n
La configuraci√≥n de Trace depende del dispositivo y se describe en el
correspondiente dispositivo (P√°gina 120).

6.2.2.3

Interfaz Ficha Diagrama

Interfaz Diagrama de curvas
El diagrama de curvas muestra las se√±ales seleccionadas de un registro. Las se√±ales
anal√≥gicas se representan en el diagrama de curvas superior. Las se√±ales binarias se
visualizan como traza de bits en el diagrama inferior. La representaci√≥n de las se√±ales se
puede adaptar en la tabla de se√±ales (P√°gina 74) y con ayuda de la barra de herramientas del
diagrama de curvas.
En el Trace del proyecto, el diagrama de curvas muestra un registro finalizado o interrumpido.
Puede consultar los distintos registros debajo de cada dispositivo.

68

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones en el diagrama de curvas
La figura siguiente muestra un ejemplo de representaci√≥n:

La escala del diagrama es v√°lida para la se√±al seleccionada (sobre fondo gris) en la leyenda.
La leyenda puede desplazarse y cambiarse de tama√±o con el rat√≥n.
El s√≠mbolo muestra con una l√≠nea vertical el instante del disparo con el tiempo de disparo del
dispositivo.
Con el ajuste "Tiempo (relativo)" para el eje de tiempo, debajo del diagrama de curvas se
ofrece una lista desplegable para seleccionar la unidad. El ajuste "Autom√°tico" adapta la
unidad al rango de tiempo representado.
Nota
Tipos de datos no interpretables
Algunos tipos de datos necesitan un formato definido, p. ej., el tipo de datos
S7 LTime_of_Day. Si no existe este formato, el tipo de datos se interpreta como INT.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

69

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Funciones con la rueda del rat√≥n
La tabla siguiente muestra las funciones que pueden utilizarse con la rueda del rat√≥n en el
diagrama de curvas:
Funciones de la rueda del rat√≥n

Descripci√≥n

Desplazamiento del diagrama de
curvas en sentido vertical

Al girar la rueda del rat√≥n, se desplaza la visualizaci√≥n hacia arri‚Äê
ba o hacia abajo en el diagrama de curvas superior.
Si las se√±ales est√°n dispuestas en pistas, se desplazar√° la visua‚Äê
lizaci√≥n del grupo que se encuentre debajo del cursor.
El puntero del rat√≥n debe estar posicionado encima del diagrama
de curvas con las se√±ales anal√≥gicas.

Desplazamiento del diagrama de
curvas en sentido horizontal

Al girar la rueda del rat√≥n con la tecla <May√∫s> pulsada, se des‚Äê
plaza la visualizaci√≥n a la izquierda o la derecha en el diagrama
de curvas.
El puntero del rat√≥n debe estar posicionado encima del diagrama
de curvas.

Zoom m√°s y Zoom menos

Al girar la rueda del rat√≥n con la tecla <Control> pulsada, se au‚Äê
menta o se reduce la visualizaci√≥n en el diagrama de curvas. El
punto de partida de la ampliaci√≥n o la reducci√≥n es la posici√≥n del
puntero del rat√≥n.
El eje de valores del diagrama de curvas inferior (trazas de bits)
no resulta afectado.
El puntero del rat√≥n debe estar posicionado encima del diagrama
de curvas.

Funciones con el teclado
La tabla siguiente muestra los comandos de teclado que pueden utilizarse al focalizar el
diagrama de curvas:
Combinaci√≥n de teclas

Descripci√≥n

Selecci√≥n de un cursor de medici√≥n
<Ctrl+May√∫s+1>

El cursor de medici√≥n vertical t1 se selecciona o deselecciona.

<Ctrl+May√∫s+2>

El cursor de medici√≥n vertical t2 se selecciona o deselecciona.

<Ctrl+May√∫s+3>

El cursor de medici√≥n horizontal Y1 se selecciona o deselecciona.

<Ctrl+May√∫s+4>

El cursor de medici√≥n horizontal Y2 se selecciona o deselecciona.

<Tab>

Se selecciona el cursor de medici√≥n siguiente.

Posicionamiento de un cursor de medici√≥n vertical
<Izquierda>, <Derecha>

Con la unidad "Puntos de medici√≥n", el cursor de medici√≥n selec‚Äê
cionado se desplaza un punto de medici√≥n desde la se√±al situada
en primer plano. Con la unidad "Tiempo (relativo)", el desplaza‚Äê
miento de los cursores de medici√≥n es de un p√≠xel.

<May√∫s+Izquierda>, <May√∫s+De‚Äê Con la unidad "Puntos de medici√≥n", el cursor de medici√≥n selec‚Äê
recha>
cionado se desplaza 10 puntos de medici√≥n desde la se√±al situa‚Äê
da en primer plano. Con la unidad "Tiempo (relativo)", el despla‚Äê
zamiento de los cursores de medici√≥n es de 10 p√≠xeles.
Posicionamiento de un cursor de medici√≥n horizontal
<Arriba>, <Abajo>

70

El cursor de medici√≥n seleccionado se desplaza un p√≠xel a lo largo
del eje de valores.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Combinaci√≥n de teclas

Descripci√≥n

<May√∫s+Arriba>, <May√∫s+Abajo> El cursor de medici√≥n seleccionado se desplaza 10 p√≠xeles a lo
largo del eje de valores.
Visualizaci√≥n de los cursores de medici√≥n verticales
<Ctrl+barra espaciadora>

Se muestran u ocultan los cursores de medici√≥n verticales.

<Ctrl+May√∫s+barra espaciadora>

Los cursores de medici√≥n verticales se muestran y se centran
para la vista actual.

Cambio de vista
<Barra espaciadora>

Desplazar la imagen

<Ctrl+0>

Ajustar zoom 100 % en el editor abierto

<Ctrl++>

Aplicar zoom m√°s con 10 %

<Ctrl+->

Aplicar zoom menos con 10 %

Comandos del men√∫ contextual
La tabla siguiente muestra los comandos del men√∫ contextual en el diagrama de curvas:
Comando del men√∫ contextual

Descripci√≥n

"Guardar diagrama como imagen
en"

Exporta la visualizaci√≥n actual a un formato gr√°fico, p. ej., como
mapa de bits.

"Copiar imagen en el portapapeles" Copia la visualizaci√≥n actual en el portapapeles.
"Centrar cursor de medici√≥n"

Posiciona los cursores de medici√≥n activados en un punto central
de la visualizaci√≥n actual.

A√±ade el registro visualizado a la carpeta de sistema
(solo panel de mando del eje y PID) ciones".
"Agregar a mediciones"

"Medi‚Äê

"Altura autom√°tica de traza de bits" Adapta autom√°ticamente la altura de las trazas de bits y define
as√≠ el tama√±o del diagrama de curvas inferior.
El ajuste se desactiva autom√°ticamente cuando se modifica ma‚Äê
nualmente el reparto de espacio entre los diagramas de curvas.
Nota
Puede modificar el reparto de espacio vertical entre los diagra‚Äê
mas de curvas superior e inferior. Para ello, estire con el rat√≥n el
eje temporal del diagrama de curvas superior hacia arriba o hacia
abajo.

Barra de herramientas del diagrama de curvas
Mediante botones se ponen a disposici√≥n herramientas para ajustar la representaci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

71

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
La tabla siguiente muestra las funciones de los botones:
S√≠mbolo

Funci√≥n

Descripci√≥n

Deshacer zoom

Acci√≥n de deshacer la √∫ltima funci√≥n de zoom ejecuta‚Äê
da.
Si se han ejecutado varias funciones de zoom, estas
pueden deshacerse paso a paso.

Repetir zoom

Repetici√≥n de la √∫ltima funci√≥n de zoom deshecha. Si
se han deshecho varias funciones de zoom, estas pue‚Äê
den repetirse paso a paso.

Vista normal

Utilizar la vista actual como est√°ndar para este registro.
Si el registro de Trace se vuelve a mostrar con poste‚Äê
rioridad, la vista normal se restablece.

Desplazar la imagen

Desplazamiento de la visualizaci√≥n con el bot√≥n del ra‚Äê
t√≥n pulsado.

Selecci√≥n de zoom

Selecci√≥n de un √°rea cualquiera con el bot√≥n del rat√≥n
pulsado. La visualizaci√≥n se escala en funci√≥n del √°rea
seleccionada.

Selecci√≥n de zoom vertical

Selecci√≥n de un √°rea vertical con el bot√≥n del rat√≥n pul‚Äê
sado. La visualizaci√≥n se escala en funci√≥n del √°rea
seleccionada.

Selecci√≥n de zoom horizontal

Selecci√≥n de un √°rea horizontal con el bot√≥n del rat√≥n
pulsado. La visualizaci√≥n se escala en funci√≥n del √°rea
seleccionada.

Zoom m√°s

Ampliaci√≥n de la visualizaci√≥n. Las √°reas de eje de
tiempo y eje de valor se reducen cada vez que se hace
clic en el bot√≥n. Las curvas se representan m√°s gran‚Äê
des.

Zoom menos

Reducci√≥n de la visualizaci√≥n. Las √°reas de eje de tiem‚Äê
po y eje de valor se ampl√≠an cada vez que se hace clic
en el bot√≥n. Las curvas se representan m√°s peque√±as.

Visualizar todo

Escala la visualizaci√≥n de los datos existentes de modo
que se muestren todo el rango de tiempo y todos los
valores.

Escalado autom√°tico del eje de
valores

Escalado de la visualizaci√≥n de modo que se muestren
todos los valores para el rango de tiempo representado
actualmente.
Se puede modificar relaci√≥n de escalado entre las se‚Äê
√±ales.
Nota
El escalado autom√°tico del eje de valores se detiene al
activar una funci√≥n de zoom del eje de valores. Con
este bot√≥n se activan de nuevo las adaptaciones auto‚Äê
m√°ticas a los valores m√≠nimos/m√°ximos.

72

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
S√≠mbolo

Funci√≥n

Descripci√≥n

Mostrar rango de tiempo com‚Äê
pleto

Escalado de la visualizaci√≥n de modo que se muestren
los valores del rango de valores representado actual‚Äê
mente para todo el rango de tiempo.
El rango de valores visualizado solo se modifica cuando
tambi√©n est√° activado "Mostrar todos los valores" .
Nota
El escalado autom√°tico del eje de tiempo se detiene al
activar una funci√≥n de zoom del eje de tiempo. Con este
bot√≥n se activan de nuevo las adaptaciones autom√°ti‚Äê
cas del rango de tiempo.

Disponer en pistas

Activaci√≥n o desactivaci√≥n de la disposici√≥n en pistas.
Si est√° activada la disposici√≥n en pistas, las se√±ales se
ordenan en mosaico horizontal con sus correspondien‚Äê
tes ejes de valores.
Los grupos de se√±ales se muestran en la misma pista.
Este ajuste no afecta a la visualizaci√≥n de las trazas de
bits.

Conmutaci√≥n de la unidad del
eje de tiempo

Conmutaci√≥n de la unidad del eje de tiempo
Pueden ajustarse las siguientes unidades:
‚óè "Puntos de medici√≥n"
‚óè "Tiempo (relativo)"
Tiempo relativo referido al momento de disparo
‚óè "Sello de tiempo de los puntos de medici√≥n"

Mostrar puntos de medici√≥n

Los puntos de medici√≥n se muestran como peque√±os
c√≠rculos en las curvas.

Representaci√≥n interpolada

Interpolaci√≥n lineal entre dos puntos de medici√≥n con‚Äê
secutivos con n√∫meros en coma flotante.
En caso de interpolaci√≥n lineal no activada (est√°ndar),
la uni√≥n entre los puntos de medici√≥n se traza en esca‚Äê
lones.

Visualizar cursores de medi‚Äê
ci√≥n verticales

Visualizaci√≥n de los cursores de medici√≥n verticales.
La posici√≥n vertical de los dos cursores de medici√≥n
puede desplazarse con el rat√≥n. En la tabla de se√±ales
se muestran en funci√≥n de la posici√≥n las medidas co‚Äê
rrespondientes y la diferencia de los cursores de medi‚Äê
ci√≥n. Para acceder a m√°s informaci√≥n, visualice la pa‚Äê
leta "Cursores de medici√≥n" (P√°gina 85) en la Task
Card Trace.
Use tambi√©n las teclas de cursor. Las acciones siguien‚Äê
tes se pueden realizar mediante las teclas de cursor con
los cursores de medici√≥n verticales:
‚óè Seleccionar
‚óè Posicionar
‚óè Mostrar u ocultar cursor de medici√≥n
‚óè Centrar cursor de medici√≥n

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

73

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
S√≠mbolo

Funci√≥n

Descripci√≥n

Visualizar cursores de medi‚Äê
ci√≥n horizontales

Visualizaci√≥n de los cursores de medici√≥n horizontal.
La posici√≥n horizontal de los dos cursores de medici√≥n
se puede modificar con el rat√≥n.
Para ver los valores o introducir una nueva posici√≥n
para los cursores de medici√≥n, visualice la paleta "Cur‚Äê
sores de medici√≥n" (P√°gina 85) en la Task Card Trace.
Use tambi√©n las teclas de cursor. Las acciones siguien‚Äê
tes se pueden realizar mediante las teclas de cursor con
los cursores de medici√≥n horizontales:
‚óè Seleccionar
‚óè Posicionar

Visualizaci√≥n del rango de tiem‚Äê Mostrar u ocultar el rango de tiempo debajo del diagra‚Äê
po
ma de curvas.
En la visualizaci√≥n del rango de tiempo, el √°rea de vi‚Äê
sualizaci√≥n del diagrama de curvas se representa como
superficie amarilla a partir de una se√±al seleccionada.
La superficie amarilla puede desplazarse y cambiarse
de tama√±o en horizontal por sus bordes con el rat√≥n.

Mostrar leyenda

Mostrar u ocultar la leyenda en el diagrama de curvas y
las denominaciones de trazas de bits.

Mostrar leyenda justificada a la
izquierda

Visualizar la leyenda y las denominaciones de trazas de
bits a la izquierda del diagrama de curvas.

Mostrar leyenda justificada a la
derecha

Visualizar la leyenda y las denominaciones de trazas de
bits a la derecha del diagrama de curvas.

Cambiar color de fondo

Cambio entre diferentes colores de fondo.

Interfaz de la tabla de se√±ales
La tabla de se√±ales muestra una lista de las se√±ales de la medici√≥n seleccionada y ofrece
posibilidades de ajuste para algunas propiedades.
Se pueden modificar los ajustes de Trace en el dispositivo en el modo online. Con el bot√≥n
se pueden aplicar modificaciones de las opciones de representaci√≥n en el proyecto. De lo
contrario, las modificaciones se descartan al pasar al modo offline.
Al agregar el Trace del dispositivo a las mediciones, se guardan los ajustes actuales de la tabla
de se√±ales en la medici√≥n.
Las se√±ales se pueden ordenar mediante Drag & Drop. Puede cambiar el orden de los bits
dentro de una se√±al.

74

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones en la tabla de se√±ales
La figura siguiente muestra un ejemplo de representaci√≥n:

La tabla siguiente muestra los ajustes y las visualizaciones de las se√±ales registradas:
Columna

Descripci√≥n

"Estado"

Indicador de estado

(solo Trace del
proyecto en el
modo online)
Ninguna conexi√≥n online
La configuraci√≥n solo existe offline
Las configuraciones online y offline son distintas
No se dispone de derechos de acceso
Las configuraciones online y offline son id√©nticas
S√≠mbolo de se√±al
o error
Se√±al
Se√±al Failsafe
Se√±al de un bloque de datos
Se√±al de un bloque de datos Failsafe
Se√±al calculada (f√≥rmula)
Error en la f√≥rmula de la se√±al calculada
Selecci√≥n para la visualizaci√≥n en el diagrama de curvas: puede seleccionar como
m√°ximo 16 se√±ales.
El punto indica que para la se√±al en la selecci√≥n de bits hay al menos un bit se‚Äê
leccionado para visualizar como traza de bits.
"Referencia de
se√±al"
(solo Trace)

N√∫mero de se√±al generado autom√°ticamente

"Dispositivo"
(solo Trace del
proyecto)

Visualizaci√≥n del nombre de dispositivo

"Nombre"

Visualizaci√≥n del nombre de se√±al

Con la referencia de se√±al se accede a la se√±al en las f√≥rmulas.

A hacer clic una vez sobre el nombre de una se√±al mostrada se actualiza la escala
en el diagrama de curvas.
En la √∫ltima fila sin s√≠mbolo de se√±al puede introducirse un nombre para una se√±al
calculada. Al introducir el nombre, se crea la se√±al calculada.
"Medici√≥n"
(solo mediciones
superpuestas)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Visualizaci√≥n de la medici√≥n
Muestra el nombre de la medici√≥n a la que pertenece la se√±al.

75

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Columna

Descripci√≥n
Apertura de selecci√≥n de bits
Para los siguientes tipos de datos pueden seleccionarse tambi√©n bits por separado
para la visualizaci√≥n como traza de bits en el diagrama de curvas inferior:
‚óè Byte, Word, DWord, LWord
‚óè SInt, USInt, Int, UInt, DInt, UDInt, LInt, ULInt
Ejemplo de una selecci√≥n de bits abierta para el tipo de datos DWord:

Seleccione o deseleccione el bit correspondiente la visualizaci√≥n haciendo clic en
el s√≠mbolo .
"Tipo de datos"

Visualizaci√≥n del tipo de datos

"Formato de vi‚Äê
sualizaci√≥n"

Formato de visualizaci√≥n de la se√±al
Se ofrecen para su selecci√≥n los formatos de visualizaci√≥n permitidos para la se√±al.
En "Ajuste predeterminado" se ajusta un formato de visualizaci√≥n adecuado para
el tipo de datos.

"Direcci√≥n"

Visualizaci√≥n de la direcci√≥n de la se√±al
En las variables optimizadas o con seguridad de tipos, el campo permanece vac√≠o.

"F√≥rmula"
(solo Trace)

Visualizaci√≥n o introducci√≥n de una f√≥rmula
Una f√≥rmula puede contener funciones matem√°ticas con n√∫meros y se√±ales. Las
f√≥rmulas pueden crearse con total comodidad con el editor de f√≥rmulas.
Llamada del editor de f√≥rmulas para se√±ales calculadas
Haga clic en el s√≠mbolo para llamar el editor de f√≥rmulas.

"Color"

Visualizaci√≥n y posibilidad de ajuste del color de la se√±al

"Grupo de se√±a‚Äê
les"

Muestra o escribe el nombre de un grupo de se√±ales
Para todas las se√±ales de un grupo de se√±ales se hacen iguales las escalas en Y.
Especifique un mismo nombre de grupo de se√±ales para todas las se√±ales que
deban tener la misma escala.
Para eliminar las se√±ales del grupo de se√±ales, borre el nombre del grupo de
se√±ales
Los grupos de se√±ales se guardan con la funci√≥n "Usar vista actual como est√°ndar"
(bot√≥n
).
Notas
Las se√±ales binarias no se pueden agrupar.
En el formato de visualizaci√≥n Hex, agrupe solamente se√±ales cuyo formato sea
compatible con la visualizaci√≥n en lo que respecta al signo.

76

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Columna
Campo gris
para s√≠mbolo
de cadena

Descripci√≥n
Para agregar la se√±al a un grupo de se√±ales o borrarla del grupo, mueva el puntero
o
).
del rat√≥n encima del campo gris o el s√≠mbolo de cadena (
Para agregar la se√±al a un grupo de se√±ales o crear un nuevo grupo, haga clic en
el s√≠mbolo de cadena
.
Para eliminar la se√±al de un grupo de se√±ales, haga clic en el s√≠mbolo de cade‚Äê
na
.
El s√≠mbolo de cadena
seleccionada.

muestra todas las se√±ales del mismo grupo que la se√±al

Campo de en‚Äê El campo de entrada muestra el nombre del grupo de se√±ales.
trada
Al igual que el s√≠mbolo de cadena, este campo permite asignar un nombre de grupo
(introduci√©ndolo como texto) o borrarlo.
"Escala Y m√≠n."

Visualizaci√≥n o introducci√≥n del valor m√≠nimo para el escalado de la se√±al

"M√°x. escala Y"

Visualizaci√≥n o introducci√≥n del valor m√°ximo para el escalado de la se√±al

"Y(t1)"

Visualizaci√≥n del valor en la posici√≥n del primer cursor de medici√≥n

"Y(t2)"

Visualizaci√≥n del valor en la posici√≥n del segundo cursor de medici√≥n

"ŒîY"

Visualizaci√≥n de la diferencia de valor entre el primer y el segundo cursor de me‚Äê
dici√≥n
Selecci√≥n de la escala autom√°tica del eje de valores para la se√±al
Si la casilla de verificaci√≥n est√° activada, se ajustan los valores m√≠nimo y m√°ximo
para el escalado de la se√±al de modo que se muestren todos los valores para el
rango de tiempo representado actualmente.
de la barra de herramientas del diagrama de curvas activa el escalado
El bot√≥n
autom√°tico en todas las se√±ales escalables.

"Unidad"

Visualizaci√≥n de la unidad
P. ej., para valores de objetos tecnol√≥gicos con unidad asignada

"Comentario"

Visualizaci√≥n y posibilidad de introducci√≥n de un comentario relativo a la se√±al

Comandos del men√∫ contextual
La tabla siguiente muestra los comandos del men√∫ contextual de la tabla de se√±ales:
Comando del men√∫ contextual

Descripci√≥n

"Insertar nueva se√±al calculada"

Inserta una nueva se√±al calculada en la tabla encima del lugar
seleccionado.

"Editar f√≥rmula"

Abre el editor de f√≥rmulas para la se√±al calculada.

"Cortar"

No seleccionable

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Insertar"

No seleccionable

"Borrar"

No seleccionable

"Cambiar nombre"

No seleccionable

"Formato de visualizaci√≥n"

Permite cambiar el formato de visualizaci√≥n.
Se ofrecen para su selecci√≥n los formatos de visualizaci√≥n per‚Äê
mitidos para la se√±al.

"Mostrar se√±al(es)"

Muestra las se√±ales seleccionadas en el diagrama de curvas.

"Ocultar se√±al(es)"

Oculta las se√±ales seleccionadas en el diagrama de curvas.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

77

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Consulte tambi√©n
Utilizaci√≥n de la tabla de se√±ales (P√°gina 114)
Uso del grupo de se√±ales en la tabla de se√±ales (P√°gina 115)

Interfaz: editor de f√≥rmulas
El editor de f√≥rmulas ofrece diversas funciones matem√°ticas para analizar se√±ales. Abra el
editor en la tabla de se√±ales con el bot√≥n
.

Posibilidades de parametrizaci√≥n e indicadores del editor de f√≥rmulas
La figura siguiente muestra un ejemplo de representaci√≥n:

Figura 6-1

Editor de f√≥rmulas

La tabla siguiente muestra las posibilidades de parametrizaci√≥n y los indicadores del editor de
f√≥rmulas:
Campo/Bot√≥n

Descripci√≥n

"Nombre"

Visualizaci√≥n e introducci√≥n del nombre de la f√≥rmula creada.
El nombre debe ser un√≠voco y solo debe contener caracteres que tambi√©n est√©n
permitidos en los nombres de archivo de Windows.

"Tipo de datos"

Visualizaci√≥n del tipo de datos de la f√≥rmula.
El tipo de datos tiene preasignado un n√∫mero en coma flotante del tipo LREAL y no
se puede modificar.

"Unidad"

Visualizaci√≥n e introducci√≥n de una unidad.
Unidad definida por el usuario de libre elecci√≥n.

78

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Campo/Bot√≥n

Descripci√≥n

Lista desplegable
con se√±ales

Selecci√≥n de las se√±ales.
La lista desplegable contiene las se√±ales de la tabla de se√±ales e inserta la se√±al
seleccionada en la f√≥rmula.

"Entrada de la f√≥r‚Äê Campo de texto para visualizar e introducir la f√≥rmula.
mula"
Cree una f√≥rmula introduci√©ndola en este campo de texto o utilizando los botones
para funciones matem√°ticas.
En el campo de texto, se pueden referenciar se√±ales en la f√≥rmula mediante la
referencia precedida del s√≠mbolo $ o escribiendo el nombre entre comillas dobles.
Es posible utilizar ambos m√©todos en una misma entrada.
En la f√≥rmula no se permiten bits de una selecci√≥n de bits (p. ej., bajo el tipo de
datos INT).
Funciones mate‚Äê
m√°ticas

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

79

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Campo/Bot√≥n

Descripci√≥n

+

Suma

-

Resta

*

Multiplicaci√≥n

/

Divisi√≥n

()

Par√©ntesis
Agrupaci√≥n de expresiones

SQR

Cuadrado

SQRT

Ra√≠z cuadrada

ABS

Valor absoluto
Calcula el valor absoluto de un n√∫mero.
Ejemplos
ABS(5) ‚Üí 5
ABS(-3) ‚Üí 3
ABS(-3.14) ‚Üí 3.14

MOD

M√≥dulo
Calcula el resto de una divisi√≥n
Ejemplos
MOD(5,3) ‚Üí 2
MOD(3.14,3) ‚Üí 0.14

REC

Valor rec√≠proco (1/x)

DIFF 1)

Diferenciaci√≥n num√©rica
Ejemplos
F√≥rmula: DIFF($0,SAMPLETIME)

INT

1)

Integraci√≥n num√©rica
Ejemplos
F√≥rmula: INT($0,SAMPLETIME)

RMS 1)

Media cuadr√°tica
La media cuadr√°tica se calcula sumando los cuadrados de todas las medidas y
dividiendo el resultado por el n√∫mero de medidas. La ra√≠z cuadrada de este valor
representa la media cuadr√°tica.
Ejemplos
F√≥rmula: RMS($0,SAMPLETIME)

AV

Filtro de media de primer a quinto orden
Si no se indica ning√∫n orden, se ejecuta un filtro de valor medio de 1.er orden.
Ejemplos
AV($0,1) ‚Üí Filtro de valor medio de 1.er orden
AV($0,5) ‚Üí Filtro de valor medio de 5.¬∫ orden

œÄ

Constante matem√°tica PI

AM

Media aritm√©tica

DIF

Diferenciaci√≥n simple con filtro de media de primer a quinto orden.

La media aritm√©tica es un valor medio m√≥vil de cinco puntos de medici√≥n.
Si no se indica ning√∫n orden, se ejecuta una diferenciaci√≥n simple con filtro de
1.er orden.
Ejemplos

80

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Campo/Bot√≥n

Descripci√≥n
DIF($0,1) ‚Üí Diferenciaci√≥n simple con filtro de 1.er orden
DIF($0,5) ‚Üí Diferenciaci√≥n simple con filtro de 5.¬∫ orden
DIF($0) ‚Üí Diferenciaci√≥n simple con filtro de 1.er orden
Ejemplo: C√°lculo de una curva de aceleraci√≥n a partir de una se√±al de velocidad
$0: Se√±al de velocidad en metros por segundo
Tiempo de ciclo del registro de velocidad equidistante: 1 ms
F√≥rmula: DIF($0,1)/0.001
Unidad: m/s2

DIF2

Diferenciaci√≥n doble con filtro de valor medio de 1.er a 5.¬∫ orden.
Si no se indica ning√∫n orden, se ejecuta un c√°lculo de la diferencia doble con filtro
de 1.er orden.
Ejemplos
DIF2($0,1) ‚Üí Diferenciaci√≥n doble con filtro de 1.er orden
DIF2($0,5) ‚Üí Diferenciaci√≥n doble con filtro de 5.¬∫ orden
DIF2($0) ‚Üí Diferenciaci√≥n doble con filtro de 1.er orden
Ejemplo: C√°lculo de una curva de aceleraci√≥n a partir de una curva de posici√≥n
$0: Curva de posici√≥n en metros
Tiempo de ciclo del registro de posici√≥n equidistante: 1 ms
F√≥rmula: DIF2($0,1)/SQR(0.001)
Unidad: m/s2

"Mostrar nombre
de se√±al"

Visualizaci√≥n del nombre de la se√±al.
Si la casilla de verificaci√≥n est√° activada, en la f√≥rmula se muestran los nombres de
las se√±ales en lugar de sus referencias.

"Validar"

Comprobaci√≥n de la validez de la f√≥rmula.

"Resultado de la
validaci√≥n"

Resultado de la validaci√≥n.
Muestra el resultado de la validaci√≥n e indica un error y su ubicaci√≥n.

"OK"

Aplica las entradas en el editor de f√≥rmulas.

"Cancelar"

Rechaza las entradas en el editor de f√≥rmulas.

1)

La constante SAMPLETIME solo se ofrece con ciclos de registro equidistantes. La unidad de tiempo
para SAMPLETIME siempre es Œºs.

Nota
Las funciones DIF, DIF2, DIFF, AM, RMS, AV e INT solo pueden procesar una se√±al registrada
como argumento. No todas las f√≥rmulas no v√°lidas se marcan como errores.

Interfaz - Mediciones (Mediciones superpuestas)
La ficha Mediciones muestra las distintas mediciones y ofrece, entre otras cosas, posibilidades
de ajuste para la sincronizaci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

81

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones en la ficha Mediciones
La figura siguiente muestra un ejemplo de representaci√≥n:

La tabla siguiente muestra los ajustes y las visualizaciones para las mediciones:
Columna

Descripci√≥n

Alineaci√≥n de las mediciones
"Disparador/
punto de me‚Äê
dici√≥n"

Alineaci√≥n de las mediciones en funci√≥n del disparador o el punto de medici√≥n

"Marca de
tiempo (tiem‚Äê
po absoluto)"

Alineaci√≥n de las mediciones seg√∫n la marca de tiempo

El punto cero individual de la medici√≥n se define en la columna "Orientaci√≥n" de la
tabla.
Las se√±ales se alinean en funci√≥n del tiempo a partir de la marca de tiempo abso‚Äê
luta.

Columnas de tabla
Visualizaci√≥n est√°tica del s√≠mbolo de medici√≥n
"Nombre"

Visualizaci√≥n y posibilidad de modificaci√≥n de los nombres de medici√≥n
El nombre debe ser un√≠voco y puede modificarse.

"Orientaci√≥n"

Alineaci√≥n de la medici√≥n (ajustable solo con la casilla de verificaci√≥n "Disparador/
punto de medici√≥n" activada)
Define el punto cero individual de una medici√≥n. Todas las se√±ales de la medici√≥n
se visualizar√°n con este punto cero como referencia.
Pueden realizarse los siguientes ajustes:
‚óè Disparo
‚óè Primer punto de medici√≥n tras el evento de disparo
‚óè Primer punto de medici√≥n
‚óè √öltimo punto de medici√≥n

"Offset"

Offset relativo al eje temporal
Desplaza la medici√≥n hacia la izquierda o hacia la derecha por el eje temporal en
el offset indicado.
El offset tambi√©n puede transferirse a la celda a trav√©s del portapapeles desde el
valor ŒîX del cursor de medici√≥n. Ver Alineaci√≥n exacta de mediciones (mediciones
superpuestas) (P√°gina 119).

82

"Marca de
tiempo"

Indicaci√≥n del instante de disparo

"Comentario"

Visualizaci√≥n y posibilidad de introducci√≥n de un comentario relativo a la se√±al

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Comandos del men√∫ contextual
La tabla siguiente muestra los comandos del men√∫ contextual de la tabla de se√±ales:
Comando del men√∫ contextual

Descripci√≥n

"Cortar"

No seleccionable

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Insertar"

No seleccionable

"Borrar"

No seleccionable

"Cambiar nombre"

Pasa la celda seleccionada al modo de edici√≥n.

"Importar medici√≥n"

Importa una medici√≥n desde un archivo con la extensi√≥n
"*.ttrecx", p. ej.
La importaci√≥n es independiente del dispositivo y tambi√©n resulta
adecuada, p. ej., para comparar las mediciones de un PLC con las
mediciones de un accionamiento.
La extensi√≥n de archivo "*.ttrec" est√° soportada por motivos de
compatibilidad con V12, pero no contiene informaci√≥n sobre la
familia de dispositivos.

"Exportar medici√≥n"

Exporta una medici√≥n como archivo con la extensi√≥n "*.ttrecx" o
"*.csv".
La extensi√≥n de archivo "*.ttrec" est√° soportada por motivos de
compatibilidad con V12, pero no contiene informaci√≥n sobre la
familia de dispositivos.

6.2.2.4

Interfaz - Ficha Selecci√≥n de se√±al (Mediciones superpuestas)

Interfaz - Selecci√≥n de se√±al (Mediciones superpuestas)
La ficha Selecci√≥n de se√±al muestra las se√±ales de todas las mediciones y permite
preseleccionar las se√±ales que aparecen en la tabla de se√±ales del diagrama.

Posibilidades de ajuste y visualizaciones en la ficha Selecci√≥n de se√±al
La figura siguiente muestra un ejemplo de representaci√≥n:

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

83

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
La tabla siguiente muestra los ajustes y las visualizaciones de la tabla:
Columna

Descripci√≥n
Visualizaci√≥n est√°tica del s√≠mbolo de se√±al

"Disponible en el diagrama"

Selecci√≥n para la visualizaci√≥n en el diagrama de curvas
Con la selecci√≥n activada, la se√±al se env√≠a a la tabla de se√±ales
del diagrama de curvas.

"Medici√≥n"

Visualizaci√≥n de la medici√≥n a la que pertenece la se√±al.

"Nombre"

Visualizaci√≥n del nombre de se√±al

"Tipo de datos"

Visualizaci√≥n del tipo de datos

"Direcci√≥n"

Visualizaci√≥n de la direcci√≥n (no con variables simb√≥licas)

"Grupo de se√±ales"

Visualizaci√≥n del grupo de se√±ales

"Comentario"

Visualizaci√≥n de un comentario relativo a la se√±al

Encontrar√° m√°s informaci√≥n sobre cada uno de los ajustes en Interfaz de la tabla de se√±ales
(P√°gina 74).

Comandos del men√∫ contextual
La tabla siguiente muestra los comandos del men√∫ contextual de la selecci√≥n de se√±al:
Comando del men√∫ contextual

Descripci√≥n

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Mostrar selecci√≥n en la tabla de
se√±ales"

Las se√±ales seleccionadas se muestran en la tabla de se√±ales y
est√°n disponibles en el diagrama.

"Eliminar selecci√≥n de la tabla de
se√±ales"

Las se√±ales eliminadas no estar√°n disponibles en el diagrama.

Es posible seleccionar varios objetos.

6.2.3

Ventana de inspecci√≥n

6.2.3.1

Interfaz: ventana de inspecci√≥n
La ventana de inspecci√≥n muestra informaci√≥n general sobre el Trace.
Se dispone de la siguiente informaci√≥n adicional para las mediciones:
‚óè √Årea Marca de tiempo
La disponibilidad de las marcas de tiempo depende de las condiciones de registro
configuradas.
‚óè √Årea Puntos de medici√≥n
‚óè √Årea Tiempo de ciclo
En caso de registros equidistantes, se muestra el tiempo entre dos puntos de medici√≥n.
Este tiempo puede utilizarse, p. ej., para realizar an√°lisis en el editor de f√≥rmulas.

84

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Ejemplo de marcas de tiempo
La figura siguiente muestra un ejemplo de marcas de tiempo de una medici√≥n:
'XUDFL¬µQyGHyUHJLVWUR

3ULPHUySXQWRyPHGLGR







0RPHQWRyGHyDFWLYDFL¬µQ
7UDQVIHUHQFLDGHO7UDFHDO
GLVSRVLWLYR

,QWHUYDORGHWLHPSRGHSUHGLVSDUR







¬úOWLPRySXQWRyPHGLGR









W

0RPHQWRyGHyGLVSDUR

0DUFDyGHyWLHPSRyGHOySULPHUy
SXQWRyPHGLGR

0DUFDyGHyWLHPSRyGHOy¬ºOWLPRy
SXQWRyPHGLGR

Nota
An√°lisis de mediciones con aparici√≥n espor√°dica de una condici√≥n de registro
Al evaluar las mediciones, tenga en cuenta que puede no haberse cumplido la condici√≥n de
registro entre el momento de su activaci√≥n y el momento de disparo.

6.2.4

Task Card Trace

6.2.4.1

Interfaz - Paleta Cursores de medici√≥n
La paleta "Cursores de medici√≥n" muestra la posici√≥n de los cursores de medici√≥n en el
diagrama de curvas y los valores de los puntos de intersecci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

85

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace

Posibilidades de ajuste y visualizaciones de la paleta "Cursores de medici√≥n"
La figura siguiente muestra la paleta "Cursores de medici√≥n":

La tabla siguiente describe los ajustes y las visualizaciones:
Ajuste/visualizaci√≥n

Descripci√≥n

Cursores de medici√≥n horizontal
Y1

Posici√≥n del primer cursor de medici√≥n
Este valor indica la posici√≥n relativa a la escala de la se√±al seleccionada ac‚Äê
tualmente.
Adem√°s de desplazar con el rat√≥n, puede introducir una nueva posici√≥n del
cursor de medici√≥n en este campo de entrada.

Y2

Posici√≥n del segundo cursor de medici√≥n
Este valor indica la posici√≥n relativa a la escala de la se√±al seleccionada ac‚Äê
tualmente.
Adem√°s de desplazar con el rat√≥n, puede introducir una nueva posici√≥n del
cursor de medici√≥n en este campo de entrada.

ŒîY

Visualizaci√≥n de la diferencia de posici√≥n entre el primer y el segundo cursor de
medici√≥n

Cursores de medici√≥n verticales

86

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.2 Interfaz de software de Trace
Ajuste/visualizaci√≥n
t1

Descripci√≥n
Posici√≥n del primer cursor de medici√≥n
Adem√°s de desplazar con el rat√≥n, puede introducir una nueva posici√≥n del
cursor de medici√≥n en este campo de entrada.

t2

Posici√≥n del segundo cursor de medici√≥n
Adem√°s de desplazar con el rat√≥n, puede introducir una nueva posici√≥n del
cursor de medici√≥n en este campo de entrada.

Œît

Visualizaci√≥n de la diferencia de posici√≥n entre el primer y el segundo cursor de
medici√≥n

Puntos de intersecci√≥n con se√±al seleccionada
Y(t1)

Visualizaci√≥n del valor en la posici√≥n del primer cursor de medici√≥n

Y(t2)

Visualizaci√≥n del valor en la posici√≥n del segundo cursor de medici√≥n

ŒîY

Visualizaci√≥n de la diferencia de valor entre el primer y el segundo cursor de
medici√≥n

Evaluaci√≥n matem√°tica en el √°rea de los cursores de medici√≥n [t1;t2] para la se√±al seleccionada
AM(Y)

Valor medio
Se calcula la media aritm√©tica del √°rea situada entre los cursores de medici√≥n
verticales.

INT(Y)

Integral
Se calcula la integral del √°rea situada entre los cursores de medici√≥n verticales.

RMS(Y)

Valor efectivo
Se calcula el valor efectivo del √°rea situada entre los cursores de medici√≥n
verticales.

Consulte tambi√©n
Interfaz Diagrama de curvas (P√°gina 68)

6.2.4.2

Interfaz - Paleta Instant√°neas
La paleta "Instant√°neas" permite guardar y restaurar diferentes vistas de una medici√≥n.
Se crea una instant√°nea de la vista actual en la ficha "Diagrama". Las instant√°neas se
almacenan en la medici√≥n con el proyecto.

Posibilidades de ajuste y visualizaciones de la paleta "Instant√°neas"
La figura siguiente muestra la paleta "Instant√°neas":

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

87

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto
La tabla siguiente muestra las funciones de los botones:
S√≠mbolo

Descripci√≥n
Crear instant√°nea de la vista actual
Guarda la vista actual de la ficha "Diagrama" como instant√°nea.

La tabla siguiente muestra los ajustes y las visualizaciones:
Columna

Descripci√≥n
Visualizaci√≥n est√°tica del s√≠mbolo de la instant√°nea

"Nombre"

Visualizaci√≥n y posibilidad de modificaci√≥n del nombre

"Marca de tiem‚Äê
po"

Visualizaci√≥n de la hora de creaci√≥n de la instant√°nea

"Comentario"

Visualizaci√≥n y posibilidad de introducci√≥n de un comentario

Es posible seleccionar y eliminar varias l√≠neas.
Haciendo clic en una l√≠nea se abre la medici√≥n con la vista almacenada en la ficha "Diagrama".

Comandos del men√∫ contextual
La tabla siguiente muestra los comandos del men√∫ contextual de la tabla:
Comando del men√∫ contextual

Descripci√≥n

"Restaurar instant√°nea"

Muestra la medici√≥n con la vista almacenada en la ficha "Diagra‚Äê
ma".

"Borrar"

Borra la instant√°nea

"Cambiar nombre"

Pasa la celda al modo de edici√≥n

Es posible seleccionar y eliminar varias l√≠neas.

6.3

Interfaz de software de Trace del proyecto

6.3.1

Estructura de la interfaz
La interfaz de usuario de Trace del proyecto consta de varias √°reas.
La siguiente figura muestra un ejemplo de la distribuci√≥n de la interfaz:

88

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto

1



2
3

4

5

7

√Årbol del proyecto
Gestionar y crear Traces del proyecto y mediciones directamente en el √°rbol del proyecto y mediante
comandos del men√∫ contextual.
√Årea de trabajo

‚ë† Barra de t√≠tulo del √°rea de trabajo

Muestra el nombre del Trace del proyecto.

‚ë° Barra de herramientas del Trace del proyecto
Botones para administrar los Traces del proyecto:
‚óè Transferencia de configuraciones de Trace a los dispositivos
‚óè Mostrar la vista general de estados de los dispositivos participantes
‚óè Establecer conexi√≥n online con los dispositivos participantes
‚óè Activar/desactivar Traces del proyecto
‚óè Borrado de Traces del proyecto
‚óè Transferencia de mediciones desde los dispositivos al proyecto

‚ë¢ Visualizaci√≥n de estado del Trace del proyecto

Visualizaci√≥n del estado actual del registro.

‚ë£ Ficha Configuraci√≥n

Configuraci√≥n de los dispositivos participantes y las se√±ales para el Trace del proyecto.

‚ë§ Ficha Diagrama

Visualizaci√≥n de los valores registrados en forma de diagrama de curvas y de las se√±ales de la
medici√≥n visualizada.
Definici√≥n de las opciones de representaci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

89

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto
Task Card "Trace"

Muestra los datos de los cursores de medici√≥n con evaluaci√≥n matem√°tica ‚ë• y las instant√°neas.

‚ë¶ Ventana de inspecci√≥n

Configuraci√≥n espec√≠fica del dispositivo acerca de la duraci√≥n del registro, la condici√≥n de disparo y la
selecci√≥n de se√±al.
Visualizaci√≥n de informaci√≥n general sobre el Trace del proyecto.

Consulte tambi√©n
Dispositivos (P√°gina 120)

6.3.2

√Årbol del proyecto

6.3.2.1

Interfaz - √Årbol del proyecto, carpeta "Funciones para varios dispositivos" - "Traces del
proyecto"
En la carpeta de sistema
"Traces del proyecto" se muestran las mediciones
configuraciones de los Traces del proyecto.

y las

Al hacer doble clic en un Trace del proyecto, se abre la correspondiente ficha "Configuraci√≥n"
o "Diagrama" en el √°rea de trabajo.

S√≠mbolos de la carpeta "Traces del proyecto"
En la siguiente tabla se explica el significado de los s√≠mbolos de la carpeta
proyecto":
S√≠mbolo

"Traces del

Descripci√≥n
Agregar configuraci√≥n de Trace del proyecto
Al hacer doble clic en este s√≠mbolo, se agrega una nueva configuraci√≥n de Trace del
proyecto y se abre la ficha "Configuraci√≥n".
Configuraci√≥n de Trace del proyecto
Al hacer doble clic en este s√≠mbolo, se abre la ficha "Configuraci√≥n" o "Diagrama".
Carpeta "Mediciones"
La carpeta contiene mediciones superpuestas que se agregan con el bot√≥n
. Las
mediciones son compatibles con las mediciones superpuestas dentro de los dispositivos.
Si se copia o se desplaza la medici√≥n superpuesta a la carpeta correspondiente de un
dispositivo, se muestran las configuraciones de las distintas mediciones.
Medici√≥n
Al hacer doble clic en este s√≠mbolo se abre la ficha "Diagrama".

90

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto

Comandos del men√∫ contextual
En la siguiente tabla se muestran los comandos del men√∫ contextual para la carpeta de
sistema
"Traces del proyecto":
Comando del me‚Äê
n√∫ contextual

Descripci√≥n

"Agregar nuevo
Agrega un nuevo Trace del proyecto y abre la ficha "Configuraci√≥n".
trace del proyecto"

En la siguiente tabla se muestran los comandos de men√∫ contextual para la configuraci√≥n del
Trace del proyecto :
Comando del men√∫
contextual

Descripci√≥n

"Borrar"

Borra los objetos seleccionados del √°rbol del proyecto o del dispositivo.

"Cambiar nombre"

Pasa el objeto seleccionado al modo de edici√≥n.

6.3.3

√Årea de trabajo

6.3.3.1

Interfaz - Barra de herramientas del Trace del proyecto
Existen botones que permiten acceder a herramientas para el manejo del Trace del proyecto.
La tabla siguiente muestra las funciones de los botones:
S√≠mbolo

Descripci√≥n
Transferencia de configuraciones de Trace a los dispositivos
Las configuraciones de Trace se transfieren a los dispositivos participantes.
Visualizaci√≥n de la vista general de estados
Muestra la vista general de estados (P√°gina 92) de los dispositivos participantes.
Establecer conexi√≥n online
Se establece la conexi√≥n online con los dispositivos participantes.
Activaci√≥n de registro
Si se repite el registro de un Trace en el dispositivo, se conservan tambi√©n para
el nuevo registro los ajustes relevantes para la visualizaci√≥n (diagrama de curvas
y tabla de se√±ales).
No se puede repetir un registro interrumpido.
Nota
Si se reinicia un registro, los valores registrados hasta el momento se pierden.
Para realizar una copia de seguridad de los valores registrados, guarde la medi‚Äê
ci√≥n en el proyecto antes de volver a activar el registro.
Desactivaci√≥n de registro
Desactiva los Traces en todos los dispositivos con acceso online.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

91

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto
S√≠mbolo

Descripci√≥n
Borrar Traces de los dispositivos
Borra los Traces de los dispositivos participantes con acceso online.
Transferencia de mediciones desde los dispositivos al proyecto
Las mediciones se agregan a la carpeta de sistema

"Mediciones".

Nota
Solo se guardan los datos que se han cargado desde los dispositivos. Estos datos
se muestran en un diagrama de curvas. Es posible que deba esperar hasta que
se actualice la visualizaci√≥n.

6.3.3.2

Interfaz - Vista general de estados de los dispositivos participantes
El cuadro de di√°logo muestra informaci√≥n de estado sobre los dispositivos participantes.
En el caso de los dispositivos participantes con estado sin fallo, puede transferir las
configuraciones de Trace a los dispositivos.

Visualizaci√≥n en la tabla de la vista general de estados
La tabla siguiente muestra las visualizaciones de la vista general de estados:
Columna

Descripci√≥n

-

Indica si hay un fallo para el Trace del proyecto en un dispositivo parti‚Äê
cipante o si la configuraci√≥n de Trace es incorrecta.
Un tooltip sobre el s√≠mbolo muestra informaci√≥n sobre la causa del error.
Significado en el modo offline
‚óè Configuraci√≥n de Trace incorrecta
Significado en el modo online
‚óè Configuraci√≥n de Trace incorrecta
‚óè Se ha interrumpido el registro
‚óè Error de conexi√≥n

Dispositivo

Visualizaci√≥n del nombre de dispositivo

Estado del dispositivo

Indicador de estado de la conexi√≥n online
Offline
Conectar o desconectar
Online

Estado del Trace

Visualizaci√≥n de estado del Trace
Un tooltip sobre el s√≠mbolo muestra informaci√≥n sobre el estado.
Las configuraciones online y offline son id√©nticas
Las configuraciones online y offline son distintas
La configuraci√≥n solo existe offline

92

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto

Soluciones en caso de error
La lista siguiente muestra posibles causas de error y sus correspondientes soluciones.
‚óè Firmware
En los dispositivos (P√°gina 120) se describe a partir de que firmware admite un dispositivo
el Trace del proyecto, si lo admite.
‚óè Configuraci√≥n de Trace
En la ficha "Propiedades" de la ventana de inspecci√≥n, compruebe los ajustes del
dispositivo en cuesti√≥n.
‚óè Registro interrumpido
Con una nueva transferencia de las configuraciones de Trace puede iniciar de nuevo un
registro interrumpido.
‚óè Requisitos del Trace del proyecto
Compruebe si se cumplen los requisitos generales para el Trace del proyecto (P√°gina 57).

6.3.3.3

Interfaz - Ficha Configuraci√≥n

Interfaz - Configuraci√≥n
En la ficha "Configuraci√≥n" se establecen los dispositivos participantes para el Trace del
proyecto. La configuraci√≥n de Trace dependiente del dispositivo y las propiedades del Trace
del proyecto se configuran en la ventana de inspecci√≥n (P√°gina 94).
La configuraci√≥n de Trace indicada se corresponde siempre con la configuraci√≥n offline,
incluso con una conexi√≥n online establecida. Transfiera las modificaciones en las
configuraciones de Trace a los dispositivos mediante el bot√≥n
.

Posibilidades de ajuste y visualizaciones en la sinopsis de los dispositivos participantes
La figura siguiente muestra un ejemplo de representaci√≥n de la tabla sin√≥ptica:

La tabla siguiente muestra los ajustes y las visualizaciones de los dispositivos participantes:
Columna

Descripci√≥n

Dispositivo

Introducci√≥n del nombre de dispositivo
Bot√≥n para abrir la tabla de selecci√≥n de dispositivos
El bot√≥n se muestra al seleccionar la fila de la tabla. Al hacer clic en el
s√≠mbolo, se abre una tabla con los dispositivos que pueden seleccionar‚Äê
se. El dispositivo seleccionado se muestra en el campo de entrada.

Disparo

El s√≠mbolo

indica qu√© dispositivos pueden disparar un disparador

Configure este ajuste dependiente del dispositivo en la ficha "Propieda‚Äê
des" de la ventana de inspecci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

93

Uso de la funci√≥n Trace y de analizador l√≥gico
6.3 Interfaz de software de Trace del proyecto
Columna

Descripci√≥n

Momento de registro

Visualizaci√≥n del momento de registro
En la ficha "Propiedades" de la ventana de inspecci√≥n, configure el ciclo
(OB en una CPU SIMATIC) con el que debe realizarse el registro.

Ciclo de reloj

Visualizaci√≥n del ciclo de reloj resultante de la selecci√≥n del momento de
registro

Registrar todos

Introducci√≥n de la reducci√≥n

N√∫mero de puntos de medi‚Äê Introducci√≥n del n√∫mero de puntos de medici√≥n que se van a registrar
ci√≥n
La duraci√≥n de registro se adapta consecuentemente a este dato.
Duraci√≥n de registro

Introducci√≥n de la duraci√≥n de registro
El n√∫mero de puntos de medici√≥n se adapta consecuentemente a este
dato.

Error

Visualizaci√≥n de un error en la configuraci√≥n de Trace
Un tooltip sobre el s√≠mbolo muestra informaci√≥n sobre la causa del error.
Las configuraciones de Trace con estado de error no se pueden trans‚Äê
ferir al dispositivo.

6.3.3.4

Interfaz - Ficha Diagrama
La ficha "Diagrama" del Trace del proyecto se comporta como en Trace y se describe en el
cap√≠tulo Interfaz Ficha Diagrama (P√°gina 68).

6.3.4

Ventana de inspecci√≥n

6.3.4.1

Interfaz: ventana de inspecci√≥n
La visualizaci√≥n en la ficha "Propiedades" de la ventana de inspecci√≥n depende de la selecci√≥n
actual en el √°rea de trabajo.
Si en el √°rea de trabajo no se ha seleccionado una fila de la tabla con un dispositivo, se muestra
informaci√≥n general sobre el Trace del proyecto. Si se ha seleccionado una fila de la tabla con
un dispositivo, se muestra la configuraci√≥n de Trace dependiente del dispositivo, tal y como se
describe en el dispositivo (P√°gina 120) correspondiente.

94

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Informaci√≥n general en la ficha "Propiedades"
La figura siguiente muestra un ejemplo de representaci√≥n:

La tabla siguiente muestra los ajustes y las visualizaciones de las se√±ales registradas:
Campo

Descripci√≥n

Nombre

Campo de entrada para el nombre del Trace del proyecto

Autor

Campo de entrada para el nombre del autor

Comentario

Campo de entrada para un comentario

ID del trace

Visualizaci√≥n de la ID del Trace
Esta ID le permite diferenciar distintos Traces del proyecto activos.

N√∫mero de puerto Campo de entrada para el n√∫mero de puerto de la conexi√≥n
Los dispositivos participantes en el Trace del proyecto se comunican a trav√©s de
este puerto. El n√∫mero debe ser id√©ntico y un√≠voco en todos los dispositivos.
Tenga en cuenta tambi√©n las indicaciones para la asignaci√≥n de n√∫meros de puer‚Äê
to en el sistema de informaci√≥n TIA Portal.

6.3.5

Task Card Trace
Las paletas mostradas se describen en el cap√≠tulo Task Card Trace (P√°gina 85).

6.4

Manejo

6.4.1

Gu√≠a de inicio r√°pido para Trace
Esta descripci√≥n toma como ejemplo los pasos para efectuar un registro con la CPU S7-1500.
Los ajustes mostrados pueden diferir en funci√≥n del dispositivo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

95

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Requisitos
Se ha configurado un dispositivo que admite la funci√≥n Trace y de analizador l√≥gico.

Creaci√≥n de Trace
La siguiente figura muestra el √°rbol del proyecto con la carpeta de sistema
dispositivo:

"Traces" bajo el

Procedimiento:
1. Haga doble clic en la entrada "Agregar nuevo Trace".
Se crea una nueva configuraci√≥n de Trace y se abre la ficha "Configuraci√≥n" en el √°rea
de trabajo.
2. Para modificar el nombre de la configuraci√≥n de Trace, haga clic en el texto.

96

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Selecci√≥n de se√±ales
La figura siguiente muestra la configuraci√≥n de las se√±ales:

Procedimiento:
1. Seleccione las se√±ales que deben registrarse en el √°rea "Se√±ales".
O bien:
2. P. ej., arrastre una o varias se√±ales a la tabla de se√±ales desde una tabla de variables
mediante Drag & Drop.

Configuraci√≥n del ciclo de registro
La figura siguiente muestra la configuraci√≥n del muestreo:

Procedimiento:
1. Configure el muestreo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

97

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Configuraci√≥n del disparador
La figura siguiente muestra la configuraci√≥n del disparador:

Procedimiento:
1. Configure el disparador y la condici√≥n de disparo para el disparador seleccionado.

Configuraci√≥n de las opciones de representaci√≥n (opcional)
La figura siguiente muestra la configuraci√≥n de las opciones de representaci√≥n:

Procedimiento:
1. Vaya a la ficha "Diagrama".
2. Ajuste las opciones de representaci√≥n que desee en el diagrama y en la tabla de se√±ales.

98

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Transmisi√≥n de la configuraci√≥n de Trace al dispositivo
Procedimiento:
1. Transfiera la configuraci√≥n de Trace al dispositivo con el bot√≥n
Se ejecutan las siguientes funciones:

.

‚Äì Se establece una conexi√≥n online con el dispositivo.
‚Äì La configuraci√≥n de Trace se transfiere al dispositivo.
‚Äì Se activa la visualizaci√≥n.
‚Äì La vista cambia a la ficha "Diagrama".

Activaci√≥n de registro
Procedimiento:
1. Haga clic en el bot√≥n

.

Visualizaci√≥n de registro
La siguiente figura muestra el diagrama de curvas con un registro:

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

99

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo
Procedimiento:
1. Espere hasta que se muestre el estado "Registro en curso" o "Registro finalizado" en la
visualizaci√≥n de estado del Trace.
2. Cambie a la ficha "Diagrama".
3. Haga clic en el s√≠mbolo
de una se√±al en la tabla de se√±ales.
Se ofrecen los bits de la se√±al por separado para su visualizaci√≥n como traza de bits.
4. Seleccione o deseleccione en la tabla de se√±ales las se√±ales individuales y los bits con el
s√≠mbolo
para su representaci√≥n.

Almacenamiento de la medici√≥n en el proyecto
Procedimiento:
1. Transfiera la medici√≥n al proyecto con el bot√≥n
.
La medici√≥n se muestra en el √°rbol del proyecto en la carpeta de sistema

"Mediciones".

Consulte tambi√©n
Interfaz Barra de herramientas de Trace (P√°gina 67)

6.4.2

Gu√≠a de inicio r√°pido para Trace del proyecto
Esta descripci√≥n muestra a modo de ejemplo los pasos para el registro con Trace del proyecto
en dos CPU S7-1500. Los ajustes mostrados pueden diferir en funci√≥n del dispositivo.

Requisitos
‚óè Existen dos CPU S7-1500 con versi√≥n de firmware V2.8 o superior configuradas.
‚óè Se cumplen los requisitos generales para el Trace del proyecto (P√°gina 57).

100

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Agregar Trace del proyecto
La siguiente figura muestra el √°rbol del proyecto con la carpeta de sistema
proyecto" bajo las funciones para varios dispositivos:

"Traces del

Procedimiento:
1. Haga doble clic en la entrada "Agregar nuevo trace del proyecto".
Se crea una nueva configuraci√≥n de Trace del proyecto y se abre la ficha "Configuraci√≥n"
en el √°rea de trabajo.
2. Para modificar el nombre de la configuraci√≥n de Trace del proyecto, haga clic en el texto.

Agregar dispositivos
La figura siguiente muestra c√≥mo se agregan dispositivos:

Procedimiento:
1. En el √°rea "Dispositivos participantes" seleccione los dispositivos correspondientes.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

101

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Configurar se√±ales y condiciones de registro de los dispositivos.
La siguiente figura muestra dos dispositivos participantes y la configuraci√≥n de "PLC_1".

Procedimiento:
1. En el √°rea "Dispositivos participantes" seleccione un dispositivo.
2. Seleccione la ficha "Propiedades" en la ventana de inspecci√≥n.
3. Seleccione las se√±ales que deben registrarse en el √°rea "Se√±ales".
O bien:
4. P. ej., arrastre una o varias se√±ales a la tabla de se√±ales desde una tabla de variables
mediante Drag & Drop.
5. Configure el muestreo.
6. Configure el disparador y la condici√≥n de disparo para el disparador seleccionado.
7. Repita la configuraci√≥n a partir del paso 1 para cada dispositivo participante.
En el ejemplo que se muestra aqu√≠, para "PLC_2" hay configurado un modo de disparo
"Disparo de otro dispositivo".

102

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Transferir configuraciones de Trace a los dispositivos
Procedimiento:
1. Con el bot√≥n

, abra la vista general de estados de los dispositivos participantes.

2. Transfiera las configuraciones de Trace a los dispositivos con el bot√≥n

.

3. Compruebe el estado en la vista general de estados (P√°gina 92) y solucione los posibles
errores.

Activaci√≥n de registro
Procedimiento:
1. Haga clic en el bot√≥n

.

Visualizar registros
Procedimiento:
1. En la vista general de estados de los dispositivos participantes, compruebe si han finalizado
ya los registros deseados.
2. Cambie a la ficha "Diagrama".

Almacenamiento de mediciones en el proyecto
Procedimiento:
1. Transfiera las mediciones al proyecto con el bot√≥n
.
Las mediciones se muestran en el √°rbol del proyecto, en la carpeta de sistema
"Mediciones".

6.4.3

Uso de la funci√≥n Trace: vista general

Requisitos
En el TIA Portal se ha configurado un dispositivo que admite la funci√≥n Trace y de analizador
l√≥gico y con el que hay establecida una conexi√≥n online.

Procedimiento
La tabla siguiente muestra una vista general de las etapas que se siguen normalmente al
trabajar con la funci√≥n Trace y de analizador l√≥gico.
Paso

Descripci√≥n

1

Creaci√≥n de Trace (P√°gina 104)

2

Configuraci√≥n de Trace (P√°gina 112)

3

Transmisi√≥n de la configuraci√≥n de Trace al dispositivo (P√°gina 107)

4

Activaci√≥n/desactivaci√≥n de Trace en el dispositivo (P√°gina 107)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

103

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo
Paso

Descripci√≥n

5

Visualizaci√≥n de registro (P√°gina 108)

6

Almacenamiento de mediciones en el proyecto (P√°gina 109)

7

Visualizaci√≥n de registro (P√°gina 108)

8

An√°lisis del registro en curso (P√°gina 108)

9

Comparaci√≥n de registros (mediciones superpuestas) (P√°gina 118)

Consulte tambi√©n
Ver configuraci√≥n (P√°gina 104)

6.4.4

√Årbol del proyecto

6.4.4.1

Creaci√≥n de Trace
En el √°rbol del proyecto pueden crearse Traces en forma de configuraciones de Trace.
Las siguientes instrucciones describen c√≥mo crear una configuraci√≥n de Trace en la carpeta
de sistema
"Traces".

Procedimiento
Para crear una configuraci√≥n de Trace, haga lo siguiente:
1. Haga doble clic en la entrada "Agregar nuevo Trace".
Se crea una nueva configuraci√≥n de Trace.

6.4.4.2

Ver configuraci√≥n

Requisitos
En la carpeta de sistema
"Traces" existe una configuraci√≥n de Trace, un Trace en
dispositivo, una medici√≥n o una medici√≥n superpuesta.

Procedimiento
Para ver una configuraci√≥n de Trace, haga lo siguiente:
1. Haga doble clic en el √°rbol del proyecto en el s√≠mbolo correspondiente a la configuraci√≥n de
Trace, a un Trace en dispositivo, a una medici√≥n o a una medici√≥n superpuesta.
En el √°rea de trabajo se abre la ficha "Configuraci√≥n" o "Diagrama".
2. Si es necesario, haga clic en la ficha "Configuraci√≥n" para visualizarla.

104

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Nota
Protecci√≥n contra escritura
Los datos de configuraci√≥n de Trace en dispositivo y de todas las mediciones se muestran
protegidos contra escritura.

Consulte tambi√©n
Interfaz: √Årbol del proyecto, carpeta "Traces" (P√°gina 61)

6.4.4.3

Ver diagrama

Requisitos
En la carpeta de sistema
medici√≥n superpuesta.

"Traces" existe un Trace en dispositivo, una medici√≥n o una

Procedimiento
Para ver un diagrama, haga lo siguiente:
1. Haga doble clic en el √°rbol del proyecto en el s√≠mbolo correspondiente a un Trace en
dispositivo, a una medici√≥n o a una medici√≥n superpuesta.
En el √°rea de trabajo se abre la ficha "Configuraci√≥n" o "Diagrama".
2. Si es necesario, haga clic en la ficha "Diagrama" para visualizarla.

Consulte tambi√©n
Interfaz: √Årbol del proyecto, carpeta "Traces" (P√°gina 61)

6.4.4.4

Crear medici√≥n superpuesta
En el √°rbol del proyecto pueden crearse mediciones superpuestas con una funcionalidad de
comparaci√≥n para distintas mediciones.
Las siguientes instrucciones describen c√≥mo crear una medici√≥n superpuesta en la carpeta de
"Mediciones superpuestas".
sistema

Requisitos
Se ha configurado un dispositivo que admite la funci√≥n Trace y de analizador l√≥gico.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

105

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Procedimiento
Para crear una medici√≥n superpuesta, haga lo siguiente:
1. Seleccione una o varias mediciones en la carpeta de sistema
2. Arrastre las mediciones a la carpeta de sistema
Drag & Drop.

"Mediciones".

"Mediciones superpuestas" mediante

Se crear√° una nueva medici√≥n superpuesta. En ella se incluyen copias de las mediciones
seleccionadas.

6.4.4.5

Estructuraci√≥n de los objetos en grupos
En el √°rbol del proyecto pueden crearse grupos en las carpetas de sistema. Utilice esta
posibilidad para estructurar la vista en caso de existir muchos objetos.
Las siguientes instrucciones describen mediante ejemplos el modo de reunir mediciones en
grupos. La misma funcionalidad est√° disponible para las carpetas de sistema "Traces" y
"Mediciones superpuestas".
Nota
Posibilidad de visualizaci√≥n de Traces del dispositivo tambi√©n en grupos
Una configuraci√≥n de Trace en un grupo que tenga el mismo un Trace en el dispositivo con
el mismo nombre se representa bajo el grupo. Por lo tanto, no todos los Traces del dispositivo
se muestran obligatoriamente en el primer nivel de la carpeta "Traces".

Requisitos
Existen mediciones en la carpeta de sistema

"Mediciones".

Procedimiento
Para estructurar mediciones en grupos, haga lo siguiente:
1. Haga clic con el bot√≥n derecho del rat√≥n en la carpeta de sistema
seleccione el comando "Agregar grupo" del men√∫ contextual.
Se crear√° una carpeta de grupo
nueva.

"Mediciones" y

2. Asigne un nombre explicativo al nuevo grupo.
3. Repita el paso 1 hasta crear todos los grupos deseados.
(Tambi√©n es posible crear subgrupos (grupos dentro de grupos)).
4. Mediante Drag & Drop, arrastre las mediciones correspondientes a las carpetas de grupo
creadas.

106

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

6.4.5

√Årea de trabajo General

6.4.5.1

Transmisi√≥n de la configuraci√≥n de Trace al dispositivo

Requisitos
‚óè Existe una configuraci√≥n de Trace v√°lida en la carpeta de sistema "Traces".
‚óè No se ha alcanzado todav√≠a el n√∫mero m√°ximo de Traces en dispositivo.

Procedimiento
Para transmitir una configuraci√≥n de Trace al dispositivo, proceda del siguiente modo:
1. Abra una configuraci√≥n de Trace v√°lida en el √°rea de trabajo.
2. Haga clic en el bot√≥n

.

Resultado
La configuraci√≥n de Trace se transfiere al dispositivo.

6.4.5.2

Activaci√≥n/desactivaci√≥n de Trace en el dispositivo

Requisitos
‚óè Existe una conexi√≥n online con el dispositivo.
‚óè Existe un Trace en el dispositivo.
‚óè El Trace en dispositivo se muestra en el √°rea de trabajo.
‚óè El bot√≥n

de visualizaci√≥n se activa para el Trace visualizado.

Activaci√≥n de Trace en el dispositivo
Para activar el registro de un Trace en el dispositivo, proceda del siguiente modo:
1. Haga clic en el bot√≥n
.
El Trace en el dispositivo se activa y se inicia el registro en funci√≥n de la condici√≥n de
disparo configurada. La condici√≥n de disparo es espec√≠fica del dispositivo y se describe en
el cap√≠tulo "Configuraci√≥n", en el dispositivo (P√°gina 120) correspondiente.
Se muestra el estado actual del registro en la visualizaci√≥n de estado del Trace.
Nota
Si se reinicia el registro, los valores registrados hasta el momento se pierden.
Para realizar una copia de seguridad de los valores registrados, guarde la medici√≥n en el
proyecto (P√°gina 109) antes de volver a activar el registro.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

107

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Desactivaci√≥n de Trace en el dispositivo
Para desactivar un Trace en el dispositivo activado, proceda del siguiente modo:
1. Haga clic en el bot√≥n
.
El Trace en el dispositivo se desactiva.
La visualizaci√≥n de estado pasa a "inactivo".

6.4.5.3

Visualizaci√≥n de registro

Requisitos
‚óè Existe una conexi√≥n online con el dispositivo.
‚óè Existe un Trace con registro en el dispositivo.
O bien:
‚óè Existe una medici√≥n en la carpeta de sistema "Mediciones".

Procedimiento
Para visualizar el registro, proceda del siguiente modo:
1. Seleccione un Trace en dispositivo.
2. Haga doble clic en el Trace seleccionado.
3. En caso necesario, active el bot√≥n

para la visualizaci√≥n.

O bien:
1. Seleccione una medici√≥n

en la carpeta de sistema

"Mediciones".

2. Haga doble clic en la medici√≥n seleccionada.

Resultado
El registro se visualiza en la ficha "Diagrama".

Consulte tambi√©n
Interfaz: √Årbol del proyecto, carpeta "Traces" (P√°gina 61)

6.4.5.4

An√°lisis del registro en curso

Requisitos
‚óè El registro en curso se visualiza en la ficha "Diagrama"

108

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Guardar los datos registrados actualmente como medici√≥n
Para analizar un determinado rango de tiempo de un registro en curso, haga lo siguiente:
1. Haga clic en el bot√≥n
.
Los datos registrados hasta el momento se agregar√°n a las mediciones.
El registro actual no se ver√° afectado y continuar√° sin interrupci√≥n.

An√°lisis de la medici√≥n
Para visualizar la medici√≥n guardada, haga lo siguiente:
1. Haga doble clic en la carpeta
"Mediciones" para abrir la medici√≥n que acaba de
guardarse
La ficha "Diagrama" de la medici√≥n se abrir√° en el √°rea de trabajo.

Consulte tambi√©n
Visualizaci√≥n de registro (P√°gina 108)
√Årea de trabajo Ficha Diagrama (P√°gina 112)

6.4.5.5

Almacenamiento de mediciones en el proyecto

Requisitos
‚óè Existe una conexi√≥n online con el dispositivo.
‚óè Existe un Trace con registro en el dispositivo.
‚óè Los datos del Trace en dispositivo han de haberse mostrado en el diagrama de curvas al
menos una vez. Para la visualizaci√≥n se cargan los datos del registro desde el dispositivo.

Procedimiento
Para guardar un registro en el proyecto, proceda del siguiente modo:
1. Abra el Trace con los datos registrados.
2. Si es necesario, active el bot√≥n
procedentes del dispositivo.
3. Tras activarse el bot√≥n

para asegurarse de que se carguen los datos actuales

, espere hasta que se carguen y se visualicen todos los datos.

4. Haga clic en el bot√≥n
.
La medici√≥n se agrega a la carpeta

"Mediciones".

5. Guarde el proyecto en el TIA Portal.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

109

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Nota
Creaci√≥n de mediciones
Puede crearse una medici√≥n a partir de un Trace en dispositivo en cualquier momento.
Utilice esta funci√≥n, p. ej., durante un registro para guardar los datos registrados hasta el
momento y analizarlos posteriormente como medici√≥n est√°tica.

6.4.5.6

Exportaci√≥n e importaci√≥n de mediciones

Requisitos
Para la exportaci√≥n existe por lo menos una medici√≥n en la carpeta de sistema "Mediciones".

Exportaci√≥n de mediciones
Para exportar una medici√≥n, proceda del siguiente modo:
1. Haga clic con el bot√≥n derecho del rat√≥n en una medici√≥n de la carpeta de sistema
"Mediciones" y seleccione el comando del men√∫ contextual "Exportar medici√≥n".
2. Seleccione una carpeta, un nombre de archivo y un tipo de archivo para guardar la
medici√≥n.
3. Haga clic en el bot√≥n "Guardar".

Importaci√≥n de mediciones
Para importar una medici√≥n, proceda del siguiente modo:
1. Haga clic con el bot√≥n derecho del rat√≥n en la carpeta de sistema
seleccione el comando "Importar medici√≥n" del men√∫ contextual.

"Mediciones" y

2. Seleccione el archivo que debe importarse, p. ej., del tipo de archivo "*.ttrecx" con la
medici√≥n.
3. Haga clic en el bot√≥n "Abrir".
La medici√≥n importada se muestra en la carpeta de sistema
de archivo.

"Mediciones" con el nombre

Nota
Importaci√≥n y exportaci√≥n de configuraciones de Trace
Est√° disponible la misma funci√≥n para la exportaci√≥n e importaci√≥n de configuraciones de
Trace.

110

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

6.4.5.7

Transmisi√≥n de la configuraci√≥n de Trace del dispositivo al proyecto

Requisitos
‚óè Existe una conexi√≥n online con el dispositivo.
‚óè Existe un Trace en el dispositivo.

Procedimiento
Para transmitir una configuraci√≥n de Trace al proyecto, proceda del siguiente modo:
1. Abra un Trace en dispositivo.
2. En caso necesario, active el bot√≥n
3. Haga clic en el bot√≥n

para la visualizaci√≥n.

para transferir la configuraci√≥n de Trace desde el dispositivo.

Resultado
La configuraci√≥n se transfiere a la carpeta de sistema
de Trace.

"Traces" como nueva configuraci√≥n

Las opciones de representaci√≥n actuales est√°n incluidas en la nueva configuraci√≥n de Trace.
Si existe una configuraci√≥n de Trace con el mismo nombre en la carpeta de sistema, se
sobrescribir√°.

6.4.5.8

Borrado de Traces en el dispositivo

Requisitos
‚óè Existe una conexi√≥n online con el dispositivo.
‚óè Existe un Trace en el dispositivo.

Procedimiento
Para borrar un Trace del dispositivo, proceda del siguiente modo:
1. Abra un Trace en dispositivo.
2. En caso necesario, active el bot√≥n

para la visualizaci√≥n.

3. Haga clic en el bot√≥n
.
Se abre un cuadro de di√°logo que solicita confirmaci√≥n.
4. Confirme el cuadro de di√°logo para efectuar el borrado.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

111

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo
O bien:
1. Seleccione uno o varios Traces en dispositivo

/

en el √°rbol del proyecto.

2. Pulse <Supr> para borrar los Traces en dispositivo.
Se abre un cuadro de di√°logo que solicita confirmaci√≥n.
3. Si es necesario, seleccione una opci√≥n de borrado y confirme el cuadro de di√°logo para
efectuar el borrado.

6.4.6

√Årea de trabajo Ficha Configuraci√≥n

6.4.6.1

Configuraci√≥n de Trace

Requisitos
La ficha "Configuraci√≥n" del √°rea de trabajo est√° abierta.

Configuraci√≥n de Trace
Durante la configuraci√≥n se especifican las condiciones de registro y disparo y se seleccionan
las se√±ales que deben registrarse.
Ver cap√≠tulo "Configuraci√≥n" en el dispositivo (P√°gina 120) correspondiente.
Nota
Almacenamiento de configuraci√≥n de Trace
La configuraci√≥n de Trace se guarda con el proyecto en el TIA Portal.
Si se cierra el proyecto sin guardar, la configuraci√≥n queda descartada.

Consulte tambi√©n
Ver configuraci√≥n (P√°gina 104)

6.4.7

√Årea de trabajo Ficha Diagrama

6.4.7.1

Uso del diagrama de curvas
El diagrama de curvas muestra las se√±ales de un registro seleccionadas en la tabla de
se√±ales.
Es posible ampliar o reducir el √°rea de representaci√≥n a voluntad. Mediante cursores de
medici√≥n pueden seleccionarse diferentes valores para visualizarlos en la tabla de se√±ales.

112

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo
A continuaci√≥n se describe mediante ejemplos el uso del diagrama de curvas y de los cursores
de medici√≥n.

Requisitos
‚óè Se han seleccionado para visualizaci√≥n un Trace en dispositivo o una medici√≥n.
‚óè Si se trata de un Trace en dispositivo, el bot√≥n

de visualizaci√≥n est√° activado.

‚óè La ficha "Diagrama" del √°rea de trabajo est√° abierta.

Observaci√≥n de un registro en curso
Para visualizar todos los datos de un registro en curso, haga lo siguiente:
1. Active "Visualizar todo" mediante el bot√≥n

.

Se mostrar√°n todo el rango de tiempo y todos los valores del registro en curso.
Para visualizar una ventana temporal constante de un registro en curso, haga lo siguiente:
1. Active "Visualizar todo" mediante el bot√≥n

.

2. Seleccione el rango de tiempo deseado mediante el bot√≥n

.

El visor de curvas se actualizar√° sin modificaci√≥n de la escala del rango de tiempo.

Evaluaci√≥n de un momento concreto de un registro
Para visualizar los valores de un punto de medici√≥n concreto, haga lo siguiente:
1. Visualice el cursor de medici√≥n vertical con el bot√≥n

.

2. Desplace con el rat√≥n un cursor de medici√≥n a la posici√≥n deseada del registro.
Los valores de las se√±ales se muestran en la tabla de se√±ales y en la paleta "Cursores de
medici√≥n" de la Task Card "Trace".

Evaluaci√≥n de la diferencia entre dos puntos de medici√≥n
Para visualizar la diferencia, haga lo siguiente:
1. Visualice el cursor de medici√≥n vertical con el bot√≥n

.

2. Desplace con el rat√≥n los dos cursores de medici√≥n a los puntos de medici√≥n deseados del
registro.
Los valores de las se√±ales y la diferencia se muestran en la tabla de se√±ales y en la paleta
"Cursores de medici√≥n" de la Task Card "Trace".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

113

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Utilizaci√≥n del cursor de medici√≥n horizontal
Para comprobar si se alcanza un determinado valor, haga lo siguiente:
1. Visualice el cursor de medici√≥n horizontal con el bot√≥n

.

2. Desplace con el rat√≥n un cursor de medici√≥n al valor deseado del registro.
Los valores de los cursores de medici√≥n para la se√±al seleccionada se muestran en la
paleta "Cursores de medici√≥n" de la Task Card "Trace".

Desplazamiento del rango de tiempo visualizado
Para desplazar el rango de tiempo mostrado, haga lo siguiente:
1. Seleccione un rango de tiempo mediante el bot√≥n

.

2. Desplace la curva al rango de tiempo deseado girando la rueda del rat√≥n mientras mantiene
pulsada la tecla <May√∫s>.

Poner en primer plano una se√±al
1. Muestre la leyenda con el bot√≥n

.

2. Haga clic en una se√±al en la leyenda.
O bien:
1. Haga clic en una se√±al en el diagrama de curvas.
La se√±al se pondr√° en primer plano y se resaltar√°/seleccionar√° en la tabla de se√±ales. El eje
de valores se actualizar√° para la se√±al seleccionada.

Consulte tambi√©n
Ver diagrama (P√°gina 105)
Interfaz Diagrama de curvas (P√°gina 68)
Interfaz de la tabla de se√±ales (P√°gina 74)

6.4.7.2

Utilizaci√≥n de la tabla de se√±ales
La tabla de se√±ales muestra las se√±ales de un Trace en el dispositivo o de una medici√≥n. En
el caso de las mediciones superpuestas, se visualizan las se√±ales preseleccionadas en la
selecci√≥n de se√±al. En la tabla es posible mostrar u ocultar cada una de las se√±ales y ajustar
propiedades para la visualizaci√≥n.
Para algunos tipos de datos se pueden seleccionar bits individuales y mostrarse como trazas
de bits.
A continuaci√≥n se describe el manejo de la tabla de se√±ales.

114

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Requisitos
‚óè Hay un Trace en dispositivo o una medici√≥n abiertos en la ficha "Diagrama".
‚óè Si se trata de un Trace en dispositivo, el bot√≥n

de visualizaci√≥n est√° activado.

‚óè Para visualizar bits individuales como trazas de bits:
Al menos una se√±al registrada soporta la visualizaci√≥n como traza de bit.

Mostrar u ocultar se√±ales individuales y cambiar su color
Para ajustar la visualizaci√≥n a sus necesidades, haga lo siguiente:
1. Haga clic en el s√≠mbolo de la se√±al correspondiente en la columna
deseleccionarlo en la visualizaci√≥n.

para seleccionarlo o

2. Haga clic en la se√±al en cuesti√≥n en la columna "Color" y seleccione un color.
Se modificar√° el color predeterminado de la se√±al.

Poner en primer plano una se√±al
1. Seleccione la fila de la se√±al en la tabla de se√±ales.
Se mostrar√° la escala Y de la se√±al.
La curva de la se√±al se pondr√° en primer plano en el diagrama de curvas.

Seleccionar bits individuales para visualizarlos como traza de bits
Para mostrar bits individuales como traza de bits en el diagrama de curvas inferior, haga lo
siguiente:
1. Haga clic en el s√≠mbolo

de una se√±al en la tabla de se√±ales.

2. Haga clic en el s√≠mbolo
en la selecci√≥n de bits abierta de la se√±al.
Los bits se seleccionar√°n o se deseleccionar√°n para la visualizaci√≥n.

Consulte tambi√©n
Visualizaci√≥n de registro (P√°gina 108)

6.4.7.3

Uso del grupo de se√±ales en la tabla de se√±ales
Con el grupo de se√±ales puede asignarse la misma escala a varias se√±ales individuales, lo que
permite, p. ej,. comparar mejor los recorridos de curva.
Las se√±ales binarias no pueden agruparse.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

115

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo
Las siguientes instrucciones describen la utilizaci√≥n del grupo de se√±ales.
Nota
Almacenamiento de los grupos de se√±ales
Los grupos de se√±ales pueden guardarse individualmente para cada medici√≥n con la funci√≥n
"Usar vista actual como est√°ndar" (bot√≥n
).
Si no se guardan los grupos de se√±ales y el proyecto, los grupos de se√±ales creados se
perder√°n al cerrar la ficha "Diagrama".

Requisitos
‚óè Se visualizan un Trace en dispositivo o una medici√≥n.
‚óè Si se trata de un Trace en dispositivo, el bot√≥n

de visualizaci√≥n est√° activado.

‚óè La ficha "Diagrama" del √°rea de trabajo est√° abierta.
‚óè En la tabla de se√±ales existen por lo menos dos se√±ales que no son del tipo BOOL.

Asignaci√≥n de se√±ales a un grupo de se√±ales
Para crear un grupo de se√±ales y asignar se√±ales a dicho grupo, haga lo siguiente:
1. Seleccione la fila o celda de la se√±al deseada en la tabla de se√±ales.
2. Haga clic en el campo gris en la columna "Grupo de se√±ales"
El s√≠mbolo de cadena aparece en el campo gris y se preasigna el nombre del grupo de
se√±ales:
3. Haga clic en el campo gris de las dem√°s se√±ales que desee asignar al grupo de se√±ales en
cuesti√≥n.
O bien:
1. Haga clic en el campo de texto de la columna "Grupo de se√±ales" de la se√±al que desee
agregar al grupo.
2. Introduzca un nombre para el grupo.
3. Para agregar otras se√±ales, introduzca el mismo nombre de grupo en el correspondiente
campo de texto o seleccione el nombre de grupo en la lista desplegable.
Las escalas Y de las se√±ales agregadas al grupo se escalar√°n con los mismos valores que la
se√±al seleccionada en primer lugar. Toda modificaci√≥n de un valor de escala se hace extensiva
siempre a todo el grupo.

116

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Eliminar se√±ales de un grupo de se√±ales
Para anular la asignaci√≥n de una se√±al a un grupo de se√±ales, haga lo siguiente:
1. Haga clic en el s√≠mbolo de cadena
deseada.

de la columna "Grupo de se√±ales" de la se√±al

O bien:
1. Haga clic en el campo de texto de la columna "Grupo de se√±ales" de la se√±al deseada.
2. Pulse la tecla <Supr>.
O bien:
1. Para eliminar varias se√±ales, seleccione el correspondiente campo de texto de la columna
"Grupo de se√±ales" con las teclas <May√∫s> y <Control>.
2. Pulse la tecla <Supr>.
Las se√±ales se borrar√°n del grupo de se√±ales o se eliminar√° el grupo.

6.4.7.4

Observaci√≥n de se√±ales r√°pidas

Requisitos
‚óè Existe una conexi√≥n online con el dispositivo.
‚óè Existe un Trace en el dispositivo.

Procedimiento
Para observar de manera permanente la evoluci√≥n de una se√±al r√°pida, haga lo siguiente:
1. Seleccione un Trace en el dispositivo.
2. Haga doble clic en el Trace seleccionado.
3. Active el bot√≥n

para la observaci√≥n.

4. Active el bot√≥n

para la repetici√≥n autom√°tica del registro.

Resultado
El registro vuelve a activarse autom√°ticamente cada vez que finaliza un registro. La
visualizaci√≥n del diagrama de curvas es similar a la de un osciloscopio.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

117

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

6.4.7.5

Comparaci√≥n de registros (mediciones superpuestas)

Requisitos
‚óè Se ha creado una medici√≥n superpuesta directamente o de manera impl√≠cita al arrastrar
mediciones a la carpeta de sistema
"Mediciones superpuestas".
Ver tambi√©n Crear medici√≥n superpuesta (P√°gina 105).

Agregar mediciones para comparar
Para comparar mediciones, agregue las mediciones que desee comparar a la medici√≥n
superpuesta. Haga lo siguiente:
1. En el √°rbol de proyecto, desplace una o varias mediciones
desde la carpeta de
sistema
"Mediciones" hasta el icono de la medici√≥n superpuesta
mediante Drag &
Drop.
O bien:
1. Importe mediciones guardadas mediante el comando de men√∫ contextual "Importar
medici√≥n".
Se agregar√° una copia de las mediciones a la medici√≥n superpuesta.
Nota
Las modificaciones de ajustes de mediciones realizados dentro de la medici√≥n superpuesta no
afectan a las mediciones originales. Las mediciones originales permanecer√°n sin cambios.

Seleccionar se√±ales de las mediciones para la tabla de se√±ales
Para seleccionar las se√±ales para la tabla de se√±ales en la ficha "Diagrama", haga lo siguiente:
1. Haga doble clic en el √°rbol de proyecto en el icono de la medici√≥n superpuesta
En al √°rea de trabajo se mostrar√°n las fichas de la medici√≥n superpuesta.

.

2. Haga clic en el √°rea de trabajo en la ficha "Selecci√≥n de se√±al".
Las se√±ales de todas las mediciones se mostrar√°n en la tabla.
3. Active o desactive respectivamente las casillas de verificaci√≥n de las se√±ales que desee
visualizar u ocultar en la tabla de se√±ales.
Las se√±ales activadas se mostrar√°n en la tabla de se√±ales de la ficha "Diagrama".

118

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.4 Manejo

Utilizaci√≥n de la tabla de se√±ales
Para abrir y utilizar la tabla de se√±ales, haga lo siguiente:
1. Haga clic en el √°rea de trabajo en la ficha "Diagrama".
2. Dentro de la ficha "Diagrama", haga clic en la ficha "Se√±ales".
3. Utilice la tabla de se√±ales como se describe en Utilizaci√≥n de la tabla de se√±ales
(P√°gina 114).

Alineaci√≥n de mediciones
Para alinear el eje temporal de las mediciones para la comparaci√≥n, haga lo siguiente:
1. Dentro de la ficha "Diagrama", haga clic en la ficha "Mediciones".
2. Seleccione la alineaci√≥n de las mediciones con ayuda de las casillas de verificaci√≥n.
3. Ajuste la alineaci√≥n y, si es necesario, un offset para la alineaci√≥n de las distintas
mediciones.
Las mediciones se alinear√°n entre s√≠ en el eje temporal de acuerdo con los ajustes.
(La alineaci√≥n exacta de dos mediciones se describe en el cap√≠tulo siguiente).

Uso del diagrama de curvas
Para abrir y utilizar el diagrama de curvas, haga lo siguiente:
1. Haga clic en el √°rea de trabajo en la ficha "Diagrama".
2. Utilice el diagrama de curvas como se describe en Uso del diagrama de curvas
(P√°gina 112).

Consulte tambi√©n
Alineaci√≥n exacta de mediciones (mediciones superpuestas) (P√°gina 119)

6.4.7.6

Alineaci√≥n exacta de mediciones (mediciones superpuestas)

Requisitos
‚óè Se ha creado una medici√≥n superpuesta.
‚óè Se han agregado a la medici√≥n superpuesta mediciones para comparar.
‚óè Se han seleccionado se√±ales de las mediciones para la tabla de se√±ales.
‚óè La ficha "Diagrama" de la medici√≥n superpuesta se abrir√° en el √°rea de trabajo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

119

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

Alineaci√≥n exacta de mediciones con diferencia de posici√≥n ŒîX
Para alinear con exactitud el eje temporal de dos mediciones, haga lo siguiente:
1. Visualice el cursor de medici√≥n vertical con el bot√≥n

.

2. Ampl√≠e el rango de tiempo, p. ej., con el bot√≥n
, hasta poder posicionar el primer cursor
de medici√≥n exactamente sobre el punto de referencia deseado de la primera medici√≥n.
3. Desplace con el rat√≥n el primer cursor de medici√≥n a la posici√≥n deseada.
4. Busque el punto de referencia de la segunda medici√≥n, p. ej., cambiando a "Visualizar todo"
con el bot√≥n
.
5. Ampl√≠e el rango de tiempo, p. ej., con el bot√≥n
, hasta poder posicionar el segundo cursor
de medici√≥n exactamente sobre el punto de referencia deseado de la segunda medici√≥n.
6. Desplace con el rat√≥n el segundo cursor de medici√≥n a la posici√≥n deseada.
7. Abra la Task Card "Trace".
8. Seleccione el valor de la diferencia de posici√≥n ŒîX en la paleta "Cursores de medici√≥n".
9. Copie el valor al portapapeles.
10.Inserte el valor del portapapeles en la celda Offset de la primera o la segunda medici√≥n.
Las dos mediciones estar√°n alineadas entre s√≠ con exactitud en los puntos de medici√≥n
deseados.
Nota
Al insertar la diferencia de posici√≥n como offset, adapte el signo si es necesario.

6.4.7.7

Impresi√≥n de un registro
El diagrama de curvas permite guardar la visualizaci√≥n como gr√°fico y copiarlo en el
portapapeles. Utilice tambi√©n estas funciones (P√°gina 68) para imprimir.

6.5

Dispositivos

6.5.1

CPU S7-1200/1500

6.5.1.1

Captaci√≥n de variables

Captaci√≥n de variables en funci√≥n de dispositivo
A continuaci√≥n se enumeran las √°reas de operandos de las que pueden registrarse variables:
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas

120

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
‚óè Marca
‚óè Bloques de datos
‚óè Periferia

Tipos de datos
Se puede registrar una selecci√≥n de tipos de datos simples y compuestos. La disponibilidad de
los distintos tipos de datos depende del dispositivo utilizado.
Encontrar√° m√°s informaci√≥n en la ayuda, en "Vista general de los tipos de datos v√°lidos".
La tabla siguiente muestra una lista de los tipos de datos permitidos:
Tipos de datos

Nota

N√∫meros binarios
BOOL

-

Secuencias de bits
BYTE

-

WORD

-

DWORD

-

LWORD 1)

Nombre simb√≥lico necesario

Enteros
SINT

-

USINT

-

INT

-

UINT

-

DINT

-

UDINT

-

LINT

Nombre simb√≥lico necesario

1)

ULINT 1)

Nombre simb√≥lico necesario

N√∫meros en coma flotante
REAL

-

LREAL

Nombre simb√≥lico necesario

Temporizadores
TIME
LTIME

1)

-

Fecha y hora
DATE

-

TOD

-

LTOD 1)

-

LDT

-

1)

1) No permitido en el S7-1200.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

121

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

6.5.1.2

Vida √∫til de la configuraci√≥n de Trace y de los valores registrados en el dispositivo
Las configuraciones de Trace se conservan en caso de Power Off. Tras el rearranque de la
CPU, el registro se activa de nuevo.
Los valores registrados se pierden con el rearranque.
Nota
Cargar una configuraci√≥n en el dispositivo en el estado operativo "STOP"
Tras cargar una configuraci√≥n en el estado operativo "STOP", tenga en cuenta que deber√°
comprobar los Traces en el dispositivo y que tal vez tenga que volverlos a activar o a transferir.
Nota
En caso de modificaciones de variables de disparo que repercuten en la direcci√≥n, es preciso
volver a transferir tambi√©n la configuraci√≥n de Trace al dispositivo.
Este es el caso, p. ej. cuando se ha acortado o alargado un bloque de datos, o si se ha
modificado el tipo de datos.

6.5.1.3

Niveles de registro
Se pueden utilizar todos los niveles de ejecuci√≥n para el ciclo de registro. Los niveles de
ejecuci√≥n c√≠clicos pueden seleccionarse con el bot√≥n . En el caso de niveles de registro no
peri√≥dicos, la duraci√≥n de registro es indefinida.
Nota
Las medidas se registran cada vez al final del OB tras la ejecuci√≥n del programa del usuario.
Nota
Momento de registro con Motion Control
La referencia de tiempo para los valores de medici√≥n se determina de forma distinta si se
configura un bloque de organizaci√≥n de Motion Control como momento de registro y el
dispositivo se sincroniza a trav√©s de IRT. Este comportamiento se describe en Sincronizaci√≥n
horaria con Motion Control (P√°gina 123).

Consulte tambi√©n
Sincronizaci√≥n horaria de CPU SIMATIC S7 (https://support.industry.siemens.com/cs/ww/es/
view/82203451/en)

122

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

6.5.1.4

Sincronizaci√≥n horaria con Motion Control
Con Motion Control se necesita para el an√°lisis una referencia de tiempo a los l√≠mites de ciclo
del ciclo de aplicaci√≥n. Esa es la raz√≥n por la que la referencia de tiempo para los valores de
medici√≥n en la configuraci√≥n con bloques de organizaci√≥n de Motion Control se determina de
forma distinta al momento de registro. Como momento del valor de medici√≥n se guarda
siempre el tiempo (absoluto) sincronizado desde el inicio del ciclo de aplicaci√≥n actual. Las
variables de los objetos tecnol√≥gicos se refieren siempre de forma coherente a los l√≠mites de
ciclo.
El comportamiento descrito se aplica a los siguientes bloques de organizaci√≥n de Motion
Control:
‚óè MC‚ÄëServo [OB91]
‚óè MC‚ÄëPreServo [OB67]
‚óè MC‚ÄëPostServo [OB95]
‚óè MC‚ÄëInterpolator [OB92]
‚óè MC‚ÄëPreInterpolator [OB68]
Los dispositivos deben comunicarse a trav√©s de IRT.
La siguiente figura muestra los momentos almacenados de los valores de medici√≥n con un
ciclo de aplicaci√≥n de 3 y MC‚ÄëInterpolator como momento de registro configurado:

6HUYR

7

,32

7

6HUYR

7

T0 ‚Ä¶ T6

Ciclo IRT

T0

Inicio del ciclo de aplicaci√≥n n

T3

Inicio del ciclo de aplicaci√≥n n+1

T6

Inicio del ciclo de aplicaci√≥n n+2

7

,32

7

7

7

Nota
OB61-OB63 como momento de registro
Con estos OB como momento de registro configurado se utiliza la hora del sistema,
independientemente de la comunicaci√≥n. El registro se comporta igual que en los dispositivos
sin comunicaci√≥n IRT.
Sincronice las horas de los dispositivos para facilitar la evaluaci√≥n con tiempo absoluto.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

123

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

Nota
Valores de medici√≥n con tiempos id√©nticos
El rebase de los niveles de registro (p. ej., OB MC-Interpolator en el ejemplo anterior) puede
producir valores de medici√≥n con sello de tiempo id√©ntico.

6.5.1.5

Capacidad funcional
La tabla siguiente muestra la capacidad funcional m√°xima que puede registrarse con la funci√≥n
Trace y de analizador l√≥gico:
Dispositivo

N√∫mero m√°ximo de Traces
en dispositivo

N√∫mero m√°ximo de se√±ales
por configuraci√≥n de Trace

2

16

Al menos 4

16

S7-1200
(a partir de versi√≥n de firmware V4.0)
S7-1500, ET 200SP,
CPU 1513pro-2 PN,
CPU 1516pro-2 PN, S7-1500 Software
Controller, S7-1500 Drive Contro‚Äê
ller, ET 200SP Open Controller

(en funci√≥n del tipo de CPU)

Para el Trace del proyecto se aplican las mismas capacidades funcionales que para los
dispositivos.
Ejemplo: CPU 1516-3 PN/DP
‚óè M√°ximo 7281 puntos de medici√≥n con 16 se√±ales de variables PLC del tipo de datos
DWORD
‚óè M√°ximo 21844 puntos de medici√≥n con 16 se√±ales de variables PLC del tipo de datos BOOL
‚óè M√°ximo 58250 puntos de medici√≥n con una se√±al de una variable PLC del tipo de datos
BOOL
Encontrar√° m√°s informaci√≥n al respecto en la FAQ con la ID de art√≠culo 102781176 (http://
support.automation.siemens.com/WW/view/es/102781176).

6.5.1.6

Carga de CPU por registro de Trace
Un registro de Trace activado aumenta el tiempo de ejecuci√≥n del nivel de registro
correspondiente, lo que puede provocar un rebase del nivel de ejecuci√≥n en caso de carga
elevada de la CPU.
Soluci√≥n en caso de rebase del nivel de ejecuci√≥n:
‚óè Modificaci√≥n de la configuraci√≥n de Trace
1) Configure menos variables y se√±ales.
2) Aumente a continuaci√≥n el n√∫mero de variables y se√±ales gradualmente hasta alcanzar
el n√∫mero de se√±ales m√°ximo sin rebase del nivel de ejecuci√≥n.
‚óè Selecci√≥n de un nivel de registro m√°s lento

124

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

6.5.1.7

Trace del proyecto
Los siguientes dispositivos admiten el Trace del proyecto a partir de la versi√≥n de firmware
V2.8:
‚óè CPU SIMATIC S7-1500, ET 200SP, CPU 1513pro-2 PN y CPU 1516pro-2 PN
‚óè Controladores por software SIMATIC S7-1500
‚óè SIMATIC S7-1500 Drive Controller
‚óè ET 200SP Open Controller

6.5.1.8

Interfaz de software de la configuraci√≥n

Distribuci√≥n de la interfaz en Trace
Las posibilidades de ajuste var√≠an en funci√≥n del dispositivo configurado.

Visualizaci√≥n en la ficha "Configuraci√≥n" del √°rea de trabajo
La figura siguiente muestra un ejemplo de representaci√≥n:

La navegaci√≥n local ofrece las siguientes entradas para la selecci√≥n:
‚óè Configuraci√≥n
‚Äì Se√±ales (P√°gina 126)
‚Äì Condiciones de registro (P√°gina 127)

Ver y modificar las propiedades de una configuraci√≥n de Trace
Un Trace se selecciona en el √°rbol del proyecto y se visualiza en la ficha "Configuraci√≥n".
La configuraci√≥n de Trace se modifica offline. La configuraci√≥n de Trace online aparece como
de solo lectura.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

125

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

Distribuci√≥n de la interfaz con Trace del proyecto
La configuraci√≥n de Trace dependiente del dispositivo se muestra en la ventana de inspecci√≥n,
en caso de que en la tabla "Dispositivos participantes" de la ficha Configuraci√≥n se haya
seleccionado un dispositivo.

Configuraci√≥n en la ficha "Propiedades" de la ventana de inspecci√≥n
La figura siguiente muestra un ejemplo de representaci√≥n con un dispositivo seleccionado:

La navegaci√≥n local ofrece las siguientes entradas para la selecci√≥n:
‚óè Configuraci√≥n
‚Äì Se√±ales (P√°gina 126)
‚Äì Condiciones de registro (P√°gina 127)

Interfaz Se√±ales
El √°rea "Se√±ales" muestra una tabla en la que se configuran las se√±ales que deben registrarse
para la configuraci√≥n de Trace seleccionada.
Las se√±ales tambi√©n se pueden insertar en la tabla mediante Drag & Drop.
Las se√±ales se pueden ordenar mediante Drag & Drop.

Posibilidades de ajuste y visualizaciones en "Se√±ales"
La figura siguiente muestra un ejemplo de representaci√≥n:

126

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
La tabla siguiente muestra los ajustes y las visualizaciones:
Columna

S√≠mbolo

"Nombre"

Descripci√≥n
Visualizaci√≥n del s√≠mbolo de se√±al para una se√±al seleccionada

-

Campo de entrada para el nombre o la direcci√≥n de la se√±al
Ejemplos:
‚óè "Bloque_datos_1".Presi√≥n
‚óè M0.0
‚óè DB1.DBW3
Bot√≥n para abrir la tabla de selecci√≥n de se√±al

-

El bot√≥n se muestra al seleccionar la fila de la tabla.
Haciendo clic en el s√≠mbolo se abre una tabla que ofrece se√±ales que
pueden seleccionarse. La se√±al seleccionada se muestra en el campo de
entrada.
"Tipo de datos"

-

Campo de texto con la indicaci√≥n del tipo de datos de la se√±al

"Direcci√≥n"

-

Campo de entrada para la direcci√≥n de la se√±al
En las variables optimizadas o con seguridad de tipos, el campo perma‚Äê
nece vac√≠o.

"Comentario"

-

Campo de entrada para un comentario sobre la se√±al

Comandos del men√∫ contextual
La tabla siguiente muestra los comandos del men√∫ contextual de la tabla:
Comando del men√∫ contextual

Descripci√≥n

"Cortar"

No seleccionable

"Copiar"

Copia el contenido de las filas seleccionadas en el portapapeles.

"Insertar"

Inserta el contenido del portapapeles a partir de la fila seleccionada.
El contenido existente se sobrescribe.

"Borrar"

Borra las filas seleccionadas de la tabla o borra el contenido de la
celda seleccionada.

"Cambiar nombre"

Pasa la celda seleccionada al modo de edici√≥n.

Condiciones de registro
Interfaz Condiciones de registro
El √°rea "Condiciones de registro" muestra la condici√≥n de disparo para la configuraci√≥n de
Trace seleccionada y en qu√© ciclo, con qu√© rapidez y durante cu√°nto tiempo se registra.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

127

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

Muestreo
La figura siguiente muestra un ejemplo de ajustes de muestreo:

La tabla siguiente explica los ajustes y las visualizaciones:
Ajuste/visualizaci√≥n

Descripci√≥n

"Momento de registro"
Campo de entrada Ni‚Äê
vel de registro

Selecci√≥n del momento de registro

Campo de texto Direc‚Äê
ci√≥n del OB

Informaci√≥n detallada sobre el momento de registro seleccionado

Ver Niveles de registro (P√°gina 122)

"Registrar todos"
Campo de entrada Re‚Äê
ducci√≥n

Introducci√≥n de la reducci√≥n referida al factor de reducci√≥n y a la unidad

Lista desplegable Fac‚Äê
tor de reducci√≥n

Selecci√≥n de la unidad del factor de reducci√≥n
Pueden realizarse los siguientes ajustes:
‚óè "Ciclo"
‚óè "s" de segundos
La posibilidad de ajuste depende del nivel de registro seleccionado
en "Momento de registro".

Campo de texto Tiem‚Äê
po de muestreo

Visualizaci√≥n del intervalo de muestreo en funci√≥n de la reducci√≥n con‚Äê
figurada y la unidad seleccionada (solo para OB equidistantes)

"Duraci√≥n de registro m√°x."
Campo de texto Dura‚Äê
ci√≥n de registro m√°x.

Visualizaci√≥n de la duraci√≥n de registro m√°xima calculada

"Utilizar la duraci√≥n de
registro m√°x."

Ajuste de la duraci√≥n de registro a la duraci√≥n de registro m√°xima

La "Duraci√≥n de registro m√°x." depende del n√∫mero de se√±ales que se
registran y del tipo de datos que tienen estas se√±ales.
Al activar la casilla de verificaci√≥n, la duraci√≥n de registro se ajusta a la
duraci√≥n de registro m√°xima posible. Se tiene en cuenta el factor de
reducci√≥n ajustado en el campo de entrada "Registrar todos". Si se agre‚Äê
gan otras se√±ales, se ajusta la duraci√≥n de registro.
Encontrar√° m√°s informaci√≥n al respecto en la FAQ con la ID de art√≠culo
102781176 (http://support.automation.siemens.com/WW/view/es/
102781176).

"Duraci√≥n de registro"

128

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
Ajuste/visualizaci√≥n
Campo de entrada Du‚Äê
raci√≥n de registro

Lista desplegable Uni‚Äê
dad

Descripci√≥n
Introducci√≥n de la duraci√≥n de registro referida a la unidad seleccionada
Si la casilla de verificaci√≥n "Duraci√≥n de registro = Duraci√≥n de registro
m√°x." est√° activada, el valor mostrado en "Duraci√≥n de registro m√°x."
sobrescribe las entradas.
Selecci√≥n de la unidad para la duraci√≥n de registro
Pueden realizarse los siguientes ajustes:
‚óè "Puntos de medici√≥n"
Se registran como m√°ximo los puntos de medici√≥n parametrizados
en Duraci√≥n de registro.
‚óè "s" de segundos
La posibilidad de ajuste depende del nivel de registro seleccionado
en "Momento de registro".

Campo de texto Dura‚Äê Visualizaci√≥n de la duraci√≥n de registro calculada (solo para OB equidis‚Äê
ci√≥n de registro calcula‚Äê tantes)
da

Disparo
La figura siguiente muestra un ejemplo de ajustes de disparador:

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

129

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
La tabla siguiente explica los ajustes y las visualizaciones:
Ajuste/visualizaci√≥n

Descripci√≥n

"Disparador"

Selecci√≥n del disparador

Lista desplegable Dis‚Äê
parador

Pueden realizarse los siguientes ajustes:
‚óè "Registro inmediato"
El registro se efect√∫a inmediatamente despu√©s de la activaci√≥n en el
dispositivo.
El disparador global se dispara de inmediato con independencia del
estado operativo del dispositivo.
‚óè "Disparo a variable"
El registro se efect√∫a en cuanto se activa el Trace en el dispositivo y
se cumple la condici√≥n de disparo configurada.
‚óè "Observar sin disparo" (Traces)
El registro se efect√∫a en cuanto se activa el Trace en el dispositivo y
no finaliza autom√°ticamente. Cuando el usuario finaliza el registro,
hay como m√°ximo tantos valores de medici√≥n en el dispositivo como
los que se han configurado en la duraci√≥n de registro.
Este modo de disparo es especialmente adecuado para observar
se√±ales lentas y solo est√° disponible con Trace.
‚óè "Disparo de otro dispositivo" (Trace del proyecto)
El disparador global para el inicio de Trace se dispara desde otro
dispositivo.
Este modo de disparo solo est√° disponible en Trace del proyecto.

Campo de texto
"Variable de disparo"
Campo de entrada Va‚Äê
riable de disparo

Con la "Variable de disparo" se especifica una se√±al que se utiliza para
disparar el registro.
Introducci√≥n de una se√±al
Ejemplos:
‚óè "Bloque_datos_1".Temperatura
‚óè M0.0
‚óè DB1.DBW3
Ver tambi√©n Tipos de datos para la variable de disparo (P√°gina 133).
Abrir la tabla de selecci√≥n de se√±al
Al hacer clic en el s√≠mbolo, se abre una tabla con se√±ales que pueden
seleccionarse como variable de disparo. La se√±al seleccionada se mues‚Äê
tra en el campo de entrada.

Campo de texto Direc‚Äê
ci√≥n de la variable de
disparo
"Evento"

Visualizaci√≥n de la direcci√≥n de la variable de disparo
En las se√±ales puramente simb√≥licas, el campo permanece vac√≠o.
Conforme al tipo de datos de la variable de disparo, se ofrecen para su
selecci√≥n los eventos utilizables con esta variable de disparo.
La configuraci√≥n del evento solo es posible si se ha introducido una se√±al
v√°lida como variable de disparo.

Lista desplegable Even‚Äê Selecci√≥n de evento con el que se comprueba la variable de disparo
tos de disparo
Las entradas de la lista desplegable se describen en el cap√≠tulo Evento
de disparo (P√°gina 133).
Campo de texto

130

-

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
Ajuste/visualizaci√≥n

Descripci√≥n

"Valor"

Configuraci√≥n del evento seleccionado
Las posibilidades de configuraci√≥n var√≠an en funci√≥n del formato de la
variable de disparo y del evento seleccionado.
Ver Evento de disparo (P√°gina 133).

"Predisparo"

Con el "Predisparo" se define el n√∫mero de puntos de medici√≥n que se
registran antes de que se cumpla la condici√≥n de disparo propiamente
dicha.
Si el evento de disparo tiene lugar de inmediato o poco despu√©s de la
activaci√≥n del registro, la duraci√≥n de registro puede ser menor.
Ejemplos de "Duraci√≥n de registro (a)" = 20 puntos de medici√≥n y "Pre‚Äê
disparo (b)" = 5 puntos de medici√≥n:
‚óè Caso 1: El evento de disparo tiene lugar 50 puntos de medici√≥n tras
la activaci√≥n del registro.
Duraci√≥n de registro real (a) = 20 puntos de medici√≥n
‚óè Caso 2: El evento de disparo tiene lugar 2 puntos de medici√≥n tras la
activaci√≥n del registro.
Duraci√≥n de registro real (a) = 17 puntos de medici√≥n

Campo de entrada Du‚Äê
raci√≥n

Introducci√≥n de la duraci√≥n referida a la selecci√≥n de la lista desplegable

Lista desplegable Uni‚Äê
dad

Selecci√≥n de la unidad
Pueden realizarse los siguientes ajustes:
‚óè "Puntos de medici√≥n"
‚óè "s" de segundos
La posibilidad de ajuste depende del nivel de registro seleccionado
en "Momento de registro".

Campo de texto Dura‚Äê
ci√≥n de predisparo re‚Äê
sultante

Visualizaci√≥n de la "Duraci√≥n de predisparo" calculada
La duraci√≥n se muestra con el registro en OB equidistantes.

Mediciones en el dispositivo (tarjeta de memoria)
La figura siguiente muestra un ejemplo de ajustes para el almacenamiento de mediciones en
el dispositivo:

Con Traces de proyecto no es posible el almacenamiento de mediciones en el dispositivo
(tarjeta de memoria).

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

131

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

Nota
Memoria disponible en el dispositivo (tarjeta de memoria)
Parte de la memoria en el dispositivo (tarjeta de memoria) es usada para funciones relevantes
del sistema o est√° reservada para ellas.
Por esta raz√≥n no est√° disponible toda la memoria para almacenar las mediciones.
Para m√°s detalles, consultar el Manual de funciones Estructura y utilizaci√≥n de la memoria de
la CPU (https://support.industry.siemens.com/cs/es/es/view/59193101).
Nota
Memoria necesaria para rearranque
Tras un rearranque del dispositivo, se almacenan en el dispositivo como m√°ximo el n√∫mero de
mediciones que se hayan parametrizado en "N√∫mero de mediciones".
Al efectuar un nuevo rearranque, tenga en cuenta que las mediciones ya almacenadas no se
sobrescribir√°n y el "n√∫mero de mediciones" parametrizado se guardar√° de nuevo en el
dispositivo.
La tabla siguiente explica los ajustes y las visualizaciones:
Ajuste/visualizaci√≥n

Descripci√≥n

"Guardar las mediciones en Repetir autom√°ticamente la medici√≥n y guardarla en el dispositivo de
el dispositivo (tarjeta de me‚Äê manera permanente
moria)"
Este ajuste solo es posible con el modo de disparo "Disparo a variable".
Las mediciones se guardan en la tarjeta de memoria "Primary".
En los Traces que tienen activada la opci√≥n Guardar en dispositivo (tar‚Äê
para la repetici√≥n autom√°‚Äê
jeta de memoria), no se ofrece la funci√≥n
tica del registro.
Nota
Solo se guardan en el dispositivo las mediciones finalizadas. Los regis‚Äê
tros desactivados por el usuario no se guardan en el dispositivo.
Esta funci√≥n est√° disponible con las siguientes versiones de firmware:
‚óè S7-1200 a partir de V4.2
‚óè S7-1500 a partir de V2.0
La CPU S7-1500 R/H no permite esta funci√≥n.

132

"N√∫mero de mediciones"

Introducci√≥n del n√∫mero de mediciones que desea guardar en la tarjeta

"Memoria necesaria"

Visualizar la previsible memoria necesaria para todas las mediciones

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
Ajuste/visualizaci√≥n

Descripci√≥n
Mostrar la carga de la memoria
Muestra la ficha con la carga de la memoria.

"Comportamiento al alcan‚Äê
zar el n√∫mero"

Elecci√≥n del comportamiento al alcanzar el "N√∫mero de mediciones"
Pueden realizarse los siguientes ajustes:
‚óè "Desactivar registro"
Las mediciones se repetir√°n hasta que se alcance el "N√∫mero de
mediciones en la tarjeta" parametrizado.
‚óè "Sobrescribir el registro m√°s antiguo"
Las mediciones se guardan en un b√∫fer en anillo y se repiten hasta
que el usuario desactiva el registro. En el momento en que el n√∫mero
de mediciones supera el "N√∫mero de mediciones en la tarjeta"
parametrizado, se sobrescribe la medici√≥n m√°s antigua que exista en
la tarjeta.
Nota
Tenga en cuenta que las operaciones de escritura repetidas con
mucha frecuencia pueden da√±ar la tarjeta.

Tipos de datos para la variable de disparo
La tabla siguiente muestra los tipos de datos admitidos para la variable de disparo:
Memoria necesaria y formato del n√∫mero

Tipo de datos

1 byte

BOOL

Enteros de 8 bits

SINT, USINT, BYTE

Enteros de 16 bits

INT, UINT, WORD, DATE

Enteros de 32 bits
Enteros de 64 bits

DINT, UDINT, DWORD, TIME, TOD
1)

LINT, ULINT, LWORD, LTIME, LTOD, LDT

N√∫meros en coma flotante de 32 bits

REAL

N√∫meros en coma flotante de 64 bits

LREAL

1) No permitido en el S7-1200.

Evento de disparo
En funci√≥n de la selecci√≥n de la lista desplegable, se distinguen los siguientes ajustes para
"Evento".
A continuaci√≥n se describen los diferentes eventos.

"=TRUE"
Tipos de datos admitidos: Bit (P√°gina 133)
El registro se inicia con el estado TRUE del disparador.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

133

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

"=FALSE"
Tipos de datos admitidos: Bit (P√°gina 133)
El registro se inicia con el estado FALSE del disparador.

"Flanco ascendente"
Tipos de datos admitidos: Bit (P√°gina 133)
El registro se inicia cuando el disparador cambia de estado FALSE a TRUE.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"Se√±al de subida"
Tipos de datos admitidos: N√∫meros enteros y n√∫meros en coma flotante (P√°gina 133) (ning√∫n
temporizador, fecha y hora)
El registro se inicia cuando el valor ascendente del disparador alcanza o excede el valor
configurado para este evento.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"Flanco descendente"
Tipos de datos admitidos: Bit (P√°gina 133)
El registro se inicia cuando el disparador cambia de estado TRUE a FALSE.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"Se√±al de bajada"
Tipos de datos admitidos: N√∫meros enteros y n√∫meros en coma flotante (P√°gina 133) (ning√∫n
temporizador, fecha y hora)
El registro se inicia cuando el valor descendente del disparador alcanza o est√° por debajo del
valor configurado para este evento.
Tras activar el Trace del dispositivo, son necesarios al menos dos ciclos para que se detecte
el flanco.

"En rango"
Tipos de datos admitidos: N√∫meros enteros y n√∫meros en coma flotante (P√°gina 133)
El registro se inicia en cuanto el valor del disparador se encuentra dentro del rango de valores
configurado para este evento.

"Fuera del rango"
Tipos de datos admitidos: N√∫meros enteros y n√∫meros en coma flotante (P√°gina 133)

134

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
El registro se inicia en cuanto el valor del disparador se encuentra fuera del rango de valores
configurado para este evento.

"Cambio de valor"
Se soportan todos los tipos de datos.
Se comprueban los cambios en el valor a partir de la activaci√≥n del registro. El registro se inicia
cuando se modifica el valor de disparo.
Este evento de disparo se soporta a partir de V13 SP1. Las versiones anteriores del TIA Portal
no pueden interpretar este disparador. Tenga en cuenta que en este caso no se emite ninguna
indicaci√≥n expl√≠cita. Esto puede suceder, p. ej., si el Trace se transmite de una CPU a un TIA
Portal anterior a V13 SP1 o se importa una configuraci√≥n de Trace.

"= valor"
Tipos de datos admitidos: Enteros (P√°gina 133)
El registro se inicia cuando el valor del disparador sea igual al valor configurado para este
evento.

"<> valor"
Tipos de datos admitidos: Enteros (P√°gina 133)
El registro se inicia cuando el valor del disparador sea diferente al valor configurado para este
evento.

"= patr√≥n de bits"
Tipos de datos admitidos: N√∫meros enteros (P√°gina 133) (ning√∫n temporizador, fecha y hora)
El registro se inicia cuando el valor del disparador coincida con el patr√≥n de bits configurado
para este evento.
La figura siguiente muestra las posibilidades de ajuste de un "patr√≥n de bits":

Haciendo clic en el bot√≥n correspondiente, puede cambiarse entre los distintos s√≠mbolos.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

135

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
La tabla siguiente muestra los s√≠mbolos:
S√≠mbolo

Descripci√≥n
El bit no se eval√∫a.
El bit se comprueba buscando FALSE.
El bit se comprueba buscando TRUE.

"<> patr√≥n de bits"
Tipos de datos admitidos: N√∫meros enteros (P√°gina 133) (ning√∫n temporizador, fecha y hora)
El registro se inicia cuando el valor del disparador no coincida con el patr√≥n de bits configurado
para este evento.

Consulte tambi√©n
Configuraci√≥n de las condiciones de disparo (P√°gina 138)
Captaci√≥n de variables (P√°gina 120)

6.5.1.9

Configuraci√≥n

Configuraci√≥n de Trace: vista general
La configuraci√≥n de las condiciones de registro y las se√±ales que deben registrarse es
espec√≠fica de dispositivo.

Requisitos
Hay una configuraci√≥n de Trace creada y abierta en el √°rea de trabajo en la ficha
"Configuraci√≥n".

Procedimiento
La tabla siguiente muestra el procedimiento de configuraci√≥n.
Paso

Descripci√≥n

1

Documentaci√≥n de la configuraci√≥n (opcional)
Introduzca un comentario y un autor para la configuraci√≥n en la ventana de inspecci√≥n.

2

Selecci√≥n de se√±ales (P√°gina 137)

3

Configuraci√≥n del ciclo y la duraci√≥n de registro (P√°gina 137)

Seleccione las se√±ales que deben registrarse en el √°rea "Se√±ales".
Seleccione un momento de registro, un ciclo y la duraci√≥n en el √°rea "Condiciones de
registro".

136

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
Paso

Descripci√≥n

4

Configuraci√≥n de las condiciones de disparo (P√°gina 138)
Especifique en el √°rea "Condiciones de registro" si el registro se efect√∫a de forma inmediata
o conforme a una condici√≥n de disparo.

5

Configuraci√≥n de mediciones en el dispositivo (tarjeta de memoria) (P√°gina 139)
Especifique en el √°rea "Condiciones de registro" si se debe guardar la medici√≥n en el dis‚Äê
positivo (tarjeta de memoria).

Selecci√≥n de se√±ales
Requisitos
‚óè Se ha creado y abierto una configuraci√≥n de Trace.
‚óè El √°rea "Se√±ales" est√° abierta en la ficha "Configuraci√≥n".

Procedimiento
Para configurar las se√±ales que deben registrarse, proceda del siguiente modo:
1. Seleccione una se√±al. Existen las posibilidades siguientes:
‚Äì En la columna "Nombre", haga clic en el bot√≥n

y seleccione una variable.

‚Äì En la columna "Nombre", introduzca el nombre simb√≥lico de la variable en la celda.
‚Äì Introduzca directamente la direcci√≥n en la columna "Direcci√≥n".
‚Äì Arrastre una se√±al hasta la tabla mediante Drag & Drop.
2. Haga clic en la columna "Comentario" e introduzca un comentario para la se√±al.
3. Repita las operaciones a partir del paso 1 hasta que todas las se√±ales que deben
registrarse est√©n introducidas en la tabla.

Configuraci√≥n del ciclo y la duraci√≥n de registro
Requisitos
‚óè Se ha creado y abierto una configuraci√≥n de Trace.
‚óè El √°rea "Condiciones de registro" est√° abierta en la ficha "Configuraci√≥n".

Procedimiento
Para configurar el ciclo y la duraci√≥n de un registro, proceda del siguiente modo:
1. Haga clic en el bot√≥n

para el momento de registro.

2. Seleccione un OB para el momento de registro (P√°gina 122).
3. Seleccione una unidad para el factor de reducci√≥n en la lista desplegable de "Registrar
cada".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

137

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos
4. Introduzca el factor de reducci√≥n en el campo de entrada de "Registrar cada".
5. Seleccione una unidad en la lista desplegable "Duraci√≥n de registro".
6. Defina la duraci√≥n de registro.
Existen las posibilidades siguientes:
‚Äì Introduzca un valor para la duraci√≥n en el campo de entrada "Duraci√≥n de registro".
‚Äì Active la casilla de verificaci√≥n "Utilizar la duraci√≥n de registro m√°x."

Configuraci√≥n de las condiciones de disparo
Requisitos
‚óè Se ha creado y abierto una configuraci√≥n de Trace.
‚óè El √°rea "Condiciones de registro" est√° abierta en la ficha "Configuraci√≥n".

Condici√≥n de disparo "Registro inmediato"
Para iniciar el registro de forma inmediata, proceda del siguiente modo:
1. Seleccione la entrada "Registro inmediato" en la lista desplegable "Disparador".
Los campos de entrada para la variable de disparo se ocultan.

Condici√≥n de disparo "Disparo a variable"
Para iniciar el registro conforme a una condici√≥n, proceda del siguiente modo:
1. Seleccione la entrada "Disparo a variable" en la lista desplegable "Disparador".
2. Seleccione una variable de disparo. Existen las posibilidades siguientes:
‚Äì Haga clic en el bot√≥n

para la variable de disparo y seleccione una variable.

‚Äì Introduzca directamente la direcci√≥n o el nombre simb√≥lico de la variable en el campo
de entrada de la variable de disparo.
Se muestra una lista desplegable con eventos y campos de entrada. La visualizaci√≥n
depende del tipo de datos de la variable.
3. Configure el evento.
4. Seleccione una unidad del predisparo en la lista desplegable de "Predisparo".
5. Para registrar un intervalo de tiempo antes del evento de disparo, introduzca un valor
superior a 0 en el campo de entrada para el predisparo.
Nota
Comprobaci√≥n c√≠clica de la condici√≥n de disparo
La condici√≥n de disparo se comprueba en cada ciclo independientemente del ajuste de
"Registrar todos". Para la detecci√≥n segura del disparo, la se√±al de disparo debe estar
presente al menos un ciclo completo.

138

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

Configuraci√≥n de mediciones en el dispositivo (tarjeta de memoria)
Requisitos
‚óè Se ha creado y abierto una configuraci√≥n de Trace.
‚óè El √°rea "Condiciones de registro" est√° abierta en la ficha "Configuraci√≥n".
‚óè Est√° ajustado el modo de disparo "Disparo a variable".
‚óè El firmware del dispositivo soporta el registro de una medici√≥n en el dispositivo.

Procedimiento
Para guardar los datos en el dispositivo (en la tarjeta de memoria), haga lo siguiente:
1. Active la casilla de verificaci√≥n "Guardar las mediciones en el dispositivo (tarjeta de
memoria)".
2. Introduzca en el campo de entrada "N√∫mero de mediciones" el n√∫mero de mediciones que
se guardar√°n en la tarjeta.
3. Ajuste en la lista desplegable "Comportamiento al alcanzar el n√∫mero" el comportamiento
deseado al alcanzar el "N√∫mero de mediciones".
Nota
No se eval√∫a el disparo durante el almacenamiento
Mientras se almacena el registro, no es posible evaluar nuevos disparos.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

139

Uso de la funci√≥n Trace y de analizador l√≥gico
6.5 Dispositivos

140

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con
TeleService
7.1

Principios b√°sicos para el trabajo con TeleService

7.1.1

Introducci√≥n a TeleService

7

Introducci√≥n
Gracias a TeleService el controlador puede comunicarse a distancia. Ello permite gestionar,
controlar y supervisar de forma centralizada instalaciones descentralizadas a trav√©s de
conexiones remotas.

Funcionalidad
TeleService permite utilizar la funcionalidad del TIA Portal a trav√©s de una red telef√≥nica o una
conexi√≥n a Internet estableciendo una conexi√≥n remota con una instalaci√≥n remota. A trav√©s
de la conexi√≥n online es posible trabajar tambi√©n con una instalaci√≥n remota de la forma
habitual con el TIA portal.

Ventajas
El uso de TeleService proporciona las siguientes ventajas:
‚óè As√≠ tambi√©n se puede acceder c√≥modamente a partes de instalaciones remotas e
integrarlas en un sistema m√°s amplio.
‚óè En caso de fallos en una instalaci√≥n remota, pueden ofrecerse ayuda y soporte con rapidez
sin tener que estar presente.
‚óè Uso eficaz de los recursos.
‚óè Los costes se reducen considerablemente.
‚óè Los tiempos improductivos de las instalaciones pueden reducirse sustancialmente.
‚óè Aumenta la rentabilidad de su instalaci√≥n.

Consulte tambi√©n
Funcionalidad de TeleService (P√°gina 142)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

141

Establecimiento de conexiones remotas con TeleService
7.1 Principios b√°sicos para el trabajo con TeleService

7.1.2

Funcionalidad de TeleService

Posibles aplicaciones de TeleService
TeleService le ofrece las siguientes aplicaciones posibles:
‚óè Acceder a instalaciones remotas (asistencia t√©cnica a distancia):
Las instalaciones descentralizadas se pueden gestionar, controlar y supervisar de forma
centralizada a trav√©s de conexiones remotas.
Esto es posible con una CPU S7-300/400, una CPU S7-1200 y una CPU S7-1500 y, en
cada caso, con un TS Adapter MPI o un TS Adapter IE.
‚óè Establecer conexiones desde y hacia instalaciones remotas (acoplamiento remoto PGPLC):
Con ayuda de PRODAVE MPI V5.0 y versiones superiores se puede establecer una
conexi√≥n a distancia hacia una instalaci√≥n remota y, con la instrucci√≥n de comunicaci√≥n
"PG_DIAL" , se puede establecer una conexi√≥n a distancia desde una instalaci√≥n remota.
Esto es posible con una CPU S7-300/400 y un TS Adapter MPI.
‚óè Intercambiar datos entre instalaciones (acoplamiento remoto PLC-PLC):
Mediante la instrucci√≥n de comunicaci√≥n "AS_DIAL", dos sistemas de automatizaci√≥n
pueden intercambiar datos de proceso a trav√©s de la red telef√≥nica.
Esto es posible con una CPU S7-300/400 y un TS Adapter MPI.
‚óè Enviar un mensaje SMS desde una instalaci√≥n:
Un sistema de automatizaci√≥n puede enviar un mensaje (SMS) a trav√©s de un m√≥dem
inal√°mbrico GSM con la instrucci√≥n de comunicaci√≥n "SMS_SEND" .
Esto es posible con una CPU S7-300/400 y un TS Adapter MPI.
‚óè Enviar un e-mail desde una instalaci√≥n
Un sistema de automatizaci√≥n tambi√©n puede enviar un correo electr√≥nico utilizando las
siguientes instrucciones de comunicaci√≥n y un TS Adapter IE .
‚Äì Las CPU S7-300/400 (CPU S7-31x-2PN/DP o CPU 41x-3PN/D) utilizan la instrucci√≥n
"AS_MAIL"
‚Äì Las CPU S7-1200 utilizan la instrucci√≥n "TM_MAIL"
‚Äì Las CPU S7-1500 utilizan la instrucci√≥n "TMAIL_C"

7.1.3

List√≠n telef√≥nico en TeleService

Introducci√≥n
Haciendo doble clic en la carpeta "List√≠n telef√≥nico" en el √°rbol del proyecto, se abre el editor
del list√≠n telef√≥nico, que muestra el List√≠n telef√≥nico de TeleService.
Cada versi√≥n del TIA Portal dispone de un "list√≠n telef√≥nico global" propio. Si en una nueva
versi√≥n del TIA Portal se encuentra un list√≠n telef√≥nico global procedente de una versi√≥n
anterior del TIA Portal, se le consultar√° una √∫nica vez si desea importar este list√≠n telef√≥nico.

142

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico
Esto tiene la ventaja de que en la nueva versi√≥n del TIA Portal tambi√©n dispondr√° de los datos
de instalaci√≥n de la versi√≥n anterior.

Propiedades del list√≠n telef√≥nico global
El list√≠n telef√≥nico global sirve en TeleService para gestionar los datos de instalaci√≥n
espec√≠ficos que son necesarios para establecer una conexi√≥n remota.
Al abrir el list√≠n telef√≥nico por primera vez, se muestra un list√≠n telef√≥nico vac√≠o con todas las
columnas existentes; en caso contrario, se muestra el √∫ltimo list√≠n telef√≥nico editado.
En un list√≠n telef√≥nico puede introducirse el n√∫mero de instalaciones que se desee. Las
instalaciones contienen los datos necesarios para establecer una conexi√≥n remota, p. ej., el
nombre y la ubicaci√≥n del nodo, as√≠ como el n√∫mero de tel√©fono que se debe marcar con los
detalles espec√≠ficos del pa√≠s. En las conexiones VPN se puede introducir una direcci√≥n IP o un
nombre DNS en vez de un n√∫mero de tel√©fono.
Los TS Adapter utilizados para establecer la conexi√≥n se muestran en colores distintos en
funci√≥n de si se emplea un TS Adapter MPI o un TS Adapter IE para establecer la conexi√≥n.

7.2

Trabajar con el list√≠n telef√≥nico

7.2.1

Principios b√°sicos para trabajar con el list√≠n telef√≥nico

Trabajar con el list√≠n telef√≥nico
Se dispone de las siguientes posibilidades para trabajar con un list√≠n telef√≥nico:
‚óè Abrir el list√≠n telef√≥nico
‚óè Guardar el list√≠n telef√≥nico
‚óè Importar datos del list√≠n telef√≥nico
‚óè Exportar datos del list√≠n telef√≥nico
‚óè Imprimir datos del list√≠n telef√≥nico
‚óè Utilizar datos del list√≠n telef√≥nico para establecer una conexi√≥n remota
Puede implementar estas funciones c√≥modamente mediante los botones que se muestran en
la barra de herramientas del list√≠n telef√≥nico.
Nota
Acceso a listines telef√≥nicos
El list√≠n telef√≥nico se guarda en TeleService de forma espec√≠fica para cada usuario. Sin
embargo, no es posible acceder al list√≠n telef√≥nico global con m√°s de una instancia del TIA
Portal al mismo tiempo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

143

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico

Consulte tambi√©n
Abrir el list√≠n telef√≥nico (P√°gina 145)
Guardar el list√≠n telef√≥nico (P√°gina 146)
Exportar datos del list√≠n telef√≥nico (P√°gina 148)
Imprimir el list√≠n telef√≥nico (P√°gina 149)
Configuraci√≥n del list√≠n telef√≥nico (P√°gina 144)

7.2.2

Configuraci√≥n del list√≠n telef√≥nico

Introducci√≥n
En TeleService, un list√≠n telef√≥nico global sirve para gestionar los datos necesarios para
establecer una conexi√≥n remota. Si ya se han creado una vez los datos de la conexi√≥n y se han
almacenado en el list√≠n telef√≥nico, puede volver a acceder a ellos para establecer una conexi√≥n
remota.

Configuraci√≥n del list√≠n telef√≥nico
El list√≠n telef√≥nico global integrado en TeleService contiene las siguientes columnas:
Nombre de columna

Explicaci√≥n

Nombre de la instalaci√≥n

Introduzca aqu√≠ el nombre que desee para su instalaci√≥n.

Tipo de adaptador

Seleccione de la lista desplegable el tipo de adaptador utilizado: TS Adapter MPI o TS
Adapter IE.

Tipo de conexi√≥n

Seleccione el tipo de conexi√≥n deseado: conexi√≥n por l√≠nea telef√≥nica o conexi√≥n VPN.

C√≥digo local

Introduzca aqu√≠ el c√≥digo local deseado.
Esta columna solo est√° activada en las conexiones por l√≠nea telef√≥nica. En las cone‚Äê
xiones VPN, esta columna no se puede editar.

N√∫mero de tel√©fono/Direcci√≥n remo‚Äê Introduzca aqu√≠ los datos de conexi√≥n que desee para establecer la conexi√≥n remota.
ta
Estos datos pueden ser un n√∫mero de tel√©fono para las conexiones por l√≠nea telef√≥nica
y un nombre DNS o una direcci√≥n IP para las conexiones VPN.
Huella digital

Introduzca aqu√≠ la huella digital correspondiente para establecer una conexi√≥n VPN
con el TS Adapter IE Advanced.

Pa√≠s

Introduzca el prefijo correspondiente al pa√≠s.
Esta columna solo est√° activada en las conexiones por l√≠nea telef√≥nica. En las cone‚Äê
xiones VPN, esta columna no se puede editar.

Nombre de usuario

Introduzca el nombre de usuario con el que se ha registrado.

Contrase√±a

Introduzca aqu√≠ la contrase√±a correspondiente al nombre de usuario.

Grupo

Introduzca aqu√≠ el grupo correspondiente en caso de que haya realizado una agrupa‚Äê
ci√≥n.

Empresa

Introduzca la empresa con la que hay que establecer contacto.

Departamento

Introduzca el departamento correspondiente.

Calle

Introduzca la calle.

144

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico
Nombre de columna

Explicaci√≥n

Localidad

Introduzca la localidad con la que debe establecerse la conexi√≥n remota.

Comentario

Si lo desea, introduzca un comentario.

Mostrar u ocultar columnas
Las columnas se pueden mostrar u ocultar individualmente. Para ello, seleccione el t√≠tulo de la
columna deseada y abra el men√∫ contextual con el bot√≥n derecho del rat√≥n.

7.2.3

S√≠mbolos del list√≠n telef√≥nico

Significado de los s√≠mbolos en TeleService
La tabla siguiente muestra el significado de los s√≠mbolos en TeleService:
S√≠mbolo

Significado
Abre el list√≠n telef√≥nico global
Importa un list√≠n telef√≥nico
Exporta un list√≠n telef√≥nico
Establece una conexi√≥n remota
Desconecta la conexi√≥n remota activa
Establece una conexi√≥n remota o la desconecta
Muestra la conexi√≥n a un TS Adapter IE en el list√≠n telef√≥nico
Muestra la conexi√≥n a un TS Adapter MPI en el list√≠n telef√≥nico
Agrega una nueva fila al list√≠n telef√≥nico
Inserta una nueva fila en el list√≠n telef√≥nico

7.2.4

Administrar el list√≠n telef√≥nico

7.2.4.1

Abrir el list√≠n telef√≥nico

Abrir listines telef√≥nicos
Para abrir el list√≠n telef√≥nico, proceda del siguiente modo:
1. En el √°rbol del proyecto, haga doble clic en la carpeta "List√≠n telef√≥nico" bajo "Accesos
online" > "TeleService".
2. El list√≠n telef√≥nico se abre y pueden introducirse o editarse los datos de instalaci√≥n
deseados.
Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

145

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico

7.2.4.2

Insertar filas en el list√≠n telef√≥nico

Insertar filas en el list√≠n telef√≥nico
Para insertar una nueva fila en el list√≠n telef√≥nico, proceda del siguiente modo:
1. Seleccione la fila antes de la cual desee insertar nueva una fila.
2. Haga clic en el bot√≥n "Insertar fila" de la barra de herramientas.

Resultado
Se inserta una nueva fila en el list√≠n telef√≥nico antes de la seleccionada.

7.2.4.3

Mostrar y ocultar columnas en el list√≠n telef√≥nico

Mostrar y ocultar columnas
Para mostrar u ocultar columnas en el list√≠n telef√≥nico, proceda del siguiente modo:
1. Haga clic en el encabezado de una columna.
2. Elija el comando "Mostrar/ocultar columnas" del men√∫ contextual.
Aparece una selecci√≥n de las columnas disponibles.
3. Para mostrar una columna, active la casilla de verificaci√≥n correspondiente.
4. Para ocultar una columna, desactive la casilla de verificaci√≥n de la columna.

Resultado
Las columnas en cuesti√≥n se muestran o se ocultan en la vista del list√≠n telef√≥nico.

7.2.4.4

Guardar el list√≠n telef√≥nico

Guardar listines telef√≥nicos
Al salir del editor de listines telef√≥nicos o del TIA Portal, se le preguntar√° si desea guardar el
list√≠n telef√≥nico global.
Para guardar el list√≠n telef√≥nico haga clic en "S√≠".

7.2.4.5

Importar datos del list√≠n telef√≥nico

Introducci√≥n
Existe la posibilidad de importar los datos del list√≠n telef√≥nico de un archivo externo o de una
versi√≥n anterior del TIA Portal.

146

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico

Requisitos
Ha creado un archivo de list√≠n telef√≥nico importable.
Hab√≠a creado un list√≠n telef√≥nico con una versi√≥n anterior del TIA Portal.

Importar datos del list√≠n telef√≥nico del archivo de list√≠n telef√≥nico
Para importar datos del list√≠n telef√≥nico de un archivo de list√≠n telef√≥nico, proceda de siguiente
modo:
1. Abra la carpeta "TeleService" en "Accesos online" en el √°rbol del proyecto.
2. Haga doble clic en la carpeta "List√≠n telef√≥nico".
3. En el list√≠n telef√≥nico, haga clic en el bot√≥n "Importar" de la barra de herramientas.
4. Confirme la consulta de si debe guardarse la versi√≥n actual del list√≠n telef√≥nico de trabajo
con "S√≠", si fuera el caso, y elija en el cuadro de di√°logo siguiente la ubicaci√≥n en la que debe
guardarse el list√≠n telef√≥nico.
5. Si no desea guardar el estado actual del list√≠n telef√≥nico de trabajo, seleccione "No" en la
consulta. Seleccione en el cuadro de di√°logo siguiente qu√© archivo de list√≠n telef√≥nico debe
guardarse en el list√≠n telef√≥nico actual.
6. Cierre el cuadro de di√°logo haciendo clic en "Aceptar".

Resultado
Los datos del list√≠n telef√≥nico importados se muestran en el list√≠n telef√≥nico global.

Nota
Definir reglas de marcaci√≥n
Para poder editar las columnas "C√≥digo local" y "Pa√≠s" en el list√≠n telef√≥nico importado para
conexiones por l√≠nea telef√≥nica, deben definirse unas reglas de marcaci√≥n.
Para definir las reglas de marcaci√≥n, siga el enlace que se muestra en el hist√≥rico.

Importar datos del list√≠n telef√≥nico de una versi√≥n anterior del TIA Portal
Para importar los datos del list√≠n telef√≥nico de una versi√≥n anterior del TIA Portal, proceda del
siguiente modo:
1. Abra la carpeta "TeleService" en "Accesos online" en el √°rbol del proyecto.
2. Haga doble clic en la carpeta "List√≠n telef√≥nico".
3. En el list√≠n telef√≥nico, haga clic en el bot√≥n "Importar" de la barra de herramientas.
4. Confirme la consulta de si debe guardarse la versi√≥n actual del list√≠n telef√≥nico de trabajo
con "S√≠", si fuera el caso, y elija en el cuadro de di√°logo siguiente la ubicaci√≥n en la que debe
guardarse el list√≠n telef√≥nico.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

147

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico
5. Si no desea guardar el estado actual del list√≠n telef√≥nico de trabajo, seleccione "No" en la
consulta.
6. Introduzca la ruta siguiente en el cuadro de di√°logo que se abre: "%appdata%\siemens
\automation\TeleService\GlobalTeleServicePhoneBook.tel".
7. Cierre el cuadro de di√°logo haciendo clic en "Aceptar".

Resultado
Los datos del list√≠n telef√≥nico importados de una versi√≥n anterior del TIA Portal se muestran en
el list√≠n telef√≥nico global.

Nota
Definir reglas de marcaci√≥n
Para poder editar las columnas "C√≥digo local" y "Pa√≠s" en el list√≠n telef√≥nico importado para
conexiones por l√≠nea telef√≥nica, deben definirse unas reglas de marcaci√≥n.
Para definir las reglas de marcaci√≥n, siga el enlace que se muestra en el hist√≥rico.

Consulte tambi√©n
Definir reglas de marcaci√≥n (P√°gina 149)

7.2.4.6

Exportar datos del list√≠n telef√≥nico

Introducci√≥n
Existe la posibilidad de exportar los datos del list√≠n telef√≥nico a un archivo externo.

Requisitos
Ha creado un list√≠n telef√≥nico con los datos de la instalaci√≥n correspondientes en TeleService.

Procedimiento
Para exportar los datos del list√≠n telef√≥nico, proceda del siguiente modo:
1. Abra la carpeta "TeleService" del √°rbol del proyecto.
2. Haga doble clic en la carpeta "List√≠n telef√≥nico".
3. En el list√≠n telef√≥nico, haga clic en el bot√≥n "Exportar" de la barra de herramientas.
4. Seleccione en el cuadro de di√°logo siguiente a d√≥nde debe exportarse el list√≠n telef√≥nico
actual.
5. Cierre el cuadro de di√°logo haciendo clic en "Aceptar".

148

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico

Resultado
Los datos del list√≠n telef√≥nico exportados se guardan en el archivo de exportaci√≥n indicado.

7.2.4.7

Imprimir el list√≠n telef√≥nico

Imprimir listines telef√≥nicos
Puede imprimir todos los datos de un list√≠n telef√≥nico o s√≥lo una determinada parte de un list√≠n
telef√≥nico.

Proceda del siguiente modo:
1. Abra el list√≠n telef√≥nico.
2. Seleccione el comando Proyecto > Imprimir o haga clic en el bot√≥n correspondiente de la
barra de herramientas. Se abre el cuadro de di√°logo "Imprimir".
3. En este cuadro de di√°logo indique si desea imprimir todo el list√≠n telef√≥nico o s√≥lo una parte
del mismo y ajuste todas las dem√°s opciones.
4. Arranque el proceso de impresi√≥n pulsando "Aceptar".

Resultado
Los datos del list√≠n telef√≥nico se imprimen en la impresora predeterminada. Si la impresi√≥n
abarca varias p√°ginas, en el borde inferior derecho de la p√°gina se imprime el n√∫mero de
p√°gina seguido de una identificaci√≥n de las p√°ginas que siguen. La √∫ltima p√°gina no tiene esta
identificaci√≥n.

7.2.4.8

Definir reglas de marcaci√≥n

Procedimiento
Para definir reglas de marcaci√≥n espec√≠ficas para una ubicaci√≥n, proceda del siguiente modo:
1. Abra la carpeta "Accesos online" del TIA Portal y seleccione la carpeta "TeleService".
2. Abra las propiedades de "TeleService" a trav√©s del men√∫ contextual.
3. En el cuadro de di√°logo siguiente, abra la ficha "Configuraci√≥n avanzada" y active la opci√≥n
"Utilizar reglas de marcaci√≥n".
4. Haga clic en el bot√≥n "Adaptar".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

149

Establecimiento de conexiones remotas con TeleService
7.2 Trabajar con el list√≠n telef√≥nico
5. Introduzca en el cuadro de di√°logo siguiente la informaci√≥n sobre la ubicaci√≥n que desee
para establecer la conexi√≥n correspondiente.
‚Äì Para las nuevas ubicaciones, indique el pa√≠s o la regi√≥n y el c√≥digo local
correspondiente.
‚Äì En caso necesario, ajuste el c√≥digo de red correcto y el prefijo de marcado para l√≠nea
urbana para llamadas locales/llamadas de larga distancia.
‚Äì Seleccione el m√©todo de marcado deseado para la ubicaci√≥n.
6. Cierre este cuadro de di√°logo haciendo clic en "Aceptar".
7. Seleccione en el cuadro de di√°logo siguiente la ubicaci√≥n desde la que debe realizarse el
marcado y haga clic en "Aceptar".
8. Compruebe en el siguiente cuadro de di√°logo de TeleService si se ha introducido la
ubicaci√≥n deseada en "Ubicaci√≥n".
9. Confirme las entradas realizadas haciendo clic en "Aceptar".
Nota
Utilizaci√≥n del m√≥dem en una l√≠nea urbana o ubicaci√≥n secundaria
Si utiliza el m√≥dem en una l√≠nea urbana (centralita), no necesita indicar ning√∫n prefijo de
marcado para l√≠nea urbana. Los campos del prefijo de marcado para l√≠nea urbana deben estar
vac√≠os para llamadas locales y llamadas de larga distancia.
Si opera el m√≥dem en una ubicaci√≥n secundaria, debe introducir el prefijo de marcado que
debe elegirse para obtener una l√≠nea urbana.

Ejemplo de utilizaci√≥n de reglas de marcaci√≥n
En el siguiente ejemplo se muestra la utilizaci√≥n de reglas de marcaci√≥n espec√≠ficas para una
ubicaci√≥n para la localidad de Karlsruhe, Alemania.
‚óè Introduzca en el list√≠n telef√≥nico de TeleService para una instalaci√≥n el n√∫mero de tel√©fono
"1234567", sin prefijo y sin identificador de pa√≠s.
Resultado:
Siempre se marcar√° el n√∫mero de tel√©fono "1234567", independientemente de la ubicaci√≥n
de la persona que llama.
‚óè Introduzca en el list√≠n telef√≥nico de TeleService, adem√°s del n√∫mero de tel√©fono
"1234567", los par√°metros de marcado espec√≠ficos de la ubicaci√≥n, que son el prefijo
"0721" de Karlsruhe y el identificador de pa√≠s "+49" para Alemania.
Resultado:
Desde Karlsruhe se marca el n√∫mero de tel√©fono "1234567".
Desde otras localidades dentro de Alemania se marca el n√∫mero de tel√©fono
"07211234567".
Desde otro pa√≠s se marca el n√∫mero de tel√©fono "00497211234567".

150

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

Nota
Visualizaci√≥n en el list√≠n telef√≥nico
Las columnas "C√≥digo local" y "Pa√≠s" del list√≠n telef√≥nico de TeleService solo se pueden editar
si se han definido reglas de marcaci√≥n tal como se ha descrito antes.

7.3

Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.1

Principios b√°sicos para el establecimiento de una conexi√≥n por l√≠nea telef√≥nica

Uso de un TS Adapter para conexiones por l√≠nea telef√≥nica
Para poder establecer una conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica con
TeleService, es necesario utilizar un TS Adapter.
El TS Adapter se utiliza para conectar un sistema de automatizaci√≥n v√≠a m√≥dem a la red
telef√≥nica y de este modo preparar el sistema para el uso de TeleService. Para ello, el
TS Adapter dispone de una memoria de par√°metros en la que se puede guardar un juego de
par√°metros para el uso de TeleService.
La funci√≥n "Exportaci√≥n de par√°metros del adaptador" permite guardar distintos juegos de
par√°metros en archivos externos, mientras que con la funci√≥n "Importaci√≥n de par√°metros del
adaptador" pueden volver a cargarse en el TS Adapter .

Establecimiento de la conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
Puede elegir entre distintos TS Adapter que ofrecen en cada caso una funcionalidad diferente
y distintas posibilidades de conexi√≥n.
La siguiente figura muestra dos configuraciones posibles para establecer una conexi√≥n por
l√≠nea telef√≥nica con una instalaci√≥n mediante un TS Adapter IE.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

151

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
76$GDSWHU,(
)XQFLRQDPLHQWRFRQP¬µGHPH[W

0¬µGHP

(WKHUQHW

0¬µGHP

3*3&

6LVWHPDGHDXWRPDWL]DFL¬µQ

76$GDSWHU,(
)XQFLRQDPLHQWRFRQP¬µGHPLQW
(WKHUQHW

0¬µGHP
3*3&

6LVWHPDGHDXWRPDWL]DFL¬µQ

Resumen de los TS Adapter que pueden utilizarse:
Existen los siguientes modelos de TS Adapter:
‚óè TS Adapter II (tambi√©n denominado "TS Adapter MPI")
‚óè TS Adapter IE Standard (tambi√©n denominado "TS Adapter IE")
‚óè TS Adapter IE Basic (tambi√©n denominado "TS Adapter IE")

Denominaci√≥n "TS Adapter"
A continuaci√≥n, se utiliza la denominaci√≥n "TS Adapter" para todos los modelos. En los casos
en los que solo se hace referencia a un modelo determinado, se especifica si se trata de
"TS Adapter II" o "TS Adapter IE Standard".
Nota
Encontrar√° m√°s informaci√≥n sobre el TS Adapter que est√° utilizando en la documentaci√≥n que
se le ha suministrado con su TS Adapter.

Consulte tambi√©n
Breve descripci√≥n del TS Adapter MPI (P√°gina 160)
Breve descripci√≥n del TS Adapter IE (P√°gina 168)
Exportaci√≥n de par√°metros del adaptador (P√°gina 166)
Importaci√≥n de par√°metros del adaptador (P√°gina 167)

152

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.2

Redes telef√≥nicas y m√≥dems

7.3.2.1

Redes telef√≥nicas y m√≥dems permitidos

Redes telef√≥nicas que pueden utilizarse
TeleService se puede utilizar con redes digitales (RDSI), redes anal√≥gicas y redes por
radiofrecuencia (con tecnolog√≠a GSM). La presente versi√≥n soporta una conexi√≥n remota a un
TS Adapter.

Compatibilidad con m√≥dem
TeleService ha sido desarrollado independientemente del m√≥dem. Por ello, todos los m√≥dems
de venta habitual en el mercado que se puedan instalar desde el Panel de control de Windows
y que all√≠ sean visibles como m√≥dem tambi√©n pueden ser utilizados por TeleService.
El tipo de m√≥dem a elegir depende del hardware de la programadora / del PC y de la red
telef√≥nica utilizada.

Tipos de m√≥dems/medios compatibles:
‚óè M√≥dems (m√≥dems externos en el puerto COM, m√≥dems internos y tarjetas PCMCIA)
‚óè Adaptador ISDN (RDSI) externo en el puerto COM o USB
‚óè Adaptador ISDN (RDSI) interno con puerto COM virtual (p. ej., puerto AVM CAPI)
‚óè M√≥dems ISDN (RDSI) externos (adaptador ISDN (RDSI) con funcionalidad de m√≥dem
anal√≥gico integrada) en el puerto COM o USB
‚óè M√≥dems inal√°mbricos con tecnolog√≠a GSM, tarjeta adaptador PCMCIA o cable de datos y
m√≥vil

Routers
En principio es posible utilizar routers entre las distintas redes telef√≥nicas. Las conexiones
remotas de un adaptador ISDN (RDSI) a un m√≥dem anal√≥gico y a la inversa funcionan s√≥lo con
adaptadores telef√≥nicos ISDN (RDSI) especiales.

Capacidad de las redes telef√≥nicas
El flujo de datos de una conexi√≥n remota depende del m√≥dem utilizado, de la red telef√≥nica
utilizada y de la calidad de la l√≠nea telef√≥nica.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

153

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.2.2

Instalar el m√≥dem local

Introducci√≥n
Si el sistema operativo ya tiene instalado un m√≥dem para la transmisi√≥n de datos, puede
utilizarse este m√≥dem tambi√©n para TeleService.
Si el sistema operativo a√∫n no reconoce ning√∫n m√≥dem, debe instalarse un m√≥dem para
establecer una conexi√≥n remota con TeleService.

Procedimiento
Proceda del siguiente modo:
1. Aseg√∫rese de que tanto su programadora/PC como el m√≥dem est√©n desconectados.
2. Conecte f√≠sicamente el m√≥dem externo a una interfaz COM o USB de su programadora/PC.
Tambi√©n puede instalar un m√≥dem interno o una tarjeta PCMCIA siguiendo las
instrucciones del fabricante.
3. Ahora, conecte primero el m√≥dem externo y despu√©s la programadora o el PC.

Resultado
El sistema operativo reconoce e instala autom√°ticamente los m√≥dems plug&play. Se le guiar√°
por el proceso de instalaci√≥n con ayuda de cuadros de di√°logo.
Nota
M√≥dems no aptos para plug&play
Si su m√≥dem no es detectado autom√°ticamente al conectarlo, deber√° instalarlo mediante el
Panel de control.
Tenga en cuenta para ello las indicaciones incluidas en la documentaci√≥n suministrada con su
m√≥dem.

7.3.2.3

Conectar y parametrizar el m√≥dem remoto

Introducci√≥n
Una condici√≥n necesaria para el trabajo con TeleService es que a la instalaci√≥n remota
tambi√©n est√© conectado un m√≥dem. Este m√≥dem se denomina "m√≥dem remoto".

Parametrizar el m√≥dem remoto
El m√≥dem contiene todos los par√°metros del TS Adapter conectado necesarios para el
funcionamiento. Estos son, entre otros, los datos para la inicializaci√≥n del m√≥dem y los ajustes
para la transmisi√≥n en serie entre TS Adapter y el m√≥dem.

154

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
Los datos necesarios para el m√≥dem remoto se determinan durante la parametrizaci√≥n del TS
Adapter.
En funci√≥n del TS Adapter empleado, puede tratarse de un m√≥dem interno o externo.

Procedimiento para conectar un TS Adapter con un m√≥dem interno
1. Desconecte el TS Adapter.
2. Conecte el TS Adapter al sistema de automatizaci√≥n.
3. Conecte el TS Adapter a la conexi√≥n telef√≥nica.
4. Encienda el TS Adapter.

Procedimiento para conectar un TS Adapter con un m√≥dem externo
1. Desconecte el m√≥dem.
2. Conecte el TS Adapter al sistema de automatizaci√≥n.
3. Conecte el cable de conexi√≥n del TS Adapter al m√≥dem.
4. Conecte el m√≥dem a la conexi√≥n telef√≥nica.
5. Encienda el m√≥dem.
6. Encienda el TS Adapter.
Nota
Siga las siguientes indicaciones para parametrizar el m√≥dem remoto:
‚óè Los par√°metros predeterminados en el TS Adapter para el m√≥dem y el puerto serie deben
garantizar un funcionamiento correcto en la mayor√≠a de los casos, de forma que solo sea
necesario realizar una reparametrizaci√≥n en casos excepcionales.
‚óè No es necesario volver a parametrizar el TS Adapter a menos que se lleve a cabo la
conexi√≥n al m√≥dem o que se desee adaptar u optimizar los ajustes de f√°brica.
‚óè El TS Adapter puede reparametrizarse mediante una conexi√≥n directa o una conexi√≥n
remota.

7.3.3

Protecci√≥n de acceso en las conexiones por l√≠nea telef√≥nica

7.3.3.1

Informaci√≥n sobre los derechos de acceso

Introducci√≥n
Al parametrizar el TS Adapter pueden establecerse derechos de acceso tanto para la
parametrizaci√≥n del propio TS Adapter como para las instalaciones remotas.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

155

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

Validez de los derechos de acceso
Los derechos de acceso del TS Adapter MPI son v√°lidos exclusivamente para conexiones
remotas; en la conexi√≥n directa puede accederse en todo momento a la parametrizaci√≥n del
TS Adapter.
En el TS Adapter IE existen derechos de acceso tambi√©n en la conexi√≥n directa.

Informaci√≥n sobre los derechos de acceso
El TS Adapter MPI se suministra de f√°brica con los derechos de acceso desactivados. En el TS
Adapter IE existe una contrase√±a predeterminada.
El primer usuario que parametriza el adaptador puede activar los derechos de acceso
definiendo la contrase√±a para un usuario o el n√∫mero de rellamada.
Existen varios niveles de protecci√≥n con varios usuarios, cada uno de ellos con o sin derechos
de administrador. En el TS Adapter MPI s√≥lo existen un administrador y como m√°ximo dos
usuarios.
S√≥lo el administrador puede crear otros usuarios, modificar los ajustes ya definidos y borrarlos
cuando sea necesario. Al entrar como usuario sin derechos de administrador, s√≥lo puede
modificar su propia contrase√±a y su propio n√∫mero de rellamada. Sin embargo, en la conexi√≥n
directa del TS Adapter MPI se puede acceder a la parametrizaci√≥n del TS Adapter sin
limitaciones.

Ventajas
Los derechos de acceso ofrecen las siguientes ventajas:
‚óè Queda pr√°cticamente excluida la posibilidad de que accedan personas no autorizadas
ajenas a la empresa.
‚óè El operador de la instalaci√≥n asume la mayor parte de la tarifa telef√≥nica.

7.3.3.2

Posibilidades de rellamada en TeleService

Variantes de rellamada
Por norma general, los costes de una conexi√≥n telef√≥nica corren a cargo de la persona que
llama, es decir, la persona que establece la conexi√≥n por l√≠nea telef√≥nica.
No obstante, TeleService tambi√©n puede utilizarse de forma que, tras una breve primera
conexi√≥n, la conexi√≥n de m√≥dem vuelva a establecerse en sentido contrario, es decir,
partiendo del TS Adapter (rellamada). En este caso, el usuario de la instalaci√≥n corre con los
gastos de la rellamada.

TeleService distingue entre dos variantes de rellamada:
1. Rellamada a un n√∫mero indicado al establecer la conexi√≥n.
2. Rellamada a un n√∫mero guardado en el TS Adapter.

156

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.3.3

Informaci√≥n sobre los niveles de protecci√≥n

Introducci√≥n
Al configurar los derechos de acceso para el acceso a trav√©s de TeleService al TS Adapter
existen dos niveles de protecci√≥n que est√°n vinculados a diferentes opciones.

Opciones para los derechos de acceso
Nivel de protecci√≥n 1:
El TS Adapter est√° protegido mediante el nombre de usuario y la contrase√±a. Puede acceder
al TS Adapter mediante las conexiones telef√≥nicas que desee y, opcionalmente, indicar un
n√∫mero de rellamada cualquiera al establecer la conexi√≥n.
Nivel de protecci√≥n 2:
El TS Adapter est√° protegido por el nombre de usuario, la contrase√±a y el n√∫mero de
rellamada. S√≥lo puede acceder al TS Adapter a trav√©s de una conexi√≥n telef√≥nica por usuario.
La siguiente tabla muestra las condiciones antes indicadas para los diferentes niveles de
protecci√≥n:
Nivel de protecci√≥n

Contrase√±a de administrador/usuario

N√∫mero de rellamada

1

Introducir

No introducir

2

Introducir

Introducir

Iniciar sesi√≥n en el TS Adapter
Al iniciar sesi√≥n en el TS Adapter, una vez que se hayan creado los derechos de acceso, se
deber√° introducir el nombre de usuario, la contrase√±a y, opcionalmente, un n√∫mero de
rellamada:
Nivel de protecci√≥n

Contrase√±a de administrador/usuario

N√∫mero de rellamada

1

Introducir

No introducir o un n√∫mero de re‚Äê
llamada cualquiera

2

Introducir

No introducir

Si al establecer la conexi√≥n se ha introducido un n√∫mero de devoluci√≥n de llamada (nivel de
protecci√≥n de acceso 1) o se ha almacenado un n√∫mero de devoluci√≥n de llamada en el
TS Adapter (nivel de protecci√≥n de acceso 2), la conexi√≥n por m√≥dem se deshar√° y el
TS Adapter devolver√° la llamada al n√∫mero indicado.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

157

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.3.4

Crear derechos de acceso y n√∫mero de rellamada para el TS Adapter

Introducci√≥n
En TeleService se pueden crear derechos de acceso y un n√∫mero de rellamada para
parametrizar el TS Adapter y conectarlo a la instalaci√≥n remota. A continuaci√≥n se describe la
parametrizaci√≥n de un TS Adapter MPI. La parametrizaci√≥n de un TS Adapter IE se realiza de
forma an√°loga. El procedimiento exacto se describe en la ayuda web del adaptador.

Requisitos
Un TS Adapter MPI est√° conectado a su equipo y se muestra en "Dispositivos accesibles" en
el √°rbol del proyecto.

Procedimiento
Para crear los derechos de acceso para el TS Adapter, proceda del siguiente modo:
1. Haga clic en el comando "Parametrizar TS Adapter MPI" en el √°rbol del proyecto.
2. Abra la ficha "Protecci√≥n de acceso".
3. Introduzca aqu√≠ una contrase√±a para su nombre de usuario o un n√∫mero al que deba llamar
el m√≥dem tras el inicio de sesi√≥n.
‚Äì Si ha iniciado sesi√≥n como administrador, puede modificar todos los ajustes de
administradores y usuarios, as√≠ como crear y borrar usuarios.
‚Äì Si ha iniciado sesi√≥n como usuario, s√≥lo puede modificar sus propios ajustes
(contrase√±a y n√∫mero de rellamada).
4. Confirme todas las entradas realizadas con "Aceptar" antes de salir del cuadro de di√°logo.
5. Pulse el bot√≥n "S√≠" para confirmar la siguiente consulta.

Resultado
La parametrizaci√≥n de los derechos de acceso y del n√∫mero de rellamada se guarda en la
memoria no vol√°til del TS Adapter MPI.

Nota
Al crear los derechos de acceso debe tenerse en cuenta obligatoriamente lo siguiente:
‚óè Para garantizar la funcionalidad de rellamada debe asegurarse de que los ajustes de la
ficha "M√≥dem" correspondan a las caracter√≠sticas de la instalaci√≥n.
‚óè Si en el usuario "ADMIN" se introduce un n√∫mero de rellamada err√≥neo, no se podr√° volver
a acceder al TS Adapter MPI a trav√©s de una conexi√≥n remota.
‚óè Pruebe el n√∫mero de rellamada antes de introducirlo en el usuario "ADMIN"; h√°galo
llamando a un n√∫mero de rellamada indicado al establecer la conexi√≥n (nivel de
protecci√≥n 1).

158

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.3.5

Realizar la rellamada en TeleService

Posibilidades de rellamada
En TeleService existe la posibilidad de configurar dos variantes de rellamada diferentes.
Existen las siguientes posibilidades de rellamada:
‚óè Rellamada a un n√∫mero indicado al establecer la conexi√≥n.
‚óè Rellamada a un n√∫mero guardado en el TS Adapter.

Rellamada a un n√∫mero indicado al establecer la conexi√≥n
1. Haga clic en la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Dentro de esta, haga clic en la carpeta "TeleService".
3. Haga doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia". Se abre el
cuadro de di√°logo "Establecer conexi√≥n a distancia con la instalaci√≥n remota".
4. Seleccione en la lista desplegable "Tipo de adaptador" el tipo de adaptador utilizado.
5. Seleccione en "Tipo de conexi√≥n" la "Conexi√≥n por l√≠nea telef√≥nica", si es que no est√° ya
seleccionada.
6. Seleccione en "Ajustes locales" el m√≥dem utilizado.
7. Introduzca el n√∫mero de tel√©fono que se debe marcar en el campo de entrada
correspondiente o bien abra el list√≠n telef√≥nico haciendo clic en el bot√≥n posterior y
seleccione el n√∫mero de tel√©fono deseado del list√≠n telef√≥nico.
8. Introduzca el nombre de usuario y la contrase√±a correspondiente del TS Adapter.
9. Si desea "Establecer conexi√≥n con rellamada", seleccione el bot√≥n de opci√≥n
correspondiente.
10.Haga clic en el bot√≥n "Establecer" para establecer la conexi√≥n remota deseada. Este bot√≥n
solo se activa una vez introducidos todos los par√°metros necesarios para establecer una
conexi√≥n remota. En "Estado" se indica si ya existe o no una conexi√≥n remota.
11.En caso necesario, introduzca en el cuadro de di√°logo siguiente el n√∫mero de rellamada
deseado.

Resultado
Se establece la conexi√≥n remota con la instalaci√≥n deseada con rellamada.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

159

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
En el √°rbol del proyecto se muestra la instalaci√≥n conectada con el s√≠mbolo correspondiente.
Nota
Este procedimiento es conveniente cuando los costes de la conexi√≥n del m√≥dem deben correr
a cargo de la instalaci√≥n o cuando el n√∫mero de rellamada es variable, es decir, cuando la
rellamada no debe dirigirse siempre al mismo destinatario. Esta opci√≥n es interesante para los
usuarios m√≥viles.

Rellamada a un n√∫mero guardado en el TS Adapter.
1. Parametrice el n√∫mero de rellamada deseado en el TS Adapter.
2. Establezca una conexi√≥n con el TS Adapter del modo antes descrito teniendo en cuenta las
siguientes particularidades:
‚Äì Introduzca el nombre de usuario y la contrase√±a para los que se ha parametrizado el
n√∫mero de rellamada en el TS Adapter.
‚Äì No es necesario seleccionar el bot√≥n de opci√≥n "Establecer conexi√≥n con rellamada",
puesto que el TS Adapter ya conoce el n√∫mero de rellamada.

Resultado
La rellamada a un n√∫mero guardado en el TS Adapter est√° configurada. Si se establece una
conexi√≥n remota, la rellamada se realiza desde la instalaci√≥n remota.
Nota
Este procedimiento representa el nivel m√°ximo de protecci√≥n. De todas formas, existe el
peligro de que, si se guarda un n√∫mero de rellamada err√≥neo en el TS Adapter, el TS Adapter
ya no sea accesible a trav√©s de una conexi√≥n de m√≥dem y s√≥lo pueda volver a ponerse en
funcionamiento mediante una reparametrizaci√≥n in situ.

7.3.4

TS Adapter MPI

7.3.4.1

Breve descripci√≥n del TS Adapter MPI

TS Adapter MPI:
La denominaci√≥n "TS Adapter MPI" es un t√©rmino gen√©rico que agrupa todos los TS Adapter
equipados con una interfaz MPI/DP.
El TS Adapter MPI est√° disponible en los siguientes modelos:
‚óè como TS Adapter I (no puede parametrizarse desde el TIA Portal)
‚óè como TS Adapter II

160

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
La siguiente tabla proporciona una breve descripci√≥n de la funcionalidad correspondiente.
Encontrar√° m√°s informaci√≥n sobre el TS Adapter que est√° utilizando en la documentaci√≥n
suministrada con su TS Adapter.
TS Adapter II:
Conexi√≥n directa

La conexi√≥n se realiza a trav√©s del Universal Serial Bus (USB). El
firmware puede intercambiarse.
El m√≥dem est√° integrado o tambi√©n puede conectarse como m√≥dem
externo. El TS Adapter II conmuta autom√°ticamente entre los m√≥‚Äê
dems. Si no hay ning√∫n m√≥dem externo conectado y encendido, uti‚Äê
liza el m√≥dem interno.

Hay dos variantes

‚óè Con m√≥dem anal√≥gico interno. Adem√°s puede conectarse un
m√≥dem externo a la interfaz RS232.
‚óè Con adaptador ISDN (RDSI) interno. Adem√°s, en la interfaz
RS232 puede conectarse un m√≥dem externo

Utilizaci√≥n de la denominaci√≥n "TS Adapter"
En TeleService se utiliza la denominaci√≥n "TS Adapter" como t√©rmino gen√©rico para todas los
modelos. En los casos en los que s√≥lo se hace referencia a un modelo determinado de un
TS Adapter, se especifica si se trata de "TS Adapter II", "TS Adapter IE Standard" o
"TS Adapter IE Basic".

7.3.4.2

Funcionamiento del TS Adapter MPI

Funcionamiento del TS Adapter MPI
En funci√≥n de la configuraci√≥n, el TS Adapter MPI se conecta al puerto serie o USB de la
programadora/el PC (conexi√≥n directa) o al puerto serie de un m√≥dem (conexi√≥n m√≥dem) con
la red MPI-/PROFIBUS del sistema de automatizaci√≥n.
El TS Adapter MPI dispone de una memoria no vol√°til. En ella est√°n almacenados los
par√°metros para las funciones siguientes:
‚óè la red MPI/PROFIBUS (par√°metros de red)
‚óè el funcionamiento del m√≥dem utilizado
‚óè el puerto serie con el m√≥dem
‚óè los derechos de acceso

la parametrizaci√≥n est√°ndar
El TS Adapter se suministra con una parametrizaci√≥n est√°ndar. Los par√°metros se pueden
ajustar durante una sesi√≥n de parametrizaci√≥n y se pueden guardar en la memoria no vol√°til
del TS Adapter.
En la configuraci√≥n "Conexi√≥n directa", el TS Adapter s√≥lo utilizar√° los par√°metros de la red
para el acceso a la red MPI/PROFIBUS.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

161

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
En la configuraci√≥n "Conexi√≥n m√≥dem" se activar√°n todos los par√°metros almacenados en el
TS Adapter.
Nota
Encontrar√° m√°s informaci√≥n sobre la parametrizaci√≥n del TS Adapter en la documentaci√≥n
suministrada con el TS Adapter.

7.3.4.3

Usar el TS Adapter MPI en la conexi√≥n directa

Conexi√≥n directa con TS Adapter MPI
La conexi√≥n directa sirve para parametrizar el TS Adapter MPI. En la misma configuraci√≥n
tambi√©n se puede pasar a modo online en el TIA Portal y verificar si los par√°metros MPI/
PROFIBUS definidos son compatibles con el bus. Esto permite, al igual que con un PC
Adapter, acceder a sistemas SIMATIC S7/C7 a trav√©s de la interfaz MPI/DP sin necesidad de
ocupar ning√∫n slot de programadora/PC con un m√≥dulo MPI/PROFIBUS.
En la conexi√≥n directa no est√° activo ning√∫n derecho de acceso para el TS Adapter. As√≠ es
posible modificar sin m√°s la parametrizaci√≥n del TS Adapter, p. ej., importando par√°metros del
adaptador.

Nota
Visualizaci√≥n del TS Adapter MPI en el TIA Portal
En cuanto se haya conectado un TS Adapter MPI a la PG/el PC a trav√©s del puerto USB, en
el TIA Portal se mostrar√° la carpeta "TS Adapter" en el √°rbol del proyecto.
Si se abre la carpeta, se puede parametrizar el TS Adapter MPI conectado de la manera
deseada a trav√©s de los cuadros de di√°logo siguientes.

Configuraci√≥n de la conexi√≥n directa para TS Adapter MPI
En la conexi√≥n directa, la programadora o el PC que tiene instalado TeleService, y el sistema
de automatizaci√≥n est√°n conectados directamente a trav√©s del TS Adapter MPI. No se
requiere un m√≥dem.
La siguiente figura muestra la conexi√≥n directa del TS Adapter MPI.
76$GDSWHU,,
86%

03,'3
&DEOH86%

3*3&

162

6LVWHPDGHDXWRPDWL]DFL¬µQ

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.4.4

Usar el TS Adapter MPI en la conexi√≥n m√≥dem

Introducci√≥n a la conexi√≥n m√≥dem con TS Adapter MPI
Esta configuraci√≥n permite marcar una instalaci√≥n remota. Para ello debe establecerse una
conexi√≥n remota con una instalaci√≥n remota con TeleService a trav√©s de una red telef√≥nica.
Seguidamente, desde la conexi√≥n por m√≥dem establecida es posible editar la instalaci√≥n
seleccionada con el TIA Portal del modo habitual.

Configuraci√≥n de la conexi√≥n m√≥dem con TS Adapter MPI
La conexi√≥n entre la PG o el PC en el que est√° instalado TeleService y el sistema de
automatizaci√≥n en cuya interfaz MPI/DP se ha insertado el TS Adapter MPI se establece
mediante un m√≥dem.
Por lo tanto, con esta configuraci√≥n se conecta la PG o el PC a la interfaz MPI/DP del sistema
de automatizaci√≥n a trav√©s de la red telef√≥nica y el TS Adapter MPI.
La figura siguiente muestra la estructura de la conexi√≥n m√≥dem.

0¬µGHP

0¬µGHP

76$GDSWHU,

03,'3
6LVWHPDGHDXWRPDWL]DFL¬µQ

3*3&
76$GDSWHU,,
)XQFLRQDPLHQWRFRQP¬µGHP
H[W
0¬µGHP

0¬µGHP

03,'3
6LVWHPDGHDXWRPDWL]DFL¬µQ

3*3&

76$GDSWHU,,
)XQFLRQDPLHQWRFRQP¬µGHPLQW

0¬µGHP

03,'3

3*3&

6LVWHPDGHDXWRPDWL]DFL¬µQ

Nota
Funcionamiento paralelo de las conexiones directa y m√≥dem
El TS Adapter II dispone de dos conexiones para la comunicaci√≥n con la PG/el PC, que pueden
estar conectadas al mismo tiempo. Conectan el puerto USB con la PG/el PC y, a su vez, el
puerto del m√≥dem con la red telef√≥nica.
En esta configuraci√≥n se puede utilizar la conexi√≥n directa o bien la conexi√≥n m√≥dem.
No es posible el funcionamiento paralelo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

163

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.4.5

Posibilidades de parametrizaci√≥n para el TS Adapter MPI

Informaci√≥n importante sobre la parametrizaci√≥n del TS Adapter MPI
El TS Adapter MPI puede parametrizarse tanto en la conexi√≥n directa como tambi√©n mediante
una conexi√≥n remota existente.
Existen las siguientes posibilidades de parametrizaci√≥n:
‚óè Nueva parametrizaci√≥n (P√°gina 165)
‚óè Restauraci√≥n de la parametrizaci√≥n est√°ndar (P√°gina 165)
‚óè Importaci√≥n de par√°metros del adaptador (P√°gina 167)
‚óè Exportaci√≥n de par√°metros del adaptador (P√°gina 166)
‚óè Crear derechos de acceso (P√°gina 158)

Realizar parametrizaci√≥n
Parametrice su TS Adapter teniendo en cuenta la documentaci√≥n suministrada con el TS
Adapter. All√≠ encontrar√° la informaci√≥n necesaria en relaci√≥n con el procedimiento exacto
durante la parametrizaci√≥n.
Nota
Durante la parametrizaci√≥n del TS Adapter MPI tenga en cuenta lo siguiente:
‚óè Si modifica los par√°metros actuales en una conexi√≥n remota existente, puede presentarse
el caso de que ya no pueda establecerse ninguna conexi√≥n m√≥dem con los par√°metros
modificados. En este caso, el TS Adapter MPI s√≥lo puede parametrizarse en la conexi√≥n
directa.
‚óè Esto significa que, si utiliza una programadora o un PC, debe realizar la parametrizaci√≥n a
pie de la instalaci√≥n o bien que debe llevar el TS Adapter MPIal lugar donde se encuentre
la programadora o el PC local para efectuar la parametrizaci√≥n.

Confirmaci√≥n
Al hacer una parametrizaci√≥n, los datos se escriben en la EEPROM del TS Adapter MPI. La
parametrizaci√≥n se acepta s√≥lo despu√©s de que el adaptador haya comprobado que los
cambios realizados son correctos para que en el caso de un corte de alimentaci√≥n √©stos no se
pierdan.

Las modificaciones se hacen efectivas en el TS Adapter MPI del siguiente modo:
‚óè Los par√°metros serie, los par√°metros de m√≥dem y los par√°metros para derechos de acceso
se activan despu√©s de deshacer la conexi√≥n remota.
‚óè Los par√°metros de red modificados se activan inmediatamente.

164

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.4.6

Parametrizar el TS Adapter MPI

Introducci√≥n
Puede parametrizar el TS Adapter MPI tanto en la conexi√≥n directa como tambi√©n mediante
una conexi√≥n remota configurada en la conexi√≥n m√≥dem.
A continuaci√≥n se describe el procedimiento para efectuar la parametrizaci√≥n.

Requisitos
Un TS Adapter MPI est√° conectado al equipo y la carpeta "TS Adapter" se muestra en
"Accesos online", en el √°rbol del proyecto.

Procedimiento
Para parametrizar el TS Adapter MPI im Direktanschluss , proceda del siguiente modo:
1. Haga doble clic en la carpeta "Accesos online" en el √°rbol del proyecto.
2. Abra la carpeta deseada:
‚Äì En caso de una conexi√≥n directa, la carpeta "TS Adapter".
‚Äì Si existe una conexi√≥n remota, la carpeta "TeleService" y, a continuaci√≥n, la carpeta con
el nombre de la instalaci√≥n deseada.
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuaci√≥n, se abrir√° el cuadro
de di√°logo "Parametrizar TS Adapter MPI".
4. Ajuste los par√°metros deseados en las distintas fichas del cuadro de di√°logo.
5. Confirme las entradas realizadas con "Aceptar".

Resultado
Los par√°metros ajustados se guardar√°n en la memoria no vol√°til del TS Adapter MPI. Con ello
finaliza la parametrizaci√≥n.

7.3.4.7

Restaurar la parametrizaci√≥n est√°ndar para el TS Adapter MPI

Introducci√≥n
Es posible restaurar la parametrizaci√≥n est√°ndar existente en el estado de suministro del
TS Adapter MPI.

Requisitos
Un TS Adapter MPI est√° conectado al equipo y se muestra en el √°rbol del proyecto, en la
carpeta "TeleService" de "Accesos online".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

165

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

Procedimiento
Para cambiar la parametrizaci√≥n predeterminada del TS Adapter MPI, proceda del siguiente
modo:
1. Abra la carpeta "TeleService" del √°rbol del proyecto.
2. Haga doble clic en la carpeta "TS Adapter MPI".
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuaci√≥n, se abrir√° el cuadro
de di√°logo "Parametrizar TS Adapter MPI".
4. En "General", haga clic en el bot√≥n "Resetear".
5. Confirme las entradas realizadas con "Aceptar".

Resultado
Se restaurar√° la parametrizaci√≥n est√°ndar con la que se suministr√≥ el TS Adapter MPI.

Consulte tambi√©n
Posibilidades de parametrizaci√≥n para el TS Adapter MPI (P√°gina 164)

7.3.4.8

Exportaci√≥n de par√°metros del adaptador

Introducci√≥n
Existe la posibilidad de exportar la parametrizaci√≥n de un TS Adapter MPI a un archivo externo.
La parametrizaci√≥n almacenada en dicho archivo se puede volver a importar a cualquier
cantidad de TS Adapter MPI.
Esto es especialmente adecuado si desea parametrizar, por ejemplo, de forma id√©ntica varios
TS Adapter MPI, o si desea guardar, documentar o distribuir el juego de par√°metros.

Requisitos
Un TS Adapter MPI est√° conectado al equipo y se muestra en el √°rbol del proyecto, en la
carpeta "TeleService" de "Accesos online".

Procedimiento
Para exportar los par√°metro de un TS Adapter MPI, proceda del siguiente modo:
1. Abra la carpeta "TeleService" del √°rbol del proyecto.
2. Haga doble clic en la carpeta "TS Adapter MPI".
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuaci√≥n, se abrir√° el cuadro
de di√°logo "Parametrizar TS Adapter MPI".
4. Haga clic en el bot√≥n "Exportar".

166

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
5. En la siguiente ventana, seleccione el archivo al que desea exportar la parametrizaci√≥n del
TS Adapter MPI.
6. Confirme haciendo clic en "Guardar".

Resultado
Los par√°metros del TS Adapters MPI se guardar√°n en el archivo indicado (*.tap). Con ello
finaliza la exportaci√≥n de los par√°metros del adaptador.

7.3.4.9

Importaci√≥n de par√°metros del adaptador

Introducci√≥n
Existe la posibilidad de importar la parametrizaci√≥n de un TS Adapter MPI de un archivo de
exportaci√≥n (*.tap) creado anteriormente.
La parametrizaci√≥n almacenada en dicho archivo se puede importar a cualquier cantidad de
TS Adapter. Esto es especialmente adecuado si se desea parametrizar, por ejemplo, de forma
id√©ntica varios TS Adapter MPI.
Puede realizar la importaci√≥n de forma local en la conexi√≥n directa o mediante una conexi√≥n
remota configurada en la conexi√≥n m√≥dem.
El TS Adapter incorpora los par√°metros del archivo de exportaci√≥n seleccionado y sigue
trabajando con estos ajustes. Se pierden todos los ajustes realizados que no se hayan
guardado en un archivo de exportaci√≥n.
Antes de importar el archivo, haga una copia de seguridad de la parametrizaci√≥n actual en un
archivo de exportaci√≥n. En caso necesario podr√° restablecer la parametrizaci√≥n.

Requisitos
‚óè Un TS Adapter MPI est√° conectado al equipo y se muestra en el √°rbol del proyecto, en la
carpeta "TeleService" de "Accesos online".

Procedimiento
Para importar los par√°metros de adaptador de un TS Adapter MPI proceda del siguiente modo:
1. Abra la carpeta "TeleService" en el √°rbol del proyecto.
2. Haga doble clic en la carpeta "TS Adapter MPI".
3. Seleccione el comando "Parametrizar TS Adapter MPI". A continuaci√≥n, se abrir√° el cuadro
de di√°logo "Parametrizar TS Adapter MPI".
4. Haga clic en el bot√≥n "Importar".
5. Seleccione ahora el archivo en el que desea importar la parametrizaci√≥n del
TS Adapter MPI.
6. Confirme el cuadro de di√°logo posterior con "S√≠".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

167

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

Resultado
Los par√°metros seleccionados se guardar√°n en la memoria no vol√°til del TS Adapter MPI. Con
esto finaliza la importaci√≥n de los par√°metros del adaptador.

7.3.5

TS Adapter IE

7.3.5.1

Breve descripci√≥n del TS Adapter IE

TS Adapter IE
La denominaci√≥n "TS Adapter IE" es un t√©rmino gen√©rico que agrupa todos los TS Adapter
equipados con una interfaz Ethernet.
El TS Adapter IE est√° disponible en los siguientes modelos:
‚óè como TS Adapter IE Standard
‚óè como TS Adapter IE Basic
La siguiente tabla proporciona una breve descripci√≥n de la funcionalidad correspondiente.
Encontrar√° m√°s informaci√≥n sobre el TS Adapter que est√° utilizando en la documentaci√≥n
suministrada con su TS Adapter.
TS Adapter IE Standard:
Conexi√≥n directa a trav√©s de Industrial Ethernet (IE). Actualizaci√≥n del firmware posible. M√≥dem inte‚Äê
grado o tambi√©n conectable como m√≥dem externo. No disponible conmutaci√≥n autom√°tica de m√≥dem
como en el caso del TS Adapter II. La parametrizaci√≥n se efect√∫a con una interfaz web.
Existen 2 variantes:
‚óè Con m√≥dem anal√≥gico interno. Adem√°s puede conectarse un m√≥dem externo a la interfaz RS232.
‚óè Con adaptador ISDN (RDSI) interno. Adem√°s puede conectarse un m√≥dem externo a la interfaz
RS232.

TS Adapter IE Basic:
Conexi√≥n directa a trav√©s de Industrial Ethernet (IE). Actualizaci√≥n del firmware posible. M√≥dulo en‚Äê
chufable. La parametrizaci√≥n se efect√∫a con una interfaz web.
Existen 4 variantes:
‚óè TS Adapter IE Basic M√ìDEM:
equipo base TS Adapter IE Basic con m√≥dulo TS M√ìDEM para el funcionamiento en la red
telef√≥nica anal√≥gica.
‚óè TS Adapter IE Basic RDSI:
equipo base TS Adapter IE Basic con m√≥dulo TS RDSI para el funcionamiento en la red telef√≥nica
RDSI.

168

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
TS Adapter IE Basic:
‚óè TS Adapter IE Basic GSM:
equipo base TS Adapter IE Basic con m√≥dulo TS GSM para el funcionamiento en la red de
radiofrecuencia GSM.
‚óè TS Adapter IE Basic RS232:
equipo base TS Adapter IE Basic con m√≥dulo TS RS232 para la conexi√≥n de un m√≥dem externo.

Utilizaci√≥n de la denominaci√≥n "TS Adapter"
En la ayuda en pantalla sobre TeleService aparece la denominaci√≥n "TS Adapter" como
generalizaci√≥n para todos los modelos. En los casos en los que s√≥lo se hace referencia a un
modelo determinado de un TS Adapter, se explicita si se trata del "TS Adapter I",
"TS Adapter II", "TS Adapter IE Standard" o "TS Adapter IE Basic".

7.3.5.2

Funcionamiento del TS Adapter IE

Funcionamiento del TS Adapter IE
El TS Adapter IE conecta la red telef√≥nica o el puerto serie de un m√≥dem con la Industrial
Ethernet del sistema de automatizaci√≥n.
El TS Adapter IE dispone de una memoria no vol√°til. En ella est√°n almacenados los
par√°metros para las funciones siguientes:
‚óè el funcionamiento del m√≥dem utilizado
‚óè el puerto serie con el m√≥dem
‚óè los derechos de acceso

la parametrizaci√≥n est√°ndar
El TS Adapter IE se suministra con una parametrizaci√≥n est√°ndar. Los par√°metros se pueden
ajustar durante una sesi√≥n de parametrizaci√≥n y se pueden guardar en la memoria no vol√°til
del TS Adapter.
Nota
Encontrar√° m√°s informaci√≥n sobre la parametrizaci√≥n del TS Adapter en la documentaci√≥n
suministrada con el TS Adapter.

7.3.5.3

Tipos de conexi√≥n

Tipos de conexi√≥n del TS Adapter IE Basic
Las siguientes figuras muestran los posibles tipos de conexi√≥n del TS Adapter IE Basic.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

169

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

Conexi√≥n directa
En conexi√≥n directa en la PG/el PC puede parametrizar el TS Adapter IE Basic a trav√©s de
Ethernet.
Nota
No est√° permitida la operaci√≥n del TS Adapter IE Basic sin ning√∫n TS Modul.
760RGXO

76$GDSWHU,(%DVLF

3*3&

(WKHUQHW

Figura 7-1

Conexi√≥n directa

Conexi√≥n a la red telef√≥nica
Para la conexi√≥n directa a la red telef√≥nica, debe operar el TS Adapter IE Basic en
combinaci√≥n con uno de los siguientes m√≥dulos TS:
‚óè TS Module Modem
‚óè TS Module ISDN
760RGXOH0RGHP
760RGXOH,6'1

76$GDSWHU,(%DVLF
6LVWHPDGHDXWRPDWL]DFL¬µQ

0RGHP

:$1

(WKHUQHW

3*3&

Figura 7-2

Conexi√≥n directa a la red telef√≥nica

M√°s informaci√≥n acerca de los m√≥dulos TS encontrar√° en el manual TS Adapter modular.

170

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

Conexi√≥n a la red GSM
Para la conexi√≥n a la red GSM debe operar el TS Adapter IE Basic en combinaci√≥n con este
m√≥dulo TS:
‚óè TS Module GSM
760RGXOH*60

76$GDSWHU,(%DVLF
6LVWHPDGHDXWRPDWL]DFL¬µQ

0RGHP

(WKHUQHW

3*3&

Figura 7-3

Conexi√≥n a la red GSM

M√°s informaci√≥n acerca de los m√≥dulos TS encontrar√° en el manual TS Adapter modular.

Conexi√≥n a la red telef√≥nica a trav√©s de un m√≥dem externo
Para la conexi√≥n a un m√≥dem externo debe operar el TS Adapter IE Basic en combinaci√≥n con
este m√≥dulo:
‚óè TS Module RS232
760RGXOH56

76$GDSWHU,(%DVLF
6LVWHPDGHDXWRPDWL]DFL¬µQ

0RGHP

:$1

0RGHP

(WKHUQHW

3*3&

Figura 7-4

Conexi√≥n a un m√≥dem externo

M√°s informaci√≥n acerca de los m√≥dulos TS encontrar√° en el manual TS Adapter modular.

7.3.5.4

Posibilidades de parametrizaci√≥n del TS Adapter IE

Informaci√≥n importante para parametrizar el TS Adapter IE
El TS Adapter IE se parametriza con una interfaz web.
Para la parametrizaci√≥n del TS Adapter IE se dispone de una ayuda web asignada a la interfaz
web.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

171

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
Existen las siguientes posibilidades de parametrizaci√≥n:
‚óè Nueva parametrizaci√≥n
‚óè Restauraci√≥n de la parametrizaci√≥n est√°ndar
‚óè Importaci√≥n de par√°metros del adaptador
‚óè Exportaci√≥n de par√°metros del adaptador
Nota
Realizar la parametrizaci√≥n
Parametrice su TS Adapter teniendo en cuenta la documentaci√≥n suministrada con su TS
Adapter. All√≠ encontrar√° la informaci√≥n necesaria en relaci√≥n con el procedimiento exacto
durante la parametrizaci√≥n.

7.3.5.5

Parametrizar el TS Adapter IE

Introducci√≥n
Puede parametrizar el TS Adapter IE tanto en la conexi√≥n directa como tambi√©n mediante una
conexi√≥n remota configurada en la conexi√≥n m√≥dem.
A continuaci√≥n se describen ambas posibilidades de parametrizaci√≥n.
Puede obtener detalles espec√≠ficos sobre la parametrizaci√≥n del TS Adapter IE en la
documentaci√≥n del TS Adapter IE.

Parametrizaci√≥n del TS Adapter IE en la conexi√≥n directa

Requisitos
Existe una conexi√≥n LAN con su TS Adapter IE.
El TS Adapter IE Basic est√° conectado a la alimentaci√≥n.

Procedimiento
Para parametrizar el TS Adapter IE , proceda del siguiente modo:
1. Abra la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Haga doble clic en la interfaz Ethernet del equipo.
3. Haga doble clic en el comando "Mostrar dispositivos accesibles". A continuaci√≥n se
muestra el TS Adapter IE.

172

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
4. Haga doble clic en la carpeta <TS Adapter IE> y despu√©s en "Online y diagn√≥stico", y
asigne al TS Adapter IE la direcci√≥n IP deseada en los cuadros de di√°logo siguientes. Para
ello, tenga en cuenta que la direcci√≥n IP que asigne al TS Adapter IE debe encontrarse en
la misma subred que la direcci√≥n IP de la tarjeta de interfaz de la PG/el PC.
5. Actualice la vista del √°rbol del proyecto de los "Dispositivos accesibles" para que se
muestre el TS Adapter IE con la direcci√≥n IP reci√©n asignada.
6. Abra la carpeta <TS Adapter IE> en la lista de dispositivos.
7. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuaci√≥n se abre la
interfaz web asignada para parametrizar el TS Adapter IE.
8. Inicie la sesi√≥n en la interfaz web.
9. Ajuste los par√°metros deseados en las distintas fichas del cuadro de di√°logo.
10.Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los par√°metros ajustados se guardar√°n en la memoria no vol√°til del TS Adapter IE. Con ello
finaliza la parametrizaci√≥n.

Parametrizaci√≥n del TS Adapter IE a trav√©s de la conexi√≥n remota

Requisitos
Hay una conexi√≥n remota establecida con un TS Adapter IE .

Procedimiento
1. Abra la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Abra la carpeta "TeleService" y, a continuaci√≥n, la carpeta de la instalaci√≥n deseada.
3. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuaci√≥n se abre la
interfaz web correspondiente para parametrizar el TS Adapter IE. El "inicio de sesi√≥n" en la
interfaz web se efect√∫a autom√°ticamente con los datos de inicio de sesi√≥n de la conexi√≥n
remota.
4. Ajuste los par√°metros deseados en las distintas fichas del cuadro de di√°logo.
5. Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los par√°metros ajustados se guardar√°n en la memoria no vol√°til del TS Adapter IE. Con ello
finaliza la parametrizaci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

173

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica

7.3.6

Establecimiento de una conexi√≥n por l√≠nea telef√≥nica con una instalaci√≥n remota

7.3.6.1

Establecer conexi√≥n por l√≠nea telef√≥nica

Introducci√≥n al establecimiento de una conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
Se produce una conexi√≥n por l√≠nea telef√≥nica cuando se utiliza TeleService para acceder a una
instalaci√≥n remota a trav√©s de una red telef√≥nica. Para ello, la programadora o el PC debe estar
conectado a la red telef√≥nica v√≠a m√≥dem local utilizando TeleService. En el otro extremo, el
sistema de automatizaci√≥n est√° conectado a la l√≠nea telef√≥nica a trav√©s de un TS Adapter
parametrizado y un m√≥dem.

Requisitos
Un m√≥dem local est√° instalado y parametrizado.
En la instalaci√≥n remota existe un TS Adapter.
Un m√≥dem remoto est√° instalado y parametrizado.

Proceda del siguiente modo:
1. Haga clic en la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Dentro de esta, haga clic en la carpeta "TeleService".
3. Haga doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia". Se abre el
cuadro de di√°logo "Establecer conexi√≥n a distancia con la instalaci√≥n remota".
4. Seleccione en la lista desplegable "Tipo de adaptador" el tipo de adaptador utilizado.
5. Seleccione en "Tipo de conexi√≥n" la "Conexi√≥n por l√≠nea telef√≥nica".
6. Seleccione en "Ajustes locales" el m√≥dem utilizado.
7. Introduzca el n√∫mero de tel√©fono que se debe marcar en el campo de entrada
correspondiente o bien abra el list√≠n telef√≥nico haciendo clic en el bot√≥n posterior y
seleccione el n√∫mero de tel√©fono deseado del list√≠n telef√≥nico.
8. Introduzca su nombre de usuario y la contrase√±a correspondiente.
9. Si desea "Establecer conexi√≥n con rellamada", seleccione el bot√≥n de opci√≥n
correspondiente.
10.Haga clic en el bot√≥n "Establecer" para establecer la conexi√≥n remota deseada. Este bot√≥n
solo se activa una vez introducidos todos los par√°metros necesarios para establecer una
conexi√≥n remota. En "Estado" se indica si ya existe o no una conexi√≥n remota.

Resultado
Se establece la conexi√≥n por l√≠nea telef√≥nica con la instalaci√≥n deseada.
En cuanto se establece la conexi√≥n por l√≠nea telef√≥nica, se cierra el cuadro de di√°logo. En la
barra de estado del TIA Portal aparece el mensaje: "Conexi√≥n remota establecida".

174

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.3 Conexi√≥n remota como conexi√≥n por l√≠nea telef√≥nica
Seguidamente se puede utilizar la conexi√≥n remota con el TIA Portal y comunicarse con el
sistema de automatizaci√≥n.

No es posible establecer la conexi√≥n
Si no puede establecer conexi√≥n, intente averiguar el motivo del fallo por medio de las
"Indicaciones para la b√∫squeda de errores".

Deshacer la conexi√≥n
Si ha terminado de trabajar con la instalaci√≥n remota, finalice la conexi√≥n remota en el √°rbol del
proyecto haciendo doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia".
Al salir del TIA Portal tambi√©n finaliza la conexi√≥n remota.

7.3.6.2

Deshacer conexi√≥n por l√≠nea telef√≥nica

Deshacer una conexi√≥n por l√≠nea telef√≥nica activa

Nota
Deshacer la conexi√≥n por l√≠nea telef√≥nica
Antes de deshacer la conexi√≥n remota se debe cambiar al modo offline del TIA Portal.

Proceda del siguiente modo:
1. Haga doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia" del TIA Portal.
2. Confirme la consulta del cuadro de di√°logo posterior con "S√≠".

Resultado
Se deshace la conexi√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

175

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

7.4

Conexi√≥n remota como conexi√≥n VPN

7.4.1

Principios b√°sicos para el establecimiento de una conexi√≥n VPN

Uso de un TS Adapter IE Advanced para conexiones VPN
Para poder establecer una conexi√≥n VPN con TeleService, es necesario utilizar un TS Adapter
IE Advanced.

Definici√≥n VPN
VPN significa "Virtual Private Network". Es decir, una red inform√°tica privada cerrada basada
en una infraestructura de red p√∫blica.
Una VPN se utiliza para conectar dispositivos separados de una red privada con un punto de
conexi√≥n de otra red con la m√°xima seguridad posible.
Un dispositivo VPN obtiene acceso directo a un punto de conexi√≥n de otra red a trav√©s de una
conexi√≥n codificada.

Conexiones VPN
Al establecer una conexi√≥n VPN con TeleService, para identificar de forma un√≠voca el TS
Adapter IE Advanced se utiliza un certificado CA y una huella digital √∫nica generada a partir del
certificado. La conexi√≥n VPN permite una comunicaci√≥n a prueba de escuchas y
manipulaciones entre el PC remoto y el TS Adapter.
Si desea establecer una conexi√≥n VPN a varias redes remotas, necesitar√° para cada red un
TS Adapter IE Advanced propio como interfaz. Las redes conectadas a trav√©s del TS Adapter
pueden utilizar la misma direcci√≥n IP interna. Solo deben ser diferentes las direcciones IP
externas (WAN) de cada TS Adapter.
Solo se puede realizar una conexi√≥n VPN con un TS Adapter al mismo tiempo.

Nota
Autenticaci√≥n
Tenga en cuenta que el certificado CA solo autentica el TS Adapter IE Advanced.
Un usuario se autentica a trav√©s del inicio de sesi√≥n (nombre de usuario y contrase√±a), igual
que en las conexiones por l√≠nea telef√≥nica.
Por lo tanto, utilice √∫nicamente contrase√±as seguras para el inicio de sesi√≥n.

176

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

Consulte al respecto tambi√©n
‚óè Establecer conexi√≥n VPN (P√°gina 182)
‚óè Deshacer conexi√≥n VPN (P√°gina 184)

7.4.2

Principios b√°sicos de los certificados CA

Introducci√≥n
Para poder establecer una conexi√≥n VPN segura con TeleService, es necesario generar un
certificado CA durante la configuraci√≥n de TS Adapter IE Advanced con una huella digital
√∫nica.
Este certificado CA puede instalarse del siguiente modo en cualquier PC que deba tener
acceso al TS Adapter IE Advanced:
‚óè Mediante descarga autom√°tica en el cuadro de di√°logo de conexi√≥n de TeleService, donde
debe registrar la huella digital que corresponde al certificado CA
‚óè Mediante instalaci√≥n manual con Microsoft¬Æ Management Console.

Definici√≥n de certificado CA
Un certificado CA es un certificado digital emitido a trav√©s de un organismo de certificaci√≥n
autorizado ("certificate authority" o "certification authority", en adelante "CA"). En el caso de TS
Adapter IE Advanced, se utilizan certificados autofirmados; el organismo de certificaci√≥n
autorizado es aqu√≠ el propio TS Adapter IE Advanced.
Del certificado CA se derivan los certificados para "SSTP" (Secure Socket Tunneling Protocol)
y "HTTPS" (Hypertext Transfer Protocol Secure).
Los certificados CA contienen una "clave" e informaci√≥n adicional que sirven para la
autenticaci√≥n, la codificaci√≥n y la descodificaci√≥n de datos confidenciales. Se incluye
informaci√≥n adicional como, por ejemplo, el periodo de validez, remisiones a listas de
revocaci√≥n de certificados, etc., que se introduce en el certificado a trav√©s de CA.

Utilizaci√≥n de certificados CA en TeleService
Para identificar de forma inequ√≠voca el TS Adapter IE Advanced como interlocutor respecto al
PC remoto, desde el TS Adapter se genera un certificado CA con una huella digital √∫nica.
Para establecer una conexi√≥n VPN es imprescindible guardar este certificado CA en el
almac√©n de certificados de Windows de su PG/PC. Si activa el servidor web en conexi√≥n

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

177

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN
directa y falta el certificado CA, se muestra una advertencia de seguridad que puede
aceptarse.
Nota
Gesti√≥n de certificados CA
¬°La gesti√≥n de certificados CA requiere conocimientos especiales sobre el sistema operativo
y solo debe realizarla personal instruido!
Para gestionar los certificados CA necesitar√° tener derechos de administrador.

Definici√≥n de huella digital
La huella digital es una representaci√≥n hexadecimal con una longitud de 20 bytes. Representa
un valor un√≠voco para un certificado CA y se usa para identificar un certificado CA determinado.
La huella digital se calcula de forma din√°mica con el algoritmo SHA1 y no existe f√≠sicamente
en el certificado CA.

Utilizaci√≥n de la huella digital en TeleService
El certificado CA sirve para identificar de forma inequ√≠voca el TS Adapter IE Advanced como
interlocutor. Cada vez que el TS Adapter IE Advanced genera un certificado CA, se genera
autom√°ticamente una huella digital √∫nica de ese certificado CA con una longitud de 20 bytes.
TS Adapter IE Advanced la calcula autom√°ticamente cuando se genera un certificado. Cada
certificado tiene una huella digital espec√≠fica y √∫nica. Esta huella digital debe transferirse al
equipo a trav√©s de un canal seguro, p. ej., por tel√©fono o mediante un correo codificado. Al
establecer una conexi√≥n VPN con TeleService, deber√° introducir la huella digital en el cuadro
de di√°logo de conexi√≥n, siempre que no haya guardado ya el certificado CA en el almac√©n de
certificados de Windows de su PC.
Encontrar√° la huella digital correspondiente al TS Adapter IE Advanced en la interfaz web del
TS Adapter IE Advanced. Para abrir la interfaz web, haga doble clic en el comando
"Parametrizar TS Adapter IE" en la lista de dispositivos del TIA Portal. Inicie sesi√≥n en la
interfaz web para visualizar la huella digital en la ficha "Seguridad > Certificados".

Descarga del certificado CA al establecer la conexi√≥n
Al establecer la conexi√≥n, TeleService comprueba si se ha instalado un certificado CA
adecuado en el almac√©n de certificados de Windows de su PG/PC. Si se encuentra un
certificado CA adecuado, se establece la conexi√≥n VPN como conexi√≥n SSTP (Secure Socket
Tunneling Protocol).
Si no se encuentra ning√∫n certificado CA adecuado, se cargar√° primero el certificado CA del
TS Adapter IE Advanced correspondiente. Para ello, se llamar√° al TS Adapter IE Advanced a
trav√©s de la direcci√≥n remota introducida en el cuadro de di√°logo de conexi√≥n. Si la descarga
del certificado CA es correcta, se calcula la huella digital del certificado CA descargado y se
compara con la huella digital introducida en el cuadro de di√°logo de conexi√≥n. Si ambas huellas
coinciden, se abre un cuadro de di√°logo que le preguntar√° si desea guardar el certificado CA
en el almac√©n de certificados de Windows de su PG/PC. Para guardar el certificado CA
necesitar√° tener derechos de administrador.

178

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN
A continuaci√≥n, se establece la conexi√≥n VPN.

Consulte al respecto tambi√©n
‚óè Instalar certificado CA para conexi√≥n VPN (P√°gina 179)
‚óè Borrar certificado CA para conexi√≥n VPN (P√°gina 182)

7.4.3

Instalar certificado CA para conexi√≥n VPN

Instalaci√≥n de certificados CA
Para establecer una conexi√≥n VPN segura con TeleService entre su PG/PC y una instalaci√≥n
remota, necesitar√° un certificado CA v√°lido generado por el TS Adapter IE Advanced. Dicho
certificado debe estar guardado en el almac√©n de certificados de Windows de su PG/PC.
La instalaci√≥n de un certificado CA se puede realizar mediante descarga autom√°tica o
manualmente.
La gesti√≥n de certificados CA se realiza a trav√©s de Microsoft¬Æ Management Console.

Nota
Gesti√≥n de certificados CA
¬°La gesti√≥n de certificados CA requiere conocimientos especiales sobre el sistema operativo
y solo debe realizarla personal instruido!
¬°Para gestionar los certificados CA necesitar√° tener derechos de administrador!

Requisitos
Su equipo no tiene instalado todav√≠a ning√∫n certificado CA en el almac√©n de certificados de
Windows.

Instalaci√≥n de certificados CA mediante descarga autom√°tica
Proceda del siguiente modo:
1. Inicie sesi√≥n en el sistema como administrador.
2. Transfiera la huella digital correspondiente al certificado CA a trav√©s de un "canal seguro",
p. ej., por tel√©fono o mediante un correo codificado, del TS Adapter IE Advanced a su
equipo.
Encontrar√° la huella digital correspondiente al TS Adapter IE Advanced en la interfaz web
del TS Adapter IE Advanced. Para abrir la interfaz web, haga doble clic en el comando
"Parametrizar TS Adapter IE" en la lista de dispositivos del TIA Portal. Inicie sesi√≥n en la
interfaz web para visualizar la huella digital en la ficha "Seguridad > Certificados".

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

179

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN
3. Haga clic en la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
4. Dentro de esta, haga clic en la carpeta "TeleService".
5. Haga doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia". Se abre el
cuadro de di√°logo "Establecer conexi√≥n a distancia con la instalaci√≥n remota".
6. En la lista desplegable, seleccione "TS Adapter IE" como Tipo de adaptador.
7. Seleccione "VPN" como Tipo de conexi√≥n.
8. Introduzca la direcci√≥n IP o el nombre DNS para el TS Adapter IE Advanced de contacto en
el campo de entrada correspondiente. Tambi√©n puede seleccionar los datos que haya
disponibles en el list√≠n telef√≥nico haciendo clic en el bot√≥n posterior.
9. Introduzca su nombre de usuario y la contrase√±a correspondiente.
10.Copie la huella digital que se muestra en la interfaz web del TS Adapter IE Advanced en la
columna "Huella digital".
11.Haga clic en el bot√≥n "Establecer" para establecer la conexi√≥n remota deseada. Este bot√≥n
solo se activa una vez introducidos todos los par√°metros necesarios para establecer una
conexi√≥n remota.
12.Como no hab√≠a ning√∫n certificado CA instalado en su equipo, no se encuentra ning√∫n
certificado CA v√°lido.
Por tanto, se establece una conexi√≥n "normal" (no una conexi√≥n VPN) y el certificado
necesario se descarga del TS Adapter IE Advanced a la memoria de trabajo de su equipo.
A continuaci√≥n, se calcula la huella digital (algoritmo SHA1) y se compara con la huella
digital introducida en el cuadro de di√°logo de conexi√≥n. Si ambas huellas coinciden, se abre
un cuadro de di√°logo que le preguntar√° si desea guardar el certificado CA en el almac√©n de
certificados de Windows de su PG/PC.
13.Confirme que desea guardar el certificado CA.
Nota
Es necesario reiniciar STEP 7 tras renovar el certificado CA.
Despu√©s de renovar el certificado CA en el TS Adapter IE Advanced, debe reiniciarse STEP 7
para poder establecer la conexi√≥n remota con la nueva huella digital. De lo contrario, en
determinadas circunstancias es posible que el certificado CA no se guarde en la memoria de
certificados de Windows y no se pueda establecer la conexi√≥n remota.

Resultado
Se establece la conexi√≥n VPN con el TS Adapter IE Advanced deseado. En cuanto se
establece la conexi√≥n, se cierra el cuadro de di√°logo.

180

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

Instalaci√≥n manual de certificados CA
Proceda del siguiente modo:
1. Inicie sesi√≥n en el sistema como administrador.
2. Abra el administrador de certificados de Windows de su PG/PC con Microsoft¬Æ
Management Console.
Para ello, haga clic en "Inicio", introduzca "mmc" en el campo de b√∫squeda y pulse la tecla
INTRO.
Se abre la consola.
3. En el men√∫ "Archivo", haga clic en el comando "Agregar o quitar complemento...".
Se abre el cuadro de di√°logo "Agregar o quitar complemento".
4. En la lista "Complementos" haga doble clic en "Certificados" y seleccione "Cuenta de
equipo" en el cuadro de di√°logo que se abre a continuaci√≥n.
5. En el cuadro de di√°logo siguiente, seleccione "Equipo local" y haga clic en "Finalizar" y en
"Aceptar".
Se abre la Ra√≠z de consola y se muestra la carpeta "Certificados (equipo local)".
6. Abra la carpeta "Certificados (equipo local)" mostrada y haga clic en "Entidades de
certificaci√≥n ra√≠z de confianza".
7. Haga clic en la carpeta "Certificados" y, a trav√©s del men√∫ contextual, abra el comando
"Todas las tareas" > "Importar...".
8. Tenga en cuenta la informaci√≥n mostrada en el cuadro de di√°logo "Asistente para
importaci√≥n de certificados" y haga clic en "Siguiente".
9. En el cuadro de di√°logo siguiente, haga clic en "Examinar..." y seleccione el certificado CA
deseado.
10.A continuaci√≥n, haga clic dos veces en "Siguiente" y despu√©s en "Finalizar" para instalar el
certificado CA.

Resultado
El certificado CA seleccionado se instala en la ubicaci√≥n indicada del almac√©n de certificados
de Windows.

Nota
Para m√°s informaci√≥n...
... sobre la instalaci√≥n de certificados CA, pulse la tecla "F1" de ayuda en pantalla de su sistema
operativo.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

181

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

7.4.4

Borrar certificado CA para conexi√≥n VPN

Borrar certificados CA
Proceda del siguiente modo:
1. Inicie sesi√≥n en el sistema como administrador.
2. Abra el administrador de certificados de Windows de su PG/PC con Microsoft¬Æ
Management Console.
Para ello, haga clic en "Inicio", introduzca "mmc" en el campo de b√∫squeda y pulse la tecla
INTRO.
Se abre la consola.
3. En el men√∫ "Archivo" haga clic en "Agregar o quitar complemento...".
Se abre el cuadro de di√°logo de selecci√≥n de complementos.
4. En la lista "Complementos" haga doble clic en "Certificados" y seleccione "Cuenta de
equipo" en el cuadro de di√°logo que se abre a continuaci√≥n.
5. En el cuadro de di√°logo siguiente, seleccione "Equipo local" y haga clic en "Finalizar" y en
"Aceptar".
Se abre la Ra√≠z de consola y se muestra la carpeta "Certificados (equipo local)".
6. Abra la carpeta "Certificados (equipo local)" mostrada y haga clic en "Entidades de
certificaci√≥n ra√≠z de confianza".
7. Abra la carpeta "Certificados", seleccione el certificado CA que desee y haga clic en
"Borrar" en el men√∫ contextual.
8. Confirme la consulta posterior con "S√≠".

Resultado
El certificado CA seleccionado se borra de la lista de certificados disponibles.

7.4.5

Establecimiento de una conexi√≥n VPN con una instalaci√≥n remota

7.4.5.1

Establecer conexi√≥n VPN

Introducci√≥n al establecimiento de una conexi√≥n VPN
Se establece una conexi√≥n VPN conect√°ndose a trav√©s de TeleService con una instalaci√≥n
remota a trav√©s de Internet.
Para ello, por un lado, la PG/el PC con el TIA Portal instalado tiene conexi√≥n a Internet. Por otro
lado, el sistema de automatizaci√≥n est√° conectado a Internet a trav√©s de la interfaz WAN (Wide
Area Network) del TS Adapter IE Advanced parametrizado.

182

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

Requisitos
Su PG/PC est√° conectado a Internet.
En la instalaci√≥n remota existe un TS Adapter IE Advanced.
El TS Adapter IE Advanced est√° parametrizado y conectado a Internet.
El certificado CA necesario para identificar el TS Adapter ha sido creado y se ha instalado en
el almac√©n de certificados de Windows de su PG/PC.

Proceda del siguiente modo:
1. Haga clic en la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Dentro de esta, haga clic en la carpeta "TeleService".
3. Haga doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia". Se abre el
cuadro de di√°logo "Establecer conexi√≥n a distancia con la instalaci√≥n remota".
4. En la lista desplegable, seleccione "TS Adapter IE" como "Tipo de adaptador".
5. Como "Tipo de conexi√≥n", introduzca "VPN".
6. Introduzca la direcci√≥n IP o el nombre DNS para el TS Adapter IE Advanced de contacto en
el campo de entrada correspondiente. Tambi√©n puede seleccionar los datos que haya
disponibles en el list√≠n telef√≥nico haciendo clic en el bot√≥n posterior.
7. Introduzca su nombre de usuario y la contrase√±a correspondiente.
8. Haga clic en el bot√≥n "Establecer" para establecer la conexi√≥n VPN deseada. Este bot√≥n
solo se activa una vez introducidos todos los par√°metros necesarios para establecer la
conexi√≥n remota.

Resultado
Se establece la conexi√≥n VPN con la instalaci√≥n deseada. En "Estado" se muestra el progreso
del establecimiento de la conexi√≥n. En cuanto se establece la conexi√≥n VPN, se cierra el
cuadro de di√°logo. En la barra de estado del TIA Portal aparece el mensaje: "Conexi√≥n remota
establecida". Seguidamente se puede utilizar la conexi√≥n remota con el TIA Portal y
comunicarse con el sistema de automatizaci√≥n.

No es posible establecer la conexi√≥n
Si no puede establecer conexi√≥n, intente averiguar el motivo del fallo por medio de las
"Indicaciones para la b√∫squeda de errores".
Nota
Reglas para las direcciones IP
‚óè Utilice √∫nicamente direcciones IP que todav√≠a no est√©n asignadas a la red de planta.
‚óè Si la direcci√≥n IP parametrizada para el TS Adapter IE Advanced ya est√° asignada a la red
de planta, solo podr√° acceder al TS Adapter IE Advanced a trav√©s de su direcci√≥n MAC.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

183

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

Consulte tambi√©n
Instalar certificado CA para conexi√≥n VPN (P√°gina 179)

7.4.5.2

Deshacer conexi√≥n VPN

Deshacer una conexi√≥n VPN activa

Nota
Deshacer la conexi√≥n VPN
Antes de deshacer la conexi√≥n VPN se debe cambiar al modo offline del TIA Portal.

Proceda del siguiente modo:
1. Haga doble clic en la entrada "Establecer/deshacer conexi√≥n a distancia" del TIA Portal.
2. Confirme la consulta del cuadro de di√°logo posterior con "S√≠".

Resultado
Se deshace la conexi√≥n VPN.

7.4.6

TS Adapter IE Advanced

7.4.6.1

Descripci√≥n abreviada del TS Adapter IE Advanced

TS Adapter IE Advanced
El TS Adapter IE Advanced tiene las siguientes propiedades:
‚óè Conexi√≥n directa a trav√©s de Industrial Ethernet (IE), 2 puertos
‚óè Interfaz WAN (Wide Area Network) para conexiones VPN
‚óè Actualizaci√≥n del firmware posible
‚óè M√≥dulo enchufable
‚óè La parametrizaci√≥n se efect√∫a con una interfaz web.

184

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

Nota
M√°s informaci√≥n sobre el TS Adapter IE Advanced
Encontrar√° m√°s informaci√≥n sobre el TS Adapter que est√° utilizando en la documentaci√≥n
suministrada con su TS Adapter.

7.4.6.2

Tipos de conexi√≥n

Tipos de conexi√≥n del TS Adapter IE Advanced
Las siguientes figuras muestran los posibles tipos de conexi√≥n del TS Adapter IE Advanced.

Conexi√≥n directa
En conexi√≥n directa en la PG/el PC puede parametrizar el TS Adapter IE Advanced a trav√©s de
Ethernet.
760RGXOH

76$GDSWHU,($GYDQFHG

3*3&

(WKHUQHW

Figura 7-5

TS Adapter IE Advanced: conexi√≥n directa

Conexi√≥n a Internet (m√≥dem/router ADSL)
Para la conexi√≥n a Internet debe operar el m√≥dem/router ADSL en la conexi√≥n WAN del
TS Adapter IE Advanced.
760RGXOH

76$GDSWHU,($GYDQFHG

:$1
'6/
0RGHP5RXWHU
(WKHUQHW

Figura 7-6

TS Adapter IE Advanced: conexi√≥n a Internet

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

185

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

Conexi√≥n a la red de empresa (Intranet)
Para la conexi√≥n a la Intranet debe operar la red de planta (Ethernet) en una de las dos
conexiones LAN del TS Adapter IE Advanced.
760RGXOH

76$GDSWHU,($GYDQFHG

(QJLQHHULQJ6WDWLRQ

2SHUDWRU6WDWLRQ

6HUYHU

(WKHUQHW
$XWRPDWLVLHUXQJVV\VWHPH

Figura 7-7

TS Adapter IE Advanced: conexi√≥n a la red de empresa (Intranet)

M√°s informaci√≥n
Encontrar√° m√°s informaci√≥n sobre los m√≥dulos TS en la documentaci√≥n que se le ha
suministrado con su TS Adapter IE Advanced.

7.4.6.3

Posibilidades de parametrizaci√≥n del TS Adapter IE Advanced

Principios b√°sicos para la parametrizaci√≥n del TS Adapter IE
El TS Adapter IE Advanced se parametriza con una interfaz web.
Para la parametrizaci√≥n del TS Adapter IE Advanced se dispone de una ayuda web asignada
a la interfaz web.
Existen, p. ej., las siguientes posibilidades de parametrizaci√≥n:
‚óè Nueva parametrizaci√≥n
‚óè Restauraci√≥n de la parametrizaci√≥n est√°ndar
‚óè Importaci√≥n de par√°metros del adaptador
‚óè Exportaci√≥n de par√°metros del adaptador
Nota
Realizar la parametrizaci√≥n
Parametrice su TS Adapter IE Advanced teniendo en cuenta la documentaci√≥n suministrada.
All√≠ encontrar√° la informaci√≥n necesaria en relaci√≥n con el procedimiento exacto durante la
parametrizaci√≥n.

186

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.4 Conexi√≥n remota como conexi√≥n VPN

7.4.6.4

Parametrizar el TS Adapter IE Advanced

Introducci√≥n
Puede parametrizar el TS Adapter IE Advanced tanto en la conexi√≥n directa como tambi√©n
mediante una conexi√≥n remota ya configurada.
A continuaci√≥n se describen ambas posibilidades de parametrizaci√≥n.
Puede obtener detalles espec√≠ficos sobre la parametrizaci√≥n del TS Adapter IE Advanced en
la documentaci√≥n del TS Adapter IE Advanced.

Parametrizaci√≥n del TS Adapter IE Advanced en la conexi√≥n directa

Requisitos
Existe una conexi√≥n LAN con su TS Adapter IE Advanced.

Procedimiento
Para parametrizar el TS Adapter IE Advanced, proceda del siguiente modo:
1. Abra la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Haga doble clic en la interfaz Ethernet del equipo.
3. Haga doble clic en el comando "Mostrar dispositivos accesibles". A continuaci√≥n se
muestra el TS Adapter IE Advanced.
4. Haga doble clic en la carpeta "TS Adapter IE Advanced" y despu√©s en "Online y
diagn√≥stico", y asigne al TS Adapter la direcci√≥n IP deseada en los cuadros de di√°logo
siguientes. Para ello, tenga en cuenta que la direcci√≥n IP que asigne al TS Adapter IE
Advanced debe encontrarse en la misma subred que la direcci√≥n IP de la tarjeta de interfaz
de la PG/el PC.
5. Actualice la vista del √°rbol del proyecto de los "Dispositivos accesibles" para que se
muestre el TS Adapter IE Advanced con la direcci√≥n IP reci√©n asignada.
6. Abra la carpeta "TS Adapter IE Advanced! en la lista de dispositivos.
7. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuaci√≥n se abre la
interfaz web asignada para parametrizar el TS Adapter.
8. Inicie la sesi√≥n en la interfaz web.
9. Ajuste los par√°metros deseados en las distintas fichas del cuadro de di√°logo.
10.Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los par√°metros ajustados se guardar√°n en la memoria no vol√°til del TS Adapter IE Advanced.
Con ello finaliza la parametrizaci√≥n.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

187

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Parametrizaci√≥n del TS Adapter IE Advanced a trav√©s de la conexi√≥n remota

Requisitos
Hay una conexi√≥n remota establecida con un TS Adapter IE Advanced.

Procedimiento
1. Abra la carpeta "Accesos online" en el √°rbol del proyecto del TIA Portal.
2. Abra la carpeta "TeleService" y, a continuaci√≥n, la carpeta de la instalaci√≥n deseada.
3. Haga doble clic en el comando "Parametrizar TS Adapter IE". A continuaci√≥n se abre la
interfaz web correspondiente para parametrizar el TS Adapter IE. El "inicio de sesi√≥n" en la
interfaz web se efect√∫a autom√°ticamente con los datos de inicio de sesi√≥n de la conexi√≥n
remota.
4. Ajuste los par√°metros deseados en las distintas fichas del cuadro de di√°logo.
5. Confirme en cada caso las entradas realizadas con "Guardar ajustes".

Resultado
Los par√°metros ajustados se guardar√°n en la memoria no vol√°til del TS Adapter IE Advanced.
Con ello finaliza la parametrizaci√≥n.

7.5

Conexiones remotas controladas por CPU en TeleService

7.5.1

Vista general de las conexiones remotas controladas por CPU

Introducci√≥n
TeleService ofrece, en funci√≥n de la CPU utilizada en cada caso, diferentes posibilidades para
establecer una conexi√≥n remota. La iniciativa para establecer la conexi√≥n parte siempre de la
CPU. Para las distintas posibilidades de conexi√≥n se utilizan las instrucciones de
comunicaci√≥n que se indican a continuaci√≥n.

Posibilidades para el establecimiento de conexiones con CPU S7-300/400
Existen las siguientes instrucciones de comunicaci√≥n:
‚óè Instrucci√≥n de comunicaci√≥n "PG_DIAL": Establecer una conexi√≥n remota con una PG/un
PC
‚óè Instrucci√≥n de comunicaci√≥n "SMS_SEND": Enviar un mensaje SMS

188

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
‚óè Instrucci√≥n de comunicaci√≥n "AS_DIAL": Establecer una conexi√≥n remota con el AS
‚óè Instrucci√≥n de comunicaci√≥n "AS_MAIL": Enviar e-mail

C√≥mo establecer una conexi√≥n con CPU S7-1200
Existe la siguiente instrucci√≥n de comunicaci√≥n:
‚óè Instrucci√≥n de comunicaci√≥n "TM_MAIL": Enviar e-mail

C√≥mo establecer una conexi√≥n con CPU S7-1500
Existe la siguiente instrucci√≥n de comunicaci√≥n:
‚óè Instrucci√≥n de comunicaci√≥n "TMAIL_C": Enviar e-mail
Nota
Descripci√≥n de las distintas instrucciones de comunicaci√≥n
Puede encontrar informaci√≥n detallada sobre las instrucciones de comunicaci√≥n que pueden
utilizarse en el sistema de informaci√≥n del TIA Portal en el directorio "Referencias >
Comunicaci√≥n > TeleService".

Consulte tambi√©n
Posibilidades de parametrizaci√≥n del TS Adapter IE (P√°gina 171)

7.5.2

Establecer conexiones desde y hacia instalaciones remotas (acoplamiento
remoto PG-AS)

7.5.2.1

Acceder desde una instalaci√≥n remota a una programadora/un PC

Introducci√≥n
Con la aplicaci√≥n TeleService y un TS Adapter MPI se puede establecer una conexi√≥n remota
con una instalaci√≥n remota y comunicarse con ella. La iniciativa para establecer la conexi√≥n
remota parte de la programadora/del PC.
No obstante, en una instalaci√≥n remota se producen a menudo eventos que exigen una
intervenci√≥n r√°pida. En tal caso, p. ej. cuando se produce un evento as√≠ncrono, el sistema de
automatizaci√≥n puede iniciar el establecimiento de una conexi√≥n remota con una
programadora/un PC.
La figura siguiente muestra gr√°ficamente los componentes necesarios para establecer la
conexi√≥n desde una instalaci√≥n con una programadora/un PC.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

189

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
6LVWHPDGHDXWRPDWL]DFL¬µQ
6&
&38

3*3&

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR

352'$9($3,9

,QVWUXFFL¬µQ‡≤Ø3*B',$/‡≤∞

&RQH[L¬µQUHPRWD

7HOH6HUYLFH
5HPRWH/LQN

&RPXQLFDFL¬µQE¬£VLFD6
76b$GDSWHU

0¬µGHP 5HGGHWHOHIRQ¬ØD 0¬µGHP

5HG03,

Figura 7-8

7.5.2.2

Funcionamiento de la instrucci√≥n de comunicaci√≥n "PG_DIAL"

Requisitos para establecer una conexi√≥n

Introducci√≥n
Para que un sistema de automatizaci√≥n remoto pueda establecer una conexi√≥n remota con
una programadora/un PC deben cumplirse ciertos requisitos de hardware y software. A
continuaci√≥n se describen estos requisitos.

Requisitos de hardware:
Para establecer una conexi√≥n remota desde una instalaci√≥n remota a una programadora/un
PC no se requiere m√°s hardware que el necesario para acceder desde la programadora/el PC
a la instalaci√≥n remota.
Para establecer la conexi√≥n el programa de usuario llama la instrucci√≥n de comunicaci√≥n
"PG_DIAL" . Esta puede ejecutarse en una CPU S7-300 o S7-400 donde est√© realizada la
comunicaci√≥n b√°sica S7.
Debe utilizarse un TS Adapter I con una versi√≥n V5.0 o superior o un TS Adapter II .

Requisitos de software en la instalaci√≥n:
En el volumen de suministro de TeleService est√° incluida la instrucci√≥n de comunicaci√≥n
"PG_DIAL" que se instala conjuntamente al instalar el TIA Portal. Encontrar√° las instrucciones
de comunicaci√≥n instaladas en la Task Card del editor de bloques, dentro de la carpeta
"Comunicaci√≥n > TeleService".
Para que una instalaci√≥n remota pueda establecer una conexi√≥n remota con una
programadora o un PC, el programa de usuario de la instalaci√≥n debe llamar la instrucci√≥n de
comunicaci√≥n "PG_DIAL".

190

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de software en la programadora o en el PC:
En la programadora o en el PC se necesita un producto de software que, en combinaci√≥n con
TeleService, espere la llamada de una instalaci√≥n remota, la detecte e informe al programa de
usuario.

7.5.3

Intercambio de datos entre instalaciones remotas (acoplamiento remoto AS-AS)

7.5.3.1

Principios b√°sicos para el acoplamiento remoto AS-AS

Introducci√≥n
El acoplamiento remoto AS-AS permite que dos sistemas de automatizaci√≥n intercambien
datos de proceso a trav√©s de la red telef√≥nica.

Requisitos
La instrucci√≥n de comunicaci√≥n "AS_DIAL" s√≥lo est√° disponible si utiliza una CPU de la serie
S7-300/400.

Definici√≥n: Sistema de automatizaci√≥n local y remoto
‚óè El sistema de automatizaci√≥n del que parte la iniciativa de establecer la conexi√≥n remota se
denomina local.
‚óè El sistema de automatizaci√≥n con el que debe establecerse la conexi√≥n remota se
denomina remoto.

Intercambio de datos a trav√©s del acoplamiento remoto AS-AS
El intercambio de datos tiene lugar a trav√©s de instrucciones de comunicaci√≥n espec√≠ficas para
conexiones S7 no configuradas. Para el establecimiento de una conexi√≥n remota al sistema de
automatizaci√≥n utilice la instrucci√≥n de comunicaci√≥n "AS_DIAL".
Puede encontrar informaci√≥n detallada para el establecimiento de una conexi√≥n en el sistema
de informaci√≥n en el directorio "Referencias > Comunicaci√≥n > TeleService".
La figura siguiente muestra una representaci√≥n gr√°fica de los componentes necesarios para
establecer la conexi√≥n de un sistema de automatizaci√≥n local a otro remoto.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

191

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
6LVWHPDGHDXWRPDWL]DFL¬µQ
UHPRWR
6&
&38UHPRWD

6LVWHPDGHDXWRPDWL]DFL¬µQ
ORFDO
6&
&38ORFDO

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR

,QVWUXFFL¬µQ‡≤Ø$6B',$/‡≤∞

;B5&9
&RQH[L¬µQUHPRWD

;B6(1';B387
;B*(7

76b$GDSWHU
ORFDO
5HG03,3'
ORFDO

Figura 7-9

7.5.3.2

0¬µGHP
ORFDO

0¬µGHP
UHPRWR

76b$GDSWHU
UHPRWR
5HG03,3'
UHPRWD

5HGGH
WHOHIRQ¬ØD

Intercambio de datos a trav√©s del acoplamiento remoto AS-AS

Requisitos de hardware y software para el acoplamiento remoto AS-AS

Introducci√≥n
Para que un sistema de automatizaci√≥n local pueda establecer una conexi√≥n a distancia con
un sistema de automatizaci√≥n remoto deben cumplirse ciertos requisitos de hardware y
software. A continuaci√≥n se describen estos requisitos.

Requisitos de hardware
Para la transferencia de datos del proceso de un sistema de automatizaci√≥n local a otro
remoto, s√≥lo se necesita el hardware que requiere la programadora/el PC para acceder al
sistema de automatizaci√≥n correspondiente.
Para establecer y deshacer la conexi√≥n remota, el programa de usuario del TIA Portal de la
CPU local llama una instrucci√≥n de comunicaci√≥n. Esta instrucci√≥n de comunicaci√≥n se puede
ejecutar en una CPU S7-300/400 o en una CPU C7. La instrucci√≥n de comunicaci√≥n requiere
que en la CPU se haya establecido la comunicaci√≥n b√°sica S7. Asimismo, la CPU remota debe
ser compatible con la comunicaci√≥n b√°sica S7.
Debe utilizarse un TS Adapter I con una versi√≥n V5.1 o superior o un TS Adapter II.

192

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de software
En el volumen de suministro de TeleService est√° incluida la instrucci√≥n de comunicaci√≥n
"AS_DIAL", que se incorpora a la librer√≠a del TIA Portal durante la instalaci√≥n, en la Task Card,
en la carpeta de instrucciones de comunicaci√≥n de TeleService. Para establecer y deshacer
una conexi√≥n remota del sistema de automatizaci√≥n local al remoto hay que llamar la
instrucci√≥n de comunicaci√≥n "AS_DIAL" en el programa de usuario del TIA Portal de la CPU
local.
$FRSODPLHQWRUHPRWR$6$6
6LVWHPDGHDXWRPDWL]DFL¬µQ
6&

6LVWHPDGHDXWRPDWL]DFL¬µQ
6&

3URJUDPDGHXVXDULR

3URJUDPDGHXVXDULR

,QVWUXFFL¬µQ‡≤Ø$6B',$/‡≤∞

,QVWUXFFL¬µQ‡≤Ø$6B',$/‡≤∞

6)&V

6)&V

03,

03,

76b$GDSWHU

76b$GDSWHU

0¬µGHP

Figura 7-10

5HGGH
WHOHIRQ¬ØD

0¬µGHP

Requisitos de hardware y software para el acoplamiento remoto AS-AS

7.5.4

Enviar un SMS desde una instalaci√≥n

7.5.4.1

Requisitos para enviar un mensaje SMS

Introducci√≥n
Para que la instalaci√≥n pueda enviar un SMS se deben cumplir los requisitos de hardware y
software siguientes. A continuaci√≥n se describen estos requisitos.

Requisitos de hardware
Para enviar un mensaje SMS desde una instalaci√≥n se requiere un m√≥dem GSM y un
TS Adapter MPI.
Debe utilizarse un TS Adapter I con una versi√≥n V5.2 o superior o un TS Adapter II .

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

193

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de software en la instalaci√≥n
En el volumen de suministro de TeleService est√° incluida la instrucci√≥n de comunicaci√≥n
"SMS_SEND", que se incorpora a la librer√≠a del TIA Portal durante la instalaci√≥n, en la Task
Card, en la carpeta de instrucciones de comunicaci√≥n de TeleService. Para que la instalaci√≥n
pueda enviar el SMS es necesario que el programa de usuario que est√° cargado en la CPU de
la instalaci√≥n llame la instrucci√≥n de comunicaci√≥n "SMS_SEND".
6LVWHPDGHDXWRPDWL]DFL¬µQ
6&
&38

)D[

HPDLO

3URJUDPDGHXVXDULR
,QVWUXFFL¬µQ
‡≤Ø606B6(1'‡≤∞
&RPXQLFDFL¬µQE¬£VLFD6
76b$GDSWHU

0¬µGHP
LQDO¬£PEULFR

0¬µYLO

5HG03,
5HGWHOHI¬µQLFD
LQDO¬£PEULFD\
SURYHHGRUGHUHG

Figura 7-11

Funcionamiento de la instrucci√≥n de comunicaci√≥n "SMS_SEND"

Nota
A trav√©s de los servicios adicionales de la compa√±√≠a de telefon√≠a m√≥vil se puede enviar un
SMS, si es necesario, no s√≥lo a un m√≥vil, sino tambi√©n a una direcci√≥n de correo electr√≥nico
o a un fax.

7.5.5

Enviar un correo electr√≥nico desde una instalaci√≥n

7.5.5.1

Requisitos para enviar un correo electr√≥nico

Introducci√≥n
Para que la instalaci√≥n pueda enviar un correo electr√≥nico se deben cumplir los requisitos de
hardware y software siguientes:

194

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService

Requisitos de hardware
Para enviar un correo electr√≥nico desde una instalaci√≥n se necesita un TS Adapter IE y una de
las CPU indicadas a continuaci√≥n:
‚óè una CPU 31x-2 PN/DP a partir de la versi√≥n de firmware V2.5
‚óè una CPU 41x-3 PN/DP
‚óè una CPU de la familia S7-1200
‚óè una CPU de la familia S7-1500

Requisitos de software en la instalaci√≥n
En el volumen de suministro de TeleService se incluyen varias instrucciones de comunicaci√≥n
espec√≠ficas de la CPU, que se incorporan durante la instalaci√≥n a la Task Card, en la carpeta
de instrucciones de comunicaci√≥n de TeleService, en la librer√≠a del TIA Portal.
Para que la instalaci√≥n pueda enviar un mensaje de correo electr√≥nico es necesario que el
programa de usuario de la instalaci√≥n llame la instrucci√≥n de comunicaci√≥n correspondiente
espec√≠fica de la CPU.
Existen las siguientes instrucciones de comunicaci√≥n para enviar un correo electr√≥nico:
‚óè CPU S7-300/400: utiliza la instrucci√≥n de comunicaci√≥n "AS_MAIL": Enviar e-mail
‚óè CPU S7-1200 V2.x y V3.x: utiliza la instrucci√≥n de comunicaci√≥n "TM_MAIL": Enviar e-mail
‚óè CPU S7-1200 >V4.0: Utiliza la instrucci√≥n de comunicaci√≥n "TMAIL_C": Enviar e-mail
‚óè CPU S7-1500: utiliza la instrucci√≥n de comunicaci√≥n "TMAIL_C": Enviar e-mail
Cada instrucci√≥n de comunicaci√≥n transfiere un correo electr√≥nico de una CPU a un servidor
de correo electr√≥nico a trav√©s del Simple Mail Transfer Protocol (SMTP) con el procedimiento
de autenticaci√≥n "LOGIN" . En este procedimiento SMTP se transfieren los datos sin cifrar.
La siguiente imagen muestra un ejemplo con la instrucci√≥n de comunicaci√≥n "AS_MAIL":

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

195

Establecimiento de conexiones remotas con TeleService
7.5 Conexiones remotas controladas por CPU en TeleService
HPDLO

8QLILHG0HVVDJLQJ
,63

6LVWHPDGHDXWRPDWL]DFL¬µQ
66&38
,3

:$1,QWHUQHW

,63
3URJUDPDGHXVXDULR
,QVWUXFFL¬µQ‡≤Ø$6B0$,/‡≤∞
&RPXQLFDFL¬µQDELHUWDY¬ØD
,QGXVWULDO(WKHUQHW

76$GDSWHU
,QGXVWULDO(WKHUQHW
,3

5HGORFDO,QGXVWULDO(WKHUQHW

Adem√°s, al configurar la CPU en la que se ejecuta la instrucci√≥n de comunicaci√≥n "AS_MAIL"
se debe ajustar la propiedad ‚ÄúRouter / Utilizar router‚Äú para la interfaz Ethernet. (Se encuentra
en la configuraci√≥n de dispositivos, en las direcciones Ethernet y, all√≠, en Protocolo IP) Como
"Direcci√≥n" debe indicarse la direcci√≥n IP de la interfaz Ethernet del TS Adapter IE.
Nota
Encontrar√° m√°s informaci√≥n al respecto en la Task Card de la carpeta "Instrucciones de
comunicaci√≥n" de TeleService.

196

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

7.6

Indicaciones para la b√∫squeda de errores

7.6.1

Indicaciones generales para la b√∫squeda de errores en caso de problemas con el
m√≥dem

Introducci√≥n
Las siguientes indicaciones le facilitan la labor de encontrar y subsanar las causas de posibles
problemas que se presenten con el m√≥dem:
1. Active la "grabaci√≥n de un archivo de registro" para intercambiar datos entre la
programadora/el PC y el m√≥dem. La grabaci√≥n de este archivo puede proporcionar
informaci√≥n valiosa para determinar las causas del error.
2. Conecte los altavoces de su m√≥dem local. Seleccione un volumen audible.
De esta forma podr√° o√≠r si:
‚Äì en la conexi√≥n existe una se√±al de l√≠nea libre,
‚Äì el m√≥dem llamado est√° ocupado, o
‚Äì el m√≥dem llamado recibe la llamada.

Problemas frecuentes del m√≥dem
Entre los problemas m√°s frecuentes de los m√≥dems se incluye la conexi√≥n con el m√≥dem:
‚óè No se establece la conexi√≥n con el m√≥dem.
‚óè La conexi√≥n m√≥dem se interrumpe
En los siguientes temas encontrar√° tablas en las que se describen posibles causas y se
proporcionan indicaciones para solucionar el error respectivo.

Consulte tambi√©n
No se establece una conexi√≥n por l√≠nea telef√≥nica con el TS Adapter (P√°gina 198)
No se establece una conexi√≥n por l√≠nea telef√≥nica desde el TS Adapter (P√°gina 200)
La conexi√≥n m√≥dem se interrumpe (P√°gina 201)
Mensajes de error del m√≥dem (P√°gina 202)
Grabaci√≥n de un archivo de informe para el m√≥dem (P√°gina 198)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

197

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

7.6.2

Grabaci√≥n de un archivo de informe para el m√≥dem

Introducci√≥n
Para poder localizar de forma m√°s sencilla las causas de errores en un m√≥dem se recomienda
permitir la grabaci√≥n de un archivo de informe.

Procedimiento:
Proceda del siguiente modo:
1. Active a trav√©s del Panel de control, opci√≥n "Opciones de tel√©fono y m√≥dem", el di√°logo de
propiedades del m√≥dem utilizado.
2. Compruebe los ajustes de la opci√≥n "Informe" en la ficha "Diagn√≥stico" y modifique, si es
necesario, los ajustes del archivo de informe de modo que puedan registrarse las
actividades.

Resultado:
Las actividades realizadas entre la programadora/el PC y el m√≥dem se introducen en el archivo
de informe. Cuando se presenten problemas con el establecimiento de la conexi√≥n se puede
analizar el archivo de informe para obtener indicaciones sobre la causa del error.

7.6.3

No se establece una conexi√≥n por l√≠nea telef√≥nica con el TS Adapter

No se establece una conexi√≥n por l√≠nea telef√≥nica con el TS Adapter
La siguiente tabla muestra posibles causas y la soluci√≥n en caso de que no pueda establecerse
ninguna conexi√≥n remota con el TS Adapter.
Causa posible

Comprobaci√≥n/Soluci√≥n

Cableado defectuoso

‚óè ¬øEst√°n correctamente conectados todos los cables de conexi√≥n?

Ajuste err√≥neo de las propiedades
de marcado para la centralita y el
supletorio

‚óè Las propiedades y los par√°metros de marcado ajustados para su m√≥dem, ¬øson
adecuados para la l√≠nea de tel√©fono principal o secundaria?

‚óè ¬øEst√° flojo alg√∫n conector?

‚óè Si utiliza el m√≥dem en una l√≠nea urbana (centralita), en el cuadro de di√°logo
"Propiedades de marcado" no debe indicar ning√∫n prefijo para l√≠nea urbana.
Los campos del prefijo de marcado para l√≠nea urbana deben estar vac√≠os para
llamadas locales y llamadas de larga distancia.

Ajuste err√≥neo del m√©todo de mar‚Äê ‚óè En el cuadro de di√°logo de las propiedades de marcado de su m√≥dem, ¬øest√°
cado
ajustado el m√©todo de marcado correcto (tonos/impulsos)?
‚óè Compruebe con un tel√©fono conectado, la toma en la que desee utilizar el m√≥dem.
En caso de marcado por impulsos, durante el marcado pueden o√≠rse en el tel√©fono
ruidos de arrastre, y en caso de marcado por tonos, diferentes tonos.
Ajuste en las propiedades de marcado del m√≥dem el procedimiento de marcado
adecuado.

198

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores
Causa posible

Comprobaci√≥n/Soluci√≥n

Bloqueo de marcado activado

‚óè El bloqueo de marcado es una propiedad de m√≥dem prescrita seg√∫n el pa√≠s, y
dependiendo del tipo de m√≥dem, se activa despu√©s de uno o varios intentos
frustrados al establecer una conexi√≥n.
‚óè Si despu√©s de varios intentos de marcado el m√≥dem no reacciona, puede ser que
est√© activado el bloqueo de marcado. Despu√©s de la orden de marcado, al m√≥dem
se le env√≠an efectivamente se√±ales, pero el m√≥dem no inicia el proceso de
marcado. El driver recibe un mensaje de error general.
‚óè Inf√≥rmese sobre c√≥mo se ha instalado el bloqueo de marcado en el m√≥dem.
‚óè Cree el archivo de informe (P√°gina 198) (modemlog.txt), donde se registrar√°n las
acciones realizadas entre la programadora/el PC y el m√≥dem.
Despu√©s compruebe si el archivo contiene una entrada (p. ej. DELAYED) causada
por un bloqueo de marcado.

Conexi√≥n telef√≥nica defectuosa u
ocupada

‚óè Conecte un tel√©fono y compruebe si en esa conexi√≥n puede o√≠rse una se√±al de
l√≠nea libre.
‚óè Si en la misma toma hay conectado un tel√©fono anal√≥gico, debe colgarse dicho
tel√©fono.
Si ya existe una conexi√≥n telef√≥nica, puede ser que en esa toma no pueda
establecerse una conexi√≥n m√≥dem adicional.

Ajuste err√≥neo de par√°metros serie ‚óè ¬øSe han introducido los valores correctos en la ficha "Conexi√≥n" de las propiedades
del m√≥dem (8 bits de datos, sin paridad, 1 bit de parada)?
¬øSe ha ajustado la interfaz COM correcta en la ficha "General" de las propiedades
del m√≥dem?
La cadena de inicializaci√≥n del
TS Adapter no se corresponde con
el m√≥dem.

‚óè Inf√≥rmese sobre los requisitos de la cadena de inicializaci√≥n del m√≥dem y aj√∫stela
seg√∫n los requisitos.
Procedimiento para parametrizar el TS Adapter IE (P√°gina 169)

Las preferencias ajustadas para la
correcci√≥n de errores entre el m√≥‚Äê
dem del TS Adapter y el m√≥dem de
la programadora/del PC no son
compatibles.

‚óè Adapte las preferencias del m√≥dem.
Informaci√≥n importante sobre la parametrizaci√≥n del TS Adapter MPI (P√°gina 164)
Restablecer la parametrizaci√≥n est√°ndar de un TS Adapter MPI (P√°gina 165)
Procedimiento para parametrizar el TS Adapter IE (P√°gina 165)

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

199

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

7.6.4

No se establece una conexi√≥n por l√≠nea telef√≥nica desde el TS Adapter

No se realiza la rellamada desde el TS Adapter
La siguiente tabla muestra posibles causas y su soluci√≥n en caso de que no pueda realizarse
ninguna rellamada desde el TS Adapter.
Causa posible

Comprobaci√≥n/Soluci√≥n

Ajustes err√≥neos de ubicaci√≥n y
llamada en el TS Adapter

Compruebe la parametrizaci√≥n del TS Adapter:
‚óè ¬øEst√°n correctamente ajustados el m√©todo de marcado y el prefijo de marcado para
l√≠nea urbana su tel√©fono?
‚óè ¬øEl m√≥dem del TS Adapter soporta los caracteres parametrizados para el prefijo de
marcado para l√≠nea urbana?
‚óè ¬øEst√° desactivado "Esperar se√±al antes de marcar" en una estaci√≥n secundaria?

Inicializaci√≥n insuficiente del m√≥‚Äê Compruebe la cadena de inicializaci√≥n del m√≥dem:
dem
‚óè Tal vez el m√≥dem necesite una inicializaci√≥n m√°s amplia para poder establecer una
conexi√≥n remota.
‚óè Propiedades de la cadena de inicializaci√≥n del m√≥dem en el TS Adapter MPI
El n√∫mero de rellamada no coin‚Äê Compruebe la parametrizaci√≥n del n√∫mero de rellamada que ha asignado.
cide

No se realiza la llamada desde el TS Adapter MPI
La siguiente tabla muestra posibles causas y su soluci√≥n en caso de que no pueda realizarse
ninguna llamada desde el TS Adapter MPI.
Causa posible

Comprobaci√≥n/Soluci√≥n

El n√∫mero de tel√©fono no coincide ¬øTransfiere la instrucci√≥n de comunicaci√≥n "PG_DIAL" el n√∫mero de tel√©fono deseado?
La parametrizaci√≥n del TS Adap‚Äê Compruebe la parametrizaci√≥n del TS Adapter MPI:
ter MPI es incorrecta
‚óè ¬øEst√°n correctamente ajustados el m√©todo de marcado y el prefijo de marcado para
su conexi√≥n telef√≥nica?
‚óè ¬øEl m√≥dem del TS Adapter MPI soporta los caracteres parametrizados para el prefijo
de marcado para l√≠nea urbana?
‚óè ¬øEst√° desactivado "Esperar se√±al antes de marcar" en una estaci√≥n secundaria?

200

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

7.6.5

La conexi√≥n m√≥dem se interrumpe

Se interrumpe la conexi√≥n m√≥dem
La siguiente tabla muestra posibles causas y su soluci√≥n en caso de que se interrumpa la
conexi√≥n m√≥dem.
Causa posible:

Comprobaci√≥n/Soluci√≥n:

Impulsos de tarificaci√≥n en la l√≠nea

Si se ha solicitado a la compa√±√≠a telef√≥nica una frecuencia de tarificaci√≥n, se generan
impulsos de tarificaci√≥n. Estos impulsos pueden impedir que el m√≥dem reconozca la
se√±al portadora y se desconecte.
‚óè Ajuste un tiempo de espera o de desconexi√≥n mayor en su m√≥dem.
‚óè Solicite a la compa√±√≠a telef√≥nica que desactive la frecuencia de tarificaci√≥n.

Blindaje

‚óè ¬øEst√°n suficientemente blindados los cables de conexi√≥n utilizados?
‚óè Aseg√∫rese de que las l√≠neas de entrada al m√≥dem no pasen cerca de cables de red
y que adem√°s guardan la mayor distancia posible con fuentes de alimentaci√≥n y
pantallas.

Timeout de informe

‚óè Ajuste los tiempos de vigilancia fijos.

Desconexi√≥n autom√°tica

‚óè Desactive la opci√≥n de autodesconexi√≥n de una conexi√≥n existente al transcurrir un
tiempo determinado sin efectuar ninguna transferencia de datos ("Desconectar la
llamada si est√° inactiva durante m√°s de ...").

Utilizar control de flujo desactivado

‚óè En la ficha "Conexi√≥n" de las propiedades del m√≥dem haga clic en el bot√≥n
"Avanzada" y active en el cuadro de di√°logo que aparece a continuaci√≥n las
siguientes opciones (si se requieren y a√∫n no est√°n activadas):

La cadena de inicializaci√≥n del
TS Adapter no se corresponde con
el m√≥dem

‚Äì

Control del flujo de datos

‚Äì

Hardware (RTS/CTS)

‚Äì

Compresi√≥n de datos

‚Äì

Controles de error

‚óè Ajuste la cadena de inicializaci√≥n del m√≥dem seg√∫n los requisitos:
Consulte tambi√©n: Posibilidades de parametrizaci√≥n del TS Adapter IE
(P√°gina 171)

Consulte tambi√©n
Posibilidades de parametrizaci√≥n para el TS Adapter MPI (P√°gina 164)

7.6.6

Lista de chequeo en caso de dificultades con el m√≥dem

Introducci√≥n
La siguiente lista le ayudar√° a encontrar las posibles causas en caso de tener problemas con
el m√≥dem. En los temas de ayuda que figuran a continuaci√≥n encontrar√° c√≥mo y en qu√©
cuadros de di√°logo deber√° definir los ajustes mencionados.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

201

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

No se establece la conexi√≥n m√≥dem:
‚óè Compruebe el cableado y los conectores.
‚óè Compruebe si el m√©todo de marcado (tonos/pulsos) est√° ajustado correctamente.
‚óè Si despu√©s de varios intentos de marcado fracasados el m√≥dem sigue sin reaccionar,
puede ser que est√© activado el bloqueo del marcado. Inf√≥rmese sobre c√≥mo est√°
implementado el bloqueo de marcado en el m√≥dem.
‚óè ¬øSe est√° utilizando el m√≥dem con una toma principal o con una estaci√≥n secundaria?
Ajuste de forma correspondiente las propiedades y las propiedades de marcado del
m√≥dem.
‚óè Active en las propiedades ampliadas la opci√≥n para registrar un archivo de protocolos. La
siguiente conexi√≥n que se establezca se graba en el archivo de registros del directorio de
Windows.
‚óè Aseg√∫rese de que los TA ISDN empleados utilizan un mismo protocolo del canal B y D.

La conexi√≥n m√≥dem se interrumpe:
‚óè Los pulsos de tarificaci√≥n pueden afectar de forma negativa a una conexi√≥n. Solicite a su
proveedor de servicios de telefon√≠a que desconecte los pulsos de tarificaci√≥n.
‚óè Ajuste los tiempos de vigilancia fijos.
‚óè Desactive la opci√≥n de autodesconexi√≥n de una conexi√≥n existente al transcurrir un tiempo
determinado sin efectuar ninguna transferencia de datos (inactividad).
‚óè Aseg√∫rese de haber activado RTS/CTS para el control del flujo de datos.

7.6.7

Mensajes de error del m√≥dem

Informaci√≥n visualizada en el archivo de informe
Los mensajes del m√≥dem se guardan en un archivo de informe siempre que se haya activado
su grabaci√≥n.
El archivo de informe contiene la siguiente informaci√≥n:
Aviso:

Causa posible:

NO DIALTONE

En este momento puede estar efectu√°ndose
‚óè Repita el proceso cuando haya terminado la
una conversaci√≥n telef√≥nica en la misma l√≠nea.
conversaci√≥n telef√≥nica en dicha l√≠nea.

NO CARRIER

La estaci√≥n seleccionada no est√° preparada,
no existe m√≥dem o no puede establecer una
conexi√≥n con el modo operativo ajustado.

‚óè Compruebe los n√∫meros de tel√©fono y los ajustes.

BUSY

La estaci√≥n seleccionada est√° ocupada.

‚óè Vuelva a intentarlo de nuevo m√°s tarde.

DELAYED: ... ...

Bloqueo de marcado

‚óè Inf√≥rmese por medio de la documentaci√≥n sobre
c√≥mo se ha instalado en su m√≥dem el bloqueo de
marcado y elim√≠nelo si as√≠ lo desea.

202

Soluci√≥n:

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

7.6.8

Posibles mensajes de error en las conexiones VPN

No se establece la conexi√≥n VPN con el TS Adapter IE Advanced
La siguiente tabla muestra posibles errores y la soluci√≥n en caso de que no pueda establecerse
ninguna conexi√≥n VPN con el TS Adapter IE Advanced.
Posibles errores

Comprobaci√≥n/Soluci√≥n

Al acceder a la interfaz web, en el ‚óè Nota: Este problema se produce si en el almac√©n de certificados de Windows hay
explorador aparece el mensaje de
un certificado CA que tiene el mismo nombre que el certificado CA reci√©n creado.
error "No se puede mostrar la p√°gi‚Äê
‚óè Si ya hay instalado un certificado CA para este TS Adapter en la memoria de
na web".
certificados de Windows y se ha generado un certificado CA nuevo en el TS
Adapter, elimine el certificado CA antiguo de la memoria de certificados de
Windows e instale el certificado CA reci√©n generado.
‚óè Consulte tambi√©n: Instalar certificado CA para conexi√≥n VPN (P√°gina 179)
‚óè Consulte tambi√©n: Borrar certificado CA para conexi√≥n VPN (P√°gina 182)
Mensaje de error: "Se ha producido
un error interno en la aplicaci√≥n".

‚óè Compruebe si se han creado m√°s usuarios en la base de datos de usuario del TS
Adapter IE Advanced.
‚óè El usuario "Administrador" no puede establecer ninguna conexi√≥n remota.

Mensaje de error: "No se ha encon‚Äê ‚óè Utilice la descarga autom√°tica de certificados. Para ello, introduzca la huella digital
trado ning√∫n certificado CA apropia‚Äê
en el campo correspondiente del cuadro de di√°logo de conexi√≥n.
do en el almac√©n de certificados de
‚óè Consulte tambi√©n: Establecer conexi√≥n VPN (P√°gina 182)
Windows".
O bien:
‚óè Exporte el certificado CA de la interfaz web del TS Adapter IE Advanced e inst√°lelo
manualmente en el almac√©n de certificados de Windows.
‚óè Consulte tambi√©n: Instalar certificado CA para conexi√≥n VPN (P√°gina 179)
Mensaje de error: "La direcci√≥n re‚Äê
mota indicada no concuerda con la
direcci√≥n remota del TS Adapter".
Mensaje de error: "No se puede
comprobar la firma del certificado".

‚óè Para establecer la conexi√≥n debe utilizar la direcci√≥n remota que ha indicado en el
TS Adapter IE Advanced.
‚óè No es posible utilizar la direcci√≥n IP estando registrado el nombre DNS (o
viceversa).
‚óè Si ha generado un nuevo certificado CA en el TS Adapter IE Advanced, debe borrar
el certificado CA antiguo del almac√©n de certificados de Windows e instalar el
nuevo.
‚óè Consulte tambi√©n: Borrar certificado CA para conexi√≥n VPN (P√°gina 182)
‚óè Consulte tambi√©n: Instalar certificado CA para conexi√≥n VPN (P√°gina 179)

Mensaje de error: "Error de informe" ‚óè Compruebe si en la configuraci√≥n del TS Adapter IE Advanced est√° definida la
direcci√≥n IP del PC de mantenimiento en la red de la instalaci√≥n (Par√°metros > Red
de la instalaci√≥n).
Mensaje de error: "Se produjo un
error al establecer la conexi√≥n".

‚óè Compruebe si la direcci√≥n IP LAN del TS Adapter IE Advanced y la direcci√≥n IP de
una de sus tarjetas de red se encuentran en la misma subred. En tal caso, desactive
esta tarjeta de red antes de establecer la conexi√≥n remota.

No se pueden enviar correos elec‚Äê
tr√≥nicos.

‚óè Compruebe si existe una conexi√≥n a la red/a Internet en el puerto WAN.
‚óè Compruebe si el servidor de correo es accesible.
‚óè Compruebe si en el TS Adapter IE Advanced se admiten las conexiones salientes.
‚óè Compruebe si el puerto SMTP est√° abierto en el firewall para conexiones salientes.

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

203

Establecimiento de conexiones remotas con TeleService
7.6 Indicaciones para la b√∫squeda de errores

204

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Simulaci√≥n de dispositivos con S7-PLCSIM
8.1

8

Simulaci√≥n de dispositivos

Introducci√≥n
El TIA Portal permite ejecutar y probar el hardware y el software del proyecto en un entorno
simulado. La simulaci√≥n se ejecuta directamente en la programadora o PC. Por ello no se
requiere hardware adicional.
El software de simulaci√≥n ofrece una interfaz de usuario gr√°fica para observar y modificar la
configuraci√≥n. √âsta var√≠a en funci√≥n del dispositivo seleccionado actualmente.

Integraci√≥n en el TIA Portal
El software de simulaci√≥n est√° totalmente integrado en el TIA Portal pero s√≥lo es soportado por
determinados dispositivos. Por lo tanto, el bot√≥n para iniciar el software de simulaci√≥n s√≥lo est√°
activado si el dispositivo seleccionado soporta la simulaci√≥n.
El software de simulaci√≥n requiere para algunos dispositivos una interfaz virtual propia para
comunicarse con los dispositivos simulados. La interfaz virtual se encuentra en el √°rbol del
proyecto en la r√∫brica "Accesos online" junto a las interfaces f√≠sicas de la progamadora o PC.
Obtendr√° ayuda adicional referente a la simulaci√≥n al abrir el software a trav√©s de un enlace
especial.

Consulte tambi√©n
Iniciar la simulaci√≥n (P√°gina 205)

8.2

Iniciar la simulaci√≥n
Algunos dispositivos se pueden simular con un software adicional. Por ello no es necesario
disponer realmente de los dispositivos para poder comprobar el proyecto exhaustivamente.

Procedimiento
Para iniciar el software de simulaci√≥n, proceda del siguiente modo:
1. Seleccione el dispositivo que desea simular, p. ej. en el √°rbol del proyecto.
2. Elija el comando "Simulaci√≥n > Iniciar" del men√∫ "Online".
Se inicia el software de simulaci√≥n.

Consulte tambi√©n
Simulaci√≥n de dispositivos (P√°gina 205)
Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

205

Simulaci√≥n de dispositivos con S7-PLCSIM
8.2 Iniciar la simulaci√≥n

206

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico
A

D

Abrir listines telef√≥nicos, 145
Acceder desde una instalaci√≥n remota a una
programadora/un PC, 189
Acceso de red
Abrir propiedades, 36
Acceso online, 33
Archivo de informe
mensajes de error del m√≥dem, 202

Denominaci√≥n
TS Adapter, 169
TS Adapter, 152, 161
Deshacer la conexi√≥n remota, 175

B
Borrar certificado CA, 182

C
Carga de CPU por Trace, 124
Cargar la copia de seguridad de un dispositivo
online, 28, 30
Certificado CA, 177
Condiciones necesarias para establecer una
conexi√≥n remota, 174
Conexi√≥n de un TS Adapter con un m√≥dem
externo., 155
Conexi√≥n de un TS Adapter con un m√≥dem
interno., 155
Conexi√≥n online, 13
Conectar varios dispositivos, 20, 21
Definici√≥n de la v√≠a de conexi√≥n est√°ndar, 16
Conexi√≥n por l√≠nea telef√≥nica
Desconectar, 175
Establecer, 174
Conexi√≥n remota
Como conexi√≥n por l√≠nea telef√≥nica, 151
Como conexi√≥n remota controlada por CPU, 188
Como conexi√≥n VPN, 176
Conexi√≥n VPN
Borrar certificado CA, 182
Desconectar, 184
Establecer, 182
Instalar certificado CA, 179

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

E
El TS Adapter no logra conectarse con la estaci√≥n
remota, 198
Establecer conexi√≥n online, 17
Establecimiento de una conexi√≥n desde una
instalaci√≥n remota ("PG_DIAL"), 190
Establecimiento de una conexi√≥n remota, 174
procedimiento, 174

F
Funci√≥n de analizador l√≥gico, 54
Funci√≥n Trace, 54

G
Grabaci√≥n de un archivo de informe para el
m√≥dem, 198
Guardar listines telef√≥nicos, 146

I
Imposible establecer la conexi√≥n remota, 175
Indicaciones generales para la b√∫squeda de
errores, 197
Indicaciones para parametrizar un m√≥dem
remoto, 155
Informaci√≥n importante sobre la parametrizaci√≥n del
TS Adapter MPI, 164
Iniciar la simulaci√≥n, 205
Instalar certificado CA, 179
Instalar el m√≥dem local, 154
Instrucci√≥n de comunicaci√≥n
"AS_DIAL", 191, 192
"AS_MAIL", 194
"PG_DIAL", 189, 190
"SMS_SEND", 193

207

√çndice alfab√©tico

Intercambio de datos a trav√©s del acoplamiento
remoto AS-AS
instrucci√≥n de comunicaci√≥n "AS_DIAL", 191
Interfaz
agregar, 36
Interfaz Ethernet
Visualizar par√°metros, 38
Interfaz PG/PC
Establecer conexi√≥n online, 20
Par√°metros ajustables en la interfaz MPI, 41
Par√°metros ajustables en la interfaz
PROFIBUS, 42

O
O, 13
Online
Deshacer conexi√≥n, 20
Establecer conexi√≥n, 17
Modificar v√≠a de conexi√≥n, 17
Mostrar dispositivos accesibles, 9
Representaci√≥n del modo online, 19

P
L
La conexi√≥n m√≥dem se interrumpe, 202
La conexi√≥n VPN no se establece
Comprobaci√≥n y soluci√≥n, 203
La estaci√≥n remota no logra conectarse con el TS
Adapter, 200
Lista de chequeo en caso de dificultades con el
m√≥dem, 201
List√≠n telef√≥nico en TeleService, 143

M
Mediciones
√Årbol del proyecto, 63
Mensajes de error del m√≥dem
archivo de informe, 202
M√≥dem
local, 154
problemas, 197
remoto, 154
M√≥dems no aptos para plug&play, 154
Modificaci√≥n online de la configuraci√≥n, 11
Modificaci√≥n online de la configuraci√≥n del
dispositivo, 11
Modo online, 13
Establecer conexi√≥n online, 17, 20
Modo de espera o estado de reposo de la PG/el
PC, 13
Visualizaci√≥n del modo online, 15
Mostrar estado online, 19
Mostrar/ocultar interfaces, 35

N
No se establece la conexi√≥n m√≥dem, 202

208

Parametrizaci√≥n de la interfaz Ethernet, 39
Agregar una direcci√≥n IP temporal, 40
Par√°metros modificables, 37
Posibilidades de parametrizaci√≥n, 37
Parametrizaci√≥n de la interfaz PG/PC, 35
Detecci√≥n autom√°tica de los par√°metros del
bus, 42
Parametrizar el m√≥dem remoto, 154
Parametrizar la interfaz Ethernet
Borrar direcciones IP temporales, 40
Conectar con subred, 38
Parametrizar la interfaz PG/PC
Parametrizar la interfaz MPI, 43
Parametrizar la interfaz PROFIBUS, 45
Posibilidades de rellamada en TeleService, 159
Protecci√≥n de acceso
de f√°brica, 156
nivel de protecci√≥n 1, 157
nivel de protecci√≥n 2, 157
validez, 156
ventajas, 156

R
Reglas de marcaci√≥n en listines telef√≥nicos, 149
Rellamada a un n√∫mero indicado al establecer la
conexi√≥n, 159
Requisitos de hardware
instrucci√≥n de comunicaci√≥n "AS_MAIL", 195
instrucci√≥n de comunicaci√≥n "PG_DIAL", 190
instrucci√≥n de comunicaci√≥n "SMS_SEND", 193
Requisitos de hardware para el acoplamiento remoto
AS-AS
instrucci√≥n de comunicaci√≥n "AS_DIAL", 192
Requisitos de software en la instalaci√≥n
instrucci√≥n de comunicaci√≥n "AS_MAIL", 195
instrucci√≥n de comunicaci√≥n "PG_DIAL", 190
instrucci√≥n de comunicaci√≥n "SMS_SEND", 194

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

√çndice alfab√©tico

Requisitos de software en la programadora o en el PC
instrucci√≥n de comunicaci√≥n "PG_DIAL", 191
Requisitos de software para el acoplamiento remoto
AS-AS
instrucci√≥n de comunicaci√≥n "AS_DIAL", 193
Requisitos para enviar un correo electr√≥nico, 194
Requisitos para enviar un mensaje SMS, 193
Requisitos para establecer una conexi√≥n VPN, 183
Restablecer copia de seguridad, 27, 31
Restablecer dispositivo, 27, 31
Restablecer los ajustes MPI o PROFIBUS, 49
Restablecer los ajustes TCP/IP, 41
Resumen de los TS Adapter que pueden
utilizarse, 152

S
Se interrumpe la conexi√≥n m√≥dem, 201
causas y soluci√≥n, 201
S√≠mbolos
en TeleService, 145
Simular dispositivos, 205
Simular hardware, 205
Simular m√≥dulos, 205
Simular software, 205
Sistema de automatizaci√≥n
local, 191
remoto, 191

T
TeleService
abrir el list√≠n telef√≥nico, 145
Acceso a listines telef√≥nicos, 143
AS_DIAL, 191
Capacidad de las redes telef√≥nicas, 153
C√≥mo establecer una conexi√≥n:CPU
S7-1200, 189
Compatibilidad con m√≥dem, 153
Configuraci√≥n del list√≠n telef√≥nico, 144
Definici√≥n de reglas de marcaci√≥n, 149
Definir reglas de marcaci√≥n, 149
Establecer una conexi√≥n con el AS, 191
Exportar el list√≠n telef√≥nico, 148
Funciones, 142
Guardar el list√≠n telef√≥nico, 146
Importar list√≠n telef√≥nico, 146
Imprimir el list√≠n telef√≥nico, 149
Insertar filas en el list√≠n telef√≥nico, 146
Instrucci√≥n de comunicaci√≥n: "AS_DIAL", 142
Instrucci√≥n de comunicaci√≥n: "PG_DIAL", 142

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Instrucci√≥n de comunicaci√≥n: "SMS_SEND", 142
Instrucci√≥n de comunicaci√≥n:"AS_MAIL", 142
Instrucci√≥n de comunicaci√≥n:"TM_MAIL", 142
Instrucci√≥n de comunicaci√≥n:"TMAIL_C", 142
List√≠n telef√≥nico, 143
Mostrar u ocultar columnas en el list√≠n
telef√≥nico, 146
Posibilidades para establecer una conexi√≥n:CPU
S7-1500, 189
Posibilidades para establecer una conexi√≥n:CPU
S7-300/400, 188
Propiedades del list√≠n telef√≥nico, 143
Routers, 153
significado de los s√≠mbolos, 145
Tipos de m√≥dems/medios, 153
Trabajar con el list√≠n telef√≥nico, 143
variantes de rellamada, 156
Trace, 53, 54, (Instante del disparo)
Alineaci√≥n de mediciones superpuestas, 120
Almacenamiento de configuraci√≥n de Trace, 112
almacenamiento de datos, 56
An√°lisis del registro en curso, 109
√Årbol del proyecto, 61
capacidad funcional, 124
Captaci√≥n de variables, 120
carga de CPU, 124
ciclo de registro, 97, 137
Comandos de teclado, 70
Condiciones de registro, 127, 133
Configuraci√≥n de Trace, 55, 112
Creaci√≥n de una configuraci√≥n de Trace, 104
Crear medici√≥n superpuesta, 105
Cursores de medici√≥n, 112
diagrama de curvas, 68
Disparador, 130
Disparo, 138
Dispositivos soportados, 53
duraci√≥n de registro, 137
Estado, 62
Estructuraci√≥n del √°rbol de proyecto en
grupos, 106
Funciones matem√°ticas, 78
Grupo de se√±ales, 116
Guardar mediciones en el dispositivo, 132, 139
gu√≠a de inicio r√°pido, 95
Imprimir, 120
interfaz, 59, 84, 125
Marca de tiempo, 84
medici√≥n, 56, 109, 110
Medici√≥n superpuesta, 56, 65, 81, 118
mediciones en el dispositivo (tarjeta de
memoria), 64

209

√çndice alfab√©tico

muestreo, 97
Niveles de registro, 122
Observar se√±ales r√°pidas, 117
Opciones de representaci√≥n, 74, 98
Paleta Cursores de medici√≥n, 85
Paleta Instant√°neas, 87
Predisparo, 131
Reducci√≥n, 128
registro, 107, 108
Rueda del rat√≥n, 70
Se√±ales, 126
Sincronizaci√≥n horaria, 123
Tabla de se√±ales, 115
Trace en dispositivo, 56
traza de bits, 68
Variable de disparo, 130, 133
Ventana de inspecci√≥n, 84
ver configuraci√≥n de Trace, 104
Ver diagrama, 105
vida √∫til de los valores, 122
Trace del proyecto
√Årbol del proyecto, 90
Condiciones de registro, 127
Dispositivos soportados, 125
Gu√≠a de inicio r√°pido, 100
interfaz, 88, 94, 126
Trace S7-1200/1500, 120
TS Adapter IE
Descripci√≥n, 168
funcionamiento, 169
parametrizaci√≥n est√°ndar, 169
parametrizar, 172, 187
TS Adapter IE Advanced
Descripci√≥n, 184
Parametrizar, 187
Posibilidades de parametrizaci√≥n, 186
Tipos de conexi√≥n, 185
TS Adapter MPI
conexi√≥n directa, 162
conexi√≥n m√≥dem, 163
configuraci√≥n de la conexi√≥n directa, 162
configuraci√≥n de la conexi√≥n m√≥dem, 163
Descripci√≥n, 160
funcionamiento, 161
parametrizar, 165
posibilidades de parametrizaci√≥n, 164
realizar parametrizaci√≥n, 164
restaurar la parametrizaci√≥n est√°ndar, 166
TS Adapter MPI
parametrizaci√≥n est√°ndar, 161
TS Adapter IE Basic
conexi√≥n a la red GSM, 171

210

conexi√≥n a la red telef√≥nica, 170
conexi√≥n a la red telef√≥nica a trav√©s de un m√≥dem
externo, 171
Tipos de conexi√≥n, 169
TS Adapter MPI
crear derechos de acceso, 158
exportar par√°metros del adaptador, 166
importar par√°metros del adaptador, 167

U
Uso de un TS Adapter para TeleService, 151, 176

V
Ventajas del uso de TeleService, 141

Uso de las funciones online y de diagn√≥stico
Manual de programaci√≥n y manejo, 11/2019

Procesamiento de datos de energ√≠a
y optimizaci√≥n de consumo de
energ√≠a
Manual de programaci√≥n

11/2019

Principios b√°sicos de
SIMATIC Energy Suite

1

Suministrar datos de energ√≠a

2

Procesar datos de energ√≠a

3

Almacenar temporalmente y
archivar los datos de energ√≠a

4

Generar el programa de
energ√≠a

5

Visualizar y evaluar datos de
energ√≠a

6

Optimizar el consumo de
energ√≠a

7

Bloques de Energy Suite ‚Äì
Adquisici√≥n

A

Bloques de Energy Suite Gesti√≥n de cargas

B

Notas jur√≠dicas
Filosof√≠a en la se√±alizaci√≥n de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal as√≠ como para la prevenci√≥n de
da√±os materiales. Las informaciones para su seguridad personal est√°n resaltadas con un tri√°ngulo de advertencia;
las informaciones para evitar √∫nicamente da√±os materiales no llevan dicho tri√°ngulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producir√° la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCI√ìN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse da√±os materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad m√°s estricta en cada caso. Si en una
consigna de seguridad con tri√°ngulo de advertencia de alarma de posibles da√±os personales, la misma consigna
puede contener tambi√©n una advertencia sobre posibles da√±os materiales.

Personal cualificado

El producto/sistema tratado en esta documentaci√≥n s√≥lo deber√° ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentaci√≥n correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formaci√≥n y experiencia,
el personal cualificado est√° en condiciones de reconocer riesgos resultantes del manejo o manipulaci√≥n de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens s√≥lo deber√°n usarse para los casos de aplicaci√≥n previstos en el cat√°logo y la
documentaci√≥n t√©cnica asociada. De usarse productos y componentes de terceros, √©stos deber√°n haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalaci√≥n, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. Tambi√©n deber√°n seguirse las indicaciones
y advertencias que figuran en la documentaci√≥n asociada.

Marcas registradas

Todos los nombres marcados con ¬Æ son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilizaci√≥n por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exenci√≥n de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicaci√≥n con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicaci√≥n se revisa peri√≥dicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edici√≥n.

Siemens AG
Digital Industries
Postfach 48 48
90026 N√úRNBERG
ALEMANIA

‚ìÖ 11/2019 Sujeto a cambios sin previo aviso

Copyright ¬© Siemens AG 2019.
Reservados todos los derechos

√çndice
1

2

3

4

Principios b√°sicos de SIMATIC Energy Suite.............................................................................................11
1.1

Gesti√≥n de energ√≠a con SIMATIC Energy Suite.....................................................................11

1.2

Funcionamiento y componentes de SIMATIC Energy Suite ..................................................12

1.3

Descripci√≥n general del procedimiento ..................................................................................15

1.4

Caracter√≠sticas y convenciones .............................................................................................20

Suministrar datos de energ√≠a .....................................................................................................................23
2.1

Informaci√≥n importante sobre los datos de energ√≠a...............................................................23

2.2

Datos de energ√≠a procedentes de hardware de medici√≥n ....................................................25

2.3

Datos de energ√≠a procedentes de la memoria imagen del proceso o del √°rea de marcas
de la CPU S7 .........................................................................................................................27

2.4

Datos de energ√≠a procedentes de bloques de datos .............................................................28

Procesar datos de energ√≠a .........................................................................................................................31
3.1

Objetos de adquisici√≥n y programa de medici√≥n del consumo de energ√≠a............................31

3.2

Crear tabla de objetos de adquisici√≥n....................................................................................33

3.3

Agregar objetos de adquisici√≥n para tablas de objetos de adquisici√≥n .................................33

3.4
3.4.1
3.4.2
3.4.3
3.4.4
3.4.5
3.4.6
3.4.6.1
3.4.6.2
3.4.6.3
3.4.7
3.4.7.1
3.4.7.2
3.4.8
3.4.8.1

Ajuste de las propiedades del objeto de adquisici√≥n .............................................................36
Configuraci√≥n del objeto de adquisici√≥n ................................................................................36
Ajustes b√°sicos ......................................................................................................................37
Informaci√≥n del proyecto........................................................................................................38
Identification & Maintenance ..................................................................................................38
Modificaci√≥n de la habilitaci√≥n de los objetos de adquisici√≥n para el programa de energ√≠a......39
Fuente de datos de energ√≠a ...................................................................................................40
Asignar fuente de datos de energ√≠a .......................................................................................40
Fuente de datos de energ√≠a ...................................................................................................41
Tipo de datos de energ√≠a .......................................................................................................43
Valores de energ√≠a peri√≥dicos ...............................................................................................46
Especificar valores de energ√≠a para archivado peri√≥dico ......................................................46
Datos de energ√≠a peri√≥dicos ..................................................................................................47
Procesamiento .......................................................................................................................49
Ajustes de procesamiento generales .....................................................................................49

Almacenar temporalmente y archivar los datos de energ√≠a .......................................................................53
4.1

Definir per√≠odos de archivado ................................................................................................53

4.2

Per√≠odos de archivado ...........................................................................................................54

4.3

Definir archivado en CPU S7 (SIMATIC Memory Card) ........................................................56

4.4

Archivado y respaldo (CPU S7) .............................................................................................57

4.5

Ejemplo para archivado (CPU S7) .........................................................................................59

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

3

√çndice

5

6

4

4.6

Definir archivado en estaci√≥n PC con WinCC Professional (fichero de variables) ................59

4.7

Archivado y respaldo (WinCC Professional) ..........................................................................61

4.8

Ejemplo de archivado y respaldo (WinCC Professional) .......................................................64

Generar el programa de energ√≠a ................................................................................................................67
5.1

Definir los ajustes generales para el programa de energ√≠a ...................................................67

5.2

Ajustes generales...................................................................................................................68

5.3

Licencias Runtime para Energy Suite ...................................................................................68

5.4

Generar el programa de energ√≠a............................................................................................70

5.5
5.5.1
5.5.2
5.5.3
5.5.4
5.5.5
5.5.6
5.5.6.1
5.5.6.2
5.5.6.3
5.5.6.4
5.5.6.5

Estructura del programa de energ√≠a ......................................................................................74
Estructura del programa de energ√≠a ......................................................................................74
EnS - block types ...................................................................................................................75
Bloques de programa EnS .....................................................................................................78
EnS - Objetos de adquisici√≥n.................................................................................................81
Energy Suite: tipos de datos ..................................................................................................82
Bloques de drivers para hardware de medici√≥n.....................................................................84
Estructura del programa de energ√≠a para hardware de medici√≥n..........................................84
Procesamiento de datos de energ√≠a seg√∫n el principio "EPS" ..............................................84
√Årea: Entrada .........................................................................................................................86
√Årea: Procesamiento..............................................................................................................86
√Årea: Salida............................................................................................................................88

5.6

Compilar y cargar programa de PLC .....................................................................................90

5.7

Probar el programa de energ√≠a ..............................................................................................90

5.8

Editar programa de PLC sin instalaci√≥n de Energy Suite ......................................................92

5.9

Programa de PLC sin librer√≠a de hardware de medici√≥n con bloques de drivers ..................93

Visualizar y evaluar datos de energ√≠a ........................................................................................................95
6.1

Descripci√≥n general del procedimiento para archivado y visualizaci√≥n con WinCC
Professional ...........................................................................................................................95

6.2

Valores de energ√≠a en estaci√≥n PC con WinCC Professional ...............................................97

6.3

Mostrar valores de energ√≠a para archivado en WinCC Professional .....................................97

6.4

Resumen de los datos de energ√≠a .........................................................................................99

6.5

Crear estructura de archivado para valores de energ√≠a.......................................................100

6.6

Fichero de variables y segmentaci√≥n para Energy Suite.....................................................102

6.7

Archivar datos de energ√≠a ....................................................................................................103

6.8
6.8.1
6.8.2

Creaci√≥n de im√°genes para Energy Suite con SiVArc.........................................................104
Creaci√≥n de reglas de imagen SiVArc y copia de reglas para Energy Suite .......................104
Generaci√≥n de im√°genes para Energy Suite .......................................................................105

6.9

Visualizaci√≥n de los datos de energ√≠a con WinCC Online Trend View................................107

6.10

Evaluaci√≥n de los datos de energ√≠a con Energy Suite Export Tool .....................................107

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

√çndice

7

A

Optimizar el consumo de energ√≠a.............................................................................................................115
7.1

Gesti√≥n de cargas con Energy Suite....................................................................................115

7.2

Descripci√≥n general del procedimiento de gesti√≥n de cargas..............................................116

7.3

Caracter√≠sticas y convenciones ...........................................................................................118

7.4
7.4.1
7.4.2
7.4.3
7.4.4
7.4.4.1
7.4.4.2
7.4.5
7.4.6
7.4.7
7.4.7.1
7.4.7.2

Optimizar el consumo de energ√≠a ........................................................................................120
Programa de energ√≠a para la gesti√≥n de cargas..................................................................120
Activaci√≥n de la funci√≥n de previsi√≥n de un objeto de adquisici√≥n ......................................122
Crear un sistema de gesti√≥n de cargas ...............................................................................123
Configurar las propiedades de un sistema de gesti√≥n de cargas ........................................124
Parametrizar un sistema de gesti√≥n de cargas....................................................................124
Ajustes generales.................................................................................................................126
Configuraci√≥n de los par√°metros de la gesti√≥n de cargas con ayuda de elementos de
librer√≠a ..................................................................................................................................127
Agregar actuadores .............................................................................................................130
Ajustar las propiedades del actuador...................................................................................131
Parametrizar actuadores......................................................................................................131
Ajustes generales.................................................................................................................132

7.5
7.5.1
7.5.2
7.5.2.1
7.5.2.2
7.5.2.3
7.5.2.4
7.5.2.5
7.5.2.6

Generar un programa de energ√≠a para la gesti√≥n de cargas ...............................................133
Generar programas de energ√≠a............................................................................................133
Estructura del programa de energ√≠a ....................................................................................137
Estructura del programa de energ√≠a ....................................................................................137
EnS - block types .................................................................................................................137
EnS - acquisition objects......................................................................................................139
EnS - program blocks...........................................................................................................140
LMGT - systems...................................................................................................................140
Energy Suite data types .......................................................................................................141

Bloques de Energy Suite ‚Äì Adquisici√≥n....................................................................................................145
A.1

Sinopsis de los bloques de Energy Suite para la adquisici√≥n..............................................145

A.2
A.2.1
A.2.1.1
A.2.1.2
A.2.1.3
A.2.1.4
A.2.2
A.2.2.1
A.2.2.2
A.2.2.3
A.2.2.4
A.2.2.5
A.2.3
A.2.3.1
A.2.3.2
A.2.3.3
A.2.4
A.2.4.1
A.2.4.2
A.2.4.3

Bloques de funci√≥n (FB).......................................................................................................149
EnS_ArchiveDataLog: Escribir valores de energ√≠a en Data Logs........................................149
Descripci√≥n EnS_ArchiveDataLog .......................................................................................149
Par√°metro EnS_ArchiveDataLog .........................................................................................150
Par√°metro Status .................................................................................................................153
Avisos EnS_ArchiveDataLog ...............................................................................................155
EnS_ArchiveHMI: Escribir valores de energ√≠a en fichero de variables ................................158
Descripci√≥n EnS_ArchiveHMI ..............................................................................................158
Componente WinCC Professional .......................................................................................160
Par√°metro EnS_ArchiveHMI ................................................................................................161
Par√°metro Status .................................................................................................................162
Avisos EnS_ArchiveHMI ......................................................................................................163
EnS_BufferRead: Leer valores de energ√≠a de bloques de datos .........................................165
Descripci√≥n EnS_BufferRead...............................................................................................165
Par√°metro - EnS_BufferRead ..............................................................................................166
Par√°metro Status .................................................................................................................167
EnS_BufferWrite: Escribir valores de energ√≠a en bloques de datos ....................................167
Descripci√≥n EnS_BufferWrite...............................................................................................167
Par√°metro EnS_BufferWrite.................................................................................................168
Par√°metro Status .................................................................................................................169

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

5

√çndice

A.2.5
A.2.5.1
A.2.5.2
A.2.5.3
A.2.6
A.2.6.1
A.2.6.2
A.2.6.3
A.2.6.4
A.2.7
A.2.7.1
A.2.7.2
A.2.7.3
A.2.7.4
A.2.8
A.2.8.1
A.2.8.2
A.2.8.3
A.2.8.4
A.2.9
A.2.9.1
A.2.9.2
A.2.9.3
A.2.9.4
A.2.10
A.2.10.1
A.2.10.2
A.2.10.3
A.2.11

6

A.2.11.1
A.2.11.2
A.2.11.3
A.2.12
A.2.12.1
A.2.12.2
A.2.12.3
A.2.12.4
A.2.13
A.2.13.1
A.2.13.2
A.2.14
A.2.14.1
A.2.14.2
A.2.14.3

EnS_CalcEnergyData: Calcular valores de energ√≠a ............................................................170
Descripci√≥n EnS_CalcEnergyData.......................................................................................170
Par√°metro EnS_CalcEnergyData.........................................................................................174
Par√°metro Status .................................................................................................................174
EnS_DrvAnalogValue: Adquirir valores de potencia del tipo REAL .....................................176
Descripci√≥n EnS_DrvAnalogValue.......................................................................................176
Par√°metro EnS_DrvAnalogValue.........................................................................................176
Par√°metro Status .................................................................................................................177
Avisos EnS_DrvAnalogValue ...............................................................................................177
EnS_DrvCounterLInt: Adquirir valores de contador de energ√≠a del tipo LINT......................178
Descripci√≥n EnS_DrvCounterLInt ........................................................................................178
Par√°metro EnS_DrvCounterLInt ..........................................................................................178
Par√°metro Status .................................................................................................................179
Avisos EnS_DrvCounterLInt.................................................................................................179
EnS_DrvCounterLReal: Adquirir valores de contador de energ√≠a del tipo LREAL...............180
Descripci√≥n EnS_DrvCounterLReal .....................................................................................180
Par√°metro EnS_DrvCounterLReal .......................................................................................180
Par√°metro Status .................................................................................................................181
Avisos EnS_DrvCounterLReal .............................................................................................181
EnS_DrvPulse: Adquirir se√±ales de impulso........................................................................182
Descripci√≥n EnS_DrvPulse ..................................................................................................182
Par√°metro EnS_DrvPulse ....................................................................................................182
Par√°metro Status .................................................................................................................183
Avisos EnS_DrvPulse ..........................................................................................................184
EnS_EnergyDataAdv: Poner a disposici√≥n valores de energ√≠a avanzados.........................184
Descripci√≥n EnS_EnergyDataAdv........................................................................................184
Par√°metro EnS_EnergyDataAdv..........................................................................................185
Par√°metro Status .................................................................................................................185
EnS_EnergyDataAdvMinMax: Poner a disposici√≥n valores m√≠nimos y m√°ximos
avanzados............................................................................................................................185
Descripci√≥n EnS_EnergyDataAdvMinMax ...........................................................................185
Par√°metro EnS_EnergyDataAdvMinMax .............................................................................186
Par√°metro Status .................................................................................................................186
EnS_EnergyDataBasic: Poner a disposici√≥n metadatos y valores de energ√≠a ....................187
Descripci√≥n EnS_EnergyDataBasic .....................................................................................187
Par√°metro EnS_EnergyDataBasic .......................................................................................187
Par√°metro Status .................................................................................................................188
Avisos EnS_EnergyDataBasic .............................................................................................188
EnS_Organization: Poner a disposici√≥n datos de organizaci√≥n...........................................191
Descripci√≥n EnS_Organization ............................................................................................191
Par√°metro EnS_Organization ..............................................................................................192
EnS_TimeSync: Sincronizar horas.......................................................................................192
Descripci√≥n EnS_TimeSync.................................................................................................192
Par√°metro EnS_TimeSync...................................................................................................194
Par√°metro Status .................................................................................................................195

A.3
A.3.1
A.3.1.1
A.3.1.2
A.3.2
A.3.2.1
A.3.2.2

Bloques de datos (DB) .........................................................................................................197
EnS_BufferDB ......................................................................................................................197
Descripci√≥n EnS_BufferDB ..................................................................................................197
Estructura EnS_BufferDB.....................................................................................................198
EnS_BufferWorkDB..............................................................................................................198
Descripci√≥n EnS_BufferWorkDB..........................................................................................198
Estructura EnS_BufferWorkDB ............................................................................................198

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

√çndice

A.4
A.4.1
A.4.1.1
A.4.1.2
A.4.2
A.4.2.1
A.4.2.2
A.4.3
A.4.3.1
A.4.3.2
A.4.4
A.4.4.1
A.4.4.2
A.4.5
A.4.5.1
A.4.5.2
A.4.6
A.4.6.1
A.4.6.2
A.4.7
A.4.7.1
A.4.7.2
A.4.8
A.4.8.1
A.4.8.2
A.4.9
A.4.9.1
A.4.9.2
A.4.10
A.4.10.1
A.4.10.2
A.4.11
A.4.11.1
A.4.11.2
A.4.12
A.4.12.1
A.4.12.2
A.4.13
A.4.13.1
A.4.13.2
A.4.14
A.4.14.1
A.4.14.2
A.4.15
A.4.15.1
A.4.15.2

Tipos de datos definidos por el usuario (UDT).....................................................................199
EnS_typeAnalogValue .........................................................................................................199
Descripci√≥n EnS_typeAnalogValue......................................................................................199
Estructura EnS_typeAnalogValue ........................................................................................199
EnS_typeBufferReadCtrl ......................................................................................................199
Descripci√≥n EnS_typeBufferReadCtrl ..................................................................................199
Estructura EnS_typeBufferReadCtrl.....................................................................................199
EnS_typeBufferReadStat .....................................................................................................200
Descripci√≥n EnS_typeBufferReadStat .................................................................................200
Estructura EnS_typeBufferReadStat....................................................................................200
EnS_typeBufferWork............................................................................................................200
Descripci√≥n EnS_typeBufferWork ........................................................................................200
Estructura EnS_typeBufferWork ..........................................................................................201
EnS_typeBufferWriteCtrl ......................................................................................................202
Descripci√≥n EnS_typeBufferWriteCtrl ..................................................................................202
Estructura EnS_typeBufferWriteCtrl.....................................................................................202
EnS_typeBufferWriteStat .....................................................................................................202
Descripci√≥n EnS_typeBufferWriteStat..................................................................................202
Estructura EnS_typeBufferWriteStat ....................................................................................202
EnS_typeEnergyAdv ............................................................................................................203
Descripci√≥n EnS_typeEnergyAdv ........................................................................................203
Estructura EnS_typeEnergyAdv...........................................................................................203
EnS_typeEnergyBasic..........................................................................................................204
Descripci√≥n EnS_typeEnergyBasic......................................................................................204
Estructura EnS_typeEnergyBasic ........................................................................................204
EnS_typeEnergyCounter......................................................................................................205
Descripci√≥n EnS_typeEnergyCounter..................................................................................205
Estructura EnS_typeEnergyCounter ....................................................................................205
EnS_typeEnergyMeta ..........................................................................................................205
Descripci√≥n EnS_typeEnergyMeta.......................................................................................205
Estructura EnS_typeEnergyMeta .........................................................................................206
EnS_typeHMIWriteCtrl .........................................................................................................208
Descripci√≥n EnS_typeHMIWriteCtrl .....................................................................................208
Estructura EnS_typeHMIWriteCtrl........................................................................................209
EnS_typeHMIWriteStat ........................................................................................................209
Descripci√≥n EnS_typeHMIWriteStat.....................................................................................209
Estructura EnS_typeHMIWriteStat .......................................................................................209
EnS_typeOrgData ................................................................................................................210
Descripci√≥n EnS_typeOrgData ............................................................................................210
Estructura EnS_typeOrgData...............................................................................................210
EnS_typeSync......................................................................................................................210
Descripci√≥n EnS_typeSync ..................................................................................................210
Estructura EnS_typeSync ....................................................................................................211
EnS_typeValue.....................................................................................................................211
Descripci√≥n EnS_typeValue.................................................................................................211
Estructura EnS_typeValue ...................................................................................................211

A.5
A.5.1
A.5.2

Definici√≥n de las enumeraciones .........................................................................................212
Enumeraci√≥n para el tipo de conexi√≥n del medidor .............................................................212
Enumeraci√≥n para unidades ................................................................................................212

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

7

√çndice

B

8

Bloques de Energy Suite - Gesti√≥n de cargas..........................................................................................215
B.1

Sinopsis de los bloques de Energy Suite para la gesti√≥n de cargas ..................................215

B.2
B.2.1
B.2.1.1
B.2.1.2
B.2.1.3
B.2.2
B.2.2.1
B.2.2.2
B.2.2.3
B.2.3
B.2.3.1
B.2.3.2
B.2.3.3
B.2.3.4
B.2.4
B.2.4.1
B.2.4.2
B.2.4.3

Bloques de funci√≥n...............................................................................................................218
EnS_LmgtForecast_x ...........................................................................................................218
Descripci√≥n de EnS_LmgtForecast_x ..................................................................................218
Par√°metro EnS_LmgtForecast_x .........................................................................................219
Par√°metro status..................................................................................................................219
EnS_LmgtControl_Peak .......................................................................................................219
Descripci√≥n del bloque EnS_LmgtControl_Peak..................................................................219
Par√°metro EnS_LmgtControl_Peak .....................................................................................225
Par√°metro status..................................................................................................................225
EnS_LmgtActor_x.................................................................................................................226
Descripci√≥n de EnS_LmgtActor_x........................................................................................226
Par√°metro EnS_LmgtActor_x...............................................................................................234
Par√°metro status..................................................................................................................234
Concepto de peticiones: secuencia de desescalada/escalada............................................235
EnS_LmgtBackupRestore ....................................................................................................242
Descripci√≥n de EnS_LmgtBackupRestore ...........................................................................242
Par√°metro EnS_LmgtBackupRestore ..................................................................................246
Par√°metro status..................................................................................................................247

B.3
B.3.1
B.3.1.1
B.3.1.2
B.3.2
B.3.2.1
B.3.2.2

Bloques de datos .................................................................................................................247
EnS_LmgtGeneralData ........................................................................................................247
Descripci√≥n de EnS_LmgtGeneralData ...............................................................................247
Estructura de EnS_LmgtGeneralData..................................................................................247
EnS_LmgtActorList...............................................................................................................248
Descripci√≥n de EnS_LmgtActorList......................................................................................248
Estructura de EnS_LmgtActorList ........................................................................................248

B.4
B.4.1
B.4.1.1
B.4.1.2
B.4.2
B.4.2.1
B.4.2.2
B.4.3
B.4.3.1
B.4.3.2
B.4.4
B.4.4.1
B.4.4.2
B.4.5
B.4.5.1
B.4.5.2
B.4.6
B.4.6.1
B.4.6.2
B.4.7
B.4.7.1
B.4.7.2
B.4.8

Tipos de datos definidos por el usuario (UDT).....................................................................248
EnS_typeActorElement ........................................................................................................248
Descripci√≥n de EnS_typeActorElement ...............................................................................248
Estructura de EnS_typeActorElement..................................................................................249
EnS_typeLmgtActorMeta .....................................................................................................249
Descripci√≥n de EnS_typeLmgtActorMeta.............................................................................249
Estructura de EnS_typeLmgtActorMeta ...............................................................................249
EnS_typeLmgtActorParameter.............................................................................................250
Descripci√≥n de EnS_typeLmgtActorParameter....................................................................250
Estructura de EnS_typeLmgtActorParameter ......................................................................250
EnS_typeLmgtActorParameterSet .......................................................................................251
Descripci√≥n de EnS_typeLmgtActorParameterSet ..............................................................251
Estructura de EnS_typeLmgtActorParameterSet.................................................................251
EnS_typeLmgtActorStatus ...................................................................................................251
Descripci√≥n de EnS_typeLmgtActorStatus ..........................................................................251
Estructura de EnS_typeLmgtActorStatus.............................................................................252
EnS_typeLmgtActorStatusInOut ..........................................................................................252
Descripci√≥n de EnS_typeLmgtActorStatusInOut..................................................................252
Estructura de EnS_typeLmgtActorStatusInOut ....................................................................253
EnS_typeLmgtAlarmElement ...............................................................................................253
Descripci√≥n de EnS_typeLmgtAlarmElement ......................................................................253
Estructura de EnS_typeLmgtAlarmElement.........................................................................254
EnS_typeLmgtControlLimitConfig ........................................................................................254

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

√çndice

B.4.8.1
B.4.8.2
B.4.9
B.4.9.1
B.4.9.2
B.4.10
B.4.10.1
B.4.10.2
B.4.11
B.4.11.1
B.4.11.2
B.4.12
B.4.12.1
B.4.12.2
B.4.13
B.4.13.1
B.4.13.2
B.4.14
B.4.14.1
B.4.14.2
B.4.15
B.4.15.1
B.4.15.2
B.4.16
B.4.16.1
B.4.16.2
B.4.17
B.4.17.1
B.4.17.2
B.4.18
B.4.18.1
B.4.18.2
B.4.19
B.4.19.1
B.4.19.2
B.4.20
B.4.20.1
B.4.20.2
B.4.21
B.4.21.1
B.4.21.2

Descripci√≥n de EnS_typeLmgtControlLimitConfig ...............................................................254
Estructura de EnS_typeLmgtControlLimitConfig..................................................................254
EnS_typeLmgtControlParameters........................................................................................255
Descripci√≥n de EnS_typeLmgtControlParameters...............................................................255
Estructura de EnS_typeLmgtControlParameters .................................................................255
EnS_typeLmgtControlParameterSet ....................................................................................255
Descripci√≥n de EnS_typeLmgtControlParameterSet ...........................................................255
Estructura de EnS_typeLmgtControlParameterSet..............................................................256
EnS_typeLmgtControlTimeConfig........................................................................................256
Descripci√≥n de EnS_typeLmgtControlTimeConfig ...............................................................256
Estructura de EnS_typeLmgtControlTimeConfig .................................................................256
EnS_typeLmgtForecastValues.............................................................................................257
Descripci√≥n de EnS_typeLmgtForecastValues ....................................................................257
Estructura de EnS_typeLmgtForecastValues ......................................................................257
EnS_typeLmgtGeneralData .................................................................................................257
Descripci√≥n de EnS_typeLmgtGeneralData.........................................................................257
Estructura de EnS_typeLmgtGeneralData ...........................................................................258
EnS_typeLmgtJobFeedbackElement ...................................................................................258
Descripci√≥n de EnS_typeLmgtJobFeedbackElement ..........................................................258
Estructura de EnS_typeLmgtJobFeedbackElement.............................................................259
EnS_typeLmgtJobRequestElement .....................................................................................259
Descripci√≥n de EnS_typeLmgtJobRequestElement.............................................................259
Estructura de EnS_typeLmgtJobRequestElement ...............................................................259
EnS_typeLmgtJobRequestStack..........................................................................................260
Descripci√≥n de EnS_typeLmgtJobRequestStack.................................................................260
Estructura de EnS_typeLmgtJobRequestStack ...................................................................260
EnS_typeLmgtJobTaskElement ...........................................................................................260
Descripci√≥n de EnS_typeLmgtJobTaskElement ..................................................................260
Estructura de EnS_typeLmgtJobTaskElement.....................................................................261
EnS_typeLmgtJobTaskStack ...............................................................................................261
Descripci√≥n de EnS_typeLmgtJobTaskStack ......................................................................261
Estructura de EnS_typeLmgtJobTaskStack.........................................................................261
EnS_typeLmgtOrganisation .................................................................................................262
Descripci√≥n de EnS_typeLmgtOrganisation.........................................................................262
Estructura de EnS_typeLmgtOrganisation ...........................................................................262
EnS_typeLmgtTriggerBR .....................................................................................................262
Descripci√≥n de EnS_typeLmgtTriggerBR.............................................................................262
Estructura de EnS_typeLmgtTriggerBR ...............................................................................263
EnS_typeLmgtVisualization..................................................................................................263
Descripci√≥n de EnS_typeLmgtVisualization.........................................................................263
Estructura de EnS_typeLmgtVisualization ...........................................................................263

√çndice alfab√©tico........................................................................................................................................265

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

9

√çndice

10

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

Principios b√°sicos de SIMATIC Energy Suite
1.1

1

Gesti√≥n de energ√≠a con SIMATIC Energy Suite

Gesti√≥n de energ√≠a
El incremento global del coste de la energ√≠a, sumado a la obligaci√≥n legal de alcanzar una serie
de objetivos clim√°ticos de √°mbito mundial, est√° haciendo que las instalaciones industriales
dediquen cada vez m√°s esfuerzos a la adquisici√≥n de datos de energ√≠a y a la gesti√≥n de la
energ√≠a. El primer paso hacia una gesti√≥n sostenible de la energ√≠a consiste en identificar los
principales flujos de energ√≠a y consumidores de una empresa o planta de producci√≥n, y
analizar sus pautas de consumo. Esto es lo que se denomina "transparencia energ√©tica".
La adquisici√≥n de datos de energ√≠a comienza con la definici√≥n de una serie de medidas
encaminadas a mejorar la eficiencia energ√©tica. A continuaci√≥n, esas medidas se implantan
siguiendo el orden que resulte m√°s efectivo desde el punto de vista t√©cnico y econ√≥mico. El
orden de implantaci√≥n viene determinado por dos factores: "Potencial de ahorro" y "Coste de
implantaci√≥n". As√≠, por ejemplo, las medidas que presentan un potencial de ahorro medio y un
coste bajo tienen preferencia sobre las medidas con un potencial alto pero un coste tambi√©n
alto.
Otros aspecto son los requisitos legales. La normativa exige la vigilancia de las emisiones y la
elaboraci√≥n de informes peri√≥dicos. Los datos de energ√≠a adquiridos permiten lograr la
transparencia energ√©tica en toda la empresa y un perfecto equilibrio de energ√≠a y materias
primas.
Adem√°s de recopilar datos de energ√≠a, una buena gesti√≥n de la energ√≠a requiere visualizar y
archivar esos datos, as√≠ como calcular indicadores clave y elaborar estad√≠sticas energ√©ticas.
Adem√°s de la gesti√≥n de la energ√≠a, resulta imprescindible optimizar el consumo de energ√≠a de
acuerdo con los datos de energ√≠a adquiridos.

SIMATIC Energy Suite en STEP 7 y WinCC (TIA Portal)
Gracias a los componentes de SIMATIC Energy Suite, en adelante llamado Energy Suite, las
principales tareas de la gesti√≥n de la energ√≠a se integran en el propio sistema de
automatizaci√≥n. La configuraci√≥n se realiza de manera sencilla y c√≥moda, directamente en el
TIA Portal (STEP 7 y WinCC).
Energy Suite adquiere, archiva y pone a disposici√≥n los datos de energ√≠a en la CPU de manera
estandarizada. A continuaci√≥n, el usuario puede visualizar esos datos y utilizarlos en su
programa de automatizaci√≥n (p. ej., para vigilancia).
En Energy Suite puede optimizar adicionalmente el consumo de energ√≠a de acuerdo con los
bloques de gesti√≥n de cargas introducidos.
Para visualizar en WinCC Professional o en WinCC Basic, Comfort bzw. Advanced los datos
de energ√≠a adquiridos, Siemens Industry Online Support dispone de im√°genes plantilla y
elementos gr√°ficos.

Procesamiento de datos de energ√≠a y optimizaci√≥n de consumo de energ√≠a
Manual de programaci√≥n, 11/2019

11

Principios b√°sicos de SIMATIC Energy Suite
1.2 Funcionamiento y componentes de SIMATIC Energy Suite
Asimismo, los datos de energ√≠a pueden procesarse posteriormente en SIMATIC Energy
Manager:
‚óè para calcular indicadores clave, p. ej., el coste energ√©tico por unidad producida, o las
emisiones anuales de CO2
‚óè para elaborar c√≥modamente estad√≠sticas energ√©ticas, p. ej., con el fin de optimizar la
adquisici√≥n de energ√≠a

Procesamiento posterior de datos de energ√≠a con SIMATIC Energy Manager
La informaci√≥n de configuraci√≥n de Energy Suite puede utilizarse directamente en SIMATIC
Energy Manager , lo que evita tareas de configuraci√≥n adicionales. SIMATIC Energy Manager,
en adelante llamado Energy Manager , ofrece principalmente funciones para la gesti√≥n
comercial del consumo de energ√≠a en toda la empresa. Para poder optimizar el consumo de
energ√≠a, los principales flujos de energ√≠a de la empresa deben ser transparentes.
Con Energy Manager puede elaborar balances de energ√≠a y materias primas o calcular
indicadores clave. Los indicadores clave (Key Performance Indicators o KPI) permiten evaluar
y comparar desde el punto de vista de la energ√≠a distintos procesos e instalaciones. La
evaluaci√≥n y comparaci√≥n se denomina tambi√©n "benchmarking". La asignaci√≥n de los costes
energ√©ticos a los consumidores reales conduce a la transparencia de los costes y a la
sensibilizaci√≥n de los empleados sobre el consumo energ√©tico de m√°quinas, procesos e
instalaciones.
Encontrar√° m√°s informaci√≥n sobre Energy Manager en el Siemens Industry Online Support
(https://support.industry.siemens.com/cs/ww/es/ps/14711).

1.2

Funcionamiento y componentes de SIMATIC Energy S