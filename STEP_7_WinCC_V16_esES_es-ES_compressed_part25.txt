bién
Cargar bloques en una Memory Card (Página 8404)

19.4.8

Desactivar la cadena secuencial antes de cargar un bloque de datos GRAPH
La cadena secuencial puede desactivarse globalmente antes de cargar un bloque de datos de
instancia de o bien durante el proceso de carga.

8406

Programación del PLC
Manual de programación y manejo, 11/2019

Compilación y carga de programas de PLC
19.5 Cargar variables PLC

Desactivar la cadena secuencial globalmente
Para desactivar globalmente la cadena secuencial para cada proceso de carga de un bloque
de datos de instancia, proceda del siguiente modo:
1. Elija el comando "Configuración" del menú "Opciones".
Se abre la ventana "Configuración" en el área de trabajo.
2. En la navegación local, seleccione el grupo "Programación PLC > GRAPH".
3. Active la casilla de verificación "Desactivar cadena antes de cargar el DB".
En procesos de carga futuros, la cadena secuencial se desactivará antes de cargar el
bloque de datos de instancia.

Desactivar la cadena secuencial durante el proceso de carga
Para desactivar la cadena secuencial durante el proceso de carga, proceda del siguiente
modo:
1. Cargue el bloque de función GRAPH en el dispositivo.
Durante el proceso de carga se muestra el cuadro de diálogo "Cargar vista preliminar". En
él se muestran avisos y se proponen acciones necesarias para la carga. Si hay que cargar
el bloque de datos de instancia junto con el bloque de función GRAPH, se mostrará la
acción "Desactivar cadena antes de cargar el DB" en el cuadro de diálogo "Cargar vista
preliminar".
2. Active la casilla de verificación "Desactivar cadena antes de cargar el DB".

19.5

Cargar variables PLC

19.5.1

Introducción a la carga de variables PLC

Introducción
Igual que los bloques, las variables PLC pueden cargarse en un dispositivo y volver a cargarse
en un proyecto desde un dispositivo. Si se selecciona una tabla de variables PLC en el árbol
del proyecto, estará disponible el comando "Cargar en dispositivo > Software (solo cambios)".
La carga puede ejecutarse tanto con el comando del menú "Online" como desde el menú
contextual o mediante el botón "Cargar" de la barra de herramientas.
Si se inicia la carga en dispositivo desde otro objeto, p. ej. desde la carpeta de bloques, las
tablas de variables siempre se cargan también de forma coherente.
Esta función es soportada por los siguientes dispositivos:
● CPU S7-1200
● CPU S7-1500
En una S7-1500 a partir de la versión de firmware V2.5, además de las variables PLC también
se carga en la CPU la información que indica a qué tabla de variables PLC pertenecen las
variables.

Programación del PLC
Manual de programación y manejo, 11/2019

8407

Compilación y carga de programas de PLC
19.5 Cargar variables PLC
En dispositivos que no soportan esta función, el comando no está disponible.

Reglas para cargar en dispositivo tablas de variables PLC (solo S7-1500 a partir de V2.5)
Las tablas de variables disponibles offline pueden cargarse en la CPU en la estructura
especificada.
Se aplican las reglas siguientes:
● Para cargar variables PLC se aplican los mismos requisitos y procedimientos que para
cargar bloques.
● Si al cargar se detectan incoherencias en variables PLC, se muestra el cuadro de diálogo
de sincronización. Para garantizar la coherencia dentro de un proyecto editado de forma
común es necesario sincronizar los datos modificados antes de cargarlos para que no se
sobrescriban accidentalmente. En ese caso se muestran los datos que deben sincronizarse
con el estado actual (comparación offline/online) y las acciones posibles. A través del editor
de comparación se puede realizar un seguimiento de qué variables han cambiado y en qué
tabla de variables. Las variables siempre se comparan partiendo del nombre. En caso de
conflicto, el usuario en cuestión debe decidir qué variables desea conservar y cargar.
Consulte también:
● Comparar variables PLC (Página 8448)
● Cargar bloques en un dispositivo desde el árbol del proyecto (Página 8378)
● Cargar bloques en una Memory Card (Página 8382)

Reglas para cargar tablas de variables PLC desde un dispositivo (solo S7-1500 a partir de V2.5)
Las tablas de variables disponibles offline pueden cargarse en la CPU en la estructura
especificada.
Se aplican las reglas siguientes:
● Para cargar variables PLC de un dispositivo se aplican los mismos requisitos y
procedimientos que para cargar bloques.
● Al cargar tablas de variables PLC desde un dispositivo hay que tener en cuenta las
siguientes particularidades:
– Las variables que existen online y offline con el mismo nombre se sobrescriben offline.
– Las variables que solo existen online se conservan sin cambios.
– Las variables que solo existen online se crean offline.
– Las variables que existen online en otra tabla de variables se insertan en la tabla que se
carga del dispositivo y se borran de la otra tabla.
Consulte también:
● Cargar bloques de un dispositivo (Página 8381)
● Cargar bloques de una Memory Card (Página 8384)

8408

Programación del PLC
Manual de programación y manejo, 11/2019

Compilación y carga de programas de PLC
19.5 Cargar variables PLC

Ejemplo para cargar tablas de variables PLC desde un dispositivo (solo S7-1500 a partir de V2.5)
El siguiente ejemplo facilita la compresión del comportamiento del sistema al cargar tablas de
variables desde un dispositivo cuando estas son distintas online y offline:
● La variable "Tag_A" solo existe offline en la tabla de variables 1.
● La variable "Tag_A" solo existe online en la tabla de variables 2.
Resultado al cargar la tabla de variables 1 del dispositivo:
● "Tag_A" solo existe offline en la tabla de variables 1 y por eso tras la carga permanece
invariable en la tabla de variables 1.
Resultado al cargar la tabla de variables 2 del dispositivo:
● "Tag_A" solo existe online en la tabla de variables 2 y por eso tras la carga se agrega a la
tabla de variables 2 y se borra de la tabla de variables 1.

Consulte también
Comparar variables PLC (Página 8448)
Cargar bloques en un dispositivo desde el árbol del proyecto (Página 8378)
Cargar bloques de un dispositivo (Página 8381)
Cargar bloques de una Memory Card (Página 8384)
Cargar bloques en una Memory Card (Página 8382)
Visibilidad de variables PLC online/offline (Página 8409)

19.5.2

Visibilidad de variables PLC online/offline

Introducción
Igual que los bloques, las tablas de variables PLC pueden cargarse en un dispositivo y volver
a cargarse en un proyecto desde un dispositivo.
Dependiendo de si las tablas de variables solo existen offline o también online, se visualizarán
de forma diferente en el TIA Portal.

Programación del PLC
Manual de programación y manejo, 11/2019

8409

Compilación y carga de programas de PLC
19.5 Cargar variables PLC

Visibilidad de tablas de variables PLC (solo S7-1500 a partir de V2.5)
En el TIA Portal las tablas de variables PLC se visualizan del siguiente modo:
Visualización de tablas
de variables PLC

Visibilidad

Vista offline en el

Los datos offline se visualizan de forma perma‐ Pueden abrirse y editarse en el editor.
nente siempre que existan.
Pueden cargarse en y de dispositivos y Memory
Después de realizar una carga de dispositivo, Cards.
los datos online también son visibles offline. No
obstante, puede haber diferencias, ya que des‐
pués de cargar desde un dispositivo solo se
conservan las variables existentes offline.

árbol del proyecto

Vista online en el

Los datos online se muestran en modo online.

árbol del proyecto

Los datos online también se muestran offline si
no hay ninguna tabla de variables correspon‐
diente offline.

En los dispositivos acce‐ Después de la carga en dispositivo.
sibles

Acciones posibles

El editor se abre con protección contra escritura
y la edición no es posible.
No obstante, permite informarse de las variables
existentes.
El editor se abre con protección contra escritura
y la edición no es posible.
No obstante, permite informarse de las variables
existentes.

En Memory Cards loca‐
les

Después de cargar en la Memory Card.

El editor se abre con protección contra escritura
y la edición no es posible.
No obstante, permite informarse de las variables
existentes.

Se puede abrir el editor de comparación y los
En el editor de compara‐ Siempre que existan una o más tablas de va‐
ción
riables offline y/u online pueden realizarse ope‐ resultados de la comparación se muestran en
raciones de comparación.
función del nombre para las variables seleccio‐
nadas.

Encontrará información más detallada sobre el uso del editor de comparación para la
comparación de variables PLC aquí: Comparar variables PLC (Página 8448)

Consulte también
Comparar variables PLC (Página 8448)
Introducción a la carga de variables PLC (Página 8407)

8410

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.1

Principios básicos para comparar programas de PLC

20.1.1

Introducción a la comparación de programas de PLC

20

Función
Existe la posibilidad de comparar los siguientes objetos de un programa PLC entre sí para
determinar posibles diferencias:
● Bloques lógicos con otros bloques lógicos
● Bloques de datos con otros bloques de datos
● Variables PLC de una tabla de variables PLC con las variables PLC de otra tabla de
variables PLC
● Tipos de datos PLC con otros tipos de datos PLC
Las variables se comparan por sus nombres.

Tipos de comparación y grados de comparación
En principio, se pueden utilizar dos tipos de comparación diferentes:
● Comparación offline/online
Los objetos del proyecto se comparan con los objetos del dispositivo online respectivo.
Para ello es necesario una conexión online con el dispositivo.
● Comparación offline/offline
En la comparación offline/offline es posible comparar los objetos de dos dispositivos en el
proyecto que está abierto. El dispositivo comparado puede ser también un dispositivo de un
proyecto de referencia o de una librería, que se arrastrará al área derecha. Solo es posible
comparar dispositivos que estén en una misma instancia del TIA Portal.
Tenga en cuenta que no es posible realizar simultáneamente tantas comparaciones como se
desee, sino que solo es posible una por tipo de comparación (online/offline u offline/offline).

Programación del PLC
Manual de programación y manejo, 11/2019

8411

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC
Dependiendo de la profundidad con la que se desee comparar los objetos, se puede elegir
entre los siguientes grados de comparación:
● Editor de comparación:
si se inicia una comparación en un dispositivo se abre el editor de comparación, en el que
se muestra el resultado de la comparación.
● Comparación detallada
Con algunos objetos es posible iniciar en el editor de comparación una comparación
detallada, en la que los objetos comparados se abren uno junto al otro, cada uno de ellos
en una instancia propia del editor de programación. Si existen diferencias, se resaltan. No
obstante, recuerde que para bloques SCL solo se puede iniciar una comparación detallada
si el tipo de interfaz es idéntico en ambos bloques.
Con bloques, variables PLC y tipos de datos PLC también es posible iniciar la comparación
detallada directamente desde el árbol del proyecto; con bloques y tipos de datos PLC
incluso desde la librería del proyecto o desde una librería global. Recuerde que esto no es
posible con versiones de tipos que se encuentran en estado "en test", aunque sí para sus
instancias.
La siguiente tabla muestra un resumen sobre el tipo y grado de comparación que se puede
emplear para los distintos objetos:
Objeto

Offline/offline

Offline/offline

Editor de compa‐
ración

Comparación de‐
tallada

Editor de compa‐
ración

Comparación deta‐
llada

Bloque KOP

X

X

X

X

Bloque FUP

X

X

X

X

Bloque AWL1

X

X

X

X

Bloque SCL

X

X

X

X7

Bloque GRAPH2

X

X4

X

X5

Bloque de datos
globales

X

X

X

X

Bloque de datos
de instancia

X

X

X

X

Variables PLC

X6

X6

X

X

X4

X

X

347

Tipo de datos PLC X

4

Leyenda:
X: Disponible
-: No disponible
: AWL no está disponible para S7-1200

1

: GRAPH no está disponible para S7-1200

2

: no para S7-1200 con versión inferior a 2.0

3

: no para S7-300/400

4

: comparable solo con un bloque GRAPH de la misma familia de CPU

5

: solo para S7-1500 a partir de la versión 2.5

6

: el tipo de interfaz del bloque debe ser idéntico

7

8412

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC

Nota
Tenga en cuenta las indicaciones siguientes:
● No es posible llevar a cabo comparaciones detalladas para los bloques con protección de
know-how.
● Si en la comparación detallada las diferencias solo están en los tipos de datos de las
variables locales, siendo que offline es un tipo de datos de alarma (C_ALARM C_ALARM_S
C_ALARM_8 C_ALARM_8P C_ALARM_T C_AR_SEND C_NOTIFY C_NOTIFY_8P) y
online una DWORD, la diferencia no se marca como tal.
● En la comparación detallada, tenga en cuenta las siguientes particularidades en relación
con los tipos y copias maestras de las librerías.
– No es posible copiar tablas de variables PLC con variables PLC.
– En la comparación detallada no están disponibles las funciones online y de observación
para los tipos y copias maestras.
– No es posible navegar a definiciones, accesos y bloques llamados.
– No es posible visualizar referencias cruzadas ni información sobre referencias cruzadas.
– En la comparación detallada, no se llevan a cabo análisis sintácticos de tipos y copias
maestras. Por ello no se marcan los errores de sintaxis.
– Si al utilizar comentarios multilingües el idioma de edición del tipo o copia maestra difiere
del idioma del proyecto, pueden obtenerse distintos resultados de comparación en el
editor de comparación y en la comparación detallada. En tal caso, el resultado de la
comparación indica el estado correcto en el editor de comparación.
– Los comentarios heredados y las propiedades de alarmas no se visualizan en el caso de
los tipos y copias maestras.

Comparar programas PLC a partir de las sumas de verificación
Además de las posibilidades de comparación citadas, el TIA Portal ofrece la posibilidad de
realizar una comparación sencilla de la suma de verificación. El sistema determina
automáticamente una suma de verificación para todo el programa PLC. A partir de la suma de
verificación se puede determinar fácilmente si dos programas PLC son idénticos.
Consulte también: Comparar programas PLC a partir de las sumas de verificación
(Página 8417)

Programación del PLC
Manual de programación y manejo, 11/2019

8413

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC

Permisos de acceso para la indicación del estado de comparación (S7-1200/1500)
● CPU 1500 < V2.0 (así como ET200 SP y controlador por software), CPU 1200 V4.0 y V4.1:
A partir de TIA Portal V14, los permisos de acceso necesarios para visualizar el estado de
comparación de bloques cambian en las CPU mencionadas de la familia S7-1200/1500.
Hasta ahora bastaba el nivel de acceso "Acceso HMI" para visualizar el estado de
comparación en las CPU citadas, pero a partir de la V14 se requiere el nivel de acceso
"Acceso de lectura" para dicha acción.
Como consecuencia de este cambio, al cambiar a modo online ahora se pide la contraseña
para "Acceso de lectura".
Si solo dispone de la contraseña para "Acceso HMI", podrá establecer una conexión online
de todos modos.
En ese caso, cuando se le pida la contraseña para el acceso de lectura, haga clic en
"Cancelar" e introduzca la contraseña para el "Acceso HMI" en el cuadro de diálogo que
aparece a continuación. La conexión online se establece entonces con los "permisos de
acceso HMI" existentes, pero no se muestra el estado de comparación de los bloques.
En lugar de los símbolos correspondientes al estado de comparación se muestran signos
de interrogación.
● CPU 1200 <=V3.x.:
A partir del TIA Portal V14 se pide una contraseña para visualizar el estado de comparación
de los bloques al pasar a online en las CPU mencionadas más arriba, siempre y cuando
estas CPU dispongan de protección contra escritura y/o lectura.
Si desconoce la contraseña para acceder a bloques protegidos contra lectura de una CPU
protegida podrá establecer una conexión online de todos modos.
En ese caso, salga del cuadro de diálogo en el que se pide la contraseña con "Cancelar".
La conexión online se establece de todos modos, aunque sin mostrar el estado de
comparación de los bloques.
En lugar de los símbolos correspondientes al estado de comparación se muestran signos
de interrogación.

Consulte también
Comparación de bloques y tipos de datos PLC (Página 8416)
Comparación de variables PLC (Página 8416)
Realizar una comparación detallada de bloques (Página 8420)

8414

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC

20.1.2

Comparación de Software Units

Comparación offline/online y offline/offline de Software Units
La comparación de Software Units funciona básicamente del mismo modo que la comparación
de otros datos del proyecto. Así por ejemplo, también obtendrá una comparación offline/online
sencilla cuando establezca una conexión online. Durante este proceso, en el árbol del proyecto
los objetos comparables se marcan con símbolos que indican el resultado de la comparación.
Se aplican las siguientes reglas:
● Las Software Units se marcan como idénticas cuando sus propiedades y todos los objetos
que contienen son idénticos.
● Las Software Units se marcan como diferentes cuando sus propiedades no se
corresponden.
● Las Software Units se marcan con un signo de exclamación cuando los objetos que
contienen no se corresponden pero sus propiedades sí son idénticas.
Además es posible realizar una comparación offline/online y offline/offline más detallada en el
editor de comparación.
Si inicia una comparación offline/online u offline/offline en un dispositivo, también se incluirán
las Software Units en la comparación. En el editor de comparación, las Software Units se
muestran tanto en la tabla de comparación izquierda como en la derecha. En el área
"Comparación de propiedades" del editor de comparación, consulte la suma de verificación de
los objetos comparados en "Datos de origen > Software Unit".
Durante la comparación se asignan las Software Units unas a otras por su nombre y se
comparan sus objetos. Los objetos homónimos de las distintas Software Units no se comparan
entre sí. Esto significa que si, por ejemplo, en el proyecto offline el bloque "Block_1" se
encuentra en la Software Unit "Unit1" y online en el dispositivo en la "Unit2", entonces se
considerarán objetos diferentes. En una comparación offline/offline también se puede realizar
una comparación manual. Para ello es posible seleccionar manualmente los objetos que
deben compararse.
Con los objetos que no son idénticos pueden ejecutarse acciones para sincronizar los objetos.
Si con la sincronización deben formarse varias objetos con el mismo nombre, la acción se
cancelará y aparecerá el mensaje correspondiente. No obstante, la sobrescritura en el modo
de comparación manual también es posible con el mismo nombre.
Nota
En la comparación manual de Software Units, el símbolo general de comparación de
características no indica siempre el resultado correcto. Sin embargo, los resultados de la
comparación de los datos de origen y de destino sí son correctos.

Consulte también
Principios básicos de las Software Units (Página 7693)

Programación del PLC
Manual de programación y manejo, 11/2019

8415

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC

20.1.3

Comparación de bloques y tipos de datos PLC

Criterios de asignación
En la comparación, los bloques que deben compararse y los tipos de datos PLC se asignan
unos a otros según los siguientes criterios:
● Bloques:
– Comparación offline/online: Direcciones, p. ej. FB100 o DB100
– Comparación offline/offline: Nombres simbólicos de los bloques
● Tipos de datos PLC: Los tipos de datos PLC se asignan unos a otros por su nombre.

Comparación
Al comparar bloques y tipos de datos PLC, para determinadas propiedades se forman sumas
de verificación que sirven de base para la comparación. En el editor de comparación, algunas
de estas propiedades se agrupan en categorías. Para las CPU de la serie S7-300/400 no se
dispone de sumas de verificación en la comparación offline/online; en este caso se evalúan los
sellos de tiempo. Por principio, en una comparación offline/online los sellos de tiempo se
emiten como información en una categoría propia para todas las CPU.
Tras ejecutar una comparación se puede definir mediante acciones cómo se deben tratar las
diferencias. Además, es posible iniciar una comparación detallada para los bloques. Aquí se
abren las versiones comparadas de un bloque y se resaltan las diferencias. Con bloques,
variables PLC y tipos de datos PLC también es posible iniciar la comparación detallada
directamente desde el árbol del proyecto.

Consulte también
Introducción a la comparación de programas de PLC (Página 8411)
Comparación de variables PLC (Página 8416)
Realizar una comparación detallada de bloques (Página 8420)

20.1.4

Comparación de variables PLC

Introducción
Cuando se realiza una comparación offline/offline, las tablas de variables PLC de los
dispositivos se visualizan en el editor de comparación. En este caso, las tablas de variables
PLC se asignan por su nombre y se puede reconocer a primera vista si existen tablas de
variables PLC en los dos dispositivos. Dado el caso, también es posible realizar una
comparación detallada con una tabla de variables PLC. En el caso de bloques, tablas de
variables PLC y tipos de datos PLC, también es posible iniciar la comparación detallada
directamente desde el árbol del proyecto.
En una comparación offline/online que se efectúe en una CPU de la serie S7-1200 y S7-1500
cuya versión de firmware sea inferior a la V2.5 se obtendrá el estado global de todas las

8416

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC
variables PLC. En las CPU de la serie S7-1500 a partir de la versión de firmware 2.5, se
dispone de las mismas posibilidades que en una comparación offline/offline.

Consulte también
Introducción a la comparación de programas de PLC (Página 8411)
Comparación de bloques y tipos de datos PLC (Página 8416)
Realizar una comparación detallada de bloques (Página 8420)

20.1.5

Comparación de programas PLC a partir de las sumas de verificación

Introducción
Los programas PLC se identifican automáticamente con sumas de verificación unívocas
cuando se compilan. A partir de la suma de verificación se puede identificar el programa y
determinar si dos programas PLC son idénticos.
Dado que la suma de verificación se carga a la CPU junto con el programa PLC, en caso de
servicio o mantenimiento puede ser de gran ayuda. Permite determinar fácilmente, por
ejemplo, si el programa que se ejecuta actualmente en la CPU es el mismo que el cargado
anteriormente, o si ha cambiado entretanto. No es necesario que el programa original esté en
la programadora (PG).

Generación de la suma de verificación
Al compilarlos, los programas PLC reciben automáticamente una suma de verificación
unívoca. Si en la siguiente compilación se determina que el programa PLC ha cambiado, el
programa recibe una suma de verificación nueva. Si el programa PLC no ha cambiado pero a
pesar de ello se vuelve a compilar, la suma de verificación no cambia.
La suma de verificación permanece invariable aunque se realicen cambios y luego se
deshagan.
La comprobación siempre se lleva a cabo cuando el programa PLC se compila, p. ej. si se
selecciona una CPU o una carpeta de bloques y se elije el comando de menú "Compilar >
Software".

Programación del PLC
Manual de programación y manejo, 11/2019

8417

Comparación de programas de PLC
20.1 Principios básicos para comparar programas de PLC
Se generan dos sumas de verificación:
● Suma de verificación para software: Se genera una suma de verificación de todos los
bloques de la carpeta.
– También se incluyen en el cálculo los bloques que no se llaman en el programa, pero
que están incluidos en la carpeta de bloques.
– Los bloques de seguridad y los tipos de datos PLC de seguridad (UDT) no se tienen en
cuenta.
– Los cambios en las tablas de observación o forzado no provocan un cambio en la suma
de verificación.
– Los bloques de datos generados o modificados en tiempo de ejecución, por ejemplo, por
las instrucciones "WRIT_DBL", "CREAT_DB" y "DELETE_DB" no influyen en la
generación de la suma de verificación.
● Suma de verificación para listas de textos: Se genera una suma de verificación para las
listas de textos del proyecto.

Carga de la suma de verificación
La suma de verificación se carga en la CPU junto con el programa PLC y está disponible en el
programa online. Al cargar desde la CPU, la suma de verificación no se aplica al proyecto
offline, ya que se vuelve a generar automáticamente en la siguiente compilación.

Evaluación de la suma de verificación
La suma de verificación se muestra en las propiedades de la CPU (Propiedades > General >
Suma de verificación). Desde ahí se pueden transferir manualmente a la documentación. Para
leer la suma de verificación en tiempo de ejecución en el programa se dispone de la instrucción
avanzada "GetChecksum".

Consulte también
GetChecksum: Leer suma de verificación (Página 2803)

8418

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

20.2

Comparar bloques

20.2.1

Comparar bloques en el editor de comparación
Existen las siguientes posibilidades de comparar bloques en el editor de comparación:
● Comparación offline/online
Los bloques del proyecto se comparan con los bloques del dispositivo seleccionado.
● Comparación offline/offline automática
Todos los bloques de los dispositivos seleccionados se comparan offline.
● Comparación offline/offline manual
Los bloques seleccionados de los dispositivos se comparan offline.

Realizar una comparación offline/online de bloques
Para realizar una comparación offline/online, proceda del siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
online.
2. Elija el comando "Comparar > offline/online" del menú contextual.
3. Si hasta ahora no se ha establecido ninguna conexión online para ese dispositivo,
aparecerá el cuadro de diálogo "Establecer conexión online". En ese caso, ajuste todos los
parámetros necesarios para la conexión y haga clic en "Conectar".
La conexión online se establece y se abre el editor de comparación.
4. Abra la carpeta "Bloques de programa".
Los símbolos del área de estado y acción indican el estado. Dependiendo del estado de los
objetos se pueden definir determinadas acciones. No obstante, tenga en cuenta que en una
acción de sincronización solo es posible ejecutar acciones en un sentido.

Realizar una comparación offline/offline automática de bloques
Para realizar una comparación offline/offline automática de bloques, proceda del siguiente
modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
offline.
2. Elija el comando "Comparar > offline/offline" del menú contextual.
Se abre el editor de comparación y el dispositivo seleccionado se muestra en el área
izquierda.
3. Arrastre otro dispositivo mediante Drag & Drop a la superficie de arrastre del área derecha.
El dispositivo comparado puede ser del mismo proyecto, de un proyecto de referencia o de
la librería.
4. Abra la carpeta "Bloques de programa".
Los símbolos del área de estado y acción indican el estado de los objetos. Dependiendo del
estado de los objetos se pueden definir determinadas acciones. Si se selecciona un objeto,
sus propiedades y las del objeto correspondiente del dispositivo asignado se muestran
sinópticamente en la comparación de propiedades.

Programación del PLC
Manual de programación y manejo, 11/2019

8419

Comparación de programas de PLC
20.2 Comparar bloques
En todo momento se pueden arrastrar otros dispositivos a las áreas de arrastre para realizar
nuevas comparaciones.

Realizar una comparación offline/offline manual de bloques
Para realizar una comparación offline/offline manual de bloques, proceda del siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
offline.
2. Elija el comando "Comparar > offline/offline" del menú contextual.
Se abre el editor de comparación y el dispositivo seleccionado se muestra en el área
izquierda.
3. Arrastre otro dispositivo mediante Drag & Drop a la superficie de arrastre del área derecha.
El dispositivo comparado puede ser del mismo proyecto, de un proyecto de referencia o de
la librería.
4. En el área de estado y acción haga clic en el botón para conmutar entre la comparación
automática y manual.
5. Seleccione los objetos que desea comparar.
Se muestra la comparación de propiedades. Los símbolos indican el estado de los objetos.
Dependiendo del estado de los objetos se pueden definir determinadas acciones.
En todo momento se pueden arrastrar otros dispositivos a las áreas de arrastre para realizar
nuevas comparaciones.

Consulte también
Introducción a la comparación de programas de PLC (Página 8411)
Realizar una comparación detallada de bloques (Página 8420)
Comparar variables PLC (Página 8448)
Comparar tipos de datos PLC (Página 8451)

20.2.2

Realizar una comparación detallada de bloques

20.2.2.1

Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL
Es posible iniciar una comparación detallada para los bloques. Las versiones comparadas de
un bloque se abren una junto a la otra y se resaltan las diferencias. Para iniciar una
comparación detallada para bloques se dispone de las siguientes posibilidades:
● Iniciar la comparación detallada desde el editor de comparación
La comparación detallada de bloques es posible tanto para offline/online como para offline/
offline desde el editor de comparación.
● Iniciar la comparación detallada desde el árbol del proyecto
La comparación detallada de bloques es posible tanto para offline/online como para offline/
offline desde el árbol del proyecto. Para la comparación offline/online se requiere una
conexión online existente.

8420

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques
● Iniciar la comparación detallada en una librería
La comparación detallada de bloques también puede iniciarse desde la librería del proyecto
o desde una librería global. Esto es posible tanto con tipos como con copias maestras.
● Iniciar la comparación detallada en el editor de programación
En este caso se compara el bloque abierto con su versión online.
Nota
Tenga en cuenta las indicaciones siguientes:
● La comparación detallada no está disponible para los bloques creados en el lenguaje de
programación SCL en las CPU de la serie S7-1200 con una versión inferior a 2.0.
● Solo es posible iniciar una comparación detallada para dos bloques SCL si ambos bloques
utilizan el mismo tipo de interfaz, es decir o los dos tabular o los dos textual.
● S7-1500: debido al trabajo conjunto en paralelo en una CPU, es posible que otro usuario
esté ejecutando una operación de carga en la CPU. Si debido a este proceso de carga se
modifica o borra el bloque que se está comparando, la comparación detallada se cierra y
aparece un mensaje. En este caso, vuelva a iniciar la comparación detallada si fuera
necesario.

Iniciar la comparación detallada desde el editor de comparación
Para iniciar una comparación detallada de un bloque desde el editor de comparación, proceda
del siguiente modo:
1. Realice una comparación offline/online u offline/offline.
El editor de comparación se abre.
2. En el editor de comparación, seleccione el bloque con el cual desea realizar una
comparación detallada.
3. Haga clic en el botón "Iniciar comparación detallada" de la barra de herramientas o
seleccione el comando "Iniciar comparación detallada" del menú contextual.

Iniciar la comparación detallada desde el árbol del proyecto
Para iniciar una comparación detallada offline/offline de un bloque directamente en el árbol del
proyecto, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en el bloque que desee comparar. Puede ser
también un bloque de un proyecto de referencia.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el bloque que desee comparar con el bloque
seleccionado anteriormente como objeto izquierdo. Puede ser un bloque del proyecto
actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.

Programación del PLC
Manual de programación y manejo, 11/2019

8421

Comparación de programas de PLC
20.2 Comparar bloques
Para iniciar una comparación detallada offline/online de un bloque directamente en el árbol del
proyecto, proceda del siguiente modo:
1. Establezca una conexión online con el dispositivo en el que se encuentra el bloque.
2. Haga clic con el botón derecho del ratón en el bloque que desee comparar con su objeto
online.
3. En el menú contextual, elija el comando "Comparación rápida > Comparar con el objeto
online".

Iniciar la comparación detallada en una librería
Para iniciar una comparación detallada de un bloque directamente en una librería, haga lo
siguiente:
1. Haga clic con el botón derecho del ratón en el bloque de la librería del proyecto o la librería
global que desee comparar.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el bloque que desee comparar con el bloque
seleccionado anteriormente como objeto izquierdo. Puede ser un bloque del proyecto
actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.

Iniciar la comparación detallada en el editor de programación
Para el tipo de comparación offline/online, la comparación detallada se puede iniciar
directamente desde el editor de programación. Para ello, proceda del siguiente modo:
1. Abra el bloque para el que desea realizar una comparación detallada.
2. Establezca una conexión online.
Consulte también: Establecer y deshacer una conexión online
Nota
Tenga en cuenta que el bloque debe estar disponible online para que se pueda iniciar la
comparación detallada del bloque en el editor de programación.
3. Haga clic en el botón "Comparación detallada" de la barra de herramientas.
4. Confirme el cuadro de diálogo para cerrar el bloque con "Sí".

Resultado
Para las versiones comparadas entre sí del bloque se abren sendas instancias del editor de
programación, dispuestas una junto a la otra.

8422

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Representación del resultado de la comparación para KOP/FUP (Página 8428)
Representación del resultado de la comparación para AWL (Página 8432)
Representación del resultado de la comparación para SCL (Página 8435)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

20.2.2.2

Iniciar una comparación detallada de bloques GRAPH
Es posible iniciar una comparación detallada de bloques GRAPH. Las versiones comparadas
de un bloque se abren una junto a la otra y se resaltan las diferencias. Existen las posibilidades
siguientes de iniciar una comparación detallada para bloques GRAPH:
● Iniciar la comparación detallada desde el editor de comparación
La comparación detallada de bloques es posible tanto para online/offline como para offline/
offline desde el editor de comparación.
● Iniciar la comparación detallada desde el árbol del proyecto
La comparación detallada de bloques es posible tanto para online/offline como para offline/
offline desde el árbol del proyecto. Para la comparación online/offline se requiere una
conexión online existente.
● Iniciar la comparación detallada en una librería
La comparación detallada de bloques también puede iniciarse desde la librería del proyecto
o desde una librería global. Esto es posible tanto con tipos como con copias maestras.
● Iniciar la comparación detallada en el editor de programación
En este caso se compara el bloque abierto con su versión online.
Para bloques GRAPH se dispone de los siguientes modos de comparación:
● Comparar cadena
En este modo se comparan entre sí las cadenas secuenciales completas. Una
comparación detallada de un bloque GRAPH siempre comienza en el modo de
comparación "Comparar cadena". Esto significa que la comparación comienza al principio
de la cadena secuencial y se muestran las diferencias entre las cadenas secuenciales. Si
existen diferencias estructurales entre las cadenas secuenciales, solo se muestran los
resultados de la comparación hasta la primera diferencia estructural.
● Comparar selección
El modo de comparación "Comparar selección" permite comparar diferentes secciones.
Esto permite comparar también partes de las cadenas secuenciales que se encuentran
después de una diferencia estructural.

Programación del PLC
Manual de programación y manejo, 11/2019

8423

Comparación de programas de PLC
20.2 Comparar bloques
Se puede cambiar en todo momento entre ambos modos de comparación.
Nota
S7-1500: debido al trabajo conjunto en paralelo en una CPU, es posible que otro usuario esté
ejecutando una operación de carga en la CPU. Si debido a este proceso de carga se modifica
o borra el bloque que se está comparando, la comparación detallada se cierra y aparece un
mensaje. En este caso, vuelva a iniciar la comparación detallada si fuera necesario.

Iniciar la comparación detallada desde el editor de comparación
Para iniciar una comparación detallada, proceda del siguiente modo:
1. Realice una comparación online/offline u offline/offline entre dos dispositivos.
El editor de comparación se abre.
2. En el editor de comparación, seleccione el bloque GRAPH con el cual desea realizar una
comparación detallada.
Nota
En una comparación offline/offline también se puede realizar una comparación manual. De
este modo se puede seleccionar los bloques GRAPH que se desee en el editor de
comparación y compararlos.
3. Haga clic en el botón "Iniciar comparación detallada" de la barra de herramientas.
Para las versiones comparadas entre sí de los bloques GRAPH se abren sendas instancias
del editor de programación, dispuestas una junto a la otra. Si existen diferencias, se
marcan. La comparación se realiza en el modo "Comparar cadena".

Iniciar la comparación detallada desde el árbol del proyecto
Para iniciar una comparación detallada offline/offline de un bloque GRAPH directamente en el
árbol del proyecto, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en el bloque que desee comparar. Puede ser
también un bloque de un proyecto de referencia.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el bloque que desee comparar con el bloque
seleccionado anteriormente como objeto izquierdo. Puede ser un bloque del proyecto
actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.
Para las versiones comparadas entre sí de los bloques GRAPH se abren sendas instancias
del editor de programación, dispuestas una junto a la otra. Si existen diferencias, se
marcan. La comparación se realiza en el modo "Comparar cadena".

8424

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques
Para iniciar una comparación detallada online/offline de un bloque GRAPH directamente en el
árbol del proyecto, proceda del siguiente modo:
1. Establezca una conexión online con el dispositivo en el que se encuentra el bloque.
2. Haga clic con el botón derecho del ratón en el bloque que desee comparar con su objeto
online.
3. En el menú contextual, elija el comando "Comparación rápida > Comparar con el objeto
online".
Para las versiones comparadas entre sí de los bloques GRAPH se abren sendas instancias
del editor de programación, dispuestas una junto a la otra. Si existen diferencias, se
marcan. La comparación se realiza en el modo "Comparar cadena".

Iniciar la comparación detallada en una librería
Para iniciar una comparación detallada de un bloque directamente en una librería, haga lo
siguiente:
1. Haga clic con el botón derecho del ratón en el bloque de la librería del proyecto o la librería
global que desee comparar.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el bloque que desee comparar con el bloque
seleccionado anteriormente como objeto izquierdo. Puede ser un bloque del proyecto
actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.

Iniciar la comparación detallada en el editor de programación
Para el tipo de comparación online/offline, la comparación detallada se puede iniciar
directamente desde el editor de programación. Para ello, proceda del siguiente modo:
1. Abra el bloque GRAPH para el que desea realizar una comparación detallada.
2. Establezca una conexión online.
Consulte también: Establecer y deshacer una conexión online
Nota
Tenga en cuenta que el bloque debe estar disponible online para que se pueda iniciar la
comparación detallada del bloque en el editor de programación.
3. Haga clic en el botón "Comparación detallada" de la barra de herramientas.
4. Confirme el cuadro de diálogo para cerrar el bloque con "Sí".
Para las versiones comparadas entre sí de los bloques GRAPH se abren sendas instancias
del editor de programación, dispuestas una junto a la otra. Si existen diferencias, se
marcan. La comparación se realiza en el modo "Comparar cadena".

Programación del PLC
Manual de programación y manejo, 11/2019

8425

Comparación de programas de PLC
20.2 Comparar bloques

Comparar secciones
Para comparar determinadas secciones de las cadenas secuenciales visualizadas, proceda
del siguiente modo:
1. Seleccione en cada cadena secuencial la etapa a partir de la cual desea iniciar la
comparación.
2. Haga clic en el botón "Modo de comparación" de la barra de herramientas.
El modo de comparación cambia a "Comparar selección" y el resultado de la comparación
se actualiza. Las cadenas secuenciales se comparan entre sí a partir de las etapas
seleccionadas. Las secciones comparadas de las cadenas se resaltan.
3. Para comparar otras secciones entre sí, seleccione las etapas a partir de las cuales debe
realizarse la comparación.
4. Haga clic en el botón "Actualizar resultados de la comparación" de la barra de herramientas.
Nota
Si cambia el modo de comparación, también se actualizarán simultáneamente los
resultados de la comparación. Si permanece dentro del modo "Comparar selección", tendrá
que actualizar los resultados manualmente cada vez que cambie el punto de inicio.
5. Para volver a comparar las cadenas secuenciales completas entre sí, haga clic en el botón
"Modo de comparación" de la barra de herramientas.
Con cada clic en el botón "Modo de comparación" se cambia el modo de comparación.
También se puede abrir la lista desplegable mediante la flecha y seleccionar en la lista el
modo que desee.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Representación del resultado de la comparación para GRAPH (Página 8438)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

20.2.2.3

Iniciar la comparación detallada de bloques de datos
Es posible iniciar una comparación detallada de bloques de datos. Las versiones comparadas
de un bloque de datos se abren una junto a la otra en dos tablas de declaración y las diferencias
se enumeran en la ficha "Resultado de la comparación" de la ventana de inspección.

8426

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques
Para iniciar una comparación detallada de bloques de datos se dispone de las siguientes
posibilidades:
● Iniciar la comparación detallada desde el editor de comparación
La comparación detallada de bloques de datos es posible tanto offline/online como offline/
offline desde el editor de comparación.
● Iniciar la comparación detallada desde el árbol del proyecto
La comparación detallada de bloques de datos es posible tanto offline/online como offline/
offline desde el árbol del proyecto. Para la comparación offline/online se requiere una
conexión online existente.
● Iniciar la comparación detallada en una librería
La comparación detallada de bloques de datos que se utilizan como copias maestras
también puede iniciarse desde la librería del proyecto o desde una librería global.

Iniciar la comparación detallada desde el editor de comparación
Para iniciar una comparación detallada de un bloque de datos desde el editor de comparación,
haga lo siguiente:
1. Realice una comparación offline/online u offline/offline.
El editor de comparación se abre.
2. En el editor de comparación, seleccione el bloque de datos con el cual desea realizar una
comparación detallada.
3. Haga clic en el botón "Iniciar comparación detallada" de la barra de herramientas o
seleccione el comando "Iniciar comparación detallada" del menú contextual.

Iniciar la comparación detallada desde el árbol del proyecto
Para iniciar una comparación detallada offline/offline de un bloque de datos directamente en el
árbol del proyecto, haga lo siguiente:
1. Haga clic con el botón derecho del ratón en el bloque de datos que desee comparar. Puede
ser también un bloque de datos de un proyecto de referencia.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el bloque de datos que desee comparar con el
bloque de datos seleccionado anteriormente como objeto izquierdo. Puede ser un bloque
de datos del proyecto actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.
Para iniciar una comparación detallada offline/online de un bloque de datos directamente en el
árbol del proyecto, haga lo siguiente:
1. Establezca una conexión online con el dispositivo en el que se encuentra el bloque de datos.
2. Haga clic con el botón derecho del ratón en el bloque de datos que desee comparar con su
objeto online.
3. En el menú contextual, elija el comando "Comparación rápida > Comparar con el objeto
online".

Programación del PLC
Manual de programación y manejo, 11/2019

8427

Comparación de programas de PLC
20.2 Comparar bloques

Iniciar la comparación detallada en una librería
Para iniciar una comparación detallada de un bloque de datos directamente en una librería,
haga lo siguiente:
1. Haga clic con el botón derecho del ratón en el bloque de datos de la librería del proyecto o
la librería global que desee comparar.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el bloque de datos que desee comparar con el
bloque de datos seleccionado anteriormente como objeto izquierdo. Puede ser un bloque
de datos del proyecto actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.

20.2.2.4

Representación del resultado de la comparación

Representación del resultado de la comparación para KOP/FUP
Introducción
La comparación detallada permite identificar exactamente las diferencias entre las versiones
comparadas de un bloque. Las marcas siguientes permiten encontrar las diferencias
rápidamente:
● Las filas que presentan diferencias se destacan con fondo gris.
● Los operandos e instrucciones diferentes se destacan con fondo verde.
● Si el número de segmentos es diferente, se insertan pseudo-segmentos para permitir una
representación sincronizada de los segmentos idénticos. Estos pseudo-segmentos se
destacan con fondo gris y contienen en su barra de título el texto "No se ha encontrado
ningún segmento equivalente.". Los pseudo-segmentos no se pueden editar.
Nota
Tenga en cuenta las indicaciones siguientes:
● Si entre dos segmentos existe una diferencia superior al 50 porciento, los segmentos se
considerarán no correspondientes y no se realizará una comparación entre los
segmentos. En ese caso también se insertan pseudo-segmentos hasta que se
encuentra un segmento adecuado.
● Se obtiene un resultado de la comparación diferente dependiendo de cuáles sean el
bloque partida y el bloque comparado.
Para facilitar la claridad, no se resaltan todas las diferencias, sino sólo la primera diferencia de
cada operación. Por ejemplo, si en una instrucción con varias entradas todas ellas se
diferencian en las versiones offline y online de un bloque, solo la primera se resaltará como
diferente. El usuario puede entonces solucionar esta diferencia y actualizar la lista de
comparación. A continuación, se resalta la siguiente entrada como diferencia.

8428

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques
Por tanto, el número de diferencias resaltadas en un segmento depende del número de
instrucciones existentes.

Estructura de la comparación detallada
La figura siguiente muestra un ejemplo de la comparación detallada offline/online para el
lenguaje de programación KOP:

① Barra de herramientas de la comparación detallada para KOP
② Bloque de partida
③ Bloque comparado
④ Resultado de la comparación en la ventana de inspección
La figura siguiente muestra un ejemplo de la comparación detallada offline/online para el
lenguaje de programación FUP:

Programación del PLC
Manual de programación y manejo, 11/2019

8429

Comparación de programas de PLC
20.2 Comparar bloques









① Barra de herramientas de la comparación detallada para FUP
② Bloque de partida
③ Bloque comparado
④ Resultado de la comparación en la ventana de inspección
Nota
La indicación de los nombres simbólicos de la versión online de un bloque solo es posible para
S7-1200 y S7-1500.

8430

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Barra de herramientas de la comparación detallada
La barra de herramientas permite acceder a las siguientes funciones:
● Funciones generales
– Insertar segmento
– Borrar segmento
– Insertar fila
– Agregar fila
– Abrir todos los segmentos
– Cerrar todos los segmentos
● Funciones específicas de comparación
– Posicionar en la primera diferencia
– Posicionar en la anterior diferencia
– Posicionar en la siguiente diferencia
– Posicionar en la última diferencia
– Sincronizar desplazamiento de los editores
– Actualizar los resultados de la comparación

Bloque de partida
El bloque de partida se muestra en la ventana izquierda. En una comparación offline/online, el
bloque de partida es la versión offline del bloque.

Bloque comparado
El bloque comparado se muestra en la ventana derecha. En una comparación offline/online, el
bloque comparado es la versión online del bloque.

Resultado de la comparación en la ventana de inspección
En la ficha "Información > Resultado de la comparación" de la ventana de inspección se
muestra una tabla que recoge las diferencias. Haga doble clic en una fila para acceder a la
diferencia correspondiente en el bloque.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

Programación del PLC
Manual de programación y manejo, 11/2019

8431

Comparación de programas de PLC
20.2 Comparar bloques

Representación del resultado de la comparación para AWL
Introducción
La comparación detallada permite identificar exactamente las diferencias entre las versiones
comparadas de un bloque. Las marcas siguientes permiten encontrar las diferencias
rápidamente:
● Las filas que presentan diferencias se destacan con fondo gris.
● Los operandos e instrucciones diferentes se destacan con fondo verde.
● Si el número de segmentos es diferente, se insertan pseudo-segmentos para permitir una
representación sincronizada de los segmentos idénticos. Estos pseudo-segmentos se
destacan con fondo gris y contienen en su barra de título el texto "No se ha encontrado
ningún segmento equivalente.". Los pseudo-segmentos no se pueden editar.

8432

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Estructura de la comparación detallada
La figura siguiente muestra un ejemplo para la comparación detallada online/offline para el
lenguaje de programación AWL:









① Barra de herramientas de la comparación detallada para AWL
② Bloque de partida
③ Bloque comparado
④ Resultado de la comparación en la ventana de inspección
Nota
La indicación de los nombres simbólicos de la versión online del bloque solo es posible para
S7-1500.

Programación del PLC
Manual de programación y manejo, 11/2019

8433

Comparación de programas de PLC
20.2 Comparar bloques

Barra de herramientas de la comparación detallada
La barra de herramientas permite acceder a las siguientes funciones:
● Funciones generales
– Insertar segmento
– Borrar segmento
– Insertar fila
– Agregar fila
– Abrir todos los segmentos
– Cerrar todos los segmentos
● Funciones específicas de comparación
– Posicionar en la primera diferencia
– Posicionar en la anterior diferencia
– Posicionar en la siguiente diferencia
– Posicionar en la última diferencia
– Sincronizar desplazamiento de los editores
– Actualizar los resultados de la comparación

Bloque de partida
El bloque de partida se muestra en la ventana izquierda. En una comparación online/offline, el
bloque de partida es la versión offline del bloque.

Bloque comparado
El bloque comparado se muestra en la ventana derecha. En una comparación online/offline, el
bloque comparado es la versión online del bloque.

Resultado de la comparación en la ventana de inspección
En la ficha "Información > Resultado de la comparación" de la ventana de inspección se
muestra una tabla que recoge las diferencias. Haga doble clic en una fila para acceder a la
diferencia correspondiente en el bloque.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

8434

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Representación del resultado de la comparación para SCL
Introducción
La comparación detallada permite identificar exactamente las diferencias entre las versiones
comparadas de un bloque. Las marcas siguientes permiten encontrar las diferencias
rápidamente:
● Las filas que presentan diferencias se destacan con fondo gris.
● Los operandos e instrucciones diferentes se destacan con fondo verde.
Nota
La comparación detallada offline/online no está disponible para SCL para las familias de CPU
S7-300/400 ni para S7-1200 con una versión inferior a 2.0.

Programación del PLC
Manual de programación y manejo, 11/2019

8435

Comparación de programas de PLC
20.2 Comparar bloques

Estructura de la comparación detallada
La figura siguiente muestra un ejemplo de la comparación detallada offline/online para el
lenguaje de programación SCL:









① Barra de herramientas de la comparación detallada para SCL
② Bloque de partida
③ Bloque comparado
④ Resultado de la comparación en la ventana de inspección
Nota
La indicación de los nombres simbólicos de la versión online del bloque solo es posible para
S7-1200 y S7-1500.

8436

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Barra de herramientas de la comparación detallada
La barra de herramientas permite acceder a las siguientes funciones:
● Funciones generales
– Insertar fila
– Agregar fila
● Funciones específicas de comparación
– Posicionar en la primera diferencia
– Posicionar en la anterior diferencia
– Posicionar en la siguiente diferencia
– Posicionar en la última diferencia
– Sincronizar desplazamiento de los editores
– Actualizar los resultados de la comparación

Bloque de partida
El bloque de partida se muestra en la ventana izquierda. En una comparación offline/online, el
bloque de partida es la versión offline del bloque.

Bloque comparado
El bloque comparado se muestra en la ventana derecha. En una comparación offline/online, el
bloque comparado es la versión online del bloque.

Resultado de la comparación en la ventana de inspección
En la ficha "Información > Resultado de la comparación" de la ventana de inspección se
muestra una tabla que recoge las diferencias. Haga doble clic en una fila para acceder a la
diferencia correspondiente en el bloque.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

Programación del PLC
Manual de programación y manejo, 11/2019

8437

Comparación de programas de PLC
20.2 Comparar bloques

Representación del resultado de la comparación para GRAPH
Introducción
La comparación detallada permite identificar exactamente las diferencias entre las versiones
comparadas de un bloque. Al iniciar una comparación detallada para un bloque GRAPH,
primero se abre la navegación. El divisor de ventana permite cambiar entre la navegación y la
vista configurada actualmente. En la barra de herramientas de la comparación detallada
pueden seleccionarse otras vistas.
El resultado de la comparación se marca con los símbolos de comparación.
Consulte también: Resumen del editor de comparación

Estructura de la comparación detallada
La figura siguiente muestra un ejemplo de la vista de navegación en una comparación
detallada online/offline para el lenguaje de programación GRAPH:














8438

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

① Barra de herramientas de la comparación detallada para GRAPH
② Bloque de partida
③ Bloque comparado
④ Barra de herramientas de navegación
⑤ Divisor de ventana
⑥ Resultado de la comparación en la ventana de inspección
La figura siguiente muestra un ejemplo de la vista de cadena en una comparación detallada
online/offline para el lenguaje de programación GRAPH:













① Barra de herramientas de la comparación detallada para GRAPH
② Bloque de partida
③ Bloque comparado
④ Divisor de ventana

Programación del PLC
Manual de programación y manejo, 11/2019

8439

Comparación de programas de PLC
20.2 Comparar bloques

⑤ Resultado de la comparación en la ventana de inspección
Nota
Si existen diferencias estructurales entre los bloques, en la vista de cadena solo se muestran
los resultados de la comparación hasta la primera diferencia estructural.
La figura siguiente muestra un ejemplo de la vista de etapa individual en una comparación
detallada online/offline para el lenguaje de programación GRAPH:













① Barra de herramientas de la comparación detallada para GRAPH
② Bloque de partida
③ Bloque comparado
④ Divisor de ventana

8440

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

⑤ Resultado de la comparación en la ventana de inspección
Nota
El resultado de la comparación se refiere al segmento completo. No se marcan diferencias
dentro de los segmentos.
La figura siguiente muestra un ejemplo de la vista de instrucciones permanentes en una
comparación detallada online/offline para el lenguaje de programación GRAPH:













① Barra de herramientas de la comparación detallada para GRAPH
② Bloque de partida
③ Bloque comparado
④ Divisor de ventana

Programación del PLC
Manual de programación y manejo, 11/2019

8441

Comparación de programas de PLC
20.2 Comparar bloques

⑤ Resultado de la comparación en la ventana de inspección
Nota
El resultado de la comparación se refiere al segmento completo. No se marcan diferencias
dentro de los segmentos.
La figura siguiente muestra un ejemplo de la vista de avisos en una comparación detallada
offline/online para el lenguaje de programación GRAPH:













① Barra de herramientas de la comparación detallada para GRAPH
② Bloque de partida
③ Bloque comparado
④ Divisor de ventana
⑤ Resultado de la comparación en la ventana de inspección

8442

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Barras de herramientas
La barra de herramientas de la comparación detallada permite acceder a las siguientes
funciones:
● Funciones generales
– Cambiar a las instrucciones permanentes anteriores
– Cambiar a la vista de cadena
– Cambiar a la vista de etapa individual
– Cambiar a las instrucciones permanentes posteriores
– Cambiar a la vista de avisos
– Insertar cadena
– Borrar cadena
– Insertar segmento
– Borrar segmento
– Insertar fila
– Agregar fila
– Abrir todos los segmentos
– Cerrar todos los segmentos
● Funciones específicas de comparación
– Posicionar en la primera diferencia
– Posicionar en la anterior diferencia
– Posicionar en la siguiente diferencia
– Posicionar en la última diferencia
– Sincronizar desplazamiento de los editores
– Actualizar los resultados de la comparación
– Seleccionar el modo de comparación
La navegación dispone de una barra de herramientas propia con las siguientes funciones:
● Aumentar o reducir el tamaño de los elementos dentro de la navegación
● Sincronizar la navegación

Bloque de partida
El bloque de partida se muestra en la ventana izquierda. En una comparación online/offline, el
bloque de partida es la versión offline del bloque.

Bloque comparado
El bloque comparado se muestra en la ventana derecha. En una comparación online/offline, el
bloque comparado es la versión online del bloque.

Programación del PLC
Manual de programación y manejo, 11/2019

8443

Comparación de programas de PLC
20.2 Comparar bloques

Divisor de ventana
Puede hacer clic en el divisor de ventana para cambiar rápidamente entre la navegación y la
vista actual.

Resultado de la comparación en la ventana de inspección
En la ficha "Información > Resultado de la comparación" de la ventana de inspección se
muestra una tabla que recoge las diferencias. Haga doble clic en una fila para acceder a la
diferencia correspondiente en el bloque.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Iniciar una comparación detallada de bloques GRAPH (Página 8423)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

20.2.2.5

Navegar en la comparación detallada

Requisitos
Se ha realizado una comparación detallada.

Navegar hasta las diferencias
Para navegar hasta una diferencia entre ambos bloques, proceda del siguiente modo:
1. En la ventana de inspección, elija "Información > Resultado de la comparación" para abrir
la lista de resultados de la comparación detallada.
2. Haga doble clic en una diferencia.
La diferencia en cuestión se selecciona en ambos editores.

8444

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques
O bien:
1. Haga clic en uno de los siguientes botones de navegación de la barra de herramientas:
– Posicionar en la primera diferencia
Navega hasta la primera diferencia del bloque y la muestra en ambos editores.
– Posicionar en la anterior diferencia
A partir de la posición actual, navega hasta la diferencia anterior y la muestra en ambos
editores.
– Posicionar en la siguiente diferencia
A partir de la posición actual, navega hasta la diferencia siguiente y la muestra en ambos
editores.
– Posicionar en la última diferencia
Navega hasta la última diferencia del bloque y la muestra en ambos editores.

Activar y desactivar la sincronización del desplazamiento vertical entre los editores
Para que los segmentos que se correspondan permanezcan visibles paralelamente al
desplazarse en sentido vertical, es posible sincronizar el desplazamiento de ambos editores.
Esta función se puede activar o desactivar a discreción. Proceda del siguiente modo:
1. Para desactivar el desplazamiento isócrono, haga clic en el botón "Sincronizar
desplazamiento de los editores" de la barra de herramientas.
2. Para volver a activar el desplazamiento isócrono, haga clic nuevamente en el botón
"Sincronizar desplazamiento de los editores" de la barra de herramientas.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Iniciar una comparación detallada de bloques GRAPH (Página 8423)
Representación del resultado de la comparación para KOP/FUP (Página 8428)
Representación del resultado de la comparación para AWL (Página 8432)
Representación del resultado de la comparación para SCL (Página 8435)
Representación del resultado de la comparación para GRAPH (Página 8438)
Modificar bloques durante la comparación detallada (Página 8445)
Actualizar resultados de la comparación (Página 8447)

20.2.2.6

Modificar bloques durante la comparación detallada
Mientras se ejecuta una comparación detallada existe la posibilidad de realizar cambios en los
bloques que se comparan. Tenga en cuenta lo siguiente:
● Comparación offline/online: solo es posible modificar el bloque offline.
● Comparación offline/offline: solo es posible modificar el bloque offline del área izquierda.

Programación del PLC
Manual de programación y manejo, 11/2019

8445

Comparación de programas de PLC
20.2 Comparar bloques
Tras modificar el bloque puede ser necesario actualizar manualmente el resultado de la
comparación en el editor de comparación, para que el estado de la comparación se muestre
correctamente. Seguidamente pueden definirse acciones para sincronizar los objetos.
Nota
Los bloques SCL no pueden modificarse manualmente. Sin embargo, es posible aplicar
cambios de un bloque a otro. Tenga en cuenta las siguientes particularidades:
● No es posible aplicar cambios a un bloque online.
● Solo es posible aplicar cambios a un bloque offline si no está protegido contra escritura.
Esto sucede, p. ej., cuando los bloques de la comparación detallada provienen de CPU
distintas. En este caso también es posible aplicar los cambios al bloque del área derecha.

Modificar bloques KOP, FUP o AWL
Para modificar bloques KOP, FUP o AWL, proceda del siguiente modo:
1. Modifique el bloque en el área izquierda según precise.
2. Dado el caso, haga clic en el botón "Actualizar resultados de la comparación" de la barra de
herramientas.

Modificar bloques GRAPH
Para modificar bloques GRAPH, proceda del siguiente modo:
1. Cambie a la vista de cadena haciendo clic en "Vista de cadena" entre los dos bloques.
2. Modifique el bloque en el área izquierda según precise.
3. Dado el caso, haga clic en el botón "Actualizar resultados de la comparación" de la barra de
herramientas.

Modificar bloques SCL
Para aplicar un cambio de un bloque a otro, proceda del siguiente modo:
1. En la barra lateral del bloque cuyo cambio desee aplicar al otro bloque, haga clic en la flecha
de la fila correspondiente.
La fila se insertará en el otro bloque y se eliminarán los botones de flecha.
Nota
Los colores de las flechas tienen los siguientes significados:
● Gris: no es posible aplicar los cambios al otro bloque porque el otro bloque es un bloque
online o está protegido contra escritura.
● Azul: los cambios se aplican de un bloque offline a otro.
● Naranja: los cambios se aplican de un bloque online a otro.
2. Dado el caso, haga clic en el botón "Actualizar resultados de la comparación" de la barra de
herramientas.

8446

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.2 Comparar bloques

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Iniciar una comparación detallada de bloques GRAPH (Página 8423)
Representación del resultado de la comparación para KOP/FUP (Página 8428)
Representación del resultado de la comparación para AWL (Página 8432)
Representación del resultado de la comparación para SCL (Página 8435)
Representación del resultado de la comparación para GRAPH (Página 8438)
Navegar en la comparación detallada (Página 8444)
Actualizar resultados de la comparación (Página 8447)

20.2.2.7

Actualizar resultados de la comparación
Tan pronto como modifique un objeto, los resultados de la comparación dejarán de ser válidos
y deberán actualizarse.

Requisitos
Se ha realizado una comparación detallada.

Procedimiento
Para actualizar los resultados de la comparación, proceda del siguiente modo:
1. Haga clic en el botón "Actualizar resultados de la comparación" de la barra de herramientas.

Consulte también
Principios básicos para comparar programas de PLC (Página 8411)
Iniciar una comparación detallada de bloques KOP/FUP/AWL/SCL (Página 8420)
Iniciar una comparación detallada de bloques GRAPH (Página 8423)
Representación del resultado de la comparación para KOP/FUP (Página 8428)
Representación del resultado de la comparación para AWL (Página 8432)
Representación del resultado de la comparación para SCL (Página 8435)
Representación del resultado de la comparación para GRAPH (Página 8438)
Navegar en la comparación detallada (Página 8444)
Modificar bloques durante la comparación detallada (Página 8445)

Programación del PLC
Manual de programación y manejo, 11/2019

8447

Comparación de programas de PLC
20.3 Comparar variables PLC

20.3

Comparar variables PLC
Existen las siguientes posibilidades de comparar variables PLC:
● Comparación offline/offline automática en el editor de comparación
Se comparan offline las tablas de variables PLC de los dispositivos seleccionados.
● Comparación offline/offline manual en el editor de comparación
Se comparan offline las tablas de variables PLC seleccionadas de los dispositivos.
● Comparación offline/online (solo S7-1500 a partir de la versión 2.5)
Las variables PLC del proyecto se comparan con las variables PLC del dispositivo
seleccionado.
● Comparación detallada
Mediante la comparación detallada se determinan las diferencias dentro de las tablas de
variables PLC. La comparación detallada se inicia en el editor de comparación, en el árbol
del proyecto o en la tabla "Variables PLC" (solo offline/online). La comparación detallada
offline/offline está disponible para todos los dispositivos; la comparación detallada offline/
online, solo para las CPU de la serie S7-1500 a partir de la versión 2.5.

Comparación offline/offline automática en el editor de comparación
Para realizar una comparación offline/offline automática de tablas de variables PLC, proceda
del siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
offline.
2. Elija el comando "Comparar > offline/offline" del menú contextual.
Se abre el editor de comparación y el dispositivo seleccionado se muestra en el área
izquierda.
3. Arrastre otro dispositivo mediante Drag & Drop a la superficie de arrastre del área derecha.
El dispositivo comparado puede ser del mismo proyecto, de un proyecto de referencia o de
la librería.
4. Abra la carpeta "Variables PLC".
Los símbolos del área de estados y acciones indican el estado de las tablas de variables
PLC. Dependiendo de su estado se pueden definir determinadas acciones.
En todo momento se pueden arrastrar otros dispositivos a las áreas de arrastre para realizar
nuevas comparaciones.

Comparación offline/offline manual en el editor de comparación
Para realizar una comparación offline/offline manual de tablas de variables PLC, proceda del
siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
offline.
2. Elija el comando "Comparar > offline/offline" del menú contextual.
Se abre el editor de comparación y el dispositivo seleccionado se muestra en el área
izquierda.

8448

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.3 Comparar variables PLC
3. Arrastre otro dispositivo mediante Drag & Drop a la superficie de arrastre del área derecha.
El dispositivo comparado puede ser del mismo proyecto, de un proyecto de referencia o de
la librería.
4. En el área de estado y acción haga clic en el botón para conmutar entre la comparación
automática y manual.
5. Seleccione las tablas de variables PLC que desee comparar.
Se muestra la comparación de propiedades. Los símbolos indican el estado.
En todo momento se pueden arrastrar otros dispositivos a las áreas de arrastre para realizar
nuevas comparaciones.

Realizar una comparación offline/online (solo S7-1500 a partir de la versión 2.5)
Para realizar una comparación offline/online de tablas de variables PLC, proceda del siguiente
modo:
1. En el árbol del proyecto, seleccione un dispositivo que permita una comparación offline/
online.
2. Elija el comando "Comparar > offline/online" del menú contextual.
3. Si hasta ahora no se ha establecido ninguna conexión online con ese dispositivo, aparecerá
el cuadro de diálogo "Establecer conexión online". En ese caso, ajuste todos los
parámetros necesarios para la conexión y haga clic en "Conectar".
Se establece la conexión online y se abre el editor de comparación.
4. Abra la carpeta "Variables PLC".
Los símbolos del área de estados y acciones indican el estado de las tablas de variables
PLC. Dependiendo del estado de los objetos, se pueden definir determinadas acciones. No
obstante, tenga en cuenta que en una acción de sincronización solo es posible ejecutar
acciones en un sentido.

Iniciar la comparación detallada desde el editor de comparación
Para iniciar una comparación detallada de una tabla de variables PLC desde el editor de
comparación, proceda del siguiente modo:
1. Realice una comparación offline/offline u offline/online.
Se abre el editor de comparación.
2. Para una comparación offline/offline u offline/online automática, seleccione en el editor de
comparación la tabla de variables PLC con la que desee realizar una comparación
detallada. En una comparación offline/offline manual, tenga en cuenta que deben
seleccionarse dos tablas de variables PLC para poder realizar la comparación.
3. Haga clic en el botón "Iniciar comparación detallada" de la barra de herramientas.
Se abrirá un editor de comparación propio. Todas las variables PLC y constantes de
usuario disponibles de las tablas de variables PLC seleccionadas se muestran conforme a
los ajustes del editor de comparación. Las constantes de sistema no se visualizan. Los
símbolos indican el estado de las variables PLC. Dependiendo del estado de las variables
PLC, se pueden definir determinadas acciones en una comparación offline/offline.

Programación del PLC
Manual de programación y manejo, 11/2019

8449

Comparación de programas de PLC
20.3 Comparar variables PLC

Iniciar la comparación detallada desde el árbol del proyecto
Para iniciar una comparación detallada offline/offline de una tabla de variables PLC en el árbol
del proyecto, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en la tabla de variables PLC que desee comparar.
Puede ser también una tabla de variables PLC de un proyecto de referencia.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en la tabla de variables PLC que desee comparar
con la tabla de variables PLC que se ha seleccionado anteriormente como objeto izquierdo.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.
Se abrirá un editor de comparación propio. Todas las variables PLC y constantes de
usuario disponibles de las tablas de variables PLC seleccionadas se muestran conforme a
los ajustes del editor de comparación. Las constantes de sistema no se visualizan. Los
símbolos indican el estado de las variables PLC. Dependiendo del estado de las variables
PLC se pueden definir determinadas acciones.
Para iniciar una comparación detallada offline/online de una tabla de variables PLC
directamente en el árbol del proyecto, proceda del siguiente modo:
1. Establezca una conexión online con el dispositivo en el que se encuentra la tabla de
variables PLC.
2. Haga clic con el botón derecho del ratón en la tabla de variables PLC que desee comparar
con su objeto online.
3. En el menú contextual, elija el comando "Comparación rápida > Comparar con el objeto
online".
Se abrirá un editor de comparación propio. Todas las variables PLC y constantes de
usuario disponibles de las tablas de variables PLC seleccionadas se muestran conforme a
los ajustes del editor de comparación. Las constantes de sistema no se visualizan. Los
símbolos indican el estado de las variables PLC.

Iniciar la comparación detallada en la tabla "Variables PLC"
Para iniciar una comparación detallada offline/online de una tabla de variables PLC en la tabla
"Mostrar todas las variables", proceda del siguiente modo:
1. Establezca una conexión online con el dispositivo en el que se encuentra la tabla de
variables PLC.
2. En el árbol del proyecto, abra la carpeta "Variables PLC" situada debajo de la CPU.
3. Haga doble clic en la entrada "Mostrar todas las variables".
Se abre la tabla "Variables PLC".
4. Haga clic en el botón "Iniciar comparación detallada" de la barra de herramientas.
Se abrirá un editor de comparación propio. Todas las variables PLC y constantes de
usuario existentes en las tablas de variables PLC seleccionadas se muestran conforme a
los ajustes del editor de comparación. Las constantes de sistema no se visualizan. Los
símbolos indican el estado de las variables PLC.

8450

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.4 Comparar tipos de datos PLC

Consulte también
Introducción a la comparación de programas de PLC (Página 8411)
Comparar tipos de datos PLC (Página 8451)
Comparar bloques (Página 8419)

20.4

Comparar tipos de datos PLC
Existen las siguientes posibilidades de comparar tipos de datos PLC:
● Comparación offline/online (solo S7-1200/1500)
Los tipos de datos PLC del proyecto se comparan con los tipos de datos PLC del dispositivo
seleccionado.
● Comparación offline/offline automática en el editor de comparación
Se comparan offline los tipos de datos PLC de los dispositivos seleccionados.
● Comparación offline/offline manual en el editor de comparación
Se comparan offline los tipos de datos PLC seleccionadas de los dispositivos.
● Comparación detallada
Mediante la comparación detallada se determinan las diferencias entre los tipos de datos
PLC. La comparación detallada se inicia en el editor de comparación, en el árbol del
proyecto o en una librería. Esto es posible tanto con tipos como con copias maestras.

Ejecutar una comparación offline/online de tipos de datos PLC desde el editor de comparación
Para realizar una comparación offline/online, proceda del siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
online.
2. Elija el comando "Comparar > offline/online" del menú contextual.
Si hasta ahora no se ha establecido ninguna conexión online para ese dispositivo,
aparecerá el cuadro de diálogo "Establecer conexión online". En ese caso, ajuste todos los
parámetros necesarios para la conexión y haga clic en "Conectar".
La conexión online se establece y se abre el editor de comparación.
3. Abra la carpeta "Tipos de datos PLC".
Los símbolos del área de estado y acción indican el estado de los tipos de datos PLC. Si se
selecciona un objeto, las propiedades del tipo de datos PLC y del tipo de datos PLC
correspondiente al dispositivo asignado se muestran en la comparación de propiedades.

Comparación offline/offline automática en el editor de comparación
Para realizar una comparación offline/offline automática de tipos de datos PLC, proceda del
siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
offline.
2. Elija el comando "Comparar > offline/offline" del menú contextual.
Se abre el editor de comparación y el dispositivo seleccionado se muestra en el área
izquierda.
Programación del PLC
Manual de programación y manejo, 11/2019

8451

Comparación de programas de PLC
20.4 Comparar tipos de datos PLC
3. Arrastre otro dispositivo mediante Drag & Drop a la superficie de arrastre del área derecha.
El dispositivo comparado puede ser del mismo proyecto, de un proyecto de referencia o de
la librería.
4. Abra la carpeta "Tipos de datos PLC".
Los símbolos del área de estado y acción indican el estado de los tipos de datos PLC.
Dependiendo de su estado se pueden definir determinadas acciones. En todo momento se
pueden arrastrar otros dispositivos a las áreas de arrastre para realizar nuevas
comparaciones.

Comparación offline/offline manual en el editor de comparación
Para realizar una comparación offline/offline manual de tipos de datos PLC, proceda del
siguiente modo:
1. Seleccione en el árbol del proyecto un dispositivo que permita una comparación offline/
offline.
2. Elija el comando "Comparar > offline/offline" del menú contextual.
Se abre el editor de comparación y el dispositivo seleccionado se muestra en el área
izquierda.
3. Arrastre otro dispositivo mediante Drag & Drop a la superficie de arrastre del área derecha.
El dispositivo comparado puede ser del mismo proyecto, de un proyecto de referencia o de
la librería.
4. En el área de estado y acción haga clic en el botón para conmutar entre la comparación
automática y manual.
5. Seleccione los tipos de datos PLC que desee comparar.
Se muestra la comparación de propiedades. Los símbolos indican el estado. En todo
momento se pueden arrastrar otros dispositivos a las áreas de arrastre para realizar nuevas
comparaciones.

Iniciar la comparación detallada desde el editor de comparación
Para iniciar una comparación detallada de un tipo de datos PLC desde el editor de
comparación, proceda del siguiente modo:
1. Efectúe una comparación offline/offline. Con las CPU de la serie S7-1200/1500 también es
posible realizar una comparación offline/online.
2. Para una comparación offline/offline automática, seleccione en el editor de comparación el
tipo de datos PLC con el que desee realizar una comparación detallada. En una
comparación offline/offline manual, tenga en cuenta que deben seleccionarse dos tipos de
datos PLC para poder realizar la comparación.
3. Haga clic en el botón "Iniciar comparación detallada" de la barra de herramientas.
Se abre la ventana "Comparación de tipos de datos PLC" y se muestran todas las variables
de los tipos de datos PLC comparados. En la ventana de inspección se ven las diferencias
en "Información > Resultado de la comparación".

8452

Programación del PLC
Manual de programación y manejo, 11/2019

Comparación de programas de PLC
20.4 Comparar tipos de datos PLC

Iniciar la comparación detallada desde el árbol del proyecto
Para iniciar una comparación detallada offline/offline de un tipo de datos PLC directamente
desde el árbol del proyecto, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en el tipo de datos PLC que desee comparar.
Puede ser también un tipo de datos PLC de un proyecto de referencia.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el tipo de datos PLC que desee comparar con
el tipo de datos PLC seleccionado anteriormente como objeto izquierdo.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.
Se abre la ventana "Comparación de tipos de datos PLC" y se muestran todas las variables
de los tipos de datos PLC comparados. En la ventana de inspección se ven las diferencias
en "Información > Resultado de la comparación".
Para iniciar una comparación detallada offline/online de un tipo de datos PLC directamente
desde el árbol del proyecto con una CPU de la serie S7-1200/1500, proceda del siguiente
modo:
1. Establezca una conexión online con el dispositivo en el que se encuentra el bloque.
2. Haga clic con el botón derecho del ratón en el tipo de datos PLC que desee comparar con
su objeto online.
3. En el menú contextual, elija el comando "Comparación rápida > Comparar con el objeto
online".
Se abre la ventana "Comparación de tipos de datos PLC" y se muestran todas las variables
de los tipos de datos PLC comparados. En la ventana de inspección se ven las diferencias
en "Información > Resultado de la comparación".

Iniciar la comparación detallada en una librería
Para iniciar una comparación detallada de un tipo de datos PLC directamente en una librería,
haga lo siguiente:
1. Haga clic con el botón derecho del ratón en el tipo de datos PLC de la librería del proyecto
o la librería global que desee comparar.
2. En el menú contextual, elija el comando "Comparación rápida > Seleccionar como objeto
izquierdo".
3. Haga clic con el botón derecho del ratón en el tipo de datos PLC que desee comparar con
el bloque seleccionado anteriormente como objeto izquierdo. Puede ser un tipo de datos
PLC del proyecto actual, de un proyecto de referencia o de una librería.
4. En el menú contextual, elija el comando "Comparación rápida > Comparar con <objeto
seleccionado>". El "<objeto seleccionado>" es el objeto de comparación izquierdo.

Programación del PLC
Manual de programación y manejo, 11/2019

8453

Comparación de programas de PLC
20.4 Comparar tipos de datos PLC

Consulte también
Introducción a la comparación de programas de PLC (Página 8411)
Comparar bloques (Página 8419)
Comparar variables PLC (Página 8448)

8454

Programación del PLC
Manual de programación y manejo, 11/2019

21

Mostrar información del programa
21.1

Resumen de la información del programa disponible

Información del programa
La información disponible para un programa de usuario contiene las vistas indicadas en la
tabla siguiente.
Vista

Aplicación

Plano de ocupación (Página 8456)

Proporciona una vista general de los bits de los
operandos de las áreas de memoria I, Q y M que
ya están ocupados en el programa de usuario.
Además, indica si una dirección está ocupada por
un acceso desde un programa S7 o si está asig‐
nada a un módulo S7 SIMATIC.

Estructura de llamadas (Página 8465)

Muestra la jerarquía de llamada de los bloques
dentro de un programa de usuario y proporciona
una vista general de los bloques utilizados y sus
dependencias.

Estructura de dependencias (Página 8472)

Muestra la lista de los bloques utilizados en el pro‐
grama de usuario. En el primer nivel aparece el
bloque en cuestión y debajo se relacionan sangra‐
dos los bloques que lo llaman o utilizan. Al contra‐
rio que en la estructura de llamada, aquí los blo‐
ques de datos instancia se listan por separado.

Carga de la memoria (Página 8478)

Muestra la carga de la memoria de hardware de la
CPU para objetos (OB, FC, FB, DB, tipos de datos
definidos por el usuario y variables PLC), para
áreas de la memoria de la CPU y para los módulos
de entradas y salidas existentes.

Representación simultánea de varias vistas
Es posible generar y visualizar varias vistas para uno o varios programas de usuario, con
objeto de facilitar la comprobación y modificación del programa de usuario.
La visualización de varias vistas permite, p. ej.:
● Visualizar toda la información de un programa de usuario dispuesta una junto a otra
● Realizar una comparación de diferentes programas de usuario

Programación del PLC
Manual de programación y manejo, 11/2019

8455

Mostrar información del programa
21.2 Visualizar el plano de ocupación

21.2

Visualizar el plano de ocupación

21.2.1

Introducción al plano de ocupación

Información del programa en el plano de ocupación
El plano de ocupación indica si una dirección está ocupada por un acceso desde un programa
S7 o si está asignada a un módulo S7 SIMATIC. Por ello, constituye un punto de partida
importante a la hora de buscar errores o realizar modificaciones en el programa de usuario.
El plano de ocupación proporciona una vista general específica de la CPU que indica qué bit
se utiliza en qué byte de las áreas de memoria listadas a continuación:
● Entrada (I)
● Salida (Q)
● Marca (M)
● Temporizadores (T)
● Contadores (C)
● Periferia (P)

Visualización del plano de ocupación
El plano de ocupación se visualiza en varias ventanas de trabajo, separadas por entradas,
salidas y marcas.

Filtrar
La vista dentro del plano de ocupación puede filtrarse. Para ello pueden utilizarse filtros
predefinidos o crearse filtros propios.

Visualización de la información de las referencias cruzadas
En el plano de ocupación es posible visualizar la información de las referencias cruzadas de
las direcciones seleccionadas.
Las referencias cruzadas de una dirección seleccionada se muestran en la ventana de
inspección con el comando "Información de referencia cruzada" del menú contextual. Además,
con el comando "Herramientas > Referencias cruzadas" se puede abrir la lista de referencias
cruzadas del objeto seleccionado.

Visualización de la tabla de variables PLC
Desde el plano de ocupación se puede abrir la tabla de variables PLC y editar en ella las
propiedades de las variables utilizadas.
Seleccione para ello una dirección del plano de ocupación y elija el comando "Abrir editor" del
menú contextual.

8456

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.2 Visualizar el plano de ocupación

Activar la indicación de la remanencia
En el plano de ocupación es posible activar y desactivar la indicación de la remanencia de las
marcas mediante el botón "Mostrar/ocultar remanencia" de la barra de herramientas.

Consulte también
Símbolos del plano de ocupación (Página 8458)
Estructura del plano de ocupación (Página 8457)

21.2.2

Estructura del plano de ocupación

Estructura del plano de ocupación
El plano de ocupación se muestra en varias ventanas de trabajo en función de la CPU, con los
siguientes operandos.
En CPU S7-300/400 y S7-1500:
● Entradas
● Salidas
● Marcas
● Temporizadores
● Contadores
En CPU S7-1200:
● Entradas
● Salidas
● Marcas

Vista de entradas, salidas, marcas, temporizadores y contadores
Se muestran todos los operandos utilizados, así como su ocupación en el programa S7.
Cada fila del plano de ocupación contiene, para cada uno de los operandos mostrados, un byte
del área de memoria en el que se identifican los ocho bits correspondientes de 7 a 0 en función
del acceso. A continuación se indica mediante una "barra" si el acceso corresponde a un byte
(B), a una palabra (W) o a una palabra doble (D).
Aquí encontrará una explicación de los símbolos utilizados en el plano de ocupación:
(Página 8458)

Consulte también
Introducción al plano de ocupación (Página 8456)

Programación del PLC
Manual de programación y manejo, 11/2019

8457

Mostrar información del programa
21.2 Visualizar el plano de ocupación

21.2.3

Símbolos del plano de ocupación

Significado de los símbolos del plano de ocupación
La tabla siguiente muestra el significado de los símbolos del plano de ocupación:
Símbolo

Significado
Muestra la asignación de direcciones en estado seleccionado.
Muestra la asignación de direcciones en estado no seleccionado.
Indica que una dirección inicial de puntero y una dirección de varia‐
ble acceden a la misma área de direccionamiento y que están se‐
leccionadas.
Indica que una dirección inicial de puntero y una dirección de varia‐
ble acceden a la misma área de direccionamiento y que no están
seleccionadas.
Muestra la asignación de punteros en estado seleccionado.
Muestra la asignación de punteros en estado no seleccionado.
Indica que el byte está ocupado por un acceso de byte y que la
variable correspondiente está seleccionada. A través del menú con‐
textual se puede visualizar la información de las referencias cruza‐
das de la variable seleccionada, así como la tabla de variables PLC.
Indica que el byte está ocupado por un acceso de byte y que la
variable correspondiente no está seleccionada.
Indica que el byte está ocupado por un acceso de palabra y que la
variable correspondiente está seleccionada. A través del menú con‐
textual se puede visualizar la información de las referencias cruza‐
das de la variable seleccionada, así como la tabla de variables PLC.
Indica que el byte está ocupado por un acceso de palabra y que la
variable correspondiente no está seleccionada.
Indica que el byte está ocupado por un acceso de palabra doble y
que la variable correspondiente está seleccionada. A través del me‐
nú contextual se puede visualizar la información de las referencias
cruzadas de la variable seleccionada, así como la tabla de variables
PLC.
Indica que el byte está ocupado por un acceso de palabra doble y
que la variable correspondiente no está seleccionada.

Color de fondo: gris

Indica que hay un acceso de byte, palabra o palabra doble y que la
dirección también está ocupada por el hardware. El color de fondo
gris indica que hay un acceso de memoria solapado.

Color de fondo: amarillo

Indica que la dirección no está ocupada por el hardware.
Indica que el área de memoria está definida como marca de sistema.
Indica que el área de memoria está definida como marca de ciclo.

8458

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.2 Visualizar el plano de ocupación

Consulte también
Estructura del plano de ocupación (Página 8457)
Introducción al plano de ocupación (Página 8456)

21.2.4

Visualizar el plano de ocupación

Requisitos
Se ha creado un proyecto con bloques programados.

Procedimiento
Para visualizar el plano de ocupación, proceda del siguiente modo:
1. Seleccione la carpeta "Bloques de programa" o bien uno o varios de los bloques que
contiene.
2. Elija el comando "Plano de ocupación" del menú "Herramientas".

Resultado
Se abrirá el plano de ocupación del programa seleccionado.

Opciones de visualización en el plano de ocupación
Tenga en cuenta las opciones de visualización configuradas para visualizar la información que
desee ver en el plano de ocupación.

Consulte también
Configurar las opciones de visualización del plano de ocupación (Página 8460)
Estructura del plano de ocupación (Página 8457)

Programación del PLC
Manual de programación y manejo, 11/2019

8459

Mostrar información del programa
21.2 Visualizar el plano de ocupación

21.2.5

Configurar las opciones de visualización del plano de ocupación

Introducción
Para el plano de ocupación existen las siguientes opciones de visualización:
● Direcciones utilizadas:
Si esta casilla de verificación está activada, se muestran las direcciones, la periferia y los
punteros utilizados.
● Direcciones de hardware libres:
Si esta casilla de verificación está activada, sólo se muestran las direcciones de hardware
libres.

Requisitos
● Se ha creado un proyecto con bloques programados.
● El plano de ocupación está abierto.

Procedimiento
Para configurar las opciones de visualización del plano de ocupación, proceda del siguiente
modo:
1. Haga clic en el botón
("Opciones de la vista") de la barra de herramientas.
Se abren las opciones de visualización del plano de ocupación. Las opciones de
visualización activadas aparecen con marcas de verificación antepuestas.
2. Para activar o desactivar una opción de visualización, haga clic en la casilla
correspondiente con objeto de activar o desactivar la marca de verificación.

Resultado
Las opciones de visualización se configurarán y en el plano de ocupación se mostrará la
información deseada.

8460

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.2 Visualizar el plano de ocupación

21.2.6

Posibilidades de filtrado en el plano de ocupación

Configuración de filtros
Es posible definir ajustes de filtrado personalizados para el plano de ocupación. Las siguientes
posibilidades están disponibles para definir filtros:
● Visualizar todas las direcciones utilizadas de las áreas de direccionamiento indicadas a
continuación.
● Visualizar direcciones individuales definidas del área de direccionamiento seleccionada, p.
ej. "0" y "200".
● Visualizar áreas completas del área de direccionamiento seleccionada, p. ej. "0 - 256".
La tabla siguiente muestra una sinopsis de todas las posibilidades de selección:
Selección en

Selección

Símbolo

Significado

Área de direcciona‐ Pueden seleccionarse todas las di‐ La casilla de verificación está
miento
recciones (I, Q, M, T, C) mostradas activada
dependientes de la CPU, como en
el ajuste predeterminado, o solo
áreas de direccionamiento indivi‐
duales.

En el plano de ocupación se
muestran solo las áreas de di‐
reccionamiento activadas (I, Q,
M, T, C).

Área de filtro

21.2.7

Mostrar la ocupación de todas las
direcciones

*

Se muestra la ocupación de to‐
das las direcciones utilizadas
para las áreas de direcciona‐
miento activadas (I, Q, M).

Mostrar la ocupación de las direc‐
ciones seleccionadas, p. ej. de las
entradas "IB 0" e "IB 256"

0;256

Se muestra la ocupación de las
direcciones citadas para las
áreas de direccionamiento acti‐
vadas (I).

Mostrar la ocupación de las áreas
seleccionadas, p. ej. de las entra‐
das de "IB 0 hasta IB 100" y de "IB
200 hasta IB 256".

0-100;200-256

Las diferentes direcciones y
áreas están separadas por
punto y coma.
Las áreas relacionadas deben
unirse con un guión.

Se muestra la ocupación de las
áreas citadas para las áreas de
direccionamiento activadas (I).

Definir filtros para el plano de ocupación

Requisitos
● Se ha creado un proyecto con bloques programados.
● El plano de ocupación está abierto.

Programación del PLC
Manual de programación y manejo, 11/2019

8461

Mostrar información del programa
21.2 Visualizar el plano de ocupación

Definir filtros
Para definir un filtro para el plano de ocupación, proceda del siguiente modo:
1. Haga clic en el botón
("Filtro") de la barra de herramientas.
Se abre el diálogo "Lista de asignaciones Filtro".
2. Haga clic en el botón
("Crear nuevo filtro").
Se crea un filtro nuevo con el nombre "Filtro_1". En el ajuste predeterminado para el filtro
están activadas las casillas de verificación de todas las direcciones (p. ej., entradas,
salidas, marcas, temporizadores y contadores) en función de la CPU.
3. Para cambiar el nombre del filtro, haga clic en la lista desplegable de la barra de
herramientas e introduzca un nuevo nombre de filtro.
4. Desactive las casillas de verificación de las direcciones a las que no desee aplicar el filtro.
5. Introduzca una de las siguientes opciones en el área de filtro de las direcciones activadas:
– Mostrar todas las direcciones utilizadas = "*"
– Mostrar direcciones individuales definidas, p. ej. IB 0 e IB 25 = "0,25". Las diferentes
direcciones y áreas de direccionamiento están separadas por comas o punto y coma.
– Mostrar las áreas de direccionamiento completas, p. ej. de IB 0 a IB 256 = "0-256". Las
áreas de direccionamiento completas deben unirse con un guión.
6. Confirme las entradas con "Aceptar".
El nuevo filtro se visualiza con el nombre predeterminado en la barra de herramientas del
plano de ocupación.

Borrar filtros
Para borrar un filtro, proceda del siguiente modo:
1. Haga clic en el botón
("Filtro") de la barra de herramientas.
Se abre el cuadro de diálogo "Filtro" para el plano de ocupación.
2. Seleccione el filtro que desee borrar en la lista desplegable de la barra de herramientas.
3. Haga clic en el botón
("Borrar filtro seleccionado").
El filtro seleccionado se borra.

Consulte también
Posibilidades de filtrado en el plano de ocupación (Página 8461)
Visualizar el plano de ocupación (Página 8459)
Introducción al plano de ocupación (Página 8456)

8462

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.2 Visualizar el plano de ocupación

21.2.8

Filtrar el plano de ocupación

Requisitos
● Se ha creado un proyecto con bloques programados.
● El plano de ocupación está abierto.

Procedimiento
1. Haga clic en la flecha de la lista desplegable de la barra de herramientas.
Se mostrarán los filtros disponibles.
2. Seleccione el filtro que desee utilizar.

Resultado
El plano de ocupación se filtrará según la configuración del filtro seleccionado.
Nota
La configuración del filtro se guarda al cerrar el proyecto.

21.2.9

Definir áreas de memoria remanentes para marcas

Introducción
En el plano de ocupación es posible definir el ancho del área de memoria remanente para
marcas. El contenido de las variables direccionadas en el área de memoria remanente se
conserva tras desconectar y volver a conectar la alimentación en un cambio de STOP a RUN.
La visualización de las marcas remanentes en el plano de ocupación puede activarse y
desactivarse. Con la visualización correspondiente activada, las marcas remanentes se
distinguen por el icono de la columna "Dirección".

Requisitos
El plano de ocupación está abierto.

Programación del PLC
Manual de programación y manejo, 11/2019

8463

Mostrar información del programa
21.2 Visualizar el plano de ocupación

Procedimiento
Para definir el ancho del área de memoria remanente para marcas, proceda del siguiente
modo:
1. Haga clic en el botón "Remanencia" de la barra de herramientas.
Se abre el cuadro de diálogo "Memoria remanente".
2. Defina el ancho del área de memoria remanente introduciendo en el campo de entrada el
último byte del área contando a partir de 0. Tenga en cuenta las direcciones de variables
existentes definidas como remanentes.
3. A continuación cargue los bloques modificados en el sistema de destino. Seleccione para
ello la carpeta "Bloques de programa" del árbol del proyecto y elija el comando "Cargar en
dispositivo" del menú contextual.

Resultado
El ancho del área de memoria remanente se definirá. Si está activada la indicación de la
remanencia en el plano de ocupación, en la columna "Dirección" aparecerá el icono
correspondiente para todas las variables remanentes.

21.2.10

Activar la indicación de la remanencia de marcas

Introducción
En el plano de ocupación se puede activar y desactivar la indicación de las marcas
remanentes. Si activa la indicación de la remanencia, las marcas definidas como remanentes
se identifican con un icono en la columna "Dirección".

Requisitos
El plano de ocupación está abierto.

Procedimiento
Para activar y desactivar la indicación de las marcas remanentes, proceda del siguiente modo:
1. Haga clic en el botón "Mostrar/ocultar remanencia" de la barra de herramientas.

Resultado
Si está activada la indicación de la remanencia, las variables definidas como remanentes se
identificarán con un icono en la columna "Dirección" del área de marcas. Si se desactiva la
indicación de la remanencia, se ocultarán los iconos de la columna "Dirección".

8464

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.3 Mostrar la estructura de llamada

21.3

Mostrar la estructura de llamada

21.3.1

Introducción a la estructura de llamadas

Estructura de llamadas
La estructura de llamada describe la jerarquía de llamada de los bloques dentro de un
programa S7.
Proporciona una vista general sobre:
● Bloques utilizados
● Saltos a las ubicaciones de los bloques
● Dependencias entre los bloques
● Requerimiento de datos locales de los bloques
● Estado de los bloques

Información contenida en la estructura de llamada
En la vista de la estructura de llamada aparece una lista de los bloques utilizados en el
programa de usuario. El primer nivel de la estructura de llamada está resaltado en color y
muestra los bloques que no son llamados por ningún otro bloque del programa. Los bloques
de organización siempre se muestran en el primer nivel de la estructura de llamada. Los
bloques de función, bloques de datos y funciones sólo se muestran en el primer nivel si no son
llamados por ningún bloque de organización. Si un bloque llama otros bloques o funciones,
éstos se indican debajo del bloque en una lista sangrada. Las instrucciones y los bloques solo
se representan en la estructura de llamadas si son llamados por un bloque.
Nota
Tenga en cuenta que en el caso de los bloques con protección de know-how no se muestra la
estructura de llamadas.

Programación del PLC
Manual de programación y manejo, 11/2019

8465

Mostrar información del programa
21.3 Mostrar la estructura de llamada

Opciones de visualización
Para la estructura de llamada existen las siguientes opciones de visualización:
● Mostrar sólo conflictos:
Si esta casilla de verificación está activada, en la estructura de llamada sólo se mostrarán
conflictos.
● Agrupar varias llamadas:
Si esta casilla de verificación está activada, se agruparán varias llamadas de bloque. El
número de llamadas de bloque se indica en la columna "Número de llamadas". Los enlaces
a los diferentes puntos de llamada se ofrecen en una lista desplegable en la columna
"Detalles".

Visualización de las llamadas de bloque
Para ver las llamadas de bloque contenidas en un bloque, haga clic en la flecha antepuesta al
título del bloque. Para ver la información de llamada de todos los bloques, haga clic en el
símbolo "Ampliar lista" de la barra de herramientas.
Para contraer la vista general, haga clic en el símbolo "Reducir lista".

Visualización de la información de las referencias cruzadas
Para ver la información de las referencias cruzadas de un bloque en la ventana de inspección,
haga clic en el bloque en cuestión con el botón derecho del ratón y seleccione la opción
"Información de referencia cruzada" del menú contextual.
Para abrir la vista "Referencias cruzadas", elija el comando "Referencias cruzadas" del menú
contextual.

Mostrar los bloques en el editor de programación
Desde la estructura de llamada se puede abrir el editor de programación y editar allí los
bloques.
Para ello seleccione el bloque deseado en la estructura de llamadas y elija el comando "Abrir
editor" del menú contextual.

Mostrar los bloques borrados
Las filas correspondientes a bloques borrados se identifican con un símbolo.
Nota
Tenga en cuenta que los datos locales, si los hay, no se podrán mostrar o actualizar hasta que
se haya compilado un bloque.

8466

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.3 Mostrar la estructura de llamada

Consulte también
Símbolos utilizados en la estructura de llamadas (Página 8467)

21.3.2

Símbolos utilizados en la estructura de llamadas

Significado de los símbolos utilizados en la estructura de llamada
La tabla siguiente muestra a modo de ejemplo el significado de los símbolos de la estructura
de llamada:
Símbolo

Significado
Indica un bloque de organización (OB).
Indica un bloque de función (FB).
Indica una función (FC).
Indica un bloque de datos (OB).
Indica que el bloque está declarado como multiinstancia o como instancia de
parámetro.
Indica que el objeto tiene una dependencia de interfaz con el objeto conectado
a su izquierda.
Indica que el bloque debe volver a compilarse.
Indica que el bloque de datos debe volver a compilarse.
Indica que el objeto no existe.
Indica que la interfaz causa un conflicto de sello de tiempo.
Indica que una variable causa un conflicto de sello de tiempo.
Indica que el bloque no es llamado directa ni indirectamente por un OB.
Indica que un objeto dispone de protección de know-how.
Indica que una declaración de variables de la interfaz tiene una dependencia
recursiva:
● Caso 1: FB1 llama a FB2 y éste llama a FB1. Los bloques de datos de
instancia de estos FB presentan una recursión en la interfaz.
● Caso 2: Un FB multiinstancia utiliza el DB de instancia de su FB padre como
DB global.
Indica que el bloque es llamado regularmente de forma recursiva.
Indica que un bloque es llamado de forma recursiva con condición.
Indica que un bloque es llamado de forma recursiva sin condición.

Programación del PLC
Manual de programación y manejo, 11/2019

8467

Mostrar información del programa
21.3 Mostrar la estructura de llamada

21.3.3

Composición de la estructura de llamadas

Estructura de llamadas
La vista de la estructura de llamadas se compone de las siguientes columnas:
Columna

Contenido/significado

Estructura de llamadas

Muestra una vista general de los bloques llamados
Si la opción "Agrupar varias llamadas" está activada, se
agrupan varias llamadas de bloque y se muestra la columna
"Número de llamadas".

Tipo de llamada (!)

Muestra el tipo de llamada, p. ej. llamada de bloque recursi‐
va.

Dirección

Muestra la dirección absoluta del bloque. En un bloque de
función también se muestra la dirección absoluta del bloque
de datos instancia correspondiente.

Número de llamadas

Indica el número de llamadas múltiples de bloques.

Detalles

Muestra el segmento o interfaz del bloque que llama. Toda la
información de esta columna se ofrece en forma de enlace.
A través de este enlace se accede a la posición del editor de
programación en la que se encuentra la llamada del bloque.
Si la opción "Agrupar varias llamadas" está activada, las lla‐
madas se agrupan y los enlaces aparecen en una lista des‐
plegable.

Datos locales (en la ruta)

Muestra el requerimiento de datos locales clásico de toda la
ruta.
Los bloques con acceso optimizado requieren un mayor nú‐
mero de datos locales, ya que también se almacena la infor‐
mación de la dirección simbólica.
Tenga en cuenta que los datos locales, si los hay, no se
podrán mostrar o actualizar hasta que se haya compilado un
bloque.

Datos locales (para bloques)

Muestra el requerimiento de datos locales del bloque.
Los bloques con acceso optimizado requieren un mayor nú‐
mero de datos locales, ya que también se almacena la infor‐
mación de la dirección simbólica.
Tenga en cuenta que los datos locales, si los hay, no se
podrán mostrar o actualizar hasta que se haya compilado un
bloque.

Consulte también
Símbolos utilizados en la estructura de llamadas (Página 8467)
Introducción a la comprobación de coherencia en la estructura de llamada (Página 8471)

8468

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.3 Mostrar la estructura de llamada

21.3.4

Mostrar la estructura de llamadas

Requisitos
Se ha creado un proyecto con bloques programados.

Procedimiento
Para ver la estructura de llamada, proceda del siguiente modo:
1. Seleccione la carpeta "Bloques de programa" o bien uno o varios de los bloques que
contiene.
2. Elija el comando "Estructura de llamadas" del menú "Herramientas".

Resultado
Se abrirá la estructura de llamadas del programa seleccionado.
Nota
Tenga en cuenta que los datos locales, si los hay, no se podrán mostrar o actualizar hasta que
se haya compilado un bloque.

Consulte también
Configurar las opciones de visualización de la estructura de llamadas (Página 8470)

Programación del PLC
Manual de programación y manejo, 11/2019

8469

Mostrar información del programa
21.3 Mostrar la estructura de llamada

21.3.5

Configurar las opciones de visualización de la estructura de llamadas

Introducción
Para la estructura de llamada se dispone de las siguientes opciones de visualización:
● Mostrar sólo conflictos:
Si esta casilla de verificación está activada, en la estructura de llamada sólo se mostrarán
bloques con conflictos.
Los siguientes bloques causan un conflicto:
– Bloques que tienen un sello de tiempo del código anterior o posterior a una de sus
llamadas.
– Bloques que llaman un bloque cuya interfaz ha cambiado.
– Bloques que utilizan una variable cuya dirección y/o tipo de datos ha cambiado.
– Bloques que no son llamados ni directa ni indirectamente por un OB.
– Bloques que llaman un bloque que ya no existe.
● Agrupar varias llamadas:
Si esta opción de visualización está activada, se agruparán varias llamadas de bloque y
varios accesos a bloques de datos. El número de llamadas de bloque se indica en la
columna "Número de llamadas". Los enlaces a los diferentes puntos de llamada se ofrecen
en una lista desplegable en la columna "Detalles".

Requisitos
● Se ha creado un proyecto con bloques programados.
● La estructura de llamada está abierta.

Procedimiento
Para configurar las opciones de visualización de la estructura de llamada, proceda del
siguiente modo:
1. Haga clic en el botón
("Opciones de la vista") de la barra de herramientas.
Se abren las opciones de visualización de la estructura de llamada. Las opciones de
visualización activadas aparecen con marcas de verificación antepuestas.
2. Para activar o desactivar una opción de visualización, haga clic en la casilla
correspondiente con objeto de activar o desactivar la marca de verificación.

Resultado
Las opciones de visualización se configurarán y en la estructura de llamadas se mostrará la
información deseada.

8470

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.3 Mostrar la estructura de llamada

21.3.6

Introducción a la comprobación de coherencia en la estructura de llamada

Comprobación de coherencia
Los cambios del sello de tiempo de un bloque ocurridos durante o después de la creación del
programa pueden provocar conflictos de sello de tiempo, que a su vez pueden derivar en
incoherencias entre los bloques invocantes y los llamados.

Utilización de la comprobación de coherencia
La función "Comprobación de coherencia" permite visualizar incoherencias en conflictos de
sello de tiempo. Cuando se realiza la comprobación de coherencia, los bloques incoherentes
se muestran en la estructura de llamada y se identifican con los símbolos correspondientes.
● Gran parte de los conflictos de sello de tiempo y de interfaz pueden eliminarse volviendo a
compilar los bloques.
● Si no es posible depurar incoherencias mediante compilación, se puede ir al punto concreto
del problema en el editor de programación a través del enlace de la columna "Detalles" y
depurar las incoherencias manualmente.
● Los bloques marcados en rojo tienen que volver a compilarse.

Consulte también
Símbolos utilizados en la estructura de llamadas (Página 8467)

21.3.7

Comprobar la coherencia de bloques en la estructura de llamada

Requisitos
● Se ha creado un proyecto con bloques programados.
● La estructura de llamada está abierta.

Procedimiento
Para comprobar la coherencia de bloques, proceda del siguiente modo:
1. Haga clic en el botón
("Comprobación de coherencia") de la barra de herramientas.
Se comprobará la coherencia de bloques. Los bloques que presentan incoherencias se
identifican con el símbolo correspondiente.
2. Si un bloque presenta incoherencias, haga clic en la flecha antepuesta al título del bloque
correspondiente en la estructura de llamada.
Se mostrarán los bloques incoherentes. En la columna "Detalles" se listan los puntos
problemáticos en forma de enlaces.

Programación del PLC
Manual de programación y manejo, 11/2019

8471

Mostrar información del programa
21.4 Mostrar la estructura de dependencias
3. Para saltar al punto del bloque que se debe depurar, haga clic en el enlace correspondiente
de la columna "Detalles".
4. Compruebe y corrija las incoherencias de los bloques.
5. Vuelva a compilar los bloques seleccionando los bloques deseados y eligiendo el comando
"Compilar" del menú contextual.
6. Cargue los bloques corregidos en el sistema de destino haciendo clic en el comando
"Cargar en dispositivo" del menú contextual.

Resultado
Se comprobará la coherencia de bloques. Se depurarán las incoherencias de los bloques. Los
bloques corregidos se cargarán en el sistema de destino.

Consulte también
Símbolos utilizados en la estructura de llamadas (Página 8467)

21.4

Mostrar la estructura de dependencias

21.4.1

Introducción a la estructura de dependencias

Introducción
La estructura de dependencias muestra la dependencia de cada bloque del programa respecto
a otros bloques.

Información visualizada en la estructura de dependencias
En la vista de la estructura de dependencias aparece una lista de los bloques utilizados en el
programa de usuario. En el extremo izquierdo se muestra el bloque en cuestión y debajo se
relacionan sangrados los bloques que lo llaman o utilizan.
La estructura de dependencias muestra además el estado de los distintos bloques mediante
símbolos.
Los objetos que causan un conflicto de sello de tiempo y que pueden provocar una
incoherencia en el programa se identifican mediante diferentes símbolos.
La estructura de dependencias complementa la lista de referencias cruzadas de los objetos.

8472

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.4 Mostrar la estructura de dependencias

Opciones de visualización
Para la estructura de dependencias se dispone de las siguientes opciones de visualización:
● Mostrar sólo conflictos:
Si esta casilla de verificación está activada, en la estructura de dependencias sólo se
mostrarán conflictos.
● Agrupar varias llamadas:
Si esta casilla de verificación está activada, se agruparán varias llamadas de bloque. El
número de llamadas de bloque se indica con un valor numérico en la columna "Estructura
de dependencias". Los enlaces a los diferentes puntos de llamada se ofrecen en una lista
desplegable en la columna "Detalles".

Visualización de las dependencias
Al hacer clic en la flecha situada delante del título de un bloque se visualizan los bloques en los
que se llama o utiliza dicho bloque. Para mostrar las dependencias de todos los bloques,
haga clic en el símbolo "Ampliar lista" de la barra de herramientas.
Para contraer la vista general, haga clic en el símbolo "Reducir lista".

Visualización de la información de las referencias cruzadas
Para ver la información de las referencias cruzadas de un bloque en la ventana de inspección,
haga clic en el bloque en cuestión con el botón derecho del ratón y seleccione la opción
"Información de referencia cruzada" del menú contextual.
Para abrir la vista "Referencias cruzadas", elija el comando "Referencias cruzadas" del menú
contextual.

Mostrar los bloques en el editor de programación
Desde la estructura de dependencias se puede abrir el editor de programación y editar en él
los bloques. Para ello seleccione el bloque deseado en la estructura de dependencias y elija
el comando "Abrir" del menú contextual.

21.4.2

Estructura de dependencias

Estructura de dependencias
La vista de la estructura de dependencias se compone de las siguientes columnas:
Columna

Contenido/significado

Dependencia

Muestra en un sinóptico las dependencias de cada bloque.

Tipo de llamada (!)

Muestra el tipo de llamada, p. ej. llamada de bloque recursi‐
va.

Dirección

Muestra la dirección absoluta del bloque.

Programación del PLC
Manual de programación y manejo, 11/2019

8473

Mostrar información del programa
21.4 Mostrar la estructura de dependencias
Columna

Contenido/significado

Número de llamadas

Indica el número de llamadas múltiples de bloques.

Detalles

Muestra el segmento o interfaz del bloque llamado. Toda la
información de esta columna se ofrece en forma de enlace.
A través de este enlace se accede a la posición del editor de
programación en la que se encuentra la llamada del bloque.
Si la opción "Agrupar varias llamadas" está activada, las lla‐
madas se agrupan y los enlaces aparecen en una lista des‐
plegable.

Consulte también
Símbolos utilizados en la estructura de dependencias (Página 8474)

21.4.3

Símbolos utilizados en la estructura de dependencias

Significado de los símbolos utilizados en la estructura de dependencias
La tabla siguiente muestra el significado de los símbolos de la estructura de dependencias:
Símbolo

Significado
Indica un bloque de organización (OB).
Indica un bloque de función (FB).
Indica una función (FC).
Indica un bloque de datos (OB).
Indica que el bloque está declarado como multiinstancia o como instancia de
parámetro.
Indica que el objeto tiene una dependencia de interfaz con el objeto conectado
a su izquierda.
Indica que el bloque debe volver a compilarse.

Indica que el bloque de datos debe volver a compilarse.
Indica que existe una incoherencia para este objeto.
Indica que un objeto dispone de protección de know-how.
Indica que una declaración de variables de la interfaz tiene una dependencia
recursiva:
● Caso 1: FB1 llama a FB2 y éste llama a FB1. Los bloques de datos de
instancia de estos FB presentan una recursión en la interfaz.
● Caso 2: Un FB multiinstancia utiliza el DB de instancia de su FB padre como
DB global.

8474

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.4 Mostrar la estructura de dependencias
Símbolo

Significado
Indica que el bloque es llamado regularmente de forma recursiva.
Indica que un bloque es llamado de forma recursiva con condición.
Indica que un bloque es llamado de forma recursiva sin condición.

21.4.4

Mostrar la estructura de dependencias

Requisitos
Se ha creado un proyecto con bloques programados.

Procedimiento
Para ver la estructura de dependencias, proceda del siguiente modo:
1. Seleccione la carpeta de bloques o bien uno o varios de los bloques que contiene.
2. Elija el comando "Estructura de dependencias" del menú "Herramientas".

Resultado
Se abrirá la estructura de dependencias del programa seleccionado.

Consulte también
Configurar las opciones de visualización de la estructura de dependencias (Página 8476)

Programación del PLC
Manual de programación y manejo, 11/2019

8475

Mostrar información del programa
21.4 Mostrar la estructura de dependencias

21.4.5

Configurar las opciones de visualización de la estructura de dependencias

Introducción
Para la estructura de dependencias se dispone de las siguientes opciones de visualización:
● Mostrar sólo conflictos:
Si esta casilla de verificación está activada, en la estructura de dependencias sólo se
mostrarán conflictos.
Los siguientes bloques causan un conflicto:
– Bloques que tienen un sello de tiempo del código anterior o posterior a una de sus
llamadas.
– Bloques invocados por un bloque cuya interfaz ha cambiado.
– Bloques que utilizan una variable cuya dirección y/o tipo de datos ha cambiado.
– Bloques que no son llamados ni directa ni indirectamente por un OB.
● Agrupar varias llamadas:
Si esta casilla de verificación está activada, se agruparán varias llamadas de bloque. El
número de llamadas de bloque se indica en la columna correspondiente. Los enlaces a los
diferentes puntos de llamada se ofrecen en una lista desplegable en la columna "Detalles".

Requisitos
● Se ha creado un proyecto con bloques programados.
● La estructura de dependencias está abierta.

Procedimiento
Para configurar las opciones de visualización de la estructura de dependencias, proceda del
siguiente modo:
1. Haga clic en el botón
("Opciones de la vista") de la barra de herramientas.
Se abren las opciones de visualización de la estructura de dependencias. Las opciones de
visualización activadas aparecen con marcas de verificación antepuestas.
2. Para activar o desactivar una opción de visualización, haga clic en la casilla
correspondiente con objeto de activar o desactivar la marca de verificación.

Resultado
Las opciones de visualización se configurarán y en la estructura de dependencias se mostrará
la información deseada.

8476

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.4 Mostrar la estructura de dependencias

21.4.6

Introducción a la comprobación de coherencia en la estructura de dependencias

Comprobación de coherencia
Los cambios del sello de tiempo de un bloque ocurridos durante o después de crear el
programa pueden provocar conflictos de sello de tiempo, que a su vez pueden derivar en
incoherencias entre los bloques invocantes y los llamados.

Utilización de la comprobación de coherencia
La función "Comprobación de coherencia" permite visualizar incoherencias. Cuando se realiza
la comprobación de coherencia, los bloques incoherentes se muestran en la estructura de
dependencias y se identifican con los símbolos correspondientes.
● Gran parte de los conflictos de sello de tiempo y de interfaz pueden eliminarse volviendo a
compilar los bloques.
● Si no es posible corregir las incoherencias mediante compilación, se puede ir al lugar
concreto del problema en el editor de programación a través del enlace de la columna
"Detalles" y corregir las incoherencias manualmente.
● Los bloques marcados en rojo tienen que volver a compilarse.

Consulte también
Estructura de dependencias (Página 8473)
Símbolos utilizados en la estructura de dependencias (Página 8474)

21.4.7

Comprobar la coherencia de bloques en la estructura de dependencias

Requisitos
● Se ha creado un proyecto con bloques programados.
● La estructura de dependencias está abierta.

Procedimiento
Para comprobar la coherencia de bloques, proceda del siguiente modo:
1. Haga clic en el botón
("Comprobación de coherencia") de la barra de herramientas.
Se comprobará la coherencia de bloques. Los bloques que presentan incoherencias se
marcan con el símbolo correspondiente.
2. Si un bloque presenta incoherencias, haga clic en la flecha antepuesta al título del bloque
correspondiente en la estructura de dependencias.
Se mostrarán los bloques incoherentes. En la columna "Detalles" se listan los puntos
problemáticos en forma de enlaces.

Programación del PLC
Manual de programación y manejo, 11/2019

8477

Mostrar información del programa
21.5 Mostrar la carga de la memoria de la CPU
3. Compruebe y corrija las incoherencias de los bloques.
4. Vuelva a compilar los bloques seleccionando los bloques deseados y eligiendo el comando
"Compilar" del menú contextual.
5. Cargue los bloques corregidos en el sistema de destino haciendo clic en el comando
"Cargar en dispositivo" del menú contextual.

Resultado
Se comprobará la coherencia de bloques. Se corregirán las incoherencias de los bloques. Los
bloques corregidos se cargarán en el sistema de destino.

Consulte también
Símbolos utilizados en la estructura de dependencias (Página 8474)

21.5

Mostrar la carga de la memoria de la CPU

21.5.1

Introducción a la carga de la memoria

Introducción
La ficha "Carga de la memoria" muestra la carga de la memoria de hardware de la CPU
configurada para:
● los objetos de programación utilizados
● la ocupación de las distintas áreas de memoria dentro de la CPU y
● las entradas y las salidas ocupadas en los módulos de entradas y salidas existentes.

Información de la ficha "Carga de la memoria"
La indicación de la carga de la memoria permite hacerse una idea de la carga de la memoria
de hardware de la CPU: La visualización en esta ficha depende de la CPU utilizada. Se
muestran la siguiente información:
● los objetos de programación existentes en la CPU (p. ej. OB, FC, FB, DB, tipos de datos y
variables PLC),
● las áreas de memoria existentes en la CPU (memoria de carga, memoria de trabajo, que se
divide a su vez según la CPU utilizada en la memoria de trabajo para código y la memoria
de trabajo apra datos y memoria remanente), su tamaño máximo y su grado de ocupación
por los objetos de programación utilizados,
● las entradas y salidas configurables para la CPU en los módulos disponibles (módulos de
entradas/salidas, módulos de entradas digitales, módulos de salidas digitales, módulos de
entradas analógicas y módulos de salidas analógicas), así como las entradas y salidas ya
asignadas.

8478

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.5 Mostrar la carga de la memoria de la CPU

Indicación de la memoria de carga máxima disponible
Es posible seleccionar el tamaño máximo disponible de la memoria de carga en la lista
desplegable de la fila "Total" de la columna "Memoria de carga".
Nota
Visualización de la memoria de carga ocupada en la CPU
Tenga en cuenta que no es posible calcular exactamente el total de memoria de carga ocupada
si no se han compilado todos los bloques.
En este caso, un signo ">" antepuesto al total indica que el valor de la memoria ocupada puede
ser mayor que el visualizado, ya que para calcular el total no se consideran los bloques no
compilados.

Indicación de la memoria de trabajo máxima disponible
El tamaño máximo disponible de la memoria de trabajo se indica en la columna "Memoria de
trabajo" o bien en las columnas "Memoria de trabajo para código" y "Memoria de trabajo para
datos" en la fila "Total".

Indicación de la memoria remanente máxima disponible
Es posible seleccionar el tamaño máximo disponible de la memoria remanente en la fila "Total"
de la columna "Memoria remanente".
Nota
Datos de remanencia
Las marcas y los bloques de datos definidos como remanentes se incluyen en el cálculo de los
datos de remanencia.

Actualizar la vista de la ficha "Carga de la memoria"
Para actualizar la vista de los objetos mostrados, haga clic en el botón "Actualizar vista" de la
barra de herramientas.

Ventajas de la vista de la ficha "Carga de la memoria"
En la ficha "Carga de la memoria" de la información del programa aparece una lista detallada
de cada objeto utilizado y el área de memoria correspondiente ocupada.
También se indica una sobreocupación de la CPU, lo que permite impedirla.
Los bloques no compilados pueden identificarse gracias a que su tamaño se indica con
interrogantes.

Programación del PLC
Manual de programación y manejo, 11/2019

8479

Mostrar información del programa
21.5 Mostrar la carga de la memoria de la CPU

Consulte también
Estructura de la ficha "Carga de la memoria" (Página 8480)
Mostrar la carga de la memoria (Página 8481)
Seleccionar la memoria de carga máxima disponible (Página 8482)

21.5.2

Estructura de la ficha "Carga de la memoria"

Estructura de la ficha "Carga de la memoria" en la información del programa
La vista de la ficha "Carga de la memoria" se compone de las siguientes columnas:
Columna

Contenido/significado

Objetos

Muestra bajo "Detalles" una vista general de los objetos de
programación existentes en la CPU y la correspondiente
ocupación de la memoria.

Memoria de carga

Muestra la carga máxima de la memoria de carga de la CPU
de forma porcentual y absoluta.
Los valores indicados en "Total" especifican el espacio má‐
ximo disponible en la memoria de carga.
Los valores indicados en "Ocupado" especifican el espacio
ocupado realmente en la memoria de carga.
Cuando un valor aparece en color rojo, significa que se ha
rebasado la capacidad de memoria existente.

Memoria de trabajo
o bien
Memoria de trabajo para código y para
datos

Muestra la carga máxima de la memoria de trabajo de la CPU
de forma porcentual y absoluta.
La memoria de trabajo depende de la CPU y se divide p. ej.
en el caso de una CPU de la familia S7-400 y S7-1500 en
"Memoria de trabajo para código" y "Memoria de trabajo para
datos".
Los valores indicados en "Total" indican el espacio máximo
disponible en la memoria de trabajo.
Los valores indicados en "Ocupado" indican el espacio ocu‐
pado realmente en la memoria de trabajo.
Cuando un valor aparece en color rojo, significa que se ha
rebasado la capacidad de memoria existente.

Memoria remanente

Muestra la carga máxima del área de memoria remanente de
la CPU de forma porcentual y absoluta.
Los valores indicados en "Total" indican el espacio máximo
disponible en la memoria remanente.
Los valores indicados en "Ocupado" indican el espacio ocu‐
pado realmente en la memoria remanente.
Cuando un valor aparece en color rojo, significa que se ha
rebasado la capacidad de memoria existente.

8480

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar información del programa
21.5 Mostrar la carga de la memoria de la CPU
Columna

Contenido/significado

I/O

Indica las entradas y salidas disponibles en la CPU, que se
muestran por tipos en las columnas indicadas a continua‐
ción.
Los valores indicados en "Configurado" especifican las en‐
tradas y salidas máximas disponibles.
Los valores indicados en "Ocupado" especifican las entra‐
das y salidas ocupadas realmente.

DI / DQ / AI / AQ

Indica el número de entradas y salidas configuradas y utili‐
zadas:
DI = entradas digitales
DQ = salidas digitales
AI = entradas analógicas
AQ = salidas analógicas
Los valores indicados en "Configurado" especifican las en‐
tradas y salidas máximas disponibles.
Los valores indicados en "Ocupado" especifican las entra‐
das y salidas ocupadas realmente.

Consulte también
Mostrar la carga de la memoria (Página 8481)
Seleccionar la memoria de carga máxima disponible (Página 8482)
Introducción a la carga de la memoria (Página 8478)

21.5.3

Mostrar la carga de la memoria

Introducción
La carga de la memoria indica el espacio de memoria ocupado en la CPU y qué objetos la
ocupan.
Nota
Visualización de la memoria de carga ocupada en la CPU
Tenga en cuenta que no es posible calcular exactamente el total de memoria de carga ocupada
si no se han compilado todos los bloques.
En este caso, un signo ">" antepuesto al total indica que el valor de la memoria ocupada puede
ser mayor que el visualizado, ya que para calcular el total no se consideran los bloques no
compilados.

Requisitos
Se ha creado un proyecto con bloques programados.

Programación del PLC
Manual de programación y manejo, 11/2019

8481

Mostrar información del programa
21.5 Mostrar la carga de la memoria de la CPU

Procedimiento
Para visualizar la carga de la memoria para las diferentes áreas de memoria de la CPU,
proceda del siguiente modo:
1. Seleccione la carpeta de bloques bajo la CPU deseada o bien uno o varios de los bloques
que contiene.
2. Elija el comando "Carga de la memoria" del menú "Herramientas".

Resultado
Se mostrará la carga de la memoria de la CPU asignada.

21.5.4

Seleccionar la memoria de carga máxima disponible

Requisitos
Se ha creado un proyecto con bloques programados.

Procedimiento
Para seleccionar la memoria de carga máxima disponible en la carga de la memoria, proceda
del siguiente modo:
1. Seleccione la carpeta de bloques bajo la CPU deseada o bien uno o varios de los bloques
que contiene.
2. Elija el comando "Carga de la memoria" del menú "Herramientas".
3. En el cuadro de diálogo que aparece a continuación, haga clic en el símbolo para abrir la
lista desplegable del campo "Total" de la columna "Memoria de carga".
4. Seleccione el valor para la CPU utilizada en la lista desplegable haciendo clic en él.

Resultado
En el campo "Total" se indica la carga de memoria máxima seleccionada.
Nota
Visualización de la carga de memoria máxima
Cuando en la carga de memoria un valor aparece en color rojo, significa que se ha rebasado
la capacidad de memoria disponible.
En este caso, adapte la capacidad de memoria tal como se describe anteriormente.

8482

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.1

22

Información general sobre las referencias cruzadas

Introducción
La lista de referencias cruzadas ofrece una visión de conjunto de los objetos y dispositivos que
se utilizan en el programa de usuario.
En esta lista puede consultar qué objetos dependen unos de otros, qué relaciones hay entre
ellos y dónde se encuentran los distintos objetos.
Además, permiten saltar directamente al lugar de uso de un objeto.

Utilidad de las referencias cruzadas
La lista de referencias cruzadas ofrece las siguientes ventajas:
● Al crear y modificar el programa se dispone en todo momento de una visión general de los
dispositivos y objetos utilizados, como p. ej., bloques, operandos, variables, etc.
● Permite ver si el objeto en cuestión utiliza otros objetos o si es utilizado.
● La información mostrada sobre referencias cruzadas puede filtrarse por determinados
criterios. Para ello se dispone de filtros predefinidos para objetos de origen y de referencia.
● También es posible crear filtros definidos por el usuario para localizar con mayor facilidad
referencias relevantes.
● Desde las referencias cruzadas se puede saltar directamente al lugar de uso del objeto
seleccionado utilizando para ello el enlace marcado en azul.
● Al probar el programa o buscar errores se obtiene información acerca de, p. ej.:
– En qué bloque y con qué comando se procesa un operando.
– Qué variable se utiliza, cómo y dónde.
– qué bloque es llamado por qué otro bloque
– información sobre referencias cruzadas para estructuras de nivel superior o inferior.
● Como parte de la documentación del proyecto, las referencias cruzadas proporcionan una
amplia perspectiva de todos los operandos, áreas de memoria, bloques, variables,
imágenes, etc., utilizados.

Programación del PLC
Manual de programación y manejo, 11/2019

8483

Mostrar referencias cruzadas
22.2 Estructura de la lista de referencias cruzadas

Nota
Objetos visualizados en la lista de referencias cruzadas
● Los objetos que se visualizan en la lista de referencias cruzadas dependen de los productos
instalados.
● A partir del TIA Portal V15, las instrucciones se muestran en las referencias cruzadas junto
con su número de versión. Las instrucciones sin identificador de versión no se muestran.

Consulte también
Estructura de la lista de referencias cruzadas (Página 8484)
Visualizar la lista de referencias cruzadas (Página 8489)
Mostrar y editar referencias cruzadas en la ventana de inspección (Página 8512)

22.2

Estructura de la lista de referencias cruzadas

Introducción
La lista de referencias cruzadas permite visualizar objetos de referencia y los objetos
subordinados de un objeto fuente seleccionado en el árbol del proyecto.
El objeto fuente es el primer objeto mostrado en cada caso en la lista de referencias cruzadas.
La visualización de las referencias cruzadas de un objeto es específica del proyecto y el
dispositivo.
También es posible tener abiertas varias listas de referencias cruzadas al mismo tiempo.

Estructura de la lista de referencias cruzadas
Si se ha seleccionado un objeto fuente y se abre la lista de referencias cruzadas, los objetos
se muestran del siguiente modo:
● El objeto de origen y todos sus objetos subordinados, así como las referencias
correspondientes se muestran estructurados en una vista estándar.
● El objeto de origen es el objeto para el que se han abierto las referencias cruzadas y se
muestra el primero en una fila con fondo gris.
● Los objetos subordinados están marcados con un cuadrado azul antepuesto.
● Si los objetos subordinados disponen a su vez de objetos subordinados, estos se muestran
en la columna de objetos sobre fondo gris y en una estructura jerárquica.
● Si un objeto se utiliza varias veces, también se visualiza las veces correspondientes.

8484

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.2 Estructura de la lista de referencias cruzadas
● Al final de una lista de referencias cruzadas con contenido aparece el botón "Agregar nuevo
objeto fuente". Haciendo clic en este botón se puede agregar un nuevo objeto a la lista de
referencias cruzadas.
● En la ventana de inspección, el objeto fuente y los objetos subordinados se muestran
contraídos. Los objetos subordinados con objetos de referencia se representan en la
columna de objetos sobre fondo gris.

Ejemplo
El siguiente gráfico muestra a modo de ejemplo la estructura de la lista de referencias cruzadas
de un objeto fuente:

Visualización de los nuevos objetos de origen agregados en la lista de referencias cruzadas
Los objetos que disponen del botón "Agregar nuevo objeto fuente" se representan del
siguiente modo:
● Siempre están al final de la lista de referencias cruzadas y se muestran expandidos de
manera predeterminada.
● Primero se muestran independientemente del ajuste de filtro seleccionado.
● Tras una actualización o si se ajusta un filtro diferente, los nuevos objetos insertados se
clasifican correctamente y se representan conforme a los ajustes de filtrado.

Columnas de la lista de referencias cruzadas
La lista de referencias cruzadas tiene la estructura siguiente:
Columna

Contenido/significado

Objeto

Muestra el nombre del objeto fuente seleccionado al abrir la lista de
referencias cruzadas, junto con todos los objetos subordinados y los
objetos de referencia correspondientes.

Ubicación

Muestra el lugar de uso de los diferentes objetos, p. ej., un segmento.

Programación del PLC
Manual de programación y manejo, 11/2019

8485

Mostrar referencias cruzadas
22.3 Ajustes de la lista de referencias cruzadas
Columna

Contenido/significado

Tipo de uso

Muestra la relación entre el objeto de origen y los objetos referencia‐
dos:
● "Utiliza": el objeto de origen utiliza este objeto.
● "Utilizado por": el objeto de origen es utilizado por este objeto.
● "Tipo->instancia": el objeto de origen es un tipo del objeto
referenciado.
● "Instancia->tipo": el objeto de origen es una instancia del objeto
referenciado.
● "Grupo->elemento": el objeto de origen es un grupo del objeto
referenciado.
● "Elemento->grupo": el objeto de origen es un elemento del objeto
referenciado.
● "Define": el objeto de origen define el objeto referenciado.
● "Definido por": el objeto de origen es definido por el objeto
referenciado.

Como

Muestra información adicional sobre los objetos referenciados.

Acceso

Muestra el tipo de acceso, p. ej., si se trata de un acceso de lectura (R)
o escritura (W) a los operandos.

Dirección

Muestra la dirección del objeto correspondiente.

Tipo

Muestra el tipo y el lenguaje de creación del objeto.

Dispositivo

Muestra el nombre del dispositivo en cuestión, p. ej., "CPU_1".

Ruta

Muestra la ruta del objeto en el árbol del proyecto, incluyendo carpetas
y grupos.

Comentario

Muestra el comentario sobre los diferentes objetos, si los hubiera.

Consulte también
Información general sobre las referencias cruzadas (Página 8483)
Visualizar la lista de referencias cruzadas (Página 8489)

22.3

Ajustes de la lista de referencias cruzadas

Ajustes de la lista de referencias cruzadas
Utilizando los botones de la barra de herramientas y la selección de filtros predefinidos, es
posible realizar ajustes en la lista de referencias cruzadas.

8486

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.3 Ajustes de la lista de referencias cruzadas

Ajustes utilizando los botones en la lista de referencias cruzadas
Los siguientes ajustes pueden realizarse usando los botones:
● Botón "Actualizar"
Actualiza los contenidos visualizados en la lista de referencias cruzadas abierta.
Cuando se pulsa este botón, los contenidos visualizados en la lista de referencias cruzadas
se actualizan con los contenidos actuales del proyecto correspondiente. La lista de
referencias cruzadas no se actualiza automáticamente cuando se han modificado los datos
del proyecto.
● Botón "Expandir todos"
Expande las entradas de la lista actual de referencias cruzadas abriendo todos los objetos
subordinados.
● Contraer todos
Contrae las entradas de la lista actual de referencias cruzadas cerrando los objetos
subordinados.
● Botón "Memorizar disposición"
Guarda la disposición actual en la lista de referencias cruzadas.
Aquí se incluyen, p. ej., las columnas visualizadas, el ancho de las columnas y su
disposición.
Los ajustes de filtros en la lista de referencias cruzadas no se guardan.

Ajustes de filtros en la lista de referencias cruzadas
Existe la posibilidad de seleccionar filtros predefinidos para visualizar objetos.
Existen las siguientes posibilidades para seleccionar filtros aplicados a objetos de origen:
● Mostrar objetos con referencias:
Este ajuste muestra todos los objetos subordinados a un objeto fuente con las referencias
existentes. Es el ajuste predeterminado cada vez que se abre la lista de referencias
cruzadas.
● Mostrar objetos sin referencias:
Este ajuste muestra todos los objetos subordinados a un objeto fuente sin referencias.
Estos objetos no referenciados reciben la marca "No hay referencias" en la columna
"Ubicación". También se muestran elementos subordinados sin referencias si sus objetos
padre tienen referencias.
● Mostrar objetos no utilizados:
Este ajuste muestra todos los objetos subordinados a un objeto fuente que no se utilizan.
Estos objetos no utilizados obtienen la entrada "El objeto no se utiliza" en la columna
"Ubicación".
● Mostrar todos los objetos:
Este ajuste muestra todos los objetos subordinados a un objeto fuente con y sin referencias.

Programación del PLC
Manual de programación y manejo, 11/2019

8487

Mostrar referencias cruzadas
22.3 Ajustes de la lista de referencias cruzadas
Existen las siguientes posibilidades de selección de filtros aplicados a objetos de referencia:
● Mostrar solo "Utiliza":
Este ajuste muestra solo los objetos de referencia utilizados con el tipo de uso "utiliza",
"Elemento->Grupo", "Instancia->Tipo" y "definido".
● Mostrar solo "utilizado por":
Este ajuste muestra todos los objetos de referencia con el tipo de uso "utilizado por",
"Grupo->Elemento", "Tipo->Instancia" y "definido por".
● Mostrar solo referencias locales:
Este ajuste muestra solo las referencias locales que pertenecen a un dispositivo
determinado (p. ej., CPU_1).

Clasificación en la lista de referencias cruzadas
Las entradas se muestran en orden alfabético, en función del objeto y el dispositivo
correspondientes así como del tipo de objeto. Los objetos relacionados entre sí se representan
seguidos.
Se aplican los siguientes criterios de clasificación:
● para objetos de origen: clasificación por tipo de objeto, nombre de objeto y número
● para objetos referenciados: clasificación por asignación al dispositivo, nombre de objeto y
número
Nota
No hay clasificación por nombre si se muestran más de 10.000 objetos
Recuerde que no se aplica una clasificación por nombre si en la lista de referencias cruzadas
se muestran más de 10.000 objetos.
En ese caso se muestra un texto en un banner, que indica que en ese momento no hay ninguna
clasificación disponible para los objetos mostrados.
Haciendo clic en el enlace que aparece en el texto del banner, se puede activar la clasificación
por nombre. A continuación se abre un cuadro de diálogo que informa sobre el progreso de la
clasificación.

Visualización de las columnas en la lista de referencias cruzadas
Las columnas visualizadas en la lista de referencias cruzadas pueden personalizarse en el
menú contextual.
El menú contextual ofrece las siguientes opciones:
● Mostrar u ocultar las columnas seleccionadas
● Mostrar todas las columnas
● Optimizar el ancho de columna para la columna seleccionada o para todas las columnas.

8488

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.4 Visualizar la lista de referencias cruzadas

Nota
Mostrar u ocultar las columnas seleccionadas
Las columnas "Objeto" y "Ubicación" no pueden ocultarse en la lista de referencias cruzadas.
Los ajustes realizados pueden guardarse pulsando el botón "Memorizar disposición".

Agregar objetos nuevos a la lista de referencias cruzadas
Existen las siguientes posibilidades para agregar objetos de origen nuevos en una lista de
referencias cruzadas ya existente:
● Haciendo clic en el botón "Agregar nuevo objeto fuente" que aparece al final de la lista de
referencias cruzadas.
Nota
Inserción múltiple de objetos idénticos
Si inserta un objeto idéntico varias veces en la lista de referencias cruzadas, los duplicados se
eliminarán automáticamente después de la siguiente actualización.

22.4

Visualizar la lista de referencias cruzadas

Introducción
Dependiendo del objeto que se seleccione en el árbol del proyecto o en la Task card
"Instrucciones" se mostrarán todas las referencias cruzadas pertenecientes a este objeto
fuente.
Existen las siguientes posibilidades alternativas para abrir la lista de referencias cruzadas:
● En el menú "Herramientas", seleccione el comando "Referencias cruzadas".
● En el menú contextual, elija el comando "Referencias cruzadas".
● Haga clic en el símbolo de referencias cruzadas en la barra de herramientas.
● Seleccione un objeto en el árbol del proyecto y pulse la tecla "F11".
● Seleccione una instrucción con identificador de versión en la Task card "Instrucciones" y
pulse la tecla "F11".
Se muestran siempre las referencias cruzadas del objeto seleccionado en cada caso y de
todos sus objetos subordinados.

Programación del PLC
Manual de programación y manejo, 11/2019

8489

Mostrar referencias cruzadas
22.4 Visualizar la lista de referencias cruzadas
La visualización de las referencias cruzadas de un objeto es específica del proyecto y el
dispositivo. También es posible tener abiertas varias listas de referencias cruzadas al mismo
tiempo.
Nota
Visualización de referencias cruzadas
● Los objetos que se visualizan en la lista de referencias cruzadas dependen de los productos
instalados.
● Si se han seleccionado más de 50 objetos, estos se representarán contraídos en la lista de
referencias cruzadas.
● Si se han seleccionado menos de 50 objetos, estos se representarán expandidos en la lista
de referencias cruzadas.

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

Mostrar referencias cruzadas
Para visualizar referencias cruzadas en la lista, proceda del siguiente modo:
1. Seleccione el objeto deseado y abra las referencias cruzadas, p. ej. desde el menú
contextual.
2. Se abre la lista de referencias cruzadas del objeto seleccionado.
– El objeto seleccionado en cada caso es el "objeto fuente" y está situado en el primer
lugar de la columna "Objeto".
– En la columna "Ubicación" se ve el lugar donde se utilizan los objetos visualizados en la
lista de referencias cruzadas.
– Las relaciones entre los objetos se indican en la columna "Tipo de uso", p. ej. con
"Utilizado por" y "Utiliza".
3. Para pasar al lugar de uso del objeto en cuestión, haga clic en el enlace correspondiente.

8490

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.5 Clasificar la lista de referencias cruzadas
4. Los botones de la barra de herramientas permiten realizar las siguientes acciones:
– Actualizar la lista de referencias cruzadas
– Definir filtros para la lista de referencias cruzadas
– Reducir entradas
– Ampliar entradas
– Guardar los ajustes de la lista de referencias cruzadas
– Comprobar si los accesos solapados están presentes en la lista de referencias cruzadas
abierta en ese momento.
– Visualización de los accesos solapados en un área separada debajo de la ventana de
trabajo
– Agregar nuevos objetos fuente
5. Para ordenar las entradas de la columna "Objeto" en orden ascendente o descendente, p.
ej., haga clic en el título de la columna correspondiente.

Consulte también
Información general sobre las referencias cruzadas (Página 8483)
Estructura de la lista de referencias cruzadas (Página 8484)

22.5

Clasificar la lista de referencias cruzadas

Introducción
Para la lista de referencias cruzadas se aplica de manera predeterminada una clasificación de
los objetos de origen y de referencia mostrados.
Esta clasificación también se muestra en la ventana de inspección del modo correspondiente.
Nota
No hay clasificación por nombre si se muestran más de 10.000 objetos
Recuerde que la clasificación por nombre no es posible si en la lista de referencias cruzadas
se muestran más de 10.000 objetos.
En ese caso se muestra un texto en un banner, que indica que en ese momento no hay ninguna
clasificación disponible para los objetos mostrados.
Haciendo clic en el enlace que aparece en el texto del banner, se puede activar la clasificación.
A continuación se abre un cuadro de diálogo que informa sobre el progreso de la clasificación.

Criterios de clasificación para la visualización de referencias cruzadas
La clasificación se aplica conforme a los siguientes criterios:

Programación del PLC
Manual de programación y manejo, 11/2019

8491

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Para objetos fuente y objetos asociados:
● por tipo de objeto: los objetos fuente se muestran juntos y ordenados por su tipo de objeto.
● por nombre: en orden alfanumérico
Para objetos de referencia:
● por dispositivo: los objetos de referencia de un dispositivo siempre se muestran juntos.
● por tipo de objeto: los objetos de referencia se muestran juntos y ordenados por su tipo de
objeto.
● por nombre: en orden alfanumérico
Para la ubicación:
● por nombre: en orden alfanumérico

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

Clasificar la lista de referencias cruzadas
Para clasificar la lista de referencias cruzadas, si se muestran más de 10.000 objetos, proceda
del siguiente modo:
1. Haga clic en el enlace que aparece en el texto del banner mostrado para clasificar la lista
de referencias cruzadas por nombre.
Resultado: Un cuadro de diálogo le informa del progreso de clasificación de las referencias
cruzadas.
2. Una vez finalizado el proceso de clasificación, los objetos visualizados también se
clasifican por nombre.

22.6

Posibilidades de filtro para referencias cruzadas

22.6.1

Introducción al filtrado de referencias cruzadas

Introducción
Para simplificar la búsqueda de determinadas referencias cruzadas y disponer de una vista
general comprensible, la lista de referencias cruzadas puede filtrarse.
El ajuste de filtro aplicado en la búsqueda se representa sobre fondo amarillo en la lista
desplegable.
El sistema pone a su disposición ajustes de filtro predefinidos (en adelante filtros del sistema)
a través de la lista desplegable de la barra de herramientas de las referencias cruzadas.
Además de las posibilidades de filtrado que ofrece el sistema, también es posible crear filtros
definidos por el usuario conforme a sus necesidades concretas.

8492

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Los filtros del sistema están disponibles siempre en la lista desplegable y no pueden borrarse.
Una vez creados, los filtros definidos por el usuario se muestran en la lista desplegable de
selección de filtros, debajo de los filtros del sistema, y pueden modificarse, renombrarse o
borrarse según necesidad.
En la siguiente figura pueden verse los filtros del sistema siempre presentes y los filtros
definidos por usuario "Filtro_1" y "Filtro_2".

Ajustes de filtros definidos por el sistema en la lista de referencias cruzadas
Los filtros del sistema mostrados en el área superior de la lista desplegable se aplican a los
objetos de origen visualizados, mientras que los mostrados en el área inferior se aplican a los
objetos de referencia.
Los filtros del sistema existentes son los siguientes:
● Mostrar objetos con referencias:
Este ajuste muestra todos los objetos subordinados a un objeto fuente con las referencias
existentes. Es el ajuste predeterminado cada vez que se abre la lista de referencias
cruzadas.
● Mostrar objetos sin referencias:
Este ajuste muestra todos los objetos subordinados a un objeto fuente sin referencias.
Estos objetos no referenciados reciben la marca "No hay referencias" en la columna
"Ubicación". También se muestran elementos subordinados sin referencias si sus objetos
padre tienen referencias.
● Mostrar objetos no utilizados:
Este ajuste muestra todos los objetos subordinados a un objeto fuente que no se utilizan.
Estos objetos no utilizados obtienen la entrada "El objeto no se utiliza" en la columna
"Ubicación".
● Mostrar todos los objetos:
Este ajuste muestra todos los objetos subordinados a un objeto fuente con y sin referencias.
● Mostrar solo "Utiliza":
Este ajuste muestra solo los objetos de referencia utilizados con el tipo de uso "utiliza",
"Elemento->Grupo", "Instancia->Tipo" y "definido".

Programación del PLC
Manual de programación y manejo, 11/2019

8493

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
● Mostrar solo "utilizado por":
Este ajuste muestra todos los objetos de referencia con el tipo de uso "utilizado por",
"Grupo->Elemento", "Tipo->Instancia" y "definido por".
● Mostrar solo referencias locales:
Este ajuste muestra solo las referencias locales que pertenecen a un dispositivo
determinado (p. ej., a la CPU_1).
En cuanto se ha seleccionado uno de los filtros de sistema en la lista desplegable, se muestran
las referencias cruzadas correspondientes según los criterios seleccionados.
Consulte al respecto también: Filtrar la lista de referencias cruzadas (Página 8506)

Filtros definidos por el usuario en la lista de referencias cruzadas
Además de los filtros del sistema siempre disponibles se pueden crear filtros definidos por el
usuario para las referencias cruzadas.
Pueden crearse tanto en el editor de referencias cruzadas como en la ventana de inspección,
en la ficha "Información > Referencias cruzadas".
Abra las referencias cruzadas y haga clic en el símbolo de filtro situado en la barra de
herramientas del editor de referencias cruzadas.
En el cuadro de diálogo que se abre a continuación, haga clic en "Crear filtro" e introduzca los
criterios de filtro que desee. Haga clic en "Aplicar" para visualizar las referencias cruzadas que
cumplen los criterios de filtro seleccionados.
Los filtros definidos por el usuario se muestran en la lista desplegable, debajo de los filtros del
sistema con nombre preconfigurado, como p. ej. "Filtro_1".
Al contrario que los filtros del sistema, los definidos por el usuario pueden renombrarse,
modificarse y borrarse sin limitaciones.
Tras abrir los filtros, los que no son válidos se muestran sobre fondo rojo. Esos filtros no
pueden aplicarse.
Consulte al respecto también: Crear filtros definidos por el usuario para referencias cruzadas
(Página 8497)

22.6.2

Estructura del cuadro de diálogo de filtros

Introducción
Para visualizar referencias cruzadas también pueden crearse filtros definidos por el usuario.
A continuación encontrará información sobre la estructura del cuadro de diálogo de filtros y
sobre los símbolos utilizados en el cuadro de diálogo de filtros.

8494

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas

Estructura del cuadro de diálogo de filtros
El cuadro de diálogo de filtros presenta la siguiente estructura:

En el cuadro de diálogo de filtros encontrará lo siguiente:
● La lista desplegable para la selección de filtros disponibles.
El filtro que aparece arriba en la lista desplegable es el filtro del sistema aplicado desde la
lista de referencias cruzadas abierta.
● Los símbolos para crear, duplicar y borrar filtros.
● El símbolo para definir un filtro como predeterminado.
● Los símbolos para agregar, borrar y mover criterios de filtro.
● Las columnas "Sec." (secuencia), "Atributos", "Operador " y "Valor ".
La columna "Sec." muestra el número de los criterios de filtro correspondientes.
En las columnas restantes se definen los criterios necesarios para filtros nuevos.
● Botón "Aplicar": Si se cierra el cuadro de diálogo con "Aplicar", los cambios se guardarán
en el perfil de usuario actual y se aplicarán a la lista de referencias cruzadas del editor
correspondiente.
● Botón "Cerrar": Si se cierra el cuadro de diálogo con "Cerrar", los cambios se guardarán en
el perfil de usuario actual, pero no se aplicarán al editor.

Símbolos del cuadro de diálogo de filtros
El cuadro de diálogo de filtros contiene los siguientes símbolos en la barra de herramientas:
Símbolo

Significado

Acción

Crear filtro

Crea un filtro definido por el usuario.

Duplicar filtro seleccionado Duplica el filtro seleccionado para poder aplicar y reutilizar
criterios de filtro existentes.

Programación del PLC
Manual de programación y manejo, 11/2019

8495

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Símbolo

Significado

Acción

Borrar filtro

Borra el filtro seleccionado definido por el usuario. El filtro no
puede volver a restaurarse después de ser borrado.
Nota: Los filtros del sistema no pueden borrarse.

Aplicar filtro como predeter‐ Aplica el filtro seleccionado como predeterminado.
minado
El filtro se aplicará al volver a abrir las referencias cruzadas.

22.6.3

Insertar nuevo criterio

Inserta un nuevo criterio de filtro.

Borrar criterio

Borra el criterio de filtro seleccionado.

Mover criterio hacia arriba

Mueve el criterio de filtro seleccionado una fila hacia arriba.

Mover criterio hacia abajo

Mueve el criterio de filtro seleccionado una fila hacia abajo.

Atributos, operadores y valores del cuadro de diálogo de filtros

Conclusión básica
Para visualizar referencias cruzadas también pueden crearse filtros definidos por el usuario.
A continuación encontrará información sobre los atributos, operadores y valores del cuadro de
diálogo de filtros y sobre los criterios que pueden aplicarse.

Atributos, operadores y valores del cuadro de diálogo de filtros
Para crear un filtro válido hay que definir los atributos, operadores y valores correspondientes.
Al hacer clic en la columna "Atributo" u "Operador" se muestra una lista desplegable desde la
que se pueden seleccionar las entradas deseadas.
La columna "Valor" se representa sobre fondo rojo si se han seleccionado un atributo y un
operador, pero aún no se ha introducido un valor válido.

8496

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas

Reglas para los criterios en el cuadro de diálogo de filtros
Las reglas indicadas a continuación deben observarse al crear filtros definidos por el usuario:
● Los criterios de filtro pueden definirse para objetos de origen, objetos de referencia y
referencias.
● Los objetos de origen no se ven afectados si un criterio solo es aplicable a un objeto de
referencia o a una referencia.
● Los criterios de filtro se aplican en el orden especificado.
Nota
Recuerde que el resultado del primer criterio se utiliza como requisito para el segundo
criterio, y así sucesivamente. Por ello el orden de los criterios también es decisivo.
Los símbolos correspondientes de la barra de herramientas permiten mover los criterios
existentes hacia arriba y hacia abajo. Para ello, seleccione el criterio y a continuación haga
clic en el símbolo en cuestión.
● Los distintos criterios se agregan uno a uno dependiendo de su número de secuencia
respectivo.
Ejemplo: El primer criterio tiene el número de secuencia "1", el segundo criterio el "2", etc.
● Para el atributo en cuestión se pueden seleccionar los operandos permitidos en la lista
desplegable de la columna "Operador". La lista desplegable se muestra en cuanto se hace
clic en la fila correspondiente del cuadro de diálogo de filtros.
● Si un filtro no es válido, por ejemplo porque aún no se ha introducido un valor válido para
un criterio, la columna "Valor" se representa sobre fondo rojo. Los filtros no válidos pueden
guardarse, pero no aplicarse. En ese caso el cuadro de diálogo de filtros solo puede
cerrarse a través de "Cerrar".
● Si un criterio es aplicable a un objeto de origen estructurado, el objeto en cuestión se
muestra con todos los objetos padre y subordinados y sus referencias.
● Si no están afectados, los objetos padre del objeto de origen estructurado solo se muestran
por jerarquía, por lo que se muestran sin referencias y en gris.
● Si un criterio es aplicable a un objeto de referencia estructurado, el objeto en cuestión se
muestra con todas las ubicaciones subordinadas.
● Si un criterio solo es aplicable a elementos de un objeto de referencia estructurado, solo se
mostrará la ubicación subordinada afectada.

22.6.4

Crear filtros definidos por el usuario para referencias cruzadas

Introducción
Para visualizar referencias cruzadas también pueden crearse filtros definidos por el usuario.
Después de crearlos y guardarlos, los filtros definidos por el usuario también pueden
seleccionarse desde la lista desplegable de la barra de herramientas.
Los nuevos filtros definidos por el usuario están disponibles de inmediato en todos los editores
de referencias cruzadas abiertos en ese momento.
Programación del PLC
Manual de programación y manejo, 11/2019

8497

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Eso permite reducir el número de objetos visualizados en la lista de referencias cruzadas y
realizar una búsqueda selectiva de determinados objetos.
Nota
Crear filtros definidos por el usuario
Los filtros definidos por el usuario pueden crearse en todos los editores de referencias
cruzadas, así como en la ventana de inspección, en "Información > Referencias cruzadas".
El procedimiento es igual para todos los editores de referencias cruzadas.

Requisito para la creación de un filtro definido por el usuario
Se ha creado un proyecto que contiene objetos con referencias.

Crear filtros definidos por el usuario
Para crear filtros definidos por el usuario para la lista de referencias cruzadas, proceda del
siguiente modo:
1. Seleccione la carpeta Bloques de programa y abra la lista de referencias cruzadas con el
comando "Referencias cruzadas" del menú contextual.
2. En la lista de referencias cruzadas abierta haga clic en el símbolo de filtro de la barra de
herramientas.
Entonces se abre el cuadro de diálogo de filtros, en el que se muestran los criterios
correspondientes al filtro del sistema seleccionado.
Ejemplo: Antes de abrir el cuadro de diálogo de filtros había seleccionado en la lista
desplegable el filtro del sistema "Mostrar objetos con referencias". Ahora en el cuadro de
diálogo de filtros puede ver los atributos, operadores y valores definidos para ese filtro del
sistema.
3. Haga clic en el símbolo "Crear filtro".
Ahora en la lista desplegable se muestra el nuevo nombre de filtro predefinido "Filtro_1".
Los símbolos de inserción de criterios de filtro se activan.
4. Defina los atributos, operadores y valores correspondientes.
Los atributos y operadores pueden seleccionarse en la lista desplegable. Las listas
desplegables se muestran en cuanto se hace clic en la fila correspondiente del cuadro de
diálogo de filtros.
5. Si requiere varios criterios, haga clic en el símbolo "Agregar criterio".
Nota
Recuerde que el resultado del primer criterio se utiliza como requisito para el segundo
criterio, y así sucesivamente. Por ello el orden de los criterios también es decisivo.
Los símbolos correspondientes de la barra de herramientas permiten mover los criterios
existentes hacia arriba y hacia abajo. Para ello, seleccione el criterio y a continuación haga
clic en el símbolo en cuestión.
6. Introduzca todos los criterios necesarios para el filtro nuevo.

8498

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
7. Asigne un nombre al filtro nuevo si no desea aplicar el nombre predeterminado "FIltro_1".
Puede introducir el nombre que desee directamente en la lista desplegable.
Nota
Si en la lista desplegable se introduce un nombre que ya existe como nombre de filtro, se
aplicará ese filtro en el editor de referencias cruzadas.
El filtro nuevo se guarda con el nombre propuesto por el sistema (p. ej. "Filtro_10") y puede
seleccionarse en la lista desplegable del editor.
8. Haga clic en "Cerrar" si desea guardar los ajustes de filtro nuevos pero no desea
visualizarlos de inmediato en el editor de referencias cruzadas subordinado.
9. Haga clic en "Aplicar" para visualizar de inmediato los ajustes de filtro nuevos en todos los
editores de referencias cruzadas subordinados.

Resultado
Si se cierra el cuadro de diálogo con "Cerrar" el filtro nuevo se guarda pero no se aplica. El filtro
nuevo no se aplica hasta que se selecciona en la lista desplegable del editor de referencias
cruzadas.
Si se cierra el cuadro de diálogo con "Aplicar" el filtro nuevo se guarda y se aplica a los editores
de referencias cruzadas abiertos.

22.6.5

Editar filtros definidos por el usuario

Introducción
Una vez creados, los filtros definidos por el usuario para la visualización de referencias
cruzadas pueden seleccionarse utilizando la lista desplegable situada en la barra de
herramientas del editor de referencias cruzadas.
A diferencia de los filtros del sistema, los filtros definidos por el usuario pueden editarse y
renombrarse.
En la barra de herramientas encontrará los botones para crear y editar filtros y criterios de filtro.
Nota
Cambiar el nombre de filtros en referencias cruzadas
Solo es posible renombrar filtros definidos por el usuario, los filtros del sistema no pueden
renombrarse ni borrarse.

Requisitos para la edición de un filtro definido por el usuario
Se ha creado un proyecto que contiene objetos con referencias.
Se ha creado como mínimo un filtro definido por el usuario para referencias cruzadas.

Programación del PLC
Manual de programación y manejo, 11/2019

8499

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Consulte al respecto: Crear filtros definidos por el usuario para referencias cruzadas
(Página 8497)

Editar y renombrar filtros definidos por el usuario
Para editar filtros definidos por el usuario para la lista de referencias cruzadas, proceda del
siguiente modo:
1. Seleccione la carpeta Bloques de programa y abra la lista de referencias cruzadas con el
comando "Referencias cruzadas" del menú contextual.
2. Seleccione en la lista desplegable el filtro definido por el usuario que desea editar.
3. En la lista de referencias cruzadas abierta haga clic en el símbolo de filtro de la barra de
herramientas.
Entonces se abre el cuadro de diálogo de filtros, en el que se muestran los criterios
correspondientes al filtro seleccionado.
4. En la barra de herramientas, haga clic en el símbolo "Agregar criterio".
5. Defina los atributos, operadores y valores correspondientes.
Los atributos y operadores pueden seleccionarse en las listas desplegables. Las listas
desplegables se muestran en cuanto se hace clic en la fila correspondiente del cuadro de
diálogo de filtros.
6. Introduzca todos los criterios que desee para el filtro nuevo.
Nota
Recuerde que el resultado del primer criterio se utiliza como requisito para el segundo
criterio, y así sucesivamente. Por ello el orden de los criterios también es decisivo.
Los símbolos correspondientes de la barra de herramientas permiten mover los criterios
existentes hacia arriba y hacia abajo. Para ello, seleccione el criterio y a continuación haga
clic en el símbolo en cuestión.
7. Haga clic en "Borrar criterio" para borrar un criterio de filtro.
8. Si lo desea, asigne un nombre al filtro nuevo. Puede introducir el nombre que desee
directamente en la lista desplegable.
Nota
Si en la lista desplegable se introduce un nombre que ya existe como nombre de filtro, se
aplicará ese filtro en el editor de referencias cruzadas.
El filtro nuevo se guarda con el nombre propuesto por el sistema (p. ej. "Filtro_10") y puede
seleccionarse en la lista desplegable del editor.
9. Haga clic en "Cerrar" si desea guardar los ajustes de filtro nuevos pero no desea aplicarlos
al editor de referencias cruzadas subordinado.
10.Haga clic en "Aplicar" para aplicar de inmediato los ajustes de filtro nuevos a todos los
editores de referencias cruzadas subordinados.

8500

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas

Resultado
Si se cierra el cuadro de diálogo con "Cerrar" el filtro modificado se guarda pero no se aplica.
El filtro no se aplica hasta que en el editor de referencias cruzadas se hace clic en el botón
"Actualizar".
Si se cierra el cuadro de diálogo con "Aplicar" el filtro nuevo se guarda y se aplica a los editores
de referencias cruzadas abiertos.

Filtros no válidos definidos por el usuario
Si un filtro definido por el usuario se convierte en no válido tras ser editado, por ejemplo porque
aún no se ha introducido un valor, la fila correspondiente del cuadro de diálogo de filtros se
representa sobre fondo rojo. Los efectos son los siguientes:
● El filtro no puede aplicarse y el botón "Aplicar" no está activo.
● Después de cerrar el cuadro de diálogo de filtros no se muestran cambios en el editor.
● Si se hace clic en "Actualizar" en el editor de referencias cruzadas, se aplicará el filtro
definido como predeterminado para la visualización de las referencias cruzadas.
● Si no hay ningún filtro definido por el usuario configurado como predeterminado, se aplicará
el filtro del sistema "Mostrar objetos con referencias".

Consulte también
Crear filtros definidos por el usuario para referencias cruzadas (Página 8497)

22.6.6

Borrar filtros definidos por el usuario

Introducción
Una vez creados, los filtros definidos por el usuario para la visualización de referencias
cruzadas pueden seleccionarse utilizando la lista desplegable situada en la barra de
herramientas del editor de referencias cruzadas.
A diferencia de los filtros del sistema, los filtros definidos por el usuario pueden borrarse.
En la barra de herramientas encontrará los símbolos para borrar filtros y criterios de filtro.
Nota
Cambiar el nombre de filtros de referencias cruzadas y borrarlos
Solo es posible borrar filtros definidos por el usuario, los filtros del sistema no pueden
renombrarse ni borrarse.

Requisitos para borrar un filtro definido por el usuario
Se ha creado un proyecto que contiene objetos con referencias.

Programación del PLC
Manual de programación y manejo, 11/2019

8501

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Se ha creado como mínimo un filtro definido por el usuario para referencias cruzadas.
Consulte al respecto: Crear filtros definidos por el usuario para referencias cruzadas
(Página 8497)

Borrar filtros definidos por el usuario
Para borrar filtros definidos por el usuario para la lista de referencias cruzadas, proceda del
siguiente modo:
1. Seleccione la carpeta Bloques de programa y abra la lista de referencias cruzadas con el
comando "Referencias cruzadas" del menú contextual.
2. Seleccione en la lista desplegable el filtro definido por el usuario que desea borrar.
3. En la lista de referencias cruzadas abierta haga clic en el símbolo de filtro de la barra de
herramientas.
Entonces se abre el cuadro de diálogo de filtros, en el que se muestran los criterios
correspondientes al filtro seleccionado.
Nota
Recuerde que el filtro se borra de forma irrecuperable sin más preguntas en cuanto se hace
clic en el símbolo "Borrar filtro".
4. Haga clic en el símbolo "Borrar filtro" de la barra de herramientas si desea borrarlo
definitivamente.
5. Cierre el cuadro de diálogo haciendo clic en "Cerrar" o "Aplicar".

Resultado
El filtro seleccionado se ha borrado y ya no aparece en la lista desplegable.

22.6.7

Exportar e importar filtros definidos por el usuario

Introducción
Una vez creados, los filtros definidos por el usuario para la visualización de referencias
cruzadas pueden exportarse y volver a importarse.
Eso permite facilitar a otros usuarios un filtro definido por el usuario ya creado.
Para la exportación e importación de filtros definidos por el usuario se utilizan las funciones del
TIA Portal.

Requisitos para la exportación de un filtro definido por el usuario
Se ha creado un proyecto que contiene objetos con referencias.
Se ha creado como mínimo un filtro definido por el usuario para referencias cruzadas.

8502

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
Consulte al respecto: Crear filtros definidos por el usuario para referencias cruzadas
(Página 8497)

Exportar filtros definidos por el usuario
Para exportar filtros definidos por el usuario, proceda del siguiente modo:
1. Elija el comando "Configuración" del menú "Opciones".
Se muestra la configuración del TIA Portal.
2. Seleccione la entrada "General" en la navegación local.
3. En el área "Importar/exportar configuración" haga clic en el botón "Exportar
configuración...".
Se abre el cuadro de diálogo "Configuración de la exportación".
4. Haga clic en "Deseleccionar todo" para seleccionar para la exportación solo los ajustes de
filtro que desee.
5. En "Referencias cruzadas" > "Filtros definidos por el usuario" seleccione el filtro que desea
exportar.
Para aplicar la selección de ajustes de procesos de exportación anteriores, active la casilla
de verificación "Utilizar selección de un archivo de exportación anterior". Introduzca el
archivo en el campo.
6. Introduzca un nombre para el archivo de configuración en el campo "Nombre de archivo".
7. Haga clic en "Exportación" para exportar los filtros seleccionados.

Resultado
La configuración se guarda en un archivo con la extensión ".tps14".

Importar filtros definidos por el usuario
Para importar filtros definidos por el usuario, proceda del siguiente modo:
1. Elija el comando "Configuración" del menú "Opciones".
Se muestra la configuración del TIA Portal.
2. Seleccione la entrada "General" en la navegación local.
3. En el área "Importar/exportar configuración" haga clic en el botón "Importar
configuración...".
Se abre el cuadro de diálogo "Configuración de la exportación".
4. Seleccione el archivo que desee con la extensión ".tps14".
Nota
Si ya existe un filtro con un nombre idéntico, se sobrescribirá en la importación y ya no
estará disponible.
5. Haga clic en "Abrir" para importar el archivo.

Programación del PLC
Manual de programación y manejo, 11/2019

8503

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas

Resultado
El archivo seleccionado se importa y tras reiniciar el TIA Portal los ajustes de filtro definidos por
el usuario se aplican a las referencias cruzadas.

22.6.8

Activar filtro como predeterminado

Introducción
Para la visualización de las referencias cruzadas se pueden seleccionar diferentes ajustes de
filtro predeterminados del sistema (en adelante llamados filtros del sistema) desde la lista
desplegable de la barra de herramientas. Además es posible crear filtros definidos por el
usuario conforme a sus necesidades.
Existe la posibilidad de activar un filtro cualquiera como predeterminado para la visualización
de referencias cruzadas.
Si hay un filtro activado como predeterminado, este siempre se aplicará al abrir las referencias
cruzadas.

Reglas para definir filtros predeterminados
Las siguientes reglas rigen para definir filtros como predeterminados:
● Solo puede seleccionarse un filtro como predeterminado.
● El filtro predeterminado se identifica con el símbolo correspondiente.
● Los filtros no válidos pueden activarse como predeterminados, pero no pueden aplicarse.
En ese caso, al abrir la lista de referencias cruzadas en lugar del filtro no válido se aplicará
automáticamente el filtro del sistema "Mostrar objetos con referencias".

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

Activar filtro como predeterminado
Para activar un filtro como predeterminado para la visualización de referencias cruzadas,
proceda del siguiente modo:
1. Seleccione la carpeta Bloques de programa y abra la lista de referencias cruzadas con el
comando "Referencias cruzadas" del menú contextual.
2. Seleccione en la lista desplegable el filtro que desea activar como predeterminado.
3. En la lista de referencias cruzadas abierta haga clic en el símbolo de filtro de la barra de
herramientas.
Entonces se abre el cuadro de diálogo de filtros, en el que se muestran los criterios
correspondientes al filtro seleccionado.
4. Haga clic en el símbolo "Aplicar filtro como predeterminado" de la barra de herramientas.

8504

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
5. Haga clic en "Cerrar" si desea guardar el ajuste nuevo pero no desea aplicarlo de inmediato.
6. Haga clic en "Aplicar" para aplicar de inmediato los ajustes de filtro nuevos a todos los
editores de referencias cruzadas subordinados.

Resultado
Si se cierra el cuadro de diálogo con "Cerrar" el ajuste predeterminado nuevo se guarda pero
no se aplica. El ajuste predeterminado nuevo no se aplica hasta que en el editor de referencias
cruzadas se hace clic en el botón "Actualizar".
Si se cierra el cuadro de diálogo con "Aplicar" el ajuste predeterminado nuevo se guarda y se
aplica a los editores de referencias cruzadas abiertos.

Consulte también
Crear filtros definidos por el usuario para referencias cruzadas (Página 8497)

22.6.9

Duplicar filtros

Introducción
Para la visualización de las referencias cruzadas se pueden seleccionar diferentes ajustes de
filtro predeterminados del sistema (en adelante llamados filtros del sistema) desde la lista
desplegable de la barra de herramientas. Además es posible crear filtros definidos por el
usuario conforme a sus necesidades.
Existe la posibilidad de duplicar un filtro existente.
Eso permite agregar otros criterios de filtro con mayor facilidad.

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

Duplicar filtros
Para duplicar un filtro, proceda del siguiente modo:
1. Seleccione la carpeta Bloques de programa y abra la lista de referencias cruzadas con el
comando "Referencias cruzadas" del menú contextual.
2. Seleccione en la lista desplegable el filtro que desea duplicar.
3. En la lista de referencias cruzadas abierta haga clic en el símbolo de filtro de la barra de
herramientas.
Entonces se abre el cuadro de diálogo de filtros, en el que se muestran los criterios
correspondientes al filtro seleccionado.

Programación del PLC
Manual de programación y manejo, 11/2019

8505

Mostrar referencias cruzadas
22.6 Posibilidades de filtro para referencias cruzadas
4. Haga clic en el símbolo "Duplicar filtro seleccionado" de la barra de herramientas.
El filtro seleccionado se duplica y se muestra en la lista desplegable con el nombre nuevo
"Filtro_X".
5. Introduzca más criterios de filtro conforme a sus necesidades o modifique los atributos,
operadores o valores existentes.

Resultado
Al cerrar el cuadro de diálogo de filtros el filtro duplicado se guarda y se aplica a los editores
de referencias cruzadas abiertos.

22.6.10

Filtrar la lista de referencias cruzadas

Introducción
Para la visualización de las referencias cruzadas se pueden seleccionar diferentes ajustes de
filtro predeterminados del sistema (en adelante llamados filtros del sistema) desde la lista
desplegable de la barra de herramientas.
Además de las posibilidades de filtrado ya disponibles puede crear filtros definidos por el
usuario conforme a sus necesidades.
Los filtros del sistema están disponibles siempre en la lista desplegable y no pueden borrarse.
Una vez creados, los filtros definidos por el usuario se muestran en la lista desplegable de
selección de filtros, debajo de los filtros del sistema, y pueden borrarse.
Consulte también: Crear filtros definidos por el usuario para referencias cruzadas
(Página 8497)

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

Filtrar la lista de referencias cruzadas
Para filtrar la lista de referencias cruzadas, proceda del siguiente modo:
1. Seleccione el objeto fuente deseado y abra la lista de referencias cruzadas
correspondientes desde el comando de menú contextual "Referencias cruzadas".
2. También es posible abrir las referencias cruzadas seleccionando en el árbol del proyecto
objetos para los que existen referencias cruzadas como, por ejemplo:
– un dispositivo
– la carpeta "Bloques de programa"
– un bloque

8506

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.7 Imprimir una lista de referencias cruzadas
3. A continuación haga clic en el símbolo "Referencias cruzadas" de la barra de herramientas
del TIA Portal.
4. En la lista de referencias cruzadas abierta, seleccione el ajuste de filtro deseado en la lista
desplegable.

Resultado
El ajuste de filtros seleccionado se aplica para los objetos mostrados en los editores de
referencias cruzadas subordinados.

22.7

Imprimir una lista de referencias cruzadas

Introducción
Los contenidos mostrados en la lista de referencias cruzadas pueden visualizarse en la vista
previa e imprimirse para la documentación del proyecto.
Para ello en el TIA Portal están disponibles los comandos "Proyecto" > "Vista preliminar" y
"Proyecto" > "Imprimir".
Para la impresión se aplican las reglas siguientes:
● La lista de referencias cruzadas siempre se imprime expandida y con todas las columnas
existentes (también las ocultas).
● Los criterios de filtrado ajustados también se aplican.
● El ancho de columna se optimiza automáticamente.
● Los posibles accesos solapados mostrados no se imprimen.
● La impresión siempre comienza por el objeto fuente mostrado, independientemente de qué
objeto esté seleccionado en la lista de referencias cruzadas.
Nota
Impresión de una lista de referencias cruzadas vacía
Si la lista de referencias cruzadas seleccionada para la impresión no contiene entradas, se
imprimirá una lista de referencias cruzadas vacía.
Las listas de referencias cruzadas que se imprimen sin contenido contienen la indicación "La
lista de referencias cruzadas está vacía."

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

Programación del PLC
Manual de programación y manejo, 11/2019

8507

Mostrar referencias cruzadas
22.8 Agregar un nuevo objeto a la lista de referencias cruzadas

Imprimir una lista de referencias cruzadas
Para imprimir la lista de referencias cruzadas, proceda del siguiente modo:
1. Seleccione un objeto en la lista de referencias cruzadas y abra la vista preliminar con el
comando "Proyecto" > "Vista preliminar".
2. Asegúrese de que se trata realmente de la lista de referencias cruzadas que desea imprimir
y seleccione las opciones que desee.
3. Inicie la impresión con el comando "Proyecto" > "Imprimir".
4. En el cuadro de diálogo siguiente seleccione las opciones que desee aplicar a la impresión
y haga clic en "Aceptar".

Resultado
La lista de referencias cruzadas seleccionada se imprime con las opciones de impresión
ajustadas.

22.8

Agregar un nuevo objeto a la lista de referencias cruzadas

Introducción
En función del objeto seleccionado, al abrir la lista de referencias cruzadas se mostrarán todas
las referencias cruzadas pertenecientes a ese objeto fuente.
Existen la siguiente posibilidad para agregar objetos fuente nuevos en una lista de referencias
cruzadas ya existente:
● Haciendo clic en el botón "Agregar nuevo objeto fuente" que aparece al final de la lista de
referencias cruzadas.

Requisitos
Se ha creado un proyecto que contiene objetos con referencias.

8508

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.9 Mostrar accesos solapados en la lista de referencias cruzadas

Agregar un nuevo objeto a la lista de referencias cruzadas
Para agregar objetos nuevos a la lista de referencias cruzadas, proceda del siguiente modo:
1. Abra una lista de referencias cruzadas ya existente.
2. Haga clic en el botón "Agregar nuevo objeto de origen" e indique el objeto que desea
agregar. Si el objeto insertado ya existe, la preselección inteligente le facilitará el proceso.
Nota
Inserción múltiple de objetos idénticos
Si inserta un objeto idéntico varias veces en la lista de referencias cruzadas, los duplicados
se eliminarán automáticamente después de la siguiente actualización.
Nota
Funciones de objetos fuente nuevos
Recuerde que la función "Deshacer acciones y repetir" no está disponible para nuevos
objetos fuente agregados.

Resultado
El nuevo objeto insertado aparece el último en la lista de referencias cruzadas.
La selección de filtros actual no se aplica en el nuevo objeto insertado hasta la siguiente
actualización.

22.9

Mostrar accesos solapados en la lista de referencias cruzadas

Introducción
En una segunda ventana situada en la parte inferior de la lista de referencias cruzadas se
visualizan los accesos solapados de un objeto seleccionado.
La vista de los accesos solapados no puede guardarse y dejará de estar disponible al volver
a abrir la lista de referencias cruzadas.

Definición
Los accesos solapados para variables y variables estructuradas se determinan a partir de las
direcciones absolutas.

Programación del PLC
Manual de programación y manejo, 11/2019

8509

Mostrar referencias cruzadas
22.9 Mostrar accesos solapados en la lista de referencias cruzadas
En ese caso se habla de un "Acceso solapado" si la dirección de una variable o variable
estructurada se encuentra total o parcialmente en el espacio de direcciones del objeto fuente
correspondiente.
Nota
Mostrar "Accesos solapados"
Los accesos solapados siempre se visualizan solo para un único objeto de origen
seleccionado o subordinado en la lista de referencias cruzadas.
Si en las referencias cruzadas visualizadas hay varios objetos seleccionados, no se mostrarán
accesos solapados.

Ejemplo
El gráfico siguiente muestra la lista de referencias cruzadas con la indicación de los accesos
solapados de "Tag_1":

Requisitos
Se ha creado un proyecto que contiene objetos con accesos solapados.

8510

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.10 Restaurar las referencias cruzadas después de una actualización de proyecto

Mostrar accesos solapados en la lista de referencias cruzadas
Para visualizar accesos solapados en la lista de referencias cruzadas, proceda del siguiente
modo:
1. Abra la lista de referencias cruzadas y haga clic en la barra de herramientas, en el botón
"Comprobar accesos solapados".
Resultado: Todos los objetos que tienen accesos solapados se marcan con el símbolo
correspondiente en la columna "Objeto" para identificar los accesos solapados.
2. En la parte superior de la lista de referencias cruzadas seleccione un objeto marcado y
haga clic en el botón "Mostrar accesos solapados".
Resultado: Los accesos solapados correspondientes al objeto seleccionado se muestran
en una segunda ventana con el título "Accesos solapados de:<nombre de objeto>".
Nota
Vista de los accesos solapados
La vista de los accesos solapados no puede guardarse y dejará de estar disponible al volver
a abrir la lista de referencias cruzadas.
Para volver a visualizar los accesos solapados, proceda del modo arriba descrito.

22.10

Restaurar las referencias cruzadas después de una actualización de
proyecto

Introducción
Después de actualizar un proyecto a una versión superior del TIA Portal es posible restaurar
la información de las referencias cruzadas correspondiente al proyecto actualizado.
Esto ocurre automáticamente al final del proceso de actualización. A continuación se abre el
proyecto actualizado y las referencias cruzadas vuelven a estar disponibles.
Si la información de las referencias cruzadas es incoherente o incompleta, aparecerá una
indicación. Al abrir la lista de referencias cruzadas aparece un texto en un banner con un
enlace.
En ese caso se puede reorganizar manualmente la información de las referencias cruzadas.

Requisitos
Se ha realizado una actualización del proyecto y se ha mostrado el mensaje de que la
información de las referencias cruzadas es incoherente o incompleta.

Programación del PLC
Manual de programación y manejo, 11/2019

8511

Mostrar referencias cruzadas
22.11 Mostrar y editar referencias cruzadas en la ventana de inspección

Crear información de referencias cruzadas
Para volver a crear las referencias cruzadas, proceda del siguiente modo:
1. Haga clic en el enlace que aparece en el mensaje para la restauración de las referencias
cruzadas.
Como alternativa también se puede abrir y ejecutar el comando desde "Opciones" >
"Configuración" > "General" > "Referencias cruzadas".
A continuación se abren los ajustes del TIA Portal en "Referencias cruzadas".
2. Haga clic en el botón "Crear nueva lista de referencias cruzadas" para iniciar el proceso.
3. Una vez concluida la restauración, compruebe en el mensaje de la ventana de inspección
si el proceso se ha completado con éxito.
Si el proceso se ha completado con éxito, se mostrará un mensaje que hay que confirmar
con "Aceptar".
Si el proceso no se ha completado con éxito, se mostrará un mensaje de error.
4. En la lista de referencias cruzadas haga clic en el botón "Actualizar" para cerrar el banner
mostrado.

Resultado
La información de las referencias cruzadas para el proyecto seleccionado se ha restaurado.

22.11

Mostrar y editar referencias cruzadas en la ventana de inspección

Introducción
En la ventana de inspección se muestra la información correspondiente a las referencias
cruzadas de un objeto seleccionado en la ficha "Información > Referencias cruzadas".
Al seleccionar un objeto en un editor cualquiera del TIA Portal o en la Task card "Instrucciones"
o "Instrucciones avanzadas", en esta ficha de la ventana de inspección se mostrarán las
referencias correspondientes al objeto seleccionado.

Nota
Visualización de instrucciones
● A partir del TIA Portal V15, las instrucciones se muestran junto con su número de versión
en las referencias cruzadas y en la ventana de inspección.
● Las instrucciones sin identificador de versión no se muestran.

Estructura
En la ventana de inspección, la información de las referencias cruzadas se muestra en tablas.

8512

Programación del PLC
Manual de programación y manejo, 11/2019

Mostrar referencias cruzadas
22.11 Mostrar y editar referencias cruzadas en la ventana de inspección
La lista de referencias cruzadas tiene la estructura siguiente:
Columna

Contenido/significado

Objeto

Muestra el nombre del objeto fuente seleccionado al abrir la lista de
referencias cruzadas, junto con todos los objetos subordinados y los
objetos de referencia correspondientes.

Ubicación

Muestra el lugar de uso de los diferentes objetos, p. ej., un segmento.

Tipo de uso

Muestra la relación entre el objeto de origen y los objetos referencia‐
dos:
● "Utiliza": el objeto de origen utiliza este objeto.
● "Utilizado por": el objeto de origen es utilizado por este objeto.
● "Tipo->instancia": el objeto de origen es un tipo del objeto
referenciado.
● "Instancia->tipo": el objeto de origen es una instancia del objeto
referenciado.
● "Grupo->elemento": el objeto de origen es un grupo del objeto
referenciado.
● "Elemento->grupo": el objeto de origen es un elemento del objeto
referenciado.
● "Definido": el objeto de origen define el objeto referenciado.
● "Definido por": el objeto de origen es definido por el objeto
referenciado.

Como

Muestra información adicional sobre los objetos, p. ej., que una varia‐
ble es utilizada por varios dispositivos.

Acceso

Muestra el tipo de acceso, p. ej., si se trata de un acceso de lectura (R)
o escritura (W) a los operandos.

Dirección

Muestra la dirección del objeto correspondiente.

Tipo

Muestra el tipo y el lenguaje de creación del objeto.

Dispositivo

Muestra el nombre del dispositivo en cuestión, p. ej., "CPU_1".

Ruta

Muestra la ruta del objeto en el árbol del proyecto, incluyendo carpetas
y grupos.

Comentario

Muestra el comentario sobre los diferentes objetos, si los hubiera.

Mostrar referencias cruzadas en la ventana de inspección
Para visualizar información de referencias cruzadas en la ventana de inspección proceda del
siguiente modo:
1. Seleccione el objeto que desee (p. ej., en el árbol del proyecto o en el editor de
programación) y haga clic en el comando "Mostrar informaciones de las referencias
cruzadas" del menú contextual.
Resultado: Las referencias del objeto seleccionado se muestran en la ventana de
inspección, en la ficha "Información" > "Referencias cruzadas".

Programación del PLC
Manual de programación y manejo, 11/2019

8513

Mostrar referencias cruzadas
22.11 Mostrar y editar referencias cruzadas en la ventana de inspección

Nota
Tenga en cuenta que en la ventana de inspección solo se muestra la información de
referencias cruzadas para los objetos soportados.
Si se selecciona una carpeta, p. ej., no se muestra información de referencias cruzadas sobre
ella.

Editar referencias cruzadas en la ventana de inspección
También existe la posibilidad de editar y filtrar información sobre referencias cruzadas en la
ventana de inspección.
El procedimiento para filtrar información sobre referencias cruzadas es idéntico al del editor de
referencias cruzadas.
Consulte al respecto también:
Crear filtros definidos por el usuario para referencias cruzadas (Página 8497)
Borrar filtros definidos por el usuario (Página 8501)
Activar filtro como predeterminado (Página 8504)
Filtrar la lista de referencias cruzadas (Página 8506)

8514

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.1

23

Principios básicos del test del programa de usuario

Introducción
La ejecución del programa de usuario se puede probar en el dispositivo. Se pueden observar
estados lógicos y valores de variables así como predefinir valores para variables con objeto de
simular situaciones determinadas en el desarrollo del programa.

Requisitos
Hay un programa ejecutable cargado en el dispositivo.

Posibilidades de test
Existen las siguientes posibilidades de test:
● Test con el estado del programa
El estado del programa permite observar la ejecución del programa. Es posible visualizar
los valores de los operandos y los resultados lógicos (RLO) con objeto de encontrar y
solucionar los errores lógicos del programa. En una CPU S7-300/400 puede efectuarse un
test, bien con el estado del programa bien en modo de etapa o paso individual. Tenga en
cuenta que no se pueden utilizar ambas opciones de test a la vez.
● Test con puntos de parada
Los bloques creados en AWL o SCL pueden probarse con puntos de parada. Para ello,
posicione en el código los puntos de parada en los que se detendrá la ejecución del
programa. A continuación puede seguir ejecutando el programa paso a paso. En una CPU
S7-300/400 puede efectuarse un test, bien con el estado del programa bien en modo de
etapa o paso individual. Tenga en cuenta que no se pueden utilizar ambas opciones de test
a la vez.
Antes de proceder al test con puntos de parada tenga en cuenta ante todo las indicaciones
siguientes:
Consignas de seguridad para el test con puntos de parada (Página 8549)
Consignas de seguridad para el test con puntos de parada (Página 8549)

Programación del PLC
Manual de programación y manejo, 11/2019

8515

Comprobar el programa de usuario
23.2 Test con el estado del programa
● Test con la tabla de observación
La tabla de observación permite observar y forzar los valores actuales de las distintas
variables del programa de usuario o de una CPU. Para el test es posible predeterminar
valores para las distintas variables y simular así diferentes situaciones de procesamiento.
Además, existe la posibilidad de asignar valores fijos a las salidas de periferia de una CPU
en estado operativo STOP, p. ej. para comprobar el cableado.
● Test con la tabla de forzado permanente
La tabla de forzado permanente permite observar y forzar permanentemente los valores
actuales de las distintas variables del programa de usuario o de una CPU. Al forzar
permanentemente se sobrescriben distintas variables con valores predefinidos. De esta
manera puede probar el programa de usuario y simular distintas situaciones de
procesamiento.
Antes de forzar permanentemente tenga en cuenta ante todo las Medidas de seguridad
para el forzado permanente de variables (Página 8624) necesarias.

Consulte también
Introducción al test con el estado del programa (Página 8516)
Introducción al test con puntos de parada (Página 8547)
Consignas de seguridad para el test con puntos de parada (Página 8549)
Consignas de seguridad para el test con puntos de parada (Página 8549)
Introducción al test con la tabla de observación (Página 8573)
Introducción al test con la tabla de forzado permanente (Página 8603)

23.2

Test con el estado del programa

23.2.1

Introducción al test con el estado del programa

Función Estado del programa
Visualizando el estado del programa es posible observar su ejecución. Se ven los valores de
los distintos operandos y sus resultados lógicos. De esta manera es posible comprobar si se
están controlando correctamente los componentes del sistema de automatización.
La visualización del estado de ejecución del programa puede variar levemente en función de
la familia de CPU utilizada.

Test con el estado del programa para S7-300/400
Cuando se efectúa un test con el estado del programa puede prolongarse el tiempo de ciclo de
la CPU, ya que la captura de los datos influye en la duración de las instrucciones programadas.

8516

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
Al ejecutar las siguientes funciones de test, para cada sesión online se visualiza una sola vez
un aviso que advierte al usuario que se corre el riesgo de rebasar por exceso el tiempo de ciclo:
● Al realizar tests con condiciones de llamada
● Al realizar tests con puntos de parada
Estas funciones de test solo se pueden ejecutar después de confirmar el aviso.
Nota
En CPU más antiguas pertenecientes a las familias S7-300/400 es necesario cambiar las
cualidades de funcionamiento en la configuración hardware y luego cargar ésta en el
dispositivo. Existe la posibilidad de ajustar las cualidades de funcionamiento "Modo Proceso"
o "Modo Test".

Test con el estado del programa para S7-1200/1500
Si ejecuta la función "Test con el estado del programa" con una CPU de la familia S7-1500, el
tiempo de ciclo puede aumentar considerablemente al observar bucles debido a la rápida
ejecución del programa. Incluso es posible que la CPU pase a STOP, especialmente si se
rebasa el tiempo de ciclo ajustado para los OB de alarma o el tiempo de ciclo máximo ajustado.

Nota
Para evitar un posible STOP de la CPU, debe asegurarse de que no se muestre ningún bucle
programado durante el "Test con el estado del programa" en la ventana de observación activa.
Como alternativa también se puede aumentar el tiempo de ciclo máximo permitido de la CPU.

Restricciones de la función "Estado del programa"
La visualización de bucles puede aumentar considerablemente el tiempo de ciclo,
dependiendo del número de variables que se deban visualizar y del número real de
ejecuciones del bucle.
Para que la influencia que se ejerce sobre el tiempo de ciclo sea lo más reducida posible, la
función "Estado del programa" presenta las restricciones descritas a continuación:
Para CPU de la familia S7-300/400:
● La visualización del estado de un bucle programado se interrumpe en el punto de retorno.

Programación del PLC
Manual de programación y manejo, 11/2019

8517

Comprobar el programa de usuario
23.2 Test con el estado del programa
Para CPU de la familia S7-1200/1500:
● La observación de bucles está desactivada por defecto. Si se desea, puede activarse desde
el menú contextual.
● Si está activada la observación de bucles en una CPU S7-1200, el estado del programa no
se mostrará para la parte que sigue a un bucle que se ejecute repetidamente. En este caso,
desplace la ventana visible del editor a la sección que sigue al bucle de modo que se
vuelvan a mostrar los valores observados.
● En las CPU S7-1200 a partir de la versión V4.2 y en las CPU S7-1500 se observa siempre
la primera ejecución de una instrucción.

ADVERTENCIA
Test con el estado del programa
Un test con la función "Estado del programa" puede causar graves daños materiales y
personales en caso de fallos de funcionamiento o errores del programa.
Antes de realizar el test con la función "Estado del programa", asegúrese de que no pueden
presentarse estados peligrosos.

Forma de proceder recomendada si hay peligro de rebase del tiempo de ciclo
Si al observar el estado del programa hay peligro de que se rebase del tiempo de ciclo, el
sistema le informa de ello con el correspondiente aviso.
Para poder continuar observando has que confirmar dicho aviso con "Sí".
En este caso se tienen además la siguientes posibilidades de evitar el rebase del tiempo de
ciclo máximo al probar usando la función Estado del programa:
● Reduzca el tamaño de la ventana del editor para que se visualicen menos variables
ventanas y así se observen menos variables.
● Observe la variable deseada dentro de la tabla de observación.

23.2.2

Ajustar el entorno de llamada

23.2.2.1

Principios básicos del entorno de llamada

Función
En función de la CPU utilizada en cada caso, es posible definir el entorno de llamada para la
observación de bloques y para puntos de parada (no es posible en S7-1500). Con ello se
define en qué condiciones se registra el estado del programa de un bloque o se interrumpe la
ejecución del programa en un punto de parada.

8518

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
Válido para las CPU S7-1500 con firmware de la versión V2.5 y superior:
Entorno de llamada para la observación de bloques:
● En cuanto hay un punto de parada activado en un bloque, no es posible configurar un
entorno de llamada para la observación.
● A la inversa, no es posible activar un punto de parada en un bloque si ya se ha configurado
un entorno de llamada.
● Si intenta aplicar ambas funcionalidades, obtendrá en cada caso un mensaje de error
indicando cómo debe proceder.
Definición del entorno de llamada para la observación de bloques
Para definir el entorno de llamada se puede activar, alternativamente, una de las siguientes
opciones:
● No se ha definido ninguna condición
Esta es la opción predeterminada si no se ha seleccionado ninguna otra opción.
● Bloque de datos de instancia
El estado del programa de un bloque de función se registra únicamente si dicho bloque se
llama con el bloque de datos de instancia seleccionado.
● Ruta de llamada
El estado del programa de un bloque se registra únicamente si dicho bloque se llama con
un bloque determinado o desde una ruta determinada.
● Ruta de llamada adaptada manualmente
En este campo puede introducir manualmente el entorno de llamada que desee. Con el
botón "Transferir a "adaptado manualmente"" se aplica el contenido seleccionado en
"Entorno de llamada", que puede modificar, si es necesario.
El estado del programa de un bloque se registra únicamente si dicho bloque se llama desde
un bloque determinado o desde una ruta determinada.
Definición del entorno de llamada para puntos de parada
Si se trabaja con una CPU S7-300/400, existe la posibilidad de definir una condición de
llamada específica para cada punto de parada.
Si se trabaja con una CPU S7-1500 V2.5 o superior no es posible definir un entorno de llamada
para puntos de parada.
Si no se define ningún entorno de llamada, se registra el estado del programa de una llamada
de bloque cualquiera dentro de la estructura de llamadas y se interrumpe la ejecución del
programa siempre en el punto de parada respectivo. Por ello, siempre que sea posible, defina
el entorno de llamada si desea visualizar el estado del programa para una llamada
determinada.

Consulte también
Ajuste del entorno de llamada para observar bloques (Página 8519)

23.2.2.2

Ajuste del entorno de llamada para observar bloques
Ajustando el entorno de llamada se puede definir cuándo debe registrarse el estado del
programa de un bloque.

Programación del PLC
Manual de programación y manejo, 11/2019

8519

Comprobar el programa de usuario
23.2 Test con el estado del programa
Encontrará instrucciones sobre el ajuste del entorno de llamada para puntos de parada en el
capítulo "Ajustar el entorno de llamada para puntos de parada (Página 8555)".

Requisitos
● El bloque está abierto.

Definición del entorno de llamada
Para definir el entorno de llamada, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. Haga clic en el botón "Modificar" de la paleta "Entorno de llamada".
Se abre el cuadro de diálogo "Entorno de llamada del bloque".
3. Seleccione la condición deseada.
Consulte también: Principios básicos del entorno de llamada (Página 8518)
4. Confirme la selección con "Aceptar".

Resultado
El entorno de llamada seleccionado se muestra en la task card "Test" en la paleta "Entorno de
llamada". El estado del programa se efectúa ahora en función del entorno de llamada ajustado.

Cambio del entorno de llamada
Para cambiar el entorno de llamada, haga lo siguiente:
1. Abra la task card "Test".
Si ya se ha ajustado un entorno de llamada, este se muestra en la paleta "Entorno de
llamada".
2. Haga clic en el botón "Modificar" de la paleta "Entorno de llamada".
Se abre el cuadro de diálogo "Entorno de llamada del bloque".
3. Seleccione la condición deseada.
Consulte también: Principios básicos del entorno de llamada (Página 8518)
4. Confirme la selección con "Aceptar".

Resultado
El entorno de llamada seleccionado se muestra en la task card "Test" en la paleta "Entorno de
llamada". El estado del programa se efectúa ahora en función del entorno de llamada ajustado.

Consulte también
Principios básicos del entorno de llamada (Página 8518)
Introducción al test con el estado del programa (Página 8516)

8520

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

23.2.3

Activar/desactivar el test con el estado del programa
Se pueden observar todos los bloques activando el estado del programa del bloque. Esta
función está disponible para todos los bloques lógicos, independientemente del lenguaje de
programación utilizado. Para los bloques programados en KOP, FUP o SCL se puede activar
el estado del programa adicionalmente a partir de una posición determinada o para una
selección determinada. El estado del programa de un bloque abierto se puede activar
directamente, o bien puede abrirse un bloque desde el bloque que efectúa la llamada y
visualizar el estado del programa.
Un tooltip (información sobre herramientas) indica si se están recibiendo datos sobre el estado
del programa o no. Coloque para ello el ratón en la esquina superior derecha de la ventana de
trabajo sobre el "Indicador" punteado en azul.
Nota
Tenga en cuenta las indicaciones siguientes:
● Los recursos para el test con el estado del programa son limitados. Si los recursos para otro
test no son suficientes, se finalizarán los tests que estén en marcha.
● Debido al trabajo conjunto en paralelo en una CPU, es posible que otro usuario esté
ejecutando una operación de carga en la CPU seleccionada. Por eso, en los siguientes
casos puede ocurrir que no pueda arrancar el test con el estado del programa o que finalice
un test en curso:
– Mediante la operación de carga se carga de nuevo el bloque para el que desea iniciar
o ya está realizando el test con el estado del programa.
– Para el test con el estado del programa se utiliza un bloque de datos de instancia como
entorno de llamada y este cambia estructuralmente debido a la operación de carga, p.
ej., a causa de una renumeración.
– Para el test con el estado del programa se utiliza una ruta de llamada como condición de
test, y un bloque incluido en la ruta de llamada cambia debido a la operación de carga.
Si finaliza un test en curso, se recibe el aviso correspondiente en la ventana de inspección.

Requisitos
● Bloque lógico: el código del bloque offline es idéntico al código del bloque online. En este
caso, los "sellos de tiempo del código" de los bloques son idénticos.
● Bloque de datos: la estructura del bloque offline es idéntica a la estructura del bloque online.
En este caso, los "sellos de tiempo de la interfaz" de los bloques son idénticos.

Programación del PLC
Manual de programación y manejo, 11/2019

8521

Comprobar el programa de usuario
23.2 Test con el estado del programa

Activar o desactivar el estado del programa directamente en el bloque
Para activar o desactivar el estado del programa directamente en un bloque, proceda del
siguiente modo:
1. Abra el bloque en el que desee activar el estado del programa.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
Si hasta ahora no se ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Establecer conexión online". Con este cuadro de diálogo podrá establecer una
conexión online.
Consulte también: Establecer y deshacer una conexión online
3. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".

Activar o desactivar el estado del programa a partir de un punto determinado de un segmento
Para activar el estado del programa para KOP y FUP a partir de un punto determinado, proceda
del siguiente modo:
1. Abra el bloque en el que desee activar el estado del programa.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
3. Haga clic con el botón derecho del ratón en la variable a partir de la cual desea activar el
estado del programa.
4. Elija el comando "Forzar > Observar a partir de aquí" del menú contextual.
5. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".
Para activar el estado del programa en SCL a partir de un punto determinado, proceda del
siguiente modo:
1. Abra el bloque en el que desee activar el estado del programa.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
3. Seleccione la variable para la que desea activar el estado del programa.
4. A continuación, haga clic en el botón "Mostrar el estado del programa a partir de la fila
seleccionada" de la barra de herramientas.
5. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".
6. Para obtener una mejor visión de conjunto, los comandos "Expandir" y "Contraer" o
"Expandir todos" y "Contraer todos" del menú contextual permiten expandir determinados
segmentos del código o todos los cerrados y volver a contraerlos.

8522

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

Activar o desactivar el estado del programa para variables seleccionadas
Para activar el estado del programa para KOP y FUP para variables seleccionadas, proceda
del siguiente modo:
1. Abra el bloque en el que desee activar el estado del programa.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
3. Seleccione las variables para las que desea activar el estado del programa.
4. Elija el comando "Forzar > Observar selección" del menú contextual.
5. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".

Activar el estado del programa desde el bloque que efectúa la llamada
Para activar el estado del programa de un bloque desde el bloque que efectúa la llamada (p.
ej. OB1), proceda del siguiente modo:
1. Abra el bloque que efectúa la llamada.
2. Haga clic en la llamada del bloque con el botón derecho del ratón.
3. En el menú contextual, elija el comando "Abrir y observar".
El bloque se abre en el editor de programación. A continuación se establece la conexión
online y se muestra el estado del programa. El bloque que efectúa la llamada está ajustado
en la ruta de llamada.

Resultado
Cuando active la visualización del estado del programa, se establecerá una conexión online y
se visualizará el estado del programa. Si desactiva la visualización del estado del programa,
es posible deshacer simultáneamente la conexión online.
Bajo la interfaz del bloque se muestra la ruta de llamada del bloque. Si es necesario, puede
modificarse el entorno de llamada en el margen derecho, en "Test" y "Opciones", en la sección
"Entorno de llamada". En las CPU de la gama S7-1200/1500 adicionalmente se muestra la
"Jerarquía de llamada" en el margen derecho. Puede abrir el bloque que efectúa la llamada
haciendo clic en el enlace.

Consulte también
Ajustar el entorno de llamada (Página 8518)

Programación del PLC
Manual de programación y manejo, 11/2019

8523

Comprobar el programa de usuario
23.2 Test con el estado del programa

23.2.4

Observación de bucles

Introducción a la observación de bucles
Visualizando el estado del programa es posible observar su ejecución en un bloque. De este
modo se obtiene una visión general de los valores de los distintos operandos y de los
resultados lógicos y además se puede comprobar si los componentes del sistema de
automatización están siendo controlados correctamente.
Si los valores se representan en una fuente más clara con una saturación menor, significa que
estos valores no provienen del ciclo actual.
Nota
La observación de bucles puede aumentar considerablemente el tiempo de ciclo de la CPU,
dependiendo del número de variables que se deban observar y del número real de ejecuciones
del bucle.
Para la observación de bucles se aplican unas reglas especiales que dependen de la CPU
empleada en cada caso y del lenguaje de programación utilizado.

Reglas para la observación de bucles (S7-300/400)
Para que la influencia que se ejerce sobre el tiempo de ciclo sea lo más reducida posible, la
función "Estado del programa" presenta las restricciones siguientes al observar bucles con una
CPU de la familia S7-300/400 en todos los lenguajes de programación:
● La visualización del estado de un bucle programado se interrumpe en el punto de retorno.

Reglas para la observación de bucles en AWL (S7-1500)
Cuando se observan bucles en AWL, la visualización del estado del programa en los bucles
programados está desactivada por defecto. No se visualizan valores para las variables que se
encuentran en bucles entre "Label" y la instrucción correspondiente "Loop" con el fin de no
sobrecargar el tiempo de ciclo.
Si se observa un bloque AWL con bucles programados, aparece un tooltip informando de que
la observación de bucles está desactivada actualmente y de que puede activarse desde el
menú contextual en caso necesario.
Nota
Tenga en cuenta que solo se detectan los bucles que están programados en un segmento.

8524

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

Activar y desactivar la observación de bucles en AWL (S7-1500)
Para activar la observación de bucles en AWL, proceda del siguiente modo:
1. Abra el bloque AWL que desee observar.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
Si hasta ahora no se ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Establecer conexión online". Con este cuadro de diálogo podrá establecer una
conexión online.
Consulte también: Establecer y deshacer una conexión online
3. Active la observación en el editor de programación con el comando "Observar" > "Observar
bucles" del menú contextual.
4. Confirme la consulta posterior con "Sí".
Resultado: La observación de bucles se activa para todo el bloque y es válida hasta que se
vuelve a desactivar la observación de bucles o se finaliza la conexión online con la CPU.
5. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".

Reglas para la observación de bucles en SCL (S7-1200/1500)
Al observar bucles en SCL, la visualización del estado del programa en los bucles
programados está desactivada por defecto.
Esto afecta a las instrucciones "FOR", "WHILE" y REPEAT-UNTIL": En estas instrucciones no
se visualizan valores para las variables a fin de no sobrecargar el tiempo de ciclo.
Si se observa un bloque SCL con bucles programados, aparece un tooltip informando de que
la observación de bucles está desactivada actualmente y de que puede activarse desde el
menú contextual en caso necesario.

Activación y desactivación de la observación de bucles en SCL (S7-1200/1500)
Para activar la observación de bucles en SCL, proceda del siguiente modo:
1. Abra el bloque SCL que desee observar.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
Si hasta ahora no se ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Establecer conexión online". Con este cuadro de diálogo podrá establecer una
conexión online.
Consulte también: Establecer y deshacer una conexión online
3. Haga clic con el botón derecho del ratón en el bucle, p. ej. en la columna "Valor", y active
la observación con el comando "Observar bucles" del menú contextual.
4. Confirme la consulta posterior con "Sí".
Resultado: La observación de bucles se activa para todo el bloque y es válida hasta que se
vuelve a desactivar la observación de bucles o se finaliza la conexión online con la CPU.
5. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".

Programación del PLC
Manual de programación y manejo, 11/2019

8525

Comprobar el programa de usuario
23.2 Test con el estado del programa

23.2.5

Observación de estructuras

Introducción a la observación de estructuras
Es posible observar la ejecución del programa en un bloque. De este modo se obtiene una
visión general de los valores de los distintos operandos y de los resultados lógicos y además
se puede comprobar si los componentes del sistema de automatización están siendo
controlados correctamente.
A partir del TIA Portal V14 también es posible observar variables PLC estructuradas.
Para la observación de estructuras se aplican unas reglas especiales que dependen de la CPU
empleada en cada caso, del lenguaje de programación utilizado y de las propiedades de las
estructuras correspondientes.

Reglas para la observación de estructuras (S7-1200/1500)
Cuando se observan estructuras, los valores de una variable PLC estructurada se visualizan
en el editor de programación y en la ventana de inspección, con la excepción siguiente:
● No es posible observar estructuras cuyos elementos tengan propiedades de remanencia
ajustables.
Para visualizar los valores de observación de una estructura, primero debe activarse la
observación desde el menú contextual.

Visualización de los valores de observación de estructuras en la ventana de inspección
Si la observación de estructuras está activada y en el editor de programación está
seleccionada una variable de estructura, los valores de observación correspondientes se
mostrarán en la ficha "Diagnóstico" > "Valores de observación" de la ventana de inspección.
La ventana de inspección tiene la estructura siguiente:
● La columna "Nombre" muestra la variable seleccionada con los elementos subordinados
expandidos hasta el primer nivel. Al hacer clic en el nombre de la variable de estructura se
pasa al lugar de uso de la misma en el editor de programación.
● La columna "Tipo de datos" indica los tipos de datos correspondientes.
● La columna "Valor" muestra los valores de observación correspondientes. Si aquí no se
muestran valores sino guiones, significa que la observación de bucles está desactivada. En
este caso, active la observación de bucles desde el menú contextual del editor de
programación.
● Columnas "Valor - IN" y "Valor - OUT": Estas columnas con sus respectivos valores solo se
visualizan si la estructura seleccionada se utiliza como parámetro In/Out.
● Si los valores de observación se representan en un tipo de letra con tan solo el 50 % de
saturación, significa que estos valores no provienen del ciclo actual.
● Los valores de observación visualizados en la ventana de inspección utilizan la misma ruta
de llamada que se ha predeterminado para el bloque.

8526

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
● La tabla visualizada en la ventana de inspección con los valores de observación puede
copiarse en un archivo Excel.
● Si en la ventana de inspección no pueden visualizarse valores de observación, aparecerá
un mensaje indicando que no están disponibles.

Procedimiento para la observación de estructuras
Para activar la observación de estructuras, proceda del siguiente modo:
1. Abra el bloque en el editor de programación.
2. Haga clic en el botón "Activar/desactivar observación" de la barra de herramientas.
Si hasta ahora no se ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Establecer conexión online". Con este cuadro de diálogo podrá establecer una
conexión online.
Consulte también: Establecer y deshacer una conexión online
3. Si la estructura que debe observarse está en un bucle, active primero la observación de
bucles.
Consulte también: Observación de bucles (Página 8524)
4. Haga clic con el botón derecho del ratón en una estructura y active la observación de
estructuras con el comando "Observar" > "Observar valores" del menú contextual.
Resultado: La variable de estructura seleccionada se visualiza expandida hasta el primer
nivel con los valores actuales en la ficha "Diagnóstico" > "Valores de observación" de la
ventana de inspección.
5. En su caso, expanda aquellos elementos de la estructura que todavía estén contraídos
para ver todos los elementos subordinados y sus valores.
6. Para desactivar el estado del programa, vuelva a hacer clic en el botón "Activar/desactivar
observación".
Nota
Observación de una estructura de un array
Haga clic justo detrás del corchete de cierre para seleccionar la estructura correspondiente y
observarla.

Consulte también
Observación de bucles (Página 8524)

23.2.6

Editar bloques durante el test del programa
Si se editan bloques mientras se están observando, se interrumpirá la observación y se podrá
editar el bloque offline. Si el bloque no existe offline en el proyecto, habrá que cargarlo primero
en el proyecto desde el dispositivo. Una vez finalizada la edición es necesario volver a compilar
y cargar el bloque.

Programación del PLC
Manual de programación y manejo, 11/2019

8527

Comprobar el programa de usuario
23.2 Test con el estado del programa

Procedimiento
Para editar bloques mientras se están observando, proceda del siguiente modo:
1. Edite el bloque según las exigencias requeridas.
La observación se interrumpe y el bloque se conmuta a modo offline (si ya existe offline).
2. Si el bloque no existe offline, cárguelo en el proyecto desde el dispositivo.
3. Compile el bloque.
Consulte también: Compilar bloques (Página 8362)
4. Cargue el bloque en el dispositivo.
Consulte también: Cargar bloques para S7-1200/1500 (Página 8368)

Resultado
Las versiones online y offline del bloque contienen los cambios efectuados. La conexión online
se puede restablecer y continuar la observación.

23.2.7

Forzar variables durante la observación
Durante la observación, las variables se pueden forzar inmediatamente y una vez en el estado
del programa.
En el caso de las variables booleanas se puede cambiar entre los valores "0" y "1".
Para las variables que no son del tipo de datos "BOOL" se puede introducir un valor de forzado.
Sin embargo, tenga en cuenta que las entradas de periferia no se pueden forzar, por ejemplo,
con TagName:P.
El forzado de variables durante la visualización se puede ejecutar haciendo doble clic en el
valor online (no en el caso del tipo de datos BOOL) o haciendo clic en la variable desde el menú
contextual.

Procedimiento
Para forzar variables durante la observación, proceda del siguiente modo:
1. Abra el bloque que desee e inicie la observación de variables haciendo clic en el botón
"Activar/desactivar observación" de la barra de herramientas.
2. Haga doble clic en el valor online (no con el tipo de datos BOOL) que desea forzar.
También es posible hacer clic en la variable que desee e iniciar el forzado desde el menú
contextual.

8528

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
3. Introduzca el valor deseado en el campo "Valor de forzado" del cuadro de diálogo siguiente
y confirme la entrada con "Aceptar".
O bien confirme en el siguiente cuadro de diálogo la consulta sobre si debe conmutarse el
valor online booleano.
Ejemplo:
– Si confirma la consulta con "Sí" y el valor booleano tiene el valor "0", se conmuta al valor
"1".
– Si confirma la consulta con "Sí" y el valor booleano tiene el valor "1", se conmuta al valor
"0".
– Si hace clic en "No" o si cierra el cuadro de diálogo con "Cerrar", se conserva el valor
existente.
4. También puede elegir uno de los comandos siguientes del menú contextual:
– "Forzar > Forzar a 1"
Fuerza variables del tipo de datos "BOOL" al valor "TRUE".
– "Forzar > Forzar a 0"
Fuerza variables del tipo de datos "BOOL" al valor "FALSE".
– "Forzar > Forzar operando"
5. Si selecciona "Forzar operando", aparecerá el diálogo "Forzar operando".
6. Introduzca el valor deseado en el campo "Valor de forzado" del cuadro de diálogo siguiente
y confirme la entrada con "Aceptar".

Consulte también
Activar/desactivar el test con el estado del programa (Página 8521)

23.2.8

Cambiar formatos de visualización en el estado del programa

Introducción
Los formatos de visualización para variables dependen del tipo de variable correspondiente.
Durante la observación es posible cambiar el formato de visualización actual desde el menú
contextual. Los formatos de visualización que son posibles para una variable se ofrecen en el
menú contextual.
El formato de visualización se puede cambiar para la variable seleccionada, para todas las
variables del segmento o para todas las variables del bloque.
Sirve de ayuda, p. ej. si se requiere una representación hexadecimal, para buscar un código
de error hexadecimal.

Programación del PLC
Manual de programación y manejo, 11/2019

8529

Comprobar el programa de usuario
23.2 Test con el estado del programa

Procedimiento
Para cambiar el formato de visualización, proceda del modo siguiente:
1. Abra el bloque deseado en el editor de programación.
2. Active el estado del programa haciendo clic en el botón "Activar/desactivar observación" de
la barra de herramientas.
Si hasta ahora no se ha establecido ninguna conexión online, aparecerá el cuadro de
diálogo "Establecer conexión online". Con este cuadro de diálogo podrá establecer una
conexión online.
3. Seleccione la variable que desea observar y seleccione el formato de visualización
deseado en la opción "Formato de visualización" del menú contextual.

Resultado
El formato de visualización se cambia en correspondencia.
Nota
Cambiar el formato de visualización durante la observación
Tenga en cuenta que para salidas no cableadas no es posible cambiar el formato de
visualización, puesto que no se emite ningún valor de observación.

23.2.9

Particularidades del test de programas GRAPH

23.2.9.1

Principios básicos del test de programas GRAPH

Introducción
Mostrando el estado de un programa GRAPH es posible probar la lógica, la coherencia y la
función de un control secuencial.
Con él se pueden localizar, por ejemplo, los siguientes errores:
● Errores de programa; por ejemplo, desfases entre las etapas y condiciones programadas
y la ejecución real del proceso
● Errores de programación en el control secuencial, por ejemplo, tiempos de vigilancia mal
definidos en supervisiones

8530

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
Para poder probar un programa de usuario, debe existir una conexión online con la CPU.
ADVERTENCIA
Peligro durante el test en caso de instalación en marcha
El test del programa con la instalación en marcha puede causar graves daños materiales y
personales en caso de fallos de funcionamiento o errores del programa.
Antes de realizar el test, asegúrese de que no pueden presentarse estados peligrosos.
Nota
Debido al trabajo conjunto en paralelo en una CPU, es posible que otro usuario esté
ejecutando una operación de carga en la CPU seleccionada. Si esta operación de carga
modifica el bloque de datos de instancia del bloque GRAPH, el test del bloque GRAPH con el
estado del programa finaliza y aparece un mensaje en la ventana de inspección.

Funciones de test de GRAPH
Para probar controles secuenciales creados en GRAPH, se dispone de las siguientes
funciones de test:
● Estado del programa para cadenas
● Estado del programa para condiciones y acciones
● Estado del programa para interlocks y supervisión
● Estado del programa para instrucciones permanentes anteriores y posteriores
Durante un test es posible forzar la cadena secuencial y también sincronizarla con el estado
actual del proceso.

Modos de operación para el test de programas GRAPH
Para el test de programas GRAPH, se dispone de los tres modos de operación siguientes:
● Modo automático
En este modo se avanza automáticamente a la siguiente etapa cuando se cumple la
transición.
● Modo semiautomático
En este modo se avanza automáticamente a la siguiente etapa cuando se cumple una de
las siguientes condiciones:
– La transición se cumple.
– En el parámetro "T_PUSH" hay un flanco de señal ascendente.
– Avance manualmente con el botón "Ignorar transición".
● Modo manual
En este modo de operación se puede avanzar de una etapa a la siguiente manualmente o
bien seleccionar una etapa concreta.

Programación del PLC
Manual de programación y manejo, 11/2019

8531

Comprobar el programa de usuario
23.2 Test con el estado del programa

Sincronización del sistema
Si un proceso se ha llevado a otro estado en modo manual, es posible que ya no esté
sincronizado con la cadena secuencial. Para volver a sincronizar el proceso y el programa, se
pueden buscar puntos de sincronización y seguidamente realizar la sincronización.
Para localizar los puntos de sincronización se puede elegir uno de los dos métodos siguientes:
● Transición anterior cumplida
Se marcan todas las etapas cuya transición anterior se ha cumplido.
● Interlock cumplido
Se marcan todas las etapas cuyos interlocks se han cumplido.
En ambas variantes solamente se marcan las etapas para las que no se ha cumplido la
transición siguiente. A continuación puede activar una o varias de las etapas propuestas.

Modo de aprendizaje (solo S7-1500)
El test con el estado del programa ofrece la posibilidad de que el sistema determine el tiempo
máximo de activación de la etapa y el tiempo de advertencia. Puede emplear estos tiempos
para sus condiciones de supervisión.
Nota
Para bloques GRAPH con una versión anterior a 2.0 no está disponible el modo de aprendizaje
para determinar "T_MAX" y "T_WARN". La versión se puede modificar en las propiedades del
bloque GRAPH, en "General > Bloque":

Consulte también
Principios básicos del test del programa de usuario (Página 8515)
Introducción al test con el estado del programa (Página 8516)
Resumen de los ajustes de test de GRAPH (Página 8533)
Forzar cadena secuencial (Página 8534)
Acusar errores de supervisión (Página 8535)
Test en diferentes modos de operación (Página 8536)
Ejecutar sincronización del sistema (Página 8537)

8532

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

23.2.9.2

Definir ajustes para el test

Resumen de los ajustes de test de GRAPH
Resumen
La siguiente tabla muestra un resumen de los ajustes para comprobar los programas GRAPH:
Ajuste

Descripción

Seguir etapa activa

La etapa que está activa en la cadena secuencial se muestra en la vista de etapa individual
o en la vista de cadena.

Saltar etapas

Una etapa cuya transición anterior o siguiente es válida no se activa. El ajuste predetermi‐
nado de esta opción se aplicará a la correspondiente configuración de bloque.
Esta opción no está disponible si utiliza la opción "Generar DB minimizado" para el bloque
de función GRAPH.

Acuse obligatorio en errores
de supervisión

Determina que los errores de supervisión deben acusarse antes de seguir ejecutando el
programa. Esta opción sobrescribe la propiedad "Acuse obligatorio en errores de supervi‐
sión" de la cadena en los ajustes del bloque de función GRAPH y se aplica hasta la próxima
carga del bloque de datos de instancia GRAPH.

Parar cadena

La cadena secuencial se detiene aunque se haya cumplido la siguiente transición.

Desactivar temporizadores

Al activarse esta opción, se detienen todos tiempos de activación de etapas. Si desactiva la
opción, los tiempos seguirán transcurriendo.

Procesar todos los interlocks

Se procesan todos los interlocks, incluyendo los de las etapas inactivas.
En la vista de cadena se pueden apreciar los interlocks que se han cumplido.

Procesar todas las transicio‐
nes

Siempre se procesan todas las transiciones. En la vista de cadena se pueden apreciar las
transiciones que se han cumplido.

Activar acciones

Activa las acciones en las etapas activas. Esta opción está activada por defecto. Si se
desactiva esta opción, no se ejecutarán más acciones en las etapas activas.

Activar supervisiones

Activa las supervisiones en las etapas activas. Esta opción está activada por defecto. Si se
desactiva esta opción, se ignorarán las condiciones de la supervisión en las etapas activas.

Activar interlocks

Activa los enclavamientos en las etapas activas. Esta opción está activada por defecto. Si
se desactiva esta opción, se ignorarán las condiciones del enclavamiento en las etapas
activas.

Consulte también
Principios básicos del test de programas GRAPH (Página 8530)
Modificar ajustes de test (Página 8534)

Programación del PLC
Manual de programación y manejo, 11/2019

8533

Comprobar el programa de usuario
23.2 Test con el estado del programa

Modificar ajustes de test
ADVERTENCIA
Modificación de los ajustes de test
Tenga en cuenta que, al cambiar los ajustes de test, pueden producirse repercusiones no
deseadas en el proceso. Antes de modificar los ajustes de test, asegúrese de que no pueden
presentarse estados peligrosos.

Requisitos
Hay un bloque de función GRAPH abierto.

Procedimiento
Para modificar los ajustes de test de GRAPH, proceda del siguiente modo:
1. Inicie el test con estado de programa para el bloque de función GRAPH.
Consulte también: Activar/desactivar el test con el estado del programa (Página 8521)
2. Abra la Task Card "Test".
3. Modifique los ajustes de la paleta "Ajustes de test".

Consulte también
Resumen de los ajustes de test de GRAPH (Página 8533)

23.2.9.3

Forzar una cadena secuencial durante un test

Forzar cadena secuencial
Durante el test con el estado de programa se puede reinicializar la cadena secuencial. De este
modo, la cadena secuencial empieza de nuevo por las etapas iniciales. Además, es posible
desactivar todas las etapas durante el test.

Requisitos
Se muestra el estado del programa.

Inicializar cadena secuencial
Para inicializar la cadena secuencial, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Control secuencial", haga clic en "Inicializar".
La cadena secuencial se procesará desde las etapas iniciales.

8534

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

Desactivar todas las etapas
Para desactivar todas las etapas durante el test de una cadena secuencial, proceda del
siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Control secuencial", haga clic en "Desactivar todos".
Se desactivarán todas las etapas de la cadena secuencial.

Consulte también
Acusar errores de supervisión (Página 8535)
Test en diferentes modos de operación (Página 8536)
Ejecutar sincronización del sistema (Página 8537)
Principios básicos del test de programas GRAPH (Página 8530)
Introducción al test con el estado del programa (Página 8516)
Activar/desactivar el test con el estado del programa (Página 8521)

Acusar errores de supervisión
En los ajustes de test se puede especificar que los errores de supervisión deban acusarse
durante el test, a fin de que el programa pueda continuar.

Requisitos
Se muestra el estado del programa.

Procedimiento
Para acusar errores de supervisión, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Control secuencial", haga clic en "Acusar -(V)-".

Consulte también
Forzar cadena secuencial (Página 8534)
Test en diferentes modos de operación (Página 8536)
Ejecutar sincronización del sistema (Página 8537)
Principios básicos del test de programas GRAPH (Página 8530)
Resumen de los ajustes de test de GRAPH (Página 8533)
Modificar ajustes de test (Página 8534)
Introducción al test con el estado del programa (Página 8516)
Activar/desactivar el test con el estado del programa (Página 8521)

Programación del PLC
Manual de programación y manejo, 11/2019

8535

Comprobar el programa de usuario
23.2 Test con el estado del programa

Test en diferentes modos de operación
Requisitos
Se muestra el estado del programa.

Test en modo automático
Para probar una cadena secuencial en el modo automático, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Control secuencial", seleccione la opción "Modo automático".

Test en modo semiautomático
Para probar una cadena secuencial en el modo semiautomático, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Control secuencial", seleccione la opción "Modo semiautomático".
3. Si el avance no se produce automáticamente debido a que se cumple una transición o al
parámetro "T_PUSH", haga clic en el botón "Ignorar transición".

Test en modo manual
Para probar una cadena secuencial en el modo manual, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Control secuencial", seleccione la opción "Modo manual".
3. Avance a otra etapa:
– Si desea activar la siguiente etapa, haga clic en el botón "Siguiente".
– Si desea activar o desactivar una etapa cualquiera, indique el número de etapa en el
campo "Seleccionar etapa manualmente" o seleccione una etapa en la cadena
secuencial y haga clic en el botón "Activar" o "Desactivar".

Consulte también
Forzar cadena secuencial (Página 8534)
Acusar errores de supervisión (Página 8535)
Ejecutar sincronización del sistema (Página 8537)
Activar/desactivar el test con el estado del programa (Página 8521)
Principios básicos del test de programas GRAPH (Página 8530)
Introducción al test con el estado del programa (Página 8516)

8536

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

Ejecutar sincronización del sistema
Requisitos
● Se muestra el estado del programa.
● El test se realiza en el modo de operación "Modo manual".

Procedimiento
Para ejecutar una sincronización del sistema, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. Active en la paleta "Control secuencial" la casilla de verificación "Activar sincronización".
3. Elija uno de los dos métodos siguientes para encontrar puntos de sincronización:
– "Transición anterior cumplida"
Se marcan todas las etapas cuyas transiciones precedentes se cumplan y cuyas
transiciones siguientes no se cumplan.
– "Interlock cumplido"
Se marcan todas las etapas cuyos enclavamientos se cumplan y cuyas transiciones
siguientes no se cumplan.
4. Seleccione una etapa en la que deba comenzar la sincronización del sistema. También
pueden seleccionarse varias etapas.
5. Haga clic en el botón "Activar".

Resultado
El proceso y las cadenas secuenciales se sincronizan entre sí.

Consulte también
Principios básicos del test de programas GRAPH (Página 8530)
Forzar cadena secuencial (Página 8534)
Acusar errores de supervisión (Página 8535)
Test en diferentes modos de operación (Página 8536)
Introducción al test con el estado del programa (Página 8516)
Activar/desactivar el test con el estado del programa (Página 8521)

Programación del PLC
Manual de programación y manejo, 11/2019

8537

Comprobar el programa de usuario
23.2 Test con el estado del programa

Determinar tiempos para T_MAX y T_WARN durante el test
El modo de aprendizaje hace posible que el sistema determine los valores para el tiempo
máximo de activación de la etapa y el tiempo de advertencia para la duración total de una
etapa. Para ello, cada etapa debe ejecutarse por lo menos una vez. Cuanto más tiempo esté
activo el modo de aprendizaje, con tanto mayor frecuencia se ejecutará una etapa y tanto más
exactos serán los valores aprendidos. El tiempo máximo de activación de la etapa y el tiempo
de advertencia de una etapa se componen del tiempo aprendido y de un valor umbral aditivo.
Los valores umbral aditivos de la supervisión y advertencia los determina el propio usuario.
Una vez ha finalizado el modo de aprendizaje, los valores se guardan en el bloque de datos de
instancia en el dispositivo. También es posible guardar los valores adicionalmente en el bloque
de datos de instancia offline. Los valores se aplican como valores de arranque para los
parámetros estáticos "T_MAX" y "T_WARN". Seguidamente, los valores aprendidos se usan
en las instrucciones de comparación "CMP>T_MAX" y "CMP>T_WARN".
Los tiempos determinados para "T_MAX" y "T_WARN" con el modo de aprendizaje se pueden
restablecer en todo momento a sus valores predeterminados. De este modo, se inicializa tanto
el bloque de datos online como el offline.
Nota
Para bloques GRAPH con una versión anterior a 2.0 no está disponible el modo de aprendizaje
para determinar "T_MAX" y "T_WARN". La versión se puede modificar en las propiedades del
bloque GRAPH, en "General > Bloque":

Requisitos
● En el dispositivo existe un bloque de función GRAPH idéntico.
● Se ha programado una vigilancia del tiempo de etapa como mínimo para una etapa.

Determinar tiempos
Para determinar el tiempo máximo de activación de la etapa y el tiempo de advertencia con el
modo de aprendizaje, proceda del siguiente modo:
1. Abra el bloque de función GRAPH.
2. Active el test con el estado del programa para el bloque de función GRAPH.
Consulte también: Activar/desactivar el test con el estado del programa (Página 8521)
3. Abra la Task Card "Test".
4. Indique el valor umbral aditivo para la supervisión en porcentaje.
5. Indique el valor umbral aditivo para las advertencias en porcentaje.
6. Active la casilla de verificación "Activar modo de aprendizaje".
7. Espere hasta que cada etapa haya estado activa una vez como mínimo.

8538

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
8. Desactive la casilla de verificación "Activar modo de aprendizaje".
Se abre el cuadro de diálogo "Guardar tiempos aprendidos".
9. Si desea guardar los tiempos aprendidos en el bloque de datos de instancia offline haga clic
en "Aceptar".
Nota
Independientemente de su selección, los tiempos aprendidos se aplican en el bloque de
datos de instancia online.
Los tiempos aprendidos se registran en los parámetros estáticos "T_MAX" y "T_WARN" de
las etapas que estaban activas durante el modo de aprendizaje.

Resetear tiempos
Para inicializar los tiempos, proceda del siguiente modo:
1. Abra el bloque de función GRAPH.
2. Active el test con el estado del programa para el bloque de función GRAPH.
Consulte también: Activar/desactivar el test con el estado del programa (Página 8521)
3. Abra la Task Card "Test".
4. Haga clic en el botón "Resetear tiempos aprendidos".
Se restablecen los valores predeterminados de "T_MAX" y "T_WARN" en el bloque de
datos de instancia.

Consulte también
Utilizar la vigilancia del tiempo de etapa (Página 8289)

23.2.10

Ejemplos de visualización del estado del programa

23.2.10.1

Visualización del estado de programas KOP

Visualización en el estado del programa
La visualización del estado del programa se actualiza cíclicamente.
La figura siguiente muestra un ejemplo de la visualización del estado del programa en KOP:

Programación del PLC
Manual de programación y manejo, 11/2019

8539

Comprobar el programa de usuario
23.2 Test con el estado del programa

Representación del estado del programa
El estado de las distintas instrucciones y líneas de un segmento se reconoce fácilmente por el
color y tipo de las líneas y los símbolos. La tabla siguiente muestra cómo se representan los
distintos estados:
Representación

Estado

Línea verde continua

Se cumple

Línea azul discontinua

No se cumple

Línea gris continua

Desconocido o no procesado

Negro

No cableado

Líneas o parámetros en un marco con una satura‐ El valor es actual
ción del 100%
Líneas o parámetros en un marco con una satura‐ El valor proviene de un ciclo anterior. Este punto
ción del 50%
del programa no se ha procesado en el ciclo ac‐
tual.

23.2.10.2

Visualización del estado de programas FUP

Visualización en el estado del programa
La visualización del estado del programa se actualiza cíclicamente.
La figura siguiente muestra un ejemplo de la visualización del estado del programa en FUP:

Representación del estado del programa
El estado de las distintas instrucciones y líneas de un segmento se reconoce fácilmente por el
color y tipo de las líneas y los símbolos. La tabla siguiente muestra cómo se representan los
distintos estados:

8540

Representación

Estado

Línea verde continua

Se cumple

Línea azul discontinua

No se cumple

Línea gris continua

Desconocido o no procesado

Negro

No cableado

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
Representación

Estado

Líneas o parámetros en un marco con una satura‐ El valor es actual
ción del 100%
Líneas o parámetros en un marco con una satura‐ El valor proviene de un ciclo anterior. Este punto
ción del 50%
del programa no se ha procesado en el ciclo ac‐
tual.

Los valores de los operandos se visualizan en una casilla gris sobre el nombre del operando
en cuestión.
Nota
Visualización del estado del programa en el caso de salidas sin cablear
Tenga en cuenta que para las salidas no cableadas no puede emitirse ningún valor de
observación.

23.2.10.3

Visualización del estado de programas AWL

Visualización en el estado del programa
La visualización del estado del programa se actualiza cíclicamente y se muestra en tablas. Las
tablas se muestran directamente junto al programa AWL. Es posible leer el estado de cada
línea del programa. La visualización depende de la CPU utilizada (S7-300, S7-400 o S7-1500).
Las tablas de visualización en el estado del programa contienen siempre la información
siguiente:
● RLO
En la columna "RLO" se indica el resultado lógico de cada línea del programa. El valor del
RLO respectivo puede saberse por el color de fondo de la celda de la tabla. En este sentido,
verde significa un RLO de 1 y lila un RLO de 0.
● Valor
En la columna "Valor" se indica el valor actual del operando.
● Extra
En la columna "Extra" aparece información adicional en función de la operación en
cuestión, p. ej. bits de estado relevantes en caso de instrucciones matemáticas, valores de
tiempo o contaje en caso de temporizadores y contadores o las direcciones de memoria en
caso de direccionamiento indirecto.
La figura siguiente muestra un ejemplo de la visualización del estado del programa de una CPU
S7-300 en AWL:

Programación del PLC
Manual de programación y manejo, 11/2019

8541

Comprobar el programa de usuario
23.2 Test con el estado del programa

23.2.10.4

Visualización del estado de programas SCL

Visualización en el estado del programa
La visualización del estado del programa se actualiza cíclicamente y se muestra en una tabla.
La tabla se visualiza justo al lado del programa SCL y es posible leer el estado de cada línea
del programa. La tabla contiene la siguiente información:
● Nombres de variables
● Valor
Puede desplazar la tabla en todo momento hacia la derecha o hacia la izquierda.

8542

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa
La figura siguiente muestra un ejemplo de la visualización del estado del programa en SCL:

Explicación de la observación en SCL
● Si el código de la fila no se ejecuta, el nombre de la variable se visualiza en una fuente de
color gris en la tabla de valores.
● En la última columna aparecen los valores actuales de la variable. Si no es posible
visualizar valores de una variable, la celda correspondiente recibe un fondo amarillo y
aparecen adicionalmente tres signos de interrogación. En este caso active la casilla de
verificación "Crear información avanzada de estado" en las propiedades del bloque y
cargue nuevamente el bloque en el dispositivo. A continuación se muestran todos los
valores.
● En la primera columna aparece el nombre de la variable que corresponde al valor
visualizado actualmente.
● Si la línea contiene la instrucción "IF", "WHILE" o "REPEAT", en la misma se visualiza el
resultado de la instrucción con "True" o "False".
● Si la línea contiene varias variables, se visualiza el valor de la primera variable. En ambos
casos se visualizan en una lista adicional todas las variables de estas líneas con sus
respectivos valores, tan pronto como seleccione la línea correspondiente.
● Si dentro del código del programa posiciona el cursor en una variable, ésta será visualizada
en negrita en la lista. También se pueden visualizar explícitamente las demás variables de
una línea, para ello haga clic en la flecha hacia la derecha que se encuentra antepuesta a
los nombres de las variables de la línea que contiene varias variables.

23.2.10.5

Visualización del estado de programas GRAPH

Visualización en el estado del programa
En el caso de los programas GRAPH, el estado del programa se puede visualizar en la vista
de cadena y en la vista de etapa individual, así como en las instrucciones permanentes. La
visualización del estado del programa de las instrucciones permanentes equivale a la
visualización del estado del programa para programas KOP/FUP. La visualización del estado
del programa se actualiza cíclicamente.

Programación del PLC
Manual de programación y manejo, 11/2019

8543

Comprobar el programa de usuario
23.2 Test con el estado del programa
La tabla siguiente muestra cómo se representan los distintos estados:
Representación

Área

Estado

Verde

Etapa, cadena secuen‐
cial

No hay ningún fallo.

Verde claro

Etapa, cadena secuen‐
cial

No hay ningún fallo.
Los valores proceden de ciclos anteriores.

Condición

Se cumple la transición.

Rojo

Etapa, cadena secuen‐
cial

Hay un error de supervisión.

Amarillo

Etapa, cadena secuen‐
cial

Hay un error de interlock.

Negro

Condición

No se cumple la transición.

Las siguientes figuras muestran ejemplos de visualización del estado del programa en la vista
de cadena:

En la etapa 2 hay un error de supervisión. Se cumple la transición para pasar de la etapa 2 a
la etapa 3.

8544

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.2 Test con el estado del programa

En la etapa 2 hay un error de interlock. Se cumple la transición para pasar a la etapa 3.
La siguiente figura muestra un ejemplo de visualización del estado del programa en la vista de
etapa individual para una S7-300:

Programación del PLC
Manual de programación y manejo, 11/2019

8545

Comprobar el programa de usuario
23.2 Test con el estado del programa

No hay ningún un error de interlock en la etapa. No se cumple la siguiente transición.

8546

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3

Test con puntos de parada

23.3.1

Introducción al test con puntos de parada

Introducción
Los bloques creados en uno de los lenguajes de programación textuales AWL o SCL pueden
probarse ejecutando cada instrucción individualmente, paso a paso. Para ello, posicione
puntos de parada en el código del programa, establezca una conexión online y active los
puntos de parada en la CPU.
El código del programa en AWL y SCL también puede probarse con puntos de parada si el
código está insertado en un bloque KOP/FUP.
A partir del TIA Portal V15, las siguientes familias de CPU permiten el posicionamiento de
puntos de parada:
● S7-300 y S7-400
● S7-1500 a partir de la versión V2.5 del firmware
Nota
Consignas de seguridad para el test con puntos de parada
Puesto que en el test con puntos de parada se interviene en el proceso activo, es importante
conocer de antemano y observar las consignas de seguridad para realizar tests con puntos de
parada.
Consulte al respecto:
Consignas de seguridad para el test con puntos de parada (Página 8549)
Consignas de seguridad para el test con puntos de parada (Página 8549)

Nota
Reglas de compatibilidad para puntos de parada
● Las CPU S7-1500 con versiones de firmware antiguas (< 2.5) no permiten puntos de
parada.
● Los puntos de parada no están disponibles en proyectos con versiones de firmware
antiguas actualizadas al TIA Portal V15.
● Tampoco se permiten puntos de parada cuando una CPU S7-1500 con firmware de la
versión V2.5 se ha restablecido a una versión de firmware anterior. En este caso, los puntos
de parada que pueda haber en el código no se visualizan.
● Los bloques creados en versiones anteriores del TIA Portal deben volver a compilarse en
una CPU S7-1500 con firmware de la versión V2.5 o superior para poder utilizar puntos de
parada.

Programación del PLC
Manual de programación y manejo, 11/2019

8547

Comprobar el programa de usuario
23.3 Test con puntos de parada

Test con puntos de parada
Si se han posicionado puntos de parada válidos y se han activado, se puede ejecutar el
programa y probarlo en modo de etapa individual hasta el primer punto de parada y desde allí
se puede seguir ejecutando paso a paso con las siguientes funciones:
● Ejecutar
Continuar hasta el siguiente punto de parada activo.
● Ejecutar hasta la marca
Continuar hasta la posición del cursor.
● Saltar (solo para S7-300/400)
Se ejecuta la instrucción marcada actualmente.
● Entrar (solo para S7-300/400)
Salto a un bloque subordinado o bien llamada de un bloque subordinado.
● Salir (solo para S7-300/400)
Cuando se está procesando una llamada de bloque y la ejecución del programa en el
bloque llamado se interrumpe en un punto de parada, existe la posibilidad de retornar al
bloque que se está llamando con "Salir".
Se pueden posicionar tantos puntos de parada en el código del programa como se desee. El
número de puntos de parada que se pueden activar en la CPU depende de la CPU en cuestión.
En el entorno de llamada de una CPU S7-400 se puede definir para cada punto de parada
cuándo debe interrumpirse la ejecución del programa.

Nota
● Si deshace la conexión online con la CPU, se desactivarán los puntos de parada.
● Los puntos de parada no se guardan junto con el proyecto.
● Si se cierra el proyecto, se pierden todos los puntos de parada.

Consulte también
Consignas de seguridad para el test con puntos de parada (Página 8549)
Reglas para el test con puntos de parada (Página 8552)

8548

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3.2

Consignas de seguridad para el test con puntos de parada

Exclusión de responsabilidad para el uso de puntos de parada en SIMATIC S7-1500
SIMATIC S7-1500 permite el uso de puntos de parada para detener selectivamente la
ejecución del programa con el fin de buscar errores en el programa de usuario. Cuando el
programa de usuario llega a un punto de parada posicionado, el ciclo de procesamiento del
SIMATIC S7-1500 se detiene en dicho punto de parada. En este proceso, los valores de salida
para los módulos de salida conectados conservan su respectivo estado y (al contrario que en
el SIMATIC S7-300/S7-400) no se restablecen ni toman los valores sustitutivos configurados.
Además, el SIMATIC S7-1500 ya no puede reaccionar en este estado a los valores de entrada
de los módulos de entrada.
Tenga en cuenta esta información para el funcionamiento de su instalación y utilice los puntos
de parada únicamente cuando en su aplicación el comportamiento descrito no provoque daños
al medio ambiente u objetos ni tampoco lesiones personales.
Todo cliente es responsable del funcionamiento adecuado y seguro de los productos y su
instalación observando las normas vigentes.
Queda excluida cualquier responsabilidad por nuestra parte, con independencia de su base
jurídica, derivada del uso de puntos de parada, salvo que la responsabilidad sea obligatoria, p.
ej., según la ley de responsabilidad por productos, en caso de dolo, negligencia grave, lesiones
o daños a la vida, integridad corporal o salud, o en caso de aceptación de garantía de calidad
de un objeto, de ocultación dolosa de un defecto o de violación de obligaciones contractuales
básicas.
La indemnización por daños y perjuicios debido a la violación de obligaciones contractuales
básicas está limitada a los daños previsibles y tipificados en el contrato, siempre que no se dé
dolo o negligencia grave o que la responsabilidad sea obligatoria debido a daños a la vida,
integridad corporal o salud.
Esto no está ligado a una modificación de la carga probatoria en su contra.

23.3.3

Consignas de seguridad para el test con puntos de parada

Consignas de seguridad para el test con puntos de parada
A partir del TIA Portal V15 existe la posibilidad de realizar tests con puntos de parada en todas
las familias de CPU. Sin embargo, el comportamiento a la hora de realizar tests con puntos de
parada varía en las diferentes familias de CPU.
Puesto que al realizar tests con puntos de parada se interviene en el proceso en curso, es
preciso observar sin falta las siguientes consignas de seguridad.

Programación del PLC
Manual de programación y manejo, 11/2019

8549

Comprobar el programa de usuario
23.3 Test con puntos de parada

Tests con puntos de parada en una CPU S7-300, S7-400 y S7-1500
La nota siguiente vale para tests con puntos de parada que se efectúen en una CPU S7-300,
S7-400 y S7-1500.
PELIGRO
¡Evitar daños personales y materiales!
Tenga en cuenta que al ejecutar la función "Test con puntos de parada" una acción
equivocada:
● puede poner en peligro la vida o salud de personas.
● causar daños en la máquina o en toda la instalación.
El test con puntos de parada no debe realizarse estando la instalación en funcionamiento.
Si se posicionan puntos de parada en el programa de usuario estándar, se producirán errores
en el programa de seguridad.
Si a pesar de ello desea utilizar puntos de parada, debe desactivar antes el funcionamiento
de seguridad.
No obstante, aunque desactive el funcionamiento de seguridad, durante el uso de puntos de
parada se producirán los siguientes errores:
● Error en la comunicación con la periferia F
● Error en la comunicación CPU-CPU de seguridad

8550

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Test con puntos de parada en una CPU S7-1500
La nota siguiente se aplica solo a los tests con puntos de parada que se efectúen en una CPU
S7-1500 con firmware de la versión V2.5 o superior.
PELIGRO
¡Evitar daños personales y materiales!
● Al activar la función "Test con puntos de parada", las salidas permanecen desbloqueadas.
Las salidas conservan su último estado y dejan de actualizarse cuando la CPU pasa al
estado operativo "PARADA".
● En el test con puntos de parada, las salidas activas no se desactivan y no toman valores
sustitutivos seguros.
Esto puede provocar, p. ej., que los motores sigan funcionando y que las válvulas
permanezcan abiertas.
● El test con puntos de parada no debe realizarse estando la instalación en funcionamiento.
● Especialmente cuando en la CPU hay un objeto TO de Motion Control no deben realizarse
tests con puntos de parada. En este caso, si hay un punto de parada activado y se llega
a él, la CPU pasa inmediatamente a "STOP" después de la "PARADA".
Esto puede provocar, p. ej., que se detengan motores y accionamientos conectados, que
se pierdan referencias de ejes y que se cancelen sincronismos descontroladamente.
● Los tests con puntos de parada pueden prolongar el tiempo de ciclo de la CPU.
● Antes de iniciar la función "Realizar tests con puntos de parada" asegúrese de que nadie
más vaya a ejecutar simultáneamente esta función en la misma CPU.
● Si se posicionan puntos de parada en el programa de usuario estándar, se producirán
errores en el programa de seguridad. En el test con puntos de parada, las salidas
activas no se desactivan en el S7-1500. De ese modo los módulos F no conmutan
automáticamente al estado seguro hasta que haya transcurrido el tiempo de vigilancia
ajustado para ellos, por lo que conmutarían con retardo.

Programación del PLC
Manual de programación y manejo, 11/2019

8551

Comprobar el programa de usuario
23.3 Test con puntos de parada

Test con puntos de parada en una CPU S7-1500
La nota siguiente se aplica solo a los tests con puntos de parada que se efectúen en una CPU
S7-1500 con firmware de la versión V2.5 o superior.
ATENCIÓN
Visualización errónea de valores de variables durante la observación
● Debido a la optimización del código, los valores actualmente no alcanzados también
pueden mostrarse como ya asignados. Como estos valores ya se han podido calcular,
también se muestran en color negro.
● Al observar arrays dentro de bucles, puede ocurrir que se indiquen valores incorrectos. En
estos casos solo se indican correctamente los valores que se encuentran dentro del bucle
y antes de un punto de parada. Los valores indicados que se encuentren en el bucle tras
un punto de parada y el propio punto de parada pueden no ser correctos.
Independientemente de que se visualicen incorrectamente, el código se ejecuta
correctamente.
● Con determinadas instrucciones (p. ej. "Label" y "GOTO" en SCL y "LOOP" en AWL)
también pueden crearse bucles. En estos casos solo se indican correctamente los valores
que se encuentran dentro del bucle y antes de un punto de parada. Los valores indicados
que se encuentren en el bucle tras un punto de parada y el propio punto de parada pueden
no ser correctos. Independientemente de que se visualicen incorrectamente, el código se
ejecuta correctamente.

Consulte también
Introducción al test con puntos de parada (Página 8547)
Reglas para el test con puntos de parada (Página 8552)

23.3.4

Reglas para el test con puntos de parada

Introducción
Para posicionar puntos de parada se aplican las reglas siguientes que dependen de la CPU
empleada y del lenguaje de programación utilizado.

Nota
Los puntos de parada deben activarse después de haberlos posicionado para poderlos
ejecutar.
Los puntos de parada no se guardan en el proyecto. Si se cierra el proyecto, se pierden todos
los puntos de parada.

8552

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Reglas para posicionar puntos de parada en AWL y SCL en las CPU S7-1500
Si bien los puntos de parada pueden posicionarse al principio de cada línea del código, es
posible que no sean válidos si dicho código se optimiza durante la compilación.
Si se posiciona un punto de parada en una línea del código optimizada durante la compilación,
dicho punto de parada se marcará como "no válido" y no podrá activarse.
Por este motivo es aconsejable posicionar los puntos de parada al principio de partes del
código lógicamente conexas entre sí.

Puntos de parada válidos en AWL
En AWL pueden posicionarse puntos de parada válidos en las posiciones siguientes, por
ejemplo:
● En la primera instrucción al principio de un segmento AWL.
● Antes de una instrucción con acceso de lectura a operandos que esté situada justo detrás
de una instrucción con acceso de escritura a operandos.
● En la primera instrucción tras un salto condicionado.
● Antes y después de llamadas de bloque.

Puntos de parada válidos en SCL
En principio, en SCL pueden posicionarse puntos de parada válidos en todas las sentencias.
Existen las siguientes excepciones:
● Si el compilador agrupa varias instrucciones, solo sigue siendo válido el primer punto de
parada antes de empezar la primera instrucción.
● No se permiten puntos de parada al principio y al final de estructuras de control (REPEAT,
END_IF, END_FOR, END_WHILE, END_CASE).

23.3.5

Indicación del estado de los puntos de parada

Introducción
La visualización de puntos de parada es idéntica tanto en la columna izquierda del editor de
programación abierto como en el punto "Puntos de parada" de la Task Card "Test".
Los cambios realizados por el usuario se actualizan inmediatamente tanto en el editor de
programación como en la Task Card "Test".
Los puntos de parada se visualizan con diferentes símbolos en función del estado en cuestión.

Indicadores de estado de los puntos de parada
La tabla siguiente indica cómo se representan los puntos de parada en función de su estado
en el código dentro del editor de programación:

Programación del PLC
Manual de programación y manejo, 11/2019

8553

Comprobar el programa de usuario
23.3 Test con puntos de parada
Indicación del estado de los puntos de parada en una CPU S7-300/400 y S7-1500:
Símbolo

Significado
Punto de parada inactivo
Punto de parada inactivo con condición (p. ej. se ha definido un entorno de llamada para
el punto de parada)
Punto de parada inactivo, la ejecución del programa está parada en este punto
Punto de parada inactivo, tiene una condición (p. ej. se ha definido un entorno de
llamada para el punto de parada) y la ejecución del programa está parada en este punto
Punto de parada activo
Punto de parada activo con condición (p. ej. se ha definido un entorno de llamada para
el punto de parada)
Punto de parada activo, la ejecución del programa está parada en este punto
Punto de parada activo, tiene una condición (p. ej. se ha definido un entorno de llamada
para el punto de parada) y la ejecución del programa está parada en este punto
La ejecución del programa está parada en este punto

En la familia de CPU S7-1500 con firmware de la versión V2.5 o superior hay además los
símbolos siguientes:
Símbolo

Significado
El punto de parada está inactivo y no puede activarse.
Causas posibles:
● Después de la compilación ya no es posible alcanzar este punto de parada
debido a las optimizaciones del código.
● No es posible activar el punto de parada porque se ha definido un entorno de
llamada para la observación del bloque.
Consulte al respecto: Reglas para el test con puntos de parada (Página 8552)
El punto de parada está inactivo y no puede activarse, la ejecución del programa
está parada en este punto.
Causas posibles:
● No es posible activar el punto de parada porque se ha definido un entorno de
llamada para la observación del bloque.
Consulte al respecto: Reglas para el test con puntos de parada (Página 8552)

Consulte también
Reglas para el test con puntos de parada (Página 8552)

8554

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3.6

Ajustar el entorno de llamada para puntos de parada

Introducción
Ajustando el entorno de llamada se puede definir cuándo debe interrumpirse la ejecución del
programa en los puntos de parada.
Sin embargo, solo es posible configurar un entorno de llamada en las CPU S7-400. Si se utiliza
una CPU distinta no se podrá configurar un entorno de llamada para un punto de parada.
Para configurar un entorno de llamada para la observación de bloques se aplican las reglas
siguientes:
Válido para las CPU S7-1500 con firmware de la versión V2.5 y superior:
● En cuanto hay un punto de parada activado en un bloque, no es posible configurar un
entorno de llamada para la observación.
● A la inversa, no es posible activar un punto de parada en un bloque si ya se ha configurado
un entorno de llamada.
● Si intenta aplicar ambas funcionalidades, obtendrá en cada caso un mensaje de error
indicando cómo debe proceder.

Requisitos
● En el programa existen puntos de parada válidos.
● La CPU soporta el uso de puntos de parada y el ajuste de un entorno de llamada.

Procedimiento
Para ajustar el entorno de llamada para un punto de parada, proceda del siguiente modo:
1. Abra la Task Card "Test".
2. En la paleta "Puntos de parada" haga clic en el botón "..." situado detrás del punto de parada
para el que desea ajustar el entorno de llamada.
Se abre el cuadro de diálogo "Entorno de llamada de un bloque".
3. Seleccione la condición deseada.
Consulte también: Principios básicos del entorno de llamada (Página 8518)
4. Confirme la selección con "Aceptar".

Resultado
Se establece el entorno de llamada para el punto de parada y el símbolo correspondiente
cambia de un simple círculo gris a un círculo gris con rayas verticales delante y detrás.

Consulte también
Introducción al test con puntos de parada (Página 8547)
Posicionar puntos de parada (Página 8556)

Programación del PLC
Manual de programación y manejo, 11/2019

8555

Comprobar el programa de usuario
23.3 Test con puntos de parada
Activar puntos de parada (Página 8558)
Realizar tests con puntos de parada en modo de etapa o paso individual (Página 8565)
Borrar puntos de parada (Página 8563)

23.3.7

Posicionar puntos de parada

Introducción
Los puntos de parada pueden posicionarse en el código del programa a partir del TIA Portal
V15 en AWL y SCL siempre que se utilice una CPU S7-300, S7-400 o S7-1500 con firmware
de la versión V2.5 o superior.
Para utilizar la funcionalidad de puntos de parada es necesario volver a compilar los proyectos
antiguos con la nueva versión del TIA Portal.
Tiene varias posibilidades para posicionar puntos de parada:
● Con el menú "Online" > "Puntos de parada" > "Posicionar punto de parada".
Este comando de menú solo aparece cuando el cursor no está ubicado en la interfaz de un
bloque abierto.
● Con el menú contextual "Posicionar punto de parada".
● Con los símbolos situados debajo del botón "Puntos de parada" en la Task Card "Test".
● Con el comando de teclado "CTRL+Mayús+F9"
● Haciendo clic en la columna gris situada que precede al número de línea en el bloque
abierto.
Los puntos de parada recién posicionados están desactivados por defecto y tienen que
activarse antes de la ejecución.
Consulte al respecto también:
Consignas de seguridad para el test con puntos de parada (Página 8549)
Consignas de seguridad para el test con puntos de parada (Página 8549)
Reglas para el test con puntos de parada (Página 8552)

Requisitos
El bloque se ha creado en AWL o SCL.
Se utiliza una CPU S7-300, S7-400 o S7-1500 con firmware de la versión V2.5 o superior que
permite los puntos de parada.

8556

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Procedimiento
Para posicionar un punto de parada en el código del programa, proceda del siguiente modo:
1. Abra el bloque en el que desea posicionar un punto de parada.
2. Haga clic con el botón derecho del ratón en la columna gris antepuesta al número de la fila
en la que desea posicionar el punto de parada.
3. Elija el comando "Posicionar punto de parada" del menú contextual.
O bien:
1. Abra el bloque en el que desea posicionar un punto de parada.
2. Haga clic en la columna gris que precede al número de la línea en que desea posicionar un
punto de parada.

Resultado
En el código del programa se posiciona un punto de parada. El punto de parada se visualiza
en la Task Card "Test" de la paleta "Puntos de parada" y adicionalmente en forma de círculo
gris delante de la fila correspondiente en el código del programa. Para que la ejecución del
programa se interrumpa en el nuevo punto de parada, éste debe activarse previamente.

Nota
Posicionar y activar puntos de parada durante la observación
A partir del TIA Portal V15 existe la posibilidad de posicionar puntos de parada incluso estando
activa la observación de bloques.
En una CPU S7-1500 con firmware de la versión V2.5 o superior es posible activar puntos de
parada incluso estando activada la observación de bloques.

Consulte también
Introducción al test con puntos de parada (Página 8547)
Ajustar el entorno de llamada para puntos de parada (Página 8555)
Activar puntos de parada (Página 8558)
Realizar tests con puntos de parada en modo de etapa o paso individual (Página 8565)
Borrar puntos de parada (Página 8563)
Consignas de seguridad para el test con puntos de parada (Página 8549)
Consignas de seguridad para el test con puntos de parada (Página 8549)
Reglas para el test con puntos de parada (Página 8552)

Programación del PLC
Manual de programación y manejo, 11/2019

8557

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3.8

Activar puntos de parada

Introducción
Para utilizar puntos de parada durante un test, deben activarse los puntos de parada
ajustados.
Cuando se activan los puntos de parada, estos se instalan y activan en la CPU.
Los puntos de parada pueden activarse tanto individual como colectivamente.
Existe la posibilidad de editar los puntos de parada en la Task Card "Test" u, opcionalmente,
en el menú Online y en el menú contextual.
Válido para las CPU S7-1500 con firmware de la versión V2.5 y superior:
● En cuanto hay un punto de parada activado en un bloque, no es posible configurar un
entorno de llamada para la observación.
● A la inversa, no es posible activar un punto de parada en un bloque si ya se ha configurado
un entorno de llamada.
● Si intenta aplicar ambas funcionalidades, obtendrá en cada caso un mensaje de error
indicando cómo debe proceder.
Nota
El número de puntos de parada que se pueden activar en una CPU depende de la CPU.
Una vez alcanzado en número máximo, no se puede activar ningún punto de parada.
Dado que las funciones de paso individual "Saltar", "Entrar" y "Ejecutar hasta la marca"
también usan puntos de parada, tampoco pueden ejecutarse una vez se ha alcanzado el
número máximo de puntos de parada. Para poder activar más puntos de parada o utilizar estas
funciones de paso (etapa) individual, primero es necesario desactivar los puntos de parada
activados.

Nota
Activar puntos de parada durante la observación
A partir del TIA Portal V15, con una CPU S7-1500 con versión de firmware V2.5 o superior
existe la posibilidad de activar puntos de parada incluso durante la observación de bloques.

Requisitos
● Se han posicionado puntos de parada válidos.
● Existe una conexión online con la CPU y dicha CPU permite el uso de puntos de parada.
● No se ha alcanzado el número máximo de puntos de parada activables en la CPU.
● Los bloques offline y online de la CPU son idénticos.

8558

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Activar puntos de parada individuales
Para activar puntos de parada individuales, proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Haga clic con el botón derecho del ratón en el punto de parada que desea activar.
3. Elija el comando "Activar punto de parada" del menú contextual.
ATENCIÓN
Activar puntos de parada en una CPU S7-1500 con firmware de la versión V2.5 o superior
En cuanto se activa un punto de parada en una CPU S7-1500 V2.5 o superior, se recibe
información de que los valores de salida para los módulos de salida conectados conservan su
respectivo estado y (al contrario que en el SIMATIC S7-300/S7-400) no se restablecen ni
toman los valores sustitutivos configurados. Además, el SIMATIC S7-1500 deja de reaccionar
en este estado a los valores de entrada de los módulos de entrada.
Esta información aparece una sola vez en cada sesión online.

Resultado
El punto de parada seleccionado se instala y activa en la CPU y la ejecución del programa se
interrumpe en el punto de parada tan pronto como se llegue al punto correspondiente del
programa. El punto de parada ya no se representa con un círculo gris, sino con un círculo rojo.

Activar todos los puntos de parada
Para activar todos los puntos de parada, proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Observe que ningún punto de parada esté seleccionado.
3. Haga clic en "Activar todos los puntos de parada" en la barra de herramientas de la paleta
"Puntos de parada".

Programación del PLC
Manual de programación y manejo, 11/2019

8559

Comprobar el programa de usuario
23.3 Test con puntos de parada

ATENCIÓN
Activar puntos de parada en una CPU S7-1500 con firmware de la versión V2.5 o superior
En cuanto se activa un punto de parada en una CPU S7-1500 con firmware de la versión V2.5
o superior, se recibe información de que los valores de salida para los módulos de salida
conectados conservan su respectivo estado y (al contrario que en el SIMATIC S7-300/
S7-400) no se restablecen ni toman los valores sustitutivos configurados. Además, el
SIMATIC S7-1500 deja de reaccionar en este estado a los valores de entrada de los módulos
de entrada.
Esta información aparece una sola vez en cada sesión online.

Resultado
Dependiendo de la capacidad de la CPU se instalan y activan todos los puntos de parada en
la CPU y la ejecución del programa se interrumpe en todos los puntos de parada que se
alcancen durante la ejecución del programa.
● Si se posicionan más puntos de parada de los permitidos por la CPU, únicamente se activa
el número de puntos de parada permitido.
● La selección de los puntos de parada que se activarán puede modificarse en tiempo de
ejecución.
● La ejecución repetida de la función puede devolver diferentes resultados.
Los puntos de parada activados ya no se representan con círculos grises, sino con círculos
rojos.

Consulte también
Introducción al test con puntos de parada (Página 8547)
Posicionar puntos de parada (Página 8556)
Ajustar el entorno de llamada para puntos de parada (Página 8555)
Realizar tests con puntos de parada en modo de etapa o paso individual (Página 8565)
Borrar puntos de parada (Página 8563)

23.3.9

Desactivar puntos de parada

Introducción
Los puntos de parada activados pueden desactivarse tanto individual como colectivamente. Al
desactivar puntos de parada, éstos ya no se tienen en cuenta en la ejecución del programa.
Existe la posibilidad de editar los puntos de parada en la Task Card "Test" u, opcionalmente,
en el menú Online y en el menú contextual.

8560

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Nota
Información importante sobre los puntos de parada
● Si deshace la conexión online con la CPU, se desactivarán los puntos de parada.
● Los puntos de parada no se guardan junto con el proyecto.
● Si se cierra el proyecto, se pierden todos los puntos de parada.

Nota
Desactivar los puntos de parada durante la observación
A partir del TIA Portal V15 existe la posibilidad de desactivar los puntos de parada incluso
estando activada la observación de bloques.

Requisitos
● Se han posicionado y activado puntos de parada válidos.
● Existe una conexión online con la CPU y dicha CPU permite el uso de puntos de parada.

Desactivar puntos de parada individuales
Para desactivar puntos de parada individuales, proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Haga clic con el botón derecho del ratón en el punto de parada que desea desactivar.
3. Elija el comando "Desactivar punto de parada" del menú contextual.

Resultado
El punto de parada seleccionado se desinstala y desactiva en la CPU y la ejecución del
programa ya no se interrumpe en el punto de parada. El punto de parada ya no se representa
con un círculo rojo, sino con un círculo gris.

Programación del PLC
Manual de programación y manejo, 11/2019

8561

Comprobar el programa de usuario
23.3 Test con puntos de parada

Desactivar todos los puntos de parada
Para desactivar todos los puntos de parada, proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Observe que ningún punto de parada esté seleccionado.
3. Haga clic en "Desactivar todos los puntos de parada" en la barra de herramientas de la
paleta "Puntos de parada".

Resultado
Todos los puntos de parada seleccionados se desinstalan y desactivan en la CPU y la
ejecución del programa ya no se interrumpe en ningún punto de parada. Los puntos de parada
ya no se representan con círculos rojos, sino con círculos grises.

23.3.10

Navegar hasta los puntos de parada

Introducción
Para navegar en el programa hasta los puntos de parada, se puede saltar de un punto de
parada al siguiente o bien saltar directamente al punto del programa que contiene un punto de
parada determinado.

Navegar de un punto de parada al siguiente
Para navegar en el programa de un punto de parada al siguiente, proceda del siguiente modo:
1. Abra un bloque y seleccione el editor de programas.
2. Elija el comando "Ir al siguiente punto de parada" en el menú "Online > Puntos de parada"
para saltar al siguiente punto de parada situado después de la posición actual del cursor.
Después del último punto de parada se salta al primero.
3. Elija el comando "Ir al punto de parada precedente" en el menú "Online > Puntos de parada"
para saltar al punto de parada situado antes de la posición actual del cursor. Después del
primer punto de parada se salta al último.

8562

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Navegar hasta un punto de parada determinado
Para navegar en el programa hasta un punto de parada determinado, proceda del siguiente
modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Haga doble clic en el punto de parada hasta el que desea navegar.
El bloque con el punto de parada se visualiza en el editor de programas y la fila con el punto
de parada se resalta.
O bien:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Haga clic con la tecla derecha del ratón en el punto de parada hasta el que desea navegar.
3. Elija el comando "Ir a punto de parada" del menú contextual.
El bloque con el punto de parada se visualiza en el editor de programas y la fila con el punto
de parada se resalta.

23.3.11

Borrar puntos de parada

Introducción
Los puntos de parada pueden borrarse tanto individual como colectivamente.
Existen las siguientes posibilidades para borrar puntos de parada:
● Con el menú "Online > Puntos de parada > Posicionar/borrar puntos de parada" u "Online
> Puntos de parada > Borrar todos".
● Con los comandos correspondientes del menú contextual.
● Con los comandos de teclado correspondientes (CTRL+Mayús+F9).
● Con los comandos de la Task Card "Test".
Nota
● Si deshace la conexión online con la CPU, se desactivarán los puntos de parada.
● Los puntos de parada no se guardan junto con el proyecto.
● Si se cierra el proyecto, se pierden todos los puntos de parada.

Programación del PLC
Manual de programación y manejo, 11/2019

8563

Comprobar el programa de usuario
23.3 Test con puntos de parada

Nota
Borrar los puntos de parada durante la observación
A partir del TIA Portal V15, con una CPU S7-1500 con versión de firmware V2.5 o superior
existe la posibilidad de borrar puntos de parada incluso durante la observación de bloques.

Borrar puntos de parada individuales
Para borrar del programa un solo punto de parada, proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Seleccione el punto de parada que desea borrar.
3. Haga clic con el botón derecho del ratón en el punto de parada seleccionado.
4. Elija el comando "Borrar punto de parada" del menú contextual.
O bien:
1. Abra el bloque del que desea borrar un punto de parada.
2. Haga clic en la columna gris antepuesta al número de la fila del punto de parada que desea
borrar.

Resultado
El punto de parada seleccionado se borra.

Borrar todos los puntos de parada
Para borrar todos los puntos de parada, proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Haga clic en "Borrar puntos de parada" en la barra de herramientas de la paleta "Puntos de
parada".

Resultado
Se borran todos los puntos de parada existentes.

Consulte también
Introducción al test con puntos de parada (Página 8547)
Posicionar puntos de parada (Página 8556)

8564

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada
Ajustar el entorno de llamada para puntos de parada (Página 8555)
Activar puntos de parada (Página 8558)
Realizar tests con puntos de parada en modo de etapa o paso individual (Página 8565)

23.3.12

Realizar tests con puntos de parada en modo de etapa o paso individual

Introducción
Si la ejecución del programa se interrumpe en un punto de parada, el programa se puede
seguir ejecutando etapa por etapa.

Requisitos
● En el código del programa hay puntos de parada posicionados y activados.
● No se ha alcanzado el número máximo de puntos de parada activables en la CPU.
● Hay un bloque abierto.

Programación del PLC
Manual de programación y manejo, 11/2019

8565

Comprobar el programa de usuario
23.3 Test con puntos de parada

Procedimiento
Para efectuar la ejecución del programa en modo de etapa individual, proceda del siguiente
modo:
1. Establezca una conexión online con la CPU.
2. Active puntos de parada.
El código del programa se ejecuta hasta el punto de parada activado y luego se interrumpe,
es decir, la CPU pasa al estado operativo "PARADA". Una flecha amarilla aparece
superpuesta al círculo rojo del punto de parada.
3. Para seguir ejecutando el programa etapa por etapa, seleccione en la barra de
herramientas uno de los comandos siguientes:
– Ejecutar
La ejecución del programa continúa. Si existen más puntos de parada, la ejecución del
programa se interrumpe nuevamente en el siguiente punto de parada.
– Ejecución hasta la marca
El programa se sigue ejecutando hasta la posición en que se encuentra el punto de
inserción. Si otro punto de parada se encuentra antes del punto de inserción, la
ejecución del programa se interrumpe primero en este punto de parada.
– Saltar (solo para S7-300/400)
Se ejecuta la siguiente instrucción después del punto de parada. Si la instrucción es una
llamada de bloque, la llamada se procesa y se salta hasta la siguiente instrucción
después de la llamada de bloque.
– Entrar (solo para S7-300/400)
Se ejecuta la siguiente instrucción después del punto de parada. Si la instrucción es una
llamada de bloque, se salta al bloque invocado. Allí se puede continuar el test en modo
de etapa individual o bien posicionar otros puntos de parada. Al final del bloque tiene
lugar un retorno a la siguiente instrucción después de la llamada de bloque.
– Salir (solo con S7-300/400)
Cuando se está procesando una llamada de bloque y la ejecución del programa en el
bloque llamado se interrumpe en un punto de parada, existe la posibilidad de retornar al
bloque que se está llamando con "Salir". En dicho caso se ejecutan las instrucciones
restantes del bloque llamado y la ejecución del programa se vuelve a detener en el
bloque que se está llamando al finalizar la llamada del mismo.

Consulte también
Introducción al test con puntos de parada (Página 8547)
Posicionar puntos de parada (Página 8556)
Ajustar el entorno de llamada para puntos de parada (Página 8555)
Activar puntos de parada (Página 8558)
Borrar puntos de parada (Página 8563)
Introducción al test con el estado del programa (Página 8516)

8566

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3.13

Puntos de parada "Ejecutar hasta la marca"

Introducción
La función "Ejecutar hasta la marca" posiciona un punto de parada temporal en el punto de
inserción y lo borra de nuevo una vez alcanzado.
Esta función puede ejecutarse tanto mediante el símbolo correspondiente de la Task Card
"Test" como desde el menú contextual y la combinación de teclas "CTRL + Mayús + 8".

Nota
El número de puntos de parada que se pueden activar en una CPU depende de la CPU.
Una vez alcanzado en número máximo, no se puede activar ningún punto de parada.
Dado que las funciones de paso individual "Saltar", "Entrar" y "Ejecutar hasta la marca"
también usan puntos de parada, tampoco pueden ejecutarse una vez se ha alcanzado el
número máximo de puntos de parada. Para poder activar más puntos de parada o utilizar estas
funciones de paso (etapa) individual, primero es necesario desactivar los puntos de parada
activados.

Requisitos
● Existe una conexión online con la CPU y dicha CPU permite el uso de puntos de parada.
● Se han posicionado y activado puntos de parada válidos.
● No se ha alcanzado el número máximo de puntos de parada activables en la CPU.
● Los bloques offline y online de la CPU son idénticos.

Ejecutar hasta la marca
Para activar la función "Ejecutar hasta la marca", proceda del siguiente modo:
1. Abra la Task Card "Test".
En la paleta "Puntos de parada" aparecen listados todos los puntos de parada posicionados
en la CPU actual.
2. Haga clic con el botón derecho del ratón en el punto de parada que desea activar.
3. Elija el comando "Activar punto de parada" del menú contextual.
4. Espere hasta que se alcance el punto de parada y la CPU pase al estado "PARADA" en el
punto de parada definido.
5. Coloque el punto de inserción en otro lugar del código del programa válido para insertar otro
punto de parada.
6. Inicie la función "Ejecutar hasta la marca" mediante el símbolo de la Task Card "Test" o
desde el menú contextual.

Programación del PLC
Manual de programación y manejo, 11/2019

8567

Comprobar el programa de usuario
23.3 Test con puntos de parada

ATENCIÓN
Activar puntos de parada en una CPU S7-1500 con firmware de la versión V2.5 o superior
En cuanto se activa un punto de parada en una CPU S7-1500 V2.5 o superior, se recibe
información de que los valores de salida para los módulos de salida conectados conservan su
respectivo estado y (al contrario que en el SIMATIC S7-300/S7-400) no se restablecen ni
toman los valores sustitutivos configurados. Además, el SIMATIC S7-1500 deja de reaccionar
en este estado a los valores de entrada de los módulos de entrada.
Esta información aparece una sola vez en cada sesión online.

Resultado
La función se ejecuta y se posiciona un punto de parada temporal en el punto de inserción. La
CPU pasa a "PARADA" en el lugar marcado por el punto de inserción.
El punto en el que se ha colocado el punto de parada se muestra como "alcanzado" mediante
el triángulo amarillo pequeño, el punto de parada temporal se ha borrado.

23.3.14

Observar variables al alcanzar el punto de parada

Introducción
En una CPU S7-1500 con firmware de la versión V2.5 o superior existe la posibilidad de
observar variables en combinación con puntos de parada, p. ej. cuando la CPU está en estado
operativo "PARADA" tras alcanzar un punto de parada.
Esta función solo está disponible para operandos globales (entradas, salidas, marcas,
temporizadores SIMATIC, contadores SIMATIC y DB) en tipos de datos simples.
Al situar el puntero del ratón sobre la variable se muestra el valor del operando en un tooltip
(información sobre herramientas).

Requisitos
● Existe una conexión online con la CPU.
● Se han posicionado y activado puntos de parada válidos.
● Un punto de parada se marca como "alcanzado" tanto en la Task Card "Test" como en el
editor de programación.
● La CPU está en estado operativo "PARADA", que se muestra en la Task Card "Test" tanto
en el panel de mando como en los puntos de parada.

8568

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada

Observar variables al alcanzar el punto de parada (S7-1500)
Para observar variables en el estado "PARADA", proceda del siguiente modo:
1. En el editor de programación, abra un bloque AWL o SCL que contenga puntos de parada
válidos.
2. Abra la Task Card "Test". En la paleta "Puntos de parada" aparecen listados todos los
puntos de parada posicionados en la CPU actual.
3. Haga clic con el botón derecho del ratón en el punto de parada que desea activar.
4. Elija el comando "Activar punto de parada" del menú contextual.
5. Espere hasta que se alcance el punto de parada durante la ejecución del programa y la
CPU pase a "PARADA".
6. Coloque el puntero del ratón sobre una variable global en el código del programa.

Resultado
El valor de observación de esta variable global se muestra en un tooltip con fondo amarillo.

Reglas para la observación de variables en puntos de parada activos
Para poder observar variables, la funcionalidad debe activarse mediante el botón "Activar/
desactivar observación" de la barra de herramientas del editor de programación.
En función del instante en el que se active la observación de variables durante la ejecución del
programa se recibirán resultados distintos en la visualización del estado del programa:
● Si se alcanza un punto de parada antes de haber activado la observación, no se mostrarán
valores en el estado del programa.
● Si se alcanza un punto de parada durante la primera ejecución tras activar la observación,
en el estado del programa se mostrarán solo los valores hasta el punto de parada
alcanzado.
● Si se alcanza un punto de parada después de haber llamado el bloque varias veces, los
valores de observación se mostrarán en el estado del programa del siguiente modo:
– Los valores de ciclos anteriores se muestran de color gris.
– Los valores del ciclo actual en el que la CPU ha alcanzado el punto de parada se
muestran de color negro.
Nota
● Los puntos de parada no se guardan junto con el proyecto. Si se cierra el proyecto, se
pierden todos los puntos de parada.
● Si deshace la conexión online con la CPU, se desactivarán los puntos de parada.

Consulte también
Forzar variables durante la observación (Página 8528)

Programación del PLC
Manual de programación y manejo, 11/2019

8569

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3.15

Forzar variables al alcanzar el punto de parada

Introducción
En una CPU S7-1500 con firmware de la versión V2.5 o superior existe la posibilidad de forzar
variables en combinación con puntos de parada, p. ej. cuando la CPU está en estado operativo
"PARADA" tras alcanzar un punto de parada.
Esta función solo está disponible para operandos globales (entradas, salidas, marcas,
temporizadores SIMATIC, contadores SIMATIC y DB) en tipos de datos simples.
Para el forzado existen las siguientes opciones en el menú contextual:
● Forzar a 0
● Forzar a 1
● Forzar operando: Introduzca el valor de forzado deseado en el siguiente cuadro de diálogo.
El forzado se ejecuta de inmediato y una sola vez con el operando seleccionado.
Con una CPU S7-1500 con firmware V2.5 o superior también se pueden forzar operandos
globales directamente en el código durante la observación.
Con una CPU S7-300/400 también es posible forzar operandos globales directamente en el
código durante la observación en un bloque SCL.
Si la CPU ha alcanzado un punto de parada y está en el estado operativo "PARADA", también
será posible forzar operandos globales desde la tabla de observación.

Requisitos
● Existe una conexión online con la CPU.
● Se han posicionado y activado puntos de parada válidos.
● Un punto de parada se marca como "alcanzado" tanto en la Task Card "Test" como en el
editor de programación.
● La CPU está en estado operativo "PARADA", que se muestra en la Task Card "Test" tanto
en el panel de mando como en los puntos de parada.

Forzar variables al alcanzar el punto de parada (S7-1500)
Para forzar variables en el estado "PARADA", proceda del siguiente modo:
1. En el editor de programación, abra un bloque AWL o SCL que contenga puntos de parada
válidos.
2. Inicie la observación mediante el botón de la barra de herramientas "Activar/desactivar
observación".
3. Abra la Task Card "Test". En la paleta "Puntos de parada" aparecen listados todos los
puntos de parada posicionados en la CPU actual.
4. Haga clic con el botón derecho del ratón en el punto de parada que desea activar.
5. Elija el comando "Activar punto de parada" del menú contextual.

8570

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.3 Test con puntos de parada
6. Espere hasta que se alcance el punto de parada durante la ejecución del programa y la
CPU pase a "PARADA".
7. Fuerce el operando al valor deseado haciendo clic en el comando correspondiente del
menú contextual.
– "Forzar > Forzar a 1"
Fuerza variables del tipo de datos "BOOL" al valor "TRUE".
– "Forzar > Forzar a 0"
Fuerza variables del tipo de datos "BOOL" al valor "FALSE".
– "Forzar > Forzar operando"
Si selecciona "Forzar operando", aparecerá el diálogo "Forzar operando".
Introduzca el valor deseado en el campo "Valor de forzado" del cuadro de diálogo
siguiente y confirme la entrada con "Aceptar".
8. Como alternativa, haga doble clic en el valor online que desea forzar (excepto si se trata del
tipo de datos BOOL).
9. Introduzca el valor deseado en el campo "Valor de forzado" del cuadro de diálogo siguiente
y confirme la entrada con "Aceptar".
O bien confirme en el siguiente cuadro de diálogo la consulta sobre si debe conmutarse el
valor online booleano.
● Ejemplo:
– Si confirma la consulta con "Sí" y la variable booleana tiene el valor "0", se conmutará
al valor "1".
– Si confirma la consulta con "Sí" y la variable booleana tiene el valor "1", se conmutará
al valor "0".
– Si hace clic en "No" o si cierra el cuadro de diálogo con "Cerrar", se conservará el valor
existente.
Nota
Forzado de variables en estado operativo PARADA
Tenga en cuenta que las variables visualizadas dejan de actualizarse cuando la CPU
está en estado operativo PARADA.
Se fuerzan siempre las variables visualizadas en el estado "PARADA".

Resultado
El operando seleccionado se fuerza al valor deseado.

Consulte también
Forzar variables durante la observación (Página 8528)

Programación del PLC
Manual de programación y manejo, 11/2019

8571

Comprobar el programa de usuario
23.3 Test con puntos de parada

23.3.16

Continuar la ejecución del programa

Introducción
Si se han posicionado puntos de parada válidos y se han activado, se puede ejecutar el
programa durante el test hasta un punto de parada cualquiera. En cuanto se alcanza un punto
de parada válido, la CPU se encuentra en estado "PARADA".
En una CPU S7-1500, el procesamiento del programa no prosigue hasta que la CPU se pone
de nuevo al estado operativo "RUN".
La ejecución del programa puede continuarse con o sin puntos de parada.

Requisitos
● Existe una conexión online con la CPU.
● Se han posicionado y activado puntos de parada válidos.
● Un punto de parada se marca como "alcanzado" tanto en la Task Card "Test" como en el
editor de programación.
● La CPU está en estado operativo "PARADA", que se muestra en la Task Card "Test" tanto
en el panel de mando como en los puntos de parada.

Continuar la ejecución del programa
Existen las posibilidades siguientes para continuar la ejecución del programa tras alcanzar un
punto de parada:
● Haga clic en el botón "RUN" bajo "Puntos de parada" en la Task Card "Test".
● Elija la opción "RUN" en el menú contextual del editor de programación abierto.
● Utilice los comandos de teclado "Ctrl+Mayús+F7" en el editor de programación abierto.

Resultado
La CPU pasa de "PARADA" a "RUN" y la ejecución normal del programa prosigue hasta el
siguiente punto de parada.
Si no fuera posible continuar con la ejecución del programa se recibirá un mensaje al respecto.
Si no hay más puntos de parada activados, la ejecución del programa continuará sin puntos de
parada.

8572

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

23.4

Test con la tabla de observación

23.4.1

Introducción al test con la tabla de observación

Resumen
Dentro de la tabla de observación se dispone de las siguientes funciones:
● Observar variables
Esta opción permite visualizar en la programadora o el PC los valores actuales de distintas
variables de un programa de usuario o de una CPU.
● Forzado de variables
Esta función permite asignar valores fijos a determinadas variables de un programa de
usuario o de una CPU. El forzado también es posible en el test con el estado del programa
(Página 8516).
● "Desbloquear salidas" y "Forzar inmedatamente"
Estas dos funciones permiten asignar valores fijos a determinadas salidas de periferia de
una CPU en estado operativo STOP. Esta opción también permite comprobar el cableado.

Observar y forzar variables
Se pueden observar y forzar las variables siguientes:
● entradas, salidas y marcas
● contenidos de bloques de datos
● Uso de UDT
● periferia

Team Engineering en la tabla de observación
A partir del TIA Portal V13 SP1, varios sistemas de ingeniería pueden acceder
simultáneamente online a la CPU con una CPU S7-1500 y una versión de firmware >= 1.7 en
el marco de Team Engineering y, por ejemplo, observar y forzar variables así como cargar
bloques en la CPU al mismo tiempo. Tenga en cuenta sin falta los requisitos y las reglas válidas
para Team Engineering, que encontrará en el sistema de información bajo "Utilizar Team
Engineering", en el capítulo "Poner en marcha proyectos conjuntamente".

Aplicación
La tabla de observación ofrece la ventaja de que permite guardar diferentes entornos de test.
De esta manera es posible reproducir tests durante la puesta en marcha o para fines de
servicio y mantenimiento.

Programación del PLC
Manual de programación y manejo, 11/2019

8573

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Consulte también
Estructura de la tabla de observación (Página 8574)
Modo básico/avanzado en la tabla de observación (Página 8575)
Símbolos y botones utilizados en la tabla de observación (Página 8576)
Crear y editar tablas de observación (Página 8578)

23.4.2

Estructura de la tabla de observación

Introducción
Una tabla de observación contiene las variables que se han definido y seleccionado y que son
válidas para toda la CPU. Para cada CPU que se haya creado en el proyecto se crea
automáticamente una carpeta "Tablas de observación y forzado permanente". Con el
comando "Agregar nueva tabla de observación" se crea una nueva tabla de observación en
esta carpeta.

Estructura de la tabla de observación
Las columnas visualizadas en la tabla de observación varían en función de si se está
trabajando en el modo básico o avanzado.
En el modo avanzado se muestran además las siguientes columnas:
● Observar con disparo
● Forzar con disparador
Además, los nombres de las columnas pueden cambiar dinámicamente según la acción
realizada.

8574

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Significado de las columnas
La tabla siguiente muestra el significado de las diferentes columnas en el modo básico y en el
modo avanzado:
Modo

Columna

Modo básico

Explicación
Columna identificativa

Nombre

Nombre de la variable insertada

Dirección

Dirección de la variable insertada

Formato de visualización

Formato de visualización seleccionado

Valor de observación

Valores de las variables en función del formato de visuali‐
zación seleccionado.

Valor de forzado

Valor con el que se fuerza la variable.
Selección de las variables que se van a forzar activando la
casilla de verificación correspondiente.

En el modo avanzado se
muestran también las si‐
guientes columnas:

Comentario

Posibilidad de escribir un comentario para documentar las
variables en la tabla de observación.

Comentario de la variable

Muestra el comentario de la variable seleccionada que se
escribió en otros editores. Esta columna no se puede edi‐
tar.

Observar con disparo

Indicación del modo de observación seleccionado

Forzar con disparador

Indicación del modo de forzado seleccionado

Consulte también
Símbolos y botones utilizados en la tabla de observación (Página 8576)

23.4.3

Modo básico/avanzado en la tabla de observación

Diferencia entre modo básico y modo avanzado en la tabla de observación
Dependiendo del modo ajustado, en la tabla de observación se muestran diferentes columnas
y títulos de columna que permiten realizar distintas acciones.
Encontrará una relación detallada de las diferentes columnas en Estructura de la tabla de
observación (Página 8574).

Cambiar entre el modo básico y el modo avanzado
Para cambiar entre el modo básico y el avanzado existen las siguientes opciones:
● Haga clic en el botón "Mostrar u ocultar todas las columnas del modo avanzado". Haciendo
clic de nuevo en el mismo botón se regresa al modo básico.
O bien:
● Active en el menú "Online" la casilla de verificación antepuesta al comando "Modo
avanzado". Desactivando la casilla de verificación se regresa al modo básico.

Programación del PLC
Manual de programación y manejo, 11/2019

8575

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Funciones del modo avanzado
Las siguientes funciones sólo están disponibles en modo avanzado:
● Observar con disparador
● Forzar con disparador
● Desbloquear salidas
● Observar entradas de periferia
● Forzar salidas de periferia
ATENCIÓN
Peligro de rebasar el tiempo de ciclo al observar entradas de periferia y forzar salidas de
periferia
Tenga en cuenta que al observar entradas de periferia y forzar salidas de periferia, es posible
que en la tabla de observación se rebase el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Consulte también
Definición del modo de observación y forzado (Página 8590)

23.4.4

Símbolos y botones utilizados en la tabla de observación

Significado de los símbolos
La tabla siguiente muestra el significado de los símbolos de la tabla de observación:
Símbolo/Botón

Significado
Marca una tabla de la navegación del proyecto como tabla de observación.
Muestra información en la columna de identificación.
Inserta una fila delante de la fila seleccionada.
Inserta una fila detrás de la fila seleccionada.
Inserta una línea de comentario encima de la fila seleccionada.
Fuerza una sola vez y de forma inmediata las direcciones de todas las
variables seleccionadas. Este comando se ejecuta una sola vez y lo más
rápido posible, sin referencia a un punto de disparo determinado del pro‐
grama de usuario.
Fuerza las direcciones de todas las variables seleccionadas con referencia
a un punto de disparo determinado del programa de usuario.

8576

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación
Símbolo/Botón

Significado
Desactiva el bloqueo de salida de comandos de las salidas de periferia
(BASP). Esto permite forzar las salidas de periferia en estado STOP de la
CPU.
Muestra todas las columnas del modo avanzado. Haciendo clic de nuevo
en este botón, se ocultan las columnas del modo avanzado.
Muestra todas las columnas de forzado. Haciendo clic de nuevo en el bo‐
tón, se ocultan las columnas de forzado.
Inicia la observación de las variables visibles en la tabla de observación
activa. En el modo básico, para el modo de observación está predetermi‐
nada la opción "permanente". En el modo avanzado se pueden configurar
puntos de disparo determinados para la observación de las variables.
Inicia la observación de las variables visibles en la tabla de observación
activa. Este comando se ejecuta inmediatamente y las variables se obser‐
van una sola vez.
Muestra la casilla de verificación para la selección de las variables que
deben forzarse.
Indica que la variable seleccionada se ha forzado al valor "1".
Indica que la variable seleccionada se ha forzado al valor "0".
Indica que la dirección se utiliza varias veces.
Indica que se utiliza un valor sustitutivo. Los valores sustitutivos son valores
que se transmiten al proceso cuando falla un módulo de señales de salida,
o que se utilizan en el programa de usuario en lugar de un valor de proceso
cuando falla un módulo de señales de entrada. Los valores sustitutivos
pueden ser especificados por el usuario (p. ej. mantener el valor antiguo).
Indica que la dirección está bloqueada porque ya está siendo forzada.
Indica que la dirección no puede forzarse.
Indica que la dirección no puede observarse.
Indica que se está forzando permanentemente una dirección.
Indica que parte de una dirección se ha forzado de forma permanente.
Indica que una dirección de periferia relacionada ha sido total o parcial‐
mente forzada de forma permanente.
Indica que una dirección no puede forzarse por completo de forma perma‐
nente. Ejemplo: Es posible forzar de forma permanente la dirección
QW0:P, pero no la dirección QD0:P, ya que esta área de direcciones puede
no estar presente en la CPU.
Indica que se ha producido un error de sintaxis.
Indica que si bien la dirección está seleccionada, de momento no se fuerza
todavía, p. ej.

Consulte también
Estructura de la tabla de observación (Página 8574)

Programación del PLC
Manual de programación y manejo, 11/2019

8577

Comprobar el programa de usuario
23.4 Test con la tabla de observación

23.4.5

Crear y editar tablas de observación

23.4.5.1

Crear una tabla de observación

Introducción
Con ayuda de la tabla de observación Ud. podrá observar y forzar variables en el programa de
usuario. Después de crear una tabla de observación ésta se puede guardar, duplicar, imprimir
y reutilizarse para observar y forzar variables.

Requisitos
Hay un proyecto abierto.

Procedimiento
Para crear una tabla de observación, proceda del siguiente modo:
1. Haga clic en "Vista de proyecto" de la barra de estado.
Se abre la vista del proyecto.
2. Haga doble clic en el árbol del proyecto sobre la CPU para la que desee crear una tabla de
observación.
3. Haga doble clic en primer lugar en la carpeta "Tablas de observación y forzado
permanente" y a continuación en el comando "Agregar tabla de observación".
Se agregará una nueva tabla de observación.
4. Registre en la columna "Nombre" o en la columna "Dirección" el nombre o la dirección
absoluta de las variables que desea observar o forzar.
5. En caso de que quiera modificar el formato de visualización predeterminado, seleccione en
la columna "Formato de visualización" el formato deseado de la lista desplegable.
6. Decida ahora si quiere observar o forzar las variables introducidas y, en caso necesario,
introduzca los valores deseados para el forzado de las variables.

23.4.5.2

Abrir una tabla de observación

Requisitos
Se ha creado una tabla de observación.

Procedimiento
Para abrir una tabla de observación, proceda del siguiente modo:
1. Abra la carpeta "Tablas de observación y forzado permanente" situada bajo la CPU
deseada.
2. Haga doble clic en la tabla de observación deseada de la carpeta.

8578

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Resultado
Se abre la tabla de observación seleccionada.

23.4.5.3

Copiar e insertar una tabla de observación

Requisitos
Se ha creado una tabla de observación.

Procedimiento
Para copiar una tabla de observación, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en la tabla de observación que desea copiar.
2. En el menú contextual, elija el comando "Copiar".
3. En el árbol del proyecto, abra la estructura de carpetas de la CPU en la que desea insertar
la tabla de observación copiada.
4. Haga clic con el botón derecho del ratón en la carpeta "Tablas de observación y forzado
permanente".
5. En el menú contextual, elija el comando "Pegar".
6. Como alternativa, se puede marcar todo el contenido de la tabla de observación y
arrastrarlo a otra tabla de observación mediante Drag & Drop .

Resultado
Se inserta una copia de la tabla de observación seleccionada en la carpeta "Tablas de
observación y forzado permanente" de la CPU en cuestión.

23.4.5.4

Guardar una tabla de observación

Requisitos
Se ha creado una tabla de observación.

Procedimiento
Para guardar una tabla de observación, proceda del siguiente modo:
1. Seleccione en la navegación del proyecto la tabla de observación que quiere guardar.
2. En caso de que quiera modificar el nombre predeterminado de la tabla elija el comando
"Cambiar nombre" del menú contextual e introduzca un nuevo nombre para la tabla.
3. En el menú "Proyecto" elija el comando "Guardar". Recuerde que con este procedimiento
se guardará todo el proyecto.

Programación del PLC
Manual de programación y manejo, 11/2019

8579

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Resultado
Se guardan tanto el proyecto como los contenidos de la tabla de observación.
Nota
Las tablas de observación guardadas se pueden utilizar nuevamenta para observar y forzar
variables cuando vuelva a probar el programa.

23.4.6

Introducir variables en la tabla de observación

23.4.6.1

Información básica para la entrada de variables en la tabla de observación

Procedimiento recomendado
● Determine las variables cuyos valores quiere observar o forzar e introdúzcalas en la tabla
de observación.
● Al introducir las variables en la tabla de observación tenga en cuenta que es conveniente
definir estas variables primero en la tabla de variables PLC.
● Al introducir las variables vaya de "fuera" hacia "dentro". Es decir, introduzca primero las
variables de las entradas en la tabla de observación. A continuación introduzca las
variables que en las que influyen las entradas o que influyen en las salidas. Finalmente
introduzca las variables de las salidas.

Ejemplo de cómo rellenar una tabla de observación
● Introduzca en la columna "Dirección" la dirección absoluta que debe observarse o forzarse.
● Introduzca en la columna "Nombre" el nombre simbólico de la variable.
● Seleccione en la columna "Formato de visualización" el formato de visualización deseado
de la lista desplegable en caso de que no quiera utilizar el ajuste predeterminado.
● Decida ahora si quiere observar o forzar las variables introducidas. Introduzca los valores
deseados, así como un comentario para el forzado en la columna correspondiente de la
tabla de observación.

Cómo crear una línea de comentario
Introduciendo la cadena de caracteres "//" en la columna "Nombre" puede crear una línea de
comentario si lo desea.

8580

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Comprobación de sintaxis
Al introducir variables en la tabla de observación se realiza una comprobación sintáctica antes
de abandonar la celda. Las entradas erróneas se marcan en rojo.
Nota
Colocando el cursor en una celda marcada en rojo aparece información breve con indicaciones
adicionales sobre el error.

Consulte también
Operandos permitidos para la tabla de observación (Página 8581)
Valores de forzado permitidos para la tabla de observación (Página 8582)

23.4.6.2

Operandos permitidos para la tabla de observación

Operandos autorizados para la tabla de observación
La siguiente tabla muestra los operandos que están autorizados para la tabla de observación:
Operando permitido

Ejemplo del tipo de
datos

Ejemplo (nemónicos internacio‐
nales)

Entrada/salida/marca

BOOL

I1.0; Q1.7; M10.1
I0.0:P; Q0.0:P

Entrada/salida/marca

BYTE

IB1; QB10; MB100
IB1:P; QB1:P

Entrada/salida/marca

WORD

IW1; QW10; MW100

Entrada/salida/marca

DWORD

Temporizadores

TIMER

T1

IW2:P; QW3:P
ID4; QD10; MD100
ID2:P; QD1:P
Contadores

COUNTER

C1

Bloque de datos

BOOL

DB1.DBX1.0

Bloque de datos

BYTE

DB1.DBB1

Bloque de datos

WORD

DB1.DBW1

Bloque de datos

DWORD

DB1.DBD1

Programación del PLC
Manual de programación y manejo, 11/2019

8581

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Nota
Tenga en cuenta las siguientes indicaciones para trabajar con la tabla de observación
● Por motivos de utilización interna no es posible introducir "DB0...".
● Las salidas de la periferia pueden forzarse pero no observarse.
● Las entradas de la periferia pueden observarse pero no forzarse.

Nota
Las CPU S7-300/400 no tienen acceso a bits de la periferia.
La tabla de observación no permite el acceso a bits de la periferia como %I0.0:P; %Q0.0:P a
las CPU de la familia S7-300/400.
Estos no pueden ni observarse ni forzarse.
Utilice en su lugar los bits de la memoria imagen de proceso, como p. ej., %I0.0; %Q0.0.

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al observar entradas de periferia y forzar
salidas de periferia
Tenga en cuenta que al observar entradas de periferia y forzar salidas de periferia, es posible
que en la tabla de observación se rebase por exceso el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Consulte también
Información básica para la entrada de variables en la tabla de observación (Página 8580)
Vista general de los tipos de datos válidos (Página 241)

23.4.6.3

Valores de forzado permitidos para la tabla de observación

Entrada de valores de forzado en la tabla de observación
La siguiente tabla muestra los operandos que están autorizados para la entrada de valores de
forzado en la tabla de observación:

8582

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación
Tabla 23-1

Operandos de bit

Operandos de bit posibles

Ejemplo de valores de forzado permitidos

I1.0

true

M1.7

false

Q1.0

0

Q1.1:P

1

DB1.DBX1.1

2#0

M1.6

2#1

Tabla 23-2

Operandos de byte

Operandos de byte posibles

Ejemplo de valores de forzado permitidos

IB1

2#0011_0011

MB12

B#16#1F

QB10

1F

QB11:P

'a'

DB1.DBB1

10

Tabla 23-3

Operandos de palabra

Operandos de palabra posibles

Ejemplo de valores de forzado permitidos

IW1

2#0011_0011_0011_0011

MW12

W#16#ABCD

MW14

ABCD

QW10

B#(12, 34)

QW12:P

12345

DB1.DBW1

'ab'

MW16

S5T#9s_340ms

MW18

C#123

MW9

D#2006-12-31

Tabla 23-4

Operandos de palabra doble

Operandos de palabra doble posibles

Ejemplo de valores de forzado permitidos

ID1

2#0011_0011_0011_0011_0011_0011_0011_0011

QD10

Dw#16#abcdef10

QD12:P

ABCDEF10

DB1.DBD2

b#(12,34,56,78)

MD8

L#-12

MD12

L#12

MD16

123456789

MD20

123456789

Programación del PLC
Manual de programación y manejo, 11/2019

8583

Comprobar el programa de usuario
23.4 Test con la tabla de observación
Operandos de palabra doble posibles

Ejemplo de valores de forzado permitidos

MD24

T#12s_345ms

MD28

Tod#1:2:34.567

MD32

P#e0.0

Tabla 23-5

Temporizadores

Posibles operandos del tipo
"Temporizador"

Valores de forzado per‐ Explicación
mitidos

T1

0 ms

Valor de tiempo en milisegundos (ms)

T12

20 ms

Valor de tiempo en milisegundos (ms)

T14

12400 ms

Valor de tiempo en milisegundos (ms)

T16

S5t#12s300ms

Valor de tiempo 12s 300 ms

Tabla 23-6

Contadores

Posibles operandos del tipo "Contador"

Valores de forzado permitidos

C1

0

C14

20

C16

C#123

Observaciones sobre temporizadores y contadores
● Temporizadores
Nota
El forzado de un temporizador solo afecta al valor, no al estado. El temporizador T1 se
puede forzar al valor "0", el resultado lógico en U T1 no cambiará.
Las secuencias "s5t" y "s5time" se pueden escribir tanto en minúscula como en mayúscula.
● Contadores
Nota
El forzado de un contador solo afecta al valor, no al estado. El contador C1 se puede forzar
al valor "0", el resultado lógico en U C1 no cambiará.

23.4.6.4

Sinopsis de los formatos de visualización

Formatos de visualización de la tabla de observación
Al seleccionar un formato de visualización se define el modo en que se representará el valor
de una variable.
Al introducir la dirección aparece seleccionado automáticamente un formato de visualización.
Para modificarlo, puede seleccionar el formato de visualización deseado en la lista

8584

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación
desplegable de la columna "Formatos de visualización". En la lista desplegable aparecen
únicamente los formatos de visualización que son admisibles para este tipo de datos. El
formato de visualización mencionado primero es el formato predeterminado.

Ejemplo
La siguiente tabla muestra los tipos de datos de 32 bits que están permitidos para todas las
familias de CPU en la tabla de observación, así como sus formatos de visualización:
Tipo de datos

Formatos de visualización posibles

BOOL

Bool, Hex, BCD, Octal, Bin, Dec, Dec+/-

BYTE

Hex, BCD, Octal, Bin, Dec, Dec+/-, carácter

WORD

Hex, BCD, Octal, Bin, Dec, Dec+/-, secuencia DEC, carácter, carácter Uni‐
code, temporizador SIMATIC, fecha, contador

DWORD

Hex, BCD, Octal, Bin, Dec, Dec+/-, secuencia DEC, carácter, carácter Uni‐
code, número en coma flotante, hora del día, tiempo

SINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter

INT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, temporizador SIMATIC, contador, fecha

DINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, hora del día, tiempo

USINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter

UINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, temporizador SIMATIC, contador, fecha

UDINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, hora del día, tiempo

REAL

Número en coma flotante, Hex, BCD, Octal, Bin, carácter, carácter Unicode,
Dec,
Dec+/-, secuencia Dec, hora del día, tiempo

DATE

Fecha, Dec, Hex, Bin

TIME_OF_DAY

Hora del día, Dec, Hex, Bin

TIME

Tiempo, Hex, Bin, Dec, Dec+/-

DATE_AND_TIME

Fecha y hora,

TIMER

Temporizador SIMATIC, Hex, BCD, Bin

CHAR

Carácter, Hex, BCD, Octal, Bin, Dec, Dec+/-

WCHAR

Carácter Unicode, carácter, Hex, BCD, Octal, Bin, Dec, Dec+/-

STRING

Cadena de caracteres

WSTRING

Cadena de caracteres Unicode

POINTER

Puntero, Hex

COUNTER

Contador, Hex, BCD, Bin

S5TIME

Temporizador SIMATIC, Hex, BCD, Bin

Programación del PLC
Manual de programación y manejo, 11/2019

8585

Comprobar el programa de usuario
23.4 Test con la tabla de observación
Para la familia de CPU S7-1200 son admisibles todos los tipos de datos de 32 bits, véase la
tabla más arriba, así como el tipo de datos de 64 bits LREAL con los siguientes posibles
formatos de visualización:
Tipo de datos

Formatos de visualización posibles

LREAL

en un proyecto creado con el TIA Portal < V12:
Número en coma flotante
Nota: la visualización de LREAL está limitada a 13 posiciones más el expo‐
nente.

LREAL

en un proyecto creado con el TIA Portal >= V12:
Número en coma flotante, Hex, BCD, Octal, Bin, carácter, carácter Unicode,
Dec, Dec+/-, secuencia DEC, hora del día, temporizador, fecha y hora
Nota: la visualización de LREAL está limitada a 13 posiciones más el expo‐
nente.

Para la familia de CPU S7-1500 son admisibles, además de los tipos de datos de 32 bits, los
tipos de datos de 64 bits listados en la tabla con los siguientes posibles formatos de
visualización:
Tipo de datos

Formatos de visualización posibles

LWORD

Hex, Octal, BCD, Bin, carácter, carácter Unicode, Dec, Dec+/-, secuencia
DEC, número en coma flotante, hora del día, temporizador, fecha y hora

LINT

Dec+/-, Dec, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
Dec, hora del día, temporizador, fecha y hora

ULINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, hora del día, temporizador, fecha y hora

LREAL

Número en coma flotante, Hex, BCD, Octal, Bin, carácter, carácter Unicode,
Dec, Dec+/-, secuencia DEC, hora del día, temporizador, fecha y hora

LTIME

Tiempo, Dec+/-, Dec, Hex, Bin

LTOD

Hora del día, Dec, Hex, Bin

LDT

Fecha y hora, Dec, Hex, Bin

Encontrará más información en la descripción de los tipos de datos (Página 241) válidos.

Nota
Redondeo de números en coma flotante
En la tabla de observación los números en coma flotante se guardan en formato IEEE binario.
Como no todos los números en coma flotante (real, longreal) representables en la interfaz
pueden reproducirse unívocamente en formato IEEE, los números en coma flotante pueden
redondearse. Si un número en coma flotante redondeado se copia en la tabla de observación
y se inserta en otro campo de entrada, en determinadas circunstancias el redondeo produce
una ligera diferencia.

8586

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Nota
Solo es posible el direccionamiento simbólico
Los LongDataTypes, por ejemplo LWORD o LREAL, solo se pueden direccionar
simbólicamente en la tabla de observación.

23.4.6.5

Seleccionar un formato de visualización para variables

Procedimiento
Para seleccionar el formato de visualización de las variables, proceda como se indica a
continuación:
1. Introduzca la dirección en la tabla de observación.
2. Haga clic en la celda deseada de la columna "Formato de visualización" y abra la lista
desplegable.
Los formatos de visualización autorizados se muestran el la lista desplegable.
3. Seleccione en la lista desplegable el formato de visualización deseado.
Nota
En caso de que el formato de visualización seleccionado no se pueda aplicar, se muestra
automáticamente el último formato de visualización seleccionado.

Consulte también
Vista general de los tipos de datos válidos (Página 241)

23.4.6.6

Cómo crear y editar líneas de comentario

Principios básicos de las líneas de comentario
Para dar una estructura más clara a la tabla de observación, además de los comentarios
referidos a filas de la columna de comentarios ahora es posible crear líneas de comentario
completas.
Los contenidos de la línea de comentario se guardan en la carpeta "Idiomas y recursos", ficha
"Textos del proyecto" y puede traducirse a otros idiomas del proyecto.
Para introducir líneas de comentario se dispone también de las siguientes opciones:
● Mediante el botón correspondiente de la barra de herramientas de la tabla de observación.
● Mediante el comando de menú "Insertar > Insertar línea de comentario".

Programación del PLC
Manual de programación y manejo, 11/2019

8587

Comprobar el programa de usuario
23.4 Test con la tabla de observación
● Mediante el comando del menú contextual "Insertar línea de comentario".
● Introduciendo la cadena de caracteres "//" en la columna "Nombre" de la tabla de
observación.

Insertar líneas de comentario
Para insertar líneas de comentarios, proceda de la manera siguiente:
1. Abra la tabla de observación e introduzca las direcciones deseadas.
2. Agregue una nueva línea de comentario.
– Para ello, haga clic en el botón "Insertar línea de comentario" de la barra de
herramientas de la tabla de observación.
– O bien haga clic en el comando de menú "Insertar > Insertar línea de comentario".
– O bien haga clic en el comando del menú contextual "Insertar > Insertar línea de
comentario".
Resultado: Encima de la fila seleccionada en la tabla de observación se insertará una
nueva línea de comentario.
3. Introduzca el comentario deseado en la línea de comentario. El comentario introducido se
muestra en verde.
4. Para mostrar todos los comentarios que ha introducido, seleccione en el árbol del proyecto
"Idiomas y recursos" y haga doble clic en "Textos del proyecto".
5. Si trabaja con proyectos multilingües y desea traducir sus comentarios a otros idiomas,
puede configurar otros idiomas de proyecto además del idioma de edición en el árbol de
proyecto en "Idiomas y recursos > Textos del proyecto".

Crear líneas de comentario
Para crear líneas de comentario, proceda del siguiente modo:
1. Abra la tabla de observación e introduzca las direcciones deseadas.
2. Introduzca la cadena de caracteres "//" en una fila vacía de la columna "Nombre". De este
modo convertirá la fila en una línea de comentario.
En el resto de las columnas no es posible crear líneas de comentario.
3. Introduzca el comentario deseado en la línea de comentario. El comentario introducido se
muestra en verde.
4. Para mostrar todos los comentarios que ha introducido, seleccione en el árbol del proyecto
"Idiomas y recursos" y haga doble clic en "Textos del proyecto".
5. Si trabaja con proyectos multilingües y desea traducir sus comentarios a otros idiomas,
puede configurar otros idiomas de proyecto además del idioma de edición en el árbol de
proyecto en "Idiomas y recursos > Textos del proyecto".

8588

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Cómo borrar líneas de comentario
Para borrar líneas de comentario, proceda de la manera siguiente:
1. Abra una tabla de observación que contenga líneas de comentario.
2. Si ya no lo necesita, borre todo el comentario, incluida la cadena de caracteres introductoria
"//".
3. Como alternativa, puede borrar solo la cadena de caracteres introductoria "//". De esta
forma el comentario se mantiene y se muestra en la columna "Comentario" de la tabla de
observación.
Nota
Borrado de líneas de comentario
Al borrar líneas de comentario se borran también los idiomas de proyecto configurados para
esos comentarios así como las traducciones que pudiera haber.

23.4.7

Observar variables en la tabla de observación

23.4.7.1

Introducción a la observación de variables en la tabla de observación

Introducción
En la tabla de visualización se pueden observar las variables de los módulos de entrada y de
salida en la CPU dependiendo del modo de observación o forzado (Página 8590)
seleccionado. Para observar variables debe existir una conexión online con la CPU.

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al observar entradas de periferia
Tenga en cuenta que la observación de entradas de periferia puede ocasionar un rebase por
exceso del tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Programación del PLC
Manual de programación y manejo, 11/2019

8589

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Opciones para la observación de variables
Para la observación de variables existen las siguientes opciones:
● Observar inmediatamente
Este comando inicia la observación de las variables visibles en la tabla de observación
activa de inmediato y una vez.
● Observar todos
Este comando inicia la observación de todas las variables visibles en la tabla de
observación en función del modo de observación seleccionado:
– En el modo básico está predeterminado el modo de observación "permanente".
– En el modo avanzado se pueden definir puntos de disparo determinados para la
observación de las variables.
Nota
Si se cambia el modo de observación al modo avanzado y otra vez al modo básico, se
toma el modo de observación anteriormente ajustado también en el modo básico.

Limitaciones específicas de la CPU en la observación de variables
Existen las siguientes diferencias específicas de la CPU:
● CPU S7-300/400:
Las CPUs de esta familia pueden observar únicamente los primeros 30 caracteres de una
cadena.
● CPU S7-1200/1500:
Las CPUs de esta familia pueden observar una cadena de hasta 254 caracteres en total.

23.4.7.2

Definición del modo de observación y forzado

Introducción
Al seleccionar el modo de observación y forzado se especifica el punto de disparo y el tiempo
de observación de las variables en la tabla de observación y en la tabla de forzado permanente.

Modo de observación y forzado posible (tiempo de observación o forzado)
Existen los siguientes modos de observación y forzado:

8590

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Disparador

Ejecución

Estado de
CPU

Duración

Permanente

Permanente

RUN

Se ejecuta hasta que el usuario
finaliza la acción o hasta que se
interrumpe la conexión online
con la CPU.

Al observar: las entradas se observan al fi‐
nal y las salidas al principio del ciclo.
Al forzar: las entradas se fuerzan al principio
y las salidas al final del ciclo.
Inicio del ciclo, permanente

Permanentemente al inicio del ciclo

RUN

Se ejecuta hasta que el usuario
finaliza la acción o hasta que se
interrumpe la conexión online
con la CPU.

Fin del ciclo, permanente

Permanentemente al final del ciclo

RUN

Se ejecuta hasta que el usuario
finaliza la acción o hasta que se
interrumpe la conexión online
con la CPU.

Permanentemente al pasar
de RUN a STOP

Permanentemente al pasar de RUN a STOP RUN >
STOP

Se ejecuta hasta que el usuario
finaliza la acción o hasta que se
interrumpe la conexión online
con la CPU.

Inicio del ciclo, único

Una sola vez al inicio del ciclo

RUN

Finaliza automáticamente tras
ejecutarse una sola vez.

Fin del ciclo, único

Una sola vez al final del ciclo

RUN

Finaliza automáticamente tras
ejecutarse una sola vez.

Una sola vez al pasar de
RUN a STOP

Una sola vez al pasar de RUN a STOP

STOP >
RUN

Finaliza automáticamente tras
ejecutarse una sola vez.

Particularidades del modo "Permanente"
El modo "Permanente" se ejecuta de forma distinta para la observación y el forzado de
variables:
● Observación: las entradas se observan al final y las salidas al principio del ciclo.
● Forzado: las entradas se fuerzan al principio y las salidas al final del ciclo.

Definición de un punto de disparo
Los puntos de disparo "Inicio del ciclo", "Fin del ciclo" y "Transición de RUN a STOP" definen
el momento en que las variables se leen de la CPU o se actualizan en la CPU.
La siguiente figura muestra la posición de los puntos de disparo mencionados:

Programación del PLC
Manual de programación y manejo, 11/2019

8591

Comprobar el programa de usuario
23.4 Test con la tabla de observación

0HPRULDLPDJHQGHSURFHVRGHODV
HQWUDGDV

3XQWRGHGLVSDUR,QLFLRGHOFLFOR

2%

3XQWRGHGLVSDUR7UDQVLFLµQD
6723

3XQWRGHGLVSDUR)LQGHOFLFOR

0HPRULDLPDJHQGHSURFHVRGH
ODVVDOLGDV

Posición de los puntos de disparo
De la posición de los puntos de disparo se deduce lo siguiente:
● El forzado de entradas sólo resulta efectivo al inicio del ciclo (equivale al inicio del programa
de usuario OB 1), ya que de lo contrario la memoria imagen de proceso de las entradas se
actualiza nuevamente después del forzado, con lo que se sobrescribe.
● El forzado de salidas sólo resulta efectivo al final del ciclo (equivale al final del programa de
usuario OB 1), ya que de lo contrario el programa de usuario puede sobrescribir la memoria
imagen de proceso de las salidas.
● El valor forzado se indica en la columna "Valor de observación", siempre que se observe de
forma activa y que el programa de usuario no sobrescriba el valor forzado.

Forzado de variables
Al forzar variables rige para los puntos de disparo:
● Si ha seleccionado "único" como modo de forzado, aparecerá un mensaje en caso de que
no se puedan forzar las variables seleccionadas.
● con el modo de forzado "permanente" no aparece ningún mensaje.

Observación respecto al comando "Forzar inmediatamente"
Los valores de las variables seleccionadas se pueden forzar inmediatamente con el comando
"Online > Forzar> Forzar inmediatamente". Esta petición se realiza una sola vez y lo más
rápido posible, sin referencia a un punto determinado (punto de disparo) del programa de
usuario. Esta función se utiliza principalmente en el estado STOP de la CPU para forzar.

8592

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

23.4.7.3

Variables "Observar todos"

Introducción
El comando "Observar todos" permite iniciar la observación de las variables visibles en la tabla
de observación activa. En el modo básico de la tabla de observación está predeterminada la
opción "permanente" para el modo de observación. En el modo avanzado se pueden definir
puntos de disparo determinados para la observación de las variables. En ese caso, las
variables se observan con respecto a los puntos de disparo definidos.

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al observar entradas de periferia
Tenga en cuenta que la observación de entradas de periferia puede ocasionar un rebase por
exceso del tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.

Procedimiento
Para ejecutar el comando "Observar todos", proceda del siguiente modo:
1. Introduzca las variables que desee observar y las direcciones correspondientes en la tabla
de observación.
2. Cambie al modo avanzado haciendo clic en el
botón "Ocultar o mostrar todas las columnas del modo avanzado".
3. Para modificar el modo de observación predeterminado de una variable, haga clic en la
celda correspondiente de la columna "Observar con disparador" y seleccione el modo de
observación que desee en la lista desplegable.
4. Haga clic en el botón "Observar todos" de la barra de herramientas.

Resultado
Las variables de la tabla de observación activa se observan en el modo de observación
seleccionado en cada caso.

Programación del PLC
Manual de programación y manejo, 11/2019

8593

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Consulte también
Símbolos y botones utilizados en la tabla de observación (Página 8576)
Modo básico/avanzado en la tabla de observación (Página 8575)
Introducir variables en la tabla de observación (Página 8580)

23.4.7.4

"Observar inmediatamente" variables

Introducción
Con el comando "Observar inmediatamente" se inicia la observación de las variables
inmediatamente sin referencia a puntos de disparo determinados. Los valores de las variables
se leen una sola vez y se muestran en la tabla de observación.

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al observar entradas de periferia
Tenga en cuenta que la observación de entradas de periferia puede ocasionar un rebase por
exceso del tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.

Procedimiento
Para ejecutar el comando "Observar inmediatamente", proceda del siguiente modo:
1. Introduzca las variables que desee observar y las direcciones correspondientes en la tabla
de observación.
2. Haga clic en el botón "Observar inmediatamente" en la barra de herramientas.

Resultado
Las variables de la tabla de observación activa se observan inmediatamente y una sola vez.

Consulte también
Símbolos y botones utilizados en la tabla de observación (Página 8576)
Modo básico/avanzado en la tabla de observación (Página 8575)
Introducir variables en la tabla de observación (Página 8580)

8594

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

23.4.8

Forzar variables en la tabla de observación

23.4.8.1

Introducción al forzado de variables

Introducción
La tabla de observación permite forzar las variables de los módulos de entrada y salida
configurados en la CPU en función del modo de observación y forzado (Página 8590)
seleccionado.
Para poder observar las variables debe existir una conexión online con la CPU.

PELIGRO
Peligro al forzar:
La modificación de las variables o direcciones durante el funcionamiento de la instalación
puede provocar graves daños materiales o personales en caso de fallos de funcionamiento
o del programa.
Asegúrese de que no pueden darse estados peligrosos antes de ejecutar la función "Forzar".

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al forzar salidas de periferia
Tenga en cuenta que al forzar salidas de periferia, es posible que en la tabla de observación
se rebase por exceso el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

ATENCIÓN
Peligro debido al forzado paralelo de un operando idéntico con diferentes valores de forzado
en varias tablas de observación
Cuando se trabaja con varias tablas de observación debe tenerse en cuenta que los
operandos idénticos no deben forzarse varias veces de forma permanente con diferentes
valores de forzado.
Cuando un operando idéntico se fuerza de forma permanente y simultánea en varias tablas
de observación con diferentes valores de forzado permanente, en todas las tablas de
observación se muestra el último valor forzado como valor de observación, puesto que en
este caso se fuerza siempre el último valor de forzado asignado.

Programación del PLC
Manual de programación y manejo, 11/2019

8595

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Opciones del forzado de variables
Para el forzado de variables existen las siguientes opciones:
● Forzar a "0"
Este comando fuerza la dirección seleccionada al valor de forzado "0".
● Forzar a "1"
Este comando fuerza la dirección seleccionada al valor de forzado "1".
● Forzar inmediatamente una sola vez
Este comando fuerza "inmediatamente una sola vez" todas las direcciones activadas en la
tabla de observación activa.
● Forzar con disparador
Este comando fuerza todas las direcciones activadas en la tabla de observación activa con
el modo de observación y forzado (Página 8590) seleccionado en cada caso.
La función "Forzar con disparador" sólo está disponible en el modo avanzado. No recibirá
ninguna notificación de si las direcciones activadas realmente se han forzado al valor
predefinido o no. Para recibir una notificación de ese tipo, utilice la función "Forzar
inmediatamente una sola vez".
● Desbloquear salidas
Este comando desactiva el bloqueo de salida de comandos (BASP).
Esta función solamente se puede realizar en el modo avanzado cuando la CPU está en
STOP y cuando el forzado permanente (Página 8622) de las variables no está activado.
Desactive esta función, si así lo desea, en la tabla de forzado permanente.
Nota
Al forzar, tenga en cuenta lo siguiente:
El forzado de variables no se puede deshacer.

23.4.8.2

Forzar variables a "0"

Introducción
Es posible asignar valores a las variables una sola vez y forzarlas independientemente del
modo de observación y forzado. En la ejecución, la petición de forzado se ejecuta lo más rápido
posible, como si se tratase de un "disparador inmediato", sin referencia a un punto
determinado del programa de usuario.
PELIGRO
Peligro al forzar:
La modificación de las variables o direcciones durante el funcionamiento de la instalación
puede provocar graves daños materiales o personales en caso de fallos de funcionamiento
o del programa.
Asegúrese de que no pueden darse estados peligrosos antes de ejecutar la función "Forzar".

8596

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al forzar salidas de periferia
Tenga en cuenta que al forzar salidas de periferia, es posible que en la tabla de observación
se rebase por exceso el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.

Procedimiento
Para forzar variables a "0", proceda del siguiente modo:
1. Introduzca la dirección en la tabla de observación.
2. Elija el comando "Online > Forzar > Forzar a 0" para forzar la dirección seleccionada al valor
predefinido.

Resultado
La dirección seleccionada se fuerza a "0".
Nota
Al forzar, tenga en cuenta lo siguiente:
El forzado no puede deshacerse.

Programación del PLC
Manual de programación y manejo, 11/2019

8597

Comprobar el programa de usuario
23.4 Test con la tabla de observación

23.4.8.3

Forzar variables a "1"

Introducción
Es posible asignar valores a las variables una sola vez y forzarlas independientemente del
modo de observación y forzado. En la ejecución, la petición de forzado se ejecuta lo más rápido
posible, como si se tratase de un "disparador inmediato", sin referencia a un punto
determinado del programa de usuario.
PELIGRO
Peligro al forzar:
La modificación de las variables o direcciones durante el funcionamiento de la instalación
puede provocar graves daños materiales o personales en caso de fallos de funcionamiento
o del programa.
Asegúrese de que no pueden darse estados peligrosos antes de ejecutar la función "Forzar".

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al forzar salidas de periferia
Tenga en cuenta que al forzar salidas de periferia, es posible que en la tabla de observación
se rebase por exceso el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.

Procedimiento
Para forzar variables a "1", proceda del siguiente modo:
1. Introduzca la dirección en la tabla de observación.
2. Elija el comando "Online > Forzar > Forzar a 1" para forzar la dirección seleccionada al valor
predefinido.

8598

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Resultado
La dirección seleccionada se fuerza a "1".
Nota
Al forzar, tenga en cuenta lo siguiente:
El forzado no puede deshacerse.

23.4.8.4

"Forzar inmediatamente" variables

Introducción
Es posible asignar valores a las variables una sola vez y forzarlas de forma inmediata
independientemente del modo de observación y forzado. En la ejecución, la petición de
forzado se ejecuta lo más rápido posible, como si se tratase de un "disparador inmediato", sin
referencia a un punto determinado del programa de usuario.
PELIGRO
Peligro al forzar:
La modificación de las variables o direcciones durante el funcionamiento de la instalación
puede provocar graves daños materiales o personales en caso de fallos de funcionamiento
o del programa.
Asegúrese de que no pueden darse estados peligrosos antes de ejecutar la función "Forzar".

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al forzar salidas de periferia
Tenga en cuenta que al forzar salidas de periferia, es posible que en la tabla de observación
se rebase por exceso el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.

Programación del PLC
Manual de programación y manejo, 11/2019

8599

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Procedimiento
Para forzar variables inmediatamente, proceda del siguiente modo:
1. Introduzca la dirección y los valores de forzado en la tabla de observación.
2. Seleccione las direcciones que desee forzar activando la casilla de verificación de forzado
en la columna que sigue al "Valor de forzado".
Junto a la casilla de verificación activada aparece un triángulo amarillo que indica que la
dirección está seleccionada para el forzado, pero que todavía no ha sido forzada.
3. Elija el comando "Online > Forzar > Forzar inmediatamente" para forzar inmediatamente y
una sola vez con los valores predefinidos las direcciones seleccionadas.

Resultado
Las direcciones seleccionadas se fuerzan inmediatamente una sola vez.
Nota
Al forzar, tenga en cuenta lo siguiente:
El forzado no puede deshacerse.

23.4.8.5

"Forzar con disparador" variables

Introducción
Es posible asignar valores a las direcciones y forzarlas acorde con el modo de observación y
forzado definido. En la ejecución, la petición de forzado se ejecuta de la forma definida en el
modo de observación y forzado con referencia al punto del programa de usuario definido como
disparador.
PELIGRO
Peligro al forzar:
La modificación de las variables o direcciones durante el funcionamiento de la instalación
puede provocar graves daños materiales o personales en caso de fallos de funcionamiento
o del programa.
Asegúrese de que no pueden darse estados peligrosos antes de ejecutar la función "Forzar".

ATENCIÓN
Peligro de rebasar por exceso el tiempo de ciclo al forzar salidas de periferia
Tenga en cuenta que al forzar salidas de periferia, es posible que en la tabla de observación
se rebase por exceso el tiempo de ciclo.
En este caso, la CPU pasa al estado operativo "STOP".

8600

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.4 Test con la tabla de observación

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.
● La tabla de observación debe encontrarse en modo avanzado.

Procedimiento
Para forzar variables "con disparador", proceda del siguiente modo:
1. Introduzca la dirección y los valores de forzado en la tabla de observación.
2. Seleccione las direcciones que desee forzar activando la casilla de verificación de forzado
en la columna que sigue al "Valor de forzado".
Junto a la casilla de verificación activada aparece un triángulo amarillo que indica que la
dirección está seleccionada para el forzado, pero que todavía no ha sido forzada.
3. Cambie al modo avanzado con el botón "Ocultar o mostrar todas las columnas del modo
avanzado" de la barra de herramientas o con el comando "Online > Modo avanzado".
Aparecen las columnas "Observar con disparador" y "Forzar con disparador".
4. Seleccione el modo de forzado que desee utilizar en la lista desplegable de la columna
"Forzar con disparador". Existen las opciones siguientes:
– Permanente
– Inicio del ciclo, permanente
– Inicio del ciclo, único
– Fin del ciclo, permanente
– Fin del ciclo, único
– Transición a STOP, permanente
– Transición a STOP, única
5. Inicie el forzado con el comando "Online > Forzar > Forzar con disparador".
6. Confirme la pregunta con "Sí" si desea iniciar el forzado con disparador.

Resultado
Las variables activadas se fuerzan con el modo de observación y forzado seleccionado. El
triángulo amarillo ya no aparece.
Nota
Al forzar, tenga en cuenta lo siguiente:
El forzado no puede deshacerse.

Programación del PLC
Manual de programación y manejo, 11/2019

8601

Comprobar el programa de usuario
23.4 Test con la tabla de observación

23.4.8.6

Desbloquear salidas

Introducción
La función "Desbloquear salidas" desactiva el bloqueo de las salidas de periferia (BASP). Esto
permite forzar las salidas de la periferia cuando la CPU se encuentra en el estado operativo
STOP.
En la tabla de observación, esta función sólo está disponible en el "modo avanzado" y sólo para
las CPU de la familia S7-300/400 y S7-1200.
PELIGRO
Peligro al desbloquear las salidas de la periferia:
Tenga en cuenta que el desbloqueo de las salidas de la periferia pueden causar daños
materiales y personales graves.
Asegúrese de que no se pueden producir condiciones peligrosas antes de ejecutar la función
"Desbloquear salidas".

Requisitos
● Se ha creado una tabla de observación.
● Existe una conexión online con la CPU.
● La CPU debe estar en el estado operativo STOP para desbloquear las salidas de la
periferia.
● La tabla de observación debe encontrarse en modo avanzado.
● El forzado permanente (Página 8622) de variables no debe estar activo.
Nota
Función "Desbloquear salidas"
● Esta función es posible únicamente en el estado operativo STOP. Se finaliza cuando la
CPU cambia de estado operativo y al cerrar la conexión online.
● Mientras la función está activa, no se puede forzar de forma permanente.

Procedimiento
Para desbloquera las salidas en el estado operativo STOP, proceda del siguiente modo:
1. Introduzca la dirección y los valores de forzado en la tabla de observación.
2. Seleccione las direcciones que desee forzar activando la casilla de verificación de forzado
en la columna que sigue al "Valor de forzado".
Junto a la casilla de verificación activada aparece un triángulo amarillo que indica que la
dirección está seleccionada para el forzado, pero que todavía no ha sido forzada.

8602

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
3. Cambie al modo avanzado con el botón "Ocultar o mostrar todas las columnas del modo
avanzado" de la barra de herramientas o con el comando "Online > Modo avanzado".
Aparecen las columnas "Observar con disparador" y "Forzar con disparador".
4. Cambie la CPU asignada al estado operativo STOP desde el panel de mando.
5. Abra el menú contextual pulsando el botón derecho del ratón y elija el comando
"Desbloquear salidas".
6. Confirme la pregunta con "Sí" si desea desactivar el bloqueo de salida de comandos para
las salidas de periferia.
7. Fuerce las salidas de periferia con el comando "Online > Forzar > Forzar inmediatamente".

Resultado
Las salidas de periferia se fuerzan con los valores de forzado seleccionados. El triángulo
amarillo ya no aparece.

Desbloqueo de las salidas de periferia
La función "Desbloquear salidas" permanece activada hasta que:
● El comando "Desbloquear salidas" se vuelve a desactivar desde el menú contextual o con
el comando "Online > Forzar > Desbloquear salidas".
● La CPU ya no está en estado operativio STOP.
● Se finaliza la conexión online.
Nota
Al forzar, tenga en cuenta lo siguiente:
El forzado no puede deshacerse.

23.5

Test con la tabla de forzado permanente

23.5.1

Introducción al test con la tabla de forzado permanente

Resumen
La tabla de forzado permanente permite preasignar valores fijos a distintas variables del
programa de usuario
. Este procedimiento se conoce como "forzado permanente".

Programación del PLC
Manual de programación y manejo, 11/2019

8603

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Dentro de la tabla de forzado permanente se dispone de las siguientes funciones:
● Observar variables
Esta opción permite visualizar en la programadora o el PC los valores actuales de distintas
variables de un programa de usuario o de una CPU. La observación se puede efectuar con
o sin condición de disparo.
● Forzado permanente de variables
Permite asignar un valor fijo a variables de periferia individuales de un programa de usuario.

Observar y forzar permanentemente variables
La observación y el forzado permanente de variables siempre depende del volumen de
operandos de la CPU utilizada.
Se pueden observar las siguientes variables:
● entradas, salidas y marcas
● contenidos de bloques de datos
● Entradas de periferia
Se pueden forzar permanentemente las siguientes variables:
● Entradas de periferia
● Salidas de periferia

Ejemplo
Independientemente de la CPU utilizada en cada caso, se puede forzar permanentemente la
periferia solamente, así por ejemplo: "Tag_1":P ó "QW0:P" ó "IW0:P". Recuerde que "Tag_1":P
no puede ser el nombre simbólico de una marca.

Aplicación
La tabla de forzado permanente no sólo ofrece la ventaja de poder realizar diferentes
simulaciones en entorno de pruebas, sino también la de poder sobrescribir variables en la CPU
con un valor fijo. Con ello se dispone de la posibilidad de intervenir, ajustando el proceso en
curso.

Consulte también
Estructura de la tabla de forzado permanente (Página 8605)
Modo básico y modo avanzado en la tabla de forzado permanente (Página 8607)
Símbolos utilizados en la tabla de forzado permanente (Página 8607)
Abrir y procesar tabla de forzado permanente (Página 8609)

8604

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.2

Medidas de seguridad para el forzado permanente de variables

Medidas de seguridad para el forzado permanente de variables
Dado que con la función de forzado permanente se interviene permanentemente en el
proceso, es necesario observar las siguientes indicaciones:
PELIGRO
Evitación de daños personales y materiales
Tenga en cuenta que al ejecutar la función "Forzado permanente", una acción incorrecta
puede:
● puede poner en peligro la vida o salud de personas.
● causar daños materiales en la máquina o en toda la instalación

PRECAUCIÓN
Evitación de daños personales y materiales
● Antes de iniciar la función "Forzado permanente" asegúrese de que nadie más vaya a
ejecutar simultáneamente esta función en la misma CPU.
● El forzado permanente sólo puede finalizarse haciendo clic en el botón "Finalizar forzado
permanente" o con el comando "Online > Forzar permanentemente > Finalizar forzado
permanente". Cerrando la tabla de forzado permanente activa no se finaliza el forzado
permanente.
● El "forzado permanente" no puede deshacerse.
● Infórmese sobre las diferencias entre el "forzado de variables (Página 8595)" y el "forzado
permanente de variables (Página 8622)".
● Si una CPU no soporta la función de "forzado permanente", los botones relacionados con
esa función no estarán disponibles.
● Si está activada la función "Desbloquear salidas de periferia" en la CPU utilizada, no se
podrá efectuar el forzado permanente en esa CPU. Desactive esta función, si así lo desea,
en la tabla de observación.

23.5.3

Estructura de la tabla de forzado permanente

Introducción
En la tabla de forzado permanente se introducen las variables válidas para las CPU definidas
y seleccionadas por el usuario, que se deben forzar permanentemente en la CPU asignada.
Solamente se pueden forzar permanentemente las entradas y salidas de la periferia.

Programación del PLC
Manual de programación y manejo, 11/2019

8605

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Para cada CPU que se haya creado en el proyecto se genera automáticamente una tabla de
forzado permanente en la carpeta "Tablas de observación y de forzado permanente".
Solamente se puede asignar una única tabla de forzado permanente a una CPU. Esta tabla de
forzado permanente indica todas las direcciones forzadas permanentemente en la CPU
asociada.

Estructura de la tabla de forzado permanente
Las columnas visualizadas en la tabla de forzado permanente varían en función de si se está
trabajando en el modo básico o avanzado.
En el modo avanzado se indica además la columna "Observar con disparo"

Significado de las columnas
La tabla siguiente muestra el significado de las diferentes columnas en el modo básico y en el
modo avanzado:
Modo

Columna

Modo básico

Explicación
Columna identificativa

Nombre

Nombre de la variable insertada

Dirección

Dirección de la variable insertada

Formato de visualización

Formato de visualización seleccionado

Valor de observación

Valores de las variables en función del formato de visuali‐
zación seleccionado.

Valor de forzado permanente

Valor con el que se fuerza la variable de forma permanen‐
te.

("Forzar permanentemente") Selección de las variables que se van a forzar permanen‐
temente activando la casilla de verificación correspondien‐
te.
Comentario

Posibilidad de escribir un comentario para documentar las
variables en la tabla de forzado permanente.

Comentario de la variable

Muestra el comentario de la variable seleccionada que se
escribió en otros editores.
Esta columna no se puede editar.

En el modo avanzado se
muestra también la siguien‐
te columna:

Observar con disparo

Indicación del modo de observación seleccionado

Consulte también
Símbolos utilizados en la tabla de forzado permanente (Página 8607)
Modo básico y modo avanzado en la tabla de forzado permanente (Página 8607)

8606

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.4

Modo básico y modo avanzado en la tabla de forzado permanente

Diferencias entre modo básico y modo avanzado en la tabla de forzado permanente
En el modo avanzado se muestra además en la tabla de forzado permanente la columna
"Observar con disparo".
Encontrará una relación detallada de las diferentes columnas en Estructura de la tabla de
forzado permanente (Página 8605).

Cambiar entre modo básico y modo avanzado
Para cambiar entre el modo básico y el avanzado existen las siguientes opciones:
● Haga clic en el botón "Mostrar u ocultar todas las columnas del modo avanzado". Haciendo
clic de nuevo en el mismo botón se regresa al modo básico.
O bien:
● Active en el menú "Online" la casilla de verificación antepuesta al comando "Modo
avanzado". Desactivando la casilla de verificación se regresa al modo básico.

Funciones del modo avanzado
Las siguientes funciones sólo están disponibles en modo avanzado:
● Observar con disparador
● Observar entradas de periferia

23.5.5

Símbolos utilizados en la tabla de forzado permanente

Significado de los símbolos
La tabla siguiente muestra el significado de los símbolos en la tabla de forzado permanente:
Símbolo/Botón

Significado
Identificador de una tabla dentro del árbol del proyecto como tabla de forzado
permanente.
Columna identificativa
Inserta una fila delante de la fila seleccionada.
Inserta una fila detrás de la fila seleccionada.
Inserta una línea de comentario encima de la fila seleccionada.
Muestra todas las columnas del modo avanzado. Haciendo clic de nuevo en
este botón, se ocultan de nuevo las columnas del modo avanzado.
Actualiza en la tabla de forzado permanente abierta todos los operandos y
valores que actualmente están forzados de forma permanente en la CPU.

Programación del PLC
Manual de programación y manejo, 11/2019

8607

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Símbolo/Botón

Significado
Inicia el forzado permanente de todas las direcciones de las variables selec‐
cionadas. Si ya hay una operación de forzado permanente activa, ésta se
sustituye sin interrupción.
Finaliza el forzado permanente de direcciones en la tabla de forzado perma‐
nente.
Inicia la observación de las variables visibles en la tabla de forzado perma‐
nente. En el modo básico, para la observación está predeterminada la opción
"permanente". En el modo avanzado aparece además una columna y se
pueden configurar puntos de disparo determinados para la observación de
las variables.
Inicia la observación de las variables visibles en la tabla de forzado perma‐
nente. Este comando se ejecuta inmediatamente y las variables se observan
una sola vez.
Muestra la casilla de verificación para la selección de las variables que deben
forzarse permanentemente.
Indica que una dirección no puede forzarse por completo de forma perma‐
nente. Ejemplo: Es posible forzar de forma permanente la dirección QW0:P,
pero no la dirección QD0:P, ya que esta área de direcciones puede no estar
presente en la CPU.
Indica que una dirección no puede observarse.
Indica que se está forzando permanentemente una dirección.
Indica que parte de una dirección se ha forzado de forma permanente.
Indica que la dirección de periferia asociada se está forzando permanente‐
mente.
Indica que se ha producido un error de sintaxis.
Indica que la dirección está seleccionada, pero que por ejemplo, aún no está
siendo forzada permanentemente.
Indica que se ha observado si la variable seleccionada tiene el valor "1".
Indica que se ha observado si la variable seleccionada tiene el valor "0".
Indica que la dirección se utiliza varias veces.
Indica que se utiliza un valor sustitutivo. Los valores sustitutivos son valores
que se transmiten al proceso cuando falla un módulo de señales de salida, o
que se utilizan en el programa de usuario en lugar de un valor de proceso
cuando falla un módulo de señales de entrada. Los valores sustitutivos pue‐
den ser especificados por el usuario (p. ej. mantener el valor antiguo).

Consulte también
Estructura de la tabla de forzado permanente (Página 8605)

8608

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.6

Abrir y procesar tabla de forzado permanente

23.5.6.1

Visualización de la tabla de forzado permanente

Introducción
Una tabla de forzado permanente no se puede crear, existe ya para cada CPU. Está asociada
a dicha CPU y no se puede copiar ni duplicar.

Requisitos
Debe estar abierto un proyecto con una CPU asociada.

Visualización de una tabla de forzado permanente
La tabla de forzado permanente se muestra siempre en una CPU bajo la carpeta "Tablas de
observación y de forzado permanente".

23.5.6.2

Abrir tabla de forzado permanente

Requisitos
Debe haberse creado un proyecto con una CPU asociada.

Procedimiento
Para abrir una tabla de forzado permanente, proceda del siguiente modo:
1. Abra la carpeta "Tablas de observación y de forzado permanente" situada bajo la CPU
deseada.
2. Haga doble clic en la "Tabla de forzado permanente" que contiene esta carpeta.

Resultado
Se abre la tabla de forzado permanente seleccionada.

23.5.6.3

Guardar tabla de forzado permanente

Requisitos
Se ha creado un proyecto con una CPU asociada.

Programación del PLC
Manual de programación y manejo, 11/2019

8609

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Procedimiento
Para guardar una tabla de forzado permanente, proceda del siguiente modo:
1. Introduzca las modificaciones deseadas en la tabla de forzado permanente.
2. Seleccione en el menú "Proyecto" el comando "Guardar" o haga clic en el icono "Guardar
proyecto" en la barra de herramientas. Recuerde que con este procedimiento se guardará
todo el proyecto.

Resultado
Se guardan tanto el proyecto como los contenidos de la tabla de forzado permanente.
Nota
No es posible cambiar el nombre de una tabla de forzado permanente.

23.5.7

Introducir variables en la tabla de forzado permanente

23.5.7.1

Información básica para la entrada de variables en la tabla de forzado permanente

Procedimiento recomendado
Determine para qué variables desea observar o forzar permanentemente valores e
introdúzcalas en la tabla de forzado permanente.
Tenga en cuenta que al introducir variables en la tabla de forzado permanente, tiene sentido
definir estas variables previamente en la tabla de variables PLC.

Ejemplo de cómo rellenar una tabla de forzado permanente
● Puede introducir en la columna "Dirección" las direcciones absolutas que se van a forzar
permanentemente o a observar, o introduzca en la columna "Nombre" el nombre simbólico
de la variable.
● Si no desea utilizar el ajuste predeterminado para el formato de visualización, seleccione el
formato que desee en la lista desplegable de la columna "Formato de visualización".
● A continuación, decida si desea observar o forzar permanentemente las variables
registradas. Introduzca para ello el valor de forzado permanente deseado así como un
comentario en las columnas correspondientes de la tabla de forzado permanente.
● Tenga en cuenta que solamente se pueden forzar permanentemente entradas de periferia
y salidas de periferia e infórmese acerca de las medidas de seguridad para el forzado de
variables (Página 8624).

8610

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Cómo crear una línea de comentario
Introduciendo la cadena de caracteres "//" en la columna "Nombre" puede crear una línea de
comentario si lo desea.

Comprobación de sintaxis
Cuando se introducen variables en la tabla de forzado permanente, antes de salir de la celda
correspondiente se comprueba la sintaxis. Las entradas erróneas se marcan en rojo.
Nota
Colocando el cursor en una celda marcada en rojo aparece información breve con indicaciones
adicionales sobre el error.

23.5.7.2

Operandos permitidos para la tabla de forzado permanente

Operandos permitidos para la tabla de forzado permanente
La tabla siguiente muestra los operandos permitidos para el forzado permanente en la tabla de
forzado permanente:
Operando permitido

Ejemplo del tipo de
datos

Ejemplo (nemónicos internacio‐
nales)

Entrada de periferia/salida de periferia

BOOL

I0.0:P; Q0.0:P

Entrada de periferia/salida de periferia

BYTE

IB1:P; QB1:P

Entrada de periferia/salida de periferia

WORD

IW2:P; QW3:P

Entrada de periferia/salida de periferia

DWORD

ID2:P; QD1:P

La tabla siguiente muestra los operandos permitidos para la observación en la tabla de forzado
permanente:
Operando permitido

Ejemplo del tipo de
datos

Ejemplo (nemónicos internacio‐
nales)

Entrada/salida/marca

BOOL

I1.0; Q1.7; M10.1
E0.0:P

Entrada/salida/marca

BYTE

IB1; QB10; MB100
IB1:P

Entrada/salida/marca

WORD

IW1; QW10; MW100
IW2:P

Entrada/salida/marca

DWORD

ID4; QD10; MD100
ID2:P

Temporizadores

TIMER

T1

Contadores

COUNTER

C1

Programación del PLC
Manual de programación y manejo, 11/2019

8611

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Operando permitido

Ejemplo del tipo de
datos

Ejemplo (nemónicos internacio‐
nales)

Bloque de datos

BOOL

DB1.DBX1.0

Bloque de datos

BYTE

DB1.DBB1

Bloque de datos

WORD

DB1.DBW1

Bloque de datos

DWORD

DB1.DBD1

Nota
Por motivos de utilización interna no es posible introducir "DB0...".

Nota
Las CPU S7-400 no tienen acceso a bits de la periferia.
La tabla de forzado permanente no permite a las CPU de la familia S7-400 el acceso a bits de
la periferia como p. ej., %I0.0:P; %Q0.0:P.
Estos no pueden forzarse de manera permanente.

23.5.7.3

Valores de forzado permanente permitidos para la tabla de forzado permanente

Entrada de valores de forzado permanente en la tabla de forzado permanente
La tabla siguiente muestra los operandos permitidos para la entrada de valores de forzado
permanente en la tabla de forzado permanente:
Tabla 23-7

8612

Operandos de bit

Operandos de bit posibles

Ejemplo de valores de forzado permanente permiti‐
dos

I1.0:P

true

I1.1:P

false

Q1.0:P

0

Q1.1:P

1

I2.0:P

2#0

I2.1:P

2#1

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Tabla 23-8

Operandos de byte

Operandos de byte posibles

Ejemplo de valores de forzado permanente permiti‐
dos

IB1:P

2#00110011

IB2:P

B#16#1F

QB14:P

1F

QB10:P

'a'

IB3:P

10

Tabla 23-9

Operandos de palabra

Operandos de palabra posibles

Ejemplo de valores de forzado permanente permiti‐
dos

IW0:P

2#0011001100110011

IW2:P

W#16#ABCD

QW10:P

ABCD

QW12:P

B#(12, 34)

IW4:P

'ab'

IW6:P

12300

IW8:P

S5T#9S_300ms

IW10:P

C#123

IW12:P

D#2006-12-31

Tabla 23-10 Operandos de palabra doble
Operandos de palabra doble posibles

Ejemplo de valores de forzado permanente permiti‐
dos

ID0:P

2#00110011001100110011001100110011

ID4:P

1.2

QD10:P

1.234.e4

QD14:P

Dw#16#abcdef10

ID8:P

16#ABCDEF10

ID12:P

b#(12,34,56,78)

ID16:P

L#-12

ID20:P

L#12

ID24:P

123456789

ID28:P

123456789

ID32:P

T#12s300ms

ID36:P

Tod#14:20:40.645

ID40:P

P#e0.0

Programación del PLC
Manual de programación y manejo, 11/2019

8613

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.7.4

Sinopsis de los formatos de visualización

Formatos de visualización en la tabla de forzado permanente
Al seleccionar un formato de visualización se define el modo en que se representará el valor
de una variable.
Al introducir la dirección aparece seleccionado automáticamente un formato de visualización.
Para modificarlo, puede seleccionar el formato de visualización deseado en la lista
desplegable de la columna "Formatos de visualización". En la lista desplegable aparecen
únicamente los formatos de visualización que son admisibles para este tipo de datos. El
formato de visualización mencionado primero es el formato predeterminado.

Ejemplo
La tabla siguiente muestra los tipos de datos de 32 bits permitidos para todas las familias de
CPU en la tabla de forzado permanente así como sus posibles formatos de visualización.

8614

Tipo de datos

Formatos de visualización posibles

BOOL

Bool, Hex, BCD, Octal, Bin, Dec, Dec+/-

BYTE

Hex, BCD, Octal, Bin, Dec, Dec+/-, carácter

WORD

Hex, BCD, Octal, Bin, Dec, Dec+/-, secuencia DEC, carácter, temporizador
SIMATIC, fecha, carácter Unicode, contador

DWORD

Hex, BCD, Octal, Bin, Dec, Dec+/-, secuencia_Dec, carácter, número en
coma flotante, hora del día, tiempo, carácter_Unicode

SINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter

INT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, temporizador SIMATIC, contador, fecha

DINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, hora del día, tiempo

USINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter

UINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, temporizador SIMATIC, contador, fecha

UDINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, hora del día, tiempo

REAL

Número en coma flotante, Hex, BCD, Octal, Bin, carácter, carácter Unicode,
Dec,
Dec+/-, secuencia Dec, hora del día, tiempo

DATE

Fecha, Dec, Hex, Bin

TIME_OF_DAY

Hora del día, Dec, Hex, Bin

TIME

Tiempo, Hex, Bin, Dec, Dec+/-

DATE_AND_TIME

Fecha y hora,

TIMER

Temporizador SIMATIC, Hex, BCD, Bin

CHAR

Carácter, Hex, BCD, Octal, Bin, Dec, Dec+/-

WCHAR

Carácter Unicode, carácter, Hex, BCD, Octal, Bin, Dec, Dec+/-

STRING

Cadena de caracteres

WSTRING

Cadena de caracteres Unicode

POINTER

Puntero, Hex

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Tipo de datos

Formatos de visualización posibles

COUNTER

Contador, Hex, BCD, Bin

S5TIME

Temporizador SIMATIC, Hex, BCD, Bin

Para la familia de CPU S7-1200 son admisibles todos los tipos de datos de 32 bits, véase la
tabla más arriba, así como el tipo de datos de 64 bits LREAL con los siguientes posibles
formatos de visualización:
Tipo de datos

Formatos de visualización posibles

LREAL

en un proyecto creado con el TIA Portal < V12:
Número en coma flotante
Nota: la visualización de LREAL está limitada a 13 posiciones más el expo‐
nente.

LREAL

en un proyecto creado con el TIA Portal >= V12:
Número en coma flotante, Hex, BCD, Octal, Bin, carácter, carácter Unicode,
Dec, Dec+/-, secuencia DEC, hora del día, temporizador, fecha y hora
Nota: la visualización de LREAL está limitada a 13 posiciones más el expo‐
nente.

Para la familia de CPU S7-1500 son admisibles, además de los tipos de datos de 32 bits, los
tipos de datos de 64 bits listados en la tabla con los siguientes posibles formatos de
visualización:
Tipo de datos

Formatos de visualización posibles

LWORD

Hex, Octal, BCD, Bin, carácter, carácter Unicode, Dec, Dec+/-, secuencia
DEC, número en coma flotante, hora del día, temporizador, fecha y hora

LINT

Dec+/-, Dec, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
Dec, hora del día, temporizador, fecha y hora

ULINT

Dec, Dec+/-, Hex, BCD, Octal, Bin, carácter, carácter Unicode, secuencia
DEC, hora del día, temporizador, fecha y hora

LREAL

Número en coma flotante, Hex, BCD, Octal, Bin, carácter, carácter Unicode,
Dec, Dec+/-, secuencia DEC, hora del día, temporizador, fecha y hora

LTIME

Tiempo, Dec+/-, Dec, Hex, Bin

LTOD

Dec, Hex, Bin, hora del día

LDT

Dec, Hex, fecha y hora, Bin

Encontrará más información en la descripción de los tipos de datos (Página 241) válidos.

Programación del PLC
Manual de programación y manejo, 11/2019

8615

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Nota
Redondeo de números en coma flotante
En la tabla de forzado permanente los números en coma flotante se guardan en formato IEEE
binario. Como no todos los números en coma flotante (real, longreal) representables en la
interfaz pueden reproducirse unívocamente en formato IEEE, los números en coma flotante
pueden redondearse. Si un número en coma flotante redondeado se copia en la tabla de
forzado permanente y se inserta en otro campo de entrada, en determinadas circunstancias el
redondeo produce una ligera diferencia.

Nota
Solo es posible el direccionamiento simbólico
Los LongDataTypes, como por ejemplo LWORD o LREAL, solo se pueden direccionar
simbólicamente en la tabla de forzado permanente.

23.5.7.5

Seleccionar un formato de visualización para variables

Procedimiento
Para seleccionar el formato de visualización de las variables, proceda del siguiente modo:
1. Introduzca la dirección en la tabla de forzado permanente.
2. Haga clic en la celda deseada de la columna "Formato de visualización" y abra la lista
desplegable.
En la lista desplegable se muestran los formatos de visualización permitidos.
3. Seleccione el formato de visualización deseado de la lista desplegable.
Nota
En caso de que el formato de visualización seleccionado no se pueda aplicar, se muestra
automáticamente el último formato de visualización seleccionado.

8616

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.7.6

Cómo crear y editar líneas de comentario

Principios básicos de las líneas de comentario
Para dar una estructura más clara a la tabla de forzado permanente, además de los
comentarios referidos a filas de la columna de comentarios es posible crear líneas de
comentario completas.
Los contenidos de la línea de comentario se guardan en la carpeta "Idiomas y recursos", ficha
"Textos del proyecto" y puede traducirse a otros idiomas del proyecto.
● Mediante el botón de la barra de herramientas de la tabla de forzado permanente.
● Mediante el comando de menú "Insertar > Insertar línea de comentario".
● Mediante el comando del menú contextual "Insertar línea de comentario".
● Introduciendo la cadena de caracteres "//" en la columna "Nombre" de la tabla de forzado
permanente.

Insertar líneas de comentario
Para insertar líneas de comentarios, proceda de la manera siguiente:
1. Abra una tabla de forzado permanente e introduzca las direcciones deseadas.
2. Agregue una nueva línea de comentario.
– Para ello, haga clic en el botón "Insertar línea de comentario" de la barra de
herramientas de la tabla de forzado permanente.
– O bien haga clic en el comando de menú "Insertar > Insertar línea de comentario".
– O bien haga clic en el comando del menú contextual "Insertar > Insertar línea de
comentario".
Resultado: Encima de la fila seleccionada en la tabla de forzado permanente se
insertará una nueva línea de comentario.
3. Introduzca el comentario deseado en la línea de comentario. El comentario introducido se
muestra en verde.
4. Para mostrar todos los comentarios que ha introducido, seleccione en el árbol del proyecto
"Idiomas y recursos" y haga doble clic en "Textos del proyecto".
5. Si trabaja con proyectos multilingües y desea traducir sus comentarios a otros idiomas,
puede configurar otros idiomas de proyecto además del idioma de edición en el árbol de
proyecto en "Idiomas y recursos > Textos del proyecto".

Crear líneas de comentario
Para crear líneas de comentario, proceda de la manera siguiente:
1. Abra una tabla de forzado permanente e introduzca las direcciones deseadas.
2. Introduzca la cadena de caracteres "//" en una fila vacía de la columna "Nombre". De este
modo convertirá la fila en una línea de comentario.
En el resto de las columnas no es posible crear líneas de comentario.

Programación del PLC
Manual de programación y manejo, 11/2019

8617

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
3. Introduzca el comentario deseado en la línea de comentario. El comentario introducido se
muestra en verde.
4. Para mostrar todos los comentarios que ha introducido, seleccione en el árbol del proyecto
"Idiomas y recursos" y haga doble clic en "Textos del proyecto".
5. Si trabaja con proyectos multilingües y desea traducir sus comentarios a otros idiomas,
puede configurar otros idiomas de proyecto además del idioma de edición en el árbol de
proyecto en "Idiomas y recursos > Textos del proyecto".

Cómo borrar líneas de comentario
Para borrar líneas de comentario, proceda de la manera siguiente:
1. Abra una tabla de forzado permanente que contenga líneas de comentario.
2. Si ya no lo necesita, borre todo el comentario, incluida la cadena de caracteres introductoria
"//".
3. Como alternativa, puede borrar solo la cadena de caracteres introductoria "//". De esta
forma el comentario se mantiene y se muestra en la columna "Comentario" de la tabla de
forzado permanente.
Nota
Borrado de líneas de comentario
Al borrar líneas de comentario se borran también los idiomas de proyecto configurados para
esos comentarios así como las traducciones que pudiera haber.

23.5.8

Observar variables en la tabla de forzado permanente

23.5.8.1

Introducción a la observación de variables en la tabla de forzado permanente

Introducción
En la tabla de forzado permanente se observan las variables de los módulos de entrada y
salida configurados en la CPU en función del modo de observación (Página 8619)
seleccionado. Para poder observar variables debe existir una conexión online con la CPU.

8618

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Opciones para la observación de variables
Para la observación de variables existen las siguientes opciones:
● Observar todos
Este comando inicia la observación de las variables visibles en la tabla de observación
activa, en función del modo de observación seleccionado:
– En el modo básico está predeterminado el modo de observación "permanente".
– En el modo avanzado se pueden definir puntos de disparo determinados para la
observación de variables.
Nota
Si el modo de observación se cambia en el modo avanzado y a continuación se regresa
de nuevo al modo básico, el modo de observación ajustado antes también se aplicará
en éste último.
● Observar inmediatamente
Este comando inicia la observación de las variables visibles en la tabla de forzado
permanente activa inmediatamente y una sola vez.

Restricciones específicas de la CPU en la observación de variables
Existen las siguientes diferencias específicas de CPU:
● CPU S7-300/400:
Las CPU de esta familia pueden observar únicamente los primeros 30 caracteres de una
cadena.
● CPU S7-1200:
Las CPU de esta familia pueden observar una cadena de hasta 254 caracteres de tamaño
total.

23.5.8.2

Establecimiento del modo de observación en la tabla de forzado permanente

Introducción
Seleccionando el modo de observación se define el punto de disparo y el tiempo de
observación de las variables en la tabla de forzado permanente.

Modos de observación posibles (tiempo de observación)
Existen las opciones siguientes:
● Permanente
● Inicio del ciclo, único
● Fin del ciclo, único
● Inicio del ciclo, permanente
● Fin del ciclo, permanente

Programación del PLC
Manual de programación y manejo, 11/2019

8619

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
● Transición a STOP, única
● Transición a STOP, permanente

Particularidades del modo "Permanente"
El modo "Permanente" se ejecuta de la forma siguiente para la observación de variables: las
entradas se observan al final y las salidas al principio del ciclo.

Definición de un punto de disparo
Los puntos de disparo "Inicio del ciclo", "Fin del ciclo" y "Transición a STOP" definen el
momento en que las variables se leerán de la CPU o se actualizarán en la CPU.
La figura siguiente muestra la posición de los puntos de disparo mencionados:
0HPRULDLPDJHQGHSURFHVRGHODV
HQWUDGDV

3XQWRGHGLVSDUR,QLFLRGHOFLFOR

2%

3XQWRGHGLVSDUR7UDQVLFLµQD
6723

3XQWRGHGLVSDUR)LQGHOFLFOR

0HPRULDLPDJHQGHSURFHVRGH
ODVVDOLGDV

23.5.8.3

Variables "Observar todos"

Introducción
El comando "Observar todos" permite iniciar la observación de las variables visibles en la tabla
de forzado permanente activa. En el modo básico de la tabla de forzado permanente está
predeterminada la opción "permanente" para el modo de observación. En el modo avanzado
se pueden definir puntos de disparo determinados para la observación de variables. En ese
caso, las variables se observan con respecto a los puntos de disparo definidos.

8620

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Requisitos
Existe una conexión online con la CPU.

Procedimiento
Para ejecutar el comando "Observar todos", proceda del siguiente modo:
1. Introduzca las variables que desee observar y las direcciones correspondientes en la tabla
de forzado permanente.
2. Cambie al modo avanzado haciendo clic en el
botón "Mostrar u ocultar todas las columnas del modo avanzado" de la barra de
herramientas.
3. Para modificar el modo de observación predeterminado de una variable, haga clic en la
celda correspondiente de la columna "Observar con disparo" y seleccione el modo de
observación que desee en la lista desplegable.
4. Haga clic en el botón "Observar todos" de la barra de herramientas.

Resultado
Las variables de la tabla de forzado permanente activa se observan en el modo de observación
seleccionado en cada caso.

23.5.8.4

"Observar inmediatamente" variables

Introducción
Con el comando "Observar inmediatamente" se inicia la observación de las variables
inmediatamente sin referencia a puntos de disparo determinados. Los valores de las variables
se leen una sola vez y se muestran en la tabla de forzado permanente.

Requisitos
Existe una conexión online con la CPU.

Procedimiento
Para ejecutar el comando "Observar inmediatamente", proceda del siguiente modo:
1. Introduzca las variables que desee observar y las direcciones correspondientes en la tabla
de forzado permanente.
2. Haga clic en el botón "Observar inmediatamente" de la barra de herramientas.

Resultado
Las variables de la tabla de forzado permanente activa se observan inmediatamente y una sola
vez.

Programación del PLC
Manual de programación y manejo, 11/2019

8621

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.9

Forzar permanentemente variables en la tabla de forzado permanente

23.5.9.1

Introducción al forzado permanente de variables

Introducción
La tabla de forzado permanente permite preasignar valores fijos a distintas variables del
programa de usuario. Este procedimiento se conoce como forzado permanente. Solamente se
pueden forzar permanentemente entradas de periferia y salidas de periferia.
Para el forzado permanente es necesario que exista una conexión online con la CPU y que la
CPU utilizada soporte esta función.
Cuando se abre una tabla de forzado permanente en la carpeta "Tablas de observación y
forzado permanente" bajo una CPU en la que ya se ejecuta una petición de forzado
permanente, deberá actualizar primero la visualización de los operandos forzados de forma
permanente. Forzar permanentemente y finalizar el forzado permanente en la tabla de forzado
permanente abierta solo es posible tras ejecutar este comando.

Aplicaciones
La preasignación fija de valores definidos a variables permite especificar opciones
determinadas y probar así las funciones programadas. El forzado permanente está disponible
en modo básico y en modo avanzado (Página 8607).

Atención al forzar variables de forma permanente
Antes del forzado permanente es importante que se informe sobre las medidas de seguridad
(Página 8624) necesarias para llevar a cabo esta operación.
PELIGRO
¡Evitar daños personales y materiales!
Tenga en cuenta que al ejecutar la función "Forzado permanente" una acción equivocada
● puede poner en peligro la vida o salud de personas.
● causar daños en la máquina o en toda la instalación.

8622

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Opciones para el forzado permanente de variables
Para el forzado permanente de variables existen las siguientes opciones:
● Forzar permanentemente a "0"
Este comando fuerza la dirección seleccionada en la CPU al valor de forzado permanente
"0".
● Forzar permanentemente a "1"
Este comando fuerza la dirección seleccionada en la CPU al valor de forzado permanente
"1".
● Forzar todos permanentemente
Este comando inicia el forzado permanente de las direcciones activadas en la tabla de
forzado permanente activa o reemplaza ininterrumpidamente una orden de forzado
existente.
● Finalizar forzado permanente
Este comando finaliza el forzado permanente de todas las direcciones de la tabla de
forzado permanente activa.

Restricciones en el forzado permanente de variables
Observe las siguientes restricciones para el forzado permanente:
● El forzado permanente siempre depende del volumen de operandos de la CPU utilizada.
● Básicamente, sólo se pueden forzar permanentemente entradas de periferia y salidas de
periferia.
● Si está activada la función "Desbloquear salidas" en la CPU utilizada, no se podrá efectuar
un forzado permanente. Desactive esta función, si así lo desea, en la tabla de observación.

Particularidades del forzado permanente de variables
Tenga en cuenta que el forzado permanente de variables sobrescribe valores en la CPU y que
se mantiene al finalizar la conexión online con la CPU.
● Finalizar forzado permanente
La mera finalización de la conexión online no detiene la operación de forzado permanente.
Para finalizar el forzado permanente, elija el comando "Online > Forzar permanentemente
> Finalizar forzado permanente". Sólo entonces dejan de forzarse permanentemente las
variables visibles en la tabla de forzado permanente activa.
● Finalizar el forzado permanente de variables individuales
El comando "Online > Forzar permanentemente > Finalizar forzado permanente" se aplica
siempre a todas las variables visibles en la tabla de forzado permanente activa. Para
finalizar el forzado permanente de distintas variables, desactive la casilla de verificación del
forzado permanente de las variables en cuestión en la tabla de forzado permanente activa
y vuelva a iniciar el forzado permanente con el comando "Online > Forzar
permanentemente > Forzar todos permanentemente".

Programación del PLC
Manual de programación y manejo, 11/2019

8623

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.9.2

Medidas de seguridad para el forzado permanente de variables

Medidas de seguridad para el forzado permanente de variables
Dado que con la función de forzado permanente se interviene permanentemente en el
proceso, es necesario observar las siguientes indicaciones:
PELIGRO
Evitación de daños personales y materiales
Tenga en cuenta que al ejecutar la función "Forzado permanente", una acción incorrecta
puede:
● puede poner en peligro la vida o salud de personas.
● causar daños materiales en la máquina o en toda la instalación

PRECAUCIÓN
Evitación de daños personales y materiales
● Antes de iniciar la función "Forzado permanente" asegúrese de que nadie más vaya a
ejecutar simultáneamente esta función en la misma CPU.
● El forzado permanente sólo puede finalizarse haciendo clic en el botón "Finalizar forzado
permanente" o con el comando "Online > Forzar permanentemente > Finalizar forzado
permanente". Cerrando la tabla de forzado permanente activa no se finaliza el forzado
permanente.
● El "forzado permanente" no puede deshacerse.
● Infórmese sobre las diferencias entre el "forzado de variables (Página 8595)" y el "forzado
permanente de variables (Página 8622)".
● Si una CPU no soporta la función de "forzado permanente", los botones relacionados con
esa función no estarán disponibles.
● Si está activada la función "Desbloquear salidas de periferia" en la CPU utilizada, no se
podrá efectuar el forzado permanente en esa CPU. Desactive esta función, si así lo desea,
en la tabla de observación.

23.5.9.3

Actualizar operandos forzados permanentemente

Introducción
Si en una CPU ya se está ejecutando una petición de forzado permanente, tras abrir la tabla
de forzado permanente primero debe asegurarse de que en ella se muestren los operandos y
valores que actualmente están forzados de forma permanente en la CPU.

8624

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente
Con el comando "Online" > "Forzar permanentemente" > "Actualizar operandos forzados
permanentemente" se actualizan en la tabla de forzado permanente abierta todos los
operandos y valores que actualmente están forzados de forma permanente en la CPU.
"Forzar permanentemente" y "Finalizar forzado permanente" en la tabla de forzado
permanente abierta solo es posible tras ejecutar este comando.

Atención al forzar variables de forma permanente
Antes de forzar variables permanentemente, infórmese sin falta sobre las medidas de
seguridad para el forzado permanente de variables (Página 8624).
PELIGRO
¡Evitar daños personales y materiales!
Tenga en cuenta que al ejecutar la función "Forzado permanente" una acción equivocada
● puede poner en peligro la vida o salud de personas.
● causar daños en la máquina o en toda la instalación.

Requisitos
● Es posible una conexión online con la CPU.
● En la CPU empleada se está ejecutando actualmente una petición de forzado permanente.

Procedimiento
Para actualizar los operandos y valores forzados permanentemente, proceda del siguiente
modo:
1. Abra una tabla de forzado permanente.
2. Establezca una conexión online con la CPU.
3. Confirme el cuadro de diálogo posterior "Actualizar operandos forzados permanentemente"
con "Sí".

Resultado
En la tabla de forzado permanente abierta se actualizan todos los operandos forzados
permanentemente a los valores correspondientes. En la primera columna aparece una "F" roja
que indica los operandos que se están forzando permanentemente.
De este modo se habilitan los botones "Forzar todos permanentemente" y "Finalizar forzado
permanente" y puede ejecutarse esta función.

Programación del PLC
Manual de programación y manejo, 11/2019

8625

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Nota
Al forzar permanentemente, tenga en cuenta lo siguiente:
● El forzado permanente no se puede deshacer.
● Al deshacer la conexión online no se finaliza el forzado permanente.
● Para finalizar el forzado permanente es necesario que la dirección forzada de forma
permanente sea visible en la tabla de forzado permanente activa.

23.5.9.4

Forzar permanentemente variables a "0"

Introducción
La función de forzado permanente permite asignar valores fijos a las distintas variables de un
programa de usuario.

Precaución al forzar variables permanentemente
Antes de forzar variables permanentemente, infórmese sin falta sobre las medidas de
seguridad que deben tomarse para este procedimiento (Página 8624).
PELIGRO
¡Deben evitarse daños personales y materiales
Tenga en cuenta que al ejecutar la función "Forzado permanente", una acción incorrecta
puede:
● puede poner en peligro la vida o salud de personas.
● causar daños materiales en la máquina o en toda la instalación

Requisitos
● Existe una conexión online con la CPU.
● La CPU utilizada soporta el forzado permanente.
● La función "Desbloquear salidas" no está activada en la CPU en la que se debe forzar
permanentemente. Desactive esta función, si así lo desea, en la tabla de observación.

8626

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Procedimiento
Para forzar permanentemente variables a "0", proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Introduzca la dirección en la tabla de forzado permanente.
3. Elija el comando "Online > Forzar permanentemente > Forzar permanentemente a 0" para
forzar permanentemente la dirección seleccionada al valor predefinido.
4. Confirme el cuadro de diálogo posterior con "Sí".

Resultado
La dirección seleccionada se fuerza permanentemente a "0". El triángulo amarillo ya no
aparece. En la primera columna aparece p.ej., una "F" roja que indica que se está realizando
el forzado permanente.

Finalizar el forzado permanente
Para finalizar el forzado permanente, proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Haga clic en el comando "Online > Forzar permanentemente > Finalizar forzado
permanente".
3. Confirme el cuadro de diálogo posterior con "Sí".

Resultado
Finaliza el forzado permanente de los valores seleccionados. La "F" roja que aparecía en la
primera columna desaparece y el triángulo amarillo vuelve a aparecer detrás de la casilla de
verificación indicando que la dirección está seleccionada para el forzado permanente, pero
que en ese momento no se está forzando.
Nota
Al forzar permanentemente, tenga en cuenta lo siguiente:
● El forzado permanente no puede deshacerse.
● Finalizando la conexión online no se finaliza el forzado permanente.
● Para finalizar el forzado permanente, es necesario que la dirección forzada de forma
permanente sea visible en la tabla de forzado permanente activa.

Programación del PLC
Manual de programación y manejo, 11/2019

8627

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.9.5

Forzar permanentemente variables a "1"

Introducción
La función de forzado permanente permite asignar valores fijos a las distintas variables de un
programa de usuario.

Precaución al forzar variables permanentemente
Antes de forzar variables permanentemente, infórmese sin falta sobre las medidas de
seguridad que deben tomarse para este procedimiento (Página 8624).
PELIGRO
Evitación de daños personales y materiales
Tenga en cuenta que al ejecutar la función "Forzado permanente", una acción incorrecta
puede:
● poner en peligro la vida o la salud de personas
● causar daños materiales en la máquina o en toda la instalación

Requisitos
● Existe una conexión online con la CPU.
● La CPU utilizada soporta el forzado permanente.
● La función "Desbloquear salidas" no está activada en la CPU en la que se debe forzar
permanentemente. Desactive esta función, si así lo desea, en la tabla de observación.

Procedimiento
Para forzar permanentemente variables a "1", proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Introduzca la dirección en la tabla de forzado permanente.
3. Elija el comando "Online > Forzar permanentemente > Forzar permanentemente a 1" para
forzar permanentemente la dirección seleccionada al valor predefinido.
4. Confirme el cuadro de diálogo posterior con "Sí".

Resultado
La dirección seleccionada se fuerza permanentemente a "1". El triángulo amarillo ya no
aparece. En la primera columna aparece p.ej., una "F" roja que indica que se está realizando
el forzado permanente.

8628

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Finalizar el forzado permanente
Para finalizar el forzado permanente, proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Haga clic en el comando "Online > Forzar permanentemente > Finalizar forzado
permanente".
3. Confirme el cuadro de diálogo posterior con "Sí".

Resultado
Finaliza el forzado permanente de los valores seleccionados. La "F" roja que aparecía en la
primera columna desaparece y el triángulo amarillo vuelve a aparecer detrás de la casilla de
verificación indicando que la dirección está seleccionada para el forzado permanente, pero
que en ese momento no se está forzando.
Nota
Al forzar permanentemente, tenga en cuenta lo siguiente:
● El forzado permanente no puede deshacerse.
● Finalizando la conexión online no se finaliza el forzado permanente.
● Para finalizar el forzado permanente, es necesario que la dirección forzada de forma
permanente sea visible en la tabla de forzado permanente activa.

23.5.9.6

Forzar permanentemente variables "Forzar todos permanentemente"

Introducción
La función de forzado permanente permite asignar valores fijos a las distintas variables de un
programa de usuario.
Si ya hay una operación de forzado permanente activa, ésta puede sustituirse sin interrupción
con el comando "Online > Forzar permanentemente > Forzar todos permanentemente".
Dejarán de forzarse permanentemente las direcciones forzadas permanentemente que no
estén activadas.

Programación del PLC
Manual de programación y manejo, 11/2019

8629

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Precaución al forzar variables permanentemente
Antes de forzar variables permanentemente, infórmese sin falta sobre las medidas de
seguridad que deben tomarse para este procedimiento (Página 8624).
PELIGRO
¡Deben evitarse daños personales y materiales!
Tenga en cuenta que al ejecutar la función "Forzado permanente", una acción incorrecta
puede:
● puede poner en peligro la vida o salud de personas.
● causar daños materiales en la máquina o en toda la instalación

Requisitos
● Existe una conexión online con la CPU.
● La CPU utilizada soporta el forzado permanente.
● La función "Desbloquear salidas" no está activada en la CPU en la que se debe forzar
permanentemente. Desactive esta función, si así lo desea, en la tabla de observación.

Procedimiento
Para forzar variables permanentemente con el comando "Online > Forzado permanente >
Forzar todos permanentemente", proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Introduzca las direcciones y los valores de forzado permanente en la tabla de forzado
permanente.
3. Seleccione las direcciones que desee forzar permanentemente activando la casilla de
verificación de forzado permanente de la columna después del "Valor de forzado
permanente".
Junto a la casilla de verificación activada aparece un triángulo amarillo que indica que la
dirección está seleccionada para el forzado permanente, pero que todavía no está siendo
forzada permanentemente.
4. Elija el comando "Online > Forzar permanentemente > Forzar todos permanentemente"
para forzar permanentemente las direcciones seleccionadas con los valores predefinidos.
5. Confirme el cuadro de diálogo posterior con "Sí".

Resultado
Las direcciones seleccionadas se fuerzan permanentemente a los valores predefinidos. El
triángulo amarillo ya no aparece. En la primera columna aparece p.ej., una "F" roja que indica
que se está realizando el forzado permanente.

8630

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Finalizar el forzado permanente
Para finalizar el forzado permanente, proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Haga clic en el comando "Online > Forzar permanentemente > Finalizar forzado
permanente".
3. Confirme el cuadro de diálogo posterior con "Sí".

Resultado
Finaliza el forzado permanente de las direcciones seleccionadas. La "F" roja que aparecía en
la primera columna desaparece y el triángulo amarillo vuelve a aparecer detrás de la casilla de
verificación indicando que la dirección está seleccionada para el forzado permanente, pero
que en ese momento no se está forzando.
Nota
Al forzar permanentemente, tenga en cuenta lo siguiente:
● El forzado permanente no puede deshacerse.
● Finalizando la conexión online no se finaliza el forzado permanente.
● Para finalizar el forzado permanente, es necesario que la dirección forzada de forma
permanente sea visible en la tabla de forzado permanente activa.

23.5.10

Finalizar forzado permanente de variables

23.5.10.1

Finalizar forzado permanente de todas las variables

Introducción
Observe las siguientes indicaciones antes de finalizar el forzado permanente de variables:
● La finalización del forzado permanente no puede deshacerse.
● Finalizando la conexión online no se finaliza el forzado permanente.
● Para finalizar el forzado permanente, es necesario que la dirección forzada de forma
permanente sea visible en la tabla de forzado permanente activa.

Programación del PLC
Manual de programación y manejo, 11/2019

8631

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Precaución al forzar variables permanentemente
Antes de forzar variables permanentemente, infórmese sin falta sobre las medidas de
seguridad que deben tomarse para este procedimiento (Página 8624).
PELIGRO
¡Deben evitarse daños personales y materiales!
Tenga en cuenta que al salir de la función "Forzado permanente", una acción incorrecta
puede:
● puede poner en peligro la vida o salud de personas.
● causar daños materiales en la máquina o en toda la instalación

Requisitos
● En una tabla de forzado permanente se fuerzan variables con carácter permanente.
● Existe una conexión online con la CPU.
● La CPU utilizada soporta el forzado permanente.
● La función "Desbloquear salidas" no está activada en la CPU en la que se debe forzar
permanentemente. Desactive esta función, si así lo desea, en la tabla de observación.

Procedimiento
Para finalizar el forzado permanente de todas las variables, proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Elija el comando "Online > Forzar permanentemente > Finalizar forzado permanente" para
finalizar el forzado permanente de las direcciones mostradas.
3. Confirme el cuadro de diálogo "Finalizar forzado permanente" con "Sí".

Resultado
Finaliza el forzado permanente de todas las variables. La "F" roja que aparecía en la primera
columna desaparece y el triángulo amarillo vuelve a aparecer detrás de la casilla de
verificación indicando que la dirección está anotada para el forzado permanente, pero que en
ese momento no se está forzando.

8632

Programación del PLC
Manual de programación y manejo, 11/2019

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

23.5.10.2

Finalizar forzado permanente de variables individuales

Introducción
Observe las siguientes indicaciones antes de finalizar el forzado permanente de variables:
● La finalización del forzado permanente no puede deshacerse.
● Finalizando la conexión online no se finaliza el forzado permanente.
● Para finalizar el forzado permanente, es necesario que la dirección forzada de forma
permanente sea visible en la tabla de forzado permanente activa.

Precaución al forzar variables permanentemente
Antes de forzar variables permanentemente, infórmese sin falta sobre las medidas de
seguridad que deben tomarse para este procedimiento (Página 8605).
PELIGRO
¡Deben evitarse daños personales y materiales!
Tenga en cuenta que al salir de la función "Forzado permanente", una acción incorrecta
puede:
● puede poner en peligro la vida o salud de personas.
● causar daños materiales en la máquina o en toda la instalación

Requisitos
● En una tabla de forzado permanente se fuerzan variables con carácter permanente.
● Existe una conexión online con la CPU.
● La CPU utilizada soporta el forzado permanente.
● La función "Desbloquear salidas" no está activada en la CPU en la que se debe forzar
permanentemente. Desactive esta función, si así lo desea, en la tabla de observación.

Procedimiento
Para finalizar el forzado permanente de variables individuales, proceda del siguiente modo:
1. Abra la tabla de forzado permanente.
2. Desactive la casilla de verificación de las direcciones que ya no deben forzarse
permanentemente.
3. Seleccione de nuevo el comando "Online > Forzar permanentemente".

Programación del PLC
Manual de programación y manejo, 11/2019

8633

Comprobar el programa de usuario
23.5 Test con la tabla de forzado permanente

Resultado
Finaliza el forzado permanente de las direcciones desactivadas. La "F" roja que aparecía en
la primera columna desaparece y el triángulo amarillo vuelve a aparecer detrás de la casilla de
verificación indicando que la dirección está anotada para el forzado permanente, pero que en
ese momento no se está forzando.

8634

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.1

Requisitos de sistema para ProDiag

24.1.1

Notas relativas a licencias

24

Descripción
La configuración de supervisiones está completamente integrada en STEP 7 Professional.
Puede usarse desde cualquier estación de ingeniería de STEP 7, independientemente de la
aplicación. Obtiene licencia exclusivamente el número de supervisiones configuradas; las 25
primeras supervisiones pueden usarse gratuitamente.
La tabla siguiente le muestra el número de licencias que necesita:
Número de
supervisio‐
nes utiliza‐
das

<= 25

Número de
Ninguna
licencias ne‐
cesarias

<= 250

<= 500

<= 750

<= 1000

> 1000

1

2

3

4

5

Encontrará más información sobre la disponibilidad de licencias en general en: "Instalación >
Requisitos del sistema para la instalación > Notas relativas a licencias".

24.1.2

Ajustar licencias ProDiag

Requisitos
Se ha creado una CPU S7-1500.

Procedimiento
Para ajustar las licencias de ProDiag, proceda del siguiente modo:
1. En el árbol del proyecto, haga doble clic en la Configuración de dispositivos de la CPU
S7-1500.
La Configuración de dispositivos se abre en la Vista de dispositivos.
2. En la ventana de inspección "Propiedades" haga clic en la ficha subordinada "General".
3. Haga clic en la flecha situada junto a la sección "Licencias runtime".
Se muestran las Licencias runtime disponibles.

Programación del PLC
Manual de programación y manejo, 11/2019

8635

Supervisión de máquinas e instalaciones con ProDiag
24.1 Requisitos de sistema para ProDiag
4. Haga clic en la entrada "ProDiag".
En la sección "Supervisiones" se muestran todas las supervisiones utilizadas en la CPU
S7-1500.
5. De acuerdo con el número de supervisiones utilizadas, seleccione el número de licencias
necesarias en la sección "Licencias runtime".

Resultado
Las licencias necesarias están ajustadas.

24.1.3

Requisitos de software y hardware

Requisitos para ProDiag
La tabla siguiente muestra los requisitos mínimos de software y hardware que deben cumplirse
para el uso de ProDiag:

8636

Software/hardware

Requisitos

TIA Portal

STEP 7 Professional

CPU de la serie S7-1500

>= Firmware V2.0

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

24.2

Datos técnicos para ProDiag

24.2.1

Datos técnicos para ProDiag

Descripción
La tabla siguiente muestra los valores máximos posibles:
Objeto

Número de objetos

Bloques de función ProDiag

Como máximo pueden utilizarse 100 FB ProDiag en un proyecto.

Supervisiones ProDiag

FB ProDiag V1.0:
En un FB ProDiag pueden asignarse como máximo 250 supervisio‐
nes.
FB ProDiag V2.0:
En un FB ProDiag pueden asignarse como máximo 1000 supervi‐
siones.

24.3

Principios básicos de la supervisión con ProDiag

24.3.1

Introducción a ProDiag

Descripción
A partir de la versión V14 del TIA Portal, existe la posibilidad de supervisar la máquina o
instalación mediante la funcionalidad ProDiag y de intervenir en caso de un fallo o avería. Los
avisos de supervisión que pueden crearse para distintos fallos ofrecen información específica
sobre el tipo de supervisión, el lugar y la causa del fallo o avería. Pueden emitirse indicaciones
adicionales para la eliminación del fallo detectado. Esto permite no solo detectar fallos, sino
también identificar de antemano un posible riesgo de fallo y tomar las medidas correctoras
convenientes.
Con unos pocos pasos de configuración es posible integrar supervisiones sencillas en el
programa sin modificar su código. Así, por ejemplo, es posible crear una supervisión
monitorizando el estado lógico de un operando booleano. En cuanto el operando devuelve el
estado lógico ajustado, se emite un aviso de supervisión ProDiag de acuerdo con la
configuración de supervisiones ProDiag realizada. La configuración de las supervisiones es
independiente de los lenguajes de programación del TIA Portal, ya que solo se supervisan
operandos individuales y no se necesitan otras secciones del programa.

Programación del PLC
Manual de programación y manejo, 11/2019

8637

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

3UR'LDJGLDJQµVWLFRGHP£TXLQDVH
LQVWDODFLRQHVP£VI£FLOTXHQXQFD

'HILQLUDMXVWHVGHVXSHUYLVLµQ\HVWUXFWXUDVGHDYLVRVXQDVRODYH]SDUDWRGRHOSUR\HFWR 

'HILQLUODVVXSHUYLVLRQHV
VXSHUYLVLRQHVJOREDOHV SHMHQHOEORTXHGHGDWRVJOREDO
VXSHUYLVLRQHVGHSDU£PHWURV

2SHUDFLµQGHPDVDFRQD\XGDGH
ODKRMDGH([FHOFUHDGDPHGLDQWHOD
IXQFLµQGHLPSRUWDFLµQH[SRUWDFLµQ

$MXVWHVDQLYHOGHWRGDOD&38
HQODVWDEODVVLQµSWLFDV
GH3UR'LDJHQHO7,$3RUWDO

'HILQLFLµQLQGLYLGXDO
GLUHFWDPHQWH
HQHORSHUDQGR

&RPSLODFLµQ\FDUJD

&UHDUODYLVXDOL]DFLµQHQORVGLVSRVLWLYRV+0,
/RVDMXVWHVGHVXSHUYLVLµQQRHVW£QGLVSRQLEOHVKDVWDTXHVHKDFUHDGRXQ)%*5$3+RXQDVXSHUYLVLµQ

8638

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Encontrará un ejemplo introductorio sobre la manera de crear supervisiones con ayuda de
ProDiag aquí: Ejemplo de creación de una supervisión a partir de una supervisión de
operandos (Página 8640)

Ventajas
La supervisión de su máquina o instalación con ProDiag le ofrece numerosas ventajas:
● El código del programa no se modifica al crear las supervisiones, ya que los bloques de
función ProDiag se llaman automáticamente en el bloque de organización ProDiag, salvo
que quieran llamarse en el propio código del programa.
● Los bloques de función ProDiag permiten crear unidades y agrupar en ellas todas las
supervisiones de una unidad, p. ej., de un motor, según criterios tecnológicos.
● Pueden reducirse los tiempos de parada y las interrupciones de la producción después de
producirse un fallo o incluso antes, en el caso de eventos previsibles, por medio de avisos
de advertencia e indicaciones tempranas.
● Las indicaciones concretas sobre la causa del fallo facilitan considerablemente la solución
del fallo y los posibles trabajos de mantenimiento al operador de la máquina.
● Sea cual sea la CPU S7-1500 utilizada, la configuración de supervisiones es sencilla y
fácilmente comprensible.
● Tanto los bloques de seguridad F como los bloques de función con protección de know-how
pueden supervisarse también con ProDiag, puesto que no se modifican y por tanto no es
necesario compilarlos nuevamente.
● Los textos de aviso se derivan directamente de textos existentes en el proyecto, p. ej.:
– Categoría
– Nombre de la CPU
– Nombre del FB
– Nombre de instancia, etc.
● El dispositivo HMI adopta automáticamente las modificaciones de la configuración de la
CPU. Los textos de aviso se gestionan directamente en la CPU.
● Repercusión relativamente pequeña en el tiempo de ciclo.
● La gestión de cambios de las supervisiones se efectúa íntegramente en el TIA Portal, es
decir, el usuario no necesita realizar ninguna acción para garantizar la coherencia. De este
modo, la probabilidad de aparición de textos de aviso erróneos es muy pequeña.

Programación del PLC
Manual de programación y manejo, 11/2019

8639

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

24.3.2

Ejemplo de creación de una supervisión a partir de una supervisión de operandos

Descripción
El ejemplo siguiente ofrece una visión general de cómo se crea una supervisión a partir de una
supervisión de operando. En los capítulos siguientes encontrará información detallada sobre
los diferentes pasos.
1. Cree un grupo de supervisión ProDiag. Para ello, agregue un bloque de función nuevo del
tipo PRODIAG con el nombre "Station_1":

2. Vaya a la configuración de supervisiones ProDiag en la carpeta "Datos comunes" del árbol
del proyecto:

8640

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
3. Defina la configuración de supervisiones ProDiag:

4. En la tabla de variables estándar declare una variable booleana y agregue una supervisión:

Programación del PLC
Manual de programación y manejo, 11/2019

8641

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
5. En la ventana de inspección "Propiedades > Supervisiones" defina las propiedades de la
supervisión de operandos:

Puede crear una supervisión de variables global o una supervisión de parámetros local en
el bloque de función. Para ello puede utilizar un operando que ya exista en el código del
programa, o crear un operando nuevo y a continuación llamarlo en el código del programa.
Al crear una supervisión de parámetros, debe llamar el bloque de función en el código del
programa.
6. Compile y cargue el proyecto.
El bloque de función ProDiag "Station_1" se llama automáticamente en el bloque de
organización ProDiag.

Consulte también
Crear bloques de función ProDiag (Página 8676)
Definir la configuración de supervisiones de ProDiag (Página 8708)
Crear supervisiones ProDiag (Página 8730)

8642

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

24.3.3

Tipos de supervisiones

24.3.3.1

Vista general de los tipos de supervisiones

Descripción
La funcionalidad ProDiag permite definir diferentes textos de aviso para los siguientes tipos de
supervisiones:

7H[WRVGHDYLVRDQLYHOGHWRGDOD&38SDUDORVWLSRVGHVXSHUYLVLRQHVGH3UR'LDJ

6XSHUYLVLµQGHRSHUDQGRV

9DULDEOHV
DYLVRGHVXSHUYLVLµQSDUDWRGDVODV
VXSHUYLVLRQHVE£VLFDVJOREDOHV

6XSHUYLVLµQGHHQFODYDPLHQWRV
6XSHUYLVLµQGHDFFLRQHV

6XSHUYLVLRQHV
E£VLFDV

6XSHUYLVLµQGHUHDFFLRQHV

%ORTXHV
DYLVRGHVXSHUYLVLµQSDUDWRGDVODV
VXSHUYLVLRQHVE£VLFDVORFDOHV

6XSHUYLVLµQGHSRVLFLRQHV

$GHP£VGHODVVXSHUYLVLRQHVE£VLFDVHVSRVLEOHGHILQLUDYLVRVGHVXSHUYLVLµQFRQXQWH[WRVHQFLOORRFRQ
XQWH[WR\XQQ¼PHURGHHUURUFRUUHVSRQGLHQWH

7H[WRGHDYLVR

6XSHUYLVLRQHVFRQXQWH[WRGH
DYLVR

9DULDEOHV
DYLVRGHVXSHUYLVLµQSDUDWRGDVODV
VXSHUYLVLRQHVJOREDOHVFRQXQWH[WR
GHDYLVR

%ORTXHV
DYLVRGHVXSHUYLVLµQSDUDWRGDVODV
VXSHUYLVLRQHVORFDOHVFRQXQWH[WR
GHDYLVR

0HQVDMHGHHUURU

6XSHUYLVLRQHVFRQXQ
PHQVDMHGHHUURU

9DULDEOHV
DYLVRGHVXSHUYLVLµQSDUDWRGDVODV
VXSHUYLVLRQHVJOREDOHVFRQXQ
PHQVDMHGHHUURU

%ORTXHV
$YLVRGHVXSHUYLVLµQSDUDWRGDVODV
VXSHUYLVLRQHVORFDOHVFRQXQ
PHQVDMHGHHUURU

Programación del PLC
Manual de programación y manejo, 11/2019

8643

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Encontrará más información sobre la definición de los textos de aviso aquí: Definir textos de
aviso ProDiag centralizados (Página 8719)
Nota
Encontrará información detallada sobre los distintos tipos de supervisiones aquí:
Supervisión de operandos (Página 8644)
Supervisión de enclavamientos (Página 8646)
Supervisión de acciones (Página 8648)
Supervisión de reacciones (Página 8650)
Supervisión de posiciones (Página 8652)
Aviso de texto (Página 8654)
Mensaje de error (Página 8655)
Nota
Encontrará ejemplos sobre los distintos tipos de supervisiones aquí:
Ejemplo de una supervisión de operandos (Página 8658)
Ejemplo de una supervisión de enclavamiento (Página 8660)
Ejemplo de una supervisión de acciones (Página 8664)
Ejemplo de una supervisión de reacciones (Página 8666)
Ejemplo de una supervisión de posición (Página 8669)
Ejemplo de un texto de aviso (Página 8672)
Ejemplo de un mensaje de error (Página 8673)

24.3.3.2

Supervisión de operandos

Descripción
La supervisión de operandos comprueba el estado lógico (TRUE o FALSE) de un operando
booleano y se utiliza principalmente para supervisar las denominadas "señales estáticas",
como, p. ej., presión, temperatura, señal de la instalación, etc.
Con la supervisión de operandos también es posible supervisar dos operandos booleanos
interdependientes.
Al dispararse una supervisión de operandos se activa la marca de error en el bloque de función
ProDiag asignado. De este modo el fallo se visualiza en un dispositivo HMI con ayuda del

8644

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
objeto "Vista general de ProDiag" y se consulta en el programa, p. ej., para desconectar la
máquina si se producen determinadas averías o fallos.
Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Configuración
La tabla siguiente muestra la configuración de una supervisión de operandos:
Propiedades

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Retardo

Opcio‐
nal

Valor de tiempo,
p. ej. T#2s o una
variable del tipo
de datos TIME

Tiempo que puede transcurrir mientras está
presente el estado lógico supervisado del
operando. Si se rebasa el tiempo, p. ej., un
tiempo de supresión de rebotes, se deduce
la existencia de un fallo o avería y se emite
un aviso de supervisión.

Condición 1

Opcio‐
nal

TRUE o FALSE

Condición 2

Opcio‐
nal

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

Condición 3

Opcio‐
nal

Categoría

Obliga‐
torio

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

Programación del PLC
Manual de programación y manejo, 11/2019

8645

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Propiedades

Entra‐
da

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

Estado del ope‐
rando

Descripción

-

Cada supervisión debe asignarse a un blo‐
que de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Indica si se ha producido un fallo:
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

Consulte también
Ejemplo de una supervisión de operandos (Página 8658)

24.3.3.3

Supervisión de enclavamientos

Descripción
La supervisión de enclavamientos comprueba si, tras activarse la acción (disparador) y una
vez transcurrido el retardo (opcional), la acción se ejecuta y se cumplen las condiciones de
enclavamiento. Si las condiciones de enclavamiento no se cumplen, hay un fallo y la acción no
se ejecuta.
La supervisión de enclavamientos se utiliza con frecuencia para supervisar salidas que activan
un motor.
Al dispararse una supervisión de enclavamientos se activa la marca de error en el bloque de
función ProDiag asignado. De este modo el fallo se visualiza en un dispositivo HMI con ayuda
del objeto "Vista general de ProDiag" y se consulta en el programa, p. ej., para desconectar la
máquina si se producen determinadas averías o fallos.
Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

8646

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Configuración
La tabla siguiente muestra la configuración de una supervisión de enclavamientos:
Propiedades

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Retardo

Opcio‐
nal

Valor de tiempo,
p. ej. T#2s o una
variable del tipo
de datos TIME

Tiempo que puede transcurrir mientras está
presente el estado lógico supervisado del
operando. Si se rebasa el tiempo, p. ej., un
tiempo de supresión de rebotes, se deduce
la existencia de un fallo o avería y se emite
un aviso de supervisión.

Disparador (condición 1)

Obliga‐
torio

TRUE o FALSE

La condición 1 debe existir.

Condición 2

Opcio‐
nal

Condición 3

Opcio‐
nal

Categoría

Obliga‐
torio

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

-

Cada supervisión debe asignarse a un blo‐
que de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Indica si se ha producido un fallo:
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

Programación del PLC
Manual de programación y manejo, 11/2019

8647

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Propiedades

Entra‐
da

Estado del ope‐
rando

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

Descripción
El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

Consulte también
Ejemplo de una supervisión de enclavamiento (Página 8660)
Posibilidades de uso de las supervisiones (Página 8733)

24.3.3.4

Supervisión de acciones

Descripción
La supervisión de acciones comprueba si la pieza que se encuentra, p. ej., en una cinta
transportadora ha abandonado la posición inicial dentro del tiempo de arranque tras la
operación de la máquina. Lo que no ocurre, por ejemplo, si está bloqueado el movimiento de
la pieza. Es razonable utilizar la supervisión de acciones sobre todo en procesos lentos, como
p. ej., el llenado de un silo.
Al dispararse una supervisión de acciones se activa la marca de error en el bloque de función
ProDiag asignado. De este modo el fallo se visualiza en un dispositivo HMI con ayuda del
objeto "Vista general de ProDiag" y se consulta en el programa, p. ej., para desconectar la
máquina si se producen determinadas averías o fallos.
Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

8648

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Configuración
La tabla siguiente muestra la configuración de una supervisión de acciones:
Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Tiempo de arranque

Obliga‐
torio

Valor de tiempo,
mín. T#150ms o
una variable del ti‐
po de datos TIME

Tiempo que puede transcurrir antes de que
se abandone la posición inicial. El tiempo de
arranque debe ser mayor que el tiempo de
ciclo.

Acción (condición 1)

Obliga‐
torio

TRUE o FALSE

La condición 1 debe existir.

Condición 2

Opcio‐
nal

Condición 3

Opcio‐
nal

Categoría

Obliga‐
torio

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

-

Toda supervisión debe estar asignada a un
bloque de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Indica si se ha producido un fallo:
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

Programación del PLC
Manual de programación y manejo, 11/2019

8649

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Ajustes

Entra‐
da

Estado del ope‐
rando

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

Descripción
El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

Consulte también
Ejemplo de una supervisión de acciones (Página 8664)
Posibilidades de uso de las supervisiones (Página 8733)

24.3.3.5

Supervisión de reacciones

Descripción
La supervisión de reacciones comprueba si la pieza que se encuentra, p. ej., en una cinta
transportadora ha alcanzado la posición final deseada dentro del tiempo de reacción tras una
operación de la máquina. Lo que no puede ocurrir, p. ej., si la pieza se ha caído o se ha
atascado. Es razonable utilizar la supervisión de reacciones sobre todo en procesos rápidos.
Al dispararse una supervisión de reacciones se activa la marca de error en el bloque de función
ProDiag asignado. De este modo el fallo se visualiza en un dispositivo HMI con ayuda del
objeto "Vista general de ProDiag" y se consulta en el programa, p. ej., para desconectar la
máquina si se producen determinadas averías o fallos.
Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Configuración
La tabla siguiente muestra la configuración de una supervisión de reacciones:

8650

Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Tiempo de reacción

Obliga‐
torio

Valor de tiempo,
p. ej. T#5000ms o
una variable del ti‐
po de datos TIME

Tiempo máximo que puede transcurrir hasta
que se ha alcanzado la posición final. Si se
rebasa el tiempo, se deduce la existencia de
un fallo y se emite un aviso de supervisión.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Acción (condición 1)

Obliga‐
torio

TRUE o FALSE

La condición 1 debe existir.

Condición 2

Opcio‐
nal

Condición 3

Opcio‐
nal

Categoría

Obliga‐
torio

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

-

Cada supervisión debe asignarse a un blo‐
que de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Indica si se ha producido un fallo:
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

Consulte también
Ejemplo de una supervisión de reacciones (Página 8666)
Posibilidades de uso de las supervisiones (Página 8733)

Programación del PLC
Manual de programación y manejo, 11/2019

8651

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

24.3.3.6

Supervisión de posiciones

Descripción
La supervisión de posición comprueba que la posición final que se ha alcanzado actualmente
(inicio o destino) de la pieza se mantiene estable una vez transcurrido el retardo. La posición
final no debe abandonarse sin excitación. Esto ocurre, por ejemplo, si la carretilla elevadora
expulsa la pieza de la cinta transportadora.
Al dispararse una supervisión de posición se activa la marca de error en el bloque de función
ProDiag asignado. De este modo el fallo se visualiza en un dispositivo HMI con ayuda del
objeto "Vista general de ProDiag" y se consulta en el programa, p. ej., para desconectar la
máquina si se producen determinadas averías o fallos.
Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Configuración
La tabla siguiente muestra la configuración de una supervisión de posiciones:

8652

Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Retardo

Opcio‐
nal

Valor de tiempo,
p. ej. T#2s o una
variable del tipo
de datos TIME

Tiempo que puede transcurrir mientras está
presente el estado lógico supervisado del
operando. Si se rebasa el tiempo, p. ej., un
tiempo de supresión de rebotes, se deduce
la existencia de un fallo y se emite un aviso
de supervisión.

Acción (condición 1)

Obliga‐
torio

TRUE o FALSE

La condición 1 debe existir.

Condición 2

Opcio‐
nal

Condición 3

Opcio‐
nal

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Categoría

Obliga‐
torio

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

-

Cada supervisión debe asignarse a un blo‐
que de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Indica si se ha producido un fallo:
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

Consulte también
Ejemplo de una supervisión de posición (Página 8669)
Posibilidades de uso de las supervisiones (Página 8733)

Programación del PLC
Manual de programación y manejo, 11/2019

8653

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

24.3.3.7

Aviso de texto

Descripción
Este tipo de supervisión adicional permite emitir únicamente un texto definido en el campo de
texto específico. El disparo de un texto de aviso no activa el bit de error agrupado "All" de la
variable de estado "State" en el bloque de datos de instancia ProDiag.

Configuración
La tabla siguiente muestra la configuración de un texto de aviso:
Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Retardo

Opcio‐
nal

Valor de tiempo,
p. ej. T#2s o una
variable del tipo
de datos TIME

Tiempo que puede transcurrir mientras está
presente el estado lógico supervisado del
operando. Si se rebasa el tiempo, p. ej., un
tiempo de supresión de rebotes, se deduce
la existencia de un fallo y se emite un texto
de aviso.

Condición 1

Opcio‐
nal

TRUE o FALSE

Condición 2

Opcio‐
nal

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

Condición 3

Opcio‐
nal

Categoría

Obliga‐
torio

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

-

Cada supervisión debe asignarse a un blo‐
que de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

8654

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Ajustes

Entra‐
da

Estado del ope‐
rando

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Descripción
Indica si se ha producido un fallo:
● TRUE = se ha disparado un texto de
aviso
● FALSE = no hay texto de aviso, es decir,
el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

Consulte también
Ejemplo de un texto de aviso (Página 8672)

24.3.3.8

Mensaje de error

Descripción
El tipo de supervisión "Mensaje de error" emite un aviso de texto sencillo más un número de
error. Este tipo de supervisión adicional permite emitir únicamente un texto definido en el
campo de texto específico y el número de error.
Al dispararse un mensaje de error se activa la marca de error en el bloque de función ProDiag
asignado. De este modo el fallo se visualiza en un dispositivo HMI con ayuda del objeto "Vista
general de ProDiag" y se consulta en el programa, p. ej., para desconectar la máquina si se
producen determinadas averías o fallos.
Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Programación del PLC
Manual de programación y manejo, 11/2019

8655

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Configuración
La tabla siguiente muestra la configuración de un mensaje de error:
Ajustes

Entra‐
da

Estado del ope‐
rando

Descripción

Variable / parámetro su‐
pervisado *

Obliga‐
torio

TRUE o FALSE

Operando que debe supervisarse

Retardo

Opcio‐
nal

Valor de tiempo,
p. ej. T#2s o una
variable del tipo
de datos TIME

Tiempo que puede transcurrir mientras está
presente el estado lógico supervisado del
operando. Si se rebasa el tiempo, p. ej., un
tiempo de supresión de rebotes, se deduce
la existencia de un fallo y se emite un men‐
saje de error.

Condición 1

Opcio‐
nal

TRUE o FALSE

Condición 2

Opcio‐
nal

Si se utilizan varias condiciones, estas se
combinan automáticamente con una opera‐
ción lógica Y.

Condición 3

Opcio‐
nal

Categoría

Obliga‐
torio

-

Pueden definirse hasta 8 categorías. Las 3
primeras categorías están preajustadas. Sin
embargo, puede modificarlas en cualquier
momento.
1. Error
2. Advertencia
3. Información
En la configuración de supervisiones Pro‐
Diag se especifican las categorías que de‐
ben estar disponibles.
Encontrará más información aquí: Sinopsis
de las categorías (Página 8710)

Subcategoría 1

Opcio‐
nal

-

Es posible definir un máximo de 16 entradas
por subcategoría.

Subcategoría 2

Opcio‐
nal

-

Encontrará más información aquí: Sinopsis
de las subcategorías (Página 8713)

FB ProDiag (solo para su‐ Obliga‐
pervisiones globales)
torio

-

Cada supervisión debe asignarse unívoca‐
mente a un bloque de función ProDiag.
Encontrará más información aquí: Sinopsis
de los bloques de función ProDiag (Pági‐
na 8676)

Marca de error (solo para
supervisiones globales)

Es in‐
troduci‐
da por
el siste‐
ma.

Indica si se ha producido un fallo:
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
La marca de error es accesible desde HMI y
visible en HMI.

8656

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Ajustes

Entra‐
da

Estado del ope‐
rando

Texto de aviso (ver Confi‐ Es in‐
guración)
troduci‐
da por
el siste‐
ma.

Descripción
El contenido del texto de aviso se define en
los ajustes de supervisión de ProDiag.
Encontrará más información aquí: Estructu‐
ra del editor de textos de aviso (Página 8719)

* Según si se crea una supervisión global o local, en la ficha "Propiedades" se mostrará una variable
supervisada (global) o un parámetro supervisado (local).

24.3.4

Ejemplos de los distintos tipos de supervisiones

24.3.4.1

Introducción

Descripción
El siguiente ejemplo explica paso a paso los distintos tipos de supervisiones con el movimiento
de la pieza de izquierda a derecha por la cinta transportadora. Durante este proceso pueden
producirse diversos fallos, como, p. ej., que la pieza no salga de la posición inicial o que no
llegue a tiempo a la posición final. Para supervisar la totalidad del proceso e identificar todos
los fallos, puede implementar distintas supervisiones con ayuda de la funcionalidad ProDiag.
La siguiente figura sirve como punto de partida para todos los ejemplos sucesivos:
&RQYB$FWRUB)RUZDUG4

&RQYB$FWRUB%DFNZDUG4

&RQYB3XVKB
%XWWRQB%DFNZDUG

&RQYB3XVKB
%XWWRQB)RUZDUG

3LH]D
SURGXFLGD
&RQYB)RUZDUGB7ULJJHU

&RQYB%DFNZDUGB7ULJJHU

&RQYB$XWR+DQG
0RGRPDQXDO
&RQYB6ZLWFKB/HIW,

0RGRDXWRP£WLFR
&RQYB6ZLWFKB5LJKW,

Los operandos que se necesitan en los distintos ejemplos aparecen sobre fondo gris.

Programación del PLC
Manual de programación y manejo, 11/2019

8657

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
En los capítulos siguientes encontrará ejemplos de todos los tipos de supervisión posibles:
● Ejemplo de una supervisión de operandos (Página 8658)
● Ejemplo de una supervisión de enclavamiento (Página 8660)
● Ejemplo de una supervisión de acciones (Página 8664)
● Ejemplo de una supervisión de reacciones (Página 8666)
● Ejemplo de una supervisión de posición (Página 8669)

24.3.4.2

Ejemplo de una supervisión de operandos

Requisitos
Se ha creado una supervisión para el operando "Conv_Switch_Left" y se ha elegido el tipo de
supervisión "Operando".

Descripción
La siguiente figura muestra una cinta transportadora en estado de reposo, sobre la cual se
encuentra la pieza producida. La pieza se encuentra a la izquierda, en la posición inicial, y
actualmente no está siendo controlada. Las flechas simbolizan el movimiento de la pieza de
izquierda a derecha y de derecha a izquierda en el momento en que se inicia la producción:
&RQYB$FWRUB)RUZDUG4

&RQYB$FWRUB%DFNZDUG4

&RQYB3XVKB
%XWWRQB%DFNZDUG

&RQYB3XVKB
%XWWRQB)RUZDUG

3LH]D
SURGXFLGD
&RQYB)RUZDUGB7ULJJHU

&RQYB%DFNZDUGB7ULJJHU

&RQYB$XWR+DQG
0RGRPDQXDO
&RQYB6ZLWFKB/HIW,

8658

0RGRDXWRP£WLFR
&RQYB6ZLWFKB5LJKW,

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Los operandos necesarios para esta supervisión aparecen sobre fondo gris.
Operando

Significado

Conv_Actor_Forward

Estas son las señales de control (salida del motor)
emitidas por el programa de usuario para los mo‐
vimientos hacia la izquierda y la derecha.

Conv_Actor_Backward
Conv_Forward_Trigger
Conv_Backward_Trigger
Conv_Switch_Left

Estas son las señales de control emitidas por el
programa de usuario (p. ej., por un bloque de fun‐
ción GRAPH) para iniciar los movimientos hacia la
izquierda y la derecha.
Esta es la posición de origen y destino de la unidad
de producción.

Conv_Switch_Right
Conv_Auto/Hand

Este es el interruptor para la selección del modo
de operación.

Conv_Push_Button_Forward

Estos son los respectivos pulsadores manuales
para el movimiento hacia delante y hacia atrás.

Conv_Push_Button_Backward

Procedimiento
Introduzca los siguientes valores en las propiedades de la supervisión de operandos:
Propiedades

Valores

Estado del operando/explicación

Tipo de supervisión Operando

-

Variable supervisa‐ Conv_Switch_Left
da

TRUE
En cuanto el operando pasa al estado lógi‐
co TRUE y se cumplen todas las condicio‐
nes, se dispara el aviso de supervisión.

Retardo

T#0 ms

El fallo debe detectarse y notificarse inme‐
diatamente. Por ello se indica un retardo de
0 ms.

Condición 1

Conv_Switch_Right

TRUE
Con la condición 1 es posible supervisar
los dos operandos booleanos dependien‐
tes entre sí.

Condición 2

-

Condición 3

-

Categoría

1: Error

El disparo del aviso de supervisión se cla‐
sifica como error.

Subcategoría 1

-

Las subcategorías no son necesarias.

Subcategoría 2

-

FB ProDiag

Default_SupervisionFB

Este es el correspondiente bloque de fun‐
ción ProDiag. Si no se utiliza ningún bloque
de función propio, se usará como ajuste
predeterminado Default_SupervisionFB.

Marca de error

Default_Supervi‐
sionDB.Conv_Switch_Left_O_1.Err

En el momento en que se detecta un fallo,
se activa esta marca de error.

Campo de texto es‐ Los dos operandos tienen el estado
pecífico
lógico TRUE

Texto explicativo que puede mostrarse en
el aviso de supervisión.

Programación del PLC
Manual de programación y manejo, 11/2019

Las condiciones no son necesarias.

8659

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Resultado
El operando supervisado "Conv_Switch_Left" y la condición 1 "Conv_Switch_Right" se
supervisan respecto al estado lógico TRUE. Esto significa que, mientras solo uno de los dos
pase del estado lógico FALSE a TRUE, no existirá fallo alguno. Pero, en el momento en que
ambos pasan al estado lógico TRUE, se deducirá la existencia de un fallo y se emitirá un aviso
de supervisión.
Según cómo sean los ajustes de supervisión básica en la configuración de supervisiones de
ProDiag, el aviso de supervisión puede ser como sigue:
Aviso de supervisión para un error de operando
Error : Operando : CPU_50 : Default_SupervisionFB : I 60.3 : Conv_Switch_Left : Los dos
operandos tienen el estado lógico TRUE

Consulte también
Supervisión de operandos (Página 8644)

24.3.4.3

Ejemplo de una supervisión de enclavamiento

Requisitos
Se han creado dos supervisiones para el operando "Conv_Actor_Forward" y se ha elegido el
tipo de supervisión "Enclavamiento":
● Supervisión_ID_1 (Default_SupervisionFB)
● Supervisión_ID_2 (Default_SupervisionFB)
Esto permite realizar operaciones lógicas O. Por ejemplo, en <Überwachung_ID_1> se puede
definir la condición "Automático" y en <Überwachung_ID2> la condición "Modo manual".
Nota
Posibilidades de uso
Asegúrese de que la variable global "Conv_Actor_Forward" no se declara como entrada.
Encontrará más información sobre las posibilidades de uso aquí: Posibilidades de uso de las
supervisiones (Página 8733)

8660

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Descripción
La siguiente figura muestra una cinta transportadora en estado de reposo, sobre la cual se
encuentra la pieza producida. La pieza se encuentra a la izquierda, en la posición inicial, y
actualmente no está siendo controlada. Las flechas simbolizan el movimiento de la pieza de
izquierda a derecha y de derecha a izquierda en el momento en que se inicia la producción:
&RQYB$FWRUB)RUZDUG4

&RQYB$FWRUB%DFNZDUG4

&RQYB3XVKB
%XWWRQB)RUZDUG

&RQYB3XVKB
%XWWRQB%DFNZDUG

3LH]D
SURGXFLGD
&RQYB)RUZDUGB7ULJJHU

&RQYB%DFNZDUGB7ULJJHU

&RQYB$XWR+DQG
0RGRPDQXDO
&RQYB6ZLWFKB/HIW,

0RGRDXWRP£WLFR
&RQYB6ZLWFKB5LJKW,

Los operandos necesarios para esta supervisión aparecen sobre fondo gris.
Operando

Significado

Conv_Actor_Forward

Estas son las señales de control (salida del motor)
emitidas por el programa de usuario para los mo‐
vimientos hacia la izquierda y la derecha.

Conv_Actor_Backward
Conv_Forward_Trigger
Conv_Backward_Trigger
Conv_Switch_Left
Conv_Switch_Right

Estas son las señales de control emitidas por el
programa de usuario (p. ej., por un bloque de fun‐
ción GRAPH) para iniciar los movimientos hacia la
izquierda y la derecha.
Esta es la posición de origen y destino de la unidad
de producción.

Conv_Auto/Hand

Este es el interruptor para la selección del modo
de operación.

Conv_Push_Button_Forward

Estos son los respectivos pulsadores manuales
para el movimiento hacia delante y hacia atrás.

Conv_Push_Button_Backward

Programación del PLC
Manual de programación y manejo, 11/2019

8661

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Procedimiento para el modo automático
Introduzca los siguientes valores en las propiedades de la supervisión de enclavamiento:
Propiedades

Valores

Estado del operando/explicación

Tipo de supervisión Enclavamiento

-

Variable supervisa‐ Conv_Actor_Forward
da

FALSE
En cuanto el operando pasa al
estado lógico FALSE o conserva
el estado lógico TRUE y se cum‐
plen todas las condiciones, se
dispara el aviso de supervisión.

Retardo

T#0 ms

El fallo debe detectarse y notifi‐
carse inmediatamente. Por ello
se indica un retardo de 0 ms.

Disparador (condi‐
ción 1)

Conv_Forward_Trigger

TRUE

Condición 2

Conv_Auto/Manu

TRUE = Modo automático

Condición 3

-

La condición no es necesaria.

Categoría

1: Error

El disparo del aviso de supervi‐
sión se clasifica como error.

Subcategoría 1

-

Subcategoría 2

-

Las subcategorías no son nece‐
sarias.

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Marca de error

Default_SupervisionDB.Conv_Actor_For‐
ward_I_1.Err

En el momento en que se detec‐
ta un fallo, se activa esta marca
de error.

Con la condición 1 es posible su‐
pervisar los dos operandos boo‐
leanos dependientes entre sí.

Campo de texto es‐ Modo automático
pecífico

Texto explicativo que puede
mostrarse en el aviso de super‐
visión.

Procedimiento para el modo manual
Introduzca los siguientes valores en las propiedades de la supervisión de operandos:
Propiedades

8662

Valores

Estado del operando/explicación

Tipo de supervisión Enclavamiento

-

Operando supervi‐
sado

FALSE

Conv_Actor_Forward

En cuanto el operando pasa al
estado lógico FALSE y se cum‐
plen todas las condiciones, se
dispara el aviso de supervisión.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Propiedades

Valores

Estado del operando/explicación

Retardo

T#0 ms

El fallo debe detectarse y notifi‐
carse inmediatamente. Por ello
se indica un retardo de 0 ms.

Disparador (condi‐
ción 1)

Conv_Push_Button_Forward

TRUE

Condición 2

Conv_Auto/Manu

FALSE = modo manual

Condición 3

-

La condición no es necesaria.

Categoría

1: Error

El disparo del aviso de supervi‐
sión se clasifica como error.

Subcategoría 1

-

Subcategoría 2

-

Las subcategorías no son nece‐
sarias.

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Bit de error

Default_SupervisionDB.Conv_Actor_For‐
ward_I_1.Err

En el momento en que se detec‐
ta un fallo, se activa este bit de
error.

Con la condición 1 es posible su‐
pervisar los dos operandos boo‐
leanos dependientes entre sí.

Campo de texto es‐ Modo manual
pecífico

Texto explicativo que puede
mostrarse en el aviso de super‐
visión.

Resultado
El movimiento de la pieza de izquierda a derecha es controlado por el programa mediante el
operando "Conv_Forward_Trigger" o mediante pulsador manual con el operando
"Conv_Push_Button_Forward". Sin embargo, la pieza no ha salido de la posición inicial
izquierda y por ello el operando "Conv_Actor_Forward" no pasa al estado lógico TRUE. Esto
puede suceder también en pleno movimiento, por ejemplo. Con esto se cumplen todos los
requisitos para el disparo del aviso de supervisión.
Según cómo sean los ajustes de supervisión básica en la configuración de supervisiones de
ProDiag, los avisos de supervisión pueden ser como sigue:
Aviso de supervisión para un error de enclavamiento en modo automático
Error : Interlock : CPU_50 : Default_SupervisionFB : I 61.5 :
Conv_Actor_Forward : Modo automático

Aviso de supervisión para un error de enclavamiento en modo manual
Error : Interlock : CPU_50 : Default_SupervisionFB : I 61.5 : Conv_Actor_Forward : Modo
manual

Programación del PLC
Manual de programación y manejo, 11/2019

8663

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Consulte también
Supervisión de enclavamientos (Página 8646)

24.3.4.4

Ejemplo de una supervisión de acciones

Requisitos
Se ha creado una supervisión para el operando "Conv_Switch_Left" y se ha elegido el tipo de
supervisión "Acción".
Nota
Posibilidades de uso
Asegúrese de que la variable global "Conv_Switch_Left" no se declara como salida.
Encontrará más información sobre las posibilidades de uso aquí: Posibilidades de uso de las
supervisiones (Página 8733)

Descripción
La siguiente figura muestra una cinta transportadora en estado de reposo, sobre la cual se
encuentra la pieza producida. La pieza se encuentra a la izquierda, en la posición inicial. Las
flechas simbolizan el movimiento de la pieza de izquierda a derecha y de derecha a izquierda
en el momento en que se inicia la producción. El movimiento de la pieza de izquierda a derecha
es controlado por el programa de usuario, pero la pieza no abandona a tiempo la posición
inicial:
&RQYB$FWRUB)RUZDUG4

&RQYB$FWRUB%DFNZDUG4

&RQYB3XVKB
%XWWRQB%DFNZDUG

&RQYB3XVKB
%XWWRQB)RUZDUG

3LH]D
SURGXFLGD
&RQYB)RUZDUGB7ULJJHU

&RQYB%DFNZDUGB7ULJJHU
9DORUGHO
WHPSRUL]DGRU!PV
&RQYB$XWR+DQG
0RGRPDQXDO

&RQYB6ZLWFKB/HIW,

8664

0RGRDXWRP£WLFR
&RQYB6ZLWFKB5LJKW,

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Los operandos necesarios para esta supervisión aparecen sobre fondo gris.
Operando

Significado

Conv_Actor_Forward

Estas son las señales de control (salida del motor)
emitidas por el programa de usuario para los mo‐
vimientos hacia la izquierda y la derecha.

Conv_Actor_Backward
Conv_Forward_Trigger
Conv_Backward_Trigger
Conv_Switch_Left

Estas son las señales de control emitidas por el
programa de usuario (p. ej., por un bloque de fun‐
ción GRAPH) para iniciar los movimientos hacia la
izquierda y la derecha.
Esta es la posición de origen y destino de la unidad
de producción.

Conv_Switch_Right
Conv_Auto/Hand

Este es el interruptor para la selección del modo
de operación.

Conv_Push_Button_Forward

Estos son los respectivos pulsadores manuales
para el movimiento hacia delante y hacia atrás.

Conv_Push_Button_Backward

Procedimiento
Introduzca los siguientes valores en las propiedades de la supervisión de acciones:
Propiedades

Valores

Estado del operando/explicación

Tipo de supervisión Acción

-

Variable supervisa‐ Conv_Switch_Left
da

TRUE

Tiempo de arran‐
que

T#200 ms

La pieza debe abandonar la po‐
sición inicial en un plazo de 200
ms.

Acción (condición
1)

Conv_Actor_Forward

TRUE

Si la pieza no abandona su posi‐
ción inicial a la izquierda de la
cinta transportadora, el operan‐
do "Conv_Switch_Left" permane‐
ce en el estado lógico TRUE. Si
además se cumplen todas las
condiciones, se dispara el aviso
de supervisión.

Está presente la señal de control
para el movimiento.
Con la condición 1 es posible su‐
pervisar los dos operandos boo‐
leanos dependientes entre sí.

Condición 2

-

Condición 3

-

Categoría

1: Error

El disparo del aviso de supervi‐
sión se clasifica como error.

Subcategoría 1

-

Subcategoría 2

-

Las subcategorías no son nece‐
sarias.

Programación del PLC
Manual de programación y manejo, 11/2019

Las condiciones no son necesa‐
rias.

8665

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Propiedades

Valores

Estado del operando/explicación

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Marca de error

Default_Supervi‐
sionDB.Conv_Switch_Left_A_1.Err

En el momento en que se detec‐
ta un fallo, se activa esta marca
de error.

Campo de texto es‐ pecífico

Texto explicativo que puede
mostrarse en el aviso de super‐
visión.

Resultado
El movimiento de la pieza de izquierda a derecha es controlado por el programa mediante el
operando "Conv_Forward_Trigger". El operando "Conv_Actor_Forward" pasa al estado lógico
TRUE y el movimiento hacia delante de la pieza debe realizarse de izquierda a derecha. Sin
embargo, la pieza no sale a tiempo de la posición inicial izquierda y por ello el operando
"Conv_Switch_Left" permanece en el estado lógico TRUE. Con esto se cumplen todos los
requisitos para el disparo del aviso de supervisión.
Según cómo sean los ajustes de supervisión básica en la configuración de supervisiones de
ProDiag, los avisos de supervisión pueden ser como sigue:
Aviso de supervisión para un error de enclavamiento en modo automático
Error : Action : CPU_50 : Default_SupervisionFB : I 60.3 : Conv_Switch_Left

Consulte también
Supervisión de acciones (Página 8648)

24.3.4.5

Ejemplo de una supervisión de reacciones

Requisitos
Se ha creado una supervisión para el operando "Conv_Switch_Right" y se ha elegido el tipo de
supervisión "Reacción".
Nota
Posibilidades de uso
Asegúrese de que la variable global "Conv_Switch_Right" no se declara como salida.
Encontrará más información sobre las posibilidades de uso aquí: Posibilidades de uso de las
supervisiones (Página 8733)

8666

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Descripción
La siguiente figura muestra una cinta transportadora en estado de reposo, sobre la cual se
encuentra la pieza producida. La pieza se encuentra en camino desde la izquierda (posición
inicial) hacia la derecha (posición final). Las flechas simbolizan el movimiento de la pieza de
izquierda a derecha y de derecha a izquierda en el momento en que se inicia la producción. El
movimiento de la pieza de izquierda a derecha ha sido iniciado por el programa de usuario,
pero la pieza no alcanza a tiempo la posición final:
&RQYB$FWRUB)RUZDUG4

&RQYB$FWRUB%DFNZDUG4

&RQYB3XVKB
%XWWRQB%DFNZDUG

&RQYB3XVKB
%XWWRQB)RUZDUG

3LH]D
SURGXFLGD
&RQYB)RUZDUGB7ULJJHU

&RQYB%DFNZDUGB7ULJJHU
9DORUGHWLHPSR
!PV
&RQYB$XWR+DQG
0RGRPDQXDO

&RQYB6ZLWFKB/HIW,

0RGRDXWRP£WLFR
&RQYB6ZLWFKB5LJKW,

Los operandos necesarios para esta supervisión aparecen sobre fondo gris.
Operando

Significado

Conv_Actor_Forward

Estas son las señales de control (salida del motor)
emitidas por el programa de usuario para los mo‐
vimientos hacia la izquierda y la derecha.

Conv_Actor_Backward
Conv_Forward_Trigger
Conv_Backward_Trigger
Conv_Switch_Left
Conv_Switch_Right

Estas son las señales de control emitidas por el
programa de usuario (p. ej., por un bloque de fun‐
ción GRAPH) para iniciar los movimientos hacia la
izquierda y la derecha.
Esta es la posición de origen y destino de la unidad
de producción.

Conv_Auto/Hand

Este es el interruptor para la selección del modo
de operación.

Conv_Push_Button_Forward

Estos son los respectivos pulsadores manuales
para el movimiento hacia delante y hacia atrás.

Conv_Push_Button_Backward

Programación del PLC
Manual de programación y manejo, 11/2019

8667

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Procedimiento
Introduzca los siguientes valores en las propiedades de la supervisión de reacciones:
Propiedades

Valores

Estado del operando/explicación

Tipo de supervisión Reacción

-

Variable supervisa‐ Conv_Switch_Right
da

FALSE
En cuanto la pieza alcanza la po‐
sición final, el operando pasa al
estado lógico TRUE. Si esto no
sucede dentro del tiempo de
reacción y se cumplen todas las
condiciones, se dispara el aviso
de supervisión.

Tiempo de reacción T#5000 ms

El movimiento de la pieza de la
izquierda (posición inicial) a la
derecha (posición final) no debe
durar más de 5 s.

Acción (condición
1)

TRUE

Conv_Actor_Forward

Está presente la señal de control
para el movimiento.
Con la condición 1 es posible su‐
pervisar los dos operandos boo‐
leanos dependientes entre sí.

Condición 2

-

Condición 3

-

Categoría

1: Error

El disparo del aviso de supervi‐
sión se clasifica como error.

Subcategoría 1

-

Subcategoría 2

-

Las subcategorías no son nece‐
sarias.

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Marca de error

Default_Supervi‐
sionDB.Conv_Switch_Right_R_1.Err

En el momento en que se detec‐
ta un fallo, se activa esta marca
de error.

Campo de texto es‐ pecífico

Las condiciones no son necesa‐
rias.

Texto explicativo que puede
mostrarse en el aviso de super‐
visión.

Resultado
El movimiento de la pieza de izquierda a derecha es controlado por el programa mediante el
operando "Conv_Forward_Trigger". El operando "Conv_Actor_Forward" pasa al estado lógico
TRUE y la pieza empieza a moverse hacia delante de izquierda a derecha. Sin embargo, la
pieza no alcanza la posición final derecha en un plazo de 5 s y el operando
"Conv_Switch_Right" permanece en el estado lógico FALSE. Con esto se cumplen todos los
requisitos para el disparo del aviso de supervisión.

8668

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Según cómo sean los ajustes de supervisión básica en la configuración de supervisiones de
ProDiag, los avisos de supervisión pueden ser como sigue:
Aviso de supervisión para un error de reacción
Error : Reaction : CPU_50 : Default_SupervisionFB : I 60.1 :
Conv_Switch_Right

Consulte también
Supervisión de reacciones (Página 8650)

24.3.4.6

Ejemplo de una supervisión de posición

Requisitos
Se ha creado una supervisión para el operando "Conv_Switch_Left" y se ha elegido el tipo de
supervisión "Posición".
Nota
Posibilidades de uso
Asegúrese de que la variable global "Conv_Switch_Left" no se declara como salida.
Encontrará más información sobre las posibilidades de uso aquí: Posibilidades de uso de las
supervisiones (Página 8733)

Programación del PLC
Manual de programación y manejo, 11/2019

8669

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Descripción
La siguiente figura muestra una cinta transportadora en estado de reposo, sobre la cual se
encuentra la pieza producida. La pieza se encuentra en camino desde la izquierda (posición
inicial) hacia la derecha (posición final). Las flechas simbolizan el movimiento de la pieza de
izquierda a derecha y de derecha a izquierda en el momento en que se inicia la producción. Sin
embargo, el movimiento de la pieza de izquierda a derecha no ha sido iniciado por el programa
de usuario y la pieza ha abandonado la posición inicial sin autorización:
&RQYB$FWRUB)RUZDUG4

&RQYB$FWRUB%DFNZDUG4

&RQYB3XVKB
%XWWRQB%DFNZDUG

&RQYB3XVKB
%XWWRQB)RUZDUG

3LH]D
SURGXFLGD
&RQYB)RUZDUGB7ULJJHU

&RQYB%DFNZDUGB7ULJJHU

&RQYB$XWR+DQG
0RGRPDQXDO
&RQYB6ZLWFKB/HIW,

0RGRDXWRP£WLFR
&RQYB6ZLWFKB5LJKW,

Los operandos necesarios para esta supervisión aparecen sobre fondo gris.
Operando

Significado

Conv_Actor_Forward

Estas son las señales de control (salida del motor)
emitidas por el programa de usuario para los mo‐
vimientos hacia la izquierda y la derecha.

Conv_Actor_Backward
Conv_Forward_Trigger
Conv_Backward_Trigger
Conv_Switch_Left
Conv_Switch_Right

Esta es la posición de origen y destino de la unidad
de producción.

Conv_Auto/Hand

Este es el interruptor para la selección del modo
de operación.

Conv_Push_Button_Forward

Estos son los respectivos pulsadores manuales
para el movimiento hacia delante y hacia atrás.

Conv_Push_Button_Backward

8670

Estas son las señales de control emitidas por el
programa de usuario (p. ej., por un bloque de fun‐
ción GRAPH) para iniciar los movimientos hacia la
izquierda y la derecha.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Procedimiento
Introduzca los siguientes valores en las propiedades de la supervisión de reacciones:
Propiedades

Valores

Estado del operando/explicación

Tipo de supervisión Posición

-

Variable supervisa‐ Conv_Switch_Left
da

FALSE

Retardo

T#0 ms

El fallo debe detectarse y notifi‐
carse inmediatamente. Por ello
se indica un retardo de 0 ms.

Acción (condición
1)

Conv_Actor_Forward

FALSE

En cuanto el operando pasa al
estado lógico FALSE sin autori‐
zación y se cumplen todas las
condiciones, se dispara el aviso
de supervisión.

No hay señal de control para el
movimiento.
Con la condición 1 es posible su‐
pervisar los dos operandos boo‐
leanos dependientes entre sí.

Condición 2

-

Las condiciones no son necesa‐
rias.

Condición 3

-

Categoría

2: Advertencia

El disparo del aviso de supervi‐
sión se clasifica como adverten‐
cia.

Subcategoría 1

-

Las subcategorías no son nece‐
sarias.

Subcategoría 2

-

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Marca de error

Default_Supervi‐
sionDB.Conv_Switch_Left_P_1.Err

En el momento en que se detec‐
ta un fallo, se activa esta marca
de error.

Campo de texto es‐ Posición inicial abandonada sin autorización
pecífico

Texto explicativo que puede
mostrarse en el aviso de super‐
visión.

Resultado
El movimiento de la pieza de izquierda a derecha no es iniciado por el programa mediante el
operando "Conv_Forward_Trigger". El operando "Conv_Actor_Forward" permanece en el
estado lógico FALSE. La pieza no debe moverse hacia delante de izquierda a derecha. Sin
embargo, la pieza abandona la posición inicial sin autorización. Con esto se cumplen todos los
requisitos para el disparo del aviso de supervisión.

Programación del PLC
Manual de programación y manejo, 11/2019

8671

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Según cómo sean los ajustes de supervisión básica en la configuración de supervisiones de
ProDiag, los avisos de supervisión pueden ser como sigue:
Aviso de supervisión para un error de enclavamiento en modo automático
Advertencia: Posición : CPU_50 : Default_SupervisionFB : I 60.3 : Conv_Switch_Left :
Posición inicial abandonada sin autorización

Consulte también
Supervisión de posiciones (Página 8652)

24.3.4.7

Ejemplo de un texto de aviso

Requisitos
Se ha creado una supervisión para el operando "Trigger_Message" y se ha elegido el tipo de
supervisión "Texto de aviso".

Descripción
Su intención es emitir de forma automatizada, desde el equipo central, un texto de aviso a
todos los dispositivos HMI indicando, por ejemplo, que la instalación se parará dentro de una
hora para fines de mantenimiento. Para que el aviso de supervisión incluya realmente solo esta
información breve y nada más, como el nombre de la CPU, etc., puede utilizar el tipo de
supervisión "Texto de aviso".
El texto que debe incluirse en el aviso de supervisión se introduce en el campo de texto
específico.
La variable necesaria para esta supervisión es la siguiente:
Operando

Significado

Trigger_Message

Una variable booleana como disparador del aviso
de supervisión.

Procedimiento
Introduzca los siguientes valores en las propiedades del texto de aviso:
Propiedades

Estado del operando/explicación

Tipo de supervisión Texto de aviso

-

Variable supervisa‐ Trigger_Message
da

TRUE

Retardo

8672

Valores

T#0 ms

En cuanto la variable pasa al es‐
tado lógico TRUE, se dispara el
aviso de supervisión.
El aviso de supervisión debe
emitirse de inmediato.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag
Propiedades

Valores

Estado del operando/explicación

Condición 1

-

Condición 2

-

Las condiciones no son necesa‐
rias.

Condición 3

-

Categoría

3: Información

El disparo del aviso de supervi‐
sión se clasifica como informa‐
ción.

Subcategoría 1

-

Subcategoría 2

-

Las subcategorías no son nece‐
sarias.

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Marca de error

Default_SupervisionDB.Trigger_Messa‐
ge_O_1.Err

En el momento en que se detec‐
ta un fallo, se activa esta marca
de error.

Campo de texto es‐ La instalación se parará dentro de 1 hora.
pecífico

Texto explicativo que se mostra‐
rá en el aviso de supervisión.

Resultado
En cuanto la variable "Trigger_Message" pasa al estado lógico TRUE, se emite el aviso de
supervisión con el texto del campo de texto específico.
El aviso de supervisión tiene el aspecto siguiente:
Texto de aviso
La instalación se parará dentro de 1 hora.

Consulte también
Aviso de texto (Página 8654)

24.3.4.8

Ejemplo de un mensaje de error

Requisitos
Se ha creado una supervisión para la variable "+01R01_Error" y se ha elegido el tipo de
supervisión "Mensaje de error".

Programación del PLC
Manual de programación y manejo, 11/2019

8673

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Descripción
Su proveedor le ha suministrado un robot. Además del hardware ha recibido una lista de textos
con textos de error específicos para este robot y un bloque de función para controlar el robot.
El bloque de función se comunica con su programa a través de Profinet. De este modo, el robot
puede notificar él mismo los errores a través de su controlador. En caso de fallo, puede
visualizar estos textos de error en un aviso de supervisión.
El bloque de función tiene el aspecto siguiente, p. ej.:
5RERWHUB&0'
(UURU
6WDWXV

ಯ5B(UURUಯ
ಯ5B6WDWXVಯ

La lista de textos con los textos de error del robot tiene el aspecto siguiente, p. ej.:
Número de la Entrada
lista de textos
1

Aviso / problema 1111

2

Aviso / problema 2222

3

Aviso / problema 3333

4

Aviso / problema 4444

Para utilizar este bloque de función en el código del programa se requieren las variables
siguientes:
Variables

Significado

+01R01_Error

Una variable booleana como disparador del mensaje de error.

+01R01_Estado

Equivale al número de error

Procedimiento
Para visualizar los textos de error del robot, proceda del siguiente modo:
1. Cree las dos variables necesarias en la tabla de variables estándar.

2. Llame el bloque de función suministrado en el código del programa.
3. Introduzca los siguientes valores en las propiedades del aviso:

8674

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.3 Principios básicos de la supervisión con ProDiag

Propiedades

Valores

Estado del operando/explicación

Tipo de supervisión Mensaje de error

-

Variable supervisa‐ +01R01_Error
da

TRUE

Retardo

T#0 ms

El aviso de supervisión debe
emitirse de inmediato.

Condición 1

-

Condición 2

-

Las condiciones no son necesa‐
rias.

Condición 3

-

Categoría

1: Error

El disparo del aviso de supervi‐
sión se clasifica como error.

Subcategoría 1

-

Las subcategorías no son nece‐
sarias.

Subcategoría 2

-

FB ProDiag

Default_SupervisionFB

Este es el correspondiente blo‐
que de función ProDiag. Si no se
utiliza ningún bloque de función
propio, se usará como ajuste pre‐
determinado Default_Supervi‐
sionFB.

Marca de error

Default_SupervisionDB.Trigger_Messa‐
ge_O_1.Err

En el momento en que se detec‐
ta un fallo, se activa esta marca
de error.

Campo de texto es‐ Valores asociados siguientes:
pecífico
● @4%4d@ (número de error)

En cuanto el bloque de función
del robot emite un error y activa
la marca de error, la variable se
pone al estado lógico TRUE y se
dispara el aviso de supervisión.

Texto de error que se mostrará
en el aviso de supervisión.

● @4%t#T_Robotor@ (texto de la lista)

Encontrará más información sobre los valores asociados aquí: Uso de los valores asociados
(Página 8739)

Resultado
En cuanto la variable "+01R01_Error" pasa al estado lógico TRUE, se emite el aviso de
supervisión con el texto del campo de texto específico. Se muestran el número de error con tres
cifras en formato decimal y el texto de error de la lista de textos.
Según cómo sean los ajustes del mensaje de error en los ajustes de supervisión de ProDiag,
un mensaje de error puede tener el aspecto siguiente:
Mensaje de error
Error : Err_Txt : CPU_50 : Default_SupervisionFB : +01R01_Error : 3 : Aviso / problema 3333

Programación del PLC
Manual de programación y manejo, 11/2019

8675

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag

24.3.5

Ejemplos de aplicación para la supervisión con ProDiag

Descripción
Encontrará un ejemplo de aplicación de la supervisión con ProDiag detallado en el Siemens
Industry Online Support: Ejemplo de aplicación para ProDiag (https://
support.industry.siemens.com/cs/ww/es/view/109740151/en).

24.4

Crear bloques de función ProDiag

24.4.1

Sinopsis de los bloques de función ProDiag

Descripción
Para estructurar el código del programa con arreglo a las unidades de las máquinas e
instalaciones, p. ej., estación_1, estación_2, etc., puede crear un bloque de función ProDiag
por cada unidad y ponerle el nombre que corresponda. El bloque de función ProDiag se crea
en el lenguaje de programación PRODIAG y puede contener como máximo 250 supervisiones
en la versión 1.0 y 1000 supervisiones como máximo en la versión 2.0.
En cuanto se crea un bloque de función ProDiag nuevo, se crea un bloque de datos de
instancia ProDiag.
Encontrará una vista detallada de los bloques ProDiag utilizados en el código de su programa
y cómo se interrelacionan entre sí aquí: Mostrar bloques definidos por el usuario supervisados
(Página 8766)

Ventajas de los bloques de función ProDiag definidos por el usuario
Las unidades definidas por el usuario ofrecen un gran número de ventajas:
● Permiten estructurar mejor el programa y beneficiarse del mayor rendimiento.
● Cada unidad ofrece bits de error agrupado que permiten definir reacciones en el programa
de usuario. Además, se consigue una visualización sencilla en el dispositivo HMI.
● Con el objeto "Vista general de ProDiag" se crea en un dispositivo HMI una vista general de
todos los bits de error agrupado de la unidad.

Consulte también
Crear FB ProDiag al crear supervisiones globales (Página 8678)
Estructura de un bloque de función ProDiag (Página 8677)
Sinopsis de la llamada de los bloques de función ProDiag (Página 8755)
Asignar bloques de función ProDiag (Página 8746)

8676

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag
Crear bloques de función ProDiag (Página 8678)
Editar bloques de función ProDiag (Página 8753)

24.4.2

Estructura de un bloque de función ProDiag

Estructura de un bloque de función ProDiag
La figura siguiente muestra a modo de ejemplo los componentes de un bloque de función
ProDiag:


24.4.3



Numera‐
ción

Significado

Información adicional

1

Vista general de todas las supervisiones
globales

Todas las supervisiones asignadas a este blo‐
que de función ProDiag.

2

Vista general de todas las supervisiones
FB instanciadas

Guardar la disposición de las columnas en el FB ProDiag
La representación de las columnas en el bloque de función ProDiag puede adaptarse a las
necesidades personales. Es posible, p. ej., ocultar columnas que no se necesiten. El orden de
las columnas no puede modificarse. La vista personalizada se puede guardar a continuación.

Procedimiento
Para crear una copia de seguridad de la disposición de las columnas, proceda del siguiente
modo:
1. Adapte las columnas a sus necesidades.
2. Dentro del bloque de función ProDiag haga clic en el botón

"Memorizar disposición".

Resultado
La disposición se guarda. Esta disposición se utilizará al abrir nuevamente el bloque de función
ProDiag.

Programación del PLC
Manual de programación y manejo, 11/2019

8677

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag

24.4.4

Crear bloques de función ProDiag

24.4.4.1

Crear FB ProDiag al crear supervisiones globales

Requisitos
Ha creado como mínimo una variable global.

Procedimiento
Para crear un bloque de función ProDiag directamente al crear una supervisión global, proceda
del siguiente modo:
1. Cree una supervisión para una variable global.
En la ventana de inspección "Propiedades" se abre la ficha "Supervisiones" y se crea una
supervisión para la variable. Al crear la primera supervisión se crea también
automáticamente el bloque de función ProDiag "Default_SupervisionFB".
2. Introduzca las propiedades deseadas.
3. Haga clic en el campo de selección "..." en el FB ProDiag.
Se abre un cuadro de diálogo de selección.
4. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
5. Para crear un nuevo bloque de función ProDiag, haga clic en "Agregar" en la columna
derecha.
Se abre el cuadro de diálogo "Agregar nuevo bloque".
6. Haga clic en el botón "Bloque de función".
7. Introduzca un nombre para el nuevo bloque de función ProDiag.
8. Elija en la sección "Lenguaje > PRODIAG (incl. IDB)".
9. Haga clic en "Más información" para introducir más propiedades del nuevo bloque de
función ProDiag.
Se abre un área con campos de entrada adicionales.
10.Introduzca las propiedades deseadas.
11.Active la casilla de verificación "Agregar y abrir" si el bloque de función ProDiag debe
abrirse inmediatamente después de crearse.
12.Confirme sus entradas con "Aceptar".

Resultado
Además del nuevo bloque de función ProDiag, se crea también un bloque de datos de instancia
ProDiag en correspondencia. Encontrará los bloques en la carpeta "Bloques de programa" del
árbol del proyecto.

8678

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag

24.4.4.2

Crear FB ProDiag en la llamada del bloque

Requisitos
Se ha creado un bloque de función y como mínimo una supervisión local.

Procedimiento
Para crear un bloque de función ProDiag directamente al llamar un bloque de función, proceda
del siguiente modo:
1. Llame el bloque de función que contiene las supervisiones dentro del código del programa.
Se abre el cuadro de diálogo "Opciones de llamada".
2. Haga clic en el botón "Instancia única".
3. Haga clic en el campo de selección "..." en el FB ProDiag.
Se abre un cuadro de diálogo de selección. Se muestra automáticamente el bloque de
función ProDiag "Default_SupervisionFB", siempre que exista. Si no existe, se mostrará el
primer bloque de función ProDiag definido por el usuario que se encuentre.
4. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
5. Para crear un nuevo bloque de función ProDiag, haga clic en "Agregar" en la columna
derecha.
Se abre el cuadro de diálogo "Agregar nuevo bloque".
6. Haga clic en el botón "Bloque de función".
7. Introduzca un nombre para el nuevo bloque de función ProDiag.
8. Elija en la sección "Lenguaje > PRODIAG (incl. IDB)".
9. Haga clic en "Más información" para introducir más propiedades del nuevo bloque de
función ProDiag.
Se abre un área con campos de entrada adicionales.
10.Introduzca las propiedades deseadas.
11.Active la casilla de verificación "Agregar y abrir" si el bloque de función ProDiag debe
abrirse inmediatamente después de crearse.
12.Confirme sus entradas con "Aceptar".

Resultado
Además del nuevo bloque de función ProDiag, se crea también un bloque de datos de instancia
ProDiag en correspondencia. Encontrará los bloques en la carpeta "Bloques de programa" del
árbol del proyecto. Las supervisiones del bloque de función están instanciadas.

Programación del PLC
Manual de programación y manejo, 11/2019

8679

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag

24.4.4.3

Crear FB ProDiag en el bloque de instancia de un FB

Requisitos
Se ha creado y compilado un bloque de función con como mínimo una supervisión local.

Procedimiento
Para crear un bloque de función ProDiag en las propiedades del bloque de instancia, proceda
del siguiente modo:
1. Haga clic con el botón derecho del ratón en el bloque de instancia de un bloque de función
que contenga supervisiones locales.
2. Elija el comando "Propiedades" del menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de datos de instancia.
3. Haga clic en la sección "Atributos".
4. En "Asignar FB ProDiag", haga clic en el campo de selección "...".
Se abre un cuadro de diálogo de selección.
5. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
6. Para crear un nuevo bloque de función ProDiag, haga clic en "Agregar" en la columna
derecha.
Se abre el cuadro de diálogo "Agregar nuevo bloque".
7. Haga clic en el botón "Bloque de función".
8. Introduzca un nombre para el nuevo bloque de función ProDiag.
9. Elija en la sección "Lenguaje > PRODIAG (incl. IDB)".
10.Haga clic en "Más información" para introducir más propiedades del nuevo bloque de
función ProDiag.
Se abre un área con campos de entrada adicionales.
11.Introduzca las propiedades deseadas.
12.Active la casilla de verificación "Agregar y abrir" si el bloque de función ProDiag debe
abrirse inmediatamente después de crearse.
13.Confirme sus entradas con "Aceptar".

Resultado
Además del nuevo bloque de función ProDiag, se crea también un bloque de datos de instancia
ProDiag en correspondencia. Encontrará los bloques en la carpeta "Bloques de programa" del
árbol del proyecto. Las supervisiones del bloque de función están instanciadas.

8680

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag

24.4.4.4

Crear FB ProDiag con el cuadro de diálogo "Agregar nuevo bloque".

Requisitos
La carpeta "Bloques de programa" del árbol del proyecto está abierta.

Procedimiento
Para crear un bloque de función ProDiag desde el cuadro de diálogo "Agregar nuevo bloque",
proceda del siguiente modo:
1. Haga doble clic en el comando "Agregar nuevo bloque".
Se abre el cuadro de diálogo "Agregar nuevo bloque".
2. Haga clic en el botón "Bloque de función".
3. Introduzca un nombre para el nuevo bloque de función ProDiag.
4. Seleccione en la sección "Lenguaje > FB ProDiag (incl. IDB)".
5. Haga clic en "Más información" para introducir más propiedades del nuevo bloque de
función ProDiag.
Se abre un área con campos de entrada adicionales.
6. Introduzca las propiedades deseadas.
7. Active la casilla de verificación "Agregar y abrir" si el bloque de función ProDiag debe
abrirse inmediatamente después de crearse.
8. Confirme sus entradas con "Aceptar".
O bien:
Para asignar un bloque de función ProDiag a un bloque de función definido por el usuario ya
creado que contiene supervisiones locales con ayuda del cuadro de diálogo "Agregar nuevo
bloque", proceda del siguiente modo:
1. Haga doble clic en el comando "Agregar nuevo bloque".
Se abre el cuadro de diálogo "Agregar nuevo bloque".
2. Haga clic en el botón "Bloque de datos".
3. En la lista desplegable de Tipo, seleccione el bloque de función ya creado que contiene
supervisiones locales.
4. Haga clic en el campo de selección "..." en el FB ProDiag.
Se abre un cuadro de diálogo de selección.
5. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
6. Para crear un nuevo bloque de función ProDiag, haga clic en "Agregar" en la columna
derecha.
Se abre el cuadro de diálogo "Agregar nuevo bloque".
7. A partir de aquí, el procedimiento es el mismo que el descrito en el punto 2 anterior.

Programación del PLC
Manual de programación y manejo, 11/2019

8681

Supervisión de máquinas e instalaciones con ProDiag
24.4 Crear bloques de función ProDiag

Resultado
Además del nuevo bloque de función ProDiag, se crea también un bloque de datos de instancia
ProDiag en correspondencia. Encontrará los bloques en la carpeta "Bloques de programa" del
árbol del proyecto.

24.4.4.5

Crear FB ProDiag en las tablas sinópticas de ProDiag

Requisitos
Se han creado supervisiones locales y globales.

Procedimiento
Para crear un bloque de función ProDiag en las tablas sinópticas de ProDiag "Supervisiones
de variables" y "Supervisiones instanciadas del FB", proceda del siguiente modo:
1. Haga clic en el campo de selección "..." en la columna "FB ProDiag".
Se abre un cuadro de diálogo de selección.
2. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
3. Para crear un nuevo bloque de función ProDiag, haga clic en "Agregar" en la columna
derecha.
Se abre el cuadro de diálogo "Agregar nuevo bloque".
4. Haga clic en el botón "Bloque de función".
5. Introduzca un nombre para el nuevo bloque de función ProDiag.
6. Seleccione en la sección "Lenguaje > PRODIAG (incl. IDB)".
7. Haga clic en "Más información" para introducir más propiedades del nuevo bloque de
función ProDiag.
Se abre un área con campos de entrada adicionales.
8. Introduzca las propiedades deseadas.
9. Active la casilla de verificación "Agregar y abrir" si el bloque de función ProDiag debe
abrirse inmediatamente después de crearse.
10.Confirme sus entradas con "Aceptar".

Resultado
Además del nuevo bloque de función ProDiag, se crea también un bloque de datos de instancia
ProDiag en correspondencia. Encontrará los bloques en la carpeta "Bloques de programa" del
árbol del proyecto. Las supervisiones locales están instanciadas.

8682

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.5 Utilizar un sello de tiempo central

24.5

Utilizar un sello de tiempo central

24.5.1

Utilizar un sello de tiempo central

Descripción
A partir de la versión 2.0 del bloque de función ProDiag existe la posibilidad de especificar una
variable de sello de tiempo central en la configuración de supervisiones de ProDiag y utilizarla
a continuación en todo el proyecto de cada CPU.
La variable de sello de tiempo central se define como variable global o como elemento de un
bloque de datos global en la correspondiente CPU.
Dentro de un ciclo del programa se asigna la misma hora del sistema a todos los avisos de
supervisión de ProDiag que transmiten los bloques de función ProDiag con la opción "Utilizar
sello de tiempo central" activada.

Requisitos
El bloque de función ProDiag tiene la versión 2.0.
Nota
Bloque de función ProDiag con versión 1.0
A todos los avisos de supervisión ProDiag que se transmiten desde un bloque de función
ProDiag con versión 1.0 se les sigue asignando el sello de tiempo del bloque local.

Procedimiento
Para utilizar un sello de tiempo central, proceda del siguiente modo:
1. En las propiedades del bloque de función ProDiag, asegúrese de que el bloque tiene la
versión 2.0.
2. Abra en el árbol del proyecto el área "Sello de tiempo central" en "Datos comunes" >
"Configuración de supervisiones" > "General".
3. Defina una variable de sello de tiempo introduciendo un texto libre en el campo de texto.

Programación del PLC
Manual de programación y manejo, 11/2019

8683

Supervisión de máquinas e instalaciones con ProDiag
24.5 Utilizar un sello de tiempo central
4. En cada CPU en la que desee utilizar este sello de tiempo defina una variable global o un
elemento de un bloque de datos global con el texto libre que ha introducido en el campo de
texto del tipo de datos LDT.
5. Amplíe el código del programa (p. ej. en el Main[OB1]) en las CPU correspondientes con
una función de hora, p. ej. "RD_SYS_T", con el fin de copiar el sello de tiempo actual en la
variable de sello de tiempo global "TimeStampTag":

6. Si desea utilizar el sello de tiempo central en bloques de función ProDiag ya existentes,
active la opción "Utilizar sello de tiempo central" en las propiedades del correspondiente
bloque de función ProDiag:

Si los bloques de función ProDiag no se crean hasta después de haber definido la variable
de sello de tiempo central, esta opción se activa automáticamente.

Resultado
Dentro de un ciclo del programa, todos los avisos de supervisión de ProDiag cuyo bloque de
función ProDiag tenga activada la opción "Utilizar sello de tiempo central" reciben un sello de
tiempo unitario.

8684

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.5 Utilizar un sello de tiempo central

24.5.2

Varios avisos de supervisión de un FB ProDiag en un tiempo de ciclo

Descripción
Por cada tiempo de ciclo de una CPU puede emitirse solo un aviso de supervisión por cada
bloque de función ProDiag, aunque se hayan producido varios fallos al mismo tiempo. Todos
los avisos de supervisión de un bloque de función ProDiag emitidos al mismo tiempo obtienen
el mismo sello de tiempo, que contiene la hora del fallo que ha originado el aviso. Los restantes
avisos de supervisión ProDiag pueden ejecutarse por orden, es decir, uno por cada tiempo de
ciclo de la CPU. De este modo se evitan saltos en el tiempo de ciclo debidos a avalanchas de
avisos.
Las etiquetas de fecha/hora de los avisos de supervisión pueden verse, p. ej., en la columna
"Hora" de la vista de avisos.
En función de si se ha activado o no la opción "Utilizar sello de tiempo central" en el bloque de
función ProDiag se utiliza como sello de tiempo la hora actual del sistema o la hora del bloque
local.

Consulte también
Utilizar un sello de tiempo central (Página 8683)

Programación del PLC
Manual de programación y manejo, 11/2019

8685

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

24.6

Utilizar bloques de datos de instancia ProDiag

24.6.1

Estructura de un bloque de datos de instancia ProDiag de la versión 1.0

Estructura de un bloque de datos de instancia ProDiag de la versión 1.0
La figura siguiente muestra a modo de ejemplo los componentes de un bloque de datos de
instancia ProDiag:






8686

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

Nume‐
ración

Significado

Información adicional

1

La interfaz del bloque de datos de instancia
ProDiag

La interfaz de bloque no es editable.

2

La variable de estado "State" en la sección
"Static"

La variable de estado "State" del tipo de datos
PLC "SV_FB_State" contiene los bits de error
agrupado de todas las supervisiones asigna‐
das a ese bloque de datos de instancia Pro‐
Diag.
Existen dos tipos distintos de bits de error
agrupado:
● Bit de error agrupado para los tipos de
supervisiones (All, O, I, R, A, P, Merr y
Mtxt)
● Bit de error agrupado para las categorías
(C1, C2, C3, C4, C5, C6, C7 y C8)
Estos bits de error agrupado pueden visuali‐
zarse en el dispositivo HMI mediante el objeto
"Vista general de ProDiag" o programarse en
el código del programa como condición para
continuar la ejecución del código. Los bits de
error agrupado solo admiten acceso de lectu‐
ra en el código del programa. En cuanto se
activa un aviso de supervisión, se activan los
bits de error agrupado del bloque de datos de
instancia ProDiag asignado.

3

24.6.2

Variables de estado

Estas variables se muestran cuando se han
creado supervisiones y se han asignado a es‐
te bloque de datos de instancia ProDiag.

Contenido de un bloque de datos de instancia ProDiag de la versión 1.0

Interfaz del bloque
En cuanto se crea un bloque de función ProDiag nuevo, se crea un bloque de datos de
instancia ProDiag.
En la sección "Static" están disponibles los siguientes elementos:

Programación del PLC
Manual de programación y manejo, 11/2019

8687

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

State

8688

Nombre

Tipo de datos

Explicación

State

SV_FB_State

Tipo de datos PLC interno del sistema y con protec‐
ción de know-how

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre

Tipo de datos

Explicación

Total_Number

UINT

Número total de supervisiones a las que se ha asig‐
nado este bloque de función ProDiag.

All

BOOL

Bit de error agrupado para todos los tipos de supervi‐
siones incluidos, excepto el aviso de texto:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión.
● FALSE => no se ha disparado ninguna
supervisión.
Accesible desde HMI y visible en HMI.

O (Operand)

BOOL

Bit de error agrupado para todas las supervisiones de
operandos:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de operandos.
● FALSE => no se ha disparado ninguna supervisión
de operandos.

I (Interlock)

BOOL

Bit de error agrupado para todas las supervisiones de
enclavamientos:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de
enclavamientos.
● FALSE => no se ha disparado ninguna supervisión
de enclavamientos.

R (Reaction)

BOOL

Bit de error agrupado para todas las supervisiones de
reacciones:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de
reacciones.
● FALSE => no se ha disparado ninguna supervisión
de reacciones.

A (Action)

BOOL

Bit de error agrupado para todas las supervisiones de
acciones:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de acciones.
● FALSE => no se ha disparado ninguna supervisión
de acciones.

P (Position)

BOOL

Bit de error agrupado para todas las supervisiones de
posiciones:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de posiciones.
● FALSE => no se ha disparado ninguna supervisión
de posiciones.

Merr (Message
error)

BOOL

Bit de error agrupado para todos los mensajes de
error:
● TRUE => en el ciclo de programa actual se ha
disparado al menos un mensaje de error.

Programación del PLC
Manual de programación y manejo, 11/2019

8689

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre

Tipo de datos

Explicación
● FALSE => no se ha disparado ningún mensaje de
error.

Mtxt (Message
text)

BOOL

Bit de error agrupado para todos los textos de aviso:
● TRUE => en el ciclo de programa actual se ha
activado al menos un texto de aviso.
● FALSE => no se ha activado ningún texto de aviso.

SV_Types (Su‐
pervision types)

BYTE

Byte para todos los bits de error agrupado de los tipos
de supervisión
Cada bit tiene asignado un tipo de supervisión. Esto
permite utilizar este byte, p. ej, en el objeto "Vista ge‐
neral de ProDiag" en el dispositivo HMI, para crear una
vista que muestre antes que nada si se ha disparado
una supervisión de un tipo determinado.
● Bit 1 => operando
● Bit 2 => enclavamiento
● etc.
Accesible desde HMI y visible en HMI.

C1 (Category)

BOOL

Primera categoría (el ajuste predeterminado de la pri‐
mera categoría = error, y no puede cambiarse)
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C1.
● FALSE => No hay ningún error.

C2 (Category)

BOOL

Segunda categoría (el ajuste predeterminado de la
segunda categoría = advertencia. Este ajuste puede
modificarse en cualquier momento.)
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C2.
● FALSE => No hay ningún fallo.

C3 (Category)

BOOL

Tercera categoría (el ajuste predeterminado de la ter‐
cera categoría = información. Este ajuste puede mo‐
dificarse en cualquier momento.)
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C3.
● FALSE => No hay ningún fallo.

C4 (Category)

BOOL

Categoría cuarta
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C4.
● FALSE => No hay ningún fallo.

C5 (Category)

BOOL

Categoría quinta
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C5.

8690

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre

Tipo de datos

Explicación
● FALSE => No hay ningún fallo.

C6 (Category)

BOOL

Categoría sexta
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C6.
● FALSE => No hay ningún fallo.

C7 (Category)

BOOL

Categoría séptima
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C7.
● FALSE => No hay ningún fallo.

C8 (Category)

BOOL

Categoría octava
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C8.
● FALSE => No hay ningún fallo.

Categories

BYTE

Byte de error agrupado para todas las categorías
Cada bit tiene asignado una categoría. Esto permite
utilizar este byte, p. ej, en el objeto "Vista general de
ProDiag" en el dispositivo HMI, para crear una vista
que muestre antes que nada si se ha disparado una
supervisión de una categoría determinada.
● Bit 1 => categoría 1 (C1)
● Bit 2 => categoría 2 (C2)
● etc.
Accesible desde HMI y visible en HMI.

Sub_Cat_1 (Sub‐ DWORD
category 1)

Bits de error agrupado para la subcategoría 1 (bits 1 a
16)

Sub_Cat_2 (Sub‐ DWORD
category 2)

Bits de error agrupado para la subcategoría 2 (bits 1 a
16)

Reserved

Byte de reserva

BYTE

Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Programación del PLC
Manual de programación y manejo, 11/2019

8691

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

Variable de estado opcional en cuanto se crea una supervisión
En cuanto se crea una supervisión, en la interfaz del bloque se muestra también esta sección:
Nombre

Tipo de datos

Explicación

p. ej., Conv_Push_Button_For‐
ward_O_1

SV_State

Tipo de datos PLC interno del sistema y con
protección de know-how

BOOL

Error que también se muestra en las propie‐
dades de la supervisión. Indica si se ha acti‐
vado un aviso de supervisión.

● Conv_Push_Button_Forward =
Nombre del operando
supervisado
● O = Tipo de supervisión
"Operando"
● 1 = Número de supervisiones
del tipo "Operando"
Err (Error)

● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
Accesible desde HMI y visible en HMI
Err_Neg_Flag (Error_Nega‐
tiv_Flag)

BOOL

Para la evaluación de flancos descendentes
de la marca de error

T_D_E_Going (Time_Da‐
te_Error_Going)

LDT

Hora y día del ciclo del programa en el que
desaparece el fallo.

E_Flag (Error_Flag)

BOOL

Marca de error: Solo se envía un aviso de
supervisión por bloque de función ProDiag y
por ciclo de programa.

E_Pos_Flag (Error_Positi‐
ve_Flag)

BOOL

Para la evaluación de flancos ascendentes
de la marca de error

T_D_E_Coming (Time_Da‐
te_Error_Coming)

LDT

Hora y día del ciclo del programa en el que
apareció el fallo.

S_Coming (Signal_Coming)

BOOL

Marcas
● TRUE = el aviso de supervisión se ha
enviado sin errores
● FALSE = Hay un fallo.

8692

Pos_Flag (Positive_Flag)

BOOL

Esta marca solo se necesita para el tipo de
supervisión "Posición".

Ti (Timer)

TON_TIME

Este tiempo se necesita para calcular el re‐
tardo.

PT (Preset Time)

TIME

Valor de tiempo predeterminado

ET (Elapsed Time)

TIME

Valor de tiempo actual

IN (Input)

TIME

Entrada de arranque

Q (Output)

TIME

Salida que se activa una vez transcurrido el
tiempo PT

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

24.6.3

Estructura de un bloque de datos de instancia ProDiag de la versión 2.0

Estructura de un bloque de datos de instancia ProDiag de la versión 2.0
La figura siguiente muestra a modo de ejemplo los componentes de un bloque de datos de
instancia ProDiag:








Nume‐
ración

Significado

Información adicional

1

La interfaz del bloque de datos de instancia
ProDiag

La interfaz de bloque no es editable.

2

La variable de estado "PC_Flags"

La variable de estado "PC_Flags" del tipo de
datos PLC "PC_Flags_V2" contiene la versión
del bloque de función ProDiag (parámetro Ver‐
sion) y el parámetro CRIT_ON, que indica si
está activada la adquisición de primeros valo‐
res.

Programación del PLC
Manual de programación y manejo, 11/2019

8693

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nume‐
ración

Significado

Información adicional

3

La variable de estado "State"

La variable de estado "State" del tipo de datos
PLC "SV_FB_State_V2" contiene los bits de
error agrupado de todas las supervisiones
asignadas a ese bloque de datos de instancia
ProDiag.
Existen dos tipos distintos de bits de error
agrupado:
● Bit de error agrupado para los tipos de
supervisiones (All, O, I, R, A, P, Merr y
Mtxt)
● Bit de error agrupado para las categorías
(C1, C2, C3, C4, C5, C6, C7 y C8)
Estos bits de error agrupado pueden visuali‐
zarse en el dispositivo HMI mediante el objeto
"Vista general de ProDiag" o programarse en
el código del programa como condición para
continuar la ejecución del código. Los bits de
error agrupado admiten acceso de lectura y
escritura en el código del programa. En cuanto
se activa un aviso de supervisión, se activan
los bits de error agrupado del bloque de datos
de instancia ProDiag asignado.

4

5

Variables de estado

Los parámetros Crit_Avail y Crit_Err

Estas variables del tipo de datos PLC "SV_Sta‐
te_V2" se muestran cuando se crean supervi‐
siones y se asignan a este bloque de datos de
instancia ProDiag.
● Crit_Avail:
Estado lógico = TRUE: Se han registrado
los primeros valores.
● Crit_Err:
Almacenamiento de los 32 estados lógicos
por segmento de un bloque KOP o FUP.

24.6.4

Contenido de un bloque de datos de instancia ProDiag de la versión 2.0

Interfaz del bloque
En cuanto se crea un bloque de función ProDiag nuevo, se crea un bloque de datos de
instancia ProDiag.
En la sección "Static" están disponibles los siguientes elementos:

8694

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

State
Nombre

Tipo de datos

Explicación

PC_Flags

PC_Flags_V2

Tipo de datos PLC interno del sistema y con protec‐
ción de know-how

Version

String[10]

Versión del bloque de función ProDiag

Crit_On

BOOL

Indica si está activada la adquisición de primeros va‐
lores.

SV_FB_State_V2

Tipo de datos PLC interno del sistema y con protec‐
ción de know-how

State

Programación del PLC
Manual de programación y manejo, 11/2019

8695

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre

Tipo de datos

Explicación

Total_Number

UINT

Número total de supervisiones a las que se ha asig‐
nado este bloque de función ProDiag.

All

BOOL

Bit de error agrupado para todos los tipos de supervi‐
siones incluidos, excepto el aviso de texto:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión.
● FALSE => no se ha disparado ninguna
supervisión.
Accesible desde HMI y visible en HMI.

O (Operand)

BOOL

Bit de error agrupado para todas las supervisiones de
operandos:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de operandos.
● FALSE => no se ha disparado ninguna supervisión
de operandos.

I (Interlock)

BOOL

Bit de error agrupado para todas las supervisiones de
enclavamientos:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de
enclavamientos.
● FALSE => no se ha disparado ninguna supervisión
de enclavamientos.

R (Reaction)

BOOL

Bit de error agrupado para todas las supervisiones de
reacciones:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de
reacciones.
● FALSE => no se ha disparado ninguna supervisión
de reacciones.

A (Action)

BOOL

Bit de error agrupado para todas las supervisiones de
acciones:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de acciones.
● FALSE => no se ha disparado ninguna supervisión
de acciones.

P (Position)

BOOL

Bit de error agrupado para todas las supervisiones de
posiciones:
● TRUE => en el ciclo de programa actual se ha
disparado al menos una supervisión de posiciones.
● FALSE => no se ha disparado ninguna supervisión
de posiciones.

Merr (Message
error)

BOOL

Bit de error agrupado para todos los mensajes de
error:
● TRUE => en el ciclo de programa actual se ha
disparado al menos un mensaje de error.

8696

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre

Tipo de datos

Explicación
● FALSE => no se ha disparado ningún mensaje de
error.

Mtxt (Message
text)

BOOL

Bit de error agrupado para todos los textos de aviso:
● TRUE => en el ciclo de programa actual se ha
activado al menos un texto de aviso.
● FALSE => no se ha activado ningún texto de aviso.

SV_Types (Su‐
pervision types)

BYTE

Byte para todos los bits de error agrupado de los tipos
de supervisión
Cada bit tiene asignado un tipo de supervisión. Esto
permite utilizar este byte, p. ej, en el objeto "Vista ge‐
neral de ProDiag" en el dispositivo HMI, para crear una
vista que muestre antes que nada si se ha disparado
una supervisión de un tipo determinado.
● Bit 1 => operando
● Bit 2 => enclavamiento
● etc.
Accesible desde HMI y visible en HMI.

C1 (Category)

BOOL

Primera categoría (el ajuste predeterminado de la pri‐
mera categoría = error, y no puede cambiarse)
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C1.
● FALSE => No hay ningún error.

C2 (Category)

BOOL

Segunda categoría (el ajuste predeterminado de la
segunda categoría = advertencia. Este ajuste puede
modificarse en cualquier momento.)
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C2.
● FALSE => No hay ningún fallo.

C3 (Category)

BOOL

Tercera categoría (el ajuste predeterminado de la ter‐
cera categoría = información. Este ajuste puede mo‐
dificarse en cualquier momento.)
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C3.
● FALSE => No hay ningún fallo.

C4 (Category)

BOOL

Categoría cuarta
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C4.
● FALSE => No hay ningún fallo.

C5 (Category)

BOOL

Categoría quinta
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C5.

Programación del PLC
Manual de programación y manejo, 11/2019

8697

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre

Tipo de datos

Explicación
● FALSE => No hay ningún fallo.

C6 (Category)

BOOL

Categoría sexta
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C6.
● FALSE => No hay ningún fallo.

C7 (Category)

BOOL

Categoría séptima
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C7.
● FALSE => No hay ningún fallo.

C8 (Category)

BOOL

Categoría octava
● TRUE => en el ciclo de programa actual se ha
disparado al menos un aviso de supervisión de la
categoría C8.
● FALSE => No hay ningún fallo.

Categories

BYTE

Byte de error agrupado para todas las categorías
Cada bit tiene asignado una categoría. Esto permite
utilizar este byte, p. ej, en el objeto "Vista general de
ProDiag" en el dispositivo HMI, para crear una vista
que muestre antes que nada si se ha disparado una
supervisión de una categoría determinada.
● Bit 1 => categoría 1 (C1)
● Bit 2 => categoría 2 (C2)
● etc.
Accesible desde HMI y visible en HMI.

Sub_Cat_1 (Sub‐ DWORD
category 1)

Bits de error agrupado para la subcategoría 1 (bits 1 a
16)

Sub_Cat_2 (Sub‐ DWORD
category 2)

Bits de error agrupado para la subcategoría 2 (bits 1 a
16)

Reserved

Byte de reserva

BYTE

Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

8698

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag

Variable de estado opcional en cuanto se crea una supervisión
En cuanto se crea una supervisión, en la interfaz del bloque se muestra también esta sección:
Nombre

Tipo de datos

Explicación

p. ej., Conv_Push_Button_For‐
ward_O_1

SV_State_V2

Tipo de datos PLC interno del sistema y con
protección de know-how

● Conv_Push_Button_Forward =
Nombre del operando
supervisado
● O = Tipo de supervisión
"Operando"
● 1 = Número de supervisiones
del tipo "Operando"

Programación del PLC
Manual de programación y manejo, 11/2019

8699

Supervisión de máquinas e instalaciones con ProDiag
24.6 Utilizar bloques de datos de instancia ProDiag
Nombre
Err (Error)

Tipo de datos

Explicación

BOOL

Error que también se muestra en las propie‐
dades de la supervisión. Indica si se ha acti‐
vado un aviso de supervisión.
● TRUE = se ha disparado un aviso de
supervisión
● FALSE = no hay aviso de supervisión, es
decir, el fallo no se ha producido
Accesible desde HMI y visible en HMI

Err_Neg_Flag (Error_Nega‐
tiv_Flag)

BOOL

Para la evaluación de flancos descendentes
de la marca de error

T_D_E_Going (Time_Da‐
te_Error_Going)

LDT

Hora y día del ciclo del programa en el que
desaparece el fallo.

E_Flag (Error_Flag)

BOOL

Marca de error: Solo se envía un aviso de
supervisión por bloque de función ProDiag y
por ciclo de programa.

E_Pos_Flag (Error_Positi‐
ve_Flag)

BOOL

Para la evaluación de flancos ascendentes
de la marca de error

T_D_E_Coming (Time_Da‐
te_Error_Coming)

LDT

Hora y día del ciclo del programa en el que
apareció el fallo.

S_Coming (Signal_Coming)

BOOL

Marcas
● TRUE = el aviso de supervisión se ha
enviado sin errores
● FALSE = Hay un fallo.

8700

Pos_Flag (Positive_Flag)

BOOL

Esta marca solo se necesita para el tipo de
supervisión "Posición".

Ti (Timer)

TON_TIME

Este tiempo se necesita para calcular el re‐
tardo.

PT (Preset Time)

TIME

Valor de tiempo predeterminado

ET (Elapsed Time)

TIME

Valor de tiempo actual

IN (Input)

TIME

Entrada de arranque

Q (Output)

TIME

Salida que se activa una vez transcurrido el
tiempo PT

Crit_Avail

BOOL

Estado lógico = TRUE: Se han registrado los
primeros valores.

Crit_Err

DWORD

Almacenamiento de los 32 estados lógicos
por segmento de un bloque KOP o FUP.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag

24.7

Definir las propiedades de un bloque de función ProDiag

24.7.1

Estructura de los ajustes de supervisión en el FB ProDiag

Estructura de los ajustes de supervisión
La figura siguiente muestra los componentes de los ajustes de supervisión:











Numera‐
ción

Significado

Información adicional

1

Criterio de habilitación global de un bloque de
función ProDiag

El criterio de habilitación global permi‐
te controlar la llamada de un bloque de
función ProDiag en el bloque de orga‐
nización ProDiag.
Encontrará más información aquí: Uti‐
lizar el criterio de habilitación global
(Página 8704)

2

La columna "Uso en el FB ProDiag" no puede
editarse.

Programación del PLC
Manual de programación y manejo, 11/2019

Si una supervisión de esta categoría
se ha asignado al bloque de función
ProDiag, la categoría está activada.

8701

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag
Numera‐
ción

Significado

Información adicional

3

Criterio de habilitación de la categoría

El criterio de habilitación de la catego‐
ría permite definir un criterio de habili‐
tación (variable global booleana) para
un bloque de función ProDiag y para
cada categoría incluida en él, de for‐
ma que se activen o desactiven las
supervisiones de dicha categoría.
Encontrará más información aquí: Uti‐
lizar el criterio de habilitación de la ca‐
tegoría (Página 8704)

4

Variable de confirmación

La variable de confirmación permite
confirmar el aviso de supervisión de
una categoría dentro del proyecto de
STEP 7. De este modo se garantiza
que el aviso de supervisión no se vuel‐
va a emitir hasta que se haya solucio‐
nado el fallo. La ejecución del progra‐
ma puede controlarse con la marca de
error correspondiente.
Encontrará más información aquí: Uti‐
lizar una variable de confirmación (Pá‐
gina 8706)

5

Discriminador

El discriminador permite definir las su‐
pervisiones que deben visualizarse en
un dispositivo HMI.
Encontrará más información
aquí: Configurar el discriminador (Pá‐
gina 8707)

24.7.2

Crear criterios de habilitación para avisos de supervisión

24.7.2.1

Sinopsis de los criterios de habilitación

Descripción
Existe la posibilidad de crear criterios de habilitación (variables booleanas) en los ajustes de un
bloque de función ProDiag. Hay disponibles dos tipos distintos de criterios de habilitación:
● Criterio de habilitación global
● Criterio de habilitación de la categoría

8702

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag

Criterio de habilitación global
El criterio de habilitación global permite controlar la llamada de los bloques de función ProDiag
en el bloque de organización ProDiag. El OB ProDiag se crea automáticamente en cuanto se
compila el proyecto. Así, p. ej., es posible desconectar todas las supervisiones de un bloque
de función ProDiag definiendo un criterio de habilitación global, que el sistema utiliza
automáticamente como condición de llamada, en cuanto en el bloque de organización ProDiag
se llama al bloque de función ProDiag. Si la condición de llamada no se cumple (estado lógico
= false), el bloque de función ProDiag no se llamará y no se emitirán avisos de supervisión. El
criterio global de habilitación debe ser una variable global booleana.
Sin embargo, si no se llama el bloque de función ProDiag en el OB ProDiag, sino en otro bloque
del programa, si se desea utilizar el criterio de habilitación global es necesario integrarlo en el
código del programa.
El criterio global de habilitación ofrece las siguientes ventajas:
● Permite controlar el bloque de función ProDiag en el que debe procesarse el ciclo del
programa. Los bloques de función ProDiag no procesados no emiten avisos de supervisión
aunque se produzcan fallos.
● Si se asigna la misma variable a todos los bloques de función ProDiag como criterio de
habilitación, es muy fácil programar que no se activen supervisiones no deseadas durante
la puesta en marcha, por ejemplo.
● Con tiempos de ciclo muy críticos pueden conseguirse mejoras en el rendimiento
asignando diferentes variables globales booleanas a los bloques de función ProDiag como
criterios de habilitación, de forma que los bloques se llamen selectivamente en el código del
programa.
● Si ya se ha activado un aviso de supervisión, se mantendrá hasta que se vuelva a llamar el
bloque de función ProDiag correspondiente. En cuanto se procesa de nuevo el bloque de
función ProDiag, se emite el aviso de supervisión.

Criterio de habilitación de la categoría
El criterio de habilitación de la categoría permite definir un criterio de habilitación (variable
global booleana) para cada bloque de función ProDiag y para cada categoría incluida en él, de
forma que se activen o desactiven las supervisiones de dicha categoría. Así, p. ej., es posible
influenciar todas las supervisiones de la categoría "Error" de un bloque de función ProDiag. Si
se utiliza el criterio de habilitación de la categoría como condición de llamada dentro del código
del programa y la condición de llamada no se cumple en el tiempo de ejecución (estado lógico
= false), no se ejecutará ninguna de las supervisiones de esta categoría. Esto significa que los
bits de error agrupado en la interfaz del bloque de función ProDiag no cambian y no se emiten
avisos de supervisión.
El criterio de habilitación de la categoría ofrece las siguientes ventajas:
● Permite desactivar selectivamente los avisos de supervisión de una sola categoría dentro
de un bloque de función ProDiag.
● Si ya se ha activado un aviso de supervisión, se recuperará como "desaparecido". Mientras
la variable global booleana tenga el estado lógico = False, no se emitirán avisos de
supervisión innecesarios, p. ej., mientras se realizan trabajos de mantenimiento.

Programación del PLC
Manual de programación y manejo, 11/2019

8703

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag

Consulte también
Utilizar el criterio de habilitación global (Página 8704)
Utilizar el criterio de habilitación de la categoría (Página 8704)

24.7.2.2

Utilizar el criterio de habilitación global

Requisitos
Se ha creado un bloque de función ProDiag y una supervisión.

Procedimiento
Para utilizar un criterio de habilitación global, haga lo siguiente:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón y seleccione
"Propiedades..." en el menú contextual.
Se abrirá el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. Seleccione en la ficha "General" la entrada "Configuración de supervisiones".
3. Introduzca una variable global booleana como criterio global de habilitación.
Para que el criterio global de habilitación pueda influir sobre el procesamiento del código del
programa, el bloque de función ProDiag no debe llamarse en un bloque de programa
definido por el usuario. De este modo el bloque de función ProDiag se llama
automáticamente en el bloque de organización ProDiag.

Resultado
Solo se emitirán los avisos de supervisión de los bloques de función ProDiag cuyo criterio de
habilitación global tenga el estado lógico "1".

24.7.2.3

Utilizar el criterio de habilitación de la categoría

Requisitos
Se ha creado un bloque de función ProDiag y una supervisión.

8704

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag

Procedimiento
Para utilizar un criterio de habilitación para una categoría, haga lo siguiente:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón y seleccione
"Propiedades..." en el menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. Seleccione en la ficha "General" la entrada "Configuración de supervisiones".
3. Utilice un criterio de habilitación en el área "Categorías" para las distintas categorías.
Para que el criterio de habilitación pueda influir adicionalmente sobre el procesamiento del
código del programa, debe utilizarlo como condición de avance en el código del programa.

Resultado
Solo se emitirán los avisos de supervisión de las categorías del bloque de función ProDiag que
tengan como criterio de habilitación el estado lógico "1".

24.7.3

Definir una variable de confirmación para categorías individuales

24.7.3.1

Visión de conjunto de las variables de confirmación

Descripción
Existe la posibilidad de utilizar una variable global booleana como variable de confirmación en
cada bloque de función ProDiag para cada categoría individual.
La variable de confirmación hace que la marca de error y los bits de error agrupado mantengan
el estado lógico TRUE y que no desaparezca el aviso de supervisión. Para que, p. ej. la cinta
transportadora se detenga inmediatamente, es necesario utilizar esos bits de error
explícitamente en el código de programa. Esto ofrece la posibilidad, p. ej., de que la cinta
transportadora no vuelva a arrancar hasta que el operador de la máquina no haya confirmado
explícitamente el error de supervisión, aunque ya se haya eliminado la causa de fallo, p. ej.,
una barrera fotoeléctrica rota. También es posible confirmar el aviso de supervisión desde un
dispositivo HMI, aunque en tal caso no se puede influir en la ejecución del código del programa.
Puede utilizarse una variable de confirmación propia para cada una de las 8 categorías e
incorporarla en el código del programa como condición de avance para el resto de la ejecución
del programa.
Una vez eliminado el fallo, los bits de error permanecen en el bloque de función ProDiag hasta
que el estado lógico de la variable de confirmación pasa de "0" a "1". La ejecución del código
del programa no puede continuar hasta que no se confirma la variable de confirmación, es
decir, hasta que el estado lógico cambia de "0" a "1":
● La marca de error se pone de nuevo al estado lógico "0".
● Los bits de error agrupado para HMI también se ponen a "0".
● El aviso de supervisión desaparece del dispositivo HMI.

Programación del PLC
Manual de programación y manejo, 11/2019

8705

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag

24.7.3.2

Utilizar una variable de confirmación

Requisitos
Se ha creado un bloque de función ProDiag y una supervisión.

Procedimiento
Para utilizar una variable de confirmación, proceda del siguiente modo:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón y seleccione
"Propiedades..." en el menú contextual.
Se abrirá el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. Seleccione en la ficha "General" la entrada "Configuración de supervisiones".
3. En el área "Categorías", utilice variables de confirmación para las distintas categorías.
Para que las variables de confirmación puedan influir sobre el procesamiento del código del
programa, deberá utilizar la marca de error como condición de avance en el código del
programa.

Resultado
Se ha producido un fallo y se ha disparado el aviso de supervisión. El código del programa no
seguirá ejecutándose hasta que no se haya eliminado el fallo y se haya confirmado la variable
de confirmación.

24.7.4

Configurar discriminadores

24.7.4.1

Sinopsis de los discriminadores

Descripción
Existe la posibilidad de definir un discriminador en cada bloque de función ProDiag para cada
categoría individual.
Los discriminadores permiten definir las supervisiones que deben visualizarse en un
dispositivo HMI. Esto es útil sobre todo cuando hay varios dispositivos HMI conectados a una
CPU. Para que las supervisiones se visualicen correctamente, hay que activar en cada
dispositivo HMI los discriminadores que deben mostrarse.
Se permiten como máximo 17 discriminadores.

8706

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.7 Definir las propiedades de un bloque de función ProDiag

24.7.4.2

Configurar el discriminador

Requisitos
Se ha creado un bloque de función ProDiag y una supervisión.

Procedimiento
Para ajustar un discriminador, haga lo siguiente:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón y seleccione
"Propiedades..." en el menú contextual.
Se abrirá el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. Seleccione en la ficha "General" la entrada "Configuración de supervisiones".
3. Ajuste los discriminadores en el área "Categorías" para las distintas categorías.

Resultado
Si, p. ej., se ha asignado el discriminador "1" a la categoría "Error" y se activa este
discriminador en un dispositivo HMI, en dicho dispositivo se mostrarán solo los avisos de
supervisiones asignados a la categoría "Error".

24.7.5

Mostrar el número de supervisiones de un FB ProDiag

Descripción
Existe la posibilidad de consultar cuántas supervisiones ProDiag están asignadas a este FB
ProDiag en las propiedades de un bloque de función ProDiag.

Procedimiento
Para consultar el número de supervisiones ProDiag asignadas, proceda del siguiente modo:
1. Abra las propiedades del bloque de función ProDiag haciendo clic con el botón derecho del
ratón en el FB ProDiag y seleccionando "Propiedades..." en el menú contextual, o bien
haciendo doble clic en el FB ProDiag.
Se abre el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. Haga clic en la ficha "Información".

Resultado
Se indica el número real de supervisiones ProDiag existentes de todas las posibles.

Programación del PLC
Manual de programación y manejo, 11/2019

8707

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

24.8

Definir la configuración de supervisiones de ProDiag

24.8.1

Sinopsis de la configuración de supervisiones de ProDiag

Descripción
Para poder editar la configuración de supervisiones de ProDiag, primero debe haberse creado
un bloque de función GRAPH o una supervisión en el programa.
En la configuración de supervisiones de ProDiag se definen los ajustes que regirán para todas
las supervisiones en todo el proyecto del TIA Portal. Es posible agregar y modificar ajustes.
Encontrará la configuración de supervisiones de ProDiag en "Datos comunes" del árbol del
proyecto.

Consulte también
Definir los ajustes generales de supervisión de ProDiag (Página 8709)
Definir textos de aviso ProDiag centralizados (Página 8719)

8708

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

24.8.2

Definir los ajustes generales de supervisión de ProDiag

24.8.2.1

Estructura de los ajustes de supervisión ProDiag

Estructura de los ajustes de supervisión ProDiag
La figura siguiente muestra a modo de ejemplo los componentes de los ajustes de supervisión
ProDiag:





Numera‐
ción

Significado

Información adicional

1

Pueden definirse 8 categorías.

Las categorías permiten repartir los fa‐
llos que se producen en diferentes ni‐
veles de urgencia, como p. ej. error, ad‐
vertencia, etc.
Encontrará más información sobre las
categorías aquí: Categorías (Pági‐
na 8710)

2

Pueden definirse 32 subcategorías.

Las subcategorías permiten especificar
todavía con más precisión la informa‐
ción de un aviso de supervisión.
Encontrará más información sobre las
subcategorías aquí: Subcategorías
(Página 8713)

Programación del PLC
Manual de programación y manejo, 11/2019

8709

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
Numera‐
ción

Significado

Información adicional

3

Hay 10 tipos de supervisiones:

Para cada tipo de supervisión se puede
utilizar el nombre predeterminado o de‐
finirse uno propio.
Encontrará más información sobre los
tipos de supervisiones aquí: Tipos de
supervisiones (Página 8716)

4

Un sello de tiempo central para todos los blo‐
ques de función ProDiag del proyecto.

La variable de sello de tiempo se espe‐
cifica de forma centralizada para todo el
proyecto en la configuración de super‐
visiones y puede utilizarse en todas las
CPU disponibles en el proyecto.
Encontrará más información sobre el
sello de tiempo central aquí: Utilizar un
sello de tiempo central (Página 8683)

24.8.2.2

Categorías

Sinopsis de las categorías
Descripción
Las categorías permiten repartir los fallos que se producen en diferentes niveles de urgencia.
A cada categoría se le puede asignar una categoría de aviso.
Las categorías pueden emitirse como parte de un aviso de supervisión o bien pueden
visualizarse en un dispositivo HMI como bit de error agrupado en el objeto "Vista general de
ProDiag".
La figura siguiente muestra la sección "Categorías" en la configuración de supervisiones de
ProDiag con los valores predeterminados:

8710

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Categoría de aviso
Si a las categorías se les asignan diferentes categorías de aviso, en el visor de avisos del
dispositivo HMI es posible crear diferentes áreas en función de las categorías de aviso
definidas.
Si adicionalmente se asignan diferentes prioridades a las categorías de aviso, el orden de los
avisos de supervisión se puede controlar en el objeto "Visor de avisos". Para cada categoría
de aviso es posible definir si el aviso de supervisión debe emitirse con o sin confirmación
obligatoria.

Consulte también
Crear categorías (Página 8352)

Definir categorías
Los ajustes ("Categoría", "Activación" o "Categoría de aviso") de una categoría pueden
modificarse en todo momento, aunque dicha categoría ya esté asignada a una supervisión.
Los cambios se aplican automáticamente a la supervisión.

Requisitos
En el árbol del proyecto se ha abierto la carpeta "Datos comunes".

Procedimiento
Para crear una categoría, proceda del siguiente modo:
1. Haga doble clic en la entrada "Configuración de supervisiones" del árbol del proyecto.
Se abren los ajustes de supervisión de ProDiag.
2. Seleccione la sección "Categorías" en la ficha "General".
En el ajuste predeterminado hay tres categorías: "Error", "Advertencia" e "Información".
Adicionalmente hay otras cinco categorías comodín. Los nombres de las categorías
pueden modificarse y traducirse. Encontrará más información sobre la traducción de los
nombres aquí: Mostrar las traducciones de los nombres de las categorías (Página 8712)

Programación del PLC
Manual de programación y manejo, 11/2019

8711

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
3. Active o desactive la categoría en la columna "Activación".
Nota
Categoría "Error"
La categoría generada por el sistema "Error" no puede desactivarse. Siempre está activada.
4. En el ajuste predeterminado, en la columna "Categoría de aviso" está ajustada la categoría
de aviso propia del sistema "No acknowledgment". Además de la categoría de aviso propia
del sistema "No acknowledgment" (= de acuse no obligatorio), también están disponibles la
categoría de aviso "Acknowledgment" (= de acuse obligatorio) o bien otras definidas por el
usuario. En caso necesario, adapte el ajuste predeterminado.
Nota
Categoría de aviso "Acknowledgment"
Si se selecciona la categoría de aviso "Acknowledgment", en el dispositivo HMI aparece un
aviso de supervisión de acuse obligatorio. El acuse no afecta el curso del programa. Si
desea influir en el curso del programa después de que se produzca un fallo, deberá utilizar
el acuse en una categoría con ayuda de la variable de acuse. Este acuse puede ajustarse
en las propiedades de bloque del bloque de función ProDiag.
Las columnas "Confirmación" y "Prioridad" no pueden editarse, pues estos ajustes de la
categoría de aviso solo pueden modificarse en el editor de categorías de avisos. Encontrará
más información sobre la creación de categorías de avisos aquí: Crear categorías
(Página 8352)
5. Guarde el proyecto.

Mostrar las traducciones de los nombres de las categorías
Es posible visualizar los nombres de todas las categorías en todos los idiomas del proyecto
que se han activado en la configuración de los idiomas del proyecto y cuyas traducciones ya
estén disponibles. Encontrará más información sobre la activación de idiomas del proyecto en
AUTOHOTSPOT.

Requisitos
En el árbol del proyecto se ha abierto la carpeta "Datos comunes".

Procedimiento
Para visualizar el nombre de una categoría en todos los idiomas del proyecto, proceda del
siguiente modo:
1. Haga doble clic en la entrada "Configuración de supervisiones" del árbol del proyecto.
Se abre la configuración de supervisiones de ProDiag.
2. Seleccione la sección "Categorías" en la ficha "General".

8712

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
3. Marque la fila con la categoría cuyas traducciones desee visualizar.
Si desea visualizar al mismo tiempo las traducciones de varias categorías, debe marcar las
filas correspondientes.
4. Abra la ficha "Propiedades" de la ventana de inspección.
Si los nombres de las categorías solo se muestran en el idioma actual de la interfaz de
usuario, significa que no se han seleccionado idiomas del proyecto o que todavía no existen
traducciones. Las traducciones se introducen directamente en la ficha "Textos" de la tabla,
aunque las traducciones en los distintos idiomas del proyecto se pueden introducir también
en la tabla global "Textos del proyecto". La tabla se encuentra en "Idiomas y recursos >
Textos del proyecto" del árbol del proyecto.
Encontrará más información sobre la traducción de textos en AUTOHOTSPOT.

Resultado
En la ficha subordinada "Textos" se muestran las filas marcadas en los idiomas del proyecto
deseados y, siempre que estén disponibles, las traducciones de los nombres de las categorías.

24.8.2.3

Subcategorías

Sinopsis de las subcategorías
Descripción
Además de las 16 subcategorías de la "Subcategoría 1" es posible activar también 16
subcategorías de la "Subcategoría 2". Las categorías y subcategorías son independientes
entre sí y pueden combinarse libremente dentro de una supervisión.
Las subcategorías ofrecen la posibilidad de especificar todavía con más precisión la
información de un aviso de supervisión. Si, p. ej, ya se han creado las categorías "Error",
"Advertencia" e "Información", es posible ampliarlas con las subcategorías "técnico" u
"organizativo". De este modo se obtiene información más detallada sobre el fallo que se ha
producido.
Las subcategorías pueden emitirse como parte de un aviso de supervisión o bien pueden
visualizarse en un dispositivo HMI como bit de error agrupado en el objeto "Vista general de
ProDiag".
La figura siguiente muestra la sección "Subcategorías 1" en la configuración de supervisiones
de ProDiag:
Programación del PLC
Manual de programación y manejo, 11/2019

8713

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Nota
Más información sobre el objeto HMI "Vista general de ProDiag"
Encontrará más información en el sistema de información del TIA Portal aquí: "Visualizar
procesos > Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag
> Visualizar supervisiones > Configurar vista general de ProDiag"

Definir subcategorías
Los ajustes ("Subcategoría x", "Activación" o "Descripción") de una subcategoría pueden
modificarse en todo momento, aunque dicha subcategoría ya esté asignada a una supervisión.
Los cambios se aplican automáticamente a la supervisión.

Requisitos
En el árbol del proyecto se ha abierto la carpeta "Datos comunes".

Procedimiento
Para activar una subcategoría, proceda del siguiente modo:
1. Haga doble clic en la entrada "Configuración de supervisiones" del árbol del proyecto.
Se abren los ajustes de supervisión de ProDiag.
2. Seleccione la sección "Subcategorías 1" o "Subcategorías 2" en la ficha "General".
3. Introduzca el nombre deseado para la subcategoría.
Los nombres de las subcategorías pueden traducirse. Encontrará más información sobre
la traducción de los nombres aquí: Mostrar y editar las traducciones de los nombres de las
subcategorías y los textos descriptivos (Página 8715)
4. Active o desactive las subcategorías deseadas en la columna "Activación".
5. En su caso, introduzca un texto en la columna "Descripción".
Con la columna "Descripción" se transmite información al programador que ha creado el
proyecto de STEP 7. Dicha información solo está disponible dentro del TIA Portal y no se
transmite a Runtime Professional.
Además de los nombres de las subcategorías, también se muestran los textos descriptivos
en la ficha subordinada "Textos" de la ventana de inspección "Propiedades".
6. Guarde el proyecto.

8714

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Resultado
Se crea una nueva subcategoría 1, que puede vincularse a una categoría al crear una
supervisión.

Mostrar y editar las traducciones de los nombres de las subcategorías y los textos descriptivos
Es posible visualizar los nombres de todas las categorías en todos los idiomas del proyecto
que se han activado en la configuración de los idiomas del proyecto y cuyas traducciones ya
estén disponibles. Encontrará más información sobre la activación de idiomas del proyecto en
AUTOHOTSPOT.

Requisitos
En el árbol del proyecto se ha abierto la carpeta "Datos comunes".

Procedimiento
Para visualizar el nombre de una subcategoría en todos los idiomas del proyecto, proceda del
siguiente modo:
1. Haga doble clic en la entrada "Configuración de supervisiones" del árbol del proyecto.
Se abre la configuración de supervisiones de ProDiag.
2. Seleccione la sección "Subcategorías x" en la ficha "General".
3. Marque la fila con la subcategoría cuyas traducciones desee visualizar.
Si desea visualizar al mismo tiempo las traducciones de varias subcategorías, debe marcar
las filas correspondientes.
4. Abra la ficha "Propiedades" de la ventana de inspección.
Si los nombres de las subcategorías solo se muestran en el idioma actual de la interfaz de
usuario, significa que no se han seleccionado idiomas del proyecto o que todavía no existen
traducciones. Las traducciones se introducen directamente en la ficha "Textos" de la tabla,
aunque las traducciones en los distintos idiomas del proyecto se pueden introducir también
en la tabla global "Textos del proyecto". La tabla se encuentra en "Idiomas y recursos >
Textos del proyecto" del árbol del proyecto.
Encontrará más información sobre la traducción de textos en AUTOHOTSPOT.

Programación del PLC
Manual de programación y manejo, 11/2019

8715

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Resultado
En la ficha subordinada "Textos" se muestran las filas marcadas en los idiomas del proyecto
deseados y, siempre que estén disponibles, las traducciones de los nombres de las
subcategorías y sus textos descriptivos.

24.8.2.4

Tipos de supervisiones

Sinopsis de los tipos de supervisiones
Descripción
Existen diez tipos de supervisiones con nombre predeterminado. Los nombres están
protegidos contra escritura y el sistema ofrece las traducciones en los idiomas de interfaz de
usuario seleccionados. Para cada tipo de supervisión puede definirse además un nombre de
visualización propio en el texto de aviso, y traducir dicho nombre a todos los idiomas de la
interfaz de usuario. Para cada tipo de supervisión dentro del proyecto es posible definir ajustes
predeterminados que especifican el estado lógico que debe vigilarse de un operando o una
condición. Los ajustes predeterminados son válidos en cada caso para supervisiones nuevas
o cuando se modifica el tipo de supervisión. Adicionalmente es posible especificar también un
retardo para cada tipo de supervisión.
La figura siguiente muestra la sección "Tipos de supervisiones" en la configuración de
supervisiones de ProDiag con los valores predeterminados:

8716

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Activación
Al crear un bloque de función GRAPH o una supervisión, aparte de los ajustes GRAPH, el
sistema activa automáticamente todas las opciones según el ajuste predeterminado. Los
ajustes predeterminados para los disparadores y para el retardo pueden modificarse en todo
momento activando o desactivando las columnas correspondientes. Si se pone la marca de
verificación, se vigila que el estado del operando tenga el estado lógico TRUE. Si se quita la
marca de verificación, se vigila que el estado del operando tenga el estado lógico FALSE.

Mostrar traducciones de los nombres de los tipos de supervisiones
Es posible visualizar los nombres de todos los tipos de supervisiones en todos los idiomas del
proyecto que se han activado en la configuración de los idiomas del proyecto y cuyas
traducciones ya estén disponibles. Encontrará más información sobre la activación de idiomas
del proyecto en "Editar datos de proyecto > Trabajar con proyectos multilingües > Seleccionar
idiomas del proyecto".

Requisitos
En el árbol del proyecto se ha abierto la carpeta "Datos comunes".

Procedimiento
Para visualizar el nombre de un tipo de supervisión en todos los idiomas del proyecto, proceda
del siguiente modo:
1. Haga doble clic en la entrada "Configuración de supervisiones" del árbol del proyecto.
Se abre la configuración de supervisiones de ProDiag.
2. Seleccione la sección "Tipos de supervisiones" en la ficha "General".
3. Marque la fila con el tipo de supervisión cuyas traducciones desee visualizar.
Si desea visualizar al mismo tiempo las traducciones de varios tipos de supervisiones, debe
marcar las filas correspondientes.
4. Abra la ficha "Propiedades" de la ventana de inspección.
Mientras no haya traducido los nombres de los tipos de supervisiones a todos los idiomas
seleccionados del proyecto, los textos se mostrarán en el idioma actual de la interfaz de
usuario según el ajuste predeterminado. Si las traducciones todavía no existen, pueden
introducirse directamente en la tabla, aunque las traducciones en los distintos idiomas del
proyecto se pueden introducir también en la tabla global "Textos del proyecto". La tabla se
encuentra en "Idiomas y recursos > Textos del proyecto" del árbol del proyecto.
Encontrará más información sobre la traducción de textos en "Editar datos de proyecto >
Trabajar con proyectos multilingües > Principios básicos de los textos del proyecto".

Programación del PLC
Manual de programación y manejo, 11/2019

8717

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Resultado
En la ficha subordinada "Textos" se muestran los idiomas del proyecto deseados y, siempre
que estén disponibles, las traducciones de los nombres de los tipos de supervisiones.

8718

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

24.8.3

Definir textos de aviso ProDiag centralizados

24.8.3.1

Estructura del editor de textos de aviso

Estructura del editor de textos de aviso
La figura siguiente muestra a modo de ejemplo los componentes del editor de textos de aviso:
















Programación del PLC
Manual de programación y manejo, 11/2019

8719

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

Numera‐ Significado
ción

Información adicional

1

Creación de estructuras de textos de aviso para supervisiones
GRAPH (solo en combinación con el lenguaje de programación
GRAPH)

Encontrará más infor‐
mación sobre los avisos
de supervisión GRAPH
aquí: Estructura de un
aviso de supervisión
GRAPH (Página 8722)

2

Creación de estructuras de textos de aviso para las supervisiones
básicas:

Encontrará más infor‐
mación sobre los avisos
de supervisión globales
aquí: Estructura de un
aviso de supervisión
global (variable) (Pági‐
na 8723)

● Operando
● Enclavamiento
● Acción
● Reacción
● Posición
Para cada supervisión básica se puede crear una estructura de
texto de aviso propia para supervisiones globales (variables) y
locales (parámetros FB).

8720

3

Creación de estructuras de texto de aviso para supervisiones con
un mensaje de error. Para cada supervisión con un mensaje de
error se puede crear una estructura de texto de aviso para todas
las supervisiones globales (variables) y una para todas las super‐
visiones locales (parámetros del FB).

4

Creación de estructuras de texto de aviso para supervisiones con
un texto de aviso. Para cada supervisión con un texto de aviso se
puede crear una estructura de texto de aviso para todas las su‐
pervisiones globales (variables) y una para todas las supervisio‐
nes locales (parámetros del FB).

5

Relación de todos los campos de texto de aviso soportados que
pueden arrastrarse a los distintos cuadros de texto mediante Drag
& Drop.

Encontrará más infor‐
mación sobre los avisos
de supervisión locales
aquí: Estructura de un
aviso de supervisión lo‐
cal (parámetros) (Pági‐
na 8724)

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
Numera‐ Significado
ción

Información adicional

6

Los diferentes cuadros de texto que pueden llenarse con campos
de aviso de texto se pueden configurar con los avisos de super‐
visión deseados.

Se pueden definir hasta
11 cuadros de texto
(texto de aviso, texto de
información y nueve tex‐
tos de aviso adiciona‐
les). Los nueve textos
de aviso adicionales so‐
lo se visualizan en
WinCC Runtime Profes‐
sional.

7

Separador de los campos de texto de aviso

En el ajuste predetermi‐
nado, para separar los
campos de texto de avi‐
so dentro de un marco
de texto se utiliza el sig‐
no de dos puntos. El se‐
parador puede cambiar‐
se en todo momento o
borrarse si ya no se
quiere utilizar. El sepa‐
rador utilizado previa‐
mente, p. ej. los dos
puntos, se reemplaza
automáticamente en to‐
dos los marcos de texto
con un signo de punto y
coma, por ejemplo.

Descripción
Para el cuadro de texto "Texto de aviso" se propone una estructura que puede modificarse en
cualquier momento.
Desde el área "Campos de texto soportados" pueden arrastrase o copiarse a un cuadro de
texto los campos de texto de aviso disponibles en cada caso. Solo es posible utilizar cada
campo de texto de aviso una sola vez dentro de un cuadro de texto. Los campos de texto de
aviso disponibles para la selección dependen del área que haya seleccionado en la
navegación debajo de "Textos de aviso". El orden de los campos de texto de aviso dentro de
un cuadro de texto se modifica con la función Drag&Drop.
Si utiliza el campo de texto de aviso "<Campo de texto específico>", en el aviso de supervisión
se puede visualizar un texto específico para esa supervisión. Para que el campo de texto de
aviso pueda mostrar la información deseada, debe parametrizarse información para esta
supervisión en las propiedades de las diferentes supervisiones, en la ficha subordinada
"Campo de texto específico".

Consulte también
Crear un campo de texto específico (Página 8739)

Programación del PLC
Manual de programación y manejo, 11/2019

8721

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

24.8.3.2

Estructura de un aviso de supervisión GRAPH

Descripción
Esta estructura del texto de aviso para una supervisión GRAPH es válida para los tres tipos de
supervisiones GRAPH:
● Interlock GRAPH
● Supervisión GRAPH
● Advertencia GRAPH (supervisión del tiempo de etapa)
La tabla siguiente muestra todos los componentes que puede contener una supervisión
GRAPH. Puede reducir el número de componentes en cualquier momento:
Componentes de un aviso de Descripción
supervisión GRAPH

Especificado me‐
diante ajuste pre‐
determinado

Relevante para la tra‐
ducción

x

Sí

<Categoría>

Nombre de la categoría

<Subcategoría 1>

Nombre de la subcatego‐ ría 1

<Subcategoría 2>

Nombre de la subcatego‐ ría 2

<Tipo de supervisión>

Nombre del tipo de super‐ x
visión

<Nombre del PLC>

Nombre del PLC

x

<Nombre de FB>

Nombre del bloque de
función

x

<Número de FB>

Número del bloque de
función

-

<Nombre de etapa>

Nombre de etapa

x

<Número de etapa>

Número de etapa

x

<Nombre de bloque de datos
de instancia>

Nombre del bloque de da‐ tos de instancia

<Número de bloque de datos
de instancia>

Número del bloque de da‐ tos de instancia

No

x
<Campo de texto específico> Información específica
de Interlock o de supervi‐
sión definida en la etapa
correspondiente

Puede modificar el número de componentes de un aviso de supervisión en cualquier momento
agregando nuevos componentes o eliminando componentes ya existentes. Todos los
componentes pueden utilizarse opcionalmente.

Consulte también
Crear textos de aviso (Página 8727)
Editar avisos (Página 8310)
Activar y desactivar el visor de avisos (Página 8310)

8722

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

24.8.3.3

Estructura de un aviso de supervisión global (variable)

Descripción
Los avisos de supervisión globales pueden crearse para las supervisiones de una variable
definida en una tabla de variables o en un bloque de datos.
La tabla siguiente muestra todos los componentes que puede contener un aviso de supervisión
global. Puede reducir el número de componentes en cualquier momento:
Componentes de un aviso de Descripción
supervisión global

Especificado me‐
diante ajuste pre‐
determinado

Relevante para la tra‐
ducción

<Categoría>

Nombre de la categoría

x

Sí

<Subcategoría 1>

Nombre de la subcatego‐ ría 1

<Subcategoría 2>

Nombre de la subcatego‐ ría 2

No

<Tipo de supervisión>

Nombre del tipo de super‐ x
visión

Sí
No

<Nombre del PLC>

Nombre del PLC

-

<Nombre del FB ProDiag>

Nombre del bloque de
función ProDiag

x

<Número del FB ProDiag>

Número del bloque de
función ProDiag

-

<ID de supervisión>

ID de la supervisión

x

<Dirección de variable>

● Dirección de variable
procedente de la
tabla de variables

x

● En los elementos
booleanos de un
bloque de datos no
se emite ninguna
dirección.
<Nombre de variable>

Nombre de la variable su‐ x
pervisada
Si se trata de un elemen‐
to de una estructura (tipo
de datos PLC, ARRAY o
STRUCT), se indican to‐
dos los niveles de estruc‐
tura superiores, p. ej.,
"Motores".Motor_1.Ele‐
mento_BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

8723

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
Componentes de un aviso de Descripción
supervisión global
<Comentario de variable>

Especificado me‐
diante ajuste pre‐
determinado

x
● Comentario de la
variable de la tabla de
variables

Relevante para la tra‐
ducción
Sí

● Comentario del
elemento del bloque
de datos
<Ruta de comentario de va‐
riable>

Comentarios de las varia‐ bles de todos los niveles
de una variable estructu‐
rada, separados por pun‐
tos

<Campo de texto específico> Información específica
para una supervisión
(texto con 3 variables):

-

● <Valor asociado
SD_5>
● <Valor asociado
SD_6>
● <Valor asociado
SD_7>

Puede modificar el número de componentes de un aviso de supervisión en cualquier momento
agregando nuevos componentes o eliminando componentes ya existentes. Todos los
componentes pueden utilizarse opcionalmente.

Consulte también
Crear textos de aviso (Página 8727)

24.8.3.4

Estructura de un aviso de supervisión local (parámetros)

Descripción
Los avisos de supervisión locales pueden crearse para las supervisiones de un parámetro
definido en la interfaz de un bloque de función.
Nota
Variables estructuradas
En la interfaz de bloque no se pueden supervisar elementos booleanos de una variable
estructurada (tipo de datos PLC, ARRAY o STRUCT).

8724

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
La tabla siguiente muestra todos los componentes que puede contener un aviso de supervisión
local. Puede reducir el número de componentes en cualquier momento:
Componentes de un aviso de Descripción
supervisión local

Especificado me‐
diante ajuste pre‐
determinado

Relevante para la tra‐
ducción

x

Sí

<Categoría>

Nombre de la categoría

<Subcategoría 1>

Nombre de la subcatego‐ ría 1

<Subcategoría 2>

Nombre de la subcatego‐ ría 2

No

<Tipo de supervisión>

Nombre del tipo de super‐ x
visión

Sí

<Nombre del PLC>

Nombre de la CPU

-

No

<Nombre del FB ProDiag>

Nombre del bloque de
función ProDiag

x

<Número del FB ProDiag>

Número del bloque de
función ProDiag

-

<ID de supervisión>

ID de la supervisión

x

<Nombre de FB>

Nombre del bloque de
función

-

<Ruta de instancia>

Nombre y ruta del bloque
de datos de instancia

-

<Nombre de instancia>

Nombre del bloque de da‐ x
tos de instancia (p. ej.,
Block_9_DB)

<Número de instancia>

Número del bloque de da‐ tos de instancia

<Comentario de instancia>

● En caso de instancia
individual:
Se emite el título del
DB de instancia.

-

Sí

● En caso de
multiinstancia:
Se emite el
comentario de la
multiinstancia desde
la interfaz de bloque.
<Nombre de parámetro>

Nombre del parámetro
supervisado

x

No

<Comentario de parámetro>

Comentario del paráme‐
tro

-

Sí

Programación del PLC
Manual de programación y manejo, 11/2019

8725

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
Componentes de un aviso de Descripción
supervisión local

Especificado me‐
diante ajuste pre‐
determinado

Relevante para la tra‐
ducción

<Dirección de variable>

x

No

● Dirección de variable
procedente de la
tabla de variables
● En los elementos
booleanos de un
bloque de datos no
se emite ninguna
dirección.

<Nombre de variable>

En este caso se supervi‐ x
sa el parámetro (<Nom‐
bre de parámetro>), y la
variable (<Nombre de va‐
riable>) es la variable an‐
terior, en caso de que
exista.

<Comentario de variable>

x
● Comentario de la
variable de la tabla de
variables

Sí

● Comentario del
elemento del bloque
de datos
<Ruta de comentario de va‐
riable>

Comentarios de las varia‐ bles de todos los niveles
de una variable estructu‐
rada, separados por pun‐
tos

<Campo de texto específico> Información específica
para una supervisión
(texto con 3 variables):

-

● <Valor asociado
SD_5>
● <Valor asociado
SD_6>
● <Valor asociado
SD_7>

Puede modificar el número de componentes de un aviso de supervisión en cualquier momento
agregando nuevos componentes o eliminando componentes ya existentes. Todos los
componentes pueden utilizarse opcionalmente.

Consulte también
Crear textos de aviso (Página 8727)

8726

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag

24.8.3.5

Crear textos de aviso

Requisitos
En el árbol del proyecto se ha abierto la carpeta "Datos comunes".

Procedimiento
Para crear un texto de aviso, proceda del siguiente modo:
1. Haga doble clic en la entrada "Configuración de supervisiones" del árbol del proyecto.
Se abre la configuración de supervisiones de ProDiag.
2. En la ficha "Textos de aviso", seleccione el área para la que desee crear un texto de aviso,
p. ej. Supervisiones básicas > Variables.
3. Utilizando la función Drag & Drop, arrastre los campos de texto de aviso deseados desde
el campo "Campos de texto de aviso soportados" al marco de texto "Texto de aviso".
El orden de los diferentes campos de texto puede modificarse en todo momento.
4. Si desea borrar un campo de texto, haga clic en el campo de texto correspondiente con el
botón derecho del ratón y seleccione la opción "Borrar" del menú contextual.
5. Seleccione un separador adecuado para los campos de texto.

Resultado
Los campos de texto sirven de comodín y, en cuanto se activa un aviso de supervisión, se
rellenan con valores de proceso actuales.

24.8.3.6

Exportación de textos de ProDiag y GRAPH
Puede filtrar textos de proyectos de ProDiag y GRAPH y exportarlos para la traducción. La
exportación se realiza a un archivo Office Open XML con la extensión ".xlsx". Este tipo de
archivo se puede editar en Microsoft Excel o en otros programas de hojas de cálculo.

Programación del PLC
Manual de programación y manejo, 11/2019

8727

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
La exportación de textos de ProDiag y GRAPH se define con las opciones de filtro siguientes:
Opción

Contenido de la exportación

ProDiag / GRAPH: textos
de aviso

● Listas de textos de usuario para supervisiones
● Nombres visualizados para etapas y transiciones en GRAPH
● Comentarios y rutas de comentarios de las variables supervisadas
● Comentarios de los elementos supervisados en la interfaz del bloque
● Títulos de los bloques de datos de instancia supervisados y de los
comentarios de instancia en caso de multiinstancia
● Comentarios y rutas de comentarios de las variables interconectadas
previamente con elementos supervisados de la interfaz del bloque (si
solo hay un operando interconectado previamente)
● Textos de aviso específicos de Interlock y supervisión para GRAPH

ProDiag / GRAPH: textos
para visualización HMI

● Comentarios de variables en redes de transición y de Interlock
● Comentarios de variables en redes permanentes supervisadas con
ProDiag
● Comentarios de variables en redes supervisadas con ProDiag
● Títulos de redes supervisadas con ProDiag (incl. redes permanentes)

ProDiag / GRAPH: todos
los textos

● Textos de aviso ProDiag / GRAPH
● Textos ProDiag / GRAPH para visualización HMI

Nota
Las opciones de filtro indicadas no están disponibles para las CPU S7-300/400.

Encontrará más información en el capítulo "Exportación de textos de proyectos".

24.8.4

Exportar la configuración de supervisiones de ProDiag
Es posible exportar toda la configuración de supervisiones de ProDiag a un archivo .dat para
importarlas a un proyecto nuevo.

Requisitos
Se ha definido la configuración de supervisiones de ProDiag para un proyecto.

Procedimiento
Para exportar la configuración de supervisiones de ProDiag, proceda del siguiente modo:
1. Abra la carpeta "Datos comunes" en el árbol del proyecto.
2. Haga doble clic en la entrada "Configuración de supervisiones".

8728

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.8 Definir la configuración de supervisiones de ProDiag
3. Haga clic en "Exporta ajustes de supervisión". Si la opción está desactivada significa que
todavía no se han creado supervisiones de ProDiag o bloques de función GRAPH.
Se abrirá el cuadro de diálogo "Guardar como".
4. Seleccione una ubicación y asigne un nombre de archivo.
5. Haga clic en "Guardar".

Resultado
En la ubicación seleccionada se crea un archivo .dat que no puede editarse.

24.8.5

Importar la configuración de supervisiones de ProDiag

Requisitos
La configuración de supervisiones de ProDiag se ha exportado a un archivo .dat.
La configuración de supervisiones de ProDiag también puede importarse al proyecto aunque
no se hayan creado supervisiones de ProDiag o bloques de función GRAPH.
Nota
Actualización del proyecto
Si se ha actualizado el proyecto a la versión 15 del TIA Portal y el botón "Reparar" es visible
en la zona de subcategorías de la configuración de supervisiones de ProDiag, primero hay que
accionar este botón para poder importar después la configuración de supervisiones de
ProDiag desde otro proyecto.

Procedimiento
Para importar la configuración de supervisiones de ProDiag a un proyecto nuevo, proceda del
siguiente modo:
1. Abra la "Configuración de supervisiones" en la carpeta "Datos comunes" del árbol del
proyecto.
2. Haga clic en "Importa ajustes de supervisión".
Si "Importa ajustes de supervisión" está atenuado y en la zona de las subcategorías se ve
el botón "Reparar", primero debe accionar dicho botón. De este modo se reparan las
subcategorías. Seguidamente pueden importarse los restantes ajustes de supervisión de
ProDiag.
3. Se abre el cuadro de diálogo "Abrir".
Seleccione la ruta en la que está depositado el archivo que debe importarse.
4. Seleccione el archivo .dat que desee.
5. Confirme el cuadro de diálogo haciendo clic en "Abrir".

Programación del PLC
Manual de programación y manejo, 11/2019

8729

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

Resultado
Todos los ajustes de supervisión de ProDiag registrados en el archivo .dat se aplican al nuevo
proyecto.
Nota
Importación de una configuración de supervisiones de ProDiag no existente
Si se importan categorías de aviso que todavía no existen en el proyecto, por ejemplo, aparece
un mensaje de error y se asignan a las categorías las categorías de aviso definidas por defecto.
Si las categorías de aviso se crean después de la importación, después deberán asignarse
manualmente a las categorías deseadas.

24.9

Crear supervisiones ProDiag

24.9.1

Sinopsis de las supervisiones

Descripción
Existe la posibilidad de crear supervisiones globales y locales. Además es posible crear más
de una supervisión para cada operando.
Por cada supervisión creada se crea una nueva entrada en la ficha "Supervisiones" de la
ventana de inspección "Propiedades". En la ficha "Supervisiones" pueden definirse los ajustes
de cada una de las supervisiones. Si se crean varias supervisiones para un operando, se
numeran de forma ascendente con el complemento "ID_<ID de supervisión correlativo> (FB
ProDiag asignado)".
Nota
Creación de supervisiones en bloques de datos de instancia F
En la interfaz de un bloque de datos de instancia F se pueden crear supervisiones ProDiag
globales para los parámetros booleanos.
En cuanto se crea la primera supervisión global en el proyecto o se crea una instancia de una
supervisión local, se crean automáticamente los bloques ProDiag "Default_SupervisionFB" y
"Default_SupervisionDB" en la carpeta "Bloques de programa" del árbol del proyecto.
Tiene la posibilidad de saber de un vistazo cuántas supervisiones ProDiag están asignadas a
un bloque de función ProDiag. Encontrará más información al respecto en: Mostrar el número
de supervisiones de un FB ProDiag (Página 8707).

Supervisiones globales
Supervisión de una variable booleana en una tabla de variables, en un bloque de datos global
o en un bloque de datos ARRAY.

8730

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag
La siguiente figura muestra los tipos de datos que pueden supervisarse:

Supervisiones locales
Supervisión de un parámetro booleano de un bloque de función
La siguiente figura muestra los parámetros que pueden supervisarse:

Programación del PLC
Manual de programación y manejo, 11/2019

8731

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

Ficha "Supervisiones" en la ventana de inspección "Propiedades"
En ella pueden definirse los ajustes de supervisión para cada supervisión de operando creada:
Grupo

Propiedad

Descripción

General

Tipo de supervisión

Están disponibles los siguientes tipos de supervisiones:
● Operando, p. ej., para supervisar señales estáticas
● Enclavamiento, p. ej., para supervisar señales de control
● Acción, p. ej., para supervisar si se ha abandonado la posición inicial
● Reacción, p. ej., para supervisar si se ha alcanzado a tiempo la posición
de destino
● Posición, p. ej., para supervisar si se ha abandonado sin autorización la
posición de destino
● Texto de aviso (emite un texto de aviso sencillo)
● Mensaje de error (emite un número de error y el texto correspondiente)
Según el tipo de supervisión que se seleccione, algunos de los campos de
las propiedades deberán rellenarse obligatoriamente. Encontrará qué cam‐
pos son aquí: Tipos de supervisiones (Página 8643)

Variable / parámetro super‐ Indica el operando que se supervisa. Los estados lógicos TRUE y FALSE del
visado
operando supervisado indican qué estado lógico del operando se vigila.
Tiempo de retardo / tiempo
de reacción / tiempo de
arranque

Según el tipo de supervisión que se seleccione se mostrará un tiempo u otro:
● Retardo: operando, enclavamiento, posición, texto de aviso, mensaje de
error
● Tiempo de reacción: reacción
● Tiempo de arranque: acción

Condiciones

Para las condiciones solo se pueden usar variables booleanas y accesos
Slice del tipo de datos BIT. Los estados lógicos TRUE y FALSE de las dife‐
rentes condiciones indican qué estado lógico del operando se supervisa.

Marca de error (solo para
variables globales)

La marca de error se escribe en el bloque de datos homónimo del bloque de
función ProDiag.

FB ProDiag (solo con varia‐ Si no se asigna ningún bloque de función ProDiag definido por el usuario a
bles globales)
una supervisión, ésta se asignará automáticamente al bloque de función
ProDiag "Default_SupervisionFB". En este bloque de función ProDiag se
agrupan todas las supervisiones globales y las supervisiones locales ya ins‐
tanciadas que tienen asignado dicho bloque. También es posible crear blo‐
ques de función ProDiag propios para agrupar las supervisiones en unidades
tecnológicas.
Encontrará instrucciones para crear bloques de función ProDiag aquí: Crear
bloques de función ProDiag (Página 8676)
Categoría

En la lista desplegable "Categoría" se visualizan las 8 categorías.

Subcategoría 1 y 2

Para disponer de posibilidades de selección en las listas desplegables de los
campos "Subcategoría", deben definirse en la configuración de supervisio‐
nes ProDiag.
Encontrará un ejemplo aquí: Definir la configuración de supervisiones de
ProDiag (Página 8708)

Texto de aviso

8732

El texto de aviso no puede editarse, ya que también se define en la configu‐
ración de supervisiones ProDiag.

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag
Grupo

Propiedad

Descripción

Campo de texto
específico

-

Aquí puede crear un campo de texto específico para cada supervisión con
ayuda de valores asociados.
Encontrará un ejemplo aquí: Crear un campo de texto específico (Pági‐
na 8741)

Consulte también
Mostrar las supervisiones de todos los bloques de función llamados (Página 8760)
Ver las supervisiones de todas las variables globales (Página 8758)
Crear supervisiones globales (Página 8734)
Posibilidades de uso de las supervisiones (Página 8733)
Varios avisos de supervisión de un FB ProDiag en un tiempo de ciclo (Página 8685)
Crear supervisiones locales (Página 8736)
Crear un campo de texto específico (Página 8739)

24.9.2

Posibilidades de uso de las supervisiones

Descripción
Es posible crear supervisiones para las siguientes áreas de memoria:
Área de memoria/sección de la in‐ Ubicación
terfaz del bloque

Supervisión

Entradas

Supervisiones globales (va‐
riable)

Tabla de variables

Salidas
Marcas
Elementos del tipo de datos BOOL
de un bloque de datos

Bloque de datos global o bloque
de datos ARRAY del tipo de datos
BOOL

Input

Interfaz del bloque

Output

Supervisiones locales (pará‐
metros)

Static

Nota
Variables estructuradas
En la interfaz de un bloque de usuario se pueden supervisar elementos booleanos de una
variable estructurada (tipo de datos PLC, ARRAY o STRUCT), si esta se ha declarado en la
sección "Static".

Programación del PLC
Manual de programación y manejo, 11/2019

8733

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag
Para cada tipo de supervisión hay diferentes posibilidades de uso de las supervisiones:
Supervisiones globales
Tipo de supervi‐
sión

Supervisiones locales

Entradas

Salidas

Marcas/
elementos
de un blo‐
que de da‐
tos del tipo
de datos
BOOL

Input

Output

Static

x

x

x

x

x

x

Enclavamiento

-

x

x

x

-

-

Acción

x

-

x

x

-

-

Reacción

x

-

x

x

-

-

Operando

Posición

x

-

x

x

-

-

Mensaje de error

x

x

x

x

x

x

Texto de aviso

x

x

x

x

x

x

x: es posible utilizar la supervisión.
-: no es posible utilizar la supervisión.

24.9.3

Crear supervisiones globales

Requisitos
Se ha creado una variable booleana en una tabla de variables o por lo menos una variable
booleana en un bloque de datos.

8734

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

Procedimiento
Para crear una supervisión global, proceda del siguiente modo:
1. Con la tecla derecha del ratón seleccione una o varias variables y seleccione "Agregar
supervisión" en el menú contextual. La entrada del menú contextual solo se ofrece si es
posible supervisar todas las variables seleccionadas (variables booleanas).
En la ventana de inspección "Propiedades" se abre la ficha "Supervisiones" y se crea una
supervisión para la variable. Las supervisiones se numeran en orden ascendente
(Supervisión_ID_<ID de supervisión correlativo>(FB ProDiag asignado)).
2. Como ajuste predeterminado está seleccionado el tipo de supervisión "Operando". Si es
necesario, seleccione otro tipo de supervisión.
Los ajustes que deben rellenarse obligatoriamente dependen del tipo de supervisión
seleccionado.
Encontrará más información sobre los tipos de supervisiones aquí: Tipos de supervisiones
(Página 8643)
Nota
Los ajustes se sobrescriben
Si se cambia el tipo de una supervisión ya creada, los ajustes predeterminados del nuevo
tipo de supervisión sobrescribirán los ajustes existentes.
3. En caso necesario, ajuste un retardo.
4. Si fuera necesario, seleccione condiciones para que se active un aviso de supervisión.
5. Si no desea utilizar el FB ProDiag predeterminado "Default_SupervisionFB", puede
seleccionar otro FB ProDiag ya existente o crear uno nuevo.
6. Seleccione una categoría y, dado el caso, subcategorías.
7. Si todavía no utiliza la variable supervisada en su código de programa, insértela ahora.
O bien:
1. Haga clic en la variable deseada.
2. En la ficha "Supervisiones" de la ventana de inspección "Propiedades", haga doble clic en
la entrada "Agregar supervisión".
Se crea una supervisión nueva. Las supervisiones se numeran en orden ascendente
(Supervisión_ID_<ID de supervisión correlativo>(FB ProDiag asignado)).
3. A partir de aquí, el procedimiento es el mismo que el descrito en el punto 2 anterior.

Programación del PLC
Manual de programación y manejo, 11/2019

8735

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

Resultado
Se ha creado la supervisión de una variable global y se ha marcado la variable en la tabla de
variables con el símbolo de ProDiag. Las variables pueden utilizarse en todos los bloques de
programa que estén dentro del programa.

Indica que la variable se está supervisando.
Nota
Copiar variables
Al copiar una variable global, para la que ya se han creado supervisiones, de una CPU a otra
o de un proyecto a otro, las supervisiones no se copian.

24.9.4

Crear supervisiones locales

Requisitos
Se ha creado un parámetro booleano en la interfaz de un bloque de función en una de las tres
secciones siguientes:

8736

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

Nota
Variables estructuradas
En la interfaz de bloque no se pueden supervisar elementos booleanos de una variable
estructurada (tipo de datos PLC, ARRAY o STRUCT).
Nota
Propiedades de una supervisión local
Todas las propiedades de una supervisión local (variables para las condiciones, el retardo o el
campo de texto específico) deben declararse también localmente en la interfaz de bloque.

Procedimiento
Para crear una supervisión local, proceda del siguiente modo:
1. Haga clic en el parámetro con el botón derecho del ratón y seleccione "Agregar supervisión"
en el menú contextual.
En la ventana de inspección "Propiedades" se abre la ficha "Supervisiones" y se crea una
supervisión para el parámetro. Las supervisiones se numeran en orden ascendente
(Supervisión_ID_<ID de supervisión correlativo>(FB ProDiag asignado)).
2. Como ajuste predeterminado está seleccionado el tipo de supervisión "Operando". Si es
necesario, seleccione otro tipo de supervisión.
Los ajustes que deben rellenarse obligatoriamente dependen del tipo de supervisión
seleccionado.
Encontrará más información sobre los tipos de supervisiones aquí: Tipos de supervisiones
(Página 8643)
Nota
Los ajustes se sobrescriben
Si se cambia el tipo de una supervisión ya creada, los ajustes predeterminados del nuevo
tipo de supervisión sobrescribirán los ajustes existentes.
3. En caso necesario, ajuste un retardo.
4. Si fuera necesario, seleccione condiciones para que se active un aviso de supervisión.
5. Seleccione una categoría y, dado el caso, subcategorías.
6. Utilice el parámetro supervisado en el código del programa.
7. Llame el bloque de función en el programa y seleccione un bloque de datos de instancia en
el cuadro de diálogo "Opciones de llamada", apartado "Instancia individual".
Las supervisiones del proyecto no se activan hasta que no se llama el bloque de función y
se crea un bloque de datos de instancia para el bloque de función.

Programación del PLC
Manual de programación y manejo, 11/2019

8737

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag
O bien:
1. Desmarque el parámetro deseado.
2. En la ficha "Supervisiones" de la ventana de inspección "Propiedades", haga doble clic en
la entrada "Agregar supervisión".
Se crea una supervisión nueva. Las supervisiones se numeran en orden ascendente
(Supervisión_ID_<ID de supervisión correlativo>(FB ProDiag asignado)).
3. A partir de aquí, el procedimiento es el mismo que el descrito en el punto 2 anterior.

Resultado
Se han creado las supervisiones de los parámetros y se han marcado en la interfaz del bloque
con el símbolo de ProDiag.

Indica que el parámetro se está supervisando.
Al hacer clic en el bloque de función con el botón derecho del ratón en el árbol del proyecto,
aparece el cuadro de dialogo de propiedades del bloque de función. En la ficha "Definiciones
de supervisiones en el FB" se muestran todas las supervisiones que se han creado para este
bloque de función.
Encontrará más información sobre la sinopsis de las supervisiones en un bloque bloque de
función aquí: Mostrar las supervisiones de un bloque de función (Página 8764)
Nota
Code Viewer
En supervisiones de parámetros de entrada de un bloque de función, en el Code Viewer se
puede visualizar la interconexión previa de los parámetros de entrada.
En supervisiones de parámetros de salida y/o estáticos de un bloque de función, en el Code
Viewer se puede visualizar la llamada completa del bloque de función.

8738

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

24.9.5

Crear un campo de texto específico

24.9.5.1

Uso de los valores asociados
Los valores asociados SD_4, SD_5 y SD_6 pueden referenciarse del modo siguiente:
@<número del valor asociado><formato>@
El carácter "@" inicia el uso de un valor asociado y finaliza también con él.

Número del valor asociado
El número indica qué valor asociado o qué variable debe leerse:
Número

Significado

4

Valor asociado SD_4 (variable 1)

5

Valor asociado SD_5 (variable 2)

6

Valor asociado SD_6 (variable 3)

Tamaño máximo permitido de los valores asociados
Cuando el tamaño total de los valores asociados supera el tamaño máximo permitido, suele
deberse a que uno o varios valores asociados son del tipo de datos STRING o WSTRING y no
se ha indicado ninguna longitud efectiva. Si, p. ej., no se indica ninguna longitud efectiva para
WSTRING, se utiliza la máxima longitud posible y el tamaño máximo permitido se supera ya
con un valor asociado.
Con los tipos de datos STRING y WSTRING, utilice siempre corchetes [] para definir la longitud
efectiva.

Formato
Determine el formato de visualización del valor asociado en el visualizador. El formato irá
precedido del carácter "%". Existen los siguientes formatos fijos para los valores asociados:
Formato

Descripción

%[i]X

Hexadecimal con i posiciones

%[i]u

Número decimal sin signo con i posiciones

%[i]d

Número decimal con signo con i posiciones

%[i]b

Número binario con i posiciones

%[i][.y]f

Número en coma flotante con signo e y posiciones
tras el punto decimal e i posiciones totales

%[i]s

Cadena de caracteres (ANSI String) con i posicio‐
nes
Los caracteres se imprimen hasta el primer byte 0
(00Hex).

%t#<Nombre de la librería de textos>

Acceso a la librería de textos

Aunque el número de posiciones [i] sea demasiado pequeño, el valor se emitirá con su longitud
total.
Programación del PLC
Manual de programación y manejo, 11/2019

8739

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag
Si el número de posiciones [i] es demasiado grande, delante del valor se visualizará un número
apropiado de caracteres de relleno.
Si el número de posiciones [i] es demasiado grande (en caso de números decimales o en coma
flotante) y si se emite un signo, se reduce el número de caracteres de relleno en una posición.
Lo mismo es aplicable al punto o la coma en números en coma flotante.
Nota
Tenga en cuenta que se puede introducir "[i]" de forma opcional, debiendo omitir para ello los
paréntesis cuadrados.

Ejemplos
La siguiente tabla muestra algunos ejemplos:
Valor de la variable Valor asociado

Significado

Salida

123*

@4%6d@

El valor del valor asociado
000123
SD_4 se representa como nú‐
mero decimal con signo y 6
posiciones totales.

1234.567

@4%8.3f@

1234.567
El valor del valor asociado
SD_4 se representa como nú‐
mero en coma flotante con
signo, 3 posiciones tras la co‐
ma decimal y 8 posiciones to‐
tales.
No se inserta ningún carácter
de relleno porque la coma de‐
cimal representa el octavo
carácter.

5.4*

@5%6f@

0005.4
El valor del valor asociado
SD_5 se representa como nú‐
mero entero con 6 posicio‐
nes totales.
No se ha definido ningún nú‐
mero de posiciones después
de la coma decimal.

5.4

@5%2f@

5.4
El valor del valor asociado
SD_5 se representa como nú‐
mero entero con 3 posicio‐
nes totales.
El valor no queda cortado.

Contenido de la lib‐ @6%t#TextLib1@
rería de textos
<TextLib1>

El valor asociado SD_6 del ti‐ 90
po de datos WORD es el ín‐
dice que hace referencia a la
librería de textos utilizada
"TextLib1".

El tipo de carácter de relleno (p. ej. ceros o espacios) depende del sistema de salida.

8740

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

24.9.5.2

Crear un campo de texto específico
El campo de texto específico permite emitir información adicional en un aviso de supervisión
con ayuda de valores asociados. Esta información puede combinarse libremente en el campo
de texto específico y se compone de los siguientes elementos:
● Texto libre (p. ej., temperatura, modo manual, automático)
● Valor de las tres variables distintas (valores asociados SD_4 - SD_6) que se leen durante
el tiempo de ejecución
● Entrada de lista de textos
Nota
Uso del carácter @ en el campo de texto específico
El carácter @ solo debe utilizarse para declarar valores asociados, p. ej. @4%6d@. Si el
carácter @ se utiliza también en el texto libre del campo de texto específico, es posible que en
determinadas circunstancias no puedan resolverse los valores asociados que hay en el texto
libre del aviso de supervisión.

Requisitos
Ya se ha creado una supervisión global o local y en la ventana de inspección "Propiedades"
está abierta la ficha "Supervisiones".

Procedimiento
Para crear el campo de texto específico para una supervisión, haga lo siguiente:
1. Seleccione el grupo "Campo de texto específico".
2. Seleccione las variables deseadas en la función de autocompletar de los tres valores
asociados SD_4 - SD_6.
Las variables deben ser del tipo de datos BOOL, BYTE, WORD, DWORD, SINT, INT, DINT,
USINT, UINT, UDINT, REAL, LREAL, CHAR, WCHAR, STRING o WSTRING.
3. Introduzca el texto deseado en el campo de texto. El texto puede estar compuesto, por
ejemplo, por un texto libre y una referencia a las variables que se han definido como valores
asociados. (P. ej., @4 hace referencia a la variable del valor asociado SD_4)
Aquí se muestra cómo debe ser la sintaxis de la referencia a una variable: Uso de los
valores asociados (Página 8739)
Nota
Aparición del campo de texto específico
Esta información solo se visualiza en el aviso de supervisión si al configurar los textos de aviso
se ha utilizado el campo de texto "<Campo de texto específico>" en la configuración de
supervisiones ProDiag. Encontrará más información sobre los textos de aviso en la
configuración de supervisiones de ProDiag aquí: Definir textos de aviso ProDiag centralizados
(Página 8719)

Programación del PLC
Manual de programación y manejo, 11/2019

8741

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag

Resultado
En cuanto se dispara un aviso de supervisión a causa de un fallo se emite también la
información del campo de texto específico, si en la estructura del texto de aviso se ha utilizado
el campo de texto de aviso "<Campo de texto específico>".

24.9.5.3

Mostrar y editar traducciones del campo de texto específico
Es posible visualizar el campo de texto específico en todos los idiomas del proyecto que se han
activado en la configuración de los idiomas del proyecto y cuyas traducciones ya estén
disponibles. Encontrará más información sobre la activación de idiomas del proyecto en
AUTOHOTSPOT.

Requisitos
Ha especificado al menos un campo de texto específico para una supervisión ProDiag.

Procedimiento
Existen varias formas de visualizar las traducciones de un campo de texto específico:
● En el editor de vista general de ProDiag
● En las propiedades del bloque de función ProDiag
● En el bloque de función ProDiag

8742

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.9 Crear supervisiones ProDiag
Para visualizar las traducciones en el editor de vista general de ProDiag, haga lo siguiente:
1. En el árbol del proyecto, haga doble clic en la entrada "Supervisiones y avisos del PLC" de
la CPU.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones de variables" o bien en "Definiciones de supervisiones
en el FB".
3. Seleccione toda la fila de la supervisión deseada o la celda que contiene el texto del campo
de texto específico. Para que se muestren varios textos simultáneamente en la ficha
"Textos", seleccione varias celdas de textos específicos.
El texto de los campos de texto específicos se mostrará en la ventana de inspección, en la
ficha "Textos".
Para visualizar las traducciones en las propiedades del bloque de función ProDiag, haga lo
siguiente:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón y seleccione
"Propiedades..." en el menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. Haga clic en la ficha "Textos".
Se muestran los textos de los campos de texto específicos.
Para visualizar las traducciones en el bloque de función ProDiag, proceda del siguiente modo:
1. Haga doble clic en el bloque de función ProDiag.
Se abre el bloque de función ProDiag.
2. En la ventana de inspección haga clic en la ficha "Textos".
Se muestran los textos de los campos de texto específicos.
Si los nombres de las categorías solo se muestran en el idioma actual de la interfaz de usuario,
significa que no se han seleccionado idiomas del proyecto o que todavía no existen
traducciones. Las traducciones se introducen directamente en la ficha "Textos" de la tabla, o
también es posible introducirlas en los distintos idiomas del proyecto en la tabla global "Textos
del proyecto". La tabla se encuentra en el árbol del proyecto, en "Idiomas y recursos > Textos
del proyecto".
Encontrará más información sobre la traducción de textos en AUTOHOTSPOT.

24.9.6

Borrar supervisión

Requisitos
Ha creado como mínimo una supervisión.

Programación del PLC
Manual de programación y manejo, 11/2019

8743

Supervisión de máquinas e instalaciones con ProDiag
24.10 Copiar bloques de función ProDiag

Procedimiento
Para borrar una supervisión, proceda del siguiente modo:
1. Haga clic en la variable o el parámetro que contiene la supervisión que desea borrar.
En la ventana de inspección "Propiedades" se abre la ficha "Supervisiones".
2. Haga clic en la supervisión con el botón derecho del ratón y elija "Borrar supervisión" en el
menú contextual.

Resultado
La supervisión se ha borrado.
Nota
La supervisión no se borra.
Si cambia el tipo de datos de un operando supervisado o borra el operando supervisado, la
supervisión no se borrará automáticamente. Si realmente desea borrar el operando, incluida
la supervisión, deberá borrar la supervisión por separado.

24.10

Copiar bloques de función ProDiag

24.10.1

Instrucciones rápidas para copiar de bloques de función ProDiag

Descripción
En lugar de crear bloques de función ProDiag nuevos, puede copiarlos sin más. Para ello
dispone de las siguientes posibilidades:
● Puede copiar el FB ProDiag en un proyecto de una CPU S7-1500 a otra CPU S7-1500.
● Puede copiar el FB ProDiag de un proyecto a otro proyecto.
● Puede copiar el FB ProDiag de un proyecto a una librería de proyecto.
● Puede copiar el FB ProDiag de un proyecto a una librería global.
● Puede copiar el FB ProDiag de una librería de proyecto a una librería global y a la inversa.
Todas las supervisiones globales contenidas en el bloque de función ProDiag se conservan al
copiarlo. Por ello es recomendable copiar también las variables globales supervisadas, ya que
de lo contrario se produciría un error de compilación.

8744

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.10 Copiar bloques de función ProDiag
En cambio, las supervisiones locales no se copiarán.
Nota
Garantizar la coherencia de la configuración ProDiag
Un bloque de función ProDiag debe compilarse siempre después de copiarse con el fin de
garantizar la coherencia de la configuración ProDiag. En una comparación offline después de
copiar se indica siempre una diferencia.

Consulte también
Copiar bloques de función ProDiag (Página 8745)
Insertar un bloque de función ProDiag (Página 8745)

24.10.2

Copiar bloques de función ProDiag

Requisitos
Ha marcado el bloque de función ProDiag.

Procedimiento
Para copiar el bloque de función ProDiag, haga lo siguiente:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón.
2. Elija el comando "Copiar" del menú contextual.

Resultado
Ahora el Portapapeles contiene una copia del bloque de función ProDiag que puede insertarse
en el lugar deseado.

24.10.3

Insertar un bloque de función ProDiag

Requisitos
Se ha copiado un bloque de función ProDiag.

Programación del PLC
Manual de programación y manejo, 11/2019

8745

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag

Procedimiento
Para insertar un bloque de función ProDiag copiado con sus supervisiones globales, haga lo
siguiente:
1. Abra el lugar en el que desea insertar el bloque copiado.
2. Haga clic con el botón derecho del ratón y elija el comando "Pegar" del menú contextual.
– Si inserta el bloque de función ProDiag en la CPU S7-1500 del bloque original, la copia
se insertará con la extensión de nombre "_<número consecutivo>".
– Si inserta el bloque de función ProDiag en otra CPU S7-1500 y ya existe un bloque de
función ProDiag con el mismo nombre, aparecerá el diálogo "Pegar". Seleccione la
opción deseada y confírmela con "Aceptar".

Resultado
Se ha insertado el bloque de función ProDiag copiado.

24.11

Asignar bloques de función ProDiag

24.11.1

Sinopsis de la asignación a un FB ProDiag

Descripción
Cada supervisión ProDiag debe asignarse a un bloque de función ProDiag para que se active
en el programa de usuario.
Al crear una supervisión global, esta se asigna automáticamente a un bloque de función
ProDiag. Esta asignación se puede modificar en la ventana de inspección "Propiedades" o en
la tabla sinóptica de ProDiag "Supervisiones de variables". Encontrará más información aquí:
Asignar supervisiones globales a un FB ProDiag (Página 8747)
Las supervisiones locales se pueden asignar a un bloque de función ProDiag en la llamada del
bloque de función definido por el usuario dentro del código del programa, en la tabla general
de ProDiag "Supervisiones instanciadas del FB", o en las propiedades del bloque de datos de
instancia definido por el usuario. Encontrará más información aquí: Asignar supervisiones
locales a un FB ProDiag (Página 8748)
Si no se ha seleccionado ningún bloque de función ProDiag definido por el usuario, las
supervisiones se asignarán mediante ajuste predeterminado al bloque de función ProDiag
"Default_SupervisionFB" o al primer bloque de función ProDiag definido por el usuario que se
encuentre.
La asignación de una supervisión a un bloque de función ProDiag puede modificarse en
cualquier momento también a posteriori.

8746

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag

Consulte también
Asigna bloque de datos de instancia a un FB ProDiag (supervisiones locales) (Página 8749)
Modificar la asignación existente de un FB ProDiag (Página 8750)
Eliminar la asignación existente de un FB ProDiag (Página 8752)

24.11.2

Asignar supervisiones globales a un FB ProDiag

Requisitos
Se ha creado una supervisión global.

Procedimiento
Para asignar supervisiones globales a un bloque de función ProDiag, proceda del siguiente
modo:
1. En la ventana de inspección "Propiedades" haga clic en la ficha "Supervisiones".
2. Haga clic en la supervisión deseada.
3. Haga clic en el campo de selección "..." en el FB ProDiag.
Se abre un cuadro de diálogo de selección.
4. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
5. Seleccione el bloque de función ProDiag correspondiente.
O bien:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones de variables".
Se muestran todas las supervisiones globales.
3. Haga clic en el campo de selección "..." de la columna "FB ProDiag".
Se abre un cuadro de diálogo de selección.
4. A partir de aquí, el procedimiento es el mismo que el descrito en el punto 4 anterior.

Resultado
La supervisión se ha asignado a un bloque de función ProDiag.

Consulte también
Crear supervisiones globales (Página 8734)

Programación del PLC
Manual de programación y manejo, 11/2019

8747

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag

24.11.3

Asignar supervisiones locales a un FB ProDiag

Requisitos
Se ha creado como mínimo una supervisión local para un bloque de función.

Procedimiento
Para asignar supervisiones locales de un bloque de función a un bloque de función ProDiag,
proceda del siguiente modo:
1. Llame el bloque de función en el código del programa.
Se abre el cuadro de diálogo "Opciones de llamada".
2. Haga clic en el botón "Instancia única".
3. Seleccione el bloque de función ProDiag deseado en el campo de selección "...".
4. Confirme sus entradas con "Aceptar".
O bien:
1. Llame el bloque de función en el código del programa.
Se abre el cuadro de diálogo "Opciones de llamada".
2. Haga clic en el botón "Multiinstancia".
3. Elija la multiinstancia que desee.
4. Confirme sus entradas con "Aceptar".
5. Llame el bloque de función que contiene la multiinstancia también dentro del código del
programa.
Se abre el cuadro de diálogo "Opciones de llamada".
6. Haga clic en el botón "Instancia única".
7. Seleccione el bloque de función ProDiag deseado en el campo de selección "...".
8. Confirme sus entradas con "Aceptar".
O bien:
Para asignar supervisiones locales a un bloque de función ProDiag con ayuda del cuadro de
diálogo "Agregar nuevo bloque", proceda del siguiente modo:
1. Haga doble clic en el comando "Agregar nuevo bloque".
Se abre el cuadro de diálogo "Agregar nuevo bloque".
2. Haga clic en el botón "Bloque de datos".
3. En la lista desplegable de Tipo, seleccione el bloque de función ya creado que contiene
supervisiones locales.
4. Seleccione el bloque de función ProDiag deseado en el campo de selección "...".
5. Confirme sus entradas con "Aceptar".
O bien:

8748

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag
Para asignar supervisiones locales a un bloque de función ProDiag en el editor de vista general
de ProDiag "Supervisiones y avisos del PLC", proceda del siguiente modo:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones instanciadas del FB".
Se muestran todas las supervisiones locales.
3. Haga clic en el campo de selección "..." de la columna "FB ProDiag".
Se abre un cuadro de diálogo de selección.
4. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
5. Seleccione el bloque de función ProDiag correspondiente.

Resultado
Las supervisiones ProDiag del bloque de función definido por el usuario están instanciadas.

24.11.4

Asigna bloque de datos de instancia a un FB ProDiag (supervisiones locales)

Descripción
Es posible asignar directamente un bloque de datos de instancia de un bloque de función
definido por el usuario a un bloque de función ProDiag.
Esta asignación es también posible aunque el bloque de función definido por el usuario no
contenga aún supervisiones. Además, la asignación al bloque de función ProDiag se mantiene
aunque se borre el bloque de función definido por el usuario.

Procedimiento
Para asignar un bloque de datos de instancia de un bloque de función definido por el usuario
a un bloque de función ProDiag, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en el bloque de datos de instancia de un bloque
de función.
2. Elija el comando "Propiedades" del menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de datos de instancia.
3. Haga clic en la sección "Atributos".
4. En "Asignar FB ProDiag", haga clic en el campo de selección "..." para seleccionar un
bloque de función ProDiag.
Se abre un cuadro de diálogo de selección.
5. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
6. Seleccione el bloque de función ProDiag correspondiente.

Programación del PLC
Manual de programación y manejo, 11/2019

8749

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag
O bien:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones instanciadas del FB".
Se muestran todas las supervisiones locales.
3. Haga clic en el campo de selección "..." de la columna "FB ProDiag" para seleccionar un
bloque de función ProDiag.
Se abre un cuadro de diálogo de selección.
4. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
5. Seleccione el bloque de función ProDiag correspondiente.

Resultado
Las supervisiones ProDiag del bloque de función definido por el usuario están instanciadas.

24.11.5

Modificar la asignación existente de un FB ProDiag

Requisitos
Ya ha creado supervisiones globales o locales y les ha asignado un bloque de función ProDiag.

Procedimiento para supervisiones globales
Para cambiar las asignaciones de supervisiones globales ya existentes a bloques de función
ProDiag, proceda del siguiente modo:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones de variables".
Se muestran todas las supervisiones globales.
3. Asigne a las supervisiones correspondientes de la columna "FB ProDiag" un bloque de
función ProDiag distinto.
O bien:
1. Haga clic en la variable supervisada p. ej. en la tabla de variables estándar.
En la ventana de inspección "Propiedades" se abre la ficha "Supervisiones" y se visualizan
las propiedades de la supervisión.
2. Haga clic en el campo de selección "..." en el FB ProDiag.
Se abre un cuadro de diálogo de selección.
3. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
4. Seleccione el bloque de función ProDiag correspondiente.

8750

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag
O bien:
1. En el árbol del proyecto, haga doble clic en el bloque de función ProDiag correspondiente.
Se abre el bloque de función ProDiag .
2. Haga clic en el campo de selección "..." de la columna "FB ProDiag".
Se abre un cuadro de diálogo de selección.
3. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
4. Seleccione el bloque de función ProDiag correspondiente.

Procedimiento con supervisiones locales
Para asignar un bloque de datos de instancia de un bloque de función definido por el usuario
a un bloque de función ProDiag, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en el bloque de datos de instancia de un bloque
de función.
2. Elija el comando "Propiedades" del menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de datos de instancia.
3. Haga clic en la sección "Atributos".
4. En "Asignar FB ProDiag", haga clic en el campo de selección "..." para seleccionar un
bloque de función ProDiag.
Se abre un cuadro de diálogo de selección.
5. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
6. Seleccione el bloque de función ProDiag correspondiente.
O bien:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones instanciadas del FB".
Se muestran todas las supervisiones locales.
3. Haga clic en el campo de selección "..." de la columna "FB ProDiag" para seleccionar un
bloque de función ProDiag.
Se abre un cuadro de diálogo de selección.
4. Haga clic en la carpeta "Bloques de programa" en la columna izquierda.
En la columna derecha se muestran todos los bloques de función ProDiag que ya existen.
5. Seleccione el bloque de función ProDiag correspondiente.

Resultado
Se han modificado las asignaciones del bloque de función ProDiag.

Programación del PLC
Manual de programación y manejo, 11/2019

8751

Supervisión de máquinas e instalaciones con ProDiag
24.11 Asignar bloques de función ProDiag

Consulte también
Mostrar las supervisiones de todos los bloques de función llamados (Página 8760)
Ver las supervisiones de todas las variables globales (Página 8758)

24.11.6

Eliminar la asignación existente de un FB ProDiag

Requisitos
Se han creado supervisiones locales y se les ha asignado un bloque de función ProDiag.

Procedimiento
Para cambiar las asignaciones ya existentes de un bloque de datos de instancia a un bloque
de función ProDiag, proceda del siguiente modo:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones instanciadas del FB".
Se muestran todas las supervisiones locales.
3. Haga clic en el campo de selección "..." de la columna "FB ProDiag".
Se abre un cuadro de diálogo de selección.
4. Haga clic en "Ninguno".
O bien:
1. Haga clic con el botón derecho del ratón en el bloque de instancia de un bloque de función
que contenga supervisiones locales.
2. Elija el comando "Propiedades" del menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de datos de instancia.
3. Haga clic en la sección "Atributos".
4. En "Asignar FB ProDiag", haga clic en el campo de selección "...".
Se abre un cuadro de diálogo de selección.
5. Haga clic en "Ninguno".

Resultado
Se ha eliminado la asignación del bloque de función ProDiag.

8752

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.12 Editar bloques de función ProDiag

24.12

Editar bloques de función ProDiag

24.12.1

Insertar supervisiones nuevas en el FB ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible agregar supervisiones nuevas.

Requisitos
Ha asignado supervisiones globales a un bloque de función ProDiag y lo ha abierto.

Procedimiento
Hay dos posibilidades para agregar una supervisión nueva:
1. Haga clic con el botón derecho del ratón en la última fila de la tabla y seleccione "Agregar
supervisión" en el menú contextual.
Se crea una supervisión nueva con los valores predeterminados (tipo de supervisión:
"Operando", categoría: "1: Error", tiempo de retardo: T#0ms).
2. Seleccione una variable que deba supervisarse.
3. Sobrescriba los ajustes predeterminados modificándolos según convenga.
O bien:
1. En la última fila de la columna "Variable supervisada", introduzca una variable que deba
supervisarse.
Se crea una supervisión nueva con los valores predeterminados (tipo de supervisión:
"Operando", categoría: "1: Error", tiempo de retardo: T#0ms).
2. Si se indica una variable que todavía no está definida, el campo "Variable supervisada"
aparece sobre fondo rojo.
3. Defina la variable en una tabla de variables o en un bloque de datos.

Resultado
Se han agregado las nuevas supervisiones.

24.12.2

Copiar supervisiones en el FB ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible copiar supervisiones de forma
individual o conjunta dentro de la ficha o en otra ficha "Supervisiones de variables".
Programación del PLC
Manual de programación y manejo, 11/2019

8753

Supervisión de máquinas e instalaciones con ProDiag
24.12 Editar bloques de función ProDiag

Requisitos
Se han creado supervisiones globales.

Procedimiento
Para copiar la fila completa de una supervisión, proceda del siguiente modo:
1. Seleccione la fila que desea copiar.
También puede seleccionar varias filas simultáneamente manteniendo pulsada la tecla
<Ctrl> y haciendo clic consecutivamente en las filas que desea seleccionar, o bien en la
primera y en la última manteniendo pulsada la tecla <Mayús>.
2. Elija el comando "Copiar" del menú contextual.
3. Posicione el cursor al final de la tabla.
4. Elija el comando "Pegar" del menú contextual.

Resultado
● La supervisión se copia en el destino.
● A la supervisión copiada se le asigna una ID nueva.
● Todas las demás propiedades de la supervisión se conservan.

24.12.3

Borrar supervisiones en el FB ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible borrar supervisiones individual o
conjuntamente.

Requisitos
Se han creado supervisiones globales.

Procedimiento
Para borrar la fila completa de una supervisión, proceda del siguiente modo:
1. Seleccione las filas que contienen la supervisión que desea borrar.
También puede seleccionar varias filas simultáneamente manteniendo pulsada la tecla
<Ctrl> y haciendo clic consecutivamente en las filas que desea seleccionar, o bien en la
primera y en la última manteniendo pulsada la tecla <Mayús>.
2. Elija el comando "Borrar" del menú contextual.

8754

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.13 Llamar bloques de función ProDiag

Resultado
La supervisión está borrada

24.12.4

Ordenar supervisiones en el FB ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible ordenar supervisiones en las
columnas Variable supervisada" y "FB ProDiag".

Requisitos
Se han creado supervisiones globales.

Procedimiento
Para ordenar las supervisiones, proceda del siguiente modo:
1. Seleccione una de las dos columnas a partir de la cual desea realizar la ordenación.
2. Haga clic en el encabezado de la columna.
La columna se ordena de forma ascendente.
Una flecha hacia arriba indica el sentido de ordenación.
3. Para invertir el sentido de ordenación, haga clic en la flecha.
La columna se ordena de forma descendente. Una flecha hacia abajo indica el sentido de
ordenación.
4. Para restablecer la ordenación original, haga clic por tercera vez en el encabezado de la
columna.

Resultado
Las supervisiones están ordenadas de la forma deseada.

24.13

Llamar bloques de función ProDiag

24.13.1

Sinopsis de la llamada de los bloques de función ProDiag

Descripción
En cuanto se compila el proyecto después de crear y configurar las supervisiones, los bloques
de función ProDiag creados se llaman automáticamente en el bloque de organización ProDiag.

Programación del PLC
Manual de programación y manejo, 11/2019

8755

Supervisión de máquinas e instalaciones con ProDiag
24.14 Cargar bloques ProDiag
De este modo se activan las supervisiones en el proyecto. Ahora, el dispositivo HMI ofrece
diferentes posibilidades para visualizar supervisiones.
Si no desea llamar los bloques de función ProDiag en el OB ProDiag, también puede llamarlos
en otros bloques (FC, FB u OB). Es aconsejable programar las llamadas directamente en un
OB de ciclo o en un bloque que se llame a su vez en un OB de ciclo. En este caso, el
correspondiente bloque de función ProDiag no se llama en el OB ProDiag.

Consulte también
Mostrar bloques definidos por el usuario supervisados (Página 8766)

24.14

Cargar bloques ProDiag

24.14.1

Cargar bloques ProDiag

Descripción
Durante la operación de carga, toda información necesaria para reconstruir el programa
(incluida la información simbólica como, p. ej., nombres y comentarios de bloques lógicos y de
datos) se carga también en el idioma actual del proyecto.
Los bloques ProDiag no tienen reserva de memoria y solo se pueden cargar reinicializando.
Encontrará más información sobre la carga de bloques aquí: Cargar bloques para
S7-1200/1500 (Página 8368)

8756

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

24.15

Visualizar supervisiones ProDiag

24.15.1

Sinopsis de las posibilidades de visualización

Descripción
Existe la posibilidad de ver todas las supervisiones creadas en diferentes sinopsis.
Dependiendo de si se trata de una supervisión local o global, dispone de las siguientes
opciones de visualización:
Opción de visualización

Descripción

Editor de sinopsis de ProDiag En el editor de sinopsis de ProDiag se pueden visualizar tanto las
supervisiones globales como las locales de una CPU.
Propiedades de un bloque de
función

En las propiedades de un bloque de función se pueden visualizar todas
las supervisiones locales que haya creado en la interfaz del bloque de
función.

Bloque de función ProDiag

En el bloque de función ProDiag abierto se pueden visualizar todas las
supervisiones globales y locales con instancias asignadas al bloque de
función ProDiag.

Consulte también
Mostrar las supervisiones de un bloque de función (Página 8764)
Mostrar las supervisiones de todos los bloques de función (Página 8759)
Mostrar las supervisiones de todos los bloques de función llamados (Página 8760)
Ver las supervisiones de todas las variables globales (Página 8758)
Agregar supervisiones de variables en el editor de sinopsis ProDiag (Página 8761)
Mostrar las supervisiones de un bloque de función ProDiag (Página 8765)
Visualizar las supervisiones en el editor de sinopsis ProDiag (Página 8758)

Programación del PLC
Manual de programación y manejo, 11/2019

8757

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

24.15.2

Visualizar las supervisiones en el editor de sinopsis ProDiag

24.15.2.1

Estructura del editor de sinopsis ProDiag

Estructura del editor de sinopsis ProDiag
La figura siguiente muestra a modo de ejemplo los componentes del editor de sinopsis de
ProDiag:






Numeración Significado

Información adicional

1

La ficha "Supervisiones de variables" muestra
todas las supervisiones globales.

Encontrará más información aquí: Ver
las supervisiones de todas las varia‐
bles globales (Página 8758)

2

La ficha "Definiciones de supervisiones en el
FB" muestra todas las supervisiones definidas
en la interfaz de bloques de función definidos
por el usuario, aun cuando dicho bloque de fun‐
ción definido por el usuario todavía no haya sido
llamado en el código del programa.

Encontrará más información
aquí: Mostrar las supervisiones de to‐
dos los bloques de función (Pági‐
na 8759)

3

La ficha "Supervisiones instanciadas del FB"
muestra todas las supervisiones de los bloques
de función que ya se han llamado en el código
del programa.

Encontrará más información
aquí: Mostrar las supervisiones de to‐
dos los bloques de función llamados
(Página 8760)

Indica que para la variable se ha creado al me‐
nos una supervisión.

24.15.2.2

Ver las supervisiones de todas las variables globales

Requisitos
Se supervisa como mínimo una variable en un bloque de datos global o en una tabla de
variables.

8758

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

Procedimiento
Para visualizar todas las supervisiones globales de una CPU, proceda del siguiente modo:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones de variables".
Se muestran todas las supervisiones globales.
3. En caso necesario es posible mostrar y ocultar otras columnas de la tabla. Para ello, haga
clic en el encabezado de la columna y elija el comando "Mostrar/ocultar" del menú
contextual.
Aparece una selección de las columnas disponibles.
4. Para mostrar una columna, active la casilla de verificación de la columna.
5. Para ocultar una columna, desactive la casilla de verificación de la columna.
6. Para mostrar u ocultar varias columnas, haga clic en "Más" y active o desactive la casilla de
verificación de las columnas correspondientes en el cuadro de diálogo "Mostrar/ocultar".
El orden de las columnas no puede modificarse.

Resultado
En la ficha "Supervisiones de variables" se muestran todas las supervisiones globales y las
columnas deseadas.

24.15.2.3

Mostrar las supervisiones de todos los bloques de función

Requisitos
En la interfaz de varios bloques de función se han creado supervisiones.

Procedimiento
Para visualizar las supervisiones de todos los bloques de función, proceda del siguiente modo:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Definiciones de supervisiones en el FB".
Se muestran todas las supervisiones de todos los bloques de función de la CPU, incluidas
las que todavía no están instanciadas.
3. En caso necesario es posible mostrar y ocultar otras columnas de la tabla. Para ello, haga
clic en el encabezado de la columna y elija el comando "Mostrar/ocultar" del menú
contextual.
Aparece una selección de las columnas disponibles.
4. Para mostrar una columna, active la casilla de verificación de la columna.

Programación del PLC
Manual de programación y manejo, 11/2019

8759

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag
5. Para ocultar una columna, desactive la casilla de verificación de la columna.
6. Para mostrar u ocultar varias columnas, haga clic en "Más" y active o desactive la casilla de
verificación de las columnas correspondientes en el cuadro de diálogo "Mostrar/ocultar".
El orden de las columnas no puede modificarse.

Resultado
En la ficha "Definiciones de supervisiones en el FB" se muestran todas las supervisiones de
todos los bloques de función y las columnas deseadas.

24.15.2.4

Mostrar las supervisiones de todos los bloques de función llamados

Requisitos
En el código del programa se ha llamado como mínimo un bloque de función que contiene
supervisiones.

Procedimiento
Para visualizar las supervisiones de todos los bloques de función llamados, proceda del
siguiente modo:
1. Haga doble clic en la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
Se abre el editor de avisos y supervisiones.
2. Haga clic en la ficha "Supervisiones > Supervisiones instanciadas del FB".
Se muestran todos los bloques de datos de instancia que contienen supervisiones de
bloques de función.
3. En caso necesario es posible mostrar y ocultar otras columnas de la tabla. Para ello, haga
clic en el encabezado de la columna y elija el comando "Mostrar/ocultar" del menú
contextual.
Aparece una selección de las columnas disponibles.
4. Para mostrar una columna, active la casilla de verificación de la columna.
5. Para ocultar una columna, desactive la casilla de verificación de la columna.
6. Para mostrar u ocultar varias columnas, haga clic en "Más" y active o desactive la casilla de
verificación de las columnas correspondientes en el cuadro de diálogo "Mostrar/ocultar".
El orden de las columnas no puede modificarse.

Resultado
En la ficha "Instancias de supervisiones en el FB" se muestran todos los bloques de datos de
instancia que contienen supervisiones de bloques de función, así como las columnas
deseadas.

8760

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

24.15.3

Editar el editor de la vista general ProDiag

24.15.3.1

Agregar supervisiones de variables en el editor de sinopsis ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible agregar supervisiones nuevas.

Procedimiento
Hay tres modos de agregar una supervisión nueva:
1. Haga clic con el botón derecho del ratón en la última fila de la tabla y seleccione "Agregar
supervisión" en el menú contextual.
Se crea una supervisión nueva con los valores predeterminados (tipo de supervisión:
"Operando", categoría: "1: Error", tiempo de retardo: T#0ms).
2. Seleccione una variable que deba supervisarse.
3. Sobrescriba los ajustes predeterminados modificándolos según convenga.
O bien:
1. En la última fila de la columna "Variable supervisada", introduzca una variable que deba
supervisarse.
Se crea una supervisión nueva con los valores predeterminados (tipo de supervisión:
"Operando", categoría: "1: Error", tiempo de retardo: T#0ms).
2. Si se indica una variable que todavía no está definida, el campo "Variable supervisada"
aparece sobre fondo rojo.
3. Defina la variable en una tabla de variables o en un bloque de datos.

Resultado
Se han agregado las nuevas supervisiones.

24.15.3.2

Copiar supervisiones de variables en el editor de sinopsis ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible copiar supervisiones de forma
individual o conjunta dentro de la ficha o en otra ficha "Supervisiones de variables".

Requisitos
Se han creado supervisiones globales.

Programación del PLC
Manual de programación y manejo, 11/2019

8761

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

Procedimiento
Para copiar la fila completa de una supervisión, proceda del siguiente modo:
1. Seleccione la fila que desea copiar.
También puede seleccionar varias filas simultáneamente manteniendo pulsada la tecla
<Ctrl> y haciendo clic consecutivamente en las filas que desea seleccionar, o bien en la
primera y en la última manteniendo pulsada la tecla <Mayús>.
2. Elija el comando "Copiar" del menú contextual.
3. Posicione el cursor al final de la tabla.
4. Elija el comando "Pegar" del menú contextual.

Resultado
● La supervisión se copia en el destino.
● A la supervisión copiada se le asigna una ID nueva.
● Todas las demás propiedades de la supervisión se conservan.

24.15.3.3

Borrar supervisiones de variables en el editor de sinopsis ProDiag

Descripción
En la ficha "Supervisiones de variables" no solo es posible visualizar la información de las
supervisiones globales creadas, sino que también es posible borrar supervisiones individual o
conjuntamente.

Requisitos
Se han creado supervisiones globales.

Procedimiento
Para borrar la fila completa de una supervisión, proceda del siguiente modo:
1. Seleccione las filas que contienen la supervisión que desea borrar.
También puede seleccionar varias filas simultáneamente manteniendo pulsada la tecla
<Ctrl> y haciendo clic consecutivamente en las filas que desea seleccionar, o bien en la
primera y en la última manteniendo pulsada la tecla <Mayús>.
2. Elija el comando "Borrar" del menú contextual.

Resultado
La supervisión está borrada

8762

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

24.15.3.4

Clasificar supervisiones de variables en el editor de sinopsis ProDiag

Descripción
En la ficha "Supervisiones de variables", además de visualizar la información de las
supervisiones globales creadas es posible ordenarlas. Las columnas de texto se ordenan
alfabéticamente.

Requisitos
Se han creado supervisiones globales.

Procedimiento
Para ordenar las supervisiones por columnas, proceda del siguiente modo:
1. Seleccione una de las columnas a partir de la cual desea realizar la ordenación.
2. Haga clic en el encabezado de la columna.

Resultado
La tabla se ordena por la columna seleccionada. En el encabezado de la columna se muestra
un triángulo con vértice hacia arriba.
Haciendo clic sobre el encabezado de la columna se cambia el criterio de ordenación:
● Símbolo "▲": la columna se ordena de forma ascendente.
● Símbolo "▼": la columna se ordena de forma descendente.
● Ningún símbolo: se cancela la ordenación. La tabla se muestra con la vista predeterminada.

24.15.3.5

Editar definiciones de supervisión en el bloque de función en el editor de sinopsis ProDiag

Descripción
En la ficha "Definiciones de supervisión en el FB", además de visualizar las supervisiones
definidas en la interfaz del bloque por bloques de función de usuario, también es posible
editarlas.

Requisitos
Se han definido supervisiones para bloques de función.

Programación del PLC
Manual de programación y manejo, 11/2019

8763

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

Procedimiento
Para editar una supervisión, proceda del siguiente modo:
1. Seleccione el campo que se va a editar de la supervisión.
2. Cambie la propiedad que se va a editar de la supervisión.

Resultado
La supervisión está editada.

24.15.3.6

Borrar definiciones de supervisión en el bloque de función en el editor de sinopsis
ProDiag

Descripción
En la ficha "Definiciones de supervisión en el FB", además de visualizar las supervisiones
definidas en la interfaz del bloque por bloques de función de usuario, también es posible borrar
una o varias supervisiones.

Requisitos
Se han definido supervisiones para bloques de función.

Procedimiento
Para borrar una supervisión completa, proceda del siguiente modo:
1. Seleccione las filas que contienen la supervisión que desea borrar.
También puede seleccionar varias filas simultáneamente manteniendo pulsada la tecla
<Ctrl> y haciendo clic consecutivamente en las filas que desea seleccionar, o bien en la
primera y en la última manteniendo pulsada la tecla <Mayús>.
2. En el menú contextual, elija el comando "Borrar"
o
pulse en el teclado la tecla "Supr".

Resultado
La supervisión está borrada

24.15.4

Mostrar las supervisiones de un bloque de función

Requisitos
En la interfaz de un bloque de función definido por el usuario se han creado supervisiones.

8764

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.15 Visualizar supervisiones ProDiag

Procedimiento
Para visualizar las supervisiones del bloque de función, proceda del siguiente modo:
1. Haga clic con el botón derecho del ratón en el bloque de función en el árbol de navegación
y seleccione "Propiedades" en el menú contextual.
Se abrirá el cuadro de diálogo de propiedades del bloque de función.
2. Haga clic en la ficha "Definiciones de supervisiones en el FB".
3. En caso necesario es posible mostrar y ocultar otras columnas de la tabla. Para ello, haga
clic en el encabezado de la columna y elija el comando "Mostrar/ocultar" del menú
contextual.
Aparece una selección de las columnas disponibles.
4. Para mostrar una columna, active la casilla de verificación de la columna.
5. Para ocultar una columna, desactive la casilla de verificación de la columna.
6. Para mostrar u ocultar varias columnas, haga clic en "Más" y active o desactive la casilla de
verificación de las columnas correspondientes en el cuadro de diálogo "Mostrar/ocultar".
El orden de las columnas no puede modificarse.
O bien:
1. Haga doble clic en el bloque de función del árbol del proyecto.
Mientras no se seleccione nada en la interfaz del bloque, las supervisiones se mostrarán en
la ficha "Definiciones de supervisiones en el FB" en la ventana de inspección "Propiedades".
2. A partir de aquí, el procedimiento es el mismo que el descrito en el punto 3 anterior.

Resultado
En la ficha "Definiciones de supervisiones en el FB" se muestran todas las supervisiones del
bloque de función definido por el usuario y las columnas deseadas.

24.15.5

Mostrar las supervisiones de un bloque de función ProDiag

Requisitos
Al bloque de función ProDiag se le ha asignado como mínimo una supervisión.

Procedimiento
Para visualizar todas las supervisiones globales y locales de un bloque de función ProDiag,
proceda del siguiente modo:
1. En el árbol del proyecto, haga doble clic en el bloque de función ProDiag deseado.
Se abre el bloque de función ProDiag .
2. Haga clic en la ficha "Supervisiones de variables" o bien en "Supervisiones instanciadas del
FB".

Programación del PLC
Manual de programación y manejo, 11/2019

8765

Supervisión de máquinas e instalaciones con ProDiag
24.16 Mostrar bloques definidos por el usuario supervisados
3. En caso necesario es posible mostrar y ocultar otras columnas de la tabla. Para ello, haga
clic en el encabezado de la columna y elija el comando "Mostrar/ocultar" del menú
contextual.
Aparece una selección de las columnas disponibles.
4. Para mostrar una columna, active la casilla de verificación de la columna.
5. Para ocultar una columna, desactive la casilla de verificación de la columna.
6. Para mostrar u ocultar varias columnas, haga clic en "Más" y active o desactive la casilla de
verificación de las columnas correspondientes en el cuadro de diálogo "Mostrar/ocultar".
El orden de las columnas no puede modificarse.

Resultado
En la ficha "Supervisiones de variables" se muestran todas las supervisiones globales y en la
ficha "Supervisiones instanciadas del FB" se muestran todas las supervisiones locales
asignadas a ese bloque de función ProDiag.

24.16

Mostrar bloques definidos por el usuario supervisados

24.16.1

Mostrar bloques definidos por el usuario supervisados
Es posible mostrar en la vista general del árbol del proyecto todos los bloques de una CPU en
los que se han creado supervisiones.

Requisitos
Se han creado supervisiones ProDiag y se ha compilado el programa.

Procedimiento
Para ver la vista general, proceda del siguiente modo:
1. Seleccione la carpeta "Bloques de programa" del árbol del proyecto.
2. Haga clic en el botón "Maximiza/minimiza la vista general".
3. Haga clic en el encabezado de la columna y elija el comando "Mostrar/ocultar" del menú
contextual.
4. Aparece una selección de las columnas disponibles.
5. Active la casilla de verificación de la columna "Supervisiones" para mostrar la columna
deseada.

Resultado
Para todos los bloques que contienen supervisiones, en la columna "Supervisiones" se
muestra el icono ProDiag.

8766

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.17 Exportar e importar supervisiones ProDiag y propiedades de un FB ProDiag

24.17

Exportar e importar supervisiones ProDiag y propiedades de un FB
ProDiag

24.17.1

Sinopsis de la exportación e importación de supervisiones y propiedades de un
FB ProDiag

Descripción
Es posible exportar no solo las supervisiones creadas desde las tablas sinópticas ProDiag
"Supervisiones de variables" y "Definiciones de supervisiones en el FB", sino también las
propiedades de uno o varios bloques de función ProDiag.
Estas supervisiones y propiedades pueden exportarse en un formato XLSX estandarizado
(hoja de cálculo Excel) y editarse con editores de tablas externos (p. ej. para traducir). También
es posible importar al TIA Portal las nuevas supervisiones y propiedades y los nuevos bloques
de función ProDiag agregados con editores de tablas externos. El sistema crea
automáticamente las supervisiones y propiedades y los bloques de función ProDiag.
Desde la tabla general de ProDiag "Supervisiones instanciadas del FB" se pueden exportar e
importar las asignaciones de bloques de función ProDiag a supervisiones locales.

Formato del archivo de exportación
Los títulos de las columnas tienen nombres fijos asignados por el sistema que no deben
cambiarse. Se exportan todas las columnas, aunque se hayan ocultado en la tabla sinóptica
ProDiag. Cada supervisión obtiene una fila propia en el archivo.
La siguiente tabla indica los contenidos previstos en las diferentes columnas de la ficha
"ProDiag Supervisions":
Columna

Explicación

FB ProDiag

Nombre del bloque de función ProDiag correspon‐
diente

ID

Número de la supervisión

Supervised tag / parameter

Variable / parámetro supervisado

Trigger

Estado lógico que se supervisa del operando:
● TRUE
● FALSE

Type of supervision

Tipo de supervisión:
● Operando
● Enclavamiento
● Reacción
● Acción
● Posición
● Texto de aviso
● Mensaje de error

Programación del PLC
Manual de programación y manejo, 11/2019

8767

Supervisión de máquinas e instalaciones con ProDiag
24.17 Exportar e importar supervisiones ProDiag y propiedades de un FB ProDiag
Columna

Explicación

Category

Categoría:
● 1 (Error)
● 2 (Advertencia)
● 3 (Información)

Subcategory 1 y 2

Subcategorías que se han creado en la configura‐
ción de supervisiones de ProDiag

Delay time

En función del tipo de supervisión (solo uno):
● Retardo
● Tiempo de reacción
● Tiempo de arranque

Disparador C1, C2 o C3

Estado lógico que se supervisa de las condiciones:
● TRUE
● FALSE

Condición 1, 2 o 3

Operando que se utiliza como condición

Specific text field

Campo de texto específico

Tag 1 (SD_4), Tag 2 (SD_5) o Tag 3 (SD_6)

Valores asociados del campo de texto específico
que se leen en tiempo de ejecución.

La siguiente tabla indica los contenidos previstos en las diferentes columnas de la ficha
"ProDiag Settings":
Columna

Explicación

FB ProDiag

Nombre del o de los bloques de función ProDiag
correspondientes

Global enabler

Criterio de habilitación global

Category

Categoría:
● 1 (Error)
● 2 (Advertencia)
● 3 (Información)

8768

Category enabler

Criterios de habilitación de las categorías

Acknowledge tag

Variables de confirmación de las diferentes cate‐
gorías

Display class

Discriminador

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.17 Exportar e importar supervisiones ProDiag y propiedades de un FB ProDiag

Ejemplo
La figura siguiente muestra a modo de ejemplo un extracto del archivo de exportación:

Consulte también
Exportar supervisiones y propiedades de un FB ProDiag (Página 8769)
Importar supervisiones y propiedades de un FB ProDiag (Página 8771)

24.17.2

Exportar supervisiones y propiedades de un FB ProDiag

Requisitos
Se han creado supervisiones globales y se han definido propiedades para uno o varios bloques
de función ProDiag.

Programación del PLC
Manual de programación y manejo, 11/2019

8769

Supervisión de máquinas e instalaciones con ProDiag
24.17 Exportar e importar supervisiones ProDiag y propiedades de un FB ProDiag
A partir de las propiedades del bloque se exportan la configuración de supervisiones y los
ajustes siguientes:
● Área "General": la versión del bloque
● Área "Atributos": las opciones "Adquisición de primer valor" y "Utilizar sello de tiempo
central"
● Área "Configuración de supervisiones": todos los ajustes

Nota
Exportación de las propiedades de un bloque de función ProDiag
Las propiedades de un bloque de función ProDiag solo pueden exportarse desde la ficha
"Supervisiones de variables".

Procedimiento
Para exportar las supervisiones y propiedades de uno o varios bloques de función ProDiag,
proceda del siguiente modo:
1. Abra la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
2. Haga clic en la ficha "Supervisiones".
3. Haga clic en "Exporta supervisiones de variables" en la barra de herramientas de la ficha
"Supervisiones de variables".
Se abrirá el cuadro de diálogo "Guardar como".
4. Seleccione una ubicación y asigne un nombre de archivo.
5. Haga clic en "Guardar".
Si se guarda correctamente, se abrirá el cuadro de diálogo "Exportación finalizada".
6. Confirme con "Aceptar".

8770

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.17 Exportar e importar supervisiones ProDiag y propiedades de un FB ProDiag
O bien:
1. Haga doble clic en el bloque de función ProDiag para abrirlo.
2. Haga clic en "Exporta supervisiones de variables" en la barra de herramientas. Desde el
bloque de función ProDiag solo se pueden exportar supervisiones globales.
Se abrirá el cuadro de diálogo "Guardar como".
3. Seleccione una ubicación y asigne un nombre de archivo.
4. Haga clic en "Guardar".
Si se guarda correctamente, se abrirá el cuadro de diálogo "Exportación finalizada".
5. Confirme con "Aceptar".

Resultado
En la ubicación seleccionada se crea un archivo .xlsx:
● En la ficha "ProDiag Supervisions" encontrará todas las supervisiones exportadas.

● En la ficha "ProDiag Settings" encontrará todas las propiedades específicas de ProDiag
que se han definido para los bloques de función ProDiag.

24.17.3

Importar supervisiones y propiedades de un FB ProDiag

Requisitos
Se han exportado supervisiones y propiedades de un bloque de función ProDiag a un
archivo .xlsx.

Procedimiento
Para importar las supervisiones y propiedades de uno o varios bloques de función ProDiag,
proceda del siguiente modo:
1. Abra la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
2. Haga clic en la ficha "Supervisiones".

Programación del PLC
Manual de programación y manejo, 11/2019

8771

Supervisión de máquinas e instalaciones con ProDiag
24.17 Exportar e importar supervisiones ProDiag y propiedades de un FB ProDiag
3. Haga clic en "Importa supervisiones de variables" en la barra de herramientas de la ficha
"Supervisiones de variables".
Se abre el cuadro de diálogo "Importa supervisiones de variables".
4. Seleccione la ruta en la que está depositado el archivo que debe importarse.
Se abre el cuadro de diálogo "Abrir".
5. Seleccione el archivo .xlsx que desee.
6. Confirme el cuadro de diálogo haciendo clic en "Abrir".
7. En el cuadro de diálogo "Importa supervisiones de variables" existen distintas opciones:
– "Importar supervisiones"
Si se activan las opciones "Importar supervisiones" y "Borrar las supervisiones
existentes", las supervisiones existentes de bloques de función ProDiag, para las que
también haya supervisiones en el archivo de importación .xlsx, se borrarán de la tabla
sinóptica y se agregarán las nuevas supervisiones procedentes del archivo .xlsx. Si para
un bloque de función ProDiag no existen supervisiones en el archivo de
importación .xlsx, el mismo se excluye del borrado.
Si se desactiva la opción "Borrar las supervisiones existentes", las supervisiones
existentes se conservarán y las nuevas supervisiones se agregarán.
– "Importar y sobrescribir ajustes de supervisión"
Si se activa la opción "Importar y sobrescribir ajustes de supervisión" y el bloque de
función ProDiag ya contiene ajustes de supervisión, los ajustes viejos se sobrescribirán
con los nuevos.
8. Haga clic en el botón "Importar".
Se abre el cuadro de diálogo "Importar supervisiones de variables". El cuadro de diálogo
muestra el estado actual de la importación.
9. Si se importa correctamente, se abrirá el cuadro de diálogo "Importación finalizada".
10.Si se producen errores durante la importación, se abrirá el cuadro de diálogo "Importación
finalizada con advertencias".
Pueden producirse los siguientes errores:
– Hay entradas erróneas en el archivo .xlsx.
– Se ha rebasado por exceso el número máximo de supervisiones para un bloque de
función ProDiag.
– El bloque de función indicado en el archivo .xlsx no está en el programa. (Solo puede
suceder cuando se importan supervisiones dentro de la tabla sinóptica "Definiciones de
supervisiones en el FB".)
11.En este caso, haga clic en "Haga clic aquí para ver el archivo de informe".
12.Confirme con "Aceptar".
O bien:
1. Haga doble clic en el bloque de función ProDiag para abrirlo.
2. Haga clic en "Importa supervisiones de variables" en la barra de herramientas.
Se abre el cuadro de diálogo "Importa supervisiones de variables".
3. Seguir todos los demás pasos como se describe arriba, a partir del paso 4.

8772

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.18 Exportar e importar asignaciones de FB ProDiag a DB de instancia

Resultado
En la tabla sinóptica ProDiag se muestran las supervisiones importadas y, en los bloques de
función ProDiag, las propiedades de bloques de acuerdo con las propiedades exportadas
previamente.
Para las supervisiones globales se aplica lo siguiente:
Si se han agregado supervisiones nuevas en el archivo .xlsx, se asignarán automáticamente
al bloque de función ProDiag correspondiente después de la importación.
Para las supervisiones locales se aplica lo siguiente:
Con supervisiones locales, primero se importan únicamente las definiciones de las
supervisiones y, una vez importadas las asignaciones, las supervisiones se asignan a bloques
de función ProDiag concretos.

24.18

Exportar e importar asignaciones de FB ProDiag a DB de instancia

24.18.1

Sinopsis de la exportación e importación de asignaciones

Descripción
Es posible exportar las asignaciones creadas de bloques de función ProDiag a los bloques de
datos de instancia de bloques de función definidos por el usuario de la tabla sinóptica de
ProDiag "Supervisiones instanciadas del FB".
Estas asignaciones pueden exportarse en un formato XLSX estandarizado (hoja de cálculo
Excel) y editarse con editores de tablas externos (p. ej. para compilar). También es posible
importar al TIA Portal asignaciones nuevas que se agregaron con editores de tablas externos.

Formato del archivo de exportación
Los títulos de las columnas tienen nombres fijos asignados por el sistema que no deben
cambiarse. Cada asignación obtiene una fila propia en el archivo.
La siguiente tabla indica los contenidos previstos en las columnas individuales:
Columna

Explicación

Instance

Nombre del bloque de datos de instancia corres‐
pondiente de un bloque de función definido por el
usuario

FB ProDiag

Nombre del bloque de función ProDiag

Programación del PLC
Manual de programación y manejo, 11/2019

8773

Supervisión de máquinas e instalaciones con ProDiag
24.18 Exportar e importar asignaciones de FB ProDiag a DB de instancia

Ejemplo
La figura siguiente muestra a modo de ejemplo un extracto del archivo de exportación:

Consulte también
Exportar asignaciones (Página 8774)
Importar asignaciones (Página 8774)

24.18.2

Exportar asignaciones

Requisitos
Ha creado supervisiones locales y llamado el bloque de función en el código del programa.

Procedimiento
Para exportar las asignaciones, proceda del siguiente modo:
1. Abra la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
2. En la ficha "Supervisiones" haga clic en la ficha "Supervisiones instanciadas del FB".
3. Haga clic en "Exporta asignaciones de FB ProDiag a DB de instancia" en la barra de
herramientas.
Se abrirá el cuadro de diálogo "Guardar como".
4. Seleccione una ubicación y asigne un nombre de archivo.
5. Haga clic en "Guardar".
Si se guarda correctamente, se abrirá el cuadro de diálogo "Exportación finalizada".
6. Confirme con "Aceptar".

Resultado
En la ubicación seleccionada se crea un archivo .xlsx.

24.18.3

Importar asignaciones

Requisitos
Se han exportado asignaciones a un archivo .xlsx.

8774

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.19 Mostrar referencias cruzadas ProDiag

Procedimiento
Para importar las asignaciones, proceda del siguiente modo:
1. Abra la carpeta "Supervisiones y avisos del PLC" en el árbol del proyecto.
2. En la ficha "Supervisiones" haga clic en la ficha "Supervisiones instanciadas del FB".
3. Haga clic en "Importa asignaciones de FB ProDiag a DB de instancia" en la barra de
herramientas.
Se abre el cuadro de diálogo "Importa asignaciones de FB ProDiag a DB de instancia".
4. Seleccione la ruta en la que está depositado el archivo que debe importarse.
Se abre el cuadro de diálogo "Abrir".
5. Seleccione el archivo .xlsx que desee.
6. Confirme el cuadro de diálogo haciendo clic en "Abrir".
7. Haga clic en el botón "Importar".
Se abre el cuadro de diálogo "Importa asignaciones de FB ProDiag a DB de instancia". El
cuadro de diálogo muestra el estado actual de la importación.
8. Si se importa correctamente, se abrirá el cuadro de diálogo "Importación finalizada".
9. Si se producen errores durante la importación, se abrirá el cuadro de diálogo "Importación
finalizada con advertencias".
Pueden producirse los siguientes errores:
– Hay entradas erróneas en el archivo .xlsx.
– Faltan asignaciones en el archivo .xlsx.
10.En este caso, haga clic en "Haga clic aquí para ver el archivo de informe".
11.Confirme con "Aceptar".

Resultado
En la tabla sinóptica ProDiag se muestran las asignaciones importadas.

24.19

Mostrar referencias cruzadas ProDiag

24.19.1

Resumen de referencias cruzadas

Descripción
La lista de referencias cruzadas ofrece dentro del programa de usuario una visión general del
lugar de uso (ubicaciones) de las variables supervisadas y de variables que, p. ej., se utilizan
como condición dentro de una supervisión ProDiag.
Es posible saltar directamente de la lista de referencias cruzadas al lugar de uso de una
variable supervisada.

Programación del PLC
Manual de programación y manejo, 11/2019

8775

Supervisión de máquinas e instalaciones con ProDiag
24.19 Mostrar referencias cruzadas ProDiag
Encontrará más información sobre cómo mostrar referencias cruzadas aquí: Información
general sobre las referencias cruzadas (Página 8483)

24.19.2

Mostrar referencias cruzadas

Descripción
La información correspondiente a las referencias cruzadas de una variable supervisada
seleccionada (supervisiones globales) se muestra en la ventana de inspección en la ficha
"Información > Referencias cruzadas", y en la lista de referencias cruzadas en la ventana de
programación. Para cada variable supervisada que se seleccione, se mostrará el bloque de
función ProDiag al que está asignada y su lugar de uso (ubicación). Si la variable seleccionada,
además de estar supervisada, se utiliza, p. ej., como condición dentro de otra supervisión
ProDiag, en la lista se indicará también dicha utilización. Una variable supervisada se
reconoce porque en la columna "Acceso" aparece el identificador "PRODIAG Supervision". Si
la variable se utiliza como condición, en la columna "Acceso" se marca con el identificador
"Read-only"
En los lugares siguientes de TIA Portal pueden verse las referencias cruzadas:
● Tabla de variables estándar
● Editor de vista general de ProDiag
– Ficha "Supervisiones de variables"
● Bloque de función ProDiag
– Ficha "Supervisiones de variables"

Procedimiento
Para visualizar las referencias cruzadas en la ventana de inspección, proceda del siguiente
modo:
1. Haga clic en la variable supervisada, p. ej. en la tabla de variables estándar.
En la ficha "Información > Lista de referencias cruzadas" de la ventana de inspección se
mostrará la variable supervisada y el bloque de función ProDiag asignado.
2. Haga clic en la flecha situada a la izquierda del bloque de función ProDiag.
Se mostrarán todos los lugares de uso o ubicaciones (ID de supervisión) de la variable.
3. Haga clic en uno de los lugares de uso mostrados para saltar directamente a él.
Se abre el bloque de función ProDiag correspondiente y se selecciona la celda
correspondiente.
Nota
Seleccionar una celda
Si no hay seleccionada ninguna celda, no se muestra la columna correspondiente que
contiene la variable.

8776

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.20 Adquisición de primeros valores

24.20

Adquisición de primeros valores

24.20.1

Sinopsis de la adquisición de primeros valores

Requisitos
Para activar la adquisición de primeros valores hay que seleccionar la versión 2.0 en lugar de
la versión 1.0 en el bloque de función ProDiag.
La adquisición de primeros valores para ProDiag puede realizarse en los lenguajes de
programación KOP y FUP.
Para poder adquirir los primeros valores, deben cumplirse los siguientes requisitos en el
programa de usuario:
● Es posible registrar como máximo 32 estados lógicos. Si un segmento KOP/FUP tiene más
de 32 elementos no puede registrarse.
● Con supervisiones globales: El programa de usuario solo puede tener acceso de escritura
a la variable que se va a supervisar y este acceso de escritura debe encontrarse en la barra
colectora derecha.
● Con supervisiones locales: Para cada instancia nueva se crea una supervisión propia de la
instancia. Sin embargo, si en el bloque llamante se utilizan variables locales como
interconexión previa, el registro de primer valor solo funcionará si la instancia
correspondiente del bloque llamante tiene por nombre "FBName_DB" y en la interfaz del
bloque se han utilizado únicamente las secciones Input, Output y Static.
Encontrará más información aquí: Activar la adquisición de primeros valores (Página 8780)

Registro de los primeros valores
Los primeros valores se pueden registrar para los siguientes tipos de supervisiones:
Tipos de su‐
pervisiones
Operando

Supervisiones globales
Input

Output

Supervisiones locales

Marcas

Input

Output

Static

-

-

-

x

-

-

Enclavamiento -

x

x

x

-

-

Acción

-

-

-

x

-

-

Reacción

-

-

-

x

-

-

Posición

-

-

-

x

-

-

Texto de aviso -

-

-

-

-

-

Mensaje de
error

-

-

-

-

-

-

Descripción
La adquisición de primeros valores permite analizar por qué se ha lanzado un aviso de
supervisión. Para ello se registran los primeros valores de los operandos que están
programados antes de los operandos supervisados en el programa de usuario.
Programación del PLC
Manual de programación y manejo, 11/2019

8777

Supervisión de máquinas e instalaciones con ProDiag
24.20 Adquisición de primeros valores
Existe la posibilidad de seguir la ejecución del programa de usuario desde un dispositivo HMI.
Al hacerlo, los datos y valores del panel de operador se pueden comparar y actualizar
continuamente con la CPU. Para cada bloque KOP o FUP se muestra siempre el estado actual
del programa en el panel de operador.
En las supervisiones globales, se registran los primeros valores de todos los operandos
booleanos del segmento. Si en el segmento existen varias barras colectoras que no están
conectadas entre sí, se registran solo los primeros valores de la barra colectora
correspondiente.
En las supervisiones locales, se registran solo los primeros valores especificados en la
llamada de bloque como condiciones para el parámetro supervisado.
En cuanto se produce un evento que dispara un aviso de supervisión, se registran los primeros
valores. Los primeros valores se guardan en el bloque de datos de instancia ProDiag en una
DWORD en el parámetro estático CRIT_ERR y cada uno de los estados lógicos ocupa un bit.
Se registran en el ciclo en el que se ha producido el evento. El aviso de supervisión se envía
en el siguiente ciclo. Es posible registrar como máximo 32 estados lógicos por cada segmento
en un bloque KOP o FUP. Los primeros valores no vuelven a cambiar hasta que se produce
otro evento en el segmento activo.
El visor de código PLC permite visualizar los valores actuales. En cuanto se produce un evento
es posible visualizar también los primeros valores y detectar inmediatamente los operandos
erróneos (análisis de criterios). Es posible conmutar entre la visualización de los valores
actuales y la visualización de los primeros valores.
Para el análisis de criterios en el dispositivo HMI, los operandos se leen siempre de derecha
a izquierda, empezando por la bobina y a contracorriente.
Encontrará más información sobre la visualización en el panel HMI aquí: "Visualizar procesos
> Usar funciones de diagnóstico > Supervisar máquinas e instalaciones con ProDiag"

Instrucciones soportadas
Para la adquisición de primeros valores pueden utilizarse las siguientes instrucciones en KOP
y FUP:
Instrucciones

Visualización en el panel de operador (HMI)

Operaciones lógicas con bits
Contacto normalmente abierto

Primeros valores y análisis de criterios

Contacto normalmente cerrado
Invertir RLO
Asignación

La instrucción es asistida, pero no es relevante para los primeros
valores o el análisis de criterios.

Negar asignación
Desactivar salida

Primeros valores

Activar salida
Flipflop de activación/desactiva‐
ción

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

Flipflop de desactivación/activa‐
ción
AND (FUP)

Primeros valores y análisis de criterios

OR (FUP)

8778

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.20 Adquisición de primeros valores
Instrucciones

Visualización en el panel de operador (HMI)

Comparación
Igual

Primeros valores y análisis de criterios

Diferente
Mayor o igual
Menor o igual
Mayor
Menor
Temporizadores
TP

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

TON

Primeros valores y análisis de criterios

TOF

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

TONR
Contadores
CTU
CTD

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

CTUD

En las operaciones lógicas con bits se registra el estado del operando y en los comparadores,
el resultado de la comparación.
En los flipflops se registran ambas entradas (R y S) si estas están interconectadas.
En los temporizadores y contadores se registra el estado del operando en la salida y,
adicionalmente, las entradas, si estas están interconectadas (por ejemplo, en CTUD: CU, CD,
R, LD)

Orden de evaluación en el dispositivo HMI en el visor de código PLC
Los estados lógicos en el correspondiente DWORD o en el listado de operandos de la tabla de
símbolos del visor de código PLC se registran en un orden definido fijo. Por ejemplo, en un
segmento KOP se empieza siempre junto a la barra colectora en la parte superior izquierda y
se termina en la parte inferior derecha.
Nota
En la programación, tenga en cuenta el orden de evaluación
Este orden fijo se respeta también en el análisis de criterios en el dispositivo HMI al incluir los
operandos erróneos en la lista de la tabla de símbolos. Tenga en cuenta este orden de
evaluación al programar los segmentos.
Encontrará más información sobre el orden de la lista aquí: Ejemplo de orden en la lista
(Página 8780).

Programación del PLC
Manual de programación y manejo, 11/2019

8779

Supervisión de máquinas e instalaciones con ProDiag
24.20 Adquisición de primeros valores

Consulte también
Estructura de un bloque de datos de instancia ProDiag de la versión 2.0 (Página 8693)
Contenido de un bloque de datos de instancia ProDiag de la versión 2.0 (Página 8694)

24.20.2

Activar la adquisición de primeros valores

Procedimiento
Para activar la adquisición de primeros valores, proceda del siguiente modo:
1. Haga clic en el bloque de función ProDiag con el botón derecho del ratón y seleccione
"Propiedades..." en el menú contextual.
Se abre el cuadro de diálogo de propiedades del bloque de función ProDiag.
2. En la ficha "General > Bloque", seleccione la versión V2.0.
3. Haga clic en la ficha "Atributos".
4. Active la opción "Adquisición de primeros valores (para el análisis de criterios en paneles
de operador)".
5. Haga clic en "Aceptar".
6. Compile y cargue el programa de usuario.

Resultado
La adquisición de primeros valores está activada cuando finaliza la compilación del programa
de usuario. Esto significa que los estados lógicos correspondientes se registran en caso de
fallo.

24.20.3

Ejemplo de orden en la lista
Los valores actuales o los primeros valores y la lista de operandos de la tabla de símbolos del
visor de código PLC se registran siguiendo el mismo orden definido fijo.
Los ejemplos siguientes ilustran cómo funcionan el registro de los estados lógicos en un
segmento KOP y la lista de operandos en el panel HMI.

8780

Programación del PLC
Manual de programación y manejo, 11/2019

Supervisión de máquinas e instalaciones con ProDiag
24.20 Adquisición de primeros valores

Registro de estados lógicos en caso de fallo
Los estados lógicos se escriben en el parámetro estático CRIT_ERR en el orden siguiente:





ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ



)%3UR'LDJ
9

'%GHLQVWDQFLD
3UR'LDJ

':25' HVWDGRVOµJLFRV FULWHULRV

%LW %LW


2XWSXW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW









7DJB

7DJB

7DJB

7DJB

7DJB

7DJB



En el dispositivo HMI todos los operandos se muestran en una lista en el mismo orden que en
la tabla de símbolos del visor de código PLC:
Nombre del
símbolo

Operando

Comentario

Tag_1

p. ej. %M2xy

Modo automático / manual

Tag_3

Conectar motor

Tag_2

Enclavamiento_1

Tag_1

Modo automático / manual

Tag_5

Pulsador manual

Tag_4

Barrera fotoeléctrica

Lista de los operandos en caso de fallo
Si en el segmento se producen fallos, los operandos erróneos se marcan en color y en la tabla
de símbolos solo se muestra una lista de los operandos erróneos:


ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ


ಯ7DJBಯ

ಯ7DJBಯ

2XWSXW



Programación del PLC
Manual de programación y manejo, 11/2019

8781

Supervisión de máquinas e instalaciones con ProDiag
24.20 Adquisición de primeros valores
Lista de los operandos erróneos en la tabla de símbolos del visor de código PLC:
Nombre del
símbolo

Operando

Comentario

Tag_2

p. ej. %M2xy

Enclavamiento_1

Tag_1

Modo automático / manual

Tag_5

Pulsador manual

Tag_4

Barrera fotoeléctrica

Programación optimizada del segmento en caso de fallo
Con el fin de detectar rápidamente a primera vista que la barrera fotoeléctrica es la
responsable del error, se recomienda, en este ejemplo, programar primero el operando
"Tag_4: Barrera fotoeléctrica":


ಯ7DJBಯ



ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

2XWSXW


De este modo la información sobre la barrera fotoeléctrica abierta se representa en la primera
línea de la tabla de símbolos:

8782

Nombre del
símbolo

Operando

Comentario

Tag_4

p. ej. %M2xy

Barrera fotoeléctrica

Tag_2

Enclavamiento_1

Tag_1

Modo automático / manual

Tag_5

Pulsador manual

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético
-, 8117
-D, 1636, 5416
-I, 1632, 5412
-R, 1643, 5424

#
#, 7794

&

+D, 1635, 5415
+I, 1631, 5411
+R, 1642, 5423

<
<, 8120
<=, 8120
<>, 8120, 8126

=
=, 8120
==, 8126

&, 8125, 8126

>
(
(), 8126

*
*, 8117
**, 8117
*D, 1636, 5417
*I, 1633, 5413
*R, 1644, 5425

/
/, 8117
/D, 1637, 5417
/FC, 184
/I, 1634, 5413
/R, 1645, 5426

:
:=, 8126, 8127

+
+, 8117
+AR1, 1757, 5540
+AR2, 1758, 5541

Programación del PLC
Manual de programación y manejo, 11/2019

>, 8120
>=, 8120

A
A, 1579, 5356
A(, 1587, 5364
A_DEAD_B
Instrucción, 6398
Parámetros de entrada, 6400
Parámetros de salida, 6401
AB, 7893
Abrir una tabla de forzado permanente, 8609
Abrir una tabla de observación, 8578
ABS, 780, 1156, 1646, 1826, 2061, 4892, 5111, 5427,
5584, 5720
ABS_CTRL, 6583
Bloques de datos empleados, 6584
Comportamiento en caso de error, 6585
Descripción, 6583
Estado de la petición, 6604
Funcionamiento, 6583
Llamada, 6584
Peticiones, 6601
Selectores de función, 6602
Señales de control, 6584
Valores de retorno, 6584
ABS_CTRL_451, 6587
Bloques de datos empleados, 6588
Comportamiento en caso de error, 6589

8783

Índice alfabético

Descripción, 6587
Funcionamiento, 6587
Llamada, 6588
Parámetros, 6588
Peticiones, 6604
Selectores de función, 6604
Señales de control, 6588
Valores de retorno, 6588
ABS_DIAG, 6585
Arranque, 6586
Bloques de datos empleados, 6586
Comportamiento en caso de error, 6586
Datos de diagnóstico, 6586
Descripción, 6585
Funcionamiento, 6585
Llamada, 6586
Peticiones, 6586
Valores de retorno, 6586
ABS_DIAG_451, 6589
Arranque, 6590
Bloques de datos empleados, 6590
Comportamiento en caso de error, 6590
Datos de diagnóstico, 6591
Descripción, 6589
Funcionamiento, 6589
Llamada, 6590
Parámetros, 6590
Peticiones, 6590
Valores de retorno, 6590
ABS_INIT, 6582
Bloques de datos empleados, 6583
Descripción, 6582
Llamada, 6583
Parámetros, 6583
Valores de retorno, 6583
Acceder a operandos, 114
Acceso a bloques
Bloque de datos, 7855
Acceso a operandos, 109, 110, 112, 115, 116, 118,
280, 287, 291, 299
Acceso optimizado, 54, 56
Acceso optimizado al bloque, 208
Acceso Slice, 116
Acción
Acciones controladas por evento, 8204
Acciones estándar, 8202
Borrar, 8286
Contadores, 8209
Copiar, 8284
Cortar, 8284
Desplazar, 8285
Insertar, 8278

8784

Introducción, 8199
Llamada de bloque, 8207
Modificar, 8283
Pegar, 8284
Principios básicos, 8201
Temporizadores, 8208
Acoplamiento punto a punto
Activar señales de salida con SGN_SET, 4563
Borrar búfer de recepción con RCV_RST, 4561
Configurar parámetros de comunicación con
PORT_CFG, 4544
Configurar parámetros de recepción con
RCV_CFG, 4549
Configurar parámetros de transferencia serie con
SEND_CFG, 4547
Consultar estado lógico con SGN_GET, 4562
Habilitar recepción con RCV_PTP, 4560
Lanzar la transferencia de datos con
SEND_PTP, 4557
ACOS, 798, 1174, 1652, 1841, 2074, 4909, 5129,
5434, 5596, 5733
ACT_TINT, 2650
Activar
Área de periferia, 4980, 5301, 5653, 5778
Área por bits, 4979, 5199, 5300, 5652, 5777
Área por bytes, 4983, 5203, 5303, 5655, 5780
Mapa de bits, 628, 1005, 4979, 5199, 5300, 5652,
5777
Operando, 627, 631, 1004, 1008, 1596, 4822,
4823, 5041, 5042, 5373
RLO, 1598, 5375
Valor inicial del contador, 1099, 5092
Activar operando con flanco de señal
ascendente, 637, 1014
Activar operando con flanco de señal
descendente, 638, 1016
Actualización
Componentes PROFINET CBA, 7612
Interconexión DP, 7612
Actualizar interconexiones DP con PN_DP, 7616
Acumulador, 1754, 1755, 1756, 5534, 5535, 5536,
5537, 5538, 8065
Acumulador de tiempo, 657, 1034, 1052, 1380, 1780,
2049, 5021, 5240, 5345, 5691, 5815
AD, 1733, 5513, 7893
ADD, 769, 1145, 4885, 5103
ADM_ZONE
Instrucción, 6770
Parámetros de entrada/salida, 6772
Parámetros de salida, 6772
Variables estáticas, 6772
AG_CNTEX, 7331

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

AG_CNTRL, 7347
AG_LOCK, 7327
AG_LRECV, 7469
AG_LSEND, 7462
AG_RECV / AG_LRECV / AG_SRECV, 7321
AG_SEND / AG_LSEND / AG_SSEND, 7316
AG_UNLOCK, 7329
AG-RECV, 7469
AG-SEND, 7462
Ajustar los nemónicos, 7669
Ajustar valor límite, 784, 1161, 1419, 1831, 2065,
4897, 5116, 5271, 5587, 5724
Ajuste del ancho de tabulación, 8142
Ajuste del tipo, tamaño y color de la fuente, 8141
Ajustes de la lista de referencias cruzadas, 8486
Ajustes de test de GRAPH
Modificar, 8534
Resumen, 8533
Alarma de multiprocesamiento
Disparar con MP_ALM, 6064
Alarma de proceso
Disparar en el maestro DP con DP_PRAL, 5947
Alarma de retardo
Anular con CAN_DINT, 2663, 6047
Consultar con QRY_DINT, 2664, 6047
Iniciar con SRT_DINT, 2661, 6046
Instrucciones, 2660, 6044
Alarma de tiempo para control, 974, 977, 1348, 1351,
1556, 1559, 2015, 2018, 2187, 2190, 5005, 5009,
5225, 5228, 5326, 5329, 5677, 5680, 5801, 5804
Alarma horaria
Activar con ACT_TINT, 2650, 6042
Ajustar con SET_TINT, 2644, 6040
Ajustar con SET_TINTL, 2646
Anular con CAN_TINT, 2648, 6041
Consultar con QRY_TINT, 2651, 6043
Instrucciones, 6038
Propiedades de SET_TINT, CAN_TINT,
ACT_TINT, QRY_TINT, 6039
Alarmas
Activar alarma horaria con ACT_TINT, 2650,
6042
Ajustar alarma horaria con SET_TINT, 2644,
6040
Ajustar alarma horaria con SET_TINTL, 2646
Anular alarma de retardo con CAN_DINT, 2663,
6047
Anular alarma horaria con CAN_TINT, 2648,
6041
Consultar alarma de retardo con
QRY_DINT, 2664, 6047

Programación del PLC
Manual de programación y manejo, 11/2019

Consultar alarma horaria con QRY_TINT, 2651,
6043
De un esclavo I, enviar con SALRM, 5940
Disparar alarma de proceso con DP_PRAL, 5947
Iniciar alarma de retardo con SRT_DINT, 2661,
6046
Leer estado de alarma con lista de estado del
sistema, 6140
Recibir desde módulo de periferia con
RALRM, 2444, 5898
Algoritmo Lead y Lag, 985, 1359, 1572, 2026, 2201,
5017, 5237, 5342, 5688, 5812
Alimentación de parámetros
Activar a través de registros, 8069
AN, 1580, 5357
AN(, 1588, 5365
ANALOG, 6792
AND, 942, 995, 1316, 4948, 5034, 5169, 8125, 8126
Anulación y aplicación de sangrías
Líneas, 8143
ANY, 356
Apagar (sistema de PC), 926, 1300, 1531, 1976
Apagar sistema de destino, 926, 1300, 1531, 1976
Árbol del proyecto
Mostrar, 7667
Ocultar, 7667
Archivo fuente externo
Abrir, 7760
Editar, 7760
Enlazar tipos de datos con un editor, 7760
Exportar bloque, 7757
Integrar, 7759
Principios básicos, 7754
Reglas de programación, 7756
Arcocoseno, 798, 1174, 1652, 1841, 2074, 4909,
5129, 5434, 5596, 5733
Arcoseno, 796, 1172, 1650, 1840, 2073, 4907, 5127,
5432, 5595, 5732
Arcotangente, 1654, 1842, 5436, 5597
Área
Activar en la periferia, 4980, 5301, 5653, 5778
Activar por bits, 4979, 5199, 5300, 5652, 5777
Activar por bytes, 4983, 5203, 5303, 5655, 5780
Área, 1258, 5134
Copiar, 820, 883, 1196, 1434, 1502, 1854, 1921,
2084, 2126, 4914, 5273, 5598, 5738
Copiar sin interrupciones, 827, 887, 1202, 1262,
1441, 1505, 1860, 1924, 2090, 2129, 4917, 5137,
5276, 5602, 5741
Desactivar en periferia, 4986, 5206, 5306, 5657,
5782

8785

Índice alfabético

Desactivar por bits, 4985, 5205, 5305, 5656,
5781
Desactivar por bytes, 4988, 5208, 5308, 5659,
5784
Rellenar, 829, 890, 1205, 1264, 1443, 1508, 1863,
1926, 2092, 2132, 4920, 5140, 5279, 5604, 5744
Rellenar sin interrupciones, 833, 1209, 1446,
1866, 2095
Área de memoria
De un módulo, leer con lista de estado del
sistema, 6131
Área del bloque de datos
enviar con SEND_PTP, 7586
enviar con SEND_RK, 7593
recoger con FETCH_RK, 7597
Áreas de memoria
Memoria del sistema, leer con lista de estado del
sistema, 6132
Áreas en SCL, 8153, 8156, 8157, 8159, 8160
Arquitectura de consultas, 4450, 7004
Arquitectura de consultas del esclavo, 4451, 7005
Arquitectura de consultas del maestro, 4450, 7005
Arrancar temporizador como impulso, 1039
Arrancar temporizador como retardo a la
conexión, 1044
Arrancar temporizador como retardo a la
desconexión, 1048
Arranque
ABS_DIAG, 6586
ABS_DIAG_451, 6590
CAM_DIAG, 6619
CAM_DIAG_452, 6623
CAM_MSRM_452, 6625
CPU, 6585, 6589, 6618, 6621
FM 351, 6585
FM 352, 6618, 6621
FM 451, 6589
FM 452, 6618, 6621
Instrucciones para generar avisos de PLC,
ARRAY, 128, 139, 213
Declaración en bloques de datos globales, 7848
Declaración en la interfaz de bloque, 7796
Declaración en tipos de datos PLC, 7932
Direccionamiento, 115, 299
Ejemplo, 306
Formato, 293
Interfaz de bloque textual, 7816
ASI_CTRL, 2548, 5965
Asignación, 625, 1002, 1594, 4820, 5039, 5371,
8127
negada, 626
negar, 1003

8786

Asignación de valor, 8127
Asignar ENO automáticamente, 8138
ASIN, 796, 1172, 1650, 1840, 2073, 4907, 5127,
5432, 5595, 5732
AT, 118
ATAN, 799, 1175, 1654, 1842, 2075, 4910, 5130,
5436, 5597, 5734
ATH, 2326, 5872
ATTACH, 2625
ATTR_DB, 2929
Aviso
Activar y desactivar el visor de avisos
GRAPH, 8310
Componentes, 8320
Editar avisos GRAPH, 8311
Parámetro formal, 8323
Tipo de datos de avisos, 8323
Transferencia con sello de tiempo con
TIMESTMP, 5862
Aviso de diagnóstico de usuario
Borrar, 8331
Crear, 8330
Edición, 8330
Aviso de programa
Borrar, 8328, 8337
Crear, 8326, 8335
Crear con Program_Alarm, 2715
Editar, 8327, 8328, 8336
Avisos de PLC con instrucciones
Acusables, con ALARM_DQ, 6096
Bloquear con DIS_MSG, 6107
Comportamiento en arranque de las
instrucciones, 6086
Comportamiento en fallo de las
instrucciones, 6086
Con indicación de acuse con ALARM, 6083
Con valores asociados para ocho señales con
ALARM_8P, 6077
Conocer el estado de acuse con
ALARM_SC, 6098
Generar, 6070
Habilitar con EN_MSG, 6105
Leer recursos del sistema asignados
dinámicamente, con READ_SI, 6109
Liberar recursos del sistema asignados
dinámicamente, con DEL_SI, 6112
Recursos del sistema con ALARM_SQ y
ALARM_S, 6090, 6092
Siempre acusados con ALARM_D, 6094
Sin indicador de acuse con NOTIFY, 6080
Sin indicador de acuse con NOTIFY_8P, 6073

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Sin valores asociados para ocho señales con
ALARM_8, 6075
Vista general, 6087
AW, 1728, 5508, 7893
AWL, 8065, 8104
Alimentación de parámetros, 8069
Comparación detallada, 8432
AX, 7893

B
Barrido de matriz, 983, 1357, 1567, 2024, 2197,
5015, 5235, 5338, 5686, 5810
BCD, 1671, 1674, 5454, 5456
BCDCPL, 990, 1364, 1577, 2030, 2206, 5030, 5251,
5354, 5699, 5823
BE, 1721, 5501
BEC, 1722, 5502
BEU, 1723, 5503
Bit de estado, 184, 190, 191, 192, 194, 198, 202
Consultar, 195, 199, 5188
Bits
Contaje, 992
Contar, 1365, 1578, 2031, 2207, 5032, 5253,
5355, 5700, 5824
Bits de estado
Consultar, 196, 201
BITSUM, 992, 1365, 1578, 2031, 2207, 5032, 5253,
5355, 5700, 5824
BLD, 1760, 5548
BLKMOV, 883, 1258, 1502, 1921, 2126, 4914, 5134,
5273, 5598, 5738
BLOCK, 359
BLOCK_DB_TO_WORD, 613
Bloque
Abandonar, 1968, 5629
Abrir, 7749
Abrir bloques con protección de know-how, 7777
Acceso optimizado, 54, 56
Borrar offline, 7752
Borrar online, 7752
Buscar y abrir, 7749
Cambiar contraseña de bloques con protección de
know-how, 7780
Cambiar nombre, 7751
Cargar de dispositivo, 8368, 8392
Cargar de un dispositivo, 8381
Cargar de una Memory Card, 8384, 8406
cargar desde un dispositivo, 8404
Cargar en dispositivo, 8368, 8377, 8392, 8400
Cargar en el dispositivo en el estado operativo
RUN, 8395

Programación del PLC
Manual de programación y manejo, 11/2019

Cargar en un dispositivo en estado operativo
RUN, 8372
Cargar en una Memory Card, 8382, 8404
Cerrar, 7750
Comparación, 8411
Comparar, 8419
Comparar bloques lógicos, 8416
Compilar, 8362
Compilar en el árbol del proyecto, 8365
Compilar en el editor de programación, 8367
Comprobación de coherencia, 8362, 8471, 8477
Comprobación de coherencia en la estructura de
llamada, 8471
Configurar la protección contra escritura, 7774
Configurar protección contra copia, 7772
Copiar, 7733, 7736
Desactivar la cadena secuencial antes de cargar
un bloque de datos GRAPH, 8406
Editar propiedades, 7747
Escribir en Memory Card, 8382, 8404
Exportar a un archivo fuente externo, 7757
Guardar, 7750
Imprimir bloques con protección de knowhow, 7778
Insertar, 7733
Introducir comentario, 7738
Introducir título, 7737
Llamada condicional, 1725, 5506
Llamar, 4969, 5190
Mostrar las propiedades, 7747
Propiedades, 7740
Protección de know-how, 7763
Quitar la protección contra escritura, 7774
Quitar protección contra copia, 7772
Sello de tiempo, 7745
Tipos, 38
Utilizar una librería, 7731
Bloque de datos
Abrir, 1715, 1716, 4938, 4939, 5158, 5159, 5497
Acceso optimizado, 54, 56
Actualizar, 7845
Adaptar los valores de datos durante la puesta en
marcha, 7881, 7882, 7883, 7884, 7886
Basados en un tipo de datos PLC, 7852
Bloque de datos ARRAY, 41, 54, 112, 115, 7730,
7839, 7843, 7882, 8385
Bloque de datos de CPU, 52
Bloque de datos de instancia, 52, 7839
Bloque de datos globales, 41, 7839
Borrar con DEL_DB, 6193
Borrar con DELETE_DB, 2933
Cargar cambios de bloque sin reinicializar, 7846

8787

Índice alfabético

Comportamiento remanente, 7855, 7856
CONF_DB, 6931
Crear, 7730, 7843
Crear con CREAT_DB, 6195
DB de reglas WS_RULES, 5867
Declarar ARRAY, 7848
Declarar STRUCT, 7850
Escribir en la memoria de carga con
WRIT_DBL, 2923, 6191
Generar con CREA_DB, 6196
Generar con CREA_DBL, 6198
Generar con CREATE_DB, 2915
Importar y exportar variables, 7868
Instantánea, 7874, 7876, 7878
Leer atributos con ATTR_DB, 2929
Leer de la memoria de carga con
READ_DBL, 2919, 6189
Observar y forzar variables, 7871, 7873, 7874,
7876, 7878
Programar, 7839, 7847
Propiedades de las variables, 7857, 7861, 7862
Tabla de declaración, 7841
Testear con TEST_DB, 6201
Utilizar valores de ajuste, 7881, 7882, 7883, 7884,
7886
Valor de arranque, 7853, 7854
Valor predeterminado, 7853
Bloque de datos ARRAY, 41, 43, 54, 112, 115, 7730,
7839, 7843, 7882, 8385
Bloque de datos de array, 859, 861, 864, 867, 1235,
1237, 1240, 1243, 1467, 1469, 1471, 1474, 1887,
1889, 1891, 1894, 2116, 2118, 2120, 2123
Bloque de datos de canal, 6625
Bloque de datos de configuración, 7421
Bloque de datos de CPU
Borrar, 7753
Definición, 52
Bloque de datos de instancia
Crear, 52
Definición, 52
Modificar el tipo de datos con temporizadores y
contadores CEI, 8162
Bloque de datos globales, 41
Comportamiento remanente,
Bloque de datos instancia
Comportamiento remanente, 7855
Bloque de función (FB)
Bloque de datos de instancia, 40
Crear, 7729
Definición, 40
Exportar a un archivo fuente externo, 7757

8788

Bloque de organización (OB)
Activar OBs de alarma horaria desde el programa
de usuario, 6042
Asignar evento con ATTACH, 2625
Crear, 7728
Deshacer asignación de eventos con
DETACH, 2629
Determinar tiempo de ejecución del programa con
OB_RT, 6180
Exportar a un archivo fuente externo, 7757
Función, 39
Información de arranque, 39
Leer información de arranque con
RD_SINFO, 2767, 6114
Medir el tiempo de ejecución con RT_INFO, 2778
OB de alarma cíclica, ajustar parámetros con
SET_CINT, 2635
OB de alarma cíclica, consultar parámetros con
QRY_CINT, 2637
Bloque de sistema
Carpeta Bloques de sistema, 7727
bloquear llamadas de lazos de regulación, 6485
Bloques de aviso, 8320
Bloques de datos empleados
ABS_CTRL, 6584
ABS_CTRL_451, 6588
ABS_DIAG, 6586
ABS_DIAG_451, 6590
CAM_CTRL, 6618
CAM_CTRL_452, 6621
CAM_DIAG, 6619
CAM_DIAG_452, 6622
CAM_MSRM_452, 6624
Bloques de datos utilizados
ABS_INIT, 6583
Bloques de organización (OB)
Activar OB de alarma de retardo desde el
programa de usuario, 6046
Anular OB de alarma de retardo desde el
programa de usuario, 6047
Consultar OB de alarma de retardo desde el
programa de usuario, 6047
Bobina de relé, 625, 4820
negada, 626
BOOL, 245, 369, 422, 509, 529, 579, 590
BOOL_TO_, 422, 529, 590
Borrar
Filtros en el plano de ocupación, 8461
Borrar búfer de recepción con RES_RCVB, 7592
BR, 184, 198, 1599, 4970, 5191, 5377
BRCV, 3971
BSEND, 3968

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

BTD, 1674, 5456
BTI, 1671, 5454
Bucle, 1713, 1955, 1959, 1962, 1964, 1965, 1966,
5494, 5617, 5621, 5624, 5625, 5626, 5627
Búfer de diagnóstico
Lista de estado del sistema, 6175
Búfer de peticiones, 7460
Búfer en anillo, 348
BUSY en instrucciones que funcionan
asíncronamente, 4813
BY, 1959
BYTE, 246, 370, 424, 510, 530, 580, 591
BYTE_TO_, 424, 530, 591
Bytes
Cambiar disposición, 857, 1233, 1885, 2113,
5735

C
Cabecera de petición, 7460
CAD, 1683, 5465
Cadena de caracteres, 274, 277
Borrar caracteres con DELETE, 2340, 5878
Buscar caracteres con FIND, 2346, 5881
Comparar variables de string con S_COMP, 2273,
5868
Concatenar con CONCAT, 2333, 5876
Convertir a hexadecimal con ATH, 2326, 5872
Convertir con S_CONV, 2275, 5869
Convertir desde hexadecimal con HTA, 2329,
5873
Convertir número en cadena de caracteres con
VAL_STRG, 2282
Convertir una cadena de caracteres numéricos
con STRG_VAL, 2278
Copiar, 5869
Copiar los caracteres en una cadena de
caracteres con Chars_TO_Strg, 2290
Desplazar con S_MOVE, 2271
Determinar la longitud máxima con
MAX_LEN, 2293
Determinar longitud con LEN, 2332, 5875
Insertar caracteres con INSERT, 2342, 5879
Leer los caracteres centrales con MID, 2338,
5878
Leer los caracteres derechos con RIGHT, 2336,
5877
Leer los caracteres izquierdos con LEFT, 2335,
5876
Reemplazar caracteres con REPLACE, 2344,
5880

Programación del PLC
Manual de programación y manejo, 11/2019

Cadena secuencial
Borrar, 8262
Cambiar nombre, 8258
Comentar, 8259
Elementos, 8194
Finalizar, 8261
Inicializar, 8534
Insertar, 8257
Insertar elementos nuevos, 8260
Principios básicos, 8193
CALC, 766, 1142
Calcular, 766, 1142, 7970, 8030
Calcular cuadrado, 2067
Calcular raíz cuadrada, 2068
Calcular valor exponencial, 1836, 5592
CALCULATE, 7970, 8030
CALL, 1724, 4969, 5190, 5504
CAM_CTRL, 6617
Bloques de datos empleados, 6618
Comportamiento en caso de error, 6618
Descripción, 6617
Estado de la petición, 6637
Funcionamiento, 6617
Llamada, 6617
Peticiones, 6636
Selectores de función, 6637
Valores de retorno, 6618
CAM_CTRL_452, 6620
Bloques de datos empleados, 6621
Comportamiento en caso de error, 6622
Descripción, 6620
Estado de la petición, 6639
Funcionamiento, 6620
Llamada, 6620
Parámetros, 6621
Peticiones, 6638
Selectores de función, 6638
Valores de retorno, 6621
CAM_DIAG
Arranque, 6619
Bloques de datos empleados, 6619
Comportamiento en caso de error, 6620
Descripción, 6619
Funcionamiento, 6619
Llamada, 6619
Peticiones, 6619
Valores de retorno, 6619
CAM_DIAG_452
Arranque, 6623
Bloques de datos empleados, 6622
Comportamiento en caso de error, 6623
Descripción, 6622

8789

Índice alfabético

Funcionamiento, 6622
Llamada, 6622
Parámetros, 6623
Peticiones, 6623
Valores de retorno, 6623
CAM_INIT
Descripción, 6616
Llamada, 6616
Parámetros, 6617
Valores de retorno, 6617
CAM_MSRM_452, 6624
Arranque, 6625
Bloques de datos empleados, 6624
Comportamiento en caso de error, 6625
Descripción, 6624
Llamada, 6624
Parámetros, 6624
Valores de retorno, 6624
Cambiar entre modo básico y modo avanzado en la
tabla de forzado permanente, 8607
Cambiar entre modo básico y modo avanzado en la
tabla de observación, 8575
Campo, 293
Véase ARRAY, 7796, 7848
CAN_DINT, 2663
CAN_TINT, 2648
CAR, 1666, 5449
Carácter, 273
Carga de la memoria, 8478
Datos de remanencia, 8478
Introducción, 8478
Memoria de carga, 8478
Memoria de trabajo, 8478
Memoria de trabajo para código, 8478
Memoria de trabajo para datos, 8478
Memoria remanente, 8478
Carga de la memoria de la CPU
Mostrar, 8481
Cargar, 1655, 1657, 1658, 1659, 1660, 1661, 1662,
1717, 1718, 1719, 1720, 5437, 5439, 5440, 5441,
5443, 5444, 5498, 5499, 5500
Bloques en un dispositivo, 8372, 8395
Cargar bloques de una Memory Card, 8384
Cargar bloques desde una Memory Card, 8406
Cargar bloques en un dispositivo, 8377, 8378,
8400, 8401
Cargar bloques en una Memory Card, 8382,
8404
Cargar cambios de bloque sin reinicializar, 8385,
8387, 8388, 8389, 8390, 8391
Desactivar la cadena secuencial antes de cargar
un bloque de datos GRAPH, 8406

8790

En el estado operativo RUN, 8395
en estado operativo RUN, 8372
Valor de contaje, 1620, 1622, 5399, 5401
Valor del temporizador, 1604, 1606, 5383, 5385
Carpeta de bloques, 7727
CASE, 1957, 5619
Caso de repuesto, 7311, 7458
Categoría
Copiar, 8353
Crear, 8352
Editar, 8353
CAW, 1682, 5464
CC0, 184, 190, 191, 192, 194, 198, 202
CC1, 184, 190, 191, 192, 194, 198, 202
CD, 724, 1102, 1626, 4876, 5095, 5405
CDB, 1717, 5498
CEIL, 897, 1271, 1933, 2137, 4926, 5146, 5610,
5749
Cerrar rama, 8196
CH_DIAG
Diagrama de bloques, 6674
Instrucción, 6671
Parámetros de entrada, 6672
Parámetros de salida, 6672
CH_DIAG_455
Diagrama de bloques, 6759
Instrucción, 6757
Parámetros de entrada, 6757
Parámetros de salida, 6757
CHAR, 273, 415, 497, 525, 526, 571, 572, 589, 611
CHAR_TO_, 497, 571, 572, 611
Chars_TO_Strg, 2290
CHECKBACK_SIGNALS
CNT2_CTR, 6578
Ciclo de aplicación, 3940
CiR, 4946, 5167, 5294, 5637, 5763
Circuito
Borrar, 7992
Insertar, 7991
Utilización, 7990
Circuito lógico
Borrar, 8049
Insertar, 8048
Utilización, 8047
Circuito secuencial sucesivo, 967, 1341, 1549, 2008,
2181, 4991, 4997, 5211, 5217, 5310, 5317, 5661,
5669, 5787, 5793
CJ_T_PAR
Instrucción, 6681
Parámetros de entrada, 6682
Parámetros de salida, 6682

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

CJ_T_PAR_455
Instrucción, 6765
Parámetros de entrada, 6766
Parámetros de salida, 6766
Clases de error PtP, 4453, 7007
CLR, 1598, 5376
CMP <, 744, 1121, 4883, 5102
CMP <=, 738, 1116, 4881, 5100
CMP <>, 730, 1108, 4878, 5097
CMP ==, 725, 1103, 4877, 5096
CMP >, 741, 1118, 4882, 5101, 5828, 5829, 5834
CMP >=, 735, 1113, 4880, 5099
CMP>T, 2213, 2225
CMP>T_MAX, 2216, 2229
CMP>T_WARN, 2218, 2231
CMP>U, 2214, 2227
CNT_CTL1, 6555
Comportamiento en arranque, 6556
Comportamiento en caso de error, 6557
Descripción, 6555
Funcionamiento, 6555
Llamada, 6555
Parámetros, 6555
Peticiones, 6556
Transferencia de valores, 6564
CNT_CTL2, 6557
Descripción, 6557
Funcionamiento, 6557
Llamada, 6557
CNT_CTRL, 6552
Comportamiento en arranque, 6554
Comportamiento en caso de error, 6554
Descripción, 6552
Funcionamiento, 6553
Llamada, 6553
Parámetros, 6553
Peticiones, 6553
CNT2_CTR, 6569
CHECKBACK_SIGNALS, 6578
CONTROL_SIGNALS, 6578
Descripción, 6569
Funcionamiento, 6569
Llamada, 6570
Parámetros, 6570
CNT2RDPN, 6568
Descripción, 6568
Estado de la petición de lectura, 6582
Funcionamiento, 6569
Llamada, 6569
Parámetros, 6569
Petición de lectura, 6581

Programación del PLC
Manual de programación y manejo, 11/2019

CNT2WRPN, 6568
Descripción, 6568
Estado de la petición de escritura, 6580
Funcionamiento, 6568
Llamada, 6568
Parámetros, 6568
Petición de escritura, 6579
Codificar, 949, 1324, 1546, 1992, 2167, 4955, 5176,
5297, 5640, 5768
Códigos de error
TIO_DI, 3920, 3927
TIO_DQ, 3937
TIO_IOLink_IN, 3915
TIO_IOLink_OUT, 3931
TIO_SYNC, 3911
Códigos de estado USS, 4577
Coherencia de bloques
Comprobar, 8471
Comprobar en la estructura de
dependencias, 8477
Coherencia de datos, 3942, 6831
Comando PING, 7331, 7332
Comandos de teclado
AWL, 7662
Editar textos, 7662
Editor de programación, 7662
FUP, 7662
GRAPH, 7662
KOP, 7662
SCL, 7662
Combinar lógicamente
O, 944, 1318, 4950, 5171
O-exclusiva, 945, 1320, 4951, 5172
Y, 942, 1316, 4948, 5169
Comentario de línea, 8097
Comentario del bloque
Mostrar, 7668
Ocultar, 7668
Comentario del segmento
Mostrar, 7668
Ocultar, 7668
Comentario libre
Borrar, 7974, 8034
Editar, 7972, 8032
Insertar, 7972, 8032
Introducción, 7971, 8031
Comentarios
insertar en el programa SCL, 8179
Comparación
Variables de tiempo, 2234, 5835
Comparación de bloques
Actualizar resultados de la comparación, 8447

8791

Índice alfabético

Comparación detallada, 8421, 8424, 8428, 8432,
8435, 8438
Comparar bloques lógicos, 8416
Navegación, 8444
Principios básicos, 8411
Sincronizar el desplazamiento, 8445
Comparación detallada
Iniciar, 8421, 8424
Representación del resultado de la comparación
para AWL, 8432
Representación del resultado de la comparación
para GRAPH, 8438
Representación del resultado de la comparación
para KOP/FUP, 8428
Representación del resultado de la comparación
para SCL, 8435
Comparar
Cadenas de caracteres, con S_COMP, 2273,
5868
Diferente, 730, 1108, 4878, 5097
Enteros, 5406
Enteros (16 bits), 1627
Enteros dobles, 5407
Enteros dobles (32 bits), 1628
Igual, 725, 1103, 4877, 5096
Máscara de bits, 981, 1354, 1563, 2022, 2194,
5012, 5232, 5333, 5684, 5808
Mayor, 741, 1118, 2213, 2214, 2216, 2218, 2225,
2227, 2229, 2231, 4882, 5101, 5828, 5829, 5834
Mayor o igual, 735, 1113, 4880, 5099
Menor, 744, 1121, 4883, 5102
Menor o igual, 738, 1116, 4881, 5100
Números en coma flotante, 1630, 5409
Compilar
Bloque, 8365
Bloques, 8362
Comprobación de coherencia, 8362
Solucionar errores de compilación, 8367
Complemento a 1, 947, 1321, 1678, 1679, 4953,
5174, 5460, 5461
Complemento a diez, 990, 1364, 1577, 2030, 2206,
5030, 5251, 5354, 5699, 5823
Complemento a dos, 776, 1152, 1679, 1681, 1682,
2060, 4891, 5109, 5461, 5462, 5463, 5719
Componente PROFINET CBA
Actualizar con instrucciones, 7612
Comportamiento en arranque
CNT_CTL1, 6556
CNT_CTRL, 6554
Comportamiento en caso de error
ABS_CTRL, 6585
ABS_CTRL_451, 6589

8792

ABS_DIAG, 6586
ABS_DIAG_451, 6590
CAM_CTRL, 6618
CAM_CTRL_452, 6622
CAM_DIAG, 6620
CAM_DIAG_452, 6623
CAM_MSRM_452, 6625
CNT_CTL1, 6557
CNT_CTRL, 6554
High_Speed_Counter, 3613
SSI_Absolute_Encoder, 3622
Comportamiento remanente
Marcas, temporizadores, contadores, 7902, 7903
COMPRESS, 4940, 5160, 5287, 5631, 5757
Comprimir, 4940, 5160, 5287, 5631, 5757
Comprobación de coherencia, 8471, 8477
Introducción, 8471, 8477
Comprobar conexión, 4112
Comunicación
Arquitectura de consultas, 4450, 7004
Datos de estado, 6146
Open User Communication, 6887
Comunicación básica S7
I_ABORT, 7610
I_PUT, 7608
Parámetros comunes, 6824
X_ABORT, 7626
X_GET, 7622
X_PUT, 7624
X_RCV, 7618
X_SEND, 7617
Comunicación Modbus
Como esclavo con MB_SLAVE, 4590
Como maestro Modbus con MB_MASTER, 4582
Configurar puerto con MB_COMM_LOAD, 4579
Comunicación PtP
Programar, 4448, 7002
Comunicación S7
Cambio del estado operativo, 6830
Comportamiento de arranque, 6836
Comportamiento en caso de fallo, 6838
Conmutar el dispositivo al estado operativo STOP
con STOP, 6878
Consulta de una conexión, 6831
Consulta del estado operativo, 6831
Consultar el estado de conexión con
C_CNTRL, 6857
Consultar el estado del dispositivo con
STATUS, 6882
Datos a una instrucción remota del interlocutor
con USEND, 3959, 6845

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Determinar el estado de conexión con
CONTROL, 6867
Ejecutar rearranque completo o arranque en frío
con START, 6876
Ejecutar un rearranque con RESUME, 6880
Enviar datos a una impresora con PRINT, 6870
Enviar datos a una instrucción remota del
interlocutor con BSEND, 3968, 6851
Enviar datos a una instrucción remota del
interlocutor con USEND_S, 6863
Escribir datos en una CPU remota con
PUT, 6842
Escribir datos en una CPU remota con
PUT_S, 6861
Intercambio de datos, 6830
Leer datos de una CPU remota con
GET_S, 6859
Leer los datos de una CPU remota con
GET, 6840
Parámetro, 3944, 6833
Parámetros de transmisión y recepción, 3945,
6835
Recibir datos de una instrucción remota del
interlocutor con BRCV, 3971, 6854
Recibir datos de una instrucción remota del
interlocutor con URCV, 3961, 6848, 6865
Recibir el cambio del estado del dispositivo con
USTATUS, 6884
Sinopsis de instrucciones, 6829
Volumen de datos de usuario, 3946, 6835
Comunicación USS
Controlar la transferencia al accionamiento con
USS_PORT, 4570
Intercambio de datos con accionamientos a través
de USS_DRIVE, 4571
Leer parámetros del accionamiento con
USS_RPM, 4574
Modificar parámetros en el accionamiento con
USS_WPM, 4576
con tipo, 8135
CONCAT, 2333
Condición
Insertar una instrucción permanente, 8301
Introducción, 8211
Programar interlock, 8286
Programar supervisión, 8288
Programar transición, 8293
Conexión
Consultar el estado con C_CNTRL, 6857
Diagnosticar con C_DIAG, 6184
Establecer con TCON, 6910

Programación del PLC
Manual de programación y manejo, 11/2019

Interrumpir la conexión con el interlocutor dentro
de la estación S7 propia con I_ABORT, 7610
Interrumpir la conexión con el interlocutor fuera de
la estación S7 propia con X_ABORT, 7626
CONF_DB See Bloque de datos de
configuración, 7421
Configuración
AWL, 8070
FUP, 7946, 8007
General, 7685
GRAPH, 8235
KOP, 7946, 8007
Modificar, 7688, 7946, 8008, 8070, 8140, 8238
SCL, 8138
Configuración de avisos
Bloquear atributo, 8348
Bloquear texto, 8347
Borrar valor asociado, 8334
Desbloquear atributo, 8348
Desbloquear texto, 8347
Introducción, 8319
Introducir texto, 8344
Texto adicional, 8345
Texto informativo, 8345
Configuración de interfaces
Instrucciones, 4448, 7003
Configuración de parámetros
LENGTH y BUFFER para Send_P2P, 4468, 7022
Configuración de tramas
Instrucciones, 4448, 7003
Configuración IP
Modificar parámetros del programa de
usuario, 4121, 6928
Configurar
Opciones de visualización de la estructura de
dependencias, 8476
Opciones de visualización del plano de
ocupación, 8460
Constante
Constante con tipo, 103
Constante global, 105, 106, 108, 7908, 7909,
7910, 7913
Constante local, 105, 106, 108, 7791, 7793, 7829
Constante simbólica, 105
Constante sin tipo, 103
Definición, 103
Tipos de datos, 106
Constante de sistema, 7909
Constantes, 1638, 5419, 8135
Consultar flanco de señal ascendente de un
operando, 634, 1011, 4825, 5044

8793

Índice alfabético

Consultar flanco de señal ascendente del RLO, 639,
1017, 4828, 5047
Consultar flanco de señal descendente de un
operando, 635, 1013, 4827, 5046
Consultar flanco de señal descendente del RLO, 641,
1018, 4829, 5048
CONT_C
Diagrama de bloques, 6239
Funcionamiento, 6237
Parámetros de entrada, 6240
Parámetros de salida, 6241
CONT_S
Diagrama de bloques, 6245
Funcionamiento, 6243
Instrucción, 6242
Parámetros de entrada, 6246
Parámetros de salida, 6247
Contacto normalmente abierto, 621, 4817
Contacto normalmente cerrado, 623, 4818
Contador
Ascendente, 707, 1085, 1093, 1100, 1389, 1625,
1808, 2052, 4861, 5080, 5093, 5261, 5404, 5572,
5579, 5713
Ascendente y descendente, 712, 1090, 1097,
1395, 1813, 2057, 4865, 5084, 5265, 5576, 5582,
5717
Descendente, 710, 1087, 1095, 1102, 1392, 1626,
1811, 2055, 4863, 5082, 5095, 5263, 5405, 5574,
5580, 5715
Habilitar, 1619, 5398
Inicializar, 1624, 5403
Poner a 0, 5402
Poner a cero, 1623
Contador de horas de funcionamiento
Arrancar y parar con CTRL_RTM, 5849
Inicializar con SET_RTM, 5849
Inicializar, arrancar, parar y leer con RTM, 5847
Leer con READ_RTM, 5850
Manejar con RTM, 2268, 5847
Propiedades, 5846
Rango de valores, 5846
Contadores
Contadores rápidos, 3603, 3605
Controlar contadores rápidos, 3603
Controlar contadores rápidos (avanzado), 3605
Contaje
Ascendente, 716, 723, 1816, 4868, 4875, 5087
Ascendente y descendente, 720, 1820, 4872,
5090
Descendente, 718, 724, 1818, 4870, 4876, 5089
CONTINUE, 1965, 5626

8794

Control del programa, 928, 1302, 1532, 1978, 2156,
4942, 5162, 5290, 5633, 5759
CONTROL_SIGNALS
CNT2_CTR, 6578
Controlador PROFIenergy, 7383
Controlar
Contadores rápidos, 3603, 3605
Controlar contador desde el programa de usuario con
COUNT, 6813
Conversión, 366, 506, 576
Convertir tiempos con T_CONV, 5836
Explícita, 422, 424, 427, 430, 434, 438, 442, 445,
449, 452, 456, 460, 464, 467, 470, 473, 475, 478,
484, 487, 490, 492, 494, 497, 499, 501, 504, 529,
530, 532, 535, 539, 559, 562, 565, 567, 568, 569,
571, 572, 573, 575, 590, 591, 593, 596, 599, 602,
605, 606, 607, 609, 610, 611, 612, 613
implícita, 369, 393, 418, 512, 513, 514, 515, 516,
517, 518, 519, 521, 522, 523, 524, 525, 526, 527,
579, 580, 582, 583, 584, 585, 586, 587, 588, 589
Conversores
Convertir tiempos con T_CONV, 2236
CONVERT, 893, 1268, 1930, 2135, 4924, 5144,
5608, 5747
Convertir, 893, 1268, 1671, 1672, 1675, 1676, 1677,
1930, 2135, 4924, 5454, 5455, 5457, 5458, 5459,
5608, 5747
Cadena de caracteres con S_CONV, 2275, 5869
Cadena de caracteres en Array con
Strg_TO_Chars, 2287
Convertir número en cadena de caracteres y
números con VAL_STRG, 2282
Convertir tiempos con T_CONV, 2236, 5836
Convertir una cadena de caracteres numéricos en
un número con STRG_VAL, 2278
Copiar los caracteres en una cadena de
caracteres numéricos con Chars_TO_Strg, 2290
De hexadecimal a cadena de caracteres con
HTA, 2329, 5873
Dirección E/S en identificador de hardware, 2943
Identificador de hardware en slot, 2943
Slot en identificador de hardware, 2943
Una cadena de caracteres a hexadecimal, con
ATH, 2326, 5872
Convertir BCD en entero, 1674, 5456
convertir direcciones
Instrucciones para, 2943
Convertir valor, 5144
Coordinación de accesos, 7325
Copiar
Área, 820, 883, 1196, 1258, 1434, 1502, 1854,
1921, 2084, 2126, 4914, 5134, 5273, 5598, 5738

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Área sin interrupciones, 827, 887, 1202, 1262,
1441, 1505, 1860, 1924, 2090, 2129, 4917, 5137,
5276, 5602, 5741
Cadena de caracteres en Array con
Strg_TO_Chars, 2287
Valor, 803, 1179, 1421, 4912, 5132
Copiar área, 822, 1198, 1436, 1856, 2086
Correo electrónico
Enviar un correo electrónico con TM_MAIL, 4685
Transmitir un correo electrónico con
TMAIL_C, 4015
COS, 793, 1170, 1651, 1838, 2071, 4905, 5124,
5433, 5593, 5730
Coseno, 793, 1170, 1651, 1838, 2071, 4905, 5124,
5433, 5593, 5730
COUNT, 6813
COUNTER, 359
CountOfElements, 874, 1249, 1498, 1917
CPU
Ajustar hora con WR_SYS_T, 5840
Ajustar la hora con WR_SYS_T, 2246
Arranque, 6585, 6589, 6618, 6621
Identificar con lista de estado del sistema, 6134
Leer características con lista de estado del
sistema, 6128
Leer fecha y hora con RD_SYS_T, 2249, 5841
Relación entre variante de protocolo y longitud de
datos, 6900
Crear una tabla de observación, 8578
CREATE_DB, 2915
CRP_IN
Instrucción, 6401
Parámetros de entrada, 6402
Parámetros de salida, 6402
CRP_OUT
Instrucción, 6402
Parámetros de entrada, 6403
Parámetros de salida, 6404
Cruce
Borrar, 7989
Cambiar posición, 7989
Definición, 7988
Insertar, 7988
CTD, 710, 1087, 1392, 1811, 2055, 4863, 5082,
5263, 5574, 5715
CTRL_HSC, 3603
CTRL_HSC_EXT, 3605
CTRL_PTO, 2847
CTRL_PWM, 2845
CTU, 707, 1085, 1389, 1808, 2052, 4861, 5080,
5261, 5572, 5713

Programación del PLC
Manual de programación y manejo, 11/2019

CTUD, 712, 1090, 1395, 1813, 2057, 4865, 5084,
5265, 5576, 5717
CU, 723, 1100, 1625, 1626, 4875, 5093, 5404, 5405
Cuadrado, 787, 1163, 1646, 1833, 4899, 5118, 5428,
5589, 5725
Cuadro vacío
Insertar elemento KOP, 7959
Insertar un elemento FUP, 8020

D
D_ACT_DP, 2482
Data Log
Abrir con DataLogOpen, 2881
Abrir con DataLogTypedOpen, 2883
Borrar con DataLogDelete, 2891
Cerrar con DataLogClose, 2889
Crear con DataLogCreate, 2872
Crear con DataLogNewFile, 2893
Crear con DataLogTypedNewFile, 2895
Escribir con DataLogWrite, 2887
Vaciar con DataLogClear, 2885
DataLogClear, 2885
DataLogClose, 2889
DataLogCreate, 2872
DataLogDelete, 2891
DataLogNewFile, 2893
DataLogOpen, 2881
DataLogTypedNewFile, 2895
DataLogTypedOpen, 2883
DataLogWrite, 2887
DATE, 268, 409, 490, 522, 567, 587, 608
DATE_AND_LTIME, 271
DATE_AND_TIME, 269
DATE_TO_, 490, 567, 608
Datos de diagnóstico
ABS_DIAG, 6586
ABS_DIAG_451, 6591
Leer con GET_DIAG, 2833
Datos de llamada, 6397
Datos de proceso
AA_Data, 3929
SA_Data, 3914
Datos de sistema
Bloque de parámetros para, 7422
Datos I&M: Leer con GET_IM_Data, 2787
DB, 7730, 7843
DB 101 a 104
Parámetros de entrada, 6684
Parámetros de entrada/salida, 6690
Parámetros de salida, 6688

8795

Índice alfabético

DB 101 a 116
Parámetros de entrada, 6786
Parámetros de entrada/salida, 6792
Parámetros de salida, 6789
DB ARRAY, 43
DB de canal
Contenido, 6592, 6625
Estructura, 6591, 6625
Tarea, 6591, 6625
DB de contaje
Configuración, 6558
Contenido, 6558, 6571
Tarea, 6558, 6571
DB de diagnóstico
Contenido, 6635
Estructura, 6635
Tarea, 6635
DB de diagnóstico FM x51
Contenido, 6600
Estructura, 6600
Tarea, 6600
DB de eje
Contenido, 6550
Tarea, 6549
DB de instancia
Crear, 8329, 8337
DB de parámetros
Contenido, 6633
Estructura, 6632
Tarea, 6632
DB de parámetros FM x51
Contenido, 6598
Estructura, 6598
Tarea, 6598
DB_ANY_TO_VARIANT, 1518, 1948
DCAT, 974, 1348, 1556, 2015, 2187, 5005, 5225,
5326, 5677, 5801
DEAD_T
Bloque de datos global, 6406
Instrucción, 6404
Parámetros de entrada, 6406
Parámetros de salida, 6406
DEADBAND
Instrucción, 6407
Parámetros de entrada, 6409
Parámetros de salida, 6409
DEC, 778, 1155, 1640, 5421
Decimales, 800, 1176, 1843, 2076
Declaración de variables
Actualizar la interfaz del bloque,
Basados en un tipo de datos PLC, 7852
Borrar variable, 7807, 7866, 7918, 7940

8796

Declarar ARRAY, 7796
Declarar STRING, 7799
Declarar STRUCT, 7798
Declarar tipo de datos PLC, 7800
Declarar variable, 7793, 7794, 7801
Finalidad de la declaración de variables, 7783
Importar y exportar variables, 7808, 7868
Insertar una fila al final de la tabla, 7806, 7865,
7939
Insertar una fila en la tabla, 7806, 7865, 7917,
7939
Interfaz de bloque, 7791
Mostrar y ocultar columnas, 7808, 7867, 7920,
7941
Multiinstancia, 7802
Ordenar filas, 7918
Palabras clave reservadas, 96
Propiedades de las variables, 7829, 7831, 7857,
7861, 7862
Rellenar celdas automáticamente, 7807, 7866,
7919, 7940
Remanencia, 7789
Superponer variables, 7801
Tipos de datos válidos, 7786, 7788
DECO, 948, 1323, 1545, 1991, 2166, 4954, 5175,
5296, 5639, 5767
Decrementar, 778, 1155, 1640, 5421
Definir
Filtros para el plano de ocupación, 8461
DELETE, 2340
DELETE_DB, 2933
DEMUX, 956, 1330, 1997, 2172
Desactivar
Área de periferia, 4986, 5206, 5306, 5657, 5782
Área por bits, 4985, 5205, 5305, 5656, 5781
Área por bytes, 4988, 5208, 5308, 5659, 5784
Mapa de bits, 630, 1007, 4985, 5205, 5305, 5656,
5781
Operando, 626, 632, 1003, 1010, 1595, 4821,
4824, 5040, 5043, 5372
RLO, 1598, 5376
Desbordamiento, 184, 198
Descodificar, 948, 1323, 1545, 1991, 2166, 4954,
5175, 5296, 5639, 5767
Descripción
ABS_CTRL, 6583
ABS_CTRL_451, 6587
ABS_DIAG, 6585
ABS_DIAG_451, 6589
ABS_INIT, 6582
CAM_CTRL, 6617
CAM_CTRL_452, 6620

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

CAM_DIAG, 6619
CAM_DIAG_452, 6622
CAM_INIT, 6616
CAM_MSRM_452, 6624
CNT_CTL1, 6555
CNT_CTL2, 6557
CNT_CTRL, 6552
CNT2_CTR, 6569
CNT2RDPN, 6568
CNT2WRPN, 6568
DIAG_INF, 6554
DIAG_RD, 6570
EncoderAbsSensorDP, 6520
EncoderCPU314C, 6528
EncoderET200S1Count, 6524
EncoderET200S1SSI, 6519
EncoderFM350, 6526
EncoderFM450, 6516
EncoderIM174, 6530
EncoderIM178, 6514
EncoderSINAMICS, 6532
EncoderSM338, 6522
EncoderUniversal, 6535
MC_Control, 6504
MC_GearIn, 6507
MC_Home, 6498
MC_Init, 6489
MC_MoveAbsolute, 6490
MC_MoveJog, 6495
MC_MoveRelative, 6493
MC_Simulation, 6506
MC_StopMotion, 6502
OutputCPU314C, 6540
OutputET200S2AO, 6539
OutputIM174, 6544
OutputIM178, 6538
OutputMM4_DP, 6543
OutputSINAMICS, 6545
OutputSM332, 6541
OutputSM432, 6538
OutputUniversal, 6542
Deserializar, 809, 1185, 1424, 1844, 2077
Deserialize, 809, 1185, 1424, 1844, 2077
Desescalar, 908, 1283, 1523, 1953, 2147, 4933,
5152, 5285, 5615, 5754
Desmultiplexar, 956, 1330, 1997, 2172
Desplazamiento
Derecha, 5519, 5520, 5524, 5527
Izquierda, 5522, 5526

Programación del PLC
Manual de programación y manejo, 11/2019

Desplazar
Derecha, 959, 1333, 1739, 1741, 1744, 1747,
2000, 2174, 4958, 5179, 5645, 5770
Izquierda, 961, 1335, 1742, 1746, 2002, 2175,
4960, 5181, 5646, 5772
DETACH, 2629
DeviceStates, 2819
DIAG_INF, 6554
Descripción, 6554
Funcionamiento, 6554
Llamada, 6554
Parámetros, 6554
DIAG_RD, 6570
Descripción, 6570
Funcionamiento, 6570
Llamada, 6570
Parámetros, 6570
Diagnóstico
Conexiones con C_DIAG, 6184
Datos de diagnóstico, 6065
Datos de diagnóstico de módulo, 6179
Datos de diagnóstico, específicos de canal, 6067
Esclavo DP, leer datos de diagnóstico con
DPNRM_DG, 2541, 5956
Escribir un evento de diagnóstico en el búfer de
diagnóstico con WR_USMSG, 6100
Módulo, lista de estado del sistema, 6176
Registro de diagnóstico, 6178
Diagnóstico de canal
Datos de diagnóstico, 6067
Diagrama de funciones, 8005
DIF
Parámetros de entrada, 6411
Parámetros de salida, 6411
Diferenciador, 6409
Diferente, 761, 1137, 1412
DIGITAL, 6803
DINT, 255, 384, 452, 517, 552, 584, 602
DINT_TO_, 452, 552, 602
Dirección del CP, 7457
Dirección E/S, 2943
Dirección lógica
Determinar de un módulo con GADR_LGC, 2961,
6230
Determinar de un módulo con RD_LGADR, 2960,
6229
Determinar slot correspondiente con
LGC_GADR, 2963, 6232
Determinar slot correspondiente, con
LOG_GEO, 2958, 6227
Direccionamiento de operandos, 109, 110, 112, 115,
116, 118, 121, 122, 132, 138, 280, 287, 291, 299

8797

Índice alfabético

Direccionamiento indirecto, 121, 122, 127, 128, 132,
133, 136, 137, 138, 139, 140, 141, 210, 213
Direccionamiento simbólico, 211
Direccionar operandos, 114, 127, 128, 133, 134, 136,
137, 139, 140, 141
Direcciones
Determinar de un módulo con GEO_LOG, 2957,
6225
Leer dirección de estación con
GetStationInfo, 2797
Leer la dirección MAC con GetStationInfo, 2797
DIS_AIRT, 2702
DIS_IRT, 2694
Disable axis
Stop, 3126
Display de 7 segmentos, 988, 1362, 2028, 5028,
5250, 5353, 5698, 5822
Display de siete segmentos, 988, 1362, 2028, 5028,
5250, 5353, 5698, 5822
Disposición de la secuencia de bytes, 857, 1233,
1885, 2113, 5735
Dispositivo PROFIenergy, 7383
Dispositivos PROFINET IO
Escribir datos coherentes con DPWR_DAT, 2512,
5932
Escribir todas las salidas con SETIO, 2422, 5893
Escribir una parte de las salidas con
SETIO_PART, 2433, 5896
Leer datos coherentes con DPRD_DAT, 2510,
5929
Leer una parte de las entradas con
GETIO_PART, 2431, 5894
Distribuidor de saltos, 916, 1290
DIV, 773, 1149, 4889, 5107
Dividir, 773, 1149, 1634, 1637, 1645, 4889, 5107,
5413, 5417, 5426
DMSK_FLT, 2679
DO, 1959, 1962, 5624
DP_CTRL, 7493
DP_DIAG, 7484
DP_RECV, 7478
DP_SEND, 7475
DP_TOPOL, 2544
DPNRM_DG, 2541
DPRD_DAT, 2510
DPSYC_FR, 2535
DPWR_DAT, 2512
Driver de entrada
Inicialización, 6513
Llamada, 6513
Modo de simulación, 6514

8798

Tarea, 6513
Tratamiento de errores, 6514
Driver de salida
Inicialización, 6537
Llamada, 6537
Modo de simulación, 6537
Tarea, 6537
Tratamiento de errores, 6537
DRUM, 967, 1341, 1549, 2008, 2181, 4991, 5211,
5310, 5661, 5787
DRUM_X, 4997, 5217, 5317, 5669, 5793
DT, 269, 403, 481, 588, 610
DT_TO_, 481, 610
DTB, 1676, 5458
DTL, 271, 407, 487, 524, 569
DTL_TO_, 487, 569
DTR, 1677, 5459
DWORD, 248, 374, 430, 512, 535, 582, 596
DWORD_TO_, 430, 535, 596

E
EB, 7893
ED, 7893
Editor de avisos
Estructura, 8324
Editor de programación
Ampliar la superficie de la ventana de
programación, 7666
Barra de herramientas, 7659
Comandos de teclado, 7662
Configuración general, 7685
Estructura, 7658
Favoritos, 7659
Función, 7657
Interfaz del bloque, 7659
Task Card Instrucciones, 7659
Task Card Test, 7660
Ventana de programación, 7659
Ejemplo
Cálculo de una ecuación, 7999, 8058, 8108
Calentamiento de una caldera, 8110
Control de una cinta transportadora, 7992, 8102,
8183
Controlar la temperatura ambiente, 8001, 8060
Detección del nivel de llenado de una zona de
almacén, 7996, 8054, 8106, 8187
Detección del sentido de marcha de una cinta
transportadora, 7994, 8052, 8104, 8185
para la entrada de valores de forzado permanente
en la tabla de forzado permanente, 8612

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

para la vista de entradas y salidas en el plano de
ocupación, 8457
para la vista de marcas en el plano de
ocupación, 8457
Valores de forzado de la tabla de
observación, 8582
Ejemplos
Control de una cinta transportadora, 8050
Elemento FUP
Borrar, 8040
Copiar, 8035
Cortar, 8036
Insertar, 8018, 8019
Insertar desde el portapapeles, 8036
Insertar operando, 8041
Reemplazar, 8037
Reglas de inserción, 8017
Seleccionar, 8034
Elemento KOP
Borrar, 7980
Copiar, 7975
Cortar, 7976
Insertar, 7958, 7959
Insertar desde el portapapeles, 7976
Insertar operando, 7981
Reemplazar, 7977
Reglas de inserción, 7955
Seleccionar, 7974
Elevar a potencia, 802, 1178
ELSE, 1955, 1957, 5617, 5619
ELSIF, 1955, 5617
EN_AIRT, 2703
EN_IRT, 2696
Encabezado de petición, 7315, 7462
ENCO, 949, 1324, 1546, 1992, 2167, 4955, 5176,
5297, 5640, 5768
EncoderAbsSensorDP, 6520
Descripción, 6520
Llamada, 6521
Parámetro, 6522
Sincronización, 6522
Tratamiento de errores, 6522
EncoderCPU314C, 6528
Descripción, 6528
Llamada, 6528
Parámetro, 6529
Sincronización, 6529
Tratamiento de errores, 6529
EncoderET200S1Count, 6524
Descripción, 6524
Llamada, 6524
Parámetro, 6525

Programación del PLC
Manual de programación y manejo, 11/2019

Sincronización, 6525
Tratamiento de errores, 6525
EncoderET200S1SSI, 6519
Descripción, 6519
Llamada, 6519
Parámetro, 6520
Sincronización, 6520
Tratamiento de errores, 6520
EncoderFM350, 6526
Descripción, 6526
Llamada, 6526
Parámetro, 6526
Sincronización, 6527
Tratamiento de errores, 6527
EncoderFM450, 6516
Descripción, 6516
Llamada, 6517
Parámetro, 6517
Sincronización, 6518
Tratamiento de errores, 6518
EncoderIM174, 6530
Acuse de errores, 6532
Descripción, 6530
Llamada, 6531
Parametrización del IM 174 (configuración
hardware), 6530
Parámetro, 6531
Sincronización, 6532
Tratamiento de errores, 6532
EncoderIM178, 6514
Acuse de errores, 6516
Descripción, 6514
Llamada, 6515
Parametrización del IM 178-4 (configuración
hardware), 6515
Parámetro, 6515
Sincronización, 6515
Tratamiento de errores, 6516
EncoderSINAMICS, 6532
Acuse de errores, 6535
Descripción, 6532
Llamada, 6534
Parametrización del SINAMICS (configuración
hardware), 6533
Parámetro, 6534
Sincronización, 6534
Tratamiento de errores, 6535
EncoderSM338, 6522
Descripción, 6522
Llamada, 6523
Parámetro, 6523

8799

Índice alfabético

Sincronización, 6523
Tratamiento de errores, 6523
EncoderUniversal, 6535
Descripción, 6535
Funcionamiento, 6536
Llamada, 6536
Parámetro, 6536
Sincronización, 6536
Tratamiento de errores, 6536
END_CASE, 1957, 5619
END_FOR, 1959
END_IF, 1955, 5617
END_REPEAT, 1964, 5625
END_WHILE, 1962, 5624
Endian, 1487, 1489, 1491, 1493, 1906, 1908, 1910,
1912
ENDIS_PW, 920, 1295, 1525, 1970, 2150
Enlace de correo electrónico
Bloque de parámetros para, 7430
Enlace FTP
Bloque de parámetros para, 7431
Enlace ISO-on-TCP
Bloque de parámetros para, 7429
Enlace TCP
Bloque de parámetros para, 7427
Enlace UDP
Bloque de parámetros para, 7428
ENT, 5537
Entero, 900, 1274, 1685, 1936, 2139, 4929, 5149,
5467, 5611, 5751
16 bits, 253, 254
32 bits, 255, 256
64 bits, 257, 259
8 bits, 251, 252
Enteros, 190
Entorno de llamada
Ajuste para bloques, 8520
Ajuste para puntos de parada, 8555
Principios básicos, 8518
Entrada
Insertar, 1000, 5037, 7978
Quitar, 7979, 8039
Entrada digital
TIO_DI, 3917
TIO_DI_ONCE, 3922
Enviar datos
con TSEND, 6915
Fuera de la estación S7 propia con
X_SEND, 7617
Enviar SMS (TC_SEND), 4406, 7528
EQ_ElemType, 756, 1132, 1407
EQ_Type, 751, 1128, 1398, 1403

8800

ERR_MON
Instrucción, 6411
Parámetros de entrada, 6413
Parámetros de salida, 6413
Error de sintaxis
Buscar errores, 7689
Principios básicos, 7688
Errores de parámetros PtP comunes, 4452, 7007
ErrorID, 3619, 3626
Escalar, 901, 906, 1276, 1281, 1511, 1520, 1938,
1951, 2140, 2145, 4930, 5150, 5282, 5613, 5752
Esclavo DP
Desactivar y activar con D_ACT_DP, 2482, 5917
Leer datos de diagnóstico con DPNRM_DG, 2541,
5956
Sincronizar grupos con DP_SYC_FR, 2535, 5950
Esclavo I
Disparar alarma de proceso con DP_PRAL, 5947
Enviar alarma con SALRM, 5940
Esclavos DP normalizados
Escribir datos coherentes con DPWR_DAT, 2512,
5932
Escribir todas las salidas con SETIO, 2422, 5893
Escribir una parte de las salidas con
SETIO_PART, 2433, 5896
Leer datos coherentes con DPRD_DAT, 2510,
5929
Leer todas las entradas con GETIO, 2421, 5892
Leer una parte de las entradas con
GETIO_PART, 2431, 5894
Escribir
Señales de control, 6587
Un registro con WR_REC, 2509, 5927
Escribir área de memoria, 1484, 1903
Escribir bit de memoria, 1483, 1902
Escribir campo, 881, 1256
Escribir datos
Dentro de la estación S7 propia con I_PUT, 7608
En CPU remota con PUT, 3953, 6842
En esclavos DP normalizados o dispositivos
PROFINET IO con DPWR_DAT, 2512, 5932
Fuera de la estación S7 propia con X_PUT, 7624
Escribir dirección de memoria, 1481, 1900
Escritura
Señales de control, 6583
Esquema de contactos, 7943
Estación
Leer información con GetStationInfo, 2797
Estado, 184
Estado de la hora
Modificar con SET_SW_S, 5859

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Estado de la petición, 6606
ABS_CTRL, 6604
CAM_CTRL, 6637
CAM_CTRL_452, 6639
Estado de la petición de escritura
CNT2WRPN, 6580
Estado de la petición de lectura
CNT2RDPN, 6582
Estado de LED
Leer con LED, 2784
Leer mediante lista de estado del sistema, 6153
Estado del dispositivo
consultar de un interlocutor remoto con
STATUS, 6882
Recibir el cambio con USTATUS, 6884
Estado del programa
Activar, 8522
AWL, 8541
Desactivar, 8522
Desactivar todas las etapas, 8535
Editar bloques, 8528
Entorno de llamada, 8518, 8520
Forzar variable, 8528
Función, 8516
FUP, 8540
GRAPH, 8531, 8534, 8535, 8543
Inicializar cadena secuencial, 8534
KOP, 8539
Modos de operación, 8531, 8536
SCL, 8542
Sincronización del sistema, 8532, 8537
Estructura
de dependencias, 8473
De la lista de referencias cruzadas, 8484
Estructura de llamadas, 8468
Ficha Carga de la memoria, 8480
STRUCT, 288
Estructura de dependencias, 8472
Configurar las opciones de visualización, 8476
Estructura, 8473
Introducción, 8472
Mostrar, 8475
Significado de los símbolos, 8474
Estructura de la tabla de forzado permanente, 8605
Estructura de llamadas, 8465
Configurar las opciones de visualización,
Estructura,
Introducción, 8465
Mostrar,
Significado de los símbolos, 8467
Etapa
Acciones, 8199

Programación del PLC
Manual de programación y manejo, 11/2019

Borrar, 8270
Cambiar nombre, 8267
Comentar, 8268
Copiar y pegar, 8269
Desactivar todas las etapas, 8535
Elementos, 8199
Insertar, 8263
Interlock, 8199
Parámetros estáticos, 8224
Principios básicos, 8198
Renumerar, 8265
Saltar, 8270
Supervisión, 8199
Etapa inicial
Desmarcar, 8264
Establecer, 8264
Etiqueta, 913, 1288, 1688, 1966, 4937, 5157, 5470,
5627
Evaluación de error con RET_VAL, 174
Evento
Asignar bloque de organización (OB) con
ATTACH, 2625
Deshacer asignación a bloque de organización
(OB) con DETACH, 2629
Evento de alarma
Bloquear con DIS_IRT, 2694, 6059
Habilitar con EN_AIRT, 2703, 6063
Habilitar con EN_IRT, 2696, 6061
Retardar con DIS_AIRT, 2702, 6062
Evento de error asíncrono
Bloquear con DIS_IRT, 2694, 6059
Habilitar con EN_AIRT, 2703, 6063
Habilitar con EN_IRT, 2696, 6061
Instrucciones, 6058
Retardar con DIS_AIRT, 2702, 6062
Eventos de errores sincrónicos
Consultar desde el registro de estado de eventos
con READ_ERR, 6057
Desenmascarar con DMSK_FLT, 6056
Enmascarar con MSK_FLT, 6055
Eventos de errores síncronos
Consultar desde el registro de estado de eventos
con READ_ERR, 2680
Desenmascarar con DMSK_FLT, 2679
Enmascarar con MSK_FLT, 2678
EX, 7893
EXIT, 1966, 5627
EXP, 791, 1167, 1648, 1836, 2069, 4902, 5122, 5430,
5592, 5728
Expandir y contraer secciones de código, 8145
Expresión
expresión aritmética, 8117

8801

Índice alfabético

Expresión de comparación, 8120
Expresión lógica, 8125
Principios básicos, 8116
EXPT, 802, 1178

F
F_TRIG, 643, 1021, 1367, 1763
FALSE, 642, 643, 1019, 1021, 1366, 1367, 1762,
1763
Favoritos
Agregar, 7963, 8023, 8088, 8164, 8255
Eliminar, 7964, 8025, 8090, 8166, 8257
Mostrar, 7667
Ocultar, 7667
Utilizar, 7963, 8024, 8089, 8165, 8256
FB, 40
FC, 39
Fecha, 268, 269, 271
FETCH_RK, 7597
Ficha Carga de la memoria
Estructura, 8480
Fichero
Enviar datos con AR_SEND, 6103
FieldRead, 879, 1254
FieldWrite, 881, 1256
FIFO, 348
FIFOQueue, 348
FILL, 890, 1264, 1508, 1926, 2132, 4920, 5140, 5279,
5604, 5744
FILL_BLK, 829, 1205, 1443, 1863, 2092
Filter_DT1, 3893
Filter_PT1, 3864
Filter_PT2, 3878
Filtrar
Plano de ocupación,
Filtros
Borrar, 8461
definir para el plano de ocupación, 8461
en el plano de ocupación, 8461
Seleccionar, 8463
Fin de bloque, 1721, 1722, 1723, 5501, 5502, 5503
Fin de cadena
Finalizar cadenas secuenciales, 8261
Introducción, 8197
Finalizar el forzado permanente, 8631, 8633
FIND, 2346
Flanco
Ascendente, 634, 637, 639, 1011, 1014, 1017,
1601, 1762, 4825, 4828, 5044, 5047, 5380
Descendente, 635, 638, 641, 1013, 1016, 1018,
1600, 1763, 4827, 4829, 5046, 5048, 5378

8802

Flipflop
Activación/desactivación, 631, 1008, 4823, 5042
Desactivación/activación, 632, 1010, 4824, 5043
FLOOR, 898, 1273, 1935, 2138, 4928, 5148, 5611,
5750
FM 351
Arranque, 6585
FM 352
Arranque, 6618, 6621
FM 451
Arranque, 6589
FM 452
Arranque, 6618, 6621
FMT_CJ_T
Instrucción, 6732
Parámetros de entrada, 6732
Parámetros de entrada/salida, 6733
Parámetros de salida, 6733
FMT_DS1
Instrucción, 6718
Parámetros de entrada, 6719
Parámetros de entrada/salida, 6719
Parámetros de salida, 6719
FMT_PAR
Instrucción, 6713
Parámetros de entrada, 6714
Parámetros de entrada/salida, 6715
Parámetros de salida, 6715
FMT_PID
Diagrama de bloques, 6704
Funcionamiento, 6693
Instrucción, 6691
Parámetros de entrada, 6696
Parámetros de entrada/salida, 6697
Parámetros de salida, 6696
Variables estáticas, 6697, 6699, 6701
FMT_PV
Instrucción, 6727
Parámetros de entrada, 6730
Parámetros de entrada/salida, 6731
Parámetros de salida, 6731
FMT_TUN
Instrucción, 6721
Parámetros de entrada, 6722
Parámetros de entrada/salida, 6723
Parámetros de salida, 6722
Variables estáticas, 6723
FN, 1600, 5378
FOR, 1959, 5621
FORCE355
Instrucción, 6667

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Parámetros de entrada, 6668
Parámetros de salida, 6669
FORCE455
Instrucción, 6752
Parámetros de entrada, 6754
Parámetros de salida, 6755
Forzado permanente
Finalizar el forzado permanente, 8631, 8633
Forzar todos permanentemente, 8629
Forzado permanente de variables
Medidas de seguridad, 8605, 8624
FP, 1601, 5380
FR, 1603, 1619, 5381, 5398
FRAC, 800, 1176, 1843, 2076
FREQUENC, 6817
FTP, 4430, 7504
FTP_CMD, 4430, 7433, 7504
FTPS, 4430, 7504
Fuente AWL
Generar bloques, 7760
Función (FC)
Crear, 7729
Definición, 39
Exportar a un archivo fuente externo, 7757
Función de autocompletar
Función, 7682
Insertar instrucción, 7684
Insertar variable, 7683, 7684
Funcionalidad de la tabla de forzado
permanente, 8603
Funcionamiento
ABS_CTRL, 6583
ABS_CTRL_451, 6587
ABS_DIAG, 6585
ABS_DIAG_451, 6589
CAM_CTRL, 6617
CAM_CTRL_452, 6620
CAM_DIAG, 6619
CAM_DIAG_452, 6622
CNT_CTL1, 6555
CNT_CTL2, 6557
CNT_CTRL, 6553
CNT2_CTR, 6569
CNT2RDPN, 6569
CNT2WRPN, 6568
DIAG_INF, 6554
DIAG_RD, 6570
High_Speed_Counter, 3608
MC_Control, 6505
MC_GearIn, 6507
MC_Home, 6498
MC_Init, 6489

Programación del PLC
Manual de programación y manejo, 11/2019

MC_MoveAbsolute, 6490
MC_MoveJog, 6495
MC_MoveRelative, 6493
MC_Simulation, 6506
MC_StopMotion, 6503
SSI_Absolute_Encoder, 3619
Funciones matemáticas
CALCULATE, 7970, 7999, 8030, 8058
FUP, 8005, 8050, 8052, 8054
Comparación detallada, 8428
FUZ_355
Instrucción, 6665
Parámetros de entrada, 6666
Parámetros de entrada/salida, 6667
Parámetros de salida, 6666
FUZ_455
Instrucción, 6750
Parámetros de entrada, 6751
Parámetros de entrada/salida, 6752
Parámetros de salida, 6752

G
GADR_LGC, 2961
GEN_DIAG, 2830
Gen_UsrMsg, 2728
Generador de impulsos
Activar/desactivar con CTRL_PWM, 2845
Generar información de diagnóstico, 2830
Generar patrón de bits para el display de 7
segmentos, 1575, 2204
GEO_LOG, 2957
GEO2LOG, 2944
Gestión de peticiones, 6583, 6587
GET, 3947
Get_AlarmState, 2723
GET_DIAG, 2833
Get_IM_Data, 2787
GET_NAME:, 2793
GetBlockName, 2363
GetChecksum, 2803
GetError, 928, 1303, 1533, 1978, 2156
GetErrorID, 933, 1307, 1537, 1982, 2159
GetInstanceName, 2355
GetInstancePath, 2358
GETIO, 2421
GETIO_PART, 2431
GetSMCinfo, 2806
GetStationInfo, 2797
GetSymbolName, 2348
GetSymbolPath, 2352
GOTO, 1966, 5627

8803

Índice alfabético

GRAPH, 172
Acciones, 8201, 8202, 8204, 8207, 8208, 8209,
8278, 8283, 8284, 8285, 8286
Activar visor de avisos, 8310
Acusar errores de supervisión, 8535
Ajustes de test, 8533, 8534
Borrar rama, 8275
Cadenas secuenciales, 8193, 8194, 8257, 8258,
8259, 8260, 8261, 8262
Cerrar rama, 8196, 8274
Comparación detallada, 8438
Condiciones, 8211, 8286, 8288, 8293, 8301
Configuración, 8235
Declarar parámetros internos remanentes, 8244
Declarar parámetros internos visibles y accesibles
desde HMI, 8244
Definir el juego de parámetros de interfaz, 8242
Definir el modelo de espacio de memoria, 8243
Definir lenguaje de programación, 8240
Definir T_MAX y T_WARN manualmente, 8291
Desactivar el visor de avisos, 8310
Desactivar todas las etapas, 8535
Editar avisos, 8311
Etapa, 8198, 8199, 8263, 8264, 8265, 8267, 8268,
8269, 8270
Fin de cadena, 8197
Inicializar cadena secuencial, 8534
Instrucciones permanentes, 8211
Instrucciones permanentes anteriores, 8247
Instrucciones permanentes posteriores, 8252
Interfaz del bloque, 8213, 8216, 8220, 8224, 8226,
8228
Interlock, 8212
Lenguaje de programación, 8191
Llamadas de bloque, 8305, 8306, 8308
Modificar la configuración, 8238
Modo de aprendizaje, 8289, 8291, 8292, 8538
Modos de operación, 8531, 8536
Principios básicos de los tipos de datos, 8281
Rama alternativa, 8195, 8273
Rama simultánea, 8194, 8273
Restablecer solicitudes de registro, 8215
Salto a etapa, 8196, 8275, 8276, 8277
Sincronización del sistema, 8532, 8537
Supervisión, 8212
T_MAX, 8538
T_WARN, 8538
Test con el estado del programa, 8531
Transiciones, 8200, 8263, 8265, 8267, 8269,
8270
Ventana de programación, 8245

8804

Vigilancia del tiempo de etapa, 8289, 8290, 8291,
8292, 8538
Vista de cadena, 8248
Vista de etapa individual, 8250
Visualización del estado del programa, 8543
Guardar
RLO en bit BR, 1599, 4970, 5191, 5377
Guardar una tabla de forzado permanente, 8609
Guardar una tabla de observación, 8579

H
Habilitar
Avisos con EN_MSG, 6105
High_Speed_Counter, 3608
Comportamiento en caso de error, 3613
Descripción, 3608
Funcionamiento, 3608
Llamada, 3608
Parámetros de entrada, 3614
Parámetros de salida, 3616
Variables estáticas, 3617
Hora, 268, 269, 271
Ajustar e inicializar el estado de reloj con
SET_CLKS, 5843
Ajustar la alarma horaria con S_LTINT, 5855
Calcular hora local con SET_TIMEZONE, 2256
Calcular la hora local con BT_LT, 5852
Calcular la hora patrón con LT_BT, 5853
De la CPU, ajustar con WR_SYS_T, 2246, 5840
Leer la fecha y hora de la CPU con
RD_SYS_T, 2249
Leer la hora del sistema de la CPU con
TIME_TCK, 2266, 5842
Leer la hora y fecha de la CPU con
RD_SYS_T, 5841
Sincronizar entre esclavos y maestro, 5844
Hora local
Ajustar la alarma horaria con S_LTINT, 5855
Calcular a partir de la hora patrón con
BT_LT, 5852
Calcular con SET_TIMEZONE, 2256
Escribir con WR_LOC_T, 2252
Leer con RD_LOC_T, 2251
Leer y calcular con LOC_TIME, 5851
Hora patrón
Calcular a partir de la hora local con
LT_BT, 5853
Horario de verano/invierno
Alternar con SET_SW, 5857
Modificar el estado de la hora con
SET_SW_S, 5859

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

HTA, 2329, 5873

I
I_ABORT, 7610
I_GET, 7606
I_PUT, 7608
IB, 7893
ID, 7893
ID de enlace, 7426
Rango de valores, 7426
ID de hardware, 4401
Identificador de hardware, 2943, 7909
Determinar con LOG2MOD, 2949
Identificador HW, 7527
IF, 1955, 5617
IF_CONF para datos de configuración
(Telecontrol), 4421, 7542
Igual, 759, 1135, 1410
IGUAL A ARRAY, 762, 1138, 1413, 1824
IM0_Data, 2787
IMC, 981, 1354, 1563, 2022, 2194, 5012, 5232, 5333,
5684, 5808
Impulso, 644, 662, 683, 697, 1022, 1061, 1075, 1368,
1609, 1767, 1790, 2037, 4831, 4837, 4851, 5050,
5056, 5070, 5254, 5388, 5550, 5559, 5706
Prolongado, 686, 699, 1064, 1077, 1611, 1793,
4840, 4853, 5059, 5072, 5390, 5562
IN_RANGE, 747, 1124
INC, 777, 1154, 1640, 5420
Incrementar, 777, 1154, 1640, 5420
Índice variable, 213
Información avanzada de estado, 8138
Información de arranque, 39
Información de error, 174, 928, 933, 1303, 1307,
1533, 1537, 1978, 1982, 2156, 2159
Información del programa
en el plano de ocupación, 8456
en la estructura de dependencias, 8472
en la estructura de llamada, 8465
en la ficha, 8478
Mostrar, 8455
Vistas, 8455
Inicializar
Contador, 1624, 5403
Temporizador, 1608, 5387
Temporizador IEC, 678, 1384, 1784
Inicializar el estado del reloj con SET_CLKS, 5843
Inicializar temporizador, 1056
Inicializar todos los datos remanentes, 936, 1310,
1539, 1985, 2161
INIT_RD, 936, 1310, 1539, 1985, 2161

Programación del PLC
Manual de programación y manejo, 11/2019

INSERT, 2342
Insertar entrada, 8038
Insertar sección de comentario, 1968, 5629
Instancia individual
Cambiar tipo de llamada, 7969, 8029, 8096
Definición, 62
Ejemplo, 62
Instrucción, 7457
AG_SEND / AG_LSEND / AG_SSEND, 7316
Borrar, 8182
Buscar, 7671
Copiar, 8182
Cortar, 8182
Definir el tipo de datos, 7960, 7962, 8021, 8022,
8085
Insertar, 8182
Reglas, 8149
Versiones, 7673
Instrucción AWL
Borrar, 8101
Copiar, 8099
Cortar, 8100
Insertar, 8083
Insertar operando, 8086
Introducir, 8082
para insertar del portapapeles, 8100
Seleccionar, 8098
Instrucción nula, 1760, 1761, 5548, 5549
Instrucción permanente
Insertar, 8301
Introducción, 8211
Instrucción PNIO_ALARM
Parámetros formales, 7380
Instrucción PNIO_RECV
Parámetros formales, 7367
Instrucción PNIO_RW_REC
Parámetros formales, 7376
Instrucción PNIO_SEND
Parámetros formales, 7360
Instrucción SCL
insertar, 8151
Modificar el tipo de datos, 8162, 8163
Principios básicos de los tipos de datos, 8161
Reglas, 8149
Seleccionar, 8181
Instrucciones
AG_LOCK / AG_UNLOCK, 7325
AG_RECV / AG_LRECV / AG_SRECV, 7321
Indicaciones generales, 7457
Nombre simbólico, 7457
P3964_Config (configuración del
protocolo), 4464, 7018

8805

Índice alfabético

para conexiones configuradas, 7313
para el modo de operación DP, 7474
para enlace AG-AG, 7460
Port_Config (configuración del puerto), 4453,
7008
Receive_Config (configuración de la
recepción), 4458, 7012
Receive_P2P (recibir datos punto a punto), 4469,
7023
Receive_Reset (resetear receptor), 4471, 7025
Send_Config (configuración de la
transmisión), 4457, 7011
Send_P2P (enviar datos punto a punto), 4465,
7019
Signal_Get (consultar señales RS232), 4472,
7026
Signal_Set (establecer señales RS232), 4474,
7028
Sistema de automatización S7-400, 7167
USS_Drive_Control /
USS_Drive_Control_31, 4496, 7049
USS_Port_Scan, 4492, 7045
USS_Port_Scan_31, 4492, 7045
USS_Read_Param /
USS_Read_Param_31, 4500, 7053
USS_Write_Param /
USS_Write_Param_31, 4502, 7055
Instrucciones para coordinación de accesos en caso
de FETCH/WRITE, 7325
INT, 253, 381, 445, 515, 545, 583, 599
INT_TO_, 445, 545, 599
INTEG
Instrucción, 6414
Parámetros de entrada, 6416
Parámetros de salida, 6416
Integrar textos de listas de textos en avisos, 8350
Ejemplo, 8351
Intercambiar, 1666, 1717, 5449, 5498
Intercambio de datos, 8065
Interfaces de comunicación
Programar, 4448, 7002
Interfaz, (Véase Interfaz de bloque)
Interfaz de bloque
Declarar STRING, 7799
Estructura, 7791, 7809
Finalidad de la declaración de variables, 7783
Interfaz de bloque textual, 7809, 7810, 7811,
7812, 7821, 7822, 7823, 7824, 7826, 7827
Tipos de datos válidos, 7788
Valor de retorno, 7810
Interfaz de bloque textual
ARRAY, 7816

8806

Atributos para variables, 7822
Comentarios, 7823
Declaración de bloques, 7810
Declaración e inicialización de variables y
constantes, 7812
Edición, 7824
Ejemplo, 7827
Estructura, 7809
Instancias, 7821
Restablecimiento de la interfaz estándar de un
bloque de organización, 7826
Secciones de declaración, 7811
STRING/WSTRING, 7820
STRUCT, 7813
Interfaz del bloque
Actualizar, 7834
Declarar ARRAY, 7796
Declarar STRUCT, 7798
Declarar tipo de datos PLC, 7800
Declarar variable, 7793, 7794, 7801
GRAPH, 8213
Importar y exportar variables, 7808
Mostrar, 7667
Multiinstancia, 7802
Ocultar, 7667
Propiedades de las variables, 7829, 7831
Remanencia, 7789
Tipos de datos válidos, 7786
Interlock
Introducción, 8199, 8212
Programar, 8286
INV, 947, 1321, 2165, 4953, 5174, 5766
INVD, 1679, 5461
Invertir, 624, 947, 1001, 1321, 1597, 1678, 1679,
1682, 1683, 4819, 4953, 5038, 5174, 5374, 5460,
5461, 5464, 5465
INVI, 1678, 5460
IO2MOD, 2950
IO-Link, 3914, 3929
IP_CONFIG, 7416
IS_ARRAY, 762, 1138, 1413, 1824
IS_NULL, 759, 1135, 1410
ITB, 1672, 5455
ITD, 1675, 5457
IW, 7893
IX, 7893

J
JBI, 1695, 5477
JC, 1691, 5472
JCB, 1693, 5475

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

JCN, 1692, 5474
Jerarquía de llamada, 60
JL, 1712, 5493
JM, 1705, 5487
JMP, 911, 1286, 4935, 5155
JMP_LIST, 914, 1289
JMPN, 912, 1287, 4936, 5156
JMZ, 1708, 5490
JN, 1702, 5483
JNB, 1694, 5476
JNBI, 1696, 5478
JO, 1697, 5479
JOIN, 2294
JOS, 1699, 5480
JP, 1703, 5485
JPZ, 1707, 1708, 5488, 5490
JU, 1689, 5471
Juego de datos
De un módulo, leer con RD_DPAR, 2613
De un módulo, leer de forma asíncrona con
RD_DPARA, 2619
Escribir parámetros predefinidos con
WR_DPARM, 2623
Leer con RD_REC, 2504
Leer con RDREC, 2382, 5888
Leer de datos del sistema configurados, con
RD_DPARM, 2621
Proveer en I-device con PRVREC, 2524
Recibir en I-device con RCVREC, 2514
Transferir con WRREC, 2401, 5890
Juego de parámetros de interfaz, 8213, 8216, 8220,
8242
JUO, 1710, 5492
JZ, 1700, 5482

K
KOP, 7943, 7994
Comparación detallada, 8428

L
L, 1604, 1620, 1655, 5383, 5399, 5437
L DBLG, 1717, 5498
L DBNO, 1718, 5499
L DILG, 1719, 5500
L DINO, 1720, 5500
L STW, 1657, 5439
LABEL, 913, 1288, 4937, 5157
LAG1ST
Instrucción, 6417

Programación del PLC
Manual de programación y manejo, 11/2019

Parámetros de entrada, 6419
Parámetros de salida, 6420
LAG2ND
Parámetros de entrada, 6423
Parámetros de salida, 6423
LAR1, 1658, 5440
LAR1 <D>, 1659, 5441
LAR1 AR2, 1660, 5443
LAR2, 1661, 5443
LAR2 <D>, 1662, 5444
LC, 1606, 1622, 5385, 5401
LDT, 271, 405, 484
LDT_TO_, 484
LEAD_LAG, 985, 1359, 1572, 2026, 2201, 5017,
5237, 5342, 5688, 5812
LEAVE, 5538
Lectura
Señales de respuesta, 6583
LED, 2784
Leer
Contador de horas de funcionamiento con
READ_RTM, 5850
De un bloque de datos de la memoria de carga con
READ_DBL, 2919, 6189
Estado de LED con LED, 2784
Hora local con LOC_TIME, 5851
Hora local con RD_LOC_T, 2251
Juego de datos de un módulo con
RD_DPAR, 2613
Lista parcial SZL con RDSYSST, 6116
Recursos del sistema asignados dinámicamente,
con READ_SI, 6109
Registro de un módulo con RD_DPAR, 6028
Registro de un módulo de forma asíncrona, con
RD_DPARA, 2619, 6030
Señales de respuesta, 6587
Un juego de datos con RD_REC, 2504
Un registro con RD_REC, 5922
Leer bit de memoria, 1479, 1898
Leer campo, 879, 1254
Leer datos
De esclavos DP normalizados o dispositivos
PROFINET IO con DPRD_DAT, 2510, 5929
de una CPU remota con GET, 3947
Dentro de la estación S7 propia con I_GET, 7606
Fuera de la estación S7 propia con X_GET, 7622
Leer dirección de memoria, 1477, 1896
Leer la hora del sistema con TIME_TCK, 2266, 5842
LEFT, 2335
Legitimación de contraseñas, 920, 1295, 1525, 1970,
2150
LEN, 2332

8807

Índice alfabético

Lenguaje de programación
Cambiar, 7690, 8240
FUP, 8005
GRAPH, 8191
KOP, 7943
Reglas para cambiar, 7690
LGC_GADR, 2963
Librería
Agregar y utilizar un bloque, 7731
Librería del protocolo USS
Información general sobre el dispositivo de
accionamiento, 4504, 7057
Requisitos para el uso, 4489, 7042
USS_Drive_Control /
USS_Drive_Control_31, 4496, 7049
USS_Port_Scan, 4492, 7045
USS_Port_Scan_31, 4492, 7045
USS_Read_Param /
USS_Read_Param_31, 4500, 7053
USS_Write_Param /
USS_Write_Param_31, 4502, 7055
Vista general, 4487, 7041
Librería global
Sinopsis del protocolo USS, 4487, 7041
LIMALARM
Instrucción, 6423
Parámetros de entrada, 6425
Parámetros de salida, 6425
LIMIT, 784, 1161, 1419, 1831, 2065, 4897, 5116,
5271, 5587, 5724
Limitar y habilitar legitimación de la contraseña, 920,
1295, 1525, 1970, 2150
LIMITER
Instrucción, 6426
Parámetros de entrada, 6427
Parámetros de salida, 6427
Límites de ARRAY, 8138
LINT, 257, 388, 460
LINT_TO_, 460
Lista de estado del sistema
Definición, 6123
Estructura de una lista parcial, 6124
Extracto de lista parcial con la ID de SZL
W#16#0132 Índice W#16#0005, 6147
Extracto de lista parcial con la ID de SZL
W#16#0132 Índice W#16#0008, 6148
Extracto de lista parcial con la ID de SZL
W#16#0132 Índice W#16#000B, 6150
Extracto de lista parcial con la SZL-ID W#16#0132
Índice W#16#000C, 6151
Extracto de lista parcial con la SZL-ID W#16#0232
Índice W#16#0004, 6152

8808

ID de SZL W#16#xy11: ID de módulo, 6127
ID de SZL W#16#xy12: características de la
CPU, 6128
ID de SZL W#16#xy13: áreas de memoria del
usuario, 6131
ID de SZL W#16#xy14: áreas del sistema, 6132
ID de SZL W#16#xy15: Tipos de bloque, 6133
ID de SZL W#16#xy1C: identificación de un
componente, 6134
ID de SZL W#16#xy22: estado de alarma, 6140
ID de SZL W#16#xy25: correspondencia entre
memorias imagen parcial de proceso y
OBs, 6143
ID de SZL W#16#xy32: Datos de estado de
comunicación, 6146
ID de SZL, estructura, 6125
Leer extracto de lista parcial SZL con
RDSYSST, 6116
Listas parciales, sinopsis, 6126
SZL-ID W#16#00B1: información de diagnóstico
de rack, 6176
SZL-ID W#16#00B2: registro de diagnóstico 1 a
través de dirección física, 6178
SZL-ID W#16#00B3: datos de diagnóstico de
módulo a través de la dirección base lógica, 6179
SZL-ID W#16#00B4: datos de diagnóstico de un
esclavo DP, 6179
SZL-ID W#16#0x94: información de estado de
rack o estación, 6165
SZL-ID W#16#xy74: estado de los LEDs de
módulo, 6153
SZL-ID W#16#xy90: información del sistema
maestro DP, 6155
SZL-ID W#16#xy91: información de estado de
módulo, 6156
SZL-ID W#16#xy92: Información de estado de
rack o estación, 6162
SZL-ID W#16#xy95: información avanzada del
sistema maestro DP, 6167
SZL-ID W#16#xy96: información de estado de
módulo con PROFINET IO y PROFIBUS
DP, 6168
SZL-ID W#16#xy9C: Información del
intercambiador de herramientas (PROFINET
IO), 6171
SZL-ID W#16#xyA0: búfer de diagnóstico, 6175
Lista de referencias cruzadas, (Véase referencias
cruzadas)
Agregar nuevos objetos, 8509
Ajustes, 8486
Estructura, 8484
Introducción, 8483

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

mostrar, 8490
Objeto fuente, 8484
Ordenar columnas, 8484
Utilidad, 8483
Ventajas, 8483
Vista general, 8490
Lista de saltos, 914, 1289, 1712, 5493
Listas de textos para avisos, 8349
Llamada
ABS_CTRL, 6584
ABS_CTRL_451, 6588
ABS_DIAG, 6586
ABS_DIAG_451, 6590
ABS_INIT, 6583
CAM_CTRL, 6617
CAM_CTRL_452, 6620
CAM_DIAG, 6619
CAM_DIAG_452, 6622
CAM_INIT, 6616
CAM_MSRM_452, 6624
CNT_CTL1, 6555
CNT_CTL2, 6557
CNT_CTRL, 6553
CNT2_CTR, 6570
CNT2RDPN, 6569
CNT2WRPN, 6568
DIAG_INF, 6554
DIAG_RD, 6570
EncoderAbsSensorDP, 6521
EncoderCPU314C, 6528
EncoderET200S1Count, 6524
EncoderET200S1SSI, 6519
EncoderFM350, 6526
EncoderFM450, 6517
EncoderIM174, 6531
EncoderIM178, 6515
EncoderSINAMICS, 6534
EncoderSM338, 6523
EncoderUniversal, 6536
High_Speed_Counter, 3608
MC_Control, 6505
MC_GearIn, 6511
MC_Home, 6501
MC_Init, 6489
MC_MoveAbsolute, 6492
MC_MoveJog, 6497
MC_MoveRelative, 6494
MC_Simulation, 6507
MC_StopMotion, 6504
OutputCPU314C, 6540
OutputET200S2AO, 6539
OutputIM174, 6545

Programación del PLC
Manual de programación y manejo, 11/2019

OutputIM178, 6538
OutputMM4_DP, 6543
OutputSINAMICS, 6548
OutputSM332, 6541
OutputSM432, 6539
OutputUniversal, 6542
SSI_Absolute_Encoder, 3619
Llamada de bloque
"Call by reference" o "Call by value", 86
Actualizar, 7967, 8027, 8094, 8308
Cambiar tipo de llamada, 7969, 8029, 8096
GRAPH, 8207
Insertar, 7965, 8026, 8090, 8092, 8168, 8170,
8171, 8172, 8174, 8305, 8306
Instancia individual, 62
Llamada como instancia individual o
multiinstancia, 62
Modificar, 7969, 8029, 8309
Multiinstancia, 64
Principios básicos, 59
Profundidad de anidamiento, 60
Transferencia de parámetros como copia o
puntero, 86
Llamar, 1724, 1725, 1727, 4969, 5190, 5504, 5506,
5507
LMNGEN_C
Instrucción, 6427
Parámetros de entrada, 6430
Parámetros de entrada/salida, 6431
Parámetros de salida, 6431
Variables estáticas, 6431
LMNGEN_S
Instrucción, 6432
Parámetros de entrada, 6437
Parámetros de entrada/salida, 6439
Parámetros de salida, 6438
Variables estáticas, 6439
LN, 790, 1166, 1649, 1835, 2069, 4901, 5120, 5430,
5591, 5727
LOG_GEO, 2958
LOG2GEO, 2947
LOG2MOD, 2949
Logaritmo, 790, 1166, 1649, 1835, 2069, 4901, 5120,
5430, 5591, 5727
Lógica de bits
O, 1581, 1583, 1586, 1589, 1590, 5359, 5360,
5364, 5366, 5367
O-exclusiva, 1584, 1585, 1591, 1592, 5361, 5362,
5368, 5369
Y, 1579, 1580, 1587, 1588, 5356, 5357, 5364,
5365
Long word, 250

8809

Índice alfabético

LOOP, 1713, 5494
LP_SCHED
Parámetros de entrada, 6395
LP_ZONE
Instrucción, 6767
Parámetros de entrada, 6769
Parámetros de entrada/salida, 6769
Parámetros de salida, 6769
Variables estáticas, 6769
LREAL, 262, 395, 470, 520, 562, 8131
LREAL_TO_, 470, 562
LTIME, 267, 401, 478
LTIME_TO_, 478
LTOD, 269, 413, 494
LTOD_TO_, 494
LWORD, 250, 376, 434
LWORD_TO_, 434

M
Machine Tailoring, (Consulte Reconfigurar sistemas
IO)
Maestro Modbus, 7184
Mapa de bits
Activar, 628, 1005, 4979, 5199, 5300, 5652, 5777
Activar en el área de periferia, 4980, 5200, 5301,
5653, 5778
Desactivar, 630, 1007, 4985, 5205, 5305, 5656,
5781
Desactivar en el área de periferia, 4986, 5206,
5306, 5657, 5782
Marcadores
Activar, 8146
Borrar, 8148
Función, 8146
Navegar, 8147
Marcas
Activar la indicación de las marcas
remanentes, 8464
Marcas remanentes
Activar indicación, 8464
Máscara de bits, 981, 1354, 1563, 2022, 2194, 5012,
5232, 5333, 5684, 5808
Master Control Relay, 4971, 4974, 4976, 4977, 5191,
5194, 5196, 5198, 5542, 5544, 5545, 5547
Master Control Relay (MCR)
Accesos a parámetros formales, 205
Funcionalidad, 203
Indicaciones de manejo, 205
Transferencia de parámetros, 205
MAX, 783, 1159, 1418, 1829, 2063, 4895, 5114,
5270, 5586, 5722

8810

MAX_LEN, 2293
Máximo, 783, 1159, 1418, 1829, 2063, 4895, 5114,
5270, 5586, 5722
MB, 7893
MB_CLIENT, 4596, 4617
MB_COMM_LOAD, 4579
MB_MASTER, 4582
MB_RED_CLIENT, 4645
MB_SERVER, 4606, 4631
MB_SLAVE, 4590
MC_AbortMeasuringInput, 3141, 3331, 3482
MC_CamIn, 3170, 3178, 3355, 3362, 3506, 3512
MC_CamTrack, 3146, 3148, 3335, 3337, 3486, 3488
MC_ChangeDynamic
Instrucción, 3011, 3048
Parámetro, 3011, 3049
MC_CommandTable
Instrucción, 3009, 3046
Parámetro, 3010, 3047
MC_Control, 6504
Descripción, 6504
Funcionamiento, 6505
Llamada, 6505
Modo de regulación, 6505
Modo de seguimiento, 6505
Modo manual, 6505
Parámetro, 6506
MC_DefineKinematicsZone, 3263, 3420
MC_DefineTool, 3272, 3428
MC_DefineWorkspaceZone, 3261, 3418
MC_GearIn, 3149, 3153, 3338, 3341, 3489, 3492,
6507
Descripción, 6507
Funcionamiento, 6507
Llamada, 6511
Parámetro, 6511
MC_GearInPos, 3154, 3159, 3342, 3346, 3493,
3497
MC_GetCamFollowingValue, 3192, 3367, 3517
MC_GetCamLeadingValue, 3190, 3369, 3518
MC_GroupContinue, 3214, 3216, 3389, 3390
MC_GroupInterrupt, 3213, 3388
MC_GroupStop, 3218, 3220, 3392, 3394
MC_Halt, 3099, 3102, 3298, 3301, 3448, 3451
Diagrama de funcionamiento, 2992, 3030
Instrucción, 2990, 3028
Parámetro, 2991, 3029, 3064
MC_Home, 3093, 3293, 3443, 6498
Búsqueda del punto de referencia, 6498
Descripción, 6498
Funcionamiento, 6498
Instrucción, 2986, 3023

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Llamada, 6501
Parámetro, 2987, 3025, 6502
Posicionamiento del punto de referencia, 6499
MC_Init, 6489
Descripción, 6489
Funcionamiento, 6489
Llamada, 6489
MC_InterpolateCam, 3188, 3366, 3516
MC_InverseKinematicsTransformation, 3278
MC_KinematicsTransformation, 3276
MC_LeadingValueAdditive, 3184, 3186
MC_MeasuringInput, 3134, 3137, 3325, 3327, 3475,
3477
MC_MeasuringInputCyclic, 3137, 3139, 3327, 3329,
3477, 3480
MC_MotionInPosition, 3197, 3200, 3373, 3376
MC_MotionInVelocity, 3193, 3196, 3370, 3372
MC_MoveAbsolute, 3103, 3106, 3302, 3305, 3452,
3455, 6490
Descripción, 6490
Diagrama de funcionamiento, 2996, 3034
Funcionamiento, 6490
Instrucción, 2993, 3031
Llamada, 6492
Parámetro, 2994, 3032, 6492
MC_MoveCircularAbsolute, 3231, 3236, 3405, 3410
MC_MoveCircularRelative, 3237, 3242, 3411, 3416
MC_MoveDirectAbsolute, 3244, 3249
MC_MoveDirectRelative, 3251, 3255
MC_MoveJog, 3116, 3119, 3315, 3318, 3465, 3468,
6495
Descripción, 6495
Diagrama de funcionamiento, 3008, 3045
Funcionamiento, 6495
Instrucción, 3005, 3043
Llamada, 6497
Parámetro, 3006, 3044, 6497
MC_MoveLinearAbsolute, 3221, 3225, 3395, 3399
MC_MoveLinearRelative, 3226, 3230, 3400, 3404
MC_MoveRelative, 3107, 3110, 3306, 3309, 3456,
3459, 6493
Descripción, 6493
Diagrama de funcionamiento, 3000, 3038
Funcionamiento, 6493
Instrucción, 2997, 3035
Llamada, 6494
Parámetro, 2998, 3036, 6494
MC_MoveSuperimposed, 3120, 3123, 3319, 3322,
3469, 3472

Programación del PLC
Manual de programación y manejo, 11/2019

MC_MoveVelocity, 3111, 3115, 3310, 3314, 3460,
3464
Diagrama de funcionamiento, 3004, 3042
Instrucción, 3001, 3039
MC_OutputCam, 3142, 3145, 3332, 3334, 3483,
3485
MC_PhasingAbsolute, 3166, 3169, 3347, 3350,
3498, 3501
MC_PhasingRelative, 3162, 3165, 3351, 3354, 3502,
3505
MC_Power, 3085, 3090, 3285, 3290, 3436, 3440
Diagrama de funcionamiento, 2983, 3021
Instrucción, 2979, 3017
Parámetro, 2980, 3018
MC_ReadParam
Instrucción, 3013, 3051
Parámetro, 3014, 3052
MC_Reset, 2984, 3022, 3091, 3291, 3441
MC_SetAxisSTW, 3131
MC_SetKinematicsZoneActive, 3269, 3425
MC_SetKinematicsZoneInactive, 3270, 3427
MC_SetOcsFrame, 3275, 3431
MC_SetSensor, 3124, 3323
MC_SetTool, 3273, 3430
MC_SetWorkspaceZoneActive, 3265, 3422
MC_SetWorkspaceZoneInactive, 3267, 3423
MC_Simulation, 6506
Descripción, 6506
Funcionamiento, 6506
Llamada, 6507
MC_Stop, 3126, 3130
MC_StopMotion, 6502
Cancelación de un desplazamiento, 6503
Descripción, 6502
Funcionamiento, 6503
Llamada, 6504
Parámetro, 6504
MC_SynchronizedMotionSimulation, 3182, 3364,
3514
MC_TorqueAdditive, 3202, 3204, 3383, 3384
MC_TorqueLimiting, 3208, 3211, 3378, 3381, 3523
MC_TorqueRange, 3204, 3207, 3385, 3387
MC_TrackConveyorBelt, 3257, 3259
MC_WriteParam
Instrucción, 3016, 3053
Parámetro, 3016, 3053
MC_WriteParameter, 3132
MCAT, 977, 1351, 1559, 2018, 2190, 5009, 5228,
5329, 5680, 5804
MCR, 4971, 4974, 4976, 4977, 5191, 5194, 5196,
5198, 5542, 5544, 5545, 5547
MCRA, 4976, 5196, 5545

8811

Índice alfabético

MCRD, 4977, 5198, 5547
MD, 7893
Mecanismo EN/ENO
Ejemplo en AWL, 165
Ejemplo en FUP, 161
Ejemplo en KOP, 157
Ejemplo en SCL, 170
Principios básicos, 152
Medición de frecuencia con FREQUENC, 6817
Medidas de seguridad para el forzado permanente de
variables, 8605, 8624
Medir tiempo de ejecución, 940, 1314, 1543, 1989
Memoria
Comprimir, 4940, 5160, 5287, 5631, 5757
Memoria de carga, 8478
Mostrar, 8482
Memoria de carga máxima disponible
Mostrar, 8482
Memoria de trabajo, 8478
Memoria imagen de proceso
Actualizar entradas con UPDAT_PI, 2365, 5881
De las entradas, sincronizar con SYNC_PI, 2371,
5884
De las salidas, actualizar con UPDAT_PO, 2368,
5883
De las salidas, sincronizar con SYNC_PO, 2373,
5886
Escribir salidas con SETIO, 2422, 5893
Leer entradas con GETIO, 2421, 5892
Leer un área de la memoria imagen de proceso
con GETIO_PART, 2431, 5894
Transferir un área de la memoria imagen de
proceso con SETIO_PART, 2433, 5896
Memoria remanente, 8478
Memoria sombra, 7612
Memory Card
Leer información con GetSMCinfo, 2806
MID, 2338
MIN, 781, 1157, 1417, 1828, 2062, 4893, 5112, 5268,
5585, 5721
Mínimo, 781, 1157, 1417, 1828, 2062, 4893, 5112,
5268, 5585, 5721
MOD, 775, 1151, 1641, 4890, 5108, 5422, 8117
Modbus
Modbus_Comm_Load, 4510, 7063
Modbus_Slave, 4514, 4522, 7067, 7075
Modbus_Comm_Load, 4510, 7063
Modbus_Slave, 4514, 4522, 7067, 7075
MODBUSPN, 6946, 6974
Modelo de espacio de memoria, 8213, 8243
Modo avanzado, 8574
Modo básico, 8574

8812

Modo de aprendizaje, 8289, 8290, 8291, 8292, 8538
Modo de etapa individual
Activar puntos de parada, 8558, 8561, 8567
Ajustar el entorno de llamada para puntos de
parada, 8555
Borrar puntos de parada, 8564
Continuar la ejecución del programa, 8566
Continuar la ejecución del programa hasta la
marca, 8566
Desactivar puntos de parada, 8558, 8561, 8567
Ejecutar llamada, 8566
Ejecutar siguiente instrucción, 8566
Navegar hasta los puntos de parada, 8562
Posicionar puntos de parada, 8557
Principios básicos, 8547, 8568, 8570, 8572
Modo de forzado, 8590
Modo de observación, 8590
Modo de observación y forzado, 8590
Modo de operación
Para el test de programas GRAPH, 8531
Test en modo automático, 8536
Test en modo manual, 8536
Test en modo semiautomático, 8536
Modulación por ancho de impulso con PULSE, 6821
ModuleStates, 2825
Módulo
Clase de módulo, 6125
Datos de diagnóstico, 6065
Determinar dirección lógica con
GADR_LGC, 2961, 6230
Determinar direcciones lógicas con
RD_LGADR, 2960, 6229
Determinar el slot de una dirección lógica con
LGC_GADR, 2963, 6232
Determinar la dirección inicial con
GEO_LOG, 2957, 6225
Determinar la dirección lógica del slot con
LOG_GEO, 2958, 6227
Identificación a través de la lista de estado del
sistema, 6127
Información de diagnóstico, lista de estado del
sistema, 6176
Información de estado de módulo, mediante lista
de estado del sistema, 6156
Leer juego de datos con RD_DPAR, 2613
Leer registro con RD_DPAR, 6028
Leer registro de forma asíncrona con
RD_DPARA, 2619, 6030
Parametrizar con PARM_MOD, 6031
Módulo de comunicación (CM), 4568

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Módulo de comunicaciones (CM)
Programar, 4448, 7002
Recepción de datos, 4469, 7023
Mostrar
Carga de la memoria de la CPU, 8481
de referencias cruzadas, 8490
Estructura de dependencias, 8475
Estructura de llamadas,
Información del programa, 8455
Instrucciones de comunicación para conexiones
S7 no configuradas, 6825
Memoria de carga, 8482
Memoria de carga máxima disponible, 8482
Plano de ocupación,
Mostrar los valores de observación de estructuras en
la ventana de inspección, 8526
Mostrar u ocultar informaciones de variables, 7983,
8043, 8087, 8163, 8303
Mostrar y ocultar columnas, 7808, 7867, 7920, 7941
Mostrar y ocultar operandos absolutos, 8142
MOVE, 803, 1179, 1421, 4912, 5132
MOVE_BLK, 820, 1196, 1434, 1854, 2084
MOVE_BLK_VARIANT, 344, 822, 1198, 1436, 1856,
2086
MoveVelocity
Parámetro, 3002, 3040
MSK_FLT, 2678
MUL, 772, 1148, 4887, 5106
Multiinstancia, 114
Cambiar tipo de llamada, 7969, 8029, 8096
Declarar, 7802
Definición, 64
Multiplexar, 953, 1327, 1995, 2170, 5643
Multiplicar, 772, 1148, 1633, 1636, 1644, 4887, 5106,
5413, 5417, 5425
MUX, 953, 1327, 1995, 2170, 5643
MW, 7893
MX, 7893

N
N, 635, 638, 1013, 1016, 4827, 5046
N_TRIG, 641, 1018, 4829, 5048
NE_ElemType, 758, 1134, 1409
NE_Type, 754, 1130, 1405
NEG, 776, 1152, 2060, 4891, 5109, 5719
Negar, 776, 1152, 1679, 1681, 1682, 2060, 4891,
5109, 5461, 5462, 5463, 5719
NEGD, 1681, 5462
NEGI, 1679, 5461
NEGR, 1682, 5463

Programación del PLC
Manual de programación y manejo, 11/2019

Nivel de protección
Modificar, 4944, 5164, 5291, 5634, 5760
NONLIN
Instrucción, 6439
Parámetros de entrada, 6441
Parámetros de salida, 6441
NOP 0, 1760, 5549
NOP 1, 1761, 5549
NORM
Instrucción, 6443
Parámetros de entrada, 6444
Parámetros de salida, 6445
NORM_X, 904, 1278, 1513, 1940, 2142
Normalizar, 904, 1278, 1513, 1940, 2142
NOT, 624, 1597, 2165, 4819, 5374, 5766, 8125,
8126
NOT_NULL, 761, 1137, 1412
NOT_OK, 750, 1127
Nuevos tipos de datos, 209
NULL, 353
Número de aviso
Asignar, 8319
Número en coma flotante, 261, 262
Comprobar invalidez, 750, 1127
Comprobar validez, 749, 1126
Números en coma flotante, 191, 263
no válidos, 263

O
O, 995, 997, 1581, 1586, 5034, 5035, 5359, 5364
O(, 1589, 5366
OB de alarma cíclica
Ajustar parámetros con SET_CINT, 2635
Consultar parámetros con QRY_CINT, 2637
Observación de bucles, 8524
Observación de estructuras, 8526
Observación de estructuras (S7-1200/1500), 8526
Observación de programas AWL, 8541
Observación de programas FUP, 8540
Observación de programas GRAPH, 8543
Observación de programas KOP, 8539
Observación de programas SCL, 8542
Observar
Comando "Observar inmediatamente", 8594,
8621
Comando "Observar todos", 8593, 8620
Observar y forzar variables en el editor de bloques
de datos, 7871, 7873
Observar bucles, 8524
Observar bucles con S7-1200/1500, 8524
Observar bucles con S7-300/400, 8524

8813

Índice alfabético

Observar estructuras, 8526
Observar programas AWL, 8541
Observar programas FUP, 8540
Observar programas GRAPH, 8543
Observar programas KOP, 8539
Observar programas SCL, 8542
OD, 1735, 5515
O-exclusiva, 998, 999, 5035, 5036
Operaciones lógicas con bits, 998, 5035
OF, 1957, 5619
OK, 749, 1126
ON, 1583, 5360
ON(, 1590, 5367
Opciones de test en la Tabla de forzado
permanente, 8603
Opciones de visualización
configurar para la estructura de
dependencias, 8476
configurar para la estructura de llamada, 8470
para el plano de ocupación, 8460
Open User Communication, 6887
deshacer el punto de acceso local de
comunicación con TDISCON, 6913
Deshacer una conexión con TDISCON, 4056
Enviar datos a través de UDP con TUSEND, 4088,
6922
Enviar datos con TSEND, 4058, 4061, 6915
Establecer conexión con TCON, 4045, 4048
Establecer conexión y enviar datos con
TSEND_C, 3979, 3984
Establecer conexión y leer datos con
TRCV_C, 3994, 3999
Estructura de la información de dirección del
interlocutor remoto en UDP, 6899
Funcionamiento de las instrucciones, 6888
FW_IOT, 6938
FW_TCP, 6934
Modificar parámetros de configuración IP con
IP_CONF, 6928
Modificar parámetros de configuración IP con
T_CONFIG, 4121
Parametrización de las conexiones en TCP e ISO
on TCP, 6892
Parametrización del punto de acceso local en
UDP, 6897
Recibir datos a través de UDP con TURCV, 4092,
6925
Recibir datos con TRCV, 4065, 4069, 6918
TCON, 6910
Vía Industrial Ethernet, 6887
Operación lógica
AD, 1733, 5513

8814

AW, 1728, 5508
OD, 1735, 5515
OW, 1730, 5510
XOD, 1737, 5517
XOW, 1731, 5511
Operaciones lógicas con bits
Insertar entrada, 1000, 5037
O, 995, 997, 5034, 5035
O-exclusiva, 999, 5036
Y, 993, 995, 5033, 5034
Operaciones lógicas con palabras, 202
Operando, 95, 96, 102, 103, 105, 106, 108, 109, 110,
112, 114, 115, 116, 118, 280, 287, 291, 299
Insertar, 7981, 8041, 8086
Operandos autorizados para la tabla de
observación, 8581
Operandos permitidos para la tabla de forzado
permanente, 8611
OPN, 1715, 4938, 5158, 5496
OPNDI, 1716, 5497
OPNI, 4939, 5159
OR, 184, 944, 997, 1318, 4950, 5035, 5171, 8126
Orden
Procesamiento de peticiones, 6602, 6605
OS, 184, 190, 191, 192, 198
OUT_RANGE, 748, 1125
OutputCPU314C, 6540
Descripción, 6540
Llamada, 6540
Parámetro, 6541
OutputET200S2AO, 6539
Descripción, 6539
Llamada, 6539
Parámetro, 6540
OutputIM174, 6544
Descripción, 6544
Llamada, 6545
Parametrización del IM 174 (configuración
hardware), 6544
Parámetro, 6545
OutputIM178, 6538
Descripción, 6538
Llamada, 6538
Parámetro, 6538
Salidas digitales, 6538
OutputMM4_DP, 6543
Descripción, 6543
Llamada, 6543
Parámetro, 6543
OutputSINAMICS, 6545
Descripción, 6545
Llamada, 6548

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Parametrización del SINAMICS en HWCN, 6545
Parámetro, 6548
OutputSM332, 6541
Descripción, 6541
Llamada, 6541
Parámetro, 6541
OutputSM432, 6538
Descripción, 6538
Llamada, 6539
Parámetro, 6539
OutputUniversal, 6542
Descripción, 6542
Funcionamiento, 6542
Llamada, 6542
Parámetro, 6542
OV, 184, 190, 191, 192, 194, 198, 202
OVERRIDE
Instrucción, 6445
Parámetros de entrada, 6446
Parámetros de salida, 6446
OW, 1730, 5510

P
P, 634, 637, 1011, 1014, 4825, 5044
P_RCV_RK, 7185
P_SND_RK, 7185
P_TRIG, 639, 1017, 4828, 5047
P3964_Config (configuración del protocolo), 4464,
7018
Palabra de estado, 184, 190, 191, 192, 194, 195, 198,
199, 202
Palabra doble, 248
Palabras clave, 96
PARA_CLT
Parámetros de entrada, 6448
Parámetros de salida, 6448
PARA_CTL
Instrucción, 6446
Parametrizar
De un módulo con PARM_MOD, 6031
Parámetro, 6824
Comunicación básica S7, 6824
EncoderAbsSensorDP:, 6522
EncoderCPU314C, 6529
EncoderET200S1Count, 6525
EncoderET200S1SSI, 6520
EncoderFM350, 6526
EncoderFM450, 6517
EncoderIM174, 6531
EncoderIM178, 6515
EncoderSINAMICS, 6534

Programación del PLC
Manual de programación y manejo, 11/2019

EncoderSM338, 6523
EncoderUniversal, 6536
ErrorID, 3619, 3626
MC_Control, 6506
MC_GearIn, 6511
MC_Home, 6502
MC_MoveAbsolute, 6492
MC_MoveJog, 6497
MC_MoveRelative, 6494
MC_StopMotion, 6504
Modificar ajustes internos, 8244
OutputCPU314C, 6541
OutputET200S2AO, 6540
OutputIM174, 6545
OutputIM178, 6538
OutputMM4_DP, 6543
OutputSINAMICS, 6548
OutputSM332, 6541
OutputSM432, 6539
OutputUniversal, 6542
Parámetro BUFFER, Send_P2P, 4468, 7022
Parámetro de entrada PID_ES, 6373
Parámetro LENGTH, Send_P2P, 4468, 7022
Parámetros
ABS_CTRL_451, 6588
ABS_DIAG_451, 6590
ABS_INIT, 6583
CAM_CTRL_452, 6621
CAM_DIAG_452, 6623
CAM_INIT, 6617
CAM_MSRM_452, 6624
CNT_CTL1, 6555
CNT_CTRL, 6553
CNT2_CTR, 6570
CNT2RDPN, 6569
CNT2WRPN, 6568
DIAG_INF, 6554
DIAG_RD, 6570
Dinámicos, transferir con WR_PARM, 6035
Parámetros ocultos, 7982, 8042
Predefinidos, escribir con WR_DPARM, 2623,
6037
Parámetros de bloque, 80, 82, 85, 89, 91, 92, 93, 94
Interfaz de bloque, 7791
Parámetros de entrada
High_Speed_Counter, 3614
LP_SCHED_S, 6486
SSI_Absolute_Encoder, 3623
Parámetros de entrada del bloque de función
GRAPH, 8216

8815

Índice alfabético

Parámetros de salida
High_Speed_Counter, 3616
SSI_Absolute_Encoder, 3624
Parámetros de salida del bloque de función
GRAPH, 8220
Parámetros estáticos del bloque de función
GRAPH, 8224, 8226, 8228
Parámetros internos
declarar remanentes, 8244
Declarar visibles y accesibles desde HMI, 8244
Parámetros ocultos, 7982, 8042
Paréntesis, 1593, 5370
PARM_MOD, 6031
PE_CMD, 2563, 5979
PE_DS3_Write_ET200S, 2568, 5985
PE_End_RSP, 2601, 6015
PE_Error_RSP, 2598, 6013
PE_Get_Mode_RSP, 2603, 6018
PE_I_DEV, 2594, 6009
PE_List_Modes_RSP, 2602, 6017
PE_Measurement_List_RSP, 2609, 6023
PE_Measurement_Value_RSP, 2610, 6024
PE_Mode_ID, 7384, 7408
PE_PEM_Status_RSP, 2605, 6020
PE_Start_End, 2558, 5975
PE_Start_RSP, 2599, 6014
PE_WOL, 2569, 5986
PEEK, 1477, 1896
Leer dirección de memoria, 1477, 1896
PEEK_BOOL, 1479, 1898
Leer bit de memoria, 1479, 1898
Perfil de instrucción
Abrir, 7679
Activar y desactivar, 7681
Borrar, 7681
Crear, 7678
Editar, 7679
Principios básicos, 7677
Periferia, 110
Petición de escritura
CNT2WRPN, 6579
Petición de lectura
CNT2RDPN, 6581
Peticiones
ABS_CTRL, 6601
ABS_CTRL_451, 6604
ABS_DIAG, 6586
ABS_DIAG_451, 6590
CAM_CTRL, 6636
CAM_CTRL_452, 6638
CAM_DIAG, 6619
CAM_DIAG_452, 6623

8816

CNT_CTL1, 6556
CNT_CTRL, 6553
Peticiones de escritura, 6602, 6605
Peticiones de lectura, 6603, 6605
PID
Instrucción, 6449
Modo de funcionamiento, 6450
Parámetros de entrada, 6451
Parámetros de salida, 6452
PID_3Step
Instrucción, 3688, 3723
Parámetros de entrada, 3698, 3731
Parámetros de entrada/salida, 3702
Parámetros de salida, 3700, 3733
Variables estáticas, 3735
PID_Compact
Instrucción, 3666
Parámetros de entrada, 3636, 3670
Parámetros de entrada/salida, 3639
Parámetros de salida, 3638, 3671
Variables estáticas, 3672
PID_CP
Descripción, 6330
Parámetros de entrada, 6345
Parámetros de entrada/salida, 6348
Parámetros de salida, 6347
PID_ES
Parámetros de salida, 6375
PID_FM
Diagramas de bloques, 6659
Funcionamiento, 6649
Instrucción, 6648
Parámetros de entrada, 6651
Parámetros de entrada/salida, 6655
Parámetros de salida, 6652
PID_FM_455
Diagramas de bloques, 6744
Funcionamiento, 6734
Instrucción, 6733
Parámetros de entrada, 6737
Parámetros de entrada/salida, 6740
PID_PAR
Instrucción, 6675
Parámetros de entrada, 6677
Parámetros de salida, 6678
Parámetros modificables, 6678
PID_PAR_455
Instrucción, 6760
Parámetros de entrada, 6762
Parámetros de salida, 6762
Parámetros modificables, 6763

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

PID_Temp
Cascada, 3773
Funcionamiento, 3763
Modo, 3773
Parámetro ErrorBits, 3818
Parámetros de entrada, 3769
Parámetros de entrada/salida, 3773
Parámetros de salida, 3771
Parámetros State y Mode PID_Temp, 3809
PwmPeriode, 3824
Variable ActivateRecoverMode, 3821
Variable Warning, 3823
PIP_Mode, 3940
Plano de ocupación
Activar la indicación de las marcas remanentes,
Borrar filtros,
Configurar las opciones de visualización,
Definir filtros,
Ejemplo de la vista de entradas y salidas, 8457
Ejemplo de la vista de marcas, 8457
Estructura, 8457
Filtrar,
Introducción,
Mostrar,
Posibilidades de filtrado,
Significado de los símbolos,
PNIO_RECV, 7366
PNIO_SEND, 7359
POINTER, 353
POKE, 1481, 1900
Escribir dirección de memoria, 1481, 1900
POKE_BLK, 1484, 1903
Escribir área de memoria, 1484, 1903
POKE_BOOL, 1483, 1902
Escribir bit de memoria, 1483, 1902
Polyline, 3830
Poner
Valor inicial del contador, 4874
Poner a 0
Contador, 5402
Poner a cero
Contador, 1623
Poner al valor inicial
Valor inicial del contador, 722
POP, 1756, 5536
PORT_CFG, 4544
Port_Config (configuración del puerto), 4453, 7008
Posicionamiento controlado
analógicamente con ANALOG, 6792
digital con DIGITAL, 6803
Pragmas en SCL, 8178
Precisión, 8131

Programación del PLC
Manual de programación y manejo, 11/2019

Primera consulta, 184
Procedimiento para la observación de
estructuras, 8527
Procesamiento de peticiones
Orden, 6602, 6605
Procesamiento de valores analógicos, 901, 904,
1276, 1278, 1511, 1513, 1938, 1940, 2140, 2142
Proceso CiR
Controlar, 5167, 5294, 5637
PROFIenergy
Ajustar el modo de activación de los módulos de
potencia, 2568, 5985
Descripción, 2555, 5973
Forzar comandos PROFIenergy en el
iDevice, 2594, 6009
Generación de respuesta negativa a
comando, 2598, 6013
Generar respuesta a comando para final de
pausa, 2601, 6015
Generar respuesta a comando para iniciar
pausa, 2599, 6014
Generar respuesta con comandos PROFIenergy
soportados, 2607, 6022
Generar respuesta con datos de energía
consultados, 2603, 6018
Generar respuesta con estado PEM, 2605, 6020
Generar respuesta con lista de valores medidos
soportados, 2609, 6023
Generar respuesta con modos de ahorro de
energía consultados, 2602, 6017
Generar respuesta con valores medidos
solicitados, 2610, 6024
Iniciar y finalizar modo de ahorro de
energía, 2558, 2563, 5975, 5979
Leer información de estado, 2563, 5979
PE_CMD, 2563, 5979
PE_DS3_Write_ET200S, 2568, 5985
PE_End_RSP, 2601, 6015
PE_Error_RSP, 2598, 6013
PE_Get_Mode_RSP, 2603, 6018
PE_I_DEV, 2594, 6009
PE_Identify_RSP, 2607, 6022
PE_List_Modes_RSP, 2602, 6017
PE_Measurement_List_RSP, 2609, 6023
PE_Measurement_Value_RSP, 2610, 6024
PE_PEM_Status_RSP, 2605, 6020
PE_Start_End, 2558, 5975
PE_Start_RSP, 2599, 6014
Wake On LAN, 2569, 5986
PROFINET CBA
Actualizar entradas de la interfaz del programa
con PN_IN, 7614

8817

Índice alfabético

Actualizar interconexiones con PN_DP, 7616
Actualizar salidas de la interfaz PROFINET con
PN_OUT, 7615
Profundidad de anidamiento, 37, 60
Program_Alarm, 2715
Programa
Determinar tiempo de ejecución con
OB_RT, 6180
Programa AWL
Comentario de línea, 8097
Insertar instrucción, 8083
Insertar una llamada de bloque, 8090, 8092
Introducir instrucción, 8082
Reglas, 8079
Sección de comentario, 8097
Seleccionar instrucción, 8098
Visualización del estado del programa, 8541
Programa de usuario
Buscar errores, 7689
Función, 35
Probar, 8515
Programa SCL
Insertar comentarios, 8179
Insertar instrucción, 8150, 8151
Insertar una llamada de bloque, 8167, 8168, 8170,
8171, 8172, 8174
Mostrar y ocultar una lista de parámetros, 8177
Selección de una instrucción, 8181
Visualización del estado del programa, 8542
Programación
Estructurada, 37
Instrucciones PtP, 4448, 7002
Lineal, 36
Programación estructurada, 37
Programación lineal, 36
Programación punto a punto, 4448, 7002
Programación simbólica
Mostrar direcciones absolutas, 7670
Propiedad de bloque
Editar, 7747
Función, 7739
Mostrar, 7747
Sinopsis, 7740
Protección contra copia, 7772
Protección contra escritura, 7774
Protección de know-how
Abrir bloques, 7777
Cambiar la contraseña, 7780
Configurar, 7776
Imprimir bloque, 7778
Introducción, 7763
Quitar, 7781

8818

PROTECT, 4944, 5164, 5291, 5634, 5760
Protocolo de interfaz serie universal, (Véase
protocolo USS)
Protocolo USS
Instrucciones, 4566
PRVREC, 2524
PT, 1058
PULSE, 6821
PULSEGEN
Funcionamiento, 6249
Instrucción, 6248
Parámetros de entrada, 6256
Parámetros de salida, 6258
PULSEGEN_M
Instrucción, 6452
Modo de funcionamiento, 6453
Parámetros de entrada, 6459
Parámetros de salida, 6460
Puntero
ANY, 356
POINTER, 353
VARIANT, 335
Punto de parada
Activar, 8558, 8561, 8567
Ajustar el entorno de llamada, 8555
Borrar, 8564
Continuar la ejecución del programa, 8566
Continuar la ejecución del programa hasta la
marca, 8566
Desactivar, 8558, 8561, 8567
Ejecutar llamada, 8566
Ejecutar siguiente instrucción, 8566
Navegar hasta los puntos de parada, 8562
Posicionar, 8557
Test en modo de etapa individual, 8547, 8568,
8570, 8572
PUSH, 1755, 5535
PUT, 3953

Q
QB, 7893
QD, 7893
QRY_CINT, 2637
QRY_DINT, 2664
QRY_TINT, 2651
QW, 7893
QX, 7893

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

R
R, 626, 1003, 1595, 1608, 1623, 4821, 5040, 5372,
5387, 5402
R_TRIG, 642, 1019, 1366, 1762
Raíz cuadrada, 788, 1164, 1647, 1834, 4900, 5119,
5429, 5590, 5726
RALRM, 2444
Rama
Borrar, 7987, 8046, 8275
Cerrar, 7987, 8274
Definición, 7985, 8045
Insertar, 7986, 8046
Reglas, 7985, 8045
Rama alternativa
Crear, 8273
Introducción, 8195
Rama simultánea
Crear, 8273
Introducción, 8194
Ramificación, 1955, 1957, 5617, 5619
RampFunction, 3849
Rango
Valor dentro del rango, 747, 1124
Valor fuera del rango, 748, 1125
RCV_CFG, 4549
RCV_PTP, 4560, 7589
RCV_RST, 4561
RCVREC, 2514
RD_ADDR, 2953
RD_DPAR, 2613
RD_DPARA, 2619
RD_DPARM, 2621
RD_LGADR, 2960
RD_LOC_T, 2251
RD_REC, 2504
RD_SINFO, 2767
RD_SYS_T, 2249
RDREC, 2382
RE_TRIGR, 927, 1301, 1532, 1977, 2155, 4942,
5162, 5289, 5633, 5758
READ_355
Instrucción, 6669
Parámetros de entrada, 6670
Parámetros de salida, 6671
READ_455
Instrucción, 6755
Parámetros de entrada, 6756
Parámetros de salida, 6756
READ_BIG, 1491, 1910
READ_DBL, 2919

Programación del PLC
Manual de programación y manejo, 11/2019

READ_ERR, 2680
READ_LITTLE, 1487, 1906
ReadFromArrayDB, 859, 1235, 1467, 1887, 2116
ReadFromArrayDBL, 864, 1240, 1471, 1891, 2120
REAL, 261, 393, 467, 519, 559, 584, 605, 8131
REAL_TO_, 467, 559, 605
Rearranque
Ejecutar con RESUME, 6880
Receive_Config (configuración de la
recepción), 4458, 7012
Receive_P2P (recibir datos punto a punto), 4469,
7023
Receive_Reset (resetear receptor), 4471, 7025
Receta
Exportar a un archivo CSV, 2851
Importar a bloque de datos, 2853
Recibir datos
De fuera de la estación S7 propia con
X_RCV, 7618
En I-device con RCVREC, 2514
y guardar con RCV_PTP, 7589
y poner a disposición con SERVE_RK, 7602
Recibir SMS (TC_RECV), 4411, 7532
RecipeExport, 2851
RecipeImport, 2853
Recomendaciones de programación, 211
ReconfigIOSystem, 2487
Reconfiguración de sistemas IO, 2487
Reconfigurar sistemas IO, 2487
Recursos de programa, 7727
Recursos del sistema asignados dinámicamente
Liberar con DEL_SI, 6112
Redondear, 896, 897, 898, 900, 1270, 1271, 1273,
1274, 1684, 1685, 1686, 1687, 1932, 1933, 1935,
2136, 2137, 2138, 2139, 4925, 4926, 4928, 4929,
5145, 5146, 5148, 5149, 5466, 5467, 5468, 5469,
5609, 5610, 5611, 5748, 5749, 5750, 5751
Referencias, 209
Referencias cruzadas
Agregar nuevo objeto, 8509
mostrar, 8490
Objetos visualizados, 8483
Refresco de imagen, 1760, 5548
Registro
De un módulo, leer con RD_DPAR, 6028
De un módulo, leer de forma asíncrona con
RD_DPARA, 6030
Escribir con WR_REC, 2509, 5927
Escribir parámetros predefinidos con
WR_DPARM, 6037
Escribir y leer registros, 2612, 6026
Leer con RD_REC, 5922

8819

Índice alfabético

Leer de datos del sistema configurados, con
RD_DPARM, 6034
Parámetros dinámicos, transferir con
WR_PARM, 6035
Proveer en I-Device con PRVREC, 5937
Recibir en I-Device con RCVREC, 5935
Registro de desplazamiento, 5023, 5026, 5243, 5245,
5348, 5351, 5694, 5696, 5817, 5820
Registro de direcciones, 133, 134, 140, 141, 1757,
1758, 5540, 5541
Registro del bloque de datos, 1717, 5498
Reglas
Segmento AWL, 8079
Reglas para la observación de bucles con
S7-1200/1500, 8524
Reglas para la observación de bucles con
S7-300/400, 8524
Reglas para la observación de estructuras
(S7-1200/1500), 8526
Reiniciar conexión, 4106
Rellenar
Área, 829, 890, 1205, 1264, 1443, 1508, 1863,
1926, 2092, 2132, 4920, 5140, 5279, 5604, 5744
Área sin interrupciones, 833, 1209, 1446, 1866,
2095
Remanencia, 54, 56
Bloque de datos, 7855, 7856
Interfaz del bloque, 7789
Marcas, temporizadores, contadores, 7902
Variable PLC, 7902, 7903
Rendimiento, 207
REPEAT, 1964, 5625
REPL_VAL, 4990, 5210, 5309, 5660, 5786
REPLACE, 2344
REQ en instrucciones que funcionan
asíncronamente, 4813
RES_RCVB, 7592
Resaltar palabras clave, 8138
RESET, 4985, 5205, 5305, 5656, 5781
RESET_BF, 630, 1007
RESETI, 4988, 5208, 5308, 5659, 5784
RESETP, 4986, 5206, 5306, 5657, 5782
Restar, 771, 1146, 1632, 1636, 1643, 4886, 5104,
5412, 5416, 5424
Restar tiempos con T_SUB, 2240, 5838
Resto de división, 775, 1151, 1641, 4890, 5108,
5422
Resultado binario, 184, 198
Resultado lógico, 184, 198
RET, 918, 1293, 4938, 5158
RET_VAL en instrucciones que funcionan
asíncronamente, 4813

8820

Retardo al conectar, 649, 666, 689, 701, 1026, 1067,
1079, 1372, 1613, 1772, 1796, 2041, 4833, 4843,
4855, 5052, 5062, 5074, 5256, 5392, 5553, 5564,
5708
Con memoria, 692, 703, 1070, 1081, 1615, 1798,
4846, 4857, 5065, 5076, 5394, 5567
Retardo al desconectar, 653, 670, 694, 705, 1030,
1072, 1083, 1376, 1617, 1776, 1801, 2045, 4835,
4848, 4859, 5054, 5067, 5078, 5259, 5396, 5556,
5569, 5711
Retardo de tiempo, 937, 1312, 1541, 1986, 2163,
4943, 5163, 5290, 5633, 5759
RETURN, 1968, 5629
RIGHT, 2336
RLD, 1749, 5529
RLDA, 1753, 5533
RLO, 184, 198
Invertir, 624, 1001, 1597, 4819, 5038, 5374
Poner a 0, 1598, 5376
Poner a 1, 1598, 5375
RMP_SOAK
Instrucción, 6460
Parámetros de entrada, 6466
Parámetros de salida, 6466
RND, 1684, 5466
RND-, 1687, 5469
RND+, 1686, 5468
ROC_LIM
Instrucción, 6468
Parámetros de entrada, 6473
Parámetros de salida, 6474
ROL, 965, 1339, 2006, 2179, 4963, 5185, 5650,
5775
ROR, 963, 1337, 2004, 2177, 4962, 5183, 5648,
5773
Rotar
Derecha, 963, 1337, 1753, 2004, 2177, 4962,
5183, 5533, 5648, 5773
Izquierda, 965, 1339, 1749, 1751, 1753, 2006,
2179, 4963, 5185, 5529, 5531, 5533, 5650, 5775
ROUND, 896, 1270, 1932, 2136, 4925, 5145, 5609,
5748
RRD, 1751, 5531
RRDA, 1753, 5533
RS, 632, 1010, 4824, 5043
RT, 678, 1056, 1384, 1784
RT_INFO, 2778
RTM, 363, 2268
RUNTIME, 940, 1314, 1543, 1989
Medir tiempo de ejecución, 940, 1314, 1543,
1989
RW_REC, 7375

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

S
S, 627, 1004, 1596, 1624, 4822, 5041, 5373, 5403
S_CD, 718, 1095, 4870, 5089
S_COMP, 2273
S_CONV, 2275
S_CU, 1816, 5579
S_CUD, 720, 1097, 1820, 4872, 5090, 5582
S_MOVE, 2271
S_ODT, 689, 1067, 1796, 4843, 5062, 5564
S_ODTS, 692, 1070, 1798, 4846, 5065, 5567
S_OFFDT, 694, 1072, 1801, 4848, 5067, 5569
S_PEXT, 686, 1064, 1793, 4840, 5059, 5562
S_PULSE, 683, 1061, 1790, 4837, 5056, 5559
S5TIME, 265, 397, 473, 586, 607
S5TIME_TO_, 473, 607
Salida
Insertar, 7978, 8038
Quitar, 7979, 8039
Salida digital
TIO_DQ, 3933
Salir
Programa de usuario, 928, 1302, 1532, 1978,
2156, 4942, 5162, 5290, 5633, 5759
Saltar, 911, 912, 913, 914, 916, 918, 1286, 1287,
1288, 1289, 1290, 1293, 1688, 1712, 4935, 4936,
4937, 4938, 5155, 5156, 5157, 5158, 5470, 5493
incondicional, 1689, 5471
Si BR = 0, 1696, 5478
Si BR = 1, 1695, 5477
Si el resultado es cero, 1700, 5482
Si el resultado es mayor o igual a cero, 1707,
5488
Si el resultado es mayor que cero, 1703, 5485
Si el resultado es menor o igual a cero, 1708,
5490
Si el resultado es menor que cero, 1705, 5487
Si el resultado no es cero, 1702, 5483
Si el resultado no es válido, 1710, 5492
Si OS = 1, 1699, 5480
Si OV = 1, 1697, 5479
Si RLO = 0, 1692, 1694, 5474, 5476
Si RLO = 1, 1691, 1693, 5472, 5475
Salto
Finalizar cadenas secuenciales, 8261
Salto a etapa
Borrar, 8277
Cambiar destino de salto, 8276
Insertar, 8275
Introducción, 8196
Navegar hasta el destino de salto, 8277

Programación del PLC
Manual de programación y manejo, 11/2019

SAVE, 1599, 4970, 5191, 5377
SC, 722, 1099, 4874
SCALE, 906, 1281, 1520, 1951, 2145, 4930, 5150,
5282, 5613, 5752
SCALE_M
Instrucción, 6475
Parámetros de entrada, 6476
Parámetros de salida, 6476
SCALE_X, 901, 1276, 1511, 1938, 2140
SCL, 8115, 8183, 8185
Borrar un área, 8160
Comparación detallada, 8435
Copiar y pegar un área, 8157
Insertar comentario, 1968, 5629
Insertar pragmas, 8178
Insertar un área, 8156
Navegar por las áreas, 8159
Uso de áreas, 8153
Ventana de programación, 8140
SD, 699, 701, 1079, 1611, 1613, 4853, 4855, 5074,
5390, 5392
SE, 699, 1077, 1611, 4853, 5072, 5390
Sección de comentario, 8097
Secuencia de bits, 246, 247, 248
64 bits, 250
Secuencia de impulsos
Emitir con una frecuencia predefinida, 2847
SEG, 988, 1362, 1575, 2028, 2204, 5028, 5250,
5353, 5698, 5822
Segmento
Borrar, 7950, 8012, 8074, 8298
Contraer, 7951, 8013, 8074, 8298
Copiar, 7950, 8011, 8073, 8297
Expandir, 7951, 8013, 8074, 8298
Insertar, 7948, 7950, 8010, 8011, 8071, 8073,
8295, 8297
Insertar el título, 7953, 8014, 8076, 8300
Introducir comentario, 7954, 8015, 8077
Navegar en los bloques, 7954, 8016, 8078, 8301
Seleccionar, 7949, 8011, 8072, 8296
Utilizar, 7947, 8009, 8071, 8295
Segmento FUP
Borrar rama, 8046
Insertar rama, 8046
Insertar una llamada de bloque, 7965, 8026
Rama, 8045
Reglas relativas a ramas, 8045
Visualización del estado del programa, 8540
Segmento KOP
Borrar rama, 7987
Borrar un cruce, 7989
Cambiar la posición de un cruce, 7989

8821

Índice alfabético

Cerrar rama, 7987
Cruce, 7988
Insertar cruce, 7988
Insertar rama, 7986
Insertar una llamada de bloque, 7965, 8026
Interconexiones no permitidas, 7957
Rama, 7985
Reglas para ramas paralelas, 7985
Visualización del estado del programa, 8539
SEL, 951, 1325, 1547, 1993, 2168, 4956, 5178, 5299,
5641, 5769
Seleccionar, 951, 1325, 1547, 1993, 2168, 4956,
5178, 5299, 5641, 5769
Selectores de función
ABS_CTRL, 6602
ABS_CTRL_451, 6604
CAM_CTRL, 6637
CAM_CTRL_452, 6638
Sello de tiempo
Con transferencia de aviso con
TIMESTMP, 5862
SEND_CFG, 4547
Send_Config (configuración de la transmisión), 4457,
7011
Send_P2P (enviar datos punto a punto), 4465, 7019
Parámetros LENGTH y BUFFER, 4468, 7022
SEND_PTP, 4557, 7586
SEND_RK, 7593
Seno, 792, 1168, 1650, 1837, 2070, 4904, 5123,
5431, 5593, 5729
Señales de control
ABS_CTRL, 6584
ABS_CTRL_451, 6588
Escribir, 6583, 6587
Señales de respuesta
Leer, 6583, 6587
Serializar, 814, 1191, 1430, 1849, 2080
Serialize, 814, 1191, 1430, 1849, 2080
SERVE_RK, 7602
Service_Request_ID, 7393
SET, 1598, 4979, 5199, 5300, 5375, 5652, 5777
SET_BF, 628, 1005
SET_CINT, 2635
SET_CLKS, 5843
SET_TIMEZONE, 2256
SET_TINT, 2644
SET_TINTL, 2646
SETI, 4983, 5203, 5303, 5655, 5780
SETIO, 2422
SETIO_PART, 2433, 5896
SETP, 4980, 5200, 5301, 5653, 5778
SF, 705, 1083, 1617, 4859, 5078, 5396

8822

SGN_GET, 4562
SGN_SET, 4563
SHL, 961, 1335, 2002, 2175, 4960, 5181, 5646,
5772
SHR, 959, 1333, 2000, 2174, 4958, 5179, 5645,
5770
SHRB, 5026, 5245, 5351, 5696, 5820
SHUT_DOWN, 926, 1300, 1531, 1976
Signal_Get (consultar señales RS232), 4472, 7026
Signal_Set (establecer señales RS232), 4474, 7028
Significado de las columnas utilizadas en la tabla de
forzado permanente, 8605
Signo, 780, 1156, 1646, 2061, 4892, 5111, 5427,
5720
Simbología, 207
Simbología homogénea, 207
Símbolos
en el plano de ocupación, 8458
en la estructura de dependencias, 8474
en la estructura de llamada, 8467
Símbolos de la tabla de observación, 8576
Símbolos utilizados en la tabla de forzado
permanente, 8607
SIN, 792, 1168, 1650, 1837, 2070, 4904, 5123, 5431,
5593, 5729
sin tipo, 8135
Sincronización
De esclavos DP con DP_SYC_FR, 2535, 5950
Relojes esclavos con SNC_RTCB, 2265, 5844
Sincronización del sistema
Durante el test de programas GRAPH, 8532
Ejecutar, 8537
Sincronizar páginas de usuario, 4354
Sinopsis
acerca de los formatos de visualización en la tabla
de forzado permanente, 8614
de los formatos de visualización en la tabla de
visualización, 8584
SINT, 251, 378, 438, 513, 539
SINT_TO_, 438, 539
Sistema maestro DP
Determinar topología con DP_TOPOL, 2544,
5959
Información, lista de estado del sistema, 6155
Sistema operativo, 35
SLD, 1746, 5526
Slicing, 210
Slot, 2943
Determinar dirección lógica con
LGC_GADR, 2963, 6232
Determinar dirección lógica, con
LOG_GEO, 2958, 6227

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

SLW, 1742, 5522
SMC, 983, 1357, 1567, 2024, 2197, 5015, 5235,
5338, 5686, 5810
SNC_RTCB, 2265
SP, 697, 1075, 1609, 4851, 5070, 5388
SP_GEN
Instrucción, 6476
Parámetros de entrada, 6478
Parámetros de salida, 6478
SPLIT, 2309
SplitRange, 3843
SPLT_RAN
Instrucción, 6478
Parámetros de entrada, 6480
Parámetros de salida, 6480
SQR, 787, 1163, 1646, 1833, 2067, 4899, 5118,
5428, 5589, 5725
SQRT, 788, 1164, 1647, 1834, 2068, 4900, 5119,
5429, 5590, 5726
SR, 631, 1008, 4823, 5042
SRD, 1747, 5527
SRT_DINT, 2661
SRW, 1744, 5524
SS, 703, 1081, 1615, 4857, 5076, 5394
SSD, 1741, 5520
SSI, 1739, 5519
SSI_Absolute_Encoder, 3619
Comportamiento en caso de error, 3622
Descripción, 3619
Funcionamiento, 3619
Llamada, 3619
Parámetros de entrada, 3623
Parámetros de salida, 3624
Variables estáticas, 3625
STA, 184
STP, 928, 1302, 1532, 1978, 2156, 4942, 5162, 5290,
5633, 5759
Strg_TO_Chars, 2287
STRG_VAL, 2278
String,
Comparar variables con S_COMP, 2273, 5868
Declaración en la interfaz de bloque,
Direccionamiento,
STRING/WSTRING
Interfaz de bloque textual, 7820
STRING_TO_, 501, 573, 575, 612
STRUCT
Declaración en bloques de datos globales, 7850
Declarar en la interfaz del bloque, 7798
Declarar en un tipo de datos PLC, 7934
Direccionamiento, 291

Programación del PLC
Manual de programación y manejo, 11/2019

Estructura, 288
Interfaz de bloque textual, 7813
SUB, 771, 1146, 4886, 5104
Suma de verificación
Leer con GetChecksum, 2803
Sumar, 769, 1145, 1631, 1635, 1638, 1642, 5103,
5411, 5415, 5419, 5423
Sumar tiempos con T_ADD, 2238, 5837
Superior al tiempo de activación de la etapa, 2213,
2225, 5828, 5834
Superior al tiempo de activación ininterrumpido de la
etapa, 2214, 2227, 5829, 5834
Superior al tiempo de advertencia, 2218, 2231
Superior al tiempo máximo de activación de
etapa, 2216, 2229
Superponer
Variable, 118
Superponer variables, 7801
Supervisión
Acusar errores de supervisión, 8535
Introducción, 8199, 8212
Programar, 8288
SWAP, 857, 1233, 1885, 2113, 5735
SWITCH, 916, 1290
Instrucción, 6480
Parámetros de entrada, 6481
Parámetros de salida, 6481
SYNC_PI, 2371
SYNC_PO, 2373
SZ, 5092

T
T, 1663, 5446
T STW, 1665, 5448
T_ADD, 2238
T_COMBINE, 2244
T_COMP, 2234
T_CONFIG, 4121
T_CONV, 2236
T_DIAG, 4112
T_DIFF, 2242
T_RESET, 4106
T_SUB, 2240
Tabla
Buscar valor con TBL_FIND, 6205
Calcular la desviación estándar con DEV, 6216
Combinar un valor lógicamente y guardarlo con
WRD_TBL, 6213
Comparar valores de tabla con CDT, 6218
Copiar valor con TBL_WRD, 6211
Distribuir/recoger datos con PACK, 6222

8823

Índice alfabético

Ejecutar operaciones con TBL, 6209
Emitir el primer valor con FIFO, 6203
Emitir el último valor con LIFO, 6207
Enlazar con TBL_TBL, 6220
Introducir valor con ATT, 6202
Tabla de forzado permanente
Abrir, 8609
Cambiar entre modo básico y modo
avanzado, 8607
Comprobación de sintaxis, 8610
Display, 8609
Estructura, 8605
Funcionalidad, 8603
Guardar, 8609
Modo avanzado, 8607
Modo básico, 8607
Modo de observación y forzado, 8590
Observar inmediatamente variables, 8621
Opciones de test, 8603
Operandos permitidos, 8611
Operandos permitidos para valores de forzado
permanente, 8612
Resumen de las opciones de test, 8603
Significado de las columnas, 8605
Significado de los símbolos, 8607
Sinopsis de los formatos de visualización, 8614
Tabla de observación
Abrir, 8578
Aplicaciones, 8573
Cambiar entre el modo básico y el modo
avanzado, 8575
Comprobación de sintaxis, 8580
Copiar, 8579
Crear, 8578
Ejemplo de cómo rellenar una tabla de
observación, 8580
Estructura, 8574
Guardar, 8579
Modo avanzado, 8574
Modo básico, 8574
Modo de observación y forzado, 8590
Operandos autorizados, 8581
Operandos permitidos para valores de
forzado, 8582
Resumen de las opciones de test, 8573
Significado de las columnas, 8574
Significado de los símbolos, 8576
Sinopsis de los formatos de visualización, 8584
Test del cableado, 8573
TADDR_Param, 4096
TADDR_RCV_IP, 4098
TADDR_SEND_QDN, 4098

8824

TAK, 1754, 5534
TAN, 795, 1171, 1653, 2072, 4906, 5126, 5435,
5731
Tangente, 795, 1171, 1653, 1839, 2072, 4906, 5126,
5435, 5594, 5731
TAR1, 1667, 5449
TAR1 <D>, 1668, 5450
TAR1 AR2, 1669, 5451
TAR2, 1670, 5452
TAR2 <D>, 1670, 5453
Task Card
Buscar una instrucción, 7671
TCON, 4045, 4048
TCON_IP_RFC para conexiones de
Telecontrol, 4417, 7538
TCON_IP_V4 para conexiones de Telecontrol, 4417,
7538
TCON_PHONE para conexiones de
Telecontrol, 4417, 7538
TCON_WDC para conexiones de Telecontrol, 4417,
7538
TCONT_CP
Funcionamiento, 6259
Instrucción, 6258
Parámetros de entrada, 6272
Parámetros de entrada/salida, 6274
Parámetros de salida, 6273
Variables estáticas, 6274
TCONT_S
Funcionamiento, 6282
Instrucción, 6281
Parámetros de entrada, 6287
Parámetros de entrada/salida, 6288
Parámetros de salida, 6288
Variables estáticas, 6289
TDISCON, 4056
TeleService
AS_DIAL, 7632
AS_MAIL, 7644
Enviar un correo electrónico con TM_MAIL, 4685
Enviar un mensaje de correo electrónico, 7644
Enviar un mensaje SMS, 7638
Establecer una conexión con el AS, 7632
Establecer una conexión con una programadora o
un PC, 7628
PG_DIAL, 7628
SMS_SEND, 7638
Temporizador, 265, 266, 267, 683, 1061, 4837,
5056
Habilitar, 1603, 5381
Inicializar, 1608, 5387
Temporizador CEI, 266, 267

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

Temporizadores
Combinar fecha y hora con T_COMBINE, 2244
Comparar variables de tiempo con
T_COMP, 2234
convertir con T_CONV, 2236
Determinar una diferencia con T_DIFF, 2242
Restar con T_SUB, 2240
Sumar con la instrucción T_ADD, 2238
Test del cableado, 8573
Texto SMS (TC_RECV), 4413, 7534
Texto SMS (TC_SEND), 4408, 7530
Texto SMS (TCON_PHONE), 4419, 7540
THEN, 1955, 5617
THIS, 112
Tiempo, 265, 680, 1058, 1387, 1787
Alternar horario de verano/invierno con
SET_SW, 5857
Registrar, 674
Tiempo de ciclo de emisión, 3940
Tiempo de ejecución
Medir con RT_INFO, 2778
Tiempo de vigilancia del ciclo, 927, 1301, 1532, 1977,
2155, 4942, 5162, 5289, 5633, 5758
Tiempos
Combinar con T_COMBINE, 5839
Comparar variables de tiempo con
T_COMP, 5835
Convertir con T_CONV, 5836
Determinar una diferencia con T_DIFF, 5839
Restar con T_SUB, 5838
Sumar con la instrucción T_ADD, 5837
TIME, 266, 399, 475, 521, 565, 585, 606
TIME_TCK, 2266
TIME_TO_, 475, 565, 606
TIMER, 359
TIO_DI, 3917
TIO_DI_ONCE, 3922
TIO_DQ, 3933
TIO_IOLink_IN, 3914
TIO_IOLink_OUT, 3929
TIO_SYNC, 3908
TIO_Time
TIO_DI, 3917
TIO_DI_ONCE, 3922
TIO_DQ, 3933
TIO_IOLink_IN, 3914
TIO_SYNC, 3908
UDT "TIO_SYNC_Data", 3939
Tipo de aviso, 8322
Editar, 8329, 8337
Tipo de datos
ANY, 356

Programación del PLC
Manual de programación y manejo, 11/2019

ARRAY, 293
BOOL, 245, 369, 422, 509, 529, 579, 590
BYTE, 246, 370, 424, 510, 530, 580, 591
CHAR, 273, 415, 497, 525, 526, 571, 572, 589,
611
Conversión, 366, 374, 506, 512, 521, 522, 523,
576, 582, 587, 588
Conversión explícita, 422, 424, 427, 430, 434,
438, 442, 445, 449, 452, 456, 460, 464, 467, 470,
473, 475, 478, 481, 484, 487, 490, 492, 494, 497,
499, 501, 504, 529, 530, 532, 535, 539, 542, 545,
549, 552, 556, 559, 562, 565, 567, 568, 569, 571,
572, 573, 575, 590, 591, 593, 596, 599, 602, 605,
606, 607, 608, 609, 610, 611, 612
conversión implícita, 513, 514, 515, 516, 517, 518,
519, 524, 525, 526, 527, 579, 580, 581, 583, 584,
586, 588, 589
Convertir explícitamente, 893, 1268, 1930, 2135,
5608
DATE, 268, 409, 490, 522, 567, 587, 608
DINT, 255, 384, 452, 517, 552, 584, 602
DT, 269, 403, 481, 588, 610
DTL, 271, 407, 487, 524, 569
DWORD, 248, 374, 430, 512, 535, 582, 596
Instrucción GRAPH, 8281
Instrucción SCL, 8161, 8162, 8163
INT, 253, 381, 445, 515, 545, 583, 599
LDT, 271, 405, 484
LINT, 257, 388, 460
LREAL, 262, 395, 470, 520, 562
LTIME, 267, 401, 478
LTIME_OF_DAY, 269
LTOD, 413, 494
LWORD, 250, 376, 434
POINTER, 353
REAL, 261, 393, 467, 519, 559, 584, 605
S5TIME, 265, 397, 473, 586, 607
SINT, 251, 378, 438, 513, 539
STRING, 274, 418, 501, 527, 528, 573, 575, 589,
612
STRUCT, 288
TIME, 266, 399, 475, 521, 565, 585, 606
TIME_OF_DAY, 268
Tipo de datos PLC, 283
TOD, 411, 492, 523, 568, 588, 609
UDINT, 256, 386, 456, 518, 556
UINT, 254, 382, 449, 516, 549
ULINT, 259, 390, 464
USINT, 252, 379, 442, 514, 542
Validez, 241
VARIANT, 335
WCHAR, 273, 417, 499

8825

Índice alfabético

WORD, 247, 372, 427, 511, 532, 581, 593
WSTRING, 277, 420, 504
Tipo de datos PLC, 232
Borrar, 7930
Cambiar números, 7931
Comparar, 8451
Crear, 7929
Declaración en bloques de datos, 7852
Declarar, 7935
Declarar ARRAY, 7932
Declarar en la interfaz del bloque, 7800
Declarar STRUCT, 7934
Definición, 283
Direccionamiento, 287
Programar estructura, 7932
Propiedades de las variables, 7936, 7937
Tabla de declaración para los tipos de datos
PLC, 7927
Tipos de datos, 209
Tipos de datos de hardware, 363
Tipos de datos PLC, 209
Tipos de enlace
Bloques de parámetros para, 7426
Tipos de parámetros, 359, 4382, 7569
Tipos de subbloque, 7423
TM_MAIL, 4685
TMAIL_C, 4015
TMAIL_C V4.0, 4019
TO, 1959
TOD, 268, 411, 492, 523, 568, 588, 609
TOD_TO_, 492, 568, 609
TOF, 653, 670, 1030, 1048, 1376, 1776, 2045, 4835,
5054, 5259, 5556, 5711
TON, 649, 666, 1026, 1044, 1372, 1772, 2041, 4833,
5052, 5256, 5553, 5708
TONR, 657, 674, 1034, 1052, 1380, 1780, 2049,
5815
TONR_X, 5021, 5240, 5345, 5691
TP, 644, 662, 1022, 1039, 1368, 1767, 2037, 4831,
5050, 5254, 5550, 5706
Transferencia, 5446, 5448, 5450, 5451, 5452, 5453
Transferencia de datos, lanzar, 4465, 7019
Transferencia de parámetros, 80, 82, 85, 89, 94
Transferencia como copia o puntero, 86
Transferencia de valores
CNT_CTL1, 6564
Parámetros del DB para modos de contaje, 6565
Parámetros del DB para modos de
medición, 6567
Transferir, 1663, 1665, 1667, 1668, 1669, 1670,
5449
Transferir parámetros, 91, 92, 93

8826

Transición
Borrar, 8270
Cambiar nombre, 8267
Copiar y pegar, 8269
Insertar, 8263
Introducción, 8200
Parámetros estáticos, 8226
Programar, 8293
Renumerar, 8265
Tratamiento de errores
GetError, 928, 1303, 1533, 1978, 2156
GetErrorID, 933, 1307, 1537, 1982, 2159
TRCV, 4065, 4069
TRCV_C, 3994, 3999
TRUE, 642, 643, 1019, 1021, 1366, 1367, 1762,
1763
TRUNC, 900, 1274, 1685, 1936, 2139, 4929, 5149,
5467, 5611, 5751
TSEND, 4058, 4061
TSEND_C, 3979, 3984
TUN_EC
Funcionamiento, 6295
Instrucción, 6291
Parámetros de entrada, 6300
Parámetros de entrada/salida, 6304
Parámetros de salida, 6302
TUN_ES
Funcionamiento, 6314
Instrucción, 6311
Parámetros de entrada, 6319
Parámetros de entrada/salida, 6323
Parámetros de salida, 6321
TURCV, 4092
TUSEND, 4088
TypeOf, 1822
TypeOfElements, 1823

U
UBLKMOV, 887, 1262, 1505, 1924, 2129, 4917,
5137, 5276, 5602, 5741
UC, 1727, 5507
UDINT, 256, 386, 456, 518, 556
UDINT_TO_, 456, 556
UDT, 209, 232
UDT "TIO_SYNC_Data", 3939
UFILL_BLK, 833, 1209, 1446, 1866, 2095
UINT, 254, 382, 449, 516, 549
UINT_TO_, 449, 549
ULINT, 259, 390, 464
ULINT_TO_, 464
UMOVE_BLK, 827, 1202, 1441, 1860, 2090

Programación del PLC
Manual de programación y manejo, 11/2019

Índice alfabético

UNSCALE, 908, 1283, 1523, 1953, 2147, 4933, 5152,
5285, 5615, 5754
UNTIL, 1964, 5625
UPDAT_PI, 2365
UPDAT_PO, 2368
URCV, 3961
USEND, 3959
USINT, 252, 379, 442, 514, 542
USINT_TO_, 442, 542
Uso de UDT, 232
USS_DRIVE, 4571
USS_Drive_Control, 4488, 7042
USS_Drive_Control / USS_Drive_Control_31, 4496,
7049
USS_PORT, 4570
USS_Port_Scan, 4488, 4492, 7042, 7045
USS_Port_Scan_31, 4492, 7045
USS_Read_Param, 4488, 7042
USS_Read_Param / USS_Read_Param_31, 4500,
7053
USS_RPM, 4574
USS_WPM, 4576
USS_Write_Param, 4488, 7042
USS_Write_Param / USS_Write_Param_31, 4502,
7055

V
VAL_STRG, 2282
Valor absoluto, 780, 1156, 1646, 1826, 2061, 4892,
5111, 5427, 5584, 5720
Valor analógico, 901, 904, 1276, 1278, 1511, 1513,
1938, 1940, 2140, 2142
Valor asociado
Configuración, 8340
Ejemplo, 8342
Insertar, 8338
Valor de arcotangente, 799, 1175, 2075, 4910, 5130,
5734
Valor de forzado
Operandos permitidos, 8582
Valor de forzado permanente
Operandos permitidos, 8612
Valor exponencial, 791, 1167, 1648, 2069, 4902,
5122, 5430, 5728
Valor límite, 784, 1161, 1831, 5587
Valor sustitutivo, 4990, 5210, 5309, 5660, 5786
Valores de retorno
ABS_CTRL, 6584
ABS_CTRL_451, 6588
ABS_DIAG, 6586
ABS_DIAG_451, 6590

Programación del PLC
Manual de programación y manejo, 11/2019

ABS_INIT, 6583
CAM_CTRL, 6618
CAM_CTRL_452, 6621
CAM_DIAG, 6619
CAM_DIAG_452, 6623
CAM_INIT, 6617
CAM_MSRM_452, 6624
Instrucciones PtP, 4452, 7006
Valores de retorno de las instrucciones PtP, 4452,
7006
Valores de retorno del tiempo de ejecución de la
recepción, 4469, 7023
Variable
Ascendente, 642, 1019, 1366
Descendente, 643, 1021, 1367
Mostrar u ocultar informaciones de
variables, 7983, 8043, 8087, 8163, 8303
Resumen, 102
Superponer, 118
Variable PLC, 7889
Variables PLC y variables DB, 102
Variable DB
Definición, 102
Variable global, (Véase Variable PLC)
Variable local, 7783
Variable PLC
Comparación, 8411
Comparación offline/offline, 8416
Comparar, 8448
Comparar tabla de variables PLC, 8416
Comportamiento remanente, 7902, 7903
Copiar, 7917
Declarar, 7899, 7900, 7904, 7907
Definición, 102
Direcciones y tipos de datos admisibles, 7896
Importar y exportar, 7920, 7921, 7922, 7923,
7924
Observar, 7916
Ordenar filas, 7918
Propiedades, 7911, 7912, 7914
Reglas, 7896
Rellenar celdas automáticamente, 7919
Tabla de variables PLC, 7889, 7890, 7897, 7899
Variables
Observar inmediatamente, 8594, 8621
Observar todos, 8593, 8620
Variables estáticas
High_Speed_Counter, 3617
SSI_Absolute_Encoder, 3625

8827

Índice alfabético

VARIANT, 335, 339, 340, 344, 348, 751, 754, 756,
758, 870, 872, 874, 1128, 1130, 1132, 1134, 1246,
1247, 1249, 1398, 1403, 1405, 1407, 1409, 1495,
1496, 1498, 1515, 1518, 1822, 1823, 1914, 1916,
1917, 1946, 1948
VARIANT_TO_DB_ANY, 1515, 1946
VariantGet, 870, 1246, 1495, 1914
VariantPut, 872, 1247, 1496, 1916
Ventana de programación
Ajustar, 8141
GRAPH, 8245
Instrucciones permanentes anteriores, 8247
Instrucciones permanentes posteriores, 8252
SCL, 8140
Vista de cadena, 8248
Vista de etapa individual, 8250
Verificación CEI, 506
Ajustar, 369, 509, 579
Vigilancia del tiempo de etapa
Definir T_MAX y T_WARN manualmente, 8291
Determinar T_MAX y T_WARN, 8292, 8538
Principios básicos, 8289
Programar, 8290
Vista de cadena, 8248
Vista de etapa individual, 8250
Vista general de la lista de referencias
cruzadas, 8490
Visualización de los números de línea, 8142
Visualización de los valores de observación de
estructuras en la ventana de inspección, 8526
Visualización de una tabla de forzado
permanente, 8609
VOID, 359

WriteToArrayDB, 861, 1237, 1469, 1889, 2118
WriteToArrayDBL, 867, 1243, 1474, 1894, 2123
WRREC, 2401
WSR, 5023, 5243, 5348, 5694, 5817
WSTRING, 132, 277, 420, 504
Direccionamiento, 280
WSTRING_TO_, 504
WWW Sincronizar páginas de usuario, 4354

X
X, 1584, 5361
X(, 1591, 5368
XN, 1585, 5362
XN(, 1592, 5369
XOD, 1737, 5517
XOR, 945, 998, 999, 1320, 4951, 5035, 5036, 5172,
8125, 8126
XOW, 1731, 5511

Y
Y, 993, 995, 5033, 5034

Z
Z_VORW, 716, 1093, 4868, 5087
ZONE
Instrucción, 6773
Parámetros de entrada, 6775
Parámetros de entrada/salida, 6775
Variables estáticas, 6776, 6780

W
WAIT, 937, 1312, 1541, 1986, 2163, 4943, 5163,
5290, 5633, 5759
Wake On LAN, 2569, 5986
WCHAR, 273, 417, 499
WCHAR_TO_, 499
WHILE, 1962, 5624
WORD, 247, 372, 427, 511, 532, 581, 593
WORD_TO_, 427, 532, 593
WORD_TO_BLOCK_DB, 613
WR_DPARM, 2623
WR_LOC_T, 2252
WR_REC, 2509
WR_SYS_T, 2246
WRIT_DBL, 2923
WRITE_BIG, 1493, 1912
WRITE_LITTLE, 1489, 1908

8828

Programación del PLC
Manual de programación y manejo, 11/2019

WinCC
Visualización de procesos
Manual de sistema

Impresión de la Ayuda en pantalla

11/2019

Impresión de la Ayuda en pantalla

Crear imágenes

1

Trabajar con variables

2

Trabajar con avisos

3

Trabajar con ficheros

4

Acceso a datos de fichero a
través de WinCC OLE DB
Provider

5

Trabajar con recetas

6

Trabajar con informes

7

Configurar una
administración de usuarios

8

Trabajar con funciones de
sistema y Runtime Scripting

9

Mobile Panels

10

Planificar tareas

11

Uso de funciones de
diagnóstico

12

Comunicación con
controladores

13

Utilizar funciones generales

14

Compilar y cargar

15

Características

16

Opciones

17

Cambio a WinCC en el TIA
Portal

18

Notas jurídicas
Filosofía en la señalización de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal así como para la prevención de
daños materiales. Las informaciones para su seguridad personal están resaltadas con un triángulo de advertencia;
las informaciones para evitar únicamente daños materiales no llevan dicho triángulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producirá la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse daños materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad más estricta en cada caso. Si en una
consigna de seguridad con triángulo de advertencia de alarma de posibles daños personales, la misma consigna
puede contener también una advertencia sobre posibles daños materiales.

Personal cualificado

El producto/sistema tratado en esta documentación sólo deberá ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentación correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formación y experiencia,
el personal cualificado está en condiciones de reconocer riesgos resultantes del manejo o manipulación de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens sólo deberán usarse para los casos de aplicación previstos en el catálogo y la
documentación técnica asociada. De usarse productos y componentes de terceros, éstos deberán haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalación, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. También deberán seguirse las indicaciones
y advertencias que figuran en la documentación asociada.

Marcas registradas

Todos los nombres marcados con ® son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilización por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exención de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicación con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicación se revisa periódicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edición.

Siemens AG
Digital Industries
Postfach 48 48
90026 NÜRNBERG
ALEMANIA

Ⓟ 11/2019 Sujeto a cambios sin previo aviso

Copyright © Siemens AG 2019.
Reservados todos los derechos

Índice
1

Crear imágenes ..........................................................................................................................................33
1.1
1.1.1
1.1.2
1.1.3
1.1.4
1.1.4.1
1.1.4.2
1.1.4.3
1.1.5
1.1.5.1
1.1.5.2
1.1.5.3
1.1.5.4
1.1.5.5
1.1.5.6
1.1.5.7
1.1.5.8
1.1.6
1.1.6.1
1.1.6.2
1.1.6.3
1.1.6.4
1.1.6.5
1.1.6.6
1.1.7
1.1.7.1
1.1.7.2
1.1.7.3
1.1.7.4
1.1.8
1.1.8.1
1.1.8.2
1.1.8.3
1.1.8.4
1.1.9
1.1.9.1
1.1.9.2
1.1.9.3
1.1.9.4
1.1.9.5
1.1.9.6
1.1.9.7
1.1.9.8
1.1.9.9
1.1.9.10

Principios básicos ..................................................................................................................33
Principios básicos de las imágenes .......................................................................................33
Principios básicos de las imágenes .......................................................................................35
Volumen de funciones de las imágenes en función del dispositivo .......................................36
Elementos y configuración básica..........................................................................................38
Task Cards.............................................................................................................................38
Ampliar o reducir la imagen ...................................................................................................40
Desplazar la imagen visualizada............................................................................................40
Trabajar con imágenes ..........................................................................................................41
Pasos a seguir .......................................................................................................................41
Pasos a seguir .......................................................................................................................42
Crear una imagen nueva........................................................................................................42
Crear una imagen nueva........................................................................................................43
Administrar imágenes ............................................................................................................44
Definir la imagen inicial del proyecto......................................................................................46
Definir la imagen inicial del proyecto......................................................................................47
Modificar la resolución de pantalla.........................................................................................48
Trabajar con plantillas ............................................................................................................49
Principios básicos para trabajar con plantillas .......................................................................49
Imagen general ......................................................................................................................50
Crear una plantilla nueva .......................................................................................................52
Configuración de áreas permanentes en la plantilla ..............................................................53
Administrar una plantilla.........................................................................................................54
Utilizar una plantilla en la imagen ..........................................................................................55
Trabajar con imágenes emergentes ......................................................................................56
Principios básicos para trabajar con imágenes emergentes..................................................56
Crear una imagen emergente nueva .....................................................................................57
Administrar imágenes emergentes ........................................................................................58
Utilizar una imagen emergente ..............................................................................................59
Trabajar con imágenes deslizables........................................................................................60
Principios básicos del trabajo con imágenes deslizables ......................................................60
Configurar imágenes deslizables ...........................................................................................62
Configurar imágenes deslizables para dispositivos sin función Multitouch............................64
Utilizar imágenes deslizables.................................................................................................65
Trabajar con diseños..............................................................................................................66
Principios básicos para trabajar con diseños.........................................................................66
Editor Diseños........................................................................................................................66
Crear un diseño......................................................................................................................68
Modificar un diseño ................................................................................................................69
Borrar un diseño.....................................................................................................................69
Aplicar un diseño....................................................................................................................70
Definir el diseño básico de la interfaz de usuario de un panel de operador ..........................71
Aplicar plantillas de diseño a imágenes .................................................................................71
Aplicar plantillas de diseño a objetos básicos y elementos ...................................................72
Aplicar plantillas de diseño a controles ..................................................................................72

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

3

Índice

4

1.1.9.11
1.1.10
1.1.10.1
1.1.10.2
1.1.10.3
1.1.10.4
1.1.10.5
1.1.10.6
1.1.10.7
1.1.10.8
1.1.10.9
1.1.10.10

Utilizar diseño estándar..........................................................................................................73
Trabajar con estilos y hojas de estilo .....................................................................................74
Principios básicos para trabajar con estilos ...........................................................................74
Visualización de estilos predefinidos .....................................................................................76
Definición de estilos ...............................................................................................................77
Administración de estilos .......................................................................................................79
Adaptar el tamaño de fuente al tamaño del dispositivo .........................................................80
Utilizar elementos de estilo ....................................................................................................82
Principios básicos para trabajar con hojas de estilo ..............................................................84
Crear hoja de estilo ................................................................................................................85
Administrar hojas de estilo .....................................................................................................87
Utilizar hojas de estilo ............................................................................................................88

1.2
1.2.1
1.2.1.1
1.2.1.2
1.2.1.3
1.2.1.4
1.2.1.5
1.2.1.6
1.2.1.7
1.2.1.8
1.2.1.9
1.2.1.10
1.2.1.11
1.2.1.12
1.2.1.13
1.2.1.14
1.2.1.15
1.2.1.16
1.2.1.17
1.2.1.18
1.2.1.19
1.2.1.20
1.2.1.21
1.2.1.22
1.2.1.23
1.2.1.24
1.2.1.25
1.2.1.26
1.2.1.27
1.2.1.28
1.2.1.29
1.2.1.30
1.2.1.31
1.2.1.32
1.2.1.33
1.2.1.34
1.2.1.35
1.2.1.36
1.2.1.37
1.2.1.38

Trabajar con objetos y grupos de objetos ..............................................................................90
Trabajar con objetos ..............................................................................................................90
Sinopsis de los objetos ..........................................................................................................90
Sinopsis de los objetos ..........................................................................................................94
Sinopsis de los objetos ..........................................................................................................99
Opciones de edición de objetos ...........................................................................................102
Insertar un objeto .................................................................................................................104
Borrar un objeto ...................................................................................................................105
Posicionar un objeto.............................................................................................................106
Modificar el tamaño de un objeto .........................................................................................108
Seleccionar varios objetos ...................................................................................................109
Alinear objetos .....................................................................................................................111
Desplazar objetos mediante combinaciones de teclas ........................................................113
Desplazar un objeto hacia delante o hacia atrás .................................................................113
Mostrar objetos fuera del área de la imagen........................................................................114
Girar un objeto .....................................................................................................................115
Voltear un objeto ..................................................................................................................117
Diseñar un objeto .................................................................................................................118
Diseñar un objeto .................................................................................................................118
Diseñar patrón de relleno.....................................................................................................119
Diseño de las barras de desplazamiento .............................................................................121
Aplicar estilos predefinidos ..................................................................................................124
Formatear los textos dentro de un objeto ............................................................................125
Integrar variables y listas de textos en el texto ....................................................................126
Formatear los gráficos en un objeto.....................................................................................128
Girar un objeto en runtime ...................................................................................................129
Diseño de objetos basados en tablas ..................................................................................131
Diseño de bordes .................................................................................................................132
Definición del gradiente de color..........................................................................................133
Configurar rangos ................................................................................................................135
Parpadeo..............................................................................................................................137
Parpadeo..............................................................................................................................138
Insertar varios objetos del mismo tipo (sellar)......................................................................139
Modificar la posición y el tamaño de varios objetos.............................................................141
Ocultar o mostrar objetos.....................................................................................................141
Vinculación de tipos de datos de usuario a objetos .............................................................142
Administrar controles propios...............................................................................................145
Gráficos externos .................................................................................................................148
Administrar gráficos externos...............................................................................................150
Agregar un gráfico externo a la colección de gráficos .........................................................151

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

1.2.1.39
1.2.2
1.2.2.1
1.2.2.2
1.2.2.3
1.2.2.4
1.2.2.5
1.2.2.6
1.2.3
1.2.3.1
1.2.3.2
1.2.3.3
1.2.3.4
1.2.3.5
1.2.3.6
1.2.3.7
1.2.4
1.2.4.1
1.2.4.2
1.2.4.3

Personalizar los gráficos de los controles............................................................................153
Trabajar con grupos de objetos ...........................................................................................160
Principios básicos de los grupos..........................................................................................160
Agrupar objetos....................................................................................................................161
Desagrupar ..........................................................................................................................163
Agregar objetos al grupo......................................................................................................164
Eliminar objetos del grupo....................................................................................................165
Editar un objeto en un grupo................................................................................................166
Configurar el acceso con el teclado .....................................................................................168
Sinopsis del acceso con el teclado ......................................................................................168
Sinopsis del acceso con el teclado ......................................................................................169
Definir el modo del cursor ....................................................................................................170
Definir el permiso de operación y la habilitación de operación de un objeto .......................170
Definir tipos de objetos para el modo del cursor de conmutación .......................................171
Definir el orden de tabulación ..............................................................................................172
Definir el orden de tabulación ..............................................................................................174
Ejemplos ..............................................................................................................................175
Ejemplo: Insertar y configurar un rectángulo .......................................................................175
Ejemplo: insertar un rectángulo ...........................................................................................176
Ejemplo: Configurar un rectángulo.......................................................................................177

1.3
1.3.1
1.3.1.1
1.3.1.2
1.3.1.3
1.3.1.4
1.3.1.5
1.3.1.6
1.3.1.7
1.3.1.8
1.3.1.9
1.3.2
1.3.2.1
1.3.2.2
1.3.2.3
1.3.2.4
1.3.2.5
1.3.2.6
1.3.2.7
1.3.2.8
1.3.2.9
1.3.3
1.3.3.1
1.3.3.2

Trabajar con listas de textos y listas de gráficos..................................................................179
Trabajar con listas de textos ................................................................................................179
Principios básicos de las listas de textos .............................................................................179
Crear una lista de textos ......................................................................................................181
Asignar textos y valores a una lista de textos de un rango..................................................182
Asignar textos y valores a una lista de textos de un rango..................................................184
Asignar textos y valores a una lista de textos de bit ............................................................186
Asignar textos y valores a una lista de textos de un número de bit .....................................187
Notas acerca de la lista de textos de un número de bit .......................................................189
Configurar un objeto con lista de textos...............................................................................190
Configurar un objeto con lista de textos...............................................................................192
Trabajar con listas de gráficos .............................................................................................193
Principios básicos de las listas de gráficos ..........................................................................193
Crear una lista de gráficos ...................................................................................................195
Crear una lista de gráficos ...................................................................................................196
Asignar gráficos y valores a una lista de gráficos de un rango............................................197
Asignar gráficos y valores a una lista de gráficos de un rango............................................199
Asignar gráficos y valores a una lista de gráficos de un bit ................................................201
Asignar gráficos y valores a una lista de gráficos de un número de bit ...............................202
Notas acerca de la lista de gráficos de un número de bit ....................................................204
Configurar un objeto con lista de gráficos............................................................................205
Trabajar con listas de textos C.............................................................................................207
Principios básicos de la lista de textos C .............................................................................207
Crear entradas en la lista de textos C .................................................................................207

1.4
1.4.1
1.4.1.1
1.4.1.2
1.4.1.3
1.4.1.4
1.4.1.5

Dinamización de imágenes ..................................................................................................209
Principios básicos de la dinamización de imágenes ............................................................209
Principios básicos de la dinamización de imágenes ............................................................209
Principios básicos de la dinamización de imágenes ............................................................209
Dinamizar en la ventana de inspección ...............................................................................210
Dinamizar en la ventana de inspección ...............................................................................212
Mostrar vista general de la dinamización.............................................................................215

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

5

Índice

6

1.4.2
1.4.2.1
1.4.2.2
1.4.2.3
1.4.2.4
1.4.2.5
1.4.2.6
1.4.2.7
1.4.2.8
1.4.2.9
1.4.2.10
1.4.3
1.4.3.1
1.4.3.2
1.4.3.3
1.4.3.4
1.4.4
1.4.4.1
1.4.4.2
1.4.4.3
1.4.4.4
1.4.5
1.4.5.1
1.4.5.2
1.4.5.3

Dinamizar con animaciones .................................................................................................216
Configurar una animación nueva .........................................................................................216
Dinamizar la apariencia de un objeto...................................................................................217
Configurar un movimiento ....................................................................................................219
Configurar el movimiento directo .........................................................................................221
Dinamizar la operabilidad de un objeto manejable ..............................................................222
Dinamizar la visibilidad de un objeto....................................................................................223
Configurar una animación con enlace de variables .............................................................225
Animaciones de grupos de objetos ......................................................................................226
Animaciones de grupos de objetos ......................................................................................227
Animaciones en caso de selección múltiple.........................................................................228
Dinamización con animación de propiedad .........................................................................229
Dinamización con animaciones de propiedad......................................................................229
Configurar animación de propiedad del tipo de sección ......................................................231
Configurar animación de propiedad del tipo directo.............................................................233
Configurar animación de propiedad del tipo Bool ................................................................234
Dinamizar en la lista de propiedades ...................................................................................236
Principios básicos de la dinamización en la lista de propiedades........................................236
Dinamizar una propiedad de objeto con una variable..........................................................238
Configurar la dinamización asociada a un cambio de variable ............................................241
Dinamizar una propiedad de objeto con scripts locales.......................................................242
Dinamizar con funciones de sistema ...................................................................................243
Principios básicos de los eventos ........................................................................................243
Configurar función de sistema en el evento "Hacer clic" .....................................................244
Ejemplo: Configurar un botón para el cambio de idioma .....................................................245

1.5
1.5.1
1.5.2
1.5.3
1.5.4
1.5.5
1.5.6
1.5.7
1.5.8

Trabajar con teclas de función .............................................................................................245
Trabajar con teclas de función ............................................................................................245
Asignar teclas de función globalmente ................................................................................248
Asignar teclas de función localmente...................................................................................250
Asignar una función a una tecla de función .........................................................................251
Asignar el permiso de operación para una tecla de función ................................................253
Asignar un gráfico a una tecla de función ............................................................................255
Configurar variables LED .....................................................................................................257
Ejemplo: Utilizar teclas de función para navegar por imágenes ..........................................259

1.6
1.6.1
1.6.2
1.6.3
1.6.4
1.6.5
1.6.6
1.6.7

Trabajar con niveles.............................................................................................................261
Principios básicos para trabajar con niveles ........................................................................261
Desplazar objetos a niveles .................................................................................................262
Configurar el nivel activo......................................................................................................263
Mostrar y ocultar niveles ......................................................................................................265
Mostrar y ocultar niveles ......................................................................................................267
Ocultar niveles y objetos en runtime ....................................................................................268
Cambiar el nombre de los niveles........................................................................................269

1.7
1.7.1
1.7.1.1
1.7.1.2
1.7.1.3
1.7.2
1.7.2.1
1.7.2.2
1.7.2.3

Trabajar con faceplates........................................................................................................271
Principios básicos de los faceplates ....................................................................................271
Principios básicos de los faceplates ....................................................................................271
Faceplates dependientes del dispositivo .............................................................................272
Editor Faceplates .................................................................................................................273
Crear y administrar tipos de faceplates................................................................................276
Crear un tipo de faceplate....................................................................................................276
Configurar un tipo de faceplate ...........................................................................................278
Editar la categoría y la propiedad de un tipo faceplate ........................................................282

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

1.7.2.4
1.7.2.5
1.7.2.6
1.7.2.7
1.7.2.8
1.7.2.9
1.7.2.10
1.7.2.11
1.7.2.12
1.7.2.13
1.7.2.14
1.7.2.15
1.7.2.16
1.7.3
1.7.3.1
1.7.3.2
1.7.4
1.7.4.1
1.7.4.2
1.7.4.3
1.7.4.4
1.7.4.5
1.7.4.6

Configurar una variable en el tipo del faceplate...................................................................283
Configurar scripts en el tipo del faceplate ............................................................................284
Configurar un evento en el tipo del faceplate.......................................................................285
Configurar un evento en el tipo del faceplate ......................................................................287
Configurar una lista de textos en el tipo del faceplate ........................................................288
Configurar una lista de gráficos en el tipo del faceplate ......................................................289
Traducir directamente textos del tipo faceplate ...................................................................291
Exportar e importar textos en el tipo de faceplate................................................................292
Editar un tipo de faceplate ...................................................................................................294
Adaptar el tamaño de un faceplate ......................................................................................295
Adaptar el tamaño de un faceplate ......................................................................................295
Crear una instancia del tipo del faceplate ............................................................................297
Desvincular un faceplate del tipo de faceplate.....................................................................298
Dinamizar faceplates............................................................................................................299
Principios básicos de la dinamización de faceplates ...........................................................299
Dinamizar un faceplate ........................................................................................................300
Ejemplo: Crear y dinamizar un faceplate .............................................................................301
Ejemplo: Configurar un faceplate.........................................................................................301
Ejemplo: Crear un tipo de faceplate.....................................................................................301
Ejemplo: Configurar un tipo del faceplate ............................................................................302
Ejemplo: Crear un script en el tipo del faceplate..................................................................303
Ejemplo: Crear una instancia del tipo del faceplate .............................................................305
Ejemplo: Configurar los objetos incluidos ............................................................................307

1.8
1.8.1
1.8.1.1
1.8.1.2
1.8.1.3
1.8.1.4
1.8.2
1.8.2.1
1.8.2.2
1.8.2.3

Configurar la navegación de imágenes................................................................................308
Principios básicos de la navegación de imágenes...............................................................308
Principios básicos de la navegación de imágenes...............................................................308
Principios básicos de la navegación de imágenes...............................................................308
Asignar un cambio de imagen a un botón............................................................................309
Asignar un cambio de imagen a una tecla de función .........................................................311
Menús y barras de herramientas para Runtime Professional ..............................................312
Principios básicos ................................................................................................................312
Trabajar con menús y barras de herramientas ....................................................................316
Ejemplo: Configurar un cambio de imagen con barras de herramientas .............................327

1.9
1.9.1
1.9.1.1
1.9.1.2
1.9.1.3
1.9.1.4
1.9.1.5
1.9.2
1.9.2.1
1.9.2.2
1.9.2.3
1.9.2.4
1.9.2.5
1.9.2.6
1.9.2.7
1.9.2.8
1.9.2.9
1.9.2.10

Objetos de manejo y visualización.......................................................................................332
Objetos dependientes de los dispositivos ............................................................................332
Objetos para Basic Panels...................................................................................................332
Objetos para Comfort Panels...............................................................................................334
Objetos para Mobile Panels .................................................................................................336
Objetos para WinCC Runtime Advanced.............................................................................338
Objetos para WinCC Runtime Professional .........................................................................340
Objetos.................................................................................................................................343
Barra ....................................................................................................................................343
Barra ....................................................................................................................................345
Visor de usuarios (a partir de V13) ......................................................................................347
Visor de usuarios simple ......................................................................................................348
Visor de usuarios avanzado.................................................................................................350
Tabla de observación...........................................................................................................352
Ventana de imagen ..............................................................................................................354
Barra de desplazamiento .....................................................................................................358
Campo de fecha y hora .......................................................................................................359
Pieza en T doble ..................................................................................................................360

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

7

Índice

1.9.2.11
1.9.2.12
1.9.2.13
1.9.2.14
1.9.2.15
1.9.2.16
1.9.2.17
1.9.2.18
1.9.2.19
1.9.2.20
1.9.2.21
1.9.2.22
1.9.2.23
1.9.2.24
1.9.2.25
1.9.2.26
1.9.2.27
1.9.2.28
1.9.2.29
1.9.2.30
1.9.2.31
1.9.2.32
1.9.2.33
1.9.2.34
1.9.2.35
1.9.2.36
1.9.2.37
1.9.2.38
1.9.2.39
1.9.2.40
1.9.2.41
1.9.2.42
1.9.2.43
1.9.2.44
1.9.2.45
1.9.2.46
1.9.2.47
1.9.2.48
1.9.2.49
1.9.2.50
1.9.2.51
1.9.2.52
1.9.2.53
1.9.2.54
1.9.2.55
1.9.2.56
1.9.2.57
1.9.2.58
1.9.2.59
1.9.2.60
1.9.2.61
1.9.2.62

8

Trabajo de impresión/diagnóstico de script..........................................................................361
Campo E/S...........................................................................................................................364
Campo E/S: Comportamiento en caso de manejo...............................................................366
Campo E/S: Formato de representación..............................................................................367
Campo E/S: Formato de representación..............................................................................369
Campo de texto editable ......................................................................................................372
Elipse ...................................................................................................................................373
Arco elíptico ........................................................................................................................374
Segmento elíptico ................................................................................................................375
Visor de curvas f(t) ...............................................................................................................376
Visor de curvas f(x) ..............................................................................................................380
Visor de curvas f(x) ..............................................................................................................383
Visor de gráficos ..................................................................................................................387
Campo E/S gráfico ...............................................................................................................389
Campo E/S gráfico ...............................................................................................................391
Vista general de GRAPH .....................................................................................................392
Volante .................................................................................................................................396
Indicador de ayuda...............................................................................................................397
Navegador HTML.................................................................................................................398
Navegador HTML.................................................................................................................403
Visor de cámara ...................................................................................................................405
Visor de diagnóstico de canal ..............................................................................................409
Cuadro combinado...............................................................................................................410
Casilla de verificación .........................................................................................................411
Círculo..................................................................................................................................412
Arco circular .........................................................................................................................413
Segmento circular ................................................................................................................414
Visor de análisis de criterios ................................................................................................416
Visor de curvas ....................................................................................................................418
Estado de carga ...................................................................................................................421
Pulsador luminoso................................................................................................................422
Línea ....................................................................................................................................425
Cuadro de lista .....................................................................................................................426
Media Player ........................................................................................................................428
Visor de avisos.....................................................................................................................431
Visor de avisos (a partir de V13)..........................................................................................436
Visor de avisos simple .........................................................................................................441
Visor de avisos avanzado ....................................................................................................443
Ventana de avisos................................................................................................................448
Indicador de avisos ..............................................................................................................450
Botones de opción ...............................................................................................................451
Visor de PDF........................................................................................................................452
Visor de código PLC ............................................................................................................459
Visor de código PLC ............................................................................................................463
Polígono ...............................................................................................................................466
Línea poligonal.....................................................................................................................467
Vista general de ProDiag .....................................................................................................469
Rectángulo ...........................................................................................................................472
Visor de recetas ...................................................................................................................473
Visor de recetas (a partir de V13) ........................................................................................476
Visor de recetas simple........................................................................................................478
Visor de recetas avanzado...................................................................................................480

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

1.9.2.63
1.9.2.64
1.9.2.65
1.9.2.66
1.9.2.67
1.9.2.68
1.9.2.69
1.9.2.70
1.9.2.71
1.9.2.72
1.9.2.73
1.9.2.74
1.9.2.75
1.9.2.76
1.9.2.77
1.9.2.78
1.9.2.79
1.9.2.80
1.9.2.81
1.9.2.82
1.9.2.83
1.9.2.84
1.9.2.85
1.9.2.86
1.9.2.87
1.9.2.88
1.9.2.89
1.9.2.90
1.9.2.91
2

Botón redondo......................................................................................................................482
Tubo .....................................................................................................................................483
Arco tubular..........................................................................................................................484
Interruptor.............................................................................................................................485
Botón....................................................................................................................................486
Deslizador ............................................................................................................................488
Interruptor de llave ...............................................................................................................490
Visor Sm@rtClient................................................................................................................493
Visor de memoria .................................................................................................................496
Librería de símbolos.............................................................................................................497
Campo E/S simbólico...........................................................................................................499
Campo E/S simbólico...........................................................................................................501
Visor de diagnóstico del sistema..........................................................................................502
Visor de diagnóstico del sistema..........................................................................................504
Visor de diagnóstico del sistema..........................................................................................506
Ventana de diagnóstico del sistema ....................................................................................509
Visor de tablas .....................................................................................................................512
Campo de texto....................................................................................................................515
Pieza en T ............................................................................................................................516
Reloj .....................................................................................................................................517
Conector...............................................................................................................................518
Tabla de valores...................................................................................................................520
Rango efectivo Nombre .......................................................................................................522
Rango efectivo Nombre (RFID)............................................................................................524
Rango efectivo Señal ...........................................................................................................526
WLAN Recepción.................................................................................................................527
Indicador gauge ...................................................................................................................529
Zona Nombre .......................................................................................................................531
Zona Señal...........................................................................................................................532

Trabajar con variables ..............................................................................................................................535
2.1
2.1.1
2.1.2
2.1.3
2.1.4
2.1.5
2.1.6
2.1.7

Principios básicos ................................................................................................................535
Principios básicos de las variables ......................................................................................535
Resumen de las tablas de variables HMI.............................................................................536
Variables externas ...............................................................................................................538
Variables externas ...............................................................................................................540
Direccionamiento de variables externas ..............................................................................543
Las variables internas ..........................................................................................................545
Las variables internas ..........................................................................................................546

2.2
2.2.1
2.2.1.1
2.2.1.2
2.2.1.3
2.2.1.4
2.2.2
2.2.2.1
2.2.2.2
2.2.2.3
2.2.2.4
2.2.2.5
2.2.2.6

Trabajar con variables..........................................................................................................548
Crear variables.....................................................................................................................548
Crear una variable externa...................................................................................................548
Crear una variable interna....................................................................................................550
Crear varias variables ..........................................................................................................551
Adaptar el tipo de datos de una variable..............................................................................554
Edición de variables .............................................................................................................556
Administrar variables............................................................................................................556
Editar variables ....................................................................................................................558
Configurar diferentes variables simultáneamente................................................................559
Utilizar varias variables simultáneamente en una imagen ...................................................560
Configuración de la sincronización ......................................................................................562
Sincronizar variables............................................................................................................564

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

9

Índice

10

2.2.3
2.2.3.1
2.2.3.2
2.2.3.3

Configurar variables .............................................................................................................565
Configuración básica de variables .......................................................................................565
Posibilidades de configuración especiales...........................................................................573
Posibilidades de configuración especiales...........................................................................589

2.3
2.3.1
2.3.2
2.3.3

Trabajar con matrices ..........................................................................................................594
Conceptos básicos sobre matrices ......................................................................................594
Crear una variable de matriz................................................................................................597
Ejemplos de matrices...........................................................................................................599

2.4
2.4.1
2.4.2

Trabajar con matrices ..........................................................................................................600
Conceptos básicos sobre matrices ......................................................................................600
Crear una variable de matriz................................................................................................602

2.5
2.5.1
2.5.2
2.5.3
2.5.4
2.5.5

Trabajar con tipos de datos de usuario................................................................................604
Principios básicos de los tipos de datos de usuario.............................................................604
Crear tipo de datos de usuario.............................................................................................606
Crear elementos de tipo de datos de usuario ......................................................................608
Administrar versiones de tipos de datos de usuario ............................................................609
Crear una variable del tipo de datos "Tipo de datos de usuario" .........................................610

2.6
2.6.1
2.6.2

Trabajar con ciclos ...............................................................................................................612
Conceptos básicos de los ciclos ..........................................................................................612
Definir un ciclo......................................................................................................................614

2.7
2.7.1
2.7.2
2.7.3

Trabajar con ciclos ...............................................................................................................615
Conceptos básicos de los ciclos ..........................................................................................615
Definir un ciclo......................................................................................................................617
Definir punto de inicio...........................................................................................................617

2.8
2.8.1
2.8.2
2.8.3
2.8.3.1
2.8.3.2
2.8.3.3
2.8.3.4
2.8.3.5
2.8.3.6
2.8.3.7

Referencia............................................................................................................................618
Representación y codificación de los tipos de datos ...........................................................618
Codificación y rango de valores de los tipos de datos .........................................................620
Tipos de datos......................................................................................................................627
Tipos de datos para SIMATIC S7-300/400 ..........................................................................627
Tipos de datos para SIMATIC S7 1200 y S7 1500 ..............................................................627
Tipos de datos para OPC-DA ..............................................................................................631
Tipos de datos para OPC-XML-DA......................................................................................632
Tipos de datos para Allen Bradley Ethernet IP ....................................................................633
Tipos de datos para Modicon Modbus TCP/IP ....................................................................633
Tipos de datos para Mitsubishi MC......................................................................................634

2.9
2.9.1
2.9.2
2.9.2.1
2.9.2.2
2.9.3
2.9.3.1
2.9.3.2
2.9.3.3

Archivar variables.................................................................................................................634
Conceptos básicos para archivar variables .........................................................................634
Archivación de variables ......................................................................................................635
Principios básicos ................................................................................................................635
Trabajar con ficheros de variables .......................................................................................637
Archivación de variables ......................................................................................................653
Archivación de variables ......................................................................................................653
Bases ...................................................................................................................................654
Trabajar con ficheros de variables .......................................................................................672

2.10
2.10.1
2.10.1.1
2.10.1.2

Representar variables ..........................................................................................................699
Representar variables con Basic Panels .............................................................................699
Emitir valores de variables en imágenes (Basic) .................................................................699
Configurar el visor de curvas para los valores del controlador (Basic) ................................700

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

2.10.2
2.10.2.1
2.10.2.2
2.10.2.3
2.10.2.4
2.10.2.5
2.10.2.6
2.10.2.7
2.10.3
2.10.3.1
2.10.3.2
2.10.3.3
2.10.3.4
2.10.3.5
3

Representar variables con Runtime Advanced y Panels .....................................................702
Curvas..................................................................................................................................702
Emitir valores de variables en imágenes .............................................................................705
Configurar la vista de curvas para los valores del autómata ...............................................705
Configurar el visor de curvas para un fichero de variables ..................................................707
Estructura de un archivo *.CSV con variables .....................................................................708
Acceder directamente a la base de datos ODBC de ficheros..............................................709
Representación de trayectorias curvas en el visor de curvas..............................................710
Representar variables con Runtime Professional ................................................................714
Principios básicos ................................................................................................................714
Visualizar valores de variable en forma de curvas...............................................................724
Visualizar valores de variable en forma de tabla .................................................................736
Configurar la tabla de valores ..............................................................................................750
Manejar controles en runtime...............................................................................................758

Trabajar con avisos ..................................................................................................................................781
3.1
3.1.1
3.1.2
3.1.3
3.1.4
3.1.4.1
3.1.4.2
3.1.4.3
3.1.4.4
3.1.4.5
3.1.5
3.1.6
3.1.6.1
3.1.6.2
3.1.6.3
3.1.7
3.1.7.1
3.1.7.2
3.1.7.3
3.1.8
3.1.9
3.1.9.1
3.1.9.2
3.1.9.3
3.1.10
3.1.11

Principios básicos ................................................................................................................781
El sistema de avisos de WinCC ...........................................................................................781
El sistema de avisos de WinCC ...........................................................................................782
El sistema de avisos de WinCC ..........................................................................................784
Procedimientos de aviso ......................................................................................................786
Resumen de los procedimientos de aviso ..........................................................................786
Resumen de los procedimientos de aviso ...........................................................................787
Resumen de los procedimientos de aviso ...........................................................................789
Procedimientos de aviso definidos por el usuario................................................................790
Avisos definidos por el sistema............................................................................................792
Estados de aviso .................................................................................................................794
Categorías............................................................................................................................795
Principios básicos de las categorías ....................................................................................795
Principios básicos de las categorías ....................................................................................797
Categorías predefinidas .......................................................................................................798
Acuse ...................................................................................................................................800
Acuse de avisos ..................................................................................................................800
Concepto de acuse .............................................................................................................802
Concepto de acuse ..............................................................................................................802
Grupos de avisos .................................................................................................................803
Grupos de avisos .................................................................................................................804
Principios básicos de los grupos de avisos..........................................................................804
Grupos de avisos jerárquicos...............................................................................................806
Variables de un grupo de avisos..........................................................................................808
Número de aviso .................................................................................................................809
Número de aviso .................................................................................................................809

3.2
3.2.1
3.2.2
3.2.2.1
3.2.2.2
3.2.2.3
3.2.2.4
3.2.2.5
3.2.2.6
3.2.2.7

Trabajar con avisos .............................................................................................................810
Componentes y propiedades de los avisos .........................................................................810
Configuración de avisos.......................................................................................................812
Sinopsis de la configuración de avisos ................................................................................812
Resumen de la configuración de avisos ..............................................................................813
Configuración de categorías ................................................................................................814
Configuración de grupos de avisos......................................................................................822
Configurar avisos .................................................................................................................825
Configurar avisos .................................................................................................................837
Configurar Loop-In-Alarm.....................................................................................................863

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

11

Índice

12

3.2.2.8
3.2.3
3.2.3.1
3.2.3.2
3.2.3.3
3.2.3.4
3.2.4
3.2.4.1
3.2.4.2
3.2.4.3
3.2.5
3.2.5.1
3.2.5.2
3.2.5.3
3.2.5.4
3.2.5.5

Avisos en el editor "Variables HMI"......................................................................................864
Configurar la salida de avisos ..............................................................................................867
Resumen de cómo configurar la salida de avisos................................................................867
Configuración del visor de avisos ........................................................................................868
Configuración del visor de avisos ........................................................................................884
Registrar avisos ...................................................................................................................908
Configurar el acuse ..............................................................................................................911
Configurar la obligación de acuse de un aviso por categoría ..............................................911
Configurar un disparador para el acuse de avisos...............................................................912
Enviar acuse de aviso al controlador ...................................................................................914
Configurar el acuse ..............................................................................................................914
Configurar el acuse de un aviso...........................................................................................914
Configurar el acuse de un grupo de avisos..........................................................................916
Configurar el acuse del avisador central..............................................................................917
Configurar el acuse de grupo para avisos ...........................................................................917
Configurar la desactivación del bit de acuse de la variable de acuse..................................918

3.3
3.3.1
3.3.1.1
3.3.1.2
3.3.1.3
3.3.1.4
3.3.1.5
3.3.1.6
3.3.1.7
3.3.1.8
3.3.1.9
3.3.1.10
3.3.1.11
3.3.1.12
3.3.1.13
3.3.2
3.3.2.1
3.3.2.2
3.3.2.3
3.3.2.4
3.3.2.5
3.3.2.6
3.3.2.7

Archivación de avisos ..........................................................................................................920
Configurar la archivación de avisos .....................................................................................920
Principios básicos de la archivación de avisos ....................................................................920
Crear un fichero de avisos ...................................................................................................922
Archivar avisos.....................................................................................................................924
Configurar visor de avisos archivados .................................................................................925
Configurar el desbordamiento del búfer de avisos...............................................................926
Acceso directo a la base de datos ODBC de ficheros .........................................................926
Crear el origen de datos ODBC ...........................................................................................927
Configurar la suma de verificación para un fichero..............................................................928
Evaluar la suma de verificación de datos de fichero............................................................929
Sumas de verificación para fichero en proyectos regulados................................................931
Controlar el comportamiento del fichero al cambiar de idioma en runtime ..........................932
Determinar el comportamiento del fichero al iniciar runtime ................................................933
Controlar la archivación según el nivel de llenado...............................................................934
Configurar la archivación de avisos .....................................................................................936
Principios básicos de la archivación de avisos ....................................................................936
Archivar avisos.....................................................................................................................937
Configurar una copia de seguridad del fichero de avisos ....................................................941
Conectar y desconectar una copia de seguridad del fichero de avisos ...............................945
Acceso directo a la base de datos de ficheros con C-API/ODK ..........................................946
Acceso directo a la base de datos de ficheros con ADO/OLE DB ......................................947
Configurar la retransferencia de avisos tras un fallo de red.................................................947

3.4
3.4.1
3.4.2
3.4.3
3.4.3.1
3.4.3.2
3.4.4
3.4.4.1
3.4.4.2
3.4.5
3.4.5.1
3.4.5.2

Manejo de avisos en runtime ...............................................................................................948
Avisos en runtime.................................................................................................................948
Avisos en runtime.................................................................................................................950
Manejo de la ventana de avisos, visor de avisos.................................................................953
Ventana de avisos, visor de avisos en runtime....................................................................953
Manejar la ventana de avisos, visor de avisos.....................................................................954
Manejo de la ventana de avisos simple, visor de avisos .....................................................956
Visor de avisos simple, ventana de avisos en runtime ........................................................956
Manejar el visor de avisos simple, la ventana de avisos .....................................................958
Manejo del indicador de avisos............................................................................................959
Indicador de avisos en runtime ............................................................................................959
Manejar el indicador de avisos con el ratón ........................................................................960

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

3.4.6
3.4.7

Acusar avisos.......................................................................................................................960
Filtrar avisos.........................................................................................................................961

3.5
3.5.1
3.5.2
3.5.3
3.5.4
3.5.5
3.5.6
3.5.7
3.5.8
3.5.9
3.5.9.1
3.5.9.2
3.5.9.3
3.5.10
3.5.10.1
3.5.10.2
3.5.10.3
3.5.10.4

Manejo de avisos en runtime ...............................................................................................962
Avisos en runtime ................................................................................................................962
Visor de avisos.....................................................................................................................965
Botones del visor de avisos .................................................................................................967
Filtrar avisos en runtime.......................................................................................................968
Clasificar avisos en runtime .................................................................................................969
Conmutar visor de avisos en runtime...................................................................................971
Visualizar avisos archivados en runtime ..............................................................................972
Imprimir avisos en runtime ...................................................................................................973
Bloqueo de avisos en runtime..............................................................................................974
Bloquear avisos individuales................................................................................................974
Bloquear avisos con el número de aviso .............................................................................975
Bloquear avisos con la categoría o el grupo de avisos........................................................976
Acuse de avisos ...................................................................................................................978
Acusar avisos ......................................................................................................................978
Acuse general de avisos ......................................................................................................979
Acuse de emergencia de avisos ..........................................................................................979
Acusar el avisador central....................................................................................................980

3.6
3.6.1
3.6.2

Mostrar eventos de seguridad..............................................................................................981
Mostrar eventos de seguridad en el panel de operador.......................................................981
Configuración de la visualización de eventos de seguridad ................................................982

3.7
3.7.1

Enviar aviso completo del controlador al panel de operador ...............................................983
Enviar aviso completo del controlador al panel de operador y actualizar
automáticamente..................................................................................................................983
Enviar aviso completo del controlador al panel de operador y actualizar
automáticamente..................................................................................................................985
Configuración de la actualización automática de avisos del controlador en el panel de
operador...............................................................................................................................987

3.7.2
3.7.3
3.8
3.8.1
3.8.2
3.8.3
3.8.4
3.8.5
3.8.6
3.8.7
3.8.8
3.8.8.1
3.8.8.2
3.8.8.3
3.8.8.4
3.8.8.5
3.8.8.6
3.8.8.7
3.8.8.8
3.8.8.9
3.8.8.10
3.8.8.11

Referencia............................................................................................................................989
Funciones de sistema para avisos.......................................................................................989
Eventos para avisos.............................................................................................................990
Eventos para avisos.............................................................................................................991
Funciones de sistema para ficheros ....................................................................................991
Estructura de un archivo *.CSV con avisos .........................................................................992
Descripción de los bloques de sistema................................................................................993
Statements SQL para filtrar el visor de avisos .....................................................................997
Avisos de sistema ...............................................................................................................999
Principios básicos de los avisos de sistema ........................................................................999
9999 - Aviso global.............................................................................................................1000
10000 – Avisos de la impresora .........................................................................................1000
20000 - Avisos de scripts globales.....................................................................................1001
30000 - Avisos de error al utilizar funciones de sistema....................................................1002
40000 - Avisos de escala lineal..........................................................................................1002
50000 – Avisos del servidor de datos ................................................................................1003
60000 – Avisos de información del sistema .......................................................................1003
70000 – Avisos de información del sistema .......................................................................1004
80000 – Avisos de ficheros ................................................................................................1007
90000 – Avisos FDA...........................................................................................................1010

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

13

Índice

3.8.8.12
3.8.8.13
3.8.8.14
3.8.8.15
3.8.8.16
3.8.8.17
3.8.8.18
3.8.8.19
3.8.8.20
3.8.8.21
3.8.8.22
3.8.8.23
3.8.8.24
3.8.8.25
3.8.8.26
3.8.8.27
3.8.8.28
3.8.8.29
3.8.8.30
3.8.8.31
3.8.8.32
3.8.8.33
3.8.8.34
3.8.8.35
3.8.8.36
3.8.8.37
3.8.8.38
3.8.9
3.8.9.1
3.8.9.2
3.8.9.3
3.8.9.4
3.8.9.5
3.8.9.6
3.8.9.7
3.8.9.8
3.8.9.9
3.8.9.10
3.8.9.11
3.8.9.12
3.8.9.13
3.8.9.14
3.8.9.15
3.8.9.16
3.8.9.17
3.8.9.18
3.8.9.19
3.8.9.20
3.8.9.21
3.8.9.22
3.8.9.23
3.8.10

14

110000 - Avisos de funciones offline .................................................................................1011
120000 – Avisos de la representación de curvas...............................................................1012
130000 – Avisos de informaciones del sistema .................................................................1012
140000 – Avisos de la conexión: conexión + panel de operador .......................................1013
160000 – Avisos de la conexión: OPC: Conexión..............................................................1016
170000 - Avisos del cuadro de diálogo S7.........................................................................1017
180000 - Avisos generales.................................................................................................1018
190000 – Avisos de variables ............................................................................................1018
190100 - Avisos del puntero de área .................................................................................1020
200000 – Avisos de coordinación con el PLC....................................................................1020
200100 - Avisos del puntero de área Identificación del proyecto.......................................1021
210000 – Avisos de PLC-Job.............................................................................................1022
220000 - Avisos del driver de comunicación de WinCC ....................................................1022
230000 - Avisos de objetos de imagen ..............................................................................1023
240000 – Avisos de autorización .......................................................................................1026
250000 - Avisos de Estado/Control S7 ..............................................................................1026
260000 – Avisos de sistema de contraseñas.....................................................................1027
270000 – Avisos de sistema ..............................................................................................1030
280000 - Avisos SIMATIC 505 DP Communication Driver (CSP) .....................................1031
290000 – Avisos del sistema de recetas............................................................................1031
300000 – Avisos Alarm_S ..................................................................................................1036
310000 - Avisos del informe...............................................................................................1037
330000 - Avisos de interacción ..........................................................................................1037
340000 - Avisos de texto informativo .................................................................................1037
350000 – Avisos PROFIsafe ..............................................................................................1038
380000 - Avisos Sm@rtServer...........................................................................................1039
Avisos 390000: cifrado de contraseñas y certificados .......................................................1039
Avisos de sistema ..............................................................................................................1040
Avisos de sistema ..............................................................................................................1040
1000000 - Avisos Runtime .................................................................................................1040
1000800 - Avisos cliente WinCC........................................................................................1041
1000900 - Avisos Performance Monitor.............................................................................1042
1001000 - Avisos imágenes en runtime.............................................................................1042
1002000 - Avisos archivado de variables ..........................................................................1043
1003018 - Avisos sistema de avisos..................................................................................1044
1004000 - Avisos trabajos de impresión ............................................................................1047
1005000 - Avisos librería de textos....................................................................................1047
1006000 - Avisos de scripts globales.................................................................................1048
1008000 - Avisos administración de usuarios....................................................................1050
1009000 - Avisos Lifebeat Monitoring................................................................................1050
1010000 - Avisos STRRT ..................................................................................................1050
1011000 - Avisos indicador de grupo.................................................................................1051
1011101 - Avisos Picture Tree Manager............................................................................1051
1011201 - Avisos Split Screen Manager............................................................................1051
1012001 - Avisos sincronización horaria ...........................................................................1052
1012200 - Avisos redundancia...........................................................................................1053
1012400 - Avisos WebNavigatorClient ..............................................................................1055
1012500 - Avisos Process Historian ..................................................................................1056
1012700 - Avisos redundancia autodiagnóstico ................................................................1057
1016000 - Avisos IndustrialDataBridge..............................................................................1058
12508141 - Avisos ............................................................................................................1059
Asignaciones de bits a variables........................................................................................1059

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

3.8.10.1
3.8.10.2
4

5

6

Variables para grupos y avisos ..........................................................................................1059
Variables para grupos de avisos........................................................................................1063

Trabajar con ficheros..............................................................................................................................1067
4.1
4.1.1
4.1.2
4.1.3

Trabajar con ficheros .........................................................................................................1067
Principios básicos de los ficheros ......................................................................................1067
Propiedades de los ficheros...............................................................................................1068
Ubicaciones de los ficheros ...............................................................................................1069

4.2
4.2.1
4.2.2

Trabajar con ficheros .........................................................................................................1073
Principios básicos de los ficheros ......................................................................................1073
Propiedades de los ficheros ..............................................................................................1074

Acceso a datos de fichero a través de WinCC OLE DB Provider ..........................................................1075
5.1
5.1.1
5.1.2
5.1.3

WinCC Archive Connector .................................................................................................1075
WinCC Archive Connector .................................................................................................1075
Ficha Configuración ...........................................................................................................1077
Ficha Conectar/desconectar ficheros.................................................................................1078

5.2
5.2.1
5.2.2
5.2.3

Acceso a datos de fichero a través de OLE DB Provider ..................................................1079
Opciones de acceso a los datos de fichero .......................................................................1079
Configuración del acceso a datos de fichero .....................................................................1080
Creación de una conexión a la base de datos de ficheros ................................................1081

5.3
5.3.1
5.3.2
5.3.3
5.3.4
5.3.5
5.3.6

Casos de aplicación ...........................................................................................................1083
Caso de aplicación 1: acceso local a la base de datos WinCC RT ...................................1083
Caso de aplicación 2: acceso remoto a la base de datos WinCC RT................................1084
Caso de aplicación 3: acceso local a bases de datos de ficheros WinCC.........................1085
Caso de aplicación 4: acceso remoto a bases de datos de ficheros WinCC.....................1085
Caso de aplicación 5: acceso local a ficheros de usuario WinCC .....................................1087
Caso de aplicación 6: acceso remoto a ficheros de usuario WinCC .................................1087

5.4
5.4.1
5.4.2
5.4.3
5.4.4
5.4.5
5.4.6
5.4.7
5.4.8
5.4.9

Consulta de los datos de fichero........................................................................................1088
Representación de los ficheros de valores de proceso .....................................................1088
Consulta para ficheros de valores de proceso...................................................................1089
Consulta para ficheros de avisos .......................................................................................1095
Representación de los ficheros de avisos..........................................................................1097
Consulta para ficheros de usuario .....................................................................................1099
Configuración de acceso con el asistente "SQL Server Import/Export".............................1101
Creación de las condiciones para utilizar los Reporting Services......................................1102
Consulta de los datos de fichero........................................................................................1104
Representación de los ficheros de usuario ........................................................................1105

5.5
5.5.1
5.5.2

Funciones de análisis para avisos y valores de proceso ...................................................1106
Funciones de análisis para avisos y valores de proceso ...................................................1106
Representación de ficheros de avisos con consultas de análisis ......................................1109

5.6

Principios básicos de OLE DB ...........................................................................................1111

5.7

WinCC OLE DB Provider ...................................................................................................1112

5.8

Instalación ..........................................................................................................................1113

Trabajar con recetas ..............................................................................................................................1115
6.1
6.1.1

Trabajar con recetas ..........................................................................................................1115
Principios básicos ..............................................................................................................1115

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

15

Índice

16

6.1.1.1
6.1.1.2
6.1.1.3
6.1.1.4
6.1.1.5
6.1.1.6
6.1.1.7
6.1.1.8
6.1.1.9
6.1.2
6.1.2.1
6.1.2.2
6.1.2.3
6.1.2.4
6.1.2.5
6.1.3
6.1.3.1
6.1.3.2
6.1.4
6.1.4.1
6.1.4.2
6.1.4.3
6.1.4.4
6.1.4.5

Definición y campos de aplicación .....................................................................................1115
Ejemplos de utilización de recetas.....................................................................................1117
Estructura de las recetas ...................................................................................................1117
Visualización de las recetas...............................................................................................1119
Transferir registros de receta .............................................................................................1121
Configuración de recetas ...................................................................................................1124
Particularidades de algunos equipos .................................................................................1126
Sincronizar registros de receta con el controlador.............................................................1128
Editor "Recetas" .................................................................................................................1129
Recetas en runtime ............................................................................................................1132
Imagen de receta y visor de recetas ..................................................................................1132
Visor de recetas simple......................................................................................................1136
Visor de recetas avanzado (antes de V13) ........................................................................1148
Visor de recetas avanzado (a partir de V13)......................................................................1158
Exportar e importar datos de receta...................................................................................1172
Configurar recetas..............................................................................................................1176
Crear y editar recetas.........................................................................................................1176
Configurar la visualización de la receta .............................................................................1187
Ejemplos ............................................................................................................................1192
Ejemplo de creación de una receta....................................................................................1192
Ejemplo de configuración de una imagen de receta ..........................................................1194
Escenario para la entrada de registros de receta en runtime ............................................1196
Contexto para un proceso de producción manual .............................................................1197
Contexto para un proceso de producción automático........................................................1199

6.2
6.2.1
6.2.1.1
6.2.1.2
6.2.1.3
6.2.1.4
6.2.1.5
6.2.1.6
6.2.1.7
6.2.2
6.2.2.1
6.2.2.2
6.2.2.3
6.2.2.4
6.2.2.5
6.2.2.6
6.2.3
6.2.3.1
6.2.3.2
6.2.3.3
6.2.3.4
6.2.3.5
6.2.4
6.2.4.1
6.2.4.2
6.2.5
6.2.5.1
6.2.5.2

Trabajar con recetas ..........................................................................................................1200
Principios básicos ..............................................................................................................1200
Definición y campos de aplicación .....................................................................................1200
Estructura de las recetas ...................................................................................................1202
Representación de recetas en runtime ..............................................................................1205
Comunicación con el controlador.......................................................................................1205
Editor "Recetas" .................................................................................................................1206
Lenguaje SQL ....................................................................................................................1209
Palabras clave SQL ...........................................................................................................1210
Configuración de recetas ...................................................................................................1211
Procedimiento general de configuración............................................................................1211
Crear una receta nueva .....................................................................................................1212
Crear elementos de receta y registros ...............................................................................1214
Importar recetas a la configuración y exportarlas nuevamente .........................................1216
Procedimiento en caso de modificar la estructura de la receta .........................................1219
Crear una recopilación de recetas .....................................................................................1219
Configurar la visualización de las recetas..........................................................................1222
Visualización de las recetas...............................................................................................1222
Propiedades del visor de recetas.......................................................................................1224
Configurar el visor de recetas ............................................................................................1226
Exportar datos de receta en runtime..................................................................................1228
Configurar persistencia ......................................................................................................1229
Transferencia de datos hacia autómata.............................................................................1231
Principios básicos de la transmisión de datos ...................................................................1231
Variable de datos sin formato ............................................................................................1236
Manejo en runtime .............................................................................................................1245
Visor de recetas .................................................................................................................1245
Manejar una imagen de receta ..........................................................................................1246

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

6.2.5.3
6.2.5.4
6.2.5.5
6.2.5.6
6.2.5.7
6.2.6
6.2.6.1
6.2.6.2
6.2.6.3
6.2.6.4
7

Operación del ratón y el teclado ........................................................................................1248
Editar recetas .....................................................................................................................1250
Seleccionar y configurar datos...........................................................................................1252
Seleccionar datos...............................................................................................................1255
Clasificar datos...................................................................................................................1257
Ejemplos ............................................................................................................................1259
Ejemplo: Crear recetas ......................................................................................................1259
Ejemplo: Crear una recopilación de recetas ......................................................................1262
Ejemplo: Configurar el visor de recetas .............................................................................1263
Uso de variables de control................................................................................................1265

Trabajar con informes.............................................................................................................................1269
7.1
7.1.1
7.1.2
7.1.3

Principios básicos ..............................................................................................................1269
Informes .............................................................................................................................1269
Estructura de los informes .................................................................................................1271
Estructura de los informes .................................................................................................1274

7.2
7.2.1
7.2.1.1
7.2.1.2
7.2.1.3
7.2.1.4
7.2.1.5
7.2.1.6
7.2.1.7
7.2.1.8
7.2.2
7.2.2.1
7.2.2.2
7.2.2.3
7.2.3
7.2.3.1
7.2.3.2
7.2.3.3
7.2.3.4
7.2.3.5
7.2.3.6
7.2.3.7
7.2.3.8
7.2.3.9
7.2.3.10
7.2.3.11
7.2.4
7.2.4.1
7.2.4.2

Trabajar con informes ........................................................................................................1277
Elaborar informes...............................................................................................................1277
Principios básicos sobre la elaboración de informes .........................................................1277
Principios básicos de la elaboración de informes ..............................................................1280
Crear un informe ................................................................................................................1284
Herramientas para diseñar informes..................................................................................1286
Registro continuo de avisos ...............................................................................................1290
Archivo CSV para la impresión de curvas..........................................................................1291
Archivo CSV para la impresión de una tabla .....................................................................1293
Administrar páginas de detalles .........................................................................................1296
Imprimir informes ...............................................................................................................1297
Impresión de informes en Runtime Advanced ...................................................................1297
Impresión de informes en Runtime Professional ...............................................................1298
Informes de sistema y trabajos de impresión del sistema .................................................1306
Trabajar con objetos ..........................................................................................................1310
Insertar un objeto ...............................................................................................................1310
Borrar un objeto .................................................................................................................1311
Insertar varios objetos del mismo tipo................................................................................1312
Posicionar un objeto...........................................................................................................1314
Desplazar un objeto hacia adelante o hacia atrás (Basic, Advanced, Professional) .........1315
Modificar el tamaño de un objeto .......................................................................................1316
Seleccionar varios objetos .................................................................................................1318
Modificar la posición y el tamaño de varios objetos...........................................................1320
Alinear objetos ...................................................................................................................1320
Girar un objeto ...................................................................................................................1322
Voltear un objeto ................................................................................................................1324
Operación en runtime.........................................................................................................1325
Imprimir un informe ............................................................................................................1325
Imprimir un informe ............................................................................................................1325

7.3
7.3.1
7.3.2
7.3.3
7.3.4
7.3.5

Objetos en los informes .....................................................................................................1326
Resumen............................................................................................................................1326
Informe de auditoría ...........................................................................................................1326
Control Datos .....................................................................................................................1327
Control Copia impresa .......................................................................................................1328
Control Información............................................................................................................1329

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

17

Índice

7.3.6
7.3.7
7.3.8
7.3.9
7.3.10
7.3.11
7.3.12
7.3.13
7.3.14
7.3.15
7.3.16
7.3.17
7.3.18
7.3.19
7.3.20
7.3.21
7.3.22
7.3.23
7.3.24
7.3.25
7.3.26
7.3.27
7.3.28
7.3.29
8

18

Curvas del proveedor CSV ................................................................................................1330
Tablas del proveedor CSV .................................................................................................1331
Campo de fecha y hora......................................................................................................1332
Campo de fecha y hora......................................................................................................1333
Campo E/S.........................................................................................................................1335
Visor de curvas f(t) en los informes....................................................................................1336
Visor de curvas f(x) en los informes...................................................................................1337
Vista de grafico ..................................................................................................................1338
Campo E/S gráfico .............................................................................................................1339
Copia impresa ....................................................................................................................1340
Visor de avisos en los informes .........................................................................................1341
Informe secuencial de avisos.............................................................................................1342
Informe de avisos...............................................................................................................1342
Campo de base de datos ODBC........................................................................................1344
Tabla de base de datos ODBC ..........................................................................................1345
Nombre del proyecto..........................................................................................................1348
Nombre de informe ............................................................................................................1349
Visor de recetas en los informes........................................................................................1350
Informe de receta ...............................................................................................................1351
Número de página..............................................................................................................1352
Número de página..............................................................................................................1353
Campo E/S simbólico.........................................................................................................1354
Visor de tablas en los informes ..........................................................................................1355
Campo de texto..................................................................................................................1356

Configurar una administración de usuarios ............................................................................................1357
8.1
8.1.1
8.1.2
8.1.3
8.1.4
8.1.5
8.1.6
8.1.7
8.1.8
8.1.9
8.1.10

Principios básicos ..............................................................................................................1357
Campo de aplicación de la administración de usuarios .....................................................1357
Estructura de la administración de usuarios ......................................................................1358
Usuarios .............................................................................................................................1359
Área de trabajo de usuarios ...............................................................................................1360
Grupos de usuarios............................................................................................................1361
Área de trabajo de grupos de usuarios ..............................................................................1362
Configuración de la administración de usuarios ................................................................1363
Configuración de la administración de usuarios ................................................................1366
Configuración de la administración de usuarios ................................................................1370
Grupos objetivo en la administración de usuarios .............................................................1371

8.2
8.2.1
8.2.1.1
8.2.1.2
8.2.1.3
8.2.1.4
8.2.1.5
8.2.1.6
8.2.1.7
8.2.1.8
8.2.1.9
8.2.1.10
8.2.2
8.2.2.1
8.2.2.2

Estructurar la administración de usuarios ..........................................................................1372
Administrar usuarios para runtime .....................................................................................1372
Crear una autorización.......................................................................................................1372
Crear un grupo de usuarios ...............................................................................................1372
Crear un grupo de usuarios ...............................................................................................1373
Asignar una autorización....................................................................................................1374
Crear un usuario ................................................................................................................1375
Asignar un usuario a un grupo de usuarios .......................................................................1376
Administrar usuarios ..........................................................................................................1376
Administrar grupos de usuarios .........................................................................................1378
Cambiar el número del grupo de usuarios .........................................................................1379
Iniciar una sesión de usuario dinámica ..............................................................................1380
Administrar usuarios en el servidor....................................................................................1381
Administración de usuarios central con SIMATIC Logon...................................................1381
Autenticación y tratamiento de certificados en SIMATIC Logon ........................................1384

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

9

8.2.2.3
8.2.2.4
8.2.2.5
8.2.3
8.2.3.1
8.2.3.2
8.2.4
8.2.4.1
8.2.4.2
8.2.4.3
8.2.4.4
8.2.4.5
8.2.4.6
8.2.4.7
8.2.4.8
8.2.4.9
8.2.4.10
8.2.5
8.2.5.1
8.2.5.2

Realizar ajustes en el servidor ...........................................................................................1384
Inicio de sesión vía SIMATIC Logon ..................................................................................1385
Inicio de sesión vía SIMATIC Logon ..................................................................................1387
Administrar usuarios para cliente web ...............................................................................1388
Administrar grupo de usuarios para cliente web ................................................................1388
Administrar usuarios para cliente web ...............................................................................1389
Administrar usuarios en runtime ........................................................................................1391
Usuarios en runtime ..........................................................................................................1391
Visor de usuarios ...............................................................................................................1391
Configurar el visor de usuarios ..........................................................................................1393
Crear un usuario ................................................................................................................1393
Administrar usuarios con el visor de usuarios complejo ....................................................1395
Desbloquear usuarios bloqueados.....................................................................................1397
Iniciar una sesión de usuario .............................................................................................1397
Iniciar una sesión de usuario .............................................................................................1399
Exportar la administración de usuarios ..............................................................................1401
Importar administración de usuarios ..................................................................................1402
Configurar una protección de acceso ................................................................................1403
Protección de acceso.........................................................................................................1403
Configurar una autorización de uso ...................................................................................1403

8.3
8.3.1
8.3.2
8.3.3
8.3.4
8.3.5

Referencia..........................................................................................................................1404
Objetos con protección de acceso .....................................................................................1404
Objetos con protección de acceso .....................................................................................1405
Objetos con protección de acceso .....................................................................................1406
Autorizaciones y grupos de usuarios predefinidos.............................................................1407
Autorizaciones y grupos de usuarios predefinidos.............................................................1408

8.4
8.4.1
8.4.2
8.4.3
8.4.4
8.4.5
8.4.6
8.4.7

Ejemplos ............................................................................................................................1408
Ejemplo: Configurar un botón con el cuadro de diálogo de inicio de sesión......................1408
Ejemplo: Registrar el inicio y cierre de sesión ...................................................................1409
Ejemplo: Estructura de una administración de usuarios ....................................................1410
Ejemplo: Crear y configurar una autorización ....................................................................1412
Ejemplo: Configurar un botón con protección de acceso...................................................1412
Ejemplo: Crear grupos de usuarios y asignar autorizaciones............................................1414
Ejemplo: Crear usuarios y asignarlos a un grupo de usuarios...........................................1416

Trabajar con funciones de sistema y Runtime Scripting ........................................................................1419
9.1
9.1.1
9.1.2
9.1.3
9.1.4

Principios básicos ..............................................................................................................1419
Runtime Scripting...............................................................................................................1419
Funciones del sistema .......................................................................................................1421
Funciones definidas por el usuario ....................................................................................1423
Scripts locales ....................................................................................................................1425

9.2
9.2.1
9.2.2
9.2.3
9.2.4

Trabajar con listas de funciones ........................................................................................1427
Conceptos básicos de las listas de funciones....................................................................1427
Propiedades de la lista de funciones .................................................................................1428
Configurar la lista de funciones..........................................................................................1428
Editar la lista de funciones .................................................................................................1430

9.3
9.3.1
9.3.2
9.3.3

Trabajar con funciones definidas por el usuario ................................................................1432
Editor "Scripts" ...................................................................................................................1432
Llamada de funciones de sistema......................................................................................1435
Llamada de funciones definidas por el usuario..................................................................1436

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

19

Índice

20

9.3.4
9.3.5

Acceso a variables HMI .....................................................................................................1438
Comprobar sintaxis de funciones definidas por el usuario.................................................1441

9.4
9.4.1
9.4.2
9.4.3
9.4.4
9.4.5
9.4.6

Crear funciones VB definidas por el usuario......................................................................1442
Acceso a objetos con VBS.................................................................................................1442
Utilización de variables VB.................................................................................................1443
Crear una función VB definida por el usuario ....................................................................1445
Cambiar el nombre de una función VB definida por el usuario..........................................1447
Ejecutar una función VB definida por el usuario ................................................................1448
Transferir y devolver valores en VBS.................................................................................1449

9.5
9.5.1
9.5.2
9.5.3
9.5.4
9.5.5
9.5.6
9.5.7
9.5.8
9.5.9

Crear C Scripts de usuario.................................................................................................1451
Acceso a objetos con C .....................................................................................................1451
Crear C Header..................................................................................................................1451
Usar variables globales C ..................................................................................................1453
Llamar funciones de DLLs en C Scripts de usuario ...........................................................1454
Establecer página de códigos para función C....................................................................1455
Crear una función C definida por el usuario.......................................................................1456
Cambiar el nombre de una función C definida por el usuario ............................................1459
Ejecutar una función C definida por el usuario ..................................................................1460
Transferir y devolver valores en C .....................................................................................1461

9.6
9.6.1
9.6.2
9.6.3
9.6.4

Protección de funciones definidas por el usuario...............................................................1462
Establecer la protección de know-how...............................................................................1462
Abrir scripts de usuario con protección de know-how........................................................1463
Eliminar protección de know-how ......................................................................................1463
Cambiar la contraseña .......................................................................................................1464

9.7
9.7.1
9.7.2
9.7.3
9.7.4

Creación de scripts locales ................................................................................................1465
Scripts locales ....................................................................................................................1465
Editor para scripts locales ..................................................................................................1466
Convertir la lista de funciones en un script local ................................................................1467
Dinamizar propiedad de objeto con script local .................................................................1469

9.8
9.8.1
9.8.2
9.8.3
9.8.4
9.8.5
9.8.6
9.8.7
9.8.8
9.8.9
9.8.10
9.8.11
9.8.11.1
9.8.11.2
9.8.11.3

Depurar ..............................................................................................................................1469
Depurar funciones de VB definidas por el usuario.............................................................1469
Conceptos básicos de la limpieza con debugger...............................................................1471
Activar el depurador ...........................................................................................................1475
Diseño de los archivos de VBScript ...................................................................................1476
Diseño de los archivos de VBScript ...................................................................................1476
Nombres en el depurador ..................................................................................................1477
Puntos de parada...............................................................................................................1478
Trabajar paso a paso .........................................................................................................1479
Ejecutar comandos ............................................................................................................1480
Determinar valores de variables o propiedades.................................................................1481
Diagnóstico ........................................................................................................................1482
Diagnóstico ........................................................................................................................1482
Diagnóstico de GSC...........................................................................................................1483
Insertar ventana de diagnóstico de GSC en una imagen ..................................................1484

9.9
9.9.1
9.9.2
9.9.3
9.9.4

Comportamiento en tiempo de ejecución en runtime.........................................................1484
Procesamiento de scripts de usuario en runtime ...............................................................1484
Procesar la lista de funciones en runtime ..........................................................................1485
Procesamiento de funciones y scripts locales en runtime .................................................1486
Secuencia en el procesamiento de scripts de usuario y funciones de sistema .................1487

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

10

9.9.5

Dinamización de propiedades de objetos en runtime ........................................................1489

9.10
9.10.1
9.10.1.1
9.10.1.2
9.10.1.3
9.10.2
9.10.2.1
9.10.2.2
9.10.2.3
9.10.2.4
9.10.2.5
9.10.2.6
9.10.2.7
9.10.2.8
9.10.2.9
9.10.2.10
9.10.2.11
9.10.2.12
9.10.2.13
9.10.2.14
9.10.2.15
9.10.3
9.10.3.1
9.10.3.2
9.10.3.3
9.10.3.4
9.10.3.5
9.10.3.6
9.10.3.7
9.10.3.8
9.10.3.9
9.10.3.10

Ejemplos ............................................................................................................................1490
Ejemplos de VBS ...............................................................................................................1490
Ejemplo: convertir Fahrenheit a Celsius ............................................................................1490
Ejemplo: convertir pulgadas a metros................................................................................1492
Ejemplo: cambiar el modo de operación del panel de operador y visualizar el estado
actual..................................................................................................................................1494
Ejemplos de VBS ...............................................................................................................1498
Resumen............................................................................................................................1498
Ejemplo para acceder a objetos en el editor Imágenes .....................................................1498
Ejemplo para determinar colores de objetos......................................................................1499
Ejemplo para configurar un cambio de idioma...................................................................1499
Ejemplo para desactivar runtime........................................................................................1500
Ejemplo para configurar un cambio de imagen a través de Property ................................1500
Ejemplo para configurar una salida de diagnóstico a través de Trace ..............................1500
Ejemplo para escribir valores de variables ........................................................................1502
Ejemplo para leer valores de variables ..............................................................................1504
Ejemplo para escribir propiedades de objetos ...................................................................1506
Ejemplo para configurar el visor de recetas.......................................................................1509
Ejemplo para configurar el visor de avisos ........................................................................1510
Ejemplo de evaluación estadística de valores de variables...............................................1512
Ejemplo de ejecución de un script en el servidor (objeto logging) .....................................1513
Ejemplo de apertura del visor de código desde la vista general de GRAPH .....................1514
Ejemplos de C....................................................................................................................1515
Resumen............................................................................................................................1515
Ejemplo para acceder a objetos en el editor Imágenes .....................................................1516
Ejemplo para determinar colores de objetos......................................................................1516
Ejemplo para configurar un cambio de idioma...................................................................1517
Ejemplo para desactivar runtime........................................................................................1517
Ejemplo para configurar un cambio de imagen a través de Property ................................1518
Ejemplo para configurar una salida de diagnóstico a través de Trace ..............................1518
Ejemplo para escribir valores de variables ........................................................................1519
Ejemplo para leer valores de variables ..............................................................................1519
Ejemplo para escribir propiedades de objetos ...................................................................1520

9.11
9.11.1
9.11.1.1
9.11.1.2
9.11.1.3
9.11.2
9.11.2.1
9.11.2.2
9.11.2.3
9.11.2.4
9.11.3

Referencia..........................................................................................................................1520
Lista de funciones ..............................................................................................................1520
Dependencia del panel de operador ..................................................................................1520
Funciones de sistema ........................................................................................................1555
Funciones de sistema ........................................................................................................1714
Eventos ..............................................................................................................................1763
Resumen............................................................................................................................1763
Resumen............................................................................................................................1769
Sinopsis..............................................................................................................................1776
Eventos ..............................................................................................................................1789
WinCC Engineering V16: Referencia para la programación..............................................1821

Mobile Panels .........................................................................................................................................1823
10.1
10.1.1
10.1.2

Principios básicos ..............................................................................................................1823
Zonas .................................................................................................................................1823
Área de trabajo Zonas en cajas de conexión.....................................................................1824

10.2

Configuración de los KTP Mobile Panels para el modo de seguridad positiva..................1825

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

21

Índice

11

12

10.2.1
10.2.2

Crear un KTP Mobile Panel para el modo de seguridad....................................................1825
Configurar la desconexión PROFIsafe...............................................................................1826

10.3
10.3.1
10.3.2

Trabajar con zonas de cajas de conexión..........................................................................1827
Configurar una zona de una caja de conexión...................................................................1827
Llamada de funciones de sistema al conectar a la caja de conexión ................................1828

10.4
10.4.1
10.4.2

Referencia..........................................................................................................................1829
Dirección PROFIsafe .........................................................................................................1829
Administración de energía .................................................................................................1830

Planificar tareas......................................................................................................................................1831
11.1
11.1.1
11.1.2
11.1.3
11.1.4
11.1.5
11.1.6
11.1.7
11.1.8
11.1.9
11.1.10
11.1.11
11.1.12

Principios básicos ..............................................................................................................1831
Campo de aplicación del planificador de tareas ................................................................1831
Trabajar con tareas y disparadores ...................................................................................1832
Área de trabajo del editor Planificador de tareas ...............................................................1832
Disparador..........................................................................................................................1833
Disparador..........................................................................................................................1834
Temporizador en disparadores cíclicos .............................................................................1836
Disparador de variable .......................................................................................................1836
Lista de funciones ..............................................................................................................1837
Lista de funciones ..............................................................................................................1838
Trabajo de impresión .........................................................................................................1838
Conexión de VB Scripts locales .........................................................................................1840
Conexión de C Scripts locales ...........................................................................................1841

11.2
11.2.1
11.2.2
11.2.3
11.2.4

Planificar tareas .................................................................................................................1842
Planificar una tarea con el disparador acíclico...................................................................1842
Planificar una tarea con el disparador cíclico.....................................................................1843
Planificar una tarea con el disparo por eventos .................................................................1845
Administrar una tarea.........................................................................................................1846

11.3
11.3.1
11.3.2
11.3.3
11.3.4

Ejemplos de Runtime Professional ....................................................................................1847
Ejemplo: activar la imagen inicial cada día .......................................................................1847
Ejemplo: impresión única de un informe ............................................................................1848
Ejemplo: leer el nombre del usuario actual ........................................................................1850
Ejemplo: incrementar una variable.....................................................................................1851

11.4
11.4.1
11.4.2
11.4.3
11.4.4
11.4.5
11.4.6

Ejemplos de Runtime Advanced y Panels .........................................................................1852
Ejemplo: actualizar los usuarios al cambiar de usuario .....................................................1852
Ejemplo: impresión semanal de un informe .......................................................................1853
Ejemplo: modificar el instante de inicio de una tarea en runtime.......................................1854
Ejemplo: 1. Configurar una variable para runtime..............................................................1855
Ejemplo: 2. Configurar un campo de fecha y hora.............................................................1856
Ejemplo: 3. Configurar una archivación con una variable de temporizador.......................1856

Uso de funciones de diagnóstico............................................................................................................1859
12.1
12.1.1
12.1.1.1
12.1.1.2
12.1.1.3
12.1.2
12.1.2.1
12.1.2.2

22

Configuración del diagnóstico de sistema..........................................................................1859
Diagnóstico del sistema .....................................................................................................1859
Principios básicos para Basic Panels ................................................................................1859
Principios básicos para Panels y Runtime Advanced ........................................................1862
Configurar objetos del diagnóstico de sistema ..................................................................1866
Diagnóstico del sistema .....................................................................................................1875
Principios básicos para Runtime Professional ...................................................................1875
Configurar objetos del diagnóstico de sistema ..................................................................1879

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

13

12.1.2.3

Ejemplo: diagnóstico de sistema con todos los objetos.....................................................1883

12.2

Funciones de supervisión para SIMATIC IPC....................................................................1889

12.3
12.3.1
12.3.2
12.3.3
12.3.4
12.3.4.1
12.3.4.2
12.3.4.3
12.3.4.4
12.3.4.5
12.3.4.6
12.3.4.7
12.3.4.8
12.3.5
12.3.5.1
12.3.5.2
12.3.5.3
12.3.5.4
12.3.5.5
12.3.5.6
12.3.5.7
12.3.5.8
12.3.6
12.3.6.1
12.3.6.2
12.3.6.3
12.3.6.4
12.3.6.5
12.3.6.6

Supervisión de máquinas e instalaciones con ProDiag .....................................................1891
Principios básicos de la supervisión con ProDiag..............................................................1891
Principios básicos de la supervisión de operandos ...........................................................1892
Requisitos y concesión de licencias...................................................................................1893
Visualización de supervisiones ..........................................................................................1895
Objetos para la supervisión y el diagnóstico de instalaciones ...........................................1895
Interacción de los objetos para la supervisión y el diagnóstico .........................................1896
Interacción de los objetos para la supervisión y el diagnóstico .........................................1899
Configuración de la vista general de ProDiag....................................................................1902
Configuración de la vista general de GRAPH ....................................................................1906
Configurar el visor de código PLC .....................................................................................1913
Configurar el visor de código PLC .....................................................................................1927
Solución de problemas de visualización en el visor de código PLC ..................................1941
Ejemplo: Visualización de la funcionalidad ProDiag ..........................................................1943
Resumen de operaciones ..................................................................................................1943
Requisitos ..........................................................................................................................1945
Crear imágenes..................................................................................................................1945
Inserción de objetos de diagnóstico...................................................................................1946
Configuración de objetos de diagnóstico ...........................................................................1947
Configuración del visor de avisos para ProDiag ................................................................1949
Configuración de salto desde la vista general de GRAPH.................................................1951
Configuración de salto desde la vista general de ProDiag ................................................1954
Adquisición de primeros valores y análisis de criterios......................................................1955
Sinopsis de la adquisición de primeros valores y del análisis de criterios .........................1955
Instrucciones permitidas ....................................................................................................1958
Ejemplo de orden del análisis de criterios..........................................................................1960
Configuración del visor de análisis de criterios ..................................................................1962
Configuración del visor de análisis de criterios ..................................................................1963
Salida de avisos con criterios.............................................................................................1964

Comunicación con controladores ...........................................................................................................1967
13.1

14

WinCC Engineering V16: Comunicación ...........................................................................1967

Utilizar funciones generales ...................................................................................................................1969
14.1
14.1.1
14.1.2

Trabajar con el asistente de paneles de operador.............................................................1969
Conceptos básicos del asistente de paneles de operador.................................................1969
Conceptos básicos del asistente de paneles de operador.................................................1972

14.2
14.2.1
14.2.2
14.2.3
14.2.4
14.2.5
14.2.5.1
14.2.5.2
14.2.5.3
14.2.5.4
14.2.5.5
14.2.5.6

Trabajar con librerías .........................................................................................................1974
Principios básicos de las librerías ......................................................................................1974
Sinopsis de la vista de librerías..........................................................................................1976
Plantillas maestras y tipos..................................................................................................1978
Librerías en WinCC............................................................................................................1979
Administrar librerías ...........................................................................................................1981
Sinopsis de la administración de librerías..........................................................................1981
Abrir la administración de librerías.....................................................................................1982
Filtrar tipos en la administración de librerías......................................................................1983
Crear librería global............................................................................................................1984
Guardar librería global .......................................................................................................1985
Abrir librería global .............................................................................................................1986

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

23

Índice

24

14.2.5.7
14.2.5.8
14.2.5.9
14.2.5.10
14.2.5.11
14.2.6
14.2.6.1
14.2.6.2
14.2.6.3
14.2.7
14.2.7.1
14.2.7.2
14.2.7.3
14.2.7.4
14.2.7.5
14.2.7.6

Mostrar los informes de las librerías globales....................................................................1987
Actualizar un proyecto con el contenido de una librería ....................................................1987
Actualizar una librería con los contenidos de otra librería .................................................1988
Actualizar los tipos de una librería .....................................................................................1989
Exportación e importación de textos de librerías ...............................................................1991
Administrar objetos en una librería ....................................................................................1993
Mostrar objetos de librería .................................................................................................1993
Depositar un objeto en una librería ....................................................................................1996
Insertar un objeto de librería ..............................................................................................1997
Utilizar tipos y sus versiones..............................................................................................1998
Estado de las versiones de tipo .........................................................................................1998
Generar script como tipo....................................................................................................1999
Generar imagen como tipo.................................................................................................2000
Generar estilo como tipo ....................................................................................................2000
Generar hoja de estilo como tipo .......................................................................................2001
Crear una nueva versión de un tipo ...................................................................................2001

14.3
14.3.1
14.3.2
14.3.2.1
14.3.2.2
14.3.2.3
14.3.2.4
14.3.2.5
14.3.2.6
14.3.3
14.3.3.1
14.3.3.2
14.3.3.3
14.3.3.4
14.3.3.5
14.3.3.6
14.3.3.7
14.3.4
14.3.4.1
14.3.4.2
14.3.4.3
14.3.4.4
14.3.4.5
14.3.5
14.3.5.1
14.3.5.2
14.3.5.3
14.3.6
14.3.6.1
14.3.6.2

Importar y exportar datos de proyecto ...............................................................................2002
Intercambio de datos entre proyectos y aplicaciones externas .........................................2002
Importar y exportar registros de recetas ............................................................................2004
Exportar registros de recetas .............................................................................................2004
Importar registros de recetas .............................................................................................2006
Exportar registros de recetas .............................................................................................2007
Importar registros de recetas .............................................................................................2008
Edición de registros de receta exportados.........................................................................2010
Formato de los datos de los registros de recetas ..............................................................2010
Importar y exportar avisos..................................................................................................2011
Exportar avisos ..................................................................................................................2011
Importación de avisos ........................................................................................................2012
Importar avisos...................................................................................................................2014
Formato de los datos de avisos analógicos .......................................................................2015
Formato de los datos de avisos de bit ...............................................................................2018
Formato de los datos de avisos analógicos .......................................................................2020
Formato de los datos de avisos de bit ...............................................................................2023
Importar y exportar variables .............................................................................................2026
Exportar variables ..............................................................................................................2026
Importar variables (a partir de WinCC V13 SP1) ...............................................................2027
Importar variables (antes de WinCC V13 SP1)..................................................................2029
Formato de los datos de variables .....................................................................................2030
Formato de los datos de variables ....................................................................................2033
Importar y exportar listas de textos ....................................................................................2035
Exportar listas de textos.....................................................................................................2035
Importar listas de textos .....................................................................................................2036
Formato de los datos para las listas de textos...................................................................2038
Importar y exportar textos del proyecto..............................................................................2040
Importar textos del proyecto...............................................................................................2040
Exportar textos del proyecto ..............................................................................................2040

14.4
14.4.1
14.4.2
14.4.3
14.4.4

Utilizar referencias cruzadas..............................................................................................2042
Información general sobre referencias cruzadas ...............................................................2042
Particularidades del trabajo con la lista de referencias cruzadas en WinCC.....................2043
Referencias cruzadas textuales .........................................................................................2044
Referencias cruzadas no válidas .......................................................................................2046

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

14.4.5

Reasignar variables en imágenes......................................................................................2048

14.5
14.5.1
14.5.2
14.5.3
14.5.4
14.5.4.1
14.5.4.2
14.5.4.3
14.5.5
14.5.5.1
14.5.5.2
14.5.5.3
14.5.5.4
14.5.5.5
14.5.5.6
14.5.6
14.5.6.1
14.5.6.2
14.5.6.3
14.5.7
14.5.7.1
14.5.7.2
14.5.7.3
14.5.7.4
14.5.7.5
14.5.7.6
14.5.7.7
14.5.7.8
14.5.8
14.5.8.1
14.5.8.2
14.5.8.3

Gestionar idiomas ..............................................................................................................2052
Conceptos lingüísticos en WinCC......................................................................................2052
Configuración de idiomas en el sistema operativo.............................................................2054
Configuración en el sistema operativo para los idiomas asiáticos.....................................2055
Configurar idiomas del proyecto ........................................................................................2056
Seleccionar el idioma de la interfaz de usuario..................................................................2056
Activar idiomas del proyecto ..............................................................................................2057
Seleccionar idioma de referencia e idioma de edición.......................................................2058
Crear un proyecto en varios idiomas .................................................................................2059
Trabajar con varios idiomas ...............................................................................................2059
Principios básicos de los textos del proyecto.....................................................................2060
Traducir textos directamente..............................................................................................2061
Traducir textos con ayuda de textos de referencia ............................................................2063
Exportar textos del proyecto ..............................................................................................2063
Importar textos del proyecto...............................................................................................2066
Uso de gráficos específicos del idioma..............................................................................2067
Editor "Gráficos" .................................................................................................................2067
Agregar un gráfico a la colección de gráficos ....................................................................2068
Agregar un gráfico externo a la colección de gráficos .......................................................2069
Idiomas de runtime.............................................................................................................2071
Idioma y fuente en Runtime ...............................................................................................2071
Métodos para cambiar de idioma.......................................................................................2073
Activar idioma de runtime...................................................................................................2073
Definir secuencia del idioma de runtime a la hora de cambiar el idioma ...........................2075
Ajustar la fuente estándar para un idioma de runtime .......................................................2076
Unificar fuente para todos los idiomas ...............................................................................2077
Seleccionar el idioma de archivación.................................................................................2078
Particularidades de los idiomas asiáticos y orientales en runtime .....................................2079
Ejemplo de configuración multilingüe.................................................................................2080
Ejemplo: Configurar un botón para el cambio de idioma ...................................................2080
Ejemplo: Configurar la etiqueta multilingüe de un botón....................................................2081
Ejemplo: Configurar un botón para el cambio de idioma por cada idioma de runtime.......2082

14.6
14.6.1
14.6.2
14.6.3
14.6.3.1
14.6.3.2
14.6.4
14.6.4.1
14.6.4.2
14.6.4.3
14.6.5
14.6.5.1
14.6.5.2
14.6.5.3

Sustituir un dispositivo .......................................................................................................2083
Principios básicos ..............................................................................................................2083
Adaptación de la configuración de conexiones..................................................................2085
Funciones dependientes del dispositivo ............................................................................2086
Funciones dependientes del panel ....................................................................................2086
Asignación de teclas cuando se sustituye un dispositivo...................................................2086
Adaptar imágenes al nuevo dispositivo..............................................................................2089
Posibilidades para la adaptación de las imágenes ............................................................2089
Adaptar objetos al contenido..............................................................................................2091
Definir la posición de los objetos de imagen......................................................................2094
Ejemplo: Sustituir un dispositivo ........................................................................................2095
Ejemplo: Resumen de los pasos a seguir..........................................................................2095
Ejemplo: Adaptar imágenes ...............................................................................................2095
Ejemplo: Sustituir dispositivo .............................................................................................2096

14.7
14.7.1
14.7.1.1
14.7.1.2

Copiar entre paneles de operador y editores.....................................................................2098
Principios básicos ..............................................................................................................2098
Principios básicos ..............................................................................................................2098
Posibilidades para copiar y pegar ......................................................................................2100

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

25

Índice

15

14.7.1.3
14.7.1.4
14.7.2
14.7.2.1
14.7.2.2
14.7.2.3
14.7.2.4
14.7.2.5
14.7.2.6
14.7.2.7
14.7.2.8
14.7.2.9
14.7.3
14.7.3.1
14.7.3.2
14.7.3.3
14.7.3.4
14.7.3.5
14.7.3.6
14.7.3.7
14.7.3.8
14.7.3.9
14.7.3.10
14.7.3.11
14.7.3.12
14.7.3.13
14.7.3.14
14.7.3.15
14.7.3.16
14.7.3.17
14.7.3.18
14.7.4

Objetos y funciones no soportados (Professional).............................................................2100
Objetos y funciones no soportados....................................................................................2101
Copiar y pegar....................................................................................................................2103
Copiar objetos con objetos enlazados ...............................................................................2103
Objetos enlazados copiados automáticamente .................................................................2103
Objetos enlazados copiados automáticamente .................................................................2104
Copia de paneles de operador HMI con conexiones HMI..................................................2104
Copia de objetos de imagen vinculados a tipos de datos de usuario ................................2105
Drag&Drop desde la vista detallada...................................................................................2105
Copiar imágenes ................................................................................................................2106
Copiar recetas en un mismo panel de operador ................................................................2107
Diferencias entre Runtime Advanced y Panels y Runtime Professional............................2108
Copiar y pegar entre Runtime Advanced y Panels y Runtime Professional ......................2109
Principios básicos ..............................................................................................................2109
Funciones de sistema ........................................................................................................2110
Restricciones al copiar .......................................................................................................2111
Objetos en imágenes .........................................................................................................2111
Objetos gráficos .................................................................................................................2112
Conexiones ........................................................................................................................2114
Copiar variables .................................................................................................................2115
Tipos de datos y propiedades para variables ....................................................................2116
Estructuras .........................................................................................................................2117
Avisos.................................................................................................................................2120
Ficheros .............................................................................................................................2125
Copiar Scripts en VB..........................................................................................................2128
Copiar recetas entre Runtime Advanced y Panels y Runtime Professional ......................2129
Copiar ciclos.......................................................................................................................2130
Informes .............................................................................................................................2131
Listas de textos y listas de gráficos....................................................................................2133
Administración de usuarios ................................................................................................2134
Planificador de tareas ........................................................................................................2135
Copia entre distinas versiones de RT y ES........................................................................2136

14.8
14.8.1
14.8.2
14.8.3
14.8.4
14.8.5
14.8.6
14.8.7

Utilizar la compatibilidad de versiones de WinCC..............................................................2138
Principios básicos de la compatibilidad de versiones ........................................................2138
Fundamentos de la compatibilidad de versiones ...............................................................2140
Actualización del proyecto .................................................................................................2141
Actualizar una librería global..............................................................................................2142
Edición de proyectos de una versión anterior de WinCC...................................................2144
Cambio entre distintas versiones de dispositivos ..............................................................2144
Cambio de versión del dispositivo......................................................................................2146

14.9
14.9.1
14.9.2

Administrar colores centralmente.......................................................................................2147
Principios básicos de la administración de colores............................................................2147
Buscar y reemplazar colores..............................................................................................2147

14.10

Cargar archivos mediante el editor "Archivos HMI" ...........................................................2150

14.11

Intercambio de datos de control de otros proyectos ..........................................................2152

14.12

Detección del estado del proyecto por el símbolo de SIMATIC WinCC RT.......................2153

Compilar y cargar ...................................................................................................................................2155
15.1

26

Establecer una conexión con el panel de operador ...........................................................2155

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

15.2
15.2.1
15.2.1.1
15.2.1.2
15.2.1.3
15.2.1.4
15.2.1.5
15.2.2
15.2.3
15.2.4
15.2.4.1
15.2.4.2
15.2.4.3
15.2.4.4
15.2.5
15.2.5.1
15.2.5.2
15.2.5.3
15.2.6
15.2.6.1
15.2.6.2
15.2.6.3
15.2.7
15.2.7.1
15.2.8
15.2.9
15.2.10
15.2.11
15.2.11.1
15.2.11.2
15.2.11.3
15.2.11.4
15.2.11.5
15.2.11.6
15.2.11.7
15.2.11.8
15.2.11.9
15.2.12
15.2.13
15.2.13.1
15.2.13.2

Basic Panels ......................................................................................................................2156
Ajustes de runtime .............................................................................................................2156
Configuración para runtime................................................................................................2156
Configurar la representación en runtime............................................................................2158
Configurar el manejo en runtime........................................................................................2160
Ajuste de la comprobación de compatibilidad con el controlador ......................................2161
Protección por contraseña en runtime ...............................................................................2161
Resumen de cómo compilar y cargar proyectos................................................................2164
Compilar un proyecto .........................................................................................................2165
Simular proyectos ..............................................................................................................2166
Principios básicos de la simulación....................................................................................2166
Simular un proyecto ...........................................................................................................2168
Trabajar con el simulador de variables ..............................................................................2170
Restricciones en la simulación...........................................................................................2172
Cargar proyectos................................................................................................................2172
Resumen de cómo cargar proyectos .................................................................................2172
Cargar un proyecto ............................................................................................................2174
Cargar el proyecto de un medio de almacenamiento externo ...........................................2177
Compilar y cargar con ingeniería multiusuario...................................................................2179
Compilar y cargar con Multiuser Engineering (sinopsis)....................................................2179
Compilar en la vista del proyecto de servidor ....................................................................2180
Compilar en la sesión local ................................................................................................2181
Iniciar runtime.....................................................................................................................2182
Iniciar el runtime en el panel de operador..........................................................................2182
Mensajes de error al cargar proyectos (Basic) ..................................................................2183
Adaptar el proyecto a otro panel de operador....................................................................2185
Reducir el tamaño del proyecto .........................................................................................2187
Principios básicos del manejo en runtime..........................................................................2188
Resumen............................................................................................................................2188
Manejo mediante pantalla táctil..........................................................................................2189
Manejo mediante teclas .....................................................................................................2193
Navegación en la pantalla (LCA) .......................................................................................2197
Desencadenar una acción .................................................................................................2198
Introducir valores................................................................................................................2199
Mover elementos de manejo..............................................................................................2199
Mostrar el texto de ayuda...................................................................................................2200
Cambio del idioma de runtime ...........................................................................................2201
Introducir códigos de barras con lectores ópticos de mano...............................................2202
Seguridad en el panel de operador....................................................................................2203
Principios básicos de las firmas .........................................................................................2203
Desactivación de la comprobación de la firma...................................................................2204

15.3
15.3.1
15.3.1.1
15.3.1.2
15.3.1.3
15.3.1.4
15.3.1.5
15.3.1.6
15.3.1.7
15.3.2

Runtime Advanced y Panels ..............................................................................................2205
Configuración para runtime................................................................................................2205
Configuración para runtime................................................................................................2205
Configurar la representación en runtime............................................................................2207
Configuración del manejo en runtime ................................................................................2209
Ajuste de la comprobación de compatibilidad con el controlador ......................................2211
Ajustar la base horaria .......................................................................................................2211
Imprimir en runtime ............................................................................................................2212
Protección por contraseña en runtime ...............................................................................2212
Resumen de cómo compilar y cargar proyectos................................................................2214

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

27

Índice

15.3.3
15.3.4
15.3.4.1
15.3.4.2
15.3.4.3
15.3.4.4
15.3.4.5
15.3.4.6
15.3.5
15.3.5.1
15.3.5.2
15.3.5.3
15.3.5.4
15.3.5.5
15.3.5.6
15.3.5.7
15.3.5.8
15.3.6
15.3.6.1
15.3.6.2
15.3.6.3
15.3.7
15.3.7.1
15.3.7.2
15.3.8
15.3.9
15.3.10
15.3.11
15.3.12
15.3.12.1
15.3.12.2
15.3.13
15.3.13.1
15.3.13.2
15.3.13.3
15.3.13.4
15.3.14
15.3.14.1
15.3.14.2
15.3.14.3
15.3.14.4
15.3.14.5
15.3.14.6
15.3.14.7
15.3.14.8
15.3.14.9
15.3.14.10
15.3.15
15.3.16
15.3.16.1
15.3.16.2
15.3.16.3

28

Compilar un proyecto .........................................................................................................2216
Simular proyectos ..............................................................................................................2217
Principios básicos de la simulación....................................................................................2217
Simulación de Runtime Advanced .....................................................................................2218
Simular un proyecto ...........................................................................................................2219
Simular una imagen ...........................................................................................................2221
Trabajar con el simulador de variables ..............................................................................2221
Restricciones en la simulación...........................................................................................2223
Cargar proyectos................................................................................................................2224
Resumen de cómo cargar proyectos .................................................................................2224
Resumen de cómo cargar proyectos .................................................................................2227
Cargar un proyecto ............................................................................................................2229
Crear archivo "Pack&Go" ...................................................................................................2233
Cargar el proyecto en el panel de operador desde el archivo "Pack&Go".........................2234
Carga a través de la interfaz USB......................................................................................2235
Cargar al proyecto desde un medio de almacenamiento externo......................................2236
Instalar controladores USB bajo Windows 7......................................................................2240
Compilar y cargar con ingeniería multiusuario...................................................................2242
Compilar y cargar con Multiuser Engineering (sinopsis)....................................................2242
Compilar en la vista del proyecto de servidor ....................................................................2243
Compilar en la sesión local ................................................................................................2244
Iniciar runtime.....................................................................................................................2245
Iniciar runtime en el PC de configuración ..........................................................................2245
Iniciar Runtime Advanced y Panel Runtime.......................................................................2246
Mensajes de error al cargar proyectos...............................................................................2248
Adaptar el proyecto a otro panel de operador....................................................................2250
Reducir el tamaño del proyecto .........................................................................................2251
Cámaras de red soportadas y ajustes ...............................................................................2253
Mostrar datos de una tarjeta de memoria ..........................................................................2256
Principios básicos ..............................................................................................................2256
Trabajo con copias de seguridad .......................................................................................2257
Trabajo con imágenes de panel de operador ....................................................................2259
Mostrar imagen de panel de operador ...............................................................................2259
Borrado de imagen de panel de operador .........................................................................2261
Crear imagen del panel de operador en la tarjeta de memoria..........................................2261
Imágenes de paneles de operador a partir de V15............................................................2263
Principios básicos del manejo en runtime..........................................................................2265
Resumen............................................................................................................................2265
Manejo mediante pantalla táctil..........................................................................................2265
Manejo mediante teclas .....................................................................................................2275
Navegación en la pantalla (LCA) .......................................................................................2280
Desencadenar una acción .................................................................................................2280
Introducir valores................................................................................................................2281
Mover elementos de manejo..............................................................................................2282
Mostrar el texto de ayuda...................................................................................................2282
Cambio del idioma de runtime ...........................................................................................2283
Navegador web del motor WebKit: Sinopsis......................................................................2284
Introducir códigos de barras con lectores ópticos de mano...............................................2289
Seguridad en el panel de operador....................................................................................2291
Principios básicos de las firmas .........................................................................................2291
Descarga de opciones de otros fabricantes.......................................................................2291
Desactivación de la comprobación de la firma...................................................................2292

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

15.4
15.4.1
15.4.1.1
15.4.1.2
15.4.1.3
15.4.1.4
15.4.1.5
15.4.1.6
15.4.1.7
15.4.1.8
15.4.1.9
15.4.2
15.4.3
15.4.4
15.4.4.1
15.4.4.2
15.4.4.3
15.4.4.4
15.4.4.5
15.4.4.6
15.4.5
15.4.5.1
15.4.5.2
15.4.5.3
15.4.5.4
15.4.5.5
15.4.6
15.4.6.1
15.4.6.2
15.4.6.3
15.4.6.4
15.4.6.5
15.4.6.6
15.4.7
15.4.7.1
15.4.7.2
15.4.8
15.4.8.1
15.4.8.2
15.4.8.3
15.4.8.4
15.4.8.5
15.4.8.6
15.4.8.7
15.4.8.8
15.4.8.9
15.4.8.10

Runtime Professional .........................................................................................................2292
Configuración para runtime................................................................................................2292
Configuración del software runtime....................................................................................2292
Configurar la representación en runtime (Professional).....................................................2295
Configurar el manejo en runtime........................................................................................2297
Configuración de la secuencia de inicio.............................................................................2305
Activar la sincronización horaria ........................................................................................2306
Ajuste de la base horaria ...................................................................................................2311
Configuración de la persistencia ........................................................................................2311
Trabajo con Service-Mode .................................................................................................2313
Protección por contraseña en runtime ...............................................................................2317
Resumen de cómo compilar y cargar proyectos................................................................2319
Compilar un proyecto .........................................................................................................2321
Simulación de proyectos ....................................................................................................2322
Principios básicos de la simulación....................................................................................2322
Simulación de Runtime Professional .................................................................................2323
Simular un proyecto ...........................................................................................................2324
Simular una imagen ...........................................................................................................2326
Restricciones en la simulación...........................................................................................2326
Simulación de variables con Tag Simulator .......................................................................2327
Cargar proyectos................................................................................................................2342
Resumen de cómo cargar proyectos .................................................................................2342
Cargar el proyecto en un panel de operador .....................................................................2345
Cargar el proyecto en un sistema de archivos...................................................................2348
Carga de modificaciones online para Runtime Professional..............................................2349
Actualización de un proyecto runtime a V13 SP1 en un panel de operador......................2353
Compilar y cargar con ingeniería multiusuario...................................................................2354
Compilar y cargar con ingeniería multiusuario (resumen) .................................................2354
Compilar en la vista del proyecto de servidor ....................................................................2356
Compilar en la sesión local ................................................................................................2357
Reglas para la carga de modificaciones online..................................................................2358
Carga de modificaciones online desde la vista del proyecto de servidor...........................2359
Carga de modificaciones online desde la sesión local.......................................................2360
Iniciar runtime.....................................................................................................................2362
Iniciar runtime en el PC de configuración ..........................................................................2362
Iniciar Runtime Professional ..............................................................................................2364
Principios básicos del manejo en runtime..........................................................................2367
Sinopsis del manejo en runtime (Professional)..................................................................2367
Manejo mediante pantalla táctil..........................................................................................2368
Manejo mediante teclas .....................................................................................................2376
Navegación en la pantalla (LCA) .......................................................................................2380
Desencadenar una acción .................................................................................................2381
Introducir valores................................................................................................................2381
Mover elementos de manejo..............................................................................................2382
Mostrar el texto de ayuda (Professional) ...........................................................................2383
Cambio del idioma de runtime ...........................................................................................2383
Exportar datos runtime.......................................................................................................2384

15.5
15.5.1
15.5.2

Pasar a la configuración.....................................................................................................2385
Pasar a la configuración.....................................................................................................2385
Modo de lectura el TIA Portal.............................................................................................2386

15.6

Pasar a la configuración.....................................................................................................2388

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

29

Índice

16

17

15.6.1
15.6.2
15.6.3
15.6.4

Pasar a la configuración.....................................................................................................2388
Modo de lectura el TIA Portal.............................................................................................2389
Configurar el modo de lectura............................................................................................2391
Ejemplo: Configuración del modo de lectura con ayuda de la función API........................2392

15.7
15.7.1
15.7.2
15.7.3
15.7.4
15.7.5
15.7.6
15.7.7
15.7.8
15.7.9
15.7.10
15.7.11
15.7.12
15.7.13

Mantenimiento del panel de operador................................................................................2393
Resumen del mantenimiento del panel de operador (Basic Panels) .................................2393
Resumen del mantenimiento del panel de operador (Panels) ...........................................2394
Resumen del mantenimiento del panel de operador (RT Adv, RT Prof)............................2395
ProSave .............................................................................................................................2396
Crear una copia de seguridad de los datos del panel de operador ...................................2396
Guardar y restablecer los datos del panel de operador .....................................................2398
Actualización del sistema operativo ...................................................................................2400
Actualizar el sistema operativo del panel de operador ......................................................2401
Actualización del sistema operativo del panel de operador desde un soporte de datos ...2403
Transferir claves de licencia...............................................................................................2405
Administrar licencias ..........................................................................................................2405
Instalar y desinstalar opciones...........................................................................................2407
Carga de fuentes asiáticas en el panel de operador..........................................................2408

15.8
15.8.1
15.8.2
15.8.3
15.8.3.1
15.8.3.2
15.8.3.3
15.8.4
15.8.5

Driver de impresora............................................................................................................2409
Validez ...............................................................................................................................2409
Paneles de operador soportados .......................................................................................2409
Configuración del driver de impresora ...............................................................................2411
PostScript...........................................................................................................................2411
HTML .................................................................................................................................2411
PDF ....................................................................................................................................2412
Instalación ..........................................................................................................................2413
Transferencia de las opciones ...........................................................................................2414

Características........................................................................................................................................2415
16.1
16.1.1
16.1.2
16.1.3
16.1.4
16.1.5

Datos técnicos generales...................................................................................................2415
Caracteres utilizables.........................................................................................................2415
Impresoras recomendadas ................................................................................................2416
Imprimir a través de un servidor de impresión ...................................................................2417
Requerimiento de memoria de recetas ..............................................................................2418
Memoria necesaria para recetas en Basic Panels.............................................................2419

16.2
16.2.1
16.2.2
16.2.3
16.2.4
16.2.5
16.2.6
16.2.7
16.2.8

Características de rendimiento de los paneles ..................................................................2420
Basic Panel ........................................................................................................................2420
Basic Panel de 2.ª generación ...........................................................................................2424
Mobile Panel ......................................................................................................................2428
Comfort Panel ....................................................................................................................2434
WinCC Runtime Advanced ................................................................................................2440
WinCC Runtime Professional.............................................................................................2444
Ayuda orientativa de rendimiento en runtime (WinCC Runtime Professional)...................2449
Orientativa sobre la comunicación en runtime (WinCC Runtime Professional) .................2451

Opciones ................................................................................................................................................2455
17.1

18

Cambio a WinCC en el TIA Portal ..........................................................................................................2457
18.1

30

WinCC Engineering V16: Opciones ...................................................................................2455
Sinopsis..............................................................................................................................2457

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Índice

18.2
18.2.1
18.2.2
18.2.3
18.2.4
18.2.5
18.2.6
18.2.7
18.2.8

WinCC V7 ..........................................................................................................................2458
Acciones.............................................................................................................................2458
Objetos de usuario .............................................................................................................2460
Administración de usuarios ................................................................................................2462
Conexión directa ................................................................................................................2464
Dynamic Wizard .................................................................................................................2465
Cuadro de diálogo dinámico ..............................................................................................2467
Trabajo eficiente.................................................................................................................2469
Estructuras y variables de estructura.................................................................................2470

18.3
18.3.1
18.3.2
18.3.3
18.3.4
18.3.5

WinCC flexible....................................................................................................................2473
Librerías .............................................................................................................................2473
Imágenes y plantillas..........................................................................................................2475
Scripts en faceplates..........................................................................................................2477
Sincronización de recetas ..................................................................................................2478
Particularidades del cambio ...............................................................................................2479

Índice alfabético......................................................................................................................................2481

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

31

Índice

32

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1

Crear imágenes
1.1

Principios básicos

1.1.1

Principios básicos de las imágenes

Introducción
WinCC permite crear imágenes para controlar y supervisar máquinas e instalaciones. Para
crear imágenes se dispone de objetos predefinidos para reproducir la instalación, visualizar los
distintos procesos y preseleccionar valores de proceso.

Ejemplo de aplicación
Esta figura muestra una imagen creada con WinCC. Los operadores de la instalación manejan
y visualizan mediante esta imagen una mezcladora para elaborar distintos zumos de fruta.
Desde distintos depósitos se llenan y mezclan los distintos componentes del zumo de frutas en
una mezcladora. Se indica el nivel de llenado de los depósitos.

'HSµVLWRV

0H]FODGRUD

Composición de una imagen
Inserte en la imagen los objetos que necesita para representar el proceso. Configure los
objetos de acuerdo con las necesidades del proceso.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

33

Crear imágenes
1.1 Principios básicos
La imagen se puede componer de elementos estáticos y dinámicos.
● Los elementos estáticos, tales como los textos y los gráficos, no cambian en runtime. En el
ejemplo de la mezcladora, son estáticos p. ej. los rótulos de los depósitos (W, K, Z, A).
● Los elementos dinámicos van cambiando en función del proceso. Los valores de proceso
actuales se visualizan como se indica a continuación:
– Desde la memoria del controlador
– Desde la memoria del panel de operador mediante indicadores alfanuméricos, curvas y
barras.
A los objetos dinámicos pertenecen también los campos de entrada del panel de operador.
En el ejemplo de la mezcladora, los niveles de llenado de los depósitos son objetos
dinámicos.
El intercambio de valores de proceso y entradas entre el controlador y el panel de operador se
realiza a través de variables.

Características de las imágenes
La representación de la imagen depende del panel de operador para el que se configure. La
representación equivale al aspecto de la interfaz de usuario del panel de operador. Si el panel
de operador configurado dispone de teclas de función, éstas se visualizan en la imagen. Otras
propiedades, como la resolución, las fuentes y los colores disponibles, dependen también del
panel de operador configurado.

Teclas de función
Una tecla de función es una tecla del panel de operador a la que se le pueden asignar una o
varias funciones en WinCC. Las funciones se lanzan en cuanto el operador pulsa la tecla en
el panel de operador.
Una tecla de función se asigna de forma global o local:
las teclas de función con asignación global disparan siempre la misma acción,
independientemente de la imagen visualizada en ese momento.
las teclas de función con asignación local disparan acciones distintas en función de la imagen
visualizada en el panel de operador. La asignación vale sólo para la imagen en la que se ha
definido la tecla de función.

Navegación
Configure una navegación de imágenes para que el operador pueda acceder a una imagen en
runtime en el panel de operador.
● Utilizar el editor "Imágenes" para configurar en las imágenes los botones para acceder a
otras imágenes.
● Utilizar el editor "Imagen general" para configurar teclas de función con asignación global.

34

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos

Consulte también
Principios básicos de las listas de gráficos (Página 193)
Principios básicos de las imágenes (Página 35)
Volumen de funciones de las imágenes en función del dispositivo (Página 36)
Task Cards (Página 38)
Pasos a seguir (Página 41)
Principios básicos para trabajar con plantillas (Página 49)
Principios básicos para trabajar con niveles (Página 261)
Sinopsis de los objetos (Página 90)
Principios básicos de las listas de textos (Página 179)
Principios básicos de la dinamización de imágenes (Página 209)
Principios básicos de las librerías (Página 1974)
Principios básicos de los faceplates (Página 271)
Trabajo de impresión/diagnóstico de script (Página 361)
Principios básicos de la navegación de imágenes (Página 308)

1.1.2

Principios básicos de las imágenes

Introducción
WinCC permite crear imágenes para controlar y supervisar máquinas e instalaciones. Para
crear imágenes se dispone de objetos predefinidos para reproducir la instalación, visualizar los
distintos procesos y preseleccionar valores de proceso.

Ejemplo de aplicación
Esta figura muestra una imagen creada con WinCC. Los operadores de la instalación manejan
y visualizan mediante esta imagen una mezcladora para elaborar distintos zumos de fruta.
Desde distintos depósitos se llenan y mezclan los distintos componentes del zumo de frutas en
una mezcladora. Aquí se indica el nivel de llenado de los depósitos.

'HSµVLWRV

0H]FODGRUD

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

35

Crear imágenes
1.1 Principios básicos

Composición de una imagen
Inserte en la imagen los objetos que necesita para representar el proceso. Configure los
objetos de acuerdo con las necesidades del proceso.
La imagen puede estar compuesta de elementos estáticos y dinámicos:
● Los elementos estáticos, tales como los textos y los gráficos de la imagen superior, no
cambian en runtime. En el ejemplo de la mezcladora, son estáticos p. ej. los rótulos de los
depósitos (W, K, Z, A).
● Los elementos dinámicos van cambiando en función del proceso. Los valores de proceso
actuales se visualizan como se indica a continuación:
– Desde la memoria del controlador
– Desde la memoria del panel de operador en forma de indicadores alfanuméricos, curvas
y barras
A los objetos dinámicos pertenecen también los campos de entrada del panel de operador.
En el ejemplo de la mezcladora, los niveles de llenado de los depósitos son objetos
dinámicos.
El intercambio de valores de proceso y entradas entre el controlador y el panel de operador se
realiza a través de variables.

Navegación
Configure una navegación de imágenes para que el operador pueda acceder a una imagen en
runtime en el panel de operador.
● El editor "Menús y barras de herramientas" se utiliza para configurar la navegación entre las
imágenes.
● Utilizar el editor "Imágenes" para configurar en las imágenes los botones para acceder a
otras imágenes.

Consulte también
Principios básicos de las imágenes (Página 33)
Volumen de funciones de las imágenes en función del dispositivo (Página 36)

1.1.3

Volumen de funciones de las imágenes en función del dispositivo

Introducción
Las funciones de un panel de operador determinan la representación del dispositivo en WinCC
y la funcionalidad de los editores.
Las siguientes propiedades de imágenes dependen del panel de operador configurado:
● Formato
● Resolución

36

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos
● Cantidad de colores
● Fuentes
● Objetos utilizables

Formato
El formato de una imagen lo determina el panel de operador para el que se realiza la
configuración. Si el panel de operador tiene p. ej. teclas de función, éstas aparecen en el
diseño de la imagen.

Resolución
Puesto que los paneles de operador tienen tamaños de pantalla distintos, la resolución de la
imagen depende del panel de operador configurado. Sólo se puede cambiar la resolución
cuando configure el panel de operador "WinCC Runtime Advanced" o
"WinCC Runtime Professional".

Cantidad de colores
Es posible asignar colores a los objetos de una imagen. El número de colores posibles
depende de la cantidad y el tipo de colores que admita el panel de operador configurado.

Fuentes
En todos los objetos de imagen que contengan texto estático o dinámico puede adaptarse la
apariencia de los textos. Así se resaltan textos individuales en una imagen. Puede seleccionar
p. ej. el tipo, estilo y tamaño de la fuente, así como configurar efectos adicionales, p. ej. el
subrayado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

37

Crear imágenes
1.1 Principios básicos
Los ajustes para marcar textos, como el estilo y los efectos, afecta siempre a todo el texto de
un objeto de imagen. Así, por ejemplo, es posible visualizar un título completo en negrita, pero
no letras o palabras individuales de dicho título.

Objetos utilizables
Algunos objetos gráficos no pueden configurarse para todos los paneles de operador. Dichos
objetos no se muestran en la Task Card "Herramientas". Así, p. ej., no es posible configurar un
deslizador para el panel de operador KTP1000.

Consulte también
Principios básicos de las imágenes (Página 35)

1.1.4

Elementos y configuración básica

1.1.4.1

Task Cards

Introducción
El editor "Imágenes" ofrece las siguientes Task Cards:
● Herramientas: objetos de manejo y visualización
● Animaciones: plantillas para la configuración dinámica
● Diseño: recursos para adaptar la representación
● Librerías: administración de la librería del proyecto y las librerías globales
Nota
WinCC Basic
La Task Card "Animaciones" no está disponible en WinCC Basic.

Herramientas
La Task Card "Herramientas" contiene objetos de diferentes paletas:
● Objetos básicos
● Elementos
● Controles
● Controles propios (opcional)
● Gráficos

38

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos
Los objetos se añaden desde las paletas mediante Drag&Drop o haciendo doble clic en sus
imágenes. La selección de objetos depende del panel de operador que se esté configurando.
Los símbolos siguientes permiten cambiar el modo de visualización:
Símbolo

Significado
Representa los objetos en forma de lista.
Representa los objetos en forma de gráfico.

Animaciones
La Task Card "Animaciones" contiene las posibles dinamizaciones de un objeto de imagen en
las paletas. Desde las paletas "Movimientos", "Visualización" y "Enlace de variables",
mediante Drag&Drop o haciendo doble clic se añade la animación a un objeto de imagen.

Diseño
La Task Card "Diseño" contiene las paletas siguientes para visualizar objetos y elementos:
● Niveles: sirve para administrar los niveles de los objetos de imagen. Los niveles se
muestran en una vista de árbol e incluyen información sobre el nivel activo y la visibilidad
de todos los niveles.
● Retícula: indica si quiere alinear los objetos junto a una cuadrícula o junto a otros objetos
y ajusta el tamaño de cuadrícula para una cuadrícula.
● Objetos fuera del rango: se muestran los objetos con nombre, posición y tipo que están
fuera del área visible

Librerías
La Task Card "Librerías" muestra las librerías siguientes en paletas separadas:
● Librería del proyecto: la librería del proyecto se guarda junto con el proyecto.
● Librería global: la librería global se guarda en un archivo aparte de la ruta indicada en el
equipo de configuración.

Consulte también
Ampliar o reducir la imagen (Página 40)
Desplazar la imagen visualizada (Página 40)
Principios básicos de las imágenes (Página 33)
Pasos a seguir (Página 41)
Principios básicos para trabajar con plantillas (Página 49)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

39

Crear imágenes
1.1 Principios básicos

1.1.4.2

Ampliar o reducir la imagen

Introducción
Para ver una sección de una imagen de forma más detallada, es posible ampliar la vista de la
imagen en el área de trabajo. El zoom máximo es del 800 %.
Puede ampliar el zoom mediante la barra de herramientas del área de trabajo o mediante la
Task Card "Diseño > Zoom".
Hay diferentes métodos para ampliar la imagen, p. ej., mediante el factor de ampliación o
adaptando el área de trabajo a la altura de la imagen.

Requisitos
La imagen está abierta.

Procedimiento
Para ampliar una vista con el marco de selección, haga lo siguiente:
1. Haga clic en el botón

de la barra de herramientas.

2. Utilizando el ratón, trace un marco de selección en la imagen.
Tras soltar el botón del ratón, la sección se ampliará hasta ocupar todo el área de trabajo que
se encuentra dentro del marco de selección.
Alternativamente, utilice el deslizador de la esquina inferior derecha de la imagen.

Resultado
La vista seleccionada de la imagen se mostrará ampliada.

Consulte también
Task Cards (Página 38)

1.1.4.3

Desplazar la imagen visualizada

Introducción
Para representar en el área de trabajo únicamente una sección de la imagen total, utilice el
símbolo
del editor "Imágenes".

Requisitos
● Hay una imagen abierta.
● En el área de trabajo se visualiza sólo una sección de la imagen.

40

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos

Procedimiento
Para desplazar una vista:
1. Haga clic en el símbolo , situado en la esquina inferior derecha del área de trabajo, y pulse
el botón izquierdo del ratón.
Aparecerá una vista en miniatura de toda la imagen. Un marco de color naranja señala la
sección actual.
2. Mantenga pulsado el botón del ratón y desplace el marco a la sección deseada.
Nota
Al desplazar un objeto de imagen desde la sección visible hasta una sección oculta en la
vista actual, se desplazará también la imagen.

Consulte también
Task Cards (Página 38)

1.1.5

Trabajar con imágenes

1.1.5.1

Pasos a seguir

Pasos a seguir
Para crear imágenes es necesario seguir los pasos siguientes:
● Planifique la estructura de la representación del proceso: cantidad de imágenes y su orden.
Ejemplo: Los procesos parciales se representan en imágenes individuales y se agrupan en
una imagen principal.
● Planifique el tipo de navegación dentro de una imagen y entre las distintas imágenes.
● Adapte las plantillas y la imagen general.
Se definen objetos de forma centralizada y asignan p. ej., teclas de función.
● Cree las imágenes. Para trabajar de forma más eficiente, aproveche las posibilidades que
se indican a continuación:
– Trabajar con librerías
– Trabajar con niveles
– Trabajar con faceplates

Consulte también
Pasos a seguir (Página 42)
Crear una imagen nueva (Página 43)
Administrar imágenes (Página 44)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

41

Crear imágenes
1.1 Principios básicos
Definir la imagen inicial del proyecto (Página 47)
Principios básicos de las imágenes (Página 33)
Principios básicos para trabajar con plantillas (Página 49)
Task Cards (Página 38)

1.1.5.2

Pasos a seguir

Pasos a seguir
Para crear imágenes es necesario seguir los pasos siguientes:
● Planifique la estructura de la representación del proceso: cantidad de imágenes y su orden.
Ejemplo: Los procesos parciales se representan en imágenes individuales y se agrupan en
una imagen principal.
● Planifique el tipo de navegación dentro de una imagen y entre las distintas imágenes.
Cree menús y barras de herramientas para navegar entre las imágenes.
● Cree las imágenes. Para conseguir una configuración más eficiente, aproveche las
posibilidades que se indican a continuación:
– Trabajar con librerías
– Trabajar con faceplates
– Trabajar con niveles
– Trabajar con diseños

Consulte también
Pasos a seguir (Página 41)
Principios básicos para trabajar con diseños (Página 66)

1.1.5.3

Crear una imagen nueva

Introducción
Para representar procesos en su instalación, puede crear imágenes.

Requisitos
● Se ha creado un proyecto.
● La ventana de inspección está abierta.

42

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos

Procedimiento
1. Haga doble clic en "Imágenes > Agregar imagen" en el árbol del proyecto.
La imagen se crea en el proyecto y se muestra en el área de trabajo. Las propiedades de
la imagen se visualizarán en la ventana de inspección.
2. Introduzca un nombre que describa la imagen.
3. Configure las propiedades de la imagen en la ventana de inspección:
– Determine si la imagen debe basarse en la plantilla y en cuál.
– Defina el "Color de fondo" y el "Número de imagen".
– Introduzca un texto explicativo en "Tooltip".
– En "Niveles", defina qué niveles deben mostrarse en el sistema de ingeniería.
– Dinamice la visualización de la imagen en "Animaciones".
– Defina bajo "Eventos" qué funciones deben ejecutarse al abrir y cerrar una imagen o con
otros eventos en runtime.
Nota
No todos los paneles de operador soportan la animación "Visibilidad".

Resultado
La imagen ha sido creada en el proyecto. En pasos de trabajo posteriores puede insertar
objetos y elementos de manejo de la Task Card "Herramientas" y asignar teclas de función.

Consulte también
Pasos a seguir (Página 41)

1.1.5.4

Crear una imagen nueva

Introducción
Para representar procesos en su instalación, puede crear imágenes.

Requisitos
● Se ha creado un proyecto.
● La ventana de inspección está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

43

Crear imágenes
1.1 Principios básicos

Procedimiento
Para crear una imagen nueva:
1. Haga doble clic en "Imágenes > Agregar imagen" en el árbol del proyecto.
La imagen se crea en el proyecto y se muestra en el área de trabajo. Las propiedades de
la imagen se visualizarán en la ventana de inspección.
2. Introduzca un nombre que describa la imagen, p. ej. "Esquema general".
No use los caracteres especiales ?, . , ", /, \, *, <, >
Este nombre es independiente del idioma.
3. En caso necesario, introduzca un nombre de visualización descriptivo. Este nombre
depende del idioma y puede traducirse a los idiomas deseados. Los nombres de
visualización pueden mostrarse en un campo de texto, p. ej. usando la función de sistema
SetPropertyByProperty.
4. Configure la imagen en la ventana de inspección:
– Defina el color de fondo y el color de la cuadrícula en "General".
– Defina un tooltip explicativo.
– Indique el tamaño de la imagen en "Representación".
– Indique en "Apariencia" el modelo y color de un patrón de relleno.
– En "Niveles", defina qué niveles deben mostrarse en el sistema de ingeniería.
– En "Misceláneo" defina el orden de tabulación para marcar los objetos de imagen y para
la selección de los objetos que marcar.
– En "Ocultar/mostrar" especifique si debe aplicarse un tamaño concreto a la visualización
de los niveles y/u objetos.
– Dinamice los objetos indicadores y de manejo en "Animaciones".
– Defina bajo "Eventos" qué funciones deben ejecutarse al abrir y cerrar una imagen o con
otros eventos en runtime.

Resultado
La imagen ha sido creada en el proyecto. En pasos de trabajo posteriores podrá insertar
objetos y elementos de manejo de la Task Card "Herramientas".

Consulte también
Pasos a seguir (Página 41)

1.1.5.5

Administrar imágenes

Introducción
En el árbol del proyecto se pueden desplazar imágenes a otros grupos del proyecto o bien
copiarlas, cambiar su nombre o borrarlas.

44

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos

Desplazar una imagen a un grupo
1. Seleccione la carpeta "Imágenes" en el árbol del proyecto.
2. En el menú contextual, elija el comando "Agregar grupo".
Se insertará una carpeta con el nombre "Grupo_x".
3. Seleccione la imagen en el árbol del proyecto.
4. Arrastre la imagen con la función de arrastrar y soltar al grupo deseado.
La imagen se desplaza a dicho grupo.

Copiar una imagen
1. Seleccione la imagen en el árbol del proyecto.
2. Elija el comando "Copiar" del menú contextual para copiar la imagen en el portapapeles.
3. Marque en el árbol del proyecto la posición en la que desea insertar la imagen.
4. En el menú contextual seleccione el comando "Pegar" para insertar la imagen.
Se insertará una copia de la imagen. El nombre del original se complementará en la copia
con un número correlativo.
También puede mantener pulsada la tecla <Ctrl> y arrastrar la imagen hasta la posición
deseada.
Nota
Si se copia en todo el panel de operador o en todo el proyecto una imagen con una plantilla
enlazada, también se copiará la plantilla. Si ya existe una plantilla adecuada, no se utilizará.
Esto sucede especialmente cuando se copian imágenes por Drag&Drop.

Cambiar el nombre de la imagen
1. Seleccione la imagen en el árbol del proyecto.
2. En el menú contextual, seleccione el comando "Cambiar nombre".
3. Introduzca un nuevo nombre.
4. Pulse la tecla <Intro>.
También puede utilizar la tecla <F2> para cambiar el nombre de la imagen.

Borrar la imagen
1. Seleccione la imagen en el árbol del proyecto.
2. En el menú contextual, elija el comando "Borrar".
Se borra la imagen del proyecto con todos los objetos que contiene.

Consulte también
Pasos a seguir (Página 41)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

45

Crear imágenes
1.1 Principios básicos

1.1.5.6

Definir la imagen inicial del proyecto

Introducción
La imagen inicial es la primera imagen que aparece al iniciar el proyecto en runtime. Para cada
panel de operador se puede definir una imagen inicial propia. El operador accede a las
restantes imágenes desde la imagen inicial.

Requisitos
La imagen a definir como imagen inicial está creada en el proyecto.

Procedimiento
1. Haga doble clic en "Configuración de runtime > General" en el árbol del proyecto.

2. Elija la "Imagen inicial" deseada.
Otra posibilidad es seleccionar una imagen en el árbol del proyecto y seleccionar en el menú
contextual "Utilizar como imagen inicial".

46

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Crear imágenes
1.1 Principios básicos

Resultado
Cuando se inicie runtime, la imagen inicial se visualizará en el panel de operador.

Consulte también
Pasos a seguir (Página 41)

1.1.5.7

Definir la imagen inicial del proyecto

Introducción
La imagen inicial es la primera imagen que aparece al iniciar el proyecto en runtime. Para cada
panel de operador se puede definir una imagen inicial propia. El operador accede a las
restantes imágenes desde la imagen inicial.

Requisitos
La imagen a definir como imagen inicial está creada en el proyecto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

47

Crear imágenes
1.1 Principios básicos

Procedimiento
1. Haga doble clic en "Configuración de runtime > General" en el árbol del proyecto.

2. Elija la "Imagen inicial" deseada.
Otra posibilidad es seleccionar una imagen en el árbol del proyecto y seleccionar en el menú
contextual "Utilizar como imagen inicial".

Resultado
Cuando se inicie runtime, la imagen inicial se visualizará en el panel de operador.

1.1.5.8

Modificar la resolución de pantalla
Puede modificar la resolución de la pantalla en la configuración de runtime del panel de
operador.
La resolución de la pantalla puede configurarse en los siguientes paneles de operador:
● RT Advanced

48

Visualización de procesos
Manual de sistema, 11/2019, Imp