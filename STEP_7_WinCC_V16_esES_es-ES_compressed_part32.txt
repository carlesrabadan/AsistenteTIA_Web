se asigna a la consigna la
última consigna válida. Es decir, se mantiene la última consigna válida.
– Consigna = consigna de seguridad: al producirse el evento se asigna a la consigna la
consigna de seguridad. De esta forma se puede realizar un funcionamiento de
emergencia seguro.
6. Especifique en el área "Rampa de consigna" el tiempo de rampa que se debe mantener al
modificarse la consigna, para evitar una sobreoscilación.
7. Especifique en el área "Límite de consigna" un límite superior e inferior para la consigna.
8. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Seleccionar el origen de la señal para los valores reales A, B y C
Para especificar los orígenes de la señal para los valores reales A, B y C proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Error de regulación".
3. Seleccione en el área "Variable manipulada" el origen de la señal correspondiente para
cada valor real. Puede seleccionar si no utiliza ninguna señal ("cero") como origen o si
utiliza una de las entradas analógicas acondicionadas.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Registrar factores para los valores reales B y C, así como para el Offset
Para especificar los orígenes de la señal para los valores reales A, B y C proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Error de regulación".
3. Especifique en el área "Sumar" el factor de ponderación requerido para los valores actuales
B y C.
4. Especifique el "Offset" necesario que se debe adicionar a los valores reales.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

1120

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Realizar un regulador de relación o mezcla
Seleccionar el tipo de regulador
Para materializar un regulador de relación o de mezcla, proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°]".
3. En el área "Tipo de regulador" seleccione la opción "Regulador de relación o mezcla".
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Acondicionamiento de la consigna
Para ajustar cómo debe acondicionarse la consigna, proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Error de regulación".
3. Seleccione en el área "Origen de la consigna" el origen de referencia de la consigna.
4. Especifique un valor en el área "Consigna de seguridad", el cual será tomado como
consigna de seguridad en caso de fallo de la CPU y durante el arranque.
5. Especifique el comportamiento del módulo de regulación válido como "Reacción a fallo de
la CPU" y para el "Comportamiento en arranque". Las posibilidades de selección son:
– Consigna = última consigna válida: al producirse el evento se asigna a la consigna la
última consigna válida. Es decir, se mantiene la última consigna válida.
– Consigna = consigna de seguridad: al producirse el evento se asigna a la consigna la
consigna de seguridad. De esta forma se puede realizar un funcionamiento de
emergencia seguro.
6. Especifique en el área "Rampa de consigna" el tiempo de rampa que se debe mantener al
modificarse la consigna, para evitar una sobreoscilación.
7. Especifique en el área "Límite de consigna" un límite superior e inferior para la consigna.
8. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Seleccionar origen de la señal para los valores reales A y D
Para especificar los orígenes de la señal para los valores reales A y D proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Error de regulación".
3. Seleccione en el área "Variable manipulada" el origen de la señal correspondiente para
cada valor real. Puede especificar no utilizar ninguna señal ("cero") como origen o utilizar
una de las entradas analógicas acondicionadas, para el valor real D puede seleccionar
también el valor manipulado de uno de los reguladores.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1121

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Registrar multiplicador
Para especificar los orígenes de la señal para los valores reales A y D proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Error de regulación".
3. Seleccione en el área "Multiplicar" el Offset deseado.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".
En el regulador de relación, el valor real A se utiliza como magnitud de regulación y el valor real
D como magnitud de relación. La entrada de consigna sirve de factor de relación. Ésta se
acondiciona para obtener una consigna efectiva mediante multiplicación por el valor real D y
adición de un offset ajustable. Si se desactiva el valor real D, solamente se suma el Offset a la
consigna.

Ajustar la generación de alarmas
Procedimiento
Para ajustar la generación de alarma, proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Error de regulación".
3. En el área "Generar alarma" seleccione las opciones necesarias:
– En el área "Avisador de valor límite de" seleccione la señal a la que se debe aplicar la
alarma.
– En "Alarma límite superior" especifique el valor a partir del cual se disparará la alarma
al alcanzarse el límite superior.
– En "Advertencia límite superior" especifique el valor a partir del cual se disparará una
advertencia cuando se produzca una aproximación al límite superior.
– En "Advertencia límite inferior" especifique el valor a partir del cual se disparará una
advertencia cuando se produzca una aproximación al límite inferior.
– En "Alarma límite inferior" especifique el valor a partir del cual se disparará la alarma al
alcanzarse el límite inferior.
– Para evitar que centelleen los indicadores de vigilancia se puede configurar una
histéresis en "Histéresis".
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

1122

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Algoritmo de regulación
Realizar una regulación P
Procedimiento
Para realizar una regulación P proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Tipo" seleccione la opción "Regulador PID".
4. En el área "General" seleccione la opción "P", en "Modo de operación".
Todas las opciones parametrizables para una regulación P se activan, el resto de opciones
se desactivan.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Realizar una regulación PI
Procedimiento
Para realizar una regulación PI proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Tipo" seleccione la opción "Regulador PID".
4. En el área "General" seleccione la opción "PI", en "Modo de operación".
Todas las opciones parametrizables para una regulación PI se activan, el resto de opciones
se desactivan.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Realizar una regulación I
Procedimiento
Para realizar una regulación I proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Tipo" seleccione la opción "Regulador PID".
4. En el área "General" seleccione la opción "I", en "Modo de operación".
Todas las opciones parametrizables para una regulación I se activan, el resto de opciones
se desactivan.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1123

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Realizar una regulación PID
Procedimiento
Para realizar una regulación PID proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Tipo" seleccione la opción "Regulador PID".
4. En el área "General" seleccione la opción "PID", en "Modo de operación".
Todas las opciones parametrizables para una regulación PID se activan, el resto de
opciones se desactivan.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Realizar una regulación PD
Procedimiento
Para realizar una regulación PD proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Tipo" seleccione la opción "Regulador PID".
4. En el área "General" seleccione la opción "PD", en "Modo de operación".
Todas las opciones parametrizables para una regulación PD se activan, el resto de
opciones se desactivan.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Realizar un regulador de temperatura con lógica difusa
Procedimiento
Para llevar a cabo una regulación de temperatura por lógica difusa, proceda del modo
siguiente:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Tipo" seleccione la opción "Módulo de regulación de temperatura por lógica
difusa".
Todas las opciones parametrizables para módulo de regulación de temperatura por lógica
difusa se activan, el resto de opciones se desactivan.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

1124

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Suprimir el nivel de ruido del error de regulación
Procedimiento
Para suprimir el nivel de ruido del error de regulación proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. Especifique en el área "General" el ajuste "Ancho de zona muerta".
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Control anticipativo
Procedimiento
Para conectar una variable perturbadora para control anticipativo proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "General" seleccione de la lista "Origen de la perturbación" el origen de la
variable perturbadora.
Seleccione la entrada "Cero" para no conectar ninguna variable perturbadora para control
anticipativo.
4. En "Factor de perturbación" especifique un valor de ponderación para la variable
perturbadora.
Un valor < 0 debilita la perturbación, un valor > 0 amplifica la perturbación. La perturbación
permanece invariable si se especifica el valor 1.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Configurar la acción P por rama de realimentación
Procedimiento
Para realizar un regulador de valor fijo o en cascada proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Acción P" seleccione la opción "Por rama de realimentación".
Si la opción está activada, la acción P queda configurada por rama de realimentación.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1125

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Debilitar la acción D cuando se producen modificaciones en la consigna
Seleccionar el tipo de regulador
Para realizar un regulador de valor fijo o en cascada proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. En el área "Acción D" seleccione con opción "Acción D" el origen de la acción D.
4. En el área "Factor derivativo" especifique el factor para la acción D.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Invertir el efecto del regulador
Principio
La inversión del regulador, cambiando la asignación de "error de regulación ascendente =
magnitud manipulada ascendente" a "error de regulación ascendente = magnitud manipulada
descendente", se realiza ajustando una ganancia proporcional (GAIN).

Procedimiento
Para invertir el efecto del regulador proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Algoritmo de regulación".
3. Especifique en el área "General" una ganancia proporcional con signo inverso.
Si se encuentra especificada una ganancia proporcional positiva y se desea invertir el
efecto del regulador, especifique una ganancia proporcional negativa.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Salida del regulador
Realizar un regulador continuo
Para realizar un regulador continuo se requiere un módulo analógico.

Procedimiento
1. Aplicar la variable manipulada externa (Página 1128)
2. Ajustar la variable manipulada de seguridad (Página 1129)
3. Activar el modo de seguimiento (Página 1128)
4. Limitar la variable manipulada (Página 1130)

1126

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
5. Controlar dos actuadores - rango partido (Página 1130)
6. Seleccionar la señal de salida y el tipo de señal (Página 1131)

Regulador paso a paso sin realimentación de posición
Para realizar un regulador paso a paso sin realimentación de posición se requiere un módulo
digital.

Procedimiento
1. Seleccionar la salida del regulador Regulador paso a paso sin realimentación de posición
2. Aplicar la variable manipulada externa (Página 1128)
3. Ajustar la variable manipulada de seguridad (Página 1129)
4. Formador de impulsos de la regulación paso a paso (Página 1130)

Realizar un regulador paso a paso con realimentación de posición
Para realizar un regulador paso a paso con realimentación de posición se requiere un módulo
digital.

Procedimiento
1. Seleccionar la salida del regulador Regulador paso a paso con realimentación de posición
2. Aplicar la variable manipulada externa (Página 1128)
3. Activar el modo de seguimiento (Página 1128)
4. Ajustar la variable manipulada de seguridad (Página 1129)
5. Limitar la variable manipulada (Página 1130)
6. Ajustar la realimentación de posición (Página 1129)
7. Formador de impulsos de la regulación paso a paso (Página 1130)

Realizar un regulador de impulsos
Para realizar un regulador de impulsos se requiere un módulo digital.

Procedimiento
1. Seleccionar la salida del regulador Regulador de impulsos
2. Aplicar la variable manipulada externa (Página 1128)
3. Activar el modo de seguimiento (Página 1128)
4. Ajustar la variable manipulada de seguridad (Página 1129)
5. Limitar la variable manipulada (Página 1130)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1127

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
6. Acondicionar la señal analógica para la conversión en señal digital
7. Convertir una señal analógica en una señal digital (Página 1131)

Parametrizar las funciones de la salida del regulador
Aplicar la variable manipulada externa
Procedimiento
Para aplicar la variable manipulada externa proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Salida del regulador".
3. Seleccione en el área "Magnitud manipulada externa" la opción con la debe se debe activar
la magnitud manipulada externa. Para ello puede seleccionar las siguientes opciones:
– Activación del bloque de función.
– Activación por el bloque de función o por una de las entradas digitales.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Activar el modo de seguimiento
Procedimiento
Para activar el modo de seguimiento proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Salida del regulador".
3. Seleccione en el área "Modo de seguimiento" la opción que debe activar la magnitud
manipulada externa. Para ello puede seleccionar las siguientes opciones:
– Activación por el bloque de función.
– Activación por el bloque de función o una de las entradas digitales.
4. Seleccione en el área "Modo de seguimiento" el origen de la señal a aplicar para el
seguimiento. Para ello puede seleccionar las siguientes opciones:
– Cero, con lo cual no se emplea ningún origen.
– Una de las entradas analógicas.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

1128

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Ajustar la realimentación de posición
Procedimiento
Para ajustar la realimentación de posición proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Salida digital > Salida [n°]".
3. Seleccione en el área "Entrada de realimentación de posición" la opción "Origen" para
especificar la señal de realimentación de posición.
– Cero: no se produce ninguna realimentación de posición.
– Una de las entradas analógicas acondicionadas.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Ajustar la variable manipulada de seguridad
Procedimiento
Para ajustar la variable manipulada de seguridad proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Salida del regulador".
3. Especifique en el área "Variable manipulada de seguridad" el valor a utilizar como variable
manipulada de seguridad.
4. Seleccione en el área "Activación" la opción que debe activar la magnitud manipulada
externa. Para ello puede seleccionar las siguientes opciones:
– Activación del bloque de función.
– Activación del bloque de función o de una de las entradas digitales.
5. Seleccione en "Reacción al arrancar el módulo" la opción a ejecutar al arrancar el módulo.
Para ello puede seleccionar las siguientes opciones:
– Lazo cerrado: el módulo entra inmediatamente en este modo al arrancar.
– Variable manipulada de seguridad: primero se regula a la variable manipulada de
seguridad.
6. Seleccione en el área "Reacción si falla el transductor de medida del valor real A" la opción
a ejecutar si falla el transductor de medida del valor real A.
7. Seleccione en el área "Reacción si falla el transductor de medida de una entrada" la opción
a ejecutar si falla el transductor de medida de una entrada.
8. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1129

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Limitar la variable manipulada
Procedimiento
Para limitar la variable manipulada proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Salida del regulador".
3. Especifique en el área "Límite de señal de salida" los siguientes valores:
– Valor superior: representa el límite superior para la señal de salida.
– Valor inferior: representa el límite interior para la señal de salida.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Controlar dos actuadores - rango partido
Procedimiento
Para controlar dos actuadores proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Regulador > Canal [n°] > Salida del regulador".
3. Seleccione en el área "Rango partido" la opción "Activar" para controlar dos actuadores.
4. Especifique los siguientes valores, para las señales de entrada y salida A y también para
las entradas de entrada y salida B.
– Señal de entrada inferior.
– Señal de entrada superior.
– Señal de salida inferior.
– Señal de salida superior.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Formador de impulsos de la regulación paso a paso
Procedimiento
Para parametrizar el formador de impulsos proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Salida digital > Salida [n°]".

1130

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
3. Especifique en el área "Formador de impulsos" los siguientes parámetros:
– Tiempo de posicionamiento del motor.
– Duración mínima de impulso.
– Duración mínima de pausa.
4. Seleccione la opción adecuada para los valores superior e inferior, a partir de la cual se
aplicará el valor:
– del bloque de función.
– Del bloque de función o de una de las entradas digitales.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Convertir una señal analógica en una señal digital
Procedimiento
Para convertir una señal analógica en una señal digital proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Salida digital > Canal [n°]".
3. Especifique en el área "Formador de impulsos" los siguientes parámetros:
– Duración mínima de impulso.
– Duración mínima de pausa.
4. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Seleccionar la señal de salida y el tipo de señal
Procedimiento
Para seleccionar la señal de salida y el tipo de señal proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuración de parámetros" del módulo.
2. En la vista de configuración seleccione "Salida analógica > Salida [n°]".
3. Seleccione en la opción "Origen" la señal a utilizar como señal de salida. Se proporcionan
las siguientes opciones:
– Cero: ningún origen para la señal de salida.
– Una de las entradas analógicas.
– Una de las variables manipuladas para el regulador A o B.
4. Seleccione en la opción "Tipo de señal" el tipo de señal en que se emitirá la señal de salida.
5. Guarde los parámetros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1131

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

3.5.7.3

Programación del FM 455

3.5.7.4

Puesta en servicio del FM 455

Crear y configurar DBs de instancia
Procedimiento
Para satisfacer los requisitos para la puesta en marcha, proceda de la manera siguiente:
1. Cree un programa de usuario que efectúe cíclicamente una llamada a la instrucción
PID_FM_455 en un OB de alarma cíclica.
2. En el programa del usuario, ponga READ_VAR cíclicamente a TRUE.
3. Genere para cada canal del regulador un DB de instancia individual de la
instrucciónPID_FM_455.
4. Para cada DB de instancia, introduzca la dirección de módulo en el parámetro
PID_FM_455.MOD_ADDR.
Utilice como dirección de módulo del FM 455 la dirección inicial especificada al configurar
el hardware.
5. Introduzca en el parámetro PID_FM_455.CHANNEL el número del canal de regulación (1 ...
16).
6. Si utiliza la instrucción PID_PAR_455, introduzca en el parámetro
PID_PAR_455.CHANNEL el número del canal del regulador.
7. Compruebe que esté activado el "Tipo de sensor Entrada analógica" del canal en cuestión.
Si no se procesa la entrada analógica, todos los parámetros PID se ajustan a cero, y no se
calcula ninguna variable manipulada.
Nota
DBs multiinstancia
Si utiliza DBs multiinstancia en su proyecto, los FM se deben poner en servicio a través de
una tabla de observación.

Puesta en servicio del regulador
Introducción
Los parámetros PID se pueden optimizar del modo siguiente:
● Regulador PID/PI (regulador paso a paso, regulador continuo, regulador de impulsos):
Manual
● Regulador de temperatura por lógica difusa: Ciclo continuo
● Regulador paso a paso: Automáticamente con la instrucción TUN_ES

1132

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
● Regulador continuo: Automáticamente con la instrucción TUN_EC
● Regulador de impulsos: Automáticamente con la instrucción TUN_EC

Procedimiento
Para optimizar un regulador, proceda del siguiente modo:
1. Coloque la CPU en el estado RUN.
2. Si utiliza un regulador paso a paso, mida el tiempo de posicionamiento del motor.
3. Optimice los parámetros PID con alguna de las posibilidades citadas anteriormente.
4. Observe el lazo de regulación con el registrador de curvas.

Consulte también
Medir el tiempo de posicionamiento del motor (Página 1140)

Optimizar los parámetros PID manualmente
Requisitos
En la parametrización del algoritmo de regulación ha elegido el "Regulador PID".

Procedimiento
Para ajustar manualmente un regulador PI/PID, proceda del modo siguiente:
1. Seleccione el DB de instancia del canal que desee optimizar.
2. Haga clic en el símbolo "Start".
Si aún no existe ninguna conexión online, esta se crea. Se graban los valores actuales de
consigna, valor real y variable manipulada.
3. Introduzca los valores correspondientes para la acción P, la acción I, la acción D y el retardo.
4. En el grupo "Optimización", haga clic en el símbolo

"Enviar parámetros PID al FM".

5. En el grupo "Valores actuales", active la casilla de verificación "Especificar consigna".
6. Introduzca una nueva consigna.
7. Desactive en caso necesario la casilla de verificación "Modo manual" y, en el grupo
"Valores actuales", haga clic en el símbolo .
El regulador trabaja con los nuevos parámetros y regula según la nueva consigna.
8. Compruebe la calidad de los parámetros PID mediante los recorridos de la curva.
9. Repita los pasos del 3 hasta el 8, hasta que esté satisfecho/a con el resultado de la
regulación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1133

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Identificación de recorridos por lógica difusa
Requisitos del proceso para un regulador de temperatura por lógica difusa
Requisitos
Para conseguir una regulación óptima con la ayuda del regulador de temperatura por lógica
difusa, el proceso debe satisfacer los requisitos siguientes:
● En caso de calefacciones de baños, el líquido calefactor debe estar bien mezclado.
● En caso de regulaciones tipo baño en baño, ambos líquidos deben estar bien agitados.
Simultáneamente, se debe proporcionar una buena transferencia de calor entre todos los
medios caloportadores. Si se emplean materiales que son malos caloportadores, para
conseguir un buen transporte del calor se deben utilizar superficies de transferencia de gran
tamaño.
● En caso de regulación de la temperatura del aire ambiental, se debe proporcionar una
buena mezcla (p. ej., mediante ventiladores).
● La ganancia del sistema regulado no debe superar un factor 3.
● El tiempo de retardo debe equivaler como máximo al 3% del tiempo de compensación.
● Durante el periodo de muestreo del regulador, y con la salida de la variable manipulada en
el valor máximo, la temperatura que se desea regular debe variar como máximo un 1‰ de
la temperatura máxima preajustada.

Clasificación de los sistemas regulados
Un sistema regulado, o bien un proceso que se desea regular, se caracteriza por parámetros
como, p. ej., la potencia de calefacción, la masa que se debe calentar o la capacidad térmica
del medio que se desea calentar. En lo que se refiere al regulador por lógica difusa, se efectúa
una distinción entre sistemas de temperatura regulada "críticos" y "no críticos" del modo
siguiente: La regulación es tanto más crítica
● cuanto mayor es la potencia de calefacción,
● cuanto mayor es la capacidad térmica de la calefacción,
● cuanto menor es la capacidad térmica del medio que se desea calentar,
● cuanto mayor es la resistencia a la transmisión de calor,
● cuanto menor es la superficie de transferencia de calor.
Tras el seguimiento automático de un salto en la variable manipulada por parte del sistema
regulado, éste reacciona con una respuesta a un escalón. La clasificación de los sistemas
regulados también se puede llevar a cabo en función de esta respuesta a un escalón: La
regulación es tanto más crítica cuanto mayor es el cociente tu / tg y cuanto mayor es la ganancia
del sistema regulado. Si tu / tg < 1/10, el sistema regulado no es crítico.

Consulte también
Valores característicos del sistema regulado (Página 645)

1134

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Desarrollo de la identificación del sistema por lógica difusa
Desarrollo de la optimización de parámetros con un regulador de temperatura por lógica difusa
La optimización de parámetros se basa en un regulador por lógica difusa autooptimizante.
La identificación del sistema regulado comienza con una fase de observación, durante la cual
la potencia de calefacción emitida es nula. Esta fase de observación dura lo siguiente:
● Fase de observación de un regulador continuo: aprox. 1 minuto
● Fase de observación de un regulador paso a paso: aprox. 1 minuto + 1/2 x tiempo de
desplazamiento del actuador
Este tiempo se emplea para poder detectar tendencias de temperatura en el medio calefactor.
A continuación se emite el 100% de la potencia máxima de calefacción; esto se aprecia en el
parámetro de salida LMN del DB de instancia de la instrucción PID_FM.
El área del primer 4% de incremento de la temperatura del rango de consigna se utiliza para
la identificación, ya que tanto en el 1% como en el 4% del incremento de temperatura se
obtiene información sobre el comportamiento del proceso a partir del tiempo transcurrido.
La identificación concluye cuando la potencia de calefacción pasa a ser inferior al 100%. Este
comportamiento se puede utilizar, p. ej., para desconectar la identificación a través del
programa de usuario. Tras la fase de identificación, el regulador sigue funcionando con los
parámetros obtenidos.
Si la divergencia provocada por el salto de consigna no se compensa y la potencia de
calefacción permanece a cero de manera continua, significa que la identificación ha resultado
fallida, es decir, el regulador no puede regular el sistema regulado al que está conectado.

Comportamiento del regulador para distintos sistemas regulados
Si el sistema regulado es "no crítico", no hay problemas en la identificación ni en la regulación.
La identificación de un sistema regulado "demasiado crítico" queda cancelada. Si un sistema
regulado se identifica como "crítico", su regulación se efectúa con mucha "precaución", es
decir, despacio.

Efectuar la identificación de sistema por lógica difusa.
Requisitos
En la parametrización del algoritmo de regulación ha elegido el "Regulador por lógica difusa".
Si es posible, asegúrese de que antes de la identificación el sistema regulado se haya
estabilizado (ningún proceso activo de calefacción o refrigeración) o varíe con lentitud y de
forma monótona. Se puede utilizar como criterio al respecto que el comportamiento de la
variación de temperatura durante un minuto se pueda aproximar por una recta. En procesos
rápidos, este requisito resulta especialmente actual.
Dado que el valor emitido para la variable manipulada es nulo durante aprox. un minuto al
principio de la identificación del regulador, la temperatura que se desea regular debe ser
cercana a la temperatura ambiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1135

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Iniciar la identificación del sistema por lógica difusa
Para optimizar un regulador por lógica difusa, proceda del modo siguiente:
1. Seleccione el DB de instancia del canal que desee optimizar.
2. Haga clic en el símbolo "Start".
Si aún no existe ninguna conexión online, esta se crea. Se graban los valores actuales de
consigna, valor real y variable manipulada.
3. En el grupo "Optimización" introduzca una nueva consigna (SP_OP).
La nueva consigna debe cumplir las condiciones siguientes:
– Salto de consigna > 5%
– Nueva consigna > valor real + límite superior de la consigna x 0,12
4. En el grupo "Optimización", haga clic en el símbolo
difusa".

"Identificación del sistema por lógica

Resultado
La nueva consigna (SP_OP), SP_OP_ON = TRUE y FUZID_ON = TRUE se envían al FM. La
identificación del sistema por lógica difusa comienza. El parámetro IDSTATUS de la
instrucción CH_DIAG proporciona información sobre el estado de la identificación. En el
cuadro de visualización de estado puede ver si hay una identificación del sistema por lógica
difusa en estado activo o en ejecución.

Desactivar la identificación del sistema por lógica difusa
Mientras el bit FUZID_ON = TRUE, cada vez que se produzca un salto de consigna
suficientemente grande se iniciará la identificación siguiente.
Para desconectar el modo de optimización, proceda del modo siguiente:
1. Inserte FUZID_ON en una tabla de observación.
2. Defina FUZID_ON = FALSE.
Nota
La desconexión del modo de optimización FUZID_ON = FALSE antes de terminar la
identificación no provoca que esta se detenga. Una vez iniciada la identificación, esta sigue
adelante pase lo que pase, excepto si se produce un salto de consigna negativo.

Repetir la identificación del sistema por lógica difusa
Cada vez que se produce un salto de consigna ≥12% se efectúa una nueva identificación, a no
ser que esta se desconecte de nuevo con FUZID_ON = FALSE.
También existe la posibilidad de iniciar de nuevo la identificación disminuyendo y, a
continuación, aumentando de nuevo la consigna en un valor >12%.

1136

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Cancelar la identificación del sistema por lógica difusa
La identificación se puede cancelar en los casos siguientes:
● Por parte del regulador, si se identifica un sistema regulado "crítico". Tras la cancelación,
el regulador se encuentra en estado de error. Este estado se manifiesta en que el regulador
desactiva la variable manipulada de forma permanente. Este estado no varía aunque se
desconecte la optimización. El inicio de una nueva identificación anula el estado de error.
Se puede obtener información sobre el estado de la identificación a través del parámetro
IDSTATUS del FB CH_DIAG. Más detalles al respecto al final de este capítulo, en la
sección "Información sobre el estado del regulador".
● Por parte del operador, generando un salto de consigna negativo, siempre y cuando la
consigna rebase por defecto la condición 2 (véase más arriba, "¿Cómo iniciar la
identificación?").
Para cancelar la optimización, proceda del modo siguiente:
1. Introduzca una nueva consigna que sea inferior al valor real actual y que cumpla las mismas
condiciones que al principio de la identificación del sistema por lógica difusa.
2. En el grupo "Optimización", haga clic en el símbolo
difusa".

"Identificación del sistema por lógica

Cargar los parámetros optimizados en el dispositivo
Introducción
Para impedir que los parámetros del FM se sobrescriban con los datos del sistema en el
siguiente arranque de la CPU, se puede proceder del modo siguiente:
● Tras cada arranque del FM , cargue en este con LOAD_PAR=TRUE los parámetros PID
optimizados del DB de instancia del PID_FM.
● Cargue los parámetros PID optimizados en el SDB.
Nota
Los juegos de parámetros PI, PID y SAVE no se pueden guardar en el SDB.

Procedimiento
Para cargar los parámetros en el SDB, proceda del siguiente modo:
1. Haga clic en el símbolo
"Transfiera datos online al proyecto offline".
Los parámetros PID se guardan en el ajuste de parámetros del FM.
2. Pare la CPU.
3. Haga clic en el símbolo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

"Cargar en dispositivo".

1137

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Trabajar con el registrador de curvas
Observar
1. En la vista de dispositivos, bajo el módulo, haga doble clic en "Puesta en servicio".
2. Navegue en la vista de configuración hasta "Registrador de curvas".
3. Seleccione el DB de instancia que desee observar. Tras la selección se muestra el canal al
que está asignado el DB de instancia.
4. Defina el tiempo de actualización con el que debe registrarse el registrador de curvas.
5. Haga clic en "Medición activada" para iniciar la medición.
6. Haga clic en "Medición desactivada" para finalizar la medición.

Procedimiento
Para adaptar la escala, proceda del siguiente modo:
1. En la vista de dispositivos, bajo el módulo, haga doble clic en "Puesta en servicio".
2. Navegue en la vista de configuración hasta "Registrador de curvas".
3. Para modificar el eje de tiempo:
– Haga clic en el botón de flecha junto a la fecha, para abrir un calendario. Seleccione una
fecha en el calendario. Para bloquear la selección, haga clic en el candado azul. Esta
posibilidad existe tanto para la fecha inicial como para la fecha final.
– Haga clic con el puntero del ratón en la escala de tiempo. El puntero del ratón se
representa como flecha a la izquierda/derecha. Mantenga el puntero del ratón
presionado y arrástrelo hacia la izquierda o derecha.
Si el tiempo inicial o final está bloqueado, se modifica la escala del tiempo.
Si no está bloqueado el tiempo inicial ni el final, se modifica el período indicado; la escala
se mantiene igual.
4. Para modificar el eje de tiempo:
– Haga clic en el campo de entrada para el valor superior o el valor inferior mostrado.
Introduzca ahí el valor deseado. Para bloquear la selección, haga clic en el candado
azul. Esta posibilidad existe tanto para el valor superior como también para el inferior.
– Haga clic con el puntero del ratón en la escala de valores. El puntero del ratón se
representa como flecha arriba/abajo. Mantenga el puntero del ratón presionado y
arrástrelo hacia arriba o abajo.
Si el valor superior o inferior está bloqueado, se modifica la escala del eje de valores.
Si no está bloqueado el valor superior ni el valor inferior, se modifica el rango indicado;
la escala se mantiene igual.

1138

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Modificar los parámetros a través de la HMI
Procedimiento
Si desea modificar los parámetros del regulador de la instrucción PID_FM mediante el manejo
a través de la HMI, proceda del modo siguiente:
1. Desde la HMI, escriba en la CPU (véase ①) en un DB auxiliar los parámetros que se deben
modificar.
2. Ponga PID_FM.COM_RST a TRUE.
La instrucción ejecuta una inicialización. Los parámetros se sincronizan entre el FM y la
CPU (véase ②).
3. Transfiera los parámetros que se deben modificar desde el DB auxiliar hasta el DB de
instancia de la instrucción PID_FM (véase ③).
4. Ponga PID_FM.LOAD_PAR a TRUE.
Los parámetros modificados se transfieren al FM (véase ④).
Resulta necesario depositar los parámetros en un DB auxiliar porque, tras el arranque de la
CPU, PID_FM lee con COM_RST = TRUE aquellos parámetros del módulo que la CPU ha
transferido previamente desde los datos del sistema al FM.
&38

23



'%GHD\XGD


WUDVODLQLFLDOL]DFLµQFRQ
&20B567 758(
'%GH
LQVWDQFLDGHO
)%
3,'B)0

)%
3,'B)0

)0


/2$'B3$5 758(
&20B567 758(


'DWRVGHO
VLVWHPD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

&DUJDGHORVGDWRVGHO
VLVWHPDDUUDQTXH
6723 ൺ 581 OD&38

1139

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Medir el tiempo de posicionamiento del motor
Introducción
Para conseguir un buen resultado de la regulación, el tiempo de posicionamiento del motor
debe ser lo más preciso posible. Los datos de la documentación del elemento final de control
son valores medios para este tipo de elemento final de control. El valor puede variar para el
elemento final de control que se use en cada momento.
Si utiliza actuadores con realimentación de posición o con señales de tope, es posible medir
el tiempo de posicionamiento del motor durante la puesta en servicio. Si no se dispone de una
realimentación de posición ni de señales de tope, no es posible medir el tiempo de
posicionamiento del motor.

Requisitos
● El valor parametrizado del tiempo de posicionamiento del motor debe equivaler como
mínimo a la mitad del tiempo de posicionamiento real. El actuador se desplaza en un
sentido durante el doble del tiempo de posicionamiento como máximo.
● En los actuadores con realimentación de posición analógica, la realimentación de posición
debe estar interconectada.
● En los actuadores con señales de tope, las señales de tope deben estar interconectadas.

Actuadores con realimentación de posición analógica
Para medir el tiempo de posicionamiento del motor con realimentación de posición, proceda
del siguiente modo:
1. Elija el DB instancia para el que se debe medir el tiempo de posicionamiento del motor.
2. Active la casilla de verificación "Utilizar realimentación de posición".
3. En el campo de entrada "Posición de destino" indique hacia dónde desea mover el
elemento final de control.
La realimentación de posición actual (posición de inicio) se muestra. Haga clic en el
botón
"Iniciar medición tiempo de posicionamiento".

Resultado
El elemento final de control se desplaza hasta la posición de destino desde la posición de
inicio. La medición del tiempo se inicia de inmediato y finaliza en cuanto el elemento final de
control ha alcanzado la posición de destino. El tiempo de posicionamiento del motor se calcula
según la fórmula:
Tiempo de posicionamiento del motor = (Límite superior del valor de salida - Límite inferior del
valor de salida) x Tiempo de medición /VALOR ABSOLUTO(Posición de destino - Posición de
inicio).
Se muestran el progreso y el estado de la medición del tiempo de posicionamiento. El tiempo
de posicionamiento medido se muestra en el campo "Tiempo de actuación medido". Una vez
finalizada la medición del tiempo de posicionamiento se conecta el modo manual de las

1140

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
señales de posicionamiento (LMNSOPON = TRUE). El elemento final de control deja de
moverse.

Actuadores con señales de tope
Para medir el tiempo de posicionamiento del motor con señales de tope, proceda del siguiente
modo:
1. Elija el DB instancia para el que se debe medir el tiempo de posicionamiento del motor.
2. Active la casilla de verificación "Utilizar señales de tope del actuador".
3. Haga clic en el botón

"Iniciar medición tiempo de posicionamiento".

Resultado
El elemento final de control se mueve primero hasta el tope inferior, después, hasta el tope
superior y, de nuevo, hasta el tope inferior. La medición del tiempo se inicia cuando el actuador
ha alcanzado el tope inferior y finaliza cuando el actuador alcanza por segunda vez el tope
inferior. El tiempo medido dividido entre dos da lugar al tiempo de posicionamiento del motor.
Se muestran el progreso y el estado de la medición del tiempo de posicionamiento. El tiempo
de posicionamiento medido se muestra en el campo "Tiempo de actuación medido". Una vez
finalizada la medición del tiempo de posicionamiento se conecta el modo manual de las
señales de posicionamiento (LMNSOPON = TRUE). El elemento final de control deja de
moverse.

Cargar el tiempo de ajuste medido
1. Para guardar en el proyecto el tiempo de posicionamiento del motor medido, haga clic en
el símbolo
"Transfiere datos online al proyecto offline".
El tiempo de ajuste medido se guarda en el ajuste de parámetros del FM.
2. Para que los cambios surtan efecto en el arranque siguiente de la CPU, haga clic en el
icono
"Cargar en dispositivo".

Cancelar medición del tiempo de posicionamiento
Si cancela la medición del tiempo de posicionamiento, el modo manual de las señales de
posicionamiento se conecta (LMNSOPON = TRUE) y el modo manual con especificación de
la variable manipulada se desconecta (LMNOP_ON = FALSE). El elemento final de control
deja de moverse.

3.5.7.5

FM 455: Diagnóstico a través de indicadores LED

Indicación de errores mediante el LED de error
¿Dónde se indican los errores?
El LED rojo INTF indica que hay un error interno en el módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1141

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
El LED EXTF indica que hay un error externo, por ejemplo, un error en las conexiones.
Si el LED amarillo parpadea, el firmware se borra. Este estado sólo puede aparecer si existe
un defecto en el hardware o si el proceso de carga del firmware se cancela.

¿Qué errores se indican?
Los siguientes errores se indican con la iluminación de los LEDs de error:
Tipo de
error
Errores in‐
ternos

Aviso de diagnóstico

Causa posible

Solución

Módulo defectuoso

Error de hardware

Cambie el módulo

Vigilancia de tiempo (watch dog)
activado

Error de hardware

Cambie el módulo

Contenido EEPROM no válido

Fallo de la tensión de alimentación
al parametrizar

Vuelva a parametrizar el módulo

Se han transferido parámetros in‐
correctos al módulo

Vuelva a parametrizar el módulo

Error de hardware en la entrada
analógica

Cambie el módulo

Errores ex‐ Parámetro erróneo en el módulo
ternos
Error en las entradas o las sali‐
das analógicas

Rotura de hilo en la entrada analó‐ Solucione la rotura de hilo
gica
Rebase por defecto del rango de
medición en la entrada analógica

Revise la señal de medición

Rebase del rango de medición en
la entrada analógica

Revise la señal de medición

Rotura de hilo en la salida analógi‐ Solucione la rotura de hilo
ca
Cortocircuito en la salida analógica Solucione el cortocircuito
Falta tensión auxiliar externa

El conector frontal izquierdo no es‐ Inserte el conector frontal izquierdo
tá insertado
Restablezca la alimentación de 24 V
Fallo en la alimentación 24 V

Alarma de diagnóstico en caso de error
Todos los errores pueden disparar una alarma de diagnóstico si ésta se ha habilitado en la
pantalla correspondiente de parametrización. En los registros de diagnóstico DS0 y DS1
puede ver qué error ha provocado que se encienda el LED. La asignación de los registros de
diagnóstico DS0 y DS1 está descrita en el capítulo "Disparo de alarmas de diagnóstico
(Página 1142)".

Disparo de alarmas de diagnóstico
¿Qué es una alarma de diagnóstico?
Si se quiere que un programa de usuario responda a un error interno o externo, se puede
parametrizar una alarma de diagnóstico que interrumpa el programa cíclico de la CPU y llame
al OB de alarma de diagnóstico (OB 82).

1142

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

¿Qué eventos pueden disparar una alarma de diagnóstico?
La siguiente lista muestra qué eventos pueden disparar una alarma de diagnóstico:
● Módulo no parametrizado o errores en la parametrización
● Módulo defectuoso
● Rotura de hilo en entradas analógicas (4 a 20 mA)
● Rebase por exceso y por defectos en entradas analógicas
● Rotura de carga y cortocircuito en salidas analógicas
● Rotura de hilo en termoelementos y Pt 100

Ajuste por defecto
La alarma de diagnóstico está bloqueada de forma predeterminada.

Habilitación de la alarma de diagnóstico
La pantalla Parámetros básicos permite bloquear o habilitar la alarma de diagnóstico para el
módulo.

Respuestas a un evento que dispara una alarma
Cuando se produce un evento que puede disparar una alarma de diagnóstico ocurre lo
siguiente:
● La información de diagnóstico se registra en los registros de diagnóstico DS0 y DS1 del
módulo.
● Uno o los LEDs de error se encienden.
● Se llama al OB de alarma de diagnóstico (OB 82).
● El registro de diagnóstico DS0 se graba en la información de arranque del OB de alarma de
diagnóstico.
● Si no hay ningún defecto de hardware, el módulo sigue regulando.
La CPU pasa a modo STOP si no se ha programado el OB 82.

Registro de diagnóstico DS0 y DS1
Introducción
La información que indica qué evento ha provocado una alarma de diagnóstico se guarda en
los registros de diagnóstico DS0 y DS1. El registro de diagnóstico DS0 consta de cuatro bytes;
DS1 consta de 27 bytes, siendo los cuatro primeros idénticos a DS0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1143

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Leer el registro desde el módulo
El registro de diagnóstico DS0 se transfiere automáticamente a la información de arranque en
la llamada del OB de diagnóstico. Allí, estos cuatro bytes se guardan en los datos locales
(bytes 8-11) del OB 82.
El registro de diagnóstico DS1 se puede leer (y en consecuencia también el contenido de DS0)
desde el módulo con la instrucción "CH_DIAG_455". Esta lectura sólo tiene sentido si en el
DS0 se notifica un error en un canal.

¿Cómo aparecen los textos de diagnóstico en el búfer de diagnóstico?
Si se desea registrar el aviso de diagnóstico en el búfer de diagnóstico, se debe llamar la
instrucción "WR_REC" "Introducir avisos específicos de usuario en el búfer de diagnóstico"
dentro del programa de usuario. En cada caso, el número de evento del aviso de diagnóstico
se especifica en el parámetro de entrada EVENTN. La alarma se introduce en el búfer de
diagnóstico con x=1 como entrante y con x=0 como saliente. El búfer de diagnóstico contiene
los textos de diagnóstico correspondientes en la columna de "Significado", así como el
momento en que se produjo la entrada.

1144

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Asignación del registro de diagnóstico DS0 en la información de arranque
La tabla siguiente muestra la asignación del registro de diagnóstico DS0 en la información de
arranque. Todos los bits que no se incluyen en la tabla son irrelevantes y tienen el valor cero.
Tabla 3-7
Byte
0

Asignación del registro de diagnóstico DS0
Bit

Significado

Nota

Nº de evento

0

Avería en módulo

Se activa en todos los eventos de diagnóstico

8:x:00

1

Error interno

Se activa en todos los errores internos:

8:x:01

● Vigilancia de tiempo activada
● Contenido de la EEPROM no válido; el
módulo arranca sin regular y espera a que
la CPU realice una nueva parametrización
● Error EPROM
● Error ADC/DAC
● Error de hardware en la entrada analógica
2

Error externo

Se activa en todos los errores externos:

8:x:02

● Falta tensión auxiliar externa
● Error de parametrización
● Rotura de hilo en la entrada analógica (sólo
en el margen 4 a 20 mA)
● Rebase por defecto del rango de medición
en la entrada analógica
● Rebase del rango de medición en la
entrada analógica
● Rotura de hilo en la salida analógica
● Cortocircuito en la salida analógica
3

Fallo en un canal

Consultar el DS1, a partir del byte 7, para más
detalles

8:x:03

4

Falta tensión auxiliar
externa

Fallo en la alimentación 24 V del FM 455

8:x:04

6

Contenido EEPROM
no válido

Fallo de la tensión de alimentación durante un
proceso de escritura en la EEPROM. El módulo
arranca con los parámetros predeterminados.

8:x:03

7

Error de parametriza‐ El módulo no puede utilizar un parámetro. Mo‐
ción
tivo: Parámetro desconocido o combinación de
parámetros no permitida.

8:x:07

Consulte el menú Sistema de destino > Mostrar
errores de parametrización
1

0 ... 3

Clase de módulo

4

Diagnóstico específi‐ Se activa cuando el módulo puede proporcio‐
co de canal
nar información del canal adicional y hay un
error de canal (consulte DS1 bytes 7 a 12)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Siempre tiene asignado un 8

–
–

1145

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Byte
2

3

Bit

Significado

Nota

Nº de evento

0

La posición (A, B, C, D) del módulo del rango de
Falta módulo de
usuario o es incorrec‐ medición no concuerda con la parametrización
to
del FM 455.

8:x:30

3

Vigilancia de tiempo Error de hardware
(watch dog) activado

8:x:33

2

Error EPROM

Módulo defectuoso

8:x:42

4

Error ADC/DAC

Módulo defectuoso

8:x:44

Asignación del registro de diagnóstico DS1 del FM 455
El registro de diagnóstico DS1 se compone de 27 bytes. Los 4 primeros bytes son idénticos a
los del registro de diagnóstico DS0. La siguiente tabla muestra la asignación de los bytes
restantes. Todos los bits que no se incluyen en la tabla son irrelevantes y tienen el valor cero.
Tabla 3-8
Byte

1146

Asignación de los bytes del 4 a 12 del registro de diagnóstico DS1 del FM 455
Bit

Significado

Nota

Nº de
evento

4

0 ... 7

Tipo de canal

Siempre tiene asignado 75H

–

5

0 ... 7

Longitud de la información de
diagnóstico

Siempre tiene asignado un 8

–

6

0 ... 7

Cantidad de canales

Siempre tiene asignado un 17 (16 regu‐
ladores + 1 canal de referencia)

–

7

0…7

Vector de error de canal

A los canales 1 a 8 se les asignan sen‐
dos bits

-

8

0…7

Vector de error de canal

A los canales 9 a 16 se les asignan sen‐
dos bits

-

9

0

Error en el canal de referencia

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Byte
10

Bit

Significado

Nota

Nº de
evento

0

Error de hardware en la entra‐
da analógica

–

8:x:B0

1

Error de parametrización

La posición
(A, B, C, D)
del módulo
del rango de
medición no
concuerda
con la para‐
metrización
del FM 455.

8:x:B1

Diagnóstico específico
del canal 1

2

Rotura de hilo en la entrada
analógica (sólo en el margen
4 a 20 mA)

3

sin usar

8:x:B3

4

Rebase por defecto del rango
de medición en la entrada ana‐
lógica1

8:x:B4

5

Rebase por defecto del rango
de medición en la entrada ana‐
lógica1

8:x:B5

6

Rotura de hilo en la salida ana‐
lógica

Sólo en la sa‐
lida de intensi‐
dad del regu‐
lador K

8:x:B6

7

Cortocircuito en la salida ana‐
lógica

Sólo en la sa‐
lida de ten‐
sión del regu‐
lador K

8:x:B7

11

0 ... 7

véase byte 10

Diagnóstico específico del canal 2

véase arri‐
ba

12

0 ... 7

véase byte 10

Diagnóstico específico del canal 3

véase arri‐
ba

13

0 ... 7

véase byte 10

Diagnóstico específico del canal 4

véase arri‐
ba

14

0 ... 7

véase byte 10

Diagnóstico específico del canal 5

véase arri‐
ba

15

0 ... 7

véase byte 10

Diagnóstico específico del canal 6

véase arri‐
ba

16

0 ... 7

véase byte 10

Diagnóstico específico del canal 7

véase arri‐
ba

17

0 ... 7

véase byte 10

Diagnóstico específico del canal 8

véase arri‐
ba

18

0 ... 7

véase byte 10

Diagnóstico específico del canal 9

véase arri‐
ba

19

0 ... 7

véase byte 10

Diagnóstico específico del canal 10

véase arri‐
ba

20

0 ... 7

véase byte 10

Diagnóstico específico del canal 11

véase arri‐
ba

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

8:x:B2

1147

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Byte

Bit

Significado

Nota

Nº de
evento

21

0 ... 7

véase byte 10

Diagnóstico específico del canal 12

véase arri‐
ba

22

0 ... 7

véase byte 10

Diagnóstico específico del canal 13

véase arri‐
ba

23

0 ... 7

véase byte 10

Diagnóstico específico del canal 14

véase arri‐
ba

24

0 ... 7

véase byte 10

Diagnóstico específico del canal 15

véase arri‐
ba

25

0 ... 7

véase byte 10

Diagnóstico específico del canal 16

véase arri‐
ba

26

0 ... 7

véase byte 10

Diagnóstico para el canal de referencia

véase arri‐
ba

1

consulte capítulo "Fallo del transductor de medida (Página 1148)"

Factores importantes que deben tenerse en cuenta
El FM 455 recibe alimentación de tensión exclusivamente a través del conector frontal
izquierdo.
Así pues, la CPU detecta "Módulo desenchufado/no responde" cuando se da uno de los
siguientes casos:
● cuando el conector frontal izquierdo del FM 455 no se ha insertado
● cuando falta la alimentación de tensión de 24 V del conector frontal izquierdo
Nota
En el caso de que haya registrado la entrada "Modulo desenchufado/no responde" en el
búfer de diagnóstico de la CPU, compruebe si se ha insertado el conector frontal izquierdo
y si el FM 455 dispone de una alimentación de tensión de 24 V.

Información adicional
Para obtener más información sobre el parámetro "RET_REALU", consulte Lista de los avisos
RET_REALU (Página 1150) y el área de instrucciones avanzadas del sistema de ayuda.

Fallo del transductor de medida
Fallo del transductor de medida
El FM 455 puede detectar los siguientes fallos en el transductor de medida:
● Rebase por defecto del rango de medición
● Rebase del margen de medición
● Rotura de hilo (no se muestra en todos los márgenes de medición)

1148

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Si se produce una de estas averías en el registro de diagnóstico DS0 se define el bit de error
de grupo "Error externo" y, en el registro de diagnóstico DS1, bits de error específicos del canal
(consulte las tablas en la sección anterior). Cuando desaparecen estas averías los bits
correspondientes se desactivan.
La siguiente tabla muestra los límites de los diferentes márgenes de medición en los que los
bits de error se activan o desactivan:
Rango de medida

Bit de error

Bit de error

Bit de error

Rebase por defecto del ran‐ Rebase del rango de medición
go de medición en ...
en ...
DS1: Byte 10 a 26, Bit 4

Mostrar rotura de hilo

DS1: Byte 10 a 26, Bit 5

DS1: Byte 10 a 26, Bit 2

0 a 20 mA

< - 3,5 mA

> 23,5 mA

–

4 a 20 mA

Bit de error = 1
a < 3,6 mA

> 22,8 mA

Bit de error = 1
a < 3,6 mA

Bit de error = 0
a > 3,8 mA

Bit de error = 0
a > 3,8 mA

0 a 10 V

< - 1,175 V

> 11,75 V

–

Pt 100

< 30,82 mV

> 650,46 mV

sí, parametrizable,

(-200 a 850 °C)

Visualización: 650,46 mV

(-328 a 1562 °F)
Pt 100

< 30,82 mV

> 499,06 mV

(-200 a 556 °C)

sí, parametrizable,
Visualización: 499,06 mV

(-328 a 1032 °F)
Pt 100

< 30,82 mV

> 254,12 mV

(-200 a 130 °C)

sí, parametrizable,
Visualización: 254,12 mV

(-328 a 264 °F)
Termoelemento tipo B

< 0 mV

> 13,81 mV

sí, parametrizable, se mantiene
el último valor

Termoelemento tipo J

< - 8,1 mV

> 69,54 mV

sí, parametrizable, se mantiene
el último valor

Termoelemento tipo K

< - 6,45 mV

> 54,88 mV

sí, parametrizable, se mantiene
el último valor

Termoelemento tipo R

< - 0,23 mV

> 21,11 mV

sí, parametrizable, se mantiene
el último valor

Termoelemento tipo S

< - 0,24 mV

> 18,7 mV

sí, parametrizable, se mantiene
el último valor

Termopar libre

< Valor de entrada inferior
de la línea poligonal

> Valor de entrada superior de
la línea poligonal

sí, parametrizable, se mantiene
el último valor

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1149

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Lista de los avisos RET_REALU
Avisos RET_REALU

1150

JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

7000

28672

-32624

Primera llamada con REQ=0: No hay ninguna transferencia de
datos activa; BUSY tiene el valor 0.

7001

28673

-32624

Primera llamada con REQ=1: Transferencia de datos lanzada;
BUSY tiene el valor 1.

7002

28674

-32624

Llamada intermedia (REQ irrelevante). Transferencia de datos
ya activa; BUSY tiene el valor 1.

8090

32912

-32624

La dirección base lógica indicada no es válida: No existe nin‐
guna asignación en el SDB1/SDB2x, o no se trata de una di‐
rección base.

80A0

32928

-32608

Acuse negativo al leer el módulo. Módulo extraído durante la
lectura o módulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el módulo. Módulo extraído du‐
rante la escritura o módulo defectuoso.

80A2

32930

-32606

Error de protocolo para capa 2

80A3

32931

-32605

Error de protocolo en User-Interface / User

80A4

32932

-32604

Fallo de comunicación en el bus K

80B1

32945

-32591

Indicación de longitud errónea. Parámetro FM_TYPE del DB de
canal para el módulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no está ocupado.

80B3

32947

-32589

El tipo de módulo real no es igual al tipo de módulo teórico.

80C0

32960

-32576

El módulo aún no tiene preparados los datos que hay que leer.

80C1

32961

-32575

Los datos de una petición de escritura semejante todavía no se
han procesado en el módulo.

80C2

32962

-32574

El módulo procesa de instante el número máximo posible de
peticiones.

80C3

32963

-32573

Los recursos necesarios (memoria, etc.) están ocupados en
estos momentos.

80C4

32964

-32572

Error de comunicación

80C5

32965

-32571

La periferia descentralizada no está disponible.

80C6

32966

-32570

Cancelación de las clases de prioridad (rearranque normal o en
segundo plano)

8522

34082

-31454

DB del canal o DB de parámetros demasiado corto. No se pue‐
den leer los datos del DB. (petición de escritura).

8532

34098

-31438

El número de DB del DB de parámetros es demasiado grande.
(petición de escritura).

853A

34106

-31430

DB de parámetros no presente. (petición de escritura).

8544

34116

-31420

Error en el enésimo (n > 1) acceso de lectura a un DB tras
aparecer un error. (petición de escritura).

8723

34595

-30941

DB del canal o DB de parámetros demasiado corto. No se pue‐
den escribir los datos en el DB. (petición de lectura).

8730

34608

-30928

DB de parámetros protegido contra escritura en la CPU. No se
pueden escribir los datos en el DB (petición de lectura)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

8732

34610

-30926

El número de DB del DB de parámetros es demasiado grande.
(petición de lectura).

873A

34618

-30918

DB de parámetros no presente. (petición de lectura).

8745

34629

-30907

Error en el enésimo (n > 1) acceso de escritura a un DB tras
aparecer un error. (petición de lectura).

80ff

33023

-32513

Indicación de índice incorrecta en el bloque FMT_PAR

Los errores 80A2..80A4 así como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de
espera sin la intervención del usuario. Los avisos con la estructura 7xxx indican situaciones temporales
de la comunicación.

3.5.7.6

Proyectos de ejemplo para el FM 455

3.5.8

Utilizar ET 200S 2PULSE

3.5.8.1

Asignación de conectores del 2PULSE

Reglas de cableado
Los cables (terminales 1 y 2 y terminales 5 y 6) deben estar apantallados. La pantalla tiene que
hacer contacto por ambos extremos. Para ello se debe usar el elemento de contacto (ver el
anexo de las instrucciones de servicio Sistema de periferia descentralizada ET 200S (http://
support.automation.siemens.com/WW/view/es/1144348)).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1151

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Asignación de conexiones del 2PULSE
La tabla siguiente muestra la asignación de conexiones del 2PULSE.
Vista

Asignación de conexiones

Significado
Canal 0: Borne 1...4
Canal 1: Borne 5...8

38/6(

24VDC: Alimentación del encó‐
der

6)

70(6\
38/6(

&DQDO









M Masa
DI: Señal de entrada
DO: Señal de salida
(máx. 2 A por canal)

&DQDO

(6
''$%

',
9'&
0
'2

3.5.8.2

















',
9'&
0
'2

Modos de operación y funciones

Sinopsis
Principio
El 2PULSE dispone de dos canales. Se puede seleccionar un modo de operación diferente
para cada canal. El modo de operación se define al parametrizar. No es posible cambiar el
modo de operación parametrizado con el programa de control.
Para cada canal se puede optar entre distintos modos:
● Salida de impulsos (Página 1154)
● Modulación de ancho de impulsos (Página 1159)
● Tren de impulsos (Página 1169)
● Retardo a la conexión/desconexión (Página 1175)
● Salida de frecuencia (Página 1184) (a partir de 6ES7138‑4DD01‑0AB0)
Aparte del modo de operación ajustado, el 2PULSE puede ejecutar las siguientes funciones:
● Medición de intensidad (Página 1190) en los modos de operación "Modulación de ancho de
impulsos" y "Tren de impulsos" (a partir de 6ES7138‑4DD01‑0AB0).
● Control directo de la salida digital DO (Página 1191) por medio del programa de control;
controlable de forma independiente para cada canal.

1152

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
● Detección de errores/diagnóstico (Página 1192); el 2PULSE detecta los errores de cada
canal de forma independiente.
● Conexión en paralelo de ambos canales (Página 1194) para alcanzar una intensidad de
salida más alta (a partir de 6ES7138‑4DD01‑0AB0).
● Reacción a STOP de la CPU/del maestro (Página 1196); el 2PULSE detecta el paso a
STOP de la CPU/del maestro para ambos canales y reacciona de acuerdo con la
parametrización efectuada.
La figura siguiente muestra el funcionamiento del 2PULSE.
&DQDO
3DU£PHWUR

'2

6H³DOHVGHUHDOLPHQWDFLµQ

0RGRV\
IXQFLRQHV

',
3URFHVR

3URJUDPDGHFRQWURO

6H³DOHVGHFRQWURO

&DQDO
3DU£PHWUR

'2

6H³DOHVGHFRQWURO
6H³DOHVGHUHDOLPHQWDFLµQ

0RGRV\
IXQFLRQHV

',

Interfaces con el programa de control y el proceso
Para ejecutar los modos de operación y las funciones, el 2PULSE dispone como interfaz con
el proceso de una entrada digital y una salida digital para cada canal (DI 0, DO 0 para el canal
0 y DI 1, DO1 para el canal 1).
Los modos de operación y las funciones se pueden modificar y observar con el programa de
control mediante señales de control (Página 1201) y señales de realimentación (Página 1204).
Los distintos modos de operación tienen asignados parámetros.
En las descripciones correspondientes a los modos de operación y las funciones encontrará:
● los parámetros relevantes y
● las señales de control y realimentación.
La descripción de los modos de operación y las funciones se aplica a ambos canales, por lo
que en esta descripción los canales ya no se marcan de forma independiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1153

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Modo "Salida de impulsos"
Modo "Salida de impulsos"
Salida de impulsos
Para la duración del impulso que se haya fijado, el 2PULSE emite un impulso en la salida
digital DO (secuencia de salida) una vez transcurrido el retardo a la conexión (Página 1199)
parametrizado.
La figura siguiente muestra el esquema de principio del modo de operación "Salida de
impulsos".
+DELOLWDFLµQ+:
RSFLRQDO 
+DELOLWDFLµQ6:
6:B(1$%/( 



ุ
6

4

5
5HWDUGRD
ODFRQH[LµQ

6

676B(1$%/(

4

5

'2

'XUDFLµQ
GHSXOVR

Iniciar la secuencia de salida
La habilitación de la secuencia de salida debe realizarse siempre en el programa de control
por habilitación software (Página 1201) (SW_ENABLE 0 → 1; MANUAL_DO = 0).
El bit de realimentación (Página 1204)ACK_SW_ENABLE indica la habilitación software
pendiente en el 2PULSE.
Además es posible ajustar con el parámetro "Función DI (Página 1199)" la entrada digital DI
del 2PULSE como habilitación hardware (habilitación HW).
Para trabajar simultáneamente con la habilitación software y la habilitación hardware, la
secuencia de salida comienza con el primer flanco ascendente de la habilitación hardware una
vez obtenida la habilitación software. El 2PULSE ignora los posteriores flancos ascendentes
de la habilitación hardware durante la secuencia de salida actual. Una vez obtenida la
habilitación software, un flanco ascendente de la habilitación hardware es suficiente para
iniciar la siguiente secuencia de salida.
Cuando se produce la habilitación (flanco ascendente) comienza a contar el retardo a la
conexión y se activa el bit STS_ENABLE. Una vez transcurrido el retardo a la conexión, el
impulso se emite con la duración del impulso fijada. La secuencia de salida termina
(Página 1189) con el fin del impulso; STS_ENABLE se borra.
En caso de modificar la duración del impulso durante el funcionamiento de forma no admisible,
la señal (Página 1204)ERR_PULS indica un error en la salida de impulsos. Entonces deberá
reiniciar la secuencia de salida.
La próxima vez que inicie la secuencia de salida, el 2PULSE borrará el bit de realimentación
ERR_PULS.

1154

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operación "Salida de
impulsos".
+DELOLWDFLµQVRIWZDUH
6:B(1$%/( 
$&.B6:B(1$%/(
+DELOLWDFLµQ+:
HQWUDGDGLJLWDO', 
6DOLGDGLJLWDO'2
676B(1$%/(
(55B38/6

5HWDUGRD
ODFRQH[LµQ
&RPLHQ]RGHOD
VHFXHQFLDGHVDOLGD

'XUDFLµQGHO
LPSXOVR
)LQGHOD
VHFXHQFLDGHVDOLGD

Cancelar la secuencia de salida
Borrando la habilitación software (SW_ENABLE = 0) durante el retardo a la conexión o durante
la duración del impulso se cancela la secuencia de salida y el bit STS_ENABLE y la salida
digital DO se borran.
Entonces deberá reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qué señales y de qué forma reacciona el 2PULSE.
Habilitación soft‐
ware SW_ENA‐
BLE

Habilitación hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0→1

0, si el retardo a la conexión >0
1, si el retardo a la conexión =0

0→1

iniciar

0→1

no utilizado

0 si el retardo a la conexión > 0
1 si el retardo a la conexión = 0

0→1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0→1

0

0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0

-

1155

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (Página 1199) parametrizable se seleccionan la resolución y el
rango de la duración del impulso y del retardo a la conexión.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms hasta 6,5535 s con una resolución
de 0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms hasta 65,535 s con una resolución
de 1 ms.

Ajustar y modificar la duración del impulso
La duración del impulso (Página 1200) se ajusta directamente en el programa de control como
valor numérico comprendido entre 0 y 65535.
Duración del impulso = base de tiempo x valor numérico fijado
En caso de modificar la duración del impulso mientras se ejecuta una secuencia de salida, el
tiempo ya transcurrido en la salida se restará de la nueva duración del impulso y el impulso se
continuará emitiendo.

Reducir la duración del impulso
En caso de reducir la duración del impulso a un tiempo más corto que el tiempo ya transcurrido,
la secuencia de salida se cancelará, STS_ENABLE y la salida digital DO se borran y el bit de
estado ERR_PULS se activa. En la siguiente secuencia de salida se borra el bit de estado
ERR_PULS.

Ajustar y modificar el retardo a la conexión en caso de utilizar la interfaz de control corta
El retardo a la conexión (Página 1199) se define en los parámetros como valor numérico entre
0 y 65535.
Retardo a la conexión parametrizado = base de tiempo x valor numérico ajustado
Con el factor para el retardo a la conexión se puede adaptar el tiempo parametrizado en el
programa de control. El factor se ajusta entre 0 y 255 con una ponderación de 0,1.
Retardo a la conexión = factor x 0,1 x retardo a la conexión parametrizado
En caso de modificar el factor de retardo a la conexión durante la secuencia de salida, el nuevo
retardo a la conexión tendrá efecto en la siguiente secuencia de salida.

Modo isócrono (a partir de 6ES7138‑4DD01‑0AB0)
En el modo de operación "Salida de impulsos" el modo isócrono no tiene ningún efecto sobre
la funcionalidad.

1156

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Parámetros del modo de operación "Salida de impulsos"
Parámetros del modo de operación "Salida de impulsos"
La tabla siguiente muestra los parámetros del modo de operación "Salida de impulsos".
Parámetro

Significado

Rango de valores

Modo de operación (Pági‐
na 1198)

Ajuste el modo de operación "Sa‐ ● Salida de impulsos
lida de impulsos".
● Modulación de ancho de
impulsos

Ajuste predetermi‐
nado
Modulación de an‐
cho de impulsos

● Tren de impulsos
● Retardo a la conexión/
desconexión
● Salida de frecuencia
Base de tiempo (Pági‐
na 1199)

Con la base de tiempo se selec‐
cionan la resolución y el rango de
la duración del impulso y del re‐
tardo a la conexión.

Función DI (Página 1199)

La entrada digital DI se puede uti‐ ● Entrada
lizar como entrada o como habili‐ ● Habilitación HW
tación hardware.

● 0,1 ms

0,1 ms

● 1 ms

Retardo a la conexión (Pági‐ Tiempo que transcurre desde el de 0 a 65535
na 1199) 1)
inicio de la secuencia de salida
hasta la salida del impulso. El re‐
tardo a la conexión se puede mo‐
dificar en el programa de control
con el "Factor de retardo a la co‐
nexión".

Entrada

0

Sólo si se utiliza la interfaz de control (Página 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.

1)

Señales de control y realimentación del modo de operación "Salida de impulsos"
Señales de control y realimentación del modo de operación "Salida de impulsos"
La tabla siguiente muestra las señales de control y realimentación del modo de operación
"Salida de impulsos".
Señales de control y
realimentación

Significado

Rango

Direc‐
ción del
canal 0

Direc‐
ción del
canal 1

Señales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Byte 2:
0 = SW_ENABLE borrado
1 = SW_ENABLE activado 0 → 1 = ini‐ Bit 0
cio de la secuencia de salida; dado el
caso, depende de la habilitación hard‐
ware

Byte 6:
Bit 0

1157

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señales de control y
realimentación

Significado

Rango

Direc‐
ción del
canal 0

Direc‐
ción del
canal 1

Duración del impulso

Tiempo en que la salida digital DO
está activada una vez transcurrido
el retardo a la conexión.

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 0 Palabra 4

con base de tiempo 1 ms:
de 1 a 65535
Si se excede el límite inferior del ran‐
go, el 2PULSE no emitirá ningún im‐
pulso.

Factor de retardo a la
conexión

El retardo a la conexión parametri‐
zado se puede modificar antes de
que comience la secuencia de sa‐
lida:

de 0 a 255

Byte 3

Byte 7

Si resulta un retardo a la conexión <
0,2 ms o con un factor = 0, el retardo a
la conexión efectivo = 0.
Retardo a la conexión = factor x 0,1 Si resulta un retardo a la conexión >
x retardo a la conexión parametri‐ 65,535 s, el retardo a la conexión se
zado
limita a 65,535 s.

Señales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‑4DD01‑0AB0)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

Byte 4:
0 = SW_ENABLE borrado
1 = SW_ENABLE activado 0 → 1 = ini‐ Bit 0
cio de la secuencia de salida; dado el
caso, depende de la habilitación hard‐
ware

Duración del impulso

Tiempo en que la salida digital DO
está activada una vez transcurrido
el retardo a la conexión.

con base de tiempo 0,1 ms:
de 2 a 65535

Byte 10:
Bit 0

Palabra 0 Palabra 6

con base de tiempo 1 ms:
de 1 a 65535
Si se excede el límite inferior del ran‐
go, el 2PULSE no emitirá ningún im‐
pulso.

Retardo a la conexión

El retardo a la conexión se puede
modificar antes de que comience
la secuencia de salida.

Palabra 2 Palabra 8

de 0 a 65535
Retardo a la conexión = base de tiem‐
po x valor numérico fijado

Señales de realimentación
STS_ENABLE
STS_DO

STS_DI
ACK_SW_ENABLE
ERR_PULS

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

Indica el nivel de señal en la salida 0 = señal 0 en la salida digital DO
digital DO. Observe la velocidad de 1 = señal 1 en la salida digital DO
actualización.

Byte 0:

Byte 4:

Bit 1

Bit 1

Indica el nivel de señal en la entra‐ 0 = señal 0 en la entrada digital DI
da digital DI.
1 = señal 1 en la entrada digital DI

Byte 0:

Byte 4:

Bit 2

Bit 2

Indica el estado de SW_ENABLE.

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

Indica un error de salida de impul‐
sos.

0 = no hay error de salida de impulsos Byte 0:

Byte 4:

1 = error de salida de impulsos

Bit 4

Bit 4

SEQ_CNT (a partir de
6ES7138‑4DD01‑0AB
0)

Se incrementa una vez finalizada
una secuencia de salida.

Sin habilitación HW: 0 … 1

Byte 1:

Byte 5:

Con habilitación HW: 0 … 15

Bit 0 … 3 Bit 0 … 3

Reservado

–

0

Palabra 2 Palabra 6

1158

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Señales de entrada y de salida del modo de operación "Salida de impulsos"
Señales de entrada y de salida del modo de operación "Salida de impulsos"
La tabla siguiente muestra las señales de entrada y de salida del modo de operación "Salida
de impulsos".
Señal de entrada y salida

Significado

Rango

Terminal
del canal
0

Terminal
del canal 1

La habilitación HW se puede se‐
leccionar con el parámetro "Fun‐
ción DI".
La señal de la entrada digital DI
será evaluada por el 2PULSE al
iniciar la secuencia de salida.

0 = habilitación HW borrada
1 = habilitación HW obtenida
0→1 = inicio de la secuencia de
salida; depende de la habilita‐
ción SW (SW_ENABLE)

1

5

0 = no hay impulso

4

8

Señal de entrada
Habilitación HW

Señal de salida
Impulso en la salida digital DO Se emite un impulso en la salida
digital DO por la duración de im‐
pulso fijada.

1 = impulso

Modo de operación "Modulación de ancho de impulsos" (PWM)
Modo de operación "Modulación de ancho de impulsos" (PWM)
Modulación de ancho de impulsos
Para el 2PULSE se especifica un valor de salida. El 2PULSE genera impulsos continuos sobre
esta base. El valor de salida determina la relación impulso/pausa dentro de un período
(modulación de ancho de impulsos). La duración del período es ajustable.
La secuencia de impulsos se emite una vez transcurrido el retardo a la conexión (Página 1199)
parametrizado en la salida digital DO del 2PULSE (secuencia de salida).
La figura siguiente muestra el esquema de principio del modo de operación "Modulación de
ancho de impulsos".
+DELOLWDFLµQ+:
RSFLRQDO 
+DELOLWDFLµQVRIWZDUH
6:B(1$%/( 



ุ
6

4

6

4

'2

0$,
5
5HWDUGRD
ODFRQH[LµQ

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

5
9DORUGH
VDOLGD

676B(1$%/(

0$,HQ
IXQFLRQD
PLHQWR

1159

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Inicio de la secuencia de salida
La habilitación de la secuencia de salida debe realizarse siempre en el programa de control
por habilitación software (Página 1201) (SW_ENABLE 0 → 1; MANUAL_DO = 0).
El bit de realimentación (Página 1204)ACK_SW_ENABLE indica la habilitación software
pendiente en el 2PULSE.
Además, es posible ajustar con el parámetro "Función DI (Página 1199)" la entrada digital DI
del 2PULSE como habilitación hardware. En el modo isócrono (a partir de
6ES7138‑4DD01‑0AB0) la configuración de una habilitación de HW no tiene efecto.
Para trabajar simultáneamente con la habilitación software y la habilitación hardware, la
secuencia de salida comienza con el primer flanco ascendente de la habilitación hardware una
vez obtenida la habilitación software. El 2PULSE ignora los posteriores flancos ascendentes
de la habilitación hardware durante la secuencia de salida actual.
Cuando se produce la habilitación (flanco ascendente) comienza a contar el retardo a la
conexión y se activa el bit STS_ENABLE. La secuencia de impulsos se emite una vez
transcurrido el retardo a la conexión. Mientras el bit SW_ENABLE está activado, la secuencia
de salida se ejecuta de modo continuo.

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operación "Modulación de
ancho de impulsos".
+DELOLWDFLµQ
VRIWZDUH
6:B(1$%/(
$&.B6:B(1$%/(
+DELOLWDFLµQ+:
HQWUDGDGLJLWDO',

3HU¯RGR

3HU¯RGR

'XUD 3DXVD
FLµQGHO HQWUH
LPSXOVR LPSXOVRV
9DORUGHVDOLGDಽ

9DORUGHVDOLGDಽ

6DOLGDGLJLWDO'2
5HWDUGR
DOD
FRQH[LµQ

676B(1$%/(

,QLFLDUVHFXHQFLDGHVDOLGD

Cancelar la secuencia de salida
Borrando la habilitación software (SW_ENABLE = 0) durante el retardo a la conexión o durante
la salida de impulsos se cancela la secuencia de salida y el bit STS_ENABLE y la salida digital
DO se borran.

1160

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
A continuación es necesario reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qué señales y de qué forma reacciona el 2PULSE.
Habilitación soft‐
ware SW_ENA‐
BLE

Habilitación hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0→1

0, si el retardo a la conexión >0
1, si el retardo a la conexión =0

0→1

iniciar

0→1

no utilizado

0, si el retardo a la conexión >0
1, si el retardo a la conexión =0

0→1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0→1

0

0

0

-

Duración mínima del impulso y pausa mínima entre impulsos
La duración mínima de impulso y la pausa mínima entre impulsos se superponen a la
característica de salida proporcional.
La duración mínima de impulso y la pausa mínima entre impulsos se parametrizan con el
parámetro "Duración mínima de impulso (Página 1200)"; ambos tienen siempre el mismo valor.
Una duración de impulso calculada por el 2PULSE que sea más corta que la duración mínima
de impulso se inhibe.
Una duración de impulso calculada por el 2PULSE que sea más larga que el período menos
la pausa mínima entre impulsos se ajusta al 1000 ‰.
La figura siguiente muestra la modulación de ancho de impulsos.
'XUDFLµQGHOLPSXOVR

'XUDFLµQGHOSHULRGR
'XUDFLµQGHOSHULRGR
SHULRGRP¯QLPRHQWUH
LPSXOVRV

0¯QLPDGXUDFLµQ
GHOLPSXOVR




Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019



9DORUGHVDOLGDHQಽ

1161

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (Página 1199) parametrizable se seleccionan la resolución y el
rango de la duración del período, la duración mínima del impulso y del retardo a la conexión.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resolución de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resolución de 1
ms.

Ajustar y modificar el valor de salida
Con el parámetro "Formato de salida (Página 1199)" se selecciona el rango del valor de salida.
● Formato de salida "Por mil": rango de valores entre 0 y 1000
El 2PULSE calcula la duración de impulso con el valor de salida ajustado:
Duración de impulso = (valor de salida / 1000) x período
● Formato de salida "Salida analógica S7": rango de valores entre 0 y 27648
El 2PULSE calcula la duración de impulso con el valor de salida ajustado:
Duración de impulso = (valor de salida / 27648) x período
El valor de salida se especifica directamente con el programa de control. El nuevo valor de
salida se adopta con el siguiente flanco ascendente de la salida.

Ajuste del período
Dependiendo de la configuración, el período se define como valor de parámetro o a través de
la interfaz de control. La tabla siguiente muestra cuándo se utiliza qué valor.
Para el modo isócrono (a partir de 6ES7138‑4DD01‑0AB0) es necesario definir el período en
el mismo momento de efectuar la parametrización. A diferencia del modo no isócrono, aquí no
es posible modificar posteriormente el período durante el funcionamiento.
Configuración con …
Interfaz de control corta
Modo isócrono

Interfaz de control larga

Período = valor del parámetro "Período"
El valor de la interfaz de control se ignora.

Modo no isócrono

Período = valor del parámetro "Pe‐ Período = consigna "Período" de la
ríodo" × "Factor de período" de la in‐ interfaz de control
terfaz de control
El valor del parámetro "Período" se
ignora.

Período al parametrizar con una interfaz de control corta
La duración del período (Página 1200) se define en los parámetros como valor numérico en
función de la base de tiempo:
● con base de tiempo 1 ms: de 1 a 65535
● con base de tiempo 0,1 ms: de 2 a 65535
Período parametrizado = base de tiempo x valor numérico ajustado

1162

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Con el factor para el período, es posible adaptar el tiempo parametrizado en el programa de
control. El factor se ajusta entre 0 y 255 con una ponderación de 0,1.
Período = factor x 0,1 x período parametrizado
Las nuevas consignas para el período se toman con el siguiente flanco ascendente de la
salida.

Nota
Si se modifica el período durante el funcionamiento, éste pueda experimentar una
prolongación momentánea leve (aprox. 10 µs).
Nota
Una modificación del período a través de la interfaz de control no tiene efecto en el modo
isócrono (a partir de 6ES7138‑4DD01‑0AB0).

Ajustar la duración mínima del impulso y la pausa mínima entre impulsos
La duración mínima de impulso y la pausa mínima entre impulsos se definen como un valor
numérico entre 0 y 65535 con el parámetro "Duración mínima de impulso (Página 1200)".
Duración mínima de impulso / pausa mínima entre impulsos parametrizada = base de tiempo
x valor numérico ajustado

Ajustar el retardo a la conexión
El retardo a la conexión (Página 1199) se define en los parámetros como valor numérico entre
0 y 65535.
Retardo a la conexión parametrizado = base de tiempo x valor numérico ajustado
Si utiliza la interfaz de control larga, con el factor para el retardo a la conexión se puede adaptar
el tiempo parametrizado en el programa de control. El factor se ajusta entre 0 y 255 con una
ponderación de 0,1.
Retardo a la conexión = factor x 0,1 x retardo a la conexión parametrizado

Medición de intensidad (a partir de 6ES7138‑4DD01‑0AB0)
Un campo de aplicación importante de la medición de intensidad en el modo de operación
"Modulación de ancho de impulsos" es la regulación de intensidad de una válvula proporcional.
Esto permite, por ejemplo, compensar los efectos térmicos que actúan sobre la válvula.
Encontrará más información en "Función: Medición de intensidad (a partir de
6ES7138-4DD01-0AB0) (Página 1190)".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1163

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Modo isócrono en el modo de operación "Modulación de ancho de impulsos"
Modo isócrono
Nota
Con el 2PULSE, el modo isócrono es posible a partir de la referencia 6ES7138‑4DD01‑0AB0.
En el modo de operación "Modulación de ancho de impulsos" el modo isócrono tiene las
siguientes particularidades:
● La salida comienza siempre sin retardo a la conexión, un retardo a la conexión
parametrizado se ignora.
● La salida comienza siempre tras la obtención de la habilitación software, una habilitación
hardware parametrizada se ignora.
● No es posible cambiar el período durante el funcionamiento, un ajuste a través de la interfaz
de control se ignora.
En el modo isócrono la secuencia de salida está sincronizada con el instante To. El período se
adapta al ciclo DP. En este caso es posible que el período ajustado por el usuario no se pueda
ejecutar con exactitud.
El 2PULSE adapta el valor parametrizado del período al ciclo DP con base en un algoritmo de
cálculo. El cálculo se ejecuta de tal manera que se minimiza la diferencia entre el período
ajustado y el calculado. En el caso menos favorable la desviación equivale a la mitad del ciclo
DP. La tabla siguiente muestra ejemplos de ello.
Tiempo de ciclo DP
TDP1)

Período ajustado Tnom

Período calculado Treal1)

10 ms

5 ms

5 ms

10 ms

2 ms

2 ms

10 ms

6 ms

5 ms

10 ms

16 ms

20 ms

1)

La relación existente entre el período calculado y el tiempo de ciclo DP corresponde siempre a un
número entero.

A continuación se representa gráficamente la relación entre el período y el ciclo DP. En los
ejemplos, la relación impulso/pausa aparece representada con un 50 % respectivamente.

1164

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Encontrará más información en el manual de funciones Isochrone Mode (http://
support.automation.siemens.com/WW/view/en/15218045).
● El período es igual al ciclo DP
3HU¯RGR
6DOLGDGLJLWDO
'2
&LFOR'3
72

72

72

72

,QLFLDUVHFXHQFLDGHVDOLGD

● El período es más corto que el ciclo DP
3HU¯RGR
6DOLGDGLJLWDO
'2
&LFOR'3
72

72

72

72

,QLFLDUVHFXHQFLDGHVDOLGD

● El período es más largo que el ciclo DP
3HU¯RGR
6DOLGDGLJLWDO
'2
&LFOR'3
72

72

72

72

,QLFLDUVHFXHQFLDGHVDOLGD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1165

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Parámetros del modo de operación "Modulación de ancho de impulsos"
Parámetros del modo de operación "Modulación de ancho de impulsos"
La tabla siguiente muestra los parámetros del modo de operación "Modulación de ancho de
impulsos".
Parámetro

Significado

Modo de operación (Pági‐ Ajuste el modo de operación "Modulación
de ancho de impulsos".
na 1198)

Rango

Ajuste predetermi‐
nado

● Salida de impulsos

Modulación de an‐
cho de impulsos

● Modulación de ancho de
impulsos
● Tren de impulsos
● Retardo a la conexión/
desconexión
● Salida de frecuencia

Base de tiempo (Pági‐
na 1199)

Con la base de tiempo se elige la resolu‐ ● 0,1 ms
ción y el rango de valores del período, la ● 1 ms
duración mínima de impulso y del retardo
a la conexión.

0,1 ms

Formato de salida (Pági‐
na 1199)

Dependiendo de la resolución requerida ● Por mil
para el valor de salida, elija entre los for‐ ● Salida analógica S7
matos de salida Por mil o Salida analógi‐
ca S7.

Por mil

Función DI (Página 1199) La entrada digital DI se puede utilizar co‐ ● Entrada
mo entrada o como habilitación HW.
● Habilitación HW

Entrada

Retardo a la conexión (Pá‐ Tiempo que transcurre desde el comien‐
gina 1199)
zo de la secuencia de salida hasta la sa‐
lida de la secuencia de impulsos.

de 0 a 65535

0

Duración mínima del impulso y pausa mí‐ de 0 a 65535
nima entre impulsos:

0

Duración mínima de im‐
pulso (Página 1200)

Introduzca aquí el tiempo de respuesta
del elemento final de control conectado a
la salida digital DO.
Duración del período (Pá‐ Consigna del período
gina 1200) 1)
Al especificar el período, tenga en cuenta
la duración mínima de impulso ajustada y
el tiempo de respuesta del elemento final
de control conectado a la salida digital
DO.

con base de tiempo 0,1 ms:
de 2 a 65535

20000 → 2 s

con base de tiempo 1 ms:
de 1 a 65535

Si utiliza la interfaz de control corta, en el
modo no isócrono se puede modificar el
período en el programa de control con el
"Factor de período".
1)

Observe la información referente al "Ajuste del período (Página 1159)" y al "Modo isócrono (Página 1164)".

1166

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Señales de control y realimentación del modo de operación "Modulación de ancho de impulsos"
Señales de control y realimentación del modo de operación "Modulación de ancho de impulsos"
La tabla siguiente muestra las señales de control y realimentación del modo de operación
"Modulación de ancho de impulsos".
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

Señales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 → 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitación hardware

Byte 2:

Byte 6:

Bit 0

Bit 0

Valor de salida

El valor que se aplica a la salida
digital DO con modulación de an‐
cho de impulsos.

Dependiendo del formato de sali‐
da:

Palabra 0

Palabra 4

Byte 3

Byte 7

● Por mil: 0 ... 1000
● Salida analógica S7:
0 ... 27648
Si se introduce un valor de salida >
1000 ó 27648, el 2PULSE lo limita‐
rá a 1000 ó 27648, respectivamen‐
te.

Factor de período

La duración parametrizada del pe‐ Factor: 0 a 255
ríodo se puede modificar:
Período:
Período = factor x 0,1 x período pa‐ 2 × duración mínima de impulso a
rametrizado
65,635 s.
Si resulta un período < 2 × dura‐
ción mínima de impulso o < 200 µs
o si el factor = 0, el período se limita
a 2 × duración mínima de impulso
(mínimo 200 µs).
Si resulta una duración del período
> 65.535 s, se limitará a 65.535 s.

Señales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‑4DD01‑0AB0)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 → 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitación hardware

Byte 4:

Byte 10:

Bit 0

Bit 0

Valor de salida

Valor que se emite en la salida di‐
gital DO con modulación de ancho
de impulsos.

Dependiendo del formato de sali‐
da:

Palabra 0

Palabra 6

● Por mil: 0 ... 1000
● Salida analógica S7:
0 ... 27648
Si se introduce un valor de salida
> 1000 ó 27648, el 2PULSE lo limi‐
tará a 1000 ó 27648 respectiva‐
mente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1167

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

Período 1)

Consigna del período en modo no
isócrono

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 2

Palabra 8

Byte 5

Byte 11

Byte 0:

Byte 4:

con base de tiempo 1 ms:
de 1 a 65535
Factor de retardo a la
conexión

El retardo a la conexión parametri‐
zado se puede modificar antes de
que comience la secuencia de sa‐
lida:

de 0 a 255

Si resulta un retardo a la conexión
< 0,2 ms o con un factor = 0, el re‐
tardo a la conexión efectivo = 0.
Retardo a la conexión = factor x 0,1 Si resulta un retardo a la conexión
x retardo a la conexión parametri‐ > 65,535 s, el retardo a la conexión
zado
se limita a 65,535 s.

Señales de realimentación
STS_ENABLE

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada
1 = salida de impulsos en curso

Bit 0

Bit 0

STS_DO

Indica el nivel de señal en la salida
digital DO.

0 = señal 0 en la salida digital DO

Byte 0:

Byte 4:

1 = señal 1 en la salida digital DO

Bit 1

Bit 1

Observe la velocidad de actualiza‐
ción.
STS_DI
ACK_SW_ENABLE

Indica el nivel de señal en la entra‐ 0 = señal 0 en la entrada digital DI Byte 0:
da digital DI.
1 = señal 1 en la entrada digital DI Bit 2

Byte 4:

Indica el estado de SW_ENABLE.

Bit 2

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

SEQ_CNT (a partir de
6ES7138‑4DD01‑0AB
0)

Función no disponible en este mo‐ –
do de operación.

Byte 1:

Byte 5:

Bit 0 … 3

Bit 0 … 3

Valor de medición de
intensidad (a partir de
6ES7138‑4DD01‑0AB
0)

Intensidad en la DO como valor
analógico SIMATIC S7.

Palabra 2

Palabra 6

1)

0 … 27648 (margen de saturación
hasta 32767)

Observe la información referente al "Ajuste del período (Página 1159)".

Señales de entrada y de salida del modo de operación "Modulación de ancho de impulsos"
Señales de entrada y de salida del modo de operación "Modulación de ancho de impulsos"
La tabla siguiente muestra las señales de entrada y de salida del modo de operación
"Modulación de ancho de impulsos".
Señal de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La habilitación HW se puede
seleccionar con el parámetro
"Función DI".
La señal de la entrada digital DI
será evaluada por el 2PULSE
al iniciar la secuencia de salida.

0 = habilitación HW borrada
1 = habilitación HW obtenida
0 → 1 = inicio de la secuencia
de salida; depende de la habi‐
litación SW

1

5

Señal de entrada
Habilitación HW

1168

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señal de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La secuencia de impulsos se
emite en la salida digital DO.

0 = no hay impulso

4

8

Señal de salida
Secuencia de impulsos en la
salida digital DO

1 = impulso

Modo "Tren de impulsos"
Modo "Tren de impulsos"
Definición
El 2PULSE emite el número de impulsos predeterminado por el usuario como tren de impulsos
en la salida digital DO (secuencia salida) una vez transcurrido el retardo a la conexión
(Página 1199) ajustado. El período y la duración del impulso se pueden ajustar.
La figura siguiente muestra el esquema de principio del modo de operación "Tren de impulsos".
+DELOLWDFLµQ+:
RSFLRQDO 
+DELOLWDFLµQVRIWZDUH
6:B(1$%/( 



ุ
6

4

5
5HWDUGRDOD
FRQH[LµQ

6

4

5
1¼PHURGH
LPSXOVRV

676B(1$%/(
'2

/DFDGHQDGHLPSXOVRV
HVW£HQIXQFLRQDPLHQWR

Iniciar la secuencia de salida
La habilitación de la secuencia de salida debe realizarse siempre en el programa de control
por habilitación software (Página 1201) (SW_ENABLE 0 → 1; MANUAL_DO = 0). El bit de
realimentación (Página 1204)ACK_SW_ENABLE indica la habilitación software pendiente en
el 2PULSE.
Además, es posible ajustar con el parámetro "Función DI (Página 1199)" la entrada digital DI
del 2PULSE como habilitación hardware.
Para trabajar simultáneamente con la habilitación software y la habilitación hardware, la
secuencia de salida comienza con el primer flanco ascendente de la habilitación hardware una
vez obtenida la habilitación software. El 2PULSE ignora los posteriores flancos ascendentes
de la habilitación hardware durante la secuencia de salida actual. Una vez obtenida la
habilitación software, un flanco ascendente de la habilitación hardware es suficiente para
iniciar la siguiente secuencia de salida.
Cuando se produce la habilitación (flanco ascendente) comienza a contar el retardo a la
conexión y se activa el bit STS_ENABLE. Una vez transcurrido el retardo a la conexión, el tren
de impulsos se emite con el número de impulsos fijado. La secuencia de salida termina
(Página 1189) tan pronto como se emite el último impulso; STS_ENABLE se borra.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1169

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
En caso de modificar el número de impulsos durante el funcionamiento de forma no admisible,
la señal (Página 1204)ERR_PULS indica un error en la salida de impulsos.
En la siguiente secuencia de salida, el 2PULSE borrará el bit de realimentación ERR_PULS.

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operación "Tren de
impulsos".
+DELOLWDFLµQ6:
$&.B6:B(1$%/(
+DELOLWDFLµQ+:
HQWUDGDGLJLWDO',
6DOLGDGLJLWDO'2
5HWDUGRD
ODFRQH[LµQ
&RPLHQ]RGHODVHFXHQFLD
GHVDOLGD
Q¼PHURGHLPSXOVRV 

'XUD
FLµQ
GHO
LP
SXOVR

3H
ULRGR
HQWUH
LPSXO
VRV

'XUDFLµQ
GHO
SHULRGR
)LQGHOD
VHFXHQFLD
GHVDOLGD

676B(1$%/(
(55B38/6

Cancelar la secuencia de salida
Borrando la habilitación software durante el retardo a la conexión o durante el tren de impulsos,
se cancela la secuencia de salida y el bit STS_ENABLE y la salida digital DO se borran.
Entonces deberá reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qué señales y de qué forma reacciona el 2PULSE.
Habilitación soft‐
ware SW_ENA‐
BLE

Habilitación hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0→1

0, si el retardo a la conexión >0
1, si el retardo a la conexión =0

0→1

iniciar

0→1

no utilizado

0 si el retardo a la conexión > 0
1 si el retardo a la conexión = 0

0→1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0→1

0

0

1170

0

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (Página 1199) parametrizable se seleccionan la resolución y el
rango de valores de la duración del período, de la duración del impulso y del retardo a la
conexión.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resolución de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resolución de 1
ms.

Ajustar y modificar el número de impulsos
El número de impulsos (Página 1201) se ajusta directamente con el programa de control como
valor numérico entre 0 y 65535.
Si se modifica el número de impulsos una vez transcurrido el retardo a la conexión, el nuevo
valor será efectivo de inmediato:
● Si se aumenta el número de impulsos, se emitirá el nuevo número de impulsos más grande
● Si se reduce el número de impulsos y ya ha sido emitido este número menor de impulsos,
se interrumpe la secuencia de salida, se borran el bit STS_ENABLE y la salida digital DO
y se activa ERR_PULS. En la siguiente secuencia de salida se borra ERR_PULS .

Ajustar y modificar el período en caso de utilizar la interfaz de control corta
La duración del período (Página 1200) se define en los parámetros como un valor numérico
entre 2 y 65535:
Período parametrizado = base de tiempo x valor numérico ajustado
Con el factor para el período, es posible adaptar el tiempo parametrizado en el programa de
control. El factor se ajusta entre 0 y 255 con un peso de 0,1.
Período = factor x 0,1 x período parametrizado
En caso de modificar el factor durante la secuencia de salida, el nuevo período tendrá efecto
al comenzar la siguiente secuencia de salida.

Ajustar la duración de impulso
La duración del impulso (Página 1200) se define en el parámetro "Duración del impulso" como
un valor numérico entre 1 y 65535:
Duración de impulso parametrizada = base de tiempo x valor numérico fijado
Si utiliza la interfaz de control larga es posible ajustar la relación entre la duración de impulso
y la pausa entre impulsos:
Relación impulso/pausa = (consigna / 255) × período

Ajustar el retardo a la conexión
El retardo a la conexión (Página 1199) se define en los parámetros como valor numérico entre
0 y 65535.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1171

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Retardo a la conexión parametrizado = base de tiempo x valor numérico ajustado

Modo isócrono (a partir de 6ES7138‑4DD01‑0AB0)
En el modo de operación "Tren de impulsos" el modo isócrono no tiene ningún efecto en la
funcionalidad.

Medición de intensidad (a partir de 6ES7138‑4DD01‑0AB0)
Para más información, ver "Función: Medición de intensidad (a partir de
6ES7138-4DD01-0AB0) (Página 1190)".

Parámetros del modo de operación "Tren de impulsos"
Parámetros del modo de operación "Tren de impulsos"
La tabla siguiente muestra los parámetros del modo de operación "Tren de impulsos".
Parámetro

Significado

Rango

Ajuste predetermi‐
nado

Modo de operación (Pági‐
na 1198)

Ajuste el modo de operación
"Tren de impulsos".

● Salida de impulsos

Modulación de an‐
cho de impulsos

● Modulación de ancho de
impulsos
● Tren de impulsos
● Retardo a la conexión/
desconexión
● Salida de frecuencia

Base de tiempo (Página 1199)

Con la base de tiempo se selec‐ ● 0,1 ms
cionan la resolución y el rango
● 1 ms
de valores del período, de la du‐
ración de impulso y del retardo a
la conexión.

0,1 ms

Función DI (Página 1199)

La entrada digital DI se puede
● Entrada
utilizar como entrada o como ha‐ ● Habilitación HW
bilitación HW.

Entrada

Retardo a la conexión (Pági‐
na 1199)

Tiempo que transcurre desde el de 0 a 65535
comienzo de la secuencia de sa‐
lida hasta la salida del tren de
impulsos.

0

Duración del impulso (Pági‐
na 1200) 1)

Duración de impulso:

1172

Introduzca aquí el tiempo de rea‐
limentación del elemento final
de control conectado a la salida
digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

10000 → 1 s

con base de tiempo 1 ms:
de 1 a 65535
Si se sobrepasa el límite inferior
del rango, el 2PULSE fija la du‐
ración de impulso a 0,2 ms o 1
ms.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Parámetro

Significado

Rango

Ajuste predetermi‐
nado

Duración del período (Pági‐
na 1200) 1)

La duración del período debería
ser siempre un múltiplo del tiem‐
po de respuesta del elemento fi‐
nal de control conectado a la sa‐
lida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

20000 → 2 s

con base de tiempo 1 ms:
de 1 a 65535

Defina el período de acuerdo
con la tasa de repetición nece‐
saria de los impulsos.
El período se puede modificar
en el programa de control con el
"Factor de período".
Sólo si se utiliza la interfaz de control (Página 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.

1)

Señales de control y realimentación del modo de operación "Tren de impulsos"
Señales de control y realimentación del modo de operación "Tren de impulsos"
La tabla siguiente muestra las señales de control y realimentación del modo de operación
"Tren de impulsos".
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

0 = SW_ENABLE borrado

Byte 2:

Byte 6:

1 = SW_ENABLE activado

Bit 0

Bit 0

Palabra 0

Palabra 4

Señales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 → 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitación HW
Número de impulsos

Factor de período

Número de impulsos que se emi‐
ten en la salida digital DO una vez
transcurrido el retardo a la cone‐
xión.

de 0 a 65535
Si el número de impulsos es 0, el
2PULSE no emitirá ningún impul‐
so. La secuencia de salida termina
con ERR_PULS = 1.

Byte 3
El período parametrizado se pue‐ Factor: de 0 a 255
de modificar antes de que comien‐ Duración del período:
ce la secuencia de salida:
> duración del impulso hasta
Período = factor x 0,1 x período pa‐ 65,535 s
rametrizado
Si resulta un período > 65,535 s,
éste se ajusta a 65,535 s.
Si resulta un período ≤ duración
del impulso, ésta se ajusta a la du‐
ración del impulso + 0,2 ms (o bien
duración del impulso + 1 ms).

Byte 7

Señales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‑4DD01‑0AB0)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1173

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado

Byte 4:

Byte 10:

1 = SW_ENABLE activado

Bit 0

Bit 0

Palabra 0

Palabra 6

Palabra 2

Palabra 8

Byte 5

Byte 11

0 → 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitación HW
Número de impulsos

Duración del período

Número de impulsos que se emi‐
ten en la salida digital DO una vez
transcurrido el retardo a la cone‐
xión.

de 0 a 65535

Consigna del período

con base de tiempo 0,1 ms:
de 2 a 65535

Si el número de impulsos es 0, el
2PULSE no emitirá ningún impul‐
so. La secuencia de salida termina
con ERR_PULS = 1.

con base de tiempo 1 ms:
de 1 a 65535
Relación impulso-pau‐
sa

Es posible ajustar la relación entre
la duración del impulso y la pausa
entre impulsos.

de 0 a 255

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

Indica el nivel de señal en la salida
digital DO.

0 = señal 0 en salida digital DO

Byte 0:

Byte 4:

1 = señal 1 en salida digital DO

Bit 1

Bit 1

P. ej. el valor 128 corresponde a
una relación de 50 : 50.

Señales de respuesta
STS_ENABLE
STS_DO

Observe la velocidad de actualiza‐
ción.
STS_DI

Indica el nivel de señal en la entra‐ 0 = señal 0 en la entrada digital DI Byte 0:
da digital DI.
1 = señal 1 en la entrada digital DI Bit 2

Byte 4:

ACK_SW_ENABLE

Indica el estado de SW_ENABLE.

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

ERR_PULS

Indica un error de salida de impul‐
sos.

0 = no hay error de salida de im‐
pulsos

Byte 0:

Byte 4:

Bit 4

Bit 4

1 = error de salida de impulsos

Bit 2

SEQ_CNT (a partir de
6ES7138‑4DD01‑0AB
0)

Se incrementa una vez finalizada
una secuencia de salida.

Sin habilitación HW: 0 … 1

Byte 1:

Byte 5:

Con habilitación HW: 0 … 15

Bit 0 … 3

Bit 0 … 3

Valor de medición de
intensidad (a partir de
6ES7138‑4DD01‑0AB
0)

Intensidad en la DO como valor
analógico SIMATIC S7.

0 … 27648 (margen de saturación
hasta 32767)

Palabra 2

Palabra 6

1174

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Señales de entrada y de salida del modo de operación "Tren de impulsos"
Señales de entrada y de salida del modo de operación "Tren de impulsos"
La tabla siguiente muestra las señales de entrada y de salida del modo de operación "Tren de
impulsos".
Señal de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La habilitación HW se puede
seleccionar con el parámetro
"Función DI".
La señal de la entrada digital DI
será evaluada por el 2PULSE
al inicio.

0 = habilitación HW borrada

1

5

El número de impulsos defini‐
do se emite en la salida digital
DO.

0 = no hay impulso

4

8

Señal de entrada
Habilitación HW

1 = habilitación HW obtenida
0 → 1 = inicio de la secuencia
de salida; depende de la habi‐
litación SW (SW_ENABLE).

Señal de salida
Tren de impulsos en la salida
digital DO

1 = impulso

Modo "Retardo a la conexión/desconexión"
Modo "Retardo a la conexión/desconexión"
Definición
La señal pendiente en la entrada digital DI es aplicada por el 2PULSE a la salida digital DO con
un retardo a la conexión y desconexión.
La figura siguiente muestra el esquema de principio del modo de operación "Retardo a la
conexión/desconexión".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1175

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
676B(1$%/(
+DELOLWDFLµQVRIWZDUH
6:B(1$%/(
',

6

4

'2

5
5HWDUGRDOD
FRQH[LµQ

6

4

5
5HWDUGRDOD
GHVFRQH[LµQ

Habilitación de la secuencia de salida
La habilitación para la secuencia de salida debe realizarse siempre en el programa de control
por habilitación software (Página 1201) (SW_ENABLE 0 → 1; MANUAL_DO = 0), con lo que
STS_ENABLE se activa. El bit de realimentación (Página 1204)ACK_SW_ENABLE indica la
habilitación software pendiente en el 2PULSE.
El flanco ascendente en la entrada digital DI (0 → 1) inicia el retardo a la conexión y, una vez
transcurrido el retardo a la conexión, se activa la salida digital DO (Página 1189).
El flanco ascendente en la entrada digital DI (1 → 0) inicia el retardo a la desconexión y, una vez
transcurrido el retardo a la desconexión, se borra la salida digital DO (Página 1189).
Si el 2PULSE detecta una duración del impulso o una pausa entre impulsos demasiado corta,
indica el error de salida de impulsos (Página 1204)ERR_PULS.
Con el siguiente flanco en la entrada digital DI, el 2PULSE borra el bit de realimentación
ERR_PULS.

Diagrama de impulsos
SW_ENABLE se activa mientras DI = 0:
La figura siguiente muestra una secuencia de salida en el modo de operación "Retardo a la
conexión/desconexión" cuando se inicia con DI = 0.

1176

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
+DELOLWDFLµQVRIWZDUH
6:B(1$%/( 

$&.B6:B(1$%/(
+DELOLWDFLµQ+:
HQWUDGDGLJLWDO', 
6DOLGDGLJLWDO'2

676B(1$%/(
(55B38/6
5HWDUGRDOD
FRQH[LµQ

5HWDUGRDOD
GHVFRQH[LµQ

SW_ENABLE se activa mientras DI = 1:
Si se activa SW_ENABLE mientras DI = 1, el primer flanco en DI (flanco descendente) se
ignora. La figura siguiente muestra la secuencia de salida correspondiente.
+DELOLWDFLµQVRIWZDUH
6:B(1$%/( 

$&.B6:B(1$%/(
+DELOLWDFLµQ+:
HQWUDGDGLJLWDO', 
6DOLGDGLJLWDO'2

676B(1$%/(
(55B38/6
5HWDUGRDOD
FRQH[LµQ

5HWDUGRDOD
GHVFRQH[LµQ

Cancelación de la secuencia de salida
Borrando la habilitación software (SW_ENABLE = 0) durante la secuencia de salida, ésta se
cancela y se borran el bit STS_ENABLE y la salida digital.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1177

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Tabla de verdad
La tabla siguiente muestra ante qué señales y de qué forma reacciona el 2PULSE.
Habilitación soft‐
ware SW_ENA‐
BLE

Entrada digital DI

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0→1

0 si el retardo a la conexión > 0
1 si el retardo a la conexión = 0

1

iniciar

1

1→0

1, si el retardo a la desconexión > 0
0, si el retardo a la desconexión = 0

1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

1

-

0→1

0

0

1

-

Duración/pausa mínima del impulso de la salida digital DO
La duración/pausa mínima de impulso de la salida digital DO es de 100 µs.
Esto deberá tenerse en cuenta al ajustar el retardo a la conexión/desconexión y la duración/
pausa del impulso de la entrada digital DI;de lo contrario, la reacción en la salida digital DO no
está definida.

La duración de impulso de la entrada digital DI es demasiado corta
El 2PULSE detecta un impulso demasiado corto en el flanco descendente de la entrada digital
DI cuando:
Duración del impulso + retardo a la desconexión ≤ retardo a la conexión.
Reacción del 2PULSE a una duración de impulso demasiado corta:
● ERR_PULS se activa
● el actual retardo a la conexión se borra.
● el retardo a la desconexión no se inicia.
● el nivel de señal en la salida digital DO permanece a 0.
ERR_PULS se borra con el siguiente flanco ascendente en la entrada digital DI.
La figura siguiente muestra el comportamiento cuando la duración del impulso es demasiado
breve.
'XUDFLµQGHOLPSXOVR
(QWUDGDGLJLWDO',
5HWDUGRDODGHVFRQH[LµQ
5HWDUGRDODFRQH[LµQ

6DOLGDGLJLWDO'2

1178




Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Pausa entre impulsos de la entrada digital DI demasiado corta
El 2PULSE detecta en el flanco ascendente de la entrada digital DI una pausa demasiado corta
entre impulsos, cuando:
Pausa entre impulsos + retardo a la conexión ≤ retardo a la desconexión.
Reacción del 2PULSE a una pausa demasiado corta entre impulsos:
● ERR_PULS se activa
● el actual retardo a la desconexión se borra.
● el retardo a la conexión no se inicia.
● el nivel de señal en la salida digital DO permanece a 1.
ERR_PULS se borra con el siguiente flanco descendente en la entrada digital DI.
La figura siguiente muestra el comportamiento cuando la pausa entre impulsos es demasiado
breve.
(QWUDGDGLJLWDO',

3HULRGRHQWUHLPSXOVRV

5HWDUGRDODFRQH[LµQ
5HWDUGRDODGHVFRQH[LµQ
6DOLGDGLJLWDO'2



Redisparo del actual retardo a la conexión
El 2PULSE reinicia el retardo a la conexión con el flanco ascendente en la entrada digital DI
cuando:
Retardo a la conexión > duración del impulso + pausa entre impulsos.
Esto desactiva el actual retardo a la desconexión.
La salida digital DO sólo se activa si hay un nivel de señal 1 en la entrada digital DI durante un
tiempo superior al del retardo a la conexión. Esto permite filtrar secuencias de impulsos
rápidas.
La figura siguiente muestra el redisparo del actual retardo a la conexión.
'XUDFLµQGHO 3HULGRHQWUH
LPSXOVR
LPSXOVRV
(QWUDGDGLJLWDO',

5HWDUGRDOD
GHVFRQH[LµQ
5HWDUGRDODFRQH[LµQ
5HGLVSDUR

6DOLGDGLJLWDO'2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1179

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Redisparo del actual retardo a la desconexión
El 2PULSE reinicia el retardo a la desconexión con el flanco descendente de la entrada digital
DI si:
Retardo a la desconexión > duración del impulso + pausa entre impulsos.
Esto desactiva el actual retardo a la conexión.
La salida digital DO se borra sólo si hay un nivel de señal 0 en la entrada digital DI durante un
tiempo superior al del retardo a la desconexión.
La figura siguiente muestra el redisparo del actual retardo a la desconexión.
'XUDFLµQGHO 3HULGRHQWUH
LPSXOVRV
LPSXOVR
(QWUDGDGLJLWDO',
5HWDUGRDOD
GHVFRQH[LµQ

5HWDUGRDODFRQH[LµQ

5HGLVSDUR
5HWDUGRDOD
FRQH[LµQ

6DOLGDGLJLWDO'2

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (Página 1199) parametrizable se seleccionan la resolución y el
rango del retardo a la conexión y del retardo a la desconexión.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resolución de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resolución de
1 ms.

Ajustar y modificar el retardo a la conexión en caso de utilizar la interfaz de control corta
El retardo a la conexión (Página 1199) se define en los parámetros como valor numérico entre
0 y 65535.
Retardo a la conexión parametrizado = base de tiempo × valor numérico ajustado
Con el factor para el retardo a la conexión se puede adaptar el tiempo parametrizado en el
programa de control. El factor se ajusta entre 0 y 255 con una ponderación de 0,1:
Retardo a la conexión = factor x 0,1 x retardo a la conexión parametrizado
Si se cambia el factor de retardo a la conexión, el nuevo retardo a la conexión se activa con el
siguiente flanco ascendente en la entrada digital DI.

1180

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Ajustar y modificar el retardo a la desconexión
El retardo a la desconexión se ajusta directamente como valor numérico entre 0 y 65535 en
el programa de control (Página 1201):
Retardo a la desconexión = base de tiempo x valor numérico fijado
Si se cambia el factor de retardo a la desconexión, el nuevo retardo a la desconexión se activa
con el siguiente flanco descendente en la entrada digital DI.

Modo isócrono (a partir de 6ES7138‑4DD01‑0AB0)
En el modo de operación "Retardo a la conexión/desconexión" el modo isócrono no tiene
ningún efecto en la funcionalidad.

Parámetros del modo de operación "Retardo a la conexión/desconexión"
Parámetros del modo de operación "Retardo a la conexión/desconexión"
La tabla siguiente muestra los parámetros del modo de operación "Retardo a la conexión/
desconexión".
Parámetro

Significado

Rango

Modo de operación (Pági‐
na 1198)

Ajuste el modo de operación
● Salida de impulsos
"Retardo a la conexión/descone‐
● Modulación de ancho de
xión".
impulsos

Ajuste predetermi‐
nado
Modulación de an‐
cho de impulsos

● Tren de impulsos
● Retardo a la conexión/
desconexión
● Salida de frecuencia
Base de tiempo (Página 1199)

Con la base de tiempo se selec‐ ● 0,1 ms
cionan la resolución y el rango
● 1 ms
del retardo a la conexión y del
retardo a la desconexión.

Retardo a la conexión (Pági‐
na 1199) 1)

Tiempo que transcurre entre el
flanco ascendente de la entrada
digital DI y su salida a través de
la salida digital DO. El retardo a
la conexión se puede modificar
en el programa de control con el
"Factor de retardo a la cone‐
xión".

de 0 a 65535

0,1 ms

0

Sólo si se utiliza la interfaz de control (Página 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.
1)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1181

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Señales de control y realimentación del modo de operación "Retardo a la conexión/desconexión"
Señales de control y realimentación del modo de operación "Retardo a la conexión/desconexión"
La tabla siguiente muestra las señales de control y realimentación del modo de operación
"Retardo a la conexión/desconexión".
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

Señales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitación software
(SW_ENABLE)

La habilitación software debe acti‐
varse siempre en el programa de
control. Si se desactiva la habilita‐
ción software, la actual secuencia
de salida se cancela.

0 = SW_ENABLE borrado

Byte 2:

Byte 6:

1 = SW_ENABLE activado

Bit 0

Bit 0

Retardo a la descone‐
xión

Tiempo que transcurre entre el
flanco descendente de la entrada
digital DI y su salida a través de la
salida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 0

Palabra 4

con base de tiempo 1 ms: de 1 a
65535
Si se excede el límite inferior del
rango, el retardo a la desconexión
no tiene efecto.

Factor de retardo a la
conexión

Byte 3
El retardo a la conexión parametri‐ Factor: de 0 a 255
zado se puede modificar:
Retardo a la conexión:
Retardo a la conexión = factor x 0,1 0,2 ms a 65,535 s
x retardo a la conexión parametri‐
Si resulta un retardo a la conexión
zado
< 0,2 ms o con un factor = 0, el re‐
tardo a la conexión efectivo = 0.
Si resulta un retardo a la conexión
> 65,535 s, el retardo a la conexión
se limita a 65,535 s.

Byte 7

Señales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‑4DD01‑0AB0)
Habilitación software
(SW_ENABLE)

La habilitación software debe acti‐
varse siempre en el programa de
control. Si se desactiva la habilita‐
ción software, la actual secuencia
de salida se cancela.

0 = SW_ENABLE borrado

Byte 4:

Byte 10:

1 = SW_ENABLE activado

Bit 0

Bit 0

Retardo a la descone‐
xión

Tiempo que transcurre entre el
flanco descendente de la entrada
digital DI y su salida a través de la
salida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 0

Palabra 6

Palabra 2

Palabra 8

con base de tiempo 1 ms: de
1 a 65535
Si se excede el límite inferior del
rango, el retardo a la desconexión
no tiene efecto.

Retardo a la conexión

Tiempo que transcurre entre el
flanco ascendente de la entrada di‐
gital DI y su salida a través de la
salida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535
con base de tiempo 1 ms: de
1 a 65535
Si se excede el límite inferior del
rango, el retardo a la conexión no
tiene efecto.

1182

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

Indica el estado de la habilitación
software (SW_ENABLE).

0 = habilitación software bloqueada Byte 0:

Byte 4:

1 = habilitación SW obtenida

Bit 0

Bit 0

0 = señal 0 en salida digital DO

Byte 0:

Byte 4:

1 = señal 1 en salida digital DO

Bit 1

Bit 1

Señales de respuesta
STS_ENABLE
STS_DO

Indica el nivel de señal en la salida
digital DO.
Observe la velocidad de actualiza‐
ción.

STS_DI
ACK_SW_ENABLE

Indica el nivel de señal en la entra‐ 0 = señal 0 en la entrada digital DI Byte 0:
da digital DI.
1 = señal 1 en la entrada digital DI Bit 2

Byte 4:

Indica el estado de SW_ENABLE.

Bit 2

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

Indica un error en la salida de im‐
pulsos si la duración del impulso o
la pausa entre impulsos es dema‐
siado corta.

0 = no hay error de salida de im‐
pulsos

Byte 0:

Byte 4:

Bit 4

Bit 4

SEQ_CNT (a partir de
6ES7138‑4DD01‑0AB
0)

Se incrementa en la DO con cada
flanco (ascendente y descenden‐
te).

0 … 15

Byte 1:

Byte 5:

Bit 0 … 3

Bit 0 … 3

Reservado

–

0

Palabra 2

Palabra 6

ERR_PULS

1 = error de salida de impulsos

Señales de entrada y de salida del modo de operación "Retardo a la conexión/desconexión"
Señales de entrada y de salida del modo de operación "Retardo a la conexión/desconexión"
La tabla siguiente muestra las señales de entrada y de salida del modo de operación "Retardo
a la conexión/desconexión".
Señal de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

1

5

4

8

Señal de entrada
Entrada digital DI

La señal de la entrada digital DI 0 = no hay impulso
es emitida por el 2PULSE con 1 = impulso
un retardo a la conexión/desco‐
nexión en la salida digital DO.

Señal de salida
Impulso en la salida digital DO La señal de la entrada digital DI 0 = no hay señal
es emitida por el 2PULSE con 1 = señal
un retardo a la conexión/desco‐
nexión en la salida digital DO.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1183

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Modo de operación "Salida de frecuencia" (a partir de 6ES7138-4DD01-0AB0)
Modo "Salida de frecuencia"
Definición
Salida de una señal de onda cuadrada en la salida digital del 2PULSE con una frecuencia
definida.
La secuencia de salida se inicia una vez transcurrido el retardo a la conexión (Página 1199)
parametrizado en la salida digital DO del 2PULSE.
La figura siguiente muestra el esquema de principio para el modo de operación "Salida de
frecuencia".
+DELOLWDFLµQ+:
RSFLRQDO
+DELOLWDFLµQVRIWZDUH
6:B(1$%/(



ุ
6

4

6

4

Frecuencia

5
5HWDUGRDOD
FRQH[LµQ

5
9DORUGHVDOLGD

676B(1$%/(
'2

6DOLGDGHIUHFXHQFLDHQ
FXUVR

Inicio de la secuencia de salida
La habilitación para la secuencia de salida debe realizarse siempre en el programa de control
por habilitación software (Página 1201) (SW_ENABLE 0 → 1; MANUAL_DO = 0).
El bit de respuesta (Página 1204)ACK_SW_ENABLE indica la habilitación software pendiente
en el 2PULSE.
Además, es posible ajustar con el parámetro "Función DI (Página 1199)" la entrada digital DI
del 2PULSE como habilitación hardware.
Para trabajar simultáneamente con la habilitación software y la habilitación hardware, la
secuencia de salida se comienza con el primer flanco ascendente de la habilitación hardware
una vez obtenida la habilitación software. El 2PULSE ignora los posteriores flancos
ascendentes de la habilitación hardware durante la secuencia de salida actual.
Cuando se produce la habilitación (flanco ascendente) comienza a contar el retardo a la
conexión y se activa el bit STS_ENABLE. La salida de frecuencia se inicia una vez transcurrido
el retardo a la conexión. Mientras el bit SW_ENABLE está activado, la secuencia de salida se
ejecuta de modo continuo.

1184

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operación "Salida de
frecuencia".
+DELOLWDFLµQ
VRIWZDUH
6:B(1$%/(
$&.B6:B(1$%/(
+DELOLWDFLµQ+:
HQWUDGDGLJLWDO',

3HU¯RGR

3HU¯RGR

6DOLGDGLJLWDO'2
5HWDUGRD 'XUD 3DXVD
FLµQGHO HQWUH
ODFRQH
LPSXOVR LPSXOVRV
[LµQ
9DORUGHVDOLGDN+]

9DORUGHVDOLGD+]

676B(1$%/(

,QLFLDUVHFXHQFLDGHVDOLGD

Cancelación de la secuencia de salida
Borrando la habilitación software (SW_ENABLE = 0) durante el retardo a la conexión o durante
la salida de frecuencia se cancela la secuencia de salida y el bit STS_ENABLE y la salida digital
DO se borran.
A continuación es necesario reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qué señales y de qué forma reacciona el 2PULSE.
Habilitación soft‐
ware SW_ENA‐
BLE

Habilitación hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0→1

0 si el retardo a la conexión > 0
1 si el retardo a la conexión = 0

0→1

iniciar

0→1

no utilizado

0 si el retardo a la conexión > 0
1 si el retardo a la conexión = 0

0→1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0→1

0

0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0

-

1185

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (Página 1199) parametrizable se seleccionan la resolución y el
rango del retardo a la conexión.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resolución de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resolución de
1 ms.

Ajustar y modificar el valor de salida
Con el parámetro "Formato de salida (Página 1199)" se selecciona el rango del valor de salida.
● Si el valor de salida está comprendido entre 1 Hz y 5000 Hz, seleccione el formato de salida
"1 Hz".
● Si el valor de salida es un valor analógico SIMATIC S7 (entre 0 y 27648), seleccione el
formato de salida "Salida analógica S7". Con "Salida analógica S7" se puede alcanzar una
mayor precisión en la especificación de consigna.
El 2PULSE calcula la frecuencia conforme a la fórmula siguiente:
Frecuencia = (consigna / 27648) × 5 kHz
El valor de salida se especifica directamente con el programa de control. El nuevo valor de
frecuencia se emite con el siguiente flanco ascendente de la salida.

Precisión de la frecuencia de salida
La frecuencia de salida parametrizada se emite en la salida digital DO con la siguiente
precisión:
● 0,01 Hz con frecuencia de salida de 0,1 Hz a 800 Hz
● 0,1 Hz con frecuencia de salida de > 800 Hz a 2000 Hz
● 0,5 Hz con frecuencia de salida de > 2000 Hz a 5000 Hz

Ajustar el retardo a la conexión en caso de utilizar la interfaz de control corta
El retardo a la conexión (Página 1199) se define en los parámetros como valor numérico entre
0 y 65535.
Retardo a la conexión parametrizado = base de tiempo × valor numérico ajustado
Si utiliza la interfaz de control corta, con el factor para el retardo a la conexión se puede adaptar
el tiempo parametrizado en el programa de control. El factor se ajusta entre 0 y 255 con una
ponderación de 0,1:
Retardo a la conexión = factor × 0,1 × retardo a la conexión parametrizado

Modo isócrono
En el modo de operación "Salida de frecuencia" el modo isócrono no tiene ningún efecto en la
funcionalidad.

1186

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Parámetros del modo de operación "Salida de frecuencia"
Parámetros del modo de operación "Salida de frecuencia"
La tabla siguiente muestra los parámetros del modo de operación "Salida de frecuencia".
Parámetro

Significado

Rango

Ajuste predetermi‐
nado

Modo de operación (Pági‐
na 1198)

Ajuste el modo de operación
"Salida de frecuencia".

● Salida de impulsos

Modulación de an‐
cho de impulsos

● Modulación de ancho de
impulsos
● Tren de impulsos
● Retardo a la conexión/
desconexión
● Salida de frecuencia

Base de tiempo (Página 1199)

Mediante la base de tiempo se ● 0,1 ms
seleccionan la resolución y el
● 1 ms
rango del retardo a la conexión.

Formato de salida (Página 1199) Dependiendo de la resolución
requerida para la salida de fre‐
cuencia, elija entre 1 Hz o Salida
analógica S7.

● 1 Hz

0,1 ms

1 Hz

● Salida analógica S7

Función DI (Página 1199)

La entrada digital DI se puede
● Entrada
utilizar como entrada o como ha‐ ● Habilitar HW
bilitación HW.

Entrada

Retardo a la conexión (Pági‐
na 1199) 1)

Tiempo que transcurre desde el de 0 a 65535
comienzo de la secuencia de sa‐
lida hasta la salida de la secuen‐
cia de impulsos. El retardo a la
conexión se puede modificar en
el programa de control con el
"Factor de retardo a la cone‐
xión".

0

Sólo si se utiliza la interfaz de control (Página 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.
1)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1187

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Señales de control y realimentación del modo de operación "Salida de frecuencia"
Señales de control y realimentación del modo de operación "Salida de frecuencia"
La tabla siguiente muestra las señales de control y realimentación del modo de operación
"Salida de frecuencia".
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

Señales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 → 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitación hardware

Byte 2:

Byte 6:

Bit 0

Bit 0

Valor de salida

El valor que se aplica a la salida
digital DO como frecuencia.

Dependiendo del formato de sali‐
da:

Palabra 0

Palabra 4

Byte 3

Byte 7

● 1 Hz: 0 ... 5000
● Salida analógica S7:
0 ... 27648
Si se introduce un valor de salida >
5000 ó 27648, el 2PULSE lo limita‐
rá a 5000 ó 27648, respectivamen‐
te.
Factor de retardo a la
conexión

El retardo a la conexión parametri‐
zado se puede modificar antes de
que comience la secuencia de sa‐
lida:
Retardo a la conexión = fac‐
tor × 0,1 × retardo a la conexión
parametrizado

de 0 a 255
Si resulta un retardo a la conexión
< 0,2 ms o con un factor = 0, el re‐
tardo a la conexión efectivo = 0.
Si resulta un retardo a la conexión
> 65,535 s, el retardo a la conexión
se limita a 65,535 s.

Señales de control en caso de utilizar la interfaz de control larga (12 bytes)
Habilitación software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 → 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitación hardware

Byte 4:

Byte 10:

Bit 0

Bit 0

Valor de salida

Valor que se emite en la salida di‐
gital DO como frecuencia.

Dependiendo del formato de sali‐
da:

Palabra 0

Palabra 6

Palabra 2

Palabra 8

● 1 Hz: 0 ... 5000
● Salida analógica S7:
0 ... 27648
Si se introduce un valor de salida
> 5000 ó 27648, el 2PULSE lo limi‐
tará a 5000 ó 27648 respectiva‐
mente.
Retardo a la conexión

El retardo a la conexión se puede
modificar antes de que comience
la secuencia de salida.

de 0 a 65535
Retardo a la conexión = base de
tiempo x valor numérico fijado

Señales de respuesta

1188

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señales de control y
realimentación

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

STS_ENABLE

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

STS_DO

Indica el nivel de señal en la salida
digital DO.

0 = señal 0 en salida digital DO

Byte 0:

Byte 4:

1 = señal 1 en salida digital DO

Bit 1

Bit 1

Observe la velocidad de actualiza‐
ción.
STS_DI
ACK_SW_ENABLE

Indica el nivel de señal en la entra‐ 0 = señal 0 en la entrada digital DI Byte 0:
da digital DI.
1 = señal 1 en la entrada digital DI Bit 2

Byte 4:

Indica el estado de SW_ENABLE.

Bit 2

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

Byte 1:

Byte 5:

SEQ_CNT

no tiene función en este modo de
operación.

–

Reservado

–

0

Bit 0 … 3

Bit 0 … 3

Palabra 2

Palabra 6

Señales de entrada y de salida del modo de operación "Salida de frecuencia"
Señales de entrada y de salida del modo de operación "Salida de frecuencia"
La tabla siguiente muestra las señales de entrada y de salida del modo de operación "Salida
de frecuencia".
Señal de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La habilitación HW se puede
seleccionar con el parámetro
"Función DI".
La señal de la entrada digital DI
se evaluará con el 2PULSE al
inicio de la secuencia de salida.

0 = habilitación HW borrada
1 = habilitación HW obtenida
0 → 1 = inicio de la secuencia
de salida; depende de la habi‐
litación SW

1

5

La frecuencia se emite en la
salida digital DO.

0 = no hay impulso

4

8

Señal de entrada
Habilitación HW

Señal de salida
Frecuencia en la salida digital
DO

1 = impulso

Contador de secuencias (a partir de 6ES7138-4DD01-0AB0)
El 2PULSE dispone de un contador de secuencias para cada canal que permite contar las
secuencias de salida finalizadas.
Es posible vigilar el fin de una secuencia de salida en la interfaz de respuesta utilizando el
contador de secuencias SEC_CNT.
El contador tiene una anchura de 4 bits. Tras un desbordamiento, el contador salta a 0
nuevamente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1189

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Funcionamiento del contador de secuencias
Dependiendo del modo de operación, el contador de secuencias tiene las siguientes funciones:
● Salida de impulsos (Página 1154) y tren de impulsos (Página 1169)
– Sin habilitación hardware, el contador se pone a 1 una vez finalizada la secuencia de
salida.
– Con habilitación hardware, el contador se incrementa cada vez que finaliza una
secuencia de salida.
● Retardo a la conexión/desconexión (Página 1175)
El contador se incrementa en la DO con cada flanco (ascendente y descendente).
● Modulación de ancho de impulsos y salida de frecuencia
El contador no tiene ninguna función.
Borrando la habilitación software (SW_ENABLE = 0) el contador se pone a 0 nuevamente.

Posibilidades de uso
El contador de secuencias se puede utilizar especialmente para:
● Medir (contar) impulsos demasiado cortos.
● Contar las secuencias de salida en combinación con la habilitación hardware.

Función: Medición de intensidad (a partir de 6ES7138-4DD01-0AB0)
La medición de intensidad se puede utilizar en toda una serie de aplicaciones para llevar a
cabo funciones de regulación y diagnóstico. En la interfaz de respuesta puede leerse el valor
medido de intensidad.

Funcionamiento
La medición de intensidad sólo tiene lugar durante la emisión de impulsos en los modos de
operación "Modulación de ancho de impulsos (Página 1159)" y "Tren de impulsos
(Página 1169)". Si no hay salida de impulsos (con STS_ENABLE = 0) se reporta 0 como valor
medido. Con STS_ENABLE = 1 el valor medido es válido.
En los modos de operación "Salida de impulsos", "Retardo a la conexión/desconexión" y
"Salida de frecuencia" siempre se reporta 0 como valor medido de intensidad.
El valor medido de intensidad que se devuelve es un valor medio formado por valores medidos
que se registran dentro de la duración de un período. En períodos < 5 ms, entre dos puntos de
medición individuales existe una separación temporal de 40 µs como máximo. En períodos aún
más largos se registran siempre 128 puntos de medición por período. De esta manera se crea
una separación temporal más larga entre los puntos de medición.

1190

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
En el modo isócrono, en cada instante Ti se suministra un nuevo valor medido de intensidad a
través de la interfaz de respuesta. En el modo no isócrono se suministra un nuevo valor medido
de intensidad aprox. cada 500 µs.
Nota
Para que la medición de intensidad funcione correctamente no se debe integrar ningún diodo
de libre circulación en la carga.

Rango de medida y valor medido
El rango de medida está fijado en una corriente nominal de 2 A.
El valor medido de intensidad se suministra en la interfaz de respuesta (Página 1204) como
valor analógico SIMATIC S7.
● Una intensidad de 2 A corresponde al valor analógico SIMATIC S7 27648.
● En caso de una conexión en paralelo, una intensidad de 4 A corresponde al valor analógico
SIMATIC S7 27648.
Las mediciones de intensidad se pueden realizar hasta el valor analógico SIMATIC S7 32767.
Esto corresponde a una intensidad de 2,4 A. Intensidades por encima de 2 A sólo pueden
presentarse momentáneamente.

Precisión
La precisión de la medición de intensidad asciende al 3 % del rango de medida.
Nota
Esta precisión en la medición de intensidad sólo se puede alcanzar si durante la medición no
se cambia el período.

Función: Control directo de la salida digital DO
Definición
Para probar el actuador conectado, es posible controlar directamente la salida digital DO del
2PULSE. Para ello hay que seleccionar la función por medio del programa de control
(Página 1201) con el bit de control MANUAL_DO activado y el bit de control SW_ENABLE
borrado. La función
● sirve de apoyo para poner en marcha una instalación
● permite aprovechar un canal no utilizado del 2PULSE como DO
Una vez seleccionada la función, el 2PULSE borra los bits de respuesta
(Página 1204)STS_ENABLE y ERR_PULS y se cancela la secuencia de salida en curso. La
función es prioritaria frente al modo de operación seleccionado actualmente.
El estado de la salida digital DO se especifica con el bit de control (Página 1201)SET_DO.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1191

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Borrando el bit de control MANUAL_DO, se deselecciona la función "Control directo de la
salida digital DO". Con ello se borra la salida digital DO. A continuación se puede reiniciar una
secuencia de salida con el flanco ascendente de SW_ENABLE.

Señales de control y realimentación/señal de salida
Señales

Significado

Rango de valores

En caso de utilizar
la interfaz de con‐
trol corta (8 bytes)

En caso de utilizar
la interfaz de con‐
trol larga (12 bytes)

Direc‐
ción del
canal 0

Direc‐
ción del
canal 1

Direc‐
ción del
canal 0

Direc‐
ción del
canal 1

0 = SW_ENABLE borrado

Byte 2:

Byte 6:

Byte 4:

Byte 10:

1 = SW_ENABLE activado

Bit 0

Bit 0

Bit 0

Bit 0

Con el bit de control se se‐ 0 = control directo de la salida DO
lecciona y deselecciona la no seleccionado.
función.
1 = control directo de la salida DO
seleccionado.

Byte 2:

Byte 6:

Byte 4:

Byte 10:

Bit 1

Bit 1

Bit 1

Bit 1

Con el bit de control se es‐ 0 = señal 0 en la salida digital DO
pecifica el estado de la sa‐ 1 = señal 1 en la salida digital DO
lida digital DO.

Byte 2:

Byte 6:

Byte 4:

Byte 10:

Bit 2

Bit 2

Bit 2

Bit 2

Señales de control
SW_ENABLE

MANUAL_DO

SET_DO

Para poder seleccionar la
función tiene que haberse
borrado el bit de control.

Señales de respuesta
STS_ENABLE
STS_DO

Se borra tras seleccionar‐
se la función.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

Bit 0

Bit 0

Indica el nivel de señal en
la salida digital DO.

0 = señal 0 en la salida digital DO

Byte 0:

Byte 4:

Byte 0:

Byte 4:

1 = señal 1 en la salida digital DO

Bit 1

Bit 1

Bit 1

Bit 1

0 = señal 0 en la entrada digital DI

Byte 0:

Byte 4:

Byte 0:

Byte 4:

1 = señal 1 en la entrada digital DI

Bit 2

Bit 2

Bit 2

Bit 2

4

8

4

8

Observe la velocidad de
actualización.
STS_ DI

Indica el nivel de señal en
la entrada digital DI.

Señal de salida
Salida digital
DO

El estado preajustado con 0 = no hay señal
el bit de control SET_DO
1 = señal
se emite por la salida digi‐
tal DO.

Función: Detección de fallos/Diagnóstico
Error de parametrización ERR_PARA
Si el 2PULSE no puede identificar los parámetros como propios, genera un error de
parametrización (Página 1204). Entonces los dos canales no están parametrizados.
El slot configurado del 2PULSE debe coincidir con la configuración real.

1192

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Error de salida de impulsos ERR_PULS
El 2PULSE detecta un error de salida de impulsos específico de un canal en los modos de
operación "Salida de impulsos (Página 1154)", "Retardo a la conexión/desconexión
(Página 1175)" y "Tren de impulsos (Página 1169)".
Las causas y reacciones se encuentran en la descripción del modo de operación
correspondiente y en "Interfaz de respuesta del 2PULSE (Página 1204)".
El error de salida de impulsos detectado se muestra para el canal afectado con el bit de
respuesta (Página 1204)ERR_PULS.

Cortocircuito en la alimentación del sensor ERR_24V
El 2PULSE detecta un cortocircuito de la alimentación del sensor que pone a disposición en los
terminales 2 y 6.
El cortocircuito detectado se indica para ambos canales con el bit de respuesta
(Página 1204)ERR_24V.
Una caída de la tensión de alimentación de 24 V también puede ocasionar una señalización de
cortocircuito.

Cortocircuito en la salida digital ERR_DO
El 2PULSE detecta un cortocircuito en la salida digital del canal.
El cortocircuito detectado se muestra para el canal afectado con el bit de respuesta
(Página 1204)ERR_DO.
Nota
En caso de cortocircuito, la salida digital está en capacidad de suministrar momentáneamente
una intensidad mucho más alta que el valor asignado.

Aviso de diagnóstico
En caso de "cortocircuito en la alimentación del encóder" o "cortocircuito de la salida digital",
el 2PULSE genera un aviso de diagnóstico para la CPU/el maestro conectado. Para ello se
debe habilitar el parámetro "Diagnóstico de grupo (Página 1197)".
Nota
Mediante avisos de diagnóstico se notifica que en un canal o en ambos canales del 2PULSE
ha ocurrido un error. El diagnóstico se puede evaluar con STEP 7.
El registro de diagnóstico DS1 sólo contiene la información correspondiente al canal 0. No
obstante, también se genera una alarma de diagnóstico si ocurren errores en el canal 1. Las
señales de respuesta proporcionan información detallada sobre los errores ocurridos en
ambos canales. Evalúe la interfaz de respuesta (Página 1204) en programas de usuario
nuevos (ver abajo).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1193

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Parámetros
Parámetros

Significado

Rango

Por defecto

Diagnóstico colectivo (Pági‐
na 1197)

Estando habilitado el diag‐
nóstico colectivo, el 2PULSE
genera un aviso de diagnós‐
tico para la CPU/el maestro.

inhibir/habilitar

inhibir

Diagnóstico DO (Pági‐
na 1198)

El 2PULSE detecta un corto‐ Off/On
circuito en las salidas digita‐
les si el "Diagnóstico DO" =
ON.

ON

Señales de respuesta
Señales de respuesta

Significado

Rango

Dirección
del canal 0

Dirección
del canal 1

ERR_PARA

Indica un error de parametriza‐
ción.

0 = no hay error de parametriza‐
ción

Byte 0:

Byte 4:

Bit 5

Bit 5

Byte 0:

Byte 4:

Bit 4

Bit 4

Byte 0:

Byte 4:

Bit 7

Bit 7

1 = error de parametrización
ERR_PULS

Indica un error de salida de impul‐ 0 = no hay error de salida de im‐
sos.
pulsos
1 = error de salida de impulsos

ERR_24V

Indica un cortocircuito de la ali‐
mentación del sensor.

0 = no hay cortocircuito de la ali‐
mentación del sensor
1 = cortocircuito de la alimenta‐
ción del sensor

ERR_DO

Indica un cortocircuito de la salida
digital DO.

0 = no hay cortocircuito de la sali‐ Byte 0:
da digital
Bit 6
1 = cortocircuito de la salida digital

Byte 4:
Bit 6

Conmutación paralela de ambos canales (a partir de 6ES7138-4DD01-0AB0)
Definición
Para alcanzar una intensidad de salida más alta, se pueden conectar en paralelo ambos
canales del 2PULSE. En ese caso se obtiene una intensidad asignada de 4 A. Esto permite
operar directamente en el 2PULSE actuadores con un consumo de corriente más elevado.

Parametrización y manejo
La conexión en paralelo de los dos canales se activa al realizar la parametrización con las
casillas de verificación "Conexión en paralelo canal 0 y 1 (Página 1198)".
Tras efectuar esta activación, el 2PULSE funciona como un módulo monocanal. Cualquier
parametrización o manejo que se lleve a cabo mediante la interfaz de control (Página 1201)
debe efectuarse a través del canal 0. El canal 1 no se puede parametrizar ni manejar.
Asimismo, las señales de respuesta (Página 1204) sólo se suministran para el canal 0.

1194

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Medición de intensidad
En la medición de intensidad se vuelve a calcular un valor medio con base en los valores
medidos en ambos canales. De esta manera resulta un rango de medida de hasta 4 A.
El valor medido de intensidad se suministra en la interfaz de respuesta como valor analógico
SIMATIC S7. En este caso, una intensidad de 4 A corresponde al valor analógico SIMATIC S7
27648.
En la conexión en paralelo, la precisión de la medición de intensidad asciende también al 3 %
del rango de medida.

Asignación de terminales para la conexión en paralelo
Para conectar en paralelo ambos canales del 2PULSE deben interconectarse los siguientes
terminales en el módulo de pines:
● Terminal 3 y terminal 7
● Terminal 4 y terminal 8
La carga (p. ej. un actuador) se conecta luego directamente a los terminales 3 y 4 o bien a los
terminales 7 y 8. La figura siguiente muestra un esquema de conexiones.
38/6(

6)

70(6\
38/6(









(6
''$%

',
9'&
0
'2

















',
9'&
0
'2

&RQH[LµQHQWUHORVWHUPLQDOHV

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1195

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Reacción a STOP de la CPU/del maestro
Definición
Puede parametrizar la reacción (Página 1197) del 2PULSE en caso de fallo del controlador
principal conjuntamente para ambos canales.
Reacción a STOP de la CPU/del
maestro

Reacción específica del canal y estado del 2PULSE

Desconectar DO

borrar la salida digital DO,
borrar STS_ENABLE y
cancelar la actual secuencia de salida.

Continuar el modo de operación

la salida digital DO permanece inalterada,
STS_ENABLE permanece inalterado y
la actual secuencia de salida sigue funcionando.

Aplicar valor sustitutivo DO

emitir el valor sustitutivo parametrizado de la salida digital DO específico del canal,
borrar STS_ENABLE y
cancelar la actual secuencia de salida.

Mantener el último valor DO

la salida digital DO permanece inalterada,
borrar STS_ENABLE y
cancelar la actual secuencia de salida.

Arranque
Para iniciar una nueva secuencia de salida después de un STOP de la CPU/del maestro y con
el bit ACK_SW_ENABLE activado, hay que borrar primero el bit SW_ENABLE. Repita este
borrado hasta que el bit ACK_SW_ENABLE también se borre.
Si el modo de operación seleccionado debe continuar al cambiar de STOP de la CPU/del
maestro a RUN (arranque), la CPU/el maestro no debe borrar las salidas. Solución posible:
active el bit de control "Habilitación software" (SW_ENABLE = 1) en aquella parte del programa
de usuario que se procesa durante el arranque.

Parametrización modificada
El estado adoptado por el 2PULSE en STOP de la CPU/del maestro se mantiene incluso en
caso de parametrización o configuración de la estación ET 200S. Esto ocurre, por ejemplo, al
conectarse la alimentación de la CPU/del maestro o del IM 151 o al retornar la transmisión DP.
Pero en el estado "Continuar el modo de operación" y tras cargar una parametrización o
configuración modificada de la estación ET 200S en la CPU/el maestro, el 2PULSE cancela el
proceso. Como resultado, el 2PULSE hace lo siguiente:
● borra la salida digital DO
● borra STS_ENABLE y
● cancela la actual secuencia de salida.

1196

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

3.5.8.3

Configuración y parametrización del 2PULSE

Parámetros
Seleccionar modo de operación
Modo de operación
Seleccione el modo de operación del 2PULSE en función de sus necesidades:
● 2 Pulse: 8 bytes de datos de salida: compatible con el módulo de versión anterior
La interfaz de control ocupa menos direcciones en la memoria imagen de proceso.
● 2 Pulse interfaz de control ampl.: 12 bytes de datos de salida – posibilidades de control
mejoradas
Las consignas se pueden introducir más fácilmente.

Activar diagnóstico de grupo
Diagnóstico de grupo
El diagnóstico de grupo se activa en la casilla de verificación correspondiente.
Si está habilitado el diagnóstico de grupo, el 2PULSE genera un aviso de diagnóstico para la
CPU o el maestro.

Seleccionar la reacción a STOP de la CPU/del maestro
Reacción a STOP de la CPU/del maestro
En la lista desplegable, seleccione el comportamiento deseado en caso de STOP de la CPU
o del maestro.
● Desconectar DO
● Modo de operación Continuar
● Aplicar valor sustitutivo DO
● Mantener el último valor DO
Encontrará más información sobre las reacciones y el estado del 2PULSE en ""Reacción a
STOP de la CPU o del maestro (Página 1196)".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1197

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Activar conexión en paralelo del canal 0 y 1
Conexión en paralelo canal 0 y 1 (a partir de 6ES7138‑4DD01‑0AB0)
Si necesita una intensidad nominal mayor de 2 A en las salidas digitales, puede conmutar en
paralelo los dos canales del 2PULSE. Para ello active la casilla de verificación "Conexión en
paralelo del canal 0 y 1".
Encontrará más información en "Conexión en paralelo de los dos canales (a partir de
6ES7138-4DD01-0AB0) (Página 1194)".

Canal n
Activar diagnóstico DO
Diagnóstico DO
Si activa la casilla de verificación Diagnóstico DO, el 2PULSE detecta un cortocircuito en las
salidas digitales.

Seleccionar valor sustitutivo de DO
Valor sustitutivo DO
En la lista desplegable seleccione el valor sustitutivo deseado para la salida digital:
● 0
● 1
El parámetro "Valor sustitutivo DO" sólo puede tener un valor distinto de cero si el parámetro
"Reacción a STOP de la CPU/maestro (Página 1197)" está ajustado a "Aplicar valor sustitutivo
DO".

Seleccionar el modo de operación
Modo de operación
En la lista desplegable seleccione el modo de operación deseado:
● Salida de impulsos (Página 1154)
● Modulación de ancho de impulsos (PWM) (Página 1159)
● Tren de impulsos (Página 1169)
● Retardo a la conexión/desconexión (Página 1175)
● Salida de frecuencia (Página 1184) (a partir de 6ES7138‑4DD01‑0AB0)

1198

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Seleccionar formato de salida
Formato de salida
El formato de salida es relevante para los modos de operación "Modulación de ancho de
impulsos (PWM)" y "Salida de frecuencia" (a partir de 6ES7138‑4DD01‑0AB0).
● En el modo de operación "Modulación de ancho de impulsos (PWM) (Página 1159)" es
posible seleccionar el formato de salida en la lista desplegable:
– Por mil
– Salida analógica S7
● En el modo de operación "Salida de frecuencia (Página 1184)" es posible seleccionar en la
lista desplegable el formato de salida:
– 1 Hz
– Salida analógica S7

Seleccionar base de tiempo
Base de tiempo
Seleccione a través de la base de tiempo la resolución y el margen de valores de todos los
tiempos predefinidos:
● 0,1 ms
Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resolución de 0,1 ms.
● 1 ms
Se pueden fijar tiempos desde 1 ms a 65,535 s con una resolución de 1 ms.

Seleccionar función DI
Función DI
La entrada digital DI se puede utilizar como entrada o como habilitación hardware.
En la lista desplegable seleccione la función deseada para la entrada digital:
● Entrada
● Habilitación HW

Definir el retardo a la conexión
Retardo a la conexión
El retardo a la conexión es el tiempo que transcurre desde el inicio de la secuencia de salida
hasta la salida del impulso.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1199

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Registre el retardo a la conexión deseado en el campo de entrada.
Rango de valores admisible: 0 … 65535

Definir duración mínima del impulso
Duración mínima del impulso
La duración mínima del impulso es relevante para los modos de operación "Modulación de
ancho de impulsos" (PWM)" (Página 1159) y "Salida de frecuencia (Página 1184)" (a partir de
6ES7138‑4DD01‑0AB0).
La duración mínima de impulso y la pausa mínima entre impulsos se parametrizan con el
parámetro "Duración mínima de impulso"; ambos tienen siempre el mismo valor.
Por ejemplo, introduzca aquí el tiempo de respuesta del elemento final de control conectado a
la salida digital DO.
Rango de valores admisible: 0 … 65535

Definir duración del impulso
Duración de impulso
La duración de impulso es relevante para el modo de operación "Tren de impulsos
(Página 1169)".
Por ejemplo, introduzca aquí el tiempo de respuesta del actuador conectado a la salida digital
DO.
Rango de valores admisible:
● con base de tiempo 1 ms: de 1 a 65535
● con base de tiempo 0,1 ms: de 2 a 65535

Definir duración del período
Período
La duración del período es relevante para los modos de operación "Modulación de ancho de
impulsos (PWM) (Página 1159)" y "Tren de impulsos (Página 1169)".
Al ajustar la duración del período, observe la duración mínima del impulso ajustada / la
duración del impulso y el tiempo de respuesta del elemento final de control conectado a la
salida digital DO. La duración del período debería ser siempre un múltiplo del tiempo de
respuesta del elemento final de control conectado a la salida digital DO.
La duración del período se define como valor numérico en función de la base de tiempo:
● con base de tiempo 1 ms: de 1 a 65535
● con base de tiempo 0,1 ms: de 2 a 65535

1200

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Duración de período parametrizada = Base de tiempo x valor numérico predefinido

Interfaz de control y realimentación del 2PULSE
Interfaz de control del 2PULSE
Nota
Para el 2PULSE, los datos siguientes de la interfaz de control son datos relacionados o, lo que
es lo mismo, coherentes:
● Bytes 0 a 3
● Bytes 4 a 7

Asignación de la interfaz de control corta (8 bytes)
La siguiente tabla muestra la asignación de la interfaz de control corta (salidas) del 2PULSE.
Dirección

Asignación

Canal 0

Canal 1

Palabra 0

Palabra 4

según el modo de operación
● Salida de impulsos: duración del impulso
● Modulación de ancho de impulsos: valor de salida
● Tren de impulsos: número de impulsos
● Retardo a la conexión/desconexión: retardo a la desconexión
● Salida de frecuencia: Frecuencia de salida (a partir de 6ES7138‑4DD01‑0AB0)

Byte 2

Byte 6

Bit 7: reserva = 0
Bit 6: reserva = 0
Bit 5: reserva = 0
Bit 4: reserva = 0
Bit 3: reserva = 0
Bit 2: SET_DO
Bit 1: MANUAL_DO
Bit 0: SW_ENABLE

Byte 3

Byte 7

según el modo de operación
● Salida de impulsos: factor de retardo a la conexión
● Modulación de ancho de impulsos: factor de período
● Tren de impulsos: factor de período
● Retardo a la conexión/desconexión: factor de retardo a la conexión
● Salida de frecuencia: Factor de retardo a la conexión (a partir de
6ES7138‑4DD01‑0AB0)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1201

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

Asignación de la interfaz de control larga (12 bytes) (a partir de 6ES7138‑4DD01‑0AB0)
La siguiente tabla muestra la asignación de la interfaz de control larga (salidas) del 2PULSE.
Dirección

Asignación

Canal 0

Canal 1

Palabra 0

Palabra 6

según el modo de operación
● Salida de impulsos: duración del impulso
● Modulación de ancho de impulsos: valor de salida
● Tren de impulsos: número de impulsos
● Retardo a la conexión/desconexión: retardo a la desconexión
● Salida de frecuencia: frecuencia de salida

Palabra 2

Palabra 8

según el modo de operación
● Salida de impulsos: Retardo a la conexión
● Modulación de ancho de impulsos: Período
● Tren de impulsos: Período
● Retardo a la conexión/desconexión: Retardo a la conexión
● Salida de frecuencia: Retardo a la conexión

Byte 4

Byte 10

Bit 7: reserva = 0
Bit 6: reserva = 0
Bit 5: reserva = 0
Bit 4: reserva = 0
Bit 3: reserva = 0
Bit 2: SET_DO
Bit 1: MANUAL_DO
Bit 0: SW_ENABLE

Byte 5

Byte 11

según el modo de operación
● Salida de impulsos: no utilizado
● Modulación de ancho de impulsos: factor de retardo a la conexión
● Tren de impulsos: relación impulso-pausa
● Retardo a la conexión/desconexión: no utilizado
● Salida de frecuencia: no utilizado

Significado de las señales de control
Señal de control

Significado

Modo de operación "Salida de impulsos":
● Duración del impulso 1) 2)

Tiempo en que la salida digital DO está activada una vez transcurrido el
retardo a la conexión.

● Factor de retardo a la conexión 1)

El retardo a la conexión parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexión = factor × 0,1 × retardo a la conexión parametrizado

● Retardo a la conexión 2)

Tiempo que transcurre desde el comienzo de la secuencia de salida hasta
la salida de la secuencia de impulsos.

Modo de operación "Modulación de ancho de impulsos":

1202

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señal de control
● Valor de salida

Significado
Valor emitido con modulación de ancho de impulsos en la salida digital DO
una vez transcurrido el retardo a la conexión.

1) 2)

● Factor de período 1)

El período parametrizado se puede modificar:
Período = factor × 0,1 × período parametrizado

● Período 2)

Al ajustar el período observe la duración mínima del impulso ajustada y el
tiempo de respuesta del elemento final de control conectado a la salida
digital DO.

● Factor de retardo a la conexión 2)

El retardo a la conexión parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexión = factor × 0,1 × retardo a la conexión parametrizado

Modo de operación "Tren de impulsos":
● Número de impulsos 1)

Número de impulsos que se emiten en la salida digital DO una vez trans‐
currido el retardo a la conexión.

2)

● Factor de período 1)

El período parametrizado se puede modificar antes de que comience la
secuencia de salida:
Período = factor × 0,1 × período parametrizado

● Período 2)

Al ajustar el período observe la duración mínima del impulso ajustada y el
tiempo de respuesta del elemento final de control conectado a la salida
digital DO.

● Relación impulso-pausa

Es posible ajustar la relación entre la duración del impulso y la pausa entre
impulsos:
Relación impulso-pausa = (consigna / 255) × período

2)

Modo de operación "Retardo a la conexión/desconexión":
● Retardo a la desconexión 1)

2)

Tiempo que transcurre entre el flanco descendente de la entrada digital DI
y su salida a través de la salida digital DO.

● Factor de retardo a la conexión 1)

El retardo a la conexión parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexión = factor × 0,1 × retardo a la conexión parametrizado

● Retardo a la conexión 2)

Tiempo que transcurre entre el flanco ascendente de la entrada digital DI
y su salida a través de la salida digital DO.

Modo de operación "Salida de frecuencia" (a partir de 6ES7138‑4DD01‑0AB0):
● Frecuencia de salida 1)

2)

Frecuencia que se emite en la salida digital DO una vez transcurrido el
retardo a la conexión.

● Factor de retardo a la conexión 1)

El retardo a la conexión parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexión = factor × 0,1 × retardo a la conexión parametrizado

● Retardo a la conexión 2)

Tiempo que transcurre desde el comienzo de la secuencia de salida hasta
la salida de la frecuencia.

Control directo de la salida digital:
● MANUAL_DO

El bit de control permite seleccionar y deseleccionar la función "Control
directo de la salida digital DO".

● SET_DO

El bit de control permite ajustar el estado de la salida digital DO.

Habilitación de software
● SW_ENABLE

1)

La habilitación software debe activarse siempre en el programa de control.
Si no se utiliza una habilitación HW, la secuencia de salida será iniciada
por el flanco ascendente de la habilitación de software. Si se desactiva la
habilitación de software, la secuencia de salida actual se cancela.

en caso de utilizar la interfaz de control corta

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1203

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
2)

en caso de utilizar la interfaz de control larga

Interfaz de realimentación del 2PULSE
Nota
Para el 2PULSE, los datos siguientes de la interfaz de realimentación son datos relacionados,
es decir, coherentes:
● Bytes 0 a 3
● Bytes 4 a 7

Asignación de la Interfaz de realimentación
La siguiente tabla muestra la asignación de la interfaz de realimentación (entradas) del
2PULSE.
Dirección

Asignación

Canal 0

Canal 1

Byte 0

Byte 4

Bit 7: ERR_24V
Bit 6: ERR_DO
Bit 5: ERR_PARA
Bit 4: ERR_PULS
Bit 3: ACK_SW_ENABLE
Bit 2: STS_DI
Bit 1: STS_DO
Bit 0: STS_ENABLE

Byte 1

Byte 5

Bit 0 … Bit 3: Contador de secuencias SEQ_CNT (a partir de 6ES7138‑4DD01‑0AB0)
Bit 4 … Bit 7: reserva = 0

Palabra 2

Palabra 6

Valor de medición de intensidad (a partir de 6ES7138‑4DD01‑0AB0)

Nota
Dependiendo del módulo de interfaz utilizado IM 151 y de la configuración, en el caso de que
se produzca un fallo en el módulo, se devuelve 16#7FFF7FFF o 16#00000000 como valor de
realimentación (valor sustitutivo).

Significado de las señales de realimentación
Señal de realimentación

Significado

ACK_SW_ENABLE

Indica el estado pendiente de la habilitación software en el módulo 2PULSE.

ERR_24V

Indica un cortocircuito o bien una caída de la alimentación del sensor.

ERR_DO

Indica un cortocircuito en la salida digital.

ERR_PARA

Indica un error de parametrización.

1204

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.5 Regulación PID (S7-300, S7-400)
Señal de realimentación

Significado

ERR_PULS

Modo de operación "Salida de impulsos":
Indica un error de salida de impulsos. Si una vez transcurrido el retardo a la conexión se acorta
la duración de impulso de manera que el tiempo sea más corto que el tiempo ya transcurrido,
el 2PULSE lo detectará.
Cuando comience la siguiente secuencia de salida el 2PULSE borrará el bit de realimentación
ERR_PULS.
Modo de operación "Tren de impulsos":
Indica un error de salida de impulsos. Si una vez transcurrido el retardo a la conexión se reduce
el número de impulsos y si el número de impulsos reducido ya se ha emitido, el 2PULSE lo
detectará.
Cuando comience la siguiente secuencia de salida, el 2PULSE borrará el bit de realimentación
ERR_PULS.
Modo de operación "Retardo a la conexión/desconexión":
Indica un error en la salida de impulsos cuando la duración del impulso o la pausa entre
impulsos es demasiado corta.
El 2PULSE borra el bit de realimentación ERR_PULS con el siguiente flanco ascendente de la
habilitación software o con el siguiente flanco en la entrada digital DI.

STS_ DI

Indica el nivel de señal en la entrada digital DI.

STS_DO

Indica el nivel de señal en la salida digital DO.

STS_ENABLE

Modo de operación "Salida de impulsos":
Se activa al comenzar la secuencia de salida hasta que termine la duración de impulsos. Si se
desactiva la habilitación software (SW_ENABLE) o si el 2PULSE detecta un error de salida de
impulsos ERR_PULS, entonces se borra STS_ENABLE.
Modo de operación "Modulación de ancho de impulsos" (PWM):
Se activa al comenzar la secuencia de salida. Si se borra la habilitación software (SW_ENA‐
BLE), STS_ENABLE también se borra.
Modo de operación "Tren de impulsos":
Se activa al comenzar la secuencia de salida hasta la salida del último impulso. Si se desactiva
la habilitación software (SW_ENABLE) o si el 2PULSE detecta un error de salida de impulsos
ERR_PULS, entonces se borra STS_ENABLE.
Modo de operación "Retardo a la conexión/desconexión":
Señaliza que el 2PULSE ha detectado la habilitación software (SW_ENABLE) e indica el
estado de la misma.
Modo de operación "Salida de frecuencia" (a partir de 6ES7138‑4DD01‑0AB0):
se activa al comenzar la secuencia de salida. Si se borra la habilitación software (SW_ENA‐
BLE), STS_ENABLE también se borra.

SEQ_CNT (a partir de
6ES7138‑4DD01‑0AB0)

Cuenta las secuencias de salida finalizadas en los modos de operación "Salida de impulsos",
"Tren de impulsos" y "Retardo a la conexión/desconexión".
Sin función en los modos "Modulación de ancho de impulsos" y "Salida de frecuencia".

Valor de medición de inten‐
sidad (a partir de
6ES7138‑4DD01‑0AB0)

Intensidad en la DO como valor analógico SIMATIC S7

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1205

Regulación PID
3.5 Regulación PID (S7-300, S7-400)

3.5.8.4

Diagnóstico del 2PULSE

Diagnóstico con indicadores LED
Indicador LED del 2PULSE

6)

①
②
③

1





2





3

Error de grupo (rojo)
Indicador de estado de la entrada digital (verde)
Indicador de estado de la salida digital (verde)

Indicadores de estado y error mediante los LEDs del 2PULSE
La siguiente tabla muestra los indicadores de estado y error del 2PULSE.
Evento (LED)
SF

1

5

4

Causa

Solución

No hay parametrización. Hay un aviso
de diagnóstico.

Compruebe los bits de error en la in‐
terfaz de realimentación. Evalúe el
aviso de diagnóstico.

8

O
N
O
N

Entrada DI0 activada en el canal 0.
O
N

Entrada DI1 activada en el canal 1.
O
N

Salida DO0 activada en el canal 0.
O
N

Salida DO1 activada en el canal 1.

Tipos de error
En el manual de producto del módulo de interfaz utilizado en la estación ET 200S encontrará
información sobre la estructura del diagnóstico de canal.

1206

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.6 Funciones auxiliares

Tipos de error del 2PULSE
La tabla siguiente muestra los tipos de error del 2PULSE.

1D

Tipo de error

Significado

00001:
cortocircuito

Cortocircuito de la alimentación del en‐
códer o actuador.
Una caída de la tensión de alimentación
de 24 V también puede ocasionar este
aviso de error.

9D

01001:
Error

16D

Módulo no parametrizado.
10000:
Error de parametri‐
zación

Solución
Compruebe el cableado de los
interruptores y actuadores. Co‐
rregir el cableado del proceso.

Ha aparecido un error interno en el mó‐ Sustituir el módulo.
dulo.
Corregir la parametrización.

También es posible obtener una evaluación de errores simplificada en la interfaz de
realimentación (Página 1204) a través de los bits correspondientes.

3.6

Funciones auxiliares

3.6.1

Polyline

Polyline
La instrucción Polyline ofrece una función con la característica de la línea poligonal con cuyos
nodos puede linealizarse, p. ej., el comportamiento de sensores no lineales.
La instrucción Polyline puede utilizarse con la CPU S7-1500 a partir de la versión de firmware
2.0 y con la CPU S7-1200 a partir de la versión de firmware 4.2.

Más información
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1207

Regulación PID
3.6 Funciones auxiliares

3.6.2

SplitRange

SplitRange
La instrucción SplitRange divide el rango de valores de salida del regulador PID en varios
subrangos. Dichos subrangos permiten regular un proceso influido por varios actuadores.
La instrucción SplitRange puede utilizarse con la CPU S7-1500 a partir de la versión de
firmware 2.0 y con la CPU S7-1200 a partir de la versión de firmware 4.2.

Más información
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

3.6.3

RampFunction

RampFunction
La instrucción RampFunction limita la velocidad de cambio de una señal. Un salto de señal en
la entrada se emite como función de rampa del valor de salida, con el fin de conseguir una
respuesta de regulación más suave sin influir en la respuesta a perturbaciones, por ejemplo.
La instrucción RampFunction puede utilizarse con la CPU S7-1500 a partir de la versión de
firmware 2.0 y con la CPU S7-1200 a partir de la versión de firmware 4.2.

Más información
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

1208

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Regulación PID
3.6 Funciones auxiliares

3.6.4

Filter_PT1

Filter_PT1
La instrucción Filter_PT1 es un elemento de transferencia proporcional con un retardo de
primer orden. Filter_PT1 se puede utilizar como filtro paso bajo, elemento de retardo o bloque
de simulación de proceso.
La instrucción Filter_PT1 puede utilizarse con la CPU S7-1500 a partir de la versión de
firmware 2.0 y con la CPU S7-1200 a partir de la versión de firmware 4.2.

Más información
Descripción Filter_PT1
Modo de operación Filter_PT1
Parámetros de entrada Filter_PT1
Parámetros de salida Filter_PT1
Variables estáticas Filter_PT1
Parámetro ErrorBits

3.6.5

Filter_PT2

Filter_PT1
La instrucción Filter_PT2 es un elemento de transferencia proporcional con un retardo de
segundo orden. Filter_PT2 se puede utilizar como filtro paso bajo, elemento de retardo o
bloque de simulación de proceso.
La instrucción Filter_PT2 puede utilizarse con la CPU S7-1500 a partir de la versión de
firmware 2.0 y con la CPU S7-1200 a partir de la versión de firmware 4.2.

Más información
Descripción Filter_PT2
Modo de operación Filter_PT2
Parámetros de entrada Filter_PT2
Parámetros de salida Filter_PT2
Variables estáticas Filter_PT2
Parámetro ErrorBits

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1209

Regulación PID
3.6 Funciones auxiliares

3.6.6

Filter_DT1

Filter_PT1
La instrucción Filter_DT1 es un elemento diferenciador con un retardo de primer orden.
Filter_DT1 se puede utilizar como filtro paso alto, elemento diferenciador o control anticipativo.
La instrucción Filter_DT1 puede utilizarse con la CPU S7-1500 a partir de la versión de
firmware 2.0 y con la CPU S7-1200 a partir de la versión de firmware 4.2.

Más información
Descripción Filter_DT1
Modo de operación Filter_DT1
Parámetros de entrada Filter_DT1
Parámetros de salida Filter_DT1
Variables estáticas Filter_DT2
Parámetro ErrorBits

1210

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1

High precision input/output with Time-based IO

4.1.1

Principios básicos de Time-based IO

4.1.1.1

Uso de Time-based IO

4

Muchos procesos de una instalación requieren una reproducibilidad lo más precisa posible en
términos de tiempo. La reproducibilidad se puede optimizar hasta cierto punto con tiempos de
ciclo más cortos de la CPU. La utilización de In-/Output de alta precisión con Time-based IO
permite una reproducibilidad más precisa que la que se alcanza con la optimización del tiempo
de ciclo de la CPU. Otra ventaja de Time-based IO es que el ciclo de aplicación no depende de
la base de tiempo.
A continuación encontrará una selección de ámbitos de aplicación típicos que pueden
beneficiarse de esta tecnología.

Tiempos de reacción definidos
Añadiendo un tiempo predefinido a la etiqueta de fecha/hora de un flanco en la entrada digital
se puede emitir una señal de salida que reacciona con un tiempo de retardo preciso
independientemente del ciclo de aplicación.

Medición de longitud
Mediante la diferencia de dos etiquetas de fecha/hora de entrada y una velocidad de transporte
asociada se puede determinar la longitud de un producto.

Leva electrónica
A partir de una información de posición capturada de forma isócrona (p. ej., de un módulo de
contador o un eje) se puede extrapolar la posterior evolución del movimiento. Basándose en
esto se calcula la fecha y hora de una posición de conmutación (posición de levas) y se
transfiere al módulo TIO (datos). De este modo se produce el evento de conmutación
exactamente en la posición deseada.

Dosificación
Si se especifica un flanco de conexión y un flanco de desconexión en una salida digital
controlada por tiempo se puede abrir una válvula durante un tiempo determinado y dosificarse
la cantidad de líquido correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1211

Time-based IO
4.1 High precision input/output with Time-based IO

4.1.1.2

Comportamiento en el tiempo de Time-based IO

Comportamiento en el tiempo de la tecnología estándar
El comportamiento en el tiempo de las entradas/salidas en la tecnología estándar depende de
los siguientes factores:
● Programa de CPU (estructura del programa)
● Tiempos de ciclo de bus (bus de campo, bus de fondo)
● Tiempo de ciclo de los módulos E/S
● Tiempo de ciclo interno de los sensores/actuadores
Una información determinista sobre
● cuándo se ha producido un evento de entrada (p. ej., señal de sensor);
● cuándo un evento de entrada resulta efectivo el evento de salida (p. ej. la salida conmuta);
es inexacta por los factores de tiempo antes mencionados.

3URJUDPDGHXVXDULR
&386
'HWHFFLµQGHVH³DOHV
3URFHVDPLHQWRGHVH³DOHV
6DOLGDGHVH³DOHV
3URJUDPDGH&38 HVWUXFWXUDGHOSURJUDPD
7LHPSRVGHFLFORGHEXV EXVGHFDPSREXVGHIRQGR
7LHPSRGHFLFORGHORVPµGXORV(6
7LHPSRGHFLFORLQWHUQRGHORVVHQVRUHVDFWXDGRUHV

7LHPSR
WaPV

WaPV
7LHPSRGHUHDFFLµQGHVHDGRPV
6DOLGDDFWLYD

(QWUDGDGHWHFWDGD

Características de Time-based IO
Funcionalidad E/S controlada por tiempo
Time-based IO está disponible para un procesamiento de señales E/S basado en el tiempo.
Así pues, todas las señales de entrada se refieren a una hora (TIO_Time). Las señales de
entrada reciben la etiqueta de fecha/hora t1. Tras el procesamiento de señales el evento de
salida también se puede enlazar con el TIO_Time y devolverse a la hora deseada. La salida se
realiza a la hora t2.
A continuación se muestra un ejemplo para Time-based IO:

1212

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
3URJUDPDGHXVXDULR
&386
'HWHFFLµQGHVH³DOHV HWLTXHWDGHIHFKDKRUDW
3URFHVDPLHQWRGHVH³DOHV
6DOLGDGHVH³DOHV HWLTXHWDGHIHFKDKRUDW

7,2B7LPH
WwV

WwV
7LHPSRGHUHDFFLµQGHVHDGRwV

(QWUDGDGHWHFWDGD

6DOLGDDFWLYD

Independencia y enfoque del Time-based IO
La base de Time-based IO es la base de tiempo común (TIO_Time) de todos los componentes
que intervienen. Utilizando TIO_Time en Time-based IO la precisión de la salida es
independiente de los siguientes elementos:
● Programa de CPU (estructura del programa)
● Tiempos de ciclo de bus (bus de campo, bus de fondo)
● Tiempo de ciclo de los módulos E/S
El enfoque de Time-based IO no reside en el tiempo de reacción de E/S sino en la previsibilidad
(determinismo) de las señales E/S. Con Time-based IO es posible reaccionar a una señal de
entrada en un tiempo definido con una señal de salida. Utilizando Time-based IO se debe tener
en cuenta el tiempo de reacción mínimo que depende del sistema.
Time-based IO significa:
● Funcionalidades E/S de alta precisión ejecutadas
● Procesos E/S controlados por tiempo

Precisiones
Para la capacidad funcional de Time-based IO la precisión es crucial.
La precisión es una característica de los módulos TIO e indica con qué nivel de desviación se
logra la reacción que se debe alcanzar. Con Time-based IO la precisión y la reproducibilidad
de la reacción son del orden de microsegundos.

Tiempo de reacción
Dependiendo de la configuración, además de una alta precisión se obtiene un tiempo de
reacción mínimo a un evento de entrada.
El tiempo de reacción es el intervalo desde el evento de entrada hasta el evento de salida
deseado.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1213

Time-based IO
4.1 High precision input/output with Time-based IO
Para el tiempo de reacción mínimo rige lo siguiente:
3 × ciclo de aplicación TAPP

4.1.1.3

Entorno del sistema

Introducción
A continuación se muestran las posibles configuraciones del sistema con PROFINET para el
uso de Time-based IO.

Aplicación con STEP 7 (TIA Portal)
STEP 7 (TIA Portal)
SIMATIC S7-PCT

Industrial Ethernet

Sistema de automatización:
S7-1500

PROFINET IO IRT
ET 200SP con
IM 155-6 PN HF y
TM Timer DIDQ 10x24V

Sensores/actuadores de 24 V, p. ej.,
encóders increm. o gen. impulsos

4.1.1.4

ET 200MP con
IM 155-5 PN HF y
TM Timer DIDQ 16x24V

Sensores/actuadores de 24 V, p. ej.,
encóders increm. o gen. impulsos

Requisitos de hardware

Introducción
A continuación se determinan las características de componentes de hardware necesarias
para Time-based IO. Además, se dan ejemplos con módulos concretos.

1214

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Requisitos
Componente

Características

Ejemplos

CPU

Modo isócrono/PROFINET IO IRT: ● CPU 1511-1 PN
permite tiempos de reacción defini‐
dos y mucha precisión en el com‐
portamiento de la instalación.

Módulo de interfaz
ET 200

Soporta modo isócrono

● ET 200SP con
IM 155-6 PN HF (a partir del firmware
V2.1)
● ET 200MP con
IM 155-5 PN HF

Módulo E/S

Módulo TIO

● ET 200SP:
TM Timer DIDQ 10x24V
● ET 200MP:
TM Timer DIDQ 16x24V (versión
mínima de firmware V1.0.1)

4.1.1.5

Requisitos de software de configuración

Introducción
A continuación se muestra un listado de las versiones de software que soportan la función
"Time-based IO".

Requisitos
Software de configura‐ Requisitos
ción

Componentes de hardware sopor‐ Más información
tados

STEP 7 (TIA Portal) a
partir de V16

● Sistema de automatización
S7‑1500

PROFINET IO IRT
o modo isócrono
en el bus de fondo

● Sistemas de periferia
descentralizada ET 200SP y
ET 200MP

Ayuda en pantalla
de STEP 7 (TIA
Portal)

● TM Timer DIDQ 16x24V
● TM Timer DIDQ 10x24V

Para más información sobre el modo isócrono, consulte los manuales Modo isócrono (https://
support.industry.siemens.com/cs/ww/es/view/109755401) y PROFINET con STEP 7 (http://
support.automation.siemens.com/WW/view/es/49948856).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1215

Time-based IO
4.1 High precision input/output with Time-based IO

Instrucciones de TIO
Las instrucciones de TIO son bloques de función específicos para el uso de Time-based IO.
Para ello se dispone de las siguientes instrucciones de TIO:
● TIO_SYNC
● TIO_DI
● TIO_DI_ONCE
● TIO_DQ

4.1.1.6

Implantación técnica

Introducción
A continuación, podrá familiarizarse con los aspectos esenciales de Time-based IO y ver con
qué funciones de SIMATIC se realizan los aspectos descritos.

Sincronización de los módulos que intervienen (base de tiempo común)
La tecnología Time-based IO utiliza el modo isócrono para todos los dispositivos que
intervienen.
El modo isócrono permite sincronizar varios módulos TIO con una base de tiempo común. El
principio básico de la base de tiempo común para los módulos TIO es el tiempo relativo
TIO_Time.
Para más información sobre el modo isócrono, consulte los manuales Modo isócrono (https://
support.industry.siemens.com/cs/ww/es/view/109755401) y PROFINET con STEP 7 (http://
support.automation.siemens.com/WW/view/es/49948856).

TIO_Time
El TIO_Time es la base de tiempo central de la que se obtienen todas las etiquetas de fecha/
hora.
El TIO_Time tiene las siguientes características:
● Base de tiempo común para todos los módulos TIO que se sincronizan a través de las
instrucciones de TIO TIO_SYNC.
● Cada vez que arranca la CPU se empieza a contar el tiempo de nuevo.
● El TIO_Time es del tipo de datos LTime (p. ej., LT#14s830ms652us315ns).

1216

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
● Todas las etiquetas de fecha/hora válidas se refieren al TIO_Time:
– La etiqueta de fecha/hora de entrada de los módulos TIO se convierte a TIO_Time en las
instrucciones de TIO TIO_DI y TIO_DI_ONCE.
– Las etiquetas de fecha/hora de salida se convierten a etiquetas de fecha/hora de salida
de los módulos TIO en la instrucción de TIO TIO_DQ.
● El valor de TIO_TIME se corresponde con la fecha y hora actuales respecto a las
instrucciones de TIO y se actualiza al llamar TIO_SYNC. Si se desea que una salida no
haga referencia a una etiqueta de fecha/hora de entrada anterior, sino a la fecha y hora
actuales, se puede utilizar el valor de TIO_TIME como base para la etiqueta de fecha/hora
de salida. Ejemplo: salida de un flanco en 20 ms:
TIO_DQ.TimeStampRE=TIO_SYNC_DATA.TIO_TIME+LT#20ms)

Instrucciones de TIO en el OB isócrono
Las instrucciones de TIO deben llamarse en un OB del tipo "Synchronous Cycle" o "MCPostServo".
Para más información al respecto, consulte el capítulo Programación.
Nota
Las instrucciones de TIO también soportan el modo isócrono reducido. En una reducción de
ciclo, el ciclo de aplicación es mayor que el ciclo de emisión.
Nota
Las instrucciones de TIO no deben llamarse en un OB de tipo "MC-PreServo".
Si utiliza un OB de tipo "MC-PostServo", podrá decidir por separado para cada módulo TIO si
se utiliza o bien con objetos tecnológicos de Motion Control o bien con instrucciones de TIO.
Si llama las instrucciones de TIO en un OB de tipo "MC-PostServo", deberá utilizar el modelo
EVA y, además, no podrá utilizar reducciones de ciclo.
Llamar las instrucciones de TIO en un OB de tipo "MC-PostServo" con "MC-Servo" con
reducción de ciclo puede provocar un cálculo incorrecto de la etiqueta de fecha/hora.

Modos para la actualización de la memoria imagen de proceso
En modo isócrono, se puede influir en el orden de actualización de la memoria imagen parcial
de proceso de los datos de entrada y de salida. Para ello, se pueden seleccionar los siguientes
modelos de ejecución del programa:
● Modelo EVA (factor de ciclo de aplicación = 1)
● Modelo AEV (factor de ciclo de aplicación >= 1)
Las abreviaturas E, V, A corresponden a los siguientes procesos: E = Eingabe (entrada), V=
Verarbeitung (procesamiento), A = Ausgabe (salida).
Para más información sobre el factor de ciclo de aplicación, consulte el manual PROFINET con
STEP 7 (http://support.automation.siemens.com/WW/view/es/49948856).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1217

Time-based IO
4.1 High precision input/output with Time-based IO

Modelo EVA (factor de ciclo de aplicación = 1)
El programa de usuario se inicia tras el tiempo de retardo. Actualice primero en el programa de
usuario, llamando la instrucción del sistema SYNC_PI, la correspondiente memoria imagen
parcial del proceso de las entradas. A continuación empieza el procesamiento (p. ej. el cálculo
de la etiqueta de fecha/hora). Al final del programa de usuario se actualiza la correspondiente
memoria imagen parcial del proceso de las salidas en la CPU mediante SYNC_PO.
6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

2% 6\QF

2% 6\QF

7$33
&38 2%6\QF

2% 6\QF

(

9

$

352),1(7
,2'HYLFH

7,

72

7,

7UDQVPLVLµQGHODVHQWUDGDVVDOLGDV
7LHPSRGHUHWDUGR
6HQG&ORFN

72

7$33 &LFORGHDSOLFDFLµQ
6<1&B3,

6<1&B32

7LHPSRGHFLFORGHHPLVLµQ

7,

7LHPSRSDUDOHHUORVGDWRVGHHQWUDGD

72

7LHPSRKDVWDODHPLVLµQGHORVGDWRVGHVDOLGD
0RPHQWRGHODOHFWXUDGHORVGDWRVGHHQWUDGD
0RPHQWRGHODHPLVLµQGHORVGDWRVGHVDOLGD

2% 6\QF 2%GHWLSR6\QFKURQRXV&\FOH0&3UH6HUYRR0&3RVW6HUYR

Características del modelo EVA:
● Permite tiempos de reacción cortos
● El ciclo de aplicación no puede ser mayor que el tiempo de ciclo de emisión.
De este modo hay menos tiempo disponible para la aplicación que con el modelo AEV.

1218

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Modelo AEV (factor de ciclo de aplicación >= 1)
El programa de usuario se inicia tras el tiempo de retardo. En el modo PIP_Mode 0, la
instrucción TIO_SYNC se encarga de la actualización la memoria imagen de proceso. En los
otros modos, actualice primero la correspondiente memoria imagen parcial del proceso de las
salidas en el programa de usuario, llamando la instrucción del sistema SYNC_PO. Así, los
datos de salida que se han calculado en el anterior ciclo de red se activan durante el siguiente
ciclo de red (TO). A continuación se actualiza la correspondiente memoria imagen parcial del
proceso de las entradas en la CPU mediante SYNC_PI. Una vez transferidos los datos
empieza el procesamiento (p. ej. el cálculo de las etiquetas de fecha/hora).
6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

7$33
$(

&38 2% 6\QF

9

$(

9

352),1(7
,2'HYLFH

7,

72

7,

72

7,

7UDQVPLVLµQGHODVHQWUDGDVVDOLGDV
7LHPSRGHUHWDUGR
6HQG&ORFN

72

7,

72

7$33 &LFORGHDSOLFDFLµQ
6<1&B3,

6<1&B32

7LHPSRGHFLFORGHHPLVLµQ

7,

7LHPSRSDUDOHHUORVGDWRVGHHQWUDGD

72

7LHPSRKDVWDODHPLVLµQGHORVGDWRVGHVDOLGD
0RPHQWRGHODOHFWXUDGHORVGDWRVGHHQWUDGD
0RPHQWRGHODHPLVLµQGHORVGDWRVGHVDOLGD

2% 6\QF 2%GHWLSR6\QFKURQRXV&\FOH0&3UH6HUYRR0&3RVW6HUYR

Características del modelo AEV:
● El tiempo de reacción es mayor que con el modelo EVA.
● Se permite un ciclo de aplicación mayor que el tiempo de ciclo de emisión.
De este modo hay más tiempo disponible para la aplicación que con el modelo EVA.

Influencia de la precisión
Para evaluar la precisión se necesitan las precisiones de
● Módulo TIO
● Sensor/actuador
En las hojas de datos del módulo correspondiente puede consultar el valor de la precisión.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1219

Time-based IO
4.1 High precision input/output with Time-based IO
Se deben sumar los distintos Jitter de los módulos TIO y los sensores/actores. El resto de
factores de influencia pueden despreciarse.

4.1.2

Configurar y parametrizar

4.1.2.1

Requisitos

Introducción
Para utilizar Time-based IO se necesitan componentes de software adicionales. Además, tiene
que haber creado la configuración estándar para su proyecto.
A continuación conocerá la configuración estándar para Time-based IO.

Requisitos
En STEP 7 (TIA Portal):
● Se ha creado el proyecto.
● Se ha creado y parametrizado la CPU.
● Se han creado y parametrizado el sistema de automatización y los módulos.
● Si se utiliza una estación ET 200: Se ha creado y parametrizado la conexión a través de
PROFINET.
● Se ha creado un OB del tipo "Synchronous Cycle" o "MC-PostServo".

Consulte también
Entorno del sistema (Página 1214)
Requisitos de software de configuración (Página 1215)

1220

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

4.1.2.2

Ajustes de Time-based IO
A continuación se describe brevemente qué ajustes deben realizarse y para qué componentes
para Time-based IO.

Tabla 4-1

Resumen de los ajustes de Time-based IO

Componente

Dónde se configura1

Propiedades que deben configu‐ Más información
rarse

Si se utiliza una es‐ Propiedades de subred PROFI‐ Crear el dominio Sync o editar
tación ET 200:
NET > dominio Sync
las propiedades del dominio
subred PROFINET
Sync
Definir el dispositivo del dominio
Sync:
● Definir la CPU como maestro
Sync.

● Manual de funciones
PROFINET (http://
support.automation.siemens.
com/WW/view/es/49948856)
● Ayuda en pantalla en el
sistema de información de
STEP 7 (TIA Portal)

● ET 200 Definir el módulo de
interfaz como esclavo Sync
con clase RT "IRT"
Estación S7-1500
Estación ET 200
Módulo TIO

Propiedades de la interfaz
PROFINET > modo isócrono

Activación del modo isócrono

Propiedades del módulo TIO >
Direcciones E/S

Activación del modo isócrono

Propiedades del módulo TIO >
Direcciones E/S
Propiedades del módulo TIO >
Direcciones E/S
Propiedades del módulo TIO >
Parámetros básicos
Propiedades del módulo TIO >
Parámetros básicos/Paráme‐
tros de canal

● Manual de funciones
PROFINET (http://
support.automation.siemens.
com/WW/view/es/49948856)
Asignación de las direcciones E/
S a la memoria imagen parcial
● Manual de producto Módulo
del proceso (p. ej., IPP1)
tecnológico
TM Timer DIDQ 16x24V
Parametrizar "Utilización de mó‐
dulos del programa de usuario"
(http://
support.automation.siemens.
Para TM Timer DIDQ 10x24V:
com/WW/view/es/95153313)
Si es necesario, parametrizar la
configuración "Utilizar entrada/
● Manual de producto Módulo
salida individualmente"
tecnológico
Asignar o crear un OB del tipo
"Synchronous Cycle" o "MCPostServo"

Parametrizar el uso de Timer-DI
y Timer-DQ
OB isócrono
(Synchronous
Cycle o MC-Post‐
Servo)

Propiedades del OB isócrono >
Modo isócrono

● Manual de funciones Modo
isócrono (https://
support.industry.siemens.com
/cs/ww/es/view/109755401)

En caso necesario, adaptar el ci‐
clo de aplicación

TM Timer DIDQ 10x24V
(http://
support.automation.siemens.
com/WW/view/es/95153951)

● Ayuda en pantalla en el
sistema de información de
STEP 7 (TIA Portal)
1

Describe el tema del software de configuración.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1221

Time-based IO
4.1 High precision input/output with Time-based IO

Ajuste de Time-based IO
Siempre que no tenga requisitos especiales en cuanto al tiempo de reacción, el siguiente
ajuste resulta idóneo para empezar:
● Tiempo de ciclo de emisión: 2 ms
● Ciclo de aplicación: 4 ms
● Asignación a la memoria imagen parcial del proceso: IPP1
● PIP_Mode: 0 (modelo AEV)

Preguntas frecuentes (FAQ)
Para más información al respecto, consulte las siguientes preguntas frecuentes (FAQ) en el
Siemens Industry Online Support:
● ID de artículo 109738186 (https://support.industry.siemens.com/cs/ww/es/view/
109738186)
● ID de artículo 109736374 (https://support.industry.siemens.com/cs/ww/es/view/
109736374)

4.1.3

Programación

4.1.3.1

Resumen de las instrucciones

Introducción
Time-based IO se utiliza con instrucciones especiales (instrucciones de TIO). La instrucción de
TIO TIO_SYNC se encarga de la sincronización de todos los módulos TIO que intervienen y
genera una base de tiempo unívoca (TIO_Time) a la que se referencian todas las acciones.
Otras instrucciones adoptan la lectura de señales de entrada de procesos con la
correspondiente etiqueta de fecha/hora o la emisión de señales de salida de procesos
controlada por tiempo.
Nota
Las instrucciones de TIO son útiles para aplicaciones Time-based IO generales. Para
aplicaciones especiales, como, p. ej., una leva electrónica, existen además objetos
tecnológicos independientes, p. ej., TO_CamOutput.
Nota
Las instrucciones de TIO utilizan las funciones de etiqueta de fecha/hora de los módulos TIO.
Las demás funciones de los módulos TIO pueden utilizarse en cualquier aplicación,
independientemente de las instrucciones de TIO.

1222

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Instrucciones de TIO
Instrucción

Descripción abreviada

TIO_SYNC

Sincroniza los módulos TIO y determina la base de tiempo para Timebased IO.

TIO_DI

Captura los flancos en la entrada digital (Timer-DI) y suministra la co‐
rrespondiente etiqueta de fecha/hora.

TIO_DI_ONCE

● Captura una vez los flancos en la entrada digital (Timer-DI) y
suministra la correspondiente etiqueta de fecha/hora.
● Controla un canal Timer-DI configurado como habilitación controlada
por flancos para otro canal.

TIO_DQ

4.1.3.2

Emite flancos de forma controlada por tiempo en la salida digital (TimerDQ).

Programación de Time-based IO

Introducción
Para utilizar Time-based IO, las instrucciones de TIO deben llamarse en un OB isócrono. La
aplicación también se puede ejecutar en otro OB. De este modo se puede acortar el tiempo de
ejecución del OB isócrono.
En función de la tarea deseada se necesitan las siguientes instrucciones de TIO:
Módulo TIO

Instrucciones de TIO

● TM Timer DIDQ 16x24V

● Un TIO_DI o TIO_DI_ONCE por entrada digital para la lectura

● TM Timer DIDQ 10x24V

● Un TIO_DQ por salida digital para la salida
● Un TIO_SYNC (para hasta ocho módulos TIO)

A continuación se describe la programación de la CPU para Time-based IO.

Requisitos
Configuración hardware en STEP 7 (TIA Portal):
● Los módulos TIO están asignados a una red isócrona.
● Los módulos TIO están asignados a una memoria imagen parcial de proceso común.
● La memoria imagen parcial de proceso está asignada a un OB isócrono.
● Los módulos TIO están parametrizados para utilizarlos con instrucciones de la librería
"Time-based IO".
Encontrará más información para la configuración de Time-based IO en el capítulo Ajustes de
Time-based IO (Página 1221).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1223

Time-based IO
4.1 High precision input/output with Time-based IO

Procedimiento
1. Cree una instrucción de TIO TIO_SYNC en el OB isócrono.
2. Interconecte en la instrucción de TIO TIO_SYNC mediante los parámetros HWID_1 a
HWID_8 todos los módulos TIO que se deban sincronizar.
El HWID figura en la configuración hardware, en "Propiedades > Constantes de sistema".
Nota
Al realizar la interconexión, como norma general, utilice preferentemente constantes
simbólicas en lugar de valores numéricos absolutos.
3. Defina en TIO_SYNC, en el parámetro de entrada PIP_Mode, el modo de actualización de
datos.
Encontrará la descripción de los modos en el capítulo Implantación técnica (Página 1216).
La instrucción de TIO TIO_SYNC está completamente parametrizada.

1224

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

0RGR

4. En las siguientes instrucciones tenga en cuenta el orden de llamada en función del valor
seleccionado para PIP_Mode:
3,30RGH
SRUGHIHFWR 
0RGR$(9

3,30RGH
0RGR$(9

3,30RGH
0RGR(9$







7,2B6<1&
/ODPDGD 
6<1&B32
6<1&B3,





2UGHQGHOODPDGD

7,2B
2WUDV
LQVWUXFFLRQHV
GH7,2
HQFXDOTXLHU
VHFXHQFLD\
RWUDVSDUWHV
GHOSURJUDPD

6)&
6<1&B3,

6)&
6<1&B32



6)&
6<1&B3,



7,2B6<1&

7,2B6<1&
DSOLFDODDFWXDOL]DFLµQ
GHODPHPRULD
LPDJHQGHSURFHVR

1RWD(Q3,30RGH
ODVLQGLFDFLRQHV
6<1&B32\6<1&B3,
GHOSURJUDPDGH
XVXDULR\DQRVH
OODPDQ


7,2B

7,2B6<1&

2WUDV
LQVWUXFFLRQHV
GH7,2
HQFXDOTXLHU
VHFXHQFLD\
RWUDVSDUWHV
GHOSURJUDPD



1RWD(QHO
3,30RGHQRVH
SXHGHUHDOL]DUQLQJ¼Q
IDFWRUGHFLFORGHOFLFOR
GHDSOLFDFLµQ

7,2B
2WUDV
LQVWUXFFLRQHV
GH7,2
HQFXDOTXLHU
VHFXHQFLD\
RWUDVSDUWHV
GHOSURJUDPD


6)&
6<1&B32

5. Inserte las instrucciones de TIO necesarias para la lectura/salida en el OB isócrono para su
aplicación.
6. Interconecte cada entrada/salida TIO_SYNC_Data con la salida de TIO_SYNC del mismo
nombre en las instrucciones de TIO para lectura/salida.
7. Parametrice los parámetros de entrada HWID (ver "Propiedades > Constantes de sistema"
en la configuración hardware) y Channel en las instrucciones de TIO para lectura/salida.
La funcionalidad Time-based IO está completamente programada.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1225

Time-based IO
4.1 High precision input/output with Time-based IO
8. Interconecte la funcionalidad Time-based IO con su aplicación, p. ej., evaluación de las
etiquetas de fecha/hora leídas en una cadena secuencial en otro OB.
9. Si TIO_SYNC no lee automáticamente el tiempo de ciclo de emisión: defina el tiempo de
ciclo de emisión manualmente, p. ej., en el OB100.
10.Compile y cargue todo el proyecto en la CPU.

Resultado
Ha terminado la programación para utilizar Time-based IO.

Preguntas frecuentes (FAQ)
Para más información al respecto, consulte las siguientes preguntas frecuentes (FAQ) en el
Siemens Industry Online Support:
● ID de artículo 109738186 (https://support.industry.siemens.com/cs/ww/es/view/
109738186)
● ID de artículo 109736374 (https://support.industry.siemens.com/cs/ww/es/view/
109736374)

4.1.4

Utilización del módulo tecnológico

4.1.4.1

Configuración y parametrización del TIO-Modul

Agregar un módulo tecnológico a la configuración de hardware
Requisitos
● Se ha creado el proyecto.
● Se ha creado la CPU.
● Se ha creado la periferia descentralizada ET 200.

Procedimiento
1. Abra la configuración de equipo de la CPU o el IM.
2. Seleccione un rack.
3. Seleccione el módulo tecnológico en el catálogo de módulos:
"Módulos tecnológicos > Time‑based IO > Módulo tecnológico > Referencia"
4. Coloque el módulo tecnológico arrastrándolo al slot deseado del rack y soltándolo.

1226

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Resultado
En el árbol del proyecto, el nuevo módulo tecnológico se muestra en "Módulos locales" o
"Periferia descentralizada".

Apertura de la Configuración hardware (HWCN)
Apertura mediante el árbol del proyecto
Proceda de la siguiente manera:
1. Abra la carpeta "Módulos locales" o "Periferia descentralizada" en el árbol del proyecto.
2. Haga doble clic en el módulo tecnológico del árbol del proyecto.

Apertura mediante la vista de dispositivos
Proceda de la siguiente manera:
1. Abra la configuración del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic en el módulo tecnológico.

Parámetros básicos
Configuración de canal (TM Timer DIDQ 16x24V)
Con la Configuración de canal se determina la combinación de entradas y salidas digitales que
se quieren utilizar para TM Timer DIDQ 16x24V.
Puede escoger entre las siguientes configuraciones:
● 0 entradas, 16 salidas (predeterminado)
● 3 entradas, 13 salidas
● 4 entradas, 12 salidas
● 8 entradas, 8 salidas
Nota
Las salidas no utilizadas están disponibles como alimentación de sensores.
Las entradas no utilizas están disponibles como entradas digitales sin función tecnológica. El
retardo a la entrada de una entrada se define junto con los parámetros del canal de salida
correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1227

Time-based IO
4.1 High precision input/output with Time-based IO

Periodo PWM
Con este parámetro se determina la duración del periodo de las señales en las salidas digitales
con el Modo de operación "PWM".
Puede escoger entre las siguientes duraciones de periodo:
● 10 ms (predeterminado)
● 5 ms
● 2 ms
● 1 ms
● 0,5 ms
● 0,2 ms
Nota
La relación entre impulso y periodo se especifica en la interfaz de control. La relación entre
impulso y periodo es un valor porcentual y se evalúa con una precisión del 3 % aprox.

Reacción a STOP de la CPU
Con este parámetro se define la reacción del módulo tecnológico en caso de STOP de la CPU.
Puede escoger entre las siguientes opciones:
Reacción a STOP de la CPU

Significado

Aplicar valor sustitutivo
(predeterminado)

Hasta la siguiente transición de STOP a RUN de la CPU, el módulo
tecnológico emite en las salidas digitales los valores de sustitución
parametrizados.
Después de una transición de STOP a RUN, el módulo tecnológico
pasa a su estado de arranque: Si utiliza contador, los valores de
contaje se ponen a 0 y las salidas digitales conmutan según la pa‐
rametrización y las consignas.

Mantener último valor

Hasta la siguiente transición de STOP a RUN de la CPU, el módulo
tecnológico emite en las salidas digitales los valores que eran váli‐
dos en el momento de la transición a STOP. Si la modulación del
ancho de impulsos está parametrizada, se emitirá la última duración
de periodo válida con la última relación impulso/pausa válida hasta
la siguiente transición de STOP a RUN.
Después de una transición de STOP a RUN, el módulo tecnológico
pasa a su estado de arranque: Si utiliza contador, los valores de
contaje se ponen a 0 y las salidas digitales conmutan según la pa‐
rametrización y las consignas.

Habilitar alarmas de diagnóstico
El módulo tecnológico dispara alarmas de diagnóstico si se producen determinados errores.
Puede disparar alarmas de diagnóstico adicionales si se activa la habilitación de las alarmas
de diagnóstico. Las alarmas de diagnóstico se procesan en un OB de alarma.

1228

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
Con este parámetro se determina si el módulo tecnológico dispara las alarmas de diagnóstico
adicionales al aparecer el correspondiente error.
Infórmese con el manual de producto del módulo tecnológico sobre los errores que pueden
disparar una alarma de diagnóstico durante el funcionamiento. Las alarmas de diagnóstico no
están habilitadas de forma predeterminada.

Utilización de módulos del programa de usuario
Con este parámetro se determina si el módulo se utiliza con objetos tecnológicos de
Motion Control o con instrucciones de la librería "Time-based IO“ (Instrucciones > Tecnología).

Parámetros de canal
Sinopsis
En los Parámetros de canal las entradas y salidas digitales se dividen en grupos con
parámetros específicos de grupo.
Cada grupo es de uno de los siguientes tipos:
● Grupo DQ (Página 1229)
● Grupo DQ/DI (Página 1231)
● Grupo DI (Página 1236)
Los tipos de grupo disponibles para un TM Timer DIDQ 16x24V dependen de la Configuración
de canal de los Parámetros de grupo.

Grupo DQ
Puede ajustar los parámetros siguientes para las respectivas salidas digitales de un grupo DQ:

Modo de operación
Con este parámetro se define la función tecnológica de la correspondiente salida digital.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1229

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Modo de operación

Significado

Timer-DQ
(predeterminado)

El módulo tecnológico emite flancos en la correspondiente salida digital
en momentos definidos.
Este ajuste utiliza Time‑based IO y requiere un modo isócrono.
Si se usa el sistema de control SIMOTION, utilice este ajuste para una
aplicación de levas.

Oversampling

La correspondiente salida digital emite consecutivamente 32 estados
equidistantes en el tiempo por ciclo de aplicación (p. ej., OB61). Los 32
estados se indican a través de la interfaz de control.
Este ajuste requiere un modo isócrono.

PWM

El módulo tecnológico conmuta la salida digital correspondiente con la
duración de periodo especificada en Parámetros básicos y la relación
entre impulso y periodo de la interfaz de control.
La relación entre impulso y periodo es un valor porcentual y se evalúa
con una precisión del 3 % aprox.

Valor sustitutivo
Con este parámetro se define el valor que debe emitir el módulo tecnológico en caso de STOP
de la CPU en la salida digital correspondiente para la reacción "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".

Salida High Speed (0,1 A)
Con este parámetro se determina si la correspondiente salida digital es de tipo push-pull rápido
o de tipo PNP (en fuente).
Puede escoger entre las siguientes opciones:
Opción

Significado

Activado
(predeterminado)

La salida digital es de tipo push-pull rápido y soporta una intensidad
nominal de carga de 0,1 A. Una salida de tipo push-pull conmuta alter‐
nativamente a DC 24 V y masa. Esto permite flancos muy rápidos.

Desactivado

La salida digital es de tipo PNP (en fuente), con una tensión de 24 V
relativa a M, y soporta una intensidad nominal de carga de 0,5 A.

Invertir DI/DQ (TM Timer DIDQ 16x24V)
Las señales de 24 V de la salida digital y de la entrada digital correspondiente se pueden
invertir conjuntamente para adaptarlas al proceso.
En el ajuste predeterminado, estas dos señales no se invierten.

Invertir DQ
La señal de 24 V de la salida digital se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la señal no se invierte.

1230

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Retardo a la entrada
Con la parametrización del retardo a la entrada se suprimen perturbaciones acopladas en la
entrada digital disponible como entrada sin función tecnológica. Las señales con una duración
de impulso inferior al retardo a la entrada parametrizado se suprimen.
Se puede escoger entre los siguientes retardos a la entrada:
● Ninguno
(retardo a la entrada de 4 μs, ancho mínimo de impulso de 3 μs)
● 0,05 ms
● 0,1 ms (predeterminado)
● 0,4 ms
● 0,8 ms
Nota
Si selecciona la opción "Ninguno" o "0,05 ms", debe utilizar cables apantallados para la
conexión de las entradas digitales. Para aumentar la precisión de la función de sello de tiempo
se recomienda utilizar cables apantallados también para retardos a la entrada superiores.
Nota
El retardo a la entrada está sujeto a una tolerancia indicada en los datos técnicos del manual
de producto del módulo tecnológico en cuestión.

Grupo DQ/DI
Un grupo DQ/DI consta de una salida digital y de una o dos entradas digitales. Puede ajustar
los siguientes parámetros para el grupo:

Configuración grupo DQ/DI
Con este parámetro se determina si DI se utiliza como Entrada de habilitación para la DQ.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1231

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Opción

Significado

Timer-DQ con entrada de ha‐ El módulo tecnológico emite flancos controlados
bilitación
por tiempo en la DQ. La DQ se habilita mediante la
DI. El Modo de operación de DQ es "Timer-DQ" y
(predeterminado)
no se puede modificar.

Otros parámetros específicos de la op‐
ción
Valor sustitutivo
Salida High Speed (0,1 A)
Invertir DI/DQ (TM Ti‐
mer DIDQ 16x24V)

Este ajuste utiliza Time‑based IO y requiere un mo‐
Invertir DQ (TM Timer DIDQ 10x24V)
do isócrono.
Retardo a la entrada
Si se usa el sistema de control SIMOTION, utilice
Habilitación HW
este ajuste para una aplicación de levas.
Utilizar entrada/salida indivi‐
dualmente

La DQ y la DI se parametrizan y se utilizan con in‐
dependencia entre sí.

Modo de operación (DQ):
Valor sustitutivo
Salida High Speed (0,1 A)
Invertir DI/DQ (TM Ti‐
mer DIDQ 16x24V)
Invertir DQ (TM Timer DIDQ 10x24V)
Modo de operación (DI):
Retardo a la entrada
Invertir DI

Configuración grupo DQ/DI (DQ2/DI2/DI3 de TM Timer DIDQ 10x24V)
Con este parámetro se define cómo se utilizan DQ2, DI2 y DI3 de TM Timer DIDQ 10x24V.
Puede escoger entre las siguientes opciones:
Opción

Significado

Otros parámetros específicos de la op‐
ción

Encóder incremental (A, B
desfasado)
(predeterminado)

DQ2 se utiliza individualmente.

Modo de operación (DQ):

En DI2 y DI3 hay conectado un encóder incremen‐ Valor sustitutivo
tal con las señales desfasadas de 24 V A y B. El
Salida High Speed (0,1 A)
contador (DI2) evalúa siempre cuatro veces las dos
Invertir DQ
señales.
Invertir sentido de contaje

Timer-DI2 con entrada de ha‐ Se registran etiquetas de fecha/hora para determi‐ Modo de operación (DQ):
bilitación DI3
nados flancos de DI2. DI2 se habilita mediante DI3. Valor sustitutivo
El modo de operación de DI2 es "Timer-DI" y no
Salida High Speed (0,1 A)
puede modificarse.
Invertir DQ
Este ajuste utiliza Time‑based IO y requiere un mo‐
Retardo a la entrada
do isócrono.
Si se usa el sistema de control SIMOTION, utilice Invertir DI
este ajuste para una aplicación de palpador.
Habilitación HW

1232

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
Opción

Significado

Otros parámetros específicos de la op‐
ción

Timer-DQ2 con entrada de
habilitación DI2

El módulo tecnológico emite flancos controlados
por tiempo en DQ2. DQ2 es habilitada por DI2. El
Modo de operación de DQ2 es "Timer-DQ" y no se
puede modificar.

Valor sustitutivo

La DQ y la DI se parametrizan y se utilizan con in‐
dependencia entre sí.

Modo de operación (DQ):

Salida High Speed (0,1 A)
Invertir DQ

Retardo a la entrada
Este ajuste utiliza Time‑based IO y requiere un mo‐
Habilitación HW
do isócrono.
Si se usa el sistema de control SIMOTION, utilice Modo de operación (DI):
este ajuste para una aplicación de levas.
Invertir DI
Utilizar entrada/salida indivi‐
dualmente

Valor sustitutivo
Salida High Speed (0,1 A)
Invertir DQ
Modo de operación (DI):
Retardo a la entrada
Invertir DI

Modo de operación (DQ):
Con este parámetro se define la función tecnológica de la salida digital.
Puede escoger entre las siguientes opciones:
Modo de operación

Significado

Timer-DQ
(predeterminado)

Este ajuste utiliza Time‑based IO y requiere un modo isócrono.

El módulo tecnológico emite flancos en la DQ en momentos definidos.
Si se usa el sistema de control SIMOTION, utilice este ajuste para una
aplicación de levas.

Oversampling

El módulo tecnológico devuelve en DQ por cada ciclo de aplicación (p.
ej. OB61) 32 estados consecutivos con una distancia temporal homo‐
génea. Los 32 estados se indican a través de la interfaz de control.
Este ajuste requiere un modo isócrono.

PWM

El módulo tecnológico conmuta la DQ con la duración de periodo es‐
pecificada en Parámetros básicos y la relación entre impulso y periodo
de la interfaz de control.
La relación entre impulso y periodo es un valor porcentual y se evalúa
con una precisión del 3 % aprox.

Valor sustitutivo
Con este parámetro se define el valor que debe emitir el módulo tecnológico en caso de STOP
de la CPU en la DQ para la reacción "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".

Salida High Speed (0,1 A)
Con este parámetro se determina si la DQ es de tipo push-pull rápido o de tipo PNP (en fuente).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1233

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Opción

Significado

Activado
(predeterminado)

La DQ es de tipo push-pull rápido y soporta una intensidad nominal de
carga de 0,1 A. Una salida de tipo push-pull conmuta alternativamente a
DC 24 V y masa. Esto permite flancos muy rápidos.

Desactivado

La DQ es de tipo PNP (en fuente) con una tensión de 24 V relativa a M
y puede funcionar con una intensidad nominal de carga de 0,5 A.

Invertir DI/DQ (TM Timer DIDQ 16x24V)
Las señales de 24 V de la DQ y de la DI correspondiente se pueden invertir conjuntamente para
adaptarlas al proceso.
En el ajuste predeterminado, estas señales no se invierten.

Invertir DQ (TM Timer DIDQ 10x24V)
La señal de 24 V de la DQ se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la señal no se invierte.

Retardo a la entrada
Con este parámetro se suprimen las interferencias de señal en las entradas digitales. Los
cambios de señal solo se capturan si permanecen estables durante más tiempo que el retardo
a la entrada parametrizado.
Puede escoger entre los siguientes Retardos a la entrada:
● Ninguno
(Retardo a la entrada de 4 μs, ancho de impulso mínimo de 3 μs)
● 0,05 ms
● 0,1 ms (predeterminado)
● 0,4 ms
● 0,8 ms
El Retardo a la entrada tiene el efecto siguiente sobre la función ajustada en la entrada digital
para la evaluación de señales:
Función

Influencia del Retardo a la entrada

Timer-DI

La etiqueta de fecha/hora registrada se ha desplazado en el valor del Retardo a la
entrada.

Encóder incremental (A, B desfasa‐ Se devuelve el valor de contaje que era válido en el momento Ti menos el Retardo a la
entrada.
do)
Contador
Oversampling

1234

Los estados registrados se han desplazado conjuntamente en el valor del Retardo a la
entrada.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Nota
Si selecciona la opción "Ninguno" o "0,05 ms", debe utilizar cables apantallados para la
conexión de las entradas digitales. Para aumentar la precisión de la función de etiqueta de
fecha/hora, se recomienda el uso de cables apantallados también para Retardos a la entrada
mayores.
Nota
El Retardo a la entrada está sujeto a una tolerancia que se encuentra en los datos técnicos del
manual de producto del módulo tecnológico.

Habilitación HW
Con este parámetro se determina si Timer-DQ se habilitará en la DI a través del nivel o de los
flancos.
Puede escoger entre las siguientes opciones:
Habilitación

Significado

Otros parámetros específi‐
cos de la opción

Controlado por nivel
(predeterminado)

La DQ se habilita mediante el nivel de la DI.

Selección de nivel para ha‐
bilitación HW

Controlado por flanco

Este ajuste se puede utilizar si se emplea el
sistema de control SIMOTION .

—

La figura siguiente muestra un ejemplo de emisión de flancos ascendentes y descendentes en
la DQ0 al habilitarse la DI0 por el nivel alto de la DI1:
',

'4

5

)

5

)

R

Momento predefinido de un flanco DQ0- ascendente

F

Momento predefinido de un flanco DQ0- descendente

5

)

Selección de nivel para habilitación HW
Con este parámetro se define el nivel para una Habilitación HW controlada por nivel, para el
cual la DQ está habilitada.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1235

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Nivel

Significado

Activo con nivel alto
(predeterminado)

La DQ está habilitada si la DI está activada.

Activo con nivel bajo

La DQ está habilitada si la DI no está activada.

Modo de operación (DI):
Con este parámetro se define la función tecnológica de DIm+1.
Puede escoger entre las siguientes opciones:
Modo de operación

Significado

Contador

En la DI hay conectado un encóder de impulsos o un sensor. El contador
cuenta los flancos ascendentes o descendentes de la DI.
En el manual de producto del módulo tecnológico puede consultar qué
entradas digitales se pueden utilizar como contadores.

Timer-DI
(predeterminado)

Para flancos definidos en la DI se leen las correspondientes etiquetas de
fecha/hora.
Este ajuste utiliza Time‑based IO y requiere un modo isócrono.
Si se usa el sistema de control SIMOTION, utilice este ajuste para una
aplicación de palpador.

Oversampling

El módulo tecnológico lee el estado de la DI por ciclo de aplicación (p. ej.,
OB61) en 32 instantes equidistantes. Los 32 estados se devuelven con‐
juntamente.
Este ajuste requiere un modo isócrono.

Invertir DI
La señal de 24 V de la DI se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la señal no se invierte.

Grupo DI
Un grupo DI consta de dos entradas digitales contiguas DIm y DIm+1. Puede ajustar los
siguientes parámetros para el grupo:

Configuración de grupo DI
Con este parámetro se define cómo se utiliza el grupo.

1236

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Opción

Significado

Otros parámetros específi‐
cos de la opción

Encóder incremental (A, B
desfasado)
(predeterminado)

En las dos entradas digitales hay conectado un encóder in‐ Invertir sentido de contaje
cremental con las señales desfasadas de 24 V A y B. El
contador del grupo DI evalúa siempre cuatro veces las dos
señales.

Retardo a la entrada
Timer-DI con entrada de habi‐ Se registran etiquetas de fecha/hora para determinados
litación
flancos de DIm. DIm se habilita mediante DIm+1. El modo Inversión
de operación de DIm es "Timer-DI" y no puede modificarse.
Habilitación HW
Este ajuste utiliza Time‑based IO y requiere un modo isó‐
crono.
Si se usa el sistema de control SIMOTION, utilice este ajuste
para una aplicación de palpador.
Utilizar entradas individual‐
mente

Las dos entradas digitales se parametrizan y se utilizan con
independencia entre sí.

Modo de operación
Retardo a la entrada

Invertir sentido de contaje
Es posible invertir el sentido de contaje para adaptarlo al proceso. El módulo tecnológico
invierte la señal B del encóder incremental en DIm+1. El correspondiente Contador interpreta
entonces los flancos de las dos señales como impulsos hacia atrás.
La siguiente figura muestra un ejemplo de impulsos de contaje en sentido ascendente y
descendente:
6H³DO$
6H³DO%
,PSXOVRVGH
FRQWDMH
DGHODQWH
,PSXOVRVGH
FRQWDMH
DWU£V

DGHODQWH

DWU£V

En el ajuste predeterminado, el sentido de contaje no se invierte.

Retardo a la entrada
Con este parámetro se suprimen las interferencias de señal en las entradas digitales. Los
cambios de señal solo se capturan si permanecen estables durante más tiempo que el retardo
a la entrada parametrizado.
Puede escoger entre los siguientes Retardos a la entrada:
● Ninguno
(Retardo a la entrada de 4 μs, ancho de impulso mínimo de 3 μs)
● 0,05 ms
● 0,1 ms (predeterminado)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1237

Time-based IO
4.1 High precision input/output with Time-based IO
● 0,4 ms
● 0,8 ms
El Retardo a la entrada tiene el efecto siguiente sobre la función ajustada en la entrada digital
para la evaluación de señales:
Función

Influencia del Retardo a la entrada

Timer-DI

La etiqueta de fecha/hora registrada se ha desplazado en el valor del Retardo a la
entrada.

Encóder incremental (A, B desfasa‐ Se devuelve el valor de contaje que era válido en el momento Ti menos el Retardo a la
entrada.
do)
Contador
Oversampling

Los estados registrados se han desplazado conjuntamente en el valor del Retardo a la
entrada.

Nota
Si selecciona la opción "Ninguno" o "0,05 ms", debe utilizar cables apantallados para la
conexión de las entradas digitales. Para aumentar la precisión de la función de etiqueta de
fecha/hora, se recomienda el uso de cables apantallados también para Retardos a la entrada
mayores.
Nota
El Retardo a la entrada está sujeto a una tolerancia que se encuentra en los datos técnicos del
manual de producto del módulo tecnológico.

Inversión
La señal de 24 V de la DIm se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la señal no se invierte.

Habilitación HW
Con este parámetro se determina si Timer-DI se habilitará en la
DIm+1 a través del nivel o los flancos.
Puede escoger entre las siguientes opciones:
Habilitación

Significado

Otros parámetros espe‐
cíficos de la opción

Controlado por nivel
(predeterminado)

La DIm se habillita mediante el nivel de DIm+1.

Selección de nivel para
habilitación HW

Controlado por flanco

Este ajuste se puede utilizar si se emplea el siste‐ —
ma de control SIMOTION .

La figura siguiente muestra un ejemplo del registro de etiquetas de fecha/hora para flancos
ascendentes y descendentes al habilitarse la DI0 debido al nivel alto de la DI1:

1238

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
',

',

5

)

)

5

)

5

R

Registro de la correspondiente etiqueta de fecha/hora para flanco DI0- ascendente

F

Detección de la etiqueta de fecha/hora correspondiente para flanco DI0 descendente

Selección de nivel para habilitación HW
Con este parámetro se define el nivel para una Habilitación HW controlada por nivel, para el
cual la DIm está habilitada.
Puede escoger entre las siguientes opciones:
Nivel

Significado

Activo con nivel alto
(predeterminado)

La DIm está habilitada si la DIm+1 está activada.

Activo con nivel bajo

DIm está habilitada si la DIm+1 no está activada.

Modo de operación
Con este parámetro se define la función tecnológica de la correspondiente entrada digital.
Puede escoger entre las siguientes opciones:
Modo de operación

Significado

Otros parámetros específi‐
cos de la opción

Contador

En la DIm hay conectado un encóder de impulsos o un sen‐ Evaluación de señal del Con‐
sor. El contador cuenta los flancos ascendentes o descen‐ tador
dentes de la DIm.
En el manual de producto del módulo tecnológico puede
consultar qué entradas digitales se pueden utilizar como
contadores.

Timer-DI
(predeterminado)

Para flancos definidos en la correspondiente entrada digital
se leen las correspondientes etiquetas de fecha/hora.

Inversión

Este ajuste utiliza Time‑based IO y requiere un modo isócro‐
no.
Si se usa el sistema de control SIMOTION, utilice este ajuste
para una aplicación de palpador.
Oversampling

El módulo tecnológico detecta el estado de la correspon‐
diente entrada digital por ciclo de aplicación (p. ej., OB61) en
32 instantes equidistantes. Los 32 estados se devuelven
conjuntamente.

Inversión

Este ajuste requiere un modo isócrono.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1239

Time-based IO
4.1 High precision input/output with Time-based IO

Evaluación de señal del Contador
Con este parámetro se determina si el contador cuenta los flancos ascendentes o
descendentes en la DIm.
En el ajuste predeterminado se cuentan los flancos ascendentes.

4.1.4.2

TIO-Modul Online y diagnóstico

Indicación y evaluación del diagnóstico
Por medio de la vista online y de diagnóstico puede realizar un diagnóstico del hardware.
Además, puede:
● Recibir información a través del módulo tecnológico (p. ej. la versión de Firmware y el
número de serie).
● Si es necesario, realice una actualización del firmware.

Procedimiento
Para abrir el editor de visualización para las funciones de diagnóstico, haga lo siguiente:
1. Abra la configuración del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic con el botón derecho del ratón en el módulo tecnológico y seleccione "Online y
diagnóstico".
4. Haga clic en la visualización deseada en el árbol de diagnóstico.

Más información
Para más información sobre los avisos de diagnóstico y sobre posibles remedios, consulte el
manual de producto del módulo tecnológico.

1240

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

5

Salida de impulsos
5.1

Principios básicos de la salida de impulsos

5.1.1

Sinopsis de los módulos y sus características

Módulos
La siguiente tabla resume, para el sistema S7‑1500, las características de los módulos de
salida de impulsos.
Característica

S7-1500
Módulo tecnológico

CPU compactas

Módulo tecnológico

TM Ti‐
mer DIDQ 16x24V

CPU 1511C-1 PN,

TM PTO 4

Número de generadores de impul‐
sos

16

4

4

Modo de operación Sobremuestreo

X

—

—

Modo de operación Modulación por
ancho de impulso PWM

X

X (Página 1338)

—

Modo de operación Salida de impul‐
sos

—1

—

—

Modo de operación Tren de impul‐
sos

—1

—

—

Modo de operación Retardo a la co‐
nexión/desconexión

—

—

—

Modo de operación Salida de fre‐
cuencia

—

X (Página 1338)

—

Modo de operación PWM con motor
DC

—

—

—

Modo de operación Pulse Train Out‐
put (PTO)

—

X (Página 1338)

X

Contador de secuencias

—

—

—

CPU 1512C-1 PN

Salida High Speed posible

X

X (Página 1348)

—

Dithering posible

—

—

—

Medición/regulación de corriente
posible

—

—

—

Soporte Motion Control

—

X

X

Habilitación HW

—

—

X

Operación en paralelo de 2 canales

—

—

—

Control salidas digitales a través de
programa de usuario

X

X (Página 1349)

—

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1241

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Característica

1

S7-1500
Módulo tecnológico

CPU compactas

Módulo tecnológico

TM Ti‐
mer DIDQ 16x24V

CPU 1511C-1 PN,

TM PTO 4

Soporte de modo isócrono en PRO‐
FINET

X

—

X

Soporte de alarmas de diagnóstico

X

X

X

CPU 1512C-1 PN

Se puede implementar una función similar con la función de temporización.

La siguiente tabla resume, para el sistema ET 200SP, las características de los módulos de
salida de impulsos.
Característica

ET 200SP
Módulo tecnológico

1242

Módulo de salidas
digitales

TM Ti‐
mer DIDQ 10x24V

TM Pulse 2x24V

DQ 4x24VDC/ 2A
HS

Número de generadores de impul‐
sos

6

2

4

Modo de operación Sobremuestreo

X

—

X

Modo de operación Modulación por
ancho de impulso PWM

X

X

X

Modo de operación Salida de impul‐
sos

—1

X

—

Modo de operación Tren de impul‐
sos

—1

X

—

Modo de operación Retardo a la co‐
nexión/desconexión

—

X

—

Modo de operación Salida de fre‐
cuencia

—

X

—

Modo de operación PWM con motor
DC

—

X

—

Modo de operación Pulse Train Out‐
put (PTO)

—

—

—

Contador de secuencias

—

X

—

Salida High Speed posible

X

X

—

Dithering posible

—

X

—

Medición/regulación de corriente
posible

—

X

—

Soporte Motion Control

—

—

—

Habilitación HW

—

X

—

Operación en paralelo de 2 canales

—

X

—

Control salidas digitales a través de
programa de usuario

X

X

X

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Característica

ET 200SP
Módulo tecnológico

Módulo de salidas
digitales

TM Ti‐
mer DIDQ 10x24V

TM Pulse 2x24V

DQ 4x24VDC/ 2A
HS

Soporte de modo isócrono en PRO‐
FINET

X

X

X

Soporte de alarmas de diagnóstico

X

X

X

1

Se puede implementar una función similar con la función de temporización.

5.1.2

Principios básicos de la salida de impulsos (TM Pulse 2x24V)

5.1.2.1

Modo de operación Salida de impulso (impulso único)

Función
Introducción
En este modo de operación, el canal correspondiente del módulo tecnológico emite un impulso
único con el retardo a la conexión parametrizado y la duración especificada con la interfaz de
control.

Secuencia de salida
Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida a través de la habilitación
software, active el bit de control (Página 1251) SW_ENABLE. El bit de respuesta
(Página 1253) STS_SW_ENABLE indica que la habilitación software está activa en el módulo
tecnológico.
Adicionalmente, puede utilizarse la habilitación hardware a través de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La imagen siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitación hardware.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1243

Salida de impulsos
5.1 Principios básicos de la salida de impulsos


70B&75/B'4



6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFLµQ+:

676B',

'4Q$

676B(1$%/(

(55B38/6(

5HWDUGRDOD
FRQH[LµQ

Figura 5-1

5HWDUGRDOD
FRQH[LµQ

'XUDFLµQGHOLPSXOVR

Ejemplo de una secuencia de salida

Si se utiliza la habilitación hardware, se combina con la habilitación software. Si está activa la
habilitación software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitación hardware. Los demás flancos ascendentes de la habilitación hardware durante la
secuencia de salida se ignoran. Si la habilitación hardware está activada y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexión y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexión, se emite el impulso a través de la
correspondiente salida digital DQn.A con la duración asignada. La secuencia de salida finaliza
una vez transcurrida la duración del impulso y se desactiva STS_ENABLE.
Si no se usa habilitación hardware, el retardo a la conexión se inicia con el flanco ascendente
de SW_ENABLE.

Interrupción de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitación software y la
secuencia de salida actual se cancela sin finalizar. Se desactivan el bit de respuesta
STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

1244

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Duración del impulso
La duración de impulso es el tiempo durante el cual la salida digital DQn.A permanece activada
una vez transcurrido el retardo a la conexión.
La duración de impulso se ajusta en µs en la interfaz de control por medio de OUTPUT_VALUE
como número entero (UDINT). El rango de valores depende del uso de la función de salida
High Speed:
Salida High Speed

Rango de valores de
OUTPUT_VALUE

Rango de valores de la duración de
impulso

Activada

2 ... 85000000

2 ... 85000000 μs
= 2 μs ... 85 s

Desactivada

10 ... 85000000

10 ... 85000000 μs
= 10 μs ... 85 s

Modificación de la duración de impulso durante la secuencia de salida
Si se cambia la duración de impulso a un valor mayor que la duración de impulso ya
transcurrida, la modificación se hace efectiva inmediatamente. De este modo se puede
modificar la duración de impulso incluso durante la secuencia de salida.
Si se cambia la duración de impulso a un valor menor que la duración de impulso ya
transcurrida, se cancela la secuencia de salida. En tal caso se desactivan el bit de respuesta
STS_ENABLE y la salida digital DQn.A, y se activa el bit de respuesta ERR_PULSE. Para
continuar con la salida de impulsos debe reiniciarse la secuencia de salida. La próxima vez que
se inicie la secuencia de salida, el módulo tecnológico desactivará el bit de respuesta
ERR_PULSE.

Retardo a la conexión
El retardo a la conexión se ajusta en la configuración hardware entre 0 y 85 s con una precisión
de 1 µs.
El retardo a la conexión también puede modificarse a través de la interfaz de control
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexión y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como retardo a la conexión.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1245

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Encontrará más información en AUTOHOTSPOT.

Contador de secuencias
El módulo tecnológico posee para cada canal un contador de secuencias que cuenta las
secuencias de salida finalizadas. Se cuentan tanto las secuencias finalizadas correctamente
como las no finalizadas correctamente. Si se usa la habilitación hardware, pueden producirse
secuencias de salida muy breves que la CPU no es capaz de detectar con certeza. El contador
de secuencias permite comprobar en el programa de usuario cuántas secuencias de salida se
han iniciado.
El número de secuencias se indica en la interfaz de respuesta (Página 1253) por medio del
valor SEQ_CNT. Este valor permite vigilar la finalización de una secuencia de salida.
Si se usa la habilitación hardware, el contador de secuencias cuenta de 0 a 15. Si no se usa
la habilitación hardware, la secuencia de salida se inicia siempre por medio del bit de control
SW_ENABLE, por lo que el contador de secuencias cuenta solo hasta 1.
Cuando se desactiva SW_ENABLE o se produce un desbordamiento, el contador vuelve a 0.

Salida High Speed
La función Salida High Speed permite una frecuencia de salida máxima de 100 kHz con una
intensidad de salida máxima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera señales con una frecuencia más elevada, pero ofrece
una menor corriente de carga máxima. La salida High Speed solo está disponible en el modo
bicanal.
La tabla siguiente muestra el rango de valores de la duración del impulso y la frecuencia en
función de la salida High Speed:
Valor mínimo

Duración del im‐
pulso
Frecuencia

Valor máximo

Salida High Speed
desactivada

Salida High Speed
activada

10 μs

1,5 μs
0,02 Hz

Salida High
Speed desactiva‐
da

Salida High
Speed activada

85000000 μs (= 85 s)
10 kHz

100 kHz

Configuración
Introducción
El módulo tecnológico se configura y parametriza con el software de configuración.
Las funciones del módulo tecnológico se controlan con el programa de usuario a través de la
interfaz de control y respuesta.

1246

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Entorno del sistema
El módulo tecnológico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuración

En el programa de usuario

Operación centralizada
con una CPU 151xSP

● Sistema de automatización
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‐
faz de control y respuesta
en los datos IO

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU S7-1500
S7-1500
● Sistema de periferia
descentralizada ET 200SP

Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU
S7-300/400
S7-300/400
● Sistema de periferia
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‐
● Sistema de periferia
cante
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‐
● Sistema de periferia
bricante
descentralizada ET 200SP
● TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7:
Configuración del dispositivo y
ajuste de parámetros con HSP
Software de configuración de otro
fabricante:
Configuración del dispositivo y
ajuste de parámetros con archivo
GSD
Software de configuración de otro
fabricante:
Archivo GSD, configuración del
dispositivo y ajuste de parámetros
a través del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP está
disponible para su descarga en Internet:
● Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
● Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1247

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Reacción a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los parámetros de la
configuración del dispositivo.
Tabla 5-1
Opción

Respuesta del canal en caso de STOP de la CPU
Significado

Aplicar valor susti‐ Hasta la siguiente transición de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Después de una transición de STOP a RUN, el módulo tecnológico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal continúa trabajando.
Las salidas digitales continúan conmutándose con arreglo a la parametrización.
Así, la secuencia de salida en curso continúa. Si se ha parametrizado la habilita‐
ción hardware, también se pueden iniciar nuevas secuencias de salida a través de
DIn.0.
Tras una transición de STOP a RUN, la configuración del módulo tecnológico no se
desactiva.

Ajuste de parámetros
Las propiedades del módulo tecnológico se establecen mediante diferentes parámetros. En
función de los ajustes, no todos los parámetros están disponibles. Si la parametrización se
efectúa en el programa de usuario, los parámetros se transfieren al módulo con la instrucción
"WRREC" por medio del juego de datos 128.
En este modo de operación, los parámetros del módulo se ajustan de la siguiente manera:
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware en
STEP 7 (TIA Portal)

1. Inserte el módulo desde la carpeta "Módulos tecnológicos" del
catálogo de hardware.
2. Ajuste el modo de operación "Salida de impulso" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuación encontrará el módulo en el catálogo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operación "Salida de impulso" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

1248

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operación "Salida de impulso" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los parámetros del módulo se cargarán con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operación "Salida de impulso" y los restantes
parámetros en el programa del usuario a través del juego de datos
128.

Parámetros del TM Pulse 2x24V en el modo de operación "Salida de impulso"
En la columna "Rango", los ajustes predeterminados de los parámetros aparecen marcados
en negrita.
Tabla 5-2

Parámetros ajustables
Parámetro

Configuración de canal

Rango de valores
1

● 2 canales (2 A):

Rango efectivo
Módulo

● 1 canal (4 A)
Reacción a STOP de la CPU

● Aplicar valor sustitutivo

Canal

● Continuar
Valor sustitutivo de DQA

● 0

Canal

● 1
Valor sustitutivo de DQB

● 0

Canal

● 1
Diagnóstico agrupado

● Desactivado

Canal

● Activado
Diagnóstico DQA

● Desactivado

Canal

● Activado
Diagnóstico DQB

● Desactivado

Canal

● Activado
Salida High Speed (0,1 A)

● Desactivada

Canal

● Activada
Función DI

● Entrada

Canal

● Habilitación HW

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1249

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Parámetro
Retardo a la entrada para entra‐
das digitales

Rango de valores

Rango efectivo
Canal

● Ninguno
● 0,05 ms
● 0,1 ms
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms

Formato de salida

Canal

● Salida analógica S7
● 1/100
● 1/1000
● 1/10000

Retardo a la conexión para salida
de impulso

0...85000000 μs

Canal

En la configuración con HSP para STEP 7 o con archivo GSD, se establece la configuración de
canales seleccionando el nombre del módulo.

1

Nota
Configuración con GSD para PROFIBUS
En la configuración con GSD para PROFIBUS, las posibilidades de parametrización no están
disponibles. A los parámetros del módulo se asignan los valores predeterminados. Ajuste el
modo de operación "Salida de impulso" y los restantes parámetros en el programa del usuario
a través del juego de datos 128.

Área de direcciones
Espacio de direcciones del módulo tecnológico
Tabla 5-3

1250

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnológico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Interfaz de control y realimentación
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librería con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignación de la interfaz de control
El programa de usuario controla el comportamiento del módulo tecnológico a través de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignación de la interfaz de control:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
…
3

12
…
15

UDINT: Duración del impulso

4
…
7

16
…
19

UDINT: Valor de carga

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

10

22

11

23

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1251

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define la duración de impulso.
Rango de valores:
● Duración de impulso en μs con la salida High Speed desactivada: de 10 a 85000000D
● Duración de impulso en μs con la salida High Speed activada: de 2 a 85000000D
En caso de rebase por exceso o por defecto del rango de valores, se activa el bit de respuesta
ERR_OUT_VAL y se utiliza la última duración de impulso válida.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
● Retardo a la conexión en μs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificación debe aplicarse una sola vez o
de modo cíclico.
Los valores no válidos dan lugar a la activación del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificación en SLOT debe aplicarse una sola vez o de modo cíclico.
0 significa: En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor de SLOT
se aplica una sola vez como retardo a la conexión y se conserva hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima secuencia de salida.
Tras un nuevo arranque del módulo, el valor se sobrescribe con el valor ajustado en la configu‐
ración hardware.
1 significa: Si se escribe el valor 18D en el correspondiente byte de salida, se aplica el valor actual
de SLOT cíclicamente. Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
● 0000B significa: Ninguna acción, estado de reposo
● 0010B significa: Retardo a la conexión en μs
Todos los valores no indicados son no válidos y dan lugar a la activación del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB están ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA están ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la función tecnológica de la salida digital.
● 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
● 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.

SW_ENABLE

Con este bit se activa la habilitación software. Si se utiliza la habilitación hardware, se combina
con la habilitación software.
● 0 significa: Finalizar salida
● 1 significa: Iniciar salida
El uso de la habilitación hardware se activa mediante parametrización. El control de la habilita‐
ción hardware se realiza externamente a través de la entrada digital DIn.0.

1252

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de control/valor

Explicaciones

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
● ERR_24V
● ERR_DQA
● ERR_DQB
● ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignación de la interfaz de respuesta
El programa de usuario recibe valores actuales e información de estado del módulo
tecnológico a través de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignación de la interfaz de respuesta:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

ERR_
PULSE

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

0

8

1

9

2

10

Reservado

3

11

Reservado

4
...
7

12
...
15

Reservado

Reservado
STS_DQA

STS_
ENABLE

SEQ_CNT
Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1253

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es válido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_SLOT_VAL
automáticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es válido.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_OUT_VAL
automáticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagnóstico "Diagnóstico DQA", este error dispara la alarma de diagnóstico "Error en salidas digita‐
les".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simultá‐
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagnóstico
"Diagnóstico DQB", este error dispara la alarma de diagnóstico "Error en salidas digitales".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_PULSE

Este bit indica un error en la salida de impulso, p. ej., el nuevo valor de la duración de impulso es
demasiado bajo.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es válido y no se ha
aceptado.
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagnóstico, este error dispara la alarma de diagnóstico "Cortocircuito/sobrecarga en la alimen‐
tación de sensores externa".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensión de alimentación L+ es insuficiente. Si se han habilitado las alarmas de
diagnóstico, en caso de error en la tensión de alimentación se dispara la alarma de diagnóstico "Error
de tensión de alimentación".
Cuando la tensión de alimentación L+ vuelve a ser suficiente, se desactiva ERR_PWR automática‐
mente.
El bit no se activa si no hay tensión de alimentación aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitación software.
● 0 significa: Habilitación software no activa
● 1 significa: Habilitación software activa

STS_READY

Este bit indica que el módulo devuelve datos de usuario válidos. El módulo ha arrancado y está
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutación), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

SEQ_CNT

Este valor de contador indica el número de secuencias de salida finalizadas.

Reservado

Los bits de reserva están ajustados a 0.

1254

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Modo isócrono
El módulo tecnológico soporta la función de sistema "Modo isócrono". Si no se usa habilitación
hardware, en el modo isócrono se inicia la secuencia de salida en el instante To, una vez
activado el bit de control SW_ENABLE.

Más información
Encontrará una descripción detallada del modo isócrono:
● En el manual de funciones Modo isócrono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
● En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.2

Modo de operación Modulación por ancho de impulso PWM

Función
Introducción
En este modo de operación, el correspondiente canal del módulo tecnológico emite una señal
modulada por ancho de impulso con la duración mínima de impulso y la duración de periodo
parametrizadas. Se puede superponer una señal de dither a la señal PWM. Además, el módulo
dispone de un regulador PID integrado que permite regular la intensidad de salida.
El ciclo de trabajo y la consigna de intensidad se especifican con la interfaz de control.

Secuencia de salida
Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida a través de la habilitación
software, active el bit de control (Página 1272) SW_ENABLE. El bit de respuesta
(Página 1275) STS_SW_ENABLE indica que la habilitación software está activa en el módulo
tecnológico.
Adicionalmente, puede utilizarse la habilitación hardware a través de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La figura siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitación hardware.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1255

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
1
70B&75/B'4
0
6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFLµQ+:
676B',
'XUDFLµQGHOSHULRGR

'XUDFLµQGHOSHULRGR

'4Q$
5HWDUGRD 5HWDUGRDOD
FRQH[LµQ
OD
FRQH[LµQ

'XUDFLµQ
GHOLPSXOVR

'XUDFLµQ
GHSDXVD
HQWUH
LPSXOVRV

676B(1$%/(
&LFORGHWUDEDMR

Figura 5-2

50 %

20 %

Ejemplo de una secuencia de salida

Si se utiliza la habilitación hardware, se combina con la habilitación software. Si está activa la
habilitación software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitación hardware. Los demás flancos ascendentes de la habilitación hardware durante la
secuencia de salida se ignoran. Si la habilitación hardware se activa y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexión y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexión, se emite la señal modulada por
ancho de impulso a través de la correspondiente salida digital DQn.A con el ciclo de trabajo
asignado. El ciclo de trabajo es la relación entre la duración del impulso y la duración del
periodo. La secuencia de salida sigue ejecutándose continuamente mientras esté activado
SW_ENABLE.
Si no se usa habilitación hardware, el retardo a la conexión se inicia con el flanco ascendente
de SW_ENABLE. La habilitación hardware no está disponible en modo isócrono.

Interrupción de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitación software y se
cancela la secuencia de salida actual. El último periodo no finaliza. Se desactivan el bit de
respuesta STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

1256

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Ciclo de trabajo
El ciclo de trabajo equivale a la relación entre la duración del impulso y la duración del periodo
(también denominado relación impulso-pausa o tiempo de conexión).
El ciclo de trabajo se ajusta en la interfaz de control (Página 1272) por medio de
OUTPUT_VALUE como número entero (UDINT). El rango de valores depende del formato de
salida parametrizado. Si se ajusta 0, DQn.A no se activará durante toda la duración del
periodo. Si se ajusta el valor máximo, DQn.A se activará durante toda la duración del periodo.
Si se rebasa el rango de valores, se utiliza el valor máximo.
Formato de salida

Rango de valores
de
OUTPUT_VALUE

Duración del impulso

1/100 (%)

0 ... 100

(OUTPUT_VALUE/100) × duración del periodo

1/1000 (‰)

0 ... 1000

(OUTPUT_VALUE/1000) × duración del periodo

1/10000

0 ... 10000

(OUTPUT_VALUE/10000) × duración del periodo

Salida analógica S7

0 ... 27648

(OUTPUT_VALUE/27648) × duración del periodo

Las modificaciones del ciclo de trabajo se hacen efectivas con el próximo flanco ascendente
en DQn.A.
Nota
Regulación de intensidad
Si se utiliza la regulación de intensidad (Página 1263), el módulo controlará el ciclo de trabajo
y la consigna de intensidad se asignará con OUTPUT_VALUE.

Duración del periodo
La duración del periodo se ajusta en µs en la configuración hardware. El rango de valores
depende del uso de la función de salida High Speed:
Salida High Speed

Rango de valores de la duración del periodo

Activada

10 ... 85000000 μs
= 10 μs ... 85 s

Desactivada

100 ... 85000000 μs
= 100 μs ... 85 s

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1257

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La duración del periodo también puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como número entero (UDINT). En este caso, seleccione, por medio del
bit de control MODE_SLOT, si la modificación debe aplicarse una sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 1D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como duración del periodo y se conserva
hasta la próxima modificación.
Las modificaciones de la duración del periodo realizadas a través de SLOT se
hacen efectivas con el próximo flanco ascendente en DQn.A.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 17D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como duración del periodo.
Las modificaciones de la duración del periodo realizadas a través de SLOT se
hacen efectivas con el próximo flanco ascendente en DQn.A.

Encontrará más información en AUTOHOTSPOT.

Retardo a la conexión
El retardo a la conexión se ajusta en la configuración hardware entre 0 y 85 s con una precisión
de 1 µs.
El retardo a la conexión también puede modificarse a través de la interfaz de control
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexión y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como retardo a la conexión.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

Encontrará más información en AUTOHOTSPOT.
Nota
En el modo isócrono, los retardos a la conexión parametrizados no tienen efecto.

1258

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Dithering
La función de dither está concebida especialmente para el mando de válvulas proporcionales.
La función de dither superpone una fluctuación simétrica ajustable a la consigna para el mando
de la bobina de la válvula. Esto da lugar a un movimiento muy leve en torno a la consigna de
posición que impide que la válvula se atasque a causa del rozamiento o de un efecto de
histéresis. De este modo se mejora la respuesta a las modificaciones de la consigna.
Los parámetros de dithering se ajustan en la configuración hardware. El dithering se activa con
el bit DITHER en la interfaz de control (Página 1272).

Amplitud de dither
La amplitud de dither es la amplitud de la señal de dither referida a la duración del periodo de
la secuencia de salida. El rango de valores es de 0 a 50% Si se rebasa el rango de valores, se
utiliza una amplitud de dither del 50%.
El módulo adapta dinámicamente la amplitud de dither cuando el ciclo de trabajo efectivo
determinado es superior al 100% o inferior al 0%, a fin de mantener la simetría de la señal de
dither.
Ejemplos:
Con una amplitud de dither del 10% y un ciclo de trabajo del 50%, el tiempo de conexión
efectivo de la secuencia de salida fluctúa periódicamente entre el 40% y el 60%.
Con una amplitud de dither del 10% y un ciclo de trabajo del 95%, el tiempo de conexión
efectivo de la secuencia de salida fluctúa periódicamente entre el 90% y el 100%.
La amplitud de dither también puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como número entero (UDINT). En este caso puede seleccionar, por
medio del bit de control MODE_SLOT, si la modificación debe aplicarse una sola vez o de
modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 6D en el correspondiente byte de salida, el
valor de SLOT se aplica una sola vez como amplitud de dither.
Las modificaciones a través de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 22D en el correspondiente byte de salida, el valor
actual de SLOT se aplica cíclicamente como amplitud de dither.
Las modificaciones a través de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

Duración del periodo de dither
La duración del periodo de dither es la duración del periodo de la señal de dither. El valor debe
ser al menos cuatro veces mayor que la duración del periodo de la señal PWM y superior a
2 ms. El valor máximo es 100 ms. Si se rebasa el rango de valores, se utiliza una duración del
periodo de dither de 100 ms.
La duración del periodo de dither utilizada por el módulo es siempre un múltiplo par de la
duración del periodo de la señal PWM. El módulo adapta el valor asignado de duración del
periodo de modo que se obtenga el múltiplo par más cercano.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1259

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La duración del periodo de dither también puede modificarse con la interfaz de control
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso puede
seleccionar, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 7D en el correspondiente byte de salida, el
valor de SLOT se aplica una sola vez como duración del periodo del dither.
Las modificaciones a través de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 23D en el correspondiente byte de salida, el valor
actual de SLOT se aplica cíclicamente como duración del periodo de dither.
Las modificaciones a través de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

Nota
Si, durante una secuencia de salida, se incrementa la duración del periodo de la señal PWM
de modo que la duración del periodo del dither sea menos de cuatro veces mayor, se desactiva
la señal de dither.
Nota
Modo isócrono
En modo isócrono, obtendrá el mejor resultado posible si ajusta como duración del periodo del
dither un múltiplo par entero del ciclo de aplicación.

Pendiente rampa de conexión y rampa de desconexión dither
Pendiente rampa de conexión dither: Este parámetro es la pendiente de la rampa de conexión
de la amplitud Dither para un incremento teórico de la amplitud de 0% a 100%.
Pendiente rampa de desconexión dither: Con este parámetro se define la pendiente de la
rampa de desconexión de la amplitud Dither para un descenso teórico de la amplitud de 100%
a 0%.
El rango de valores abarca en cada caso de 0 a 30000 ms. Si se rebasa el rango de valores,
se utiliza una pendiente de 30000 ms.
La pendiente influye en cada caso en el tiempo de rampa efectivo. Ejemplo: con una amplitud
Dither del 10% y una pendiente de 2500 ms/100% se obtiene el siguiente tiempo de rampa
efectivo:
10 % × 2500 ms/100 % = 250 ms
La pendiente de la rampa de conexión y de la rampa de desconexión también pueden
modificarse conjuntamente con la interfaz de control introduciendo un nuevo valor en SLOT

1260

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
como número entero (dos INT). En este caso puede seleccionar, por medio del bit de control
MODE_SLOT, si la modificación debe aplicarse una sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 5D en el correspondiente byte de salida, el
valor de SLOT (LOWWORD) se aplica una sola vez como pendiente de la
rampa de conexión y el valor de SLOT (HIGHWORD) se aplica una sola
vez como pendiente de la rampa de desconexión.
Las modificaciones a través de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 21D en el correspondiente byte de salida, el valor
actual de SLOT (LOWWORD) se aplica cíclicamente como pendiente de
la rampa de conexión y el valor de SLOT (HIGHWORD) como pendiente
de la rampa de desconexión.
Las modificaciones a través de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

Iniciar y parar dithering
El dithering se inicia con la rampa de conexión parametrizada en cuanto, durante la secuencia
de salida, se activa el bit DITHER en la interfaz de control (Página 1272) y se inicia una nueva
duración del periodo de dither. Tras el inicio del dithering se activa el bit STS_DITHER en
la interfaz de respuesta (Página 1275).
En cuanto se desactiva el bit DITHER, se inicia inmediatamente la rampa de desconexión
parametrizada con la duración del periodo de dither. Una vez finalizada la rampa de
desconexión, se desactiva el bit STS_DITHER.
En caso de interrumpirse la secuencia de salida, se cancela el dithering y se desactiva el bit
STS_DITHER.
La figura siguiente muestra un ejemplo de secuencia de salida con un ciclo de trabajo del 50%
sin dithering.

Señal PWM
Dithering
Señal en la salida
digital
DITHER



STS_DITHER



La figura siguiente muestra un ejemplo de secuencia de salida con las siguientes propiedades:
● Ciclo de trabajo = 50%
● Duración del periodo de dither = 6 × duración del periodo de la señal PWM
● Sin rampa de conexión/desconexión

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1261

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Señal PWM

Dithering
Señal en la salida digital

DITHER
STS_DITHER

La figura siguiente muestra un ejemplo de secuencia de salida con las siguientes propiedades:
● Ciclo de trabajo = 50%
● Duración del periodo de dither = 6 × duración del periodo de la señal PWM
● Con rampa de conexión
Señal PWM

Rampa de conexión

Dithering

Señal en la salida digital

DITHER
STS_DITHER

La figura siguiente muestra un ejemplo de secuencia de salida con las siguientes propiedades:
● Ciclo de trabajo = 50%
● Duración del periodo de dither = 6 × duración del periodo de la señal PWM
● Con rampa de desconexión
Señal PWM

Dithering

Rampa de desconexión

Fin de la
rampa

Señal en la salida digital

1

DITHER

1

STS_DITHER

1262

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Medición/regulación de intensidad
Medición de intensidad
El módulo tecnológico mide la intensidad de carga en la salida digital. El valor medido de
intensidad se devuelve en la interfaz de respuesta (Página 1275) en el valor
MEASURED_CURRENT en formato de valor analógico S7.
Con el bit de respuesta STS_ENABLE activado, los valores medidos válidos están disponibles
tras el primer periodo de la secuencia de salida. El valor medido que se devuelve es un
promedio de los valores medidos registrados durante al menos un periodo. Si no hay ningún
valor medido válido disponible, se devuelve el valor 32767D.
Con el dithering activo, el valor medio hace referencia a un periodo de dither completo.
Nota
Para poder utilizar la medición de intensidad, la función salida High Speed debe estar
desactivada.

Rango de medición y precisión
El rango de medición y la precisión dependen de la configuración de canales:
Valor medido
27648D

Valor medido máximo
Precisión3
32511D
Duración del pe‐ Duración del pe‐
riodo >333 μs
riodo <333 μs

Modo bicanal

2 A1

2,37 A2

±40 mA

-40 mA ...
+100 mA

Modo monocanal
(circuito paralelo)

4 A1

4,74 A2

±80 mA

-80 mA ...
+200 mA

1

Solo puede excederse durante un tiempo breve.

2

En caso de excederse este valor de intensidad, se activa el bit de respuesta ERR_DQA.

3

Con duración del periodo constante en el correspondiente periodo de medición

Regulación de intensidad
La función de regulación de intensidad permite controlar de forma proporcional la energía
transferida a una carga inductiva o resistiva. La regulación de intensidad excluye
automáticamente los efectos térmicos.
La consigna de intensidad viene dada por el programa de usuario. El módulo controla el ciclo
de trabajo de la señal PWM con arreglo a la consigna, mientras que la respuesta depende de
los parámetros de PID.
El regulador PID compara entre sí la consigna y el valor medido de la intensidad de carga. Si
la diferencia resultante se encuentra fuera de una banda muerta simétrica, se calcula una
respuesta del regulador teniendo en cuenta las acciones activadas del regulador PID
(proporcional, integral y/o diferencial).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1263

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La variable manipulada calculada se limita hacia abajo y hacia arriba con valores definidos.
Cuando la variable manipulada alcanza un límite, el programa de usuario lo lee a través de los
bits QLMN_HLM y QLMN_LLM en la interfaz de respuesta (Página 1275).
Los parámetros de regulación de intensidad se ajustan en la configuración hardware. El valor
OUTPUT_VALUE de la interfaz de control (Página 1272) se interpreta como consigna de
intensidad relativa al valor de referencia de intensidad.
La figura siguiente muestra el funcionamiento de la regulación de intensidad PID.
Valor de referencia
de corriente

/

OUTPUT_VALUE

x

Consigna: SP_INT

Formato de salida
DEADBAND
+
Valor de proceso: PV_IN

Valor medido intensidad

Diferencia

X

Ganancia

Ancho zona
muerta

1
0.0

P_SEL

0
1

0.0

Duración del periodo

Anti-Windup

INT
I_SEL

0

LMNLIMIT

Valor adaptado:
LMN

+

/

x

Variable manipulada:
Duración del impulso

TI
Variables manipuladas
límite superior/inferior
DIF
1
0.0

Valor de referencia
de corriente

D_SEL

0

Fuente: Juego de parámetros

TD
TM_LAG

Fuente: Interfaz de control
Fuente: Interna del módulo

P_Sel

Activación de la acción proporcional del algoritmo PID

I_Sel

Activación de la acción integral del algoritmo PID

D_Sel

Activación de la acción diferencial del algoritmo PID

Valor de referencia de corrien‐ Valor máximo como valor de referencia para la consigna de intensidad. Se recomienda usar
te (mA)
como ajuste el valor de la intensidad de carga medido con la regulación de intensidad
desactivada y un ciclo de trabajo del 100%.
Ancho zona muerta (μA)

Diferencia entre la intensidad de salida y la consigna de intensidad, dentro de la cual no se
corrige. La diferencia se considera tanto por encima como por debajo de la consigna de
intensidad.

Variable manipulada límite su‐ Límite superior de regulación
perior (valor analógico S7)
Variable manipulada límite in‐
ferior (valor analógico S7)

1264

Límite inferior de regulación

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Ganancia

Factor de ganancia para la acción P del algoritmo PID

TI (s)

Tiempo de integración; periodo utilizado por la acción integral del algoritmo PID.
Si TI es menor que el tiempo de ciclo del regulador, TI se ajusta internamente al valor del
tiempo de ciclo.

TD (s)

Tiempo derivativo; periodo utilizado por la acción diferencial del algoritmo PID.
Si TD es menor que el tiempo de ciclo del regulador, TI se ajusta internamente al valor del
tiempo de ciclo.

TM_LAG (s)

Tiempo de retardo de la acción diferencial del algoritmo PID.
Si TI es menor que la mitad del tiempo de ciclo del regulador, TI se ajusta internamente a la
mitad del valor del tiempo de ciclo.

El ajuste predeterminado de los parámetros del regulador se elige con criterio conservador
para conseguir una operación estable. Para una regulación dinámica de válvulas, optimice los
distintos parámetros de acuerdo con las condiciones de su instalación. Hay que tener en
cuenta especialmente que un factor de ganancia mayor y un tiempo integral más bajo dan lugar
a respuestas más rápidas a los cambios de la consigna.
Tiempo de ciclo del regulador
Con el dithering desactivado, el tiempo de ciclo interno del regulador equivale a la duración del
periodo de PWM. Con el dithering activado, el tiempo de ciclo interno del regulador equivale a
la duración del periodo de dither.
Restablecimiento del regulador PID
Los datos internos del regulador se restablecen en los siguientes casos:
● Desactivación del bit de control SW_ENABLE
● Transmisión de un nuevo juego de parámetros al módulo
Más información
Encontrará más información sobre el regulador PID en el manual de funciones Regulación PID
(https://support.industry.siemens.com/cs/ww/es/view/108210036), p. ej., en el capítulo
CONT_C.

Duración mínima de impulso y pausa mínima entre impulsos
La duración mínima de impulso y la pausa mínima entre impulsos son los valores mínimos de
duración de impulso y de pausa entre impulsos que deben emitirse.
El módulo suprime los impulsos y pausas cuya duración no alcanza la duración mínima de
impulso. El módulo ajusta al valor de duración del periodo todas las duraciones de impulso
cuya distancia respecto a la duración del periodo sea menor que la pausa mínima entre
impulsos. Esto permite evitar efectos no deseados cuando el actuador conectado no es capaz
de responder adecuadamente a cambios de señal tan breves.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1265

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
'XUDFLµQGHOLPSXOVR

'XUDFLµQGHOSHULRGR
'XUDFLµQGHOSHULRGR
ಥ3DXVDP¯QLPDHQWUH
LPSXOVRV

'XUDFLµQP¯QLPDGH
LPSXOVR



&LFORGHWUDEDMR
ಽ

Figura 5-3

ಽ

Modulación de la duración de impulso

La duración mínima de impulso se ajusta en la configuración hardware entre 0 y 85 s con una
precisión de 1 µs. El valor ajustado vale también para la pausa mínima entre impulsos.
Nota
Regulación de intensidad
Si se utiliza la regulación de intensidad, la duración mínima de impulso parametrizada no tiene
validez.
Nota
Dithering
Si se utiliza dithering sin regulación de intensidad, la duración mínima de impulso
parametrizada se hace efectiva. En este caso se reduce el solapamiento de la señal PWM para
que la duración de impulso efectiva se mantenga dentro del rango válido.

Salida High Speed
La función Salida High Speed permite una frecuencia de salida máxima de 100 kHz con una
intensidad de salida máxima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera señales con una frecuencia más elevada, pero ofrece
una menor corriente de carga máxima.
La salida High Speed solo está disponible en el modo bicanal y sin regulador de intensidad.

1266

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La tabla siguiente muestra el rango de valores de la duración de impulso, la duración del
periodo y la frecuencia en función de la salida High Speed:
Valor mínimo

Duración del im‐
pulso
Duración del
periodo
Frecuencia

Valor máximo

Salida High Speed
desactivada

Salida High Speed
activada

10 μs

1,5 μs

100 μs

10 μs
0,02 Hz

Salida High
Speed desactiva‐
da

Salida High
Speed activada

85000000 μs (= 85 s)

10 kHz

100 kHz

Configuración
Introducción
El módulo tecnológico se configura y parametriza con el software de configuración.
Las funciones del módulo tecnológico se controlan con el programa de usuario a través de la
interfaz de control y respuesta.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1267

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Entorno del sistema
El módulo tecnológico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuración

En el programa de usuario

Operación centralizada
con una CPU 151xSP

● Sistema de automatización
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‐
faz de control y respuesta
en los datos IO

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU S7-1500
S7-1500
● Sistema de periferia
descentralizada ET 200SP

Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU
S7-300/400
S7-300/400
● Sistema de periferia
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‐
● Sistema de periferia
cante
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‐
● Sistema de periferia
bricante
descentralizada ET 200SP
● TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7:
Configuración del dispositivo y
ajuste de parámetros con HSP
Software de configuración de otro
fabricante:
Configuración del dispositivo y
ajuste de parámetros con archivo
GSD
Software de configuración de otro
fabricante:
Archivo GSD, configuración del
dispositivo y ajuste de parámetros
a través del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP está
disponible para su descarga en Internet:
● Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
● Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

1268

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Reacción a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los parámetros de la
configuración del dispositivo.
Tabla 5-4

Respuesta del canal en caso de STOP de la CPU

Opción

Significado

Aplicar valor susti‐ Hasta la siguiente transición de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Después de una transición de STOP a RUN, el módulo tecnológico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal continúa trabajando.
Las salidas digitales continúan conmutándose con arreglo a la parametrización.
Así, la secuencia de salida en curso continúa. Si se ha parametrizado la habilita‐
ción hardware, también se pueden iniciar nuevas secuencias de salida a través de
DIn.0.
Tras una transición de STOP a RUN, la configuración del módulo tecnológico no se
desactiva.

Ajuste de parámetros
Las propiedades del módulo tecnológico se establecen mediante diferentes parámetros. En
función de los ajustes, no todos los parámetros están disponibles. Si la parametrización se
efectúa en el programa de usuario, los parámetros se transfieren al módulo con la instrucción
"WRREC" por medio del juego de datos 128.
En este modo de operación, los parámetros del módulo se ajustan de la siguiente manera:
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware en
STEP 7 (TIA Portal)

1. Inserte el módulo desde la carpeta "Módulos tecnológicos" del
catálogo de hardware.
2. Ajuste el modo de operación "Modulación por ancho de impulso
PWM" y los restantes parámetros del módulo en la configuración
hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuación encontrará el módulo en el catálogo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operación "Modulación por ancho de impulso
PWM" y los restantes parámetros del módulo en la configuración
hardware.
3. Cargue el proyecto en la CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1269

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operación "Modulación por ancho de impulso
PWM" y los restantes parámetros del módulo en la configuración
hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los parámetros del módulo se cargarán con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste los parámetros en el programa de usuario a través del juego
de datos 128.

Parámetros del TM Pulse 2x24V en el modo de operación "Modulación por ancho de impulso PWM"
La tabla siguiente muestra los parámetros del módulo.
En la columna "Rango", los ajustes predeterminados de los parámetros aparecen marcados
en negrita.
Tabla 5-5

Parámetros ajustables
Parámetro

Configuración de canal1

Rango de valores
● 2 canales (2 A):

Rango efectivo
Módulo

● 1 canal (4 A)
Reacción a STOP de la CPU

● Aplicar valor sustitutivo

Canal

● Continuar
Valor sustitutivo de DQA

● 0

Canal

● 1
Valor sustitutivo de DQB

● 0

Canal

● 1
Diagnóstico agrupado

● Desactivado

Canal

● Activado
Diagnóstico DQA

● Desactivado

Canal

● Activado
Diagnóstico DQB

● Desactivado

Canal

● Activado
Salida High Speed (0,1 A)

● Desactivado

Canal

● Activado
Función DI

● Entrada

Canal

● Habilitación HW

1270

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Parámetro
Retardo a la entrada para entra‐
das digitales

Rango de valores
● Ninguno

Rango efectivo
Canal

● 0,05 ms
● 0,1 ms
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms

Formato de salida

● Salida analógica S7

Canal

● 1/100
● 1/1000
● 1/10000
Duración mínima de impulso

0...85000000 μs

Canal

Duración del periodo

10...2000000...85000000 μs

Canal

Duración del periodo real

se calcula automáticamente (solo lectura)

Canal

Retardo a la conexión para salida
de impulso

0...85000000 μs

Canal

Dithering

● Desactivado

Canal

● Activado
Pendiente rampa de conexión dit‐
her

0...30000 ms

Canal

Pendiente rampa de desconexión
dither

0...30000 ms

Canal

Amplitud de dither

0,0...5,0...50%

Canal

Duración del periodo de dither

2000...50000...100000 μs

Canal

Frecuencia de dither

se calcula automáticamente (solo lectura)

Canal

Regulación de intensidad

● Desactivado

Canal

● Activado
Activar acción P

● Desactivado

Canal

● Activado
Activar acción I

● Desactivado

Canal

● Activado
Activar acción D

● Desactivado

Canal

● Activado
Valor de referencia de corriente

0...2000 mA (modo bicanal)

Canal

0...4000 mA (modo monocanal)
Ancho zona muerta

0...65535 μA

Canal

Variable manipulada límite supe‐
rior

1...27648

Canal

Variable manipulada límite inferior 0...27647

Canal

Ganancia proporcional

Canal

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0,0000...2,0000...7,9228 × 1028

1271

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Parámetro

Rango de valores

Rango efectivo

Tiempo integrativo

0,0000...20,0000...7,9228 × 1028 s

Canal

Tiempo derivativo

0,0000...10,0000...7,9228 × 1028 s

Canal

Tiempo de retardo de la acción D

0,0000...2,0000...7,9228 × 10 s

Canal

28

En la configuración con HSP para STEP 7 o con archivo GSD, se establece la configuración de
canales seleccionando el nombre del módulo.

1

Nota
Configuración con GSD para PROFIBUS
En la configuración con GSD para PROFIBUS, las posibilidades de parametrización no están
disponibles. A los parámetros del módulo se asignan los valores predeterminados. Ajuste los
parámetros en el programa de usuario a través del juego de datos 128.

Área de direcciones
Espacio de direcciones del módulo tecnológico
Tabla 5-6

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnológico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librería con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignación de la interfaz de control
El programa de usuario controla el comportamiento del módulo tecnológico a través de la
interfaz de control.

1272

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Interfaz de control por canal
La siguiente tabla muestra la asignación de la interfaz de control:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

0
…
3

12
…
15

UDINT: Ciclo de trabajo o consigna de intensidad

4
…
7

16
…
19

UDINT: Valor de carga

8

20

9

21

10

22

11

23

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

Reservado
Reservado

MODE_
SLOT
DITHER

SET_DQB

LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1273

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Si no se utiliza la regulación de intensidad, este valor define el ciclo de trabajo (relación impulsopausa, tiempo de conexión). Las modificaciones del ciclo de trabajo se hacen efectivas con el
próximo flanco ascendente en DQn.A.
Si se utiliza la regulación de intensidad, el módulo controla el ciclo de trabajo y OUTPUT_VALUE
permite definir la consigna de intensidad relativa al valor de referencia de corriente.
Rango de valores del ciclo de trabajo o de la consigna de intensidad:
● con formato de salida "1/100": de 0 a 100D
● con formato de salida "1/1000": de 0 a 1000D
● con formato de salida "1/10000": de 0 a 10000D
● con formato de salida "Salida analógica de S7": de 0 a 27648D
En caso de rebase por exceso del rango de valores, se activa el bit de respuesta ERR_OUT_VAL
y se utiliza el valor máximo admisible del formato de salida.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
● Duración del periodo en μs: de 10 a 85000000D
● Retardo a la conexión en μs: de 0 a 85000000D
● Rampa de conexión y de desconexión dither en ms: de 0 a 30000D
● Amplitud de dither en ‰: de 0 a 500D
● Duración del periodo de dither en μs: de 2000 a 100000D
Con el bit de control MODE_SLOT se define si una modificación debe aplicarse una sola vez o
de modo cíclico.
Los valores no válidos dan lugar a la activación del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificación en SLOT debe aplicarse una sola vez o de modo cíclico.
0 significa: Si se escribe el valor en cuestión en el correspondiente byte de salida, el valor de
SLOT se aplica una sola vez y se mantiene hasta la próxima modificación. Las modificaciones por
medio de SLOT se hacen efectivas en la próxima secuencia de salida. Tras un nuevo arranque
del módulo, el valor se sobrescribe con el valor ajustado en la configuración hardware.
1 significa: Si se escribe el valor en cuestión en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente. Las modificaciones por medio de SLOT se hacen efectivas en
la próxima secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
● 0000B significa: Ninguna acción, estado de reposo
● 0001B significa: Duración del periodo en μs
● 0010B significa: Retardo a la conexión en μs
● 0101B significa: Rampa de conexión de dither (LOWWORD), y rampa de desconexión de
dither (HIGHWORD) en ms
● 0110B significa: Amplitud de dither en ‰
● 0111B significa: Duración del periodo de dither en μs
Todos los valores no indicados son no válidos y dan lugar a la activación del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

1274

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de control/valor

Explicaciones

DITHER

Con este bit se activa la superposición de la señal de dither sobre la señal PWM.
● 0 → 1 significa: El dithering se inicia con la rampa de conexión parametrizada
● 1 → 0 significa: El dithering finaliza con la rampa de desconexión parametrizada

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB están ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA están ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la función tecnológica de la salida digital.
● 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
● 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.
Con este bit se activa la habilitación software. Si se utiliza la habilitación hardware, se combina
con la habilitación software.

SW_ENABLE

● 0 significa: Finalizar salida
● 1 significa: Iniciar salida
El uso de la habilitación hardware se activa mediante parametrización. El control de la habilita‐
ción hardware se realiza externamente a través de la entrada digital DIn.0.
RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
● ERR_24V
● ERR_DQA
● ERR_DQB
● ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignación de la interfaz de respuesta
El programa de usuario recibe valores actuales e información de estado del módulo
tecnológico a través de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignación de la interfaz de respuesta:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓
0

8

1

9

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

Reservado

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

Reservado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Reservado

1275

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓
2

Bit 7

Bit 6

10

Reservado

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

STS_
DITHER

STS_DI

STS_DQB

STS_DQA

STS_
ENABLE

QLMN_HL
M

QLMN_LLM

3

11

Reservado

4
...
5

12
...
13

MEASURED_CURRENT

6

14

7

15

Reservado
Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es válido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_SLOT_VAL
automáticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es válido.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_OUT_VAL
automáticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagnóstico "Diagnóstico DQA", este error dispara la alarma de diagnóstico "Error en salidas digita‐
les".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simultá‐
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagnóstico
"Diagnóstico DQB", este error dispara la alarma de diagnóstico "Error en salidas digitales".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es válido y no se ha
aceptado.
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagnóstico, este error dispara la alarma de diagnóstico "Cortocircuito/sobrecarga en la alimen‐
tación de sensores externa".
El bit se desactiva después de acusar el error con RES_ERROR.

1276

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

ERR_PWR

Este bit indica que la tensión de alimentación L+ es insuficiente. Si se han habilitado las alarmas de
diagnóstico, en caso de error en la tensión de alimentación se dispara la alarma de diagnóstico "Error
de tensión de alimentación".
Cuando la tensión de alimentación L+ vuelve a ser suficiente, se desactiva ERR_PWR automática‐
mente.
El bit no se activa si no hay tensión de alimentación aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitación software.
● 0 significa: Habilitación software no activa
● 1 significa: Habilitación software activa

STS_READY

Este bit indica que el módulo devuelve datos de usuario válidos. El módulo ha arrancado y está
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutación), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DITHER

Este bit indica que la señal de dither está activa con la rampa de conexión iniciada y la rampa de
desconexión no finalizada.

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

MEASURED_
CURRENT

Este valor indica el valor medido de intensidad en formato analógico S7:
● Modo bicanal: 27648D ≙ 2 A
● Modo monocanal: 27648D ≙ 4 A
● 32767D significa: No hay ningún valor medido de intensidad válido, p. ej., durante el primer periodo
de PWM

QLMN_HLM

Este bit indica que se ha alcanzado la variable manipulada del límite superior de la regulación de
intensidad.

QLMN_LLM

Este bit indica que se ha alcanzado la variable manipulada del límite inferior de la regulación de
intensidad.

Reservado

Los bits de reserva están ajustados a 0.

Modo isócrono
El módulo tecnológico soporta la función de sistema "Modo isócrono". En el modo isócrono, la
secuencia de salida se inicia en el instante To, una vez activado el bit de control SW_ENABLE.
En modo isócrono, la duración del periodo se adapta al ciclo de aplicación (TAPP) y se sincroniza
con este. La sincronización es especialmente útil para crear lazos de regulación.
El módulo adapta el valor asignado de duración del periodo de modo que se obtenga una
relación entera. En el caso menos favorable, la diferencia equivale a medio ciclo de aplicación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1277

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Ejemplos:
Ciclo de aplicación
TAPP

Duración del periodo asigna‐
da TSetpoint

Duración del periodo real
TActual

TAPP:TActual

10 ms
(10000 μs)

1800 μs

1666 μs

6:1

2000 μs

2000 μs

5:1

3000 μs

3333 μs

3:1

5000 μs

5000 μs

2:1

6000 μs

5000 μs

2:1

12000 μs

10000 μs

1:1

16000 μs

20000 μs

1:2

La figura siguiente muestra un ejemplo de relación 1:1 entre el ciclo de aplicación y la duración
del periodo con un ciclo de trabajo del 50%.
'XUDFLµQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFLµQ
72

72

72

72

La figura siguiente muestra un ejemplo de relación 3:1 entre el ciclo de aplicación y la duración
del periodo con un ciclo de trabajo del 50%.
'XUDFLµQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFLµQ
72

72

72

72

La figura siguiente muestra un ejemplo de relación 1:3 entre el ciclo de aplicación y la duración
del periodo con un ciclo de trabajo del 50%.

1278

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
'XUDFLµQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFLµQ
72

72

72

72

Nota
Sin habilitación hardware ni retardo a la conexión
En modo isócrono no se puede utilizar habilitación hardware ni retardo a la conexión.

Más información
Encontrará una descripción detallada del modo isócrono:
● En el manual de funciones Modo isócrono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
● En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.3

Modo de operación Tren de impulsos

Función
Introducción
En este modo de operación, el correspondiente canal del módulo tecnológico emite un
determinado número de impulsos con la duración de periodo, ciclo de trabajo y retardo a la
conexión parametrizados. El número de impulsos se especifica con la interfaz de control.

Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida mediante la habilitación software,
active el bit de control (Página 1289) SW_ENABLE. El bit de respuesta STS_SW_ENABLE
indica que la habilitación software está activa en el módulo tecnológico.
Adicionalmente, puede utilizarse la habilitación hardware a través de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La imagen siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitación hardware.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1279

Salida de impulsos
5.1 Principios básicos de la salida de impulsos


70B&75/B'4



6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFLµQ+:
676B',

'4Q$
5HWDUGRD
OD
FRQH[LµQ

5HWDUGRDOD
FRQH[LµQ

'XUDFLµQ
GH
LPSXOVR

'XUDFLµQ
GHSDXVD
HQWUH
LPSXOVRV

'XUDFLµQGHOSHULRGR

676B(1$%/(

(55B38/6(

Figura 5-4

Ejemplo de una secuencia de salida

Si se utiliza la habilitación hardware, se combina con la habilitación software. Si está activa la
habilitación software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitación hardware. Los demás flancos ascendentes de la habilitación hardware durante la
secuencia de salida se ignoran. Si la habilitación hardware está activada y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexión y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexión, se emite el tren de impulsos a
través de la correspondiente salida digital DQn.A con el número de impulsos asignado. La
secuencia de salida finaliza con el último impulso y STS_ENABLE se desactiva.
Si no se usa habilitación hardware, el retardo a la conexión se inicia con el flanco ascendente
de SW_ENABLE.

Interrupción de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitación software y se
cancela la secuencia de salida actual. El último periodo no finaliza. Se desactivan el bit de
respuesta STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Número de impulsos
El número de impulsos se ajusta en la interfaz de control (Página 1289) por medio de
OUTPUT_VALUE como número entero (UDINT). El rango de valores abarca de 1 a
4294967295 (232-1). Los cambios son efectivos de inmediato.

1280

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Si se reduce el número de impulsos a 0 o a un número ya emitido, se cancela la secuencia de
salida. En tal caso se desactivan el bit de respuesta STS_ENABLE y la salida digital DQn.A, y
se activa el bit de respuesta ERR_PULSE. Para continuar con la salida de impulsos debe
reiniciarse la secuencia de salida. La próxima vez que se inicie la secuencia de salida, el
módulo tecnológico desactivará el bit de respuesta ERR_PULSE.

Ciclo de trabajo
El ciclo de trabajo equivale a la relación entre la duración del impulso y la duración del periodo
(también denominado tiempo de conexión).
La duración del periodo se ajusta en la configuración hardware. El rango de valores depende
del formato de salida parametrizado. Si se ajusta 0, DQn.A no se activará durante toda la
duración del periodo. Si se ajusta el valor máximo, DQn.A se activará durante toda la duración
del periodo. Si se rebasa el rango de valores, se utiliza el valor máximo.
Formato de salida

Rango de valores
de OUTPUT_VA‐
LUE

Duración del impulso

1/100 (%)

0 ... 100

(OUTPUT_VALUE/100) × duración del periodo

1/1000 (‰)

0 ... 1000

(OUTPUT_VALUE/1000) × duración del periodo

1/10000

0 ... 10000

(OUTPUT_VALUE/10000) × duración del periodo

Salida analógica S7

0 ... 27648

(OUTPUT_VALUE/27648) × duración del periodo

El ciclo de trabajo también puede modificarse con la interfaz de control (Página 1289)
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 4D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como ciclo de trabajo y se conserva hasta la
próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 20D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como ciclo de trabajo.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

Encontrará más información en AUTOHOTSPOT.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1281

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Duración del periodo
La duración del periodo se ajusta en µs en la configuración hardware. El rango de valores
depende del uso de la función de salida High Speed (Página 1283):
Salida High Speed

Rango de valores de la duración del periodo

Activada

10 ... 85000000 μs
= 10 μs ... 85 s

Desactivada

100 ... 85000000 μs
= 100 μs ... 85 s

La duración del periodo también puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como número entero (UDINT). En este caso, seleccione, por medio del
bit de control MODE_SLOT, si la modificación debe aplicarse una sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 1D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como duración del periodo y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 17D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como duración del periodo.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

Encontrará más información en AUTOHOTSPOT.

Retardo a la conexión
El retardo a la conexión se ajusta en la configuración hardware entre 0 y 85 s con una precisión
de 1 µs.
El retardo a la conexión también puede modificarse a través de la interfaz de control
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexión y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como retardo a la conexión.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

1282

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Encontrará más información en AUTOHOTSPOT.

Medición de intensidad
El módulo tecnológico mide la intensidad de carga en la salida digital. El valor medido de
intensidad se devuelve en la interfaz de respuesta (Página 1291) en el valor
MEASURED_CURRENT en formato de valor analógico S7.
Con el bit de respuesta STS_ENABLE activado, los valores medidos válidos están disponibles
tras el primer periodo de la secuencia de salida. El valor medido que se devuelve es un
promedio de los valores medidos registrados durante al menos un periodo. Si no hay ningún
valor medido válido disponible, se devuelve el valor 32767D.
Nota
Para poder utilizar la medición de intensidad, la función salida High Speed debe estar
desactivada.

Rango de medición y precisión
El rango de medición y la precisión dependen de la configuración de canales:
Valor medido
27648D

Valor medido máximo
32511D ≙ ...

Modo bicanal

2 A1

Modo monocanal
(circuito paralelo)

4 A1

Precisión3
Duración del pe‐
riodo >333 μs

Duración del pe‐
riodo <333 μs

2,37 A2

±40 mA

-40 mA ...
+100 mA

4,74 A2

±80 mA

-80 mA ...
+200 mA

1

Solo puede excederse durante un tiempo breve.

2

En caso de excederse este valor de intensidad, se activa el bit de respuesta ERR_DQA.

3

Con duración del periodo constante en el correspondiente periodo de medición

Salida High Speed
La función Salida High Speed permite una frecuencia de salida máxima de 100 kHz con una
intensidad de salida máxima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera señales con una frecuencia más elevada, pero ofrece
una menor corriente de carga máxima. La salida High Speed solo está disponible en el modo
bicanal.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1283

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La tabla siguiente muestra el rango de valores de la duración del impulso, duración del periodo
y frecuencia en función de la salida High Speed:
Valor mínimo

Duración del im‐
pulso
Duración del
periodo
Frecuencia

Valor máximo

Salida High Speed
desactivada

Salida High Speed
activada

10 μs

1,5 μs

100 μs

10 μs
0,02 Hz

Salida High
Speed desactiva‐
da

Salida High
Speed activada

85000000 μs (= 85 s)

10 kHz

100 kHz

Configuración
Introducción
El módulo tecnológico se configura y parametriza con el software de configuración.
Las funciones del módulo tecnológico se controlan con el programa de usuario a través de la
interfaz de control y respuesta.

1284

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Entorno del sistema
El módulo tecnológico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuración

En el programa de usuario

Operación centralizada
con una CPU 151xSP

● Sistema de automatización
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‐
faz de control y respuesta
en los datos IO

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU S7-1500
S7-1500
● Sistema de periferia
descentralizada ET 200SP

Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU
S7-300/400
S7-300/400
● Sistema de periferia
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‐
● Sistema de periferia
cante
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‐
● Sistema de periferia
bricante
descentralizada ET 200SP
● TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7:
Configuración del dispositivo y
ajuste de parámetros con HSP
Software de configuración de otro
fabricante:
Configuración del dispositivo y
ajuste de parámetros con archivo
GSD
Software de configuración de otro
fabricante:
Archivo GSD, configuración del
dispositivo y ajuste de parámetros
a través del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP está
disponible para su descarga en Internet:
● Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
● Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1285

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Reacción a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los parámetros de la
configuración del dispositivo.
Tabla 5-7
Opción

Respuesta del canal en caso de STOP de la CPU
Significado

Aplicar valor susti‐ Hasta la siguiente transición de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Después de una transición de STOP a RUN, el módulo tecnológico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal continúa trabajando.
Las salidas digitales continúan conmutándose con arreglo a la parametrización.
Así, la secuencia de salida en curso continúa. Si se ha parametrizado la habilita‐
ción hardware, también se pueden iniciar nuevas secuencias de salida a través de
DIn.0.
Tras una transición de STOP a RUN, la configuración del módulo tecnológico no se
desactiva.

Ajuste de parámetros
Las propiedades del módulo tecnológico se establecen mediante diferentes parámetros. En
función de los ajustes, no todos los parámetros están disponibles. Si la parametrización se
efectúa en el programa de usuario, los parámetros se transfieren al módulo con la instrucción
"WRREC" por medio del juego de datos 128.
En este modo de operación, los parámetros del módulo se ajustan de la siguiente manera:
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware en
STEP 7 (TIA Portal)

1. Inserte el módulo desde la carpeta "Módulos tecnológicos" del
catálogo de hardware.
2. Ajuste el modo de operación "Tren de impulsos" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuación encontrará el módulo en el catálogo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operación "Tren de impulsos" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

1286

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operación "Tren de impulsos" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los parámetros del módulo se cargarán con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operación "Tren de impulsos" y los restantes
parámetros en el programa del usuario con el juego de datos 128.

Parámetros del TM Pulse 2x24V en el modo de operación "Tren de impulsos"
En la columna "Rango", los ajustes predeterminados de los parámetros aparecen marcados
en negrita.
Tabla 5-8

Parámetros ajustables
Parámetro

Configuración de canal

Rango de valores
1

● 2 canales (2 A):

Rango efectivo
Módulo

● 1 canal (4 A)
Reacción a STOP de la CPU

● Aplicar valor sustitutivo

Canal

● Continuar
Valor sustitutivo de DQA

● 0

Canal

● 1
Valor sustitutivo de DQB

● 0

Canal

● 1
Diagnóstico agrupado

● Desactivado

Canal

● Activado
Diagnóstico DQA

● Desactivado

Canal

● Activado
Diagnóstico DQB

● Desactivado

Canal

● Activado
Salida High Speed (0,1 A)

● Desactivado

Canal

● Activado
Función DI

● Entrada

Canal

● Habilitación HW

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1287

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Parámetro
Retardo a la entrada para entra‐
das digitales

Rango de valores

Rango efectivo
Canal

● Ninguno
● 0,05 ms
● 0,1 ms
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms

Formato de salida

Canal

● Salida analógica S7
● 1/100
● 1/1000
● 1/10000

Duración del periodo

10...2000000...85000000 μs

Canal

Duración del periodo real

se calcula automáticamente (solo lectura) Canal

Retardo a la conexión para salida
de impulso

0...85000000 μs

Canal

Ciclo de trabajo

depende del formato de salida

Canal

En la configuración con HSP para STEP 7 o con archivo GSD, se establece la configuración de
canales seleccionando el nombre del módulo.

1

Nota
Configuración con GSD para PROFIBUS
En la configuración con GSD para PROFIBUS, las posibilidades de parametrización no están
disponibles. A los parámetros del módulo se asignan los valores predeterminados. Ajuste el
modo de operación "Tren de impulsos" y los restantes parámetros en el programa del usuario
con el juego de datos 128.

Área de direcciones
Espacio de direcciones del módulo tecnológico
Tabla 5-9

1288

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnológico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librería con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignación de la interfaz de control
El programa de usuario controla el comportamiento del módulo tecnológico a través de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignación de la interfaz de control:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
…
3

12
…
15

UDINT: Número de impulsos

4
…
7

16
…
19

UDINT: Valor de carga

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

10

22

11

23

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1289

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define el número de impulsos.
Rango de valores: de 1 a 4294967295D (232-1)
En caso de rebase por exceso del rango de valores, se activa el bit de respuesta ERR_OUT_VAL
y se utiliza el último número de impulsos válido.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
● Duración del periodo en μs: de 10 a 85000000D
● Retardo a la conexión en μs: de 0 a 85000000D
● Ciclo de trabajo:
–

con formato de salida "1/100": de 0 a 100D

–

con formato de salida "1/1000": de 0 a 1000D

–

con formato de salida "1/10000": de 0 a 10000D

–

con formato de salida "Salida analógica de S7": de 0 a 27648D

Con el bit de control MODE_SLOT se define si una modificación debe aplicarse una sola vez o
de modo cíclico.
Los valores no válidos dan lugar a la activación del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).
MODE_SLOT

Con este bit se define si una modificación en SLOT debe aplicarse una sola vez o de modo cíclico.
0 significa: Si se escribe el valor en cuestión en el correspondiente byte de salida, el valor de
SLOT se aplica una sola vez y se mantiene hasta la próxima modificación. Las modificaciones por
medio de SLOT se hacen efectivas en la próxima secuencia de salida. Tras un nuevo arranque
del módulo, el valor se sobrescribe con el valor ajustado en la configuración hardware.
1 significa: Si se escribe el valor en cuestión en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente. Las modificaciones por medio de SLOT se hacen efectivas en
la próxima secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
● 0000B significa: Ninguna acción, estado de reposo
● 0001B significa: Duración del periodo en μs
● 0010B significa: Retardo a la conexión en μs
● 0100B significa: Ciclo de trabajo
Todos los valores no indicados son no válidos y dan lugar a la activación del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB están ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA están ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la función tecnológica de la salida digital.
● 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
● 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.

1290

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de control/valor

Explicaciones

SW_ENABLE

Con este bit se activa la habilitación software. Si se utiliza la habilitación hardware, se combina
con la habilitación software.
● 0 significa: Finalizar salida
● 1 significa: Iniciar salida
El uso de la habilitación hardware se activa mediante parametrización. El control de la habilita‐
ción hardware se realiza externamente a través de la entrada digital DIn.0.

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
● ERR_24V
● ERR_DQA
● ERR_DQB
● ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignación de la interfaz de respuesta
El programa de usuario recibe valores actuales e información de estado del módulo
tecnológico a través de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignación de la interfaz de respuesta:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

ERR_
PULSE

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

0

8

1

9

2

10

Reservado

3

11

Reservado

4
...
5

12
...
13

6
...
7

14
...
15

Reservado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Reservado
STS_DQA

STS_
ENABLE

SEQ_CNT
MEASURED_CURRENT
Reservado

1291

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es válido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_SLOT_VAL
automáticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es válido.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_OUT_VAL
automáticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagnóstico "Diagnóstico DQA", este error dispara la alarma de diagnóstico "Error en salidas digita‐
les".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simultá‐
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagnóstico
"Diagnóstico DQB", este error dispara la alarma de diagnóstico "Error en salidas digitales".

ERR_PULSE

Este bit indica un error en la salida de impulso.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es válido y no se ha
aceptado.

El bit se desactiva después de acusar el error con RES_ERROR.

El bit se desactiva después de acusar el error con RES_ERROR.
ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagnóstico, este error dispara la alarma de diagnóstico "Cortocircuito/sobrecarga en la alimen‐
tación de sensores externa".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensión de alimentación L+ es insuficiente. Si se han habilitado las alarmas de
diagnóstico, en caso de error en la tensión de alimentación se dispara la alarma de diagnóstico "Error
de tensión de alimentación".
Cuando la tensión de alimentación L+ vuelve a ser suficiente, se desactiva ERR_PWR automática‐
mente.
El bit no se activa si no hay tensión de alimentación aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitación software.
● 0 significa: Habilitación software no activa
● 1 significa: Habilitación software activa

STS_READY

Este bit indica que el módulo devuelve datos de usuario válidos. El módulo ha arrancado y está
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutación), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

1292

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

SEQ_CNT

Este valor de contador indica el número de secuencias de salida finalizadas.

MEASURED_
CURRENT

Este valor indica el valor medido de intensidad en formato analógico S7:
● Modo bicanal: 27648D ≙ 2 A
● Modo monocanal: 27648D ≙ 4 A
● 32767D significa: no hay ningún valor medido de intensidad válido disponible, p. ej., durante el
primer periodo

Reservado

Los bits de reserva están ajustados a 0.

Modo isócrono
El módulo tecnológico soporta la función de sistema "Modo isócrono". Si no se usa habilitación
hardware, en el modo isócrono se inicia la secuencia de salida en el instante To, una vez
activado el bit de control SW_ENABLE.

Más información
Encontrará una descripción detallada del modo isócrono:
● En el manual de funciones Modo isócrono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
● En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.4

Modo de operación Retardo a la conexión/desconexión

Función
Introducción
En este modo de operación, el correspondiente canal del módulo tecnológico emite impulsos
con el retardo a la conexión especificado referido a la entrada digital DIn.0. El retardo a la
conexión se especifica con la interfaz de control.

Secuencia de salida
Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida mediante la habilitación software,
active el bit de control (Página 1302) SW_ENABLE. El bit de respuesta STS_SW_ENABLE
indica que la habilitación software está activa en el módulo tecnológico.
Diagrama de impulsos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1293

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La figura siguiente muestra un ejemplo de secuencia de salida en el supuesto de que se utilice
SW_ENABLE con la entrada digital DIn.0 no activada.
70B&75/B'4




6:B(1$%/(

676B6:B(1$%/(
',Q

676B',

'4Q$

676B(1$%/(

(55B38/6(
5HWDUGRDOD 5HWDUGRDOD
FRQH[LµQ
FRQH[LµQ

Figura 5-5

5HWDUGRDOD 5HWDUGRDOD
FRQH[LµQ
FRQH[LµQ

Ejemplo 1 de una secuencia de salida

Con un flanco ascendente de SW_ENABLE se inicia la secuencia de salida y se activan los bits
de respuesta STS_SW_ENABLE y STS_ENABLE. Si la entrada digital DIn.0 se activa y
permanece activada durante el retardo a la entrada, se inicia el retardo a la conexión. Una vez
finalizado el retardo a la conexión, se activa la correspondiente salida digital DQn.A. Si la
entrada digital DIn.0 se desactiva y permanece activada durante el retardo a la entrada, se
inicia el retardo a la desconexión. Una vez finalizado el retardo a la desconexión, se desactiva
la correspondiente salida digital DQn.A.
La figura siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice SW_ENABLE con la entrada digital DIn.0 activada.

1294

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
70B&75/B'4




6:B(1$%/(
676B6:B(1$%/(
',Q

676B',

'4Q$

676B(1$%/(

(55B38/6(
5HWDUGRDODFRQH[LµQ
5HWDUGRDODHQWUDGD

Figura 5-6

5HWDUGRDODGHVFRQH[LµQ
5HWDUGRDODHQWUDGD

Ejemplo 2 de una secuencia de salida

Si se activa SW_ENABLE con la entrada digital DIn.0 activada, se ignora el primer flanco
(descendente) de DIn.0.

Interrupción de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitación software y se
cancela la secuencia de salida actual. Se desactivan el bit de respuesta STS_ENABLE y la
salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Duración mínima de impulso y pausa mínima entre impulsos
La duración mínima de impulso y la pausa mínima entre impulsos son los valores mínimos de
duración de impulso y pausa entre impulsos que deben emitirse. Tienen un valor de 1,5 µs con
la salida High Speed (Página 1297) activada y de 10 µs con la salida High Speed desactivada.
Los impulsos y pausas de la entrada digital DIn.0 cuya duración no alcance la duración mínima
de impulso son ignorados por el módulo y no se emiten por la salida digital DQn.A.
Los impulsos y pausas de la DIn.0 se ignoran también en los siguientes casos:
● Duración de impulso < retardo a la entrada
● Duración de impulso + retardo a la desconexión ≤ retardo a la conexión (se activa
ERR_PULSE)
● Duración de impulso + retardo a la desconexión + duración mínima de impulso < retardo a
la conexión (se activa ERR_PULSE)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1295

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
● Pausa entre impulsos < retardo a la entrada
● Pausa entre impulsos + retardo a la conexión ≤ retardo a la desconexión (se activa
ERR_PULSE)
● Pausa entre impulsos + retardo a la conexión < retardo a la desconexión + pausa mínima
entre impulsos (se activa ERR_PULSE)
El bit de respuesta ERR_PULSE activado se borra con el siguiente flanco ascendente en DIn.0.

Redisparo del retardo a la conexión
En el siguiente caso, el módulo cancela el retardo a la conexión actual y lo reinicia con el
siguiente flanco ascendente en la entrada digital DIn.0:
Retardo a la conexión > duración de impulso + pausa entre impulsos
La siguiente figura muestra como ejemplo el redisparo del retardo a la conexión:
',Q
5HWDUGRDODHQWUDGDFDGDYH]
5HWDUGRDODGHVFRQH[LµQ
5HWDUGRDODFRQH[LµQ
5HWDUGRDODFRQH[LµQUHGLVSDUDGR
'4Q$

Figura 5-7

Redisparo del retardo a la conexión

Redisparo del retardo a la desconexión
En el siguiente caso, el módulo cancela el retardo a la desconexión actual y lo reinicia con el
siguiente flanco ascendente en la entrada digital DIn.0:
Retardo a la desconexión > duración de impulso + pausa entre impulsos
La siguiente figura muestra como ejemplo el redisparo del retardo a la desconexión:
',Q
5HWDUGRDODHQWUDGDFDGDYH]
5HWDUGRDODGHVFRQH[LµQ
5HWDUGRDODGHVFRQH[LµQUHGLVSDUDGR
5HWDUGRDODFRQH[LµQ

5HWDUGRDODFRQH[LµQ

'4Q$

Figura 5-8

1296

Redisparo del retardo a la desconexión

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Retardo a la conexión
El ciclo de trabajo se ajusta en la interfaz de control (Página 1302) por medio de
OUTPUT_VALUE como número entero (UDINT). El rango de valores abarca entre 0 y 85 s con
una precisión de 1 µs.
Las modificaciones se hacen efectivas con el siguiente flanco ascendente en la entrada digital
DIn.0.

Retardo a la desconexión
El retardo a la desconexión se ajusta en la configuración hardware entre 0 y 85 s con una
precisión de 1 µs.
El retardo a la desconexión también puede modificarse con la interfaz de control introduciendo
un nuevo valor en SLOT como número entero (UDINT). En este caso, seleccione, por medio
del bit de control MODE_SLOT, si la modificación debe aplicarse una sola vez o de modo
cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 3D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la desconexión y se conserva
hasta la próxima modificación.
Las modificaciones a través de SLOT se hacen efectivas con el siguiente
flanco descendente en la entrada digital DIn.0.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 19D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como retardo a la desconexión.
Las modificaciones a través de SLOT se hacen efectivas con el siguiente
flanco descendente en la entrada digital DIn.0.

Encontrará más información en AUTOHOTSPOT.

Salida High Speed
La función Salida High Speed permite una frecuencia de salida máxima de 100 kHz con una
intensidad de salida máxima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera señales con una frecuencia más elevada, pero ofrece
una menor corriente de carga máxima. La salida High Speed solo está disponible en el modo
bicanal.
La tabla siguiente muestra el rango de valores de la duración del impulso, duración del periodo
y frecuencia en función de la salida High Speed:
Valor mínimo

Duración del im‐
pulso
Duración del
periodo
Frecuencia

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Valor máximo

Salida High Speed
desactivada

Salida High Speed
activada

10 μs

1,5 μs

100 μs

10 μs
0,02 Hz

Salida High
Speed desactiva‐
da

Salida High
Speed activada

85000000 μs (= 85 s)

10 kHz

100 kHz

1297

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Configuración
Introducción
El módulo tecnológico se configura y parametriza con el software de configuración.
Las funciones del módulo tecnológico se controlan con el programa de usuario a través de la
interfaz de control y respuesta.

Entorno del sistema
El módulo tecnológico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuración

En el programa de usuario

Operación centralizada
con una CPU 151xSP

● Sistema de automatización
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‐
faz de control y respuesta
en los datos IO

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU S7-1500
S7-1500
● Sistema de periferia
descentralizada ET 200SP

Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU
S7-300/400
S7-300/400
● Sistema de periferia
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‐
● Sistema de periferia
cante
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‐
● Sistema de periferia
bricante
descentralizada ET 200SP
● TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7:
Configuración del dispositivo y
ajuste de parámetros con HSP
Software de configuración de otro
fabricante:
Configuración del dispositivo y
ajuste de parámetros con archivo
GSD
Software de configuración de otro
fabricante:
Archivo GSD, configuración del
dispositivo y ajuste de parámetros
a través del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

1298

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP está
disponible para su descarga en Internet:
● Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
● Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Reacción a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los parámetros de la
configuración del dispositivo.
Tabla 5-10

Respuesta del canal en caso de STOP de la CPU

Opción

Significado

Aplicar valor susti‐ Hasta la siguiente transición de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Después de una transición de STOP a RUN, el módulo tecnológico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal continúa trabajando.
Las salidas digitales continúan conmutándose con arreglo a la parametrización.
Así, la secuencia de salida en curso continúa.
Tras una transición de STOP a RUN, la configuración del módulo tecnológico no se
desactiva.

Ajuste de parámetros
Las propiedades del módulo tecnológico se establecen mediante diferentes parámetros. En
función de los ajustes, no todos los parámetros están disponibles. Si la parametrización se
efectúa en el programa de usuario, los parámetros se transfieren al módulo con la instrucción
"WRREC" por medio del juego de datos 128.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1299

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
En este modo de operación, los parámetros del módulo se ajustan de la siguiente manera:
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware en
STEP 7 (TIA Portal)

1. Inserte el módulo desde la carpeta "Módulos tecnológicos" del
catálogo de hardware.
2. Ajuste el modo de operación "Retardo a la conexión/desconexión" y
los restantes parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuación encontrará el módulo en el catálogo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operación "Retardo a la conexión/desconexión" y
los restantes parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operación "Retardo a la conexión/desconexión" y
los restantes parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los parámetros del módulo se cargarán con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operación "Retardo a la conexión/desconexión" y
los restantes parámetros en el programa del usuario con el juego de
datos 128.

Parámetros del TM Pulse 2x24V en el modo de operación "Retardo a la conexión/desconexión"
En la columna "Rango", los ajustes predeterminados de los parámetros aparecen marcados
en negrita.
Tabla 5-11

Parámetros ajustables
Parámetro

Configuración de canal1

Rango de valores
● 2 canales (2 A):

Rango efectivo
Módulo

● 1 canal (4 A)
Reacción a STOP de la CPU

● Aplicar valor sustitutivo

Canal

● Continuar
Valor sustitutivo de DQA

● 0

Canal

● 1

1300

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Parámetro
Valor sustitutivo de DQB

Rango de valores
● 0

Rango efectivo
Canal

● 1
Diagnóstico agrupado

● Desactivado

Canal

● Activado
Diagnóstico DQA

● Desactivado

Canal

● Activado
Diagnóstico DQB

● Desactivado

Canal

● Activado
Salida High Speed (0,1 A)

● Desactivada

Canal

● Activada
Retardo a la entrada para entra‐
das digitales

● Ninguno

Canal

● 0,05 ms
● 0,1 ms
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms

Retardo a la desconexión para sa‐ 0...85000000 μs
lida de impulso
1

Canal

En la configuración con HSP para STEP 7 o con archivo GSD, se establece la configuración de
canales seleccionando el nombre del módulo.

Nota
Configuración con GSD para PROFIBUS
En la configuración con GSD para PROFIBUS, las posibilidades de parametrización no están
disponibles. A los parámetros del módulo se asignan los valores predeterminados. Ajuste el
modo de operación "Retardo a la conexión/desconexión" y los restantes parámetros en el
programa del usuario con el juego de datos 128.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1301

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Área de direcciones
Espacio de direcciones del módulo tecnológico
Tabla 5-12

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnológico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librería con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignación de la interfaz de control
El programa de usuario controla el comportamiento del módulo tecnológico a través de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignación de la interfaz de control:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
…
3

12
…
15

4
…
7

16
…
19

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

1302

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE
UDINT: Retardo a la conexión
SLOT
UDINT: Valor de carga
LD_SLOT
SET_DQA

Reservado

TM_
CTRL_DQ

SW_
ENABLE

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓
10

22

11

23

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Reservado

Bit 0

RES_
ERROR

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define el retardo a la conexión.
Rango de valores:
● Retardo a la conexión en μs: de 0 a 85000000D
En caso de rebase por exceso del rango de valores, se activa el bit de respuesta ERR_OUT_VAL
y se utiliza el último retardo a la conexión válido.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
● Retardo a la desconexión en μs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificación debe aplicarse una sola vez o
de modo cíclico.
Los valores no válidos dan lugar a la activación del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificación en SLOT debe aplicarse una sola vez o de modo cíclico.
0 significa: En cuanto se escribe el valor 3D en el correspondiente byte de salida, el valor de SLOT
se aplica una sola vez y se conserva hasta la próxima modificación. Las modificaciones a través
de SLOT se hacen efectivas con el siguiente flanco descendente en la DIn.0. Tras un nuevo
arranque del módulo, el valor se sobrescribe con el valor ajustado en la configuración hardware.
1 significa: Si se escribe el valor 19D en el correspondiente byte de salida, se aplica el valor actual
de SLOT cíclicamente. Las modificaciones a través de SLOT se hacen efectivas con el siguiente
flanco descendente en la DIn.0.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
● 0000B significa: Ninguna acción, estado de reposo
● 0011B significa: Retardo a la desconexión en μs
Todos los valores no indicados son no válidos y dan lugar a la activación del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB están ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA están ajustados
a 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1303

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de control/valor

Explicaciones

TM_CTRL_DQ

Con este bit se habilita la función tecnológica de la salida digital.
● 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
● 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.
Con este bit se activa la habilitación software. Si se utiliza la habilitación hardware, se combina
con la habilitación software.

SW_ENABLE

● 0 significa: Finalizar salida
● 1 significa: Iniciar salida
El uso de la habilitación hardware se activa mediante parametrización. El control de la habilita‐
ción hardware se realiza externamente a través de la entrada digital DIn.0.
RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
● ERR_24V
● ERR_DQA
● ERR_DQB
● ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignación de la interfaz de respuesta
El programa de usuario recibe valores actuales e información de estado del módulo
tecnológico a través de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignación de la interfaz de respuesta:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

ERR_
PULSE

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

0

8

1

9

2

10

Reservado

3

11

Reservado

4
...
7

12
...
15

1304

Reservado

Reservado
STS_DQA

STS_
ENABLE

SEQ_CNT
Reservado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es válido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_SLOT_VAL
automáticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es válido.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_OUT_VAL
automáticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagnóstico "Diagnóstico DQA", este error dispara la alarma de diagnóstico "Error en salidas digita‐
les".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simultá‐
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagnóstico
"Diagnóstico DQB", este error dispara la alarma de diagnóstico "Error en salidas digitales".

ERR_PULSE

Este bit indica un error en la salida de impulso.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es válido y no se ha
aceptado.

El bit se desactiva después de acusar el error con RES_ERROR.

El bit se desactiva después de acusar el error con RES_ERROR.
ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagnóstico, este error dispara la alarma de diagnóstico "Cortocircuito/sobrecarga en la alimen‐
tación de sensores externa".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensión de alimentación L+ es insuficiente. Si se han habilitado las alarmas de
diagnóstico, en caso de error en la tensión de alimentación se dispara la alarma de diagnóstico "Error
de tensión de alimentación".
Cuando la tensión de alimentación L+ vuelve a ser suficiente, se desactiva ERR_PWR automática‐
mente.
El bit no se activa si no hay tensión de alimentación aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitación software.
● 0 significa: Habilitación software no activa
● 1 significa: Habilitación software activa

STS_READY

Este bit indica que el módulo devuelve datos de usuario válidos. El módulo ha arrancado y está
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutación), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1305

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

SEQ_CNT

Este valor de contador indica el número de secuencias de salida finalizadas.

Reservado

Los bits de reserva están ajustados a 0.

Modo isócrono
El módulo tecnológico soporta la función de sistema "Modo isócrono". El modo isócrono no
tiene efecto en el modo de operación "Retardo a la conexión/desconexión".

Más información
Encontrará una descripción detallada del modo isócrono:
● En el manual de funciones Modo isócrono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
● En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.5

Modo de operación Salida de frecuencia

Función
Introducción
En este modo de operación, el canal en cuestión del módulo tecnológico emite una señal con
un ciclo de trabajo fijo del 50 % y el retardo a la conexión parametrizado. La frecuencia se
especifica con la interfaz de control.

Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida mediante la habilitación software,
active el bit de control (Página 1314) SW_ENABLE. El bit de respuesta STS_SW_ENABLE
indica que la habilitación software está activa en el módulo tecnológico.
Adicionalmente, puede utilizarse la habilitación hardware a través de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La figura siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitación hardware.

1306

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
70B&75/B'4




6:B(1$%/(
676B6:B(1$%/(
',Q
+DELO+:

676B',
'XUDFLµQGHOSHULRGR

'XUDFLµQGHOSHULRGR

'4Q$
5HWDUGRD 5HWDUGRD 'XUDFLµQ 'XUDFLµQ
ODHQWUDGD ODFRQH[LµQ
GHSDXVD
GHO
HQWUH
LPSXOVR
LPSXOVRV

)UHFXHQFLD+]





)UHFXHQFLD+]

676B(1$%/(

Figura 5-9

Ejemplo de una secuencia de salida

Si se utiliza la habilitación hardware, se combina con la habilitación software. Si está activa la
habilitación software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitación hardware. Los demás flancos ascendentes de la habilitación hardware durante la
secuencia de salida se ignoran. Si la habilitación hardware se activa y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexión y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexión, se emiten los impulsos a través de
la correspondiente salida digital DQn.A con la frecuencia asignada. La secuencia de salida
sigue ejecutándose continuamente mientras esté activado SW_ENABLE.
Si no se usa habilitación hardware, el retardo a la conexión se inicia con el flanco ascendente
de SW_ENABLE.

Interrupción de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitación software y se
cancela la secuencia de salida actual. El último periodo no finaliza. Se desactivan el bit de
respuesta STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Frecuencia
La frecuencia de salida se ajusta en la interfaz de control por medio de OUTPUT_VALUE como
número en coma flotante (REAL). El rango de valores depende del uso de la función de salida
High Speed (Página 1308):

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1307

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Salida High Speed

Rango de valores de
OUTPUT_VALUE

Rango de valores de la frecuencia

Activada

0,02...100000

0,02...100000 Hz
= 0,02 Hz...100 kHz

Desactivada

0,02...10000

0,02...10000 Hz
= 0,02 Hz...10 kHz

Las modificaciones de la frecuencia se hacen efectivas con el próximo flanco ascendente en
DQn.A.

Precisión
La frecuencia de salida se emite con una precisión de ±100 ppm en la salida digital DQn.A.

Retardo a la conexión
El retardo a la conexión se ajusta en la configuración hardware entre 0 y 85 s con una precisión
de 1 µs.
El retardo a la conexión también puede modificarse a través de la interfaz de control
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexión y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como retardo a la conexión.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

Encontrará más información en AUTOHOTSPOT.

Salida High Speed
La función Salida High Speed permite una frecuencia de salida máxima de 100 kHz con una
intensidad de salida máxima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera señales con una frecuencia más elevada, pero ofrece
una menor corriente de carga máxima. La salida High Speed solo está disponible en el modo
bicanal.

1308

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La tabla siguiente muestra el rango de valores de la duración del impulso y la frecuencia en
función de la salida High Speed:
Valor mínimo

Duración del im‐
pulso
Frecuencia

Valor máximo

Salida High Speed
desactivada

Salida High Speed
activada

10 μs

1,5 μs
0,02 Hz

Salida High
Speed desactiva‐
da

Salida High
Speed activada

85000000 μs (= 85 s)
10 kHz

100 kHz

Configuración
Introducción
El módulo tecnológico se configura y parametriza con el software de configuración.
Las funciones del módulo tecnológico se controlan con el programa de usuario a través de la
interfaz de control y respuesta.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1309

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Entorno del sistema
El módulo tecnológico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuración

En el programa de usuario

Operación centralizada
con una CPU 151xSP

● Sistema de automatización
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‐
faz de control y respuesta
en los datos IO

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU S7-1500
S7-1500
● Sistema de periferia
descentralizada ET 200SP

Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU
S7-300/400
S7-300/400
● Sistema de periferia
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‐
● Sistema de periferia
cante
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‐
● Sistema de periferia
bricante
descentralizada ET 200SP
● TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7:
Configuración del dispositivo y
ajuste de parámetros con HSP
Software de configuración de otro
fabricante:
Configuración del dispositivo y
ajuste de parámetros con archivo
GSD
Software de configuración de otro
fabricante:
Archivo GSD, configuración del
dispositivo y ajuste de parámetros
a través del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP está
disponible para su descarga en Internet:
● Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
● Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

1310

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Reacción a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los parámetros de la
configuración del dispositivo.
Tabla 5-13

Respuesta del canal en caso de STOP de la CPU

Opción

Significado

Aplicar valor susti‐ Hasta la siguiente transición de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Después de una transición de STOP a RUN, el módulo tecnológico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal continúa trabajando.
Las salidas digitales continúan conmutándose con arreglo a la parametrización.
Así, la secuencia de salida en curso continúa. Si se ha parametrizado la habilita‐
ción hardware, también se pueden iniciar nuevas secuencias de salida a través de
DIn.0.
Tras una transición de STOP a RUN, la configuración del módulo tecnológico no se
desactiva.

Ajuste de parámetros
Las propiedades del módulo tecnológico se establecen mediante diferentes parámetros. En
función de los ajustes, no todos los parámetros están disponibles. Si la parametrización se
efectúa en el programa de usuario, los parámetros se transfieren al módulo con la instrucción
"WRREC" por medio del juego de datos 128.
En este modo de operación, los parámetros del módulo se ajustan de la siguiente manera:
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware en
STEP 7 (TIA Portal)

1. Inserte el módulo desde la carpeta "Módulos tecnológicos" del
catálogo de hardware.
2. Ajuste el modo de operación "Salida de frecuencia" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuación encontrará el módulo en el catálogo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operación "Salida de frecuencia" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1311

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operación "Salida de frecuencia" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los parámetros del módulo se cargarán con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operación "Salida de frecuencia" y los restantes
parámetros en el programa del usuario con el juego de datos 128.

Parámetros del TM Pulse 2x24V en el modo de operación "Salida de frecuencia"
En la columna "Rango", los ajustes predeterminados de los parámetros aparecen marcados
en negrita.
Tabla 5-14

Parámetros ajustables
Parámetro

Configuración de canal

Rango de valores
1

● 2 canales (2 A):

Rango efectivo
Módulo

● 1 canal (4 A)
Reacción a STOP de la CPU

● Aplicar valor sustitutivo

Canal

● Continuar
Valor sustitutivo de DQA

● 0

Canal

● 1
Valor sustitutivo de DQB

● 0

Canal

● 1
Diagnóstico agrupado

● Desactivado

Canal

● Activado
Diagnóstico DQA

● Desactivado

Canal

● Activado
Diagnóstico DQB

● Desactivado

Canal

● Activado
Salida High Speed (0,1 A)

● Desactivada

Canal

● Activada
Función DI

● Entrada

Canal

● Habilitación HW

1312

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Parámetro
Retardo a la entrada para entra‐
das digitales

Rango de valores

Rango efectivo
Canal

● Ninguno
● 0,05 ms
● 0,1 ms
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms

Retardo a la conexión para salida
de impulso

0...85000000 μs

Canal

En la configuración con HSP para STEP 7 o con archivo GSD, se establece la configuración de
canales seleccionando el nombre del módulo.

1

Nota
Configuración con GSD para PROFIBUS
En la configuración con GSD para PROFIBUS, las posibilidades de parametrización no están
disponibles. A los parámetros del módulo se asignan los valores predeterminados. Ajuste el
modo de operación "Salida de frecuencia" y los restantes parámetros en el programa del
usuario con el juego de datos 128.

Área de direcciones
Espacio de direcciones del módulo tecnológico
Tabla 5-15

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnológico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librería con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1313

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Asignación de la interfaz de control
El programa de usuario controla el comportamiento del módulo tecnológico a través de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignación de la interfaz de control:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
…
3

12
…
15

4
…
7

16
…
19

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

10

22

11

23

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE
REAL: Frecuencia
SLOT
UDINT: Valor de carga
LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

1314

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define la frecuencia.
Rango de valores:
● Frecuencia en Hz si la salida High Speed está desactivada: de 0,02 a 10000D
● Frecuencia en Hz si la salida High Speed está activada: de 0,02 a 100000D
En caso de rebase por exceso o por defecto del rango de valores, se activa el bit de respuesta
ERR_OUT_VAL y se utiliza la última frecuencia válida.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
● Retardo a la conexión en μs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificación debe aplicarse una sola vez o
de modo cíclico.
Los valores no válidos dan lugar a la activación del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificación en SLOT debe aplicarse una sola vez o de modo cíclico.
0 significa: En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor de SLOT
se aplica una sola vez y se conserva hasta la próxima modificación. Las modificaciones por
medio de SLOT se hacen efectivas en la próxima secuencia de salida. Tras un nuevo arranque
del módulo, el valor se sobrescribe con el valor ajustado en la configuración hardware.
1 significa: Si se escribe el valor 18D en el correspondiente byte de salida, se aplica el valor actual
de SLOT cíclicamente. Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
● 0000B significa: Ninguna acción, estado de reposo
● 0010B significa: Retardo a la conexión en μs
Todos los valores no indicados son no válidos y dan lugar a la activación del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB están ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA están ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la función tecnológica de la salida digital.
● 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
● 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.

SW_ENABLE

Con este bit se activa la habilitación software. Si se utiliza la habilitación hardware, se combina
con la habilitación software.
● 0 significa: Finalizar salida
● 1 significa: Iniciar salida
El uso de la habilitación hardware se activa mediante parametrización. El control de la habilita‐
ción hardware se realiza externamente a través de la entrada digital DIn.0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1315

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de control/valor

Explicaciones

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
● ERR_24V
● ERR_DQA
● ERR_DQB
● ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignación de la interfaz de respuesta
El programa de usuario recibe valores actuales e información de estado del módulo
tecnológico a través de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignación de la interfaz de respuesta:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓
0

8

1

9

2

10

3
...
7

11
...
15

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

Reservado

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

Reservado

Reservado

Reservado
STS_DQA

STS_
ENABLE

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

1316

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es válido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_SLOT_VAL
automáticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es válido.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_OUT_VAL
automáticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagnóstico "Diagnóstico DQA", este error dispara la alarma de diagnóstico "Error en salidas digita‐
les".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simultá‐
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagnóstico
"Diagnóstico DQB", este error dispara la alarma de diagnóstico "Error en salidas digitales".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es válido y no se ha
aceptado.
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagnóstico, este error dispara la alarma de diagnóstico "Cortocircuito/sobrecarga en la alimen‐
tación de sensores externa".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensión de alimentación L+ es insuficiente. Si se han habilitado las alarmas de
diagnóstico, en caso de error en la tensión de alimentación se dispara la alarma de diagnóstico "Error
de tensión de alimentación".
Cuando la tensión de alimentación L+ vuelve a ser suficiente, se desactiva ERR_PWR automática‐
mente.
El bit no se activa si no hay tensión de alimentación aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitación software.
● 0 significa: Habilitación software no activa
● 1 significa: Habilitación software activa

STS_READY

Este bit indica que el módulo devuelve datos de usuario válidos. El módulo ha arrancado y está
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutación), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

Reservado

Los bits de reserva están ajustados a 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1317

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Modo isócrono
El módulo tecnológico soporta la función de sistema "Modo isócrono". Si no se usa habilitación
hardware, en el modo isócrono se inicia la secuencia de salida en el instante To, una vez
activado el bit de control SW_ENABLE.

Más información
Encontrará una descripción detallada del modo isócrono:
● En el manual de funciones Modo isócrono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
● En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.6

Modo de operación PWM con motor DC

Función
Introducción
En este modo de operación, el correspondiente canal del módulo tecnológico emite una señal
modulada por ancho de impulso por la salida digital bipolar para controlar un motor de corriente
continua con escobillas en ambos sentidos de giro. El ciclo de trabajo se especifica con la
interfaz de control.
Cada canal posee una salida digital bipolar DQn.A/DQn.B para la conexión de un motor DC.
El módulo funciona como regulador de cuatro cuadrantes. DQn.A y DQn.B están conectadas
como un puente H en el interior del módulo. Encontrará información sobre la conexión del
motor en el capítulo AUTOHOTSPOT.
El ciclo de trabajo actúa como una tensión y determina así la velocidad de giro del motor. Con
el signo del ciclo de trabajo se especifica el sentido de giro. Si se controla el motor en sentido
hacia delante, DQn.A está activada y DQn.B, desactivada. Si se controla el motor en sentido
hacia atrás, DQn.A está desactivada y DQn.B, activada.
Se puede detener el motor a través de una de las siguientes señales:
● Desactivación del bit de control SW_ENABLE en la interfaz de control
● Flanco descendente de la habilitación hardware (DIn.0)
● Flanco ascendente del final de carrera (DIn.0)

Inicio de la secuencia de salida
Para iniciar la secuencia de salida mediante la habilitación software, active el bit de control
(Página 1326) SW_ENABLE. El bit de respuesta STS_SW_ENABLE indica que la habilitación
software está activa en el módulo tecnológico.
Adicionalmente, puede utilizarse la habilitación hardware a través de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.

1318

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Diagrama de impulsos
La figura siguiente muestra un ejemplo de una secuencia de salida para el sentido hacia
delante utilizando DIn.0 como habilitación hardware.
6:B(1$%/(

676B6:B(1$%/(
',Q
+DELO+:
676B',
'XUDFLµQGHOSHULRGR

'XUDFLµQGHOSHULRGR

'4Q$
'4Q%
5HWDUGRD
ODHQWUDGD

5HWDUGRD
ODFRQH[LµQ

'XUDFLµQ
GHOLPSXOVR

'XUDFLµQ
GHSDXVD
HQWUH
LPSXOVRV

676B(1$%/(
&LFORGHWUDEDMR

Figura 5-10

50 %

20 %

Ejemplo de una secuencia de salida (habilitación hardware)

Si se utiliza la habilitación hardware, se combina con la habilitación software. Si está activa la
habilitación software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitación hardware. Si la habilitación hardware se activa y permanece activada durante el
retardo a la entrada, se inicia el retardo a la conexión y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexión, se emite la señal modulada por
ancho de impulso a través de la salida digital DQn.A/DQn.B con el ciclo de trabajo asignado.
El ciclo de trabajo es la relación entre la duración del impulso y la duración del periodo.
Si no se usa habilitación hardware, el retardo a la conexión se inicia con el flanco ascendente
de SW_ENABLE. La habilitación hardware no está disponible en modo isócrono. Si la
habilitación hardware se parametriza en modo isócrono, el módulo lo interpreta como un final
de carrera.
La figura siguiente muestra un ejemplo de una secuencia de salida para el sentido hacia
delante utilizando DIn.0 como final de carrera.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1319

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
6:B(1$%/(

676B6:B(1$%/(
',Q
)LQDOFDUUHUD
676B',
'XUDFLµQGHOSHULRGR

'XUDFLµQGHOSHULRGR

'4Q$
'4Q%
5HWDUGRD
ODFRQH[LµQ

'XUDFLµQ
GHOLPSXOVR

'XUDFLµQ
GHSDXVD
HQWUH
LPSXOVRV

5HWDUGRD
ODHQWUDGD

676B(1$%/(
&LFORGHWUDEDMR

Figura 5-11

50 %

20 %

Ejemplo de una secuencia de salida (final de carrera)

Interrupción de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitación software y se
cancela la secuencia de salida actual. En caso de cancelación, el último periodo no finaliza. El
bit de respuesta STS_ENABLE, así como DQn.A y DQn.B se desactivan (parada del motor).
Si se utiliza la habilitación hardware, la secuencia de salida también se puede cancelar con un
flanco descendente en DIn.0. Si, en lugar de la habilitación hardware, se utiliza el final de
carrera, la secuencia de salida se puede cancelar de manera alternativa con un flanco
ascendente en DIn.0.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Ciclo de trabajo
El ciclo de trabajo equivale a la relación entre la duración del impulso y la duración del periodo
(también denominado relación impulso-pausa o tiempo de conexión).
El ciclo de trabajo se ajusta en la interfaz de control (Página 1326) por medio de
OUTPUT_VALUE en el formato analógico de S7 (DINT). El signo especifica el sentido de giro
del motor. Un valor positivo equivale al sentido hacia delante. Si se ajusta 0, el motor se
detiene. Si se ajusta el valor mínimo, DQn.B se activará durante toda la duración del periodo.
Si se ajusta el valor máximo, DQn.A se activará durante toda la duración del periodo. Si se
rebasa por exceso o por defecto el rango de valores, se utiliza el valor mínimo o máximo.

1320

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Las modificaciones del ciclo de trabajo se hacen efectivas con el próximo flanco ascendente
en DQn.A o DQn.B.
Formato de salida

Rango de valores de
OUTPUT_VALUE

Duración del impulso

Salida analógica S7

‒27648 ... 27648

(OUTPUT_VALUE/27648) × duración del periodo

Antes de cambiar el sentido de giro, se recomienda ajustar el valor 0 para OUTPUT_VALUE
el tiempo suficiente para que el motor se detenga primero. Si el motor requiere una rampa de
conexión o de desconexión, esta rampa deberá realizarse controlando el ciclo de trabajo de la
forma correspondiente.

Duración del periodo
La duración del periodo se ajusta en la configuración hardware entre 100 μs y 85 s con una
precisión de 1 µs.
La duración del periodo también puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como número entero (UDINT). En este caso, seleccione, por medio del
bit de control MODE_SLOT, si la modificación debe aplicarse una sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 1D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como duración del periodo y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas con el próximo
flanco ascendente en DQn.A/DQn.B.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 17D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como duración del periodo.
Las modificaciones por medio de SLOT se hacen efectivas con el próximo
flanco ascendente en DQn.A/DQn.B.

Encontrará más información en AUTOHOTSPOT.

Retardo a la conexión
El retardo a la conexión se ajusta en la configuración hardware entre 0 y 85 s con una precisión
de 1 µs.
El retardo a la conexión también puede modificarse a través de la interfaz de control
introduciendo un nuevo valor en SLOT como número entero (UDINT). En este caso,

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1321

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
seleccione, por medio del bit de control MODE_SLOT, si la modificación debe aplicarse una
sola vez o de modo cíclico:
MODE_SLOT = 0

Modificación única:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexión y se conserva
hasta la próxima modificación.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificación cíclica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente como retardo a la conexión.
Las modificaciones por medio de SLOT se hacen efectivas en la próxima
secuencia de salida. La modificación no afecta a la secuencia de salida en
curso.

Nota
En el modo isócrono, los retardos a la conexión parametrizados no tienen efecto.
Encontrará más información en AUTOHOTSPOT.

Configuración
Introducción
El módulo tecnológico se configura y parametriza con el software de configuración.
Las funciones del módulo tecnológico se controlan con el programa de usuario a través de la
interfaz de control y respuesta.

1322

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Entorno del sistema
El módulo tecnológico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuración

En el programa de usuario

Operación centralizada
con una CPU 151xSP

● Sistema de automatización
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‐
faz de control y respuesta
en los datos IO

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU S7-1500
S7-1500
● Sistema de periferia
descentralizada ET 200SP

Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware

● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con una CPU
S7-300/400
S7-300/400
● Sistema de periferia
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‐
● Sistema de periferia
cante
descentralizada ET 200SP
● TM Pulse 2x24V
Operación descentraliza‐ ● Sistema de automatización
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‐
● Sistema de periferia
bricante
descentralizada ET 200SP
● TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuración del dispositivo y
ajuste de parámetros en la confi‐
guración hardware
STEP 7:
Configuración del dispositivo y
ajuste de parámetros con HSP
Software de configuración de otro
fabricante:
Configuración del dispositivo y
ajuste de parámetros con archivo
GSD
Software de configuración de otro
fabricante:
Archivo GSD, configuración del
dispositivo y ajuste de parámetros
a través del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP está
disponible para su descarga en Internet:
● Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
● Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1323

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Ajuste de parámetros
Las propiedades del módulo tecnológico se establecen mediante diferentes parámetros. En
función de los ajustes, no todos los parámetros están disponibles. Si la parametrización se
efectúa en el programa de usuario, los parámetros se transfieren al módulo con la instrucción
"WRREC" por medio del juego de datos 128.
En este modo de operación, los parámetros del módulo se ajustan de la siguiente manera:
Ajuste de parámetros me‐
diante...

Procedimiento básico

Configuración hardware en
STEP 7 (TIA Portal)

1. Inserte el módulo desde la carpeta "Módulos tecnológicos" del
catálogo de hardware.
2. Ajuste el modo de operación "PWM con motor DC" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuación encontrará el módulo en el catálogo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operación "PWM con motor DC" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operación "PWM con motor DC" y los restantes
parámetros del módulo en la configuración hardware.
3. Cargue el proyecto en la CPU.

Configuración hardware con
archivo GSD para la opera‐
ción descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuación encontrará el módulo en el catálogo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los parámetros del módulo se cargarán con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operación "PWM con motor DC" y los restantes
parámetros en el programa del usuario con el juego de datos 128.

1324

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Parámetros del TM Pulse 2x24V en el modo de operación "PWM con motor DC"
En la columna "Rango", los ajustes predeterminados de los parámetros aparecen marcados
en negrita.
Tabla 5-16

Parámetros ajustables
Parámetro

Configuración de canal

Rango de valores
1

● 2 canales (2 A):

Rango efectivo
Módulo

● 1 canal (4 A)
Diagnóstico agrupado

● Desactivado

Canal

● Activado
Diagnóstico DQA

● Desactivado

Canal

● Activado
Diagnóstico DQB

● Desactivado

Canal

● Activado
Función DI

● Entrada

Canal

● Habilitación HW
● Final de carrera
Retardo a la entrada para entra‐
das digitales

● Ninguno

Canal

● 0,05 ms
● 0,1 ms
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms

1

Duración del periodo

100...1000...85000000 μs

Canal

Duración del periodo real

se calcula automáticamente (solo lectura) Canal

Retardo a la conexión para salida
de impulso

0...85000000 μs

Canal

En la configuración con HSP para STEP 7 o con archivo GSD, se establece la configuración de
canales seleccionando el nombre del módulo.

Nota
Configuración con GSD para PROFIBUS
En la configuración con GSD para PROFIBUS, las posibilidades de parametrización no están
disponibles. A los parámetros del módulo se asignan los valores predeterminados. Ajuste el
modo de operación "PWM con motor DC" y los restantes parámetros en el programa del
usuario con el juego de datos 128.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1325

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Área de direcciones
Espacio de direcciones del módulo tecnológico
Tabla 5-17

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnológico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librería con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignación de la interfaz de control
El programa de usuario controla el comportamiento del módulo tecnológico a través de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignación de la interfaz de control:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

0
…
3

12
…
15

DINT: Ciclo de trabajo en el formato analógico de S7

4
…
7

16
…
19

UDINT: Valor de carga

8

20

9

21

1326

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

Reservado

MODE_
SLOT
Reservado

LD_SLOT
SW_
ENABLE

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓
10

22

11

23

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Reservado

Bit 1

Bit 0

RES_
ERROR

Reservado

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define el ciclo de trabajo.
Rango de valores:
● Ciclo de trabajo: de ‒27648 a 27648D
En caso de rebase por exceso o por defecto del rango de valores, se activa el bit de respuesta
ERR_OUT_VAL y se utiliza el valor mínimo o máximo.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
● Duración del periodo en μs: de 100 a 85000000D
● Retardo a la conexión en μs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificación debe aplicarse una sola vez o
de modo cíclico.
Los valores no válidos dan lugar a la activación del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificación en SLOT debe aplicarse una sola vez o de modo cíclico.
0 significa: Si se escribe el valor en cuestión en el correspondiente byte de salida, el valor de
SLOT se aplica una sola vez y se mantiene hasta la próxima modificación. Las modificaciones del
retardo a la conexión por medio de SLOT se hacen efectivas en la próxima secuencia de salida.
Las modificaciones de la duración del periodo por medio de SLOT se hacen efectivas con el
próximo flanco ascendente en DQn.A/DQn.B. Tras un nuevo arranque del módulo, el valor se
sobrescribe con el valor ajustado en la configuración hardware.
1 significa: Si se escribe el valor en cuestión en el correspondiente byte de salida, el valor actual
de SLOT se aplica cíclicamente. Las modificaciones del retardo a la conexión por medio de SLOT
se hacen efectivas en la próxima secuencia de salida. Las modificaciones de la duración del
periodo por medio de SLOT se hacen efectivas con el próximo flanco ascendente en DQn.A/
DQn.B.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1327

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de control/valor

Explicaciones

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
● 0000B significa: Ninguna acción, estado de reposo
● 0001B significa: Duración del periodo en μs
● 0010B significa: Retardo a la conexión en μs
Todos los valores no indicados son no válidos y dan lugar a la activación del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SW_ENABLE

Con este bit se activa la habilitación software. Si se utiliza la habilitación hardware, se combina
con la habilitación software.
● 0 significa: Finalizar salida
● 1 significa: Iniciar salida
El uso de la habilitación hardware se activa mediante parametrización. El control de la habilita‐
ción hardware se realiza externamente a través de la entrada digital DIn.0.

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
● ERR_24V
● ERR_DQA
● ERR_DQB
● ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignación de la interfaz de respuesta
El programa de usuario recibe valores actuales e información de estado del módulo
tecnológico a través de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignación de la interfaz de respuesta:
Offset de
byte res‐
pecto de
la direc‐
ción ini‐
cial
Canal
0/1
↓ ↓
0

8

1

9

2

10

3
...
7

11
...
15

1328

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

Reservado

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

Reservado

Reservado

Reservado
STS_DQA

STS_
ENABLE

Reservado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Nota
El canal 1 solo está disponible en el modo bicanal del módulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es válido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_SLOT_VAL
automáticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es válido.
Cuando el módulo recibe un valor válido de la interfaz de control, se desactiva ERR_OUT_VAL
automáticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagnóstico "Diagnóstico DQA", este error dispara la alarma de diagnóstico "Error en salidas digita‐
les".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simultá‐
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagnóstico
"Diagnóstico DQB", este error dispara la alarma de diagnóstico "Error en salidas digitales".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es válido y no se ha
aceptado.
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagnóstico, este error dispara la alarma de diagnóstico "Cortocircuito/sobrecarga en la alimen‐
tación de sensores externa".
El bit se desactiva después de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensión de alimentación L+ es insuficiente. Si se han habilitado las alarmas de
diagnóstico, en caso de error en la tensión de alimentación se dispara la alarma de diagnóstico "Error
de tensión de alimentación".
Cuando la tensión de alimentación L+ vuelve a ser suficiente, se desactiva ERR_PWR automática‐
mente.
El bit no se activa si no hay tensión de alimentación aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitación software.
● 0 significa: Habilitación software no activa
● 1 significa: Habilitación software activa

STS_READY

Este bit indica que el módulo devuelve datos de usuario válidos. El módulo ha arrancado y está
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutación), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1329

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

Reservado

Los bits de reserva están ajustados a 0.

Modo isócrono
El módulo tecnológico soporta la función de sistema "Modo isócrono". En el modo isócrono, la
secuencia de salida se inicia en el instante To, una vez activado el bit de control SW_ENABLE.
En modo isócrono, la duración del periodo se adapta al ciclo de aplicación (TAPP) y se sincroniza
con este. La sincronización es especialmente útil para crear lazos de regulación.
El módulo adapta el valor asignado de duración del periodo de modo que se obtenga una
relación entera. En el caso menos favorable, la diferencia equivale a medio ciclo de aplicación.
Ejemplos:
Ciclo de aplicación
TAPP

Duración del periodo asigna‐
da TSetpoint

Duración del periodo real
TActual

TAPP:TActual

10 ms
(10000 μs)

1800 μs

1666 μs

6:1

2000 μs

2000 μs

5:1

3000 μs

3333 μs

3:1

5000 μs

5000 μs

2:1

6000 μs

5000 μs

2:1

12000 μs

10000 μs

1:1

16000 μs

20000 μs

1:2

La figura siguiente muestra un ejemplo de relación 1:1 entre el ciclo de aplicación y la duración
del periodo con un ciclo de trabajo del 50%.
'XUDFLµQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFLµQ
72

72

72

72

La figura siguiente muestra un ejemplo de relación 3:1 entre el ciclo de aplicación y la duración
del periodo con un ciclo de trabajo del 50%.

1330

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
'XUDFLµQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFLµQ
72

72

72

72

La figura siguiente muestra un ejemplo de relación 1:3 entre el ciclo de aplicación y la duración
del periodo con un ciclo de trabajo del 50%.
'XUDFLµQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFLµQ
72

72

72

72

Nota
Sin habilitación hardware ni retardo a la conexión
En modo isócrono no se puede utilizar habilitación hardware ni retardo a la conexión.
Si la habilitación hardware se parametriza en modo isócrono, el módulo lo interpreta como un
final de carrera.

Más información
Encontrará una descripción detallada del modo isócrono:
● En el manual de funciones Modo isócrono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
● En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.7

Conexión en paralelo de los canales
Al conectar los dos canales en paralelo se obtiene un canal lógico con una intensidad de salida
de hasta 4 A.
La figura siguiente muestra el modo bicanal, en el que los canales funcionan
independientemente el uno del otro y se parametrizan por separado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1331

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
&DQDO
3DU£PHWUR

0RGRVGH
RSHUDFLµQ\
IXQFLRQHV

3URJUDPDGHXVXDULR

,QWHUID]GHUHVSXHVWD

$P£[

',

&DQDOb
3DU£PHWUR

,QWHUID]GHFRQWURO
0RGRVGH
RSHUDFLµQ\
IXQFLRQHV

,QWHUID]GHUHVSXHVWD

Figura 5-12

'4$'4%

3URFHVR

,QWHUID]GHFRQWURO

'4$'4%

$P£[

',

Modo de dos canales

La figura siguiente muestra el modo monocanal, en el que solo se parametriza el canal 0.
FDQDOb
3DU£PHWUR

'4$'4%

(OFDQDObVLJXH
DO
FDQDOb

Figura 5-13

1332

$P£[

',

3URJUDPDGHXVXDULR

,QWHUID]GHUHVSXHVWD

0RGRVGH
RSHUDFLµQ\
IXQFLRQHV

'4$'4%

&LUFXLWR
SDUDOHOR
H[WHUQR
SDUDPRGR
PRQRFDQDO

3URFHVR

,QWHUID]GHFRQWURO

Modo monocanal (circuito paralelo)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
La tabla siguiente muestra la intensidad de carga posible en función de la salida High Speed:
Corriente máxima de salida
Salida High Speed desactivada

Salida High Speed activada

Modo bicanal

2A

100 mA

Modo monocanal

4A

No permitido

Esta función se ajusta en la configuración hardware por medio del parámetro "Configuración
de canales".

5.1.2.8

Control directo de salidas digitales

Mando de la secuencia de salida a través del programa de usuario o el módulo
Con el bit de control TM_CTRL_DQ se establece el modo en que se controlarán DQn.A y
DQn.B:
TM_CTRL_DQ = 0

TM_CTRL_DQ = 1

El programa de usuario define los estados de las La secuencia de salida del modo de operación pa‐
salidas DQn.A y DQn.B mediante los bits de con‐ rametrizado determina el estado de las salidas
trol SET_DQA y SET_DQB.
DQn.A y DQn.B.

Nota
Control directo no disponible con PWM con motor DC
En el modo de operación "PWM con motor DC", los bits de control TM_CTRL_DQ, SET_DQA
y SET_DQB no son efectivos.

Diagrama de impulsos
El ajuste de TM_CTRL_DQ no cancela la secuencia de salida en curso. El módulo ejecuta las
secuencias de salida internamente sea cual sea el estado de TM_CTRL_DQ.
La figura siguiente muestra un ejemplo de secuencia de salida para el control directo de DQn.A:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1333

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFLµQ+:
7LHPSRGHFRPXQLFDFLµQ\GHUHDFFLµQ
UHVSHFWLYDPHQWH

'4Q$

70B&75/B'4
6(7B'4$
676B(1$%/(

(55B38/6(

5HWDUGRDOD
FRQH[LµQ

Figura 5-14

5HWDUGRDOD
FRQH[LµQ

'XUDFLµQGHOLPSXOVR

Ejemplo de secuencia de salida con control directo de DQn.A (modo de operación Salida de impulsos)

Nota
Si se activan los bits de control SET_DQA y SET_DQB al mismo tiempo, se activa el bit
ERR_DQB en la interfaz de respuesta y solo se activa la salida digital DQn.A.
El bit ERR_DQB se desactiva después de que se haya acusado el error activando
RES_ERROR.
Además de la consigna principal OUTPUT_VALUE, puede modificarse una consigna para otro
parámetro.

1334

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Con el valor SLOT de la interfaz de control se define el valor de carga. Con la solicitud de carga
LD_SLOT se especifica el significado del valor de SLOT en función del modo de operación:
LD_SLOT

Significado del valor de
SLOT

Modos de operación para el uso del
valor

0D

Ninguna acción, estado de
reposo

Todos los modos de operación

1D

Duración del periodo

● Modulación por ancho de impulso
PWM

Tipo de datos
de SLOT
—
UDINT

● Tren de impulsos
● PWM con motor DC:
2D

Retardo a la conexión

● Salida de impulso
● Modulación por ancho de impulso
PWM
● Tren de impulsos
● Salida de frecuencia
● PWM con motor DC:

3D

Retardo a la desconexión

● Retardo a la conexión/desconexión

4D

Ciclo de trabajo

● Tren de impulsos

5D

Rampa de conexión de dit‐ ● Modulación por ancho de impulso
her
PWM
y rampa de desconexión
de dither

2 × INT

6D

Amplitud de dither

UDINT

7D

Duración del periodo de dit‐ ● Modulación por ancho de impulso
her
PWM

● Modulación por ancho de impulso
PWM

Seleccione, por medio del bit de control MODE_SLOT, si la modificación del valor en cuestión
debe aplicarse una sola vez o de modo cíclico.

MODE_SLOT
Modificación única (MODE_SLOT = 0)
Se recomienda la modificación única cuando, además de OUTPUT_VALUE, deba modificarse
de vez en cuando otro parámetro. En este caso no se inicializa el módulo. En cambio, si se
realiza la modificación transfiriendo un nuevo juego de parámetros, sí se inicializa el módulo.
En el caso de la modificación única, se utilizan los siguientes parámetros:
Parámetros de control

● SLOT
● LD_SLOT
● MODE_SLOT
● RES_ERROR

Parámetros de respuesta

● STS_LD_SLOT
● ERR_LD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1335

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Para efectuar una modificación única, siga este procedimiento básico:
1. Compruebe si la orden precedente se ha ejecutado correctamente, es decir, si se ha
modificado STS_LD_SLOT y no se ha activado ERR_LD.
2. Si ERR_LD se ha activado:
– Escriba LD_SLOT = 0 y confirme el error activando RES_ERROR. Continúe con el
paso 1.
O bien:
– Escriba un valor válido tanto en SLOT como en LD_SLOT y confirme el error activando
RES_ERROR. Continúe con el paso 1.
3. Introduzca un valor nuevo en SLOT.
4. Introduzca un valor modificado en LD_SLOT.
Nota
En el caso de la modificación única, se presupone que, al contrario que la modificación
cíclica, el mismo parámetro no se modifica dos veces consecutivas. Si se desea modificar
el mismo parámetro dos veces consecutivas, deberá insertarse una "orden de marcha en
vacío" (LD_SLOT = 0) entre las dos órdenes.
5. Continúe con el paso 1.
Nota
La secuencia también se representa detalladamente en un diagrama en el anexo.

Nota
Tras un nuevo arranque del módulo, el valor del parámetro afectado se sobrescribe en el juego
de datos interno del módulo con el valor ajustado en la configuración hardware.

Modificación cíclica (MODE_SLOT = 1)
Se recomienda la modificación cíclica cuando, además de OUTPUT_VALUE, deba
modificarse cíclicamente otro parámetro.
Nota
Para finalizar la modificación cíclica durante la secuencia de salida, ajuste LD_SLOT y
MODE_SLOT a 0. Los valores modificados hasta entonces se mantienen.

Esquema del proceso
La figura siguiente muestra un ejemplo del procedimiento básico:

1336

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
02'(B6/27
5DQJRGHYDORUHV
QRY£OLGR
6/27

/'B6/27
676B/'B6/27
(55B6/27B9$/
(55B/'
5(6B(5525
D E

D E

F G H D E

D

E F

G H

1a Se escribe un valor válido en SLOT y LD_SLOT.
1b Se conmuta el bit de respuesta STS_LD_SLOT, ya que la solicitud de carga LD_SLOT ha sido detectada y ejecutada por
el módulo. El valor de SLOT se aplica una sola vez y se mantiene hasta la próxima modificación de LD_SLOT. El
parámetro afectado se actualiza en el juego de datos interno del módulo y se hace efectivo con la próxima secuencia de
salida.
2a Se escribe un valor modificado y válido en LD_SLOT y un valor no válido en SLOT.
2b Se activa el bit de respuesta ERR_LD, ya que el valor de SLOT no es válido. El valor no se aplica.
2c Active el bit de control RES_ERROR para acusar el error.
2d El bit de respuesta ERR_LD se desactiva.
2e Se desactiva el bit de control RES_ERROR.
3a Se escribe un valor modificado y válido en SLOT y LD_SLOT.
3b Se conmuta el bit de respuesta STS_LD_SLOT, ya que la solicitud de carga LD_SLOT ha sido detectada y ejecutada por
el módulo. El valor de SLOT se aplica una sola vez y se mantiene hasta la próxima modificación de LD_SLOT. El
parámetro afectado se actualiza en el juego de datos interno del módulo y se hace efectivo con la próxima secuencia de
salida.
4a Se activa MODE_SLOT y se escriben cíclicamente valores válidos en SLOT y LD_SLOT. El valor de SLOT se aplica
cíclicamente y se hace efectivo en la próxima secuencia de salida. Sin embargo, no se guarda el cambio en cuestión.
4b Se escriben cíclicamente valores no válidos en SLOT.
4c Se activa el bit de respuesta ERR_SLOT_VAL, ya que el valor de SLOT no es válido. No se aplica el valor en cuestión
de SLOT.
4d Se escriben cíclicamente valores válidos en SLOT.
4e El bit de respuesta ERR_SLOT_VAL se desactiva automáticamente porque el módulo ha vuelto a recibir valores válidos.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1337

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

5.1.3

Principios básicos de la salida de impulsos (CPU compacta)

5.1.3.1

Modos de operación

Descripción general
En este capítulo se describen las nuevas funciones de la CPU con versión de firmware V2.0.
Modo de operación

Aplicaciones

Ventajas para el cliente

Modulación por ancho
de impulso (PWM)
(Página 1339)

El modo de operación PWM se utiliza cuando
se desea que un módulo de salida (calenta‐
miento, forma constructiva) controle potencias
lo más elevadas posible con mínimas pérdidas.

En caso de modulación por ancho de impulso, a
través de la salida digital se emite una señal con
una duración de periodo definida y un ciclo de tra‐
bajo variable. El ciclo de trabajo es la relación en‐
tre la duración del impulso y la duración del perio‐
do. Además del ciclo de trabajo, en el modo de
operación PWM también se puede controlar la du‐
ración del periodo.

La modulación por ancho de impulso se utiliza,
por ejemplo, para controlar:
● la temperatura de una resistencia
calefactora
● la fuerza de una bobina de una válvula
proporcional y, con ello, la posición de una
válvula desde cerrada hasta
completamente abierta

Con la modulación por ancho de impulso se varía
el valor medio de la tensión de salida. Dependien‐
do de la carga conectada, es posible controlar así
la corriente de carga o la potencia.

● la velocidad de giro de un motor desde
velocidad cero hasta plena velocidad
Salida de frecuencia
(Página 1343)

Puede implementar aplicaciones con frecuen‐
cias de hasta 100 kHz y así trabajar en rangos
que no se pueden alcanzar con una CPU que
tenga una salida digital sencilla.

Es posible generar frecuencias con gran preci‐
sión.
En el caso de que las condiciones de transmisión
no sean óptimas, el receptor puede reconstruir la
información con toda precisión.
En el modo de operación Salida de frecuencia es
posible asignar un valor de frecuencia con fre‐
cuencias elevadas con más precisión que median‐
te la duración del periodo (PWM).

Pulse Train Output
(PTO) (Página 1346)

PTO también se denomina interfaz de impulsos/
sentido. La interfaz de impulsos/sentido consta de
Se utiliza en muchas aplicaciones de posicio‐ 2 señales. La frecuencia de la salida de impulso
namiento como, por ejemplo, para ejes de des‐ representa la velocidad, y el número de impulsos
que se emiten representa el trayecto que se va a
plazamiento o de avance.
recorrer. La salida de sentido determina el sentido
del desplazamiento. La posición se define de este
modo con una precisión de incrementos.
Pulse Train Output es una interfaz muy exten‐
dida para el control de accionamientos.

El control de las salidas se efectúa con S7‑1500
Motion Control mediante objetos tecnológicos.
PTO es una interfaz sencilla y de uso universal
entre el controlador y el accionamiento. Por tanto,
es soportada por accionamientos paso a paso y
servoaccionamientos en todo el mundo.

1338

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Modo de operación: Modulación por ancho de impulso (PWM)
Características
El modo de operación Modulación por ancho de impulso (PWM) de la CPU compacta tiene las
siguientes características técnicas:
Mínimo
Salida estándar

Duración
100 µs con carga >
de impulso
0,1A 1)

Duración
del perio‐
do

Máximo

Salida High-Speed
desactivada

Salida High-Speed
activada

20 µs con carga
> 0,1 A 1)

2 µs 1)

200 µs con carga ≥
2mA 1)

40 µs con carga ≥
2mA 1)

10 ms 2)

100 μs 2)

Salida es‐
tándar

Salida HighSpeed desacti‐
vada

Salida HighSpeed activa‐
da

10 000 000 µs (10 s)

10 μs

1)

Teóricamente, es posible un valor más bajo, pero la tensión de salida ya no podrá tener la forma de impulso rectangular
completo, dependiendo de la carga conectada.

2)

En función de la carga

Funcionamiento
En caso de modulación por ancho de impulso, a través de la salida digital se emite una señal
con una duración de periodo definida y un ciclo de trabajo variable. El ciclo de trabajo es la
relación entre la duración del impulso y la duración del periodo. Además del ciclo de trabajo,
en el modo de operación PWM también se puede controlar la duración del periodo.
Con la modulación por ancho de impulso se varía el valor medio de la tensión de salida.
Dependiendo de la carga conectada, es posible controlar así la corriente de carga o la potencia.
La duración de impulso se puede expresar como centésima de la duración del periodo (de 0 a
100), como milésima (de 0 a 1 000), como diezmilésima (de 0 a 10 000) o en el formato
analógico de S7.

཰
ཱ

①
②

ཱ

Duración del periodo
Duración de impulso

La duración de impulso puede estar entre 0 (no hay impulso, siempre desactivado) y el máximo
de la escala (no hay impulso, duración del periodo siempre activada).
La salida de PWM se puede utilizar, por ejemplo, para controlar la velocidad de un motor desde
velocidad cero hasta plena velocidad, o también se puede utilizar para controlar la posición de
una válvula desde cerrada hasta completamente abierta.
Para el control de salidas de impulso rápidas (salida High-Speed), se dispone de cuatro
generadores de impulsos respectivamente para PWM y para tren de impulsos (PTO). PTO es

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1339

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
utilizado por los objetos tecnológicos eje de posicionado, eje de velocidad y eje sincronizado.
Puede asignar cada generador de impulsos a PWM o PTO, pero no a ambos a la vez.
El modo de operación Modulación por ancho de impulso (PWM) se configura en STEP 7
(TIA Portal).
El modo de operación Modulación por ancho de impulso (PWM) posee las siguientes
funciones:
● Si la opción "Salida High-Speed (0,1 A)" está activada, se puede generar una duración
mínima de impulso de 2 μs con una intensidad de 100 mA. Si la opción "Salida High-Speed
(0,1 A)" no está activada, se puede generar una duración mínima de impulso de 20 µs con
una carga > 0,1 A y una duración mínima de impulso 40 µs con una carga ≥ 2mA y una
intensidad máxima de 0,5 A. Si se utiliza una salida estándar, se puede generar una
duración mínima de impulso de 100 µs con una carga > 0,1 A y una duración mínima de
impulso 200 µs con una carga ≥ 2mA.
● Puede controlar la salida de impulso (DQA) del canal de forma manual a través de la
interfaz de control y respuesta.
● Puede configurar la reacción a STOP de la CPU. En una transición a STOP de la CPU, la
salida de impulso (DQA) pasa al estado configurado.

Controlador
Para el modo de operación Modulación por ancho de impulso (PWM), el programa de usuario
accede directamente a la interfaz de control y respuesta del canal.
Se soporta la reparametrización mediante las instrucciones WRREC/RDREC y el juego de
datos de parámetros 128. Para más información al respecto, consulte el capítulo Juegos de
datos de parámetros (PWM) del manual de producto correspondiente.
El ciclo de trabajo de la amplitud de impulso se controla con el campo OUTPUT_VALUE de la
interfaz de control. La modulación por ancho de impulso genera impulsos continuos a partir de
este valor. La duración del periodo se puede adaptar.
1
TM_CTRL_DQ
0
SW_ENABLE
(habilitación soware)

STS_SW_ENABLE
Duración del periodo

Duración del periodo

Salida digital
Durac.
impulso

Durac.
pausa
impulso

STS_ENABLE

Ciclo de trabajo

1340

50%

20%

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Inicio de la secuencia de salida
El programa de control debe emitir la habilitación para la secuencia de salida con ayuda de la
habilitación de software (SW_ENABLE 0 → 1). El bit de notificación STS_SW_ENABLE indica
que la habilitación de software está pendiente en PWM.
Si la habilitación de software está activada (flanco ascendente), se activa STS_ENABLE. La
secuencia de salida se ejecuta continuamente mientras SW_ENABLE esté activado.
Nota
Señal de mando de salida TM_CTRL_DQ
● Si TM_CTRL_DQ = 1, la función tecnológica toma el control y genera secuencias de
impulso en la salida PWM DQA.
● Si TM_CTRL_DQ = 0, el programa de usuario toma el control y el usuario puede ajustar la
salida PWM DQA directamente a través del bit de control SET_DQA.

Interrupción de la secuencia de salida
Una desactivación de la habilitación de software (SW_ENABLE = 1 → 0) interrumpe la
secuencia de salida actual. La última duración de periodo no concluye. STS_ENABLE y la
salida digital PWM DQA se ponen inmediatamente a 0.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1341

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Duración mínima de impulso y pausa mínima entre impulsos
La duración mínima de impulso y la pausa mínima entre impulsos se asignan con ayuda del
parámetro "Duración mínima de impulso".
● Las duraciones de impulso determinadas por la función tecnológica o el canal PWM que
tengan una duración inferior a la mínima se suprimen.
● Las duraciones de impulso determinadas por la función tecnológica o el canal PWM que
tengan una duración superior a la duración del periodo menos la pausa mínima de impulso
se ponen al valor de la duración del periodo (salida activada de forma permanente).
5

1
2

3



4



①
②
③
④
⑤



Duración del periodo
Duración del periodo menos pausa mínima de impulso
Duración mínima de impulso
OUTPUT_VALUE (tanto por mil ciclo de trabajo)
Duración del impulso

Ajuste y modificación del ciclo de trabajo del impulso
OUTPUT_VALUE asigna el ciclo de trabajo a la duración actual del periodo. Con el parámetro
"Formato de salida" se selecciona el área del campo OUTPUT_VALUE de la interfaz de control.
● Formato de salida 1/100: rango de valores entre 0 y 100
Duración de impulso = (OUTPUT_VALUE/100) x duración del periodo.
● Formato de salida 1/1000: Rango de valores entre 0 y 1 000
Duración de impulso = (OUTPUT_VALUE/1 000) x duración de periodo.
● Formato de salida 1/10000: Rango de valores entre 0 y 10 000
Duración de impulso = (OUTPUT_VALUE/10 000) x duración de periodo.
● Formato de salida "Salida analógica de S7": rango de valores entre 0 y 27 648
Duración de impulso = (OUTPUT_VALUE/27 648) x duración del periodo.

1342

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Se asigna OUTPUT_VALUE directamente a través del programa de control. Con el próximo
flanco ascendente en la salida se aplica un nuevo OUTPUT_VALUE.

Ajuste y modificación de la duración del periodo
● Actualización permanente
La duración de periodo se controla permanentemente a través de la interfaz de control. El
bit MODE_SLOT debe activarse ("1" significa actualización permanente); LD_SLOT debe
tener el valor 1 ("1" significa duración de periodo). Ajuste el valor del periodo en el campo
SLOT. La unidad es siempre microsegundos.
– Salida High-Speed activada: entre 10 μs y 10 000 000 μs (10 s) en el campo SLOT
– Salida High-Speed desactivada: entre 100 μs y 10 000 000 μs (10 s) en el campo SLOT
– Salida estándar (salida de 100 Hz): entre 10 000 µs (10 ms) y 10 000 000 µs (10 s) en
el campo SLOT
● Actualización individual
Ajuste la duración del periodo en los parámetros de configuración. Como alternativa,
efectúe una actualización individual a través de la interfaz de control. MODE_SLOT debe
borrarse ("0" significa actualización individual); LD_SLOT debe tener el valor 1 ("1" significa
duración del periodo). Ajuste el valor de la duración del periodo en el campo SLOT. La
unidad es siempre microsegundos.
– Salida High-Speed activada: entre 10 μs y 10 000 000 μs (10 s) en los parámetros
– Salida High-Speed desactivada: entre 100 μs y 10 000 000 μs (10 s) en los parámetros
– Salida estándar (salida de 100 Hz): entre 10 000 µs (10 ms) y 10 000 000 µs (10 s) en
los parámetros
Con el próximo flanco ascendente de la salida se aplicará la nueva duración del periodo.

Ajuste de la duración mínima de impulso y de la pausa mínima entre impulsos
La duración y la pausa de impulso mínimas se asignan en forma de valor numérico DWord
entre 0 y 10 000 000 μs (10 s) con ayuda de la configuración de parámetros de canal "Duración
mínima de impulso".

Señales de salida para el modo de operación Modulación por ancho de impulso (PWM)
Señal de salida

Significado

Corriente de impulso continua en la sa‐ Se emite un impulso en la salida digital
lida digital PWM DQA
PWM DQA durante el ciclo de trabajo ajustado
y la duración de periodo ajustada.

Rango de valores
Corriente de impulsos continua

Modo de operación: Salida de frecuencia
En este modo de operación se puede asignar un valor de frecuencia para frecuencias elevadas
con más precisión que con la duración de periodo en modo PWM.
En la salida digital se genera una señal rectangular con una frecuencia asignada y un ciclo de
trabajo constante del 50%.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1343

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
El modo de operación Salida de frecuencia posee las siguientes funciones:
● Si la opción "Salida High-Speed (0,1 A)" está activada, se puede generar una duración
mínima de impulso de 2 μs con una intensidad de 100 mA. Si la opción "Salida High-Speed
(0,1 A)" no está activada, se puede generar una duración mínima de impulso de 20 µs con
una carga > 0,1 A y una duración mínima de impulso 40 µs con una carga ≥ 2mA y una
intensidad máxima de 0,5 A.
Si utiliza una salida estándar, se puede generar una duración mínima de impulso de 100 µs
con una carga > 0,1 A y una duración mínima de impulso de 200 µs con una carga ≥ 2mA
y una intensidad máxima de 0,5 A.
Mínimo
Salida estándar

Salida HighSpeed desacti‐
vada

Frecuencia
1)

Máximo
Salida HighSalida estándar
Speed activada

0,1 Hz

100 Hz 1)

Salida HighSpeed desacti‐
vada

Salida HighSpeed activada

10 kHz 1)

100 kHz

En función de la carga

● Puede controlar la salida de impulso (DQA) del canal de forma manual a través de la
interfaz de control y respuesta.
● Puede configurar la reacción a STOP de la CPU. Al cambiar a STOP de la CPU, la salida
de impulso (DQA) pasa al estado configurado.

Controlador
Para el modo de operación Salida de frecuencia, el programa de usuario accede directamente
a la interfaz de control y respuesta del canal.
Se soporta la reparametrización mediante las instrucciones WRREC/RDREC y el juego de
datos de parámetros 128. Para más información al respecto, consulte el capítulo "Juegos de
datos de parámetros (PWM)" en el manual de producto de la CPU compacta correspondiente.
70B&75/B'4




6:B(1$%/(
+DELOLWDFLµQ6:
676B6:B(1$%/(

'XUSHULRGR

'XUSHULRGR
6DOLGDGLJLWDO
'XUDFLµQ 'XUDFLµQ
LPSXOVR SDXVD
LPS

)UHFXHQFLDN+]





)UHFXHQFLD+]

676B (1$%/(

1344

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Inicio de la secuencia de salida
El programa de control debe proporcionar la habilitación para la secuencia de salida mediante
la habilitación de software (SW_ENABLE 0 → 1). El bit de notificación STS_SW_ENABLE
indica que la habilitación de software está presente en el generador de impulsos.
Si la habilitación de software está activada (flanco ascendente), se activa STS_ENABLE. La
secuencia de salida se ejecuta continuamente mientras SW_ENABLE esté activado.
Nota
Señal de mando de salida TM_CTRL_DQ
● Si TM_CTRL_DQ = 1, la función tecnológica toma el control y genera secuencias de
impulso en la salida PWM DQA.
● Si TM_CTRL_DQ = 0, el programa de usuario toma el control y el usuario puede ajustar la
salida PWM DQA directamente a través del bit de control SET_DQA.
Interrupción de la secuencia de salida
Una desactivación de la habilitación de software (SW_ENABLE = 1 → 0) durante la salida de
frecuencia interrumpe la secuencia de salida actual. La última duración de periodo no
concluye. STS_ENABLE y la salida digital PWM DQA se ponen inmediatamente a 0.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Ajuste y modificación del valor de salida (frecuencia)
La frecuencia se ajusta con OUTPUT_VALUE directamente en la interfaz de control del
programa de control. El valor se indica en formato Real y la unidad es siempre "Hz". El rango
posible depende del parámetro "Salida High-Speed (0,1 A)" como sigue:
● Salida rápida de impulsos desactivada
– Frecuencia (OUTPUT_VALUE): de 0,1 Hz a 10 000 Hz
● Salida rápida de impulsos activada
– Frecuencia (OUTPUT_VALUE): de 0,1 Hz a 100 000 Hz
● Salida estándar (salida de 100 Hz)
– Frecuencia (OUTPUT_VALUE): 0,1 Hz a 100 Hz
La nueva secuencia se aplica al comienzo del siguiente periodo. La nueva frecuencia no afecta
al flanco descendente o a la relación entre impulso y periodo (ciclo de trabajo). Sin embargo,
puede tardar hasta 10 s en aplicarse, según sea la frecuencia ajustada previamente.

Precisión de la frecuencia de salida
La frecuencia de salida configurada se devuelve con una precisión dependiente de la
frecuencia en la salida digital PWM DQA. Encontrará una sinopsis sobre la precisión en función
de la frecuencia utilizada en el manual de producto de la CPU compacta correspondiente, en
el capítulo "Vista general de interconexiones de las salidas".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1345

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Señales de salida para el modo de operación Salida de frecuencia
Señal de salida

Significado

Rango de valores

Corriente de impulso continua en la sa‐ Se emite un impulso en la salida digital
lida digital PWM DQA
PWM DQA para la frecuencia asignada.

Corriente de impulsos continua

Modo de operación: PTO
Control
Para los cuatro modos de operación de los generadores de impulsos (PTO), el control de los
canales de salida de impulsos se realiza con Motion Control por medio de los objetos
tecnológicos TO_SpeedAxis, TO_PositioningAxis y TO_SynchronousAxis. La interfaz de
control y respuesta de los canales en estos modos de operación es una implementación parcial
de la interfaz PROFIdrive con el telegrama estándar 3.
Encontrará una descripción detallada de la utilización de Motion Control y su configuración en
la Ayuda en pantalla de Motion Control y en el Manual de funciones S7-1500 Motion Control
(http://support.automation.siemens.com/WW/view/es/59381279).

Tipos de señales
El modo de operación PTO incluye los cuatro tipos de señal siguientes:
● PTO (impulso (A) y sentido (B)):
Una salida (A) controla los impulsos y otra salida (B) controla el sentido. B es 'High' (activo)
si se generan impulsos en sentido negativo. B es 'Low' (inactivo) si se generan impulsos en
sentido positivo.
1

2

3

'

①
②

Sentido de giro positivo
Sentido de giro negativo

● PTO (incrementar contador (A) y decrementar contador (B)):
Una salida (A) emite impulsos para sentidos positivos y otra (B) emite impulsos para
sentidos negativos.
1

2

$

%

①
②

1346

Sentido de giro positivo
Sentido de giro negativo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
● PTO (A, B desfasado):
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Se trata de una salida de impulso simple, en la que un impulso tiene la duración
comprendida entre dos transiciones de la señal A durante un nivel bajo de la señal B.
El sentido de giro positivo se genera con un flanco ascendente en la señal A durante un
nivel bajo en la señal B. El sentido de giro negativo se genera con un flanco descendente
en la señal A durante un nivel bajo en la señal B.
A precede a B (sentido de giro positivo)

A sigue a B (sentido de giro negativo)

$

$

%

%











Número de impulsos







Número de impulsos

● PTO (A, B desfasado, cuádruple):
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Este tipo de señal es una salida de impulso cuádruple, en la que cada transición de flanco
corresponde a un incremento. Por tanto, un periodo completo de la señal A contiene cuatro
incrementos. De este modo, p. ej., con dos salidas a una frecuencia de señal de 100 kHz
cada una es posible emitir una señal de control que proporcione 400 000 incrementos por
segundo.
Los impulsos de contaje se crean en sentido positivo o negativo en función del sentido de
los flancos de una señal y del nivel de la otra señal mientras tanto.
A precede a B (sentido de giro positivo)

A sigue a B (sentido de giro negativo)

$

$

%

%



















   

Número de impulsos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

   



















Número de impulsos

1347

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Comportamiento del canal PTO en caso de STOP de la CPU
En caso de cambio a STOP de la CPU, el canal PTO reacciona retirando la habilitación del
accionamiento (si se ha configurado una salida de habilitación del accionamiento) y emitiendo
la consigna de velocidad 0 en las salidas de hardware configuradas para las pistas de señal A
y B. El comportamiento de los canales PTO en caso de STOP de la CPU no se puede
configurar.
Nota
Reacción a STOP de la CPU
En caso de STOP de la CPU, las salidas de hardware asignadas para las salidas PTO A y B
pueden conmutar al estado de señal 'High' (1) o permanecer en él. No se garantiza la
conmutación/permanencia de ambas salidas de hardware al/en el nivel de señal 'Low' (0).

5.1.3.2

Funciones

Función: Salida High-Speed
La función "Salida High-Speed (0,1 A)" mejora el ciclo de señal de las salidas digitales (DQ0
a DQ7). En los flancos de conmutación se producen menos retardos, oscilaciones,
inestabilidades y tiempos de subida/bajada inferiores.
La función "Salida High-Speed (0,1 A)" es adecuada para generar señales de impulsos en un
ciclo más preciso, pero ofrece una menor corriente de carga máxima.
Para los modos de operación PWM y Salida de frecuencia seleccione en STEP 7 (TIA Portal)
la salida High-Speed del canal. Además, la parametrización se puede modificar durante el
tiempo de ejecución mediante el programa y el juego de datos.
La salida de impulso rápida (salida High-Speed) está disponible para los siguientes modos de
operación:
● PWM
● Salida de frecuencia
● PTO (las salidas de impulso para el modo de operación PTO siempre son "Salida HighSpeed (0,1 A)")

Salida High-Speed
Mínimo

Máximo

Salida High-Speed de‐ Salida High-Speed ac‐ Salida High-Speed de‐ Salida High-Speed ac‐
sactivada
tivada
sactivada
tivada

1348

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
Duración de impulso

20 µs con carga > 0,1
A 1)

2 µs

1)

10 000 000 µs (10 s)

40 µs con carga
≥ 2 mA 1)
Duración del periodo

100 μs 2)

Frecuencia

10 μs
0,1 Hz

10 kHz 2)

100 kHz

1)

Un valor inferior es teóricamente posible, pero dependiendo de la carga conectada la tensión de salida ya no se puede
devolver como impulso rectangular completo

2)

En función de la carga

Función: Mando directo de la salida de impulso (DQA)
Mando directo de la salida de impulso (DQA)
En los modos de operación "Modulación por ancho de impulso PWM" y "Salida de frecuencia"
se puede ajustar la salida de impulso (DQA) de un generador de impulsos directamente a
través del programa de control. Seleccione la función para la activación directa de DQ
desactivando el bit de control de salida del canal PWM en la interfaz de control (TM_CTRL_DQ
= 0).
El control directo de la salida de impulso (DQA) puede ser útil en la puesta en marcha de un
sistema de control para la automatización.
Si elige el control directo de la salida de impulso (DQA) durante una secuencia de salida de
impulsos, la secuencia se seguirá ejecutando en segundo plano, de forma que la secuencia
continúe en cuanto el canal vuelva a asumir el control (ajustando TM_CTRL_DQ = 1).
El estado de la salida de impulso (DQA) se asigna con el bit de control SET_DQA.
Si se ajusta TM_CTRL_DQ = 1, se deselecciona el control directo de la salida de impulso
(DQA) y el canal asume el procesamiento. Si la secuencia de salida se está ejecutando todavía
(STS_ENABLE aún activo), el canal PWM asume de nuevo el control de la salida. Si
TM_CTRL_DQ = 1 y STS_ENABLE no está activo, el canal del módulo también se encarga de
la ejecución, pero entonces devuelve "0" en la salida.
Nota
Señal de control de salida TM_CTRL_DQ del canal PWM
● Si TM_CTRL_DQ = 1, la función tecnológica toma el control y genera secuencias de
impulso en la salida PWM DQA.
● Si TM_CTRL_DQ = 0, el programa de usuario toma el control y el usuario puede ajustar
PWM DQA directamente con el bit de control SET_DQA.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1349

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

5.1.4

Principios básicos de la salida de impulsos (TM PTO 4)

5.1.4.1

Descripción general
El módulo tecnológico ofrece las siguientes funciones:

Modo de operación

Aplicaciones

Ventajas para el cliente

Pulse Train Output
(PTO) (Página 1350)

PTO también se denomina interfaz de impulsos/
sentido. La interfaz de impulsos/sentido consta de
Se utiliza en muchas aplicaciones de posicio‐ 2 señales. La frecuencia de la salida de impulso
namiento como, por ejemplo, para ejes de des‐ representa la velocidad, y el número de impulsos
que se emiten representa el trayecto que se va a
plazamiento o de avance.
recorrer. La salida de sentido determina el sentido
del desplazamiento. La posición se define de este
modo con una precisión de incrementos.
Pulse Train Output es una interfaz muy exten‐
dida para el control de accionamientos.

El control de las salidas se efectúa con S7‑1500
Motion Control mediante objetos tecnológicos.
PTO es una interfaz sencilla y de uso universal
entre el controlador y el accionamiento. Por tanto,
es soportada por accionamientos paso a paso y
servoaccionamientos en todo el mundo.

5.1.4.2

Pulse Train Output (PTO)

Control
El control de los canales de salida de impulsos se realiza sobre todo con S7‑1500
Motion Control a través de los objetos tecnológicos TO_SpeedAxis, TO_PositioningAxis y
TO_SynchronousAxis . La interfaz de control y realimentación de los canales es una
implementación de la interfaz PROFIdrive con el telegrama estándar 3.
Encontrará una descripción detallada de la configuración del módulo tecnológico con los
objetos tecnológicos de eje en el manual de funciones S7‑1500T Motion Control, capítulo
Configuración, disponible para su descarga en Internet (https://support.industry.siemens.com/
cs/ww/es/view/109481326).

1350

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.1 Principios básicos de la salida de impulsos

Tipos de señales
El módulo tecnológico soporta los cuatro tipos de señales siguientes:
● Impulso (P) y sentido (D):
Una salida (P) controla los impulsos y otra (D) controla el sentido. D es 'High' (activa) si se
generan impulsos en sentido negativo. D es 'Low' (inactiva) cuando se generan impulsos en
sentido positivo.
1

2

3

'

①
②

Sentido de giro positivo
Sentido de giro negativo

● Contaje ascendente (A), contaje descendente (B):
Una salida (A) emite impulsos para sentidos positivos y otra (B) emite impulsos para
sentidos negativos.
1

2

$

%

①
②

Sentido de giro positivo
Sentido de giro negativo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1351

Salida de impulsos
5.1 Principios básicos de la salida de impulsos
● Encóder incremental (A, B desfasadas):
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Se trata de una salida de impulso simple, en la que un impulso tiene la duración
comprendida entre dos transiciones de la señal A durante un nivel bajo de la señal B.
El sentido de giro positivo se genera con un flanco ascendente en la señal A durante un
nivel bajo en la señal B. El sentido de giro negativo se genera con un flanco descendente
en la señal A durante un nivel bajo en la señal B.
A precede a B (sentido de giro positivo)

A sigue a B (sentido de giro negativo)

$

$

%

%











Número de impulsos







Número de impulsos

● Encóder incremental (A, B desfasadas, cuádruple)
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Este tipo de señal es una salida de impulso cuádruple, en la que cada transición de flanco
corresponde a un incremento. Por tanto, un periodo completo de la señal A contiene cuatro
incrementos. De este modo, p. ej., con dos salidas a una frecuencia de señal de 100 kHz
cada una es posible emitir una señal de control que proporcione 400 000 incrementos por
segundo.
Los impulsos de contaje se crean en sentido positivo o negativo en función del sentido de
los flancos de una señal y del nivel de la otra señal mientras tanto.
A precede a B (sentido de giro positivo)
$

$

%

%



















   

Número de impulsos

1352

A sigue a B (sentido de giro negativo)

   



















Número de impulsos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

5.2

Utilizar el módulo

5.2.1

Utilizar TM Pulse 2x24V

5.2.1.1

Configurar y parametrizar módulo tecnológico

Agregar un módulo tecnológico a la configuración de hardware
Requisitos
● Se ha creado el proyecto.
● Se ha creado la CPU.
● Se ha creado la periferia descentralizada ET 200.

Procedimiento
Para agregar el módulo tecnológico a la configuración hardware, haga lo siguiente:
1. Abra la configuración de dispositivos de la CPU o el IM.
2. Seleccione un rack.
3. Seleccione el módulo tecnológico en el catálogo de módulos:
"Módulos tecnológicos > Salida de impulsos > TM Pulse 2x24V > Referencia"
4. Coloque el módulo tecnológico arrastrándolo al slot deseado del rack y soltándolo.

Acceso al ajuste de parámetros (configuración hardware)
Apertura mediante la vista de dispositivos
Proceda de la siguiente manera:
1. Abra la configuración del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic en el módulo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1353

Salida de impulsos
5.2 Utilizar el módulo

Configuración de canal
Configuración de canal
Con este parámetro se define si se deben conectar los dos canales en paralelo.
Configuración de canal

Significado

2 canales (2 A)
(predeterminado)

Los dos canales funcionan por separado y tienen cada uno una inten‐
sidad de salida máxima de 2 A.

1 canal (4 A)

Los dos canales están conectados en paralelo y funcionan como canal
lógico con una corriente de salida máxima de 4 A.
Todas las parametrizaciones y procesos que utilizan la interfaz de con‐
trol deben utilizar direcciones con el canal 0. Las señales de respuesta
están disponibles únicamente para el canal 0.
La interfaz de control y respuesta se limita a un solo canal. El canal 1 no
puede configurarse ni operarse.
La medición de corriente es la suma de los valores medidos de ambos
canales.

Nota
Salida High Speed
El parámetro "Salida High Speed (0,1 A)" solo puede seleccionarse con la configuración de
canal "2 canales (2 A)".

1354

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Modo de operación
Modo de operación
Con este parámetro se define para qué función se utiliza el canal del módulo tecnológico. Las
posibilidades de ajuste en "Parámetros" se adaptan en función de esa asignación.
Modo de operación

Significado

Parámetros dependientes del modo de
operación

Salida de impulso

El canal emite un impulso único. La duración del impulso
se especifica en la interfaz de control.

● Salida High Speed (0,1 A)
● Función DI
● Retardo a la entrada
● Retardo a la conexión

Modulación por ancho
de impulso (PWM)
(predeterminado)

El canal emite una señal modulada por ancho de impul‐ ● Salida High Speed (0,1 A)
so. La duración del impulso o la consigna de corriente se ● Función DI1
especifican en la interfaz de control.
● Retardo a la entrada
● Formato de salida
● Duración mínima de impulso
● Duración del periodo
● Duración del periodo real
● Retardo a la conexión1
● Dithering
● Pendiente rampa de conexión
dither
● Pendiente rampa de desconexión
dither
● Amplitud de dither
● Duración del periodo de dither
● Regulación de intensidad
● Activar acción P
● Activar acción I
● Activar acción D
● Valor de referencia de corriente
● Ancho de zona muerta
● Variable manipulada límite superior
● Variable manipulada límite inferior
● Ganancia proporcional
● Tiempo de integración
● Tiempo derivativo
● Tiempo de retardo de la acción D

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1355

Salida de impulsos
5.2 Utilizar el módulo
Modo de operación

Significado

Parámetros dependientes del modo de
operación

Tren de impulsos

El canal emite un determinado número de impulsos. El ● Salida High Speed (0,1 A)
número de impulsos se especifica en la interfaz de con‐ ● Función DI
trol.
● Retardo a la entrada
● Formato de salida
● Duración del periodo
● Duración del periodo real
● Retardo a la conexión
● Ciclo de trabajo

Retardo a la conexión/
desconexión
Salida de frecuencia

El canal emite impulsos con un retardo a la conmutación
respecto de DI0 predeterminado. El retardo a la cone‐
xión se especifica en la interfaz de control.

● Salida High Speed (0,1 A)

El canal emite una señal con un ciclo de trabajo fijo del
50 %. La frecuencia se especifica en la interfaz de con‐
trol.

● Salida High Speed (0,1 A)

● Retardo a la entrada
● Retardo a la desconexión
● Función DI
● Retardo a la entrada
● Formato de salida
● Retardo a la conexión

PWM con motor DC:

El canal emite una señal con modulación por ancho de
impulso para controlar un motor DC en ambos sentidos
de giro. El ciclo de trabajo se especifica en la interfaz de
control.

● Función DI1
● Retardo a la entrada
● Formato de salida
● Duración del periodo
● Duración del periodo real
● Retardo a la conexión1

1

No parametrizable en modo isócrono

1356

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Reacción a STOP de la CPU
Reacción a STOP de la CPU
Con este parámetro se define la reacción del canal ante el fallo de un controlador superior.
Reacción a STOP de la CPU

Significado

Aplicar valor sustitutivo
(predeterminado)

Hasta la siguiente transición de STOP a RUN de la CPU, el canal
emite en las salidas digitales los valores sustitutivos parametriza‐
dos. El valor sustitutivo 1 solo puede parametrizarse para una de las
dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de
respuesta STS_ENABLE.
Después de un cambio de STOP a RUN, el módulo pasa a su estado
de arranque. Antes de poder iniciar una nueva salida de impulsos,
debe desactivarse el bit de control SW_ENABLE.

Continuar

El canal continúa trabajando.
Las salidas digitales continúan conmutándose en función de la pa‐
rametrización. Así, la secuencia de salida en curso continúa. Si se
ha parametrizado la habilitación hardware, también se pueden ini‐
ciar nuevas secuencias de salida a través de DIn.0.
Tras una transición de STOP a RUN, la configuración del módulo
tecnológico no se desactiva.

Valor sustitutivo de DQA
Con este parámetro se define el valor que debe emitir el módulo tecnológico en caso de STOP
de la CPU en la salida digital DQA para el comportamiento "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".
Valor sustitutivo de DQB
Con este parámetro se define el valor que debe emitir el módulo tecnológico en caso de STOP
de la CPU en la salida digital DQB para el comportamiento "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".
Nota
El valor sustitutivo 1 solo puede seleccionarse para una de las dos salidas digitales.

Diagnóstico
El módulo tecnológico puede disparar alarmas de diagnóstico adicionales si se activa la
habilitación de las alarmas de diagnóstico en los parámetros básicos. Las alarmas de
diagnóstico se procesan en un OB de alarma.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1357

Salida de impulsos
5.2 Utilizar el módulo

Diagnóstico de grupo
Este parámetro define si se disparan alarmas de diagnóstico con los siguientes errores:
● Error de tensión de alimentación (bit de respuesta ERR_PWR)
● Cortocircuito o sobrecarga de la alimentación de encóder (bit de respuesta ERR_24V)
● Falta tensión de carga
● Sobretemperatura
Este parámetro está desactivado por defecto.

Diagnóstico DQA
Este parámetro define si, en caso de error en la salida digital DQA, se dispara la alarma de
diagnóstico "Error en salidas digitales". Independientemente de ello, en caso de error se activa
el bit de respuesta ERR_DQA.
Este parámetro está desactivado por defecto.

Diagnóstico DQB
Este parámetro define si, en caso de error en la salida digital DQB, se dispara la alarma de
diagnóstico "Error en salidas digitales". Independientemente de ello, en caso de error se activa
el bit de respuesta ERR_DQB.
Este parámetro está desactivado por defecto.

Parámetro
Salida High Speed (0,1 A)
Con este parámetro se define si la salida digital correspondiente funciona como conmutador
rápido en contrafase:
Opción

Significado

Activado

Las salidas digitales funcionan como conmutador rápido en contrafase y pue‐
den cargarse con una corriente de carga nominal de 0,1 A en cada caso. Un
conmutador en contrafase se conmuta alternativamente a DC 24 V y a masa.
Eso posibilita flancos muy rápidos.

Desactivado
(predeterminado)

Las salidas digitales funcionan como conmutador en contrafase y pueden car‐
garse con una corriente de carga nominal de 2 A en cada caso.

Nota
Configuración de canal
Este parámetro solo se puede seleccionar en la configuración "2 canales (2 A)".

1358

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo
Nota
Este parámetro no se puede activar en los modos de operación "PWM con motor DC" ni
"Modulación por ancho de impulso PWM" con regulación de corriente.

Función DI
Al parametrizar una entrada digital se define la función que dicha entrada digital disparará al
conmutar.
Puede escoger entre las siguientes opciones:
Función

Significado

Entrada
(predeterminado)

La respectiva entrada digital no tiene asignada función alguna. La CPU
puede leer el estado de señal de la entrada digital a través de la interfaz de
respuesta.

Habilitación HW

La respectiva entrada digital se utiliza como entrada de habilitación para la
secuencia de salida.

Final de carrera

La respectiva entrada digital se utiliza como final de carrera externo para un
motor DC en el modo de operación "PWM con motor DC".

Retardo a la entrada
Este parámetro permite suprimir las perturbaciones en las entradas digitales de un canal. Los
cambios de señal solo se detectan si permanecen estables durante un tiempo superior al
retardo a la entrada parametrizado.
Puede escoger entre los siguientes retardos a la entrada:
● Ninguno
(Retardo a la entrada de 4 μs, ancho de impulso mínimo de 3 μs)
● 0,05 ms
● 0,1 ms (predeterminado)
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms
Nota
Si selecciona la opción "Ninguno" o "0,05 ms", deberá utilizar cables apantallados para la
conexión de las entradas digitales.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1359

Salida de impulsos
5.2 Utilizar el módulo

Formato de salida
Con este parámetro se define el formato o el rango de valores con el que se evalúa el ciclo de
trabajo o la consigna de corriente:
Formato de salida
Salida analógica S7

Rango de valores
Modo de operación "PWM con motor DC":
‒27648 ... 27648
Otro modo de operación:
0 ... 27648
("27648" equivale al 100% del valor de referencia de corriente)

1/100
(predeterminado)

0 ... 100

1/1000

0 ... 1000

1/10000

0 ... 10000

Nota
En el modo de operación "Salida de frecuencia", está seleccionado "1 Hz" como formato de
salida y no se puede cambiar.
En el modo de operación "PWM con motor DC", está seleccionado el formato de salida "Salida
analógica S7" y no se puede cambiar.

Duración mínima de impulso
Este parámetro define la duración mínima de impulso permitida para la señal PWM.
Los impulsos y las pausas inferiores a este valor se suprimen.
El ajuste predeterminado es "0 μs".
Nota
La duración mínima de impulso no es efectiva si se ha activado "Regulación de intensidad".

Duración del periodo
Con este parámetro se define la duración de periodo de la señal de salida:
En el modo de operación "PWM con motor DC", el ajuste predeterminado es "1000 μs" (=
1 ms). En otros modos de operación, el ajuste predeterminado es "2000000 μs" (= 2 s).

Duración del periodo real
La duración de periodo real se muestra solo en modo isócrono.
El valor mostrado es la duración de periodo utilizada, que se calcula a partir de la duración de
periodo especificada y el ciclo de aplicación ajustado.

1360

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Retardo a la conexión
Con este parámetro se define el retardo con el que el inicio de la secuencia de salida da lugar
a la salida del impulso.
El ajuste predeterminado es "0 μs".
Nota
Modo isócrono
En modo isócrono no es posible ajustar el retardo a la conexión en los modos de operación
"Modulación por ancho de impulso PWM" y "PWM con motor DC".

Retardo a la desconexión
Con este parámetro se define el retardo con el que un flanco descendente de la entrada digital
DI0 es efectivo en la salida digital DQA.
El ajuste predeterminado es "0 μs".

Ciclo de trabajo
Con este parámetro se define la relación entre impulso y periodo (también llamada relación
impulso-pausa) de la señal de salida en el formato de salida seleccionado.
El ajuste predeterminado es "50 %".

Dithering
Con este parámetro se determina si a la señal PWM se superpondrá una señal dither.
En el ajuste predeterminado, el dithering no está activado.

Pendiente rampa de conexión dither
Con este parámetro se define la pendiente de la rampa de conexión de la amplitud del dither
para una subida teórica de 0 % a 100 %.
La pendiente influye en el tiempo de rampa efectivo.
Ejemplo de cálculo del tiempo de rampa efectivo con una amplitud Dither del 10% y una
pendiente de 2500 ms/100%:
10 % x 2500 ms/100 % = 250 ms
El ajuste predeterminado es "0".

Pendiente rampa de desconexión dither
Con este parámetro se define la pendiente de la rampa de desconexión de la amplitud del
dither para un descenso teórico de 100 % a 0 %.
La pendiente afecta al tiempo de rampa efectivo:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1361

Salida de impulsos
5.2 Utilizar el módulo
Ejemplo de cálculo del tiempo de rampa efectivo con una amplitud Dither del 10% y una
pendiente de 2500 ms/100%:
10 % x 2500 ms/100 % = 250 ms
El ajuste predeterminado es "0".

Amplitud de dither
Con este parámetro se define la amplitud de la señal dither referida a la duración del periodo
de la señal de salida.
El ajuste predeterminado es "5,0 %".

Duración del periodo de dither
Con este parámetro se define la duración de periodo de la señal dither. El parámetro se puede
ajustar con una base fija en función de la duración de periodo de la señal PWM.
El ajuste predeterminado es "50000 μs" (= 50 ms).

Frecuencia de dither
Este valor se calcula a partir del periodo parametrizado de la señal dither.
El valor no se puede modificar (solo lectura).

Regulación de intensidad
Con este parámetro se activa el algoritmo PID para la regulación de la corriente de salida.
Este parámetro está desactivado por defecto.
Nota
Salida High Speed
La regulación de corriente con los parámetros correspondientes solo puede activarse en el
modo "Modulación por ancho de impulso PWM" con "Salida High Speed (0.1 A)" desactivada.

Activar acción P
Con este parámetro se activa la acción proporcional del algoritmo PID.
Este parámetro está activado por defecto.

Activar acción I
Con este parámetro se activa la acción integral del algoritmo PID.
Este parámetro está activado por defecto.

1362

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Activar acción D
Con este parámetro se activa la acción diferencial del algoritmo PID.
Este parámetro está desactivado por defecto.

Valor de referencia de corriente
Con este parámetro se define la intensidad máxima como valor de referencia para la consigna
de intensidad. Un valor del 100% para OUTPUT_VALUE en la interfaz de control equivale a
una consigna de intensidad equivalente al valor de referencia de corriente.
Se recomienda usar como ajuste el valor de la intensidad de carga medido con la regulación
de intensidad desactivada y un ciclo de trabajo del 100%.
El ajuste predeterminado es "0 mA".

Ancho de zona muerta
Con este parámetro se define la diferencia entre la corriente de salida y la consigna de
corriente dentro la cual no se corrige. La diferencia se considera tanto por encima como por
debajo de la consigna de corriente.
El ajuste predeterminado es "0 μA".

Variable manipulada límite superior
Con este parámetro se define el límite superior de regulación. "27648" equivale al 100% del
ciclo de trabajo. El valor debe ser superior a la "Variable manipulada límite inferior".
El ajuste predeterminado es "27648".

Variable manipulada límite inferior
Con este parámetro se define el límite inferior de regulación. "0" equivale al 0% del ciclo de
trabajo. El valor debe ser inferior a la "Variable manipulada límite superior".
El ajuste predeterminado es "0".

Ganancia proporcional
Con este parámetro se define el factor de ganancia para la acción P del algoritmo PID.
El ajuste predeterminado es "2,0000".

Tiempo de integración
Con este parámetro se define el tiempo de acción integral del algoritmo PID.
El ajuste predeterminado es "20,0000 s".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1363

Salida de impulsos
5.2 Utilizar el módulo

Tiempo de acción derivada
Con este parámetro se define la duración utilizada por la acción D del algoritmo PID.
El ajuste predeterminado es "10,0000 s".

Tiempo de retardo de la acción D
Con este parámetro se define el retardo de la acción D del algoritmo PID.
El ajuste predeterminado es "2,0000 s".

5.2.1.2

Módulo Online y diagnóstico

Indicación y evaluación del diagnóstico
Por medio de la vista online y de diagnóstico puede realizar un diagnóstico del hardware.
Además, puede:
● Recibir información a través del módulo (p. ej. la versión de Firmware y el número de serie).
● Si es necesario, realice una actualización del firmware.

Procedimiento
Para abrir el editor de visualización para las funciones de diagnóstico, haga lo siguiente:
1. Abra la configuración del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic con el botón derecho del ratón en el módulo y seleccione "Online y diagnóstico".
4. Haga clic en la visualización deseada en el árbol de diagnóstico.

Más información
Para más información sobre los avisos de diagnóstico y sobre posibles remedios, consulte el
manual de producto del módulo.

1364

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

5.2.2

Uso de TM PTO 4

5.2.2.1

Configurar y parametrizar el módulo tecnológico

Agregar un módulo tecnológico a la configuración de hardware
Requisitos
● Se ha creado el proyecto.
● Se ha creado la CPU S7‑1500.

Procedimiento
Para agregar el módulo tecnológico a la configuración hardware, haga lo siguiente:
1. Abra la configuración de dispositivos de la CPU o el IM.
2. Seleccione un rack.
3. Seleccione el módulo tecnológico en el catálogo de módulos:
"Módulos tecnológicos > Salida de impulsos > TM PTO 4 > Referencia"
4. Coloque el módulo tecnológico arrastrándolo al slot deseado del rack y soltándolo.

Acceso al ajuste de parámetros (configuración hardware)
Apertura mediante la vista de dispositivos
Proceda de la siguiente manera:
1. Abra la configuración del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic en el módulo.

Configuración de canales
Configuración de canales
Con este parámetro se define el número de canales utilizados. Los canales se ocupan en
orden ascendente.
Puede escoger entre las siguientes opciones:
● 4 canales (predeterminado)
● 3 canales

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1365

Salida de impulsos
5.2 Utilizar el módulo
● 2 canales
● 1 canal

Modo de operación
Tipo de señal
Con este parámetro se define el tipo de salida de impulsos PTO (Página 1350).
Opción

Significado

Impulso (P) y sentido (D)
(predeterminado)

El canal emite una señal de impulso y una señal de sentido.

Contaje ascendente (A), contaje
descendente (B)

El canal emite una señal de avance y una señal de retroceso.

Encóder incremental (A, B desfa‐
sadas)

El canal emite dos señales desfasadas con evaluación simple.

Encóder incremental (A, B desfa‐
sadas, cuádruple)

El canal emite dos señales desfasadas con evaluación tetra-flan‐
co.

Interfaz de señal
Con este parámetro se determina qué interfaz se utilizará para la salida de impulsos.
Opción

Significado

24 V, asimétrica

El canal emite señales de 24 V en los bornes DQm.0 y DQm.1.

RS422, simétrica/TTL (5 V), asi‐
métrica
(predeterminado)

El canal emite señales RS422 en los bornes P/A y D/B y los res‐
pectivos bornes invertidos o bien señales TTL de 5 V en los bornes
P/A y D/B.

Pausa entre impulsos al invertir el sentido
Con este parámetro se determina el tiempo mínimo que transcurre entre un cambio de sentido
y el primer impulso emitido en el nuevo sentido.
Puede escoger entre las siguientes opciones:
● 0 ms (predeterminado)
● 1 ms
● 4 ms
● 10 ms

1366

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Alarmas de diagnóstico
Habilitar alarmas de diagnóstico
Con este parámetro se determina si se dispara una alarma de diagnóstico en caso de falta de
tensión de alimentación o fallo en las salidas digitales. El fallo detectado se indica para el canal
afectado con los bits de realimentación Fault_Present y Sensor_Error.
Nota
Las salidas de hardware de los canales 0 y 1 así como de los canales 2 y 3 tienen un
diagnóstico común, respectivamente. De este modo, en caso de error en una salida se detiene
la salida de impulso de los dos canales respectivos. Un cortocircuito en una salida puede
disparar también la alarma de diagnóstico "Falta tensión de alimentación".
Las alarmas de diagnóstico se procesan en un OB de alarma.
Este parámetro está desactivado por defecto.

Parámetros del eje
Nota
Objeto tecnológico para Motion Control
Asegúrese de que el correspondiente valor del parámetro coincida con el valor indicado en la
configuración del objeto tecnológico utilizado.

Incrementos por vuelta
Con este parámetro se define el número de incrementos (incluidos microincrementos) que
equivale a un giro del accionamiento.
El rango de valores abarca de 1 a 1000000. El valor afecta el rango de velocidad de giro
máxima y de velocidad de referencia. El ajuste predeterminado es "200".

Velocidad de referencia
Con este parámetro se define la velocidad a la que gira el accionamiento con una consigna de
velocidad del 100%. El rango de valores abarca de 1,0 a 20000,0 r/min. El rango de valores
permitido para la consigna de velocidad está comprendido entre el ‒200 % y el 200 % de la
velocidad de referencia.
La velocidad de referencia afecta el rango de velocidad de giro máxima y de incrementos por
vuelta. El ajuste predeterminado es "3000.0".

Velocidad máxima de giro
Con este parámetro se define la velocidad máxima permitida para la aplicación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1367

Salida de impulsos
5.2 Utilizar el módulo
La tabla siguiente muestra el cálculo del rango de la velocidad máxima:
Interfaz
de señales

Rango de la velocidad máxima
Límite inferior
Evaluación de señal
"Simple"

24 V,
asimétrica

0,1 Hz * 60 / (incremen‐
tos por vuelta)

Límite superior
(se utiliza el menor de los dos valores)

Evaluación de señal
"Cuádruple"
0,1 Hz * 60 * 4 / (incre‐
mentos por vuelta)

Evaluación de señal
"Simple"

Evaluación de señal
"Cuádruple"

● 2 * velocidad de
referencia

● 2 * velocidad de
referencia

TTL (5 V),
asimétrica

● 200000 Hz * 60 /
(incrementos por
vuelta)

● 200000 Hz * 60 * 4 /
(incrementos por
vuelta)

RS422,
simétrica

● 2 * velocidad de
referencia

● 2 * velocidad de
referencia

● 1000000 Hz * 60 /
(incrementos por
vuelta)

● 1000000 Hz * 60 * 4 /
(incrementos por
vuelta)

El ajuste predeterminado es "3000.0".

Bits para valor real incr. (G1_XIST1)
Este parámetro indica el número de bits para la codificación de la resolución fina en el valor real
incremental de posición de G1_XIST1.
El valor es siempre "0" para este módulo.

Tiempo de parada rápida (OFF3)
Con este parámetro se define el intervalo para la ejecución de una parada rápida desde
velocidad máxima a parada completa.
El rango de valores abarca de 1 a 65535 ms. El ajuste predeterminado es "1000 ms".

Tiempo de parada en rampa (OFF1)
Con este parámetro se define el intervalo para la ejecución de una parada desde velocidad
máxima a parada completa.
El rango de valores abarca de 1 a 65535 ms. El ajuste predeterminado es "5000 ms".

Entradas y salidas de hardware
Utilizar habilitación de accionamiento
Con este parámetro se define si se utiliza una salida de hardware para la señal de habilitación
para el accionamiento.
Este parámetro está desactivado por defecto.

1368

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Salida de habilitación del accionamiento
Con este parámetro se define qué salida de hardware se utiliza para habilitar el accionamiento.
Puede escoger entre las siguientes opciones:
● DQ0 (predeterminado)
● DIQ2

Utilizar DI0 como sensor del punto de referencia
Con este parámetro se define si se utiliza la salida de hardware DI0 para la señal del sensor
de referencia para el accionamiento. A través de la señal del sensor de referencia puede
sincronizarse la marca de referencia con la posición actual del eje del accionamiento.
Este parámetro está desactivado por defecto.

Selección de flanco del sensor de referencia
Con este parámetro se define el flanco de DI0 con el que se captura la marca de referencia.
Puede escoger entre las siguientes opciones:
● Con flanco ascendente (predeterminado)
● Con flanco descendente
Nota
El parámetro solo es efectivo si se utiliza una entrada de sensor de referencia.
Este parámetro solo puede seleccionarse y es efectivo si está activada la opción "Utilizar
habilitación del motor". El ajuste predeterminado es "Ninguna".

Utilizar DI1 como detector
Con este parámetro se define si se utiliza la salida de hardware DI1 para la señal del detector
para el accionamiento. A través de la señal del detector puede guardarse la posición actual del
eje de accionamiento.
Este parámetro está desactivado por defecto.

Utilizar "Motor disponible"
Con este parámetro se define si en una entrada digital de hardware se utiliza la señal de
disponibilidad del accionamiento.
Este parámetro está desactivado por defecto.

Entrada "Accionamiento listo"
Con este parámetro se define en qué entrada digital de hardware se conecta y se lee la señal
de disponibilidad del accionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1369

Salida de impulsos
5.2 Utilizar el módulo
Puede escoger entre las siguientes opciones:
● DI0 (predeterminado)
● DI1
● DIQ2
Nota
Este parámetro solo puede seleccionarse y es efectivo si está activada la opción "Motor
disponible".

Retardo a la entrada
Con este parámetro se suprimen las interferencias de señal en las entradas digitales. Los
cambios de señal solo se capturan si permanecen estables durante más tiempo que el retardo
a la entrada parametrizado.
Puede escoger entre las siguientes opciones:
● Ninguno
(Retardo a la entrada de 4 μs, ancho de impulso mínimo de 3 μs)
● 0,05 ms
● 0,1 ms (predeterminado)
● 0,4 ms
● 0,8 ms
● 1,6 ms
● 3,2 ms
● 12,8 ms
● 20 ms
Nota
Si selecciona la opción "Ninguno" o "0,05 ms", deberá utilizar cables apantallados para la
conexión de las entradas digitales.

Error de señal de vida
Número tolerado de errores de señal de vida
Con este parámetro se define el número de errores del Master Sign-Of-Life que tolera el
módulo. Si se excede el número, se dispara un mensaje de error a través del bit de
realimentación Sensor_Error.
El rango de valores abarca de 1 a 65535. El valor 65535 significa que no se vigilan los errores
de señal de vida. El ajuste predeterminado es "1".

1370

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

5.2.2.2

Módulo Online y diagnóstico

Indicación y evaluación del diagnóstico
Por medio de la vista online y de diagnóstico puede realizar un diagnóstico del hardware.
Además, puede:
● Recibir información a través del módulo (p. ej. la versión de Firmware y el número de serie).
● Si es necesario, realice una actualización del firmware.

Procedimiento
Para abrir el editor de visualización para las funciones de diagnóstico, haga lo siguiente:
1. Abra la configuración del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic con el botón derecho del ratón en el módulo y seleccione "Online y diagnóstico".
4. Haga clic en la visualización deseada en el árbol de diagnóstico.

Más información
Para más información sobre los avisos de diagnóstico y sobre posibles remedios, consulte el
manual de producto del módulo.

5.2.3

Utilizar CPU compacta

5.2.3.1

Configurar y parametrizar CPU compacta

Agregar una CPU compacta a la configuración hardware
Requisitos
Se ha creado el proyecto.

Procedimiento
Para agregar una CPU compacta a la configuración hardware, proceda del siguiente modo:
1. Haga doble clic en "Agregar dispositivo".
Se abre el cuadro de diálogo "Agregar dispositivo".
2. Elija "Controladores".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1371

Salida de impulsos
5.2 Utilizar el módulo
3. Seleccione la CPU compacta:
"SIMATIC S7‑1500 > CPU > Nombre de la CPU compacta > Referencia"
4. Confirme con "Aceptar".

Resultado
La nueva CPU compacta aparece en el árbol del proyecto con los siguientes objetos: Haga
doble clic para pasar al editor deseado.

①

Objeto

Descripción

Configuración del
equipo

En la ventana de inspección (por canal PTO/PWM):
● Ajuste del modo de operación (Página 1373)
● Ajuste de la reacción a STOP de la CPU (Página 1374)
● Habilitación de alarmas de diagnóstico (Página 1375)
● Ajuste de parámetros para la modulación por ancho de impulsos o
la salida de frecuencia (Página 1377)
● Ajuste de parámetros de eje para modos de operación PTO
(Página 1377)
● Asignación de señales a entradas y salidas (Página 1375)

②

● Ajuste de las direcciones del módulo
Online y diagnóstico
(Página 1379)

● Diagnóstico de hardware
● Obtener información sobre la CPU compacta
● Actualización del firmware

Compatibilidad 1511C (generadores de impulsos de la CPU compacta 1512C-1 PN)
Asignación de conectores frontales como en la CPU 1511C
Con este parámetro se determina si para los generadores de impulsos de la CPU 1512C-1 PN
se utiliza la asignación de los conectores frontales de la CPU 1511C‑1 PN:

1372

Opción

Significado

Desactivada (predeter‐
minado)

La CPU 1512C‑1 PN utiliza la asignación de conexiones de los conectores
frontales integrados. 1512C‑1 PN soporta el uso de las conexiones de ambos
conectores frontales de la periferia digital integrada para los generadores de
impulsos. La asignación de las entradas y salidas de hardware para los ca‐
nales PTO/PWM se describe en el manual de producto de la CPU
1512C-1 PN.

Activada

La CPU 1512C‑1 PN utiliza la asignación de conexiones de los conectores
frontales de la CPU 1511C-1 PN. 1511C‑1 PN soporta el uso de conexiones
del primer conector frontal de la periferia digital integrada para los genera‐
dores de impulsos. La asignación de las entradas y salidas de hardware para
los canales PTO/PWM se describe en el manual de producto de la CPU
1511C-1 PN.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Modo de operación
Modo de operación
Con este parámetro se define para qué función se utiliza el generador de impulsos de la CPU
compacta. Las posibilidades de ajuste en función del modo de operación se encuentran en:
Reacción a STOP de la CPU (Página 1374)
Alarmas de diagnóstico (Página 1375)
Entradas y salidas de hardware (PWM, salida de frecuencia) (Página 1375) o bien Entradas y
salidas de hardware (PTO) (Página 1375)
Parámetros (PWM, salida de frecuencia) (Página 1377) o bien Parámetros del eje (PTO)
(Página 1377)

Modo de operación

Significado

Parámetros dependientes del modo de ope‐
ración

Desactivado
(predeterminado)

El generador de impulsos no está activado. El ca‐ —
nal no emite impulsos.

Modulación por ancho de
impulso PWM

El canal emite una señal con modulación por an‐ ● Reacción a STOP de la CPU
cho de impulso (Página 1339) con la duración mí‐ ● Valor sustitutivo para salida de impulso
nima de impulso y la duración de periodo parame‐
(DQA)
trizadas. El ciclo de trabajo y la duración de perío‐
● Falta tensión de alimentación L+
do se especifican en la interfaz de control.
● Salida de impulso (DQA)
● Salida High Speed (0,1 A)
● Formato de salida
● Duración mínima de impulso
● Duración de período

Salida de frecuencia

El canal emite una señal con un ciclo de trabajo fijo ● Reacción a STOP de la CPU
(Página 1343) del 50 %. La frecuencia se especi‐ ● Valor sustitutivo para salida de impulso
fica en la interfaz de control.
(DQA)
● Falta tensión de alimentación L+
● Salida de impulso (DQA)
● Salida High Speed (0,1 A)
● Formato de salida

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1373

Salida de impulsos
5.2 Utilizar el módulo
Modo de operación

Significado

Parámetros dependientes del modo de ope‐
ración

PTO (Impulso (A) y senti‐ El canal emite una señal de impulso y una señal
do (B))
de sentido (Página 1346) para una aplicación de
Motion Control.
PTO (contador ascenden‐ El canal emite una señal de avance y una señal de
te (A), contador descen‐ retroceso (Página 1346) para una aplicación de
dente (B))
Motion Control.
PTO (A, B desfasado)

PTO (A, B desfasado,
cuádruple)

El canal emite dos señales desfasadas con eva‐
luación simple (Página 1346) para una aplicación
de Motion Control.

● Falta tensión de alimentación L+
● Incrementos por vuelta
● Velocidad de referencia
● Velocidad máxima de giro
● Bits para valor real incr. (G1_XIST1)
● Tiempo de parada rápida
● Entrada del sensor de referencia

El canal emite dos señales desfasadas con eva‐ ● Selección de flanco del sensor de
referencia
luación cuádruple (Página 1346) para una aplica‐
ción de Motion Control.
● Entrada de medición
● Entrada "Accionamiento listo"
● Salida de impulso (A) / Generador reloj
ascendente (A) / Salida generador de
reloj (A)
● Salida de sentido (B) / Generador reloj
descendente (B) / Salida generador de
reloj (B)
● Salida de habilitación del accionamiento

Reacción a STOP de la CPU
Reacción a STOP de la CPU
Con este parámetro se define la reacción del canal ante el fallo del controlador.
Reacción a STOP de la CPU

Significado

Aplicar valor sustitutivo
(predeterminado)

Hasta la siguiente transición de STOP a RUN de la CPU, el canal
emite en su salida de impulso (DQA) el valor sustitutivo parametri‐
zado.
El bit de respuesta STS_ENABLE se ajusta a 0.
Después de una transición de STOP a RUN, el canal pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de im‐
pulsos, debe ajustarse el bit de control SW_ENABLE a 0.

Continuar

El canal continúa trabajando.
La salida de impulso (DQA) continúa conmutándose en función de la
parametrización y de la última consigna.

Valor sustitutivo para salida de impulso (DQA)
Con este parámetro se define el valor que el canal debe emitir en caso de STOP de la CPU en
la salida digital DQA para el comportamiento "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".

1374

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Alarmas de diagnóstico
Falta tensión de alimentación L+
Con este parámetro se define si se dispara una alarma de diagnóstico si falta tensión de
alimentación. Las alarmas de diagnóstico se procesan en un OB de alarma.
Este parámetro está desactivado por defecto.

Entradas y salidas de hardware (PWM, salida de frecuencia)
Salida de impulso (DQA)
Con este parámetro se determina qué salida digital de hardware se utiliza para la salida de
impulsos.

Salida High Speed (0,1 A)
Con este parámetro se define si la correspondiente salida digital de hardware funciona como
conmutador rápido en contrafase o como sensor tipo PNP:
Opción

Significado

Activado

La salida digital trabaja como conmutador rápido en contrafase con hasta
100 kHz y resiste una corriente de carga nominal de 0,1 A. Un conmutador en
contrafase se conmuta alternativamente a DC 24 V y a masa. Eso posibilita
flancos muy rápidos.

Desactivado
(predeterminado)

La salida digital es de tipo PNP de 24 V con referencia a M (hasta 10 kHz) y
resiste una corriente de carga nominal de 0,5 A.

Nota
El parámetro solo es efectivo si la salida de hardware seleccionada como salida de impulso
soporta el funcionamiento a 100 kHz. El parámetro no está disponible para las salidas de
hardware que solo soportan frecuencias de hasta 100 Hz.

Entradas y salidas de hardware (PTO)
Entrada del sensor de referencia
Con este parámetro se define qué entrada digital de hardware se utiliza como entrada de
sensor de referencia.
El ajuste predeterminado es "Ninguna".

Selección de flanco del sensor de referencia
Con este parámetro se define el flanco de la entrada del sensor de referencia con el que se
captura la marca de referencia.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1375

Salida de impulsos
5.2 Utilizar el módulo
El ajuste predeterminado es "Flanco ascendente".
Nota
El parámetro solo es efectivo si se utiliza una entrada de sensor de referencia.

Entrada de medición
Con este parámetro se define qué entrada digital de hardware se utiliza como entrada de
medición.
El ajuste predeterminado es "Ninguna".

Entrada "Accionamiento listo"
Con este parámetro se define en qué entrada digital de hardware se conecta y se lee la señal
de disponibilidad del accionamiento.
El ajuste predeterminado es "Ninguna".

Salida de impulso (A) / Generador reloj ascendente (A) / Salida generador de reloj (A)
Este parámetro indica qué salida de hardware se utiliza para la señal PTO A. El valor no se
puede modificar.

Salida de sentido (B) / Generador reloj descendente (B) / Salida generador de reloj (B)
Este parámetro indica qué salida de hardware se utiliza para la señal PTO B. El valor tan solo
se puede modificar en el modo de operación "PTO (impulso (A) y sentido (B))".

Salida de habilitación del accionamiento
Con este parámetro se define qué salida de hardware se utiliza para habilitar el accionamiento.
El ajuste predeterminado es "Ninguna".

1376

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

Parámetros (PWM, salida de frecuencia)
Formato de salida
Modo de operación "Modulación por ancho de impulso PWM":
Con este parámetro se define el formato o el rango de valores con el que se evalúa el ciclo de
trabajo:
Formato de salida

Rango de valores

Salida analógica S7

0 ... 27648
("27648" equivale al 100 % del valor de referencia)

1/100
(predeterminado)

0 ... 100

1/1000

0 ... 1000

1/10000

0 ... 10000

Modo de operación "Salida de frecuencia":
Como formato de salida está seleccionado "1 Hz" y no puede modificarse.

Duración mínima de impulso
Este parámetro define la duración mínima de impulso permitida para la señal PWM.
Los impulsos y las pausas inferiores a este valor se suprimen.
El ajuste predeterminado es "0 μs".

Duración de período
Con este parámetro se define la duración de periodo de la señal de salida:
El ajuste predeterminado es "2000000 μs". Esto equivale a 2 s.

Parámetros del eje (PTO)
Incrementos por vuelta
Con este parámetro se define el número de incrementos (incluidos microincrementos) que
equivale a un giro del accionamiento.
El ajuste predeterminado es "200".
Nota
Objeto tecnológico para Motion Control
Asegúrese de que el valor del parámetro coincide con el valor indicado en la configuración del
objeto tecnológico utilizado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1377

Salida de impulsos
5.2 Utilizar el módulo

Velocidad de referencia
Con este parámetro se define la velocidad a la que se refiere la consigna de velocidad.
El rango de valores permitido para la consigna de velocidad está comprendido entre el ‒200 %
y el 200 % de la velocidad de referencia.
El ajuste predeterminado es "3000.0".
Nota
Objeto tecnológico para Motion Control
Asegúrese de que el valor del parámetro coincide con el valor indicado en la configuración del
objeto tecnológico utilizado.

Velocidad máxima de giro
Con este parámetro se define la velocidad máxima permitida para la aplicación.
El ajuste predeterminado es "3000.0".
Nota
Objeto tecnológico para Motion Control
Asegúrese de que el valor del parámetro coincide con el valor indicado en la configuración del
objeto tecnológico utilizado.

Bits para valor real incr. (G1_XIST1)
Este parámetro indica el número de bits para la codificación de la resolución fina en el valor real
incremental de G1_XIST1.
Nota
Objeto tecnológico para Motion Control
Asegúrese de que el valor del parámetro coincide con el valor indicado en la configuración del
objeto tecnológico utilizado.

Tiempo de parada rápida
Con este parámetro se define el intervalo para la ejecución de una parada rápida desde
velocidad máxima a parada completa.
El ajuste predeterminado es "1000 ms".

1378

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el módulo

5.2.3.2

Módulo Online y diagnóstico

Indicación y evaluación del diagnóstico
Por medio de la vista online y de diagnóstico puede realizar un diagnóstico del hardware.
Además, puede:
● Recibir información a través de la CPU compacta (p. ej., la versión de Firmware y el número
de serie).
● Si es necesario, realice una actualización del firmware.

Procedimiento
Para abrir el editor de visualización de las funciones de diagnóstico, proceda del siguiente
modo:
1. Abra la carpeta de la CPU compacta en el árbol del proyecto.
2. Haga doble clic en el objeto "Online y diagnóstico".
3. Haga clic en la visualización deseada en el árbol de diagnóstico.

Más información
Encontrará más información sobre los avisos de diagnóstico y sobre posibles soluciones en el
manual de producto de la CPU compacta.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1379

Salida de impulsos
5.2 Utilizar el módulo

1380

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

6

Control de movimiento
6.1

Using S7-1500 Motion Control

6.1.1

S7-1500/S7-1500T Motion Control Overview

6.1.1.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‐
trol overview

This documentation describes the Motion Control functions inde‐
pendent of and across technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‐
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)
Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

● Speed axis
● Positioning axis
● External encoder

Using S7-1500/S7-1500T measu‐ This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

● Measuring input
● Output cam
● Cam track

1381

Control de movimiento
6.1 Using S7-1500 Motion Control
Documentation

Description

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

● Synchronous axis

Using S7-1500T kinematics func‐
tions

This documentation describes the Motion Control functions for the
following technology objects:

● Cam (S7-1500T)
● Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‐ ● Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

Integrated Motion Control functionality
S7-1500 Motion Control supports closed-loop positioning and moving of axes and is an
integrated part of the CPUs:
● Advanced Controller S7‑1500(F)/S7-1500T(F)
● Distributed Controller S7-1500SP (F)/S7-1500SP T(F)
● Software Controller S7-1507S (F)
● Drive Controller S7-150xD TF
The S7-1500T Technology CPUs provide enhanced functions.
The Motion Control functionality supports the following technology objects:
● Speed axis
● Positioning axis
● Synchronous axis
● External encoder
● Measuring input
● Output cam
● Cam track
● Cam (S7-1500T)
● Kinematics (S7-1500T)
● Leading axis proxy (S7-1500T)

1382

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Drives with PROFIdrive capability and drives with analog setpoint interface and stepper motors
are controlled by means of standardized Motion Control instructions according to PLCopen.
The axis control panel and comprehensive online and diagnostic functions support easy
commissioning and optimization of drives.
S7-1500 Motion Control is fully integrated into the system diagnostics of the S7-1500 CPU.

Principle of operation of S7-1500 Motion Control
You create a project, configure technology objects, and download the configuration to the CPU
with the TIA Portal. The Motion Control functionality is processed in the CPU. You control the
technology objects by using the Motion Control instructions in your user program. The TIA
Portal provides additional functions for commissioning (Página 1478), optimization
and diagnostics (Página 1480).
The following figure provides a schematic representation of the user interfaces and the
integration of Motion Control into the S7-1500 CPU. The concepts are then briefly explained:

7,$3RUWDO

&386
60RWLRQ&RQWURO
8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV

3/&SURJUDPPLQJ
7HFKQRORJ\REMHFWV
7HFKQRORJ\
GDWDEORFNV
&RQILJXUDWLRQ
&RPPLVVLRQLQJ
'LDJQRVWLFV

7HFKQRORJ\REMHFWV
'RZQORDGLQJWR&38
2QOLQHDQGGLDJQRVWLFIXQFWLRQV

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1383

Control de movimiento
6.1 Using S7-1500 Motion Control

TIA Portal
The TIA Portal supports you in the planning and commissioning of Motion Control functionality:
● Integrating and configuring hardware
● Creating and configuring technology objects
● Creating the user program
● Downloading to CPU
● Commissioning of axes
● Optimization of drives
● Diagnostics
You use the TIA Portal to configure the hardware, the technology objects as well as your user
program. You download the program you created to the CPU. You test your user program and
diagnose the hardware with the online and diagnostic functions of the TIA Portal.

Technology objects

0RWLRQ&RQWURO

Technology objects represent real objects (e.g. an axis) in the controller. You call the functions
of the technology objects by means of Motion Control instructions in your user program. These
functions are executed in the Motion Control organization blocks (Página 1390) independently
of the user program. The technology objects provide open- and closed-loop control of the
movement of the real objects, and report status information (e.g. the current position).
The configuration of the technology objects represents the properties of the real object. The
configuration data is stored in a technology data block.
The following technology objects are available for Motion Control:
Symbol

Technology object

Description

Speed axis

The speed axis technology object ("TO_SpeedAxis") is used to specify
the speed for a drive. You program the motion of the axis with mo‐
tion control instructions.

Positioning axis

The positioning axis technology object ("TO_PositioningAxis") is used
to position a drive with closed-loop position control. You issue positio‐
ning jobs to the axis with Motion Control instructions in your user pro‐
gram.

Synchronous axis

The synchronous axis technology object ("TO_SynchronousAxis") in‐
cludes all functions of the positioning axis technology object. The axis
can also be interconnected with a leading value so that the axis follows
the position change of a leading axis in synchronous operation.

Leading axis proxy With cross-PLC synchronous operation, the leading axis proxy techno‐
(S7-1500T)
logy object ("TO_LeadingAxisProxy") represents the leading axis for
local synchronous operation within a CPU. The leading axis proxy eva‐
luates the leading value telegram and provides the external leading
value for the local synchronous axes.

1384

External encoder

The external encoder technology object ("TO_ExternalEncoder") de‐
tects a position and makes it available to the controller. The detected
position can be evaluated in the user program.

Measuring input

The measuring input technology object ("TO_MeasuringInput") detects
actual positions quickly, accurately and event triggered.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Symbol

Technology object

Description

Output cam

The output cam technology object ("TO_OutputCam") generates swit‐
ching signals depending on the position of an axis or external encoder.
You can evaluate the switching signals in the user program or feed them
to digital outputs.

Cam track

The cam track technology object ("TO_CamTrack") generates a swit‐
ching signal sequence depending on the position of an axis or external
encoder. In this process, up to 32 individual cams are superimposed
and the switching signals are output as a track. You can evaluate the
switching signals in the user program or feed them to digital outputs.

Cam (S7-1500T)

The cam technology object ("TO_Cam") specifies a synchronization
function F(x) for camming, over which the leading and following axes are
coupled. The f(x) function is defined by interpolation points and/or seg‐
ments. Missing function ranges are interpolated.

Kinematics
(S7-1500T)

The Kinematic technology object ("TO_Kinematics") is used to intercon‐
nect positioning axes to a kinematic. When you configure the kinematics
technology object, you interconnect the axes in accordance with the
configured kinematics type.

Technology data block
The properties of real objects are configured by means of the technology objects and saved in a
technology data block (Página 1453). The technology data block contains all configuration
data, setpoint and actual values, and status information of the technology object. The TIA Portal
automatically creates the technology data block when the technology object is created. You
access the data of the technology data block (read/write access) with your user program.

Motion Control instructions
With the Motion Control instructions you perform the desired functionality in the technology
objects. The Motion Control instructions are available in the TIA Portal under "Instructions >
Technology > Motion Control". The instructions can be called at all execution levels.

The Motion Control instructions conform to PLCopen (version 2.0).

User program
The Motion Control instructions and the technology data block represent the programming
interfaces for the technology objects. You use Motion Control instructions to transfer Motion
Control jobs for the technology objects in your user program. The technology objects process
the jobs in the Motion Control organization blocks, which are called independently of the user
program, and flag the current status to the Motion Control instruction. Each time the Motion
Control instruction is called, the current status of the current job is displayed at the output
parameters of the Motion Control instruction. You access status information of the technology
object and change specific configuration parameters during runtime using the technology data
block.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1385

Control de movimiento
6.1 Using S7-1500 Motion Control

Drives and encoders
Drives ensure the motion of the axis. They are integrated in the hardware configuration.
When you execute a Motion Control job in your user program, the technology object takes over
the control of the drive and the reading in of values of encoders.
Drives and encoders with PROFIdrive capability are connected by means of PROFIdrive
telegrams. The following connections are possible:
● PROFINET IO
● PROFIBUS DP
● Technology module (TM)
● SINAMICS Integrated (SIMATIC Drive Controller)
Drives with analog setpoint interfaces are connected using an analog output (AQ) and an
optional enable signal. Analog inputs and outputs are made available by means of
corresponding I/O modules.
A drive is also called an actuator, and an encoder is also called a sensor.
The following figure shows an example configuration in which all components are connected to
the CPU by means of PROFINET IO:
(QJLQHHULQJ

+0,

6,0$7,&6

352),1(7
6,1$0,&6

6,1$0,&6

6LJQDORXWSXW
707LPHU','4

(QFRGHU

9DOYH

(QFRGHU

(QFRGHU

6HQVRU

Guidelines on use of motion control
The guidelines described here present the basic procedure for using Motion Control with the
CPU S7-1500. These guidelines serve as recommendations.

1386

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirements
● A project with a CPU S7-1500 has been created.

Procedure
Proceed as follows to use Motion Control with the CPU S7-1500:
1. Add technology object (Página 1420)
2. Working with the configuration editor (Página 1422)
3. Programming (Página 1452)
4. Downloading to CPU (Página 1477)
5. Functional test in the Commissioning window (Página 1478)
6. Diagnostics (Página 1480)

6.1.1.2

Basics

Technology objects
The S7-1500 and S7-1500T CPUs support the following technology objects:
Technology object
Speed axis

Brief description
The speed axis technology object calculates speed setpoints, taking
into account the dynamic settings, and outputs them to the drive. All
motions of the speed axis take place as speed-controlled motions.

S7-1500

S7-1500T

x

x

x

x

x

x

x

x

The speed axis technology object is described in the documentation
"S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462).
Positioning axis

The positioning axis technology object calculates position setpoints,
taking into account the dynamic specification position setpoints ,
and outputs corresponding speed setpoints to the drive.
The positioning axis technology object is described in the documen‐
tation "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

Synchronous axis

The synchronous axis technology object includes all functions of the
positioning axis technology object. A synchronous axis can also
follow the motions of a leading axis.
The synchronous axis technology object is described in the docu‐
mentation "S7-1500/S7-1500T Synchronous operation functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766464).

External encoder

The external encoder technology object detects a position and ma‐
kes this available to the controller.
The external encoder technology object is described in the docu‐
mentation "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1387

Control de movimiento
6.1 Using S7-1500 Motion Control
Technology object

Brief description

Measuring input

The measuring input technology object acquires the actual position
of an axis or external encoder at a signal change at the measuring
input.

S7-1500

S7-1500T

x

x

x

x

x

x

-

x

-

x

-

x

The measuring input technology object is described in the docu‐
mentation "S7-1500/S7-1500T Measuring input and output cam
functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766466).
Output cam

The output cam technology object generates switching signals de‐
pending on the position of an axis or external encoder.
The output cam technology object is described in the documentation
"S7-1500/S7-1500T Measuring input and output cam functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766466).

Cam track

The cam track technology object generates a switching signal se‐
quence depending on the position of an axis or external encoder. A
cam track can consist of up to 32 individual output cams and be
output to one output.
The cam track technology object is described in the documentation
"S7-1500/S7-1500T Measuring input and output cam functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766466).

Cam

The cam technology object defines a transfer function y = f(x). The
dependency of an output variable on an input variable is described
in this transfer function in a unit-neutral manner.
The cam technology object is described in the documentation
"S7-1500/S7-1500T Synchronous operation functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766464).

Leading axis proxy

With cross-PLC synchronous operation, the leading axis proxy tech‐
nology object represents the leading axis for local synchronous
operation within a CPU.
The synchronous axis technology object is described in the docu‐
mentation "S7-1500/S7-1500T Synchronous operation functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766464).

Kinematics

The kinematics technology object calculates motion setpoints for
the tool center point (TCP) of the kinematics taking into account the
dynamic settings.
The Kinematics technology object is described in the documenta‐
tion "S7-1500T Kinematics functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766463).

Configuration limits
Motion Control resources
Each CPU offers a defined set of Motion Control resources. For information on the available
Motion Control resources, refer to the technical specifications of the utilized CPU.

1388

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Each technology object uses Motion Control resources:
Technology object

Motion Control resources used

Speed axis

40

Positioning axis

80

Synchronous axis

160

External encoder

80

Measuring input

40

Output cam

20

Cam track

160

You can find an overview of the Motion Control resources of a CPU in the TIA Portal under
"Tools > Resources".

Extended Motion Control resources (S7-1500T)
The leading axis proxy, cam and kinematics technology objects use "Extended Motion Control
resources". For information on the maximum number of leading axis proxies, cams and
kinematics that can be used in addition to the Motion Control resources, refer to the technical
specifications of the relevant CPU.
Technology object

Extended Motion Control resources used

Leading axis proxy

3

Cam

2

Kinematics

30

Application cycle
As the number of technology objects used increases, the computing time needed by CPU to
process the technology objects increases. The Motion Control application cycle (Página 1390)
can be adapted according to the number of technology objects used.

Units of measure
The supported units of measure for speed (revolutions per time unit) are 1/s, 1/min and 1/h.
The table below shows the supported units of measure for position and velocity:
Position

Velocity

nm, μm, mm , m, km

mm/s1), mm/min, mm/h, m/s, m/min, m/h, km/min,
km/h

in, ft, mi

in/s, in/min, ft/s, ft/min, mi/h

° , rad

°/s1), °/min, rad/s, rad/min

1)

1)

1)

Position values with higher resolution or six decimal places

The acceleration is set accordingly as the position/s² unit of measure.
The jerk is set accordingly as the position/s² unit of measure.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1389

Control de movimiento
6.1 Using S7-1500 Motion Control
The table below shows the supported units of measure for force and torque:
Force

Torque

N, kN

Nm, kNm

lbf, ozf, pdl

lbf in, lbf ft, ozf in, ozf ft, pdl in, pdl ft

The unit of measure for time is permanently specified for the following technology objects:
Technology object

Time

Speed axis, positioning/synchronous axis, external encoder

s

Output cam, cam track, measuring input

ms

Nota
When setting or changing the units of measure, take into consideration the effect on the display
of parameter values and the user program:
● Display of parameter values in the technology data block
● Assignment of parameters in the user program
● Input and display of the position and velocity in the TIA Portal
● Setpoint settings by leading axes in synchronous operation
All information and displays correspond to the selected unit of measure.
The set units are displayed in the tag structure of the <TO>.Units technology object. The tag
structure is described in the Appendix (Página 1510) under the tags of the respective
technology object.

Position values with higher resolution
If you select the check box "Use position values with higher resolution" in the configuration of
the technology objects "TO_PositioningAxis", "TO_SynchronousAxis", "TO_ExternalEncoder"
and "TO_Kinematics", six decimal places are available in the selected unit. The displayable
position and angle range in [mm] and [°] is limited in LREAL format to +9.0E09 digits. This
reduces the position and angle range that can be displayed as well as the mechanical gear ratio
by the factor 1000. With regard to long-term stability, the numerical travel range limit is reduced
accordingly by the factor 1000.

Process response
Organization blocks for Motion Control
When you create a technology object, organization blocks MC-Servo [OB91] and MCInterpolator [OB92] are automatically created for processing the technology objects. The
organization block MC-LookAhead [OB97] is also created for the kinematics technology object
as of technology version 5.0. The technology objects are processed in the Motion Control
application cycle. The application cycle consists of required and optional organization blocks
(OBs).

1390

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
In the user program, call the appropriate Motion Control instruction and start a Motion Control
job for a technology object. In the organization block Main [OB1], call the user program
cyclically.
Optionally, programmable Motion Control OBs are available, which you must insert manually.
These organization blocks take into account special requirements with regard to time-critical
events or the time sequence of function calls. This makes it possible, for example, to start
motions immediately in the event of time-critical events.
The following table shows the organization blocks for Motion Control:
Organization block

Description

Priority1)

MC-PreServo
[OB67] (optional)

For For example: Preparation of the telegram contents from
the drive system.

Corresponds to
MC-Servo

Is called immediately before the MC-Servo [OB91].
MC-Servo [OB91]
(know-how-protec‐
ted)

Calculation of the position controller

17 to 26

System performance, no user program possible.

Default 26

MC-PostServo
[OB95] (optional)

For For example: Preparation of the setpoints for the drive
system.

Corresponds to
MC-Servo

Is called immediately after the MC-Servo [OB91].
MC-Transformation
[OB98] (optional)

Programming of the transformation of Cartesian coordinates
and axis-specific setpoints for user-defined kinematics

17 to 25

MC-PreInterpolator
[OB68] (optional)

For For example: MotionIn instructions for measuring inputs,
output cams and cam tracks

Corresponds to
MC-Interpolator

Default 25

The MC-PreInterpolator [OB68] is required for iposynchro‐
nous processing of Motion Control instructions.
Is called immediately before the MC-Interpolator [OB92].
MC-Interpolator
[OB92] (know-howprotected)

Evaluation of the Motion Control instructions, generation of
setpoints and monitoring functionality

MC-LookAhead
[OB97] (know-howprotected)

Calculation of the motion processing of the kinematics tech‐
nology object

System performance, no user program possible.

Applies only to a technology object kinematics V5.0 or higher.

16 to 25
Default 24
15 to 16
Default 15

System performance, no user program possible.
1)

26 corresponds to highest priority.

The clock ratio of the two organization blocks MC-Servo [OB91] and MC-Interpolator [OB92] to
each other is always 1:1. You can scale the ratio of the bus clock to the application cycle.
You can set the application cycle and the priority of the organization blocks according to your
requirements for control quality and system load.
You can check the runtime of the respective organization block (except MC-LookAhead
[OB97]) with the instruction "RT_INFO". The current application cycle (in µs) of the organization
blocks MC-PreServo [OB67] and MC-PostServo [OB95] and MC-PreInterpolator [OB68] can
be read using the start information.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1391

Control de movimiento
6.1 Using S7-1500 Motion Control

Application cycle
In the properties of the organization block MC-Servo [OB91], you can set the application cycle
in which the organization blocks for MC-Servo [OB91], MC-Interpolator [OB92] and their
optional OBs are called:
● Synchronous to the bus (recommended setting for optimum control quality)
The application cycle is synchronous to the selected source of the send clock and the
corresponding reduction ratio. The following clock sources are available for selection:
– PROFINET IO
– PROFIBUS DP
– Local bus system (as of firmware version ≥ 2.6)
– PROFIdrive system for SINAMICS Integrated of SIMATIC Drive Controller
A bus system that is connected to the CPU via a communication processor/communication
module (CP/CM) cannot be used synchronously.
● Cyclic
The application cycle is called at the specified time interval. Processing is asynchronous to
the bus clock/send clock.

Possibilities of influencing the process behavior
The system load is primarily determined by the quantity structure (number of technology
objects), the communication load and the user program. The processing time in the application
cycle increases with the number of technology objects (MC-Servo [OB91]). Simultaneous
starting of Motion Control instructions results in additional processing times in the application
cycle (MC-Interpolator [OB92] and MC-LookAhead [OB97]) at short notice. Optional Motion
Control OBs additionally affect the processing time of the application cycle.
You define the available processing time using the set application cycle. The time available at
the end of the application cycle is used for processing the low-priority OBs with the other user
program.
The cycle time of the Main [OB1] can increase significantly due to longer processing times in
the application cycle.
System overloads are indicated by timeouts or overflows (Página 1393) of Main [OB1], MCServo [OB91] and MC-Interpolator [OB92].
You have the following options for influencing the system load and the processing times of the
user program:
● Reduce the bus clock
● Reduce clock
● Reduce the percentage cycle load of the MC-LookAhead [OB97] (adjustment range 1% to
40%, default setting 20%)
● Reduce percentage communication load of the CPU
● To relieve the load on MC-Interpolator [OB92] and MC-LookAhead [OB97], avoid
simultaneous starting of Motion Control instructions
If necessary, use one or more options to optimize the system and the flow behavior.

1392

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Clock reduction ratio (as of firmware version 1.5)
You can reduce the application cycle of the MC-Servo [OB91] to the send clock of the selected
isochronous bus system. You can set an integer multiple of the send clock as the factor. A
maximum cycle time of 32 ms is possible for the application cycle.
If you call an isochronous mode interrupt OB and the MC-Servo [OB91] with the same bus
system, you must set the same factor for both organization blocks.

Priority
You can configure the priority of the organization blocks as needed in their properties under
"General > Properties > Priority".
When setting the priorities, make sure that the MC-Servo [OB91] is always set before the MCPreInterpolator [OB68] and the MC-Interpolator [OB92]. The priority of MC-Servo [OB91] must
be at least one higher than the priority of MC-Interpolator [OB92]. The priority of the MCLookAhead [OB97] must be at least one level higher than the priority of cyclic interrupts.

Consulte también
Data connection drive/encoder via data block (Página 1570)

Process image partition "OB Servo PIP"
The process image partition "OB Servo PIP" is made available in isochronous mode for Motion
Control when MC-Servo [OB91] is called. All drives and encoders used by Motion Control are
assigned to this process image partition.
Because the organization blocks MC-PreServo [OB67] and MC-PostServo [OB95] are called
automatically by the MC-Servo [OB91], the process image partition is also available
automatically. If you use a MC-PreServo [OB67], the data are read in when the MC-PreServo
[OB67] starts. If you use a MC-PostServo [OB95], the data are output after the MC-PostServo
[OB95].
Additionally, you should assign all I/O modules used by Motion Control to this process image
partition (e.g. hardware limit switches). The assignment results in chronologically synchronous
processing with the technology object.
The input process image partition is also updated in STOP mode.

Process image partition in the user program
As of firmware version V1.5, you can access the process image partition "OB Servo PIP" in your
user program. This makes it possible to evaluate the process image partition using the trace
function.

Operational Sequence and Timeouts
When processing the Motion Control functionality, the Motion Control organization blocks MCServo [OB91] and MC-Interpolator [OB92] including the optional organization blocks are called
and processed in each application cycle. Your user program is processed during the remaining
time until the next application cycle.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1393

Control de movimiento
6.1 Using S7-1500 Motion Control
For error-free program execution, keep to the following rules:
● In each application cycle, MC-Servo [OB91] must be started and executed completely.
● In each application cycle, the relevant MC-Interpolator [OB92] must at least be started.
The following figure illustrates the time sequence of the cyclic user program and application
cycle:
● The upper section shows the processing of the Main [OB1] without interruption of the
application cycle by Motion Control OBs with higher priority.
● The central section shows the processing of Main [OB1] with interruption. Motion Control
OBs with higher priority are executed in the application cycle.
The Main [OB1] is interrupted in the cycle of the application cycle; the cycle time of the user
program becomes accordingly longer.
● The lower section shows a detailed view of the error-free run behavior of the individual
organization blocks.

1394

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

0DLQ>2%@

Q



0DLQ
&\FOHQ

0DLQ
&\FOHQ

0&/RRN
$KHDG

&ORFN

$SS
&\FOH


0DLQ
&\FOHQ

0&/RRN
$KHDG

&ORFN

$SS
&\FOH


0DLQ
&\FOHQ

0&/RRN
$KHDG

$SS
&\FOH


&ORFN

$SS
&\FOH

Q



$SSOLFDWLRQ&\FOH
W
0&3UH6HUYR>2%@
W
0&6HUYR>2%@

6

6
W

0&3RVW6HUYR>2%@
W
0&3UH,QWHUSRODWRU>2%@
W
0&,QWHUSRODWRU>2%@

,

,
W

0&/RRN$KHDG>2%@




W

0DLQ>2%@






W



①
②
③
④
⑤
⑥



"TPA OB Servo" input process image partition
"TPA OB Servo" output process image partition
First MC-LookAhead cycle
Second MC-LookAhead cycle
Main [OB1] cycle n
Main [OB1] cycle n+1

The Motion Control OBs and the Main [OB1] are processed one after the other in application
cycle 1. The process image partition "TPA OB SERVO" ① is read before processing the MCPreServo [OB67]. The MC-Servo [OB91] is displayed as S1 in the first application cycle. After
processing the MC-PostServo [OB95], the process image partition "TPA OB SERVO" ② is
updated.
The MC-PreInterpolator [OB68] and the MC-Interpolator [OB92] are then processed. The MCInterpolator [OB92] is displayed as I1 in the first application cycle. Its processing time varies
according to the evaluation of the Motion Control instructions as well as the monitoring and
setpoint generation for all technology objects configured on the CPU for motion contol.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1395

Control de movimiento
6.1 Using S7-1500 Motion Control
Number ③ represents the processing of the MC-LookAhead [OB97] The Main [OB1] (⑤) is
further processed only after all Motion Control OBs have been processed.
In the second application cycle, the processing time for the MC-Interpolator [OB92] I2 and the
second MC-LookAhead cycle ④ is shorter than in the first application cycle. The Main [OB1]
cycle n ⑤ is finished before the third application cycle. The Main [OB1] cycle n+1 ⑥ is already
being processed in the remaining time until the third application cycle. This means that parts of
two Main [OB1] cycles can be processed between two application cycles.

Overflows
Overflows can occur if the configured application cycle is not adhered to, for example because
additional technology objects or programs are added in the MC-PreServo [OB67] or MCPostServo [OB95]. The application cycle must be adapted in this case. The MC-Servo [OB91]
must be completed before the next send clock, irrespective of the permissible duration of the
application cycle.
If the processing time of MC-Servo [OB91] exceeds the duration of a send clock, the message
"overflow" is displayed in the diagnostics buffer of the CPU. The controller no longer runs
isochronously.
If the processing time exceeds the duration of an application cycle, the CPU switches to STOP
operating state.
The following figure shows the behavior in the case of overflow of MC-Servo [OB91] in the
application cycle and in the send clock with a reduction ratio of 2:








$SSOLFDWLRQF\FOH
W


6HQGFORFNF\FOH














W

0&6HUYR>2%@

6

6

6
W

0HVVDJH


&386723



①
②

Overflow (message)

*

Including MC-PreServo [OB67] and/or MC-PostServo [OB95], when in use

Start of the processing of MC-Servo [OB91]

The execution of an MC-Interpolator [OB92] may only be interrupted by an MC-Servo [OB91]
call. If more interruptions occur, the CPU switches to STOP mode.
The following figure shows the operational sequence when an MC-Interpolator [OB92] is
interrupted over two time slices:

1396

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control









$SSOLFDWLRQF\FOH
W
0&6HUYR>2%@

6

6

6
W

0&,QWHUSRODWRU>2%@

,

,

,
W

0DLQ>2%@

&386723

W

1)

Including MC-PreServo [OB67] and/or MC-PostServo [OB95], when in use

2)

Including MC-PreInterpolator [OB68], if available

The CPU tolerates a maximum of three consecutive overflows of MC-Interpolator [OB92]. If
more overflows occur, the CPU switches to STOP mode.
The following figure shows the operational sequence if there are four consecutive individual
overflows of MC-Interpolator [OB92]:










$SSOLFDWLRQF\FOH
W
0&6HUYR>2%@

6

6

6

6

6
W

0&,QWHUSRODWRU>2%@



,

,

,

,

,

,

,

,
W

0DLQ>2%@

&386723

1)

Including MC-PreServo [OB67] and/or MC-PostServo [OB95], when in use

2)

Including MC-PreInterpolator [OB68], if available

W

Operating modes
This section examines the behavior of the Motion Control in the respective operating modes
and in the transitions between operating modes. A general description of the operating modes
can be found in the S7-1500 System Manual

Operating modes and transitions
The CPU has the following operating modes:
● STOP
● STARTUP
● RUN
● HOLD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1397

Control de movimiento
6.1 Using S7-1500 Motion Control
The following figure shows the operating modes and the operating mode transitions:

+$/7






6723





67$5783






581



Operating mode transitions
The following table shows the behavior of the Motion Control in the transitions between the
operating modes:
No.

①
②
③
④

⑤
⑥
⑦
⑧
⑨

Operating mode
transition

Behavior

POWER ON →
STOP

The CPU performs a restart of the technology objects. The technology objects are reinitialized
with the values from the load memory.

STOP → STARTUP

Not relevant for Motion Control.

STARTUP → RUN

The process outputs are enabled.

RUN → STOP

When the CPU changes from RUN mode to STOP mode, all technology objects are disabled
in accordance with the alarm response "remove enable". Active Motion Control jobs are abor‐
ted.
If restart-relevant data has been changed for technology objects in RUN, the CPU performs a
restart of the corresponding technology objects.

STARTUP → HOLD

Breakpoint in the start-up routine reached.

HOLD → STARTUP

Not possible when using technology objects

RUN → HOLD

Breakpoint reached

HOLD → RUN

Not possible when using technology objects

HOLD → STOP

By operation of switch/display or by setting to STOP from programming device.

STOP mode
In STOP mode the user program is not processed and all process outputs are disabled. Thus
no Motion Control jobs are executed.
The technology data blocks are updated.

STARTUP mode
Before the CPU starts processing of the cyclical user program, the startup OBs are processed
one time.
In STARTUP mode, the process outputs are disabled. Motion Control jobs are rejected.

1398

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The technology data blocks are updated.

RUN mode
The user program is processed in RUN mode.
In RUN mode, the programmed Motion Control jobs are cyclically called and processed.
The technology data blocks are updated.

HOLD operating state
Working with breakpoints is not supported when technology objects are used. An overflow of
the MC-Servo hereby occurs. This leads to an immediate switch to STOP mode.
In HOLD operating state, events are not initiated and the user program is not executed.
All outputs are disabled or react according to the parameter settings. Outputs supply a
configured substitute value or keep the last value output and bring the controlled process to a
safe operating state.
When you reach a breakpoint, the CPU executes an implicit restart of the technology object.
Homing the technology once again.

6.1.1.3

Using versions

Overview of versions
For S7-1500 Motion Control, a distinction is made between the version of the technology, the
technology objects and the Motion Control instructions. The overview shown below includes
S7-1500 and S7-1500T. Only one technology version can be operated on a CPU.
When changing to a CPU ≥ V1.6, you must change the technology version accordingly. Card
replacement from a CPU < V1.6 to a ≥ CPU V1.6 is supported. In the TIA Portal, you can use
a CPU ≥ V1.6 only to work on projects with a correspondingly higher technology version.
There are two ways of changing the technology version:
● Changing the version of the Motion Control instructions
You change the version of the Motion Control instructions in the "Instructions" task card in
the folder "Technology > Motion Control > S7-1500 Motion Control".
If the Motion Control instruction version used does not correspond to the compatibility list,
the relevant Motion Control instructions are highlighted in red in the program editor.
● Adding a technology object with an alternative version
If a technology object with an alternative version is added in the "Add new object" dialog, the
technology version is changed to the alternative version.
The technology objects and Motion Control instructions are only converted to the selected
version of the technology during compilation.
The version of a technology object or a Motion Control instruction is indicated in the properties
of the technology object, "General > Information" tab, "Version" field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1399

Control de movimiento
6.1 Using S7-1500 Motion Control

Compatibility list
The table below shows the compatibility of the technology version with the CPU version:
CPU

Technology

Technology object

V2.8

V5.0

Speed axis V5.0
Positioning axis V5.0
External encoder V5.0
Synchronous axis V5.0
Measuring input V5.0
Output cam V5.0
Cam track V5.0
Cam V5.0 (S7-1500T)
Kinematics V5.0 (S7-1500T)
Leading axis proxy V5.0 (S7-1500T)

V2.5

V4.0

Speed Axis V4.0
Positioning Axis V4.0
External Encoder V4.0
Synchronous Axis V4.0
Measuring input V4.0
Cam V4.0
Cam track V4.0
Cam V4.0 (S7-1500T)
Kinematics V4.0 (S7-1500T)

V2.0, V2.1

V3.0

Speed Axis V3.0
Positioning axis V3.0
External encoder V3.0
Synchronous axis V3.0
Measuring input V3.0
Output cam V3.0
Cam track V3.0
Cam V3.0 (S7-1500T)

V1.6, V1.7, V1.8

V2.0

Speed Axis V2.0
Positioning axis V2.0
External encoder V2.0
Synchronous axis V2.0

V1.0, V1.1, V1.5

1

V1.0

Speed Axis V1.0
Positioning axis V1.0
External encoder V1.0

1) Card replacement from a CPU < V1.6 to a CPU ≥ V1.6 is supported.

Parameter "Mode" of the Motion Control instruction "MC_Home"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter.

1400

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The table below shows a comparison of the "MC_Home.Mode" parameter for technology V1.0
and ≥ V2.0:
MC_Home.HomingMode V1.0

Parameter
value

MC_Home.Mode ≥ V2.0

Direct homing (absolute)

0

Direct homing (absolute)

Direct homing (relative)

1

Direct homing (relative)

Passive homing

2

Passive homing (without reset)

Passive homing (with configured home po‐ 3
sition)

Active homing

Active homing

4

Reserved

Active homing (with configured home po‐
sition)

5

Active homing (with configured home po‐
sition)

Absolute encoder adjustment (relative)

6

Absolute encoder adjustment (relative)

Absolute encoder adjustment (absolute)

7

Absolute encoder adjustment (absolute)

Passive homing (without reset)

8

Passive homing

Abort passive homing

9

Abort passive homing

-

10

Passive homing (with configured home po‐
sition)

You can find additional information about the "MC_Home.Mode" parameter in the description
of the Motion Control instruction "MC_Home".

Tags of the technology object
Starting from technology version V3.0, all input and output addresses are specified using data
type "VREF". This results in the following changes to the tags of the technical object:
Tag of technology object

Changes starting from
V3.0

<TO>.Actor.Interface.AddressIn

Data type: VREF

<TO>.Actor.Interface.AddressOut

Data type: VREF

<TO>.Sensor[1..4].Interface.AddressIn

Data type: VREF

<TO>.Sensor[1..4].Interface.AddressOut

Data type: VREF

<TO>.Actor.Interface.EnableDriveOutputAddress

Data type: VREF

<TO>.Actor.Interface.EnableDriveOutputBitNumber

Tag eliminated

<TO>.Actor.Interface.DriveReadyInputAddress

Data type: VREF

<TO>.Actor.Interface.DriveReadyInputBitNumber

Tag eliminated

<TO>.Sensor[1..4].ActiveHoming.DigitalInputAddress

Data type: VREF

<TO>.Sensor[1..4].ActiveHoming.DigitalInputBitNumber

Tag eliminated

<TO>.Sensor[1..4].PassiveHoming.DigitalInputAddress

Data type: VREF

<TO>.Sensor[1..4].PassiveHoming.DigitalInputBitNumber

Tag eliminated

<TO>.PositionLimits_HW.MinInputAddress

Data type: VREF

<TO>.PositionLimits_HW.MinInputBitNumber

Tag eliminated

<TO>.PositionLimits_HW.MaxInputAddress

Data type: VREF

<TO>.PositionLimits_HW.MaxInputBitNumber

Tag eliminated

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1401

Control de movimiento
6.1 Using S7-1500 Motion Control

Version V5.0
Innovations
Technology version V5.0 contains the following new features:
● The values for position, velocity and angle can be configured with higher resolution.
● In the axis control panel, the dynamic values are retained until the axis control panel is
closed.
● In the central operation of the technological modules, the clock synchronization is supported
via the active backplane bus.
● The organization block MC-PreInterpolator [OB68] enables isosynchronous processing of
Motion Control instructions.
● With a "MC_Stop" job, you can stop an axis and prevent new jobs.
● With a "MC_Home" job, target positions can be set absolutely or relatively.
● With a "MC_Reset" job, alarms in the drive can be acknowledged without a pending error at
the technology object.
● Selected bits in control word 1 and control word 2 can be controlled with a
"MC_SetAxisSTW" job.
● With a "MC_WriteParameter" job, hardware limit switches can be activated and deactivated.
● The tag "<TO>.VelocitySetpoint" indicates the effective setpoint velocity.
● The tag "<TO>.ModuloCycle" indicates the number of modulo cycles of the setpoint.
● The tag "<TO>.ActualModuloCycle" indicates the number of modulo cycles of the actual
value.

Additional innovations for S7-1500T
Technology Version V5.0 contains the following additional improvements:
● The default value of the CPU communication load for the following CPUs was reduced from
50% to 20%:
– S7-1505SP T/TF
– S7-1511T/TF
– S7-1515T/TF
– S7-1516T/TF
● The default values of the bus clocks are:
– 4 ms for CPUs 1511T/TF and 1515T/TF
– 2 ms for CPU 1516T/TF
– 1 ms for CPU 1517T/TF

1402

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● Synchronous operation:
– With a cross-PLC synchronous operation, a synchronous operation is possible between
axes which are located on different CPUs within a project.
– A cross-PLC synchronous operation can be configured using the leading axis proxy
technology object.
– The actual value extrapolation has been extended.
– With a "MC_LeadingValueAdditive" job, an additive leading value can be specified for
the following axis cyclically to a leading value.
– With a "MC_GearInPos" job, a subsequent synchronization via leading value distance is
possible for gearing.
– With a "MC_CamIn" job, a subsequent synchronization via leading value distance is
possible for camming.
– The tag "<TO>.StatusSynchronizedMotion.StatusWord" indicates the exceeding of the
dynamics limits during synchronization.
– The tag "<TO>.StatusSynchronizedMotion.WaitingFunctionState" indicates a pending
synchronous operation.
● Kinematics:
– You can configure the predefined kinematics type "SCARA 2D with orientation".
– A model of the kinematics with the configured zones is displayed in the "Diagnostics"
window.
– It is possible to measure object coordinate systems offline and online using the
"Calibration" window.
– The movement preparation of the kinematics technology object is calculated in the MCLookAhead [OB97] organization block.
– A kinematics with a synchronous "point-to-point" motion can be traversed absolutely with
a "MC_MoveDirectAbsolute" job.
– A kinematics with a synchronous "point-to-point" motion can be traversed relatively with
a "MC_MoveDirectRelative" job.
– With a "MC_KinematicsTransformation" job, a forward transformation can be calculated.
– With a "MC_InverseKinematicsTransformation" job, an inverse transformation can be
calculated.
– With a "MC_TrackConveyorBelt" job, conveyor tracking is possible.

Motion Control instructions
The technology version V5.0 contains the following new Motion Control instructions:
● MC_Stop V5.0
● MC_SetAxisSTW V5.0
● MC_WriteParameter V5.0
● MC_LeadingValueAdditive V5.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1403

Control de movimiento
6.1 Using S7-1500 Motion Control
● MC_MoveDirectAbsolute V5.0 (S7-1500T)
● MC_MoveDirectRelative V5.0 (S7-1500T)
● MC_TrackConveyorBelt V5.0 (S7-1500T)
● MC_KinematicsTransformation V5.0 (S7-1500T)
● MC_InverseKinematicsTransformation V5.0 (S7-1500T)
The technology version V5.0 contains the following revised Motion Control instructions:
● MC_Reset V5.0
● MC_Home V5.0
● MC_GearInPos V5.0 (S7-1500T)
● MC_CamIn V5.0 (S7-1500T)
In addition, the technology version V5.0 contains unchanged Motion Control instructions from
V4.0:
● MC_Power V5.0
● MC_Halt V5.0
● MC_MoveAbsolute V5.0
● MC_MoveRelative V5.0
● MC_MoveVelocity V5.0
● MC_MoveJog V5.0
● MC_MoveSuperimposed V5.0
● MC_SetSensor V5.0 (S7-1500T)
● MC_MeasuringInput V5.0
● MC_MeasuringInputCyclic V5.0
● MC_AbortMeasuringInput V5.0
● MC_OutputCam V5.0
● MC_CamTrack V5.0
● MC_GearIn V5.0
● MC_PhasingRelative V5.0 (S7-1500T)
● MC_PhasingAbsolute V5.0 (S7-1500T)
● MC_SynchronizedMotionSimulation V5.0 (S7-1500T)
● MC_InterpolateCam V5.0 (S7-1500T)
● MC_GetCamLeadingValue V5.0 (S7-1500T)
● MC_GetCamFollowingValue V5.0 (S7-1500T)
● MC_MotionInVelocity V5.0 (S7-1500T)
● MC_MotionInPosition V5.0 (S7-1500T)
● MC_TorqueAdditive V5.0

1404

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● MC_TorqueRange V5.0
● MC_TorqueLimiting V5.0
● MC_GroupInterrupt V5.0 (S7-1500T)
● MC_GroupContinue V5.0 (S7-1500T)
● MC_GroupStop V5.0 (S7-1500T)
● MC_MoveLinearAbsolute V5.0 (S7-1500T)
● MC_MoveLinearRelative V5.0 (S7-1500T)
● MC_MoveCircularAbsolute V5.0 (S7-1500T)
● MC_MoveCircularRelative V5.0 (S7-1500T)
● MC_DefineWorkspaceZone V5.0 (S7-1500T)
● MC_DefineKinematicsZone V5.0 (S7-1500T)
● MC_SetWorkspaceZoneActive V5.0 (S7-1500T)
● MC_SetWorkspaceZoneInactive V5.0 (S7-1500T)
● MC_SetKinematicsZoneActive V5.0 (S7-1500T)
● MC_SetKinematicsZoneInactive V5.0 (S7-1500T)
● MC_DefineTool V5.0 (S7-1500T)
● MC_SetTool V5.0 (S7-1500T)
● MC_SetOcsFrame V5.0 (S7-1500T)

Version-based UDT names
The following table shows the version-based UDT names for the control words and status
words of the SIEMENS telegrams 10x:
UDT name < V4.0

UDT name ≥ V4.0

WORD data type

PD_STW1

PD_STW1_611Umode

Control word 1 (STW1)

PD_STW2

PD_STW2_611Umode

Control word 2 (STW2)

PD_ZSW1

PD_ZSW1_611Umode

Status word 1 (ZSW1)

PD_ZSW2

PD_ZSW2_611Umode

Status word 2 (ZSW2)

If you switch from a technology version < V4.0 to ≥ V4.0 or vice versa, an error occurs during
the compilation. You have to adapt the UDT names manually.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1405

Control de movimiento
6.1 Using S7-1500 Motion Control

Version V4.0
Innovations
Technology Version V4.0 contains the following new features:
● Exchange of torque data with the drive in the technological units of the technology object.
– Additive setpoint torque
– Current actual torque
– Permissible torque range
● Extension of the data structure of the positioning axis and synchronous axis for using
technology object kinematics
● Use of optimized data blocks (drive/encoder connection)

Additional innovations for S7-1500T
Technology Version V4.0 contains the following additional features:
● Kinematic technology object (S7-1500T)
● Motion specification via "MotionIn" instructions (S7-1500T)
● Direct synchronous setting with "MC_CamIn" V4.0 (S7-1500T)

Motion Control instructions
Technology Version V4.0 contains the following Motion Control instructions:
● MC_Power V4.0
● MC_Reset V4.0
● MC_Home V4.0
● MC_Halt V4.0
● MC_MoveAbsolute V4.0
● MC_MoveRelative V4.0
● MC_MoveVelocity V4.0
● MC_MoveJog V4.0
● MC_MoveSuperimposed V4.0
● MC_SetSensor V4.0 (S7-1500T)
● MC_MeasuringInput V4.0
● MC_MeasuringInputCyclic V4.0
● MC_AbortMeasuringInput V4.0
● MC_OutputCam V4.0
● MC_CamTrack V4.0

1406

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● MC_GearIn V4.0
● MC_GearInPos V4.0 (S7-1500T)
● MC_PhasingAbsolute V4.0 (S7-1500T)
● MC_PhasingRelative V4.0 (S7-1500T)
● MC_CamIn V4.0 (S7-1500T)
● MC_SynchronizedMotionSimulation V4.0 (S7-1500T)
● MC_InterpolateCam V4.0 (S7-1500T)
● MC_GetCamFollowingValue V4.0 (S7-1500T)
● MC_GetCamLeadingValue V4.0 (S7-1500T)
● MC_MotionInVelocity V4.0 (S7-1500T)
● MC_MotionInPosition V4.0 (S7-1500T)
● MC_TorqueAdditive V4.0
● MC_TorqueRange V4.0
● MC_TorqueLimiting V4.0
● MC_GroupInterrupt V4.0 (S7-1500T)
● MC_GroupContinue V4.0 (S7-1500T)
● MC_GroupStop V4.0 (S7-1500T)
● MC_MoveLinearAbsolute V4.0 (S7-1500T)
● MC_MoveLinearRelative V4.0 (S7-1500T)
● MC_MoveCircularAbsolute V4.0 (S7-1500T)
● MC_MoveCircularRelative V4.0 (S7-1500T)
● MC_DefineWorkspaceZone V4.0 (S7-1500T)
● MC_DefineKinematicsZone V4.0 (S7-1500T)
● MC_SetWorkspaceZoneActive V4.0 (S7-1500T)
● MC_SetWorkspaceZoneInactive V4.0 (S7-1500T)
● MC_SetKinematicsZoneActive V4.0 (S7-1500T)
● MC_SetKinematicsZoneInactive V4.0 (S7-1500T)
● MC_DefineTool V4.0 (S7-1500T)
● MC_SetTool V4.0 (S7-1500T)
● MC_SetOcsFrame V4.0 (S7-1500T)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1407

Control de movimiento
6.1 Using S7-1500 Motion Control

Version-based UDT names
The following table shows the version-based UDT names for the control words and status
words of the SIEMENS telegrams 10x:
UDT name <V4.0

UDT name ≥V4.0

WORD data type

PD_STW1

PD_STW1_611Umode

Control word 1 (STW1)

PD_STW2

PD_STW2_611Umode

Control word 2 (STW2)

PD_ZSW1

PD_ZSW1_611Umode

Status word 1 (ZSW1)

PD_ZSW2

PD_ZSW2_611Umode

Status word 2 (ZSW2)

If you switch from a technology version <V4.0 to ≥V4.0 or vice versa, an error occurs during the
compilation. You have to adapt the UDT names manually.

Version V3.0
Innovations
Technology Version V3.0 contains the following new features:
● Measuring input technology object
● Output cam technology object
● Cam track technology object
● Force/torque limiting
● Fixed stop detection
● Axis type virtual axis
● MC-PreServo [OB67] and MC-PostServo [OB95]
● Technology CPU S7-1500T

Additional innovations for S7-1500T
Technology Version V3.0 contains the following additional improvements:
● Cam technology object (S7-1500T)
● Gearing with "MC_GearInPos" (S7-1500T)
● Camming with "MC_CamIn" (S7-1500T)
● Using multiple encoders (S7-1500T)

Motion Control instructions
Technology Version V3.0 contains the following Motion Control instructions:
● MC_Power V3.0
● MC_Reset V3.0
● MC_Home V3.0

1408

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● MC_Stop V3.0
● MC_MoveAbsolute V3.0
● MC_MoveRelative V3.0
● MC_MoveVelocity V3.0
● MC_MoveJog V3.0
● MC_MoveSuperimposed V3.0
● MC_SetSensor V3.0 (S7-1500T)
● MC_MeasuringInput V3.0
● MC_MeasuringInputCyclic V3.0
● MC_AbortMeasuringInput V3.0
● MC_OutputCam V3.0
● MC_CamTrack V3.0
● MC_GearIn V3.0
● MC_GearInPos V3.0 (S7-1500T)
● MC_PhasingAbsolute V3.0 (S7-1500T)
● MC_PhasingRelative V3.0 (S7-1500T)
● MC_CamIn V3.0 (S7-1500T)
● MC_SynchronizedMotionSimulation V3.0 (S7-1500T)
● MC_InterpolateCam V3.0 (S7-1500T)
● MC_GetCamFollowingValue V3.0 (S7-1500T)
● MC_GetCamLeadingValue V3.0 (S7-1500T)
● MC_TorqueLimiting V3.0

Version V2.0
Innovations
Technology Version V2.0 contains the following new features:
● Synchronous axis technology object
● Gearing with "MC_GearIn"
● Superimposed positioning with "MC_MoveSuperimposed"
● Standardization of the "MC_Home.Mode" parameter for S7‑1200 Motion Control and
S7‑1500 Motion Control
● Simulation mode
● Support of safety functions of the drive

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1409

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion Control instructions
Technology Version V2.0 contains the following Motion Control instructions:
● MC_Power V2.0
● MC_Reset V2.0
● MC_Home V2.0
● MC_Halt V2.0
● MC_MoveAbsolute V2.0
● MC_MoveRelative V2.0
● MC_MoveVelocity V2.0
● MC_MoveJog V2.0
● MC_MoveSuperimposed V2.0
● MC_GearIn V2.0

Version V1.0
Motion Control instructions
Technology Version V1.0 contains the following Motion Control instructions:
● MC_Power V1.0
● MC_Reset V1.0
● MC_Home V1.0
● MC_Halt V1.0
● MC_MoveAbsolute V1.0
● MC_MoveRelative V1.0
● MC_MoveVelocity V1.0
● MC_MoveJog V1.0

Changing a technology version
Before you can access all the benefits of a new technology version, you need to change the
technology version for existing projects.

Changing a technology version
To change the technology version, follow these steps:
1. Replace the CPU in the project with a CPU with an appropriate higher version.
2. Open the program editor (e.g. by opening the OB1).
The technology objects and Motion Control instructions are highlighted in red after the CPU
is replaced.

1410

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. In the "Instructions" task card, select the appropriate higher technology version in the
"Technology > Motion Control" folder.
4. Save and compile the project.
The version of the technology objects and Motion Control instructions is changed to the
appropriate higher technology version during compilation of the project.
Pay attention to any error information that is displayed during compilation. Deal with the
causes of the errors indicated.
5. Check the configuration of the technology objects.

Resetting the "Mode" parameter of the Motion Control instruction "MC_Home"
When the technology version is changed from V1.0 to ≥ V2.0, the "MC_Home.HomingMode"
parameter (V1.0) is renamed to "MC_Home.Mode" (≥ V2.0). The assignment of the parameter
values is changed as well.
To reset the "MC_Home.Mode" parameter (V2.0), follow these steps:
1. To change the technology version, follow the instructions given above.
When compiling the project, the "MC_Home.HomingMode"parameter (V1.0) is renamed to
"MC_Home.Mode" (≥ V2.0):
– The assignment of the parameter values is changed. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and ≥ V2.0 is available in
section Version overview (Página 1399).
You can find additional information about the "MC_Home.Mode" parameter in the
description of the Motion Control instruction "MC_Home".
– The value configured at the "MC_Home.HomingMode" parameter (V1.0) is lost. As a
note on renaming, the following text is entered as the parameter value in the
"MC_Home.Mode" parameter (≥ V2.0).
"The interface has changed. You can find additional information in the description of the
Motion Control instruction "MC_Home".
– There is a message in the "Info > Compile" tab in the Inspector window stating that the
operand has the wrong data type.
2. Change the value of the "MC_Home.Mode" parameter (≥ V2.0) in your user program
according to the new assignment.
3. Save and compile the project.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1411

Control de movimiento
6.1 Using S7-1500 Motion Control

Replacing devices
You can replace an S7-1500 for an S7-1500T of the same design and vice versa. The behavior
with respect to functions and the existing configuration is different depending on what is being
replaced.
● S7-1500 ⇒ S7-1500T
The functions of the S7-1500 are expanded to include additional parameters for the
extended functions of the S7-1500T. The additional parameters are preassigned with
default values and must be configured appropriately.
● S7-1500T ⇒ S7-1500
– Extended functions are only supported by an S7-1500T and are no longer available after
a replacement with S7-1500.
– Unsupported function blocks are marked.
– Unsupported technology objects are displayed in an error message after compilation
and must be deleted.

6.1.1.4

Configuring

Adding and configuring drives in the device configuration
Adding and configuring a drive is described in the following section with the example of a
SINAMICS S120 drive. If you use a SINAMICS V90 PN or a SINAMICS drive with Startdrive,
you can find additional information in the following documentation.

Using SINAMICS V90 PN
To add and configure a SINAMICS V90 PN drive in the TIA Portal, you need the Hardware
Support Package HSP 0185 (SINAMICS V90 PN). Information on configuring a SINAMICS
V90 PN drive with SIMATIC S7-1500 in the TIA Portal is available in the Getting Started
"SIMATIC/SINAMICS First Steps SINAMICS V90 PN on S7-1500 Motion Control":
https://support.industry.siemens.com/cs/document/109739497 (https://
support.industry.siemens.com/cs/ww/en/view/109739497)

Using Startdrive
If you use a SINAMICS drive with Startdrive, you can find additional information in the hardware
catalog in the "Drives & Starter" folder. For additional information on connecting via Startdrive,
refer to:
● "Getting Started SINAMICS S120 in the Startdrive":
https://support.industry.siemens.com/cs/document/109747452 (https://
support.industry.siemens.com/cs/ww/en/view/109747452)
● Application example "Configuring an S120 with Startdrive":
https://support.industry.siemens.com/cs/ww/en/view/109743270 (https://
support.industry.siemens.com/cs/ww/en/view/109743270)

1412

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drives compatibility list
In the appendix (Página 1543) you can find an overview of drives that can be interconnected
with an S7-1500 CPU.

Adding and configuring PROFINET IO drives
Adding and configuring a PROFINET IO drive is described below with the example of a
SINAMICS S120 drive. Adding and configuring other PROFINET IO drives may differ from the
description in certain respects.
When you use a S7-1500C CPU you can use the inputs/outputs of the CPU as interface to the
drive.

Requirements
● The SIMATIC S7-1500 device is created in the project.
● The desired drive can be selected in the hardware catalog.
If the drive is not available in the hardware catalog, you must install the drive in the "Options"
menu as a device description file (GSD).

Adding a drive and telegram in the device configuration
1. Open the device configuration and change to the network view.
2. In the hardware catalog, open the folder "Additional field devices > PROFINET IO > Drives
> Siemens AG > SINAMICS".
3. Select the desired drive with the desired version, then drag it to the network view.
4. Assign the drive to the PROFINET interface of the CPU.
5. Open the drive in the device view.
6. Drag a Drive Object (DO) and a telegram from the hardware catalog and drop it onto a slot
of the device overview of the drive.
7. Make sure that the order of the telegrams in the device configuration and in the drive
parameter assignment are identical.
Depending on the version of the SINAMICS S120 drive, select "DO with telegram X", or "DO
Servo" and a "Telegram X" for the telegram.
Information on suitable telegrams can be found in the chapter "PROFIdrive telegrams" of the
documentation "S7-1500/S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/109766462)".
Repeat step 6, if you want to add another drive and another standard telegram.

Activating isochronous mode of the drive in the device configuration
PROFINET drives can always be operated in isochronous mode or clock synchronized mode.
Isochronous mode, however, increases the quality of the closed loop position control of the
drive and is therefore recommended for drives such as SINAMICS S120.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1413

Control de movimiento
6.1 Using S7-1500 Motion Control
To control the drive in isochronous mode, follow these steps:
1. Open the device view of the drive.
2. In the properties window, select the tab "PROFINET interface [X1] > Advanced options >
Isochronous mode".
3. Select the "Isochronous mode" check box in this tab.
The entry for the telegram also has to be selected for isochronous mode in the detailed view.

Interconnect the port of the CPU with the port of the drive
1. Open the topology view in the device configuration.
2. Interconnect the port of the drive as in the real configuration with the port of the CPU. At the
same time, note the rules for topology configuration.

Configure the CPU as the sync master and set isochronous mode
1. Select the device view of the CPU.
2. In the Properties window, select the tab "PROFINET interface [X1] > Advanced options >
Real-time settings > Synchronization".
3. Select "Sync master" from the "Synchronization role" drop-down list.
4. Click the "Domain settings" button.
5. Open the "Domain Management > Sync Domains" tab and set the desired "Send clock"
(isochronous clock).

Select drive in the configuration of the technology object
1. Add a new technology object axis, or open the configuration of an existing axis.
2. Open the configuration "Hardware interface > Drive".
3. Select from the "PROFIdrive" entry in the "Drive type" drop-down list.
4. Select the Drive Object of the PROFINET drive from the "Drive" list.
For information on how to add a technology object, refer to the section "Add technology object
(Página 1420)".

Result
The technology object is connected to the drive and the "MC-Servo" organization block can be
checked / configured.
The telegram of the configured drive is assigned to the "PIP OB Servo" process image.

Checking/configuring the properties of the "MC-Servo"
1. Open the "Program blocks" folder in the project navigator.
2. Select the "MC-Servo" organization block.

1414

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Select the "Properties" command in the shortcut menu.
4. Select the "Cycle time" entry in the area navigation.
5. The option "Synchronous to the bus" must be selected in the dialog box.
6. A "PROFINET IO system" must be selected in the "Source of the send clock" drop-down list.
7. The application cycle of "MC-Servo" must correspond to the send clock of the bus or be
reduced by an integral factor relative to the send clock of the bus.

Result
The PROFINET IO drive is configured in such a way that it can be controlled in isochronous
mode in the PROFINET IO network.
The properties of the SINAMICS drive must be configured according to the configuration of the
axis with the STARTER software or SINAMICS Startdrive.

Checking isochronous mode on the drive
If the configuration sequence described above is not adhered to during configuration of the
axis, and drive-specific errors occur when the project is compiled, the setting for isochronous
mode on the drive must be checked.
1. Open the device view of the drive.
2. Select standard telegram in the device overview.
3. Select the properties dialog "General > I/O Addresses".
4. The following settings apply for the input and output addresses:
– "Isochronous mode" is enabled.
– "MC-Servo" must be selected for the "Organization block".
– "PIP OB Servo" must be selected for the "Process image".

Consulte también
Add technology object (Página 1420)

Adding and configuring PROFIBUS DP drives
Adding and configuring a PROFIBUS drive is described below with the example of a SINAMICS
S120 drive. Adding and configuring other PROFIBUS drives may differ from the description in
certain respects.
When you use a S7-1500C CPU you can use the inputs/outputs of the CPU as interface to the
drive.

Requirements
● The SIMATIC S7-1500 device is created in the project.
● The desired drive can be selected in the hardware catalog.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1415

Control de movimiento
6.1 Using S7-1500 Motion Control
If the drive is not available in the hardware catalog, you must install the drive in the "Options"
menu as a device description file (GSD).

Adding a drive and telegram in the device configuration
1. Open the device configuration and change to the network view.
2. In the hardware catalog, open the folder "Additional Field Devices > PROFIBUS DP > Drives
> Siemens AG > SINAMICS".
3. Select the folder of the desired drive with the desired version, then drag the drive object to
the network view.
4. Assign the drive to the PROFIBUS interface of the CPU.
5. Open the drive in the device view.
6. Drag-and-drop a telegram from the hardware catalog onto a slot in the device overview of
the drive.
Information on suitable telegrams can be found in the chapter "PROFIdrive telegrams" of the
documentation "S7-1500/S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/109766462)".
If you want to add another drive and another telegram to the device overview, use the "Axis
disconnector" in the hardware catalog.

Activating isochronous mode of the drive in the device configuration
PROFIBUS drives can be operated in cyclic mode or isochronous mode. Isochronous mode,
however, increases the quality of the position control of the drive.
If you want to control the drive in isochronous mode, follow these steps:
1. Open the device view of the drive.
2. In the properties dialog, select the tab "General > Isochronous Mode".
3. Select the "Synchronize DP slave to constant DP bus cycle time" check box .

Setting isochronous mode
1. Select the network view.
2. Select the DP master system.
3. In the properties dialog, select the tab "General > Constant bus cycle time".
4. Select the desired "Constant DP bus cycle times".

Select drive in the configuration of the technology object
1. Add a new technology object axis, or open the configuration of an existing axis.
2. Open the configuration "Hardware interface > Drive".
3. Select from the "PROFIdrive" entry in the "Drive type" drop-down list.
4. Select the telegram of the PROFIBUS drive from the "Drive" list.

1416

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
For information on how to add a technology object, refer to the section "Add technology object
(Página 1420)".

Result
The technology object is connected to the drive and the "MC-Servo" organization block can be
checked/configured.
The telegram of the configured drive is assigned to the "PIP OB Servo" process image.

Checking/configuring the properties of the "MC-Servo"
1. Open the "Program blocks" folder in the project navigator.
2. Select the "MC-Servo" organization block.
3. Select the "Properties" command in the shortcut menu.
The "MC-Servo" dialog opens.
4. Select the "Synchronous to the bus" option under "General > Cycle time".
5. In the "Distributed I/O" drop-down list, select a "PROFIBUS DP-System".
The application cycle of "MC-Servo" must correspond to the send clock of the bus or be
reduced by an integral factor relative to the send clock of the bus.
You can select a drive connected to the CPU via a communications processor/communications
module (CP/CM) in the configuration of the technology object. You cannot select the DP master
system of the CP/CM as the source clock for MC-Servo [OB91].

Result
The PROFIBUS DP drive is configured in such a way that it can be controlled in isochronous
mode in the PROFIBUS network.
The properties of the SINAMICS drive must be configured according to the configuration of the
axis with the STARTER software or SINAMICS Startdrive.

Checking isochronous mode on the drive
If the configuration sequence described above is not adhered to during configuration of the
axis, and drive-specific error occurs when the project is compiled, isochronous mode can be
checked on the drive.
1. Open the device view of the drive.
2. Select the entry of the telegram in the device overview.
3. Select the properties dialog "General > I/O Addresses".
4. The following settings apply for the input and output addresses:
– "MC-Servo" must be selected for the "Organization block".
– "PIP OB Servo" must be select the "Process image".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1417

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Add technology object (Página 1420)

Adding and configuring drives with analog connections
A description is provided below of how to add and configure a drive with an analog drive
connection and an encoder. The connection is made, for example, as a positioning axis with an
incremental encoder and using a technology module in the rack of the CPU.
When you use a S7-1500C CPU you can use the inputs/outputs of the CPU as interface to the
drive.

Requirements
The SIMATIC S7-1500 device is created in the project.

Adding and configuring an analog output module in the device configuration
1. Open the device configuration of the CPU.
2. Select an analog output module from the hardware catalog and drag the module to the rack
of the CPU.
3. Select the analog output module in the device view.
4. Open the "General" tab in the properties dialog and select there "Name of the Analog Output
Module > I/O Addresses".
5. Enter the desired start address.
6. In the properties dialog, select the tab "General > IO Tags".
7. Enter the tag name for the desired analog output.

Adding and configuring a technology module
1. Switch to the device view of the CPU.
2. In the hardware catalog, open the folder "Technology module > Count > TM Count 2X24V".
3. Drag the counter module to a free slot in the rack.
– Technology version ≤ V4.0: When in use in the rack of the CPU, the technology module
cannot be operated in isochronous mode.
– Technology version ≥ V5.0: The clock synchronization is supported by the central
operation of the technological modules via the active backplane bus.
4. Select the technology module in the device view.
5. In the properties dialog, open the "General" tab and select "TM Count 2x24V > Channel x
> Operating mode" of the channel to be used.

1418

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
6. Select "Position input for Motion Control" option for "Selection of the operating mode for the
channel".
7. Under "Module parameters", adapt the parameters of the incremental encoder (steps per
revolution = increments per revolution).

Selecting the drive and encoder in the configuration of the technology object
1. Add a new positioning axis/synchronous axis technology object, or open the configuration
of an existing positioning axis/synchronous axis.
2. Open the configuration "Hardware interface > Drive".
3. Select "Analog drive connection" from the "Drive type" drop-down list.
4. Select the previously defined tag name of the analog output from the "Analog output" list.
5. Open the configuration "Hardware interface > Encoder".
6. Select the "Encoder" entry from the "Data connection" drop-down list.
7. Select the channel of the incremental encoder from the "encoder" list under "Local modules".
8. Open the configuration "Hardware interface > Data exchange with encoder > Fine
resolution" and enter the value "0" for "Bits in Gx_XIST1".
For information on how to add a technology object, refer to the section "Add technology object
(Página 1420)".

Result
The analog drive connection and the encoder connection are configured.
The analog addresses and the addresses of the TM module are assigned to the process image
"PIP OB Servo".

Checking the encoder connection/drive connection
The encoder data are applied to the position control cycle clock. If in doubt, check the following
settings:
1. Switch to the device view of the CPU.
2. Select the module technology.
3. Open the properties dialog "Basic Parameters > I/O Addresses".
4. The following settings apply for the input and output addresses:
– "MC-Servo" must be selected for the "Organization block".
– "PIP OB Servo" must be select the "Process image".
5. Select the analog module.
6. Open the properties dialog "Name of the Analog Module > I/O Addresses".
7. The settings from Step 4 apply for the input and output addresses

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1419

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Add technology object (Página 1420)

Configuration basics
Add technology object
The following describes how to add a technology object in the project tree.

Requirement
● A project with a CPU S7-1500 has been created.
● For the output cam, cam track, measuring input technology objects:
A speed axis, positioning axis, synchronous axis or external encoder technology object is
created in the project.

Procedure
To add a technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. Double-click "Add new object".
The "Add new object" dialog opens.
4. Select the required technology object. You can infer the function of the technology object
from the displayed description.
5. If you add output cams, cam tracks, measuring inputs to a technology object, select the
higher-level technology object in the "Axis or external encoder that is to be assigned".
6. In the "Name" input field, adapt the name to your requirements.
7. To change the suggested data block number, select the "Manual" option.
8. To add your own information about the technology object, click "Additional information".
9. To open the configuration after adding the technology object, select the "Add new and open"
check box.
10.To add the technology object, click "OK".

Result
The new technology object was created and created in the "Technology objects" folder in the
project tree.
If the "MC-Servo" and "MC-Interpolator" organizational units were not yet available, they were
added.

1420

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Copy technology object
You can copy a technology object in the following ways:
● Copying a technology object within a CPU
● Copying a technology object from a CPU S7‑1500 to a CPU S7-1500T
Additional parameters for the extended functions are preset with default values. You must
configure them appropriately.
● Copying a technology object from a CPU S7-1500T to a CPU S7‑1500
Additional parameters, which are not supported by the CPU S7‑1500, are reset to the
default values.
When you copy a technology object that has lower-level technology objects such as output
cams, cam tracks or measuring inputs, the lower-level technology object are also copied.
The following describes how to copy a technology object within a CPU. The procedure also
applies accordingly to the other copying methods mentioned.

Requirement
● A project with a CPU S7‑1500 has been created.
● You have created an technology object in the project.

Procedure
To copy a technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. If necessary, open the higher-level technology object.
4. Select the technology object to be copied.
5. Select "Copy" in the shortcut menu.
6. Select the "Technology objects" folder or the higher-level technology object.
7. Select "Paste" in the shortcut menu.

Result
The selected technology object, including lower-level technology objects, has been copied and
created in the "Technology objects" folder of the project tree.

Delete technology object
You can delete technology objects in the project tree.
When you delete a technology object that has lower-level technology objects such as output
cams, cam tracks or measuring inputs, the lower-level technology object are also deleted.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1421

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirement
● A project with a CPU S7-1500 has been created.
● You have created an technology object in the project.

Procedure
To delete a technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology objects" folder.
3. If necessary, open the higher-level technology object.
4. Select the technology object to be deleted.
5. Select the "Delete" command in the shortcut menu.
The "Confirm delete" dialog is opened.
6. To delete the technology object, click "Yes".

Result
The selected technology object has been deleted.

Consulte también
Compare values (Página 1423)

Working with the configuration editor
You configure the properties of a technology object in the configuration window. To open the
configuration window of the technology object in the project view, follow these steps:
1. Open the device "Technology objects" group in the project navigator.
2. Select the technology object and double-click on "Configuration".
The configuration is divided into categories which depend on the object type, for example, basic
parameters, hardware interface, extended parameters.

1422

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration editor icons
Icons in the area navigation of the configuration show additional details about the status of the
configuration:
Symbol

Description
The configuration contains default values and is complete.
The configuration contains only default values. With these default values you can use the
technology object without additional changes.
The configuration contains user-defined or automatically adapted values and is complete.
All input fields of the configuration contain valid values and at least one preset value has been
changed.
The configuration is incomplete or incorrect.
At least one input field or drop-down list contains an invalid value. The corresponding field or
the drop-down list is displayed on a red background. Click the field shows you the roll-out
error message that indicates the cause of error.

Compare values
If an online connection to the CPU is available, the "Monitor all" function
configuration of the technology object.

appears in the

The "Monitor all" function provides the following options:
● Comparison of configured start values of the project with the start values in the CPU and the
actual values
● Direct editing of actual values and the start values of the project
● Immediate detection and display of input errors with suggested corrections
● Backup of actual values in the project
● Transfer of start values of the project to the CPU as actual values
Nota
Differences between online and offline values
By adding or deleting technology objects that have a connection to other technology objects,
such as cams, cam tracks, measuring inputs or synchronized axes, differences can occur when
online and offline values are compared. These differences can be eliminated by re-compiling
the project and then uploading it to the CPU.

Icons and operator controls
If there is an online connection to the CPU, the actual values are displayed at the parameters.
In addition to the actual values of the parameters, the following symbols appear:
Symbol

Description
Start value in CPU matches the configured start value in project
Start value in CPU does not match the configured start value in project

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1423

Control de movimiento
6.1 Using S7-1500 Motion Control
Symbol

Description
Software error in lower-level component: The online and offline versions differ in at least
one lower-level software component.
The comparison of the Start value in CPU with the configured start value in project cannot
be performed.
Comparison of the online and offline values is not advisable.
Use this button to show the start value of the CPU and the start value of the project for the
respective parameter.

You can change the start value of the CPU directly and then download it to the CPU. For directly
editable parameters, the actual value can also be changed and the change will be transferred
directly to the CPU.

Configuring technological modules and onboard I/O for Motion Control
Use with Motion Control
You can use technology functions of technology modules and the onboard I/Os of the CPUs
listed below with Motion Control technology objects. To use the technology functions for Motion
Control, specific parameters of the I/O configuration and parameters of the configuration of the
technology object must be configured accordingly. Which parameters are relevant for the
function is described below. You can set additional parameters that are not listed here. The
description of the parameters is found in the documentation of the respective technology
module or the respective CPU.
The following technology modules support Motion Control functionalities:
S7-1500/ET 200MP
TM Count 2x24V (Página 1425)

ET 200 SP
1)

TM Count 1x24V (Página 1425)

Possible applications
1)

● Position detection for homing with zero mark
via PROFIdrive telegram

TM PosInput 2 (Página 1427) 1)

TM PosInput 1 (Página 1427) 1)

● Position detection for homing with zero mark
via PROFIdrive telegram

TM Timer DIDQ 16x24V (Pági‐
na 1429) 2)

TM Timer DIDQ 10x24V (Pági‐
na 1429) 2)

● Output of output cam and cam track for timecontrolled switching 2)
● Time-based position detection via measuring
input (time stamp recording) 2)

–

TM Pulse 2x24V (Página 1430) 1)

● Drive connection using PWM (pulse width
modulation)

TM PTO 4 (Página 1432) 3)

–

● Drive connection via PTO (Pulse Train
Output)
● Position detection with measuring input via
PROFIdrive telegram 2)

1)

Automatic data exchange for encoder values is supported

2)

Isochronous mode required

3)

Automatic data exchange for drive and encoder values is supported

1424

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following CPUs support Motion Control functionalities through their onboard I/O:
CPU

Possible applications

CPU 1511C-1 PN/CPU 1512C-1
PN (Página 1434) 1)

● Drive connection via PTO (Pulse Train Output)
● Drive connection using PWM (pulse width modulation)
● Encoder connection via HSC (High-speed counter)
● Position detection with measuring input via PROFIdrive telegram 2)

SIMATIC Drive Controller (Pági‐
na 1439)

● Output of output cam and cam track for time-controlled switching 2)
● Time-based position detection via measuring input (time stamp recording) 2)

1)

Automatic data exchange for drive and encoder values is supported

2)

Isochronous mode required

Isochronous mode
Isochronous mode is required for use with a measuring input, output cam or cam track.
Technology modules can be used centrally or distributed in the system. Clock synchronization
is supported in distributed operation with suitable PROFINET interface modules and in the
centralized operation with the active backplane bus.
The onboard technology I/Os (X142) of the SIMATIC Drive Controller support clock
synchronization.
Automatic data exchange for drive and/or encoder values
By selecting the check box for automatic data exchange, the drive and encoder parameters are
automatically applied in the CPU.
Alternatively, you can manually match, by drive and encoder type, the parameters described
and identified in the following table.
The following types are available for automatic data exchange:
● Offline
Select the check box if you want to transfer the offline values of the drive or encoder to the
configuration of the technology object in the project.
● Online
Select the check box if you want to transfer the effective values online in the drive or encoder
to the CPU during runtime. The drive and encoder parameters are transferred from the bus
after the (re)initialization of the technology object and (re)start of the drive, encoder or the
CPU.

TM Count 1x24V/TM Count 2x24V
For use with Motion Control, the following parameters must be configured:
Configuration
Technology module

Technology object

TM Count 1x24V/TM Count 2x24V
TM Count 1x24V/TM Count 2x24V > Channel 0/1 > Operating
mode

Axis and

external encoder

–

Select "Position detection for Motion Control technology ob‐
ject" mode

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1425

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM Count 1x24V/TM Count 2x24V

external encoder

TM Count 1x24V/TM Count 2x24V > Channel 0/1 > Module
parameters

Hardware interface > Encoder

–

Select "Encoder" data connection and the channel configured
for Motion Control on the technology module as encoder

Signal type

Select encoder type corresponding to configuration for tech‐
nology module

● Incremental encoder
–

● Incremental 1)
encoder

Axis: Hardware interface > Data exchange with

External encoder: Hardware interface > Data exchange
Telegram "DP_TEL83_STANDARD" is automatically selec‐
ted after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‐
rameters described and identified in this table.
Select rotary or linear measuring system type 1)
Signal evaluation
● Single
● Double

Select fine resolution corresponding to configuration on the
technology module 1)
● 0 = Single

● Quadruple

● 1 = Double

● Rotary type:
Enter increments per revolution

● Rotary type:
Enter increments per revolution corresponding to
configuration at technology module (1:1) 1)

● Linear type:
Configuration not relevant
–
● Rotary type:
Enter reference speed corresponding to configuration for
technology object (1:1)

● 2 = Quadruple

● Linear type:
Enter distance between increments 1)
drive

Axis: Hardware interface > Data exchange with the

Enter reference speed

● Linear type:
Configuration not relevant
–

1426

Homing

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM Count 1x24V/TM Count 2x24V

external encoder

Use the homing mode "Use zero mark via PROFIdrive tele‐
gram".

Select the homing signal for homing mark 0:
● Signal N of the incremental encoder

TM Count 1x24V as of V2.0

● DI0

The states of the digital inputs are displayed in the operating
mode "Position detection for Motion Control technology ob‐
ject" in the process image. The following bits are used for this
purpose:
● STS_DI0 (Status of DI0): ZSW2_ENC.Reserved_Bit11
● STS_DI1 (Status of DI1): ZSW2_ENC.Reserved_Bit10
● STS_DI2 (Status of DI2): ZSW2_ENC.Reserved_Bit8
To select one of the digital inputs use, for example, a PLC tag
of the data type "PD_TEL83_IN" with the input start address
of the desired channel of the module. The status word
"ZSW2_ENC" and the named bits can be found within the
created tag structure.

TM Count 2x24V > I/O addresses

–

The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
Process image: PIP OB servo
1)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"–" No configuration for technology module/technology object is required for these parameters

TM PosInput 1/TM PosInput 2
For use with Motion Control, the following parameters must be configured:
Configuration
Technology module

Technology object

TM PosInput 1 / TM PosInput 2
TM PosInput 1/2 > Channel 0/1 > Operating mode

Axis and

external encoder

–

Select "Position detection for Motion Control technology ob‐
ject" mode
TM PosInput 1/2 > Channel 0/1 > Module parameters

Hardware interface > Encoder

You set the parameters for the encoder signals of the channel
under "Module parameters" in the "Position input for Motion
Control" mode. The parameters must be set depending on the
encoder used.
The configuration of the encoder is required for use with an
SSI absolute encoder. Information on the configuration is
available in the documentation for the respective technology
module.
–

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Select "Encoder" data connection and the channel activated
and configured as encoder on the technology module

1427

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM PosInput 1 / TM PosInput 2
Signal type
● Incremental encoder
● Absolute encoder
–

external encoder

Select encoder type corresponding to configuration for tech‐
nology module:
● Incremental 1)
● Absolute/Cyclic absolute
encoder

Axis: Hardware interface > Data exchange with

External encoder: Hardware interface > Data exchange
Telegram "DP_TEL83_STANDARD" is automatically selec‐
ted after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‐
rameters described and identified in this table.
Select rotary or linear measuring system type 1)
Signal evaluation
● Single
● Double
● Quadruple

Select fine resolution corresponding to configuration on the
technology module 1)
● Incremental encoder:
–

0 = Single

–

1 = Double

–

2 = Quadruple

● Absolute encoder:
–
● Rotary type:
Enter increments per revolution
● Linear type:
Configuration not relevant
–
● Rotary type:
Enter reference speed corresponding to configuration for
technology object (1:1)

0 = Single

● Rotary type:
Enter increments per revolution corresponding to
configuration at technology module (1:1) 1)
● Linear type:
Enter distance between increments 1)
drive

Axis: Hardware interface > Data exchange with the

Enter reference speed

● Linear type:
Configuration not relevant
–

Homing

Select the homing signal for homing mark 0:

Use the homing mode "Use zero mark via PROFIdrive tele‐
gram".

● Signal N of the incremental encoder
● DI0

1428

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM PosInput 1 / TM PosInput 2
TM PosInput 1/2 > I/O addresses

external encoder

–

The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
1)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"–" No configuration for technology module/technology object is required for these parameters

Additional configuration for use with the technology object measuring input
Configuration
Technology module
TM PosInput 1 / TM PosInput 2

Technology object
Measuring input

TM PosInput 1/2 > Channel 0/1 > Operating mode

Hardware interface > Measuring input

Select operating mode "Position detection for Motion Control
technology object"

Measuring using PROFIdrive telegram (drive or external en‐
coder)

In the "Number of the measuring input" selection box, select
You set the parameters for the encoder signals of the channel "1" (measuring input 1).
under "Module parameters" in the operating mode "Position
input for Motion Control". The parameters must be set depen‐
ding on the encoder used.
TM PosInput 1/2 > Channel 0/1 > Module parameters

The configuration of the encoder is required for use with an
SSI absolute encoder. Please note the following information
in this regard. Information on the configuration is available in
the documentation for the respective technology module.

Nota
When a single-turn absolute encoder is used and two edges are to be measured
("MC_MeasuringInput.Mode" = 2, 3 or 4), the distance between the measured edges of the
Measurement input must be < 1 encoder revolution. Otherwise, use a multi-turn absolute
encoder.

TM Timer DIDQ 10x24V/TM Timer DIDQ 16x24V
You can operate the TM Timer DIDQ technology module centrally on an S7-1500 CPU or
decentrally on a distributed I/O. For use with a measuring input, output cam or cam track, the
technology module must be used decentrally and with isochronous mode.
For use with Motion Control, the following parameters must be configured:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1429

Control de movimiento
6.1 Using S7-1500 Motion Control
Use with output cam/cam track technology object
Configuration
Technology module

Technology object

TM Timer DIDQ 10x24V/TM Timer DIDQ 16x24V
Basic parameters

Output cam /

Cam track

–

Select desired number of outputs under channel configura‐
tion (ET 200MP TM Timer DIDQ 16x24V only)
Channel parameters

Hardware interface > Output cam output/output cam track

–

Activate output
Output via Timer DQ

Select "Timer DQ" mode for the respective output

Select output cam output

I/O addresses

–

Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
"–" No configuration for technology module/technology object is required for these parameters

Use with technology object measuring input
Configuration
Technology module

Technology object

TM Timer DIDQ 10x24V/TM Timer DIDQ 16x24V
Basic parameters

Measuring input
–

Select desired number of inputs under channel configuration
Channel parameters

Hardware interface > Measuring input

Configuration of DI group: Use inputs individually

–

Select "Timer DI" mode for the respective input

Select measuring via timer DI

–

Select measuring input

Select application-dependent input delay

–

I/O addresses
Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the input confi‐
guration at the technology object.
"–" No configuration for technology module/technology object is required for these parameters

TM Pulse 2x24V
For use with Motion Control, the parameters described below must each be configured:

1430

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive connection using PWM (pulse width modulation)
Configuration
TM Pulse 2x24V

Technology object
Axis

TM Pulse 2x24V > Channel configuration

–

Select if you want to use 1 or 2 channels.
TM Pulse 2x24V > Channel > Operating mode
Select "Pulse width modulation PWM" or "PWM with DC mo‐
tor" operating mode
TM Pulse 2x24V > Channel > Parameters

Hardware interface > Drive

Select "S7 analog output" output format

Select analog drive connection
For the selection of the analog output, create a PLC tag of the
"Int" type with corresponding address. The offset for the PLC
tag to the start address is 2.
To activate the output of the PWM signal, set the following two
bits of the control interface of the PWM channel in the user
program:
● SW_ENABLE (= Bit 0 in Byte 9)
● TM_CTRL_DQ (= Bit 1 in Byte 9)
The offset for byte 9 to the start address of the PWM channel
is 9.

TM Pulse 2x24V > Channel > I/O addresses

–

Select the organization block "MC-Servo" for the input and
output addresses. The "TPA OB Servo" process image is se‐
lected automatically for the input and output addresses by
selecting the organization block.
"–" No configuration for technology object is required for these parameters

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1431

Control de movimiento
6.1 Using S7-1500 Motion Control

TM PTO 4
For use with Motion Control, the following parameters must be configured.
Configuration
Technology module

Technology object

TM PTO 4
TM PTO 4 > Channel configuration

Axis
–

Configure the number of channels (1 to 4) you want to use.
TM PTO 4 > Channel 0…3 > Operating mode
Select signal type:
● PTO (pulse (P) and direction (D))
● PTO (count up (A) and count down (B))
● PTO (A, B phase-shifted)
● PTO (A, B phase-shifted - quadruple)
Select signal interface:
● RS422, symmetrical/TTL (5V), asymmetrical
● 24V asymmetric
Configure the interpulse pause for direction reversal.
–

Hardware interface > Drive
Select drive type "PROFIdrive" and "Drive" data connection.
Select the pulse output configured at the technology module
as drive.
Hardware interface > Encoder
The encoder of the actuator telegram (simulated encoder) is
automatically selected. Alternatively, an existing encoder in‐
terface can be selected.

TM PTO 4 > Channel 0...3 > Diagnostic interrupts

-

When the "Enable diagnostic interrupts" check box is selec‐
ted, diagnostic interrupts are activated if:
● No supply voltage
● Errors occur at digital outputs
The detected error is displayed for the respective channel
with feedback bit "Fault_Present" and "Sensor_Error".
TM PTO 4 > Channel 0…3 > Axis parameters

Data exchange with the drive

–

Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the drive.
Clear check box "Automatic data exchange for drive values
(online)"
Select check box "Automatic data exchange for drive values
(offline)"
If the check box is cleared, you can manually match the pa‐
rameters described and identified in this table.

Enter reference speed corresponding to configuration for
technology object (1:1)

1432

Enter reference speed of the drive 1)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object

TM PTO 4

Axis

Enter maximum speed corresponding to configuration for
technology object (1:1)

Enter maximum speed of the drive 1)

–

Data exchange with encoder

If the maximum speed is exceeded, technology alarm 102 is
triggered and displayed.
Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‐
rameters described and identified in this table.
Select rotary measuring system type 2)

Enter increments per revolution

Enter increments per revolution corresponding to configura‐
tion at technology module (1:1) 2)

Configure fine resolution

Select fine resolution corresponding to configuration on the
technology module 2)

● 0 = Single
● 2 = Quadruple
Configure stop behavior

● 0 = Single
● 2 = Quadruple
–

● Quick stop time
● Ramp stop time
TM PTO 4 > Channel 0…3 > Hardware inputs/outputs

–

If you want to use a hardware output to enable the drive, se‐ No setting required at the technology object. The output is
lect the "Use drive enable" check box. Next select one of the automatically controlled by the "MC_Power".
two hardware outputs DQ0 or DIQ2.
Homing
Activate the hardware input (DI0) for the reference cam.
Select the edge of the hardware input for triggering the refe‐
rence cam function.
When using a measuring input, select the "Use DI1 check box
as measuring input".

Use the homing mode "Use zero mark via PROFIdrive tele‐
gram".
"Measuring input > Configuration > Hardware interface" tech‐
nology object
Select the measuring input type "Measuring via PROFIdrive
telegram (drive or external encoder)".
Select the measuring input "1" under hardware connection.

Select the "Use "drive ready"" check box. In the ""Drive ready" No setting required at the technology object. When the input
input", select the hardware input that is to be used to display is used, "MC_Power" waits until the input signal is present
whether the drive is ready.
before it sets the drive enable.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1433

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object

TM PTO 4

Axis

Configuring input delay

–

TM PTO 4 > Channel 0…3 > Sign-of-life error
Configure tolerated number of sign-of-life errors
TM PTO 4 > I/O addresses
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the PTO channel for the tech‐
nology object.
1)

Parameters are automatically applied when "Automatic data exchange for drive values (offline)" is selected

2)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"–" No configuration required for these parameters at the technology module/technology object

CPU 1511C-1 PN/CPU 1512C-1 PN (onboard I/O devices)
For use with Motion Control, the parameters described below must be configured.

Drive connection via PTO (Pulse Train Output)
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Ge‐
neral

–

To activate a channel for PTO mode, select one of the follo‐
wing operating modes:
● PTO (pulse (A) and direction (B))
● PTO (count up (A), count down (B))
● PTO (A,B phase shifted)
● PTO (A,B phase shifted, quadruple)
–

Hardware interface > Drive
Select drive type "PROFIdrive" and "Drive" data connection.
Select the pulse generator of the CPU configured for PTO
mode as drive.
Hardware interface > Encoder
The encoder of the actuator telegram (simulated encoder) is
automatically selected. Alternatively, an existing encoder in‐
terface can be selected.

Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Axis
parameters

Hardware interface > Data exchange with the drive

–

Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the drive.
Clear check box "Automatic data exchange for drive values
(online)"

1434

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis
Select check box "Automatic data exchange for drive values
(offline)"
If the check box is cleared, you can manually match the pa‐
rameters described and identified in this table.

Enter reference speed corresponding to configuration for
technology object (1:1)

Enter reference speed of the drive 1)

Enter reference speed corresponding to configuration for
technology object (1:1)

Enter maximum speed of the drive 1)

–

If the maximum speed is exceeded, technology alarm 102 is
triggered and displayed.
Hardware interface > Data exchange with encoder
Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‐
rameters described and identified in this table.
Select rotary measuring system type 2)

Enter increments per revolution

Enter increments per revolution corresponding to configura‐
tion for CPU (1:1) 2)

The fine resolution has the fixed value "0 bit" (= single) and
cannot be changed.

Enter the fine resolution corresponding to the configuration on
the CPU 2)
Bits in incr. actual value (G1_XIST1): 0 (= single)

Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Hard‐ Homing
ware inputs/outputs
Use the homing mode "Use zero mark via PROFIdrive tele‐
In addition, configure the input delay for the selected hardwa‐ gram" for drive connection via PTO.
re input. You configure the input delay in the device configu‐
ration at the corresponding DI channel (DI 16/DQ 16 > In‐
puts > Channel > Input parameters > Input delay).
Select the hardware input for the reference switch

Select the edge of the hardware input for triggering the refe‐
rence output cam function.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1435

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

When using a measuring input, select the hardware input of
the measuring input. The following table includes the confi‐
guration description.

–

Select the hardware input that is used to display whether the
drive is ready.
In addition, configure the input delay for the selected hardwa‐
re input. You configure the input delay in the device configu‐
ration at the corresponding DI channel (DI 16/DQ 16 > In‐
puts > Channel > Input parameters > Input delay).
With selected "PTO (pulse (A) and direction (B))" mode, the
hardware output for the PTO signal A ("Pulse output (A)") is
automatically selected through the device configuration and
cannot be changed. For PTO signal B ("Direction output (B)")
select one of the hardware outputs offered in the selection
box.
The hardware outputs for the PTO signals are selected
through the device configuration for the following operating
modes and cannot be changed:
● PTO (count up (A), count down (B))
● PTO (A,B phase shifted)
● PTO (A,B phase shifted, quadruple)
Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > I/O
addresses
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the PTO channel for the tech‐
nology object.
1)

Parameters are automatically applied when "Automatic data exchange for drive values (offline)" is selected

2)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"–" No configuration for CPU/technology object is required for these parameters

Additional configuration for use with the technology object measuring input
Configuration
Technology module
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Measuring input

Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Hard‐ Hardware interface > Measuring input
ware inputs/outputs
Measuring using PROFIdrive telegram (drive or external en‐
In addition, configure the input delay for the selected hardwa‐ coder)
re input. You configure the input delay in the device configu‐ In the "Number of the measuring input" selection box, select
ration at the corresponding DI channel (DI 16/DQ 16 > In‐
"1" (measuring input 1).
puts > Channel > Input parameters > Input delay).
Select the hardware input of the measuring input.

1436

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive connection using PWM (pulse width modulation)
Note that only travel in the positive direction is possible with a drive connection using the
integrated PWM function of the compact CPU.
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Speed axis

Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Ge‐
neral

–

Select "Pulse width modulation PWM" mode
Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Hard‐
ware inputs/outputs
Select the hardware output to be used for pulse output.
Select whether the set hardware output is to work as a fast
push-pull switch or as P switch.
Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > Pa‐
rameters

Hardware interface > Drive

Select "S7 analog output" output format

Select analog drive connection
For the selection of the analog output, create a PLC tag of the
"Int" type with corresponding address. The offset for the PLC
tag of the control interface of the PWM channel is 2.
To activate the output of the PWM signal, set the following two
bits of the control interface of the PWM channel in the user
program:
● SW_ENABLE (= Bit 0 in Byte 9)
● TM_CTRL_DQ (= Bit 1 in Byte 9)
The offset for byte 9 to the start address of the PWM channel
is 9.

Select minimum pulse width of 0 μs

–

Select required period duration (e.g. 100 μs)
Pulse generators (PTO/PWM) > PTO1…4/PWM1…4 > I/O
addresses
Select the organization block "MC-Servo" for the input and
output addresses. The "TPA OB Servo" process image is se‐
lected automatically for the input and output addresses by
selecting the organization block.
"–" No configuration for technology object is required for these parameters

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1437

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder connection via HSC (High-speed counter)
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

High-speed counter (HSC) > HSC 1…6
> General > Enable

External encoder

–

–

High-speed counter (HSC) > HSC 1…6
> Basic parameters > Module parame‐
ters

Hardware interface > Encoder

Hardware interface > Encoder

–

Select "Encoder" data connection and
the high-speed counter activated and
configured as encoder on the CPU

Select "Encoder" data connection and
the high-speed counter activated and
configured as encoder on the CPU

Signal type

Select encoder type according to the de‐ Select encoder type according to the de‐
vice configuration of the CPU 1)
vice configuration of the CPU 1)

Enable high-speed counter
High-speed counter (HSC) > HSC 1…6
> Basic parameters > Operating mode
Select "Position input for Motion Con‐
trol" mode

● Incremental encoder
–

● Incremental

● Incremental

Hardware interface > Data exchange
with encoder

Hardware interface > Data exchange

Telegram "DP_TEL83_STANDARD" is
automatically selected after the selec‐
tion of the encoder.

Telegram "DP_TEL83_STANDARD" is
automatically selected after the selec‐
tion of the encoder.

Clear the check box "Automatic data ex‐ Clear the check box "Automatic data ex‐
change for encoder values (online)"
change for encoder values (online)"
Select the check box "Automatic data
exchange for encoder values (offline)"

Select the check box "Automatic data
exchange for encoder values (offline)"

If the check box is cleared, you can ma‐ If the check box is cleared, you can ma‐
nually match the parameters described nually match the parameters described
and identified in this table.
and identified in this table.
Select rotary measuring system type 1)

Select rotary measuring system type 1)

Enter fine resolution according to the
configured signal evaluation set for the
high-speed counter (HSC) 1)

Enter fine resolution according to the
configured signal evaluation set for the
high-speed counter (HSC) 1)

● 0 = Single

● 0 = Single

● 1 = Double

● 1 = Double

● 2 = Quadruple

● 2 = Quadruple

Enter increments per revolution

Enter increments per revolution corres‐
ponding to device configuration for CPU
(1:1) 1)

Enter increments per revolution corres‐
ponding to device configuration for CPU
(1:1) 1)

–

Hardware interface > Data exchange
with the drive

–

Signal evaluation
● Single
● Double
● Quadruple

Enter reference speed corresponding to Enter reference speed
configuration for technology object (1:1)
–

1438

Homing

Homing

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

Select the homing signal for homing
mark 0:

External encoder

Use the homing mode "Use zero mark
via PROFIdrive telegram".

Use the homing mode "Use zero mark
via PROFIdrive telegram".

–

–

● Signal N of the incremental encoder
● DI0 (can be set with the hardware
inputs/outputs)
In addition, configure the input delay
for the selected hardware input. You
configure the input delay in the
device configuration at the
corresponding DI channel (DI 16/
DQ 16 > Inputs > Channel > Input
parameters > Input delay).
High-speed counter (HSC) > HSC 1…6
> I/O addresses
The organization block ("MC-Servo")
and the process image ("TPA OB Ser‐
vo") are selected automatically for the
input and output addresses by selecting
the HSC channel for the technology ob‐
ject.
1)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"–" No configuration for CPU/technology object is required for these parameters

Additional configuration for use with the technology object measuring input
Configuration
Technology module
CPU 1511C-1 PN/CPU 1512C-1 PN
High-speed counter (HSC) > HSC 1…6 > Hardware inputs/
outputs

Technology object
Measuring input
Hardware interface > Measuring input

Measuring using PROFIdrive telegram (drive or external en‐
In addition, configure the input delay for the selected hardwa‐ coder)
re input. You configure the input delay in the device configu‐ In the "Number of the measuring input" selection box, select
ration at the corresponding DI channel (DI 16/DQ 16 > In‐
"1" (measuring input 1).
puts > Channel > Input parameters > Input delay).
Select the hardware input of the measuring input.

SIMATIC Drive Controller (onboard I/O)
You can use the inputs and outputs of interface X142 of a SIMATIC Drive Controller as
measuring input for the measuring input technology object, as well as for the output cam/cam
track technology object.
Isochronous mode is required for use with a measuring input, output cam or cam track.
For use with Motion Control, the following parameters must be configured:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1439

Control de movimiento
6.1 Using S7-1500 Motion Control
Use with output cam/cam track technology object
Configuration
SIMATIC Drive Controller

Technology object
Output cam /

Cam track

Channel parameters > Channel 0 to 7

Hardware interface > Output cam output/output cam track

–

Activate output
Output via Timer DQ

Select desired channel and select operating mode "Timer
DQ".

Select output cam output

I/O addresses

–

Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
"–" No configuration at the SIMATIC Drive Controller/technology object is required for these parameters

Use with measuring input technology object
Configuration
SIMATIC Drive Controller

Technology object
Measuring input

Channel parameters > Channel 0 to 7

Hardware interface > Measuring input

–

Select measuring via timer DI

Select desired channel and select operating mode "Timer DI" Select measuring input
I/O addresses

–

Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the input confi‐
guration at the technology object.
"–" No configuration at the SIMATIC Drive Controller/technology object is required for these parameters

Connect drive/encoder via data block
Creating the data block for data connection
1. Create a new data block of type "Global DB".
2. Select the data block in the project tree and select "Properties" from the shortcut menu.
3. Disable the following attributes under Attributes and accept the change with "OK":
– "Only store in load memory"
– "Data block write-protected in the device"
– "Optimized block access" for technology version < V4.0

1440

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
4. Open the data block in the block editor.
5. Insert a tag structure of type "PD_TELx" textually in the block editor.
This tag structure contains the "Input" tag structure for the input area of the telegram and the
"Output" tag structure for the output area of the telegram.
Nota
"Input" and "Output" relate to the view of the closed loop position control. For example, the input
area contains the actual values of the drive and the output area contains the setpoints for the
drive.
The data block may contain the data structures of multiple axes and encoders and other
contents.

Configuring data connection via a data block
1. Open the configuration window "Hardware interface > Drive" or "Hardware interface >
Encoder".
2. Select the entry "Data block" from the "Data block" drop-down list.
3. In the "Data block" field, select the previously created data block.
Open this data block and select the tag name defined for the drive and encoder.

Programming MC-PreServo and MC-PostServo
1. Assign the previously defined PLC tag of the input range of the data block to MC-PreServo .
2. Assign the previously defined PLC tag of the output range of the data block to MCPostServo.
ATENCIÓN
Machine damage
Improper manipulation of drive and encoder telegrams may result in unwanted drive motions.
Check your user
program for consistency in the drive and encoder connection.
An application example for the use of MC-PreServo and MC-PostServo is available at:
https://support.industry.siemens.com/cs/document/109741575 (https://
support.industry.siemens.com/cs/ww/en/view/109741575)

Consulte también
PROFIdrive telegrams (Página 1555)
Data connection drive/encoder via data block (Página 1570)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1441

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameter view
The Parameter view provides you with a general overview of all relevant parameters of a
technology object. You obtain an overview of the parameter settings and can easily change
them in offline and online mode.



①
②
③
④







Navigation (Página 1444)
Toolbar (Página 1443)
Parameter table (Página 1444)
"Parameter view" tab

Function scope
The following functions are available for analyzing the parameters of the technology objects
and for enabling targeted monitoring and modification.
Display functions:
● Display of parameter values in offline and online mode
● Display of status information of the parameters
● Display of value deviations and option for direct correction
● Display of configuration errors
● Display of value changes as a result of parameter dependencies
● Display of all memory values of a parameter: Start value PLC, Start value in project, Monitor
value
● Display of the parameter comparison of the memory values of a parameter
Operator control functions:
● Navigation for quickly changing between the parameters and parameter structures.
● Text filter for faster searches for particular parameters.
● Sorting function for customizing the order of parameters and parameter groups to
requirements.

1442

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● Memory function for backing up structural settings of the Parameter view.
● Monitoring and modifying of parameter values online.
● Function for saving a snapshot of parameter values of the CPU in order to capture
momentary situations and to respond to them.
● Function for applying a snapshot of parameter values as start values.
● Download of modified start values to the CPU.
● Comparison functions for comparing parameter values with one another.

Structure of the parameter view
Toolbar
The following functions can be selected in the toolbar of the parameter view.
Symbol

Function

Explanation

Monitor all

Starts monitoring of the visible tags in the active
table.

Select navigation structure

Toggle between function-based navigation and the
view of the data structure of the technology data
block.

Couples the function view and
parameter view for the objects
selected in the navigation

Enables the targeted toggling between the para‐
meter view and function-based view.

Collapse/expand all nodes and
objects

Collapses or expands all nodes and objects of the
navigation or the data structure in the currently ac‐
tive view.

Collapse/expand the nodes be‐
low the marked nodes

Collapses or expands the marked nodes and ob‐
jects of the navigation or the data structure in the
currently active view.

Text filter...

After entry of a character string: Display of all para‐
meters containing the entered string in one of the
currently visible columns.

Selection of compare values

Selection of parameter values that are to be com‐
pared with one another in online mode (Start value
in project, Start value PLC)
Only in online mode.

Save window settings

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Saves your display settings for the Parameter view
(e.g. selected navigation structure, activated table
columns, etc.)

1443

Control de movimiento
6.1 Using S7-1500 Motion Control

Navigation
Within the "Parameter view" tab, the following alternative navigation structures can be selected.
Navigation

Explanation

Functional naviga‐
tion

In the functional navigation, the structure of the parameters is based
on the structure in the configuration window ("Function view" tab),
commissioning window and diagnostics window.

Data structure

In the "Data structure" navigation, the structure of the parameters is
based on the structure of the technology data block.

You can use the "Select navigation structure" drop-down list to toggle the navigation structure.

Parameter table
The table below shows the meaning of the individual columns of the parameter table. You can
show or hide the columns as required.
Column

Explanation

Name in function
view

Name of the parameter in the function view.

Name in DB

Name of the parameter in the technology data block.

Offline

Online

X

X

X

X

X

X

The display field is empty for parameters that are not confi‐
gured via the technology object.
If the parameter is part of a structure or UDT, the prefix "../" is
added.
The display field is empty for parameters that are not contai‐
ned in the technology data block.

Full name in DB

Complete path of the parameter in the instance data block.
The display field is empty for parameters that are not contai‐
ned in the technology data block.

Status of configu‐
ration

Display of the completeness of the configuration using status
symbols.

X

-

Compare result

Result of the "Compare values" function.

-

X

X

X

X

X

This column is displayed when there is an online connection.
Start value in pro‐
ject

Configured start value in project.

Default value

Value that is pre-assigned to the parameter.

Error indication if entered values have a syntax or processrelated error.
The display field is empty for parameters that are not contai‐
ned in the technology data block.

1444

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Column

Explanation

Start value PLC

Start value in the CPU.

Offline

Online

-

X

-

X

-

X

X

X

X

X

Designates the parameter as a setpoint. These parameters
can be initialized online.

X

X

Data type of the parameter.

X

X

X

X

This column is displayed when there is an online connection.
Monitor value

Current value in the CPU.
This column is displayed when there is an online connection.

Modify value

Value that is to be used to change the monitor value.
This column is displayed when there is an online connection.

Minimum value

Minimum process-related value of the parameter.
If the minimum value is dependent on other parameters, it is
defined:
● Offline: by the start value in the project.
● Online: by the monitor values.

Maximum value

Maximum process-related value of the parameter.
If the maximum value is dependent on other parameters, it is
defined:
● Offline: by the start value in the project.
● Online: by the monitor values.

Setpoint
Data type

The display field is empty for parameters that are not contai‐
ned in the technology data block.
Retain

Designates the value as a retentive value.
The values of retentive parameters are retained even after
the voltage supply is switched off.

Accessible from
HMI

Indicates whether the HMI can access this parameter during
runtime.

X

X

Visible in HMI

Indicates whether the parameter is visible in the selection list
of the HMI by default.

X

X

Comment

Brief description of the parameter.

X

X

X This function is visible in offline/online mode.
- This function is not visible in offline/online mode.

Opening the parameter view
Requirement
The technology object was added in the project navigator.

Procedure
1. Open the "Technology objects" folder in the project tree.
2. Open the technology object in the project tree.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1445

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Double-click the "Configuration" object.
4. Select the "Parameter view" tab in the top right corner.

Result
The Parameter view opens. Each displayed parameter is represented by one row in the
parameter table.
The displayable parameter properties (table columns) vary depending on whether you are
working with the Parameter view in offline or online mode.
In addition, you can selectively display and hide individual table columns.

Working with the parameter view
The following table provides an overview of the functions of the Parameter view in online and
offline mode described below:
Function/action

Offline

Online

Filtering the parameter table (Página 1446)

X

X

Sorting the parameter table (Página 1447)

X

X

Transferring parameter data to other editors (Página 1448)

X

X

Indicating errors (Página 1448)

X

X

Editing start values in the project (Página 1448)

X

X

Monitoring values online in the parameter view (Página 1449)

-

X

Modifying values (Página 1450)

-

X

Comparing values (Página 1451)

-

X

X This function is possible in offline/online mode.
- This function is not possible in offline/online mode.

Filtering the parameter table
You can filter the parameters in the parameter table in the following ways:
● With the text filter
● With the subgroups of the navigation
Both filter methods can be used simultaneously.

With the text filter
The text filter can only be use on texts in displayed parameter lines and displayed columns.
To work with the text filter, follow these steps:
1. To filter a desired character string, enter it in the "Text filter..." input box.
The parameter table displays only the parameters containing the character string.

1446

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
To reset text filtering, the following options are available:
● Select another parameter group in the navigation.
● Switch between data navigation and functional navigation, or vice versa.

With the subgroups of the navigation
To filter the navigation with the subgroups, follow these steps:
1. Click the desired parameter group in the navigation, e.g., "Static".
The parameter table now only shows the "static" parameters. You can select further
subgroups for some groups of the navigation.
2. If all parameters are to be shown again, click "All parameters" in the navigation.

Sorting the parameter table
The values of the parameters are arranged in rows. The parameter table can be sorted by any
displayed column.
● In columns containing numerical values, sorting is based on the magnitude of the numerical
value.
● In text columns, sorting is alphabetical.

Sort column-by-column
1. Position the cursor in the header cell of the desired column.
The background of this cell turns blue.
2. Click the column header.

Result
The entire parameter table is sorted by the selected column. A triangle with tip facing up
appears in the column header.
Clicking the column header again changes the sorting as follows:
Symbol

Description

▲

Parameter table is sorted in ascending order.

▼

Parameter table is sorted in descending order.

No symbol

The sorting is removed again. The parameter table shows the default display.

The "../" prefix in the "Name in DB" column is ignored when sorting.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1447

Control de movimiento
6.1 Using S7-1500 Motion Control

Transferring parameter data to other editors
You can paste parameters of the parameter view in the following editors:
● Program editor
● Watch table
● Signal table for Trace
The following options are available for pasting:
● Drag-and-drop
● <Ctrl+C>/<Ctrl+V>
● Copy/Paste via shortcut menu

Indicating errors
Error display
Parameter assignment errors that result in compilation errors (e.g. limit violation) are indicated
in the Parameter view.
Every time a value is entered in the Parameter view, a check is made for process-related and
syntax errors and displayed with the following indicators:
● Red error symbol in the "Status of configuration" (offline mode) or "Compare result" (online
mode, depending on the selected comparison type) columns
● Table field with red background
If you click the bad field, a roll-out error message appears with information of the permissible
value range or the required syntax (format)

Compilation error
From the error message of the compiler, you can directly open the Parameter view (functional
navigation) containing the parameter causing the error in situations where the parameter is not
displayed in the configuration window.

Editing start values in the project
With the Parameter view, you can edit the start values in the project in offline mode and online
mode.
● You make value changes in the "Start value in project" column of the parameter table.
● In the "Status of configuration" column of the parameter table, the progress of the
configuration is indicated by the familiar status symbols from the configuration window of the
technology object.

1448

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Boundary conditions
● If other parameters depend on the parameter whose start value was changed, the start
value of the dependent parameters are also adapted.
● If a parameter of a technology object is not editable, it is also not editable in the parameter
view. The ability to edit a parameter can also depend on the values of other parameters.

Defining new start values
To define start values for parameters in the Parameter view, follow these steps:
1. Open the Parameter view of the technology object.
2. Enter the desired start values in the "Start value in project" column. The value must match
the data type of the parameter and must not exceed the value range of the parameter.
The limits of the value range can be seen in the "Maximum value" and "Minimum value"
columns.
The "Status of configuration" column indicates the progress of the configuration with colored
symbols.
Following adaptation of the start values and downloading of the technology object to the CPU,
the parameters take the defined value at startup if they are not declared as retentive ("Retain"
column).

Error display
When a start value is input, a check is made for process-related and syntax errors and the result
is indicated.
Bad start values are indicated by:
● Red error symbol in the "Status of configuration" (offline mode) or "Compare result" (online
mode, depending on the selected comparison type) columns
and/or
● Red background in the "Start value in project" field
If you click on the bad field, a roll-out error message appears with information of the
permissible value range or the necessary syntax (format)

Correcting bad start values
1. Correct bad start values using information from the roll-out error message.
Red error symbol, red field background, and roll-out error message are no longer displayed.
The project cannot be successfully compiled unless the start values are error-free.

Monitoring values online in the parameter view
You can monitor the values currently taken by the parameters of the technology object in the
CPU (monitor values) directly in the Parameter view.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1449

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirements
● There is an online connection.
● The technology object is downloaded to the CPU.
● The Parameter view of the technology object is open.

Procedure
As soon as the Parameter view is online, the following columns are additionally displayed:
● Compare result
● Start value PLC
● Monitor value
● Modify value
● Selection for transmission
The "Monitor value" column shows the current parameter values on the CPU.

Display
All columns that are only available online are displayed in color as follows:
Color

Description
The values are modifiable.
These values cannot be changed.

Consulte también
Parameter table (Página 1444)

Modifying values
With the Parameter view, you can modify values of the technology object in the CPU. You can
assign values to a parameter once (Modify value) and modify them immediately. The modify
request is executed as quickly as possible without reference to any particular point in the user
program.
PELIGRO
Danger when modifying
Changing the parameter values while the plant is operating may result in severe damage to
property and personal injury in the event of malfunctions or program errors.
Make sure that dangerous states cannot occur before you use the "Modify" function.

1450

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirements
● There is an online connection.
● The technology object is downloaded to the CPU.
● The Parameter view of the technology object is open.
● The parameter is modifiable. (Associated field in the "Modify value" column has a
corresponding background).

Procedure
To modify values immediately, follow these steps:
1. Enter the desired modify value in the "Modify values" column of the parameter table.
The parameter is modified once and immediately with the specified value. You can monitor
the value in the "Monitor values" column. The check box for modifying in the "Selection for
transmission" column is automatically cleared after the modify request is complete.

Error display
When a modify value is input, a check is made immediately for process-related and syntax
errors and the result is indicated.
You can recognize incorrect modify values as follows:
● The field "Modify value" is displayed with red background color.
● If you click in the incorrect field, a roll-out error message appears with information on the
permissible value range or the necessary syntax.

Bad modify values
● Modify values with process-related errors can be transmitted.
● Modify values with syntax errors cannot be transmitted.

Comparing values
You can use comparison functions to compare the following memory values of a parameter:
● Start value in project
● Start value PLC

Requirements
● There is an online connection.
● The technology object is downloaded to the CPU.
● The Parameter view of the technology object is open.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1451

Control de movimiento
6.1 Using S7-1500 Motion Control

Procedure
To compare the start values on the various target systems, follow these steps:
1. Click the "Selection of compare values" icon
.
A selection list containing the comparison options opens:
– Start value in project - Start value in CPU (default setting)
2. Select the desired comparison option.
The selected comparison option is executed as follows:
– A scales symbol appears in the header cells of the two columns selected for comparison.
– Symbols are used in the "Compare result" column to indicate the result of the
comparison of the selected columns.

Symbol in "Compare result" column
Symbol

Meaning
The compare values are equal and error-free.
The compare values are not equal and error-free.
At least one of the two compare values has a process-related or syntax error.
The comparison cannot be performed. At least one of the two comparison values is not
available (e.g. snapshot).

Symbol in the navigation
The symbols are shown in the same way in the navigation if the compare result applies to at
least one of the parameters below the displayed navigation structure.

6.1.1.5

Programming
The "Programming" section contains general information on supplying and evaluating the
Motion Control instructions and on the technology data block.
You can use Motion Control instructions in the user program to assign jobs to the technology
object. You define the job using the input parameters of the Motion Control instructions. You
can track the current job status using the job parameters if you use a separate instance for each
Motion Control instruction per technology object.
In a typical programming, you can use one or more instances for each Motion Control
instruction for each technology object.
The use of a separate instance per technology object is always necessary for Motion Control
instructions without parameter "DONE" and for the Motion Control instruction "MC_MoveJog".
Only one instance per technology object may be active in the program flow for the Motion
Control instruction "MC_Power". Disable the technology object with the same instance you
used to enable the technology object, otherwise an error with error ID 16#800C will occur.
The technology data block is available to you as an additional interface to the technology object.

1452

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology data block
The properties of real objects (e.g. axes) are configured by means of the technology objects
and saved in a technology data block. The technology data block contains all configuration
data, setpoint and actual values, and status information of the technology object. The TIA Portal
automatically creates the technology data block when the technology object is created. You
access the data of the technology data block (read/write access) with your user program.
A listing and description of the tags can be found in the Appendix (Página 1510).

Evaluating the technology data block
Access to data in the technology data block occurs in accordance with the access to standard
data blocks. Only tags with elementary data types can be accessed in the technology data
block. Access to a complete data structure (e.g. STRUCT, ARRAY) is not possible.

Reading values from the technology data block
In your user program you can read actual values (e.g. current position) and status information,
or detect error messages in the technology object. When you program a query in your user
program (e.g. current velocity), the value is directly read from the technology object.
Reading values from the technology data block takes longer than for other data blocks. If you
use these tags several times in a single cycle of your user program, it is recommended to copy
the tag values to local tags, and use the local tags in your program.

Writing values to the technology data block
The configuration of the technology object in the TIA Portal is used to write the corresponding
data to the technology data block. After they have been loaded into the CPU, these data are
stored in the CPU on the SIMATIC Memory Card (load memory).
In the following cases, it may be necessary for the user program to write values to the
technology data block:
● Adaptation of the configuration of the technology object (e.g. dynamic limits, software limit
switches)
● Use of overrides
● Adaptation of position control (e.g. "Kv" parameter)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1453

Control de movimiento
6.1 Using S7-1500 Motion Control
Changes to values in the technology data block by the user program can take effect at various
points in time. The relevant property of the individual tags can be found in their descriptions in
the Appendix (Página 1510):
Effectiveness of changes

Description

Direct (DIR)

You write changes using direct assignments. The changes are applied only at the start
of the next MC‑Servo [OB91].
The changes are retained until the next POWER OFF of the CPU or restart of the
technology object.
LREAL

The technology object performs a range check on the written
(e.g. <TO>.Override.Ve‐ value, and immediately starts using the new value.
locity)
If range limits are violated when writing, the technology ob‐
ject automatically corrects the values. If the value is below
the range, then the value is set to the low limit of the range;
if the range is exceeded, then the value is set to the high limit
of the range.
DINT/BOOL
(e.g. <TO>.PositionLi‐
mits_SW.Active)
When Motion Control instruction is
called (CAL)
(e.g. <TO>.Sensor[1..4].ActiveHo‐
ming.HomePositionOffset)
Restart (RES)
(e.g. <TO>.Homing.AutoReversal)

Changes are only permitted in the defined value range. Va‐
lue changes outside the value range are not applied.
If you enter invalid values, the programming error OB (OB
121) is started.

You write changes using direct assignments. The changes are applied at the start of the
next MC‑Servo [OB91] after the call of the corresponding Motion Control instruction in
the user program.
The changes are retained until the next POWER OFF of the CPU or restart of the
technology object.
Since restart-relevant tags have dependencies on other tags, value changes cannot be
applied at any arbitrary time. The changes are only used after reinitialization (restart) of
the technology object.
During a restart the technology object is reinitialized with the data in load memory. You
therefore write changes to the start value in the load memory with the extended ins‐
truction "WRIT_DBL" (write to data block in load memory).
You trigger the restart in your user program using the Motion Control instruction
"MC_Reset" with parameter "Restart" = TRUE. Additional information regarding the
restart can be found in the section Restarting technology objects (Página 1476).

Read only (RON)

The tag cannot and must not be changed during runtime of the user program.

(e.g. <TO>.Position)

Nota
Save changes with "WRIT_DBL"
Changes to tags immediately in effect are lost on POWER OFF of the CPU, or restart of the
technology object.
If changes in the technology data block should also be retained after POWER OFF of the CPU,
or restart of the technology object, you must write the changes to the start value in the load
memory with the extended instruction "WRIT_DBL".

1454

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Nota
Using the "READ_DBL" and "WRIT_DBL" data block functions
The "READ_DBL" and "WRIT_DBL" data block functions may only be used on individual tags
in conjunction with the tags of the technology object. The "READ_DBL" and "WRIT_DBL" data
block functions must not be applied to data structures of the technology object.

Isochronous evaluation of data
If you want to process data of the technology data block in isochronous mode from a Motion
Control application cycle, there is the option of evaluating this data in the MC-PreServo [OB67]/
MC-PostServo [OB95] as of technology version V3.0. As of technology version V5.0, you also
have the option of evaluating these in MC-PreInterpolator [OB68].

Consulte también
Organization blocks for Motion Control (Página 1390)

Evaluate StatusWord, ErrorWord and WarningWord
To be able to symbolically use individual status and error information from the "StatusWord",
"ErrorWord" and "WarningWord" data double words, you can evaluate them as described
below. For consistent evaluation, you should avoid using bit addressing to access these data
double words in the technology data block. Access to an individual bit in the technology data
block only lasts as long as the access to the entire data word.
When required, copy the required data double word to a tag of a data structure and query the
individual bits of the tag.
The allocation of the individual bits in the data double words can be found in the Appendix
(Página 1510) in the description of the tags of the corresponding technology object.

Requirements
The technology object has been created.

Procedure
To evaluate the individual bits in the data word "StatusWord", follow these steps:
1. Crate a global data structure. Name the data structure, e.g. as "Status".
2. Create a double word (DWORD) in the data structure "Status". Name the double word, e.g.
as "Temp".
3. Create 32 Boolean tags in the "Status" data structure. You can obtain a clearer overview by
giving the individual Boolean tags identical names as the bits in the technology DB (e.g.
name the fifth Boolean tag "HomingDone").
4. If needed, copy the tag "<TO>.StatusWord" from the technology data block to the double
word "Temp" in your data structure.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1455

Control de movimiento
6.1 Using S7-1500 Motion Control
5. Copy the individual bits of double word "Temp" to the corresponding Boolean tags with bit
accesses.
6. Use the Boolean tags to query the status bits.
Evaluate the data words "ErrorWord" and "WarningWord" as specified in steps 1 to 6.

Example
The following example shows how you can read out and save the fifth bit "HomingDone" of the
data word "StatusWord":
SCL

Explanation

#Status.Temp

:= "TO".StatusWord;

//Copy status word

#Status.HomingDone := #Status.Temp.%X5;

//Copy individual bits per bit access

STL

Explanation

L "TO".StatusWord

//Copy status word

T #Status.Temp
U #Status.Temp.%X5

//Copy individual bits per bit access

= #Status.HomingDone

Change restart-relevant data
In order to change restart-relevant data in the technology data block, write to the starting values
of the tags in load memory using the extended instruction "WRIT_DBL". In order for the
changes to be applied, a restart of the technology object must be performed.
You can see from the description of the tag of the corresponding technology object whether
value changes of a tag are restart-relevant.

Requirement
The technology object has been created.

Procedure
To change restart-relevant data, proceed as follows:
1. Create a data block and fill it with the restart-relevant values, that you want to change in the
technology data block. In doing so, the data types must match the tags to be changed.
2. Write the values from your data block to the starting values of the tags of the technology data
block in load memory, using the extended instruction "WRIT_DBL".
If restart-relevant data were changed, this will be indicated in the "<TO>.StatusWord.X3
(OnlineStartValuesChanged)" tag of the technology object.
3. Perform a restart of the technology object using the Motion Control instruction "MC_Reset"
with parameter "Restart" = TRUE.
After the restart of the technology object, the new value is transferred into the technology data
block in work memory, and is effective.

1456

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion Control instructions
Motion Control instruction parameters
The individual Motion Control instructions are described in detail in the section "S7-1500 Motion
Control V5".
When creating your user program, take the following explanations of the Motion Control
instruction parameters into account.

Reference to the technology object
The technology object is specified for the Motion Control instruction as follows:
● Parameter "Axis"
The "Axis" input parameter of a Motion Control instruction contains a reference to the
technology object that is to execute the corresponding job.
The corresponding technology object is also referenced in the following parameters:
– Parameter "Master"
– Parameter "Slave"
– Parameter "Cam"
– Parameter "MeasuringInput"
– Parameter "OutputCam"
– Parameter "CamTrack"
As of technology version V3.0, the reference to the technology object can be specified, also
in limited manner, via the data type "DB_ANY". For more information, refer to the section
"Parameter transfer for function blocks (Página 1462)".

Job start and transfer of input parameters of a Motion Control instruction
For the start of jobs and the transfer of modified parameter values, a distinction is made
between the following Motion Control instructions:
● Motion Control instructions with "Execute" parameter
With a positive edge at the "Execute" parameter, the job is started and the existing values
for the input parameters are transferred.
Subsequently changed parameter values are not transferred until the next job start.
Resetting the "Execute" parameter does not end the job, but it does affect the display
duration of the job status. As long as "Execute" is set to "TRUE", the output parameters will
be updated. If "Execute" is reset before the completion of a job, the parameters "Done",
"Error" and "CommandAborted" are correspondingly set for only one call cycle.
● Motion Control instructions with "Enable" parameter
The job is started by setting the "Enable" parameter.
As long as "Enable" = TRUE, the job remains active and changed parameter values will be
transferred each time the instruction is called in the user program.
The job is ended by resetting the "Enable" parameter.
The input parameters "JogForward" and "JogBackward" of the Motion Control instruction
"MC_MoveJog" correspond in their behavior to the "Enable" parameter.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1457

Control de movimiento
6.1 Using S7-1500 Motion Control

Job status
The following output parameters indicate the status of the job execution:
● Motion Control instructions with "Done" parameter
The normal completion of a job is indicated with parameter "Done" = TRUE.
● Motion Control instructions without "Done" parameter
The achievement of the job objective is indicated by other parameters (e.g. "Status",
"InVelocity"). For more information, refer to the "Tracking running jobs (Página 1465)"
section.
● Parameter "Busy"
As long as a job is in progress, the "Busy" parameter shows the value "TRUE". If a job was
ended or canceled, "Busy" shows the value "FALSE".
● Parameter "Active"
If a job is active in Motion Control, the parameter "Active" shows the value "TRUE". As long
as a job is in the job sequence, "Active" shows the value "FALSE".
● Parameter "CommandAborted"
If a job was canceled by another job, the "CommandAborted" parameter shows the value
"TRUE".
● Parameter "Error"
If a Motion Control instruction error occurs, the "Error" parameter shows the value "TRUE".
The "ErrorID" parameter indicates the cause of the error.
As long as the "Execute" or "Enable" parameter is set to "TRUE", the output parameters will be
updated. Otherwise, the parameters "Done", "Error" and "CommandAborted" are
correspondingly set for only one cycle.

Abort of running jobs
An active Motion Control job is aborted by the start of a new Motion Control job. In the process,
the current dynamic setpoints (acceleration, deceleration, jerk, velocity) are set to the values of
the overriding job.

1458

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Example of parameter behavior
The behavior of the parameters of Motion Control instructions is shown in the following chart
using the example of two "MC_MoveAbsolute" jobs.
$

$

0&B0RYH$EVROXWH

0&B0RYH$EVROXWH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



3RVLWLRQ

&RPPDQG$ERUWHG

$ERUWB



3RVLWLRQ

&RPPDQG$ERUWHG



9HORFLW\

(UURU



9HORFLW\

(UURU,'



$FFHOHUDWLRQ
'HFHOHUDWLRQ

72B



$FFHOHUDWLRQ



'HFHOHUDWLRQ



-HUN

ದ

ದ


'LUHFWLRQ



(UURU
(UURU,'

-HUN
'LUHFWLRQ



$


([HB




'RQHB




%XV\B




$ERUWB



$

W
W
W
W



([HB




'RQHB




%XV\B



W
W
W



72B9HORFLW\


W



72B3RVLWLRQ



Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

W

1459

Control de movimiento
6.1 Using S7-1500 Motion Control
Using "Exe_1", an "MC_MoveAbsolute" job (A1) with target position 1000.0 is initiated.
"Busy_1" is set to "TRUE". The axis is accelerated to the specified velocity and moved to the
target position (see TO_1.Velocity and TO_1.Position). Before the target position is reached,
the job is overridden at time ① by another "MC_MoveAbsolute" job (A2). The termination is
signaled via "Abort_1", and "Busy_1" is set to "FALSE". The axis is braked to the velocity
specified in A2 and moved to the new target position 1500.0. When the axis reaches the target
position, this is signaled via "Done_2".

Non position-controlled operation
The position control of the axis can be deactivated with the following parameters:
● MC_Power.StartMode = 0
● MC_MoveVelocity.PositionControlled = FALSE
● MC_MoveJog.PositionControlled = FALSE
For more information, refer to the section "Non position-controlled operation (Página 1615)" of
the "S7-1500/S7-1500T Axis functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766462) documentation.

Add Motion Control instructions
You add Motion Control instructions to a program block in the same way as other instructions.
You control all available functions of the technology object using the Motion Control
instructions. The instructions can be called at all execution levels.

Requirements
The technology object was created.

Procedure
To add Motion Control instructions in your user program, proceed as follows:
1. Double click your program block in the project tree (the program block must be called in the
cyclical program).
The program block is opened in the programming editor, and the available instructions are
displayed.
2. In the "Instructions" task card, open the "Technology > Motion Control" folder.
3. Using drag-and-drop, move the Motion Control instruction, e.g. "MC_Power", to the desired
segment of the program block.
The "Call options" dialog opens.
4. In the dialog, specify a name and a number for the instance data block of the Motion Control
instruction.

1460

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
5. Click "OK".
The Motion Control instruction "MC_Power" is inserted into the network.

The instance data block is automatically created under "Program Blocks > System Blocks
> Program Resources".
6. Input parameters without a default value (e.g. "Axis"), must be assigned. Select the
technology object in the project tree and move the technology object onto <...> at the "Axis"
parameter using drag-and-drop.

Once the technology object is specified in the "Axis" parameter, the following buttons are
available to you:
To open the configuration of the technology object, click on the toolbox icon.
To open the diagnostics of the technology object, click on the stethoscope icon.

7. Add additional Motion Control instructions in accordance with steps 3 through 6.

Consulte también
Tracking active jobs (Página 1465)
Tags of the positioning axis technology object (Página 1718)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1461

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameter transfer for function blocks
If you want to reuse a function block with Motion Control instructions for different technology
objects, create an input parameter of the data type of the respective technology object in the
block interface of the calling function block. You assign the data type in the block interface with
a direct input. The parameter is then transferred as reference to the technology object to the
"Axis" parameter of the Motion Control instructions. The data types of technology objects
correspond to the structure of the associated technology data block.
In contrast to standard data types, the data types for technology objects are always passed on
as pointers to the function block (Call by reference). This remains true if you declare the data
types of the technology objects in "Input" area of the block interface. Write access to function
blocks always leads directly to modification of the referenced technology object.

Example 1: Tag transfer with specific data type
By specifying the data type, you can address the tags of the technology object in the function
block (<parameters of the block interface>.<tag of the technology object>). The data types for
the reference to the technology objects are available in the section "appendix (Página 1543)".
The following table shows the declaration of the tags used:
Tag

Declaration

Data type

Description

axis

Input

TO_PositioningAxis

Reference to the technology object

on

Input

BOOL

Signal to enable the axis

actPosition

Output

LReal

Query of the actual position from the technology data
block

MC_POWER

Multinstance of the Motion Control instruction "MC_Po‐
wer"

instMC_POWER Static

The following SCL program shows the tag transfer with a specific data type:
SCL

Explanation

#instMC_POWER(Axis := #axis, Enable := #on);

//Call of the Motion Control instruction "MC_Power" with enable of the axis

#actPosition := #axis.ActualPosition;

//Query of the actual position from the technology
data block

Example 2: Tag transfer with "DB_Any"
The data type "DB_Any" provides a further option for the transfer of specific data types of the
technology object. Unlike the data types of the technology object in the program, "DB_Any" can
be assigned during runtime.
This example shows how you can program variable switching of up to four cams at
"MC_CamIn".
To do this, tags of the data type "DB_Any" are first created as input parameter of the block. The
cam to be used is assigned by an additional input parameter.

1462

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the declaration of the tags used:
Tag

Declaration

Data type

Description

cam1

Input

DB_ANY

Cam 1

cam2

Input

DB_ANY

Cam 2

cam3

Input

DB_ANY

Cam 3

cam4

Input

DB_ANY

Cam 4

camToUse

Input

Int

Selection of cam 1 to 4

instMC_CAMIN

Static

MC_CAMIN

Multinstance of the Motion Control instruction "MC_Ca‐
mIn"

tempCamSel

Temp

DB_ANY

Current cam

The following SCL program shows the tag transfer with "DB_Any":
SCL

Explanation
//Selection of the desired cam 1..4
//Using an input tag of data type Int

CASE #camToUse OF
1:

#tempCamSel := #cam1;

//Instruction for scenario 1

2:

#tempCamSel := #cam2;

//Instruction for scenario 2

3:

#tempCamSel := #cam3;

//Instruction for scenario 3

4:

#tempCamSel := #cam4;

//Instruction for scenario 4

ELSE

//Instruction for Int ≤ 0 or Int > 4

#tempCamSel := #cam1;

//Corresponds to default cam 1

END_CASE;
//Call of the Motion Control instruction "MC_CamIn" with variable transfer of the cam technology
object using the temporary tag "tempCamSel"
#instMC_CAMIN(Master := "PositioningAxis_1",

//Direct assignment of the technology object of
the leading axis

Slave := "SynchronousAxis_1",

//Direct assignment of the technology object of
the following axis

Cam := #tempCamSel);

//Indirect assignment of the cam technology object

Additional information
You can find more program examples for the use of the data type "DB_Any" in the following
FAQ entry:
https://support.industry.siemens.com/cs/ww/en/view/109750880 (https://
support.industry.siemens.com/cs/ww/en/view/109750880)

Starting Motion Control jobs
Motion Control jobs are started by setting the "Execute" or "Enable" parameter of the Motion
Control instruction. The call of the Motion Control instructions for a technology object should
occur in an execution level.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1463

Control de movimiento
6.1 Using S7-1500 Motion Control
When executing Motion Control jobs, you should also take note of the status of the technology
object.
Starting Motion Control jobs should be performed in the following steps:
1. Query the status of the technology object.
2. Initiate new job for the technology object.
3. Check job status.
These steps are explained using the example of a job for absolute positioning.

1. Query the status of the technology object
Make sure that the technology object is in the appropriate status to perform the desired job:
● Has the technology object been released?
To execute motion jobs, the technology object must be enabled.
Enabling is performed using the Motion Control instruction "MC_Power".
The "MC_Power.Status" parameter (<TO>.StatusWord.X0 (Enable)) must show the value
"TRUE".
● Is a technology alarm pending?
To perform motion commands, no technology alarms or alarm responses may be pending.
The "<TO>.ErrorDetail.Number" and "<TO>.ErrorDetail.Reaction" tags of the technology
object must show the value zero. After resolving the error, acknowledge any pending alarms
using the Motion Control instruction "MC_Reset".
You can find a list of the technology alarms and alarm reactions in the "Technology alarms
(Página 1510)" appendix.
● Has the technology object been homed?
In order to perform a job for absolute positioning, the positioning axis/synchronous axis
technology object must be homed. The referencing occurs via the Motion Control instruction
"MC_Home". The "<TO>.StatusWord.X5 (HomingDone)" tag of the technology object must
show the value "TRUE".

2. Initiate new command for the technology object
In the "Position" parameter of the "MC_MoveAbsolute" instruction, specify the position to which
the axis should be moved. Start the job with a positive edge at the "Execute" parameter.

3. Check command status
Parameter "Done" of the Motion Control instruction indicates successful completion of a job
(target reached, in this case).
If an error is detected, the "Error" parameter of the Motion Control instruction is set to "TRUE",
and the job is rejected.
You can program an error handling routine for the Motion Control job. For this purpose,
evaluate the error indicated in the "Error" parameter. The cause of the error is indicated in the
ErrorID parameter. After resolving the cause of the error, restart the job.
If "Error" = TRUE and "ErrorID" = 16#8001 is indicated during job execution, a technology alarm
has occurred.

1464

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You can find a list of the ErrorIDs in the "Error detection (Página 1537)" appendix.

Additional information
An option for evaluating the individual status bits, error bits, and warning bits can be found in
the Evaluating StatusWord, ErrorWord and WarningWord (Página 1455) section.

Tracking active jobs
The current status of the job processing is made available via the output parameters of the
Motion Control instruction. These parameters are updated with each call of the Motion Control
instruction.
When tracking jobs, a distinction is made between three groups:
● Motion Control instructions with "Done" parameter (Página 1465)
● Motion Control instructions without "Done" parameter (Página 1469)
● Motion Control instruction "MC_MoveJog" (Página 1473)

Motion Control instructions with "Done" parameter
Jobs of Motion Control instructions with the "Done" parameter are started with a positive edge
at the "Execute" parameter. If the job was completed without errors or interruption by another
job (e.g. "MC_MoveAbsolute": Target position reached), the "Done" parameter shows the value
"TRUE".
In positioning instructions, the parameter "Done" is delayed by the set minimum dwell time
(<TO>.PositioningMonitoring.MinDwellTime).
The following Motion Control instructions have a "Done" parameter for the S7-1500 CPU:
● MC_Reset
● MC_Home
● MC_Halt
● MC_MoveAbsolute
● MC_MoveRelative
● MC_MoveSuperimposed
● MC_SetSensor (S7-1500T)
● MC_Stop
● MC_SetAxisSTW
● MC_WriteParameter
● MC_MeasuringInput
● MC_AbortMeasuringInput
● MC_PhasingRelative (S7-1500T)
● MC_PhasingAbsolute (S7-1500T)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1465

Control de movimiento
6.1 Using S7-1500 Motion Control
● MC_InterpolateCam (S7-1500T)
● MC_GetCamLeadingValue (S7-1500T)
● MC_GetCamFollowingValue (S7-1500T)
● MC_GroupInterrupt (S7-1500T)
● MC_GroupContinue (S7-1500T)
● MC_GroupStop (S7-1500T)
● MC_MoveLinearAbsolute (S7-1500T)
● MC_MoveLinearRelative (S7-1500T)
● MC_MoveCircularAbsolute (S7-1500T)
● MC_MoveCircularRelative (S7-1500T)
● MC_MoveDirectAbsolute (S7-1500T)
● MC_MoveDirectRelative (S7-1500T)
● MC_TrackConveyorBelt (S7-1500T)
● MC_DefineWorkspaceZone (S7-1500T)
● MC_DefineKinematicsZone (S7-1500T)
● MC_SetWorkspaceZoneActive (S7-1500T)
● MC_SetWorkspaceZoneInactive (S7-1500T)
● MC_SetKinematicsZoneActive (S7-1500T)
● MC_SetKinematicsZoneInactive (S7-1500T)
● MC_DefineTool (S7-1500T)
● MC_SetTool (S7-1500T)
● MC_SetOcsFrame (S7-1500T)
The behavior of the parameters is shown below by way of example for various situations.

1466

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Complete execution of the job
If the Motion Control job has been completely executed all the way to the end, this is indicated
with parameter "Done" = "TRUE". The signal state of the "Execute" parameter influences the
display duration for the "Done" parameter:
You set "Execute" after completion of the job to "FALSE".




You set "Execute" during processing of the job to "FALSE".




%XV\
'RQH
&RPPDQG
$ERUWHG
(UURU

①



([HFXWH




%XV\




'RQH




&RPPDQG
$ERUWHG










([HFXWH



(UURU
W












W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after completion of the job.

②
③

While the job is being executed, the "Busy" parameter shows the value "TRUE".

④

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "Done" parameter also
retains the value "TRUE".

⑤

At the completion of the job (for example, with Motion Control instruction "MC_MoveAbsolute": Target position reached),
the "Busy" parameter changes to "FALSE" and the "Done" parameter to "TRUE".

If the "Execute" parameter was already set to "FALSE" before completion of the job, the "Done" parameter shows the
value "TRUE" for only one execution cycle.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1467

Control de movimiento
6.1 Using S7-1500 Motion Control

Job abort
If the Motion Control job is canceled during processing by another job, this is indicated in the
"CommandAborted" parameter with the value "TRUE". The signal state of the "Execute"
parameter influences the display duration for the "CommandAborted" parameter:
You set "Execute" after the job is canceled to "FALSE".




You set "Execute" before the job is aborted to "FALSE".





([HFXWH
%XV\
'RQH
&RPPDQG
$ERUWHG
(UURU

①







([HFXWH

$ERUW



%XV\




'RQH




&RPPDQG
$ERUWHG







(UURU
W




$ERUW










W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after completion of the job.

②
③

While the job is being executed, the parameter "Busy" shows the value "TRUE".

④

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "CommandAborted"
parameter also retains the value "TRUE".

⑤

During job execution, the job is aborted by another Motion Control job. When the job is aborted, the "Busy" parameter
changes to "FALSE" and "CommandAborted" changes to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the job is aborted, the "CommandAborted" parameter
shows the value "TRUE" for only one execution cycle.

1468

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Error during job execution
If an error occurs during execution of the Motion Control job, this is indicated with parameter
"Error" = "TRUE". The signal state of the "Execute" parameter influences the display duration
for the "Error" parameter:
You set "Execute" after the occurrence of the error to "FAL‐
SE".




You set "Execute" before the occurrence of the error to "FAL‐
SE".





([HFXWH
%XV\
'RQH
&RPPDQG
$ERUWHG
(UURU

①






([HFXWH

(UURU







%XV\




'RQH




&RPPDQG
$ERUWHG




(UURU



W




(UURU










W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after completion of the job

②
③

While the job is being executed, the "Busy" parameter shows the value "TRUE".

④

As long as the "Execute" parameter retains the value "TRUE" after the occurrence of the error, the "Error" parameter also
retains the value "TRUE".

⑤

An error occurs during the execution of the job. When the error occurs, the "Busy" parameter changes to "FALSE" and
the "Error" parameter to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the occurrence of the error, the "Error" parameter shows
the value "TRUE" for only one execution cycle.

Motion Control instructions
You can find additional information on the Motion Control instructions of the Kinematics
technology object in the "S7-1500T Kinematics functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766463).

Consulte también
Position monitoring functions (Página 1610)

Motion Control instructions without "Done" parameter
Motion Control instructions without the "Done" parameter use a special parameter to indicate
that the job objective (e.g. "InVelocity", "InGear") has been achieved. The target state or motion
is stopped until the job is aborted or an error occurs.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1469

Control de movimiento
6.1 Using S7-1500 Motion Control
The following Motion Control instructions have a special parameter for indicating the job status:
Motion Control instruction

Parameter

Validity
S7-1500

S7-1500T

MC_Power

Status

X

X

MC_MoveVelocity

InVelocity

X

X

MC_MoveJog

InVelocity

X

X

MC_GearIn

InGear

X

X

MC_GearInPos

InSync

-

X

MC_CamIn

InSync

-

X

MC_SynchronizedMotionSimula‐
tion

InSimulation

-

X

MC_LeadingValueAdditive

Busy

-

X

MC_MotionInVelocity

Busy

-

X

MC_MotionInPosition

Busy

-

X

MC_TorqueLimiting

InClamping and InLimitation

-

X

MC_KinematicsTransformation

Busy and Valid

-

X

MC_InverseKinematicsTransfor‐
mation

Busy and Valid

-

X

The following Motion Control instructions have no special parameter for indicating the job
status: Feedback is provided via the following tags:
Motion Control instruction

Parameter

Description

MC_MeasuringInputCyclic

Busy

The execution of a measuring job is indicated with
parameter "Busy" = "TRUE". Completed measu‐
ring events are indicated in the corresponding
event counters "<TO>.MeasuredValues.Measu‐
redValue1Counter" and "<TO>.MeasuredVa‐
lues.MeasuredValue2Counter" of the technology
data block.

MC_OutputCam

Busy

The execution of a job is indicated with parameter
"Busy" = "TRUE". The CamOutput tag in the asso‐
ciated technology data block indicates the swit‐
ching state of the output cam.

MC_CamTrack

Busy

The execution of a job is indicated with parameter
"Busy" = "TRUE". The TrackOutput tag in the as‐
sociated technology data block indicates the swit‐
ching state of the output cam.

The behavior of the parameter is shown for various situations using the Motion Control
instruction "MC_MoveVelocity" as an example:

Example "MC_MoveVelocity"
An "MC_MoveVelocity" job is started with a positive edge at the "Execute" parameter. The job
objective is fulfilled when the assigned velocity is reached and the axis travels at constant
velocity. When the assigned velocity is reached and maintained, this is indicated in the
"InVelocity" parameter with the value "TRUE".
The motion of the axis can, for example, be stopped with an "MC_Halt" job.

1470

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

The assigned velocity is reached and maintained
Reaching of the assigned velocity is indicated with parameter "InVelocity" = "TRUE". The
"Execute" parameter has no effect on the display duration for the "InVelocity" parameter.




([HFXWH




%XV\




,Q9HORFLW\



&RPPDQG
$ERUWHG

②





(UURU

①





W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the "FALSE" value before or after the parameterized velocity has been reached. While the job is being executed,
the parameter "Busy" shows the value "TRUE".
When the assigned velocity is reached, the "InVelocity" parameter changes to "TRUE". The "Busy" and "InVelocity"
parameters retain the value "TRUE" until another Motion Control job overrides the "MC_MoveVelocity" job.

The job is aborted before the assigned velocity is reached
If the Motion Control job is canceled by another job before the assigned velocity is reached, this
is indicated with parameter "CommandAborted" = "TRUE". The signal state of the "Execute"
parameter influences the display duration for the "CommandAborted" parameter.
You set "Execute" after the job is canceled to "FALSE".




You set "Execute" before the job is aborted to "FALSE".





([HFXWH
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU









([HFXWH

$ERUW



%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG





Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

(UURU
W




$ERUW










W

1471

Control de movimiento
6.1 Using S7-1500 Motion Control

①

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after the job is aborted.

②
③

While the job is being executed, the "Busy" parameter shows the value "TRUE".

④

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "CommandAborted"
parameter also retains the value "TRUE".

⑤

During job execution, the job is aborted by another Motion Control job. When the job is aborted, the "Busy" parameter
changes to "FALSE" and "CommandAborted" changes to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the job is aborted, the "CommandAborted" parameter
shows the value "TRUE" for only one execution cycle.

An error has occurred prior to reaching the assigned velocity
If an error occurs during execution of the Motion Control job before the assigned velocity has
been reached, this is indicated with parameter "Error" = "TRUE". The signal state of the
"Execute" parameter influences the display duration for the "Error" parameter.
You set "Execute" after the occurrence of the error to "FAL‐
SE".




You set "Execute" before the occurrence of the error to "FAL‐
SE".





([HFXWH
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU

①







([HFXWH

(UURU



%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG







(UURU
W




(UURU










W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after the error has occurred.

②
③

While the job is being executed, the "Busy" parameter shows the value "TRUE".

④

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "Error" parameter also
retains the value "TRUE".

⑤

An error occurs during the execution of the job. When the error occurs, the "Busy" parameter changes to "FALSE", and
the "Error" parameter to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the job is aborted, the "Error" parameter shows the value
"TRUE" for only one execution cycle.

1472

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion Control instructions
You can find additional information on the Motion Control instructions of the Kinematics
technology object in the "S7-1500T Kinematics functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766463).

Motion Control instruction "MC_MoveJog"
An "MC_MoveJog" job is started by setting the "JogForward" or "JogBackward" parameter. The
job objective is fulfilled when the assigned velocity is reached and the axis travels at constant
velocity. When the assigned velocity is reached and maintained, this is indicated in the
"InVelocity" parameter with the value "TRUE".
The job is complete when the "JogForward" or "JogBackward" parameter has been set to the
value "FALSE" and the axis has come to a standstill.
The behavior of the parameters in various situations is shown below by way of example.

The assigned velocity is reached and maintained
If the Motion Control job has been performed up to the point of reaching the assigned velocity,
then this is indicated in the "InVelocity" parameter with the value "TRUE".
Jog mode is controlled by the "JogForward" parameter.






Jog mode is controlled by the "JogBackward" parameter.




-RJ%DFNZDUG
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU

①
②
③
④
⑤



-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG












-RJ)RUZDUG



(UURU
W














W

The job is started by setting the "JogForward" or "JogBackward" parameter.
While the job is being executed, the "Busy" parameter shows the value "TRUE".
When the assigned velocity is reached, the "InVelocity" parameter changes to "TRUE".
When the "JogForward" or "JogBackward" parameter is reset, the motion of the axis ends. The axis decelerates. The
"InVelocity" parameter changes to "FALSE".
If the axis has come to a standstill, then the Motion Control job is complete and the "Busy" parameter changes to "FALSE".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1473

Control de movimiento
6.1 Using S7-1500 Motion Control

The job is aborted during execution
If the Motion Control job is canceled during processing by another job, this is indicated in the
"CommandAborted" parameter with the value "TRUE". The behavior of the
"CommandAborted" parameter is independent of reaching the assigned velocity.
Jog mode is controlled by the "JogForward" parameter.




Jog mode is controlled by the "JogBackward" parameter.





-RJ)RUZDUG
-RJ%DFNZDUG
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU






$ERUW

-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG







(UURU
W



$ERUW













W

①
②
③

The job is started by setting the "JogForward" or "JogBackward" parameter.

④

When the "JogForward" or "JogBackward" parameter is reset, the "CommandAborted" parameter likewise changes to
"FALSE".

While the job is processing, the "Busy" parameter shows the value "TRUE".
During job execution, the job is aborted by another Motion Control job. When the job is aborted, the "Busy" parameter
changes to "FALSE" and "CommandAborted" changes to "TRUE".

1474

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

An error occurs during the execution of the job
If an error occurs during execution of the Motion Control job, this is indicated in the "Error"
parameter with the value "TRUE". The behavior of the "Error" parameter is independent of
reaching the assigned velocity.
Jog mode is controlled by the "JogForward" parameter.




Jog mode is controlled by the "JogBackward" parameter.





-RJ)RUZDUG
-RJ%DFNZDUG
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU

①
②
③
④




(UURU





-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG




(UURU



W



(UURU













W

The job is started by setting the "JogForward" or "JogBackward" parameter.
While the job is being executed, the "Busy" parameter shows the value "TRUE".
An error occurs during the execution of the job. When the error occurs, the "Busy" parameter changes to "FALSE", and
"Error" changes to "TRUE".
When the "JogForward" or "JogBackward" is reset to the value "FALSE", the "Error" parameter likewise changes to
"FALSE".

Ending Motion Control jobs
When a job is ended, a distinction is made between error-free completion of the job and a
motion abort.

Completion of job
The completion of a Motion Control job is indicated as described in the "Tracking running jobs
(Página 1465)" section.

Job termination
The termination and the substitution behavior are described in the section "Substitution
behavior of Motion Control jobs". Special pending jobs can be cancelled with "MC_Power".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1475

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion abort
If a motion must be aborted, you can perform the following measures:
● Execute "MC_Halt" or "MC_Stop"
To abort a motion and stop the axis, you can use the "MC_Halt" instruction or "MC_Stop"
instruction.
● Disable "MC_Power"
In an emergency, you can stop the axis via an emergency stop ramp. To do so, set the
"Enable" parameter of the "MC_Power" instruction to "FALSE". The axis is decelerated
according to the selected "StopMode" and all jobs for the technology object are aborted.

Measuring job abort
With the Motion Control instruction "MC_AbortMeasuringInput", an active one-time or cyclic
measuring job is aborted.

Cancellation of an active output cam/cam track
● "MC_OutputCam"
An active output cam is disabled when the "Enable" parameter of Motion Control instruction
"MC_OutputCam" is set to "FALSE".
● "MC_CamTrack"
An active cam track is disabled when the "Enable" parameter of Motion Control instruction
"MC_CamTrack" is set to "FALSE".

Restart of technology objects
After the CPU is switched on, or after technology objects are downloaded into the CPU, the
system automatically initializes the technology objects with the start values from the technology
data block. If restart-relevant changes are detected during a reload into the CPU, a restart of
the technology object is automatically performed.
If restart-relevant data have been changed in RUN mode by the user program, then the
technology object must be reinitialized by the user in order for the changes to be used. At a RUN
→ STOP transition, the CPU automatically performs a restart of technology objects with restartrelevant changes.
If changes in the technology data block should also be retained after the restart of the
technology object, then you must write the changes to the start value in load memory using the
extended instruction "WRIT_DBL".

Restart required
If a restart of the technology object is required, this is indicated at "Technology object >
Diagnostics > Status and error bits > Axis status or Encoder status > Online start value
changed", as well as in the tag "<TO>.StatusWord.X3 (OnlineStartValuesChanged)" of the
technology object.

1476

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Restarting a technology object
A restart of the technology object is triggered by the user by means of the "MC_Reset" Motion
Control instruction, with parameter "Restart" = TRUE.
During a restart, all configuration data of the technology object are loaded from load memory
into work memory. In the process, the actual values in the technology data block are
overwritten.
Note the following during a restart of the technology object:
● A restart resets the "Homed" status of a technology object with incremental actual values
("<TO>.StatusWord.X5 (HomingDone)").
● While a restart is being performed, the technology object cannot perform any jobs. An active
restart will be indicated under "Technology object > Diagnostics > Status and error bits >
Axis status or Encoder status > Restart active", and in the "<TO>.StatusWord.X2
(RestartActive)" tag of the technology object.
● Motion Control jobs are rejected during a restart with the "Error" = TRUE and "ErrorID" =
16#800D parameters (job not executable, because a restart is active).
● While a restart is being executed, you cannot access the technology data block.

Consulte también
Change restart-relevant data (Página 1456)

6.1.1.6

Downloading to CPU
When downloading to the CPU S7-1500, it is always verified that the project files are consistent
online and offline after the download.
The data of the technology objects are saved in technology data blocks. The conditions for
downloading blocks thus apply when loading new or modified technology objects.

Load in RUN mode
When loading in the CPU's RUN mode, it is checked whether a load without restart of the
technology objects is possible.
If restart-relevant configuration values were changed, then a restart of the technology object is
automatically performed after the load into the CPU.
Loading a technology object is only possible if the technology object is disabled.
You cannot download the following changes to the CPU in RUN mode:
● Changes to the MC-Servo clock speeds
● Changes to the hardware interface of the technology object in "Technology object >
Configuration > Hardware interface"

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1477

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.1.7

Commissioning
The following guidelines describe the steps that you should note when commissioning the
Motion Control-specific components of your equipment.
The commissioning of other components of your automation system depends on the particular
equipment configuration. Commissioning (not Motion Control) is described in the "Automation
System S7-1500" (https://support.automation.siemens.com/WW/view/en/59191792) system
manual.

Commissioning guidelines
These guidelines serve as recommendations for commissioning equipment with Motion
Control. The procedure is described using the example of a positioning axis technology object.

Requirement
● The configuration of the following components is complete:
– CPU
– BUS communication
– Drives
– Technology objects
● The user program has been created.
● The wiring of the CPU and of the associated I/O is complete.
● The commissioning and optimization of the drive is complete.

Procedure
Proceed as follows to commission the Motion Control-specific components of your equipment:
Step

Action to be performed

Supported by TIA Portal

Turn on CPU

Turn on the power supply and the CPU.

-

"Disable" position con‐
troller

Set the gain (Kv factor) of the position control loop to zero.

"Technology object > Configura‐
tion > Extended parameters >
Control loop"

Activate precontrol

Set the precontrol to 100 %.

"Technology object > Configura‐
tion > Extended parameters >
Control loop"

Load project into the
CPU

Bring the CPU to the STOP mode.

● "Toolbar > Stop CPU"

Create online connec‐
tion to the CPU

Select the "Receive messages" check box under "Online & Diag‐ ● Device configuration
nostics > Online Access".
● "Online & Diagnostics >
Configure the interface of the TIA Portal and create an online
Online Access"
connection with the CPU.

1478

(This setting avoids unwanted drive movements that may be
caused by incorrect parameterization of the position control
loop.)

Download your project to the CPU (load hardware and software). ● "Toolbar > Download to
device"

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Step

Action to be performed

Supported by TIA Portal

Disable Motion Control
specific user program

In order to avoid conflicts with the axis control panel, lock the
enabling of technology objects in your user program (MC_Po‐
wer.Enable = FALSE).

● PLC programming

Evaluating pending
messages

Evaluate the message display in the inspector window. Resolve
the causes of pending technology alarms. Acknowledge
the technology alarms (Página 1481).

"Inspector window > Diagnos‐
tics > Message display"

Check hardware limit
switches

Click the hardware limit switches. Check for correct message
display (technology alarm 531). Acknowledge the technology
alarm.

"Inspector window > Diagnos‐
tics > Message display"

Check the connection
and configuration of the
drive (setpoint)

Bring the CPU into the RUN mode. Open the Axis control panel
and take over control.

"Technology object > Commis‐
sioning > Axis control panel"

● Motion Control instructions

Perform the following steps:
● Enable the technology object.
⇒ The drive must turn itself on, and where applicable release
the brake. The position is held.
● Move the axis in jog mode at low velocity in the positive
direction.
⇒ The drive must move. The actual position value must
increase (positive direction).
● Disable the technology object.
⇒ The drive must turn itself off, and where applicable apply
the brake.

Check the connection
and configuration of the
encoder (actual value)

● Check the scaling of the actual values (rotation direction,
distance evaluation, and resolution of the encoder)
⇒ The change in the actual mechanical position must match
the change in the actual values. In case of deviations, correct
the parameters assigned for mechanics under "Technology
object > Extended parameters > Mechanics".
● For absolute encoders, check the absolute encoder
adjustment. To do this, move the axis to the start of the
traversing range and switch the system off. After the restart,
check the actual encoder values for correctness. Repeat this
step likewise at the traversing range end. If there are
deviations, correct the following:
–

Settings for fine resolution under "Technology object >
Data exchange with encoder"

–

Zero-crossing position of the encoder (only for "Absolute"
encoder type)
The position of the zero crossing can be changed by
rotating the encoder in the dismantled state. With
programmable encoders, the zero crossing can be
adjusted by parameter assignment. The zero crossing
must be outside the traversing range.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

● "Technology object >
Diagnostics > PROFIdrive
telegram"
● "Technology object >
Commissioning > Axis
control panel"

1479

Control de movimiento
6.1 Using S7-1500 Motion Control
Step

Action to be performed

Supported by TIA Portal

Checking the reference
speed

Traverse the axis in jog mode at low velocity in the positive di‐
rection.

● "Technology object >
Hardware interface > Data
exchange"

⇒ The displayed current velocity must match the velocity set‐
point.

Optimize position con‐
troller

If the displayed current velocity deviates significantly from the
velocity setpoint, adjust the reference speed.

● "Technology object >
Commissioning > Axis
control panel"

Use the Optimization commissioning function to optimize the
gain (Kv) of the position control loop.

"Technology object > Commis‐
sioning > Optimization"

For this purpose, adapt following error limits as needed.
Transfer the gain Kv to
the project.

Enter the gain Kv that you determined by means of the optimi‐
zation function in your configuration data. Load your project into
the CPU.

"Technology object > Configura‐
tion > Extended parameters >
Control loop"

Enable Motion Control
specific user program

Unlock the enabling technology objects lock in your user pro‐
gram (MC_Power.Enable = TRUE).

● PLC programming

Check the functioning
of the user program

Check the programmed functions of your user program.

● Watch and force tables

End of commissioning
for a positioning axis
technology object

To commission additional technology objects, perform the co‐
rresponding steps again.

● Motion Control instructions
● Online and diagnostic
functions
See above.

Consulte también
S7-1500/S7-1500T Axis functions (https://support.industry.siemens.com/cs/ww/en/view/
109766462)

6.1.1.8

Diagnostics
The "Diagnostics" section is limited to the description of the diagnostic concept for Motion
Control.
A comprehensive description of the system diagnostics of the S7‑1500 CPU can be found in the
"Diagnostics" function manual (https://support.industry.siemens.com/cs/ww/en/view/
59192926).

Diagnostic concept
The diagnostic concept encompasses alarms and associated messages, as well as error
messages in the Motion Control instructions. The TIA Portal also supports you with consistency
checks during configuration of the technology objects, and during the creation of your user
program.
All alarms in runtime (from the CPU, technology, hardware etc.) are displayed in the Inspector
window of the TIA Portal. Diagnostic information that relates to technology objects (technology
alarms, status information) are additionally displayed in the Diagnostics window of the
respective technology object.

1480

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
During motion control, if an error occurs at a technology object (e.g. approaching a hardware
limit switch), then a technology alarm (Página 1481) is triggered, and a corresponding message
is displayed in the TIA Portal as well as on HMI devices.
In your user program, technology alarms are generally signaled via error bits in the technology
data block. The number of the technology alarm with the highest priority is also displayed. In
order to simplify error evaluation, the "Error" and "ErrorID" parameters of the Motion Control
instructions also indicate that a technology alarm is pending.
Program errors (Página 1484) can occur during parameter assignment or during the
processing sequence of the Motion Control instructions (e.g. invalid parameter specification
when calling the instruction, initiation of a job without enable via "MC_Power"). Motion Control
instruction errors are indicated at the call of instructions using the "Error" and "ErrorID"
parameters.

Technology alarms
If an error occurs at a technology object (e.g. approaching a hardware limit switch), a
technology alarm is triggered and indicated. The impact of a technology alarm on the
technology object is specified by the alarm reaction.

Alarm classes
Technology alarms are divided into three classes:
● Acknowledgeable warning
The processing of Motion Control job is continued. The current motion of the axis can be
influenced, e.g. by limiting the current dynamic values to the configured limit values.
● Alarm requiring acknowledgment
Motion jobs are aborted in accordance with the alarm reaction. You must acknowledge the
alarms in order to continue execution of new jobs after eliminating the cause of the error.
● Fatal error
Motion jobs are aborted in accordance with the alarm reaction.
To be able to use the technology object again after eliminating the cause of the error, you
must restart the technology object (Página 1476).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1481

Control de movimiento
6.1 Using S7-1500 Motion Control

Display of technology alarms
A technology alarm is displayed in the following locations:
● TIA Portal
– "Technology object > Diagnostics > Status and error bits"
Display of pending technology alarms for each technology object.
– "Technology object > Commissioning > Axis control panel"
Display of the last pending technology alarm for each technology object.
– "Inspector window > Diagnostics > Message display"
Select the "Receive messages" check box under "Online & Diagnostics > Online
Access" in order to display technology alarms via the message display.
With an online connection to the CPU, the pending technology alarms for all technology
objects are displayed. Additionally, the archive view is available to you.
The message display can also be activated and displayed on a connected HMI.
– "CPU > Online & diagnostics"
Display of the technology alarms that have been entered in the diagnostic buffer.
● User program
– Tags "<TO>.ErrorDetail.Number" and "<TO>.ErrorDetail.Reaction"
Indication of the number and the reaction of the technology alarm with the highest priority.
– Tag "<TO>.StatusWord"
A pending technology alarm is indicated with bit 1 ("Error").
– Tag "<TO>.ErrorWord"
Indication of alarms and fatal errors.
– Tag "<TO>.WarningWord"
Indication of warnings.
– Parameter "Error" and "ErrorID"
In a Motion Control instruction, the parameters "Error" = TRUE and "ErrorID" = 16#8001
indicate that a technology alarm is pending.
● Display of the CPU
In order to show technology alarms on the CPU display, make the following setting when
loading to the CPU:
In the "Load preview" dialog, select the action "Consistent download" for the "Text libraries"
entry.

Alarm reaction
A technology alarm always contains an alarm reaction, which describes the impact on the
technology object. The alarm reaction is specified by the system.
The following table shows possible alarm reactions:
Alarm reaction

Description

Axes (speed axis, positioning axis, synchronous axis)
No reaction (warnings only)
<TO>.ErrorDetail.Reaction = 0

1482

The processing of Motion Control job is continued. The current motion of the axis
can be influenced, e.g. by limiting the current dynamic values to the configured limit
values.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Alarm reaction

Description

Stop with current dynamic values

Active motion commands are aborted. The axis is braked with the dynamic values
that present in the Motion Control instruction and brought to a standstill.

<TO>.ErrorDetail.Reaction = 1
Stop with maximum dynamic values
<TO>.ErrorDetail.Reaction = 2
Stop with emergency stop ramp
<TO>.ErrorDetail.Reaction = 3
Remove enable
<TO>.ErrorDetail.Reaction = 4
Track setpoints
<TO>.ErrorDetail.Reaction = 5

Active motion commands are aborted. The axis is braked with the dynamic values
configured under "Technology object > Extended parameters > Dynamic limits",
and brought to a standstill. The configured maximum jerk is hereby taken into
account.
Active motion commands are aborted. The axis is braked with the emergency stop
deceleration configured under "Technology object > Extended parameters > Emer‐
gency stop ramp", without any jerk limit, and brought to a standstill.
Active motion commands are aborted. The setpoint zero is output and the enable
is removed. The axis is braked to a standstill according to the configuration in the
drive.
Active motion commands are aborted. The setpoint zero is output. The actual va‐
lues supplied by the drive are automatically tracked as setpoints.

Other technology objects (output cam, cam track, measuring input, cam, external encoder)
No reaction (warnings only)
<TO>.ErrorDetail.Reaction = 0

The processing of Motion Control job is continued. The current motion of the axis
can be influenced, e.g. by limiting the current dynamic values to the configured limit
values.

Terminate processing of the technology
object:

Processing of the technology object is terminated. All running Motion Control jobs
are aborted.

● Output cam
<TO>.ErrorDetail.Reaction = 6
● Cam track
<TO>.ErrorDetail.Reaction = 7
● Measuring input
<TO>.ErrorDetail.Reaction = 8
● Cam
<TO>.ErrorDetail.Reaction = 9
● External encoder
<TO>.ErrorDetail.Reaction = 10

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1483

Control de movimiento
6.1 Using S7-1500 Motion Control

Acknowledging technology alarms
You can acknowledge technology alarms as follows:
● TIA Portal
– "Technology object > Commissioning > Axis control panel"
Click "Confirm" to acknowledge all alarms and warnings pending for the selected
technology object.
– "Inspector window > Diagnostics > Message display"
You can acknowledge the alarms and warnings for all technology objects either
individually, or all at once.
● HMI
At an HMI with enabled message display, you can acknowledge the alarms and warnings
for all technology objects either individually, or all at once.
● User program
Acknowledge pending technology alarms for a technology object with the Motion Control
instruction "MC_Reset".

Additional information
You can find a list of the technology alarms and alarm reactions in the "Technology alarms
(Página 1510)" appendix.

Errors in Motion Control instructions
Errors in Motion Control instructions (e.g. invalid parameter value setting) are indicated by the
"Error" and "ErrorID" output parameters.
Under the following conditions, "Error" = TRUE and "ErrorID" = 16#8xxx are indicated for the
Motion Control instruction:
● Illegal status of the technology object, which prevents the execution of the job.
● Invalid parameter assignment of the Motion Control instruction, which prevents the
execution of the job.
● As a result of the alarm reaction for a technology object error.

Error display
If there is a Motion Control instruction error, the "Error" parameter shows the value "TRUE". The
cause of the error is given in the "ErrorID" parameter.
Jobs to the technology object are rejected when "Error" = TRUE. Running jobs are not
influenced by rejected jobs.
If "Error" = TRUE and "ErrorID" = 16#8001 is indicated during job execution, a technology alarm
has occurred. In this case, evaluate the indication of the technology alarm.
If "Error" = "TRUE " is displayed during execution of a "MC_MoveJog" job, the axis is braked
and brought to a standstill. In this case, the deceleration configured for the "MC_MoveJog"
instruction takes effect.

1484

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Acknowledge error
Acknowledging errors in Motion Control instructions is not required.
Restart a job after resolving the error.

Additional information
You can find a list of the ErrorIDs in the "Error detection (Página 1537)" appendix.

6.1.1.9

Technology Version V3.0

Configuring
Configuring the cam technology object
Graphical editor
Structure of Graphical Editor V3.0
The graphical editor is divided into the following areas:
● Toolbar
● Curve diagram

Toolbar
The toolbar at the top of the graphical editor provides you with buttons for the following
functions:
Button

Function

Description

Importing cam from file

See section Importing/exporting cam.

Exporting cam to file

See section Importing/exporting cam.

Edit elements/Move view

● Selecting and moving of individual elements and element
● Moving the view using drag-and-drop
To switch from any tool to the "Edit elements/Move view" tool, press the <Esc>
key.

Activate zoom selection
Activate vertical zoom

Zoom into selected area
Vertical zoom into selected area without horizontal scaling
Alternative: <Ctrl> +drag to ordinate keeping mouse button pressed

Activate horizontal zoom

Horizontal zoom into selected area without vertical scaling
Alternative: <Ctrl> +drag to abscissa keeping mouse button pressed

Zoom in

Enlargement of the display
Alternative: <Ctrl> + mouse wheel up in curve diagram

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1485

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Zoom out

Reduction of the display
Alternative: <Ctrl> + mouse wheel down in curve diagram

Show all

Display of entire definition and value range

Activate snap grid

Inputs and element end points are aligned to the configurable snap grid and to
other element end points.

Inserting a point

Adding a point to the chart

Inserting a line

Adding a line to the chart

Inserting a sine

Adding a sine element to the chart

Inserting a polynomial

Adding a polynomial to the chart

Inserting an inverse sine

Adding an inverse sine to the chart

View: One chart

Display of one chart with the following curves of the cam opened in the editor:
● Preset curve
● Effective position
● Effective velocity
● Effective acceleration
● Effective jerk

View: Four charts

Display of four charts with the following curves of the cam opened in the editor:
● Chart with setpoint curve and effective position
● Chart with effective velocity
● Chart with effective acceleration
● Chart with effective jerk

Vertical measuring lines

Displaying and moving of vertical measuring lines
Hold down the left mouse button and drag to draw a measuring range. The
vertical position of the measuring lines can be moved.
The function values for the measuring line positions are displayed in the chart.
The difference of the measuring lines is displayed between the measuring lines.
If you position the mouse pointer on a measuring line, the function value is dis‐
played.

Horizontal measuring lines

Displaying and moving of horizontal measuring lines
Hold down the left mouse button and drag to draw a measuring range. The
horizontal position of the measuring lines can be moved.
The function values for the measuring line positions are displayed in the chart.
The difference of the measuring lines is displayed between the measuring lines.
If you position the mouse pointer on a measuring line, the function value is dis‐
played.

Show legend

Showing or hiding of the legend in the curve diagram.
To display values for a specific curve on the ordinate, click on the name of the
corresponding curve in the legend.

1486

Show legend left

Display of the legend on the left side of the curve diagram.

Show legend right

Display of the legend on the right side of the curve diagram.

Show online curve

Display of the cam read back from the CPU (orange)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Curve diagram
In the curve diagram, you enter the elements of the curve and adjust the curve by selecting and
moving elements.
Chart areas outside of the leading value/following value range configured in "Profile > General"
are grayed out. Elements that fall outside are displayed with a warning ("Element is outside the
definition range").
Different curves (position, velocity, acceleration and jerk) can be displayed one above the other
in up to four charts by configuring the graphical view accordingly. If multiple charts are to be
displayed, the height of the charts can be adjusted using the separating lines.
The view can be zoomed in manual mode with <Ctrl> +mouse wheel and <Ctrl> +drag to
abscissa/ordinate with mouse button pressed.
Any calculation problems that may occur are signaled by warning triangles
is displayed in the tooltip of the warning triangle.

. The alarm text

Shortcut menu in the Graphical Editor V3.0
The following table shows the functions in the shortcut menu of the graphical editor:
Function

Description

Show all

Display of entire definition and value range

Zoom in

Enlargement of the display

Zoom out

Reduction of the display

Cut

Removing the selected elements and copying them to the clipboard

Copy

Copying of the selected elements to the clipboard

Paste

Pasting of the elements from the clipboard to the last element

Delete

Deletion of the selected elements
Transitions to existing elements are also deleted.

Paste special

Call of the "Paste elements" dialog

Move

Call of the "Move elements" dialog

Scale

Call of the "Scale elements" dialog

Tabular editor
Shortcut menu in the Tabular Editor V3.0
The following table shows the functions in the shortcut menu of the tabular editor:
Function

Description

Insert row

Insertion of an element (point) in front of the selected element

Add row

Insertion of an element (point) after the selected element

Cut

Removing the selected elements and copying them to the clipboard

Copy

Copying of the selected elements to the clipboard

Paste

Pasting of the elements from the clipboard to the last element

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1487

Control de movimiento
6.1 Using S7-1500 Motion Control
Function

Description

Delete

Deletion of the selected elements
Transitions to existing elements are also deleted.

Paste special

Call of the "Paste elements" dialog

Move

Call of the "Move elements" dialog

Scale

Call of the "Scale elements" dialog

Properties (Inspector window)
Profile Statistics V3.0
The "Statistics" properties window shows an overview of the number of elements of the cam.
A cam can consist of up to 1000 points and up to 50 segments.

Used elements
This area shows the number of used elements of the curve:
Parameters

Description

Points

This field shows the number of used points of the cam.
A cam can consist of up to 1000 points.

Segments

This field shows the number of used segments of the cam.
A cam can consist of up to 50 segments.

The use of points and segments depends on the compilation and configuration of the elements.
The following table shows the use of points and segments per element:
Element

Number of used points

Number of used segments

Point

1

0

Point at a transition with VDI-based optimization 0

0

Line

0

1

Sine

0

1

Polynomial

0

1

Inverse sine

Number of interpolation points con‐ 0
figured.
(Properties (Inspector window) >
Element > Parameter > Approxima‐
tion > Number of interpolation
points)
Default: 32

Inverse sine to the right of a transition with VDIbased optimization

Number of interpolation points con‐ 0
figured - 1

Transition with system interpolation

0

1488

0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Element

Number of used points

Number of used segments

Transition with VDI-based optimization
Motion rule
Sine

0

1

Inclined sine

0

1

Polynomial

0

1

Modified acceleration trapezoid
Motion task
Dwell-in-reverse

0

5

Reverse-in-dwell

0

5

Dwell-in-dwell

0

6

Dwell-in-dwell

0

3

Constant velocity-in-constant velo‐
city

0

4

Constant-velocity-in-dwell

0

4

Dwell-in-constant velocity

0

4

Sine line combination

0

3

Harmonic combination

0

3

Modified sine
Motion task

Boundary conditions
The following boundary conditions apply to the input and use of points and segments:
● Points
For points with the same leading values, the point that was entered last or is in a lower part
of the tabular editor becomes effective.
● Segments
– Gaps between segments are filled with a transition segment.
– For gaps in the leading value range of less than 1.0E-4, segment end points and
segment start points are pulled together.
– For gaps in the leading value range greater than 1.0E-4, a new transition segment is
inserted.
– For overlaps, the new segment is inserted from the start point and used completely.
When the previous segment is defined in excess of the new segment, the previous
segment continues to be used after the end point of the new segment.
● Interpolation points and segments (mixed cams)
When segments and points are defined in the same range, the segment is used.

Configuration Elements - Parameters (polynomial) V3.0
Configure the parameters of the selected element in the "Parameters" configuration window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1489

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Configure the parameters of the selected polynomial in this area:
Parameters

Description

Leading values of the
polynomial
Start

Configure the start point of the polynomial in the leading value range (definition range) in this field.

End

Configure the end point of the polynomial in the leading value range (definition range) in this field.

Polynomial parameters
Definition by

In the drop-down list, select how the polynomial is defined:
● Coefficients
● Boundary values and point of inflection
● Boundary values and left-side jerk
● Boundary values and right-side jerk
The corresponding parameters are displayed based on the selection.

Coefficients

In these fields, configure the coefficients of the polynomial of degree 6:
P(x) = a6x6 + a5x5 + a4x4 + a3x3 + a2x2 + a1x + a0
The coefficients are shown in scientific notation, e.g. "9.6450617283e-11".

Following value Start

Configure the following value at the start of the polynomial in this field.

Following value End

Configure the following value at the end of the polynomial in this field.

First derivative Start

Configure the first derivative (velocity) for the following value at the start of the polynomial in this field.

First derivative End

Configure the first derivative (velocity) for the following value at the end of the polynomial in this field.

Second derivative - Configure the second derivative (acceleration) for the following value at the start of the polynomial
Start
in this field.
Second derivative - Configure the second derivative (acceleration) for the following value at the end of the polynomial in
End
this field.
Third derivative Start

Configure the third derivative (jerk) for the following value at the start of the polynomial in this field.

Third derivative End

Configure the third derivative (jerk) for the following value at the end of the polynomial in this field.

Leading value of
the point of inflec‐
tion

Configure the leading value of the point of inflection of the polynomial in this field.

Extended parameters

1490

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Segment type

Description
In the drop-down list, select whether or not the polynomial is to have a trigonometric component.
When "Polynomial with trigonometric portion" is selected, the corresponding trigonometric parame‐
ters are displayed, as they are with sine. When a sine element is converted to a polynomial, the sine
element is configured as a polynomial with trigonometric portion. The shape of the element is re‐
tained.

Amplitude

Configure the amplitude of the trigonometric component in this field.

Definition by

In the drop-down list, select how the trigonometric component is defined:
● Phase at start and at end
● Phase at start and period length
● Phase at start and frequency
● Period length and phase at end
● Frequency and phase at end
The corresponding parameters are displayed based on the selection.

Phase at start

Configure the phase angle at the start of the trigonometric component in this field.

Phase at end

Configure the phase angle at the end of the trigonometric component in this field.

Period length

Configure the period length of the trigonometric component in this field.

Frequency

Configure the frequency of the trigonometric component in this field.

Configuration elements - Characteristics (transition) V3.0
Configure the parameters of the selected transition in the "Characteristics" configuration
window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1491

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Configure the settings for optimization of the transition in this area:
Parameters

Description

Interpolation settings of the tran‐
sition
Optimization method

Select the optimization method in the drop-down list.
● System interpolation
The CPU defines the optimization parameters automatically according to the settings
of the system interpolation.
● VDI-based optimization
You adjust the optimization manually. The inputs are applied automatically according
to the VDI Guideline 2143.

Motion task

The transition type is determined from the properties of the adjacent elements of the
transition and displayed in this field.

Continuity at start/end

In the drop-down lists, select which parameter is continuous in the boundary points and is
to be included for optimization.
● Default optimization setting (setting under "Profile > Default optimization settings")
● Position
● Velocity (bumpless)
● Acceleration (jerkless)
● Jerk (jerk continuity permitted on one side only)

Optimization target

In the drop-down list, select the optimization target:
● Default optimization setting (setting under "Profile > Default optimization settings")
● Not specified
● Velocity (Cv)
● Acceleration (Ca)
● Jerk (Cj)
● Minimum dynamic torque (Cmdyn)

Selection of motion rule

1492

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters

Description

Motion rule

In the drop-down list, select the motion rule according to which optimization is to occur.
● Line
● Quadratic parabola
● Sine
● Polynomial
● Inclined sine
● Modified acceleration trapezoid
● Modified sine
● Harmonic combination
● Sine line combination
The selection is automatically limited to the motion rules that can be applied according to
the motion task and the selected boundary conditions. Additional parameters are displa‐
yed depending on the selected motion rule.

Parameter used

In the drop-down list, select the parameters to be included in the optimization:
● Lambda
● Maximum acceleration (Ca)
● Maximum deceleration (Ca*)
The selection is automatically limited to the parameters that can be applied according to
the motion rule.

Lambda

Configure the position of the point of inflection (lambda) for the transition in this field.

Maximum acceleration (Ca)

Configure the maximum acceleration (Ca) for the transition in this field.

Maximum deceleration (Ca*)

Configure the maximum deceleration (Ca*) for the transition in this field.

Characteristic values of the tran‐
sition

The characteristic values of the transition that are relevant according to VDI 2143 are
displayed in this area. The maximum value and the standardized value are displayed for
the following characteristic values:
● Velocity (Cv)
● Acceleration (Ca)
● Deceleration (Ca*)
● Jerk (Cj)
● Dynamic torque (Cmdyn)

Motion jobs according to VDI Guideline 2143
The VDI Guideline 2143 distinguishes between areas of usage and motion transitions:
● Areas of usage correspond to the sequences in a process, which means the inserted
elements of the cam.
● Motion transitions are transitions between areas of usage that are not directly relevant to the
process but must meet specific boundary conditions (e.g. velocity consistency).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1493

Control de movimiento
6.1 Using S7-1500 Motion Control
The VDI Guideline 2143 defines the following areas of usage:
Area of usage

Designation

Properties

Dwell

R

Velocity = 0

Constant velocity

G

Reverse

U

Velocity = 0

Motion

B

Velocity ≠ 0

Acceleration = 0
Velocity ≠ 0
Acceleration = 0
Acceleration ≠ 0
Acceleration ≠ 0

The following figure shows an example of the areas of usage:

8

*

5

The figure below shows the possible transitions between the areas of usage:

1494

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
5

5

*

8

%

Y 
D 

Y 
D 

Y 
D 

Y 
D 

*
Y 
D 

Y 
D 

Y 
D 

Y 
D 

8
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 

%
Y 
D 

Y 
D 

Y 
D 

Y 
D 

Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 

Commissioning
Axis control panel
Function and Structure of the Axis Control Panel V3.0
Description
You traverse individual axes with the axis control panel.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1495

Control de movimiento
6.1 Using S7-1500 Motion Control
A user program is not necessary for the operation of the axis control panel. With the axis control
panel, you take over master control for a technology object and control the movements of the
axis.
ADVERTENCIA
Uncontrolled axis motions
During operation with the axis control panel, the axis can execute uncontrolled motions (e.g.
due to erroneous configuration of the drive, or of the technology object). Furthermore, any
synchronized following axis is moved as well when moving a leading axis with the axis control
panel.
Therefore, perform the following protective measures before operation with the axis control
panel:
● Ensure that the EMERGENCY OFF switch is within the reach of the operator.
● Enable the hardware limit switches.
● Enable the software limit switches.
● Ensure that following error monitoring is enabled.
● Make sure that no following axis is coupled to the axis to be moved.
The axis control panel of the speed axis, positioning axis and synchronous axis can be found
in the project tree under "Technology object > Commissioning".
The axis control panel is divided into the following areas:
● Master control
● Axis
● Operating mode
● Modify
● Axis status
● Current values

1496

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table lists the elements of the axis control panel:
Area

Element

Master control

Description
In the "Master control" area, you take over master control of the technology object, or
return it to your user program.

"Activate" button With the "Activate" button, you set up an online connection to the CPU and take over
master control for the selected technology object.
● To take over master control, the technology object must be disabled in the user
program.
● Any synchronized following axis is moved as well when moving a leading axis with
the axis control panel.
● If the online connection to the CPU is lost during operation with the axis control
panel, then after the sign of life monitoring has elapsed, the axis will be stopped with
maximum deceleration. In this case, an error message is displayed ("ErrorID" =
16#8013) and the master control is passed back to the user program.
● When you click the "Activate" button, a warning message is displayed. In the
warning, you can adapt the sign-of-life monitoring (100 to 60000 ms).
If the master control of the axis control panel is lost repeatedly without a direct error
message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the message "Error during
commissioning" is entered in the message display log. Sign-of-life failure between
controller and TIA Portal" is displayed.
To eliminate this error, adapt the sign-of-life monitoring in the warning.
● Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: axis control panel
active).
● When master control is taken over, the configuration of the technology object is
adopted. Changes to the configuration of the technology object do not take effect
until master control has been returned. For this reason, make any necessary
changes before master control is taken over.
● If master control has been taken over for the technology object, the axis control
panel is blocked for access by another installation of the TIA Portal (Team
Engineering as of CPU V1.5).
"Deactivate" but‐ With the "Deactivate" button, you return master control to your user program.
ton
Axis

In the "Axis" area, enable or disable the technology object.
"Enable" button
"Disable" button

With the "Enable" button, you enable the selected technology object
With the "Disable" button, you disable the selected technology object

Operating mode

Select the required mode in the "Operating mode" drop-down list.

Modify

The "Control" area displays the parameters for traversing with the axis control panel
according to the selected operating mode.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1497

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Description

Position

Position to which the axis is homed.
(Homing and set home position modes only)

Distance

Distance the axis is traversed.
(Relative positioning mode only)

Target position

Position to which the axis is traversed.
(Absolute positioning mode only)

Velocity/
Velocity or speed at which the axis is traversed.
Velocity setpoint Default: 10% of the default value
(Velocity/speed setpoint, Jog and Positioning modes only)
Acceleration

Acceleration with which the axis is traversed.
Default: 10% of the default value

Deceleration

Deceleration with which the axis is traversed.
Default: 10% of the default value

Jerk

Jerk with which the axis is traversed.
Default: 100% of default value

"Start" button

With the "Start" button, you start a job according to the selected operating mode.

"Forward" button With the "Forward" button, you start a motion in the positive direction according to the
selected operating mode.
"Backward" but‐
ton
"Stop" button
Axis status

With the "Backward" button, you start a motion in the negative direction according to the
selected operating mode.
With the "Stop" button, you cancel a job or stop the axis.
The "Axis status" area displays the status of the axis and the status of the drive.

Drive ready

Drive is ready to execute setpoints.

Error

An error occurred at the technology object.

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.

Homed

The technology object is homed.

More

The "More" link takes you to the window "Technology object > Diagnostics > Status and
error bits".

Active errors

The error that occurred most recently is displayed in the "Active errors" text field.

"Confirm" button

With the "Confirm" button, you acknowledge pending errors.

Current values

The "Current values" area shows the actual values of the axis.
Position

Actual position of the axis

Velocity

Actual velocity of the axis

Nota
No transfer of the parameters
The configured parameter values are discarded when master control is returned. Transfer the
values as needed into your configuration.
If you have changed configuration values with the axis control panel during operation, they
have no effect on the operation of the axis control panel.

1498

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Operating mode
The following table shows the operating modes of the axis control panel:
Operating mode

Description

Homing

This function corresponds to active homing. The parameters for homing must be configured.
Homing is not possible with an absolute encoder. The technology object is not referenced when this
mode is used with an absolute encoder.

Set home position

This function corresponds to direct homing (absolute).
With the "Start" button, you set the actual position to the value specified in "Position" and the "Ho‐
med" status is set.

Jog

Motion commands occur by means of jogging.
With the "Forward" or "Backward" button you start motion in the positive or negative direction. The
motion runs for as long as you hold down the left mouse button.

Velocity specification/
speed setpoint

The axis is moved at the specified velocity or speed until you stop the movement.

Positioning relative

The positioning is executed as a controlled, relative traversing motion according to the defaults
assigned under "Controller".

Positioning absolute

The positioning is executed as a controlled, absolute traversing motion according to the defaults
assigned under "Controller".

The motion commands are performed according to the setpoints assigned under "Controller".

If you have enabled the "Modulo" setting of the technology object, the buttons "Forward" and
"Backward" are shown in the "Controller" area. The axis is positioned within the modulo range.
Position settings outside the modular range are recalculated to the modulo range.
If you have not enabled the "Modulo" setting of the technology object, only the "Start" button is shown
in the "Controller" area. You can directly approach the entered position.

Optimization
Function and Structure of Optimization V3.0
Description
The "Optimization" function supports you in determining the optimal precontrol and gain (Kv
factor) for the closed loop position control of the axis. The axis velocity profile is recorded by
means of the Trace function for this purpose for the duration of a configurable positioning
movement. You can then evaluate the recording, and adjust the precontrol and gain
accordingly.
The "Optimization" function for the positioning axis and synchronous axis technology objects
can be found in the project tree under "Technology object > Commissioning".
The "Tuning" dialog is divided into the following areas:
● Master control
● Axis
● Measurement configuration
● Optimize position controller

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1499

Control de movimiento
6.1 Using S7-1500 Motion Control
● Run measurement
● Trace
The following table lists the elements of optimization:
Area

Element

Description
In the "Master control" area, you take over master control of the technology object, or
return it to your user program.

Master control

"Activate" button With the "Activate" button, you set up an online connection to the CPU and take over
master control for the selected technology object.
● To take over master control, the technology object must be disabled in the user
program.
● Any synchronized following axis is moved as well when moving a leading axis with
the axis control panel.
● If the online connection to the CPU is lost during operation with the axis control
panel, then after the sign of life monitoring has elapsed, the axis will be stopped with
maximum deceleration. In this case, an error message is displayed ("ErrorID" =
16#8013) and the master control is passed back to the user program.
● When you click the "Activate" button, a warning message is displayed. You can
adapt the sign-of-life monitoring here (100 to 60000 ms).
If the master control of the axis control panel is lost repeatedly without a direct error
message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the message "Error during
commissioning" is entered in the message display log. Sign-of-life failure between
controller and TIA Portal" is displayed.
To eliminate this error, adapt the sign-of-life monitoring in the warning.
● Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: axis control panel
active).
● When master control is taken over, the configuration of the technology object is
adopted. Changes to the configuration of the technology object do not take effect
until master control has been returned. For this reason, make any necessary
changes before master control is taken over.
● If master control has been taken over for the technology object, the axis control
panel is blocked for access by another installation of the TIA Portal (Team
Engineering as of CPU V1.5).
"Deactivate" but‐ With the "Deactivate" button, you return master control to your user program.
ton
Axis

1500

In the "Axis" area, enable or disable the technology object.
"Enable" button

With the "Enable" button, you enable the selected technology object

"Disable" button

With the "Disable" button, you disable the selected technology object

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Area
Measurement
configuration

Element

Description
In the "Measurement configuration" area, you configure the settings for a test step.

Distance

Travel distance for a test step

Measurement
duration

Time for a test step

"Adapt dynamic
values" check
box

With the "Adapt dynamic values" check box, you enable adaptation of the acceleration
and the maximum velocity.

Acceleration

Presetting of the acceleration for a test step

Maximum velo‐
city

Presetting of the maximum velocity for a test step

Optimize posi‐
tion controller

In the "Optimize position controller" area, you make the settings for optimization of the
controller characteristics.
symbol next to the field. The list of values
You open a list of values using the
contains the following values of the respective parameter:
● Online actual value
● Online start value
● Project start value
Enter the new value in the text field for the actual value. The new value is applied by
clicking the "Forward" or "Backward" button in the "Run measurement" area.
Precontrol

Current percentage velocity precontrol of the position controller

Current speed control loop substitute time
Speed control
loop substitute ti‐ With velocity precontrol, a simplified speed control loop model can be generated using
me
the speed control loop substitute time. This prevents overmodulation by the position
controller of the manipulated variable for velocity during the acceleration and decele‐
ration phases. To accomplish this, the position setpoint of the position controller is
delayed by the amount of the speed control loop substitute time in relation to the velocity
precontrol.
Gain
Run measure‐
ment

Trace

Current gain of the position controller (Kv)
In the "Run measurement" area, you perform the test steps.

"Forward" button With the "Forward" button, you start a test step for optimization in the positive direction.
"Backward" but‐
ton

With the "Backward" button, you start a test step for optimization in the negative direc‐
tion.

"Stop" button

You stop a test step with the "Stop" button.
The Trace function is displayed in the lower area of the "Tuning" dialog.
With each test step, a Trace recording of the required parameters is automatically
started and displayed after completion of the test step.
After master control has been returned, the Trace recording is deleted.
You can find a full description of the trace function in the section on using the trace and
logic analyzer function.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1501

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
No transfer of the parameters
The configured parameter values are discarded after master control is returned.
Transfer the values as needed into your configuration. You can apply the values for the gain,
precontrol and speed control loop substitute time in your configuration using the "Project start
value" value.

Diagnostics
Speed-controlled axis technology object
Status and Error Bits V3.0
Description
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The Diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.
(<TO>.StatusWord.X0 (Enable))

Error

An error occurred at the technology object. Detailed information about the error is available in
the "Error" area, and in the <TO>.ErrorDetail.Number and <TO>.ErrorDetail.Reaction tags of
the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized.
(<TO>.StatusWord.X2 (RestartActive))

Axis control panel active

The axis control panel is active. The axis control panel has master control over the technology
object. The axis cannot be controlled from the user program.
(<TO>.StatusWord.X4 (ControlPanelActive))

Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Restart required

1502

Data relevant for the restart has been changed. The changes will not be applied until the
technology object is restarted. (<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No motion job is running for the technology object.
(<TO>.StatusWord.X6 (Done))

Jog

The axis is being moved with a job for jog mode of Motion Control instruction "MC_MoveJog"
or from the axis control panel.
(<TO>.StatusWord.X9 (JogCommand))

Speed setpoint

The axis is traversed with a job with speed setpoint of the Motion Control instruction "MC_Mo‐
veVelocity" or using the axis control panel.
(<TO>.StatusWord.X10 (VelocityCommand))

Constant speed

The axis is moved with constant speed or is stationary.
(<TO>.StatusWord.X12 (ConstantVelocity))

Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Torque limit active

The configured threshold for the force/torque affects the axis.
(<TO>.StatusWord.X27 (InLimitation))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or several configuration parameters are adjusted internally at a certain time.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicError))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1503

Control de movimiento
6.1 Using S7-1500 Motion Control

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration data were inco‐
rrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

Error in user program at a Motion Control instruction or its use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

Error in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Data exchange

Communication with a connected device is faulty.
(<TO>.ErrorWord.X7 (CommunicationFault))

I/O

Error accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met (e.g. technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord (Página 1455) section.

Motion Status V3.0
Description
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The Diagnostics function is available in online
operation.

1504

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Speed setpoint

Speed setpoint of the axis
(<TO>.Velocity)

Speed override

Speed setpoint correction as percentage
The speed setpoint specified in motion control instructions or set by the axis control panel are
superimposed with an override signal and corrected as a percentage. Valid speed correction values
range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.
The following table shows the meaning of the status data:
Status

Description

Speed

Configured maximum speed
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

Positioning axis/synchronous axis technology object
Status and Error Bits V3.0
Description
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The Diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1505

Control de movimiento
6.1 Using S7-1500 Motion Control

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.
(<TO>.StatusWord.X25 (AxisSimulation))

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.
(<TO>.StatusWord.X0 (Enable))

Position-controlled mode

The axis is in position-controlled mode.
(Inversion of <TO>.StatusWord.X28 (NonPositionControlled))

Homed

The technology object is homed. The relationship between the position in the technology object
and the mechanical position was successfully created.
(<TO>.StatusWord.X5 (HomingDone))

Error

An error occurred at the technology object. Detailed information about the error is available in
the "Error" area, and in the <TO>.ErrorDetail.Number and <TO>.ErrorDetail.Reaction tags of
the technology object.

Restart active

The technology object is being reinitialized.

(<TO>.StatusWord.X1 (Error))
(<TO>.StatusWord.X2 (RestartActive))
Axis control panel active

The axis control panel is active. The axis control panel has master control over the technology
object. The axis cannot be controlled from the user program.
(<TO>.StatusWord.X4 (ControlPanelActive))

Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Encoder values valid

The actual encoder values are valid.
(<TO>.StatusSensor[n].State)

Restart required

Data relevant for the restart has been changed. The changes are applied only after a restart of
the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Status limit switch
The following table shows the possibilities for enabling the software and hardware limit
switches:
Status

Description

Negative SW limit switch ap‐ The negative software limit switch was reached.
proached.
(<TO>.StatusWord.X15 (SWLimitMinActive))
Positive SW limit switch ap‐
proached.

The positive software limit switch was reached.
(<TO>.StatusWord.X16 (SWLimitMaxActive))

Negative HW limit switch ap‐ The negative hardware limit switch has been approached or overtraveled.
proached.
(<TO>.StatusWord.X17 (HWLimitMinActive))
Positive HW limit switch ap‐
proached.

1506

The positive hardware limit switch has been approached or overtraveled.
(<TO>.StatusWord.X18 (HWLimitMaxActive))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No job active at technology object.
(<TO>.StatusWord.X6 (Done))

Homing job

The technology object executes a homing job of the Motion Control instruction "MC_Home" or
from the axis control panel.
(<TO>.StatusWord.X11 (HomingCommand))

Jog

The axis is being moved with a command for jog mode of Motion Control instruction "MC_Mo‐
veJog".
(<TO>.StatusWord.X9 (JogCommand))

Velocity specification

The axis is traversed with a job with velocity specification of the Motion Control instruction
"MC_MoveVelocity" or from the axis control panel.
(<TO>.StatusWord.X10 (VelocityCommand))

Positioning job

The axis is traversed with a positioning job of Motion Control instruction "MC_MoveAbsolute"
or "MC_MoveRelative" or from the axis control panel.
(<TO>.StatusWord.X8 (PositioningCommand))

Constant velocity

The axis is moved with constant velocity or is stationary.
(<TO>.StatusWord.X12 (ConstantVelocity))

Standstill

The axis is in standstill.
(<TO>.StatusWord.X7 (StandStill))

Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Torque limit active

The configured threshold for the force/torque affects the axis.
(<TO>.StatusWord.X27 (InLimitation))

Synchronization

Synchronous axis only
The axis is synchronized to the leading value of a leading axis.
(<TO>.StatusWord.X21 (Synchronizing))

Synchronous operation

Synchronous axis only
The axis is synchronized and moves synchronously to the leading axis.
(<TO>.StatusWord.X22 (Synchronous))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or several configuration parameters are adjusted internally at a certain time.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1507

Control de movimiento
6.1 Using S7-1500 Motion Control
Warning

Description

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicError))

Synchronization

Synchronous axis only
Error during synchronous operation. The leading axis specified for the corresponding Mo‐
tion Control instruction was not configured as a possible leading axis.
(<TO>.WarningWord.X14 (SynchronousError))

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration data were inco‐
rrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

Error in user program at a Motion Control instruction or its use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

Error in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Encoder

Error in encoder system.
(<TO>.ErrorWord.X5 (SensorFault))

Data exchange

Communication with a connected device is faulty.
(<TO>.ErrorWord.X7 (CommunicationFault))

I/O

Error accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met (e.g. technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Homing

Error during homing process.
(<TO>.ErrorWord.X10 HomingFault))

Positioning

The positioning axis was not positioned correctly at the end of a positioning motion.
(<TO>.ErrorWord.X12 (PositioningFault))

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Following error

The maximum permitted following error has been exceeded.
(<TO>.ErrorWord.X11 (FollowingErrorFault))

SW limit switch

A software limit switch has been reached.
(<TO>.ErrorWord.X8 (SwLimit))

1508

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Error

Description

HW limit switch

A hardware limit switch has been reached or overtraveled.
(<TO>.ErrorWord.X9 (HWLimit))

Synchronization

Synchronous axis only
Error during synchronous operation. The leading axis specified for the corresponding Motion
Control instruction was not configured as a possible leading axis.
(<TO>.ErrorWord.X14 (SynchronousError))

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord (Página 1455) section.

Motion Status V3.0
Description
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The Diagnostics function is available in online
operation.

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Operative encoder

Operative encoder of the axis

Target position

Current target position of an active positioning job
The target position value is only valid during execution of a positioning job.
(<TO>.StatusPositioning.TargetPosition)

Actual position

Actual position of the axis
If the technology object is not homed, then the value is displayed relative to the position that
existed when the technology object was enabled.
(<TO>.ActualPosition)

Actual velocity

Actual velocity of the axis
(<TO>.ActualVelocity)

Velocity override

Percentage correction of the velocity specification
The velocity setpoint specified in Motion Control instructions or set by the axis control panel is
superimposed with an override signal and corrected as a percentage. Valid velocity correction
values range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1509

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the meaning of the status data:
Status

Description

Velocity

Configured maximum velocity
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

6.1.1.10

Appendix

Technology alarms
Overview of the technology alarms
The following table shows an overview of the technology alarms and the corresponding alarm
reactions. When a technology alarm occurs, evaluate the entire indicated alarm text, in order
to find the precise cause.

Legend
No.

Number of the technology alarm
(corresponds to <TO>.ErrorDetail.Number)

Reaction

Effective alarm reaction
(corresponds to <TO>.ErrorDetail.Reaction)

Error bit

Bit that is set in "<TO>.ErrorWord" when the technology alarm occurs
A description of the bits can be found in the appendix of the documentation "S7-1500/
S7-1500T Axis functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766462).

Warning bit

Bit that is set in "<TO>.WarningWord" when the technology alarm occurs
A description of the bits can be found in the appendix of the documentation "S7-1500/
S7-1500T Axis functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766462).

Restart

To acknowledge the technology alarm, the technology object must be reinitialized (Res‐
tart).

Diagnostic buffer

The alarm is entered in the diagnostics buffer.

Alarm text

Displayed alarm test (limited)

1510

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

List of the technology alarms
No.

Reaction

Error bit Warning bit

Restart

Diagnos‐
tic buffer

Alarm text

101 Remove enable

X1

-

X

X

Configuration error.

102 Remove enable

X15

-

X

X

Drive configuration adaptation error.

103 Remove enable

X15

-

X

X

Encoder configuration adaptation error.

104 Stop with maximum
dynamic values

X1

-

-

-

SW limit switch specification error.

105 Remove enable

X1

-

X

X

Drive configuration error.

106 Remove enable

X1

-

-

X

Drive connection configuration error.

107 Remove enable

X1

-

X

X

Encoder configuration error.

108 Remove enable

X1

-

-

X

Encoder connection configuration error.

109 Remove enable

X1

-

X

-

Configuration error.

110 No reaction

-

X1

-

-

Configuration is adjusted internally.

111 No reaction

-

X15

-

X

TO and drive configuration inconsistent.

112 No reaction

-

X15

-

X

TO and encoder configuration inconsistent.

113 Remove enable

X2

-

X

-

Isochronous mode not possible.

114 Remove enable

X1

-

X

-

Cross-PLC synchronous operation configura‐
tion error.

201 Remove enable

X0

-

X

X

Internal error.

202 No reaction

X0

-

X

-

Internal configuration error.

203 Remove enable

X0

-

X

-

Internal error.

204 Remove enable

X0

-

-

-

Commissioning error.

304 Stop with emergency
stop ramp

X2

-

-

-

Velocity limit is zero.

305 Stop with emergency
stop ramp

X2

-

-

-

● Limit value of the acceleration is zero.

306 Stop with emergency
stop ramp

X2

-

-

-

Jerk limit is zero.

307 Stop with maximum
dynamic values

X2

-

-

X

● Negative numerical value range of the
position reached.

● Limit value of the deceleration is zero.

● Positive numerical value range of the
position reached.
308 Remove enable

X2

-

-

X

● Negative numerical value range of the
position exceeded.
● Positive numerical value range of the
position exceeded.

321 Stop with emergency
stop ramp
322 No reaction

X3

-

-

-

Axis not homed.

-

X3

-

-

Restart not executed.

323 Remove enable

X3

-

-

-

MC_Home could not be performed.

341 Stop with maximum
dynamic values

X10

-

-

-

Error in homing data.

342 Stop with emergency
stop ramp

X10

-

-

-

Reference output cam/encoder zero mark not
found.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1511

Control de movimiento
6.1 Using S7-1500 Motion Control
No.

Reaction

Error bit Warning bit
-

Restart

Diagnos‐
tic buffer

-

-

Alarm text

343 Remove enable

X1

Homing function not supported by device.

401 Remove enable

X13

-

-

X

Error accessing logical address.

411 Remove enable

X5

-

-

X

Faulty encoder at the logical address.

412 Remove enable

X5

-

-

-

Permitted actual value range exceeded.

421 Remove enable

X4

-

-

X

Faulty drive at the logical address.

431 Remove enable

X7

-

-

X

Faulty communication with device at logical
address.

501 No reaction

-

X6

-

-

Programmed velocity is limited.

502 No reaction

-

X6

-

-

● Programmed acceleration is being limited.
● Programmed deceleration is being limited.

503 No reaction

-

X6

-

-

Programmed jerk is limited.

504 No reaction

-

X6

-

-

Speed setpoint monitoring active.

511 No reaction

-

X6

-

-

Dynamic limits are violated by the kinematics
motion.

X11

-

-

-

Following error.

-

X11

-

-

Warning following error tolerance.

X9

-

-

-

● Positive HW limit switch approached.

521 Remove enable
522 No reaction
531 Remove enable

● Negative HW limit switch approached.
● Illegal free travel direction of active
hardware limit switch.
● HW limit switch polarity reversed, free
travel not possible.
● Both hardware limit switches active,
retraction not possible.
533 Stop with maximum
dynamic values

X8

-

-

-

534 Remove enable

X8

-

-

-

● Negative SW limit switch is crossed.

541 Remove enable

X12

-

-

-

Position monitoring error.

542 Remove enable

X2

-

-

-

Clamping monitoring error: Axis leaving clam‐
ping tolerance window.

550 Track setpoints

X4

-

-

-

Drive-autonomous motion is being executed.

551 No reaction

X2

X6

-

-

Maximum velocity cannot be reached with dri‐
ve/axis parameters.

552 Remove enable

X15

-

-

-

Encoder adaptation error during ramp-up.

601 Stop with maximum
dynamic values

X14

-

-

-

Leading axis is not assigned or defective.

603 Remove enable

X14

-

-

-

Leading axis is not in position-controlled mo‐
de.

608 Stop with maximum
dynamic values

X14

-

-

-

Error during synchronization.

611 Remove enable

X2

-

-

-

The cam specified in the MC_CamIn.Cam pa‐
rameter has not been configured or is not avai‐
lable or is not interpolated.

● Negative SW limit switch approached.
● Positive SW limit switch approached.
● Positive SW limit switch is crossed.

1512

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
No.

Reaction

Error bit Warning bit

Restart

Diagnos‐
tic buffer

Alarm text

612 Remove enable

X2

-

-

-

Specified cam has not been interpolated.

613 Remove enable

X1

-

-

-

Accuracy of leading value is limited.

700 Remove enable

X2

-

-

-

Output cam limiting error.

701 Remove enable

X13

-

-

-

I/O output error.

702 Remove enable

X2

-

-

-

Position value valid.

703 Remove enable

X2

-

-

-

Cam track data faulty.

704 Remove enable

X2

-

-

-

Output cam data faulty.

750 Remove enable

X2

-

-

-

Measuring job not possible during homing of
assigned axis.

752 Remove enable

X2

-

-

-

Validity range of measuring job not recogni‐
zed.

753 Remove enable

X2

-

-

-

Only one measuring input can access an en‐
coder at a time.

754 Remove enable

X2

-

-

-

Measuring input configuration in external de‐
vice is not correct.

755 Remove enable

X13

-

-

-

Measuring job not possible.

758 No reaction

X2

-

-

-

A measuring edge was not evaluated.

900 Remove enable

X2

-

X

-

Invalid leading values.

901 Remove enable

X7

-

-

-

Data transmission error

902 Remove enable

X1

-

-

-

Accuracy of leading value is limited.

Consulte también
Technology alarms (Página 1481)

Technology alarms 101-114
Technology alarm 101
Alarm reaction: Remove enable

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1513

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Configuration error.
Value in <tag> not allowed.

Adjust the specified value.

Faulty load gear factors.

Adjust the load gear factors in the "<TO>.LoadGear.Nu‐
merator" and/or "<TO>.LoadGear.Denominator" parame‐
ters.

At least one encoder required. Sensor[].existent

Configure at least one encoder.

Sensor[1] must be configured for DSC.

Configure Sensor[1].

Values in Sensor[1..4].Parameter.FineResolutionXist1 and
P979 are not identical.

Set the identical fine resolution on the technology as on
the drive.

Controller parameter incorrect.

Adjust the value of the "<TO>.PositionController.Kv" pa‐
rameter.

PROFIBUS parameter assignment is inconsistent; sum Ti and
To greater than send clock.

Adjust the send clock in the hardware configuration.

Drive or drive telegram type or encoder not suitable for DSC.

Check whether the drive can be operated with DSC and
adjust the drive telegram if required.

TimeOut parameter outside of limits.

Set the monitoring time of the axis control panel to a valid
value.

Simulation.Mode parameter outside of limits.

Set the parameter to a valid value.

Telegram in Actor.Interface.AddressIn and AddressOut are not
identical.

Set the identical drive telegram type for sending and re‐
ceiving direction.

Illegal combination for referencing data incremental. encoder.

Check the active and passive homing settings.

Telegram in Sensor[1..4].Interface.AddressIn and AddressOut
are not identical.

Set the identical encoder telegram type for sending and
receiving direction.

The VREF of the analog output or the bit driver are assigned
several times.

Make sure that different addresses are assigned for all
technology objects in the project.

Technology alarm 102
Alarm reaction: Remove enable

1514

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Drive configuration adaptation error.
Drive is not assigned to a SINAMICS device.

The drive adaptation is only available for SINAMICS dri‐
ves.

Drive is not interconnected directly to I/O area.

During configuration of the axis, the logical addresses
were set to a data block or bit memory, for example. The
adaptation is only possible when the encoder has been
directly interconnected to an I/O area.

Adaptation canceled due to insufficient resources.

Check whether your device supports acyclic data com‐
munication according to PROFIdrive.

Parameter does not exist, value unreadable or invalid.
Maximum speed
Maximum torque/force (P1520)
Maximum torque/force (P1521)
Torque resolution
Rated speed
Rated torque
Motor type

Technology alarm 103
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Encoder configuration adaptation error.
Encoder is not assigned to a SINAMICS device.

The encoder adaptation is only available for SINAMICS
devices and external Siemens encoders.

Encoder is not interconnected directly to I/O area.

During configuration of the axis, the logical addresses
were set to a data block or bit memory address area, for
example. The adaptation is only possible when the enco‐
der has been directly interconnected to an I/O area.

Adaptation canceled due to insufficient resources.

Check whether your device supports acyclic data com‐
munication according to PROFIdrive.

Parameter does not exist, value unreadable or invalid.
Encoder system
Encoder resolution
Encoder fine resolution Gx_XIST1
Encoder fine resolution Gx_XIST2
Encoder revolutions

Technology alarm 104
Alarm reaction: Stop with maximum dynamic values

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1515

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

SW limit switch specification error.
Neg. SW limit switch greater than pos. SW limit switch.

Change the position of the software limit switches.

Technology alarm 105
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Drive configuration error.
HW Configuration.

● Connect a suitable device.

The TO needs a smaller servo cycle clock.

● Check the device (I/Os).
● Check the topology of the project.
● Compare the device configuration and the
configuration of the technology object.
● Contact customer service.

Error in internal communication.

● Check the project for consistency and reload the
project into the controller.
● Contact customer service.

Address for drive data does not exist in project.

Check the project for consistency and reload the project
into the controller.

Error during the parameter assignment of the frame for the tor‐ Check the interconnection of the SIEMENS additional te‐
que data.
legram 750 (torque data).
Address overlay during sensor interconnection.

Make sure that different addresses are assigned for all
technology objects in the project.

Technology alarm 106
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Drive connection configuration error.
System has no communication with drive.

Internal system error.
● Check the project for consistency and reload the
project into the controller.
● Contact customer service.

Drive not initialized during ramp-up.

● Ensure that the communication between the controller
and drive is established. To do this, evaluate the
"<TO>.StatusDrive.CommunicationOK" parameter
before enabling the axis.
● To enable a technology object, the drive initialization
must be complete. Trigger the job again later.

1516

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 107
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Encoder configuration error.
HW Configuration

● Connect a suitable device.

The TO needs a smaller servo cycle clock.

● Check the device (I/Os).
● Check the topology of the project.
● Compare the device configuration and the
configuration of the technology object.
● Contact customer service.

Error internal communication.

● Check the project for consistency and reload the
project into the controller.
● Contact customer service.

Address overlay during sensor interconnection.

Make sure that different addresses are assigned for all
technology objects in the project.

Technology alarm 108
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Encoder connection configuration error.
System without communication to encoder.

Internal system error.
● Check the project for consistency and reload the
project into the controller.
● Contact customer service.

Encoder not initialized during ramp-up.

● Ensure that the communication between the controller
and encoder is established. To do this, evaluate the
"<TO>.StatusSensor[1..4].CommunicationOK"
parameter before enabling the axis and also check if
the status of the encoder actual value is
"<TO>.StatusSensor[1..4].State" = VALID (2).
● To enable a technology object, the encoder
initialization must be complete. Trigger the job again
later.

Encoder data address missing in project.

Check the project for consistency and reload the project
into the controller.

Technology alarm 109
Alarm reaction: Remove enable

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1517

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Configuration error.
Neg. HW limit switch.

● Connect a suitable device.

Pos. HW limit switch

● Check the device (I/Os).

Reference output cam "Active homing".

● Check the topology of the project.

Reference output cam "Passive homing".
Enable bit for the analog drive interface.

● Compare the device configuration and the
configuration of the technology object.

DriveReady bit of the analog drive interface.

● Contact customer service.

Measurement sensing input is faulty.
Output cam output faulty.

Technology alarm 110
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Configuration is adjusted internally.
Actor.DriveParameter.MaxSpeed is limited.

● Correct the reference value in the drive and in the
configuration of the technology object to
"<TO>.Actor.MaxSpeed" / 2.
● With analog drive connection, correct the reference
value in the drive and in the configuration of the
technology object to "<TO>.Actor.MaxSpeed" / 1.17.
● The value can be set in the drive, for example, in
p2000 = p1082.

PositioningMonitoring.ToleranceTime is limited.

Change the configuration data.

DynamicDefaults.EmergencyDeceleration is limited.
DriveParameter.ReferenceTorque too small.

Technology alarm 111
Alarm reaction: No reaction

1518

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

TO and drive configuration inconsistent.
Different telegram.

Match the telegram configuration for the technology ob‐
ject with the telegram configuration in the drive. (P922 in
drive)

Incompatible torque resolution.

Adjust the high torque resolution for the drive.

Application cycle of the drive and servo cycle clock are not the
same.

Adjust the application cycle of the drive in the device con‐
figuration for the PROFIBUS drive.

Application cycle of the drive and processing cycle of the TO
are not the same.
Linear motor configured.

Set round-frame motor (P300) in the drive.

Technology alarm 112
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

TO and encoder configuration inconsistent.
Different telegram type.

Match the telegram configuration for the technology ob‐
ject with the telegram configuration in the encoder.

Encoder is not an absolute encoder.

Configure the encoder for the technology object as an
incremental encoder.

Application cycle of the encoder and servo cycle clock are not
the same.

Adjust the application cycle of the encoder in the device
configuration for the PROFIBUS encoder.

Application cycle of the encoder and processing cycle of the TO
are not the same.

Technology alarm 113
Alarm reaction: Remove enable

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1519

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Isochronous mode not possible.

● The configured output for the cam or cam track
technology object or the input for the technology
object measuring input cannot be used in isochronous
mode.
Configure the I/O in the device configuration as
isochronous I/O.
● The maximum permissible bus clock TSend has been
exceeded.
The maximum bus clock for the use of SINAMICS
measuring inputs is up to 8 ms.
● Make sure that the organization block MC-Servo
[OB91] is called synchronously with the bus system.

Technology alarm 114
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Cross-PLC synchronous operation configuration error.

Check the configuration of the interconnected leading and
following axes. Make sure that all relevant tags are co‐
rrectly configured for cross-PLC synchronous operation.

Technology alarms 201-204
Technology alarm 201
Alarm reaction: Remove enable
Restart: Required
Alarm text

Solution

Internal error.

Contact customer service.

Technology alarm 202
Alarm reaction: No reaction
Restart: Required
Alarm text

Solution

Internal configuration error.

Contact customer service.

1520

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 203
Alarm reaction: Remove enable
Restart: Required
Alarm text

Solution

Internal error.

Contact customer service.

Technology alarm 204
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

Commissioning error.
Connection to the TIA Portal interrupted.

Check the connection properties.

Technology alarms 304-343
Technology alarm 304
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Velocity limit is zero.

Enter a non-zero value for the maximum velocity (Dyna‐
micLimits.MaxVelocity) in the dynamic limits.

Technology alarm 305
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Acceleration/deceleration limit is zero.
Acceleration

Enter a non-zero value for the maximum acceleration
(DynamicLimits.MaxAcceleration) in the dynamic limits.

Deceleration

Enter a non-zero value for the maximum deceleration
(DynamicLimits.MaxDeceleration) in the dynamic limits.

Technology alarm 306
Alarm reaction: Stop with emergency stop ramp

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1521

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Jerk limit is zero.

Enter a non-zero value for the maximum jerk (DynamicLi‐
mits.MaxJerk) in the dynamic limits.

Technology alarm 307
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Remedy

Negative/positive numerical value range of the position reached.
Negative

Enable the "Modulo" setting for the technology object.

Positive

Technology alarm 308
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Negative/positive numerical value range of the position excee‐
ded.
Negative

Enable the "Modulo" setting for the technology object.

Positive

Technology alarm 321
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Axis not homed.

To perform an absolute positioning motion, you must ho‐
me the technology object.

Technology alarm 322
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Restart not executed.
The technology object is not ready for restart.

Download the project again.

The condition for restart of the technology object is not satisfied. Disable the technology object.

1522

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 323
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

MC_Home could not be performed.

● Enable the "Modulo" setting for the technology object.
● Adjust the position value for use of the Motion Control
instruction "MC_Home".

Technology alarm 341
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Remedy

Error in homing data.
Approach velocity is zero.

Check the configuration for homing (Homing.Approach‐
Velocity).

Homing velocity is zero.

Check the configuration for homing (Homing.Referencing‐
Velocity).

Technology alarm 342
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Reference cam/encoder zero mark not found.

The reference cam configured for homing was not found
in the traversing range of the axis.

Technology alarm 343
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Homing function not supported by device.

Configure a reference switch input for the pulse generator
output used in the properties of the C-CPU.
("Pulse generators (PTO/PWM) > PTO[n]/PWN[n] > Hard‐
ware inputs/outputs")
When homing across a zero mark, the CPU transfers the
reference switch input as zero mark.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1523

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 401-431
Technology alarm 401
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

Error accessing logical address.
Invalid address.

● Connect a suitable device.

Input address is invalid.

● Check the device (I/Os).

Output address is invalid.

● Check the topology of the project.
● Compare the device configuration and the
configuration of the technology object.
● Configure the valid hardware limit switch.
● Contact customer service.

Error during parameter assignment of the technology block dri‐ Make sure that different addresses are assigned for all
ver.
technology objects in the project.
Address overlay during sensor interconnection.
Address overlay during sensor interconnection.

Technology alarm 411
Alarm reaction: Remove enable

1524

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Faulty encoder at the logical address.
Alarm message from encoder.

Check the function, connections and I/Os of the encoder.

HW error encoder.
Encoder dirty.
Read error encoder absolute value.

Compare the encoder type in the drive or encoder para‐
meter P979 with the configuration data of the technology
object.

Zero mark monitoring encoder.

Encoder signals error in zero mark monitoring (fault code
0x0002 in Gx_XIST2, see PROFIdrive profile).

Encoder in Parking state.

● Search for the cause of the error in the connected
drive or encoder.
● Check whether the alarm was possibly triggered by a
commissioning action involving the drive or encoder.

Encoder not ready after "MC_Reset".

Before sending the Motion Control instruction "MC_Po‐
wer", check whether the encoder is ready during switch
on.
Check the following tags of the corresponding technology
object:
● <TO>.StatusDrive.CommunicationOK
● <TO>.StatusSensor[1..4].CommunicationOK
● <TO>.StatusSensor[1..4].State

Technology alarm 412
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Permitted actual value range exceeded.
Positive.

Home the axis/encoder in a valid actual value range.

Negative.
Modulo length.

Adjust the modulo length to the utilized encoder.

Technology alarm 421
Alarm reaction: Remove enable

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1525

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Faulty encoder at the logical address.
Alarm message from drive.

● Check the functions and connections of the drive.

No drive control required.

● Enable and acknowledge safety function in the drive.
You can find more information in the section "Safety
functions in the drive" of the documentation "S7-1500/
S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/
109766462)".

Drive has shut down.
Drive enable not possible.

● In the case of analog connected axes, check if the
"<TO>.StatusDrive.InOperation" tag = TRUE.

Technology alarm 431
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

Faulty communication with device at logical address.
Drive failed.

Check the function, connections and I/Os of the drive.

Signs of life of drive faulty.

● Check the function, connections and I/Os of the drive.
● Compare the clock parameters in the device
configuration (PROFIBUS line, slave OM for drive or
encoder) and the execution system. Tmapc and servo
must be set to the same cycle time.
(Incorrect parameter assignment is indicated by
reason 0x0080.)
● If you call the application cycle of the
MC‑Servo [OB91] reduced to the send clock of a
PROFINET IO system and the technology alarm 431
(Signs of life of drive faulty) is repeatedly shown,
increase the update time of the send clock.

Encoder failed.

Check the function, connections and I/Os of the encoder.

Signs of life of encoder faulty.

● Check the function, connections and I/Os of the
encoder.
● Compare the clock parameters in the device
configuration (PROFIBUS line, slave OM for drive or
encoder) and the execution system. Tmapc and servo
must be set to the same cycle time.

1526

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 501-552
Technology alarm 501
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Programmed velocity is limited.

● Check the value for the velocity of the Motion Control
instruction.
● Check the configuration of the dynamic limits.

Technology alarm 502
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Programmed acceleration/deceleration is being limited.
Acceleration

● Check the value for the acceleration of the Motion
Control instruction.
● Check the configuration of the dynamic limits.

Deceleration

● Check the value for the deceleration of the Motion
Control instruction.
● Check the configuration of the dynamic limits.

Technology alarm 503
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Programmed jerk is limited.

● Check the value for the jerk of the Motion Control
instruction.
● Check the configuration of the dynamic limits.

Technology alarm 504
Alarm reaction: No reaction

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1527

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Speed setpoint monitoring active.

● Check the mechanical configuration.
● Check the encoder connection.
● Check the configuration of the speed setpoint
interface.
● Check the configuration of the control loop.
● Check the value for the maximum velocity
(<TO>.DynamicLimits.MaxVelocity).

Technology alarm 511
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Dynamic limits are violated by the kinematics motion.
Velocity

Reduce the velocity of the kinematics motion.

Acceleration

Reduce the acceleration of the kinematics motion.

Deceleration

Reduce the deceleration of the kinematics motion.

Technology alarm 521
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Following error.

● Check the configuration of the control loop.
● Check the direction signal of the encoder.
● Check the configuration of the following error
monitoring.

Technology alarm 522
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Warning following error tolerance.

● Check the configuration of the control loop.
● Check the direction signal of the encoder.
● Check the configuration of the following error
monitoring.

1528

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 531
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Pos. HW limit switch reached.

Acknowledge the alarm.
After the acknowledgment, motions in the negative direc‐
tion are allowed.

Neg. HW limit switch reached.

Acknowledge the alarm.
After the acknowledgment, motions in the positive direc‐
tion are allowed.

Illegal free travel direction of active hardware limit switch.

The programmed direction of movement is disabled due
to the active hardware limit switch.
Retract the axis in the opposite direction.

Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

HW limit switch polarity reversed, free travel not possible.
Both hardware limit switches active, retraction not possible.

● Check the mechanical configuration of the hardware
limit switch.
● Check the limit switches.
● The error can be acknowledged by switching the
controller off and on or using "MC_Reset" with
"Restart" = TRUE.

Technology alarm 533
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Remedy

Software limit switch is approached.
Negative

With the current dynamic values, the axis will approach
the negative software limit switch.
For positioning axes, check the position setpoint.
For following axes, check whether the current dynamics
violates the configured dynamic limits.
Move the axis in positive direction away from the negative
software limit switch.

Positive

With the current dynamic values, the axis will approach
the positive software limit switch.
For positioning axes, check the position setpoint.
For following axes, check whether the current dynamics
violates the configured dynamic limits.
Move the axis in negative direction away from the positive
software limit switch

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1529

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 534
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Software limit switch was overshot.
Negative

The software limit switch was overtraveled.
Acknowledge the alarm.
After the acknowledgment, motions in the positive direc‐
tion are allowed.

Positive

The software limit switch was overtraveled.
Acknowledge the alarm.
After the acknowledgment, motions in the negative direc‐
tion are allowed.

Technology alarm 541
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Position monitoring error.
Target range not reached.

The target range was not reached within the tolerance
time.
● Check the configuration of the position monitoring.
● Check the configuration of the control loop.

Exit target range again.

The target range was exited within the minimum dwell
time.
● Check the configuration of the position monitoring.
● Check the configuration of the control loop.

Technology alarm 542
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Clamping monitoring error: Axis leaving clamping tolerance win‐ The axis has executed a motion greater than the permis‐
dow.
sible tolerance at the fixed stop.
Check whether the fixed stop has broken away.

Technology alarm 550
Alarm reaction: Track setpoints

1530

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Drive-autonomous motion is being executed.

The drive is performing a motion that was not specified by
the technology object.
Check if a safety function is active in the drive. You can
find more information in the section "Safety functions in
the drive" of the documentation "S7-1500/S7-1500T Axis
functions (https://
support.industry.siemens.com/cs/ww/en/view/
109766459)".

Technology alarm 551
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Maximum velocity cannot be reached with drive/axis parameters. The configured maximum velocity cannot be reached with
the configured mechanics of the axis.
Check the configuration of the mechanics and the set re‐
ference speed.

Technology alarm 552
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Encoder adaptation error during ramp-up.
Encoder is not assigned to a SINAMICS device.

● The operationally active encoder could not be
adapted. Other encoders that can be used are
configured. Use the encoder switch (MC_SetSensor).
● The encoder set as the operationally active encoder
could not be adapted.
● Specify a different sensor for the initialization of the
technology object.

Encoder is not interconnected directly to I/O area.

During configuration of the axis, the logical addresses
were set to a data block or bit memory address area, for
example. The adaptation is only possible when the enco‐
der has been directly interconnected to an I/O area.

Adaptation canceled due to insufficient resources.

Check whether your device supports acyclic data com‐
munication according to PROFIdrive.

Parameter does not exist, value unreadable or invalid.
Encoder system
Encoder resolution
Encoder fine resolution
Encoder revolutions

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1531

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 601-613
Technology alarm 601
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Solution

Leading axis is not assigned or defective.

Configure the possible leading value axes for the follo‐
wing axis under "Configuration > Leading value intercon‐
nections".
For a cross-PLC synchronous operation make sure that
the option "Synchronous to the bus" is selected for the
MC-SERVO OBs of all connected CPUs under "Proper‐
ties > General > Cycle time".

Technology alarm 603
Alarm reaction: No reaction
Restart: Not required
Alarm text

Solution

Leading axis is not in position-controlled mode.

The following axis must be operated in position-controlled
mode for synchronous operation functionality.

Technology alarm 608
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Solution

Error during synchronization.

Prevent a reversing leading value motion during the
synchronization operation.

Technology alarm 611
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

The cam specified in the MC_CamIn.Cam parameter has not
been configured or is not available.

Configure and interpolate the cam. Restart the job.

Technology alarm 612
Alarm reaction: Remove enable

1532

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Specified cam has not been interpolated.

Interpolate the cam used for camming with the Motion
Control instruction "MC_InterpolateCam".

Technology alarm 613
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Accuracy of leading value is limited.

Decrease the configured delay time.

Technology alarms 700-758
Technology alarm 700
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Output cam limiting error.
Cam position: OnPosition

The position for the "OnPosition" parameter could not be
calculated.
Invalid positions (e.g. "OnPosition" > "OffPosition") were
calculated due to lead times.
The output cam cannot be switched due to the axis dyna‐
mics and compensation times.

Cam position: OffPosition

The position for the "OffPosition" parameter could not be
calculated.
Invalid positions (e.g. "OffPosition" > "OnPosition") were
calculated due to lead times.
The output cam cannot be switched due to the axis dyna‐
mics and compensation times.

Technology alarm 701
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

I/O output error.

The digital output for the output cam or cam track techno‐
logy object cannot be addressed.
Download the device configuration again.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1533

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 702
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Position value invalid.

● A Motion Control job "MC_Reset" is being executed
on the axis. Wait until the technology object restart is
complete.
● The encoder values are invalid due to an encoder
error. Check the encoder and adjust the configuration
if necessary.

Technology alarm 703
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Output cam data faulty.
Output cam: Output cam number

Check the configuration of the relevant output cam in the
cam track and adjust the values if necessary.
Examples of a correct configuration:
● "<TO>.Parameter.Cam[1..32].OnPosition" <
"<TO>.Parameter.Cam[1..32].OffPosition"
● "<TO>.Parameter.Cam[1..32].Duration" >
"<TO>.Parameter.OffCompensation" "<TO>.Parameter.OnCompensation"

Technology alarm 704
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Output cam data faulty.

Check the configuration of the output cam and adjust the
values if necessary.
Examples of a correct configuration:
● "MC_OutputCam.OnPosition" <
"MC_OutputCam.OffPosition"
● "MC_OutputCam.Duration" >
"<TO>.Parameter.OffCompensation" "<TO>.Parameter.OnCompensation"

Technology alarm 750
Alarm reaction: Remove enable

1534

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Measuring job not possible during homing of assigned axis.

Do not use the motion instructions "MC_Home" and
"MC_MeasuringInput" simultaneously.

Technology alarm 752
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Validity range of measuring job not recognized.

The measuring range specified in Motion Control instruc‐
tion "MC_MeasuringInput" was not recognized.
Adjust the measuring range.

Technology alarm 753
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Only one measuring input can access an encoder at a time.

Use only one Motion Control instruction "MC_MeasurinIn‐
put" for an encoder.

Technology alarm 754
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Measuring input configuration in external device is not correct.

Check the configuration of the measuring inputs on the
external device.

Technology alarm 755
Alarm reaction: Remove enable

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1535

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Measuring job not possible.
Device has reported an error.

The measurement was aborted with error.
Check the measuring input functionality in the utilized de‐
vice

Cyclic measuring is not possible with telegram 39x.

● Use the Motion Control instruction
"MC_MeasuringInput" for starting a one-time
measurement.
● Cyclic measuring is only possible when measuring
using TM Timer DIDQ. Change the configuration of
the measuring input type to "TM Timer DIDQ".

Technology alarm 758
Alarm reaction: None
Restart: Not required
Alarm text

Remedy

A measuring edge was not evaluated.

An edge was already detected at the input of the measu‐
ring input even though the module was not yet ready.
The measured value is provided at the next edge.

Technology alarms 900-902
Technology alarm 900
Alarm reaction: Remove enable
Restart: Required
Alarm text

Solution

Invalid leading values

Check whether the set tolerance time at the parameter
"<TO>.Parameter.ToleranceTimeExternalLeadingVa‐
lueInvalid" was exceeded.
Check the connection of the interconnected components.
Make sure that there is no communication interference.

Technology alarm 901
Alarm reaction: Remove enable

1536

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Data transmission error
Invalid version

Use a leading value telegram with a valid version.

Invalid modulo start value

Scale the modulo start value of the external leading value
at the parameter "<TO>.StatusExternalLeadingVa‐
lue.ModuloStartValue".

Invalid modulo length

Scale the modulo length of the external leading value at
the parameter "<TO>.StatusExternalLeadingValue.Mo‐
duloLength".

Sign-of-life error

Check the communication.

Invalid position

Check the leading value of the leading axis on the other
CPU.

Invalid velocity
Invalid acceleration

Technology alarm 902
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Accuracy of leading value is limited.

Decrease the configured delay time.

Error ID for Motion Control instructions
Errors in Motion Control instructions are signaled using the parameters "Error" and "ErrorID".
Under the following conditions, "Error" = TRUE and "ErrorID" = 16#8xxx are indicated for the
Motion Control instruction:
● Illegal status of the technology object, which prevents the execution of the job.
● Illegal parameter assignment of the Motion Control instruction, which prevents the
execution of the job.
● As a result of the alarm reaction for a technology object error.
The following tables list all "ErrorIDs" that can be indicated for Motion Control instructions. In
addition to the cause of the error, solutions for eliminating the error are also listed:

16#0000 - 16#800F
ErrorID

Description

Remedy

16#0000

No error

-

16#8001

A technology alarm (technology object error)
occurred while processing the Motion Control
instruction.

In the technology data block, an error message is output at the
"ErrorDetail.Number" tag.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

You can find a list of the technology alarms and alarm reactions
in the "Technology alarms (Página 1510)" appendix.

1537

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#8002

Illegal specification of the technology object

● Check the specification of the technology object for the
"Axis", "Master",
"SlaveOutputCamCamTrackMeasuringInput" or "Cam"
parameter.
● You can use a kinematics technology object only for the
"AxesGroup" parameter.
● With "MC_MeasuringInputCyclic": Specify a valid
measuring input type for parameter "MeasuringInputType".

16#8003

Illegal velocity specification

Specify a permissible value for the velocity for parameter "Ve‐
locity".

16#8004

Illegal acceleration specification

Specify a permissible value for the acceleration for parameter
"Acceleration".

16#8005

Illegal deceleration specification

Specify a permissible value for the deceleration for parameter
"Deceleration".

16#8006

Illegal jerk specification

Specify a permissible value for the jerk for parameter "Jerk".

16#8007

Illegal direction specification

Specify a permissible value for the rotation direction for para‐
meter "Direction" or "SyncDirection".

Invalid entry

Reset both the "JogForward" parameter and the "JogBack‐
ward" parameter.

Both the "JogForward" and "JogBackward"
parameters are set to TRUE at the same ti‐
me. The axis is braked at the last valid dece‐
leration.
16#8008

Invalid distance specification

Set a valid distance value at parameter "Distance".

16#8009

Invalid position specification

Set a valid position value at parameter "Position".

16#800A

Illegal operating mode

Specify a permissible operating mode for parameter "Mode".

16#800B

Illegal stop mode specifications

Specify a permissible value for the stop mode at the "StopMo‐
de" parameter.

16#800C

Only one instance of the instruction per tech‐ ● The instruction is called at multiple points in the user
nology object is allowed.
program with identical value for parameter "Axis", "Master",
"Slave" or "Cam".
Ensure that only one instruction with the value for parameter
"Axis", "Master", "Slave" or "Cam" is called.
● The error message can occur through the DB editor
functions "Load snapshot as actual values" or "Load start
values as actual values".
Correct the error of the affected technology data block by
switching the CPU to STOP, re-compiling the affected DB,
and loading it into the device.
You can find additional information in the section
"Diagnostics (Página 1480)".

16#800D

The job is not permitted in the current state.
"Restart" is executed.

While a "Restart" is being performed, the technology object
cannot perform any jobs.
Wait until the "Restart" of the technology object is complete.

1538

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#800E

If the technology object is enabled, a "Res‐
tart" is not possible.

Before a "Restart", deactivate the technology object with
"MC_Power.Enable"FALSE.

16#800F

The job cannot be executed because the
technology object is locked.

● Enable the technology object with "MC_Power.Enable" =
TRUE. Restart the job.
● A "MC_Stop" job is active with "Execute" = TRUE. Reset the
job with the parameter "Execute" = FALSE.

16#8010 - 16#802F
ErrorID

Description

Remedy

16#8010

Invalid homing mode for incremental encoder Absolute value adjustment is not possible with an incremental
encoder ("Mode" = 6, 7).
Start a homing process for an incremental encoder using para‐
meter "Mode" = 0, 1, 2, 3, 5, 8, 10, 11, 12.

16#8011

Invalid homing mode for absolute encoder

Passive and active homing ("Mode" = 2, 3, 5, 8, 10) are not
possible for an absolute value encoder.
Start a homing process for an absolute encoder using parame‐
ter "Mode" = 0, 1, 6, 7, 11, 12.

16#8012

The job cannot be executed because the axis
control panel is active.

Return master control to your user program. Restart the job.

16#8013

The online connection between the CPU and
the TIA Portal is down.

Check the online connection to the CPU.

16#8014

No internal job memory available.

The maximum possible number of Motion Control job has been
reached.
Reduce the number of jobs to be executed (parameter "Execu‐
te" = FALSE).

16#8015

Error acknowledgment with "MC_Reset" is
not possible. Error in the configuration of the
technology object.

Check the configuration of the technology object.

16#8016

The actual values are not valid.

To execute a "MC_Home" or positioning job, the actual values
must be valid.
Check the status of the actual values. The "<TO>.StatusSen‐
sor[1..4].State" tag of the technology object must show the va‐
lue 2 (valid).

16#8017

Illegal value for gear ratio numerator

Specify a permissible value for the gear ratio numerator for pa‐
rameter "RatioNumerator".
Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)

16#8018

Illegal value for gear ratio denominator

Specify a permissible value for the gear ratio denominator for
parameter "RatioDenominator".
Permitted integer values:
1 to 2147483647

16#8019

Job cannot be executed. The specified follo‐ Recursive interconnections are not possible. A leading axis
wing axis is the original leading value for the cannot be interconnected as a following axis to its own leading
synchronous operation chain.
value. Specify a permissible following axis for parameter "Sla‐
ve".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1539

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

16#8021

Illegal value for shift of the leading value ran‐ Specify a permissible value for the shift of the leading value
ge
range for parameter "MasterOffset".

Remedy

16#8022

Illegal value for shift of the following value
range

Specify a permissible value for the shift of the leading value
range for parameter "SlaveOffset".

16#8023

Illegal value for scaling of the leading value
range

Specify a permissible value for the scaling of the leading value
range for parameter "MasterScaling".

16#8024

Illegal value for scaling of the following value
range

Specify a permissible value for the scaling of the following value
range for parameter "SlaveScaling".

16#8026

Illegal value for leading value distance

Specify a permissible value for the leading value distance for
parameter "MasterStartDistance".

16#8027

Illegal value for use of cam

Specify a permissible value for cyclic/acyclic use of the cam for
parameter "ApplicationMode".

16#8030 - 16#807F
ErrorID

Description

Remedy

16#8034

Illegal value for synchronous position of the
leading axis

Specify a permissible value for the synchronous position of the
leading axis for parameter "MasterSyncPosition".

16#8035

Illegal value for synchronous position of the
following axis

Specify a permissible value for the synchronous position of the
following axis for parameter "SlaveSyncPosition".

16#8036

Illegal value for type of synchronization

Specify a permissible value for the type of synchronization for
parameter "SyncProfileReference".

16#8040

Illegal value for start position of output cam

Specify a permissible value for the start position of the output
cam for parameter "OnPosition".

16#8041

Illegal value for end position of distance out‐
put cam

Specify a permissible value for the end position of the distance
output cam for parameter "OffPosition".

16#8042

Illegal value for switch-on duration of timebased output cam

Specify a permissible value for the switch-on duration of the
time-based output cam for parameter "Duration".

16#8043

Illegal value for force/torque limiting

Specify a value within the permissible range at the "Limit" pa‐
rameter.
Permitted integer values:
-2147483648 to 2147483648

16#8044

The axis is not configured for torque reduc‐
tion.

16#8045

The job cannot be executed because a job for Switchover to non-position-controlled mode is not possible du‐
traveling to fixed stop is active.
ring active travel to fixed stop.

16#8046

The "MC_TorqueLimiting" job cannot be
deactivated in the "InClamping" state.

Retract the axis and deactivate "MC_TorqueLimiting".

16#8047

The motion results in a fixed stop.

Only motions away from the fixed stop are permitted.

16#804A

Illegal value for additive torque setpoint

Specify a permissible value for the additive torque setpoint at
the "Value" parameter.

16#804B

Illegal value for torque high limit

Specify a permissible value for the high limit of the torque at the
"UpperLimit" parameter.

16#804C

Illegal value for torque low limit

Specify a permissible value for the low limit of the torque at the
"LowerLimit" parameter.

1540

Select drive telegram 102, 103, 105 or 106

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#804D

The value of the high limit of the torque is less
than or equal to the value of the low limit of
the torque.

Adapt the values of the "UpperLimit" and "LowerLimit" parame‐
ters so that the high limit of the torque is greater than the value
of the low limit of the torque.

16#804E

The job cannot be executed because a
"MC_TorqueLimiting" job is active.

Stop the force/torque limit or fixed stop detection. Restart the
"MC_TorqueRange" job.

The job cannot be executed because a
"MC_TorqueRange" job is active.

Exit the setting of the high and low torque limits. Restart the
"MC_TorqueLimiting" job.

16#804F

The axis is not configured for additional tor‐
que values.

Use supplemental telegram 750.

16#8050

Illegal encoder number

Specify a permissible number of the new encoder (1 to 4) for
parameter "MC_SetSensor.Sensor".

16#8051

Illegal number of the reference encoder

Specify a permissible number of the reference encoder for pa‐
rameter "MC_SetSensor.ReferenceSensor".

16#8055

Bit masking not permitted at "MC_SetA‐
xisSTW"

Non-controllable bits are selected in the "STW1 BitMask" and
"STW2 BitMask" bit masks.
Only control permissible bits.

16#805A

Illegal value of the parameter to be changed

At parameter "ParameterNumber", enter a permissible value
for the index of the parameter to be changed.

16#805B

Error in the configuration of the hardware limit Specify a valid tag at the input of the positive/negative hardware
switch.
limit switch.

16#805C

Illegal data type of the value to be written.

Specify a valid data type at the parameter "Value".

16#8062

Illegal approach value

Specify a permissible approach value for the searched for lea‐
ding value for parameter "ApproachLeadingValue".

16#8063

A valid mapping to the definition range (lea‐
ding values) does not exist for the specified
following value.

Specify a permissible following value for parameter "Following‐
Value".

16#8064

A valid mapping to the range of the function
(following values) does not exist for the spe‐
cified leading value.

Specify a permissible leading value for parameter "LeadingVa‐
lue".

16#8070

Illegal value for leading value shift

Specify a permissible value for the leading value shift for para‐
meter "PhaseShift".

16#8071

The job cannot be executed because the axis
is not in position-controlled mode.

Activate position-controlled mode.

16#8074

The job cannot be executed because a
"MC_Home" job is active.

During active or passive homing, an encoder switchover is re‐
jected.

16#8075

The job cannot be executed because no
synchronization operation is active on the
axis.

16#8076

End the simulation of the synchronous operation. Restart the
The job cannot be executed because
synchronization is being simulated at the spe‐ job.
cified axis.

Wait until the "MC_Home" job is complete. Restart the job.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Switch on the synchronous operation function. Restart the job.

1541

Control de movimiento
6.1 Using S7-1500 Motion Control

16#80A0 - 16#8FFF
ErrorID

Description

Remedy

16#80A1

The order cannot be executed because a
synchronous operation job is active.

A "MC_Home" job on a following axis is not executed when a
"MC_CamIn" or "MC_GearInPos" job is active.
Exit the synchronous operation job. Restart the job.

16#80A2

● For one-time measuring with measuring Check and adjust the measuring input and adjust the measuring
range positions, if necessary.
range, the measuring range was run
without a measuring edge being detected.
● The measuring range is invalid with the
configured modulo axis settings.

16#80A3

The measuring input job via PROFIdrive te‐
legram could not be started because a ho‐
ming job is active.

Simultaneous execution of a homing job and a measuring input
job via PROFIdrive telegram is not possible.

16#80A5

Illegal value for start position of measuring
range

Specify a permissible value for the start position of the measu‐
ring range for parameter "MC_MeasuringInput.StartPosition" or
MC_MeasuringInputCyclic.StartPosition.

16#80A6

Illegal value for end position of measuring
range

Specify a permissible value for the end position of the measu‐
ring range for parameter "MC_MeasuringInput.EndPosition" or
MC_MeasuringInputCyclic.EndPosition.

16#80A7

A measurement is performed when measu‐ Check and adjust the measuring input and adjust the measuring
ring with the measuring range, but the calcu‐ range positions, if necessary.
lated position is outside the specified measu‐
ring range. The measured value is discarded.

16#80A8

The job cannot be executed because cam‐
ming is active on the axis.

The Motion Control instructions "MC_PhasingRelative" and
"MC_PhasingAbsolute" can only be applied to active gearing
with "MC_GearIn" or "MC_GearInPos" ("MC_GearIn.InGear" =
TRUE or "MC_GearInPos.InSync" = TRUE).

16#80A9

The job cannot be executed because the fo‐
llowing axis is synchronized ("MC_GearIn‐
Pos.StartSync" = TRUE) or a kinematics mo‐
tion is active.

The Motion Control instructions "MC_PhasingRelative" and
"MC_PhasingAbsolute" can only be applied to active gearing
with "MC_GearIn" or "MC_GearInPos" ("MC_GearIn.InGear" =
TRUE or "MC_GearInPos.InSync" = TRUE).

16#80AA

The cam contains no points or segments and
cannot be interpolated.

Fill the cam with points/segments. Restart the job.

16#80AB

The cam is currently being used and cannot
be interpolated.

End the current use of the cam. Restart the job.

16#80AC

The cam contains incorrect points or seg‐
ments and cannot be interpolated.

Fill the cam with permissible points/segments. Restart the job.

Wait until the homing job has ended. Restart the measuring job
via PROFIdrive telegram.

(for example, the cam contains only one
point.)
16#80AD

The specified synchronous position is outsi‐
de the definition range of the cam.

Specify a permissible synchronous position for parameter "Mas‐
terSyncPosition". Restart the job.

16#80AE

The job cannot be executed because a kine‐ End the current kinematic motion. Restart the job.
matic motion is active.

16#8FFF

Unspecified error

Contact your local Siemens representative or support center.
You will find your contact information for digital industries at:
https://www.siemens.com/automation/partner (https://
www.siemens.com/automation/partner)

1542

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Errors in Motion Control instructions (Página 1484)

SINAMICS drives
Compatibility list
An overview of drives that can be interconnected with an S7-1500 CPU is available at:
https://support.industry.siemens.com/cs/document/109750431 (https://
support.industry.siemens.com/cs/ww/en/view/109750431)

Homing SINAMICS drives with external zero marks
For SINAMICS drives with external zero mark, synchronization during homing must always
occur on the left side of the external zero mark's signal. That is to say, with a positive direction
of travel synchronization is done on a positive edge, and with a negative direction of travel
synchronization is done on a negative edge.
By inverting the signal, synchronization can also be done on the right sight of the signal of the
external zero mark. The inversion can be configured in the drive using SINAMICS parameter
P490.
Homing to an encoder zero mark or an external zero mark is configured in SINAMICS
parameter P495.

Data types
Data types for the use of technology
The table below contains the data types for reference to the respective technology object:
Data type

Description

TO_Object

Base

TO_SpeedAxis1)

Speed axis

TO_PositioningAxis1)

Positioning axis

TO_SynchronousAxis1)

Synchronous axis

TO_Encoder

External encoder

TO_OutputCam

Output cam

TO_CamTrack

Cam track

TO_MeasuringInput

Measuring input

TO_Cam

Cam (S7-1500T)

1)

1)

TO_Kinematics
TO_LeadingAxisProxy

Kinematics (S7-1500T)
1)

Leading axis proxy (S7-1500T)

PD_TELx

Telegram no. "x"

DX_TEL_SyncOp

Leading value telegram (S7-1500T)

PD_STW1_611Umode

Control word 1 (STW1)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1543

Control de movimiento
6.1 Using S7-1500 Motion Control
Data type

Description

PD_STW2_611Umode

Control word 2 (STW2)

PD_ZSW1_611Umode

Status word 1 (ZSW1)

PD_ZSW2_611Umode

Status word 2 (ZSW2)

1)

Cascading technology objects

Cascading technology objects
The structure of the technology objects is structured as follows:
● "TO_Object" is the basis of all technology objects and a component of the "TO_Axis".
● "TO_Axis" is part of "TO_SpeedAxis", "TO_Encoder" and "TO_LeadingAxisProxy".
● "TO_SpeedAxis" is part of "TO_PositioningAxis".
● "TO_PositioningAxis" is part of "TO_SynchronousAxis".

Consulte también
PROFIdrive telegrams (Página 1555)

6.1.2

Using S7-1500/S7-1500T axis functions

6.1.2.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‐
trol overview

This documentation describes the general Motion Control func‐
tions independent of technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‐
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)

1544

Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

● Speed axis
● Positioning axis
● External encoder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Documentation

Description

Using S7-1500/S7-1500T measu‐ This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

● Measuring input

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

● Synchronous axis

Using S7-1500T kinematics func‐
tions

This documentation describes the Motion Control functions for the
following technology objects:

● Output cam
● Cam track

● Cam (S7-1500T)
● Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‐ ● Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

Functions
You execute the functions of the speed axis, positioning axis and external encoder technology
objects using Motion Control instructions in your user program or using the TIA Portal (under
"Technology object > Commissioning").
The following table shows the Motion Control instructions that are supported by the technology
objects:
Motion Control instruction

"MC_Power"

Validity

Technology object

S7-1500

S7-1500T

Speed axis (Pági‐
na 1548)

Positioning axis
(Página 1548)

External encoder
(Página 1550)

X

X

X

X

X

X

X

X

X

X

X

X

-

X

X

X

X

X

X

-

Enable, disable technology object
"MC_Reset"
Acknowledge alarms, restart techno‐
logy object
"MC_Home"
Home technology object, set home po‐
sition
"MC_Halt"
Pause axis

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1545

Control de movimiento
6.1 Using S7-1500 Motion Control
Motion Control instruction

"MC_MoveAbsolute"

Validity

Technology object

S7-1500

S7-1500T

Speed axis (Pági‐
na 1548)

Positioning axis
(Página 1548)

External encoder
(Página 1550)

X

X

-

X

-

X

X

-

X

-

X

X

X

X

-

X

X

X

X

-

X

X

-

X

-

-

X

-

X

-

X

X

X

X

-

X

X

X

X

-

X

X

-

X

-

-

X

X

X

-

-

X

-

X

-

X

X

X

X

-

X

X

X

X

-

X

X

X

X

-

Position axis absolutely
"MC_MoveRelative"
Position axis relatively
"MC_MoveVelocity"
Move axes with velocity/speed set‐
point
"MC_MoveJog"
Move axis in jog mode
"MC_MoveSuperimposed"
Positioning axes overlapping
"MC_SetSensor"
Switch alternative encoder to operati‐
ve encoder
"MC_Stop"
Pause axis and prevent new motion
jobs
"MC_SetAxisSTW"
Control bits of control word 1 and con‐
trol word 2
"MC_WriteParameter"
Write parameter
"MC_MotionInVeloctiy"
Specify motion setpoints
"MC_MotionInPosition"
Specify motion setpoints
"MC_TorqueAdditive"
Specify additive torque
"MC_TorqueRange"
Specify high and low torque limits
"MC_TorqueLimiting"
Activate/deactivate force/torque limit /
fixed stop detection

1546

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the functions supported by technology objects in the TIA Portal:
Functions in the TIA Portal

Technology object
Speed axis (Página 1548)

Positioning axis (Pági‐
na 1548)

External encoder (Pági‐
na 1550)

X

X

-

-

X

-

"Axis control panel (Página 1677)"
Move and home axes using the TIA
Portal
"Optimization (Página 1683)"
Optimization of closed loop position
control

In addition to the functionality of the S7-1500 CPU, the S7-1500T CPU provides additional
functions and technology objects:
Additional functions

Description

Multiple encoders for positioning axis/ Up to four encoders can be connected to a positioning axis/synchronous axis. The
synchronous axis (Página 1562)
encoders can be switched over during operation. Only one encoder at a time is active
for closed loop position control.
"MotionIn" function (Página 1582)

With the "MC_MotionInVelocity" and "MC_MotionInPosition" Motion Control instruc‐
tions, you specify cyclically applicable calculated motion setpoints as a basic motion
for the axis. No velocity profile is calculated for this, the values are directly active at
the technology object.

Kinematics technology object

The Kinematic technology object ("TO_Kinematics") is used to interconnect positio‐
ning axes to a kinematic. When you configure the kinematics technology object, you
interconnect the axes in accordance with the configured kinematics type.
The kinematics technology object is described in the "S7-1500T Kinematics func‐
tions (https://support.industry.siemens.com/cs/ww/en/view/109766463)" documen‐
tation.

Gearing with "MC_GearInPos"

During gearing, the leading axis and following axis are coupled, similar to a mecha‐
nical gear unit, by a linear synchronous operation function. You use the gear ratio to
specify the synchronous operation function. The synchronous positions of the lea‐
ding and following axes starting at which the axes move synchronously can be spe‐
cified in the Motion Control instruction "MC_GearInPos".
The gearing with "MC_GearInPos" is described in the documentation "S7-1500/
S7-1500T Synchronous operation functions (https://
support.industry.siemens.com/cs/ww/en/view/109766464)".

Camming

During camming, the leading axis and following axis are coupled by a synchronism
function, which you specify using a cam.
The camming is described in the documentation "S7-1500/S7-1500T Synchronous
operation functions (https://support.industry.siemens.com/cs/ww/en/view/
109766464)".

Cross-PLC synchronous operation

Cross-PLC synchronous operation enables synchronous operation over multiple
controllers. Leading and following axes can be configured on different controllers.
The PLC-wide synchronous operation is described in the documentation "S7-1500/
S7-1500T Synchronous operation functions (https://
support.industry.siemens.com/cs/ww/en/view/109766464)".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1547

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.2.2

Basics

Speed-controlled axis technology object
The speed axis technology object calculates speed setpoints, taking into account the dynamic
settings, and outputs them to the drive. All motions of the speed axis take place as speedcontrolled motions. An existing load gear is taken into account on the system side.
You can find an overview of the functions of the speed axis technology object in the "Functions
(Página 1545)" section.
A drive is assigned to each speed axis by means of a PROFIdrive telegram or an analog
setpoint interface.
The speed is specified in revolutions per unit of time.
The following figure shows the basic principle of operation of the speed axis technology object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFW

7HFKQRORJ\REMHFW
6SHHGD[LV

$FWXDOVSHHG

9HORFLW\
VHWSRLQW

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV

6SHHG
VHWSRLQW

6WDWXVHYDOXDWLRQ

&RPPXQLFDWLRQ

352),1(7
6,1$0,&6

Positioning axis technology object
The positioning axis technology object calculates position setpoints, taking into account the
encoderc settings, and outputs corresponding speed setpoints to the drive. In position-

1548

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
controlled mode, all movements of the positioning axis take place as position-controlled
movements. For absolute positioning, the physical position must be known to the positioning
axis technology object.
You can find an overview of the functions of the positioning axis technology object in the
"Functions (Página 1545)" section.
Each positioning axis is assigned a drive by means of a PROFIdrive telegram or an analog
setpoint interface as well as an encoder by means of a PROFIdrive telegram.
The relationship between the encoder values and a defined position is established by the
parameter assignment of the mechanical properties and encoder settings and by a homing
operation. The technology object can also perform movements without a position relationship,
and relative position movements, even without being in a homed status.
A positioning axis can be configured as a linear axis or rotary axis (Página 1551), depending on
the design of the mechanics.
The following figure shows the basic principle of operation of the positioning axis technology
object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFW

7HFKQRORJ\REMHFW
3RVLWLRQLQJD[LV
6HWSRVLWLRQ


ದ

3RVLWLRQ
FRQWUROOHU

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
6WDWXVHYDOXDWLRQ

$FWXDO
SRVLWLRQ

6SHHG
VHWSRLQW

&RPPXQLFDWLRQ

352),1(7
6,1$0,&6

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1549

Control de movimiento
6.1 Using S7-1500 Motion Control

External encoder technology object
The external encoder technology object detects a position and makes this available to the
controller.
The actual position detected by the external encoder can be used for the following functions, for
example:
● Measured value acquisition by a measuring input
● Position-dependent generation of switching signals and switching signal sequences by
output cam and cam track with actual value reference.
● As a leading value of a synchronous axis (S7-1500T)
You can find an overview of the functions of the external encoder technology object in the
"Functions (Página 1545)" section.
The relationship between the encoder values and a defined position is established by the
parameter assignment of the mechanical properties and encoder settings and by a homing
operation.
The following figure shows the basic principle of operation of the external encoder technology
object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFW

7HFKQRORJ\REMHFW
([WHUQDOHQFRGHU

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
$FWXDOYDOXHHYDOXDWLRQ
6WDWXVHYDOXDWLRQ
$FWXDO
SRVLWLRQ
&RPPXQLFDWLRQ

352),1(7

6LJQDODFTXLVLWLRQ
703RV,QSXW
70&RXQW

6,1$0,&6

$OWHUQDWLYHFRQQHFWLRQ
(QFRGHU

1550

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Specification of the position occurs according to the selected system of units:
● Linear system of units
The position is specified as a linear measure, e.g. millimeters.
● Rotary system of units
The position is specified as an angular measure, e.g. degrees.

Axis types
Axes can be configured with different axis types:
● Positioning and synchronous axes can be configured as rotary or linear axis.
● Speed axes are always rotary axes.
Depending on the execution of the mechanics, an axis is implemented as a linear axis or rotary
axis:
● Linear axis
3RVLWLRQ

For linear axes, the position of the axis is specified as a linear measure, e.g. millimeters
(mm).
● Rotary axis

3RVLWLRQ

For rotary axes, the position of the axis is specified as an angular measure, e.g. degrees (°).

Modulo setting
For the positioning axis, synchronous axis and external encoder technology objects, the
"Modulo" setting can be activated.
When an axis moves in only one direction, the position value continually increases. To limit the
position value to a recurring reference system, you can activate the "Modulo" setting. The longterm accuracy (Página 1553) can also be adhered to with modular axes up to the maximum
travel time.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1551

Control de movimiento
6.1 Using S7-1500 Motion Control
When the "Modulo" setting is activated, the position value of the technology object is mapped
onto a recurring modulo range. The modulo range is defined by the start value and the length.
For example, to limit the position value of a rotary axis to a full rotation, the modulo range can
be defined with start value = 0° and length = 360°. As a result, the position value is mapped onto
the modulo range 0° to 359.999°.
The modulo cycle counters for the position setpoint and the actual position on the positioning
axis, synchronous axis and external encoder technology objects indicate the number of modulo
revolutions.

Modulo cycle counter
If the "Modulo" setting is activated, the modulo cycle counter is activated for the Positioning
axis, Synchronous axis, and External encoder technology objects. The modulo cycle counter
is displayed at the technology object for the position setpoint and the actual position. The
modulo cycle counter counts the modulo revolutions and thus the number of modulo runs at the
technology object.
The counter values of the modulo cycles change during switch on, restart and homing.
The following applies to an incremental encoder:
Action

Description

Switching on the CPU

The modulo cycle counter is set to 0.

Reset with "Restart" = TRUE The modulo cycle counter is set to 0.
Active and passive homing
with "Mode" = 2, 3, 5, 8, 10

● If the home position is in the range "Modulo start value ≤ Home
position ≤ (Modulo Start value + Modulo length / 2)", the modulo
cycle counter is set to 0.
● If the home position is in the range "(Modulo start value + Modulo
length / 2) < Home position < (Modulo start value + Modulo length)"
the modulo cycle is set to -1.

Direct homing absolute with
"Mode"= 0, 11

The modulo value is the shortest distance between the current and new
position. Depending of the distance, the modulo cycle counter can re‐
main the same, increase by 1 or decrease by 1.

Direct homing absolute with
"Mode"= 1, 12

The modulo cycle counter changes according to the specified position
difference, even if no homing has taken place before.

The following applies to an absolute encoder:
Action

Description

Switching on the CPU

The modulo cycle counter changes according to the determined modulo
length from the absolute value of the encoder and the absolute value
offset of an absolute value encoder adjustment, if an absolute value
encoder adjustment has taken place.

Reset with "Restart" = TRUE The modulo cycle counter remains unchanged.
Absolute encoder adjust‐
ment with "Mode" = 6, 7

1552

The modulo cycle counter is set to 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Action

Description

Direct homing absolute with
"Mode"= 0, 11

The modulo value is the shortest distance between the current and new
position. Depending of the distance, the modulo cycle counter can re‐
main the same, increase by 1 or decrease by 1.

Direct homing absolute with
"Mode"= 1, 12

The modulo cycle counter changes according to the specified position
difference, even if no homing has taken place before.

Long-term accuracy
Long-term accuracy means that the technological set and actual position can always be
determined uniquely.
The maximum technological position depends on the selected dimension and the maximum
display of 9.0E12 mm. At higher resolution the maximum display is reduced to 9.0E9 mm.
The maximum travel time in which the technological position is accurate without rounding error
depends on the maximum position and the velocity. The maximum travel time applies likewise
to axes with and without modulo setting.
You can use the following equation to estimate when the limit of long-term accuracy is reached:

7UDYHOWLPH 

0D[LPXPSRVLWLRQ
9HORFLW\

Example of the maximum traversing time
Maximum position = 9.0E12 mm
Velocity = 20.0 m/min = 2.0E4 mm/min
7UDYHOWLPH 

(PP
(PPPLQ

(PLQฬ\HDUV

Dimension

Maximum travel time

nm, µm, mm, m, km, in, ft, mi, rad, °

4.5E8 min ≙ 856 years

mm1), °1)

4.5E5 min ≙ 0.856 years

1)

Position values with higher resolution or six decimal places. The maximum position is reduced to
9.0E9 mm and thus also the travel time.

The traversing time restarts when one of the following conditions is fulfilled:
● You have homed the axis with "MC_Home".
● After POWER OFF → POWER ON of the CPU
A change in the velocity has the consequence that the traversing time changes accordingly.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1553

Control de movimiento
6.1 Using S7-1500 Motion Control

Measures to maintain long-term accuracy
Carry out the following measures before the maximum travel time has elapsed:
● Incremental encoder: Home the incremental encoder again.
● Absolute encoder: Perform an absolute encoder calibration with the default of the currently
known position.

Consulte también
Units of measure (Página 1389)

Drive and encoder connection
A drive is assigned to the "Speed axis" technology object. A drive and one to four encoders
(only with S7-1500T) are assigned to the "Positioning axis" and "Synchronous axis" technology
objects. An encoder is assigned to the "External encoder" technology object.
The setpoint for the drive is specified either with PROFIdrive telegrams or using an analog
output.
The following connection options are available for an encoder:
● Encoder connected to drive
● Encoder to technology module
● PROFIdrive encoder connected directly to PROFIBUS DP/PROFINET IO
The actual encoder value is transmitted exclusively via PROFIdrive telegrams.

PROFIdrive
PROFIdrive is the standardized drive technology profile for connecting drives and encoders via
PROFIBUS DP and PROFINET IO. Drives that support the PROFIdrive profile are connected
according to the PROFIdrive standard.
The current PROFIdrive specification is available at:
https://www.profibus.com (https://www.profibus.com)
Communication between the controller and drive/encoder is performed using various
PROFIdrive telegrams. Each of the telegrams has a standardized structure. You can select the
appropriate telegram according to the application. Control words and status words as well as
setpoints and actual values are transmitted in the PROFIdrive telegrams.
The PROFIdrive profile likewise supports the "Dynamic Servo Control" (DSC) control concept.
DSC uses rapid closed loop position control in the drive. This can be used to solve highly
dynamic Motion Control tasks.

Analog drive connection
Drives with analog setpoint interfaces are connected using an analog output and an optional
enable signal. The speed setpoint is specified via an analog output signal (e.g. from -10 V to
+10 V) from the CPU.

1554

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Stepper motors
Drives with a stepper motor interface are connected using telegram 3 and with the help of PTO
(Pulse Train Output) pulse generators.
For functional support of stepper motor operation, quantization of the control deviation can be
set.
Through the specification of a quantization, a range around the target position is defined in
which no correction of the actual position is to be made. This prevents a possible oscillation of
the stepper motor around the target position. Two types of quantization can be set:
● Quantization of the control deviation corresponding to the encoder resolution
("<TO>.PositionControl.ControlDifferenceQuantization.Mode" = 1)
This prevents oscillation of the stopped motor between two increment values, for example.
This mode is especially helpful when using multiple encoders. With this setting, the
quantization is adapted appropriately at an encoder switchover. This mode is helpful for
stepper motors with encoders in which the resolution of the encoder is lower than the step
size of the stepper motor.
● Direct specification of a value for quantization of the control deviation.
("<TO>.PositionControl.ControlDifferenceQuantization.Mode" = 2, value setting in
"<TO>.PositionControl.ControlDifferenceQuantization.Value")
This mode is helpful for stepper motors with encoders in which the resolution of the encoder
is greater than the step size of the stepper motor.

PROFIdrive telegrams
PROFIdrive telegrams are used to transfer setpoints and actual values, control and status
words and other parameters between the controller and drive/encoder.
When a PROFIdrive telegram is used for connection, the drives and encoders are handled and
switched on in accordance with the PROFIdrive profile.
The following table shows the possible PROFIdrive telegrams for various technology objects.
Technology object

Possible PROFIdrive telegrams

Speed axis

● 1, 2
● 3, 4, 5, 6, 102, 103, 105, 106 (actual
encoder value is not evaluated)

Positioning axis/synchronous axis
Setpoint and actual encoder value in one drive telegram

3, 4, 5, 6, 102, 103, 105, 106

Setpoint and actual encoder value separately
Setpoint in drive telegram

1, 2, 3, 4, 5, 6, 102, 103, 105, 106

Actual value from telegram

81, 83

External encoder

81, 83

Measuring input (Measuring via SINAMICS (central probe))

391, 392, 393

Measuring input at axis module

Corresponds to measuring via PROFI‐
drive

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1555

Control de movimiento
6.1 Using S7-1500 Motion Control

Telegram types
The following table shows the supported PROFIdrive telegram types for the assignment of
drives and encoders:
Telegram

Brief description

Standard telegrams
11)

● Control word STW15), status word ZSW1
● Speed setpoint 16 bit (NSET), actual speed value 16 bit (NACT)

2

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)

3

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2)

4

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2)
● Actual encoder value 2 (G2_XIST1, G2_XIST2)

5

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
● Dynamic Servo Control (DSC)2)

6

–

Speed precontrol value

–

Position difference (XERR)

–

Kpc - Velocity precontrol of the closed loop position control

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
● Actual encoder value 2 (G2_XIST1, G2_XIST2)
● Dynamic Servo Control (DSC)2)
–

Speed precontrol value

–

Position difference (XERR)

–

Kpc - Velocity precontrol of the closed loop position control

Siemens telegrams (with torque limiting)
102

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2)
● Torque limiting

103

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2)
● Actual encoder value 2 (G2_XIST1, G2_XIST2)
● Torque limiting

1556

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Telegram

Brief description

105

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
● Dynamic Servo Control (DSC)2)
–

Speed precontrol value

–

Position difference (XERR)

–

Kpc - Velocity precontrol of the closed loop position control

● Torque limiting
106

● Controls word STW15) and STW25), status words ZSW1 and ZSW2
● Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
● Actual encoder value 2 (G2_XIST1, G2_XIST2)
● Dynamic Servo Control (DSC)2)
–

Speed precontrol value

–

Position difference (XERR)

–

Kpc - Velocity precontrol of the closed loop position control

● Torque limiting
SIEMENS additional telegrams (torque data)
7503)

● Additive setpoint torque
● High and low torque limits
● Torque actual values

SIEMENS telegrams (measuring input) 4)
391

● Control word CU_STW1, status word CU_ZSW1
● Measuring input control word (MT_STW), measuring input status word
(MT_ZSW)
● Measuring input time stamp of negative (MT1…2_ZS_F) or positive edges
(MT1…2_ZS_S)
● Digital output 16 bit, digital input 16 bit

392

● Control word CU_STW1, status word CU_ZSW1
● Measuring input control word (MT_STW), measuring input status word
(MT_ZSW)
● Measuring input time stamp of negative (MT1…6_ZS_F) or positive edges
(MT1…6_ZS_S)
● Digital output 16 bit, digital input 16 bit

393

● Control word CU_STW1, status word CU_ZSW1
● Measuring input control word (MT_STW), measuring input status word
(MT_ZSW)
● Measuring input time stamp of negative (MT1…8_ZS_F) or positive edges
(MT1…8_ZS_S)
● Digital output 16 bit, digital input 16 bit
● Analog input 16 bit

Standard telegrams - encoder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1557

Control de movimiento
6.1 Using S7-1500 Motion Control
Telegram

Brief description

81

● Control word STW2_ENC, status word ZSW2_ENC
● Actual encoder value 1 (G1_XIST1, G1_XIST2)

83

● Control word STW2_ENC, status word ZSW2_ENC
● Actual speed value 32 bit (NACT)
● Actual encoder value 1 (G1_XIST1, G1_XIST2)

1) Isochronous mode is not possible.
2) For use of Dynamic Servo Control (DSC), the motor encoder (first encoder in the telegram) of the drive
must be used as the first encoder for the technology object.
3) Can also be used for the telegrams 1, 2, 3, 4, 5, 6, 102, 103, 105, 106
4) When using SINAMICS drives (measuring using SINAMICS measuring input)
5) STW1 and STW2: Bits not used by the technology object can be controlled via the user program with
the Motion Control instruction "MC_SetAxisSTW".

Consulte también
Data connection drive/encoder via data block (Página 1570)

Actual values
For position-controlled motion and positioning, the controller must know the actual position
value.
The actual position value is provided by a PROFIdrive telegram.
The actual values are represented as incremental or absolute values in the PROFIdrive
telegram. The actual values are normalized in the controller to the technological unit taking into
account the configuration of the mechanics. The reference to a physical position of the axis or
external encoder is established by homing.
The controller supports the following types of actual values (encoder types):
● Incremental actual value
● Absolute actual value with the setting absolute (measuring range > traversing range of the
axis)
● Absolute actual value with the setting absolute (measuring range < traversing range of the
axis)

Actual value calculation for virtual axis or axis in simulation
The actual value of a virtual axis or an axis in simulation is formed from the setpoint taking time
delays into account.

1558

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You calculate the time delay from actual value to the setpoint (Tt) as follows:
Calculation
With precontrol

Tt = Tipo + Tservo + Tvtc + TaddPtc

Without precontrol, without DSC

Tt = Tipo + 1/Kv + TaddPtc

Without precontrol, with DSC for one axis in simu‐ Tt = Tipo + Tservo + 1/Kv + TaddPtc
lation

Tt
Tipo
Tservo
Tvtc
TaddPtc
kV

Time delay from the actual value to the setpoint
Cycle time of the MC-Interpolator [OB92]
Cycle time of the MC-Servo [OB91]
Speed control loop substitute time (Tvtc off "<TO>.DynamicAxisModel.VelocityTime‐
Constant")
Additive position control loop equivalent time (TaddPtc from "<TO>.DynamicAxisMo‐
del.AdditionalPositionTimeConstant")
Gain factor (Kv from "<TO>.PositionControl.Kv")

Consulte también
Virtual axis (Página 1569)
Axis in simulation (Página 1569)

Incremental actual value
The actual value in the PROFIdrive telegram is based on an incremental value.
After POWER ON, position zero is displayed. A transition of the CPU to RUN mode starts the
actual value update. The actual value is then also updated in CPU STOP mode. The
relationship between the technology object and the mechanical position must be re-established
by means of homing.

Absolute actual value
The actual value in the PROFIdrive telegram is based on an absolute value.
After POWER ON, position zero is displayed. The first transition of the CPU to RUN mode starts
the actual value update. The actual value is then also updated in CPU STOP mode. The
supplied absolute value is assigned to the associated mechanical axis position by means of the
absolute encoder adjustment. The absolute encoder adjustment must be performed once. The
absolute value offset is retentively saved beyond the switching on/off of the controller.
Differentiation of absolute values:
● The measuring range of the encoder is larger than the traversing range of the axis:
Absolute value with setting absolute
● The measuring range of the encoder is smaller than the traversing range of the axis:
Absolute value with setting cyclic absolute

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1559

Control de movimiento
6.1 Using S7-1500 Motion Control

Absolute actual value with setting absolute (measuring range > traversing range)
The axis position results directly from the current actual encoder value. The traversing range
must be within an encoder measuring range. This means that the zero passage of the encoder
must not be located in the traversing range.
When the controller is switched on, the axis position is determined from the absolute actual
encoder value.

Absolute actual value with setting cyclic absolute (measuring range < traversing range)
The encoder supplies an absolute value within its measuring range. The controller includes the
traversed measuring ranges and thus determines the correct axis position beyond the
measuring range.
When the controller is switched off, the traversed measuring ranges are saved in the retentive
memory area of the controller.
At the next power-on, the saved traversed measuring ranges are taken into account in the
calculation of the actual position value.
ATENCIÓN
Movements of the axis while the controller is switched off can skew the actual value
If the axis or the encoder is moved by more than half of the encoder measuring range while the
controller is switched off, the actual value in the controller is no longer in accord with the
mechanical axis position.

Consulte también
Absolute value adjustment (Página 1607)

Tags: Actual values
The tags named in the "Homing (Página 1608)" section are relevant for adapting actual values.

Automatic transfer of drive and encoder parameters in the device
Identical reference values for the drive and encoder connections must be set in the controller
and in the drive and encoder for the operation.
The speed setpoint NSET and the actual speed value NACT are transferred in the PROFIdrive
telegram as a percentage of the reference speed. The reference value for the speed must be
set identically in the controller and in the drive.
The resolution of the actual value in the PROFIdrive telegram must likewise be set identically
in the controller and in the drive and encoder modules

1560

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatic transfer of parameters
The drive and encoder parameters can be automatically applied in the CPU for the following
drives and encoders.
● SINAMICS drives (see "compatibility list")
● PROFIdrive encoder as of product version A16
The corresponding parameters are transferred after the (re-)initialization of the technology
object or (re)start of the drive and the CPU. Changes in the drive configuration are transferred
after restart of the drive or technology object.
Successful transfer of the parameters can be checked in the controller with the value of the tags
"<TO>.StatusDrive.AdaptionState" = 2 and "<TO>.StatusSensor[1..4].AdaptionState" = 2 of
the technology object.

Parameters
The controller settings are made in the TIA Portal under "Technology object > Configuration >
Hardware interface > Data exchange with the drive/encoder".
The drive and encoder settings are made in the configuration or the respective hardware.
The following table compares the settings in the TIA Portal, in the controller and the
corresponding drive/encoder parameters:
Setting in the TIA Portal

Controller
tag in the technology data block

Drive parameter

Automatic
transfer

Drive
Telegram number

Telegram input address
<TO>.Actor.Interface.AddressIn

Telegram number
P922

-

Telegram output address
<TO>.Actor.Interface.AddressOut
Reference speed in [1/min]

<TO>.Actor.DriveParameter.ReferenceS‐
peed

(SINAMICS drives:
P2000)

X

Maximum speed of motor in [1/min]

<TO>.Actor.DriveParameter.MaxSpeed

(SINAMICS drives:
P1082)

X

Reference torque in [NM]

<TO>.Actor.DriveParameter.Reference‐
Torque

(SINAMICS drives:
P2003)

X

<TO>.Sensor[1..4].Interface.AddressIn

P922

-

<TO>.Sensor[1..4].Type

P979[5] Encoder 1

-

0

Incremental

P979[15] Encoder 2

1

Absolute

2

Cyclic absolute

Encoder
Telegram

<TO>.Sensor[1..4].Interface.Addressout
Encoder type

Measuring system

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

<TO>.Sensor[1..4].System

P979[1] Bit0 Encoder 1

0

Linear

1

Rotary

P979[11] Bit0 Encoder
2

X

1561

Control de movimiento
6.1 Using S7-1500 Motion Control
Setting in the TIA Portal
Resolution (linear encoder)

Controller
tag in the technology data block

Drive parameter

<TO>.Sensor[1..4].Parameter.Resolution

The grid spacing is specified on the name‐
plate of the encoder as a separation dis‐
tance of the marks on the linear measuring
system.

Automatic
transfer

P979[2] Encoder 1

X

P979[12] Encoder 2

Increments per revolution
(rotary encoder)

<TO>.Sensor[1..4].Parameter.StepsPe‐
rRevolution

P979[2] Encoder 1

Number of bits for fine resolution XIST1
(cyclic actual encoder value, linear or ro‐
tary encoder)

<TO>.Sensor[1..4].Parameter.FineReso‐
lutionXist1

P979[3] Encoder 1

Number of bits for fine resolution XIST2
(absolute encoder value, linear or rotary
encoder)

<TO>.Sensor[1..4].Parameter.FineReso‐
lutionXist2

P979[4] Encoder 1

Differentiable encoder revolutions
(rotary absolute encoder)

<TO>.Sensor[1..4].Parameter.Determina‐ P979[5] Encoder 1
bleRevolutions
P979[15] Encoder 2

X

P979[12] Encoder 2
X

P979[13] Encoder 2
X

P979[14] Encoder 2
X

Using multiple encoders
The S7-1500T technology CPU offers the option of using up to 4 encoder or measuring systems
per positioning axis and synchronous axis as the actual position for the closed loop position
control
Only one encoder at a time is active for closed loop position control. You can switch between
the 4 encoder or measuring systems.
However, the actual values of all configured encoders can be evaluated in the user program.
This opens up the following possible application areas, for example:
● Use of additional machine encoders (besides the motor encoder), e.g. as direct measuring
systems for more accurate detection of actual positions of machining processes.
● Use of alternative encoder systems following a tool change in a flexible manufacturing
process.
You configure the encoders in the axis configuration. You control the switchover of the
encoders in the user program with the Motion Control instruction "MC_SetSensor".

Configuring an axis with multiple encoders
Note the following configuration windows when using multiple encoders:
● In the configuration window "Hardware interface > Encoder", configure which alternative
encoders are to be used and their corresponding encoder type (incremental, absolute or
cyclic absolute).
All encoders marked as used supply continually updated actual values to the closed loop
position control regardless of their use.
● In the configuration window "Hardware interface > Encoder", configure an encoder as
"Encoder at power-up". This is necessary because an encoder must always be assigned to
the positioning axis and synchronous axis.

1562

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● In the configuration window "Hardware interface > Data exchange with encoder", configure
additional encoder details and the telegram that is to be used to connect the encoders. The
configuration must be performed for each encoder used.
Each encoder to be used or each measuring system may differ with regard to its encoder
mounting type.
● In the configuration window "Extended parameters > Mechanics", configure the encoder
mounting type and any gear parameters. The configuration must be performed for each
encoder used.
● The axis can be homed with any configured encoder. In the configuration window "Extended
parameters > Homing", configure the parameters for active and passive homing. The
configuration can be performed for each encoder used.
When the axis is homed with an encoder, the axis is homed and retains the "homed" status
following encoder switchover.

Encoder switchover in the user program
For closed loop position control of the positioning and synchronous axes, an encoder must
always be active. Individual encoders may fail as long as they are not involved in closed loop
position control.
With the Motion Control instruction "MC_SetSensor", you switch over the encoder for closed
loop position control of the axis.
The switchover can occur during an active motion job or at a standstill. The axis does not have
to be enabled.
A switchover during an active homing or restart job is not possible.
Nota
Homing
Homing with the Motion Control instruction "MC_Home" or the axis control panel is always
performed with the encoder involved in closed loop position control.
The homing status of the axis is not changed following an encoder switchover.
Simulation
When the axis is simulated, all encoders configured as "used" are simulated.
Following the switchover to an alternative encoder or encoder system, you can select what
happens if the actual positions of the encoders are different.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1563

Control de movimiento
6.1 Using S7-1500 Motion Control
You define how to deal with the difference in the actual positions of the encoders using input
parameter "Mode" of the Motion Control instruction "MC_SetSensor".
● Switch over encoder and transfer actual position to the encoder to be switched ("Mode" = 0)
With this encoder switchover, step changes in the actual position are prevented. Bumpless
switchover of the encoders is possible.
● Switch over sensor without transferring the actual position ("Mode" = 1)
Following a switchover to an encoder without adjustment, a step change of the actual
position may occur. This can be desirable if the new encoder is intended to compensate for
possible mechanical influences (such as slip) in the positioning.
The position difference is not implemented immediately but rather after a delay using time
constant "<TO>.PositionControl.SmoothingTimeByChangeDifference" in order to prevent
step changes in the actual position with active closed loop position control.
● Transfer actual position ("Mode" = 2)
The actual position of the axis is transferred to the encoder specified in the "Sensor"
parameter.
● Transfer actual position of the reference encoder ("Mode" = 3)
The actual position of the "Reference encoder" ("ReferenceSensor" parameter) is
transferred to the encoder specified in the "Sensor" parameter.
"Mode" = 2 and 3 can be used to prepare a switchover.

Safety functions in the drive
Safety functions ("Safety Integrated Basic Functions") in the SINAMICS drive are safetyoriented, internal drive functions with the goal of shutting down the respective drive safely. In
addition, additional safety functions ("Safety Integrated Extended Functions") are available to
monitor definable limits. The goal of these safety functions is to monitor that the respective limit
is maintained, to signal the violation or to subsequently shut down the drive safely. To prevent
the monitoring function from being triggered, the axis must be switched to the monitored
operating mode with the user program or maintained in this mode.
The interaction of the safety functions in the drive, the SIMATIC S7-1500 and S7-1500T are
necessary to ensure fault-free plant operation.
The technology objects speed axis, positioning axis and synchronous axis support the "Safety
Integrated Basic Functions" of the drive. The technology object detects that the Basic Safety
function is triggered and displays a corresponding warning (technology alarm 550 - alarm
response: Track setpoints) or alarm (technology alarm 421 - alarm response: Remove enable).
With alarm 421, it is not necessary to disable the technology object with "MC_Power". When
alarm 550 occurs, you must not disable the technology object with the "MC_Power" as long as
the security function is triggered.
When the alarms 421 and 550 occur, you may only acknowledge the alarm with "MC-Reset" if
the safety function on the drive has been acknowledged and the drive is enabled.
The technology object is automatically released after acknowledgment with "MC-Reset".
The "Safety Integrated Extended Functions" are not supported by the technology object
independently.
To prevent the extended safety functions from being triggered and thus prevent a disruption in
plant operation, evaluate the status of the safety functions. This evaluation can take place in the
user program by using or evaluating the status information of the "Safety Info Channels" (SIC).

1564

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
With the help of the corresponding Motion Control instruction, the axis can now stay within the
monitored limit or reach it before a deviation is detected.
If a safety function is applied to a following axis in active synchronous operation, one of the
following two responses is required:
● End synchronous operation
● Adjust velocity of the leading axis accordingly
Four status words are available in the SIC:
● S_ZSW1B
● S_ZSW2B
● S_ZSW3B
● S_V_LIMIT_B
Two predefined PROFIdrive telegrams are available for transmission:
● Tel. 700 (contains the status words S_ZSW1B & S_V_LIMIT_B)
● Tel. 701 (contains all four status words and two additional control words)
Additional information
Additional information on the safety functions in SINAMICS drives and on the SIC is available
in the SINAMICS S120 Safety Integrated function manual.
https://support.industry.siemens.com/cs/ww/en/view/109754301 (https://
support.industry.siemens.com/cs/ww/en/view/109754301)
The tables below provide an overview of the four SIC status words and the required response
for each to prevent faults in plant operation.

S_ZSW1B
S_ZSW1B
Bit

Assignment

0

STO (active)

1

SS1 (active)

Meaning

Recommended response of the respective axis in the user pro‐
gram

1

Safe Torque Off active

"MC_Power" can remain enabled (waiting).

0

Not active

None

1

Safe Stop 1 active

Drive brakes autonomously and goes into STO.
"MC_Power" remains enabled until STO.

2

SS2 (active)

0

Not active

None

1

Safe Stop 2 active

Drive brakes autonomously and goes into SOS.

0

Not active

1

Safe Operating Stop active

"MC_Power" remains enabled.
3

SOS (active)

None
"MC_Power" remains enabled.
The drive must not move (monitoring takes place in the drive)

0

Not active

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

None

1565

Control de movimiento
6.1 Using S7-1500 Motion Control
S_ZSW1B
Bit

Assignment

4

SLS (active)

Meaning

Recommended response of the respective axis in the user pro‐
gram

1

"MC_Power" remains enabled.

Safety-Limited Speed active

Velocity must be less than active velocity limit (see "Active SLS
stage" or S_V_LIMIT_B).
0
5

SOS (selected) 1

Not active

None

Safe Operating Stop selected "MC_Power" remains enabled.
Braking with "MC_Halt" and "MC_Stop" within the time permitted
by SOS.

6

7

SLS (selected)

Internal event

0

Deselected

None

1

Safety-Limited Speed selec‐
ted

Drop below velocity limit within the time specified by SLS.

0

Deselected

None

1

Group alarm that a safety
function was selected or be‐
came active

Additional evaluation of the status words required to determine
the triggering safety function.

For example, by specifying an override or a new dynamic limit
(restriction with synchronous motion).

The bit indicates that a safety function is active.
(See also "Safety alarm")

0

No event

None

8

Reserved

-

-

9

Active SLS le‐
vel

SLS velocity limit

Additional information on SLS (bit 6) – shows active velocity limit
for SLS in levels (1… 4). This limit can be evaluated in the pro‐
gram to limit the current velocity of the axis as needed.

10

Display bit 0
SLS velocity limit
Display bit 1

11

Reserved

-

12

SDI positive

1

Safe Direction positive selec‐ Reaching standstill or the positive velocity of the actual value of
ted
the axis (when SDI negative = 0) within the time specified by SDI.

0

Deselected

None monitoring for positive direction.

13

SDI negative

1

Safe Direction negative se‐
lected

Reaching standstill or the negative velocity of the actual value of
the axis (when SDI positive = 0) within the time specified by SDI.

0

Deselected

None monitoring for negative direction.

14

ESR retraction

1

Extended stop and retraction
required (not a Safety func‐
tion)

To be considered individually.

15

1566

Safety alarm

-

You can find additional information in the "SINAMICS S120 Sa‐
fety Integrated" (https://
support.industry.siemens.com/cs/ww/en/view/109754301)
function manual.

0

Not requested

None

1

Effective

If necessary, evaluate bit as group alarm to see whether a Sa‐
fety alarm is pending in the alarm buffer.

0

Not effective

None

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

S_V_LIMIT_B
S_V_LIMIT_B

Meaning

Explanation

SLS Speed limit

Additional information on SLS (S_ZSW1B bit 6)

(32-bit resolution with sign)

Shows the selected/active velocity limit for SLS. If necessary,
the velocity limit can be evaluated in the program to limit the
current velocity of the axis as needed.

Meaning

Recommended response of the respective axis

0 … Reserved
3

-

-

4

1

SLP area 2 selected

Safe position in the area 2. Do not change the position using the
user program any longer.

0

SLP area 1 selected

Safe position in the area 1. Do not change the position using the
user program any longer.

Bit

Assignment

0 … Velocity set‐
31 point limit

S_ZSW2B
S_ZSW2B
Bit

Assignment

SLP selected
position area

5, 6

Reserved

7

1
SLP selected
and user appro‐
val set

8

SDI positive

-

Safety-Limited Position se‐
lected and user approval is
set

Status message (if required in the user program)

0

SLP not selected or user ap‐
proval missing

Application-dependent evaluation

1

Safe Direction positive selec‐ Reaching standstill or the positive velocity of the actual value of
ted
the axis within the time specified by SDI.

Application-dependent evaluation
(means that the SLP is selected and the safe position was con‐
firmed by the user – see "Safe homing")

(when SDI negative = 0)
9

SDI negative

0

Deselected

None monitoring for positive direction

1

Safe Direction negative se‐
lected

Reaching standstill or the negative velocity of the actual value of
the axis within the time specified by SDI.
(when SDI positive = 0)

0
10,
11

Reserved

12

Test stop active 1

Deselected

-

None monitoring for negative direction
-

Test stop active

Status message (if required in the user program)
Application-dependent evaluation

0
13
14,
15

Test stop requi‐ 1
red
0
Reserved

Not active

None

Test stop required

Perform test stop

Not required

None

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

-

1567

Control de movimiento
6.1 Using S7-1500 Motion Control

S_ZSW3B
S_ZSW3B
Bit

Assignment

0

Brake test

1

2

Setpoint speci‐
fication drive/
external

Active brake

Meaning

Recommended response of the respective axis

1

Brake test selected

"MC_Power" remains enabled. Do not start travel motion with
user program.

0

Deselected

None – brake test is inactive (normal plant operation)

1

Specification for drive

The speed setpoint is specified by the SBT function.
Application-dependent evaluation

0

1

External specification (con‐
trol)

The "normal" speed setpoint is in effect.

Test brake 2 active

Status message (if required in the user program)

Application-dependent evaluation, setpoint value specification
through user program required
Application-dependent evaluation

0

Test brake 1 active

Status message (if required in the user program)
Application-dependent evaluation

3

4

Brake test acti‐
ve
Brake test re‐
sult

1

Test active

Status message (if required in the user program)
Application-dependent evaluation

0

Inactive

None

1

Test required

Status message (if required in the user program)
Application-dependent evaluation

0

With error(s)

Status message (if required in the user program)
Application-dependent evaluation, test must usually be success‐
ful to guarantee safety of the brake.

5

Brake test com‐ 1
plete
0

Run test

Status message (if required in the user program)
Application-dependent evaluation

Incomplete

Status message (if required in the user program)
Application-dependent evaluation, usually test is repeated

6

External brake
request

1

Closing the brake

Closing external brake (when controlled by user program)
Application-dependent evaluation

0

Opening the brake

Opening external brake (when controlled by user program)
Application-dependent evaluation

7

Current load
sign

1

Negative sign

Status of the load sign if required in the user program

0

Positive sign

Application-dependent evaluation

8 … Reserved
13

-

14

Acceptance
test SLP(SE)
selected

1

Acceptance test SLP(SE) se‐ Status message (if required in the user program)
lected
Application-dependent evaluation

0

Deselected

Acceptance
test

1

mode selected

Acceptance test mode selec‐ Status message (if required in the user program)
ted
Application-dependent evaluation

0

Deselected

15

1568

-

None

None

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Axis in simulation
S7‑1500 Motion Control offers the option to move real axes in simulation mode. Speed,
positioning and synchronous axes can thus be simulated without a connected drive and
encoder in the CPU.
When the simulation mode is activated, the drive and encoder connection does not need to be
configured in the axis configuration, for example, if the drive configuration is not yet available
at this time. The "Simulation" configuration can be changed during runtime of the user program
(<TO>.Simulation.Mode). A valid drive and encoder connection is required when exiting the
simulation.
To use a technology object in simulation mode or with SIMATIC S7 PLCSIM, you need to use
encoder 1 for closed loop position control of the axis.
Applications
● For example, an axis is simulated for programming the machine application and assigned
to the configured hardware later for commissioning.
● During commissioning, for example, not all hardware components are available.
● No axis motions should take place during commissioning.

Characteristics in simulation mode
An axis in simulation does not output setpoints to the drive and does not read any actual values
of the encoder. The actual values (Página 1558) are formed with a time delay from the setpoints.
Hardware limit switches and home position switches have no effect.
The technology objects measuring input (with signal detection via TM Timer DIDQ or
SINAMICS measuring input), output cam and cam track can also be used for axes in simulation.
The following table shows the Motion Control instructions with adapted behavior in simulation
mode:
Motion Control instruction

Characteristics in simulation mode

MC_Power

The axis is enabled immediately without waiting for feedback from
the drive.

MC_Home

Homing jobs are executed immediately without simulated axis mo‐
tion.

MC_TorqueLimiting

The specified torque is not output to the drive.

Virtual axis
S7‑1500 Motion Control offers the possibility to configure an axis as a virtual axis. A virtual axis
behaves like a real axis, but has no drive or encoder connection. The setpoints are only
processed within the controller and no real drive is controlled.
Application:
A virtual axis, for example, is often used as a virtual leading axis in order to generate the
setpoints for several real following axes in synchronous operation.
The "Virtual axis" configuration can only be changed by a new download to the CPU (in STOP
mode) (<TO>.VirtualAxis.Mode).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1569

Control de movimiento
6.1 Using S7-1500 Motion Control
The behavior of a virtual axis is identical to the behavior of an axis in simulation (Página 1569).

Data connection drive/encoder via data block
The data connection of PROFIdrive drives and encoders occurs either directly via the
PROFIdrive telegram or via a data block.
Use the system-generated tags of the PROFIdrive telegrams if you want to evaluate the
telegram contents.
Use the connection via data block if you want to influence or evaluate telegram contents in the
user program for process-specific reasons.
,2
GHYLFHV

3URFHVVLPDJH
,QSXWV

0&
3UH6HUYR

'DWDEORFN

$[LVದGHYLFH
&RPPXQLFDWLRQ
YLD
7HOHJUDP

'DWDEORFN

0&
3RVW6HUYR

3URFHVVLPDJH
2XWSXWV

,2
GHYLFHV

'DWDFRQQHFWLRQGLUHFWO\WRWKHGULYHHQFRGHU
352),
GULYH
'ULYH
2XWSXWGDWD

7(/B,1

7(/B287

=6:
1,67B%
=6:
*B=6:
*B;,67
*B;,67

67:
162//B%
67:
*B67:

$[LV

352),
GULYH
'ULYH
,QSXW
GDWD

'DWDFRQQHFWLRQYLDDGDWDEORFN
$Q\GULYH
RU
PXOWLSOH
GHYLFHV

,QSXWV

8VHU
SURJUDP

7(/B,1

7(/B287

=6:
1,67B%
=6:
*B=6:
*B;,67
*B;,67

67:
162//B%
67:
*B67:

$[LV

8VHU
SURJUDP

2XWSXWV

$Q\GULYH
RU
PXOWLSOH
GHYLFHV

Principle of data connection via data block
Generally, at the start of closed loop position control of the axis (by MC-Servo [OB91]), the
input area of the drive or encoder telegram is read.
At the end of closed loop position control, the output area of the drive or encoder telegram is
written.

1570

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
To influence or evaluate telegram contents for process-specific reasons, a data interface via a
data block must be connected in between before and after the closed loop position control.
● The input area of the telegram can be edited using the MC-PreServo [OB67] organization
block. The MC-PreServo is called before the MC-Servo.
● The input area of the telegram can be edited using the MC-PostServo [OB95] organization
block. The MC-PostServo is called after the MC-Servo.
The data block must be created by the user and contain a data structure of data type "PD_TELx"
for the data connection. Here, "x" stands for the telegram number of the drive or encoder
configured in the device configuration.
The organization blocks MC-PreServo and MC-PostServo can be programmed by the user
and must be added with the command "Add new block". The connection to the I/O via telegram
must be programmed in this organization block. When you use DSC you have to edit the signs
of life in the telegrams in MC-PreServo and MC-PostServo yourself according to the
PROFIdrive standard.

Consulte también
PROFIdrive telegrams (Página 1555)
Organization blocks for Motion Control (Página 1390)
Connect drive/encoder via data block (Página 1440)

Tags: Drive and encoder connection
The following technology object tags are relevant for the drives and encoder connections:
Drive telegram
Tag

Description

<TO>.Actor.Interface.AddressIn

Input address for the PROFIdrive telegram

<TO>.Actor.Interface.AddressOut

Output address for the PROFIdrive telegram or the analog
setpoint

<TO>.Actor.DriveParameter.Referen‐
ceSpeed

Reference value (100%) for the speed setpoint (NSET) of the
drive

<TO>.Actor.DriveParameter.MaxS‐
peed

Maximum value for the speed setpoint of the drive (NSET)

<TO>.Actor.DriveParameter.Referen‐
ceTorque

Reference torque for the torque transferred as a percentage

Encoder telegram
Tag

Description

<TO>.Sensor[1..4].Interface.AddressIn

Input address for the PROFIdrive telegram

<TO>.Sensor[1..4].Interface.Addres‐
sOut

Output address for the PROFIdrive telegram

<TO>.Sensor[1..4].System

Encoder system linear or rotary

<TO>.Sensor[1..4].Type

Encoder type, incremental, absolute or cyclic absolute

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1571

Control de movimiento
6.1 Using S7-1500 Motion Control
Encoder telegram
Tag

Description

<TO>.Sensor[1..4].Parameter.Resolu‐
tion

Resolution for linear encoder

<TO>.Sensor[1..4].Parameter.Steps‐
PerRevolution

Steps per revolution for rotary encoder

The grid spacing corresponds to the distance between two
marks.

<TO>.Sensor[1..4].Parameter.Determi‐ Number of differentiable encoder revolutions for a multi-turn
nableRevolutions
absolute encoder

Fine resolution
Tag

Description

<TO>.Sensor[1..4].Parameter.FineRe‐
solutionXist1

Number of bits for fine resolution XIST1 (cyclic actual enco‐
der value)

<TO>.Sensor[1..4].Parameter.FineRe‐
solutionXist2

Number of bits for fine resolution XIST2 (absolute value of
encoder)

Simulation mode
Tag

Description

<TO>.Simulation.Mode

Simulation mode
0

No simulation, normal operation

1

Simulation mode

Mechanics
For the display and processing of the technology object's position, the decisive factor is
whether the position is represented as a unit of length (linear axis) or a unit of angle (rotary axis).
Examples of units of length: mm, m, km
Examples of units of angle: °, rad
For the determination of the physical position from an actual encoder value, the system must
know the various properties and configurations of the mechanics.

Positioning axis/synchronous axis
The following configuration options for mechanics are supported:
● Load gear
● Leadscrew pitch (linear axes only)
● Encoder mounting type:
– Motor side (before the load gear)
– Load side (after the load gear and as applicable the leadscrew)
– External (e.g. odometer)

1572

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● Inversion of drive direction
● Inversion of encoder direction

External encoder
The following configuration options for mechanics are supported:
● Measuring gear (for rotary encoders)
● Leadscrew pitch (only with linear system of units and rotary encoders)
● Inversion of encoder direction

Speed axis
The following configuration options for mechanics are supported:
● Load gear
● Inversion of drive direction

Tags: Mechanics
The following technology object tags are relevant for the setting of the mechanics:
Type of motion
Tag

Description

<TO>.Properties.MotionType

Indication of linear or rotary motion
0

Linear motion

1

Rotary motion

Load gear
Tag

Description

<TO>.LoadGear.Numerator

Load gear numerator

<TO>.LoadGear.Denominator

Load gear denominator

Leadscrew pitch
Tag

Description

<TO>.Mechanics.LeadScrew

Leadscrew pitch

Encoder mounting type
Tag

Description

<TO>.Sensor[1..4].MountingMode

Encoder mounting type

<TO>.Sensor[1..4].Parameter.Distan‐
cePerRevolution

Load distance per encoder revolution with an externally
mounted encoder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1573

Control de movimiento
6.1 Using S7-1500 Motion Control

Inversion
Tag

Description

<TO>.Actor.InverseDirection

Setpoint inversion

<TO>.Actor.Efficiency

Efficiency of leadscrew pitch

<TO>.Sensor[1..4].InverseDirection

Actual value inversion

Modulo
Tag

Description

<TO>.Modulo.Enable

Enable modulo

<TO>.Modulo.Length

Modulo length

<TO>.Modulo.StartValue

Modulo start value

Traversing range limitation
Hardware and software limit switches limit the permissible traversing range and operating
range of the positioning axis/synchronous axis. Before use, they must be enabled in the
configuration or in the user program.
The following figure shows the relationship between the operating range, maximum traversing
range and limit switches:







①
②
③
④
⑤









Mechanical endstop
Hardware limit switches
Software limit switches
Maximum traversing range
Operating range

Hardware limit switches
Hardware limit switches are limit position switches that limit the maximum permissible
traversing range of the axis.
Select the positions of the hardware limit switches so that there is adequate braking distance
for the axis when needed. The axis should come to a standstill before a mechanical endstop.

Approaching the hardware limit switches
In the monitoring of range limitation, no distinction is made as to whether the switches are
reached or crossed.

1574

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
If a hardware limit switch is reached, technology alarm 531 is output, and the technology object
is disabled (alarm response: remove enable).

Exception
If the hardware limit switches are used as reversing output cams during homing, then the
monitoring of the hardware limit switches has no effect.
When hardware limit switches are used as reversing output cams, the axis is braked with the
deceleration configured in the dynamic defaults.
This must be taken into account when planning the distance of the hardware limit switch to the
mechanical endstop.

Retracting
The position of the axis when the hardware limit switch is detected is stored internally on the
CPU. The status of the reached hardware limit switch is reset only after the hardware limit
switch is left and the axis is once again in the maximum traversing range.
To retract the axis after it reaches the hardware limit switch and to reset the status of the
hardware limit switch, follow the steps below:
1. To enable motion in the retraction direction, acknowledge the technology alarm.
2. Traverse the axis in the retraction direction until the hardware limit switch is left.
The axis must then be within the maximum traversing range.
If you move the axis opposite the retraction direction before the hardware limit switch is left,
the monitoring will be triggered again.
The following chart shows the behavior of the status word when the hardware limit switch is
reached and when the axis is retracted:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1575

Control de movimiento
6.1 Using S7-1500 Motion Control
3RVLWLYH
KDUGZDUHOLPLWVZLWFK
72!3RVLWLRQ

W

1HJDWLYH
KDUGZDUHOLPLWVZLWFK

,QSXWSRVLWLYH
KDUGZDUHOLPLWVZLWFK



,QSXWQHJDWLYH
KDUGZDUHOLPLWVZLWFK



72!6WDWXV:RUG;
72!6WDWXV:RUG;


①
②
③
④



W



W




W




W






<TO>.StatusWord.X17 (HWLimitMinActive)
0

Negative hardware limit switch not reached

1

Negative hardware limit switch reached or overtraveled

<TO>.StatusWord.X18 (HWLimitMaxActive)
0

Positive hardware limit switch not reached

1

Positive hardware limit switch reached or overtraveled

The position of the axis when the positive hardware limit switch is detected is saved internally in
the CPU. To reset the status of the hardware limit switch, the axis position must fall short of this
position.
The position of the axis when the negative hardware limit switch is detected is saved internally
in the CPU. To reset the status of the hardware limit switch, the axis position must go past this
position.

Deactivating the hardware limit switch
For example, to enable homing at the fixed stop, you can temporarily disable the hardware limit
switch using the Motion Control instruction "MC_WriteParameter" via the parameter
"PositionLimits_HW.Active" = FALSE.

Consulte también
Direct homing (Página 1605)

1576

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Software limit switch
The operating range of the axis is limited with software limit switches. Relative to the traversing
range, always position the software limit switches within the hardware limit switches. Since the
positions of the software limit switches can be flexibly configured, the operating range of the
axis can be individually adapted in accordance with the current velocity profile.
Software limit switches are only in effect when there is a valid actual value after homing the
technology object. The monitoring of the software limit switches is relative to the setpoint.

Modulo function is enabled
When the modulo function is enabled, the modulo position is monitored.
The software limit switches are configured and activated in the axis configuration. The software
limit switches can be activated or deactivated in the user program using the
"<TO>.PositionLimits_SW.Active" tag. If the positions of both software limit switches are
outside the modulo range, the monitoring has no effect. No check is made to determine whether
the positions of the software limit switches are within the modulo range.

Approaching the software limit switches
The axis continually checks the position of the software limit switch during motion and brakes
to exactly this position, if necessary.
If the software limit switches are reached, then technology alarm 533 is output, and the axis is
stopped with the maximum dynamic values (alarm response: Stop with maximum dynamic
values). The technology object remains enabled.

Overrun of the software limit switches
If a software limit switch is crossed, technology alarm 534 is output, and the technology object
is disabled (alarm response: remove enable).

Retracting
To retract the axis after violation of the software limit switch, follow the steps below:
1. Acknowledge the technology alarm.
2. Move the axis in the retraction direction until the software limit switch is left.
If you move the axis opposite the retraction direction before the software limit switch is left,
the monitoring with be triggered again.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1577

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Traversing range limitation
Software limit switch
The following technology object tags are relevant for software limit switches:
Status indicators
Tag

Description

<TO>.StatusWord.X15 (SWLimitMi‐
nActive)

Negative software limit switch is active.

<TO>.StatusWord.X16 (SWLimitMa‐
xActive)

Positive software limit switch is active.

<TO>.ErrorWord.X8 (SWLimit)

An alarm is pending, indicating that a software limit switch
has been violated.

Control bits
Tag

Description

<TO>.PositionLimits_SW.Active

Enables/disables the monitoring of the software limit swit‐
ches.

Position values
Tag

Description

<TO>.PositionLimits_SW.MinPosition

Position of the negative software limit switch

<TO>.PositionLimits_SW.MaxPosition

Position of the positive software limit switch

Hardware limit switches
The following technology object tags are relevant for hardware limit switches:
Status indicators
Tag

Description

<TO>.StatusWord.X17 (HWLimitMi‐
nActive)

Negative hardware limit switch is active.

<TO>.StatusWord.X18 (HWLimitMa‐
xActive)

Positive hardware limit switch is active.

<TO>.ErrorWord.X9 (HWLimit)

An alarm is pending. A hardware limit switch was reached.

Control bits

1578

Tag

Description

<TO>.PositionLimits_HW.Active

Enables/disables the monitoring of the hardware limit swit‐
ches.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Tag

Description

<TO>.PositionLimits_HW.MinSwitchLe‐ Level selection for activation of the low hardware limit switch
vel
FALSE At low level, the signal is active.
TRUE

At high level, the signal is active.

<TO>.PositionLimits_HW.MinSwit‐
chAddress

Byte number of the I/O address of the hardware limit switch
for the low or minimum position

<TO>.PositionLimits_HW.MaxSwitch‐
Level

FALSE

At low level, the signal is active.

TRUE

At high level, the signal is active.

<TO>.PositionLimits_HW.MaxSwit‐
chAddress

Level selection for activation of the high hardware limit switch

Byte number of the I/O address of the hardware limit switch
for the high or maximum position

Motion control and limits for dynamics
Motion control of the axis occurs by means of velocity profiles (Página 1579). The velocity
profiles are calculated in accordance with the specifications for dynamics. A velocity profile
defines the behavior of the axis during approach, braking and changes in velocity. During
positioning a velocity profile is calculated, that moves the axis to the target point.
Maximum values for velocity, acceleration and jerk result from the properties of the drive and
the mechanics. These maximum values can be configured in the limits for dynamics. The limits
for dynamics are in effect as limits for every motion generated by means of the technology
object. The dynamic limits have no effect on a following axis in synchronous operation.
The configurable emergency stop deceleration (Página 1581) is triggered by the Motion
Control instruction MC_Power or by a technology alarm.
The jerk limit reduces the mechanical load during an acceleration ramp or deceleration ramp.
A "smoothed" velocity profile results.

Consulte también
Dynamic limits in gearing (Página 1886)

Velocity profile
Velocity profiles with or without jerk limitation are supported for motion control of the axis.
The dynamic values for the motion are specified in the Motion Control job. Alternatively, the
values of the dynamic defaults (Página 1641) can be used. The defaults and the limits for
velocity, acceleration, deceleration and jerk are set in the configuration.
To influence velocity, a velocity override can override the current traversing velocity.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1579

Control de movimiento
6.1 Using S7-1500 Motion Control

Velocity profile without jerk limitation
The following figure shows velocity, acceleration and jerk:
Y

W

D

W

M

W

Acceleration
Deceleration

1580

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Velocity profile with jerk limitation
The following figure shows velocity, acceleration and jerk:
Y

W

D

W

M

W

Acceleration
Deceleration

A velocity profile with jerk limitation is employed for a continuous acceleration and deceleration
sequence. The jerk can be specified.

Emergency stop deceleration
When stopping with the emergency stop ramp, the axis is braked from the current actual
position and actual velocity to a standstill without a jerk limitation, using the configured
emergency deceleration.
In the following cases the configured emergency stop deceleration is in effect:
● In case of an emergency stop ramp that has been enabled via the Motion Control instruction
"MC_Power" or "MC_Stop".
● For a technology alarm with the local alarm response "Stop with emergency stop ramp".
This emergency stop deceleration can be set greater than the maximum deceleration. If the
emergency stop deceleration is set lower than this, it may occur that the axis does not stop until
after the limit switch in the case of "Stop at software limit switch" and the occurrence of a
technology alarm with the local alarm response "Stop with emergency stop ramp".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1581

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion specification via "MotionIn"
In contrast to the Motion Control instructions such as "MC_MoveAbsolute" and
"MC_MoveRelative", no motion profile is calculated by the system when
"MC_MotionInVelocity" and "MC_MotionInPosition" are used. Each individual setpoint of the
motion profile (motion vector) must be specified with the "MotionIn" instruction in the application
cycle. This allows you to calculate your own motion profile.
The setpoints are typically adapted in the processing cycle of the technology object. For this
purpose, the "MotionIn" instruction is called in the organization block MC-PreServo [OB67].
The setpoints are then effective directly at the axis in MC-Servo [OB91].
ADVERTENCIA
Uncontrolled axis motions
When using the motion specification via the Motion Control instructions
"MC_MotionInVelocity" and "MC_MotionInPosition", the axis can perform uncontrolled
motions.
Consider the current dynamics of the axis when specifying the new motion vectors. The
motion vectors must be consistent with each other.
Set up the following protective measures before operating with the Motion Control instructions
"MC_MotionInVelocity" and "MC_MotionInPosition":
● Ensure that the EMERGENCY OFF switch is within the reach of the operator.
● Enable the hardware limit switches.
● Enable the software limit switches.
● Ensure that following error monitoring is enabled.
Note that a following axis that is coupled to the axis is also moved.

Overriding with "MotionIn" instructions
If a Motion Control instruction is overridden by a "MotionIn" instruction, the specified setpoints
take immediate effect with the current application cycle. The dynamic results exclusively
through the setpoint specifications of the user program. It is not limited and no smooth transition
takes place from the current motion state. Consider the current dynamics of the axis when
specifying the new motion vectors. Note that dynamic limits set on the technology object have
no effect. Only limits set on the drive side are in effect.

1582

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Stopping the "MotionIn" instructions
The "MotionIn" instructions can be canceled by the following means:
● Overriding them with another Motion Control instruction
The "MotionIn" instructions are triggered according to the behavior described in the section
"Tripping characteristics V5: Homing and motion jobs". As a rule, the current dynamics are
overridden by the new motion.
Nota
Dynamic deviation possible
Pay attention to consistent specifications relating to velocity and acceleration when the
"MotionIn" instruction is overridden by another Motion Control instruction.
When the "MotionIn" instruction is overridden, make sure that the new acceleration
specifications are coordinated with the currently effective acceleration because the last
effective acceleration value will be applied.
● Setting the parameter "Enable" to "FALSE"
If you set "Enable" parameter to "FALSE", the setpoint is immediately set to zero. Note that
the dynamic limits set on the technology object have no effect. Only limits set on the drive
side are in effect.

"MC_MotionInVelocity"
Use the "MC_MotionInVelocity" instruction to specify the velocity and acceleration of the
motion. The instruction is applicable for speed, positioning and constant axes.
To execute the instruction, you must at least specify the velocity. Acceleration is usually only
required for the substituting running motions. By default, the value of the acceleration is zero.

"MC_MotionInPosition"
Use the "MC_MotionInPosition" instruction to specify the position, velocity and acceleration of
the motion. The instruction is used for velocity, positioning and synchronous axes.
To execute the instruction, you must at least specify the position and velocity. Acceleration is
usually only required for the substituting running motions. By default, the value of the
acceleration is zero. The specified setpoints must be consistent with each other.
The position specification is position-controlled. If you use a velocity precontrol, the velocity
specification is processed via the velocity precontrol.

Torque limits
Force/torque limiting
Adjustable force/torque limiting is available for the speed axis, positioning axis and
synchronous axis technology objects. The force/torque limiting can be activated and
deactivated before and during a motion job. To use force/torque limiting, the drive and the
PROFIdrive telegram must support torque reduction. You can use, for example, a telegram 10x.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1583

Control de movimiento
6.1 Using S7-1500 Motion Control
The limit value can be configured as a default value during configuration of the axis or it can be
defined in the user program using Motion Control instruction "MC_TorqueLimiting".
You specify the limiting values in the configured unit of measure for force or torque. The units
of measure are defined in the "Basic parameters" configuration window.
The following configuration options are available for force/torque limiting.
● "Linear" axis type
– Torque limiting is active on motor side
– Force limiting is active on the load side
● "Rotary" axis type
– Torque limiting is active on load side or motor side
The force/torque limit defined by the user in accordance with the specification in the
PROFIdrive telegrams 10x are transferred internally to the drive as a percentage torque
reduction. The reference torque set in the "Data exchange with the drive" configuration dialog
must match the reference torque set for the drive.
Linear axis type
Load-side force limitation you have defined is converted by the technology into torque
reduction. If the limiting relates to the load side, the gear and leadscrew parameters defined in
the "Mechanics" configuration dialog are taken into consideration. If the efficiency of the gear
and leadscrew is crucial, you can set them in the "<TO>.Actor.Efficiency" tag.
Rotary axis type
The torque is reduced on the load side with the rotary axis type. The gear parameters defined
in the "Mechanics" configuration window are taken into consideration. If the efficiency of the
gear is crucial, you can set it in the "<TO>.Actor.Efficiency" tag.
The defined limiting values act as an absolute value and thus in the same way for positive and
negative forces/torques.

Positioning and following error monitoring with active force/torque limiting
As a result of force/torque limiting, a larger setpoint-actual value difference can build up for
position-controlled axes, which may cause unwanted activation of the positioning and following
error monitoring.
Therefore, in the "Torque limiting" configuration window, the positioning and following error
monitoring of the axis can be set as deactivated by default when force/torque limiting is active.
If necessary, the positioning and following error monitoring can also be kept active even when
force/torque limiting is active.

Typical behavior of a positioning or synchronous axis with active force/torque limiting
With active force/torque limiting, a larger setpoint-actual value difference can build up than
during motion without force/torque limiting.
Given a constant setpoint, the axis makes repeated attempts to reduce the following error.

1584

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
When the limiting values are increased or limiting is deactivated during active closed loop
position control, the axis can accelerate briefly to reduce the following error. If the axis is
switched to non-position-controlled operation, e.g. using "MC_MoveVelocity" with
"PositionControlled" = FALSE, the following error is no longer in effect.

Stopping an axis with active force/torque limiting
When stopping an axis in position-controlled mode with "MC_Halt" or "MC_Stop", the position
setpoint and the velocity setpoint are used as basis. Torque limiting still remains active and any
accumulated following error is reduced. The axis is in standstill when the actual velocity "0.0"
is reached and the minimum dwell time in the standstill window has expired. The axis remains
enabled.
When stopping an axis with "MC_Power" and an emergency stop ramp, the actual position
value and the actual velocity are used as a basis. The axis is braked with the configured
emergency stop deceleration without any jerk limit and brought to a standstill. The axis is then
disabled when at a standstill.

Consulte también
Fixed stop detection (Página 1585)
Configuration - Torque limits (Página 1626)
Configuration - Torque limits (Página 1647)

Fixed stop detection
With the Motion Control instruction "MC_TorqueLimiting", you activate and monitor a fixed stop
detection. Together with a position-controlled motion job, a "Travel to fixed stop" can be
realized. The operation is also referred to as clamping. "Travel to fixed stop" can be used, for
example, to move quills against the workpiece with a specified torque.
The fixed stop detection is configured in the configuration window "Extended parameters >
Limits > Fixed stop detection".
The fixed stop detection is only possible in position-controlled operation of the axis. If the drive
and telegram support force/torque limiting, this is active during travel to fixed stop and for
clamping.

Detection of the fixed stop using following error
If the drive is stopped by a mechanical fixed stop during a motion job, the following error is
increased. When the following error configured in the configuration window "Extended
parameters > Limits > Fixed stop detection" is exceeded, this is regarded as the fixed stop
having been reached.
When following error monitoring is activated, the configured following error must be greater
than the following error for fixed stop detection.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1585

Control de movimiento
6.1 Using S7-1500 Motion Control

Clamping at the mechanical endstop
When the fixed stop is reached, the active position-controlled motion job is canceled with
"CommandAborted". The setpoint is no longer changed and the following error remains
constant. The closed loop position control remains active and the monitoring of the configured
"Positioning tolerance" is activated The drive is in "Clamping" state.
If the drive and telegram support force/torque limiting, this continues to be active with active
fixed stop detection. During clamping, the clamping force or clamping torque can be changed.
The value in input parameter "Limit" of the Motion Control instruction "MC_TorqueLimiting" can
be changed for this.

Monitoring of the clamping
If the actual position changes by a value greater than the configured "Positioning tolerance"
during active clamping, this is regarded as the break or push-back of the fixed stop. An alarm
is triggered. The axis is disabled and the drive is stopped according to its configuration.
If the position setpoint is within the configured "Positioning tolerance", the breaking away or
turning back of the fixed stop cannot be detected.
The configured position tolerance must be less than the configured following error for detection
of clamping.

Retracting
Retracting from the fixed stop is only possible with a position-controlled motion job in the
opposite direction to the fixed stop.
The "Travel to fixed stop" or "Clamping" function is ended when the "Positioning tolerance" is
left in the retraction direction.

Consulte también
Force/torque limiting (Página 1583)
Configuration - Fixed stop detection (Página 1648)

Additive setpoint torque
The Motion Control instruction "MC_TorqueAdditive" allows you to apply additional torque in
the drive.
The additive setpoint torque is used for example in torque feedforward control or the
specification of the tensile torque for winding applications.
The following requirements must be fulfilled to set the additive torque setpoint:
● SINAMICS drive (see "compatibility list")
● SIEMENS supplementary telegram 750 for transmitting the torque data to the drive
The additional torque can be either positive or negative. The value specified in the instruction
is a technological value, not a percentage. Set the unit of measurement for the torque at the axis
(default value: Nm).

1586

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Permissible torque range
The Motion Control instruction "MC_TorqueRange" allows you to set torque limits for the drive.
The motion control instruction is used, for example, for winding applications in order to prevent
the tearing of the material.
The following requirements must be fulfilled to set the torque data:
● SINAMICS drive (see "compatibility list")
● SIEMENS supplementary telegram 750 for transmitting the torque data to the drive
The value specified in the instruction is a technological value, not a percentage. Set the unit of
measurement for the torque at the axis (default value: Nm). If you invert the setpoints at the
technology object of the axis, the values for the high and low torque limit are output inverted and
reversed.
If the torque limitation is activated by specifying the high and low torque limit, the following
monitorings and limits are deactivated:
● Following error monitoring
● Time limits for positioning monitoring
● Time limits for standstill monitoring
Monitoring remains in effect if you have selected the option "Leave position-related monitoring
enabled" under "Technology object > Configuration > Extended parameters > Limits > Torque
limiting".

Tags: Motion control and limits for dynamics
The following technology object tags are relevant for motion control:
Status
Tag

Description

<TO>.StatusWord

Status indicator for an active motion

<TO>.Position

Position setpoint

<TO>.Velocity

Velocity setpoint/speed setpoint

<TO>.VelocitySetpoint

Output velocity setpoint/speed setpoint

<TO>.ActualPosition

Actual position

<TO>.ActualVelocity

Actual velocity

<TO>.ActualSpeed

Actual speed of the motor (only with PROFIdrive drive type)

<TO>.Acceleration

Setpoint acceleration

<TO>.ActualAcceleration

Actual acceleration

<TO>.StatusSynchronizedMotion.Sta‐
tusWord.X0 (MaxVelocityExceeded)

The tag is set to the value "TRUE" when the maximum velo‐
city configured for the following axis is exceeded during
synchronous operation.

<TO>.StatusSynchronizedMotion.Sta‐
tusWord.X1 (MaxAccelerationExcee‐
ded)

The tag is set to the value "TRUE" when the maximum acce‐
leration configured for the following axis is exceeded during
synchronous operation.

<TO>.StatusSynchronizedMotion.Sta‐
tusWord.X2 (MaxDecelerationExcee‐
ded)

The tag is set to the value "TRUE" when the maximum dece‐
leration configured for the following axis is exceeded during
synchronous operation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1587

Control de movimiento
6.1 Using S7-1500 Motion Control
Status
Tag

Description

<TO>.StatusMotionIn.FunctionState

Status of the "MotionIn" function
0

No "MotionIn" function active

1

"MC_MotionInVelocity" active

2

"MC_MotionInPosition" active

Override
Tag

Description

<TO>.Override.Velocity

Velocity or speed override

Dynamic limit values
Tag

Description

<TO>.DynamicLimits.MaxVelocity

Dynamic limitation for maximum speed (mechanical)

<TO>.DynamicLimits.Velocity

Dynamic limitation for maximum speed (programmable)

<TO>.DynamicLimits.MaxAcceleration

Dynamic limitation for maximum acceleration

<TO>.DynamicLimits.MaxDeceleration

Dynamic limitation for maximum deceleration

<TO>.DynamicLimits.MaxJerk

Dynamic limitation for maximum jerk

Defaults for the dynamics
Tag

Description

<TO>.DynamicDefaults.Velocity

Default velocity

<TO>.DynamicDefaults.Acceleration

Default acceleration

<TO>.DynamicDefaults.Deceleration

Default deceleration

<TO>.DynamicDefaults.Jerk

Default jerk

<TO>.DynamicDefaults.EmergencyDe‐ Emergency stop deceleration
celeration

Torque limiting
Tag

Description

<TO>.TorqueLimiting.LimitDe‐
faults.Torque

Limiting torque

<TO>.TorqueLimiting.LimitDe‐
faults.Force

Limiting force

<TO>.TorqueLimiting.LimitBase

<TO>.TorqueLimiting.PositionBased‐
Monitorings

1588

Torque limiting motor or drive side
0

Motor side

1

Load side

Positioning and following error monitoring
0

Disabled

1

Enabled

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Torque limiting
Tag

Description

<TO>.StatusTorqueData.CommandAd‐ Additive torque setpoint function
ditiveTorqueActive
0
Disabled
1
<TO>.StatusTorqueData.Command‐
TorqueRangeActive
<TO>.StatusTorqueData.ActualTorque

Enabled

Torque limits function
0

Disabled

1

Enabled

Actual torque of the axis

Fixed stop detection
Tag

Description

<TO>.Clamping.FollowingErrorDevia‐
tion

Value of the following error starting from which the fixed stop
is detected

<TO>.Clamping.PositionTolerance

Position tolerance for the clamping monitoring

Homing
With homing, you create the relationship between the position in the technology object and the
mechanical position. The actual position value in the technology object is assigned to a homing
mark at the same time. This homing mark represents a known mechanical position.
With incremental actual values this process is called homing; with absolute actual values it is
called absolute encoder adjustment.
Homing is a requirement for display of the correct position for the technology object and for
absolute positioning.
Homing is activated with the Motion Control instruction "MC_Home".

Homing status
The "<TO>.StatusWord.X5 (HomingDone)" tag of the technology object indicates whether the
axis or external encoder technology object is homed.

Type of homing
Homing can occur by means of an independent homing motion (active homing), the detection
of a homing mark during a motion initiated on the user side (passive homing) or a direct position
assignment.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1589

Control de movimiento
6.1 Using S7-1500 Motion Control
A distinction is made between the following types of homing:
● Active homing
Active homing initiates a homing movement and performs the necessary homing mark
approach. When the homing mark is detected, the actual position is set to the value
specified in MC_Home. It is possible to specify a home position offset. Retraction to the
home position offset occurs automatically during the home position approach.
When active homing starts, current traversing movements are aborted.
● Passive homing
The homing job does not perform its own homing motion. When the homing mark is detected
during a motion initiated on the user side, the actual position is set to the value specified in
"MC_Home".
Passive homing is also called homing on the fly.
● Direct homing
With the homing job, the actual position is set directly to the value specified in "MC_Home"
or is offset by this value.
● Absolute encoder adjustment
In absolute encoder adjustment, the actual position of the axis or encoder is set with the
absolute or relative value specified at "MC_Home". The absolute value offset is stored
retentively in the CPU.

Homing mode
Depending on the type of homing mark and homing mark search, a distinction is made among
the following homing modes (Página 1591):
● Homing with homing output cam and zero mark via PROFIdrive telegram
● Homing with zero mark via PROFIdrive telegram
● Homing with digital input

Terms
Homing mark
A homing mark is an input signal, on whose occurrence a known mechanical position can be
assigned to the actual values.
A homing mark can be:
● A zero mark
The zero mark of an incremental encoder or an external zero mark is used as a homing
mark.
The zero mark is detected at the drive module or encoder module and transmitted in the
PROFIdrive telegram. Perform the setting and evaluation as an encoder zero mark or
external zero mark at the drive module and encoder module.
● An edge at the digital input
The negative or positive edge at a digital input is used as a homing mark.

1590

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Reference cam
If there are several zero marks in the traversing range, the reference cam is used to select a
specific zero mark before or after the reference cam.

Homing mark position
This is the position assigned to the homing mark.
The homing mark position corresponds to the home position minus the home position offset.

Home position
At the end of the active homing motion, the axis arrives at the home position.

Home position offset
The difference between the home position and the homing mark position is the home position
offset.
A home position offset only has an effect with active homing. The offset is traversed after the
synchronization of the axis using the Motion Control instruction "MC_Home". For axes with
modulo setting, the home position offset is always traversed with the direction setting for the
shortest path.

Direction reversal at the hardware limit switch (reversing cam)
Hardware limit switches can be used as reversing cams in active homing. If the homing mark
was not detected or was approached from the wrong side, the motion continues in the opposite
direction after the reversing cam.

Homing mode
Various homing modes are available for the positioning axis/synchronous axis and external
encoder technology objects with incremental encoders. The homing mode is set in the
configuration.

Homing with homing cam and zero mark via PROFIdrive telegram
The system checks for when the reference cam is reached. After the reference cam has been
reached and left again in the assigned homing direction, zero mark detection is enabled via the
PROFIdrive telegram.
When the zero mark is reached in the pre-selected direction, then the actual position of the
technology object is set to the homing mark position.

Homing with zero mark via PROFIdrive telegram
The system enables zero mark detection, as soon as the actual value of the technology object
moves in the assigned homing direction.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1591

Control de movimiento
6.1 Using S7-1500 Motion Control
When the zero mark is reached in the specified homing direction, the actual position of the
technology object is set to the homing mark position.

Homing with digital input
The system checks the state of the digital input, as soon as the actual value of the axis or
encoder moves in the assigned homing direction.
When the homing mark is reached (setting of the digital input) in the specified homing direction,
the actual position of the technology object is set to the homing mark position.
Nota
The digital inputs must be placed into the process image partition "PIP OB Servo".
The filter time of the digital inputs must be set smaller than the duration of the input signal at the
reference point switch.

Consulte también
Homing SINAMICS drives with external zero marks (Página 1543)

Active homing with homing output cam and zero mark
The following examples show homing motions in the positive and negative directions.

Example of homing in the positive direction
The approach to the homing mark and the home position occurs in the positive direction.
The following figure shows the homing motion with the following settings:
● Active homing with homing output cam and zero mark
● Approach in the positive direction
● Homing in the positive direction
● Positive home position offset

1592

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
9HORFLW\

5HIHUHQFHPDUNSRVLWLRQ
+RPHSRVLWLRQ

$SSURDFKYHORFLW\

+RPLQJYHORFLW\

ದ

+RPHSRVLWLRQ
DSSURDFK

+RPLQJPDUN
DSSURDFK

3RVLWLRQ

+RPLQJPDUN
DSSURDFK
+RPHSRVLWLRQRIIVHW

5HIHUHQFHFDP
=HURPDUN
KRPLQJPDUN

Example of homing in the negative direction
The approach to the homing mark occurs in the negative direction by means of a direction
reversal during the homing process. The approach to home position causes another direction
reversal and occurs in the positive direction.
The following figure shows the homing motion with the following settings:
● Active homing with homing output cam and zero mark
● Approach in the positive direction
● Homing in the negative direction
● Positive home position offset

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1593

Control de movimiento
6.1 Using S7-1500 Motion Control
9HORFLW\
$SSURDFKYHORFLW\

+RPLQJYHORFLW\

ದ

+RPH
SRVLWLRQ

+RPLQJPDUN
5HIHUHQFHFDP

3RVLWLRQ

+RPLQJPDUN
DSSURDFK

+RPHSRVLWLRQ
DSSURDFK
5HIHUHQFH
PDUNSRVLWLRQ

5HIHUHQFH
FDP

+RPHSRVLWLRQRIIVHW
=HURPDUN
KRPLQJPDUN

Motion sequence
The motion occurs in the following sequence:
1. Start of active homing via the "MC_Home" Motion Control instruction
2. Approach to reference output cam
3. Detection of the homing output cam in the homing direction and travel with homing velocity
4. Departure from the reference output cam and travel to the homing mark
With the departure from the homing output cam, the detection of the homing mark is
enabled.

1594

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
5. Detection of the homing mark
When the homing mark is detected, the position of the technology object is set depending
on the configured mode:
– "Mode" parameter at "MC_Home" = 3
Position = value in parameter "Position" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
– "Mode" parameter at "MC_Home" = 5
Position = value in tag "<TO>.Homing.HomePosition" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
6. Approach to the home position
– "Mode" parameter at "MC_Home" = 3
The axis moves to the position that is specified in the "Position" parameter.
– "Mode" parameter at "MC_Home" = 5
The axis moves to the position that is specified in the "<TO>.Homing.HomePosition" tag.
Nota
If the velocity cannot be reduced to the reference velocity between detection of the
reference output cam and the zero mark, homing is performed at the velocity present when
the zero mark is crossed.

Consulte también
Homing SINAMICS drives with external zero marks (Página 1543)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1595

Control de movimiento
6.1 Using S7-1500 Motion Control

Active homing with zero mark
The following figure shows an example of the homing motion with the following settings:
● Active homing with zero mark
● Homing in the positive direction
● Positive home position offset
Velocity
Reference mark position
Approach velocity
Home position
Homing velocity




Approach to reference mark

Position

Approach to home position

Home position offset
Zero mark
(Reference mark)

Motion sequence
The motion occurs in the following sequence:
1. Start of active homing via the Motion Control instruction "MC_Home"
2. Move to the homing mark in the homing direction with the homing velocity

1596

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Detection of the homing mark
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
– "Mode" parameter at "MC_Home" = 3
Position = value in parameter "Position" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
– "Mode" parameter at "MC_Home" = 5
Position = value in tag "<TO>.Homing.HomePosition" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
4. Approach to the home position
– "Mode" parameter at "MC_Home" = 3
The axis moves to the position that is specified in the "Position" parameter.
– "Mode" parameter at "MC_Home" = 5
The axis moves to the position that is specified in the "<TO>.Homing.HomePosition" tag.

Consulte también
Homing SINAMICS drives with external zero marks (Página 1543)

Active homing with digital input
The following figure shows an example of the homing motion with the following settings:
● Active homing with digital input
● Approach in the positive direction

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1597

Control de movimiento
6.1 Using S7-1500 Motion Control
● Homing mark on the positive side of the digital input
● Positive home position offset
Velocity
Reference mark position
Approach velocity
Home position

Homing velocity



Approach to Approach to home position
reference mark



Position

Approach to switch at
digital input

Digital input

Home position offset

Falling edge at the digital input
(Reference mark)

Motion sequence
The motion occurs in the following sequence:
1. Start of active homing via the "MC_Home" Motion Control instruction
2. Detection of the positive edge at the digital input, while moving with homing velocity
3. Approach to the homing mark

1598

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
4. Detection of the homing mark
In the example, the negative edge of the switch at the digital input represents the homing
mark.
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
– "Mode" parameter at "MC_Home" = 3
Position = value in parameter "Position" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
– "Mode" parameter at "MC_Home" = 5
Position = value in tag "<TO>.Homing.HomePosition" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
5. Approach to the home position
– "Mode" parameter at "MC_Home" = 3
The axis moves to the position that is specified in the "Position" parameter.
– "Mode" parameter at "MC_Home" = 5
The axis moves to the position that is specified in the "<TO>.Homing.HomePosition" tag.
Nota
If the velocity on the span from the detection of the positive edge to the negative edge cannot
be reduced to the homing velocity, then homing occurs at the velocity that exists when the
homing mark is traversed.

Direction reversal at the hardware limit switch (reversing cam)
During active homing, the hardware limit switch can optionally be used as a reversing cam. If
the homing mark is not detected or the motion was not in the homing direction, the motion
continues in the opposite direction with the approach velocity after the reversing cam.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1599

Control de movimiento
6.1 Using S7-1500 Motion Control
When the hardware limit switch is reached, the default settings for dynamics take effect.
Deceleration with the emergency deceleration does not hereby occur.
ATENCIÓN
Avoid moving to a mechanical endstop
Ensure by one of the following measures, that in a direction reversal the machine does not
move to a mechanical endstop.
● Keep the approach velocity low.
● Increase the configured acceleration/deceleration.
● Increase the distance between the hardware limit switch and the mechanical endstop.

Passive homing with homing output cam and zero mark
The following figure shows an example of the homing motion with the following settings:
● Passive homing with homing output cam and zero mark
● Homing in the positive direction
9HORFLW\
+RPHSRVLWLRQ

+RPHSRVLWLRQDSSURDFK

ದ

3RVLWLRQ

5HIHUHQFHFDP
=HURPDUN
KRPLQJPDUN

Motion sequence
The motion occurs in the following sequence:
1. Activation of passive homing using the Motion Control instruction "MC_Home"
2. Motion due to a Motion Control job from the user
The detection of the reference output cam and homing mark is enabled when the actual
position value of the axis or encoder moves in the assigned homing direction.
3. Detection of the reference output cam

1600

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
4. Departure from the reference output cam
The departure from the reference output cam enables the detection of the homing mark.
5. Detection of the homing mark
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
– "Mode" parameter at "MC_Home" = 2, 8
Position = value in parameter "Position"
– "Mode" parameter at "MC_Home" = 10
Position = value in tag "<TO>.Homing.HomePosition"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
Nota
If the motion direction changes after departure from the reference output cam and before
detection of the homing mark, the reference output cam must be detected again. The Motion
Control instruction "MC_Home" remains enabled.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1601

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing with zero mark
The following figure shows an example of the homing motion with the following settings:
● Passive homing with zero mark
● Homing in the positive direction
Velocity
Home position

Approach to home position
Position





Zero mark
(Reference mark)

1602

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion sequence
The motion occurs in the following sequence:
1. Activation of passive homing using the Motion Control instruction "MC_Home"
2. Motion due to a Motion Control job from the user
The detection of the homing mark is enabled when the actual position value of the axis or
encoder moves in the assigned homing direction.
3. Detection of the homing mark
During the detection of the homing mark, the position of the axis or encoder is set depending
on the set mode:
– "Mode" parameter at "MC_Home" = 2, 8
Position = value in parameter "Position"
– "Mode" parameter at "MC_Home" = 10
Position = value in tag "<TO>.Homing.HomePosition"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1603

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing with digital input
The following figure shows an example of the homing motion with the following settings:
● Passive homing with digital input
● Homing in the positive direction
● Homing mark on the positive side of the digital input
Velocity
Home position

Approach to home position





Position

Digital input
Falling edge at the digital input
(Reference mark)

1604

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion sequence
The motion occurs in the following sequence:
1. Activation of passive homing using the Motion Control instruction "MC_Home"
2. Motion due to a Motion Control job from the user
The detection of the homing mark at the digital input is enabled when the actual position
value of the axis or encoder moves in the assigned homing direction.
3. Detection of the homing mark
In the example, the falling edge of the switch at the digital input represents the homing mark.
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
– "Mode" parameter at "MC_Home" = 2, 8
Position = value in parameter "Position"
– "Mode" parameter at "MC_Home" = 10
Position = value in tag "<TO>.Homing.HomePosition"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).

Direct homing
Depending on the configured mode, the position of the positioning axis/synchronous axis or
external encoder technology objects can be absolutely or relatively set with "MC_Home".

Set actual position absolutely
To set the actual position absolutely, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the absolute actual position in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 0.
The position is set to the value specified in the "Position" parameter.

Set actual position relatively
To set the actual position relatively, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the relative actual position in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 1.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1605

Control de movimiento
6.1 Using S7-1500 Motion Control
The position is set to the current position plus the value specified in the "Position" parameter.

Set position setpoint absolutely
To set the position setpoint absolutely, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the absolute position setpoint in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 11.
The position is set to the current position plus the value specified in the "Position" parameter.

Set position setpoint relatively
To set the position setpoint relatively, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the relative position setpoint in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 12.
The position is set to the current position plus the value specified in the "Position" parameter.

Direct homing at fixed stop
For direct homing at fixed stop, all motions must be programmed in the user program. Change
the configuration data directly in the user program. The fixed stop is used as homing mark.
ATENCIÓN
Too fast manual traversing to the fixed stop
Too fast a manual traversing of the axis can lead to machine damage.
Move the axis manually with low speed/velocity. Configure a suitable torque limit.
To set the position at the fixed stop absolutely or relatively, proceed as follows:
1. Activate a suitable fixed stop detection with the Motion Control instruction
"MC_TorqueLimiting".
2. Deactivate the existing hardware limit switch with the Motion Control instruction
"MC_WriteParameter".
3. Move the axis to the fixed stop using a suitable motion job. For example, use the Motion
Control instructions "MC_MoveRelative" or "MC_MoveJog".
4. After the axis has reached the fixed stop, execute a direct homing using the Motion Control
instruction "MC_Home".
5. Move the axis back to the working area between the hardware limit switches.
6. Activate the hardware limit switch with the Motion Control instruction "MC_WriteParameter".
7. Deactivate the fixed stop detection using the Motion Control instruction
"MC_TorqueLimiting".

1606

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Absolute value adjustment
In absolute value adjustment, Motion Control determines an absolute value offset, that is
retentively stored on the CPU.
Depending on the configured mode, the position of the axis or the encoder is absolutely or
relatively set in the "MC_Home" Motion Control instruction.
● Parameter "Mode" = 7 (absolute specification of position)
Position = value in parameter "Position"
● Parameter "Mode" = 6 (relative specification of position)
Position = current position + value in parameter "Position"

Resetting the "Homed" status
Incremental encoder
In the following cases, the "Homed" status is reset, and the technology object must be rehomed.
● Error in sensor system/encoder failure
● Triggering of the active homing with the Motion Control instruction "MC_Home" with
"Mode" = 3, 5
(After successful completion of the homing operation, the "Homed" status is reset.)
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
● Triggering of passive homing using the Motion Control instruction "MC_Home" with "Mode"
= 2, 8, 10
(After successful completion of the homing operation, the "Homed" status is reset.)
● Replacement of the CPU
● Replacement of the SIMATIC Memory Card
● POWER OFF
● Memory reset
● Modification of the encoder configuration
● Restart of the technology object
● Restoration of the CPU factory settings
● Transfer of a different project into the controller

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1607

Control de movimiento
6.1 Using S7-1500 Motion Control

Absolute encoder
In the following cases, the "Homed" status is reset, and the technology object must be rehomed.
● Replacement of the CPU
● Modification of the encoder configuration
● Restoration of the CPU factory settings
● Transfer of a different project into the controller
When you use a new absolute value encoder you need to home the absolute encoder once
again.
Resetting the memory of the CPU or upgrading a project does not require another absolute
value adjustment.

Tags: Homing
The following technology object tags are relevant for homing:
Status indicators
Tag

Description

<TO>.StatusWord.X11 (HomingCom‐
mand)

Homing job running

<TO>.StatusWord.X5 (HomingDone)

Technology object homed

<TO>.ErrorWord.X10 (HomingFault)

Error occurred during homing

Nota
Evaluation of the bits in StatusWord, ErrorWord and WarningWord
Note the information in section "Evaluating StatusWord, ErrorWord und WarningWord" of the
documentation "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Approach to reference output cam
Tag

Description

<TO>.Homing.ApproachDirection

Start direction or approach direction for the approach to the
reference output cam

<TO>.Homing.ApproachVelocity

Velocity for the approach to the reference output cam

Approach to the homing mark

1608

Tag

Description

<TO>.Sensor[1..4].ActiveHoming.Di‐
rection

Homing direction

<TO>.Homing.ReferencingVelocity

Velocity for the approach to the homing mark

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Approach to home position
Tag

Description

<TO>.Homing.ApproachVelocity

Velocity for the move to homing point

Positions
Tag

Description

<TO>.Homing.AutoReversal

Reversal at the hardware limit switches

<TO>.Homing.HomePosition

Home position

<TO>.StatusSensor[1..4].AbsEncode‐
rOffset

Calculated offset after the absolute encoder adjustment

Parameters for active homing
Tag

Description

<TO>.Sensor[1..4].ActiveHoming.Mode Homing mode
<TO>.Sensor[1..4].ActiveHoming.Si‐
deInput

Side of the digital input

<TO>.Sensor[1..4].ActiveHoming.Di‐
rection

Homing direction or approach direction

<TO>.Sensor[1..4].ActiveHoming.Digi‐
talInputAddress

Address of digital input

<TO>.Sensor[1..4].ActiveHoming.Ho‐
mePositionOffset

Offset of the homing mark from the home position

Parameters for passive homing
Tag

Description

<TO>.Sensor[1..4].PassiveHoming.Mo‐ Homing mode
de
<TO>.Sensor[1..4].PassiveHoming.Si‐
deInput

Side of the digital input

<TO>.Sensor[1..4].PassiveHoming.Di‐
rection

Homing direction or approach direction

<TO>.Sensor[1..4].PassiveHoming.Di‐
gitalInputAddress

Address of digital input

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1609

Control de movimiento
6.1 Using S7-1500 Motion Control

Position monitoring functions
The following functions are available in the positioning axis/synchronous axis technology
object for monitoring positioning and motion:
● Positioning monitoring (Página 1610)
The actual position value must reach a positioning window within a specified time, and
remain in this positioning window for a minimum dwell time.
● Following error monitoring (Página 1611)
The following error is monitored based on a velocity-dependent following error limit. The
permissible maximum following error depends on the velocity setpoint.
If monitored conditions are violated, then technology alarms are output. The technology object
responds in accordance with the alarm response.

Positioning monitoring
Positioning monitoring monitors the behavior of the actual position at the end of the setpoint
calculation.
As soon as the velocity setpoint reaches the value zero, the actual position value must be
located in the positioning window within a tolerance time. The actual value must not exit the
positioning window during the minimum dwell time.
If the actual position is reached at the end of a positioning motion within the tolerance time and
remains in the positioning window for the minimum dwell time, then "<TO>.StatusWord.X6
(Done)" is set in the technology data block. After expiration of the minimum dwell time, the
"Done" parameter of the corresponding Motion Control instruction is also set. This completes
a motion job.
The following figure shows the chronological sequence and the positioning window:
Minimum dwell time
Position

Positioning window
Time

Setpoint
Actual value

Tolerance time

Positioning monitoring does not make any distinction between how the setpoint interpolation
was completed. The end of setpoint interpolation can for example be reached as follows:
● By the setpoint reaching the target position
● By position-controlled stopping during motion by the Motion Control instruction "MC_Halt"
or "MC_Stop"

1610

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Violation of positioning monitoring
In the following cases, technology alarm 541 is output by the positioning monitoring, and the
technology object is disabled (alarm reaction: remove enable).
● The actual value does not reach the positioning window during the tolerance time.
● The actual value exits the positioning window during the minimum dwell time.

Following error monitoring
The following error in the positioning axis/synchronous axis technology object is monitored
based on a velocity-dependent following error limit. The permissible following error depends on
the velocity setpoint.
A constant permissible following error can be specified for velocities lower than an adjustable
velocity low limit.
Above this low velocity limit, the permissible following error increases in proportion to the
velocity setpoint. The configurable maximum permissible following error is the maximum
velocity limit.

Calculation of the following error
The real following error is the difference between the set and actual position in relation to the
values of the drive. The real following error is therefore greater than the following error
calculated in the CPU and greater than the following error calculated in the trace. When
calculating the following error, the transmission times of the setpoint to the drive and of the
actual position value to the controller are deducted. The following error is calculated from the
delayed position setpoint minus the actual position in the controller.
The calculation of the following error is valid for the following conditions:
● Position control with and without DSC
● Configuration with and without precontrol of the position control loop
● Configuration of the drive coupling via a PROFIdrive telegram or via an analog output

Warning limit
A warning limit can be specified for the following error. The warning limit is input as a
percentage value and operates relative to the current permissible following error. If the warning
limit of the following error is reached, then technology alarm 522 is output. This is a warning and
contains no alarm response.

Violation of the permissible following error
If the permissible following error is exceeded, then technology alarm 521 is output, and the
technology object is disabled (alarm response: remove enable).
When force/torque limiting is activated, the monitoring of the permissible following error can be
deactivated.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1611

Control de movimiento
6.1 Using S7-1500 Motion Control

Standstill signal
When the actual velocity reaches the standstill window and remains there for the minimum
dwell time, the standstill of the axis is indicated.

Tags: Position monitoring functions
Standstill signal
The following technology object tags are relevant for position monitoring and for the standstill
signal:
Status indicators
Tag

Description

<TO>.StatusWord.X7 (Standstill)

Set to the value "TRUE" when the actual velocity reaches the
standstill window and does not exit it within the minimum
dwell time.
The standstill signal is only present for the positioning axis/
synchronous axis.

<TO>.StatusWord.X6 (Done)

Positioning axis/synchronous axis
Set to the value "TRUE" when the actual velocity value rea‐
ches the positioning window within the tolerance time and
remains in the window for the minimum dwell time.
Speed axis
Set to "TRUE" when the motion is complete and the speed
setpoint is therefore equal to zero.

<TO>.ErrorWord.X12 (Positioning‐
Fault)

A positioning error has occurred.

Positions and times
Tag

Description

<TO>.PositioningMonitoring.Tolerance‐ Maximum permissible time until positioning window is rea‐
Time
ched
The time is started with the end of the setpoint interpolation.
<TO>.PositioningMonitoring.MinDwell‐
Time

Minimum dwell time in position window

<TO>.PositioningMonitoring.Window

Positioning window

Standstill signal

1612

Tag

Description

<TO>.StandstillSignal.VelocityThres‐
hold

Velocity threshold for the standstill signal

<TO>.StandstillSignal.MinDwellTime

Minimum dwell time below the velocity threshold

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Following error monitoring
The following technology object tags are relevant for following error monitoring:
Status indicators
Tag

Description

<TO>.StatusPositioning.FollowingError Current following error
<TO>.ErrorWord.X11 (FollowingError‐
Fault)

Status indication, that the following error is too large

<TO>.WarningWord.X11 (FollowingE‐
rrorWarning)

Status indication, that the following error warning limit has
been reached

Control bits
Tag

Description

<TO>.FollowingError.EnableMonitoring Enable/disable following error monitoring

Limits
Tag

Description

<TO>.FollowingError.MinVelocity

Lower velocity setpoint for the characteristic curve of the ma‐
ximum following error

<TO>.FollowingError.MinValue

Permissible following error below the "<TO>.FollowingE‐
rror.MinVelocity"

<TO>.FollowingError.MaxValue

Maximum permissible following error at maximum axis velo‐
city

<TO>.FollowingError.WarningLevel

Warning limit as a percentage value relative to the maximum
permissible following error (velocity-dependent in accordan‐
ce with the characteristic curve)

Closed-loop control
The position controller of the positioning axis/synchronous axis is a closed-loop P controller
with or without velocity precontrol. Use the servo gain factor to set the gain of the proportionalaction controller. The achievable servo gain factor depends on the structural requirements of
the axis.
Closed-loop controllers and monitoring are active when closed loop position control is active.
If closed loop position control is inactive, encoder systems, actual value calculation and
monitoring are active on the actual value side.

Velocity precontrol
The velocity precontrol can be used to minimize the velocity-based following error during
position control. As a result, faster positioning is achieved, if needed, because the position
controller only has to compensate disturbances.
When using the velocity precontrol, the velocity setpoint is additionally added to the output of
the position controller. You can weight this additional setpoint by a factor.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1613

Control de movimiento
6.1 Using S7-1500 Motion Control
The symmetry filter is a simplified model of the speed control loop. The symmetry filter is used
to prevent the position controller from overriding the speed manipulated variable during the
acceleration and deceleration phases. To accomplish this, the position setpoint of the position
controller is delayed by the speed control loop substitute time in relation to the speed precontrol.

Dynamic Servo Control (DSC)
In drives that support Dynamic Servo Control (DSC), you can optionally use the closed-loop
position controller in the drive. If you use telegrams that support DSC, DSC is automatically
activated. The position controller in the drive is usually implemented with a rapid speed-control
cycle. This improves the control performance for digitally coupled drives.
The following requirements must be met to use DSC:
● The motor encoder (first encoder in the telegram) of the drive is used as the first encoder for
the technology object.
● One of the following PROFIdrive telegrams is used for the drive:
– Standard telegram 5 or 6
– SIEMENS telegram 105 or 106

Consulte también
PROFIdrive telegrams (Página 1555)

Control structure
The following figure shows the effective closed loop control structure without DSC:
&RQWUROOHU

%XV

'ULYH


3UHFRQWUROYDOXH

YVHWSRLQW
3UHFRQWURO

,32


[VHWSRLQW

QVHWSRLQW

ದ
%DODQFLQJILOWHU





&ORVHGORRS
SRVLWLRQFRQWURO
[DFWXDOYDOXH

①
②
③

Interpolator with motion control
Internal consideration of the signal propagation times and the speed-control loop substitute time
Communication between controller and drive

The following figure shows the effective closed loop control structure with DSC:

1614

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
&RQWUROOHU

%XV



'ULYH


YVHWSRLQW
3UHFRQWURO


,32
[VHWSRLQW

%DODQFLQJILOWHU

3UHFRQWURO
YDOXH

ದ

&ORVHGORRS
SRVLWLRQFRQWURO

[DFWXDOYDOXH

①
②
③

Interpolator with motion control
Internal consideration of speed control loop substitute time
Communication between controller and drive

Additional information
For more information about the control structure, refer to Siemens Industry Online Support in
the FAQ entry 109770664 (https://support.industry.siemens.com/cs/ww/en/view/109770664).

Consulte también
Configuration - Control loop (Página 1659)

Non position-controlled operation
The closed loop position control of an axis can be switched off/switched with the following
Motion Control instructions:
● MC_Power
● MC_MoveVelocity
● MC_MoveJog
● MC_MotionInVelocity
The non-position-controlled operation is displayed with "<TO>.StatusWord.X28
(NonPositionControlled)" = TRUE.

MC_Power
The axis is enabled without closed loop position control with "MC_Power" and the parameter
"StartMode" = 0. The closed loop position control remain switched off until a different Motion
Control instruction changes the status of the closed loop position control.

MC_MoveVelocity and MC_MoveJog
A "MC_MoveVelocity" or "MC_MoveJog" job with "PositionControlled" = FALSE forces nonposition-controlled operation.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1615

Control de movimiento
6.1 Using S7-1500 Motion Control
A "MC_MoveVelocity" or "MC_MoveJog" job with "PositionControlled" = TRUE forces positioncontrolled operation.
The selected mode remains in effect after the job is completed.

MC_MotionInVelocity and MC_MotionInPosition
A "MC_MotionInVelocity" job with "PositionControlled" = FALSE forces non-position-controlled
operation.
A "MC_MotionInVelocity" job with "PositionControlled" = TRUE forces position-controlled
operation.
The selected mode remains in effect after the job is completed.
A "MC_MotionInPosition" job forces position-controlled operation.

Influence of additional Motion Control instructions
Starting the following Motion Control instructions forces position-controlled operation of the
axis:
● MC_Home with "Mode" = 3, 5
● MC_MoveAbsolute
● MC_MoveRelative
● MC_MoveSuperimposed
● MC_MotionInPosition
● MC_GearIn
● MC_GearInPos (S7-1500T)
● MC_CamIn (S7-1500T)
The closed loop position control remains active after completing the corresponding jobs.
The Motion Control instructions "MC_Halt" and "MC_Stop" are executed in position-controlled
and also in non-position-controlled operation. The status of the closed loop position control is
not changed by "MC_Halt"/"MC_Stop".
A torque limiting activated with "MC_TorqueLimiting" is in effect even with non-positioncontrolled operation.

Tags: Closed-loop control
The following technology object tags are relevant for the closed-loop control:
Parameters

1616

Tag

Description

<TO>.PositionControl.Kv

Proportional gain of the closed loop position control

<TO>.PositionControl.Kpc

Velocity precontrol of the positioning system (in %)

<TO>.PositionControl.EnableDSC

Enable DSC

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Tag

Description

<TO>.DynamicAxisModel.VelocityTi‐
meConstant

Speed control loop substitute time [s]

<TO>.PositionControl.ControlDifferen‐
ceQuantization.Mode

Type of quantification
Configuration of a quantization when a drive with stepper
motor interface is connected
0

No quantification

1

Quantization corresponding to encoder resolution

2

Quantization to a direct value (value input in
"<TO>.PositionControl.ControlDifferenceQuanti‐
zation.Value")

Configuration is performed using the parameter view (data
structure).
<TO>.PositionControl.ControlDifferen‐
ceQuantization.Value

Value of quantification
Configuration of a value for quantization to a direct value
("<TO>.PositionControl.ControlDifferenceQuantization.Mo‐
de" = 2)
The quantization value is specified in the position unit of the
axis.
Configuration is performed using the parameter view (data
structure).

6.1.2.3

Configuring

Configuring the Speed-Control Axis technology object
Configuration - Basic Parameters
Configure the basic properties of the technology object in the "Basic Parameters" configuration
window.

Name
Define the name of the speed axis in this field. The technology object is listed under this name
in the project tree. You can use the variables of the speed axis in the user program under this
name.

Axis type
If you want to use the axis in the CPU exclusively as a virtual leading axis for synchronization,
for example, select the "Virtual axis" check box. The configuration of a drive and encoder
connection is not relevant.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1617

Control de movimiento
6.1 Using S7-1500 Motion Control

Units of measure
In the drop-down lists, select the desired units of measurement for the speed and the torque.

Simulation
If you want to move a real axis in the simulation mode, select the "Activate simulation" check
box.
In simulation mode, speed, positioning and synchronous axes can be simulated in the CPU
without connected drives and encoders. Simulation mode is possible as of Technology Version
V3.0 even without a configured drive and encoder connection.
For simulation mode without hardware connected to the CPU, you can influence the startup
time of the CPU via the "Configuration time for central and distributed I/Os" parameter. You can
find the parameter in the CPU properties in the "Startup" area navigation.

Consulte también
Units of measure (Página 1389)
Axis in simulation (Página 1569)

Hardware interface
Configuration - Drive
In the "Drive" configuration window, configure which drive type and which drive you want to use.

Drive type
In the drop-down list, select whether you want to deploy a PROFIdrive drive or a drive with an
analog drive connection.
PROFIdrive drives are connected to the controller by means of a digital communication system
(PROFINET or PROFIBUS). The communication is performed via PROFIdrive telegrams.
Drives with an analog drive connection receive the speed setpoint via an analog output signal
(e.g. from -10 V to +10 V) from the CPU.

Drive type: PROFIdrive
Data connection
In the drop-down list, select whether the data connection is to be made directly with the drive
device or via an editable data block in the user program.
Drive/data block
In the "Drive" field, select an already configured PROFIdrive drive/slot. If you have selected a
PROFIdrive drive, you can configure the PROFIdrive drive using the "Device configuration"
button.

1618

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
If no PROFIdrive drive is available for selection, switch to the device configuration, and add a
PROFIdrive drive in the network view.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the option
"Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive drive.
If you have selected "Data block" under the data connection, select a previously created data
block which contains a tag structure of the data type "PD_TELx" ("x" stands for the telegram
number to be used).

Drive type: Analog drive connection
Analog output
In the "Analog output" field, select the PLC tag of the analog output via which the drive is to be
controlled.
In order to be able to select an output, you first need to add an analog output module in the
device configuration and define the PLC tag name for the analog output.
Activating enable output
Select the "Activate enable output" check box if the drive supports an enable.
Select the PLC tag of the digital output for the drive enable in the corresponding field. With the
enable output, the speed controller in the drive is enabled, or disabled.
In order to be able to select an enable output, a digital output module must be added in the
device configuration and the PLC tag name must be defined for the digital output.
Nota
If you do not use an enable output, the drive cannot be immediately disabled on the part of the
system due to error reactions or monitoring functions. A controlled stop of the drive is not
guaranteed.
Enable ready input
Select the "Enable ready input" check box if the drive can signal its readiness.
Select the PLC tag of the digital input via which the drive is to signal its operational readiness
to the technology object in the corresponding field. The power module is switched on and the
analog speed setpoint input is enabled.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1619

Control de movimiento
6.1 Using S7-1500 Motion Control
In order to be able to select a ready input, you first need to add a digital input module in the
device configuration and define the PLC tag name for the digital input.
Nota
The enable output and the ready input can be separately enabled.
The following boundary conditions apply to the activated ready input:
● The axis is only enabled ("MC_Power Status" = TRUE) when a signal is present at the ready
input.
● If a signal is not present at the ready input on an enabled axis, the axis of the alarm response
"Remove enable" is disabled.
● If the axis is disabled with the instruction "MC_Power" ("Enable" = FALSE), the axis is
disabled even when a signal is present at the ready input.

Consulte también
Configuration - Data exchange with the drive (Página 1620)
Connect drive/encoder via data block (Página 1440)
Drive and encoder connection (Página 1554)

Configuration - Data exchange with the drive
Configure the data exchange with the drive in the "Data exchange with the drive" configuration
window.
The configuration differs according to the selected drive type:

Drive type: PROFIdrive
Drive telegram
The telegram to the drive that is set in the device configuration is preselected in the drop-down
list.
Automatically apply drive values during configuration (offline)
Select the check box if you want to transfer the offline values of the drive "Reference speed",
"Maximum speed" and "Reference torque" to the configuration of the technology object in the
project.
Automatically apply drive values at runtime (online)
Select the check box if you want to transfer the effective values "Reference speed", "Maximum
speed" and "Reference torque" online in the drive to the CPU during runtime. The drive
parameters are transferred from the bus after the (re-)initialization of the technology object or
the (re)start of the drive or the CPU.

1620

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Alternatively, you must synchronize the following parameters manually:
● Reference speed
Configure the reference speed of the drive in accordance with the manufacturer's
specifications in this field. The specification of the drive speed is a percentage of the
reference speed in the range -200% to 200%.
● Maximum speed
Configure the maximum speed of the drive in this field.
● Reference torque
Configure the reference torque of the drive corresponding to its configuration in this field.
The reference torque is needed for force/torque reduction, which is supported with telegram
10x.
Supplementary data
Select the "Torque data" check box if you want to configure the data connection of the torque
data. If you have selected a drive with which the additional telegram 750 has been configured,
the "Torque data" check box is preselected.
Data connection
In the drop-down list, define whether the data connection should be made via additional
telegrams or data blocks:
● If you select the entry "Additional telegram" in the "Data connection" drop-down list, you can
edit the "Additional telegram" drop-down list.
● If you select the "Data block" entry in the "Data connection" drop-down list, you can select
the previously created data block which contains a tag structure of the "PD_TELx" data type
("x" stands for the additional telegram number that is used).
Data block / additional telegram
Select an additional telegram configured in the "Additional telegram" field.
Select the "Show all modules" check box if you want to display all submodules of the connected
drive. You can also find self-defined additional telegrams with this function.
In the "Data block" field, select the data block which you want to use to integrate the torque data.
Nota
Automatic transfer of drive parameters is only possible with SINAMICS drives as of V4.x. For
this, "Drive" must be selected for the data connection in configuration window "Hardware
interface > Drive".

Drive type: Analog drive connection
Reference speed
The reference speed of the drive is the speed with which the drive spins when there is an output
of 100% at the analog output. The reference speed must be configured for the drive and
transferred in the configuration of the technology object.
The analog value that is output at 100% depends on the type of the analog output. For example,
for an analog output with +/- 10 V, the value 10 V is output at 100%.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1621

Control de movimiento
6.1 Using S7-1500 Motion Control
Analog outputs can be overridden by approximately 17%. This means that an analog output
can be operated in the range from -117% to 117%, insofar as the drive permits this.

Consulte también
Automatic transfer of drive and encoder parameters in the device (Página 1560)
Connect drive/encoder via data block (Página 1440)
Drive and encoder connection (Página 1554)

Extended Parameters
Configuration - Mechanics
Configure the connection of the load to the drive in the "Mechanics" configuration window.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Consulte también
Mechanics (Página 1572)

Configuration - Dynamic Defaults
In the "Dynamic default values" configuration window, configure the default values for speed,
acceleration, deceleration jerk of the axis.
The default values take effect when values < 0 are specified in Motion Control instructions for
the "Velocity", "Acceleration", "Deceleration" or "Jerk" parameters. The default values can be
applied separately for each of the parameters just listed.

Speed
In this field, define the default value for the speed of the axis.

1622

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Acceleration/deceleration - Ramp-up time/ramp-down time
Set the desired default value for acceleration in the "Ramp-up time" or "Acceleration" fields.
The desired deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Speed
Acceleration

Speed
Deceleration

Nota
A change in the speed influences the acceleration and deceleration values of the axis. The
ramp-up and ramp-down times are retained.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
● Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that jerk limiting is deactivated.
● Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The jerk value is identical for the acceleration and deceleration ramp. The smoothing time
in effect for the deceleration ramp results from the following relationships:
● Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1623

Control de movimiento
6.1 Using S7-1500 Motion Control

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte también
Velocity profile (Página 1579)

Configuration - Emergency stop
In the "Emergency stop" configuration window, you can configure the emergency stop
deceleration of the axis. In the event of an error, and when disabling the axis, the axis is brought
to a standstill with this deceleration using the Motion Control instruction "MC_Power" (input
parameter "StopMode" = 0).

Emergency deceleration/emergency stop ramp-down time
Configure the deceleration value for emergency stop in the "Emergency stop deceleration" field
or the "Emergency stop ramp-down time" field.
The relationship between emergency stop ramp-down time and emergency stop deceleration
can be seen in the following equation:

Emergency stop ramp-down time =

Maximum speed
Emergency stop deceleration

The configuration of the emergency stop deceleration is related to the configured maximum
speed of the axis. If the maximum speed of the axis is changed, then the value of the
emergency deceleration also changes (the emergency stop ramp-down time remains
unchanged).

Consulte también
Emergency stop deceleration (Página 1581)

Limits
Configuration - Dynamic limits
In the "Dynamic limits" configuration window, configure the maximum values for speed,
acceleration, deceleration and jerk of the axis.

1624

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Maximum speed
In this field, define the maximum permitted speed of the axis.

Maximum acceleration/maximum deceleration - ramp-up time/ramp-down time
Set the desired acceleration in the "Ramp-up time" or "Acceleration" fields. The desired
deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Maximum velocity
Acceleration

Maximum speed
Deceleration

Nota
Change of maximum speed
A change in the maximum speed influences the acceleration and deceleration values of the
axis. The ramp-up and ramp-down times are retained.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1625

Control de movimiento
6.1 Using S7-1500 Motion Control

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
● Set the desired jerk for the acceleration ramp and the deceleration ramp in the "Maximum
jerk" box. The value 0 means that the jerk is not limited.
● Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
Various acceleration and deceleration values
The configured smoothing time displayed in the configuration, applies only to the
acceleration ramp.
If the values of the acceleration and deceleration differ, the smoothing time of the
deceleration ramp is calculated and used according to the jerk of the acceleration ramp.
The smoothing time of the deceleration is adapted as follows:
● Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration
(Página 1581) (alarm reaction "Stop with maximum dynamic values"). A configured jerk limit
is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte también
Dynamic limits in gearing (Página 1886)

Configuration - Torque limits
Configure the torque limiting of the drive in the "Torque limits" configuration window.
The configuration is only available if a drive that supports force/torque limiting is selected and
a telegram 10x is used.

1626

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Effective
In the drop-down list, select whether the limit value is to be in effect "on load side" or "on motor
side".

Torque limiting
Enter a default value for the torque limit in the specified unit of measure in this field.
The default value is in effect when the torque limiting is specified using Motion Control
instruction "MC_TorqueLimiting", input parameter "Limit" < 0.
If the efficiency of the gear is crucial, you can set it in the "<TO>.Actor.Efficiency" tag.

Consulte también
Force/torque limiting (Página 1583)

Configuring the Positioning Axis technology object
Configuration - Basic Parameters
Configure the basic properties of the technology object in the "Basic Parameters" configuration
window.

Name
Define the name of the positioning axis in this field. The technology object is listed under this
name in the project tree. The variables of the technology object can be used in the user program
under this name.

Axis type
If you want to use the axis in the CPU exclusively as a virtual leading axis for synchronization,
for example, select the "Virtual axis" check box. The configuration of a drive and encoder
connection is not relevant.
In this selection, configure whether the axis should perform linear or rotary motions.

Units of measure
In the drop-down list, select the desired units of measure for the position, velocity, torque and
force of the axis.
If you wish to use six decimal places in the selected unit, select the check box "Use position
values with higher resolution".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1627

Control de movimiento
6.1 Using S7-1500 Motion Control

Modulo
Select the "Enable modulo" check box if you want to use a recurring system of units for the axis
(e.g. 0° to 360° for an axis of the "rotary" axis type).
● Modulo start value
In this field, define the position at which the modulo range should begin (e.g. 0° for an axis
of the "rotary" axis type).
● Modulo length
In this field, define the length of the modulo range (e.g. 360° for an axis of the "rotary" axis
type).

Simulation
If you want to move a real axis in the simulation mode, select the "Activate simulation" check
box.
In simulation mode, speed, positioning and synchronous axes can be simulated in the CPU
without connected drives and encoders. Simulation mode is possible as of Technology Version
V3.0 even without a configured drive and encoder connection.
For simulation mode without hardware connected to the CPU, you can influence the startup
time of the CPU via the "Configuration time for central and distributed I/Os" parameter. You can
find the parameter in the CPU properties in the "Startup" area navigation.

Consulte también
Axis in simulation (Página 1569)
Units of measure (Página 1389)
Modulo setting (Página 1551)
Mechanics (Página 1572)

Hardware interface
Configuration - Drive
In the "Drive" configuration window, configure which drive type and which drive you want to use.

Drive type
In the drop-down list, select whether you want to deploy a PROFIdrive drive or a drive with an
analog drive connection.
PROFIdrive drives are connected to the controller by means of a digital communication system
(PROFINET or PROFIBUS). The communication is performed via PROFIdrive telegrams.
Drives with an analog drive connection receive the speed setpoint via an analog output signal
(e.g. from -10 V to +10 V) from the CPU.

1628

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive type: PROFIdrive
Data connection
In the drop-down list, select whether the data connection is to be made directly with the drive
device or via an editable data block in the user program.
Drive/data block
In the "Drive" field, select an already configured PROFIdrive drive/slot. When you have
selected a PROFIdrive drive, you can configure the PROFIdrive drive using the "Device
configuration" and "Drive configuration" buttons.
If no PROFIdrive drive is available for selection, switch to the device configuration, and add a
PROFIdrive drive in the network view. Switch to drive configuration to configure the drive.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the option
"Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive drive.
If you have selected "Data block" under the data connection, select a previously created data
block which contains a tag structure of the data type "PD_TELx" ("x" stands for the telegram
number to be used).

Drive type: Analog drive connection
Analog output
In the "Analog output" field, select the PLC tag of the analog output via which the drive is to be
controlled.
In order to be able to select an output, you first need to add an analog output module in the
device configuration and define the PLC tag name for the analog output.
Activating enable output
Select the "Activate enable output" check box if the drive supports an enable.
Select the PLC tag of the digital output for the drive enable in the corresponding field. With the
enable output, the speed controller in the drive is enabled, or disabled.
In order to be able to select an enable output, a digital output module must be added in the
device configuration and the PLC tag name must be defined for the digital output.
Nota
If you do not use an enable output, the drive cannot be immediately disabled on the part of the
system due to error reactions or monitoring functions. A controlled stop of the drive is not
guaranteed.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1629

Control de movimiento
6.1 Using S7-1500 Motion Control
Enable ready input
Select the "Enable ready input" check box if the drive can signal its readiness.
Select the PLC tag of the digital input via which the drive is to signal its operational readiness
to the technology object in the corresponding field. The power module is switched on and the
analog speed setpoint input is enabled.
In order to be able to select a ready input, you first need to add a digital input module in the
device configuration and define the PLC tag name for the digital input.
Nota
The enable output and the ready input can be separately enabled.
The following boundary conditions apply to the activated ready input:
● The axis is only enabled ("MC_Power Status" = TRUE) when a signal is present at the ready
input.
● If a signal is not present at the ready input on an enabled axis, the axis is disabled with an
error.
● If the axis is disabled with the instruction "MC_Power" ("Enable" = FALSE), the axis is
disabled even when a signal is present at the ready input.

Consulte también
Connect drive/encoder via data block (Página 1440)
Data connection drive/encoder via data block (Página 1570)

Configuration - Encoder
For closed loop position control, positioning axes require an actual position value in the form of
an encoder position. The encoder position is transmitted to the controller by means of a
PROFIdrive telegram.
As well as the S7-1500, the S7-1500T also offers the possibility to configure up to four encoders
and switch between the encoders. You control the switch in the user program with the Motion
Control instruction "MC_SetSensor".

Encoder on startup (S7-1500T)
In the drop-down list, select the encoder that is to be active after startup of the CPU
(STARTUP). The encoder must be configured and marked as "used".
This encoder is used after startup of the CPU and after a restart of the technology object. At an
operating mode transition from STOP → RUN of the CPU (without restart of the technology
object), the encoder that was also active before the STOP is still being used.

Use encoder (S7-1500T)
Select the "Use encoder" check box if you want to use this encoder alternatively for closed loop
position control.

1630

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Data connection
In the drop-down list, select whether the data connection should be established directly with the
encoder or via a data block that can be edited in the user program.
The selection is only possible for encoders that are connected via PROFIdrive and support
parameter P979.

Encoder/data block
Select a previously configured encoder in this configuration field.
The following encoders can be selected:
● Connection to the drive (not with analog drive connection)
The encoder is configured via the configuration of the PROFIdrive drive. The drive evaluates
the encoder signals and sends them to the controller in the PROFIdrive telegram.
● Encoder on technology module (TM)
Select a previously configured technology module and the channel to be used. Only
technology modules set to the "Position input for Motion Control" mode are displayed for
selection.
If no technology module is available for selection, change to the device configuration and
add a technology module. If you have selected a technology module, you can access the
configuration of the technology module using the "Device configuration" button.
You can operate the technology module centrally on an S7-1500 CPU or decentrally on a
distributed I/O. Isochronous mode is not possible with central operation in the CPU.
You can identify the technology modules suitable for position detection for Motion Control
in the documentation for the technology module and the catalog data.
● PROFIdrive encoder on PROFINET/PROFIBUS (PROFIdrive)
In the "PROFIdrive encoder" field, select a configured encoder on PROFINET/PROFIBUS.
When you have selected an encoder, you can configure the encoder using the "Device
configuration" button.
Switch to the device configuration in the network view, and add an encoder, in the event that
no encoder can be selected.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the
option "Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive encoder.
If you have selected "Data block" under the data connection, select in the "Data block" field a
previously created data block which contains a tag structure of the data type "PD_TELx" ("x"
stands for the telegram number to be used).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1631

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder type
Select the encoder type of the encoder in the drop-down list. The following encoder types are
available:
● Incremental (Página 1559)
● Absolute (Página 1559) (measuring range > traversing range)
● Cyclic absolute (Página 1559) (measuring range < traversing range)
Recommended settings for absolute actual values: The "Cyclic absolute" encoder type is
recommended. With this setting, the position of the zero crossing of the encoder is
automatically taken into consideration by the technology object.
Nota
Measuring range of the absolute encoder
Observe the boundary conditions with absolute values.
You can find more information in the section "Absolute actual value (Página 1559)" of the
"S7-1500/S7-1500T Axis functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

Consulte también
Data connection drive/encoder via data block (Página 1570)
Connect drive/encoder via data block (Página 1440)
Using multiple encoders (Página 1562)
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Data exchange with the drive
Configure the data exchange with the drive in the "Data exchange with the drive" configuration
window.
The configuration differs according to the selected drive type:

Drive type: PROFIdrive
Drive telegram
The telegram to the drive that is set in the device configuration is preselected in the drop-down
list.
Automatically apply drive values during configuration (offline)
Select the check box if you want to transfer the offline values of the drive "Reference speed",
"Maximum speed" and "Reference torque" to the configuration of the technology object in the
project.
Automatically apply drive values at runtime (online)

1632

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Select the check box if you want to transfer the effective values "Reference speed", "Maximum
speed" and "Reference torque" online in the drive to the CPU during runtime. The drive
parameters are transferred from the bus after the (re-)initialization of the technology object or
the (re)start of the drive or the CPU.
Alternatively, you must synchronize the following parameters manually:
● Reference speed
Configure the reference speed of the drive in accordance with the manufacturer's
specifications in this field. The specification of the drive speed is a percentage of the
reference speed in the range -200% to 200%.
● Maximum speed
Configure the maximum speed of the drive in this field.
● Reference torque
Configure the reference torque of the drive corresponding to its configuration in this field.
The reference torque is needed for force/torque reduction, which is supported with telegram
10x.
Supplementary data
Select the "Torque data" check box if you want to configure the data connection of the torque
data. If you have selected a drive with which the supplemental telegram 750 has been
configured, the "Torque data" check box is preselected.
Data connection
In the drop-down list, define whether the data connection should be made via supplemental
telegrams or data blocks:
● If you select the entry "Supplemental telegram" in the "Data connection" drop-down list, you
can edit the "Supplemental telegram" drop-down list.
● If you select the "Data block" entry in the "Data connection" drop-down list, you can select
the previously created data block which contains a tag structure of the "PD_TELx" data type
("x" stands for the additional telegram number that is used).
Data block / supplemental telegram
Select an supplemental telegram configured in the "Supplemental telegram" field.
Select the "Show all modules" check box if you want to display all submodules of the connected
drive. You can also find self-defined supplemental telegrams with this function.
In the "Data block" field, select the data block which you want to use to integrate the torque data.
Nota
Automatic transfer of drive parameters is only possible with SINAMICS drives as of V4.x. To do
this, set the "Drive" data connection in the configuration window "Hardware interface > Drive".

Drive type: Analog drive connection
Reference speed

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1633

Control de movimiento
6.1 Using S7-1500 Motion Control
The reference speed of the drive is the speed with which the drive spins when there is an output
of 100% at the analog output. The reference speed must be configured for the drive and
transferred in the configuration of the technology object.
The analog value that is output at 100% depends on the type of the analog output. For example,
for an analog output with +/- 10 V, the value 10 V is output at 100%.
Analog outputs can be overridden by approximately 17%. This means that an analog output
can be operated in the range from -117% to 117%, insofar as the drive permits this.
Maximum speed
Specify the maximum speed of the drive in this field.

Consulte también
Automatic transfer of drive and encoder parameters in the device (Página 1560)
Connect drive/encoder via data block (Página 1440)

Configuration - Data exchange with encoder
Configure detailed encoder parameters and the data exchange of the encoder in the "Data
exchange with encoder" configuration window.
If you are using an S7-1500T CPU, you need to define the settings for each of the maximum
four configured encoders.
The display and selection of the configuration parameters described here is dependent on the
following parameters:
● Configuration window "Basic parameters": Drive type (linear/rotary)
● Configuration window "Hardware interface > Encoder": Encoder type (incremental/absolute/
cyclic absolute)
● Configuration window - "Extended parameters > Mechanics": Encoder mounting type

Settings for (S7-1500T)
In the drop-down list, select the encoder for which you wish to edit the following configurations.

Encoder telegram
The telegram to the encoder that is set in the device configuration is preselected in the dropdown list.

Automatically apply encoder values during configuration (offline)
Select the check box if you want to transfer the offline values of the encoder to the configuration
of the technology object in the project.

1634

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatically apply encoder values during runtime (online)
Select the check box if you want to transfer the effective values online in the encoder to the CPU
during runtime. The encoder parameters are transferred from the bus after the (re-)initialization
of the technology object and (re)start of the encoder or the CPU.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.
Alternatively, you must manually calibrate the following parameters, depending on encoder
type.

Measuring system
In the drop-down list, select the measuring procedure. The options are "Linear" and "Rotary".

Additional parameters
Depending on the selected measuring system and the encoder type selected under
"Technology object > Configurations > Hardware interface > Encoders", configure the
parameters described below:
● Measuring system: Rotary; encoder type: Incremental
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‐
solves per revolution in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.

● Measuring system: Rotary; encoder type: Absolute
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‐
solves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the absolute en‐
coder can detect in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

1635

Control de movimiento
6.1 Using S7-1500 Motion Control
● Measuring system: Rotary; encoder type: Cyclic absolute
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‐
solves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the absolute en‐
coder can detect in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

● Measuring system: Linear; encoder type: Incremental
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‐
coder in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.

● Measuring system: Linear; encoder type: Absolute
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‐
coder in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

● Measuring system: Linear; encoder type: Cyclic absolute
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‐
coder in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

Consulte también
Automatic transfer of drive and encoder parameters in the device (Página 1560)
Connect drive/encoder via data block (Página 1440)
Configuration - Mechanics (Página 1637)
Configuration - Encoder (Página 1630)
Configuration - Data exchange (Página 1665)

1636

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Leading value settings
In the "Leading value settings" configuration window, select the parameters of the leading value
for cross-PLC synchronous operation.

Provision of leading value
In this area, define the settings for transferring the leading value to other CPUs:
Field

Description

Provide cross-PLC lea‐
ding value

Select this check box to make the setpoint or actual value available as leading
value for a cross-PLC synchronous operation.

Transfer area

In this drop-down list, select the output tag of the transfer area set up between
the CPU of the leading axis and the CPUs of the following axes.
You can find more information about the transfer range in the section "Setting
up communication via Controller-Controller direct data exchange" of the do‐
cumentation "S7-1500/S7-1500T Synchronous operation functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766464).

Delay time of the local leading value
In this area, configure the settings for local synchronous operation:
Field

Description

Allow system calcula‐
tion

Select this check box to adapt the delay time of the local leading value in the
system. System calculation is started when you trigger the calculation in the
interconnection overview.

Delay time

If the "Allow system calculation" check box is cleared, this field can be edited.
Enter the delay time in this field.
The entered delay time determines the output delay of the leading value for
the local following axes.
(<TO>.CrossPlcSynchronousOperation.LocalLeadingValueDelayTime)

Interconnection over‐
view

You open the interconnection overview via this link. With a cross-PLC
synchronous operation, the interconnection overview contains an overview
of the interconnected leading and following axes and their CPU assignment.

Extended Parameters
Configuration - Mechanics
In the "Mechanics" configuration window, configure the mounting type of the encoder, and the
adaptation of the actual encoder value to the mechanical conditions.

Settings for (S7-1500T)
In the drop-down list, select the encoder for which the following configurations are to apply.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1637

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder mounting type
In the drop-down list, select how the encoder is mounted to the mechanics.
The configuration differs depending on the axis type and the encoder mounting type selected
in the "Basic parameters" configuration window.
Axis type: Linear
● Linear - On motor shaft (Página 1638)
● Linear - On load side (Página 1639)
● Linear - External Measuring System (Página 1639)
Axis type: Rotary
● Rotary - On motor shaft (Página 1640)
● Rotary - On load side (Página 1640)
● Rotary - External Measuring System (Página 1641)

Invert encoder direction
Select this check box if you must invert the direction of rotation of the encoder.

Consulte también
Using multiple encoders (Página 1562)

Axis type: Linear
Linear - On motor shaft
The encoder is connected to the motor shaft in a mechanically fixed manner. Motor and
encoder form a unit.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

1638

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Linear - On load side
The encoder is mechanically connected to the load side of the gear.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Linear - External Measuring System
An external measuring system provides the position values of the linear load motion.

Distance per encoder revolution
In this configuration field, configure the linear load travel per encoder revolution.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1639

Control de movimiento
6.1 Using S7-1500 Motion Control
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Axis type: Rotary
Rotary - On motor shaft
The encoder is connected to the motor shaft in a mechanically fixed manner. Motor and
encoder form a unit.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Rotary - On load side
The encoder is mechanically connected to the load side of the gear.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

1640

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Rotary - External Measuring System
An external measuring system provides the position values of the rotary load motion.

Distance per encoder revolution
In this configuration field, configure the linear load travel per encoder revolution.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Configuration - Dynamic Defaults
In the "Dynamic default values" configuration window, configure the default values for velocity,
acceleration, deceleration and jerk of the axis.
The default values take effect when values < 0 are specified in Motion Control instructions for
the "Velocity", "Acceleration", "Deceleration" or "Jerk" parameters. The default values can be
applied separately for each of the parameters just listed.
The default values for acceleration and deceleration also act on the traversing motions of active
homing.

Velocity
In this field, define the default value for the velocity of the axis.

Acceleration/deceleration - Ramp-up time/ramp-down time
Configure the desired default value for acceleration in the "Ramp-up time" or "Acceleration"
fields. The desired deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Velocity
Acceleration

1641

Control de movimiento
6.1 Using S7-1500 Motion Control

Ramp-down time =

Velocity
Deceleration

Nota
A change in the velocity influences the acceleration and deceleration values of the axis. The
ramp-up and ramp-down times are retained.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
● Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that jerk limiting is deactivated.
● Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The jerk value is identical for the acceleration and deceleration ramp. The smoothing time
in effect for the deceleration ramp results from the following relationships:
● Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte también
Velocity profile (Página 1579)

1642

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Emergency stop
In the "Emergency stop" configuration window, you can configure the emergency stop
deceleration of the axis. In the event of an error, and when disabling the axis, the axis is brought
to a standstill with this deceleration using the Motion Control instruction "MC_Power" (input
parameter "StopMode" = 0).

Emergency deceleration/emergency stop ramp-down time
Configure the deceleration value for emergency stop in the "Emergency stop deceleration" field
or the "Emergency stop ramp-down time" field.
The relationship between emergency stop ramp-down time and emergency stop deceleration
can be seen in the following equation:

Emergency stop ramp-down time =

Maximum velocity
Emergency stop deceleration

The configuration of the emergency stop deceleration is related to the configured maximum
velocity of the axis. If the maximum velocity of the axis changes, then the value of the
emergency deceleration also changes (the emergency stop ramp-down time remains
unchanged).

Consulte también
Emergency stop deceleration (Página 1581)

Limits
Configuration - Position limits
Configure the hardware and software limit switches of the axis in the "Position limits"
configuration window.

Enable HW limit switches
The check box activates the function of the negative and positive hardware limit switches. The
negative hardware limit switch is located on the side in the negative direction of travel, and the
positive hardware limit switch on the side in the positive direction of travel.
If a hardware limit switch is reached, technology alarm 531 is output, and the technology object
is disabled (alarm response: remove enable).
Exception:
1. If a hardware limit switch is overtraveled during an active home position approach with
activated direction reversal at the hardware limit switch, the axis stops with the configured
maximum deceleration and continues the home position approach in the opposite direction.
2. If the hardware limit switches were deactivated using the Motion Control instruction
"MC_WriteParameter".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1643

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
Only use hardware limit switches that remain permanently switched after the approach. This
switching state may only be canceled after the return to the permitted traversing range.
The digital inputs of the hardware limit switches are evaluated by default in cyclic data
exchange. If the hardware limit switch is to be evaluated in the position control cycle of the drive,
select the entry "MC-Servo" for "Organization block" and the entry "PIP OB Servo" for "Process
image" in the input module settings under "I/O addresses".

Input of negative/positive HW limit switch
In these fields, select the PLC tag of the digital input for the negative and positive hardware limit
switch.
In order to be able to select an input, a digital input module must have been added in the device
configuration, and the PLC tag name for the digital input must be defined.
PRECAUCIÓN
During installation of hardware limit switches, attention must be paid to the filter times of the
digital inputs.
Based on the time for one position control cycle clock and the filter time of the digital inputs,
the resulting delay times must be taken into account.
The filter time is configurable in individual digital input modules in the device configuration.
The digital inputs are set to a filter time of 6.4 ms by default. If these are used as hardware limit
switches, undesired decelerations may occur. If this occurs, reduce the filter time for the
relevant digital inputs.
The filter time can be set under "Input filter" in the device configuration of the digital inputs.

Level selection of negative/positive HW limit switch
Select the triggering signal level ("low level"/"high level") of the hardware limit switch in the dropdown list. With "Low level", the input signal is "FALSE" after the axis has reached or passed the
hardware limit switch. With "High level", the input signal is "TRUE" after the axis has reached
or passed the hardware limit switch.

1644

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Enable SW limit switches
This check box activates the high and low software limit switches. When software switches are
activated, an active motion comes to a stop at the position of the software limit switch. The
technological object signals an error. After acknowledgment of the error, the axis can again be
moved in the direction of its operating range.
Nota
Activated software limit switches act only on a homed axis.

Position of negative/positive SW limit switch
Configure the operating range of the axis with the positions of the negative and positive
software limit switches.

Consulte también
Traversing range limitation (Página 1574)

Configuration - Dynamic limits
In the "Dynamic limits" configuration window, configure the maximum values for velocity,
acceleration, deceleration and jerk of the axis.

Maximum velocity
In this field, define the maximum permitted velocity of the axis.

Maximum acceleration/maximum deceleration - ramp-up time/ramp-down time
Set the desired acceleration in the "Ramp-up time" or "Acceleration" fields. The desired
deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Maximum velocity
Acceleration

Maximum velocity
Deceleration

1645

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
A change in the maximum velocity influences the acceleration and deceleration values of the
axis. The ramp-up and ramp-down times are retained.
The "maximum deceleration" for active homing with change of direction at the hardware limit
switch must be set sufficiently large, to brake the axis before reaching the mechanical endstop.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
● Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that the jerk is not limited.
● Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The configured smoothing time displayed in the configuration, applies only to the
acceleration ramp.
If the values of the acceleration and deceleration differ, the smoothing time of the
deceleration ramp is calculated and used according to the jerk of the acceleration ramp.
The smoothing time of the deceleration is adapted as follows:
● Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

1646

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Velocity profile (Página 1579)
Dynamic limits in gearing (Página 1886)

Configuration - Torque limits
Configure the force/torque limiting of the drive in the "Torque limiting" configuration window.
The configuration is only available if a drive that supports force/torque limiting is selected and
a telegram 10x is used. Telegram 101 cannot be used.

Effective
In the drop-down list, select whether the limit value is to be in effect "on load side" or "on motor
side".

Torque limits
Enter a default value for the torque limiting in the specified unit of measurement in this field.
The default value is in effect when the torque limiting is specified using Motion Control
instruction "MC_TorqueLimiting", input parameter "Limit" < 0.
Torque limiting applies to the following axis configurations:
● Axis type is "Rotary" and limit value is in effect "On load side" or "On motor side"
● Axis type is "Linear" and limit value is in effect "On motor side"

Force limit
Enter a default value for the force limit in the specified unit of measure in this field.
The default value is in effect when the force limit is specified using Motion Control instruction
"MC_TorqueLimiting", input parameter "Limit" < 0.
The force limit applies to the following axis configuration: Axis type is "Linear" and limit value is
in effect "On load side"
If the efficiency of the gear and leadscrew is crucial, you can set them in the
"<TO>.Actor.Efficiency" tag.

Position-related monitoring
As a result of the force/torque limiting on the drive, a larger following error may occur or the axis
standstill may not be detected reliably in positioning monitoring.
To deactivate the monitoring of the following error and the positioning monitoring during force/
torque limiting, select the "Deactivate position-related monitoring" option. If you want to activate
the position-related monitoring, select the option "Leave position-related monitoring enabled".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1647

Control de movimiento
6.1 Using S7-1500 Motion Control

Interconnection in the SINAMICS drive
The following interconnection is required in the SINAMICS drive:
● P1522 to a fixed value of +100%
● P1523 to a fixed value of -100% (e.g. through interconnection to fixed value parameter
P2902[i]).

Consulte también
Force/torque limiting (Página 1583)

Configuration - Fixed stop detection
Configure the fixed stop detection in the configuration window.
A "Travel to fixed stop" can be realized by activating fixed stop detection using the Motion
Control instruction "MC_TorqueLimiting" and a position-controlled motion job. The operation is
also referred to as clamping.

Positioning tolerance
In this configuration field, configure the positioning tolerance that is regarded as a breaking
away or turning back of the fixed stop when exceeded. To detect the breaking away or turning
back of the fixed stop, the position setpoint must be located outside the positioning tolerance.
The configured position tolerance must be less than the configured following error.

Following error
If the drive is stopped by a mechanical fixed stop during a motion job, the following error is
increased. The accumulating following error serves as a criterion for fixed stop detection. In the
"Following error" configuration field, configure the value of the following error starting from
which the fixed stop detection is to take effect. The configured following error must be greater
than the configured position tolerance.
Nota
If the following error monitoring was activated in the position monitoring configuration, the
"Maximum following error" configured there must be greater than the "Following error" of the
fixed stop detection.

Consulte también
Fixed stop detection (Página 1585)

Homing
Homing means matching the position value of a technology object to the real, physical location
of the drive. Absolute target positions of the axis can only be approached with a homed axis.

1648

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Operating modes of the Motion Control instruction "MC_Home"
In S7-1500 Motion Control, the axis is homed with the Motion Control instruction "MC_Home".
The following operating modes are used in the process:
● Active homing (incremental encoder)
With active homing, the Motion Control instruction "MC_Home" performs the configured
home position approach. Active traversing motions are aborted. When the homing mark is
detected, the position of the axis is set according to the configuration.
● Passive homing (incremental encoder)
With passive homing, the Motion Control instruction "MC_Home" instruction does not carry
out any homing motion. The traversing motion required for this must be implemented by the
user with other Motion Control instructions. Active traversing motions are not aborted upon
start of passive homing. When the homing mark is detected, the axis is set according to the
configuration.
● Direct homing absolute (incremental encoder or absolute encoder)
The axis position is set without taking into consideration the home position switch. Active
traversing motions are not aborted. The value of input parameter "Position" of Motion
Control instruction "MC_Home" is set immediately as the actual position of the axis.
● Direct homing relative (incremental encoder or absolute encoder)
The axis position is set without taking into consideration the home position switch. Active
traversing motions are not aborted. The following statement applies to the axis position after
homing:
New axis position = Current axis position + Value of parameter "Position" of instruction
"MC_Home".

Consulte también
Homing (Página 1589)

Active homing
Configuration - Active homing
In the "Active Homing" configuration window, configure the parameters for active homing.
"Active homing" is executed using the Motion Control instruction "MC_Home" with "Mode" = 3
and 5.
Nota
Parameter "MC_Home.Mode" (S7-1500 CPU)
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1649

Control de movimiento
6.1 Using S7-1500 Motion Control

Settings for (S7-1500T)
In the drop-down list, select the encoder to which the homing settings are to apply.

Select the homing mode
Select from among the following homing modes:
● Use zero mark via PROFIdrive telegram (Página 1650)
● Use reference output cam and zero mark via PROFIdrive telegram (Página 1651)
● Use homing mark via digital input (Página 1652)

Consulte también
Homing (Página 1589)
Using multiple encoders (Página 1562)

Homing mode "Use zero mark via PROFIdrive telegram"
Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The zero mark is then sought in the reverse direction. If this function is not enabled
and the axis reaches the hardware limit switch during active homing, then the drive is disabled
and braked with the ramp configured in the drive.

Homing direction
Select the direction in which the next zero mark should be approached for homing.
"Positive" is the homing direction in the direction of positive position values; "negative" in the
direction of negative position values.

Approach velocity
In this field, specify the velocity which is used to traverse to the home position offset.

Homing velocity
In this field, specify the velocity at which the axis approaches the zero mark for homing.

Home position offset
In the case of a differing zero mark position and home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

1650

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Consulte también
Homing (Página 1589)

Homing mode "Use reference output cam and zero mark via PROFIdrive telegram"
Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The reference output cam is then searched for in the reverse direction. If this function
is not enabled and the axis reaches the hardware limit switch during active homing, then the
drive is disabled and braked with the ramp configured in the drive.

Approach direction
Select the approach direction for the reference output cam search.
"Positive" is the approach direction in the direction of positive position values; "negative" in the
direction of negative position values.

Homing direction
Select the direction in which the zero mark should be approached for homing.

Approach velocity
In this field, specify the velocity at which the reference output cam is searched for during the
homing procedure. Any configured home position offset is traversed at the same velocity.

Homing velocity
In this field, specify the velocity at which the axis approaches the zero mark for homing. For zero
mark detection, the reference output cam must be exited.

Home position offset
In the case of a differing zero mark position and home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1651

Control de movimiento
6.1 Using S7-1500 Motion Control

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Consulte también
Homing (Página 1589)

Homing mode "Use homing mark via digital input"
When a digital input is used as a homing mark, the accuracy of the homing process is not as
high as for hardware-supported homing using zero marks. You can improve the accuracy by
using a low homing velocity.
Pay attention to the setting of short filter times for the digital input as well.

Digital input homing mark/output cam
In this configuration field, select the PLC tag of the digital input that is to act as a homing mark
(reference output cam). Also select the level at which the homing mark is to be detected.
In order to be able to select an input, a digital input module must have been added in the device
configuration, and the PLC tag name for the digital input must be defined.

Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The homing mark is then sensed in reverse direction. If this function is not enabled
and the axis reaches the hardware limit switch during active homing, then the drive is disabled
and braked with the ramp configured in the drive.

Approach direction
Select the approach direction for the homing mark search.
"Positive" is the approach direction in the direction of positive position values; "negative" in the
direction of negative position values.

Homing direction
Select the direction in which the homing mark for homing is to be approached.

Homing mark
Select the switch position of the "digital input" that is to be used as the homing mark.

1652

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
When a "digital input" is crossed, two switching edges that are spatially separated from one
another are generated. The selection of the positive or negative side ensures that the homing
mark is always evaluated at the same mechanical position.
The positive side is the switch position with a greater position value; the negative side is the
switch position with the lesser position value.
The selection of the side is independent of the approach direction, and independent of whether
it causes a rising or falling edge.

Approach velocity
In this field, specify the velocity at which the axis searches for the "digital input" during the home
position approach. Any configured home position offset is traversed at the same velocity.

Homing velocity
In this field, specify the velocity at which the axis approaches the home position for homing.

Home position offset
If the homing mark position is different from the home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Consulte también
Homing (Página 1589)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1653

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing
Configuration - Passive homing
Configure the parameters for passive homing in the "Passive Homing" (homing on the fly)
configuration window. The "Passive homing" homing function is executed using the Motion
Control instruction "MC_Home" with "Mode" = 2, 8 and 10.
Nota
Parameter "MC_Home.Mode" (S7-1500 CPU)
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Settings for
In the drop-down list, select the encoder for which the homing settings are to apply (only for
S7-1500T).

Select the homing mode
Select from among the following homing modes:
● Use zero mark via PROFIdrive telegram (Página 1655)
● Use reference output cam and zero mark via PROFIdrive telegram (Página 1655)
● Use homing mark via digital input (Página 1656)

Consulte también
Using multiple encoders (Página 1562)

1654

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing mode "Use zero mark via PROFIdrive telegram"
Homing direction
Select the direction in which the next zero mark should be approached for homing. The
following options are available:
● Positive
The axis moves in the direction of higher position values.
● Negative
The axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Homing (Página 1589)

Homing mode "Use reference output cam and zero mark via PROFIdrive telegram"
Homing direction
Select the direction in which the zero mark should be approached for homing. The next zero
mark after leaving the reference output cam is used.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1655

Control de movimiento
6.1 Using S7-1500 Motion Control
The following options are available:
● Positive
The axis moves in the direction of higher position values.
● Negative
The axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for tech