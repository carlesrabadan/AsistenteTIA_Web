iente
ejemplo:
HMIRuntime.Trace "Ret: " & HMIRuntime.Logging.Remove("","2010-11-14",-1) &
vbNewLine
Encontrará más información al respecto en "AUTOHOTSPOT".
3. Asocie una lista de funciones al evento "Hacer clic" del botón configurado.
4. Seleccione en la lista de funciones la función VB creada para la ejecución.
5. Guarde el proyecto.

694

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.9 Archivar variables

Resultado
La función VB se ejecuta en runtime después de hacer clic en el botón. La copia de seguridad
de ficheros se desconecta de la base de datos de ficheros. En runtime ya no tendrá acceso a
los datos del archivo de copia de seguridad.
Otra posibilidad es eliminar manualmente los archivos de copia de seguridad de la carpeta
"CommonArchiving". La carpeta "CommonArchiving" se encuentra en la carpeta del proyecto
de WinCC.

Consulte también
Configurar una copia de seguridad de ficheros (Página 689)
Conectar una copia de seguridad de ficheros (Página 693)

Variables de fichero en el editor "Variables"
Configurar una variable de fichero
Introducción
En WinCC también pueden crearse y editarse variables de fichero en el editor "Variables HMI".
Las propiedades de las variables de fichero se configuran también directamente en el editor
"Variables".
Nota
Si se borra, mueve o copia en el editor "Variables HMI", los cambios afectarán también al editor
"Ficheros".

Requisitos
● La ficha "Ficheros de variables" está abierta en el editor "Variables HMI".
● Se ha creado una variable.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

695

Trabajar con variables
2.9 Archivar variables

Procedimiento
Para configurar una variable de fichero en el editor "Variables HMI", proceda del siguiente
modo:
1. Seleccione una variable existente en la tabla de variables.
Alternativamente, haga doble clic en "Añadir..." de la columna "Nombre" para crear una
nueva variable.
2. Haga clic en "Variables de fichero" en el editor inferior. El editor de variables de fichero
pasará al primer plano.

3. En la tabla del editor "Variables de fichero", haga doble clic en "Añadir ..." de la columna
"Nombre". Se creará una nueva variable de fichero. La variable de fichero está conectada
con la variable seleccionada en el primer paso. El tipo de datos de la variable de fichero se
aplicará automáticamente a partir de la variable conectada.

4. En el campo "Fichero de variables" seleccione el fichero de variables deseado. Otra
posibilidad consiste en crear un nuevo fichero con ayuda de la lista de objetos.
5. Configure los demás parámetros de la archivación en la tabla del editor o en la ventana de
inspección.

Resultado
La variable de fichero configurada se ha creado en el editor "Variables" y se muestra en
diferentes editores.

Consulte también
Archivación de variables (Página 672)

696

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.9 Archivar variables

Funciones en la archivación de variables
Función para el control de estado del bloqueo de ficheros
Introducción
El estado "Bloqueado" de un fichero de variables se vigila utilizando una función C. La función
C debe crearse en el editor "Scripts" con la sintaxis correcta.

Descripción
Esta función se dispara desde el servidor de ficheros cuando cambia el estado "Bloqueado".
Se puede asignar al evento "Bloqueo modificado" en el grupo "Eventos" del editor "Ficheros de
variables" o "Ficheros comprimidos". La función C se indica en el evento "Bloqueo modificado"
solamente cuando la sintaxis abajo descrita se haya introducido correctamente en la función.

Sintaxis
Nombre de función void (BOOL fFlag);

Parámetros
fFlag
TRUE - el fichero ha sido bloqueado
FALSE - el fichero ha sido habilitado

Ejemplo de uso
Esta función permite informarse p. ej. sobre el estado de bloqueo de un fichero.

Conversión de valores de las variables de fichero
Descripción
Esta función C permite convertir los valores de variables antes de proceder con el archivado.
Esta función C se asigna en "Propiedades > Método de compresión" de las propiedades de la
variable de fichero en el editor "Variables de fichero". La función C está disponible para la
selección en el campo "Método de compresión analógico" solamente cuando la sintaxis abajo
descrita se ha introducido correctamente en la función.

Sintaxis
Nombre de función double (double dLastValue,
double dCurrentValue,
DWORD dwCount,

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

697

Trabajar con variables
2.9 Archivar variables
BOOL fArchivingCycle);

Parámetros
dLastValue: valor de retorno de la función que se disparó en el último ciclo de adquisición
dCurrentValue: valor actualmente registrado
dwCount: ciclo de adquisición actual desde el último ciclo de archivación (p.ej. el ciclo de
archivado es 4 x 1 segundo de ciclo de adquisición; entonces se obtiene un estado de contador
de 1 a 4 hasta que el estado de contador comience nuevamente).
fArchivingCycle: TRUE = el ciclo es de archivado (default); FALSE = el ciclo es de adquisición

Ejemplo de uso
Con esta función puede realizarse p. ej. un cálculo propio del valor medio. A continuación ya
no se aplica el valor real de la variable, sino el valor medio calculado.
La siguiente función determina el promedio geométrico de los valores de proceso registrados:
double CalculateGeometricMean (double dLastValue,double
dCurrentValue,DWORD dwCount,BOOL fArchivingCycle)
{
static double dCurrentProduct = 1.0;
double dReturnValue = 0.0;
if (!fArchivingCycle)
{
// 1. continiously calculate the product of all values with every
scan cycle
dCurrentProduct *= dCurrentValue;
printf ("current value=%f current product=%f archiving cycle flag=%d
\r\n",dCurrentValue,dCurrentProduct ,fArchivingCycle);
dReturnValue = dCurrentProduct ; // optinonally - the return value is
actually not of interest in a scan cycle
}
else
{
// 2. if this is the archiving cycle, use the product of all scan
values to calculate
// the geometric mean value

698

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

dReturnValue = pow (dCurrentProduct ,(double) 1 / dwCount);
printf ("archiving cycle: geometric mean value=%f\r
\n",dReturnValue);
printf ("\r\n");
dCurrentProduct = 1.0; // reset current product
// the finally calculated value will be returned - this value will be
archived
// since this is the archiving cycle
}
return dReturnValue;
}

2.10

Representar variables

2.10.1

Representar variables con Basic Panels

2.10.1.1

Emitir valores de variables en imágenes (Basic)

Introducción
Los valores de variables se pueden emitir en runtime en las imágenes del panel de operador
en forma de curva. Una curva es la representación gráfica de valores que adopta una variable
en runtime. Para la representación se utiliza el objeto gráfico "Visor de curvas". El controlador
carga los valores de proceso para la representación en forma de curva desde el proceso que
se está ejecutando.
Los valores a representar se determinan individualmente en un ciclo fijo ajustable. Las curvas
disparadas por ciclos son apropiadas para representar procesos continuos, p. ej. la
representación de la temperatura de servicio de un motor.

Valores representados
Para poder visualizar valores de variables en el panel de operador, es preciso configurar un
visor de curvas en una imagen. Al configurar el visor de curvas deberá indicar qué valores de
variables se deben representar.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

699

Trabajar con variables
2.10 Representar variables
La actualización del visor de curvas se controla con la definición del tiempo de ciclo.

Consulte también
Configurar el visor de curvas para los valores del controlador (Basic) (Página 700)
Principios básicos de las variables (Página 535)

2.10.1.2

Configurar el visor de curvas para los valores del controlador (Basic)

Introducción
Con un visor de curvas se representan gráficamente los valores que adopta una variable en el
proceso.

Requisitos
● Hay una imagen abierta.
● La ventana de inspección está abierta con las propiedades para el visor de curvas.

700

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Procedimiento
Para configurar un visor de curvas, proceda del siguiente modo:
1. Inserte en la imagen el objeto "Visor de curvas" del grupo "Control" de la ventana de
herramientas.

2. En el grupo "Propiedades" de la ventana de inspección seleccione la categoría "Curva" y
haga doble clic en la entrada "<Agregar>" de la columna "Nombre".

3. Asigne un nombre a la curva en la columna "Nombre".
4. Con el botón de selección de la columna "Estilo" abra el cuadro de diálogo "Estilo" y
seleccione la representación de la línea.
5. Elija el número de valores de la curva en la columna "Valores de la curva".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

701

Trabajar con variables
2.10 Representar variables
6. Con el botón de selección de la columna "Configuración" abra el cuadro de diálogo "Origen
de los datos" y seleccione la variable que deba transferir valores a la curva.
Indique un ciclo para leer las variables del controlador.

7. Efectúe los demás ajustes necesarios en los cuadros de diálogo de la ventana de
inspección. Así, p. ej., active la opción "Mostrar tabla" de la categoría "Tabla" para mostrar
una tabla de valores en el visor de curvas.
Nota
Si mantiene pulsada la tecla <Ctrl> y hace doble clic en el visor de curvas, éste se activará.
En el modo activo puede modificar el ancho y la posición de las columnas de la tabla de
valores en el encabezado de tabla. Para poder activar el visor de curvas, el factor de zoom
se deberá ajustar a 100 %.

Resultado
Los valores de proceso de la variable seleccionada se visualizarán en runtime en el visor de
curvas configurada.

Consulte también
Emitir valores de variables en imágenes (Basic) (Página 699)

2.10.2

Representar variables con Runtime Advanced y Panels

2.10.2.1

Curvas

Introducción
Una curva es la representación gráfica de valores que adopta una variable en runtime. Para
representar las curvas se configura un visor de curvas en una imagen del proyecto.
En la configuración del visor de curvas se define el tipo de curva de los valores a representar:
● Fichero: para representar los valores archivados de una variable
● Tiempo real cíclico: para la representación de valores controlada por tiempo

702

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
● Tiempo real disparado por bit: para la representación de valores controlada por eventos
● Búfer disparado por bit: para la representación disparada por eventos con adquisición de
datos respaldada

Representar valores archivados
El visor de curvas muestra en runtime los valores de una variable contenidos en un fichero de
variables. La curva reproduce los valores archivados durante un período determinado. Para
obtener la información deseada del fichero, el operador puede desplazar el período en runtime.
9HQWDQDGHWLHPSR
HQODUHSUHVHQWDFL
µQGHODFXUYD



/¯QHDDX[LOLDU














Curvas disparadas cíclicamente
Los valores a representar se determinan individualmente con una base de tiempo fija
ajustable. Las curvas disparadas por ciclos son apropiadas para representar procesos
continuos, p. ej. la representación de la temperatura de servicio de un motor.

Curvas disparadas por bit
Los valores a representar se determinan de forma controlada por eventos, activando un bit
definido en la variable "Transferencia de curvas". El bit se desactivará nuevamente después
de la lectura. Las curvas disparadas por bits son especialmente apropiadas para representar
valores que cambian rápidamente, como p. ej., para representar la presión de inyección en la
fabricación de piezas de plástico.

Curvas disparadas por bits con adquisición de datos respaldada
En la adquisición de datos respaldada, los valores a representar se almacenan de forma
intermedia y se leen en forma de bloque de forma controlada por bit. Las curvas resultantes
sirven para representar cambios rápidos, cuando interesa ver el progreso de la curva en su
totalidad y no tanto los valores individuales.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

703

Trabajar con variables
2.10 Representar variables
Para que el controlador pueda seguir escribiendo los nuevos valores durante la lectura del
búfer de curvas, deberá configurar un búfer alternativo en el controlador. El búfer alternativo
evita que el controlador sobrescriba valores mientras el panel de operador está leyendo los
valores para la curva.
El cambio del búfer de curvas al búfer alternativo funciona de la manera siguiente:
Cada vez que se activa el bit de la variable "Transferencia de curva 1" asociado a la curva, se
leen simultáneamente todos los valores del búfer de curvas y se representan en una curva en
el panel de operador. El bit se desactivará nuevamente en "Transferencia de curvas 1"
después de la lectura.
Mientras el panel de operador lee los valores de variables del búfer de curvas, el controlador
escribe los nuevos valores de variables en el búfer alternativo. Cuando se activa el bit de la
variable "Transferencia de curva 2" asociado a la curva, se leen todos los valores de curvas del
búfer alternativo y se representan en el panel de operador. Mientras el panel de operador lee
el búfer alternativo, el controlador vuelve a escribir en el búfer de curvas.

HVFULEH

%¼IHUGH
FXUYD

%¼IHUGH
FRQPXWDFLµQ

HVFULEH

%¼IHUGH
FXUYD

HVFULEH

%¼IHUGH
FRQPXWDFLµQ

OHH

%LWHQ7UDQVIHUHQFLDGHFXUYD 
%LWHQ7UDQVIHUHQFLDGHFXUYD 

%¼IHUGH
FXUYD

%¼IHUGH
FRQPXWDFLµQ

OHH

%LWHQ7UDQVIHUHQFLDGHFXUYD 
%LWHQ7UDQVIHUHQFLDGHFXUYD 

%LWHQ7UDQVIHUHQFLDGHFXUYD 
%LWHQ7UDQVIHUHQFLDGHFXUYD 

7LHPSR

704

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

2.10.2.2

Emitir valores de variables en imágenes

Introducción
Los valores de variables se pueden emitir en runtime en las imágenes del panel de operador
en forma de curva. Los valores de proceso se solicitan al controlador durante el proceso en
curso, o bien se cargan de una base de datos de ficheros.

Valores representados
Para poder visualizar valores de variables en el panel de operador, es preciso configurar un
visor de curvas en una imagen. Al configurar el visor de curvas deberá indicar qué valores de
variables se deben representar.
Existen las posibilidades siguientes:
● Valores actuales del controlador
La curva se visualiza progresivamente conforme a los valores individuales del controlador.
Para la visualización en tiempo real están disponibles los siguientes tipos de disparo:
– Tiempo real disparado por bit: El momento de la actualización se define activando un bit.
Las curvas disparadas por bit se utilizan por lo general para representar valores que se
modifican rápidamente. Un ejemplo de ello es la presión de inyección en la fabricación
de piezas de plástico.
– Tiempo real cíclico: El momento de la actualización se define mediante un ciclo. Las
curvas disparadas por ciclos son apropiadas para representar procesos continuos, p. ej.
la modificación de la temperatura de servicio de un motor.
– Búfer disparado por bit: La curva muestra valores que el controlador ha guardado en un
búfer entre dos operaciones de lectura. Seleccione esta forma de representación si le
interesa ver el progreso de la curva en su totalidad y no tanto los valores individuales.
● Valores de variable archivados
El visor de curvas muestra en runtime los valores de una variable contenidos en un fichero
de variables. Para visualizar valores de variable archivados está disponible el siguiente tipo
de disparo:
– Fichero de variables: La curva reproduce los valores archivados durante un período
determinado. Para extraer del archivo la información deseada, el usuario debe utilizar
los correspondientes elementos de manejo de la imagen o del visor de curvas.

2.10.2.3

Configurar la vista de curvas para los valores del autómata

Introducción
Con un visor de curvas se representan gráficamente los valores que adopta una variable en el
proceso.

Requisitos
● Hay una imagen abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

705

Trabajar con variables
2.10 Representar variables

Procedimiento
Para configurar un visor de curvas, proceda de la manera siguiente:
1. Inserte en la imagen el objeto "Visor de curvas" del grupo "Controls" de la ventana de
herramientas.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Curva" y haga doble
clic en "Añadir" del campo "Nombre". Se creará una nueva curva.
3. Introduzca en caso necesario un nombre propio para la curva en el campo "Nombre".
4. Con el botón de selección de la columna "Estilo" abra el cuadro de diálogo "Estilo" y
seleccione la representación de la línea.
5. Elija el número de valores de la curva en la columna "Valores de la curva".
6. Seleccione el tipo de curva deseado en la columna "Tipo de curva". Existen las entradas
siguientes:
– "Tiempo real disparado por bits"
– "Tiempo real cíclico"
– "Búfer disparado por bits"
– "Fichero de variables"
7. Con el botón de selección de la columna "Configuración de origen" abra el cuadro de
diálogo "Origen de los datos" y seleccione la variable que deba asignar valores a la curva.
Si ha seleccionado el tipo de curva "Tiempo real cíclico", indique un ciclo para leer las
variables del controlador.
Sólo para curvas disparadas por bits:
– Bajo "Bit" indique el número de bit de las variables "Solicitud de curva" y "Transferencia
de curva" que se deba asignar a la curva. Seleccione un valor diferente para cada curva.
– Bajo "Solicitud de curva", indique una variable que contenga como mínimo una cantidad
de bits igual a la cantidad de curvas que se deben representar. El estado de los bits de
esta variable indica qué curva se está representando actualmente en el panel de
operador.
Sólo para el tipo de curva "Bit de tiempo real":
– Bajo "Transferencia de curva", indique una variable que contenga como mínimo una
cantidad de bits igual a la cantidad de curvas que se deben representar. El estado de los
bits de esta variable indica para qué curva se leen valores del controlador.
Sólo para el tipo de curva "Búfer disparado por bit":
– Indique una variable de búfer para el búfer alternativo. La variable deberá tener la misma
longitud y ser del mismo tipo que la variable de curva.
– Bajo "Transferencia de curva 1" y "Transferencia de curva 2", indique sendas variables
que contengan como mínimo una cantidad de bits igual a la cantidad de curvas que se
deben representar. Los estados de los bits de esta variable indican para qué curva se
leen valores del controlador. "Transferencia de curva 1" controla la lectura del búfer de
curvas, en tanto que "Transferencia de curva 2" controla la lectura del búfer alternativo.
8. Efectúe los demás ajustes necesarios en los cuadros de diálogo de la ventana de
inspección. Así, p. ej., active la opción "Mostrar tabla" de la categoría "Tabla" para mostrar
una tabla de valores en el visor de curvas.

706

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Nota
Si mantiene pulsada la tecla <Ctrl> y hace doble clic en el visor de curvas, éste se activará. En
el modo activo puede modificar el ancho y la posición de las columnas en la tabla de valores.
Para poder activar el visor de curvas, el factor de zoom se deberá ajustar a 100 %.

Resultado
Los valores de proceso de la variable seleccionada se visualizarán en runtime en el visor de
curvas configurada.

2.10.2.4

Configurar el visor de curvas para un fichero de variables

Introducción
Con un visor de curvas se pueden visualizar los valores de variables archivados en runtime. El
visor de curvas reproduce los valores de variables archivados durante un período
determinado. Para extraer del archivo la información deseada, el usuario debe utilizar los
correspondientes elementos de manejo de la imagen o del visor de curvas.

Ejemplo de aplicación
Al finalizar su turno, un operador desea informarse acerca del proceso ejecutado.

Requisitos
● Se ha creado un fichero de variables.
● Hay una imagen abierta.
● La ventana de inspección está abierta con las propiedades para el visor de curvas.

Procedimiento
Para configurar un visor de curvas para representar valores de un fichero de variables, proceda
de la manera siguiente:
1. Inserte en la imagen el objeto "Visor de curvas" del grupo "Controls" de la ventana de
herramientas.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Curva" y haga doble
clic en "Añadir" del campo "Nombre". Se creará una nueva curva.
3. Introduzca en caso necesario un nombre propio para la curva en el campo "Nombre".
4. Con el botón de selección de la columna "Estilo" abra el cuadro de diálogo "Estilo" y
seleccione la representación de la línea.
5. Seleccione el tipo de curva "Fichero de variables" en la columna "Tipo de curva".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

707

Trabajar con variables
2.10 Representar variables
6. Con el botón de selección de la columna "Configuración" abra el cuadro de diálogo "Origen
de los datos" y seleccione el fichero de variables y la variable que deban transferir valores
a la curva.
7. Efectúe los demás ajustes necesarios en los cuadros de diálogo de la ventana de
inspección. Así, p. ej., active la opción "Mostrar tabla" de la categoría "Tabla" para mostrar
una tabla de valores en el visor de curvas.
Nota
Si mantiene pulsada la tecla <Ctrl> y hace doble clic en el visor de curvas, éste se activará.
En el modo activo puede modificar el ancho y la posición de las columnas en la tabla de
valores. Para poder activar el visor de curvas, el factor de zoom se deberá ajustar a 100 %.

Resultado
Los valores de proceso archivados de la variable seleccionada se visualizarán en runtime en
el visor de curvas configurada.

Consulte también
Representación de trayectorias curvas en el visor de curvas (Página 710)

2.10.2.5

Estructura de un archivo *.CSV con variables

Introducción
En el formato "*.csv" (Comma Separated Value), las columnas "Nombre" y "Valor" de la
entrada de la tabla aparecen separadas por un punto y coma. Cada fila de la tabla se finaliza
con un salto de línea.

Ejemplo de un archivo "*.CSV"
El ejemplo muestra un archivo con valores de variables archivados:
"VarName";"TimeString";"VarValue";"Validity";"Time_ms"
"Var_107";"01.04.98 11:02:52";66,00;1;35886460322,81
"Var_108";"01.04.98 11:02:55";60,00;1;35886460358,73
"Var_109";"01.04.98 11:02:57";59,00;1;35886460381,22
Nota
Separadores
Para visualizar el contenido de los archivos "*.csv", asegúrese de que, en los ajustes de
"Región e idioma" de Windows, no esté seleccionado el mismo símbolo como "Separador
decimal" y como "Separador de listas".

708

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Estructura de un archivo histórico en formato *.csv
En las distintas columnas de un archivo de fichero se han introducido los valores siguientes:
Parámetros

Descripción

VarName

Nombre de las variables de WinCC

TimeString

Sello de tiempo en formato STRING, es decir, como formato de datos legible

VarValue

Valor de la variable

Validity

Validez:
1 = valor válido
0 = se ha producido un error (p. ej. conexión interrumpida)

Time_ms

Indicación de fecha y hora en formato decimal (la conversión se indica más
abajo).
sólo es necesario para visualizar los valores de variables en forma de curva.

Conversión del valor decimal del sello de tiempo
Si desea procesar el valor en un programa diferente, proceda de la manera siguiente:
1. Divida Time_ms por 1.000.000.
Ejemplo: 36343476928:1 000 000 = 36343,476928
2. La parte entera (36344) expresa la fecha contada a partir del 31 de diciembre de 1899.
Ejemplo: 36343 equivale al 02.07.1999.
Ahora, puede convertir el sello de tiempo en días con Excel asignando a la celda que
contiene el sello de tiempo un formato adecuado del grupo "Fecha".
Resultado: 37986 equivale al 31.12.2003.
3. El valor que aparece después de la coma (0,476928) expresa la hora.
– Multiplicando el valor (0,476928) por 24 se obtienen las horas (11,446272).
– Multiplicando el resto (0,446272) por 60 se obtienen los minutos (26,77632).
– Multiplicando el resto (0,77632) por 60 se obtienen los segundos (46,5792).
Resultado: 11:26:46,579
Por ejemplo, Microsoft Excel asiste esta conversión.

Consulte también
Representación de trayectorias curvas en el visor de curvas (Página 710)

2.10.2.6

Acceder directamente a la base de datos ODBC de ficheros

Introducción
Un fichero puede estar ubicado en una base de datos o en un archivo.
A la base de datos se accede a través de su "Data Source Name" (DSN) o nombre del origen
de los datos. En el menú Inicio de Windows, bajo "Configuración > Panel de control > ODBC
Data Sources", selecciona la base de datos que utiliza en WinCC.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

709

Trabajar con variables
2.10 Representar variables
Para almacenar los datos de fichero, introduzca durante la configuración el DSN en lugar de
un nombre de directorio. El DSN sirve para referenciar la base de datos y su ubicación.

Aplicación
Para procesar y evaluar los datos de fichero posteriormente podrá aprovechar toda la
funcionalidad de la base de datos.

Principio
El Data Source establece la conexión con la base de datos. Cree el Data Source en el mismo
equipo en el que está almacenado el software runtime. Al crear un fichero en WinCC ,
introduzca el DSN que ha configurado.
Desde la interfaz ODBC se accede directamente a la base de datos con otros programas, tales
como MS Access o MS SQL-Server.
Además, en el panel de operador se puede configurar la llamada de un programa utilizando
para ello la función de sistema "IniciarPrograma", p. ej. para llamar MS Access. En este caso
no se interrumpe el runtime.

2.10.2.7

Representación de trayectorias curvas en el visor de curvas

Introducción
Para visualizar, p. ej., recorridos bidimensionales de una máquina antes de la ejecución, se
puede utilizar el visor de curvas f(x).

Realización
La realización se basa en un fichero de variables en el que se guardan las coordenadas con
etiqueta de fecha/hora idéntica.

710

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
La representación de parejas de valores en el visor de curvas f(x) se basa en un fichero de
variables que lee los pares de valores calculados en un archivo CSV. Los sellos de tiempo de
cada par de valores son idénticos, p. ej., "01.01.2010 00:00:00".
Los juegos de datos del archivo CSV contienen las variables de fichero con los valores
calculados. Los valores se pueden calcular, p. ej., en el PLC y almacenar en dos bloques de
datos. Con un script VB es posible, p. ej., crear después el archivo CSV.
La fuente de datos de la curva es el fichero de variables.
Para configurar el área de datos son relevantes los siguientes ajustes:
● El intervalo de tiempo debe corresponderse exactamente con los sellos de tiempo del
archivo CSV.
● El número de "puntos de medida" debe coincidir exactamente con el número de juegos de
datos en el archivo CSV.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

711

Trabajar con variables
2.10 Representar variables

Script VB para generar un archivo CSV
El siguiente script VB genera, a partir de los valores de las variables HMI, "Input_X" e "Input_Y".
Las variables HMI son del tipo de datos "Array (0..10) of Real".

712

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

'###########################################################################
' Location of date log and name of data log which are used in f(x) control
Dim ObjFileName, ObjFilePath
' Name of tag log
ObjFileName = "TrendControl_f(x)0.csv"
' File location for tag log
ObjFilePath = "\Storage Card SD\"
'###########################################################################
' create objects to edit files and use filesystem
Dim ObjFile, ObjFileSystem
Set ObjFile = CreateObject("FileCtl.File")
Set ObjFileSystem = CreateObject("FileCtl.Filesystem")
'###########################################################################
' Write header into the new data log
ObjFile.LinePrint(Chr(34)&"VarName"&Chr(34)&";"&Chr(34)&"TimeString"&Chr(34)&";"&Chr(34)&"
VarValue"&Chr(34)&";"&Chr(34)&"Validity"&Chr(34)&";"&Chr(34)&"Time_ms"&Chr(34))
If Err.Number <> 0 Then
ShowSystemAlarm "Error: Can not write to data log. " & Err.Number & " " & Err.Description
Err.Clear
OpenAllLogs
TrendControl = 3
Exit Function
End If
'###########################################################################
' Write entries into data log
' Adapt loop counter to length of archive and array of data tag
Dim ObjLoopCount
ObjLoopCount = 10 ' last element of array
Dim ObjIndex, ObjTime, ObjTimeStamp
For ObjIndex = 0 To ObjLoopCount
' Calculate time stamp
' 40179000000 = 01.01.2010 00:00:00
ObjTime = ObjIndex/(60*60*24)*1000
ObjTimeStamp = 40179000000 + ObjTime
' Write x element to log
Dim Objx
Objx = SmartTags("Input_X")(ObjIndex)
ObjFile.LinePrint(Chr(34)&"Temp_x"&Chr(34)&";"&Chr(34)&"01.01.2010
00:00:00"&Chr(34)&";"&Objx&";1;"&ObjTimeStamp)
' Write y element to log
Dim Objy
Objy = SmartTags("Input_Y")(ObjIndex)
ObjFile.LinePrint(Chr(34)&"Temp_y"&Chr(34)&";"&Chr(34)&"01.01.2010
00:00:00"&Chr(34)&";"&Objy&";1;"&ObjTimeStamp)
Next
' Write line counter to log
Dim ObjLineCount
ObjLineCount = 41
ObjFile.LinePrint(Chr(34)&"$RT_COUNT$"&Chr(34)&";"&ObjLineCount&";;;;")

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

713

Trabajar con variables
2.10 Representar variables

'###########################################################################
' Close new log
ObjFile.close
Set ObjFile = Nothing
Set ObjFileSystem = Nothing

Consulte también
Estructura de un archivo *.CSV con variables (Página 708)
Configurar el visor de curvas para un fichero de variables (Página 707)

2.10.3

Representar variables con Runtime Professional

2.10.3.1

Principios básicos

Visualización de valores de variable
Sinopsis
En runtime se pueden visualizar valores de variable en forma de tabla o de curva. Como fuente
de origen de dichos valores se pueden utilizar valores del proceso o valores archivados.
Para comparar valores de variable, se utiliza, por ejemplo, una tabla. En ella se pueden
comparar, por ejemplo, los niveles de llenado de los depósitos de reserva.
Para representar gráficamente valores de variable, se utiliza, por ejemplo, una curva. Con ella
se puede representar, por ejemplo,la tendencia de la temperatura en un motor.

Controles para la representación de valores de variable
Para representar valores de variable en una tabla, se utiliza el "visor de tablas".
Para representar valores de variable a modo de curva, se utiliza el "visor de curvas". Éste se
ofrece en dos variantes:
● El "visor de curvas f(t)", con el que se representa un valor de variable en función del tiempo
(por ejemplo, la curva de temperatura).
● El "visor de curvas f(x)", con el que se representa un valor de variable en función de un
segundo valor de variable (por ejemplo, la velocidad del motor en función del calor
generado).
También se ofrece un control, la "tabla de valores", que permite elaborar, por ejemplo,
estadísticas partiendo de los valores visualizados. Además, la "tabla de valores" también sirve
como ayuda de lectura para el visor de curvas.

714

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Configuración
Básicamente, en el visor de tablas y curvas se configuran las siguientes propiedades:
● Conexión de datos
● Representación
● Evaluación de datos
● Configuración en runtime
● Persistencia de propiedades modificadas en runtime

Consulte también
Visor de tablas (Página 715)
Propiedades del visor de curvas (Página 716)
Visor de curvas f(t) (Página 717)
Visor de curvas f(x) (Página 718)

Visor de tablas
Sinopsis
El visor de tablas sirve para mostrar en runtime valores de proceso actuales o valores
archivados en forma de tabla. La representación de la tabla se configura como se desee.
En runtime se elaboran estadísticas partiendo de los datos seleccionados. Además, los datos
se pueden exportar para procesarlos en otro programa.
A continuación se muestra el visor de tablas con una imagen en la que se pueden ver los
niveles de llenado de tres depósitos de reserva:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

715

Trabajar con variables
2.10 Representar variables

Consulte también
Visualización de valores de variable (Página 714)

Propiedades del visor de curvas
Número de curvas
Tanto en el "visor de curvas f(x)" como en el "visor de curvas f(t)" se puede representar
cualquier cantidad de curvas. No obstante, por cuestiones de claridad le recomendamos no
configurar más de 8 curvas a un mismo tiempo.

Resolución de una representación de curvas
La cantidad de valores de una curva representables en la pantalla está limitada por la
resolución de la pantalla y el tamaño configurado para el visor de curvas. Por eso es posible
que en el visor de curvas aparezcan representados menos valores que los que realmente
existen en el intervalo de tiempo seleccionado.
Por ejemplo, si en un área con 100 puntos de imagen se archivan 200 valores de medida, cada
punto estaría representado por un par de valores de medida. Para visualizar el valor en la
pantalla se utiliza el valor de medida con sello de tiempo anterior.
A continuación se muestra la tendencia de una curva en la que cada punto de imagen
representa un par de valores de medida.

716

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
2

1

3

①
②
③

Valores de medida reales
Curva resultante
Puntos de imagen

Consulte también
Visor de curvas f(t) (Página 717)
Visor de curvas f(x) (Página 718)
Visualización de valores de variable (Página 714)

Visor de curvas f(t)
Sinopsis
El visor de curvas f(t) sirve para mostrar en runtime valores de proceso actuales o valores
archivados a modo de curva en función del tiempo. La representación de las curvas se
configura como se desee.
A continuación se muestra una imagen del visor de curvas f(t) en la que se representan dos
curvas a un mismo tiempo:

Consulte también
Propiedades del visor de curvas (Página 716)
Visualización de valores de variable (Página 714)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

717

Trabajar con variables
2.10 Representar variables

Visor de curvas f(x)
Sinopsis
El visor de curvas f(x) sirve para mostrar en runtime valores de proceso actuales o valores
archivados a modo de curva en función de otra variable. La representación de las curvas se
configura como se desee.
A continuación se muestra una imagen del visor de curvas f(x) en la que se representan dos
curvas a un mismo tiempo:

Reglas para el suministro de datos
Para representar curvas en el visor f(x), deben cumplirse las siguientes reglas:
● En cada curva se representan como máximo 10000 pares de valores
● Para el suministro de datos de una curva se admiten las siguientes fuentes de origen:
– Variables online
– Variables de fichero
– Elementos de las recetas
– Definido por el usuario: Suministro de datos de los pares de valores mediante un script

718

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
● En el visor de curvas f(x) se representan pares de valores. Para que los pares de valores
se representen simultáneamente, las variables online o de fichero de una curva deberían
actualizarse en runtime al mismo tiempo. Utilice p. ej. para cada variable el mismo ciclo de
actualización.
● Las variables de ficheros de una curva deben tener el mismo ciclo de actualización y
recopilarse de manera continua por ciclos

Consulte también
Propiedades del visor de curvas (Página 716)
Visualización de valores de variable (Página 714)

Representación de progresos de curvas
Introducción
En el visor de curvas se puede representar la tendencia de una curva en una de las siguientes
formas:
● Puntos
● Interpolada
● Escalonada
La representación de la curva se configura en la ventana de inspección "Propiedades >
Propiedades > Curva> Estilo".

Puntos
Los valores se representan en forma de puntos. La representación de los puntos se puede
configurar.
En la siguiente imagen se muestra la tendencia de una curva representada en forma de
"puntos":

Interpolada
La tendencia de la curva se interpola linealmente partiendo de los valores. La representación
de las líneas y los puntos se puede configurar.
En la siguiente imagen se muestra la tendencia de una curva representada en forma
"interpolada":

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

719

Trabajar con variables
2.10 Representar variables

Escalonada
El progreso de la curva se representa en forma de curva escalonada en base a los valores. La
representación de las líneas y los puntos se puede configurar.
En la siguiente imagen se muestra la tendencia de una curva representada en forma
"escalonada":

Tendencia de la curva
Con la "tendencia de la curva" se establece dónde se introducirán los valores actuales para
todas las ventanas de curvas. En la configuración predeterminada, los valores actuales se
escriben en la ventana de curvas partiendo de la derecha.
La "tendencia de la curva" se configura en la ventana de inspección "Propiedades >
Propiedades > General> Visualización".

Consulte también
Crear curvas para la ventana de curvas (Página 728)

Principios del intervalo de tiempo
Intervalo de tiempo
El intervalo de tiempo es el margen del que se muestran valores en el panel. El intervalo de
tiempo está determinado por el instante inicial y el instante final. El intervalo de tiempo se halla
siempre en el pasado. Si el instante final se encuentra más allá de la hora actual del sistema,
se tomará ésta como instante final temporal.
Se distingue entre los siguientes intervalos de tiempo:
● Intervalo estático
● Intervalo dinámico

720

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Intervalo estático
El intervalo de tiempo estático está determinado por un instante inicial y un instante final fijos.
Los valores se muestran en este intervalo de tiempo.

Intervalo dinámico
El intervalo de tiempo dinámico está determinado por un instante inicial fijo y un intervalo o
margen de tiempo. El instante final equivale al término de dicho margen.
El margen de tiempo se establece del siguiente modo:
● Duración; p. ej., 30 minutos
● Número de puntos de medida; multiplicado por el ciclo de actualización resulta igualmente
una duración.

Configurar el intervalo de tiempo
El rango de tiempo se configura para todos los controles. Para el visor de tablas y el visor de
curvas f(t) configure el rango de tiempo en la columna de tiempos o en el eje de tiempos. Para
el visor de tablas f(x) configure el rango de tiempo directamente en la curva.

Consulte también
Configurar los ejes de tiempos del visor de curvas (Página 725)
Representar valores archivados (Página 778)

Representación con ejes comunes
Introducción
Cuando represente simultáneamente varias curvas en el visor de curvas, asigne a cada una de
ellas sus propios ejes de valores y de tiempos. También tiene la posibilidad de asignar un eje
de tiempos y/o de valores común para varias curvas.
Los ejes de un visor de curvas se configura en la ventana de inspección "Propiedades >
Propiedades > Eje de tiempo / Eje de valores".
Los ejes se asignan a las curvas configuradas en la ventana de inspección "Propiedades >
Propiedades > Curvas".

Representación con ejes diferentes
Si los valores a mostrar en el visor de curvas son muy diferentes, no tiene sentido utilizar un eje
de valores común. Si se asigna un eje de valores propio para cada curva, se visualizan también
distintas escalas para mayor claridad. En caso necesario, existe la posibilidad de ocultar ejes.
En la siguiente imagen se muestra un visor de curvas f(t) a modo de ejemplo con dos curvas
con distintos ejes de valores:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

721

Trabajar con variables
2.10 Representar variables

Representación con ejes comunes
Si se considera importante comparar la tendencia de las curvas, se recomienda representar
los ejes comunes en el visor de curvas. Las ventanas enlazadas del visor de curvas pueden
tener un eje de tiempos común.

Cuando configure curvas con un eje de tiempos común, utilice variables con el mismo ciclo de
actualización para el suministro de datos.
En ciclos de actualización diferentes, el largo del eje de tiempos no es idéntico en todas las
variables. Como las curvas se actualizan a diferentes tiempos debido a los diferentes ciclos de
actualización, entonces en cada cambio se produce un punto final mínimamente diferente para
el eje de tiempos. Debido a esto, las curvas representadas saltan ligeramente de aquí para allá
cada vez que se hace un cambio.

722

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Dinimizar los botones de la barra de herramientas
Introducción
Si no desea manejar el control desde la barra de herramientas, configure en un evento de
cualquier elemento de mando, por ejemplo, un script. Cada botón de un control tiene una ID
unívoca.
Si desea activar un botón de un control mediante un script, asigne a la ID del botón la propiedad
"ToolbarButtonClick".
Si quiere saber qué botón se ha oprimido de un control, configure un script VB o un script C en
el evento "Botón Barra de herramientas Hacer clic". La ID del botón se transfiere como
parámetro "toolbarbuttonID" al script.

Ejemplo: abrir con VBS el diálogo de configuración del control
Para abrir con VBS el diálogo de configuración del control "Control_1", se tienen las siguientes
posibilidades:
● Llamada en el script a un evento de un elemento de manejo; p. ej., un botón:
ScreenItems("Control_1").ToolbarButtonClick = 2
● De forma alternativa a la propiedad "ToolbarButtonClick", en VBS se dispone también de
métodos para manejar la barra de herramientas:
Dim obj
Set obj = ScreenItems("Control_1")
obj.ShowPropertyDialog

Ejemplo: abrir con script C el diálogo de configuración del control
Para abrir en un script C el diálogo de configuración del control "Control_1", se tienen las
siguientes posibilidades:
● SetPropertyByConstant ("Screen_1", "Control_1",
"ToolbarButtonClick", "2");

Consulte también
Manejo del visor de curvas y del visor de tablas en runtime (Página 758)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

723

Trabajar con variables
2.10 Representar variables

2.10.3.2

Visualizar valores de variable en forma de curvas

Configurar el visor de curvas
Introducción
Para representar gráficamente en runtime valores de variable, inserte un visor de curvas en
una imagen. La Task Card "Herramientas" ofrece dos visores de tablas en "Controles".
● Visor de curvas f(x)
● Visor de curvas f(t)
Los nombres de los ejes son distintos para cada visor de curvas:
● El visor de curvas f(x) tiene un "eje X" y un "eje Y"
● El visor de curvas f(t) tiene un "eje de tiempos" y un "eje de valores"

Requisitos
● Hay una imagen abierta
● La ventana de inspección está abierta

Modo de proceder
Para configurar un visor de curvas, proceda del siguiente modo:
1. Desde la Task Card "Herramientas", inserte en la imagen el visor de curvas elegido.
2. Configure la apariencia del visor de curvas en la ventana de inspección:
– Configure las propiedades base del visor de curvas en "Propiedades > Propiedades >
General"; por ejemplo, la "base de tiempo" o la "tendencia de la curva".
– Configure la apariencia del visor de curvas en "Propiedades > Propiedades >
Apariencia".
– Configure las propiedades del visor de curvas en runtime en "Propiedades >
Propiedades > Ventana".
3. En caso necesario, configure diagramas adicionales.
4. Configure los ejes del visor de curvas en la ventana de inspección.
– Configure las propiedades de los ejes.
– Asigne cada eje a un diagrama del visor de curvas.
5. En la ventana de inspección, agregue las curvas que se van a mostrar en el visor de curvas:
– Defina el "origen de los datos" de cada curva.
– Asigne a cada curva el "diagrama" en el que se va a representar.
– Asigne a cada curva los ejes correspondientes.
– Configure la apariencia de cada curva.

724

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
6. Configure la barra de herramientas y la barra de estado del visor de curvas.
7. En caso necesario, configure la exportación de datos del visor de curvas.
8. En caso necesario, configure los ajustes de seguridad del visor de curvas.

Resultado
El visor de curvas está configurado. Si desea evaluar los datos del visor de curvas en runtime,
configure adicionalmente un visor de valores. El visor de valores también se puede configurar
como "regla".

Consulte también
Configurar los ejes de tiempos del visor de curvas (Página 725)
Configurar el eje de valores del visor de curvas (Página 726)
Crear diagramas en el visor de curvas (Página 727)
Crear curvas para la ventana de curvas (Página 728)
Definir el suministro de datos (Página 729)
Configurar la barra de herramientas y la barra de estado (Página 731)
Configurar la exportación de los datos runtime (Página 733)
Verificar los efectos de la configuración online (Página 734)
Configuración online del visor de curvas f(t) (Página 764)

Configurar los ejes de tiempos del visor de curvas
Introducción
Puede configurar el rango de tiempo de la representación de la curva mediante ejes de tiempo.
En un visor de curvas se pueden crear varios ejes de tiempo que se asignan a uno o varios
diagramas.
Si se asignan varios eje de tiempo a un visor de curvas, el orden de dichos ejes en la ventana
de inspección es el mismo que en el visor de curvas. Si se han asignado varios ejes de tiempo
en la misma página de un visor de curvas, el primer eje de tiempo de la lista adopta la posición
inferior izquierda. El último eje de valores de la lista adopta la posición superior derecha.
El eje de tiempos sólo está disponible con el visor de curvas f(t).

Requisitos
● El visor de curvas está seleccionado en la imagen
● La ventana de inspección está abierta

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

725

Trabajar con variables
2.10 Representar variables

Procedimiento
Para configurar el eje de tiempo de un visor de curvas, proceda del siguiente modo:
1. Para agregar un nuevo eje de tiempo, en la ventana de inspección vaya a "Propiedades >
Propiedades > Eje de tiempo" y haga doble clic en "Agregar".
2. Introduzca el "nombre" y el "nombre de visualización" del eje de tiempo.
3. Configure el "estilo del eje".
4. Seleccione el "diagrama" al que se va a asignar el eje de tiempo.
5. Configure el "rango de tiempo" y el "formato" de la representación de los tiempos del eje.
6. Para que as curvas asignadas al eje de tiempo se actualicen siempre en el visor de curvas,
active la opción "Online".
Nota
Imprimir un rango de tiempo fijo
Si desea imprimir un rango de tiempo definido, desactive "Online".
Si, por ejemplo, desea comparar una representación de curvas actual con otra
representación de curvas anterior, suministre la curva de referencia de una variable de
fichero.

Resultado
El eje de tiempos está configurado. Asigne el eje de tiempos a una o más curvas.

Consulte también
Principios del intervalo de tiempo (Página 720)
Estructura de la especificación de formato de hora (Página 735)
Estructura de la especificación del formato de fecha (Página 735)

Configurar el eje de valores del visor de curvas
Introducción
En un visor de curvas se pueden crear varios ejes de valores que se asignan a uno o varios
diagramas.
En la configuración predeterminada, el eje de valores tiene las siguientes propiedades:
● El rango de valores se rige por los valores actuales de la curva asignada
● La escala del eje de valores se rige linealmente por el rango de valores
Como alternativa se puede configurar una escala logarítmica:
● Con la escala logarítmica sólo se representan valores positivos
● Con la escala logarítmica negativa sólo se representan valores negativos

726

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Cuando configure un eje de valores para el visor de curvas f(t), también puede crear secciones
de eje. Asigne un rango de valores y un nombre de visualización a cada sección.
En el visor de curvas f(x), el eje de valores equivale tanto al "eje X" como al "eje Y".

Requisitos
● El visor de curvas está seleccionado en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar el eje de valores de un visor de curvas, proceda del siguiente modo:
1. Para agregar un nuevo eje de valores, en la ventana de inspección vaya a "Propiedades >
Propiedades > Eje de valores" y haga doble clic en "Agregar".
2. Introduzca el "nombre" y el "nombre de visualización" del eje de valores.
3. Configure el "estilo del eje".
4. Seleccione el "diagrama" al que se va a asignar el eje de valores.
5. En caso necesario, configure el "rango de valores" del eje.
6. En caso necesario, configure el "formato" de la rotulación del eje.
7. En caso necesario, configure la "escala" del eje.
8. Cuando configura el visor de curvas f(t), también puede crear "secciones de eje" si es
necesario.
– Active "secciones de eje personalizadas".
– Para agregar una sección se eje , haga doble clic en "Agregar".
– Introduzca el "rango de valores" de la sección del eje.
– Configure el "área de visualización" de la sección.
– Introduzca el "nombre de visualización" de la sección.

Resultado
El eje de valores está configurado. Asigne el eje de valores a una o más curvas.

Crear diagramas en el visor de curvas
Introducción
Un visor de curvas tiene, en la configuración predeterminada, un área de visualización en la
que se pueden configurar una o más curvas.
Otra alternativa es que usted divida el área de visualización en varios "diagramas". Cada
"diagrama" funciona como un visor de curvas independiente. De este modo se puede, por
ejemplo, representar las tendencias de la temperatura en un motor sin que las curvas se

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

727

Trabajar con variables
2.10 Representar variables
solapen unas a otras. La altura de un diagrama se define con la "proporción del área". Ésta
determina el espacio del que dispone el diagrama en el visor de curvas.

Cálculo de las proporciones del área
La altura de cada proporción del área se calcula partiendo del número total de proporciones.
Si, por ejemplo, se ha configurado un total de tres diagramas, con una proporción de "1"
respectivamente se obtendrán tres diagramas de igual tamaño. Para ampliar la proporción
relativa entre los diagramas, aumente la proporción de uno o varios de ellos. La modificación
de las proporciones del área surte un efecto inmediato en el visor de curvas.

Requisitos
● El visor de curvas está seleccionado
● La ventana de inspección está abierta

Modo de proceder
Para dividir el visor de curvas en varios diagramas, proceda del siguiente modo:
1. En la ventana de inspección vaya a "Propiedades > Propiedades > Diagramas" y haga
doble clic en "Agregar".
Se agrega un diagrama al visor de curvas.
2. Introduzca un "nombre" adecuado para el diagrama.
3. Seleccione la "proporción del área" que va a ocupar el diagrama en el visor de curvas.
4. Configure la "cuadrícula" del diagrama.
5. Configure la "regla" del diagrama.

Resultado
El diagrama está creado. A cada diagrama puede asignarle una o varias curvas.

Crear curvas para la ventana de curvas
Introducción
Una curva sirve para representar valores en el visor de curvas. A cada curva se le asigna un
eje de tiempos y un eje de valores. El eje de valores asignado a la curva determina el visor de
curvas en el que se mostrará la curva.
En la configuración predeterminada, el área de datos se rige por los valores actuales de la
curva asignada.
Adicionalmente, usted puede configurar para una curva la visualización de valores límite y
valores con "estado inseguro". Cuando la curva excede o no alcanza el valor configurado,
aparece marcada en color.

728

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Si se configuran varias curvas en un visor de curvas, el orden de dichas curvas en la ventana
de inspección es el mismo que en el visor de curvas.

Requisitos
● El visor de curvas está seleccionado en la imagen
● Los ejes de tiempos y de valores están configurados
● Las variables para el suministro de datos están configuradas
● La ventana de inspección está abierta

Modo de proceder
Para agregar una curva, proceda del siguiente modo:
1. En la ventana de inspección vaya a "Propiedades > Propiedades > Curvas" y haga doble
clic en "Agregar".
2. Introduzca una "rotulación" para la curva.
3. En caso necesario, configure el "estilo" de la curva.
Las modificaciones se muestran en una vista preliminar.
4. Configure el origen de los datos.
5. En caso necesario, configure el "área de datos" de la curva.
6. Seleccione el "diagrama" en el que se va a representar la curva.
7. Asigne a la curva un "eje de tiempos" y un "eje de valores".
8. En caso necesario, configure los "límites" de la curva.

Resultado
La curva está configurada.

Consulte también
Representación de progresos de curvas (Página 719)
Definir el suministro de datos (Página 729)

Definir el suministro de datos
Introducción
Con el suministro de datos se establece el origen de los valores en runtime que se mostrarán
en el panel. Las fuentes de origen disponibles son las siguientes:
● Valores de proceso actuales procedentes de variables
● Valores archivados procedentes de variables de ficheros

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

729

Trabajar con variables
2.10 Representar variables
● Elementos de receta (sólo visor de curvas f(x))
● Suministro de datos en runtime mediante script

Requisitos
● Se ha configurado una variable online o una variable de fichero
● Se ha creado una columna de valores o curva
● La ventana de inspección está abierta

Representar valores de proceso actuales
Para representar valores de proceso actuales, proceda del siguiente modo:
1. Cuando defina el origen de los datos para un visor de tablas, haga clic en "Propiedades >
Propiedades > Columna de valores" de la ventana de inspección.
2. Cuando defina el origen de los datos para un visor de curvas, haga clic en "Propiedades >
Propiedades > Curvas" de la ventana de inspección.
3. Configure el "origen de los datos":
– Seleccione como "origen" la entrada "variables".
– Cuando configure la curva de un visor de curvas f(x), seleccione una variable
respectivamente en "valores X" y "valores Y".
– Cuando configure la curva de un visor de curvas f(t) o una columna de valores,
seleccione una "variable".
– Seleccione el "ciclo de actualización".

Representar valores de un fichero
Para representar valores de un fichero, proceda del siguiente modo:
1. Cuando defina el origen de los datos para un visor de tablas, haga clic en "Propiedades >
Propiedades > Columna de valores" de la ventana de inspección.
2. Cuando defina el origen de los datos para un visor de curvas, haga clic en "Propiedades >
Propiedades > Curvas" de la ventana de inspección.
3. Configure el "origen de los datos":
– Seleccione como "origen" la entrada "Variables de fichero".
– Cuando configure la curva de un visor de curvas f(x), seleccione una variable
respectivamente en "valores X" y "valores Y".
– Cuando configure la curva de un visor de curvas f(t) o una columna de valores,
seleccione una "variable".

Representar valores de recetas
Los valores procedentes de recetas se visualizan en un visor de curvas f(x).

730

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Para representar valores de recetas, proceda del siguiente modo:
1. Configure el "origen de los datos" en la ventana de inspección "Propiedades > Propiedades
> Curvas".
– Seleccione como "origen de los datos" la entrada "Receta".
– Seleccione un elemento de receta respectivamente en "valores X" y "valores Y".

Configuración del suministro de datos en runtime definido por el usuario
Si desea suministrar datos para los valores de las curvas en runtime mediante script,
necesitará un script a través de la interfaz API.
Para establecer una conexión en runtime mediante script, proceda del siguiente modo:
1. Configure el "Origen de los datos" en la ventana de inspección "Propiedades > Propiedades
> Curvas".
– Seleccione como "Origen" la entrada "Definido por el usuario".
– Conecte el script a la curva correspondiente a través de la interfaz API.

Resultado
El suministro de datos está configurado.

Consulte también
Principios básicos de las variables (Página 535)
Conceptos básicos para archivar variables (Página 634)
Configurar el visor de curvas (Página 724)
Crear curvas para la ventana de curvas (Página 728)

Configurar la barra de herramientas y la barra de estado
Introducción
Maneje los controles en runtime con los botones de la barra de herramientas. La barra de
estado muestra los estados del control. Cuando esté creando el proyecto, configure el
contenido de la barra de herramientas y la barra de estado.

Requisitos
● El visor de tablas está seleccionado en la imagen
● La ventana de inspección está abierta

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

731

Trabajar con variables
2.10 Representar variables

Configurar la barra de herramientas
Para configurar la barra de herramientas, proceda del siguiente modo:
1. Configure las propiedades generales de la barra de herramientas (por ejemplo, la
alineación o el color de fondo) en la ventana de inspección "Propiedades > Propiedades >
Barra de herramientas > Barra de herramientas - General".
2. Active los botones que necesite en runtime en la ventana de inspección "Propiedades >
Propiedades > Barra de herramientas > Barra de herramientas - Botones".
Para informarse sobre la función de los distintos botones, consulte la descripción del
WinCC Control correspondiente en "Operación en runtime".
3. Para definir el orden de los botones, seleccione el botón correspondiente en la lista.
Después, desplace el botón hasta la posición en la que quiere colocarlo.
4. En caso necesario, defina una "tecla de acceso directo" para los botones de la barra de
herramientas.
5. En caso necesario, seleccione la autorización necesaria para poder manejar el botón en
runtime.
6. Si no quiere que se maneje un botón en runtime, desactive la opción "Activar".
Los botones desactivados se pueden volver a activar en runtime, por ejemplo, con un script.

Configurar la barra de estado
Para configurar la barra de estado, proceda del siguiente modo:
1. Configure las propiedades generales de la barra de estado (por ejemplo, la alineación o el
color de fondo) en la ventana de inspección "Propiedades > Propiedades > Barra de estado
> Barra de estado - General".
2. Active los elementos que necesite en runtime en la ventana de inspección "Propiedades >
Propiedades > Barra de estado > Barra de estado - Elementos".
Recibirá información sobre los elementos de la barra de estado en la descripción
correspondiente de WinCC Control en "Operación en runtime".
3. Para definir el orden de los elementos, seleccione el elemento correspondiente en la lista.
Después, desplace el elemento hasta la posición en la que quiere colocarlo.
4. Si quiere ajustar usted mismo el ancho de un elemento en la barra de estado, desactive la
opción "Adaptar automáticamente". Después, especifique un valor en píxeles para el ancho
del elemento.

Consulte también
Manejo del visor de curvas y del visor de tablas en runtime (Página 758)
Configurar el visor de curvas (Página 724)
Elementos de la barra de estado (Página 779)

732

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Configurar la exportación de los datos runtime
Introducción
En runtime existe la posibilidad de exportar en formato CSV los datos visualizados de un
control. Dependiendo del control utilizado y de la configuración, el usuario puede exportar
todos los datos o sólo los datos seleccionados.
El nombre del archivo CSV y su ubicación los define el propio usuario al ejecutar la exportación.
Otra alternativa es que usted mismo genere automáticamente el nombre del archivo con los
siguientes comodines:
● @OBJECTNAME: nombre de objeto del control
● @CURRENTDATE: fecha actual
● @CURRENTTIME: hora actual

Requisitos
● El control está seleccionado en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar la exportación de datos runtime, proceda del siguiente modo:
1. Abra en la ventana de inspección "Propiedades > Propiedades > Exportación de datos".
Los valores para la exportación de datos ya están preconfigurados.
2. En caso necesario, asigne un nombre y especifique la ubicación del archivo de exportación.
3. Seleccione el "volumen" de la exportación de datos.
4. Configure la "operación en runtime".
5. Para que el usuario pueda iniciar la exportación de datos, active la opción "Propiedades >
Propiedades > Barra de herramientas > Barra de herramientas - Botones > Export Data" en
la ventana de inspección.

Resultado
En runtime, el usuario puede exportar los datos del control desde la barra de herramientas.

Consulte también
Configurar el visor de curvas (Página 724)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

733

Trabajar con variables
2.10 Representar variables

Verificar los efectos de la configuración online
Introducción
La apariencia y la función de un control en runtime se configuran en WinCC. También se puede
determinar que el usuario pueda configurar un control en runtime. En "Propiedades >
Propiedades > Seguridad > Persistencia" se establece si se van a conservar las
modificaciones de la configuración en runtime, p. ej., después de un cambio de imagen:
● Sin persistencia
Las modificaciones realizadas en la configuración no se guardan. Las modificaciones se
pierden en el próximo cambio de imagen y al desactivar el proyecto.
● Persistencia
Las modificaciones realizadas en la configuración quedan guardadas. Las modificaciones
también se conservan al desactivar/activar el proyecto. En "Comportamiento al cambiar de
imagen" puede determinar además que los cambios se descarten al cambiar de imagen.
● Persistencia en runtime
Las modificaciones realizadas en la configuración sólo se guardan durante runtime. Las
modificaciones se pierden cuando se desactiva el proyecto. En "Comportamiento al
cambiar de imagen" puede determinar además que los cambios se descarten al cambiar de
imagen.
Nota
Si se modifica un control configurado y se carga en el panel, las modificaciones realizadas
en runtime se sobrescriben sea cual sea la configuración.

Requisitos
● Hay un control configurado
● La ventana de inspección está abierta

Procedimiento
Para configurar la persistencia de datos en runtime, proceda del siguiente modo:
1. Abra "Propiedades > Propiedades > Seguridad" en la ventana de inspección.
2. Seleccione la "configuración online".
3. En caso necesario, seleccione la autorización.
4. Seleccione el "comportamiento ante un cambio de imagen".

Resultado
El comportamiento con configuración online está configurado. En runtime, el usuario puede
adaptar la configuración del control en función de los parámetros definidos.
Cuando hay varios usuarios trabajando con el panel, las configuraciones personales sólo se
cargan después de que el nuevo usuario cambie de imagen.

734

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Consulte también
Configurar el visor de curvas (Página 724)
Configuración online del visor de curvas f(t) (Página 764)

Estructura de la especificación de formato de hora
Formato de hora
Los formatos de hora predefinidos de la lista de selección se pueden sobrescribir.
Si define formatos de hora propios, tenga en cuenta lo siguiente:
● Los espacios en blanco que separan valores en la especificación de formato se colocan en
el mismo lugar en la indicación de hora.
● Observe el uso de mayúsculas y minúsculas.
● Los caracteres que van encerrados entre comillas simples se muestran sin cambios en la
misma posición en la indicación de hora.
Para definir una especificación de formato, utilice los siguientes valores:
Valor

Descripción

h

Horas, reloj de 12 horas, sin cero precedente para horas de un solo dígito

hh

Horas, reloj de 12 horas, con cero precedente para horas de un solo dígito

H

Horas, reloj de 24 horas, sin cero precedente para horas de un solo dígito

HH

Horas, reloj de 24 horas, con cero precedente para horas de un solo dígito

m

Minutos, sin cero precedente para minutos de un solo dígito

mm

Minutos, con cero precedente para minutos de un solo dígito

s

Segundos, sin cero precedente para segundos de un solo dígito

ss

Segundos, con cero precedente para segundos de un solo dígito

t

Identificador temporal AM/PM de un solo dígito: A o P

tt

Identificador temporal AM/PM de dos dígitos: AM o PM

Ejemplo
Para definir la indicación de hora "11:29:40 PM", utilice la siguiente especificación de formato:
"hh:mm:ss tt"

Estructura de la especificación del formato de fecha
Formato de hora
Los formatos de fecha predefinidos de la lista de selección se pueden sobrescribir.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

735

Trabajar con variables
2.10 Representar variables
Si define formatos de fecha propios, tenga en cuenta lo siguiente:
● Los espacios en blanco que separan valores en la especificación de formato se colocan en
la misma posición en la indicación de fecha.
● Observe el uso de mayúsculas y minúsculas.
● Los caracteres que van encerrados entre comillas simples se muestran sin cambios en la
misma posición en la indicación de fecha.
Para definir una especificación de formato, utilice los siguientes valores:
Valor

Descripción

D

Día del mes como número, sin cero precedente para días de un solo dígito

Dd

Día del mes como número, con cero precedente para días de un solo dígito

Ddd

Día de la semana abreviado a tres letras

Dddd

Día de la semana completo

M

Mes como número, sin cero precedente para meses de un solo dígito

MM

Mes como número, con cero precedente para meses de un solo dígito

MMM

Mes abreviado a tres letras

MMM
M

Mes completo

y

Año, solo las dos últimas cifras, con cero precedente para años inferiores a 10, igual al formato "yy"

yy

Año, solo las dos últimas cifras, con cero precedente para años inferiores a 10

yyyy

Año completo de cuatro dígitos

Ejemplo
Para crear la indicación de fecha "Mi, Ago 31 13", utilice la siguiente indicación de formato:
"Ddd, MMM dd yy"

2.10.3.3

Visualizar valores de variable en forma de tabla

Configurar el visor de tablas
Introducción
Para representar en runtime valores de variable en una tabla, inserte un visor de tablas en una
imagen. Con cada valor se muestra también un sello de tiempo. Los valores se muestran en
columnas de valores y los sellos de tiempo, en columnas de tiempos. Asigne una columna de
tiempos a una o varias columnas de valores.

736

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Modo de proceder
Para configurar un visor de tablas, proceda del siguiente modo:
1. Desde la Task Card "Herramientas", inserte el visor de tablas en la imagen.
2. Configure la apariencia del visor de tablas en la ventana de inspección:
– Configure las propiedades base del visor de tablas en "Propiedades > Propiedades >
General"; por ejemplo, la "base de tiempo".
– Configure la apariencia del visor de tablas en "Propiedades > Propiedades >
Apariencia".
– Configure las propiedades del visor de tablas en runtime en "Propiedades >
Propiedades > Ventana".
3. Configure las columnas del visor de tablas en la ventana de inspección.
– Configure las propiedades de las columnas.
– Configure una o más columnas de tiempos con los intervalos de tiempo para la tabla.
– Configure una o más columnas de valores.
– Establezca la conexión de datos para cada columna.
– Asigne intervalos de tiempo a las columnas de valores.
4. Configure la apariencia de la tabla:
– Configure los "títulos", el "tronco" y la "cuadrícula".
– En caso necesario, configure los ajustes para "seleccionar" entradas de la tabla.
– En caso necesario, configure los ajustes para "ordenar" entradas de la tabla.
5. Configure la barra de herramientas y la barra de estado del visor de tablas.
6. En caso necesario, configure la exportación de datos del visor de tablas.
7. En caso necesario, configure los ajustes de seguridad del visor de tablas.

Resultado
El visor de tablas está configurado. Si desea evaluar los datos del visor de tablas en runtime,
configure adicionalmente una tabla de valores. La tabla de valores también se puede
configurar como "regla".

Consulte también
Configurar las columnas de tiempos del visor de tablas (Página 738)
Configurar las columnas de valores del visor de tablas (Página 739)
Configurar la apariencia de los elementos de la tabla (Página 740)
Configurar la selección de las celdas y filas elegidas (Página 741)
Configurar el orden de clasificación de las columnas de la tabla (Página 742)
Dinimizar los botones de la barra de herramientas (Página 723)
Definir el suministro de datos (Página 743)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

737

Trabajar con variables
2.10 Representar variables
Configurar la barra de herramientas y la barra de estado (Página 745)
Configurar la exportación de los datos runtime (Página 746)
Verificar los efectos de la configuración online (Página 747)
Configuración online del visor de tablas (Página 771)

Configurar las columnas de tiempos del visor de tablas
Introducción
El intervalo de tiempo de la representación en forma de tabla se configura mediante columnas
de tiempos. Una tabla puede contener una columna de tiempos común o columnas de tiempos
separadas para varias columnas de valores.
Si se asignan varias columnas de tiempos a un visor de tablas, el orden de las columnas de
tiempos en la ventana de inspección es el mismo que el orden en el visor de tablas.

Requisitos
● El visor de tablas está seleccionado en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar la columna de tiempos de un visor de tablas, proceda del siguiente modo:
1. Para agregar columnas de tiempos, en la ventana de inspección vaya a "Propiedades >
Propiedades > Columna de tiempo" y haga clic en "Agregar".
2. Introduzca el "nombre" y la "rotulación" de la columna de tiempos.
3. Configure el "estilo" de la columna de tiempos.
4. Configure el "intervalo de tiempo" y el "formato" de la representación de los tiempos de la
columna.
5. Configure la representación del "encabezado" y las "celdas".
6. Si quiere que los valores de la columna de tiempos se actualice automáticamente, active la
opción "Actualizar".

Resultado
La columna de tiempos está configurada. Asigne la columna de tiempos a una o varias
columnas de valores.

738

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Consulte también
Configurar las columnas de valores del visor de tablas (Página 739)
Estructura de la especificación de formato de hora (Página 748)
Estructura de la especificación del formato de fecha (Página 749)

Configurar las columnas de valores del visor de tablas
Introducción
Los valores del visor de tablas se configuran mediante columnas de valores. En una tabla se
pueden representar varias columnas de valores, por ejemplo, para comparar los niveles de
llenado de varios depósitos de reserva. Cada columna de valores está enlazada a una
columna de tiempos. Las columnas de valores pueden compartir la misma columna de
tiempos.
Si se asignan varias columnas de valores a un visor de tablas, el orden de dichas columnas en
la ventana de inspección es el mismo que en el visor de tablas. Si se asigna la misma columna
de tiempos a varias columnas de valores, éstas se agrupan automáticamente en la lista según
la columna de tiempos que les ha sido asignada.

Requisitos
● El visor de tablas está seleccionado en la imagen
● La ventana de inspección está abierta
● La columna de tiempos está creada.

Modo de proceder
Para configurar una columna de valores, proceda del siguiente modo:
1. Para agregar una nueva columna de valores, en la ventana de inspección vaya a
"Propiedades > Propiedades > Columna de valores" y haga doble clic en "Agregar".
2. Introduzca el "nombre" y la "rotulación" de la columna de valores.
3. Configure el origen de los datos.
4. Asigne una columna de tiempos a la columna de valores.
5. En caso necesario, configure la representación del "encabezado" y las "celdas".
6. En caso necesario, configure la "clasificación" de la columna de valores.

Resultado
La columna de valores está configurada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

739

Trabajar con variables
2.10 Representar variables

Consulte también
Definir el suministro de datos (Página 729)
Configurar las columnas de tiempos del visor de tablas (Página 738)
Definir el suministro de datos (Página 743)

Configurar la apariencia de los elementos de la tabla
Introducción
La apariencia de los elementos de la tabla se puede adaptar a las necesidades de cada uno.

Requisitos
● El visor de tablas o la tabla de valores están seleccionados en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar los colores de los elementos de la tabla, proceda del siguiente modo:
1. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Título" defina
las siguientes propiedades:
– Visibilidad de los títulos de las columnas y los encabezado de las filas
– Alineación de los títulos de las columnas y los encabezado de las filas
– Color de los títulos de las columnas
2. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Tronco" defina
las siguientes propiedades:
– Color del contenido de la tabla; por ejemplo, colores diferentes en las filas para
distinguirlas mejor
– Visibilidad de las columnas y filas vacías
3. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Cuadrícula"
defina las siguientes propiedades:
– Apariencia de las líneas de cuadrícula
– Distancia entre caracteres en las celdas de la tabla

Resultado
La apariencia de los elementos de la tabla está configurada. Aún hay otras propiedades que
usted puede definir:
● El comportamiento y el color al marcar una entrada de la tabla
● El orden de clasificación de las entradas de la tabla

740

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Consulte también
Configurar la selección de las celdas y filas elegidas (Página 741)
Configurar el orden de clasificación de las columnas de la tabla (Página 742)

Configurar la selección de las celdas y filas elegidas
Introducción
Cuando un usuario quiere, por ejemplo, exportar valores de una fila, tiene que seleccionarla.
Defina las siguientes opciones durante la configuración:
● Área de selección
Para el área de selección se configuran las siguientes propiedades:
– Número de elementos de la tabla que el usuario puede seleccionar
– Apariencia del área de selección
● Color del área de selección
Elija los colores de forma individual o utilice el color predeterminado por el sistema.

Requisitos
● El visor de tablas está seleccionado en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar el área de selección, proceda del siguiente modo:
1. Elija el "tipo" de área de selección en la ventana de inspección "Propiedades > Propiedades
> Tabla > Tabla - Selección > Área de selección".
2. En caso necesario, seleccione el "borde" que se verá alrededor del área de selección.
3. En caso necesario, seleccione los colores para "celdas", "filas" y "borde".

Resultado
El área de selección del visor de tablas está configurado. Para exportar los datos de un área
seleccionada, configure la "exportación de datos". Para, por ejemplo, evaluar los datos de un
área seleccionada, configure un "visor de valores".

Consulte también
Definir el suministro de datos (Página 743)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

741

Trabajar con variables
2.10 Representar variables

Configurar el orden de clasificación de las columnas de la tabla
Introducción
Para ordenar columnas de una tabla en runtime, configure el orden de clasificación dentro de
la tabla.
Según sea la configuración, el usuario puede ordenar la columna de una tabla del siguiente
modo:
● Haciendo clic o doble clic en el título de la columna
● Haciendo clic en un botón de clasificación
Con el botón de clasificación se ordena la columna seleccionada en el orden configurado.
Para que se muestre el botón de clasificación, es necesario configurar una barra de
desplazamiento vertical.

Requisitos
● El visor de tablas o la tabla de valores están seleccionados en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar la clasificación dentro de una tabla, proceda del siguiente modo:
1. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Clasificación >
Clasificar por títulos de columnas" seleccione "clasificar haciendo doble clic" o "clasificar
haciendo clic".
2. Seleccione el "orden de clasificación".
3. En caso necesario, active la opción "Mostrar símbolo de clasificación" y "Mostrar índice de
clasificación".
4. En caso necesario, active la opción "Mostrar botón de clasificación".
5. Si utiliza el botón de clasificación, seleccione en la ventana de inspección "Propiedades >
Propiedades > Ventana > Desplazamiento > Barra vertical > Siempre".

Resultado
La clasificación de las columnas de tabla está configurada.

742

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Definir el suministro de datos
Introducción
Con el suministro de datos se establece el origen de los valores en runtime que se mostrarán
en el panel. Las fuentes de origen disponibles son las siguientes:
● Valores de proceso actuales procedentes de variables
● Valores archivados procedentes de variables de ficheros
● Elementos de receta (sólo visor de curvas f(x))
● Suministro de datos en runtime mediante script

Requisitos
● Se ha configurado una variable online o una variable de fichero
● Se ha creado una columna de valores o curva
● La ventana de inspección está abierta

Representar valores de proceso actuales
Para representar valores de proceso actuales, proceda del siguiente modo:
1. Cuando defina el origen de los datos para un visor de tablas, haga clic en "Propiedades >
Propiedades > Columna de valores" de la ventana de inspección.
2. Cuando defina el origen de los datos para un visor de curvas, haga clic en "Propiedades >
Propiedades > Curvas" de la ventana de inspección.
3. Configure el "origen de los datos":
– Seleccione como "origen" la entrada "variables".
– Cuando configure la curva de un visor de curvas f(x), seleccione una variable
respectivamente en "valores X" y "valores Y".
– Cuando configure la curva de un visor de curvas f(t) o una columna de valores,
seleccione una "variable".
– Seleccione el "ciclo de actualización".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

743

Trabajar con variables
2.10 Representar variables

Representar valores de un fichero
Para representar valores de un fichero, proceda del siguiente modo:
1. Cuando defina el origen de los datos para un visor de tablas, haga clic en "Propiedades >
Propiedades > Columna de valores" de la ventana de inspección.
2. Cuando defina el origen de los datos para un visor de curvas, haga clic en "Propiedades >
Propiedades > Curvas" de la ventana de inspección.
3. Configure el "origen de los datos":
– Seleccione como "origen" la entrada "Variables de fichero".
– Cuando configure la curva de un visor de curvas f(x), seleccione una variable
respectivamente en "valores X" y "valores Y".
– Cuando configure la curva de un visor de curvas f(t) o una columna de valores,
seleccione una "variable".

Representar valores de recetas
Los valores procedentes de recetas se visualizan en un visor de curvas f(x).
Para representar valores de recetas, proceda del siguiente modo:
1. Configure el "origen de los datos" en la ventana de inspección "Propiedades > Propiedades
> Curvas".
– Seleccione como "origen de los datos" la entrada "Receta".
– Seleccione un elemento de receta respectivamente en "valores X" y "valores Y".

Configuración del suministro de datos en runtime definido por el usuario
Si desea suministrar datos para los valores de las curvas en runtime mediante script,
necesitará un script a través de la interfaz API.
Para establecer una conexión en runtime mediante script, proceda del siguiente modo:
1. Configure el "Origen de los datos" en la ventana de inspección "Propiedades > Propiedades
> Curvas".
– Seleccione como "Origen" la entrada "Definido por el usuario".
– Conecte el script a la curva correspondiente a través de la interfaz API.

Resultado
El suministro de datos está configurado.

Consulte también
Principios básicos de las variables (Página 535)
Conceptos básicos para archivar variables (Página 634)

744

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Configurar el visor de tablas (Página 736)
Configurar las columnas de valores del visor de tablas (Página 739)

Configurar la barra de herramientas y la barra de estado
Introducción
Maneje los controles en runtime con los botones de la barra de herramientas. La barra de
estado muestra los estados del control. Cuando esté creando el proyecto, configure el
contenido de la barra de herramientas y la barra de estado.

Requisitos
● El visor de tablas está seleccionado en la imagen
● La ventana de inspección está abierta

Configurar la barra de herramientas
Para configurar la barra de herramientas, proceda del siguiente modo:
1. Configure las propiedades generales de la barra de herramientas (por ejemplo, la
alineación o el color de fondo) en la ventana de inspección "Propiedades > Propiedades >
Barra de herramientas > Barra de herramientas - General".
2. Active los botones que necesite en runtime en la ventana de inspección "Propiedades >
Propiedades > Barra de herramientas > Barra de herramientas - Botones".
Para informarse sobre la función de los distintos botones, consulte la descripción del
WinCC Control correspondiente en "Operación en runtime".
3. Para definir el orden de los botones, seleccione el botón correspondiente en la lista.
Después, desplace el botón hasta la posición en la que quiere colocarlo.
4. En caso necesario, defina una "tecla de acceso directo" para los botones de la barra de
herramientas.
5. En caso necesario, seleccione la autorización necesaria para poder manejar el botón en
runtime.
6. Si no quiere que se maneje un botón en runtime, desactive la opción "Activar".
Los botones desactivados se pueden volver a activar en runtime, por ejemplo, con un script.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

745

Trabajar con variables
2.10 Representar variables

Configurar la barra de estado
Para configurar la barra de estado, proceda del siguiente modo:
1. Configure las propiedades generales de la barra de estado (por ejemplo, la alineación o el
color de fondo) en la ventana de inspección "Propiedades > Propiedades > Barra de estado
> Barra de estado - General".
2. Active los elementos que necesite en runtime en la ventana de inspección "Propiedades >
Propiedades > Barra de estado > Barra de estado - Elementos".
Recibirá información sobre los elementos de la barra de estado en la descripción
correspondiente de WinCC Control en "Operación en runtime".
3. Para definir el orden de los elementos, seleccione el elemento correspondiente en la lista.
Después, desplace el elemento hasta la posición en la que quiere colocarlo.
4. Si quiere ajustar usted mismo el ancho de un elemento en la barra de estado, desactive la
opción "Adaptar automáticamente". Después, especifique un valor en píxeles para el ancho
del elemento.

Consulte también
Manejo del visor de curvas y del visor de tablas en runtime (Página 758)
Configurar el visor de tablas (Página 736)
Elementos de la barra de estado (Página 779)

Configurar la exportación de los datos runtime
Introducción
En runtime existe la posibilidad de exportar en formato CSV los datos visualizados de un
control. Dependiendo del control utilizado y de la configuración, el usuario puede exportar
todos los datos o sólo los datos seleccionados.
El nombre del archivo CSV y su ubicación los define el propio usuario al ejecutar la exportación.
Otra alternativa es que usted mismo genere automáticamente el nombre del archivo con los
siguientes comodines:
● @OBJECTNAME: nombre de objeto del control
● @CURRENTDATE: fecha actual
● @CURRENTTIME: hora actual

Requisitos
● El control está seleccionado en la imagen
● La ventana de inspección está abierta

746

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Modo de proceder
Para configurar la exportación de datos runtime, proceda del siguiente modo:
1. Abra en la ventana de inspección "Propiedades > Propiedades > Exportación de datos".
Los valores para la exportación de datos ya están preconfigurados.
2. En caso necesario, asigne un nombre y especifique la ubicación del archivo de exportación.
3. Seleccione el "volumen" de la exportación de datos.
4. Configure la "operación en runtime".
5. Para que el usuario pueda iniciar la exportación de datos, active la opción "Propiedades >
Propiedades > Barra de herramientas > Barra de herramientas - Botones > Export Data" en
la ventana de inspección.

Resultado
En runtime, el usuario puede exportar los datos del control desde la barra de herramientas.

Consulte también
Configurar el visor de tablas (Página 736)

Verificar los efectos de la configuración online
Introducción
La apariencia y la función de un control en runtime se configuran en WinCC. También se puede
determinar que el usuario pueda configurar un control en runtime. En "Propiedades >
Propiedades > Seguridad > Persistencia" se establece si se van a conservar las
modificaciones de la configuración en runtime, p. ej., después de un cambio de imagen:
● Sin persistencia
Las modificaciones realizadas en la configuración no se guardan. Las modificaciones se
pierden en el próximo cambio de imagen y al desactivar el proyecto.
● Persistencia
Las modificaciones realizadas en la configuración quedan guardadas. Las modificaciones
también se conservan al desactivar/activar el proyecto. En "Comportamiento al cambiar de
imagen" puede determinar además que los cambios se descarten al cambiar de imagen.
● Persistencia en runtime
Las modificaciones realizadas en la configuración sólo se guardan durante runtime. Las
modificaciones se pierden cuando se desactiva el proyecto. En "Comportamiento al
cambiar de imagen" puede determinar además que los cambios se descarten al cambiar de
imagen.
Nota
Si se modifica un control configurado y se carga en el panel, las modificaciones realizadas
en runtime se sobrescriben sea cual sea la configuración.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

747

Trabajar con variables
2.10 Representar variables

Requisitos
● Hay un control configurado
● La ventana de inspección está abierta

Procedimiento
Para configurar la persistencia de datos en runtime, proceda del siguiente modo:
1. Abra "Propiedades > Propiedades > Seguridad" en la ventana de inspección.
2. Seleccione la "configuración online".
3. En caso necesario, seleccione la autorización.
4. Seleccione el "comportamiento ante un cambio de imagen".

Resultado
El comportamiento con configuración online está configurado. En runtime, el usuario puede
adaptar la configuración del control en función de los parámetros definidos.
Cuando hay varios usuarios trabajando con el panel, las configuraciones personales sólo se
cargan después de que el nuevo usuario cambie de imagen.

Consulte también
Configurar el visor de tablas (Página 736)
Configuración online del visor de tablas (Página 771)

Estructura de la especificación de formato de hora
Formato de hora
Los formatos de hora predefinidos de la lista de selección se pueden sobrescribir.
Si define formatos de hora propios, tenga en cuenta lo siguiente:
● Los espacios en blanco que separan valores en la especificación de formato se colocan en
el mismo lugar en la indicación de hora.
● Observe el uso de mayúsculas y minúsculas.
● Los caracteres que van encerrados entre comillas simples se muestran sin cambios en la
misma posición en la indicación de hora.
Para definir una especificación de formato, utilice los siguientes valores:
Valor

Descripción

h

Horas, reloj de 12 horas, sin cero precedente para horas de un solo dígito

hh

Horas, reloj de 12 horas, con cero precedente para horas de un solo dígito

H

Horas, reloj de 24 horas, sin cero precedente para horas de un solo dígito

HH

Horas, reloj de 24 horas, con cero precedente para horas de un solo dígito

748

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Valor

Descripción

m

Minutos, sin cero precedente para minutos de un solo dígito

mm

Minutos, con cero precedente para minutos de un solo dígito

s

Segundos, sin cero precedente para segundos de un solo dígito

ss

Segundos, con cero precedente para segundos de un solo dígito

t

Identificador temporal AM/PM de un solo dígito: A o P

tt

Identificador temporal AM/PM de dos dígitos: AM o PM

Ejemplo
Para definir la indicación de hora "11:29:40 PM", utilice la siguiente especificación de formato:
"hh:mm:ss tt"

Estructura de la especificación del formato de fecha
Formato de hora
Los formatos de fecha predefinidos de la lista de selección se pueden sobrescribir.
Si define formatos de fecha propios, tenga en cuenta lo siguiente:
● Los espacios en blanco que separan valores en la especificación de formato se colocan en
la misma posición en la indicación de fecha.
● Observe el uso de mayúsculas y minúsculas.
● Los caracteres que van encerrados entre comillas simples se muestran sin cambios en la
misma posición en la indicación de fecha.
Para definir una especificación de formato, utilice los siguientes valores:
Valor

Descripción

D

Día del mes como número, sin cero precedente para días de un solo dígito

Dd

Día del mes como número, con cero precedente para días de un solo dígito

Ddd

Día de la semana abreviado a tres letras

Dddd

Día de la semana completo

M

Mes como número, sin cero precedente para meses de un solo dígito

MM

Mes como número, con cero precedente para meses de un solo dígito

MMM

Mes abreviado a tres letras

MMM
M

Mes completo

y

Año, solo las dos últimas cifras, con cero precedente para años inferiores a 10, igual al formato "yy"

yy

Año, solo las dos últimas cifras, con cero precedente para años inferiores a 10

yyyy

Año completo de cuatro dígitos

Ejemplo
Para crear la indicación de fecha "Mi, Ago 31 13", utilice la siguiente indicación de formato:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

749

Trabajar con variables
2.10 Representar variables
"Ddd, MMM dd yy"

2.10.3.4

Configurar la tabla de valores

Principios básicos de la tabla de valores
Función
La tabla de valores muestra valores o estadísticas de un control. Su contenido se define en el
momento de configurarla.

Sinopsis de la tabla de valores
La tabla de valores se enlaza con uno de los siguientes controles:
● Visor de tablas
● Visor de curvas f(x)
● Visor de curvas f(t)
Establezca un "modo de representación" para la tabla de valores. Con él se definen los datos
que se van a mostrar en la tabla de valores.

Modos de representación
La tabla de valores ofrece tres modos de representación:
● Ventana de regla
La ventana de regla muestra las coordenadas de las curvas en la regla o los valores en una
fila seleccionada de la tabla.
● Ventana del área de estadísticas
La ventana de ámbito de estadística muestra los valores del límite inferior y superior de las
curvas o del área seleccionada en la tabla entre dos reglas. Esta ventana sólo se puede
enlazar con el visor de curvas f(t) o el visor de tablas.
● Ventana de estadísticas
La ventana de estadísticas muestra la evaluación de las curvas. La estadística incluye entre
otros:
– Mínimo
– Máximo
– Promedio
– Desviación estándar
– Integral
Todas las ventanas pueden mostrar también datos asociados a las curvas o columnas
enlazadas (p. ej. sello de tiempo).

750

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Consulte también
Configurar la tabla de valores (Página 751)
Crear una estadística de datos runtime (Página 776)
Determinar las coordenadas de un punto (Página 769)

Configurar la tabla de valores
Introducción
El contenido de la tabla de valores se representa en columnas. Las columnas disponibles
dependen del control enlazado. Cada columna tiene asignado un bloque. Con los bloques se
definen la alineación y la apariencia de los títulos de las columnas. En la configuración
predeterminada, para formato de visualización se toma el formato del control enlazado; por
ejemplo, la representación de los tiempos.

Requisitos
● El visor de tablas o el visor de curvas está seleccionado en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar una tabla de valores, proceda del siguiente modo:
1. Desde la Task Card "Herramientas", inserte el visor de tablas en la imagen.
2. Para enlazar la tabla de valores con el control seleccionado, vaya a "Propiedades >
Propiedades > General > Origen de los datos" en la ventana de inspección.
3. Seleccione el "modo" de la tabla de valores en "Propiedades > Propiedades > General".
4. Configure las propiedades de las columnas de la tabla de valores en "Propiedades >
Propiedades > Bloques".
5. Configure las propiedades de las columnas en "Propiedades > Propiedades > Columnas":
– En caso necesario, modifique la "visibilidad"
– En caso necesario, modifique la "rotulación"
– En caso necesario, modifique el orden de las columnas con "Arriba" y "Abajo".
6. Configure la apariencia de la tabla de curvas en la ventana de inspección:
– Configure la apariencia de la tabla de valores en "Propiedades > Propiedades >
Apariencia".
– Configure las propiedades de la tabla de valores en runtime en "Propiedades >
Propiedades > Ventana".

Resultado
La tabla de valores está configurada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

751

Trabajar con variables
2.10 Representar variables

Consulte también
Principios básicos de la tabla de valores (Página 750)
Configurar la barra de herramientas y la barra de estado (Página 752)
Configurar la apariencia de los elementos de la tabla (Página 753)
Configurar el orden de clasificación de las columnas de la tabla (Página 754)
Configurar la exportación de los datos runtime (Página 755)
Verificar los efectos de la configuración online (Página 757)

Configurar la barra de herramientas y la barra de estado
Introducción
Maneje los controles en runtime con los botones de la barra de herramientas. La barra de
estado muestra los estados del control. Cuando esté creando el proyecto, configure el
contenido de la barra de herramientas y la barra de estado.

Requisitos
● El visor de tablas está seleccionado en la imagen
● La ventana de inspección está abierta

Configurar la barra de herramientas
Para configurar la barra de herramientas, proceda del siguiente modo:
1. Configure las propiedades generales de la barra de herramientas (por ejemplo, la
alineación o el color de fondo) en la ventana de inspección "Propiedades > Propiedades >
Barra de herramientas > Barra de herramientas - General".
2. Active los botones que necesite en runtime en la ventana de inspección "Propiedades >
Propiedades > Barra de herramientas > Barra de herramientas - Botones".
Para informarse sobre la función de los distintos botones, consulte la descripción del
WinCC Control correspondiente en "Operación en runtime".
3. Para definir el orden de los botones, seleccione el botón correspondiente en la lista.
Después, desplace el botón hasta la posición en la que quiere colocarlo.
4. En caso necesario, defina una "tecla de acceso directo" para los botones de la barra de
herramientas.
5. En caso necesario, seleccione la autorización necesaria para poder manejar el botón en
runtime.
6. Si no quiere que se maneje un botón en runtime, desactive la opción "Activar".
Los botones desactivados se pueden volver a activar en runtime, por ejemplo, con un script.

752

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Configurar la barra de estado
Para configurar la barra de estado, proceda del siguiente modo:
1. Configure las propiedades generales de la barra de estado (por ejemplo, la alineación o el
color de fondo) en la ventana de inspección "Propiedades > Propiedades > Barra de estado
> Barra de estado - General".
2. Active los elementos que necesite en runtime en la ventana de inspección "Propiedades >
Propiedades > Barra de estado > Barra de estado - Elementos".
Recibirá información sobre los elementos de la barra de estado en la descripción
correspondiente de WinCC Control en "Operación en runtime".
3. Para definir el orden de los elementos, seleccione el elemento correspondiente en la lista.
Después, desplace el elemento hasta la posición en la que quiere colocarlo.
4. Si quiere ajustar usted mismo el ancho de un elemento en la barra de estado, desactive la
opción "Adaptar automáticamente". Después, especifique un valor en píxeles para el ancho
del elemento.

Consulte también
Configurar la tabla de valores (Página 751)
Elementos de la barra de estado (Página 779)

Configurar la apariencia de los elementos de la tabla
Introducción
La apariencia de los elementos de la tabla se puede adaptar a las necesidades de cada uno.

Requisitos
● El visor de tablas o la tabla de valores están seleccionados en la imagen
● La ventana de inspección está abierta

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

753

Trabajar con variables
2.10 Representar variables

Modo de proceder
Para configurar los colores de los elementos de la tabla, proceda del siguiente modo:
1. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Título" defina
las siguientes propiedades:
– Visibilidad de los títulos de las columnas y los encabezado de las filas
– Alineación de los títulos de las columnas y los encabezado de las filas
– Color de los títulos de las columnas
2. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Tronco" defina
las siguientes propiedades:
– Color del contenido de la tabla; por ejemplo, colores diferentes en las filas para
distinguirlas mejor
– Visibilidad de las columnas y filas vacías
3. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Cuadrícula"
defina las siguientes propiedades:
– Apariencia de las líneas de cuadrícula
– Distancia entre caracteres en las celdas de la tabla

Resultado
La apariencia de los elementos de la tabla está configurada. Aún hay otras propiedades que
usted puede definir:
● El comportamiento y el color al marcar una entrada de la tabla
● El orden de clasificación de las entradas de la tabla

Consulte también
Configurar la tabla de valores (Página 751)
Configurar el orden de clasificación de las columnas de la tabla (Página 754)

Configurar el orden de clasificación de las columnas de la tabla
Introducción
Para ordenar columnas de una tabla en runtime, configure el orden de clasificación dentro de
la tabla.

754

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Según sea la configuración, el usuario puede ordenar la columna de una tabla del siguiente
modo:
● Haciendo clic o doble clic en el título de la columna
● Haciendo clic en un botón de clasificación
Con el botón de clasificación se ordena la columna seleccionada en el orden configurado.
Para que se muestre el botón de clasificación, es necesario configurar una barra de
desplazamiento vertical.

Requisitos
● El visor de tablas o la tabla de valores están seleccionados en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar la clasificación dentro de una tabla, proceda del siguiente modo:
1. En la ventana de inspección "Propiedades > Propiedades > Tabla > Tabla - Clasificación >
Clasificar por títulos de columnas" seleccione "clasificar haciendo doble clic" o "clasificar
haciendo clic".
2. Seleccione el "orden de clasificación".
3. En caso necesario, active la opción "Mostrar símbolo de clasificación" y "Mostrar índice de
clasificación".
4. En caso necesario, active la opción "Mostrar botón de clasificación".
5. Si utiliza el botón de clasificación, seleccione en la ventana de inspección "Propiedades >
Propiedades > Ventana > Desplazamiento > Barra vertical > Siempre".

Resultado
La clasificación de las columnas de tabla está configurada.

Consulte también
Configurar la tabla de valores (Página 751)

Configurar la exportación de los datos runtime
Introducción
En runtime existe la posibilidad de exportar en formato CSV los datos visualizados de un
control. Dependiendo del control utilizado y de la configuración, el usuario puede exportar
todos los datos o sólo los datos seleccionados.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

755

Trabajar con variables
2.10 Representar variables
El nombre del archivo CSV y su ubicación los define el propio usuario al ejecutar la exportación.
Otra alternativa es que usted mismo genere automáticamente el nombre del archivo con los
siguientes comodines:
● @OBJECTNAME: nombre de objeto del control
● @CURRENTDATE: fecha actual
● @CURRENTTIME: hora actual

Requisitos
● El control está seleccionado en la imagen
● La ventana de inspección está abierta

Modo de proceder
Para configurar la exportación de datos runtime, proceda del siguiente modo:
1. Abra en la ventana de inspección "Propiedades > Propiedades > Exportación de datos".
Los valores para la exportación de datos ya están preconfigurados.
2. En caso necesario, asigne un nombre y especifique la ubicación del archivo de exportación.
3. Seleccione el "volumen" de la exportación de datos.
4. Configure la "operación en runtime".
5. Para que el usuario pueda iniciar la exportación de datos, active la opción "Propiedades >
Propiedades > Barra de herramientas > Barra de herramientas - Botones > Export Data" en
la ventana de inspección.

Resultado
En runtime, el usuario puede exportar los datos del control desde la barra de herramientas.

Consulte también
Configurar la tabla de valores (Página 751)

756

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Verificar los efectos de la configuración online
Introducción
La apariencia y la función de un control en runtime se configuran en WinCC. También se puede
determinar que el usuario pueda configurar un control en runtime. En "Propiedades >
Propiedades > Seguridad > Persistencia" se establece si se van a conservar las
modificaciones de la configuración en runtime, p. ej., después de un cambio de imagen:
● Sin persistencia
Las modificaciones realizadas en la configuración no se guardan. Las modificaciones se
pierden en el próximo cambio de imagen y al desactivar el proyecto.
● Persistencia
Las modificaciones realizadas en la configuración quedan guardadas. Las modificaciones
también se conservan al desactivar/activar el proyecto. En "Comportamiento al cambiar de
imagen" puede determinar además que los cambios se descarten al cambiar de imagen.
● Persistencia en runtime
Las modificaciones realizadas en la configuración sólo se guardan durante runtime. Las
modificaciones se pierden cuando se desactiva el proyecto. En "Comportamiento al
cambiar de imagen" puede determinar además que los cambios se descarten al cambiar de
imagen.
Nota
Si se modifica un control configurado y se carga en el panel, las modificaciones realizadas
en runtime se sobrescriben sea cual sea la configuración.

Requisitos
● Hay un control configurado
● La ventana de inspección está abierta

Procedimiento
Para configurar la persistencia de datos en runtime, proceda del siguiente modo:
1. Abra "Propiedades > Propiedades > Seguridad" en la ventana de inspección.
2. Seleccione la "configuración online".
3. En caso necesario, seleccione la autorización.
4. Seleccione el "comportamiento ante un cambio de imagen".

Resultado
El comportamiento con configuración online está configurado. En runtime, el usuario puede
adaptar la configuración del control en función de los parámetros definidos.
Cuando hay varios usuarios trabajando con el panel, las configuraciones personales sólo se
cargan después de que el nuevo usuario cambie de imagen.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

757

Trabajar con variables
2.10 Representar variables

Consulte también
Configurar la tabla de valores (Página 751)

2.10.3.5

Manejar controles en runtime

Manejo del visor de curvas y del visor de tablas en runtime
Introducción
Para manejar los visores de curvas y de tablas, se utilizan los botones de la barra de
herramientas.
Para manejar un botón mediante un script, transfiera la "ID" del botón al script. Para rotular el
botón pueden utilizarse los símbolos de la librería de símbolos. Los símbolos están disponibles
en "Carpeta de gráficos de WinCC > Runtime control icons > Trend View" de la Task Card
"Herramientas > Gráficos".

Botones del visor de curvas f(x)
En la siguiente tabla se muestran los botones disponibles para el visor de curvas f(x):
Símbolo

Nombre

Función

ID

"Tooltip"

Llama la ayuda del control.

1

"Diálogo de configuración"

Abre el cuadro de diálogo en el que se pueden modificar las pro‐ 2
piedades del control.

"Regla"

Visualiza una regla que muestra las coordenadas de la intersec‐ 3
ción con una curva en la tabla de valores.
Requisitos: La tabla de valores está configurada con el modo de
representación "ventana de regla".

"Área de zoom"

Amplía la sección del visor de curvas. La sección se define arras‐ 4
trando el ratón.
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.

"Zoom +/-"

Amplía o reduce las curvas en el visor de curvas.

5

Botón izquierdo del ratón: Ampliar
<Mayús + botón izquierdo del ratón>: Reducir
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.
"Zoom eje X +/-"

Amplía o reduce el eje de tiempo en el visor de curvas.

6

Botón izquierdo del ratón: Ampliar
<Mayús + botón izquierdo del ratón>: Reducir
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.

758

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Símbolo

Nombre

Función

ID

"Zoom eje Y +/-"

Amplía o reduce el eje de valores en el visor de curvas.

7

Botón izquierdo del ratón: Ampliar
<Mayús + botón izquierdo del ratón>: Reducir
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.
"Mover rango de curva"

Mueve las curvas a lo largo del eje de valores y el eje de tiempo 8

"Mover rango de eje"

Mueve las curvas a lo largo del eje de valores

9

"Vista original"

Retorna de la representación ampliada a la vista de tamaño ori‐
ginal

10

"Seleccionar conexión de da‐
tos"

Abre un diálogo en el que se selecciona el origen de los datos:

11

● Fichero de valores de proceso
● Variable
● Receta (solo visor de curvas f(x))

"Seleccionar curvas"

Abre un diálogo en el que se visualizan u ocultan curvas. Tam‐
bién se puede seleccionar la curva que se representa en primer
plano.

12

"Seleccionar intervalo de tiem‐
po"

Abre un diálogo en el que se puede configurar el intervalo de
tiempo.

13

"Curva anterior"

Muestra la curva anterior en primer plano.

14

"Curva siguiente"

Muestra la siguiente curva en primer plano.

15

"Parar"

Detiene la representación actualizada

16

Los datos se almacenan de manera temporal.
"Iniciar"

Continúa con la representación actualizada.

16

Los datos almacenados temporalmente quedan anotados.
"Imprimir"

Imprime los valores seleccionados.

17

El trabajo de impresión se define en la ficha "General" del diálogo
de configuración
"Conectar copia de seguridad"

Abre el diálogo para enlazar ficheros seleccionados de WinCC
Runtime

18

"Desconectar copia de seguri‐
dad"

Abre el diálogo para desconectar ficheros seleccionados de
WinCC Runtime

19

"Exportar datos"

Exporta todos los datos o los seleccionados a un archivo *.CSV.

20

Dependiendo de la configuración y de los derechos asignados,
pueden estar disponibles las siguientes opciones:
● Ver los parámetros de exportación e iniciar la exportación
● Seleccionar un nombre de archivo y un directorio
"Definido por el usuario 1"

Muestra el primer botón creado por el usuario.

1001

La función del botón está definida por el usuario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

759

Trabajar con variables
2.10 Representar variables

Botones del visor de curvas f(t)
En la siguiente tabla se muestran los botones disponibles para el visor de curvas f(t):
Símbolo

Nombre

Función

ID

"Tooltip"

Llama la ayuda del control.

1

"Diálogo de configuración"

Abre el cuadro de diálogo en el que se pueden modificar las pro‐ 2
piedades del control.

"Primer registro"

Se muestra el recorrido de una variable en el intervalo de tiempo
establecido, comenzando por el primer valor archivado.

3

Requisitos: Los valores proceden de un fichero de valores de
proceso.
"Registro anterior"

Se muestra el recorrido de una variable en el intervalo de tiempo
anterior, partiendo del intervalo de tiempo representado actual‐
mente.

4

Requisitos: Los valores proceden de un fichero de valores de
proceso.
"Registro siguiente"

Se muestra el recorrido de una variable en el siguiente intervalo 5
de tiempo, partiendo del intervalo de tiempo representado actual‐
mente.
Requisitos: Los valores proceden de un fichero de valores de
proceso.

"Último registro"

Se muestra el recorrido de una variable en el intervalo de tiempo
establecido, terminando por el último valor archivado.

6

Requisitos: Los valores proceden de un fichero de valores de
proceso.
"Regla"

Visualiza una regla que muestra las coordenadas de la intersec‐ 7
ción con una curva en la tabla de valores.
Requisitos: La tabla de valores está configurada con el modo de
representación "ventana de regla".

"Área de zoom"

Amplía la sección del visor de curvas. La sección se define arras‐ 8
trando el ratón.
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.

"Ampliar +/-"

Amplía o reduce las curvas en el visor de curvas.

9

Botón izquierdo del ratón: Ampliar
<Mayús + botón izquierdo del ratón>: Reducir
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.
"Zoom eje de tiempo +/-"

Amplía o reduce el eje de tiempo en el visor de curvas.

10

Botón izquierdo del ratón: Ampliar
<Mayús + botón izquierdo del ratón>: Reducir
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.

760

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Símbolo

Nombre

Función

ID

"Zoom Eje de valores +/-"

Amplía o reduce el eje de valores en el visor de curvas.

11

Botón izquierdo del ratón: Ampliar
<Mayús + botón izquierdo del ratón>: Reducir
Con el botón "Vista original" se retorna a la vista en tamaño ori‐
ginal.
"Mover rango de curva"

Mueve las curvas a lo largo del eje de valores y el eje de tiempo 12

"Mover rango de eje"

Mueve las curvas a lo largo del eje de valores

13

"Vista original"

Retorna de la representación ampliada a la vista de tamaño ori‐
ginal

14

"Seleccionar conexión de da‐
tos"

Abre un diálogo en el que se selecciona el origen de los datos:

15

● Fichero de valores de proceso
● Variable
● Receta (solo visor de curvas f(x))

"Seleccionar curvas"

Abre un diálogo en el que se visualizan u ocultan curvas. Tam‐
bién se puede seleccionar la curva que se representa en primer
plano.

16

"Seleccionar intervalo de tiem‐
po"

Abre un diálogo en el que se puede configurar el intervalo de
tiempo.

17

"Curva anterior"

Muestra la curva anterior en primer plano.

18

"Curva siguiente"

Muestra la siguiente curva en primer plano.

19

"Parar"

Detiene la representación actualizada

20

Los datos se almacenan de manera temporal.
"Iniciar"

Continúa con la representación actualizada.

20

Los datos almacenados temporalmente quedan anotados.
"Imprimir"

Imprime los valores seleccionados.

21

El trabajo de impresión se define en la ficha "General" del diálogo
de configuración
"Área de estadística"

Define el intervalo de tiempo para el cálculo de la estadística.

22

"Análisis estadístico"

Muestra en la ventana de estadísticas la tabla de valores esta‐
dísticos de un "área de estadísticas" definida del visor de curvas
o de tablas.

23

Solo disponible si se ha configurado una tabla de valores
"Conectar copia de seguridad"

Abre el diálogo para enlazar ficheros seleccionados de WinCC
Runtime

24

"Desconectar copia de seguri‐
dad"

Abre el diálogo para desconectar ficheros seleccionados de
WinCC Runtime

25

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

761

Trabajar con variables
2.10 Representar variables
Símbolo

Nombre

Función

"Exportar datos"

Exporta todos los datos o los seleccionados a un archivo *.CSV. 26

ID

Dependiendo de la configuración y de los derechos asignados,
pueden estar disponibles las siguientes opciones:
● Ver los parámetros de exportación e iniciar la exportación
● Seleccionar un nombre de archivo y un directorio
"Eje relativo"

Cambia de la representación de valores absolutos a la represen‐ 27
tación de valores porcentuales del eje de valores. El límite inferior
y el superior de las curvas se hallan en el rango de 0% a 100%.

"Definido por el usuario 1"

Muestra el primer botón creado por el usuario.

1001

La función del botón está definida por el usuario.

Botones del visor de tablas
En la siguiente tabla se muestran los botones disponibles para el visor de tablas:
Símbolo

Nombre

Función

ID

"Tooltip"

Llama la ayuda del control.

1

"Diálogo de configuración"

Abre el cuadro de diálogo en el que se pueden modificar las pro‐ 2
piedades del control.

"Primer registro"

Se muestra el recorrido de una variable en el intervalo de tiempo
establecido, comenzando por el primer valor archivado.

3

Requisitos: Los valores proceden de un fichero de valores de
proceso.
"Registro anterior"

Se muestra el recorrido de una variable en el intervalo de tiempo
anterior, partiendo del intervalo de tiempo representado actual‐
mente.

4

Requisitos: Los valores proceden de un fichero de valores de
proceso.
"Registro siguiente"

Se muestra el recorrido de una variable en el siguiente intervalo 5
de tiempo, partiendo del intervalo de tiempo representado actual‐
mente.
Requisitos: Los valores proceden de un fichero de valores de
proceso.

"Último registro"

Se muestra el recorrido de una variable en el intervalo de tiempo
establecido, terminando por el último valor archivado.

6

Requisitos: Los valores proceden de un fichero de valores de
proceso.
"Edición"

Activa la edición de entradas de la tabla. Para editar un valor,
haga doble clic en la celda correspondiente de la tabla.

7

Requisitos: La representación actualizada está detenida.
"Copiar filas"

Copia el el contenido de las filas seleccionadas en el portapape‐ 8
les.
Requisitos: La representación actualizada está detenida.

762

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Símbolo

Nombre

Función

ID

"Seleccionar conexión de da‐
tos"

Abre un diálogo en el que se selecciona el origen de los datos:

9

● Fichero de valores de proceso
● Variable
● Receta (solo visor de curvas f(x))

"Seleccionar columnas"

Abre un diálogo en el que se visualizan u ocultan columnas y se
modifica su orden.

10

"Seleccionar intervalo de tiem‐
po"

Abre un diálogo en el que se puede configurar el intervalo de
tiempo.

11

"Columna anterior"

Desplaza la columna de valores delante de la columna de valores
anterior.

12

Esta función se refiere a las columnas de valores que están asig‐
nadas a un eje de tiempos.
"Columna siguiente"

Desplaza la columna de valores detrás de la siguiente columna
de valores.

13

Esta función se refiere a las columnas de valores que están asig‐
nadas a un eje de tiempos.
"Parar"

Detiene la representación actualizada

14

Los datos se almacenan de manera temporal.
"Iniciar"

Continúa con la representación actualizada.

14

Los datos almacenados temporalmente quedan anotados.
"Imprimir"

Imprime los valores seleccionados.

15

El trabajo de impresión se define en la ficha "General" del diálogo
de configuración
"Área de estadística"

Define el intervalo de tiempo para el cálculo de la estadística.

16

"Análisis estadístico"

Muestra en la ventana de estadísticas la tabla de valores esta‐
dísticos de un "área de estadísticas" definida del visor de curvas
o de tablas.

17

Solo disponible si se ha configurado una tabla de valores
"Conectar copia de seguridad"

Abre el diálogo para enlazar ficheros seleccionados de WinCC
Runtime

18

"Desconectar copia de seguri‐
dad"

Abre el diálogo para desconectar ficheros seleccionados de
WinCC Runtime

19

Exporta todos los datos o los seleccionados a un archivo *.CSV.

20

"Exportar datos"

Dependiendo de la configuración y de los derechos asignados,
pueden estar disponibles las siguientes opciones:
● Ver los parámetros de exportación e iniciar la exportación
● Seleccionar un nombre de archivo y un directorio
"Definido por el usuario 1"

Muestra el primer botón creado por el usuario.

1001

La función del botón está definida por el usuario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

763

Trabajar con variables
2.10 Representar variables

Botones de la tabla de valores
En la siguiente tabla se muestran los botones disponibles para la tabla de valores:
Símbolo

Nombre

Función

ID

"Tooltip"

Llama la ayuda del control.

1

"Diálogo de configuración"

Abre el cuadro de diálogo en el que se pueden modificar las pro‐ 2
piedades del control.

"Regla"

Visualiza una regla que muestra las coordenadas de la intersec‐ 3
ción con una curva en la tabla de valores.
Requisitos: La tabla de valores está configurada con el modo de
representación "ventana de regla".

"Área de estadística"

Define el intervalo de tiempo para el cálculo de la estadística.

4

"Análisis estadístico"

Muestra en la ventana de estadísticas la tabla de valores esta‐
dísticos de un "área de estadísticas" definida del visor de curvas
o de tablas.

5

Solo disponible si se ha configurado una tabla de valores
"Imprimir"

Imprime los valores seleccionados.

6

El trabajo de impresión se define en la ficha "General" del diálogo
de configuración
"Exportar datos"

Exporta todos los datos o los seleccionados a un archivo *.CSV. 7
Dependiendo de la configuración y de los derechos asignados,
pueden estar disponibles las siguientes opciones:
● Ver los parámetros de exportación e iniciar la exportación
● Seleccionar un nombre de archivo y un directorio

"Definido por el usuario 1"

Muestra el primer botón creado por el usuario.

1001

La función del botón está definida por el usuario.

Manejar el visor de curvas en runtime
Configuración online del visor de curvas f(t)
Introducción
En runtime se pueden realizar configuraciones online y, por tanto, cambiar la representación
del visor de curvas. En la configuración del visor de tablas se establece si las configuraciones
online se van a conservar o se van a perder al cambiar de imagen o al finalizar el runtime.

Resumen
Con los siguientes botones es posible realizar una configuración online en el visor de curvas:
● Botón "Diálogo de configuración"
● Botón "Seleccionar conexión de datos"

764

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
● Botón "Seleccionar curvas"
● Botón "Seleccionar intervalo de tiempo"

Abrir el diálogo de configuración
Para abrir el diálogo de configuración, proceda del siguiente modo:
1. Haga clic en la barra de herramientas sobre

.

Se abre el diálogo de configuración. En él puede modificar, por ejemplo, la representación de
las tablas.
Nota
Imprimir un rango de tiempo fijo
Si desea imprimir un rango de tiempo definido, asegúrese de que las siguientes opciones del
cuadro de diálogo de configuración estén desactivadas:
● "Ejes de tiempo > Actualizar"
● "General > Abrir imagen > Iniciar actualización"

Modificar la conexión de datos
En la siguiente tabla se muestran dos posibilidades de configurar la conexión de datos:
Campo

Descripción

Curva

Seleccione una de las curvas configuradas.

Origen de datos

Establece si variable de archivo o la variable online debe suministrar los datos a la
curva seleccionada.

Nombre de varia‐
ble

Seleccione el nombre de variable de la conexión de datos.

Para modificar la conexión de datos, proceda del siguiente modo:
1. Haga clic en la barra de herramientas sobre
.
Se abre el cuadro de diálogo "Selección de variable/archivo".
2. Seleccione la "columna de valores" para la que va a modificar la conexión de datos.
3. Seleccione el "suministro de datos" y el "nombre de variable".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

765

Trabajar con variables
2.10 Representar variables

Modificar el intervalo de tiempo
En la siguiente tabla se muestran las posibilidades de configurar el intervalo de tiempo:
Campo

Descripción

Eje de tiempo Seleccione el eje de tiempos configurada para la cual desee establecer un intervalo de
tiempo.
Intervalo de
tiempo

Establezca el intervalo de tiempo:
● Si desea indicar un intervalo de tiempo fijo, seleccione el ajuste "Instante inicial a
final". Indique la fechas y hora correspondientes.
● Si desea establecer un intervalo de tiempo, seleccione el ajuste "Intervalo de
tiempo". Establezca la fecha y la hora para el instante de inicio. La longitud del
intervalo de tiempo que visualizar se calcula multiplicando "Factor" por "Unidad de
tiempo".
● Si desea mostrar un determinado número de valores, seleccione el ajuste "Número
de puntos de medida". Establezca la fecha y la hora para el instante de inicio.
Introduzca el número deseado de puntos de medición en el campo de entrada.

Para configurar el intervalo de tiempo, proceda del siguiente modo:
1. Haga clic en la barra de herramientas del visor de curvas sobre
Se abre el diálogo "Tiempo - Selección".
2. Seleccione la "eje de tiempos" para el que desea adaptar el intervalo de tiempo.
Si las curvas de un visor de curvas se representan con un eje de tiempos común, el intervalo
de tiempo especificado es válido para todas las curvas.
3. Configure el intervalo de tiempo.
El formato para introducir la fecha y la hora depende del idioma runtime utilizado.

Consulte también
Representar curva en primer plano (Página 768)
Utilizar las funciones de zoom en las ventanas de curvas (Página 766)
Iniciar y detener la actualización (Página 775)
Crear una estadística de datos runtime (Página 776)
Representar valores archivados (Página 778)
Elementos de la barra de estado (Página 779)
Configurar el visor de curvas (Página 724)

Utilizar las funciones de zoom en las ventanas de curvas
Introducción
Mediante las funciones de teclas podrá aumentar, reducir o devolver a la vista original curvas,
ejes y las secciones deseadas de la ventana de curvas.

766

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Sinopsis
Las siguientes funciones de zoom están disponibles en la ventana de curvas:
● "Ampliar sección"
● "Vista original"
● "Ampliar +/-"
● "Ampliar eje de tiempos +/-"
● "Ampliar eje de valores +/-"
● "Mover rango de curva"

Requisitos
● El visor de curvas está abierto
● Los botones con funciones de zoom están configurados
● Runtime está activado

Ampliar una sección del visor de curvas
Para ampliar una sección del visor de curvas, proceda del siguiente modo:
1. Haga clic en
.
Se detiene la representación actualizada.
2. Marque con la función "Arrastrar y colocar" el área que quiere ampliar.
Si dentro del área hay como mínimo dos valores de medida, se ampliará el área de la curva.
3. Para volver a la vista original del visor de curvas, haga clic en
4. Para reiniciar la actualización, haga clic en

.

.

Para el eje se aplicarán los valores predefinidos.

Ampliar o reducir curvas
Cuando se amplía o reduce una curva, el valor del 50% de las curvas se muestra siempre en
el medio de los ejes de valores.
Para ampliar o reducir una curva, proceda del siguiente modo:
1. Haga clic en
.
Se detiene la representación actualizada.
2. Para ampliar una curva, haga clic en ella con el botón izquierdo del ratón.
3. Para reducir una curva, oprima <Mayús> y, al mismo tiempo, haga clic en ella con el botón
izquierdo del ratón.
4. Para volver a la vista original del visor de curvas, haga clic en
5. Para reiniciar la actualización, haga clic en

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

.

.

767

Trabajar con variables
2.10 Representar variables
Para el eje se aplicarán los valores predefinidos.
Nota
Si al aplicar el zoom se modifican los límites en la ficha "Ejes de valores" modifica el rango de
valores de un eje de valores, el área de Zoom visible se adaptará al nuevo rango de valores.

Ampliar el eje de tiempos o el eje de valores
Cuando se aumenta el eje de tiempos o el eje de valores, el valor del 50% de las curvas se
muestra siempre en el medio de los ejes.
Para aumentar el eje de tiempos o el eje de valores, proceda del siguiente modo:
1. Para aumentar el eje de tiempos, haga clic en
Se detiene la representación actualizada.

.

2. Para aumentar el eje de valores, haga clic en
Se detiene la representación actualizada.

.

3. Para ampliar un eje, haga clic en el visor de curvas con el botón izquierdo del ratón.
4. Para reducir un eje, oprima <Mayús> y, al mismo tiempo, haga clic en el visor de curvas con
el botón izquierdo del ratón.
5. Para volver a la vista original del visor de curvas, haga clic en
6. Para reiniciar la actualización, haga clic en

.

.

Para el eje se aplicarán los valores predefinidos.

Desplazar el área de curvas
Para desplazar el área de curvas, proceda del siguiente modo:
1. Haga clic en
.
Se detiene la representación actualizada.
2. Mantenga pulsado el botón izquierdo del ratón y desplace la cruz del visor de curvas en la
dirección deseada.
El área mostrada en la ventana de curvas se adaptará al eje de tiempos y al eje de valores.
3. Para retornar a la vista original de la ventana de curvas, vuelva a hacer clic en

.

Consulte también
Configuración online del visor de curvas f(t) (Página 764)

Representar curva en primer plano
Introducción
Si se muestran varias curvas en una ventana de curvas, podrá determinar mediante las
funciones de tecla qué curva se mostrará en primer plano.

768

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Requisitos
● Los siguientes botones están configurados:
– "Seleccionar curvas"
– "Curva anterior"
– "Curva siguiente"
● El proyecto está activado

Procedimiento
Para ver una curva en primer plano, proceda del siguiente modo:
1. Haga clic en
.
Se abre el diálogo para mostrar y ocultar curvas. En él también se puede establecer qué
curva está en primer plano.
Nota
La primera curva de una ventana de curvas no se puede ocultar.
2. Para ver la siguiente curva en primer plano, haga clic en
3. Para ver la curva anterior en primer plano, haga clic en

.
.

Consulte también
Configuración online del visor de curvas f(t) (Página 764)

Determinar las coordenadas de un punto
Introducción
El botón "Regla" permite calcular con una regla las coordenadas de un punto de la curva. Para
facilitar el cálculo de las coordenadas, existe la posibilidad de aumentar una sección de las
curvas. La regla se puede desplazar en todo momento cuando ésta se muestra en el visor de
curvas.
Al hacer clic con el ratón en la curva, se muestran algunos de sus parámetros en la descripción
emergente del visor de curvas.

Requisitos
● Hay un visor de curvas configurado
● Hay una tabla de valores configurada y enlazada con el visor de curvas
● En la tabla de valores está activado el modo de representación "ventana de regla"
● Runtime está activado

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

769

Trabajar con variables
2.10 Representar variables

Modo de proceder
Para calcular las coordenadas de un punto, proceda del siguiente modo:
1. Haga clic en el visor de curvas sobre
Se muestra la regla.

.

2. Desplace la regla con el ratón a la posición deseada.
3. Si desea ampliar una sección, haga clic sobre

.

– Desplace la regla con el ratón a la posición deseada.
– Para volver a la vista original, haga clic en

.

Resultado
En la ventana de regla de la tabla de valores se muestran, junto al valor X/sello de tiempo y
valor Y, los datos de las columnas que haya configurado en la tabla de valores.
En la tabla de valores se pueden mostrar, además, los índices "i" y "u" de los valores:
● "i.": El valor mostrado es un valor interpolado.
● "u.": El valor mostrado tiene un estado inseguro:
– Al activar el runtime, se desconoce el valor inicial
– Se utiliza un valor de sustitución
Nota
El estado "inseguro" de un valor también puede mostrarse en la tendencia de la curva.
Para ello, active la opción "Valor con estado inseguro" en la ficha "Curvas" en "Valores
límite".
En la siguiente imagen se muestran las coordenadas de un punto en la ventana de regla de la
tabla de valores:

770

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Procedimiento alternativo
Como alternativa se puede enlazar la tabla de valores con el visor de tablas. Con el modo de
representación "Ventana de regla" se muestran en la tabla de valores los valores de la línea
seleccionada.

Consulte también
Principios básicos de la tabla de valores (Página 750)

Manejar el visor de tablas en runtime
Configuración online del visor de tablas
Introducción
En runtime se pueden realizar configuraciones online y, por tanto, cambiar la representación
del visor de tablas. En la configuración del visor de tablas se establece si las configuraciones
online se van a conservar o se van a perder al cambiar de imagen o al finalizar el runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

771

Trabajar con variables
2.10 Representar variables

Sinopsis
Con los siguientes botones es posible realizar una configuración online en el visor de tablas:
● Botón "Diálogo de configuración"
● Botón "Seleccionar conexión de datos"
● Botón "Seleccionar columnas"
● Botón "Seleccionar intervalo de tiempo"

Abrir el diálogo de configuración
Para abrir el diálogo de configuración, proceda del siguiente modo:
Haga clic en la barra de herramientas sobre

.

Se abre el diálogo de configuración. En él puede modificar, por ejemplo, la representación de
las tablas.

Modificar la conexión de datos
En la siguiente tabla se muestran dos posibilidades de configurar la conexión de datos:
Campo

Descripción

Columna de valo‐
res

Seleccione la columna de valores configurada para la cual desee cambiar la co‐
nexión de datos.

Origen de datos

Establece si los datos para la columna de valores seleccionada proceden de una
variable de archivo o de una variable online.

Nombre de varia‐
ble

Seleccione el nombre de variable de la conexión de datos.

Para modificar la conexión de datos, proceda del siguiente modo:
1. Haga clic en la barra de herramientas sobre
.
Se abre el cuadro de diálogo "Selección de variable/archivo".
2. Seleccione la "columna de valores" para la que va a modificar la conexión de datos.
3. Seleccione el "suministro de datos" y el "nombre de variable".

Mostrar u ocultar columnas
Para mostrar u ocultar columnas, proceda del siguiente modo:
1. Haga clic en la barra de herramientas sobre
.
Se abre el diálogo para mostrar y ocultar las columnas.
2. En caso necesario, modifique el orden de las columnas de valores que estén asignadas a
una columna de tiempos.

772

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables
Las columnas de valores solamente se pueden desplazar en relación a la columna de tiempos
anclada.
Nota
La primera columna del visor de tablas no se puede ocultar.

Modificar el intervalo de tiempo
En la siguiente tabla se muestran las posibilidades de configurar el intervalo de tiempo:
Campo

Descripción

Columna de
tiempos

Seleccione la columna de tiempos configurada para la cual desee establecer un inter‐
valo de tiempo.

Intervalo de
tiempo

Establezca el intervalo de tiempo:
● Si desea indicar un intervalo de tiempo fijo, seleccione el ajuste "Instante inicial a
final". Indique la fechas y hora correspondientes.
● Si desea establecer un intervalo de tiempo, seleccione el ajuste "Intervalo de
tiempo". Establezca la fecha y la hora para el instante de inicio. La longitud del
intervalo de tiempo que visualizar se calcula multiplicando "Factor" por "Unidad de
tiempo".
● Si desea mostrar un determinado número de valores, seleccione el ajuste "Número
de puntos de medida". Establezca la fecha y la hora para el instante de inicio.
Introduzca el número deseado de puntos de medición en el campo de entrada.

Para configurar el intervalo de tiempo, proceda del siguiente modo:
1. Haga clic en la barra de herramientas del visor de tablas sobre
Se abre el diálogo "Tiempo - Selección".
2. Seleccione la "columna de tiempos" para la que desea adaptar el intervalo de tiempo.
Si las columnas de un visor de tablas se representan con un eje de tiempos común, el
intervalo de tiempo especificado es válido para todas las columnas.
3. Configure el intervalo de tiempo.
El formato para introducir la fecha y la hora depende del idioma runtime utilizado.

Consulte también
Editar un campo de tabla en runtime (Página 774)
Desplazar columnas en la tabla (Página 774)
Iniciar y detener la actualización (Página 775)
Crear una estadística de datos runtime (Página 776)
Representar valores archivados (Página 778)
Elementos de la barra de estado (Página 779)
Configurar el visor de tablas (Página 736)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

773

Trabajar con variables
2.10 Representar variables

Editar un campo de tabla en runtime
Introducción
Los valores representados en el visor de tablas se pueden modificar manualmente con el botón
"Editar".

Requisitos
● El visor de tablas está configurado
● El botón "Editar" está configurado
● Runtime está activado

Modo de proceder
Para editar un campo de tabla en runtime, proceda del siguiente modo:
1. Haga clic en el visor de tablas sobre
.
La representación actualizada se detendrá y los datos de proceso seguirán siendo
archivados.
2. Haga clic en

.

3. Haga doble clic en el correspondiente campo de tabla de una columna de valores.
4. Introduzca el nuevo valor.
El valor modificado queda archivado.
5. Para continuar con la representación de los datos runtime en el visor de tablas, haga clic
en
.

Consulte también
Configuración online del visor de tablas (Página 771)

Desplazar columnas en la tabla
Introducción
La columna de tiempos se mostrará siempre en la primera columna de la tabla. Luego
aparecerán las columnas de valores asignadas a esta columna de tiempos. Si hay varias
columnas de tiempos configuradas, luego aparecerá la segunda columna de tiempos con las
columnas de valores asignadas.
En runtime se puede modificar el orden de las columnas de valores que estén asignadas a una
columna de tiempos. Las columnas de valores solamente se pueden desplazar en relación a
la columna de tiempos anclada. El orden de las columnas de tiempos con las columnas de
valores asignadas se establece en la ficha "Ejes de tiempos".

774

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Requisitos
Los siguientes botones están configurados:
● "Seleccionar columnas"
● "Columna anterior"
● "Columna siguiente".

Modo de proceder
Para modificar el orden de las columnas, proceda del siguiente modo:
1. Haga clic en
.
Se abre el diálogo para modificar el orden de las columnas.
2. Para ocultar una columna, desactive la opción delante del nombre de la columna.
3. Para desplazar una columna de valores, seleccione primero la columna en cuestión:
Esta función se refiere a las columnas de valores que están asignadas a una columna de
tiempos.
– Para desplazar la columna de valores detrás de la siguiente columna de valores, haga
clic en
.
– Para desplazar la columna de valores delante de la columna de valores anterior, haga
clic en
.

Consulte también
Configuración online del visor de tablas (Página 771)

Iniciar y detener la actualización
Introducción
La actualización de los datos que contiene el control se reinicia con los botones "Iniciar/
Detener".
Algunos botones detienen automáticamente la actualización de los datos; por ejemplo, "Definir
área de estadísticas".
Si la actualización está detenida se reconoce por la apariencia de los botones de comando:
●

: La actualización está detenida. Para reiniciar la actualización, haga clic en el botón.

●

: La actualización se ha iniciado. Para detener la actualización, haga clic en el botón.

Consulte también
Configuración online del visor de curvas f(t) (Página 764)
Configuración online del visor de tablas (Página 771)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

775

Trabajar con variables
2.10 Representar variables

Crear una estadística de datos runtime
Introducción
Para los datos runtime en el visor de curvas o de tablas se puede generar una evaluación de
los datos del proceso. Los datos evaluados se representan en la tabla de valores.

Requisitos
● Hay un visor de curvas o un visor de tablas configurado
● Hay una tabla de valores configurada y enlazada con el visor de curvas o de tablas
● Runtime está activado

Mostrar datos en una ventana del área de estadísticas
Requisitos: En la tabla de valores está activado el modo de representación "ventana del área
de estadísticas"
Para visualizar datos en la ventana del área de estadísticas de la tabla de valores, proceda del
siguiente modo:
1. Haga clic en el visor de curvas o de tablas sobre
La representación actualizada se detendrá y los datos de proceso seguirán siendo
archivados.
2. Para evaluar datos fuera del intervalo de tiempo mostrado:
– Haga clic en
Se abre el diálogo "Tiempo - Selección".
– Introduzca el intervalo de tiempo deseado.
Se mostrarán los datos para el intervalo de tiempo indicado.
3. Si está utilizando un visor de curvas:
– Haga clic en
En el visor de curvas se muestran dos líneas verticales en los márgenes derecho e
izquierdo.
– Para definir el área de estadísticas, desplace las dos líneas hasta la posición
correspondiente.
4. Si está utilizando un visor de tablas:
– Con ayuda del ratón, seleccione en la tabla las líneas correspondientes al intervalo de
tiempo.
En el caso de haber varias columnas con diferentes columnas de tiempos usted puede
seleccionar diferentes intervalos de tiempo para el ámbito de estadística.
– Haga clic en la barra de herramientas sobre
En la ventana del rango de estadística los datos evaluados se mostrarán en columnas que
usted haya configurado. A continuación se muestra una imagen de la ventana del área de
estadísticas con un ejemplo del visor de curvas:

776

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Para continuar con la representación de los datos runtime, haga clic en

.

Nota
Para hacer una evaluación estadística amplia de los datos del proceso y un archivamiento de
los resultados puede crear scripts.

Consulte también
Principios básicos de la tabla de valores (Página 750)
Configuración online del visor de curvas f(t) (Página 764)
Configuración online del visor de tablas (Página 771)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

777

Trabajar con variables
2.10 Representar variables

Representar valores archivados
Introducción
Con los botones de la barra de herramientas de un visor de curvas o de tablas se pueden
examinar los datos visualizados de un archivo. Si se han configurado combinaciones de teclas,
existe la alternativa de usarlas también para examinar los datos.
Los botones de comando para examinar en ficheros están a su disposición sólo en caso de
suministro de datos con variables de ficheros.
En el visor de curvas o de tablas, los valores archivados de una variable se representan dentro
de un intervalo de tiempo.

Requisitos
● Hay un intervalo de tiempo configurado

Botones de comando para valores archivados
Para examinar valores archivados, proceda del siguiente modo:
1. Para ver el primer registro del rango de tiempo, haga clic en
.
2. Para ver el registro anterior del rango de tiempo, haga clic en
.
3. Para ver el siguiente registro del rango de tiempo, haga clic en
.
4. Para ver el último registro del rango de tiempo, haga clic en
.

Consulte también
Principios del intervalo de tiempo (Página 720)
Configuración online del visor de curvas f(t) (Página 764)
Configuración online del visor de tablas (Página 771)
Visor de avisos (Página 431)

778

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con variables
2.10 Representar variables

Elementos de la barra de estado
Elementos de la barra de estado
La barra de estado del visor de curvas o de tablas puede contener los siguientes elementos:
Icono

Nombre
Estado de conexión

Descripción
1

No hay ninguna conexión de datos errónea
Hay conexiones de datos erróneas
Todas las conexiones de datos son erróneas

"Fila 1"2

Fila seleccionada

Muestra el número de filas seleccionadas.

"Columna 2"2

Columna selecciona‐
da

Muestra el número de columnas seleccionadas.

"23.02.2010"

Fecha

Muestra la fecha del sistema.

"23:59:59"

Hora

Muestra la hora del sistema.

Base de tiempo

Muestra la base temporal que se usa para mostrar las ho‐
ras.

: Haciendo doble clic en el icono "Estado de conexión" se abre la ventana "Estado de las conexiones
de datos". En la ventana se muestra una lista con las siguientes propiedades de cada conexión de
datos:

1

● Nombre
● Estado
● Nombre de variable
: Sólo en el visor de tablas

2

Consulte también
Configuración online del visor de curvas f(t) (Página 764)
Configuración online del visor de tablas (Página 771)
Configurar la barra de herramientas y la barra de estado (Página 752)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

779

Trabajar con variables
2.10 Representar variables

780

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

3

Trabajar con avisos
3.1

Principios básicos

3.1.1

El sistema de avisos de WinCC

Introducción
El sistema de avisos permite visualizar en el panel de operador los estados operativos y las
averías que están pendientes o se producen en una instalación.
Un aviso tiene el contenido siguiente, p. ej.:
N
º

Hora

Fecha

5

12:50:24 24.02.
:590
2007

Texto de aviso

Estado

La presión de la caldera Aparecido
supera el límite superior. Desaparecido

Categoría
Advertencia:
Color rojo

El sistema de avisos de WinCC
El sistema de avisos procesa diferentes procedimientos de aviso. Los procedimientos de aviso
se dividen en avisos definidos por el sistema y avisos definidos por el usuario:
● Los avisos definidos por el usuario sirven para vigilar el proceso de la instalación.
● Los avisos definidos por el sistema sirven para supervisar el panel de operador.
Los eventos de aviso registrados se muestran en el panel de operador. Los accesos selectivos
a los avisos y la información complementaria acerca de los diferentes avisos garantizan una
localización y solución rápida de las averías. Los tiempos de parada se reducen o suprimen por
completo.
La figura siguiente muestra la estructura del sistema de avisos:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

781

Trabajar con avisos
3.1 Principios básicos

$YLVRVGHILQLGRVSRUHOVLVWHPD

$YLVRVGHILQLGRVSRUHOXVXDULR

3DQHOGHRSHUDGRU

1LQJXQD
FRQILJXUDFLµQ
HQ:LQ&&

3DQHOGHRSHUDGRU

$YLVRDQDOµJLFR

$YLVRVGHVLVWHPD

$YLVRGHELW

Consulte también
Principios básicos de las categorías (Página 795)

3.1.2

El sistema de avisos de WinCC

Introducción
El sistema de avisos permite visualizar y registrar en el panel de operador los estados
operativos y las averías que están pendientes o se producen en una instalación.
Un aviso tiene el contenido siguiente, p. ej.:

782

N
º

Hora

Fecha

5

12:50:24 24.02.
:590
2007

Texto de aviso

Estado

La presión de la caldera Aparecido
supera el límite superior. Desaparecido

Categoría
Advertencia:
Color rojo

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

El sistema de avisos de WinCC
El sistema de avisos procesa diferentes procedimientos de aviso del controlador y del panel de
operador. Los procedimientos de aviso se dividen en avisos definidos por el sistema y avisos
definidos por el usuario:
● Los avisos definidos por el usuario sirven para vigilar la instalación.
● Los avisos definidos por el sistema sirven para supervisar el panel de operador o el
controlador.
Los eventos de aviso registrados se muestran en el panel de operador. Con el sistema de
avisos se archivan los avisos del proceso en marcha. Los accesos selectivos a los avisos y la
información complementaria acerca de los diferentes avisos garantizan una localización y
solución rápida de las averías. Los tiempos de parada se reducen o suprimen por completo.
Los tipos de avisos de controlador definidos por el sistema dependen del controlador utilizado.
La siguiente figura muestra la estructura del sistema de avisos en la comunicación con los
controladores SIMATIC S7-300/400:

$YLVRVGHILQLGRVSRUHOVLVWHPD6
3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHILQLGRVSRUHOXVXDULR
3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHGLDJQµVWLFR6 $YLVRVGHGLDJQµVWLFR
GHOVLVWHPD
6,0$7,&66,027,21

$YLVRVGHVLVWHPD

1LQJXQD
FRQILJXUDFLµQ
HQ:LQ&&

$YLVRVGH
FRQWURODGRU

$YLVRDQDOµJLFR
$YLVRVGHFRQWURODGRU
$YLVRGHELW

La siguiente figura muestra la estructura del sistema de avisos en la comunicación con los
controladores SIMATIC S7-1500:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

783

Trabajar con avisos
3.1 Principios básicos

$YLVRVGHILQLGRVSRUHOVLVWHPD6
3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHILQLGRVSRUHOXVXDULR
3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHGLDJQµVWLFRGHOVLVWHPD

$YLVRVGHVLVWHPD

3.1.3

1LQJXQD
FRQILJXUDFLµQ
HQ:LQ&&

$YLVRDQDOµJLFR

$YLVRVGH
FRQWURODGRU

$YLVRVGHFRQWURODGRU
$YLVRGHELW

El sistema de avisos de WinCC

Introducción
El sistema de avisos permite visualizar y registrar en el panel de operador los estados
operativos y las averías que están pendientes o se producen en una instalación.
Un aviso tiene el contenido siguiente, p. ej.:

784

N
º

Hora

Fecha

5

12:50:24 24.02.
:590
2007

Texto de aviso

Estado

La presión de la caldera Aparecido
supera el límite superior. Desaparecido

Categoría
Advertencia:
Color rojo

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

El sistema de avisos de WinCC
El sistema de avisos procesa diferentes procedimientos de aviso del controlador y del panel de
operador. Los procedimientos de aviso se dividen en avisos definidos por el sistema y avisos
definidos por el usuario:
● Los avisos definidos por el usuario sirven para vigilar la instalación.
● Los avisos definidos por el sistema sirven para supervisar el panel de operador o el
controlador.
Los eventos de aviso registrados se muestran en el panel de operador. Con el sistema de
avisos se archivan los avisos del proceso en marcha. Los accesos selectivos a los avisos y la
información complementaria acerca de los diferentes avisos garantizan una localización y
solución rápida de las averías. Los tiempos de parada se reducen o suprimen por completo.
Los tipos de avisos del controlador definidos por el sistema dependen del controlador utilizado.
La figura siguiente muestra la estructura del sistema de avisos en la comunicación con los
controladores SIMATIC S7-300/400:

$YLVRVGHILQLGRVSRUHOVLVWHPD6
3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHILQLGRVSRUHOXVXDULR
3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHGLDJQµVWLFR6 $YLVRVGHGLDJQµVWLFRGHO
6,0$7,&66,027,21
VLVWHPD

$YLVRVGH
VLVWHPD

1LQJXQD
&RQILJXUDFLµQ
HQ:LQ&&

$YLVRVDQDOµJLFRV

$YLVRVGHO
FRQWURODGRU

$YLVRVGHELW

$YLVRVGHO
VLVWHPD

$YLVRVGHXVXDULR

La figura siguiente muestra la estructura del sistema de avisos en la comunicación con los
controladores SIMATIC S7-1500:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

785

Trabajar con avisos
3.1 Principios básicos

$YLVRVGHILQLGRVSRUHOVLVWHPD6
3DQHOGHRSHUDGRU

$YLVRVGHILQLGRVSRUHOXVXDULR

&RQWURODGRU

3DQHOGHRSHUDGRU

&RQWURODGRU

$YLVRVGHGLDJQµVWLFRGHO
VLVWHPD

$YLVRVGH
VLVWHPD

1LQJXQD
&RQILJXUDFLµQ
HQ:LQ&&

$YLVRVDQDOµJLFRV

$YLVRVGHO
VLVWHPD

$YLVRVGHELW

$YLVRVGHO
VLVWHPD

$YLVRVGHXVXDULR

3.1.4

Procedimientos de aviso

3.1.4.1

Resumen de los procedimientos de aviso

Introducción
Los procedimientos de aviso sirven para supervisar la instalación con fines distintos. Los
avisos de los diferentes procedimientos se configuran y lanzan de modos distintos.
Los avisos se configuran en función de los diferentes procedimientos en la ficha
correspondiente del editor "Avisos HMI".

Procedimientos de aviso en WinCC
WinCC asiste los siguientes procedimientos de aviso:

786

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Avisos definidos por el usuario
● Avisos analógicos
– Los avisos analógicos sirven para supervisar los valores límite.
● Avisos de bit
– Los avisos de bit sirven para supervisar los estados.

Avisos definidos por el sistema
● Avisos de sistema
– Los avisos de sistema pertenecen al panel de operador correspondiente y se importan
al proyecto.
– Los avisos de sistema sirven para supervisar el panel de operador.

Consulte también
Avisos analógicos (Página 790)

3.1.4.2

Resumen de los procedimientos de aviso

Introducción
Los procedimientos de aviso sirven para supervisar la instalación con fines distintos. Los
avisos de los diferentes procedimientos se configuran y lanzan de modos distintos.
Los avisos se configuran en función de los diferentes procedimientos en la ficha
correspondiente del editor "Avisos HMI".

Procedimientos de aviso en WinCC
WinCC asiste los siguientes procedimientos de aviso:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

787

Trabajar con avisos
3.1 Principios básicos

Avisos definidos por el usuario
● Avisos analógicos
– Los avisos analógicos sirven para supervisar los valores límite.
● Avisos de bit
– Los avisos de bit sirven para supervisar los estados.
● Avisos de controlador
– Los avisos de controlador se configuran en STEP 7.
– Los avisos de controlador se procesan posteriormente en WinCC.
Nota
Dependencia del equipo
Los avisos de controlador no están disponibles para todos los paneles de operador.

Avisos definidos por el sistema
● Avisos de controlador definidos por el sistema
– Los avisos de controlador definidos por el sistema son avisos de diagnóstico (SIMATIC
S7) y errores de sistema (SFM).
– Los avisos de controlador definidos por el sistema sirven para supervisar el controlador.
Nota
Dependencia del panel de operador
Los avisos de controlador definidos por el sistema no están disponibles para todos los
paneles de operador.
● Avisos de sistema
– Los avisos de sistema pertenecen al panel de operador correspondiente y se importan
al proyecto.
– Los avisos de sistema sirven para supervisar el panel de operador.

Consulte también
Avisos analógicos (Página 790)
Avisos de controlador (Página 791)
Avisos de controlador definidos por el sistema (Página 793)

788

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

3.1.4.3

Resumen de los procedimientos de aviso

Introducción
Los procedimientos de aviso sirven para supervisar la instalación con fines distintos. Los
avisos de los diferentes procedimientos se configuran y lanzan de modos distintos.
Los avisos se configuran en función de los diferentes procedimientos en la ficha
correspondiente del editor "Avisos HMI".

Procedimientos de aviso en WinCC
WinCC soporta los siguientes procedimientos de aviso:

Avisos definidos por el usuario
● Avisos analógicos
– Los avisos analógicos sirven para supervisar los valores límite.
● Avisos de bit
– Los avisos de bit sirven para supervisar los estados.
● Avisos de usuario
– Los avisos de usuario sirven para supervisar la operación.
– Los avisos de usuario se lanzan mediante los números de aviso y se utilizan en scripts
en runtime cuando es necesario.
● Avisos de controlador
– Los avisos de controlador se configuran en STEP 7.
– Los avisos de controlador se procesan posteriormente en WinCC.
Nota
Dependencia del panel de operador
Los avisos de controlador y de usuario no están disponibles para todos los paneles de
operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

789

Trabajar con avisos
3.1 Principios básicos

Avisos definidos por el sistema
● Avisos de controlador definidos por el sistema
– Los avisos de controlador definidos por el sistema sirven para supervisar el controlador.
– Entre los avisos de controlador definidos por el sistema se incluyen además los avisos
de diagnóstico (SIMATIC S7) y los errores de sistema (SFM).
Nota
Dependencia del panel de operador
Los avisos de controlador definidos por el sistema no están disponibles para todos los
paneles de operador.
● Avisos de sistema
– Los avisos de sistema pertenecen al panel de operador correspondiente y se importan
al proyecto.
– Los avisos de sistema sirven para supervisar el panel de operador.

3.1.4.4

Procedimientos de aviso definidos por el usuario

Avisos analógicos
Descripción
Los avisos analógicos muestran las violaciones de valores límite durante el proceso en curso.

Ejemplo
La velocidad de la mezcladora en una planta de producción de zumos no puede ser ni
demasiado alta ni demasiado baja. Para vigilar la velocidad de la mezcladora se configuran los
avisos analógicos correspondientes. Si se rebasa el límite de velocidad de la mezcladora por
exceso o por defecto, el panel de operador mostrará un aviso con el texto siguiente, p. ej.:
"Velocidad de la mezcladora demasiado baja."

Consulte también
Configurar avisos analógicos (Página 825)

Avisos de bit
Descripción
Los avisos de bit muestran un estado durante el proceso en curso.

790

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Ejemplo
Un planta de producción de zumos tiene varios depósitos con los ingredientes. Para obtener
la proporción de mezcla correcta de agua, concentrado de zumo, azúcar y aroma, las válvulas
de entrada deben abrirse y cerrarse en el momento adecuado. Este proceso debe vigilarse.
Para ello, se configura un aviso de bit para cada estado de las válvulas. Cuando se abre o se
cierra una válvula de uno de los cuatro depósitos se muestra un aviso, p. ej. "Válvula de agua
cerrada".
De este modo el usuario vigila si la planta produce correctamente.

Consulte también
Configurar avisos de bit (Página 828)

Avisos de controlador
Ejemplo de un aviso
Selector de modo de la CPU en STOP

Descripción
El ingeniero de configuración del controlador crea los avisos de controlador definidos por el
usuario en STEP 7. El aviso del controlador reproduce los valores de estado del controlador,
p. ej., sello de tiempo y valores de proceso. Si hay avisos de controlador configurados en STEP
7, éstos se incorporan al funcionamiento integrado de WinCC una vez se establece una
conexión con el controlador.
Nota
Actualización automática de avisos de controlador nuevos o modificados en el panel de
operador
Si los avisos de controlador están configurados en STEP 7 y existe una conexión con un
controlador S7-1500 con la versión de firmware 2.0 (o superior), los avisos de controlador se
envían a los paneles de operador de la versión V14. Si se efectúan modificaciones en los
avisos de controlador, la configuración del panel de operador no tiene que volver a transferirse.
En STEP 7, el aviso de controlador está asignado a una categoría. Dicha categoría se importa
como categoría para todo el proyecto junto con el aviso de controlador.

Tipos de avisos de controlador
SIMATIC S7 soporta varios tipos de avisos de controlador. En función del runtime empleado,
en WinCC se asisten varios tipos de avisos de controlador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

791

Trabajar con avisos
3.1 Principios básicos

Avisos de controlador para varios paneles de operador
Si un controlador está conectado a varios paneles de operador, el ingeniero de configuración
asignará discriminadores a los avisos de controlador en STEP 7. Los discriminadores regulan
la asignación al panel de operador. Active para el panel de operador en cuestión las categorías
que deban visualizarse en dicho panel. En este caso, el panel de operador mostrará sólo los
avisos de controlador de este discriminador. Son posibles 17 discriminadores como máximo.

Consulte también
Enviar aviso completo del controlador al panel de operador y actualizar automáticamente
(Página 985)
Editar avisos de controlador (Página 835)

Avisos de usuario
Descripción
Los avisos de usuario muestran las acciones de operador en runtime. En caso necesario,
configure los avisos de usuario también dentro de los scripts en runtime para aplicaciones
definidas por el usuario.

Ejemplo
En el panel de operador de una instalación se visualiza un aviso de la categoría "Errors". El
operador repara el error en la instalación y acusa entonces el aviso en el visor de avisos del
panel de operador. Para supervisar quién reparó el error y cuándo lo hizo, configure un aviso
de usuario asociado al correspondiente botón del visor de avisos. El aviso incluye p. ej. esta
información:
● Tipo y contenido del aviso acusado
● Momento del acuse
● Operador
● Fecha

3.1.4.5

Avisos definidos por el sistema

Avisos de sistema
Ejemplos de avisos
● "Se ha establecido correctamente la conexión online con el controlador."

792

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Descripción
Un aviso de sistema muestra el estado del sistema y los errores de comunicación entre el panel
de operador y el sistema.
En "Configuración de runtime > Avisos" se determina el tiempo durante el que se visualizará
un aviso de sistema en el panel de operador.

Soporte
En la referencia encontrará una lista de los posibles avisos de sistema con la causa y su
posible solución. Si acude al soporte online debido a un aviso de sistema del panel de
operador, necesitará el número de aviso y las variables existentes del aviso de sistema.

Avisos de sistema
Ejemplos de avisos
● "La memoria intermedia para la impresión de líneas en el modo de texto está llena."
● "No se ha instalado ninguna impresora o no se ha configurado ninguna impresora
estándar."

Descripción
Un aviso de sistema muestra el estado del sistema y los errores de comunicación entre el panel
de operador y el sistema.
Los avisos de sistema dependen del panel de operador.
En caso necesario, los avisos de sistema se leen en el editor "Avisos HMI" desde un archivo
en formato *.xml.

Soporte
En la referencia encontrará una lista de los posibles avisos de sistema con la causa y su
posible solución. Si acude al soporte online debido a un aviso de sistema del panel de
operador, necesitará el número de aviso y las variables existentes del aviso de sistema.

Consulte también
Avisos de sistema (Página 1040)
Editar avisos de sistema (Página 834)

Avisos de controlador definidos por el sistema
Ejemplo de un aviso
Válvula abierta debido a sobrepresión

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

793

Trabajar con avisos
3.1 Principios básicos

Descripción
Los avisos de controlador definidos por el sistema se instalan con STEP 7 y sólo están
disponibles si WinCC funciona en el entorno de STEP 7.
WinCC procesa avisos de controlador definidos por el sistema del tipo "Aviso de diagnóstico
SIMATIC S7".
Los avisos de diagnóstico S7 muestran los estados y eventos de los controladores SIMATIC
S7. Los avisos de diagnóstico S7 solo admiten acceso de lectura:
● El sistema asigna los avisos a la categoría "Diagnóstico".
● Las características existentes del aviso se adoptan sin cambios, p. ej., el número del grupo
de avisos.
● Los avisos de diagnóstico S7 no se acusan ni tampoco se generan informes de los mismos.
Sólo tienen efecto de señalización.

Consulte también
Activar avisos de controlador definidos por el sistema (Página 837)

3.1.5

Estados de aviso

Introducción
Un aviso adopta diferentes estados en runtime. En función de los estados de aviso, el usuario
analiza y registra el desarrollo del proceso.
Nota
Dependencia del equipo
El registro y la archivación no están disponibles para todos los paneles de operador.

Descripción
Cada aviso tiene un estado determinado. Los estados de aviso se componen de los eventos
siguientes:
● Aparecido
La condición para lanzar un aviso se cumple. El aviso se visualiza, p. ej. "Presión de caldera
excesiva".
● Desaparecido
La condición para lanzar un aviso ya no se cumple. El aviso ya no se visualiza porque la
caldera se ha despresurizado.
● Acusar
El usuario acusa el aviso.

794

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Avisos de acuse no obligado
La tabla siguiente muestra los estados de los avisos de acuse no obligado:
Estado

Descripción

Aparecido

La condición de un aviso se cumple.

Desaparecido

La condición de un aviso ya no se cumple.

Avisos de acuse obligado
La tabla siguiente muestra los estados de los avisos de acuse obligado:
Estado

Descripción

Aparecido

La condición de un aviso se cumple.

Desaparecido,
no acusado

La condición de un aviso ya no se cumple. El usuario no ha
acusado el aviso.

Desaparecido,
después acusado

La condición de un aviso ya no se cumple. El usuario ha acu‐
sado el aviso después de este momento.

Aparecido,
acusado

La condición de un aviso se cumple. El usuario ha acusado el
aviso.

Desaparecido,
previamente acusado

La condición de un aviso ya no se cumple. El usuario ha acu‐
sado el aviso cuando la condición todavía se cumplía.

En caso necesario, el panel de operador visualiza cada entrada en vigor de estos estados, los
archiva y genera un informe impreso.
Nota
El texto visualizado de los estados de un aviso varía en función del idioma y la configuración.

3.1.6

Categorías

3.1.6.1

Principios básicos de las categorías

Introducción
En una instalación se producen muchos avisos de distinta importancia. Para que el usuario vea
claramente qué avisos son los más importantes, clasifique los avisos del proyecto por
categorías.

Descripción
La categoría define la representación de un aviso. La categoría determina si el usuario debe
acusar los avisos de esta categoría y cómo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

795

Trabajar con avisos
3.1 Principios básicos
En WinCC se crea una categoría nueva como categoría de acuse obligatorio.
Nota
La selección de los tipos de representación para las categorías depende de las posibilidades
del panel de operador.

Ejemplos de aplicación de las categorías
● El aviso "Velocidad del ventilador 1 en el rango de tolerancia superior" pertenece a la
categoría "Warnings". El aviso de representa con fondo blanco. El aviso no es de acuse
obligatorio.
● El aviso "La velocidad del ventilador 2 ha rebasado por exceso el rango de advertencia
superior" está asignado a la categoría "Errors". Se representa sobre fondo rojo y parpadea
rápidamente en runtime. El aviso es visualizado hasta que el usuario lo acusa.

Utilización de categorías
Para definir el autómata finito y la visualización de los avisos en el proyecto, utilice las
siguientes categorías:
● Categorías predefinidas
Las categorías predefinidas no pueden borrarse y sólo pueden editarse con limitaciones.
Para cada panel de operador se han creado categorías predefinidas en "Avisos HMI >
Categorías".
● Categorías personalizadas
Las categorías se definen de nuevo en "Avisos HMI > Categorías", donde también se
configura la representación deseada de avisos y un concepto de acuse para los avisos de
esta categoría. El número posible de categorías definidas por el usuario depende del
runtime utilizado en el proyecto.
Nota
Categorías de avisos de STEP 7
Si un panel de operador está conectado al controlador, en WinCC se muestran también las
categorías de avisos de STEP 7.
Los Basic Panels no soportan la visualización de avisos de sistema del PLC (configurados en
STEP 7). Encontrará más información sobre los avisos del controlador y el sistema de avisos
en El sistema de avisos de WinCC (Página 781).

Consulte también
Crear categorías (Página 814)
Crear categorías (Página 815)
Categorías predefinidas (Página 798)

796

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos
Utilizar categorías para todo el proyecto (Página 819)
El sistema de avisos de WinCC (Página 781)

3.1.6.2

Principios básicos de las categorías

Introducción
En una instalación se producen muchos avisos de distinta importancia. Para que el usuario vea
claramente qué avisos son los más importantes, clasifique los avisos del proyecto por
categorías.

Descripción
La categoría define la representación de un aviso. La categoría determina si el usuario debe
acusar los avisos de esta categoría y cómo.
En WinCC se crea una categoría nueva como categoría de acuse obligatorio.
Nota
La selección de los tipos de representación de las categorías depende de las prestaciones del
panel de operador.

Ejemplos de aplicación de las categorías
● El aviso "Velocidad del ventilador 1 en el rango de tolerancia superior" pertenece a la
categoría "Warnings" y se representa con fondo blanco. El aviso no es de acuse obligatorio.
● El aviso "La velocidad del ventilador 2 ha rebasado por exceso el rango de advertencia
superior" está asignado a la categoría "Errors". Se representa sobre fondo rojo y parpadea
rápidamente en runtime. El aviso es visualizado hasta que el usuario lo acusa.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

797

Trabajar con avisos
3.1 Principios básicos

Utilización de categorías
Para definir el autómata finito y la visualización de los avisos en el proyecto, utilice las
siguientes categorías:
● Categorías predefinidas
Las categorías predefinidas no pueden borrarse y sólo pueden editarse con limitaciones.
Para cada panel de operador se han creado categorías predefinidas en "Avisos HMI >
Categorías".
● Categorías personalizadas
Las categorías se definen de nuevo en "Avisos HMI > Categorías", donde también se
configura la representación deseada de avisos y un concepto de acuse para los avisos de
esta categoría. El número posible de categorías personalizadas depende del runtime
utilizado en el proyecto.
● Categorías para todo el proyecto
Las categorías para todo el proyecto se muestran en "Datos comunes > Categorías" del
árbol del proyecto y se pueden utilizar para los avisos de un panel de operador. Las
categorías para todo el proyecto provienen de la configuración de avisos de STEP 7. En
caso necesario, cree más categorías para todo el proyecto en WinCC.

Consulte también
Crear categorías (Página 814)
Crear categorías (Página 815)
Categorías predefinidas (Página 798)
Utilizar categorías para todo el proyecto (Página 819)

3.1.6.3

Categorías predefinidas

Categorías predefinidas
Las categorías siguientes ya están creadas en WinCC para cada panel de operador:

Categorías de avisos personalizados
● "Warnings"
La categoría "Warnings" está prevista para mostrar estados irregulares y desarrollos del
proceso. El usuario no acusa los avisos de esta categoría.
● "Errors"
La categoría "Errors" está prevista para mostrar estados críticos o peligrosos o bien la
violación de valores límite del proceso. El usuario debe acusar los avisos de esta categoría.

798

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Categorías de avisos definidos por el sistema
● "System"
La categoría "Sistema" contiene avisos que muestran los estados del panel de operador y
de los controladores. Los avisos de la categoría "System" son avisos de sistema.
● "Diagnosis Events"
La categoría "Diagnosis Events" contiene avisos que muestran estados y eventos de los
controladores SIMATIC S7. El usuario no acusa los avisos de esta categoría.
Nota
Dependencia del panel
La categoría "Diagnosis Events" no está disponible para todos los paneles de operador.
● "Safety Warnings"
La categoría "Safety Warnings" contiene avisos relacionados con el modo de seguridad
positiva. El usuario no acusa los avisos de esta categoría. Los avisos de la categoría
"Safety Warnings" son avisos de sistema.
Nota
Dependencia del panel
La categoría "Safety Warnings" no está disponible para todos los paneles de operador.

Prioridad de las categorías de aviso en los Comfort Panels y en RT Advanced
L atabla siguiente indica la prioridad de las categorías de aviso.
Categoría

Prioridad

Errors

12

Warnings

4

System

16

Diagnosis Events

12

Aviso con acuse simple

12

Aviso sin acuse

4

Si el visor de avisos se filtra por prioridades, el aviso de prioridad "0" aparece en primer lugar.
Nota
Si configura la prioridad para las categorías de avisos personalizadas, entonces la prioridad
solo se aplica para los avisos del controlador. La prioridad para los otros avisos la sobrescribe
el sistema de ingeniería.

Consulte también
Principios básicos de las categorías (Página 797)
Crear categorías (Página 815)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

799

Trabajar con avisos
3.1 Principios básicos
Crear categorías (Página 814)
Utilizar categorías para todo el proyecto (Página 819)

3.1.7

Acuse

3.1.7.1

Acuse de avisos

Introducción
Para asegurarse de que el usuario de una instalación ha leído un aviso, éste debe configurarse
de modo que se visualice hasta que el usuario lo haya acusado. Los avisos que muestran
estados críticos o peligrosos en el proceso, deben ser de acuse obligatorio.

Descripción
El acuse de un aviso es un evento que debe archivarse y del que debe generarse un informe,
dado el caso. Con el acuse de un aviso cambia el estado del aviso de "Aparecido" a "Acusado".
Con el acuse de un aviso el usuario confirma el procesamiento del estado que ha lanzado el
aviso.
Nota
Dependencia del panel de operador
El registro y la archivación no están disponibles para todos los paneles de operador.

Lanzar el acuse de un aviso
El operador dispara el acuse de un aviso en runtime de modos diversos:
● Acuse por parte del usuario autorizado en el panel de operador
● Acuse automático por parte del sistema sin acción del operador, p. ej. con
– Variables
– Controlador
– Funciones de sistema en listas de funciones o scripts
Nota
Dependencia del panel de operador
Los scripts no están disponibles para todos los paneles de operador.

800

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Acusar conjuntamente avisos relacionados
Para tener una visión más clara del sistema de avisos en runtime y para que sea más fácil de
manejar, configure un grupo de avisos en caso necesario. El usuario acusa con una acción
todos los avisos pertenecientes al grupo de avisos.

Acuse por el controlador
Dado el caso, el controlador acusa automáticamente los avisos de bit. El acuse se lanza desde
un bit de la "Variable de acuse del controlador". El bit y la variable se definen durante la
configuración.

Acuse de un aviso en el panel de operador
El usuario acusa un aviso en runtime en función de la configuración, del siguiente modo:
● Con la tecla de acuse <ACK> en el panel de operador
● Con el botón del visor de avisos
● Con las teclas de función configuradas o los botones de las imágenes
Nota
Tecla de acuse <ACK> en el panel de operador
Para que los avisos críticos sean procesados únicamente por usuarios autorizados, proteja
la tecla "ACK" de los paneles de operador, así como los objetos de manejo e indicadores
de los avisos. Para ello, utilice una autorización de uso apropiada.
Nota
Dependencia del panel de operador
La tecla de acuse <ACK> no está disponible en todos los paneles de operador.

Comportamiento al acusar avisos de un grupo de avisos
● Acuse del aviso por parte del operador
El aviso de un grupo de avisos se puede acusar con la tecla de acuse <ACK> o con una
tecla de función. Se acusan todos los avisos de un grupo de avisos.
● Acuse del aviso por parte del controlador
El aviso de un grupo de avisos se acusa activando un bit en la variable.
Solo se acusa el aviso pendiente de acuse.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

801

Trabajar con avisos
3.1 Principios básicos

3.1.7.2

Concepto de acuse

Sinopsis
El autómata finito se define para una categoría. Los avisos asignados a esta categoría se
acusan de acuerdo con el autómata finito que se haya definido. En WinCC existen los
siguientes autómatas finitos:
● Aviso sin acuse
Este aviso aparece y desaparece sin que se requiera ningún acuse. El sistema no muestra
ninguna reacción.
● Aviso de acuse simple
Este aviso requiere un acuse en cuanto se produce el evento que lanza el aviso. El aviso
está pendiente hasta que se acusa.

3.1.7.3

Concepto de acuse

Sinopsis
El autómata finito se define para una categoría. Los avisos asignados a esta categoría se
acusan de acuerdo con el autómata finito que se haya definido. En WinCC existen los
siguientes autómatas finitos:
● Aviso sin acuse
Este aviso aparece y desaparece sin que se requiera ningún acuse. El sistema no muestra
ninguna reacción.
● Aviso de acuse simple
Este aviso requiere un acuse en cuanto se produce el evento que lanza el aviso. El aviso
está pendiente hasta que se acusa.
● Aviso con acuse doble
El aviso requiere un acuse en cuanto se produce el evento que lanza el aviso y un segundo
acuse cuando el evento que lanza el aviso ya no está pendiente. El aviso está pendiente
hasta que se acusa.
● Aviso sin estado "Desaparecido" con acuse
Este aviso se muestra en el visor hasta que se acusa. El aviso desaparece entonces del
visor. El aviso solamente se archiva.
● Aviso sin estado "Desaparecido" sin acuse
Este aviso aparece y desaparece cuando el evento que lanza el aviso ya no está presente.
El aviso no se introduce en el visor. El aviso solamente se archiva.
● Aviso de primer valor con parpadeo y acuse simple
El aviso de primer valor es una forma de procesamiento de avisos en la que, de un número
determinado de avisos, se resalta uno cuyo estado se ha modificado primero desde el
último acuse. Sólo el primer aviso de esta categoría parpadea durante la visualización en
la ventana de avisos.

802

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos
● Aviso de valor nuevo con parpadeo y acuse simple
El aviso de valor nuevo es una forma de procesamiento de avisos en la que, de un número
determinado de avisos, se resaltan aquellos cuyos estados se han modificado desde el
último acuse.
● Aviso de valor nuevo con parpadeo y acuse doble
El aviso parpadea si se ha modificado el valor que se está supervisando. Este aviso se
acusa cuando aparece y cuando desaparece.

Resumen de autómatas finitos para varios avisos
● Acuse de grupo/Acuse individual de avisos en el visor
El visor de avisos incorpora el botón "Acuse de grupo"
. Este botón lanza el acuse de
todos los avisos pendientes en el visor, visibles y de acuse obligado. Si está activada la
opción "Acuse individual" para un aviso, el usuario no puede acusar en grupo, sino que
debe hacerlo individualmente mediante el botón
.
● Acuse de avisos en grupos
Si un grupo de avisos tiene una variable de acuse, el usuario acusa conjuntamente en
runtime todos los avisos de este grupo mediante esta variable. Para manejar esta variable,
configure los botones o las teclas de función correspondientes.

Autómata finito del avisador central
Existen estas posibilidades para configurar el acuse del avisador central:
● El usuario acusa el avisador central con el aviso que lo ha disparado.
● El usuario acusa el avisador central mediante un botón propio en el visor de avisos.
● A través de una variable definida se controla el avisador central.

Acuse de emergencia
En casos excepcionales, existe la posibilidad de acusar un aviso con su número. Para ello se
envía el bit de acuse también al PLC si el aviso no está actualmente pendiente.
Por ello, la función sólo debe usarse en el caso de emergencia más extraordinario.

3.1.8

Grupos de avisos

Introducción
En una instalación se producen muchos avisos de distintas zonas y procesos. Los grupos de
avisos agrupan avisos relacionados.

Grupos de avisos
Con ayuda de los grupos de avisos se observan partes de la instalación y se acusan
conjuntamente los avisos correspondientes cuando se producen.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

803

Trabajar con avisos
3.1 Principios básicos
Dado el caso, los grupos de aviso contienen avisos de distintas categorías. Asigne sólo avisos
de acuse obligado a un grupo de avisos.

Utilizar grupos de avisos
La formación de grupos de avisos es aconsejable para los avisos siguientes, p. ej.:
● Avisos que se originan con el mismo fallo.
● Avisos similares
● Avisos de una unidad de máquina, p. ej. "Fallo accionamiento XY"
● Avisos de una parte relacionada del proceso, p. ej. "Fallo suministro de agua de
enfriamiento"

Representación en runtime
En runtime, la columna "Grupo de avisos" muestra el número del grupo al que pertenece el
aviso.

Consulte también
Configurar grupos de avisos (Página 822)

3.1.9

Grupos de avisos

3.1.9.1

Principios básicos de los grupos de avisos

Introducción
En una instalación se producen muchos avisos de distintas áreas y procesos. Utilice los grupos
de avisos para representar los estados de las áreas de la instalación en el panel de operador
y para manejar fácilmente el sistema de avisos de su proyecto.

Descripción
Un grupo de avisos es una agrupación de diferentes avisos. Un grupo de avisos dispone de
varias variables que corresponden cada una a una propiedad de los avisos contenidos. Las
variables y sus bits se establecen para un grupo. Para mostrar un grupo de avisos en el panel
de operador, configure su visualización individualmente con la variable de estado del grupo.

804

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Utilización
Los grupos de avisos se utilizan p. ej. para estos fines:
● Para agrupar avisos con la misma avería como causa,
p. ej., "Fallo de alimentación"
● Para agrupar avisos similares
p. ej., "Actuación del fusible"
● Para clasificar y observar avisos de una unidad de máquina
p. ej., "Fallo de accionamiento XY"
● Avisos de una parte relacionada del proceso
p. ej., "Fallo en el suministro de agua de refrigeración"
● Para procesar conjuntamente todos los avisos de un área de la instalación, p. ej.:
– Acuse de avisos
– Bloqueo de avisos
– Suprimir visualización de avisos
● Para visualizar el estado de las áreas de la instalación
● Para vincular procesos de la instalación con el acuse de avisos

Grupos de avisos en WinCC
En WinCC se trabaja con dos tipos de grupos de avisos:
● Grupos de avisos definidos por el usuario
Los grupos de avisos definidos por el usuario se crean en caso necesario. Éstos contienen
avisos de acuse obligado y, en caso necesario, grupos de avisos subordinados. Si es
necesario, los grupos de avisos definidos por el usuario se estructuran jerárquicamente con
hasta cinco subgrupos.
Los grupos de avisos definidos por el usuario se crean en WinCC en "Avisos HMI > Grupos
de avisos > Grupos de avisos".
● Grupos de avisos de categorías/grupos de categorías
Para cada categoría predefinida ya se ha creado un grupo de avisos. Si se crea una
categoría nueva, se genera un grupo de avisos con el mismo nombre. Todos los avisos de
esta categoría están incluidos también en el grupo de avisos de la categoría. Los cambios
en la configuración de las categorías se transfieren a la ficha "Grupos de avisos". La
configuración del grupo de avisos correspondiente se actualiza. Se procesan únicamente
las propiedades del grupo en los grupos de avisos de categorías.
Los grupos de avisos de categorías, también denominados grupos de categorías, se
muestran en WinCC en "Avisos HMI > Grupos de avisos > Grupos de categorías".
Nota
Un aviso siempre forma parte de un grupo de avisos de una categoría. Un aviso de acuse
obligado puede pertenecer además a otro grupo de avisos definido por el usuario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

805

Trabajar con avisos
3.1 Principios básicos

ID de grupo de avisos en WinCC y STEP 7
Cada grupo de avisos tiene una ID unívoca. Si, tras crear un panel de operador, se crean 15
grupos de avisos definidos por el usuario, las ID de estos grupos serán del 17 al 31. Si, tras ello,
se siguen creando grupos de avisos definidos por el usuario, las ID de estos grupos serán >35.
Las cuatro categorías predefinidas que existen en todo proyecto de WinCC ocupan
automáticamente las ID del 32 al 35 con sus grupos de avisos. Al crear una conexión HMI entre
el panel de operador y el controlador, se crean en WinCC 16 grupos de avisos definidos por el
usuario con las ID del 1 al 16. Con estos grupos de avisos, WinCC soporta los 16 grupos de
avisos de STEP 7 con las ID del 1 al 16. WinCC no soporta el grupo de avisos con la ID 0 de
STEP 7. Al crear la conexión HMI, se crean en WinCC al menos otros dos grupos de avisos de
categorías. Estos grupos de avisos se crean para las nuevas categorías creadas por la
conexión HMI y vinculadas con las categorías de todo el proyecto en "Datos comunes >
Categorías". Estos dos o más grupos de avisos de categorías reciben ID >35.
La ID de un grupo de avisos definido por el usuario se muestra en WinCC en los siguientes
lugares:
● En "Avisos HMI > Grupos de avisos > Grupos de avisos", columna "ID".
● En las propiedades del grupo de avisos definido por el usuario, ventana de inspección,
"Propiedades > General > General > Configuración > ID".
La ID de grupo de avisos de un grupo de categorías se muestra en WinCC en las propiedades
del grupo de categorías, ventana de inspección, "Propiedades > General > General >
Configuración > ID".
En STEP 7, en las propiedades de un aviso de controlador, ventana de inspección,
"Configuración avanzada > ID de grupo", seleccione una ID de grupo de avisos del 0 al 16. Con
ello, el aviso de controlador se asigna al grupo de avisos que posee la ID de grupo de avisos
seleccionada. En las propiedades de un aviso de controlador, la ID predeterminada es 0. Así,
un aviso de controlador siempre está asignado de modo predeterminado al grupo de avisos no
soportado por WinCC, con la ID 0.

Consulte también
Configurar grupos de avisos (Página 823)

3.1.9.2

Grupos de avisos jerárquicos

Introducción
WinCC ofrece la posibilidad de agrupar jerárquicamente avisos y grupos de avisos definidos
por el usuario. Se estructura así una jerarquía de avisos que permite generar y procesar los
estados de instalaciones complejas de una manera clara y rápida.
Esta jerarquía de avisos y grupos de avisos se establece únicamente con grupos de avisos
definidos por el usuario.

Estructura de grupos de avisos jerárquicos
En caso necesario, es posible agrupar jerárquicamente grupos de avisos definidos por el
usuario y avisos individuales. Los grupos de avisos subordinados se añaden posteriormente.

806

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos
La figura siguiente muestra un grupo de avisos jerárquico en WinCC:

Nota
Si se inserta un grupo de avisos posteriormente, la numeración ya no es continua.

ATENCIÓN
Cuando se crea una jerarquía de grupos de avisos, hay que procurar no utilizarla de forma
recursiva.
Nota
Si se borra un grupo de avisos que contiene otros grupos, todos los grupos subordinados
también se borrarán.

Componentes de grupos de avisos de orden superior
En caso necesario, un grupo de avisos de orden superior contiene estos elementos:
● Avisos individuales
● Grupos de avisos subordinados

Variable para inhibir la visualización
La variable para inhibir la visualización solamente se asigna a grupos de avisos que contienen
grupos subordinados y a grupos de avisos definidos por el usuario.

Consulte también
Configurar grupos de avisos (Página 823)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

807

Trabajar con avisos
3.1 Principios básicos

3.1.9.3

Variables de un grupo de avisos

Variables de un grupo de avisos
En caso necesario, se asignan estas variables a un grupo de avisos:

Variable de estado
La variable de estado guarda los estados de aviso de un grupo.
La variable de estado guarda la solicitud de acuse. Un grupo de avisos tiene la solicitud de
acuse si al menos uno de los avisos está pendiente y es de acuse obligado.
La variable de estado sirve para visualizar los estados de avisos y la solicitud de acuse de un
grupo de avisos.
La variable de estado se puede consultar desde otros componentes de WinCC.

Variable de bloqueo
La variable de bloqueo guarda el estado bloqueado de un grupo de avisos.
La variable de bloqueo sirve para evaluar el estado bloqueado de un grupo de avisos.

Variable de acuse
La variable de acuse guarda el estado "Acusado" de un grupo de avisos.
La variable de acuse sirve para acusar un grupo de avisos.
La variable de acuse se puede consultar desde otros componentes de WinCC.
Nota
El bit de acuse de una variable de acuse no se desactiva automáticamente. Para ello se
configura un botón o una tecla de función. El usuario desactiva así el bit de acuse de la variable
de acuse.
La variable de acuse de un grupo de avisos no muestra el acuse en el visor de avisos.

Variable para inhibir la visualización
La variable para inhibir la visualización sirve para suprimir automáticamente la visualización de
todos los avisos de un grupo en un determinado estado de la instalación
La variable para inhibir la visualización envía el valor actual del estado de la instalación como
valor entre 1 y 32. Se suprimen todos los avisos del grupo en los que se ha activado el bit
correspondiente a los números 1 a 32 en la máscara para inhibir la visualización.

808

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.1 Principios básicos

Consulte también
Configurar grupos de avisos (Página 823)
Configurar la visualización inhibida de avisos (Página 895)
Asignación de bits a variable de bloqueo (Página 1063)
Asignación de bits a variable para inhibir la visualización (Página 1064)
Asignación de bits a variable de estado (Página 1059)
Asignación de bits a variable de acuse (Página 1062)

3.1.10

Número de aviso

Asignación de números de aviso
El sistema asigna números de aviso unívocos dentro de un procedimiento de aviso.
Nota
Cuando se adaptan números de aviso, es preciso prestar atención a la univocidad de los
números en todo el procedimiento de aviso.

3.1.11

Número de aviso

Asignación de números de aviso
El sistema asigna números de aviso unívocos dentro de un proyecto.
Nota
Cuando se adaptan números de aviso, hay que prestar atención a la univocidad de los
números en todo el proyecto.
El número de un aviso de sistema tiene prioridad sobre el de un aviso definido por el usuario.
Si utiliza el número de un aviso de sistema para un aviso definido por el usuario, cambie el
número del aviso definido por el usuario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

809

Trabajar con avisos
3.2 Trabajar con avisos

3.2

Trabajar con avisos

3.2.1

Componentes y propiedades de los avisos

Resumen
En WinCC se configuran los componentes de los avisos. La tabla siguiente muestra los
componentes básicos de los avisos:
Cate‐
goría

Número
de aviso

Hora

Fecha

War‐
ning

1

11:09
:14
11:25
:58

Siste‐ 110001
ma

Estado
de avi‐
so

Texto de aviso

Gru‐
po de
aviso

Tooltip

Variable de
disparo

Valor lí‐
mite

06.08.2 AD
007

Velocidad máxima
alcanzada.

2

Este aviso es...

speed_1

27

06.08.2 A
007

Cambio al modo de
operación "Online"

0

Este aviso es...

Variable
PLC_1

–

Categoría
Las categorías son "Warnings" o "Errors", p. ej. La categoría define lo siguiente para un aviso:
● Autómata finito
● Representación en runtime (p. ej. color)
● Archivación
Nota
Dependencia del equipo
La archivación no está disponible para todos los paneles de operador.

Número de aviso
Un aviso se identifica con un número unívoco. Dicho número es asignado por el sistema. El
número de aviso cambia en caso necesario, p. ej. para identificar con un número correlativo
avisos relacionados dentro del proyecto.

Hora y fecha
Cada aviso muestra en un sello de tiempo la hora y fecha en la que se lanzó el aviso.

Estado de aviso
Un aviso tiene los eventos "Aparecido", "Desaparecido" y "Acusar". Para cada evento se emite
un aviso nuevo con el estado actual del aviso.

810

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Texto de aviso
El texto del aviso describe la causa del mismo.
El texto del aviso puede contener campos de salida para valores actuales. En función del
runtime utilizado podrá insertar unos valores u otros. El valor se registra en el instante en el que
cambia el estado del aviso.

Grupo de avisos
El grupo de avisos agrupa avisos distintos.

Tooltip
En caso necesario, para cada aviso se configura un tooltip propio, que el usuario puede
visualizar en runtime.

Variable de disparo
Cada aviso tiene asignado una variable como disparador. El aviso se visualiza si la variable de
disparo cumple la condición establecida, p. ej. cuando modifica el estado o rebasa por exceso
un valor límite.

Valor límite
Los avisos analógicos muestran violaciones de valores límite. Dependiendo de la
configuración, WinCC visualiza el aviso analógico tan pronto como la variable de disparo
rebasa por exceso o por defecto el valor límite configurado.

Consulte también
Principios básicos de las categorías (Página 797)
Estados de aviso (Página 794)
Grupos de avisos (Página 804)
Resumen de los procedimientos de aviso (Página 787)
Resumen de los procedimientos de aviso (Página 789)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

811

Trabajar con avisos
3.2 Trabajar con avisos

3.2.2

Configuración de avisos

3.2.2.1

Sinopsis de la configuración de avisos

Pasos necesarios para configurar los avisos
Los avisos se configuran en WinCC siguiendo los pasos siguientes:
1. Editar y crear categorías
Con la categoría se definen la visualización de un aviso en runtime y el autómata finito del
aviso.
2. Crear variables en el editor "Variables HMI"
– Configure las variables para su proyecto.
– Cree valores de rango para las variables.
3. Crear avisos en el editor "Avisos HMI"
– Se crean avisos definidos por el usuario y se les asignan la variable que debe vigilarse,
las categorías, los grupos y otras propiedades.
– Dado el caso, se asignan funciones de sistema o scripts a los eventos de los avisos.
4. Configurar la visualización de avisos
Para visualizar los avisos configurados, configure un visor de avisos o una ventana de
avisos en el editor "Imágenes".

Pasos de configuración avanzados
En función de los requisitos del proyecto se requerirán más pasos para configurar los avisos:
1. Crear grupos de avisos
En los grupos de avisos se ordenan los avisos del proyecto según su relación, p. ej. según
la causa del error (p. ej. fallo de alimentación) o el origen del error (p. ej. motor 1).
2. Configurar Loop-In-Alarm
Para poder cambiar a la imagen que contiene información sobre el error ocurrido, tras
aparecer el aviso correspondiente se configura una Loop-In-Alarm.

812

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

3.2.2.2

Resumen de la configuración de avisos

Pasos necesarios para configurar los avisos
Los avisos se configuran en WinCC siguiendo los pasos siguientes:
1. Editar y crear categorías
Con la categoría se definen la visualización de un aviso en runtime y el autómata finito del
aviso.
2. Crear variables en el editor "Variables HMI"
– Configure las variables para su proyecto.
– Cree valores de rango para las variables.
1. Crear avisos en el editor "Avisos HMI"
– Se crean avisos definidos por el usuario y se les asignan la variable que debe vigilarse,
las categorías, los grupos y otras propiedades.
– Dado el caso, se asignan funciones de sistema o scripts a los eventos de los avisos.
2. Configurar la visualización de avisos
Para visualizar los avisos configurados, configure un visor de avisos o una ventana de
avisos en el editor "Imágenes".

Pasos de configuración avanzados
En función de los requisitos del proyecto se requerirán más pasos para configurar los avisos:
● Activar y editar avisos de sistema
En caso necesario, importe los avisos de sistema al abrir por primera vez la ficha "Avisos
de sistema" en el editor "Avisos HMI". Después de importar se pueden editar los avisos de
sistema.
● Activar y editar avisos de controlador
En el funcionamiento integrado de un proyecto en STEP 7, en la configuración de los avisos
se determina qué avisos de controlador deben visualizarse en el panel de operador.
● Crear grupos de avisos
En los grupos de avisos se ordenan los avisos del proyecto según su relación, p. ej. según
la causa del error (p. ej. "Fallo de alimentación") o el origen del error (p. ej. "Motor 1").
● Configurar Loop-In-Alarm
Configure un Loop-In-Alarm para poder cambiar a la imagen que contiene información
sobre el aviso seleccionado tras aparecer el aviso.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

813

Trabajar con avisos
3.2 Trabajar con avisos

3.2.2.3

Configuración de categorías

Crear categorías
Introducción
Las categorías se crean en la ficha "Categorías" del editor "Avisos HMI". Para cada proyecto
ya están creadas algunas categorías predefinidas. En caso necesario, se crean otras
categorías personalizadas. En total se pueden crear 32 categorías como máximo.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Procedimiento
Para crear una categoría, proceda del siguiente modo:
1. Haga clic en la ficha "Categorías".
Aparecerán las categorías predefinidas y las definidas por el usuario. La figura siguiente
muestra la vista en forma de tabla de las categorías predefinidas:

814

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
1. Haga doble clic en "<Agregar>" en la tabla.
Se creará una nueva categoría. A cada categoría nueva se asigna automáticamente una ID
fija.
Las propiedades de la nueva categoría se visualizarán en la ventana de inspección.
2. En la ventana de inspección configure la categoría en "Propiedades > Propiedades >
General".
– Introduzca un "Nombre" y un "Nombre de visualización".
– Dependiendo del panel de operador, en caso necesario también será preciso activar la
archivación o la transmisión automática de correos electrónicos.
3. En la ventana de inspección, defina el autómata finito de la categoría en "Propiedades >
Propiedades > Acuse".
4. Modifique el texto predeterminado en "Propiedades > Propiedades > Textos de estado" de
la ventana de inspección.
Con este texto se mostrará en runtime el estado de un aviso.
5. Modifique los colores predeterminados en "Propiedades > Propiedades > Colores" de la
ventana de inspección. Dependiendo del panel de operador, también puede ser preciso
modificar la intermitencia.
Estos ajustes determinan la representación de los avisos de esta categoría en runtime.
Nota
Para representar categorías en color en runtime, debe haberse activado la opción "Utilizar
colores de las categorías". Para ello, active "Configuración de runtime > Avisos > General >
Utilizar colores de las categorías" en el árbol del proyecto.

Consulte también
Principios básicos de las categorías (Página 797)
Categorías predefinidas (Página 798)

Crear categorías
Introducción
Las categorías se crean en la ficha "Categorías" del editor "Avisos HMI". Para cada proyecto
ya están creadas algunas categorías predefinidas. En caso necesario, se crean otras
categorías personalizadas. En total se permite un máximo de 256 categorías por proyecto.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

815

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para crear una categoría, proceda del siguiente modo:
1. Haga clic en la ficha "Categorías".
La figura siguiente muestra la vista en forma de tabla de las categorías predefinidas:

1. Haga doble clic en "<Agregar>" en la tabla.
Se crea una nueva categoría. A cada categoría nueva se asigna automáticamente una ID
fija.
Las propiedades de la nueva categoría se muestran en la ventana de inspección.
2. En la ventana de inspección configure la categoría en "Propiedades > Propiedades >
General":
– Introduzca un "Nombre" y un "Nombre de visualización".
– Active "Fichero" para archivar los avisos de esta categoría.
3. En la ventana de inspección, defina el autómata finito de la categoría y del avisador central
en "Propiedades > Propiedades > Acuse".
4. Vaya a la ventana de inspección y cambie los textos de estado en "Propiedades >
Propiedades > Estado", si es necesario.
Con los textos de estado se indican los estados de un aviso en runtime.
5. En caso necesario, modifique los colores de primer plano y de fondo predeterminados en
"Propiedades > Propiedades > Colores" de la ventana de inspección.
Estos ajustes determinan la representación de los avisos de esta categoría en runtime.

Ajustes adicionales para categorías
Comentarios en runtime
En caso necesario, el usuario introduce un comentario en runtime sobre un aviso entrante. Los
botones del visor de avisos permiten visualizarlos si es preciso en el visor "Fichero de largo
plazo". Configure esta función en la categoría. El usuario está registrado en el bloque de
sistema "Nombre de usuario".
Asignar comentarios al usuario de forma unívoca

816

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
Para asignar los comentarios al usuario que ha iniciado la sesión, proceda del siguiente modo:
1. Seleccione la categoría.
2. En la ventana de inspección, seleccione "Propiedades > Propiedades > Acuse >
Configuración > Asignar comentarios al usuario de forma unívoca".
Si aún no se ha introducido ningún comentario, cualquier usuario puede introducir el primer
comentario.
Una vez introducido el primer comentario, todos los demás usuarios sólo pueden leer este
comentario.
Utilizar el comentario del aviso entrante
Cuando el estado de un aviso cambia, p. ej. de "Aparecido" a "Acusado", éste se visualiza de
nuevo con otro estado. Sin embargo, el usuario sólo asigna comentarios a un aviso entrante.
Para mostrar también los comentarios cuando se visualiza el aviso con un nuevo estado,
proceda del siguiente modo:
1. Seleccione la categoría.
2. En la ventana de inspección, active "Propiedades > Propiedades > Acuse > Configuración
> Utilizar comentario del aviso entrante".

Consulte también
Configurar el acuse de un aviso (Página 914)
Configurar el acuse del avisador central (Página 917)
Principios básicos de las categorías (Página 797)
Categorías predefinidas (Página 798)
Configuración de los textos de estado de una categoría (Página 817)

Configuración de los textos de estado de una categoría
Introducción
Los textos de los estados de un aviso en runtime se indican en el visor de avisos, en los bloques
de sistema "Estado" y "Estado de acuse". El usuario define los textos de estado de un aviso en
la categoría.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

817

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar los textos de estado de un aviso, haga lo siguiente:
1. Cree una categoría nueva en la ficha "Categorías".
Las propiedades de la nueva categoría se muestran en la ventana de inspección.
2. Defina los textos de estado de los avisos en "Propiedades > Propiedades > Estado" en la
ventana de inspección.
Campo

Descripción

Aparecido

Texto para avisos entrantes al cambiar al estado operativo que debe
notificarse

Desaparecido

Texto para avisos salientes al cambiar desde un estado operativo que
debe notificarse

Acusado

Texto para avisos acusados

Aparecido/Desapareci‐
do

Texto para aviso aparecido y desaparecido

3. Si es necesario, configure otras propiedades de la categoría en "Propiedades >
Propiedades" en la ventana de inspección.
4. Cree variables en el editor "Variables HMI":
– Configure las variables de su proyecto.
– Cree valores de rango para las variables.
5. Cree un aviso definido por el usuario en el editor "Avisos HMI":
– Asigne al aviso la categoría creada, la variable que vigilar y otras propiedades.
– Si es necesario, asigne funciones de sistema o scripts a los eventos del aviso.
6. Cree una imagen nueva en el árbol del proyecto.
7. Para emitir en runtime el aviso creado con los textos de estado definidos, inserte el objeto
"Visor de avisos" de la Task Card "Herramientas" en la imagen.
Las propiedades del visor de avisos aparecen en la ventana de inspección.
8. Desactive la opción "Aplicar la configuración del proyecto" en "Propiedades > Propiedades
> Bloques".
9. Para poder utilizar los bloques de sistema "Estado" y "Estado de acuse" en el visor de
avisos, active los dos bloques de sistema en la columna "Seleccionado".
10.Defina la longitud de texto de los bloques de sistema "Estado" y "Estado de acuse" en la
columna "Longitud" de manera que los textos de estado se puedan mostrar completos.
11.En las filas de los bloques de sistema "Estado" y "Estado de acuse", seleccione la entrada
"Texto" o "Ambos" en la columna "Contenido como".
Nota
Si selecciona la entrada "Ambos", el contenido de los bloques de sistema "Estado" y
"Estado de acuse" no solo se mostrará como texto, sino también como símbolo.
12.Para ver los bloques de sistema "Estado" y "Estado de acuse" en forma de columnas en el
visor de avisos, active las columnas "Estado" y "Estado de acuse" bajo "Visible" en
"Propiedades > Propiedades" > Columnas.

818

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Ha configurado los textos de estado de un aviso. La visualización en runtime de los textos de
estado definidos depende de la lista seleccionada en el visor de avisos.
Lista

Bloque de sistema Visualización de los textos de estado del campo

Lista de avisos

Estado

"Aparecido" o "Aparecido/Desaparecido"

Lista de avisos

Estado de acuse

"Acusado"

Lista de ficheros
de corto plazo

Estado

"Aparecido", "Acusado" o "Desaparecido"

Lista de ficheros
de corto plazo

Estado de acuse

No se muestra texto.

Lista de ficheros
históricos

Estado

"Aparecido", "Acusado" o "Desaparecido"

Lista de ficheros
históricos

Estado de acuse

No se muestra texto.

Lista de bloqueos

Estado

No se puede configurar texto.
En el caso de un aviso bloqueado se muestra el texto "Blo‐
queo". El bloqueo no se puede configurar.

Lista de bloqueos

Estado de acuse

No se puede configurar texto.
No se muestra texto.

Nota
El sistema genera la visualización de los textos de estado "Acuse - Sistema" (avisos acusados
por el sistema) y "Acuse de emergencia" (avisos acusados con acuse de emergencia) en la
lista de ficheros de corto plazo y en la lista de ficheros históricos.

Consulte también
Crear categorías (Página 815)
Configurar el visor de avisos (Página 885)
Descripción de los bloques de sistema (Página 993)

Utilizar categorías para todo el proyecto
Introducción
Las categorías para todo el proyecto se muestran en "Datos comunes > Categorías" de la
navegación del proyecto. En caso necesario, cree otras categorías para todo el proyecto en
WinCC.
Los avisos de controlador están asignados a categorías para todo el proyecto. Si trabaja con
avisos de controlador, en WinCC se cargarán automáticamente categorías para todo el
proyecto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

819

Trabajar con avisos
3.2 Trabajar con avisos

Requisitos
● Se ha creado un proyecto.

Crear una categoría para todo el proyecto
Para crear una categoría para todo el proyecto, proceda del siguiente modo:
1. Haga doble clic en "Datos comunes > Categorías" en el árbol del proyecto.
En el área de trabajo se abrirá el editor "Categorías para todo el proyecto".
2. Para crear una categoría para todo el proyecto, haga doble clic en la primera fila vacía del
editor de la tabla.
3. Defina el nombre y el nombre de visualización de la categoría.
4. Si desea crear una categoría de acuse obligado, active "Con acuse".

Asignar avisos a una categoría para todo el proyecto
Para asignar un aviso analógico o de bit a una categoría para todo el proyecto, proceda del
siguiente modo:
1. Seleccione en el editor "Avisos HMI" el aviso que desea asignar a la categoría para todo el
proyecto.
2. En la ventana de inspección haga clic en "General".
3. Haga clic en "Datos comunes > Categorías" en el árbol del proyecto.
4. Seleccione la categoría para todo el proyecto en la vista detallada.

820

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
5. Arrastre la categoría a la ventana de inspección del aviso utilizando la función Drag&Drop
y, una vez allí, al campo de selección "Categoría" o la columna "Categoría" del área de
trabajo.

El sistema crea una categoría nueva que está vinculada a la categoría para todo el
proyecto. En la ventana de inspección del aviso se visualiza el nuevo nombre generado de
la categoría para todo el proyecto en "Categoría". El nombre de visualización de la
categoría para todo el proyecto se aplica a la categoría en el proyecto.
6. Haga clic en la ficha "Categoría".
7. Compruebe si el nombre de visualización de la categoría para todo el proyecto se muestra
en WinCC.
8. Modifique el nombre de objeto de la categoría en caso necesario.

Procedimiento alternativo
Para asignar un aviso a una categoría para todo el proyecto, proceda del siguiente modo:
1. Haga clic en la ficha "Categorías".
Se mostrarán las categorías.
2. Haga clic en "Datos comunes > Categorías" en el árbol del proyecto. La figura siguiente
muestra la vista en forma de tabla de las categorías para todo el proyecto:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

821

Trabajar con avisos
3.2 Trabajar con avisos
3. Seleccione la categoría para todo el proyecto en la vista detallada.
4. Arrastre la categoría a la ficha "Categorías" del editor "Avisos HMI" utilizando la función
Drag&Drop.
El sistema crea una categoría nueva que está vinculada a la categoría para todo el
proyecto. En "Categoría" del proyecto se visualiza para el aviso el nuevo nombre generado
de la categoría nueva.
5. Abra la ficha del procedimiento del aviso deseado.
6. Seleccione el aviso y, en la sección "General" de la ventana de inspección, elija la categoría
que está asociada a la categoría para todo el proyecto.
Nota
Borrar una categoría para todo el proyecto
Si borra una categoría de todo el proyecto, se mantiene la categoría enlazada. En caso
necesario, enlace la categoría con otra categoría de todo el proyecto o utilícela como categoría
de WinCC.

Consulte también
Principios básicos de las categorías (Página 797)

3.2.2.4

Configuración de grupos de avisos

Configurar grupos de avisos
Introducción
Los grupos de avisos se crean en la ficha "Grupos de avisos" del editor "Avisos HMI". El grupo
de avisos es una agrupación de diferentes avisos. Los avisos de un grupo se ordenan según
su relación, p. ej. causa del error u origen del error. Si en runtime se acusa un aviso de un
grupo, también se acusarán automáticamente todos los demás avisos del mismo grupo.

Requisitos
● Se ha creado un proyecto.
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

822

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Crear un nuevo grupo de avisos
1. Haga clic en la ficha "Grupos de avisos".
Se mostrarán los grupos de avisos creados.

2. Haga doble clic en "<Agregar>" en la primera fila libre de la tabla del área de trabajo.
Se creará un nuevo grupo.
3. Sobrescriba el "Nombre" propuesto en caso necesario.

Resultado
Se ha creado un grupo de avisos. Para acusar conjuntamente avisos en runtime, asigne a un
grupo los avisos de acuse obligado relacionados.

Consulte también
Grupos de avisos (Página 803)

Configurar grupos de avisos
Introducción
Los grupos de avisos definidos por el usuario se crean en la ficha "Grupos de avisos" del editor
"Avisos HMI". Los grupos de avisos de categorías ya están creados en una ficha propia. Los
avisos de un grupo se acusan conjuntamente en runtime. Para ello, configure un botón para
acusar el grupo de avisos y otro botón para resetear el bit de acuse de las variables de acuse.

Requisitos
● Se ha creado un proyecto.
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

823

Trabajar con avisos
3.2 Trabajar con avisos

Crear un nuevo grupo de avisos
Para crear un grupo de avisos, proceda del siguiente modo:
1. Haga clic en la ficha "Grupos de avisos".
Se mostrarán los grupos de avisos creados.

2. Haga doble clic en "<Agregar>" en la tabla.
Se crea un nuevo grupo de avisos.
Las propiedades del nuevo grupo de avisos se visualizarán en la ventana de inspección.
3. Haga clic en la ventana de inspección "Propiedades > Propiedades > General" y determine
un nombre para el grupo de avisos.
4. Haga clic en la ventana de inspección "Propiedades > Propiedades > Variables" y
determine las siguientes variables y bits si es necesario:
– Variable de estado, para visualización de estados de avisos en el grupo
– Variable de acuse, para acuse de un grupo de avisos
– Variable de bloqueo, para visualización del estado bloqueado de un grupo de avisos
– Variable para inhibir la visualización, para filtrar avisos en runtime según el estado de la
instalación

Crear un grupo de avisos subordinado
Para crear un grupo de avisos subordinado, proceda del siguiente modo:
1. Haga clic en la ficha "Grupos de avisos".
2. En el área de trabajo o en la vista detallada, seleccione los grupos de avisos que desee
insertar como subgrupo.
3. Arrastre los grupos de avisos a otro grupo de avisos con la función Drag&Drop.
Los grupos de avisos seleccionados se clasifican jerárquicamente dentro de este grupo de
avisos.
Si desea crear un grupo de avisos de nivel superior para una jerarquía de grupos de avisos,
desplace toda la jerarquía a este grupo de avisos con la función Drag&Drop.

824

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento alternativo
1. Haga clic en la ficha "Grupos de avisos".
2. Seleccione los grupos de avisos en los que desee crear un subgrupo.
3. Abra el menú contextual en la celda de la tabla izquierda delante de la fila marcada y
seleccione "Insertar elemento subordinado".
Se crea un grupo de avisos subordinado.

Consulte también
Principios básicos de los grupos de avisos (Página 804)
Grupos de avisos jerárquicos (Página 806)
Variables de un grupo de avisos (Página 808)
Configurar la visualización inhibida de avisos (Página 895)
Asignaciones de bits a variables (Página 1059)

3.2.2.5

Configurar avisos

Configurar avisos analógicos
Introducción
Loa avisos analógicos muestran violaciones de valores límite. Si, p. ej., la velocidad de un
motor baja por debajo de un valor determinado, se lanza un aviso analógico.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.
● Las categorías y los grupos de avisos necesarios están creados.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

825

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar un aviso analógico, proceda del siguiente modo:
1. Haga clic en la ficha "Avisos analógicos".
2. Para crear un aviso analógico, haga doble clic en "<Agregar>" en la tabla.
Se creará un nuevo aviso analógico.
3. En la ventana de inspección configure el aviso en "Propiedades > Propiedades > General":
– Introduzca el texto de aviso deseado como texto de evento.
En caso necesario, formatee el texto carácter por carácter desde el menú contextual.
Si es necesario, utilice el menú contextual para insertar campos de salida para variables
HMI o textos desde listas.
– Modifique el número del aviso en caso necesario.
– Seleccione la categoría y, dado el caso, el grupo de avisos.

4. Configure la variable que dispara el aviso en "Propiedades > Propiedades > Disparador".
Utilice una variable de disparo únicamente como variable de disparo.

Configurar valores límite para un aviso analógico
1. Haga clic en el botón
en "Propiedades > Propiedades > Disparador > Límite > Valor" de
la ventana de inspección.
– Si desea utilizar una constante como valor límite, elija "Constante".
Introduzca el valor límite deseado.
– Si desea utilizar una variable como valor límite, elija "Variable_HMI".
Aparece el botón . Seleccione allí la variable deseada.
Nota
Si la variable deseada todavía no existe en la lista de selección, créela en la lista de
objetos y modifique sus propiedades más adelante.
2. Seleccione el modo:
– "Superior": el aviso se disparará cuando el valor límite se rebase por exceso.
– "Inferior": el aviso se disparará cuando el valor límite se rebase por defecto.

826

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Ajustes opcionales para avisos analógicos
Ajuste del tiempo de retardo
Para ajustar un tiempo de retardo, proceda del siguiente modo:
● Introduzca un intervalo en "Propiedades > Propiedades > Disparador > Configuración >
Retardo" de la ventana de inspección.
El aviso sólo se lanzará si la condición de disparo sigue cumpliéndose una vez transcurrido
el tiempo de retardo.

Configurar una zona muerta
Nota
Si un valor de proceso oscila alrededor del valor límite, el aviso correspondiente a este fallo se
dispara varias veces. Para evitar esta situación, configure una zona muerta o bien un tiempo
de retardo.
Para ajustar la zona muerta, proceda del siguiente modo:
1. En "Propiedades > Propiedades > Disparador > Zona muerta > Modo" seleccione con qué
modificación del estado de aviso se debe tener en cuenta la zona muerta.
2. Introduzca un valor constante en "Valor".
3. Active la opción "en %" para establecer que el valor de la zona muerta se indique como
porcentaje del valor límite.

Generar informes automáticamente
Para imprimir los avisos continuamente en una impresora:
● Seleccione la opción "Activar" en "Propiedades > Propiedades > Misceláneo > Informe".
Nota
Dependencia del panel
La generación de informes no está disponible para todos los paneles de operador.

Crear un tooltip
Para dotar al aviso de un tooltip, proceda del siguiente modo:
● En la ventana de inspección seleccione "Propiedades > Propiedades > Tooltip" e
introduzca el texto deseado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

827

Trabajar con avisos
3.2 Trabajar con avisos

Configurar tareas controladas por eventos
Para configurar tareas controladas por eventos, p. ej. un "Loop-In-Alarm", proceda del
siguiente modo:
1. Seleccione el aviso analógico.
2. En la ventana de inspección, elija "Propiedades > Eventos > Loop-In-Alarm".
3. Seleccione, p. ej., la función de sistema "ActivarImagen" u otra función de sistema que deba
llamarse con Loop-In-Alarm.
4. Seleccione los parámetros necesarios para la función de sistema seleccionada.
Con "ActivarImagen", es la imagen que debe llamarse.

Consulte también
Avisos analógicos (Página 790)
Visualizar el valor de una variable en el texto de aviso (Página 831)
Configurar un disparador para el acuse de avisos (Página 912)
Configurar el registro de avisos (Página 908)
Formatear el texto de aviso (Página 830)
Visualizar textos de una lista en un aviso (Página 833)

Configurar avisos de bit
Introducción
Los avisos de bit muestran cambios de estado en una instalación y son lanzados por el
controlador. Indican, p. ej., si una válvula está abierta o cerrada.
A continuación se describe la configuración en el editor "Avisos HMI". También es posible
configurar avisos de bit en el editor "Variables HMI".

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.
● Las categorías y los grupos de avisos necesarios están creados.

Procedimiento
Para configurar un aviso de bit, proceda del siguiente modo:
1. Abra la ficha "Avisos de bit".
2. Para crear un aviso de bit, haga doble clic en "<Agregar>" en el área de trabajo.
Se crea un aviso de bit.

828

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
3. En la ventana de inspección configure el aviso en "Propiedades > Propiedades > General":
– Introduzca el texto de aviso deseado como texto de evento.
Utilice las funciones del menú contextual para formatear el texto carácter por carácter y
para insertar campos de salida para variables HMI o textos de listas.
– Modifique el número del aviso en caso necesario.
– Seleccione la categoría y, dado el caso, el grupo de avisos.
4. En la ventana de inspección, seleccione la variable y el bit que debe disparar el aviso en
"Propiedades > Propiedades > Disparador". Tenga en cuenta lo siguiente:
– Si elige una variable HMI, utilice los tipos de datos "Int" o "UInt".
– Si elige una variable PLC, utilice los tipos de datos "Int" o "Word". Las áreas de entrada
y de salida de una variable PLC no son adecuadas como disparador.
– Utilice un bit de una variable de disparo sólo para un aviso.
– Utilice una variable de disparo únicamente como variable de disparo.
– Si el aviso debe acusarse desde el controlador, utilice también esta variable como
variable de acuse del PLC.
Nota
Al indicar el bit, tenga en cuenta el modo de contaje de los bits en el controlador utilizado.
Encontrará más información al respecto en el apartado "Comunicación" de la Ayuda en
pantalla del controlador utilizado.
Nota
Si el objeto deseado todavía no existe en la selección, créelo directamente en la lista de
objetos y modifique sus propiedades más adelante.

Textos de aviso dependientes del estado
Para mostrar otro texto en función del estado del aviso, vincule una lista de textos al texto de
aviso. La lista de textos se controla a través de una variable.

Ajustes adicionales para avisos de bit

Crear un tooltip
Para dotar al aviso de un tooltip, proceda del siguiente modo:
● Introduzca el texto deseado en "Propiedades > Propiedades > Tooltip".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

829

Trabajar con avisos
3.2 Trabajar con avisos

Configurar tareas controladas por eventos
Para configurar tareas controladas por eventos, p. ej., un "Loop-In-Alarm", proceda del
siguiente modo:
1. Seleccione el aviso de bit.
2. En la ventana de inspección seleccione "Propiedades > Eventos" y configure una lista de
funciones para el evento deseado.

Consulte también
Avisos de bit (Página 790)
Configurar un disparador para el acuse de avisos (Página 912)
Configurar el registro de avisos (Página 908)
Visualizar textos de una lista en un aviso (Página 833)
Formatear el texto de aviso (Página 830)

Formatear el texto de aviso
Introducción
Para resaltar determinados eventos o procesos, puede aplicar formato a los textos de aviso o
introducir caracteres especiales en los textos de aviso.

Requisitos
● El editor "Avisos HMI" está abierto.
● Se ha creado un aviso.

Formatear textos de aviso
Para formatear un texto de aviso, proceda del siguiente modo:
1. Seleccione el aviso que desea editar.
2. Seleccione los caracteres que quiera formatear en "Propiedades > Propiedades > General
> Texto de aviso" de la ventana de inspección.
3. Elija en el menú contextual el formato deseado, p. ej. "Subrayado" o "Mayúsculas".
Los caracteres seleccionados se representan en runtime en el formato elegido.
Nota
No es posible visualizar variables y entradas de listas de textos subrayadas.

830

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Nota
Representación de caracteres especiales en textos de aviso
En el sistema de ingeniería se utiliza un juego de caracteres para la configuración de textos de
aviso. Este juego de caracteres ofrece la posibilidad de utilizar distintos caracteres especiales
en los textos de aviso.
Para la representación en runtime se utilizan fuentes específicas del idioma; p. ej., MS
PGothic, SimSun. Las fuentes utilizadas en runtime no soportan todos los caracteres
especiales. Por ello, algunos caracteres no se visualizan en runtime.

Eliminar formatos
Para eliminar todos los formatos de un texto, proceda del siguiente modo:
1. Seleccione los caracteres cuyo formato desee eliminar en el texto de aviso de la ventana
de inspección.
2. En el menú contextual, elija "Borrar marcas de formato".
Los caracteres seleccionados se representan sin formato en runtime.

Consulte también
Sinopsis de la configuración de avisos (Página 812)
Configurar avisos analógicos (Página 825)
Configurar avisos de bit (Página 828)
Visualizar el valor de una variable en el texto de aviso (Página 831)
Visualizar textos de una lista en un aviso (Página 833)

Visualizar el valor de una variable en el texto de aviso
Introducción
En WinCC, en el texto de aviso se insertan campos de salida que muestran el contenido de las
variables.

Requisitos
● El editor "Avisos HMI" está abierto.
● El aviso está seleccionado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

831

Trabajar con avisos
3.2 Trabajar con avisos

Visualizar el valor de una variable en el texto de aviso
Para insertar un campo de salida para el valor de una variable, proceda del siguiente modo:
1. Sitúe el cursor en la posición deseada del texto de evento.
2. En el menú contextual, elija "Insertar campo de salida de variables".
3. Abra la lista de objetos en "Variable" y seleccione la variable deseada.
Dado el caso, se puede crear la variable en la lista de objetos.
4. Determine en "Formato" la longitud del campo de salida y el formato en el que se visualizará
el valor de la variable en el texto de aviso.
Configure el campo de salida con un tamaño suficiente. De lo contrario, el contenido de las
variables en el aviso no se visualiza por completo.
5. Haga clic en el símbolo

para guardar las entradas.

WinCC inserta un comodín en el texto de aviso para el campo de salida: "<tag: n, [nombre de
variable]>" donde n = longitud del texto en caracteres.

Modificar las propiedades de un campo de salida
Para modificar las propiedades de un campo de salida, proceda del siguiente modo:
● Haga doble clic en el campo de salida del texto de aviso y modifique los ajustes como desee.

Borrar un campo de salida del texto de aviso
Para borrar un campo de salida del texto de aviso, proceda del siguiente modo:
● Seleccione el campo de salida en el texto de aviso y elija "Borrar" en el menú contextual.
Nota
El orden de los campos de salida para variables en el texto de aviso depende del idioma. Al
archivar avisos en un fichero CSV se utiliza el orden del idioma de runtime.
Si se modifica la variable de un campo de salida en un idioma, en todos los demás idiomas el
campo de salida modificado figura al final del texto de aviso. De este modo cambia el orden de
los campos de salida en el fichero.
Dependencia del equipo
La archivación no está disponible para todos los paneles de operador.

Consulte también
Configurar avisos analógicos (Página 825)
Formatear el texto de aviso (Página 830)
Visualizar textos de una lista en un aviso (Página 833)

832

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Visualizar textos de una lista en un aviso
Introducción
Con las listas se dinamizan los textos de avisos. Permiten configurar p. ej. la visualización de
los dos estados de un aviso de bit en un texto de aviso.
Para ello se inserta un campo de salida en el texto del aviso y se determina la variable que
proporciona el código de búsqueda para la lista de textos.

Requisitos
● Se ha creado una lista de textos.
● El editor "Avisos HMI" está abierto
● El aviso está seleccionado

Visualizar el valor de una lista en el texto de aviso
Para insertar un campo de salida para un valor de una lista de textos en el texto de aviso,
proceda del siguiente modo:
1. Sitúe el cursor en la posición deseada del texto de aviso.
2. En el menú contextual, elija "Introducir campo de salida de listas de textos".
3. Elija la lista de textos deseada en "Lista de textos".
4. Abra la lista de objetos en "Variable" y seleccione la variable que proporciona el código de
búsqueda para la lista de textos.
Dado el caso, cree la variable en la lista de objetos.
5. Defina la longitud del campo de salida en "Formato".
Configure el campo de salida con un tamaño suficiente para que el texto de la lista se
represente por completo en el aviso.
6. Haga clic en el símbolo
para guardar las entradas.
WinCC inserta un comodín en el texto de aviso para el campo de salida:
"<textlist: n, [nombre de lista de textos]>" donde n = longitud del texto en caracteres.

Modificar propiedades de un campo de salida
Para modificar las propiedades de un campo de salida, proceda del siguiente modo:
● Haga doble clic en el campo de salida del texto de aviso y modifique los ajustes como desee.

Borrar una lista de textos del texto de aviso
Para borrar un campo de salida del texto de aviso, proceda del siguiente modo:
● Seleccione el campo de salida en el texto de aviso y elija "Borrar" en el menú contextual.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

833

Trabajar con avisos
3.2 Trabajar con avisos

Consulte también
Formatear el texto de aviso (Página 830)
Configurar avisos analógicos (Página 825)
Configurar avisos de bit (Página 828)
Visualizar el valor de una variable en el texto de aviso (Página 831)

Editar avisos de sistema
Editar avisos de sistema
Si se abre la ficha "Avisos de sistema" en el editor "Avisos HMI", WinCC pide que se importen
o actualicen los avisos de sistema. Hay que importar los avisos de sistema y definir un tiempo
de visualización. No borre los avisos de sistema ni cree otros nuevos. En los avisos de sistema
sólo se puede editar el texto de aviso.

Requisitos
● Los avisos de sistema están importados.

Definir el tiempo de visualización
Para definir el tiempo de visualización, proceda del siguiente modo:
1. Haga doble clic en "Configuración de runtime" en el árbol del proyecto.
2. Introduzca un valor en "Avisos > Avisos de sistema > Tiempo de visualización".
Este valor determina cuántos segundos se visualizan los avisos de sistema en el panel de
operador. Si desea que los avisos de sistema se visualicen permanentemente, introduzca
el valor "0".

Modificar el texto de aviso
Para modificar el texto de un aviso de sistema, proceda del siguiente modo:
1. Abra el editor "Avisos HMI" y haga clic en la ficha "Avisos de sistema".
2. Seleccione el aviso de sistema que desea editar.
1. Modifique el texto de aviso en la ventana de inspección bajo "Propiedades > Propiedades
> General".
Nota
Si modifica el texto de un aviso de sistema que contiene comodines, no modifique el número
de comodines. Un comodín es p. ej. un "%1 ".

834

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar tareas controladas por eventos
Dependiendo del panel de operador se produce el evento "Aparecido" para determinados
avisos de sistema. Para configurar tareas controladas por eventos, proceda del siguiente
modo:
1. Seleccione el aviso de sistema.
2. Elija "Propiedades > Eventos > Aparecido" en la ventana de inspección y configure una lista
de funciones.

Consulte también
Resumen de la configuración de avisos (Página 813)
Avisos de sistema (Página 793)

Editar avisos de controlador
Introducción
Los avisos de controlador se configuran en STEP 7. Cuando WinCC funciona en el entorno de
STEP 7, están disponibles los avisos de controlador en WinCC.
En WinCC se editan solo las propiedades específicas del panel de operador para los avisos de
controlador. En función del panel de operador y del controlador, pueden editarse propiedades
distintas de un aviso de controlador.
En caso necesario, los avisos de controlador mostrados se filtran para el proyecto con los
discriminadores configurados en el controlador para los avisos de controlador.
Nota
Si está ajustada la "Actualización automática" de avisos de controlador para la conexión con
el controlador S7-1500, no pueden editarse las propiedades de los avisos de controlador
correspondientes. En este caso, los avisos de controlador no se muestran en el editor "Avisos
HMI".

Requisitos
● Se ha establecido una conexión con el controlador.
● Se han configurado avisos en STEP 7.

Editar avisos de controlador
Para editar avisos de controlador, proceda del siguiente modo:
1. Haga doble clic en "Avisos HMI" en el árbol del proyecto.
El editor "Avisos HMI" se abre.
2. Abra la ficha "Avisos de controlador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

835

Trabajar con avisos
3.2 Trabajar con avisos
3. En el área de trabajo seleccione el aviso que desea modificar.
4. Realice los cambios deseados. Según sea el panel de operador no se mostrarán ni podrán
activarse todas las propiedades del aviso de controlador.

Editar avisos SIMATIC S7
En caso necesario, los avisos de controlador se editan en la configuración de avisos de
STEP 7. Para ello proceda del siguiente modo:
1. En el área de trabajo seleccione el aviso que desea modificar.
2. En el menú contextual, elija "Abrir en el editor de avisos del controlador".
Se abrirá la configuración de avisos de STEP 7.
3. Realice los cambios deseados.

Filtrar un aviso de controlador con discriminadores
Para filtrar avisos de controlador con los discriminadores, proceda del siguiente modo:
1. Haga clic en "Configuración de runtime > Avisos" en el árbol del proyecto de su panel de
operador.
En "Avisos de controlador" se muestran una o varias conexiones con un controlador.
2. Seleccione para la conexión los discriminadores cuyos avisos de controlador desea
visualizar.
Nota
Avisos del controlador tras sustituir un Basic Panel
Para que tras sustituir un Basic Panel por un Comfort Panel, Mobile Panel o WinCC RT
Advanced ("Vista de dispositivos > Sustituir dispositivo"), se muestren los avisos del
controlador (avisos de supervisión PLC, avisos del programa o sistema), es preciso activar el
ajuste "Discriminadores" para las respectivas conexiones en "Configuración de runtime >
Avisos > Avisos de controlador“.

Resultado
En la ficha "Avisos de controlador" del editor "Avisos HMI" se muestran sólo los avisos de
controlador cuyo discriminador se ha activado para el panel de operador.

Consulte también
Avisos de controlador (Página 791)

836

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Activar avisos de controlador definidos por el sistema
Activar avisos de controlador definidos por el sistema
Para activar avisos de controlador definidos por el sistema del tipo "Aviso de diagnóstico
SIMATIC S7" para su panel de operador, proceda del siguiente modo:
1. Seleccione "Configuración de runtime > Avisos" en el árbol del proyecto.
Se abre la configuración de los avisos.
2. Active la casilla de verificación "Avisos de diagnóstico S7 (número)" en "Avisos de sistema".
3. Si desea visualizar los avisos de sistema con texto de aviso, active "Mostrar texto".
4. Para visualizar estos avisos en runtime, configure un visor o una ventana de avisos que
muestren los de la categoría "Diagnosis Events".
Nota
En paneles de operador con display pequeño, determine que los avisos de controlador
definidos por el sistema sólo se muestren con el número de aviso.
Nota
El procedimiento descrito es aplicable a avisos de controlador definidos por el sistema del
tipo "Aviso de diagnóstico SIMATIC S7"; solo se utiliza para las conexiones con
controladores SIMATIC S7-300/400.

Consulte también
Avisos de controlador definidos por el sistema (Página 793)

3.2.2.6

Configurar avisos

Configurar bloques de aviso
Principios básicos de los bloques de aviso
Introducción
La representación de avisos está compuesta de bloques de aviso. Cada bloque de aviso
corresponde a una columna en la visualización de tabla del visor de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

837

Trabajar con avisos
3.2 Trabajar con avisos
Existen tres grupos de bloques de aviso:
● Bloques de sistema
Los bloques de sistema con datos del sistema, por ejemplo fecha, hora, número de aviso
y estado.
● Bloques de texto de usuario
Los bloques de texto de usuario contienen el texto del aviso con la descripción de la causa
de una avería y textos adicionales con información, p. ej. el lugar del fallo para localizar la
avería.
● Bloques de parámetros
Los bloques de parámetros sirven para relacionar los avisos con valores de procesos, por
ejemplo niveles de llenado actuales, temperaturas o velocidades. Configure hasta 10
bloques de parámetros por cada aviso.

Configurar los bloques de aviso
Active y procese los bloques de aviso en la ficha "Bloques de aviso". Para visualizar bloques
de aviso en el visor de avisos, en los bloques de aviso activados en el editor "Imágenes"
seleccione los bloques de aviso que desee mostrar y archivar.

Longitud del texto
La longitud del texto de un bloque de texto de usuario tiene hasta 255 caracteres.
La longitud del texto de un bloque de parámetros se configura del siguiente modo:
● Avisos de controlador: máximo 32 caracteres
Para asegurar que todos los caracteres se visualizan, determine la longitud del bloque de
parámetros en 32 caracteres.
● Otros procedimientos de aviso: máximo 255 caracteres
Nota
Bloques de sistema "Estado" y "Estado de acuse"
En los bloques de sistema "Estado" y "Estado de acuse" se indican los textos de estado de
los avisos. Configure estos bloques de aviso con una longitud suficiente para que los textos
de estado puedan visualizarse íntegros.

Parpadeo
En caso necesario, un aviso de acuse obligatorio o los bloques de aviso individuales
parpadean en runtime. Para ello se deben cumplir estos requisitos:
● En la categoría del aviso hay que activar la propiedad "Parpadeo ON". Configure esta
propiedad en la ficha "Categorías".
● En la ventana de inspección de los bloques de aviso que deben parpadear se ha activado
la opción "Parpadeo" en el área "Bloque de avisos" de "General".

838

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Alineación
En la ficha "Bloques de aviso" determine si el bloque de aviso de una columna del visor de
avisos debe visualizarse a la derecha, a la izquierda o centrado.

Formato
Para determinados bloques de aviso, elija si es necesario entre diversos formatos de
representación.

Consulte también
Configuración del parpadeo de los bloques de aviso (Página 840)

Configurar bloques de aviso
Introducción
Un aviso consta de bloques de aviso configurados. Active los bloques de aviso para un panel
de operador en la ficha "Bloques de aviso". Entre los bloques de aviso activados para cada
visor de avisos, seleccione los que deben mostrarse y archivarse.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ficha "Bloques de aviso" está abierta.

Activar bloques de aviso
1. En las fichas de los bloques de aviso, seleccione la ficha "Bloques de sistema", "Bloques de
texto de usuario" o "Bloques de parámetros".
2. Seleccione el bloque de aviso que desee visualizar en su panel de operador.
3. En la ventana de inspección, active "Propiedades > Propiedades > General > Bloques >
Activar".
4. En la ventana de inspección, defina el nombre de visualización del bloque de aviso en
"Propiedades > Propiedades > General > Configuración".
Nota
En "Propiedades > Propiedades > General > Configuración", en la columna "Nombre en el
editor Avisos", se muestran los nombres de los bloques de aviso almacenados en el
sistema protegidos contra escritura. Esta columna está disponible en las fichas "Bloques de
texto de usuario" y "Bloques de parámetros".
La columna "Nombre en el editor Avisos" permite reconocer la relación entre los nombres
de visualización de los bloques de aviso en runtime y los nombres en el editor "Avisos",
incluso si se han modificado los nombres de visualización de los bloques de aviso.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

839

Trabajar con avisos
3.2 Trabajar con avisos
5. En "Propiedades > Propiedades > General > Bloques" de la ventana de inspección,
determine la longitud del texto y la alineación del bloque de aviso en la columna del visor de
avisos.
6. En la sección "Propiedades > Propiedades > Configuración > Formato" de la ventana de
inspección seleccione el formato del bloque de aviso. Esta opción no está disponible para
todos los bloques de aviso.

Resultado
Los bloques de aviso se activan y se visualizan en el editor "Imágenes" de la ventana de
inspección del visor de avisos.

Desactivar bloques de aviso
1. Seleccione la ficha cuyos bloques de aviso quiera desactivar.
2. Desactive los bloques de aviso que no quiera utilizar más para la visualización y archivado
de avisos.
3. Proceda del mismo modo con todos los bloques de aviso que ya no desee visualizar.

Consulte también
Descripción de los bloques de sistema (Página 993)
Configuración del parpadeo de los bloques de aviso (Página 840)

Configuración del parpadeo de los bloques de aviso
Introducción
El hecho de que un bloque de aviso parpadee en runtime depende de la categoría a la que
pertenece el aviso. La categoría determina que los avisos contenidos parpadean si están
pendientes de acuse.

Requisitos
● Los bloques de aviso se activan para el panel de operador.
● Los bloques de aviso se activan para el aviso correspondiente.
● El aviso está asignado a una categoría con un autómata finito que establece que los avisos
incluidos en ella parpadeen.
● Los bloques de aviso se activan en el visor de avisos.
● La ficha "Bloques de aviso" está abierta.

840

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar el parpadeo de los bloques de aviso en runtime, proceda del siguiente modo:
1. En las fichas subordinadas de la ficha "Bloques de aviso", seleccione el bloque de aviso que
debe parpadear en runtime.
2. En la ventana de inspección, active "Propiedades > Propiedades > General > Bloques >
Parpadeo".
3. Repita este paso para todos los bloques de aviso que deben parpadear en runtime.

Resultado
Estos bloques de aviso parpadean en runtime si el aviso está pendiente de acuse.

Consulte también
Principios básicos de los bloques de aviso (Página 837)
Configurar bloques de aviso (Página 839)

Configuración de avisos analógicos
Configurar avisos analógicos
Introducción
Configure avisos analógicos en el editor "Avisos HMI" y determine las propiedades de los
mismos. También es posible configurar avisos analógicos en el editor "Variables HMI".

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Procedimiento
Para configurar un aviso analógico, proceda del siguiente modo:
1. Haga clic en la ficha "Avisos analógicos".
2. Para crear un aviso analógico, haga doble clic en "<Agregar>" en la tabla.
Se creará un nuevo aviso analógico.
3. En la ventana de inspección configure el aviso en "Propiedades > Propiedades > General":
– Modifique el nombre de objeto del aviso si fuese necesario.
– Seleccione la categoría y, dado el caso, el grupo de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

841

Trabajar con avisos
3.2 Trabajar con avisos
4. Para visualizar el número de la CPU o del PLC, introdúzcalo en "Conexión con controlador".
Esta opción sólo está activa cuando el bloque de aviso "Número de CPU/PLC" se ha
activado en la ficha "Bloques de aviso > Bloques de sistema".
5. En la ventana de inspección, seleccione la variable que dispara el aviso en "Propiedades
> Propiedades > Disparador". Utilice una variable de disparo únicamente como variable de
disparo.
6. Configure el texto del aviso en "Propiedades > Propiedades > Textos de aviso".
– Introduzca el texto del aviso en "Texto del evento".
– En caso necesario, cree textos de aviso adicionales en "Textos adicionales".
– Utilice las funciones del menú contextual para formatear texto carácter por carácter y
para insertar campos de salida para parámetros de sistema o de avisos.
Nota
Introduzca ahora textos adicionales en las líneas que ha activado como bloques de texto
de usuario en la ficha "Bloques de aviso".

Definir valores límite
1. Seleccione el aviso analógico al que desee asignar el valor límite.
2. En la parte inferior del área de trabajo, haga clic en "<Agregar>" debajo de "Valor límite de
aviso analógico".

3. Para utilizar una constante como valor límite:
– Haga clic en el botón
en "Propiedades > Propiedades > Disparador > Valor" de la
ventana de inspección y elija "Constante".
– Introduzca el valor límite deseado.

842

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
4. Para utilizar una variable como valor límite:
– Haga clic en el botón
en "Propiedades > Propiedades > Disparador > Valor" de la
ventana de inspección y elija "Variable_HMI".

– Haga clic en el botón

. Se abrirá la lista de objetos.

– Seleccione la variable.
5. En el campo "Modo", seleccione el modo de disparo.
– "Equivale al valor límite": el aviso se dispara cuando se alcanza el valor límite.
– "No equivale al valor límite": el aviso se dispara cuando ya no se alcanza el valor límite.
– "Rebase por exceso": el aviso se dispara cuando el valor límite se ha rebasado por
exceso.
– "Rebase por defecto": el aviso se dispara cuando el valor límite se ha rebasado por
defecto.
6. En caso necesario cree otros valores límite para el aviso.
Nota
Si el objeto deseado todavía no existe en la selección, créelo en la lista de objetos y
modifique sus propiedades más adelante.
Nota
Si un valor de proceso oscila alrededor del valor límite, el aviso correspondiente a este fallo
se dispara varias veces. En ese caso, configure una zona muerta o un tiempo de retardo.

Ajustes opcionales para avisos analógicos
Ajustar un tiempo de retardo

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

843

Trabajar con avisos
3.2 Trabajar con avisos
Para visualizar el aviso con retardo, proceda del siguiente modo:
1. Seleccione el aviso analógico.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Disparador".
3. En "Retardo" introduzca un intervalo de tiempo. Dentro de este período debe cumplirse la
condición de disparo para que se dispare el aviso.
Configurar una zona muerta
Para introducir un rango de tolerancia cuando un aviso aparece y desaparece, proceda del
siguiente modo:
1. Seleccione el valor límite al que debe asignarse la zona muerta.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Disparador".
3. En "Zona muerta > Modo" seleccione con qué modificación del estado de aviso se tendrá
en cuenta la zona muerta.
4. Introduzca un valor constante en "Zona muerta > Valor".
5. Active "%" para establecer que el valor de la zona muerta se indique como porcentaje del
valor límite.
Guardar el estado del aviso
Para guardar los estados de un aviso en una variable, proceda del siguiente modo:
1. Seleccione el aviso analógico.
2. En "Propiedades > Propiedades > Estado" de la ventana de inspección, seleccione la
variable y el bit que guarda los estados de aviso aparecidos/desaparecidos y la solicitud de
acuse.
Ajustar la prioridad
Para ajustar la prioridad, proceda del siguiente modo:
1. Seleccione el aviso analógico.
2. Seleccione un valor entre 0 y 16 en "Propiedades > Propiedades > General > Prioridad" de
la ventana de inspección.
Si el visor de avisos se filtra por prioridades, el aviso de prioridad 0 aparece en primer lugar.
Crear un texto de ayuda
1. Seleccione el aviso analógico.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Tooltip" e
introduzca el texto deseado.
Configurar tareas controladas por eventos
Para configurar tareas controladas por eventos, p. ej. un "Loop-In-Alarm", proceda del
siguiente modo:
1. Seleccione el aviso analógico.
2. En la ventana de inspección seleccione "Propiedades > Eventos" y configure una lista de
funciones para el evento deseado.

844

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Consulte también
Configurar el acuse del avisador central (Página 917)
Configurar el registro de avisos (Página 910)
Configurar el acuse de un aviso (Página 914)
Visualizar parámetros en un aviso analógico (Página 845)
Configurar Loop-In-Alarm (Página 863)
Avisos en el editor "Variables HMI" (Página 864)
Configurar la visualización inhibida de avisos (Página 895)
Resumen de la configuración de avisos (Página 813)

Visualizar parámetros en un aviso analógico
Introducción
En un aviso analógico se inserta el correspondiente campo de salida para visualizar
parámetros de sistema y de aviso.
● Como parámetros de aviso se puede seleccionar "Valor límite", "Banda muerta" o "Valor
actual".
● Como parámetros de sistema se pueden seleccionar los bloques de sistema siguientes:
– Aplicación
– Nombre de usuario
– Nombre de equipo
– Comentario

Requisitos
● El editor "Avisos HMI" está abierto.
● El aviso analógico está seleccionado.

Procedimiento
Para visualizar un parámetro en el texto de aviso, proceda del siguiente modo:
1. Sitúe el cursor en la posición deseada del texto de aviso.
2. Para visualizar un parámetro de aviso, seleccione "Insertar campo de parámetro" en el
menú contextual.
-OPara visualizar un parámetro de sistema, seleccione "Insertar parámetro de sistema" en el
menú contextual.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

845

Trabajar con avisos
3.2 Trabajar con avisos
3. Determine el tipo de aviso, la longitud, el número de decimales y la alineación del campo de
salida para el parámetro de aviso.
Para visualizar los ceros a la izquierda en el campo de salida, active "Ceros a la izquierda".
4. Haga clic en el símbolo

para guardar las entradas.

WinCC inserta un comodín en el texto de aviso para el campo de salida:
● Para el parámetro de aviso: "<tag: n, [###]>" donde n = longitud del texto en caracteres.
● Para parámetros de sistema; "<Nombre del parámetro de sistema>"
Nota
Si prueba un proyecto con el simulador, los valores de los campos de salida no aparecerán
en los textos de los avisos.

Borrar parámetros del texto de aviso
Para borrar un campo de salida del texto de aviso, proceda del siguiente modo:
● Seleccione el campo de salida en el texto de aviso y elija "Borrar" en el menú contextual.
Nota
El orden de los campos de salida en el texto de aviso depende del idioma. Al archivar avisos
en un fichero CSV se utiliza el orden del idioma de runtime.
Si se modifica la variable de un campo de salida en un idioma, en todos los demás idiomas el
campo de salida modificado figura al final del texto de aviso. De este modo cambia el orden de
los campos de salida en el fichero.
Nota
Para emitir un parámetro del sistema en el texto de aviso, no solo puede usarse el comando
de menú contextual "Insertar parámetro de sistema". También puede usar una instrucción de
formato que empiece y acabe con el carácter "@". Para emitir un parámetro de sistema en el
texto de aviso con ayuda de una instrucción de formato, introduzca en el lugar deseado del
texto de aviso una de las siguientes instrucciones de formato:
● @101%s@ = aplicación
● @102%s@ = nombre de usuario
● @100%s@ = nombre de equipo
● @103%s@ = comentario

846

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar avisos de bit
Configurar avisos de bit
Introducción
Los avisos de bit muestran cambios de estado en una instalación y son lanzados por el
controlador. Indican, p. ej., si una válvula está abierta o cerrada.
A continuación se describe la configuración en el editor "Avisos HMI". También es posible
configurar avisos de bit en el editor "Variables HMI".

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Procedimiento
Para configurar un aviso de bit, proceda del siguiente modo:
1. Haga clic en la ficha "Avisos de bit".
2. Para crear un aviso de bit, haga doble clic en "<Agregar>" en la tabla.
Se crea un aviso de bit.
3. En la ventana de inspección configure el aviso en "Propiedades > Propiedades > General":
– Modifique el nombre de objeto del aviso si fuese necesario.
– Seleccione la categoría y, dado el caso, el grupo de avisos.
– Para visualizar el número de la CPU o del PLC, introdúzcalo en "Conexión". Esta opción
sólo está activa cuando el bloque de aviso "Número de CPU/PLC" se ha activado en la
ficha "Bloques de aviso".
4. En la ventana de inspección, seleccione la variable y el bit que dispara el aviso en
"Propiedades > Propiedades > Disparador". Tenga en cuenta lo siguiente:
– Utilice el tipo de datos "Bool" "USInt", "UInt" o "UDInt".
– Utilice un bit de una variable de disparo sólo para un aviso.
– Utilice una variable de disparo únicamente como variable de disparo.
– Las áreas de entrada y de salida de una variable PLC no son adecuadas como
disparador.
Nota
Si el objeto deseado todavía no existe en la selección, créelo directamente en la lista de
objetos y modifique sus propiedades más adelante.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

847

Trabajar con avisos
3.2 Trabajar con avisos
Nota
Si se genera un aviso de bit copiando el texto de aviso y pegándolo en una fila nueva de la
tabla, el bit de disparo no se incrementa automáticamente. Asegúrese de no asignar el bit de
disparo varias veces.
Nota
Al indicar el bit, tenga en cuenta el modo de contaje de los bits en el controlador utilizado.
Encontrará más información al respecto en el apartado "Comunicación" de la Ayuda en
pantalla del controlador utilizado.
1. Determine en "Modo" si el aviso se dispara con flanco ascendente o descendente.
2. Configure el texto del aviso en "Propiedades > Propiedades > Textos de aviso".
– Introduzca el texto del aviso en "Texto del evento".
– En caso necesario, cree textos de aviso adicionales en "Textos adicionales".
– Utilice las funciones del menú contextual para formatear texto carácter por carácter y
para insertar campos de salida para parámetros.
Nota
Introduzca ahora textos adicionales en las líneas que ha activado como bloques de texto
de usuario en la ficha "Bloques de aviso".

Resultado
El aviso de bit se ha creado.

Ajustes adicionales para avisos de bit
Crear un texto de ayuda
Para dotar al aviso de un tooltip, proceda del siguiente modo:
1. Seleccione el aviso de bit.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Texto de ayuda" e
introduzca la ayuda deseada.
Activar parámetros para un aviso de bit
Para visualizar valores de proceso en un campo de salida del texto de aviso, asigne variables
a los bloques de parámetros. Para ello proceda del siguiente modo:
1. Seleccione el aviso.
2. En la ventana de inspección haga clic en "Propiedades > Propiedades > Parámetros de
aviso".

848

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
3. Introduzca un valor para el parámetro de aviso o seleccione una variable.
4. En caso necesario, introduzca varios parámetros para el aviso.
Los valores de proceso activados se introducen como campo de selección en un texto de
aviso o se visualizan como bloque de parámetros en el visor de avisos.
Nota
Para visualizar los valores de proceso como bloques de parámetros, éstos deben estar
activados en el visor de avisos.
Procese únicamente los bloques de parámetros que haya activado en la ficha "Bloques de
aviso" dentro de "Bloques de parámetros".
Guardar el estado del aviso
Para guardar los estados de un aviso en una variable, proceda del siguiente modo:
1. Seleccione el aviso de bit.
2. En "Propiedades > Propiedades > Estado" de la ventana de inspección, seleccione la
variable y el bit que guarda los estados de aviso aparecidos/desaparecidos y la solicitud de
acuse.
Configurar tareas controladas por eventos
Para configurar tareas controladas por eventos, p. ej., un "Loop-In-Alarm", proceda del
siguiente modo:
1. Seleccione el aviso de bit.
2. En la ventana de inspección seleccione "Propiedades > Eventos" y configure una lista de
funciones para el evento deseado.

Consulte también
Configurar el acuse de un aviso (Página 914)
Configurar el acuse del avisador central (Página 917)
Configurar Loop-In-Alarm (Página 863)
Avisos en el editor "Variables HMI" (Página 864)
Configurar la visualización inhibida de avisos (Página 895)
Configurar el registro de avisos (Página 910)
Resumen de la configuración de avisos (Página 813)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

849

Trabajar con avisos
3.2 Trabajar con avisos

Visualizar parámetros en un aviso de bit
Introducción
En un aviso de bit se inserta un campo de salida correspondiente para visualizar parámetros
de sistema y de aviso.
● Como parámetros de aviso se pueden seleccionar los parámetros configurados en
"Propiedades > Propiedades > Parámetros de aviso".
● Como parámetros de sistema se pueden seleccionar los bloques de sistema siguientes:
– Aplicación
– Nombre de usuario
– Nombre de equipo
– Comentario

Requisitos
● El editor "Avisos HMI" está abierto.
● El aviso de bit está seleccionado.

Procedimiento
Para visualizar un parámetro en el texto de aviso, proceda del siguiente modo:
1. Sitúe el cursor en la posición deseada del texto de aviso.
2. Para visualizar un parámetro de aviso, seleccione "Insertar campo de parámetro" en el
menú contextual.
-OPara visualizar un parámetro de sistema, seleccione "Insertar parámetro de sistema" en el
menú contextual.
3. Seleccione el parámetro deseado.

850

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
4. En caso necesario, determine además lo siguiente para los parámetros de aviso:
– La variable que suministra valores al parámetro.
Se insertará la variable que se haya configurado para el parámetro en "Propiedades >
Propiedades > Parámetros de aviso". WinCC actualiza la configuración de parámetros
en "Propiedades > Propiedades > Parámetros de aviso" cuando se quiere seleccionar
aquí otra variable.
– Tipo de aviso, longitud, número de decimales y alineación del campo de salida.
– Para visualizar los ceros a la izquierda en el campo de salida, active "Ceros a la
izquierda".
5. Haga clic en el símbolo

para guardar las entradas.

Nota
Si prueba un proyecto con el simulador, los valores de los campos de salida no aparecerán
en los textos de los avisos.

Nota
El orden de los campos de salida para variables en el texto de aviso depende del idioma. Al
archivar avisos en un fichero CSV se utiliza el orden del idioma de runtime.
Si se modifica la variable de un campo de salida en un idioma, en todos los demás idiomas el
campo de salida modificado figura al final del texto de aviso. De este modo cambia el orden de
los campos de salida en el fichero.
Nota
Para emitir un parámetro del sistema en el texto de aviso, no solo puede usarse el comando
de menú contextual "Insertar parámetro de sistema". También puede usar una instrucción de
formato que empiece y acabe con el carácter "@". Para emitir un parámetro de sistema en el
texto de aviso con ayuda de una instrucción de formato, introduzca en el lugar deseado del
texto de aviso una de las siguientes instrucciones de formato:
● @101%s@ = aplicación
● @102%s@ = nombre de usuario
● @100%s@ = nombre de equipo
● @103%s@ = comentario

Consulte también
Configurar avisos de bit (Página 847)
Configurar avisos de bit (Página 864)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

851

Trabajar con avisos
3.2 Trabajar con avisos

Configuración de avisos de usuario
Configurar aviso de usuario
Introducción
Utilice avisos de usuario para visualizar acciones de operador en runtime. Los avisos de
usuario se disparan con el número de aviso. Para otras aplicaciones definidas por el usuario,
configure avisos de usuario que se disparen con scripts en runtime.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.

Procedimiento
Para configurar un aviso de usuario, proceda del siguiente modo:
1. Haga clic en la ficha "Avisos de usuario".
2. Para crear un aviso de usuario, haga doble clic en "<Agregar>" en la tabla.
Se crea un aviso de usuario.
3. En la ventana de inspección configure el aviso en "Propiedades > Propiedades > General":
– Modifique el nombre de objeto del aviso si fuese necesario.
– Seleccione la categoría y, dado el caso, el grupo de avisos.
– Para visualizar el número de la CPU o del PLC, introdúzcalo en "Conexión". Esta opción
sólo está activa cuando el bloque de aviso "Número de CPU/PLC" se ha activado en la
ficha "Bloques de aviso".
4. Haga clic en "Textos de aviso" de la ventana de inspección y configure el texto de aviso.
– Introduzca el texto del aviso.
– En caso necesario, cree textos de aviso adicionales en "Textos adicionales".
– En caso necesario, inserte campos de salida en el texto de aviso o el texto adicional.
Nota
Introduzca ahora textos adicionales en las líneas que ha activado como bloques de texto
de usuario en la ficha "Bloques de aviso".

Resultado
El aviso de usuario está creado.

852

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Ajustes adicionales para avisos de usuario
Crear un tooltip
Para dotar al aviso de un tooltip, proceda del siguiente modo:
1. Seleccione el aviso de usuario.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Tooltip" e
introduzca el texto deseado.
Guardar el estado de aviso
Para guardar los estados de un aviso en una variable, proceda del siguiente modo:
1. Seleccione el aviso de usuario.
2. En "Propiedades > Propiedades > Estado" de la ventana de inspección seleccione la
variable y el bit que guarda los estados de aviso aparecidos/desaparecidos y la solicitud de
acuse.
Configurar tareas controladas por eventos
Para configurar tareas controladas por eventos, proceda del siguiente modo:
1. Seleccione el aviso de usuario.
2. En la ventana de inspección seleccione "Propiedades > Eventos" y configure una lista de
funciones para el evento deseado.

Consulte también
Configurar el acuse de un aviso (Página 914)
Configurar el acuse del avisador central (Página 917)
Configurar el acuse (Página 914)
Configurar bloques de aviso (Página 837)
Configurar la visualización inhibida de avisos (Página 895)

Visualizar parámetros en un aviso de usuario
Introducción
En un aviso de usuario se inserta un campo de salida correspondiente para visualizar
parámetros de sistema y de aviso.
● Como parámetros de sistema se pueden seleccionar los bloques de sistema siguientes:
– Aplicación
– Nombre de usuario
– Nombre de equipo
– Comentario
● Los parámetros de aviso se configuran en el script con el que se dispara el aviso de usuario
en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

853

Trabajar con avisos
3.2 Trabajar con avisos

Requisitos
● El editor "Avisos HMI" está abierto.
● El aviso de usuario está seleccionado.

Procedimiento
Para visualizar un parámetro en el texto de aviso, proceda del siguiente modo:
1. Sitúe el cursor en la posición deseada del texto de aviso.
2. Para visualizar un parámetro de aviso, seleccione "Insertar campo de parámetro" en el
menú contextual.
-OPara visualizar un parámetro de sistema, seleccione "Insertar parámetro de sistema" en el
menú contextual.
3. Seleccione el parámetro deseado.
4. Haga clic en

para guardar las entradas.

Nota
Si prueba un proyecto con el simulador, los valores de los campos de salida no aparecerán
en los textos de los avisos.

Nota
El orden de los campos de salida para variables en el texto de aviso depende del idioma. Al
archivar avisos en un fichero CSV se utiliza el orden del idioma de runtime.
Si se modifica la variable de un campo de salida en un idioma, en todos los demás idiomas el
campo de salida modificado figura al final del texto de aviso. De este modo cambia el orden de
los campos de salida en el fichero.
Nota
Para emitir un parámetro del sistema en el texto de aviso, no solo puede usarse el comando
de menú contextual "Insertar parámetro de sistema". También puede usar una instrucción de
formato que empiece y acabe con el carácter "@". Para emitir un parámetro de sistema en el
texto de aviso con ayuda de una instrucción de formato, introduzca en el lugar deseado del
texto de aviso una de las siguientes instrucciones de formato:
● @101%s@ = aplicación
● @102%s@ = nombre de usuario
● @100%s@ = nombre de equipo
● @103%s@ = comentario

Consulte también
Ejemplo: Definir parámetros de aviso para un aviso de usuario (Página 856)

854

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Ejemplo: Configurar un disparador para un aviso de usuario
Tarea
En el siguiente ejemplo se configura un aviso de usuario que se dispara un runtime mediante
un botón.
En el evento "Hacer clic" de ese botón se configura un script. El script abre un número de aviso
y pone el aviso correspondiente en el estado "Aparecido".

Requisitos
● El editor "Avisos HMI" está abierto.
● La ventana de inspección está abierta.
● Hay abierta una imagen con un visor de avisos y un botón.

Procedimiento
1. Configure un aviso de usuario en el editor "Avisos HMI".

En este caso el aviso de usuario tiene el número de aviso "17".
2. En la imagen del evento "Hacer clic" del botón configure el siguiente script:

Sub onClick(byVal item)
Dim UserAlarm
Dim ID_UA
Dim State_UserAlarm
ID_UA = "17"
State_UserAlarm = "5"
Set UserAlarm = HMIRuntime.Alarms(ID_UA)
UserAlarm.State = state_UserAlarm
UserAlarm.Comment = "empty Comment"
UserAlarm.UserName = "Max Mustermann"
UserAlarm.Create "MyApplication"
End Sub

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

855

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Si el usuario hace clic en este botón en runtime, en el visor de avisos se muestra el aviso de
usuario configurado.

Consulte también
Ejemplo: Definir parámetros de aviso para un aviso de usuario (Página 856)

Ejemplo: Definir parámetros de aviso para un aviso de usuario
Tarea
En el siguiente ejemplo se configura un aviso de usuario que se dispara un runtime mediante
un botón. Para el aviso de usuario se definen parámetros de aviso que se emiten en el texto
del aviso.
En el evento "Hacer clic" de ese botón se configura la función de sistema C
"TriggerOperatorEvent". Esta función de sistema llama un número de aviso y transfiere los
siguientes parámetros:
● Nombre de variable como parámetro 1 en el texto del aviso
● Valor de inicio de la variable como parámetro 2 en el texto del aviso
● Valor de fin de la variable como parámetro 3 en el texto del aviso
Nota
Parámetros de aviso en el script
En WinCC existen diferentes funciones para definir parámetros de aviso, p. ej., la función
"MSRTCreateMsgInstanceWithCommentPlus" de la interfaz API de runtime.

Requisitos
● Hay abierta una imagen con un visor de avisos y un botón.
● Está configurado el aviso de usuario con el número de aviso 0x001 y utiliza el parámetro de
aviso 1 - 3 en el texto del aviso.
● La variable "HMI_Tag_1" del tipo "Integer" está configurada e interconectada.

Procedimiento
1. En la imagen del evento "Hacer clic" del botón configure el siguiente script:

Void SCFunction_1()
(

856

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

int a, b;
a = GetTagDWord ("HMI_Tag_1"); // old value
SetTagDWord("HMI_Tag_1", 100);
b = GetTagDWord ("HMI_Tag_1"); // new value
TriggerOperatorEvent(0x001, 1, "HMI_Tag_1", 0, a, b, "myComment");
}

Resultado
Si el usuario hace clic en este botón en runtime, en el visor de avisos se muestra el aviso de
usuario configurado. El nombre de la variable se devuelve como parámetro 1; los valores de
inicio y fin de las variables, como parámetros 2 y 3.

Consulte también
Ejemplo: Configurar un disparador para un aviso de usuario (Página 855)
Visualizar parámetros en un aviso de usuario (Página 853)

Configurar un texto de aviso
Introducción
El texto de un aviso se compone de texto del aviso, textos adicionales y campos de salida. El
texto del aviso y los textos adicionales son bloques de texto de usuario. Existe un total de 10
bloques de texto de usuario para un aviso.
Cada texto de aviso contiene hasta 255 caracteres y un número cualquiera de campos de
salida.

Requisitos
● El editor "Avisos HMI" está abierto.
● Los bloques de texto de usuario están activados en la ficha "Bloques de aviso".
● Se ha creado un aviso.

Procedimiento
Para agregar otros bloques de texto de usuario al texto de un aviso, proceda del siguiente
modo:
1. Seleccione el aviso que desee editar en la ficha correspondiente.
2. Introduzca el "Texto de aviso" en "Propiedades > Propiedades >Textos de aviso" de la
ventana de inspección.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

857

Trabajar con avisos
3.2 Trabajar con avisos
3. En caso necesario, inserte campos de salida en el texto de aviso.
4. Introduzca otro texto de aviso" en "Propiedades > Propiedades >Textos de aviso > Texto
adicional" de la ventana de inspección.
Dependiendo de qué bloques de texto de usuario se hayan activado en "Bloques de texto
de usuario" de la ficha "Bloques de aviso", se introducen otros textos adicionales.
Nota
Si el texto es demasiado largo para visualizarlo en el campo de entrada, desplácese hacia
. Se visualizan las líneas de texto adicionales.
arriba o abajo con el símbolo

Resultado
Se ha configurado el texto de aviso con textos adicionales para este aviso. Para visualizarlo en
runtime, active estos bloques de texto de usuario en un visor de avisos.

Consulte también
Configurar avisos analógicos (Página 841)
Configurar avisos de bit (Página 847)

Editar avisos de sistema
Introducción
Los avisos de sistema sólo pueden modificarse de forma limitada. No es posible borrarlos ni
crear nuevos.

Requisitos
● Los avisos de sistema están importados.
● El editor "Avisos HMI" está abierto.

Procedimiento
Para configurar avisos de sistema, proceda del siguiente modo:
1. Haga clic en la ficha "Avisos de sistema".
2. Seleccione el aviso de sistema que desea editar.
3. Dado el caso, modifique las propiedades editables en la ventana de inspección.
4. Seleccione el aviso de sistema que desea editar.
5. Dado el caso, modifique las propiedades editables en la ventana de inspección.

858

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar tareas controladas por eventos
Para configurar tareas controladas por eventos, proceda del siguiente modo:
● Configure una lista de funciones para el evento deseado en "Propiedades > Eventos".

Editar avisos de controlador
Introducción
Los avisos de controlador se configuran en STEP 7. Cuando WinCC funciona en el entorno de
STEP 7, están disponibles los avisos de controlador en WinCC.
En WinCC se editan solo las propiedades específicas del panel de operador para los avisos de
controlador. En función del panel de operador y del controlador, pueden editarse propiedades
distintas de un aviso de controlador.
En caso necesario, los avisos de controlador mostrados se filtran para el proyecto con los
discriminadores configurados en el controlador para los avisos de controlador.
Nota
Si está ajustada la "Actualización automática" de avisos de controlador para la conexión con
el controlador S7-1500, no pueden editarse las propiedades de los avisos de controlador
correspondientes. En este caso, los avisos de controlador no se muestran en el editor "Avisos
HMI".

Requisitos
● Se ha establecido una conexión con el controlador.
● Se han configurado avisos en STEP 7.

Editar avisos de controlador
Para editar avisos de controlador, proceda del siguiente modo:
1. Haga doble clic en "Avisos HMI" en el árbol del proyecto.
El editor "Avisos HMI" se abre.
2. Abra la ficha "Avisos de controlador".
3. En el área de trabajo seleccione el aviso que desea modificar.
4. Realice los cambios deseados. Según sea el panel de operador no se mostrarán ni podrán
activarse todas las propiedades del aviso de controlador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

859

Trabajar con avisos
3.2 Trabajar con avisos

Editar avisos SIMATIC S7
En caso necesario, los avisos de controlador se editan en la configuración de avisos de
STEP 7. Para ello proceda del siguiente modo:
1. En el área de trabajo seleccione el aviso que desea modificar.
2. En el menú contextual, elija "Abrir en el editor de avisos del controlador".
Se abrirá la configuración de avisos de STEP 7.
3. Realice los cambios deseados.

Filtrar un aviso de controlador con discriminadores
Para filtrar avisos de controlador con los discriminadores, proceda del siguiente modo:
1. Haga clic en "Configuración de runtime > Avisos" en el árbol del proyecto de su panel de
operador.
En "Avisos de controlador" se muestran una o varias conexiones con un controlador.
2. Seleccione para la conexión los discriminadores cuyos avisos de controlador desea
visualizar.
Nota
Avisos del controlador tras sustituir un Basic Panel
Para que tras sustituir un Basic Panel por un Comfort Panel, Mobile Panel o WinCC RT
Advanced ("Vista de dispositivos > Sustituir dispositivo"), se muestren los avisos del
controlador (avisos de supervisión PLC, avisos del programa o sistema), es preciso activar el
ajuste "Discriminadores" para las respectivas conexiones en "Configuración de runtime >
Avisos > Avisos de controlador“.

Resultado
En la ficha "Avisos de controlador" del editor "Avisos HMI" se muestran sólo los avisos de
controlador cuyo discriminador se ha activado para el panel de operador.

Consulte también
Avisos de controlador (Página 791)
Enviar aviso completo del controlador al panel de operador y actualizar automáticamente
(Página 985)

Configurar avisos de operador
Introducción
Existe la posibilidad de activar un aviso de operador durante la operación del proceso. La
configuración de un aviso de operador depende del objeto manejado, así como del tipo de
operación.

860

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
Para manejar algunos objetos, p. ej. la entrada de un valor en un campo de E/S o un cuadro
de lista, puede activarse la propiedad "Informe de operación" en estos objetos. La estructura
del aviso no puede editarse en el informe de operación. El informe de operación contiene en
el bloque de valores de proceso 2 el valor previo a la operación y, en el bloque de valores de
proceso 3, el valor modificado.
La propiedad "Consultar motivo" determina si el operador registrará el motivo de una
operación. Si se activa esta opción, el usuario puede introducir en un cuadro de diálogo el
motivo (la causa) de la operación como comentario del aviso. El informe de manejo se archiva
en el sistema de avisos. El motivo se indica como comentario del aviso de operador en la lista
de ficheros a largo plazo. En el cuadro de diálogo del comentario se indican el valor antiguo y
el valor nuevo exclusivamente para el aviso de operador "12508141".

Requisitos
● El editor "Imágenes" está abierto.
● Se ha creado un campo E/S.
● El objeto está asociado a una variable.

Procedimiento
1. Seleccione el campo E/S.
2. En la ventana de inspección, haga clic en "Propiedades > Propiedades > Seguridad".
3. Para utilizar avisos de operador para el objeto, active la opción "Archivar > Informe de
operación".
4. Si quiere registrar la causa de la operación, active la propiedad "Consultar motivo".

Resultado
Cuando el usuario ejecute una acción de operador en el campo E/S en runtime, se activará el
aviso de operador. Al manejar el objeto se abre un cuadro de diálogo en runtime, en el que el
operador puede introducir un texto.

Consulte también
Cuadro de lista (Página 426)
Campo E/S simbólico (Página 501)
Cuadro combinado (Página 410)
Barra de desplazamiento (Página 358)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

861

Trabajar con avisos
3.2 Trabajar con avisos

Configurar aviso de operador para un visor de avisos
Introducción
Los avisos de operador para el visor de avisos son avisos de sistema preconfigurados. Los
avisos de sistema se administran en el editor "Avisos HMI". La activación del aviso de operador
se configura para el visor de avisos en el editor "Imágenes".

Requisitos
● Los avisos de sistema del panel de operador se han importado.
● El editor "Imágenes" está abierto.
● Se ha creado un objeto "Visor de avisos".
● Se activan bloques de aviso en el editor "Avisos HMI".

Procedimiento
Para configurar avisos de operador para un visor de avisos, proceda del siguiente modo:
1. Seleccione el visor de avisos.
2. Haga clic en "Propiedades > Propiedades > Aviso de operador" de la ventana de inspección.
3. Active en el visor de avisos las acciones de operador para las que debe visualizarse un
aviso de operador.
En el campo de salida "Número de aviso" se visualiza el número del aviso de operador
preconfigurado para esta acción.
4. Para visualizar otro aviso en esta acción de operador, introduzca el número del aviso
deseado.
5. Para establecer las columnas visualizadas en el aviso de operador, seleccione el botón
en "Bloques de aviso".
Se abre un cuadro de diálogo.
6. En "Bloque de aviso" active los bloques de aviso que deban visualizarse con el aviso de
operador.
7. En "Bloques del aviso de operador" determine qué bloques de aviso deben visualizarse con
el aviso de sistema. En "Salida en forma de" determine si el contenido del bloque de aviso
debe visualizarse como texto o como valor.
Nota
El aviso de sistema y su número se encuentran en la ficha "Avisos de sistema" del editor
"Avisos HMI".

Resultado
Si el usuario ejecuta una acción de operador en el visor de avisos en runtime, se visualiza el
aviso de operador configurado.

862

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

3.2.2.7

Configurar Loop-In-Alarm

Introducción
Para cambiar después de un aviso entrante a una imagen que contenga información sobre el
error acaecido, se debe configurar una Loop-In-Alarm.
Nota
La imagen que muestra la información sobre el error la configura el propio usuario. No existen
imágenes estándar que se visualicen automáticamente en función del aviso de error
seleccionado.

Requisitos
● La imagen que llama el Loop-In-Alarm está creada.
● El editor "Avisos HMI" está abierto.

Procedimiento
Para configurar un Loop-In-Alarm para un aviso, proceda del siguiente modo:
1. Haga clic en la ficha que contiene el aviso para el que desea configurar el Loop-In-Alarm.
2. Seleccione el aviso.
3. Elija en la ventana de inspección "Propiedades > Eventos > Loop-In-Alarm".
4. Seleccione la función de sistema "ActivarImagen".
5. Seleccione como parámetro la imagen que debe llamarse con la Loop-In-Alarm .

Nota
Para configurar el Loop-In-Alarm para un visor de avisos con la característica "Línea de
avisos", utilice un botón con las siguientes funciones de sistema:
● "EditarAviso" para paneles de operador con teclas
● "VisorDeAvisosEditarAviso" para paneles de operador sin teclas
Estas funciones de sistema lanzan el evento "Loop-In-Alarm". La línea de avisos no tiene
botones.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

863

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Si se selecciona un aviso en el visor de avisos en runtime y se hace clic en el botón "Loop-InAlarm", se abre una imagen con información sobre el aviso seleccionado.
La primera que se pulsa vez el botón "Loop-In-Alarm" se acusa recibo solamente de un aviso
de acuse obligatorio (si lo hay), aunque estén seleccionados varios avisos. Las funciones de
sistema asociadas al evento de aviso "Loop-In-Alarm" se ejecutan siempre, tanto si el aviso es
de acuse obligatorio como si no.
Al volver a pulsar el botón "Loop-In-Alarm" se ejecutan solo las funciones de sistema
asociadas al evento de aviso "Loop-In-Alarm".
Nota
Si no hay ninguna Loop-In-Alarm configurada para el aviso seleccionado, la pulsación del
botón "Loop-In-Alarm" carece de efecto.

Consulte también
Manejar la ventana de avisos, visor de avisos (Página 954)
Manejar el visor de avisos simple, la ventana de avisos (Página 958)
Visor de avisos (Página 965)
Configurar avisos analógicos (Página 841)
Configurar avisos de bit (Página 847)

3.2.2.8

Avisos en el editor "Variables HMI"

Configurar avisos de bit
Introducción
En WinCC también pueden crearse y editarse avisos de bit y analógicos junto con las variables
de disparo en el editor "Variables HMI".
Nota
Si se borra, mueve o copia en el editor "Variables HMI", los cambios afectan también al editor
"Avisos HMI".

Requisitos
El editor "Variables HMI" está abierto.

864

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar un aviso de bit, proceda del siguiente modo:
1. Para crear una variable, haga clic en "<Agregar>" en la tabla de la parte superior del área
de trabajo.
Se crea una nueva variable.
2. Según precise, configure una variable interna o externa.
– Si elige una variable HMI, utilice los tipos de datos "Int" o "UInt".
– Si elige una variable PLC, utilice los tipos de datos "Int" o "Word". Las áreas de entrada
y de salida de una variable PLC no son adecuadas como disparador.
3. Seleccione la variable en la parte superior del área de trabajo.
4. En la parte inferior del área de trabajo de la ficha "Avisos de bit", haga clic en "<Agregar>"
en la tabla.
Se crea un aviso de bit para la variable. Si se ha seleccionado el tipo de datos erróneo, la
variable se marca en el aviso de bit.
5. Configure el aviso de bit en la ventana de inspección:
– Introduzca el texto de aviso deseado en "Propiedades > Propiedades > General > Texto
de aviso".
En caso necesario, inserte campos de salida en el texto de aviso.
– Seleccione una categoría.
– En "Propiedades > Propiedades > Disparador", seleccione el bit de disparo de la
variable que dispara el aviso de bit.
6. En caso necesario, cree otros avisos de bit para vigilar las variables.
Nota
Una variable sólo se vigila con un procedimiento de aviso. Así pues, cree para una variable
bien avisos analógicos bien avisos de bit.

Resultado
Los avisos de bit configurados están creados en el editor "Variables HMI" y se muestran en los
editores "Avisos HMI" y "Variables HMI".

Consulte también
Configurar avisos de bit (Página 828)
Visualizar parámetros en un aviso analógico (Página 845)
Trabajar con variables (Página 548)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

865

Trabajar con avisos
3.2 Trabajar con avisos

Configurar avisos analógicos
Introducción
En WinCC se crean avisos de bit y analógicos junto con las variables de disparo en el editor
"Variables HMI". Además, los avisos se procesan como en el editor "Avisos HMI". Para una
variable se crean dos valores de rango que se vigilan con avisos analógicos.

Requisitos
El editor "Variables HMI" está abierto.

Procedimiento
Para configurar un aviso analógico en el editor "Variables HMI", proceda del siguiente modo:
1. Para crear una variable, haga clic en "<Agregar>" en la tabla de la parte superior del área
de trabajo.
Se crea una nueva variable.
2. Según precise, configure una variable interna o externa.
3. Configure los valores de rango de la variable en "Propiedades > Propiedades > Rango" de
la ventana de inspección:
– Para los valores de rango deseados, elija si se va a utilizar una "Constante" o una
"Variable_HMI" como valor límite. Si se ha seleccionado "Variable_HMI" se abre la lista
de objetos. Seleccione la variable deseada.

1. En la parte inferior del área de trabajo haga clic en la ficha "Avisos analógicos".
Cree un aviso analógico para ambos valores de rango.
2. Seleccione un aviso analógico y configúrelo en la ventana de inspección:
– Introduzca el texto de aviso deseado en "Propiedades > Propiedades > General > Texto
de aviso".
– En caso necesario, inserte campos de salida en el texto de aviso.
– Modifique la categoría predeterminada en caso necesario.

866

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
3. Continúe la configuración de los avisos analógicos como en el editor "Avisos HMI".
4. Prosiga hasta haber configurado todos los avisos analógicos.
Nota
Una variable sólo se vigila con un procedimiento de aviso. Así pues, para una variable
deben crearse avisos analógicos o avisos de bit.

Resultado
Los avisos analógicos configurados están creados en el editor "Variables HMI" y se muestran
en los editores "Avisos HMI" y "Variables HMI".

Consulte también
Visualizar parámetros en un aviso analógico (Página 845)
Configurar avisos analógicos (Página 841)
Trabajar con variables (Página 548)

3.2.3

Configurar la salida de avisos

3.2.3.1

Resumen de cómo configurar la salida de avisos

Pasos necesarios para configurar la salida de avisos
La salida de avisos se configura en WinCC siguiendo los pasos siguientes:
1. Crear un visor de avisos
Para visualizar avisos en runtime se utilizan los objetos de manejo y visualización del editor
"Imágenes". También se configura un visor para avisos archivados.
2. Configurar el acuse
En el editor "Imágenes" se configura la acción que disparará el acuse.
3. Configurar la generación de informes
Para imprimir avisos en runtime se crean informes en el editor "Informes". En los editores
"Planificador de tareas", "Imágenes", "Avisos HMI" o "Variables HMI" se determina cuándo
se lanzará la impresión de un informe y cómo.
Nota
Dependencia del panel
El registro y la archivación no están disponibles para todos los paneles de operador.
Nota
Tenga en cuenta que al imprimir directamente los avisos en runtime, solo se soportan
caracteres ASCII.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

867

Trabajar con avisos
3.2 Trabajar con avisos

Pasos de configuración avanzados
En función de las exigencias del proyecto se requerirán más pasos para configurar el visor de
avisos:
1. Configurar autorizaciones
Para garantizar que sólo los usuarios autorizados editan los avisos, asigne autorizaciones
al visor de avisos y las teclas de función del panel de operador.
2. Configurar filtros en el visor de avisos
En el editor "Imágenes" se configura el filtro de los avisos en runtime. En caso necesario
también se configuran visores de avisos que muestran sólo los avisos seleccionados.
3. Configurar avisos de bit
En el editor "Imágenes" configure avisos de bit en los elementos de control del equipo de
manejo y visualización. Con una acción del operador se visualizará un aviso de bit
preconfigurado. Una acción es p. ej. el acuse de un aviso.

Consulte también
Configuración del visor de avisos (Página 868)
Configuración del visor de avisos (Página 884)
Registrar avisos (Página 908)

3.2.3.2

Configuración del visor de avisos

Visualización de los avisos
Posibilidades para visualizar avisos en el panel de operador
WinCC ofrece las siguientes posibilidades para visualizar avisos en el panel de operador:
● Visor de avisos
El visor de avisos se configura en una imagen. En función del tamaño configurado, muestra
varios avisos a la vez. Es posible configurar varios visores de avisos de distinto contenido.
● Ventana de avisos
La ventana de avisos se configura en el editor "Imagen general". En función del tamaño
configurado, la ventana de avisos muestra varios avisos a la vez. En caso necesario, la
ventana de avisos se puede cerrar y volver a abrir en función de un evento. Para ocultarla
selectivamente en la configuración, cree una ventana de avisos en un nivel propio.

868

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Señales adicionales
● Indicador de avisos
El indicador de avisos es un símbolo gráfico configurable. Cuando llega un aviso, se
muestra el indicador de avisos en el panel de operador. El indicador de avisos se configura
en el editor "Imagen general".
El indicador de avisos tiene dos estados:
– Intermitente: Hay como mínimo un aviso de acuse obligado.
– Estático: Los avisos se han acusado, pero al menos uno de ellos no ha desaparecido
todavía.
En función del panel de operador, el indicador de avisos muestra también el número de
avisos pendientes.
● Notificación por correo electrónico
Para informar p. ej. a un técnico, además del usuario, de la aparición de avisos de una
categoría determinada, asigne una dirección de correo electrónico a la categoría.
Nota
Dependencia del equipo
La notificación por correo electrónico no está disponible para todos los paneles de operador.
● Funciones de sistema
En un evento de un aviso se configura una lista de funciones que se ejecutará cuando se
produzca el evento en runtime.
Para no manejar el visor de avisos o la ventana de avisos con la barra de herramientas,
utilice funciones de sistema para avisos en WinCC.

Visualización de las categorías predefinidas en runtime
La tabla siguiente muestra los símbolos con los que se representan las categorías predefinidas
en el visor de avisos:
Categoría

Símbolo visualizado

"Diagnosis Events"

S7

"Errors"

!

"Sistema"

$

"Warnings"

<ningún símbolo>

Consulte también
Funciones de sistema para avisos (Página 989)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

869

Trabajar con avisos
3.2 Trabajar con avisos

Configurar el visor de avisos
Configurar el visor de avisos actuales
Introducción
Los avisos actuales se visualizan en runtime en un visor o en una ventana de aviso.

Requisitos
● Hay una imagen abierta en el editor "Imágenes".
● La Task Card "Herramientas" está abierta.

870

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar avisos para el visor de avisos
Para determinar qué avisos aparecerán en el visor, proceda del siguiente modo:
1. Inserte el objeto "Visor de avisos" en la imagen desde la Task Card "Herramientas".
2. Seleccione el visor de avisos.
– Seleccione en la ventana de inspección "Propiedades > Propiedades > General >
Visualización > Estados de aviso actuales".
Dado el caso, determine si se visualizarán avisos de acuse obligado o avisos sin
obligación de acuse.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

871

Trabajar con avisos
3.2 Trabajar con avisos
– Para visualizar todos los avisos que se encuentran en el búfer de avisos, active "Búfer
de avisos".

872

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
3. Active en la tabla las categorías que se van a visualizar en el visor de avisos.
4. En "Propiedades > Propiedades > Visualización > Variable de control para el área de
visualización" defina la variable que transfiere la fecha a partir de la que se visualizarán los
avisos.
Nota
Dependencia del dispositivo
La propiedad "Variable de control para área de visualización" no está disponible para todos
los paneles de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

873

Trabajar con avisos
3.2 Trabajar con avisos

Configurar la representación del visor de avisos
Para determinar cómo se representarán los avisos en el visor, proceda del siguiente modo:
1. En "Propiedades > Propiedades > Representación > Configuración > Filas por aviso" de la
ventana de inspección, determine el número de filas que se deben visualizar en cada aviso.
2. En "Propiedades > Propiedades > Visualización", seleccione los elementos de control
disponibles en el panel de operador.
3. Configure las columnas en "Propiedades > Propiedades > Columnas":
– En "Columnas visibles" seleccione las columnas que se verán en el visor de avisos.
– En "Propiedades de columnas", determine las propiedades de las columnas.
– En "Ordenar", elija el orden de clasificación de los avisos.

Nota
Si selecciona el comando "Edición" del menú contextual del visor de avisos, ésta se
activará. En el modo activo se ajusta el ancho y la posición de las columnas. Para activar
el visor de avisos, ajuste el factor de zoom al 100 %.
El visor de avisos se desactiva en cuanto se deselecciona el objeto en la imagen.

Resultado
Los avisos de distintas categorías se visualizarán en runtime en el visor de avisos.

874

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Consulte también
Crear categorías (Página 814)
Configurar la ventana de avisos (Página 877)
Mostrar avisos archivados (Página 883)

Configurar un visor de avisos para avisos de diagnóstico S7
Introducción
Para visualizar avisos de diagnóstico S7, configure un visor o una ventana de avisos para la
categoría predefinida "Diagnosis Events". Para ello, active los avisos de diagnóstico en la
configuración de runtime de su panel de operador.
Nota
Dependencia del panel
● La categoría "Diagnosis Events" no está disponible para todos los paneles de operador.
● Los avisos de controlador definidos por el sistema del tipo "Aviso de diagnóstico SIMATIC
S7" solo pueden activarse para su panel de operador cuando la conexión se establece con
un controlador SIMATIC S7-300/400.

Nota
Utilización del visor de diagnóstico del sistema y/o de la ventana de diagnóstico del sistema
A partir del momento en que hay un visor de diagnóstico del sistema o una ventana de
diagnóstico del sistema en el proyecto HMI, todos los textos de aviso de los objetos de imagen
se descargan en el diagnóstico del sistema y se utilizan allí. Por ello, la opción "Configuración
de runtime > Avisos > Avisos de sistema > Mostrar texto de aviso" no tiene efecto y se
considera siempre activada cuando se utiliza el visor de diagnóstico del sistema o la ventana
de diagnóstico del sistema. El tamaño del archivo runtime no puede reducirse en este caso
desactivando la opción.

Requisitos
● Hay un visor o una ventana de aviso configurados en el editor "Imágenes"
● Se ha creado una conexión con un controlador SIMATIC S7-300/400.

Configuración de la visualización de avisos de diagnóstico S7
Para configurar la visualización de avisos de diagnóstico S7, proceda del siguiente modo:
1. Seleccione "Configuración de runtime > Avisos" en el árbol del proyecto.
2. Active la casilla de verificación "Avisos de diagnóstico S7 (número)" en "Avisos de sistema".
3. Para visualizar los avisos de diagnóstico S7 con texto, active "Mostrar texto de aviso".
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

875

Trabajar con avisos
3.2 Trabajar con avisos
4. Abra la imagen con el visor de avisos y seleccione el visor de avisos.
5. Active "Diagnosis Events" en la ventana de inspección "Propiedades > Propiedades >
General > Visualización > Categoría".

6. Continúe la configuración del visor de avisos como para visualizar los avisos actuales.

Resultado
En runtime se muestran en el visor de avisos los avisos de diagnóstico S7 del controlador.

Configurar visor de avisos archivados
Introducción
Los avisos archivados se visualizan en un visor de avisos en runtime o en una ventana de
avisos.

Requisitos
● Hay un visor o una ventana de aviso configurados en el editor "Imágenes"
● Se ha creado un fichero de avisos en el editor "Ficheros".
● Se han configurado avisos en el editor "Avisos HMI" como "archivables".

876

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar visor de avisos archivados
Para configurar la visualización de avisos archivados en un visor, proceda del siguiente modo:
1. Abra la imagen con el visor de avisos y seleccione el visor de avisos.
2. En la ventana de inspección active "Propiedades > Propiedades > General > Fichero de
avisos".
3. Haga clic en el botón "..." y seleccione el fichero de avisos.
4. Continúe la configuración del visor de avisos como para visualizar los avisos actuales.

Resultado
Los avisos archivados se visualizan en runtime en el visor de avisos.

Configurar la ventana de avisos
Introducción
La ventana de avisos muestra los avisos actuales. La ventana de avisos se configura en el
editor "Imagen general". La ventana de avisos no está asignada a ninguna imagen.
Dependiendo de la configuración, la ventana de avisos se abre cuando hay un aviso pendiente
que pertenece a una determinada categoría. Según la configuración, no volverá a cerrarse
hasta que se haya acusado el aviso. El panel de operador se puede seguir utilizando aunque
haya avisos pendientes y visualizados. Una ventana de avisos se representa y configura como
un visor de avisos.
Para ocultarla selectivamente en la configuración, créela en un nivel propio.

Requisitos
● El editor "Imagen general" está abierto.
● La Task Card "Herramientas" se visualiza.
● La ventana de inspección está abierta.

Procedimiento
Para configurar una ventana de avisos, proceda del siguiente modo:
1. Inserte el objeto "Ventana de avisos" en la imagen global desde la Task Card
"Herramientas".
2. La ventana de avisos se configura igual que un visor de avisos.
3. En "Propiedades > Propiedades > Modo > Ventana" de la ventana de inspección,
seleccione el comportamiento y el manejo de la ventana de avisos en runtime.
– Si la ventana de avisos debe permanecer enfocada en runtime al cambiar de imagen,
active "Modal".
Esta opción es importante puesto que no se asiste la conmutación entre la imagen y las
diversas ventanas mediante <Ctrl+Tab>.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

877

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Los avisos de la categoría seleccionada se visualizarán en runtime en la ventana de avisos.

Consulte también
Configurar el visor de avisos actuales (Página 870)
Crear categorías (Página 814)

Configurar el indicador de avisos
Introducción
El indicador de avisos indica mediante un triángulo de advertencia que hay avisos pendientes
o que se deben acusar. El indicador de avisos se visualizará cuando se reciba un aviso de una
categoría configurada con dicho indicador.
El indicador de avisos tiene dos estados:
● Intermitente: Hay como mínimo un aviso de acuse obligado.
● Estático: Por lo menos uno de los avisos acusados no se ha desactivado todavía.
En caso necesario, durante la configuración puede determinarse que la ventana de avisos se
abra en runtime cuando el usuario accione el indicador de avisos.

Requisitos
● El editor "Imagen general" está abierto.
● La Task Card "Herramientas" está abierta.
● La ventana de inspección está abierta.

Procedimiento
Para configurar el indicador de avisos, proceda del siguiente modo:
1. Inserte el objeto "Visor de avisos" en el área de trabajo desde la Task Card "Herramientas".
2. Seleccione el indicador de avisos.

878

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
3. En "Propiedades > Propiedades > General" de la ventana de inspección, seleccione las
categorías que deben visualizarse con el visor de avisos.
Indique si los avisos pendientes y/o acusados se deben visualizar con el visor de avisos.

4. Configure en "Propiedades > Evento" la función de sistema "MostrarVentanaDeAvisos"
asociada a un evento del visor de avisos.
Nota
Si ha configurado un área permanente en la imagen o en la plantilla, no posicione la ventana
de avisos ni el visor de avisos en el espacio del área permanente. Si lo hace, la ventana de
avisos y el visor de avisos no se verán en runtime. Sin embargo, el área permanente no se
ve en el editor "Imagen general".

Resultado
Si en runtime hay avisos de la categoría seleccionada pendientes o que deben acusarse, se
mostrará el visor de avisos. Cuando el usuario accione el visor de avisos, se abrirá la ventana
de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

879

Trabajar con avisos
3.2 Trabajar con avisos

Configurar el filtro de avisos
Introducción
En caso necesario, la visualización de avisos se filtra en el visor de avisos avanzado. El criterio
es siempre una cadena de caracteres. Existen las dos posibilidades siguientes para filtrar el
visor de avisos:
● En WinCC se ha configurado un criterio fijo.
En runtime se muestran todos los avisos que contienen la cadena de caracteres completa
en su texto.
● El operador filtra el visor de avisos en runtime.
Con una variable de filtro, el visor de avisos recibe en runtime la cadena de caracteres
deseada desde un campo E/S, p. ej. del modo descrito a continuación.
El filtro actúa sobre la representación en el visor de avisos. Todos los avisos del búfer se
conservan.

Requisitos
● Se ha configurado un visor de avisos.
● La imagen con el visor de avisos está abierta.
● La ventana de inspección está abierta.

880

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar un filtro para una cadena de caracteres fija
1. Seleccione el visor de avisos.
2. Seleccione "Propiedades > Propiedades > Filtro de avisos" en la ventana de inspección.
3. Introduzca la cadena de caracteres deseada para el filtro en "Secuencia de caracteres de
filtro".

Resultado
En runtime se visualizarán sólo los avisos cuyo texto incluye la cadena de caracteres completa
del filtro.

Configurar un filtro para una cadena de caracteres variable
1. Seleccione el visor de avisos.
2. En la ventana de inspección seleccione"Propiedades > Propiedades > Filtro".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

881

Trabajar con avisos
3.2 Trabajar con avisos
3. Seleccione una variable en "Variable de filtro". La variable debe ser del tipo "String".
4. Configure en la imagen un campo E/S en el que se introduzca una cadena de caracteres
como filtro en runtime.
– En la ventana de inspección seleccione "Propiedades > Propiedades > General >
Formato > Formato de visualización > Cadena de caracteres".
– Para vincular el campo E/S con el visor de avisos, seleccione en "Proceso" la variable
de filtro que se haya seleccionado para el visor de avisos.

Resultado
Cuando introduzca una cadena de caracteres en el campo E/S en runtime, el visor de avisos
mostrará sólo los avisos cuyo texto incluya la cadena de caracteres completa.

882

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
Si se han configurado una cadena de caracteres fija y una variable de filtro, los avisos se
filtrarán en runtime según el contenido de la variable de filtro. Si la variable de filtro está vacía,
se filtrará según la cadena de caracteres fija.
Nota
Para los siguientes visores de avisos no es posible configurar un filtro:
● Visor de avisos simple
● Línea de avisos
● Ventana de avisos
● Visor de avisos archivados

Consulte también
Trabajar con variables (Página 548)

Mostrar avisos archivados
Introducción
Los avisos archivados se visualizan en un visor de avisos en runtime. El visor de avisos
muestra el contenido de un fichero de avisos.

Utilización
Al finalizar su turno, p. ej., un usuario se informa acerca del proceso ejecutado.

Requisitos
● Se deberá haber creado un fichero de avisos.
● Hay una imagen abierta.
● La ventana de inspección está abierta.

Procedimiento
Para configurar un visor de avisos para que muestre un fichero de avisos, proceda del
siguiente modo:
1. Configure un visor de avisos en una imagen.
2. Seleccione el fichero de avisos deseado en el área "Propiedades > Propiedades > General
> Visualización > Fichero de avisos" de la ventana de inspección.
En caso necesario, cree un fichero de avisos nuevo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

883

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Los avisos archivados del fichero seleccionado se visualizan en runtime en el visor de avisos.
Nota
En runtime se visualizan no sólo los textos de avisos archivados, sino también los textos de
avisos existentes en el proyecto actual. Los textos de avisos archivados están previstos
únicamente para la evaluación externa del fichero de avisos.
Si el fichero de avisos activo se ha creado con una configuración diferente a la actual, los textos
de aviso visualizados no concordarán con los que se han archivado.

Consulte también
Configurar el visor de avisos actuales (Página 870)

3.2.3.3

Configuración del visor de avisos

Visualización de los avisos
Posibilidades para visualizar avisos en el panel de operador
WinCC ofrece las siguientes posibilidades para visualizar avisos en el panel de operador:
● Visor de avisos pendientes y desaparecidos
El visor de avisos se configura para una imagen. En función del tamaño configurado,
muestra varios avisos a la vez. En caso necesario se configuran varios visores de avisos
con contenidos diversos en distintas imágenes. Para visualizar los avisos desaparecidos,
utilice los visores "Fichero de corto plazo" y "Fichero de largo plazo".
● Visor de avisos para valores estadísticos
El visor "Estadística de avisos" del visor de avisos muestra información estadística, p. ej.
frecuencia y tiempo de visualización de los avisos.
● Variable de estado de un grupo de avisos
Con la variable de estado de un grupo de avisos se visualizan los estados de aviso
cambiantes de un grupo de avisos. Su representación se establece individualmente en el
editor "Imágenes".

Señales adicionales
● Avisador central
WinCC muestra un aviso adicionalmente al visor de avisos mediante un visor óptico y
acústico en la instalación. El avisador central puede ser una sirena o una luz de aviso.
● Funciones de sistema y scripts
En un evento de un aviso se configura una lista de funciones que se ejecutará cuando se
produzca el evento en runtime.
Para no manejar el visor de avisos con la barra de herramientas, utilice funciones de
sistema para avisos en WinCC.

884

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Consulte también
Asignación de bits a variable de estado (Página 1059)
Variables de un grupo de avisos (Página 808)
Funciones de sistema para avisos (Página 989)

Configurar el visor de avisos
Introducción
En el visor de avisos se muestran los avisos actuales o archivados. En un visor de avisos se
visualizan si es necesario avisos de todas las categorías. Se configuran criterios que permiten
filtrar los avisos.

Requisitos
● Hay una imagen abierta.
● La Task Card "Herramientas" está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

885

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar un visor de avisos, proceda del siguiente modo:
1. Inserte el objeto "Visor de avisos" en la imagen desde la Task Card "Herramientas".
2. Seleccione el visor de avisos y haga clic en "Propiedades > Propiedades > General" de la
ventana de inspección.
– Seleccione en "Visualización > Tipo" el tipo de aviso que se debe representar por
defecto en el visor de avisos.
– En "Visualización > Visualización" seleccione qué avisos se deben visualizar. Se
muestran u ocultan los avisos cuya visualización se ha suprimido.
– Si el operador hace doble clic en un aviso en runtime, se inicia una acción. Esta acción
se define en "Visualización > Con doble clic". Si no desea activar el Loop-In-Alarm sólo
con el botón "Loop-In-Alarm", seleccione "Loop-In-Alarm".

886

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
– Elija la base de tiempo deseada en "Base de tiempo".

3. En "Propiedades > Propiedades > Apariencia" de la ventana de inspección defina la
apariencia del visor de avisos.
4. En "Propiedades > Propiedades > Tabla" de la ventana de inspección defina la apariencia
de los encabezados, los contenidos y la retícula de la tabla dentro del visor de avisos.
– En "Propiedades > Propiedades > Tabla > Tabla - Selección" defina la representación
de los avisos seleccionados en runtime.
– En "Propiedades > Propiedades > Tabla > Tabla - Clasificación" defina el método para
clasificar los avisos en runtime.
5. En "Propiedades > Propiedades > Lista de avisos" defina el orden de clasificación de los
avisos en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

887

Trabajar con avisos
3.2 Trabajar con avisos

Configuración de bloques de aviso para el visor de avisos
1. Para configurar bloques de aviso para el visor de avisos, desactive la opción "Aplicar
configuración del proyecto" en "Propiedades > Propiedades > Bloques" en la ventana de
inspección.
2. Para utilizar un bloque de aviso en el visor de avisos, active el bloque de aviso en la columna
"Seleccionado".
3. Para poner un título propio a un bloque de aviso para el título de la columna en el visor de
avisos, cambie el texto en la columna "Título".
4. Para cambiar la longitud del texto y la alineación de un bloque de aviso en la columna del
visor de avisos, cambie las entradas en las columnas "Longitud" y "Alineación".
5. Para activar el parpadeo de un bloque de aviso en runtime, active la casilla de verificación
en la columna "Parpadeo".
6. Para mostrar el contenido de un bloque de aviso en forma de texto, de símbolo o de ambas
formas en la columna del visor de avisos, seleccione la entrada correspondeinte en la
columna "Contenido como".
Nota
La visualización del contenido en forma de símbolo no está disponible en todos los bloques
de aviso. Para hacerse una idea de los símbolos que pueden visualizarse en el contenido
de algunos bloques de sistema, consulte "Descripción de los bloques de sistema
(Página 993)".
7. Para ver el título de un bloque de aviso en forma de texto, de símbolo o de ambas formas
en la columna del visor de avisos, seleccione la entrada correspondiente en la columna
"Título como".
Nota
La visualización del título en forma de símbolo no está disponible en todos los bloques de
aviso.
8. Defina el formato de un bloque de aviso en la columna "Formato". Esta opción no está
disponible para todos los bloques de aviso.
9. Para ver un bloque de aviso en forma de columna en el visor de avisos, active la columna
correspondiente al bloque de aviso en la columna "Visible" bajo "Propiedades >
Propiedades > Columnas".

888

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configuración de las columnas del visor de avisos
1. Para definir la disposición de las columnas del visor de avisos, seleccione una fila en
"Propiedades > Propiedades > Columas" en la ventana de inspección. Mueva la fila a la
posición deseada con los botones de flecha.
2. Defina el sentido de clasificación de cada columna activada en la columna "Sentido de
clasificación".
3. Defina el sentido de clasificación asignando los valores "1" a "4" en la columna "Sentido de
clasificación".
Nota
La función de clasificación solo está activada si hay como mínimo cuatro columnas en el
visor de avisos.

Configurar barra de herramientas y estado del visor de avisos
1. En "Propiedades > Propiedades > Barra de herramientas > Barra de herramientas General" defina la representación de la barra de herramientas.
2. En "Propiedades > Propiedades > Barra de herramientas > Barra de herramientas Elementos de control" active los elementos de control que están incluidos en la barra de
herramientas del visor de avisos.
3. En "Propiedades > Propiedades > Barra de estado > Barra de estado - General" defina la
representación de la barra de estado.
4. En "Propiedades > Propiedades > Barra de estado > Barra de estado - Elementos de
control" active la información que se visualizará en la barra de estado del visor de avisos.

Resultado
Los avisos de distintas categorías se visualizarán en runtime en el visor de avisos. Para
cambiar la visualización en runtime, haga clic en los botones configurados de la barra de
herramientas del visor de avisos.

Consulte también
Configurar filtros en el visor de avisos (Página 890)
Configurar estadística de avisos (Página 891)
Configuración de los textos de estado de una categoría (Página 817)
Descripción de los bloques de sistema (Página 993)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

889

Trabajar con avisos
3.2 Trabajar con avisos

Configurar filtros en el visor de avisos
Introducción
WinCC ofrece la posibilidad de configurar diversos filtros para el visor de avisos:
● Filtro estándar
El operador no tiene acceso a ningún filtro estándar en runtime. En caso necesario, copie
un filtro estándar configurado y utilícelo en otros visores de avisos.
● Filtro definido por el usuario
En caso necesario, el operador modifica el filtro definido por el usuario en runtime. Un filtro
definido por el usuario se utiliza en un solo visor de avisos.

Requisitos
● La imagen con el visor de avisos configurado está abierta en el editor "Imágenes".
● La ventana de inspección está abierta.

Procedimiento
1. Seleccione el visor de avisos y haga clic en "Propiedades > Propiedades > Filtro > Filtro de
avisos" de la ventana de inspección.
2. Para configurar un filtro definido por el usuario, haga clic en la ficha "Definido por el usuario".
3. Defina uno o varios filtros. Defina en "Expresión" para cada filtro uno o varios criterios de
filtro con condición y valor.

890

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
4. Para configurar un filtro estándar, seleccione la ficha "Estándar".
Se configuran varios filtros estándar y, en caso necesario, se activan para el visor de avisos
correspondiente.
5. Para ello, introduzca un nombre para el filtro estándar y, en caso necesario, un comentario.
6. Para configurar el filtro, seleccione en "Filtro" los criterios, las condiciones y los valores para
el filtro estándar.

Filtrar por valores de proceso
No es posible introducir texto como criterio para un valor de proceso. Para filtrar según el texto
de un bloque de parámetros o según las variables de proceso representadas, proceda del
siguiente modo:
1. Inserte este valor de proceso en un aviso como texto de aviso de un bloque de texto de
usuario.
2. Filtre en runtime los avisos según el texto en el bloque de aviso "Texto de aviso" utilizando
el botón
.
En los sistemas multipuesto, recuerde que en un cliente los contenidos que se muestran en el
cuadro de diálogo "Definir selección" se llaman igual en todos los servidores.

Filtrar por hora
Si se modifica la base de tiempo del visor de avisos, el valor inicial y el valor final no se adaptan
automáticamente cuando se filtra por hora.

Ejemplo
En la ubicación del PC con la zona horaria "UTC + 1h", el visor de avisos muestra la base de
tiempo "Zona horaria local". Se filtra según la hora 10:00 h hasta 11:00 h. Se cambia la base
de tiempo a "UTC". Para visualizar los mismos avisos que antes, modifique el valor inicial o el
valor final del filtro a 9:00 y 10:00 h.

Consulte también
Statements SQL para filtrar el visor de avisos (Página 997)

Configurar estadística de avisos
Introducción
La estadística de avisos representa los cálculos estadísticos de los avisos archivados en el
visor de avisos. La estadística de avisos muestra además una selección de los bloques de
aviso configurados. Cuando los contenidos son dinámicos, los bloques de aviso muestran los
datos del último aviso aparecido. Las columnas de la estadística de avisos se componen
individualmente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

891

Trabajar con avisos
3.2 Trabajar con avisos
La estadística de avisos muestra los siguientes cálculos estadísticos:
● Frecuencia de un aviso
El sistema cuenta la frecuencia con que un aviso con el estado "Aparecido" está incluido en
el fichero. Si el número de aviso no aparece, éste no se incluye en la estadística.
● Tiempo de visualización total de un aviso en segundos
Como magnitud de cálculo, se puede elegir entre los siguientes períodos entre estados de
aviso.
– "Aparecido/Aparecido"(suma +/+),
– "Aparecido/Desaparecido"(suma +/-)
– "Aparecido/Primer acuse"(suma +/*1)
– "Aparecido/Segundo acuse"(suma +/*2)
Si es necesario, cada tipo de cálculo se representa en una columna de la estadística de
avisos.
● Tiempo de visualización medio de un aviso en segundos
Como magnitud de cálculo, se puede elegir entre los siguientes períodos entre estados de
aviso.
– "Aparecido/Aparecido"(media +/+),
– "Aparecido/Desaparecido"(media +/-)
– "Aparecido/Primer acuse"(media +/*1)
– "Aparecido/Segundo acuse"(media +/*2)
Para cada tipo de cálculo se dispone de una columna en la estadística de avisos.
El cálculo del momento del acuse tiene en cuenta el estado de aviso "Acusado". El estado de
aviso "Acusado" incluye un acuse de emergencia o el acuse con el controlador.

Requisitos
● El editor "Imágenes" está abierto.
● Se ha creado una imagen con un visor de avisos.

892

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Configurar funciones de la estadística de avisos
Para configurar las funciones de la estadística de avisos, proceda del siguiente modo:
1. Seleccione el visor de avisos y haga clic en "Propiedades > Propiedades > Estadística de
avisos - General" de la ventana de inspección.

2. Para limitar cronológicamente el período de cálculo, active la opción "Utilizar rango de
tiempo" en "Rango de tiempo". Defina la frecuencia deseada.
3. Para determinar el número máximo de avisos que deben procesarse en la estadística de
avisos, defina un valor en "Registros > Número máximo de registros".
Este ajuste incorpora los siguientes requisitos:
– El período de cálculo engloba más avisos que los ajustados en "Número máximo de
registros legibles".
– El período de cálculo no está ajustado.
4. Para visualizar una advertencia cuando se rebasa por exceso este número, active la opción
"Advertencia si se alcanza el límite".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

893

Trabajar con avisos
3.2 Trabajar con avisos

Configurar columnas de la estadística de avisos
Para configurar las columnas de la estadística de avisos, proceda del siguiente modo:
1. Seleccione el visor de avisos y haga clic en "Propiedades > Propiedades > Estadística de
avisos - Elementos" de la ventana de inspección.

2. En la tabla active las columnas de la estadística de avisos que deban visualizarse en
runtime.
3. Para definir la disposición de las columnas del visor de avisos, seleccione una fila en la
ventana de inspección. Desplace la fila con los botones
y
hasta la posición deseada.
Las columnas de la estadística de avisos se visualizan en runtime en el mismo orden en el
que están dispuestas las filas en la ventana de inspección.
4. Defina el sentido de clasificación para cada fila en "Ordenar por".
5. En "Orden de clasificación" defina el orden en el que se deben asignar los valores 1 - 4.
Nota
La función de clasificación sólo está activa si la estadística de avisos incluye como máximo
cuatro columnas.

894

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
En runtime el operador visualiza el visor "Estadística de avisos" con el botón
avisos.

del visor de

Nota
Para el cálculo, los avisos con los estados "Acusado" y "Desaparecido" se consideran
únicamente cuando en la cantidad de resultados se encuentre con anterioridad un aviso
adecuado con el estado "Aparecido".
Si el usuario acusa un aviso con acuse individual o doble sólo una vez, se utilizan para el
cálculo estadístico los estados de aviso "Aparecido/Primer acuse" y "Aparecido/Segundo
acuse".
Si hay pendiente un aviso del controlador y se activa y desactiva runtime varias veces, el aviso
se introduce varias veces en el fichero con el estado "Aparecido". El aviso se incluye también
varias veces en el cálculo.

Configurar la visualización inhibida de avisos
Resumen de la visualización inhibida de avisos
Introducción
Para no sobrecargar al operador de la instalación con información, inhiba la visualización de
avisos. Cuando se visualizan sólo determinados avisos, el usuario se concentra en los avisos
importantes.

Requisitos
Los botones "Mostrar aviso" y "Ocultar aviso" están configurados en el visor de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

895

Trabajar con avisos
3.2 Trabajar con avisos

Métodos para inhibir la visualización de avisos
Para inhibir la visualización de avisos entrantes, existen dos posibilidades:
● Inhibición de visualización automática
Los avisos se visualizan dependiendo del estado de la instalación. Dichos estados se
especifican en el correspondiente aviso como máscara de inhibición de visualización. El
ingeniero de programación determina los valores de los estados de la instalación.
Para transferir el estado actual de la instalación al sistema de avisos, especifique un grupo
de avisos con una variable para inhibir la visualización. Dicha variable devuelve el valor de
los estados de la instalación.
A este grupo se asignan avisos que el sistema no muestra en runtime con determinados
estados de la instalación.
Ejemplo:
en el estado de la instalación "Shutdown" se inhibe la visualización de los avisos habituales
en estos estados de la instalación. El aviso "Se ha deshecho la conexión online con el
controlador" no se visualiza únicamente durante el "Shutdown".
Nota
Si se ha introducido una máscara de inhibición de visualización para un aviso pero el aviso
no está asignado a ningún grupo, el aviso no se inhibe en runtime.
Los avisos con máscara de inhibición de visualización sin asignación a un grupo no se
inhiben en runtime. Por ello, asigne siempre a un grupo los avisos que no se visualizan en
runtime.
Nota
Las variables para inhibir la visualización se utilizan sólo en grupos de avisos definidos por
el usuario.
● Inhibición de visualización manual
En caso necesario, el usuario puede inhibir en runtime la visualización de un aviso con el
botón "Ocultar aviso" del visor de avisos.
Si lo desea, el usuario puede visualizar de nuevo el aviso con el botón "Mostrar aviso".
Tras un tiempo que se puede configurar, el sistema visualiza los avisos de nuevo.
Para registrar la inhibición de visualización manual, configure un aviso de usuario
apropiado que se lance cuando se inhiba manualmente la visualización. Para ello,
configure en el visor este aviso de usuario como aviso de operador para la acción "Inhibir".

Propiedades de los avisos cuya visualización está inhibida
Para los avisos cuya visualización está inhibida rige lo siguiente:
● En los siguientes modos de visualización del visor de avisos, los avisos se vuelven a activar
en caso necesario con botones:
– Visor "Avisos actuales"
– Visor "Fichero de corto plazo"
– Visor "Fichero de largo plazo"
● Los avisos se incorporan y visualizan en el visor "Avisos de visualización inhibida".

896

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
● Los avisos se archivan.
● Si se ha instalado un avisador central para estos avisos, no se activa.
Inhibición de visualización manual
Las siguientes propiedades se aplican sólo para avisos cuya visualización se ha inhibido
manualmente:
● Los avisos se visualizan de nuevo tras un tiempo especificado.
● Un aviso de acuse obligado se acusa con la inhibición de visualización manual.
● Para registrar la inhibición de visualización manual, configure un aviso de operador que se
lance cuando se inhiba manualmente la visualización.
Inhibición de visualización automática
Las siguientes propiedades se aplican sólo para avisos cuya visualización se ha inhibido
automáticamente:
● La inhibición de visualización no lanza ningún aviso de operador.
● El controlador acusa los avisos de acuse obligado.
Mientras los avisos de acuse obligado estén inhibidos, el controlador acusa los avisos
salientes. Si un aviso no posee el estado "Desaparecido", el controlador lo acusa
inmediatamente.
ATENCIÓN
Pérdida de la obligación de acuse
En la inhibición de visualización automática, los avisos de acuse obligado pierden su
obligación de acuse. Utilice la inhibición de visualización automática sólo para avisos que
no requieran acciones de operador durante los estados configurados de la instalación.

Interacciones
Ambos métodos para inhibir la visualización de avisos se influyen mutuamente del siguiente
modo:
● Si un aviso está inhibido automáticamente, puede mostrarlo y ocultarlo cuando lo necesite
con los botones "Ocultar aviso" y "Mostrar aviso".
● Se ha inhibido manualmente la visualización de un aviso con el botón "Ocultar aviso".
Si la instalación modifica el estado y no se dan las condiciones para la inhibición automática
de la visualización del aviso, éste se muestra de nuevo.
El tiempo determinado como duración de inhibición de la visualización no debe haber
transcurrido todavía.
● Se ha inhibido manualmente la visualización de un aviso con el botón "Ocultar aviso". Se
produce el estado que se definió con las variables para inhibir la visualización para la
ocultación automática. El aviso se mantiene inhibido aun después de finalizar el tiempo
definido como duración de inhibición de la visualización.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

897

Trabajar con avisos
3.2 Trabajar con avisos

Nota
Avisos de diagnóstico del sistema ocultos
Para los avisos de diagnóstico del sistema ocultos, los textos de los avisos no se muestran en
la lista de avisos ocultos.
La lista de los avisos ocultos representa únicamente los datos de configuración del aviso, no
es una vista en tiempo real.
Para mostrar los avisos de diagnóstico del sistema ocultos activos deberá adaptar el filtro para
la lista de avisos online.

Consulte también
Variables de un grupo de avisos (Página 808)
Visor de avisos (Página 431)

Ajustar el tiempo de inhibición de la visualización
Introducción
El tiempo tras el cual los avisos inhibidos manualmente se visualizan de nuevo
automáticamente se determina en la configuración de los avisos.

Requisitos
● La navegación del proyecto está abierta.

898

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para ajustar el tiempo de inhibición de la visualización de avisos, proceda del siguiente modo:
1. Haga doble clic en "Configuración de runtime > Avisos" en el árbol del proyecto.
Se abre la configuración de los avisos.
2. En "General > Tiempo de inhibición de la visualización" ajuste el tiempo que permanece
oculto un aviso inhibido manualmente.
Está predeterminado para 30 minutos.

Consulte también
Configurar inhibición de la visualización automática (Página 900)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

899

Trabajar con avisos
3.2 Trabajar con avisos

Configurar inhibición de la visualización automática
Introducción
En la inhibición de la visualización automática, el estado del controlador determina qué avisos
se visualizan. Se define en qué estado de la instalación queda oculto un aviso. La inhibición de
la visualización automática se configura en el editor "Avisos HMI". Se crea un grupo de avisos
con una variable para inhibir la visualización. En el correspondiente aviso se asignan los
estados de la instalación mediante una máscara de inhibición de visualización. La variable
para inhibir la visualización debe adoptar el valor de la máscara de inhibición de visualización
de un aviso para que éste no se visualice en runtime.

Requisitos
El botón "Mostrar aviso" está configurado en el visor de avisos.

Requisitos
● El editor "Avisos HMI" está abierto.
● La ficha "Grupos de avisos" está abierta.
● Los avisos están creados.
● La variable para inhibir la visualización está creada.

Crear un grupo de avisos para inhibir la visualización
1. Haga doble clic en "Agregar" en la tabla.
Se creará un nuevo grupo.
2. Ponga un nombre al nuevo grupo de avisos.
3. En la ventana de inspección seleccione la variable para inhibir la visualización en "Variable".

900

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Crear una máscara de inhibición de visualización del aviso
1. Seleccione el aviso.
2. Seleccione el grupo de avisos para el que ha creado una variable para inhibir la
visualización en "Propiedades > Propiedades > General" de la ventana de inspección.

3. Introduzca la máscara de inhibición de visualización en "Propiedades > Propiedades >
Inhibición de la visualización" de la ventana de inspección.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

901

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Si la variable para inhibir la visualización adopta el valor de la máscara de inhibición de
visualización, el aviso se oculta. Si la instalación también se encuentra en el estado definido,
el aviso se oculta.
Nota
Los avisos con máscara de inhibición de visualización sin asignación a un grupo no se inhiben
en runtime. Por ello, asigne siempre a un grupo los avisos cuya visualización se debe inhibir.
Si un aviso se oculta, puede visualizarlo de nuevo en runtime con el botón "Mostrar aviso".

902

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Consulte también
Ajustar el tiempo de inhibición de la visualización (Página 898)
Visor de avisos (Página 431)

Configurar el avisador central
Introducción
Dado el caso, WinCC muestra un aviso adicionalmente al visor mediante una señal óptica o
acústica en la instalación. El avisador central puede ser una sirena o una luz de aviso.
Adicionalmente, el avisador central puede representarse en una imagen y acusarse.

Requisitos
● El botón "Acuse de avisador central" está configurado en el visor de avisos.
● El editor "Avisos HMI" está abierto.
● Los avisos están creados.
● La ventana de inspección está abierta.
● Su instalación dispone de un avisador central, vinculado a una variable.

Configurar avisos para el avisador central
1. Seleccione el aviso que se deba visualizar con un avisador central.
2. En la ventana de inspección active "Propiedades > Propiedades > Avisador central".
3. Seleccione en la ficha "Categorías" aquella que desee para los avisos del avisador central.
– Para acusar el avisador central con el botón "Acuse de avisador central" del visor de
avisos, active en la ventana de inspección Acuse > Avisador central > Con el botón
"Acusar avisador central".
Con el botón "Acuse de avisador central" se desactiva el avisador central. El aviso sigue
estando pendiente en el visor.
– Para acusar el aviso con el avisador central, elija la variable a la que está vinculado el
avisador central.

Configuración del avisador central en la imagen
1. Abra la imagen en la que aparezca el avisador central.
2. Configure, p. ej., un círculo con el correspondiente botón rotulado "Avisador central".
3. Configure para el evento "Hacer clic" del botón un script VBS con el método "QuitHorn".
4. Dinamice el color de fondo del círculo con la variable que está vinculada al avisador central.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

903

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
Si se muestra en runtime un aviso con el avisador central, el usuario acusa el aviso
dependiendo de su configuración de la manera siguiente:
● con el botón "Acuse de avisador central" del visor de avisos
● con el botón configurado "Avisador central"
El usuario reconoce el estado del avisador central por el color de fondo del círculo.

Consulte también
Configurar el acuse del avisador central (Página 917)
Visor de avisos (Página 431)

Mostrar avisos archivados
Introducción
Un visor de avisos muestra también los avisos archivados dependiendo de la configuración en
runtime. Los avisos del fichero se representan con los visores "Fichero de corto plazo" o
"Fichero de largo plazo". El visor "Fichero de corto plazo" muestra además los avisos actuales.

Requisitos
● Los botones "Fichero de corto plazo" y "Fichero de largo plazo" están configurados en el
visor de avisos.
● Los avisos archivados están ubicados localmente en el servidor de ficheros.
● La imagen con el visor de avisos configurado está abierta.
● La ventana de inspección está abierta.

Procedimiento
Para configurar un visor "Fichero de corto plazo" o "Fichero de largo plazo", proceda del
siguiente modo:
1. Seleccione el visor de avisos.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > General > Lista
activa > Fichero de corto plazo" o "Fichero de largo plazo".
3. Configure el visor de avisos como para visualizar los avisos actuales.

904

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Resultado
El usuario visualiza en runtime los avisos archivados con los botones "Fichero de corto plazo"
o "Fichero de largo plazo". Para representar por ejemplo sólo avisos de la categoría "Errors"
o sólo avisos en determinadas áreas de la instalación, el usuario filtra o clasifica los avisos
archivados.
Nota
En el visor "Fichero de corto plazo" se actualizan inmediatamente los nuevos avisos entrantes,
pero no en el visor "Fichero de largo plazo". El usuario no puede introducir ni visualizar ningún
comentario en el visor "Fichero de corto plazo". La entrada de un comentario sólo se permite
en el visor "Fichero de largo plazo".

Consulte también
Visor de avisos (Página 431)

Configurar la exportación de avisos
Introducción
Para exportar los avisos en runtime a un archivo con formato "*.csv", el usuario hace clic en el
del visor de avisos. Esta función se configura en el visor de avisos del editor
botón
"Imágenes".

Requisitos
● La imagen con el visor de avisos configurado está abierta.
● La ventana de inspección está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

905

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar la exportación de avisos, proceda del siguiente modo:
1. Seleccione el visor de avisos y configure la "Exportación de datos" en "Propiedades >
Propiedades" de la ventana de inspección:f
– Dado el caso, defina un nombre de archivo propio y un directorio.
– En "Alcance" determine qué datos del visor de avisos se deben exportar.
– En "Formato CSV" defina el carácter separador del archivo con formato ".csv".
2. Configure en "Operación en runtime" la función del botón

en runtime:

– Para visualizar el cuadro de diálogo "Ajustes predeterminados de la exportación de
datos", active "Mostrar cuadro de diálogo".
– Para exportar los datos directamente al archivo de exportación definido, desactive
"Mostrar cuadro de diálogo".
3. Determine además en "Operación en runtime" si el operador puede modificar en runtime el
nombre del archivo o el directorio.

Configurar evaluación del aviso en runtime
Introducción
Para evaluar los avisos en runtime, configure una función C definida por el usuario asociada
al evento "Estado modificado" de un aviso. Para la evaluación en runtime, edite la función
según sus propios requisitos.

Requisitos
● El editor "Avisos HMI" está abierto.
● Se ha creado una función definida por el usuario para leer los datos.
Esta función debe incluir un puntero hacia un string cuyos datos se reproduzcan con scanf
en la estructura "MSG_RTDATA_STRUCT".

Procedimiento
Para configurar la evaluación de un aviso en runtime, proceda del siguiente modo:
1. Seleccione el aviso.
2. En la ventana de inspección seleccione "Propiedades > Eventos > Estado modificado".

906

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
3. Seleccione la función definida por el usuario para leer los datos.

Los datos de los avisos se leen en runtime. Los datos de los avisos son p. ej. número de
aviso, sello de tiempo y estado de aviso.
4. Dado el caso, configure la evaluación de los datos de los avisos en el editor "Scripts" de la
función.

Resultado
Si cambia el estado del aviso, se leen en runtime los datos del aviso y se evalúan según la
configuración.

Ejemplo
Con la función personalizada "state" se lee, p. ej., el estado de los avisos:
Void state (MSG_RTDATA_STRUCT Parameter)
DWORD state;
state = Parameter.dwMsgState;
printf("Status: %d\r\n", state);

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

907

Trabajar con avisos
3.2 Trabajar con avisos

3.2.3.4

Registrar avisos

Configurar el registro de avisos
Sinopsis
WinCC puede registrar todos los avisos que se generen en el sistema. Para ello dispone de
varias posibilidades, a saber:
● Impresión de un informe secuencial de avisos
En runtime se imprime continuamente cada aviso así como sus cambios de estado en la
impresora estándar del panel de operador.
● Impresión de un informe de avisos
En el editor "Informes" se configura un informe de avisos y se define cuándo debe
imprimirse en runtime:
– Para una salida controlada por eventos, asocie a un objeto la función de sistema
"ImprimirInforme" en un evento. El objeto es p. ej. un botón o una variable.
– Para una salida controlada por tiempo, cree una tarea del tipo "Trabajo de impresión" en
el planificador de tareas. Se asigna el informe de avisos deseado al trabajo.
Nota
En el informe de aviso se determina si se imprimen los avisos actuales o los archivados.

Requisitos
● En el panel de operador se ha configurado una impresora.

908

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Activar el registro continuo de avisos
Para activar el registro continuo de avisos proceda del siguiente modo:
1. Haga doble clic en "Configuración de runtime" en el árbol del proyecto.
2. Active "Avisos > General > Informe".

Resultado
Los avisos actuales se imprimen en la impresora del panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

909

Trabajar con avisos
3.2 Trabajar con avisos

Excluir un aviso del registro
Para excluir determinados avisos del registro, proceda del siguiente modo:
1. Abra el editor "Avisos HMI".
2. Seleccione en la ficha del procedimiento de aviso deseado el aviso que desee excluir del
registro.
3. En la ventana de inspección desactive "Propiedades > Propiedades > Misceláneo >
Informe".

Resultado
WinCC no imprime actualmente estos avisos en la impresora conectada.

Consulte también
Principios básicos sobre la elaboración de informes (Página 1277)
Crear un informe (Página 1284)
Impresión de informes en Runtime Advanced (Página 1297)
Informe de avisos (Página 1342)
Trabajar con informes (Página 1277)

Configurar el registro de avisos
Resumen
WinCC registra todos los avisos incluidos en el sistema si es necesario. Para ello dispone de
varias posibilidades, a saber:
● Presentación de la visualización actual de un visor de avisos
Existe la opción de imprimir un informe de sistema. En caso necesario, configure un informe
propio. En el trabajo de impresión se determinan el alcance de impresión, el área de la
página y la impresora o el archivo de destino.
● Impresión de un informe secuencial de avisos
En runtime se imprime cada aviso de forma continua en una impresora.

910

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Requisitos
● El editor "Imágenes" está abierto.
● Hay avisos configurados.
● Se ha configurado un visor de avisos con el botón "Imprimir vista actual"

.

Procedimiento
Para configurar la impresión de la visualización actual de un visor de avisos en un informe
propio, proceda del siguiente modo:
1. Seleccione el visor de avisos deseado.
2. Seleccione el trabajo de impresión deseado en "Propiedades > Propiedades > General >
Imprimir > Trabajo de impresión" de la ventana de inspección.
El trabajo de impresión del sistema es el predeterminado. Dado el caso, seleccione un
trabajo de impresión propio o un trabajo de impresión del sistema modificado.

Resultado
Cuando el usuario hace clic en runtime en el botón
, la impresora imprime el informe
deseado con los avisos visualizados actualmente en el visor.
Nota
Ajustar impresora
Configure la impresora en el Control Panel del correspondiente panel de operador. Los ajustes
dependen del sistema operativo del panel de operador.
Encontrará más información al respecto en las instrucciones de servicio de su panel de
operador.

Consulte también
Trabajar con informes (Página 1277)

3.2.4

Configurar el acuse

3.2.4.1

Configurar la obligación de acuse de un aviso por categoría

Introducción
Para configurar un aviso de acuse obligatorio, asigne el aviso en cuestión a una categoría con
el autómata finito "Aviso de acuse simple".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

911

Trabajar con avisos
3.2 Trabajar con avisos

Requisitos
● El editor "Avisos HMI" está abierto.
● La categoría deseada se ha creado.
● El aviso deseado se ha creado.

Selección del autómata finito para una categoría
El autómata finito de las categorías predefinidas está predeterminado. Solo hay que
seleccionar el autómata finito de las categorías personalizadas. Para ello proceda del
siguiente modo:
1. En el editor "Avisos HMI" haga clic en la ficha "Categoría" y seleccione la categoría
deseada.
2. En la ventana de inspección seleccione el concepto de acuse deseado en "Propiedades >
Propiedades > Acuse".

Asignar avisos a una categoría de acuse obligatorio
Para asignar una categoría de acuse obligatorio a un aviso, proceda del siguiente modo.
1. En el editor "Avisos HMI" haga clic en la ficha del procedimiento de aviso deseado y
seleccione el aviso deseado.
2. Seleccione la categoría del aviso en "Propiedades > Propiedades > General" de la ventana
de inspección.

Resultado
El aviso sólo desaparece en runtime cuando el operador lo ha acusado.

3.2.4.2

Configurar un disparador para el acuse de avisos

Introducción
Básicamente, la obligación de acuse de un aviso se define por la categoría. Luego el operador
acusa el aviso con la tecla de función "ACK" del panel de operador o bien con el botón "Acusar"
del visor de avisos.
Además, existen las posibilidades siguientes de disparar un acuse:
● Configura un botón para acusar un aviso
● Acusar un aviso de bit con el controlador

Requisitos
● El editor "Avisos HMI" está abierto.
● La categoría deseada se ha creado.

912

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
● El aviso deseado se ha creado.
● En el editor "Imágenes" se ha creado un visor de avisos y un botón.

Configurar un botón para acusar un aviso
Para configurar un botón que acuse un aviso proceda del siguiente modo:
1. Seleccione el botón en el editor "Imágenes".
2. En "Propiedades > Eventos" de la ventana de inspección configure la función de sistema
"VisorDeAvisosAcusarAviso" asociada al evento "Hacer clic".
3. Seleccione como parámetro el visor de avisos.

Acusar un aviso de bit con el controlador
1. En el editor "Avisos HMI" haga clic en la ficha "Aviso de bit" y seleccione el aviso de bit
deseado.
2. En la ventana de inspección, seleccione la variable y el bit que debe acusar el aviso desde
el controlador en "Propiedades > Propiedades > Acuse > PLC".

Acuse de avisos de un grupo
Las distintas posibilidades de acuse tienen los siguientes efectos en los grupos de avisos:
● Acuse del aviso por parte del operador
Se acusa el aviso de un grupo de avisos, p. ej., con la tecla de acuse <ACK> o con una tecla
de función. Se acusan todos los avisos de un grupo de avisos.
● Acuse del aviso por parte del controlador
El aviso de un grupo se acusa mediante la activación de un bit de la variable.
Solamente se acusa el aviso correspondiente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

913

Trabajar con avisos
3.2 Trabajar con avisos

3.2.4.3

Enviar acuse de aviso al controlador

Requisitos
● El editor "Avisos HMI" está abierto.
● El aviso deseado está creado y asignado a una categoría con acuse obligado.
Nota
El acuse de avisos analógicos no puede enviarse al controlador.

Enviar acuse de aviso al controlador
Para configurar que el acuse de un aviso sea enviado al controlador, proceda del siguiente
modo:
1. En el editor "Avisos HMI" haga clic en la ficha "Aviso de bit" y seleccione el aviso de bit
deseado.
2. Seleccione en la ventana de inspección "Propiedades > Propiedades > Acuse".
3. En "HMI", elija la variable y el bit que debe activarse con el acuse del aviso.
Nota
Tanto el panel de operador como el controlador tienen únicamente acceso de lectura al
área de memoria de la variable de acuse.

Resultado
Cuando el operador acusa el aviso en runtime, la acción se transmite al controlador.

3.2.5

Configurar el acuse

3.2.5.1

Configurar el acuse de un aviso

Introducción
En las categorías se determina cómo se acusan los avisos de una determinada categoría.
Cuando se asigna un aviso a una categoría, se define el autómata finito del aviso.

Requisitos
● El editor "Avisos HMI" está abierto.
● La categoría deseada se ha creado.
● El aviso deseado se ha creado.

914

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

Procedimiento
Para configurar el acuse de un aviso, proceda del siguiente modo:
1. En el editor "Avisos HMI" haga clic en la ficha "Categoría" y seleccione la categoría
deseada.
2. En la ventana de inspección, seleccione el autómata finito deseado en "Propiedades >
Propiedades > Acuse > Configuración".
– Si se activa "Asignar comentarios al usuario de forma unívoca", el usuario escribe en
runtime un comentario para acusar el aviso, que se archiva junto con el aviso.
– Si activa "Utilizar comentario de un aviso entrante", cada cambio de estado de este aviso
obtendrá el mismo comentario que le fue asignado al producirse el evento "Aparecido".

3. Seleccione el aviso deseado en el editor "Avisos HMI".
4. Seleccione la categoría del aviso en "Propiedades > Propiedades > General" de la ventana
de inspección.
5. En "Propiedades > Propiedades > Acuse > Configuración" de la ventana de inspección
seleccione la variable de acuse en la que está guardado el acuse de aviso y el bit que se
activa para ello.
6. Para excluir el aviso del acuse de grupo del visor de avisos, active "Acuse individual".

Acusar un aviso con una función de sistema
1. Seleccione el aviso deseado en el editor "Avisos HMI".
2. Haga clic en la ventana de inspección "Propiedades > Eventos > Aparecido".
Se abrirá la lista de funciones.
3. En el cuadro de diálogo "Lista de funciones" asocie la función de sistema "ActivarBit" al
evento "Aparecido".
4. En el parámetro "Variable (In/Out)" indique la variable de acuse del tipo de datos "BOOL".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

915

Trabajar con avisos
3.2 Trabajar con avisos

3.2.5.2

Configurar el acuse de un grupo de avisos

Introducción
Un grupo de avisos se acusa con la variable de acuse. Para activar y desactivar el bit de acuse,
configure un objeto de indicación y control.

Requisitos
● El editor "Avisos HMI" está abierto.
● Los grupos de avisos se han creado.
● El aviso deseado se ha creado.

Procedimiento
Para configurar el acuse de un grupo de avisos, proceda del siguiente modo:
1. Seleccione el aviso deseado en el editor "Avisos HMI".
2. Seleccione el grupo perteneciente al aviso en el área "Propiedades > Propiedades >
General" de la ventana de inspección.
3. Haga clic en la ficha "Grupos de avisos" del editor "Avisos HMI".
4. Seleccione el grupo de avisos.
5. Seleccione la variable y el bit de acuse en la ventana de inspección, en "Propiedades >
Propiedades > Variables > Configuración ".
6. Abra el editor "Imágenes" y asocie a la variable de acuse un botón que active el bit de acuse
en runtime.

Resultado
En runtime, el usuario observa conjuntamente los avisos de una función. Una vez detectada la
causa de una avería, se acusan todos los avisos de esa función con la acción de operador
configurada.

916

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos

3.2.5.3

Configurar el acuse del avisador central

Introducción
Dado el caso, WinCC muestra un aviso adicionalmente al visor mediante una señal óptica o
acústica en la instalación. El avisador central puede ser una sirena o una luz de aviso. Existen
las siguientes posibilidades para acusar el avisador central:
● Mediante el botón
del visor de avisos
El botón "Acusar avisador central" debe estar configurado en el visor de avisos. El botón
siempre está activo, aunque haya activada otra opción para acusar el avisador central. Con
el botón
se desactiva el avisador central. El aviso sigue estando pendiente en el visor.
● Mediante acuse individual
El usuario acusa el avisador central con el aviso que lo dispara. En el visor de avisos, el
usuario acusa un aviso individual con el botón
"Acuse individual".
● Mediante una variable
A través de la variable definida se controla el avisador central.
Para acusar p. ej. el avisador central con un botón, utilice esta opción.

Requisitos
● El editor "Avisos HMI" está abierto.
● La categoría deseada se ha creado.
● El aviso deseado está creado y asignado a la categoría.

Procedimiento
Para configurar el acuse del avisador central, proceda del siguiente modo:
1. Haga clic en la ficha "Categorías" del editor "Avisos HMI".
2. Seleccione la categoría deseada.
3. En "Propiedades > Propiedades > Acuse > Avisador central" de la ventana de inspección
seleccione cómo se debe acusar el avisador central.

Resultado
El usuario acusa el avisador central en runtime, tal y como se ha definido para la categoría de
este aviso.

3.2.5.4

Configurar el acuse de grupo para avisos

Introducción
Con el botón
del visor de avisos se acusan todos los avisos pendientes, visibles y de
acuse obligado del visor. En caso necesario, excluya algunos avisos del acuse de grupo. Si se
activa el acuse de grupo, los avisos excluidos siguen estando pendientes después.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

917

Trabajar con avisos
3.2 Trabajar con avisos

Requisitos
● Hay una imagen abierta.
● Se ha creado un visor de avisos.

Procedimiento
Para crear un acuse de grupo, proceda del siguiente modo:
1. Abra el editor "Imágenes" y seleccione el visor de avisos correspondiente.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Barra de
herramientas - Botones > Acuse de grupo".
El botón
se muestra en el visor de avisos. Todos los avisos de un visor que no se
excluyen del acuse de grupo se acusan cuando el operador acciona el botón.

Configurar acuse individual
1. Abra el editor "Avisos HMI" y seleccione la ficha con el procedimiento de aviso deseado.
2. Seleccione el aviso que desea excluir del acuse de grupo.
3. En la ventana de inspección active "Propiedades > Propiedades > Acuse > Acuse
individual".
Si se acusan en grupo los avisos de un visor con el botón
, se excluyen los avisos que
tienen la opción "Acuse individual". El usuario acusa individualmente los avisos con la
opción "Acuse individual".

3.2.5.5

Configurar la desactivación del bit de acuse de la variable de acuse

Introducción
El usuario o el controlador desactiva el bit de acuse de la variable de acuse. El bit de acuse se
desactiva directamente en el controlador o en WinCC Runtime, p. ej. mediante un script. El bit
de acuse no se desactiva automáticamente.

Desactivación del bit de acuse por el controlador
Para desactivar el bit de acuse desde el controlador, utilice una variable externa como variable
de acuse.
Si el aviso se acusa en runtime en WinCC, se activa el bit de acuse establecido en el
controlador. En caso necesario, en el controlador se procesa el bit de acuse antes de ser
desactivado.
Se lanza un aviso en el controlador mediante un bloque de función reutilizable o mediante
funciones. En este bloque también se puede acusar el aviso o desactivar el bit de acuse.
La evaluación y desactivación del bit de acuse desde el controlador tiene la siguiente ventaja:
El acuse es posible con señales externas, p. ej. pulsadores en el campo.

918

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.2 Trabajar con avisos
Se acusa externamente mediante el visor de avisos. Ambos métodos utilizan el mismo bit del
sistema de automatización para acusar.
Nota
Para que el visor de avisos registre con seguridad temporal el acuse externo en WinCC,
configure la desactivación desde el sistema de automatización con un retardo temporal.

Desactivar el bit de acuse desde WinCC
Si se acusa un aviso exclusivamente con la variable de acuse, el bit de acuse se desactiva
inmediatamente después de haberse activado.
Si se acusa un aviso con el visor de avisos, configure la desactivación de la variable de acuse
por separado.
Existen las siguientes posibilidades para desactivar el bit de acuse en WinCC:
● Botón
Se desactiva el bit de acuse con un botón.
● Función de sistema
Utilice la función de sistema "DesactivarBitEnVariable". Si el bit de acuse está activado, se
desactiva inmediatamente.
Nota
Si la variable de acuse es del tipo de datos "BOOL", utilice la función de sistema
"DesactivarBit".
Nota
Si se procesan muchos avisos con scripts, la memoria de trabajo se sobrecarga. En
consecuencia, a ser posible desactive el bit de acuse desde el controlador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

919

Trabajar con avisos
3.3 Archivación de avisos

3.3

Archivación de avisos

3.3.1

Configurar la archivación de avisos

3.3.1.1

Principios básicos de la archivación de avisos

Introducción
En un fichero de avisos se documentan los avisos del proyecto.
Nota
La archivación de avisos no está disponible para todos los paneles de operador.

Pasos de configuración
Para archivar un aviso siga los pasos de configuración siguientes:
1. Crear un fichero de avisos
Se definen las propiedades siguientes para el fichero de avisos:
– Método de archivación
Comportamiento del fichero al alcanzar un determinado nivel de llenado
– Ubicación y formato de archivo
– Tamaño del fichero
– Comportamiento al iniciar runtime
2. Asignar el fichero de avisos a una categoría
En caso necesario, archive los avisos de varias categorías en un fichero de avisos.
3. Asignar un aviso a la categoría archivable
4. Configurar la visualización de los avisos archivados en un visor de avisos

Contenido del fichero de avisos
Se archivan todos los estados de los avisos configurados. Así, p. ej., las tres entradas
siguientes de un aviso de acuse obligado están guardadas en el fichero:
● 04.08.2007 10:00:25:520, aviso analógico, ID5, A, error, nivel de llenado rebasado por
exceso en un 10 %
● 04.08.2007 10:01:20:442, aviso analógico, ID5, AC, error, nivel de llenado rebasado por
exceso en un 10 %
● 04.08.2007 10:01:30:112, aviso analógico, ID5, D, error, nivel de llenado rebasado por
exceso en un 10 %
En el ejemplo, los estados de aviso se identifican con las letras siguientes:

920

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
A = Aparecido
AC = Acusado
D = Desaparecido
En el fichero de avisos se guardan todos los datos de un aviso y los de configuración, p. ej.
categoría, sello de tiempo y texto del aviso.
El número de avisos que pueden archivarse depende del soporte de datos utilizado. Los avisos
archivados se pueden seguir editando en otros programas p. ej. para realizar análisis.
Nota
El texto de aviso y la ubicación de la avería sólo se archivan si así se ha configurado en las
propiedades de un fichero.
Los avisos archivados que contienen un texto de aviso y una ubicación del fallo exceden el
tamaño estimado de los avisos configurados. Compruebe si la ubicación indicada sigue siendo
suficiente.
Nota
El sello de tiempo de un aviso archivado se indica siempre en la forma estándar UTC (hora
universal coordinada).

Métodos de archivación
El método de archivación determina cómo se comportará el fichero de avisos cuando alcance
el tamaño configurado. En WinCC existen estos métodos de archivación:
● Fichero circular
Al alcanzarse el tamaño configurado del fichero se borran los registros más antiguos. Al
alcanzarse el tamaño configurado del fichero se borra aprox. el 20 % de las entradas más
antiguas. Por tanto, no es posible visualizar todas las entradas configuradas. Configure un
tamaño adecuado para el fichero circular. También se puede configurar un fichero circular
segmentado.
● Fichero circular segmentado
Aquí se crean varios ficheros individuales de igual tamaño que se llenan uno tras otro.
Cuando todos los ficheros estén completamente llenos, se sobrescribirá el fichero más
antiguo.
● Fichero con aviso del sistema dependiente del nivel de llenado
Cuando se alcanza un nivel de llenado definible (p. ej. 90%) se lanza un aviso de sistema.
Cuando se alcanza el tamaño configurado del fichero, los nuevos eventos de avisos no se
archivan.
● Fichero con ejecución de las funciones de sistema dependiente del nivel de llenado
Cuando el fichero se llene por completo se disparará el evento "Desbordamiento". En el
evento se puede configurar una lista de funciones.
Cuando se alcanza el tamaño configurado del fichero, los nuevos eventos de avisos no se
archivan.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

921

Trabajar con avisos
3.3 Archivación de avisos

Visualizar datos archivados
Los datos archivados se visualizan en un visor de avisos del panel de operador configurado
para tal fin.

Consulte también
Trabajar con ficheros (Página 1067)

3.3.1.2

Crear un fichero de avisos

Introducción
En los ficheros de avisos se guardan los avisos en runtime. El fichero de avisos se indica en
la categoría. Un fichero de avisos archiva los avisos de varias categorías. Los ficheros de
avisos se crean en el editor "Ficheros". Al crear un fichero de avisos se define lo siguiente:
● Nombre
● Tamaño
● Ubicación
● Comportamiento al iniciar runtime
● Tipo de fichero
● Contenido avanzado
● Suma de verificación
Además, en caso necesario se introduce un comentario que describe el fichero.

Requisitos
● La ficha "Ficheros de avisos" está abierta en el editor "Ficheros".
● La ventana de inspección está abierta.

922

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

Procedimiento
Para crear un fichero de avisos, proceda del siguiente modo:
1. Haga doble clic en "<Agregar>" en la tabla.
Se crea un fichero de avisos nuevo.
2. En el área "Propiedades > Propiedades > General" de la ventana de inspección introduzca
un nombre unívoco para el fichero de avisos.

3. En "Registros por fichero" determine el número de avisos que deben guardarse en un
fichero.
Se visualizan los requisitos de memoria aproximados en un medio de almacenamiento. Si
se archiva el texto de aviso con valores de variable, se necesitará más espacio de memoria.
4. En el campo "Ubicación", seleccione cómo deberán guardarse las entradas del fichero.
5. Seleccione, dependiendo de la "Ubicación" elegida, la "Ruta" o el "Nombre del origen de los
datos".
6. Para poder definir si los datos de avisos se han cambiado con posterioridad, active
"Propiedades > Propiedades > General > Suma de verificación".
Nota
Dependencia del dispositivo
La opción "Suma de verificación" solo está disponible para los paneles de operador y
visualizadores que soportan la "Configuración conforme a GMP".
7. Si lo desea podrá introducir un texto explicativo en la categoría "Comentario", con objeto de
documentar la configuración.

Resultado
Se creará el fichero de avisos. A este fichero de avisos se le pueden asignar una o varias
categorías.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

923

Trabajar con avisos
3.3 Archivación de avisos

Consulte también
Archivar avisos (Página 924)
Trabajar con ficheros (Página 1067)

3.3.1.3

Archivar avisos

Sinopsis
Los avisos se archivan siguiendo los pasos siguientes:
● Cree un fichero de avisos.
● Asigne el fichero de avisos creado a una categoría.
● Asigne la categoría a un aviso con el fichero de avisos creado.
● En la configuración de runtime se define en qué idioma deben escribirse los ficheros.
● El usuario evalúa los avisos archivados.
Los avisos archivados se evalúan directamente en el proyecto de WinCC, p. ej. en un visor
de avisos o con otros programas de usuario, p. ej. Microsoft Excel.
Nota
Campos de variables en el texto de aviso
El orden de los campos de variables en el texto de aviso depende del idioma. Al archivar
avisos en un archivo con formato "*.csv" se utiliza el orden del idioma de runtime.
Si se modifica la variable de un campo de salida en un idioma, en todos los demás idiomas
el campo de salida modificado figura al final del texto de aviso. Esto puede modificar el
orden de los campos de salida en el archivo comprimido.
Nota
Listas de textos en el texto de aviso
Si ha integrado una lista de textos en el texto de aviso y se ha archivado el aviso, en el
fichero de avisos se muestran las entradas de listas de textos.

Requisitos
● Se ha creado un fichero de avisos.
● El editor "Avisos HMI" está abierto.

Asignar el fichero de avisos a una categoría
Para asignar el fichero de avisos a una categoría, proceda del siguiente modo:
1. Abra la ficha "Categorías" del editor "Avisos HMI".
2. Seleccione la categoría deseada.
3. Seleccione el fichero de avisos deseado en "Propiedades > Propiedades > General >
Fichero" de la ventana de inspección.

924

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

Asignar un aviso a una categoría
Para asignar un aviso a su categoría, proceda del siguiente modo:
1. Abra la ficha "Avisos analógicos" o "Avisos de bit" en el editor "Avisos HMI".
2. Seleccione el aviso deseado.
3. En "Propiedades > Propiedades > General > Categoría" de la ventana de inspección,
seleccione la categoría para la que se ha configurado el fichero de avisos.

Resultado
El aviso se guarda en el fichero de avisos configurado.

Consulte también
Crear un fichero de avisos (Página 922)
Trabajar con ficheros (Página 1067)

3.3.1.4

Configurar visor de avisos archivados

Introducción
Los avisos archivados se visualizan en un visor de avisos en runtime o en una ventana de
avisos.

Requisitos
● Hay un visor o una ventana de aviso configurados en el editor "Imágenes"
● Se ha creado un fichero de avisos en el editor "Ficheros".
● Se han configurado avisos en el editor "Avisos HMI" como "archivables".

Configurar visor de avisos archivados
Para configurar la visualización de avisos archivados en un visor, proceda del siguiente modo:
1. Abra la imagen con el visor de avisos y seleccione el visor de avisos.
2. En la ventana de inspección active "Propiedades > Propiedades > General > Fichero de
avisos".
3. Haga clic en el botón "..." y seleccione el fichero de avisos.
4. Continúe la configuración del visor de avisos como para visualizar los avisos actuales.

Resultado
Los avisos archivados se visualizan en runtime en el visor de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

925

Trabajar con avisos
3.3 Archivación de avisos

3.3.1.5

Configurar el desbordamiento del búfer de avisos

Introducción
El tamaño del búfer de avisos depende del tipo de panel de operador. Determine en WinCC el
porcentaje del búfer de avisos que se borrará en caso de desbordamiento del mismo.

Requisitos
● Se ha creado un proyecto.

Procedimiento
Para configurar el comportamiento en caso de desbordamiento del búfer de avisos, proceda
del siguiente modo:
1. Haga doble clic en "Configuración de runtime" en el árbol del proyecto de su panel de
operador.
2. En "Avisos > General > Vaciado del búfer en porcentajes en caso de desbordamiento"
introduzca un valor entre 1 y 100.
Este valor determina el porcentaje que se borra en caso de desbordamiento del búfer de
avisos.

Resultado
Cuando los datos del búfer de avisos rebasan por exceso el tamaño de memoria del mismo,
se borra el porcentaje configurado de los avisos más largos del búfer.
Nota
El desbordamiento del búfer de avisos no se consulta de forma separada según el
procedimiento de aviso. Con la función de sistema "BorrarBúferDeAvisos" se borran
selectivamente del búfer avisos de unas categorías determinadas.

Consulte también
Trabajar con ficheros (Página 1067)

3.3.1.6

Acceso directo a la base de datos ODBC de ficheros

Resumen
Un fichero puede estar ubicado en una base de datos o en un archivo.
A la base de datos se accede a través de su "Data Source Name" (DSN) o nombre del origen
de los datos. La base de datos que se utiliza en WinCC se elige del modo siguiente:

926

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
En el menú Inicio de Windows, bajo "Configuración > Panel de control > ODBC Data Sources",
selecciona la base de datos.
Para almacenar los datos del fichero, introduzca durante la configuración el "Data Source
Name" (DSN) en lugar de un nombre de directorio. El DSN sirve para referenciar la base de
datos y su ubicación.
Para procesar y evaluar los datos de fichero posteriormente podrá aprovechar toda la
funcionalidad de la base de datos.

Utilización
El Data Source representa el vínculo con la base de datos. Cree el Data Source en el mismo
PC en el que se haya guardado el software runtime. Al crear un fichero en WinCC , introduzca
el DSN que ha configurado en dicho PC.
Desde la interfaz ODBC se accede directamente a la base de datos con otros programas, tales
como MS Access o MS SQL-Server.
Además, en el panel de operador se puede configurar la llamada a un programa, p. ej.
Microsoft Access, utilizando para ello la función de sistema "IniciarPrograma". Así no se
interrumpe el runtime.

3.3.1.7

Crear el origen de datos ODBC

Introducción
Para poder guardar en runtime los valores de proceso o los avisos en la base de datos de
ficheros, cree el origen de datos ODBC.

Requisitos
● Se ha creado una base de datos de ficheros.
La base de datos de ficheros se crea con el SQL Enterprise Manager. Encontrará más
información al respecto en Microsoft.

Procedimiento
Para crear un origen de datos ODBC, proceda del siguiente modo:
1. Abra las "Herramientas administrativas" en el Panel de control y seleccione "Orígenes de
datos (ODCB)".
Se abre el cuadro de diálogo "ODBC Data Source Administrator".
2. Haga clic en "User DSN > Add".
3. Seleccione "SQL-Server" y haga clic en "Finish".
4. En el siguiente cuadro de diálogo introduzca el nombre de los usuarios DSN y el SQLServer y haga clic en "Next".
5. Establezca en el siguiente cuadro de diálogo el método de inicio de sesión para la base de
datos SQL y haga clic en "Next".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

927

Trabajar con avisos
3.3 Archivación de avisos
6. Active "Change the default database to".
7. Seleccione la base de datos que usted mismo ha creado y haga clic en "Next".
8. En el siguiente cuadro de diálogo haga clic en "Finalizar".

3.3.1.8

Configurar la suma de verificación para un fichero

Introducción
En un proyecto regulado es posible asignar una suma de verificación a los datos de un fichero
de variables o de avisos. Utilizando esta suma de verificación, durante la operación de la planta
se puede determinar si los datos de un fichero se han modificado a posteriori.
Nota
Dependencia del panel
La opción "Suma de verificación" solo está disponible para los paneles de operador y
visualizadores que soportan la "Configuración conforme a GMP".

Requisitos
● La configuración conforme a GMP está activada.
● Se ha creado un fichero de variables o de avisos.

Procedimiento
Para configurar un fichero de variables o de avisos utilizando la suma de verificación, proceda
de la manera siguiente:
1. Abra el fichero de variables o de avisos en el respectivo editor de ficheros.
2. En el campo "Ubicación", seleccione la entrada "Archivo - CSV (ASCII)" o "Archivo - TXT
(Unicode)".

928

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
3. En la ventana de inspección, seleccione bajo "Propiedades > Propiedades > Método de
fichero" la opción "Mostrar aviso del sistema en" o "Disparar evento".

4. En la tabla del editor, active la opción "Activar suma de verificación".
5. Active la opción "Activar archivado al iniciar runtime" en la tabla del editor.
Las columnas ocultas se activan con el menú contextual de los títulos de las columnas.

6. Guarde el proyecto.

Resultado
A los datos del fichero se les asignará una suma de verificación en runtime.

3.3.1.9

Evaluar la suma de verificación de datos de fichero

Introducción
Si ha configurado un fichero de variables o de avisos con la creación de una suma de
verificación, puede comprobar si los datos del fichero se han modificado a posteriori.
Nota
Dependencia del equipo
La opción "Suma de verificación" solo está disponible para los paneles de operador y
visualizadores que soportan la "Configuración conforme a GMP".
Para comprobar la integridad de los datos del fichero se utiliza el programa del DOS
"HmiCheckLogIntegrity".
El programa "HmiCheckLogIntegrity" soporta la verificación de los siguientes datos:
● Archivos de ficheros de avisos, ficheros de variables y Audit en formato CSV
● Archivos de ficheros de avisos, ficheros de variables y Audit en formato TXT

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

929

Trabajar con avisos
3.3 Archivación de avisos
● Registros de receta en formato CSV
● Registros de receta en formato TXT
El programa "HmiCheckLogIntegrity.exe" se encuentra en la carpeta "WinCC Runtime
Advanced" del directorio de instalación de WinCC, por ejemplo, <C:\Program Files\Siemens
\Automation WinCC Runtime Advanced>.
Nota
Audit Trail y ficheros con suma de verificación
Antes de actualizar WinCC con un Service Pack o una nueva versión, guarde y cierre el Audit
Trail o los ficheros con suma de verificación. Una vez actualizado WinCC, el Audit Trail o los
ficheros con suma de verificación se prosiguen con nuevos archivos.
De este modo se asegura que los ficheros empiecen desde un estado definido en la nueva
versión.

Procedimiento
1. Copie del panel de operador al PC de configuración el archivo que desea verificar.
2. Abra la ventana del símbolo del sistema seleccionando "Inicio > Programas > Accesorios
> Símbolo del sistema".
3. En el símbolo del sistema, introduzca la ruta del archivo "HmiCheckLogIntegrity.exe",
seguida de un espacio en blanco. Después del espacio en blanco, introduzca entre comillas
la ubicación del archivo a verificar.

930

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
4. Pulse la tecla <Intro>.
5. Se efectúa la verificación.
Si los datos verificados son coherentes, aparece el aviso "Consistency check succeeded".

Si los datos verificados no son coherentes, aparece el aviso "Consistency check failed".
Además, se indica la primera fila incoherente del archivo.

Nota
Si la ruta del programa "HmiCheckLogIntegrity.exe" contiene espacios en blanco, la ruta se
debe indicar entre comillas.
También es posible comprobar la integridad de los datos de fichero con el AuditViewer.

3.3.1.10

Sumas de verificación para fichero en proyectos regulados

Sumas de verificación en proyectos regulados
Con WinCC se configuran en caso necesario proyectos regulados según las exigencias de la
FDA. Para crear proyectos regulados está disponible la opción "Audit".
En los proyectos regulados, los datos archivados de un fichero de avisos se dotan con una
suma de verificación. Dicha suma permite al operador determinar durante el funcionamiento
de la instalación si los datos de un fichero de avisos han sido modificados.
Para que la suma de verificación sea unívoca, su formación comienza en la primera línea de
un fichero de avisos y a medida que se continúa formando, se van incluyendo las líneas

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

931

Trabajar con avisos
3.3 Archivación de avisos
anteriores. Por ello, la formación de una suma de verificación sólo está disponible para los
ficheros siguientes:
● Fichero con aviso del sistema dependiente del nivel de llenado
● Fichero con ejecución de funciones de sistema cuando el fichero está lleno.
Asimismo, la formación de la suma de verificación sólo está disponible para ficheros de avisos
que se guardan como archivo con formato "*.csv" o "*.txt"(Unicode).
Si desea proseguir con suma de verificación un fichero existente que ha empezado sin suma
de verificación, se crea una copia de seguridad del fichero existente con el formato de archivo
"*.keep". A continuación se crea un fichero nuevo con sumas de verificación.
A fin de conservar la validez de las sumas de verificación, para la utilización de la función de
sistema "CopiarFichero" rigen las restricciones siguientes:
● Un fichero sin sumas de verificación no se puede copiar en un fichero con sumas de
verificación.
● Un fichero con sumas de verificación no se puede copiar en un fichero sin sumas de
verificación.

3.3.1.11

Controlar el comportamiento del fichero al cambiar de idioma en runtime

Introducción
En la configuración de runtime de su panel de operador se selecciona el idioma en el que
deben escribirse los ficheros en runtime.

Requisitos
● En el editor "Idiomas del proyecto" están activados los idiomas que utilice en su proyecto,
p. ej. "Alemán (Alemania)" e "Inglés (Estados Unidos)".

Procedimiento
Para definir el idioma de arranque, proceda del siguiente modo:
1. Seleccione "Configuración de runtime > Idioma y fuente" en el árbol del proyecto.
2. Active los idiomas de runtime "Alemán (Alemania)" e "Inglés (Estados Unidos)".
3. Determine la "Secuencia de cambio de idioma". Con el 0 se define el idioma de arranque,
p. ej. como sigue:
– Alemán 0.
– Inglés 1
Como "Idioma de arranque" se ha definido alemán ("0").
4. Seleccione "Configuración de runtime > General" en el árbol del proyecto.
5. Elija "Ficheros > Idioma de archivación > Idioma de arranque".

932

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

Resultado
El proyecto se iniciará una vez finalizada la transferencia. En la "Secuencia de cambio de
idioma" se ha definido alemán como "Idioma de arranque". Los ficheros se escriben en alemán.
En runtime, el operador cambia el idioma de runtime a inglés. No obstante, los ficheros se
siguen escribiendo en alemán.
El operador finaliza runtime. Debido al precedente cambio de idioma en runtime, el "Idioma de
arranque" es inglés en el siguiente inicio. Puesto que inglés es el idioma de arranque, los
ficheros se escriben ahora en inglés.
Si se vuelve a cambiar de idioma en runtime, los ficheros se siguen escribiendo en inglés hasta
que runtime se finalice de nuevo.
Si, en vez de "Idioma de arranque", selecciona una opción o un idioma diferente, los ficheros
se escriben siempre en el idioma seleccionado, independientemente de si el operador cambia
de idioma en runtime.

Consulte también
Enviar aviso completo del controlador al panel de operador y actualizar automáticamente
(Página 983)

3.3.1.12

Determinar el comportamiento del fichero al iniciar runtime

Introducción
Al configurar un fichero se define el comportamiento de arranque del fichero al iniciar Runtime.
En las propiedades del fichero se determina si la archivación empieza al iniciar runtime.
Además se determina si un fichero existente se debe continuar o sobrescribir.
El comportamiento de arranque se define por separado para cada fichero.

Requisitos
● Se ha creado un fichero.
● El editor "Ficheros" está abierto.
● La ventana de inspección con las propiedades del fichero está abierta.

Procedimiento
Para configurar el comportamiento de arranque de un fichero de variables, proceda de la
manera siguiente:
1. En el editor "Ficheros" seleccione el fichero para el que desea definir el comportamiento de
arranque.
2. En la ventana de inspección seleccione "Propiedades > Propiedades > Comportamiento de
arranque".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

933

Trabajar con avisos
3.3 Archivación de avisos
3. Si el archivado debe empezar al inicio de Runtime, active la opción "Activar archivación al
iniciar Runtime" en el área "Archivación".
También puede iniciar el archivado con la función de sistema "IniciarArchivación", por
ejemplo.
4. En el área "Comportamiento al reiniciar" se selecciona el comportamiento de arranque del
fichero.
– Con la opción "Restaurar fichero" se borran los valores archivados y se comienza
nuevamente con la archivación.
– Con la opción "Ampliar fichero" se agregan los nuevos valores a archivar al fichero ya
existente.
Otra alternativa consiste en configurar el comportamiento de arranque de un fichero
directamente en la tabla del editor "Ficheros". Las columnas ocultas se activan con el menú
contextual de los títulos de columna.

Resultado
En runtime se inicia la archivación conforme a la configuración.

3.3.1.13

Controlar la archivación según el nivel de llenado

Introducción
El tamaño de un fichero depende de la cantidad de registros. Con el método de archivación se
determina cómo se comporta el fichero cuando está lleno.

Métodos de archivación
Existen los métodos de archivación siguientes:

934

●

Fichero circular
Al alcanzarse el tamaño configurado del fichero se borran los registros más antiguos. Al
alcanzarse el tamaño configurado del fichero se borra aprox. el 20 % de las entradas más
antiguas. Por tanto, no es posible visualizar todas las entradas configuradas. Configure un
tamaño adecuado para el fichero circular. También puede configurar un fichero circular
segmentado.

●

Fichero circular segmentado
En un fichero circular segmentado se crean varios segmentos de fichero de igual tamaño
que se llenan uno tras otro. Cuando todos los ficheros estén completamente llenos, se
sobrescribirá el fichero más antiguo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
●

Fichero con aviso del sistema dependiente del nivel de llenado
Cuando se alcanza un nivel de llenado definible (p. ej. 90%) se lanza un aviso de sistema.
Cuando el fichero está lleno al 100 %, no se archivan nuevos valores de variable.

●

Fichero con disparo de un evento en función del nivel de llenado
Cuando el fichero se llene por completo se disparará el evento "Desbordamiento". En el
evento se configura una lista de funciones que se ejecuta cuando se produce el evento
"Desbordamiento". Cuando se alcanza el tamaño configurado del fichero, los nuevos
valores de variable no se archivan.
Para editar posteriormente ficheros llenos se encuentran disponibles funciones del sistema.

Requisitos
● Se ha creado un fichero.
● El editor "Ficheros" está abierto.
● La ventana de inspección con las propiedades del fichero está abierta.

Procedimiento
1. En el editor "Ficheros" seleccione el fichero para el que desea definir el método de
archivación.
2. Seleccione el método de archivación deseado en la ventana de inspección "Propiedades >
Propiedades > Método de archivación".
3. Si ha seleccionado un fichero circular segmentado, indique la cantidad de segmentos de
fichero. El sistema creará un segmento de fichero adicional para el fichero principal. De este
modo, el número total de archivos comprimidos creados resulta del número de segmentos
configurados y del fichero generado automáticamente.
Si ha seleccionado un fichero con la propiedad "Mostrar aviso de sistema al", indique el
nivel de llenado(en %) a partir del cual se debe visualizar un aviso de sistema.
Si ha seleccionado el ajuste "Disparar evento", configure la lista de funciones en el grupo
"Eventos".
Otra alternativa consiste en configurar el método de archivación de un fichero directamente en
la tabla del editor "Ficheros". Las columnas ocultas se activan con el menú contextual de los
títulos de columna.
El evento "Desbordamiento" no está disponible en la tabla del editor. Por tanto, la lista de
funciones debe configurarse en la ventana de inspección.

Resultado
El fichero seleccionado se comporta en runtime conforme a los ajustes efectuados.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

935

Trabajar con avisos
3.3 Archivación de avisos

3.3.2

Configurar la archivación de avisos

3.3.2.1

Principios básicos de la archivación de avisos

Introducción
En un fichero de avisos se documentan los avisos del proyecto. El sistema crea ficheros de
avisos. Si p. ej. se produce una avería o una violación de valor límite en runtime, se visualiza
un aviso configurado en runtime en el editor "Avisos HMI". Cada evento de aviso se archiva,
p. ej. el cambio de estado del aviso de "Aviso aparecido" a "Aviso acusado".
Se guardan los eventos de aviso en una base de datos de ficheros o se archivan como informe
de avisos en papel. En caso necesario, los avisos archivados en la base de datos se visualizan
en runtime, p. ej. en un visor de avisos.
Los avisos archivados se guardan en un fichero circular que consta de varios segmentos
individuales. El tamaño de todos los segmentos y de un segmento se define en la configuración
de los ficheros en "Fichero de avisos".
Para guardar regularmente los datos, configure copias de seguridad.

Pasos de configuración
Para archivar un aviso siga los pasos de configuración siguientes:
1. Definir la "Configuración de ficheros"
La configuración para archivar avisos se define en los ajustes de ficheros.
2. Activar la archivación de avisos
Se determina que los avisos de determinadas categorías deben archivarse.
3. Asignar un aviso a la categoría archivable

Contenido del fichero de avisos
En los ficheros de avisos se guardan todos los datos pertenecientes a un aviso, incluyendo los
datos de configuración. En los ficheros se leen p. ej. todas las propiedades de un aviso, tales
como categoría, sello de tiempo y textos de aviso. Un cambio posterior de los datos de
configuración de un aviso conlleva la creación de un segmento de fichero nuevo con los
nuevos datos de configuración. Esta función impide que el cambio influya en los avisos
archivados previamente al cambio.
El número de avisos que pueden archivarse depende del servidor utilizado.
Nota
El sello de tiempo de un aviso archivado se indica siempre en la forma estándar UTC (hora
universal coordinada).
Como los avisos se configuran por idiomas, existe una tabla con los datos de configuración en
los ficheros para cada idioma configurado.

936

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

Ubicación y medios de almacenamiento
Los datos de fichero se guardan en una base de datos. Los datos almacenados se pueden
seguir editando en otros programas p. ej. para realizar análisis.

Copia de seguridad para segmentos de fichero
Para garantizar una documentación perfecta del proceso, cree copias de seguridad de los
segmentos de fichero. Los ajustes se determinan en "Configuración de ficheros".

Visualizar datos archivados
Los datos archivados se visualizan en el panel de operador. Para ello, configure un visor de
avisos en el que se muestren los datos de fichero, o visualice en runtime el visor "Fichero de
corto plazo" o "Fichero de largo plazo" mediante botones.

Consulte también
Trabajar con ficheros (Página 1073)

3.3.2.2

Archivar avisos

Introducción
En los ajustes de los ficheros, determine el tamaño y el rango de tiempo de los segmentos de
un fichero de avisos. Con el tamaño de los segmentos individuales se define también el
número de segmentos individuales.
Los segmentos individuales se rellenan sucesivamente en runtime. Cuando un segmento se
llena por completo, se pasa al segmento siguiente. El cambio de segmento se configura
también en función del tiempo. Si se determina un momento para el cambio de segmento, el
segmento del fichero siguiente se llena una vez alcanzado este momento.
Nota
Recuerde que el tamaño del fichero no debe superar el espacio de memoria libre. El
administrador de ficheros no comprueba la plausibilidad de los ajustes seleccionados. Un gran
número de segmentos de fichero relacionados provoca probablemente tiempos de espera más
largos en el sistema al iniciar y finalizar el runtime.

Resumen
Los avisos se archivan con los pasos de configuración siguientes:
● Se configura el fichero de archivos en los ajustes de los ficheros.
Se determina el tamaño y la segmentación.
● Se configura una categoría archivable.
● Se asigna la categoría archivable a un aviso.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

937

Trabajar con avisos
3.3 Archivación de avisos

Requisitos
● Se ha creado una categoría.

938

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

Configurar fichero de avisos
Para configurar el fichero de avisos, proceda del siguiente modo:
1. Haga doble clic en "Configuración de runtime" en el árbol del proyecto.
2. Haga doble clic en "Archivación" en la navegación local.
Se abre la configuración de los ficheros.

3. En la ventana de inspección haga clic en "Propiedades > General" y determine los
siguientes ajustes:
– Introduzca los valores deseados en "Período de todos los segmentos" y "Tamaño
máximo de todos los segmentos".
Con las entradas del período de todos los segmentos y su tamaño máximo se determina
el tamaño de la base de datos de ficheros. Si se rebasa por exceso uno de los dos
criterios, se inicia un segmento nuevo. Cuando todos los segmentos están
completamente llenos, se sobrescribe el segmento más antiguo.
– Introduzca los valores deseados en "Período que abarca un segmento individual" y
"Tamaño máximo de un segmento".
Con las entradas del período de los segmentos individuales y su tamaño máximo se
determina el tamaño y el número de segmentos individuales. Si se rebasa por exceso
uno de los criterios, se inicia un segmento individual nuevo. Si se rebasa por exceso el
criterio "Período de todos los segmentos", se borra además el segmento individual más
antiguo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

939

Trabajar con avisos
3.3 Archivación de avisos
– Seleccione la fecha y hora iniciales del primer cambio de segmento en "Momento del
primer cambio de segmento".
Aunque el tamaño configurado se rebase por exceso después de iniciar runtime, el
segmento se modifica. En tal caso se borra también el segmento individual más antiguo.

Crear categoría con archivación
Para crear una categoría con archivación, proceda del siguiente modo:
1. Abra el editor "Avisos HMI".
2. Haga clic en la ficha "Categorías".
3. Seleccione la categoría cuyos avisos se archivarán.
4. En la ventana de inspección active "Propiedades > Propiedades > General > Configuración
> Fichero".
5. Asigne el aviso que se va a archivar a esta categoría.

Ejemplo de momento del primer cambio de segmento
Un segmento se cambia por primera vez el 17 de enero a las 23:59 horas. La próxima vez el
segmento cambia a partir del momento configurado con el ciclo indicado en "Período que
abarca un segmento individual". Con el ajuste "1 día" se efectúa el cambio cada día a las 23:59
horas. Si p. ej. se ha determinado el ciclo en "1 mes", el cambio de segmento se produce el 17.º
día del mes siguiente a las 23:59 horas.

Consulte también
Ajustes para la archivación (Página 682)
Definir el tamaño de fichero y la segmentación (Página 683)
Trabajar con ficheros (Página 1073)

940

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

3.3.2.3

Configurar una copia de seguridad del fichero de avisos

Principio
Para garantizar una documentación perfecta del proceso, cree copias de seguridad de sus
datos de ficheros con regularidad.
Nota
El backup se inicia de manera estándar un cuarto de hora después del primer cambio de
segmento condicionado por la hora. Si la copia de seguridad y el segmento deben iniciarse
sincronizados con runtime, se fija el momento del cambio de segmento antes del inicio de
runtime.
En runtime se puede introducir un comentario sobre un aviso mostrado en el visor de avisos.
Si el segmento de fichero en el que está guardado el aviso ya se ha trasvasado, el comentario
no es aceptado en el fichero trasvasado. El comentario sólo estará en el segmento de fichero
local.
Si el segmento de fichero aún no ha sido transferido, se aceptará el comentario modificado
permanentemente.

Requisitos
● Se abre la configuración de la archivación.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

941

Trabajar con avisos
3.3 Archivación de avisos

Procedimiento
Para crear una copia de seguridad de los segmentos de fichero, proceda del siguiente modo:
1. Haga doble clic en "Archivación" en la navegación local.
2. Active "Fichero de avisos > Copia de seguridad".

3. Haga clic en "Propiedades > General > Configuración de copia de seguridad > Ruta" de la
ventana de inspección.

942

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
4. Haga clic en
y busque una carpeta disponible donde guardar el archivo de copia de
seguridad. En caso necesario, cree una carpeta nueva con "Make New Folder". También
se puede utilizar una unidad de red como ubicación.

5. Para almacenar los datos archivados, active "Copia de seguridad".
Para almacenar los datos archivados en los directorios "Ruta" y "Ruta alternativa", active
adicionalmente "Copia de seguridad en ambas rutas".
También se puede utilizar una unidad de red como ubicación.
Sin la opción "Copia de seguridad en ambas rutas", el segundo archivo de copia de
seguridad se utiliza en los siguientes casos:
– Si está ocupado el espacio de memoria de un soporte de copia de seguridad.
– Si la ubicación original no está disponible por ejemplo cuando hay un fallo de la red.
Si se han configurado avisos de sistema correspondientes, se visualizarán avisos cuando
una ubicación no esté disponible.
6. Si un archivo de copia de seguridad debe incluir una firma, active la opción "Firmar".
La firma permite reconocer tras una nueva conexión con WinCC si se ha modificado un
archivo de copia de seguridad después de haber sido trasvasado.
Nota
La opción "Firmar" sobrecarga la memoria de trabajo. Cuando se utiliza la firma de ficheros,
el tamaño máximo de un segmento individual no debe exceder los 200 MB.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

943

Trabajar con avisos
3.3 Archivación de avisos

Resultado
La copia de seguridad del segmento de fichero se guarda en la ubicación indicada.

Estructura del archivo de copia de seguridad
Un archivo de copia de seguridad de un fichero de avisos tiene la estructura siguiente:
● Extensión
Un archivo de copia de seguridad de un segmento de fichero consta de dos archivos con
los formatos "*.ldf" y "*.mdf". Si se quiere transferir una copia de seguridad a otro PC, es
necesario copiar ambos archivos.
● Nombre de archivo
El nombre de archivo está compuesto de la siguiente manera:
"<Nombre_del_equipo>_<Identificación_del_proyecto>_<Tipo>_<Intervalo_de>_<Interval
o_hasta>"
Componente

Explicación

Ejemplo

Identificador del proyecto

La identificación del proyecto es
generada por el sistema. Los
guiones bajos son reemplaza‐
dos por "#".

HMI#4ZQV

Tipo

La identificación de tipo del fiche‐
ro de avisos es "ALG" (Archive
Log).

Período_de

El período de tiempo se indica
en formato yyyymmddhhmm.

Nombre de equipo

Período_hasta

FLEX-LOG2

200812021118 para el 2 de di‐
ciembre de 2008 a las 11:18 ho‐
ras

Ejemplo de un nombre completo de archivo de copia de seguridad:
FLEX-LOG2_HMI#4ZQV_ALG_200811291414_200812030502.ldf

Nota
Asignación al proyecto
En la identificación del proyecto generada en el nombre de archivo no se reconoce el nombre
del proyecto.
Para poder asignar archivos de copia de seguridad al proyecto, atribuya a la ubicación un
nombre de ruta que contenga el nombre del proyecto.

Firma del archivo de copia de seguridad
Cuando la firma y la copia de seguridad están activadas, cada archivo de copia de seguridad
de ficheros se firma cuando es trasvasado. De esta manera, cuando el archivo vuelva a ser
enlazado con WinCC se podrá determinar si el archivo ha sido modificado después de haber
sido trasvasado.
Cuando se utiliza la firma de ficheros, el tamaño máximo de un segmento individual no debe
exceder los 200 MB.

944

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos
Para verificar los datos, la opción "Firma activada" debe estar activada. Con la firma activada
se necesita más tiempo para conectar el archivo de copia de seguridad de ficheros con WinCC.
Se archivan 500 valores por segundo como máximo.
Nota
Si se desactiva la firma, p. ej. para establecer una conexión rápida con los archivos de copia
de seguridad, es necesario evitar un cambio de segmento durante la desactivación. Después
de la conexión hay que activar de nuevo la firma para que los datos que deben archivarse
contengan una firma.

Consulte también
Trabajar con ficheros (Página 1073)

3.3.2.4

Conectar y desconectar una copia de seguridad del fichero de avisos

Introducción
Cuando quiera acceder a los datos de un fichero de avisos trasvasado en runtime, conecte la
copia de seguridad del fichero con el proyecto. Configure una conexión automática o conecte
el fichero de avisos con el proyecto mediante un script. Los avisos archivados se muestran en
Runtime en la indicación de avisos.
Si no desea acceder más a la copia de seguridad de un segmento de fichero en runtime,
desconecte la copia de seguridad de fichero del proyecto.

Requisitos
● Los archivos correspondientes de los formatos "*. ldf" y "*.mdf" de la copia de seguridad
están guardados a nivel local.
● El proyecto se encuentra en runtime.

Rango de tiempo de la visualización
En Runtime se muestran los avisos únicamente si usted ha configurado de manera
correspondiente el intervalo de tiempo en la indicación de avisos.

Ejemplo
Usted ha configurado el intervalo de tiempo en la indicación de avisos de tal forma que se
muestren los avisos de las últimas 24 horas. Si se conecta una copia de seguridad de fichero
en la que hay guardados avisos que tienen más de 24 horas de antigüedad, éstos no se
muestran en el visor de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

945

Trabajar con avisos
3.3 Archivación de avisos

Conectar un fichero de avisos automáticamente
Para conectarse automáticamente con la copia de seguridad del fichero de avisos, proceda del
siguiente modo:
1. Inserte los archivos de copia de seguridad de fichero en la carpeta
"RutaDelProyectoRuntime\NombreDeProyecto\CommonArchiving".
2. En Runtime se conecta automáticamente el fichero de avisos con el proyecto.
Si la firma está activada, no se conectarán automáticamente los archivos de copia de
seguridad de fichero que estén modificados y firmados. Se generará un aviso de sistema de
WinCC y en la visualización de eventos de Windows, bajo "Aplicación", se añadirá una
entrada.

Conectar un fichero de avisos mediante un script
Los archivos de copia de seguridad de fichero se conectan con el proyecto mediante un script
del objeto VBS "AlarmLogs". Los segmentos de fichero se copian con el método VBS "Restore"
en la carpeta "Common Archiving" del proyecto de runtime. Encontrará más información en la
descripción del objeto VBS "AlarmLogs" y del método VBS "Remove".

Desconectar automáticamente el fichero de avisos
Para desconectar automáticamente la copia de seguridad del fichero de avisos del proyecto,
proceda del siguiente modo:
1. Navegue hasta la carpeta "RutaDelProyectoRuntime\NombreDeproyecto
\CommonArchiving".
2. Elimine los archivos de copia de seguridad de fichero de la carpeta.

Desconectar un fichero de avisos mediante un script
Los archivos de copia de seguridad de fichero se desconectan del proyecto mediante un script
del objeto VBS "AlarmLogs". Los segmentos de fichero se eliminan con el método VBS
"Remove" de la carpeta "Common Archiving" del proyecto de runtime. Encontrará más
información en la descripción del objeto VBS "AlarmLogs" y del método VBS "Remove".

3.3.2.5

Acceso directo a la base de datos de ficheros con C-API/ODK

Introducción
Diversos proveedores ofrecen interfaces que se pueden utilizar para acceder a bases de
datos. Estas interfaces permiten además el acceso directo a bases de datos de ficheros de
WinCC. En acceso directo se leen p. ej. valores de proceso para continuar procesándolos en
programas de cálculo de tablas.

Acceso a la base de datos de ficheros con C-API/ODK
Con la opción "WinCC Open Development Kit" se accede a datos y funciones de WinCC
mediante interfaces de programación abiertas.

946

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.3 Archivación de avisos

Información adicional
Encontrará más información sobre este tema en la documentación del WinCC Open
Development Kit

3.3.2.6

Acceso directo a la base de datos de ficheros con ADO/OLE DB

Introducción
Diversos proveedores ofrecen interfaces que se pueden utilizar para acceder a bases de
datos. Estas interfaces permiten además el acceso directo a bases de datos de ficheros de
WinCC. En acceso directo se leen p. ej. valores de proceso para continuar procesándolos en
programas de cálculo de tablas.

Acceso a las bases de datos de ficheros con ADO/OLE DB
Los valores de proceso se guardan comprimidos en las bases de datos de ficheros. Para
acceder a estos valores de proceso comprimidos, utilice el WinCC OLE DB Provider. Para
datos no comprimidos y datos de la archivación de avisos, utilice también las interfaces ADO/
OLE DB de Microsoft. Como lenguajes de programación se pueden utilizar p. ej. Visual Basic
o Visual C++.
Nota
Al acceder directamente a la base de datos de ficheros con ADO/OLE DB, tenga en cuenta que
la estructura del fichero puede cambiar a una nueva versión de WinCC.

Información adicional
Encontrará información adicional sobre este tema en Internet en la página:
msdn.microsoft.com (http://msdn.microsoft.com/en-us/library/default.aspx)

3.3.2.7

Configurar la retransferencia de avisos tras un fallo de red

Introducción
Para visualizar nuevamente los últimos avisos en runtime tras un fallo de red, configure la
retransferencia de avisos. En caso de fallo de red, se lee del fichero un número de avisos
configurado por el usuario. A partir de ahí se construye la última memoria imagen de proceso
pendiente.
Nota
En los sistemas redundantes no se permite la retransferencia de avisos tras un fallo de red.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

947

Trabajar con avisos
3.4 Manejo de avisos en runtime

Procedimiento
Para definir el número de avisos que deben retransferirse tras un fallo de red, proceda del
siguiente modo:
1. Haga doble clic en "Configuración de runtime" en el árbol del proyecto de su panel de
operador.
2. Haga clic en "Avisos" en la navegación local.
3. En "Propiedades > General > Entradas en la lista de avisos tras un fallo de alimentación" de
la ventana de inspección introduzca el número de avisos que se retransfieren tras un fallo
de alimentación.

Resultado
Tras un fallo de red, el número de avisos configurado por el usuario se retransferidos al visor
de avisos y se visualiza en runtime.

3.4

Manejo de avisos en runtime

3.4.1

Avisos en runtime

Avisos
Los avisos indican en el panel de operador eventos y estados que se presentan en la
instalación, en el proceso, o bien en el panel de operador. Los estados se notifican cuando
aparecen.
En el caso de los avisos pueden ocurrir los siguientes eventos:
● Aparecido
● Desaparecido
● Acusar
● Loop-In-Alarm
El ingeniero determina qué avisos deben ser acusados por el usuario.
Un aviso puede contener las informaciones siguientes:
● Fecha
● Hora
● Texto de aviso
● Ubicación del fallo
● Estado
● Categoría

948

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime
● Número de aviso
● Grupo de avisos

Categorías
Los avisos están asignados a distintas categorías.
● "Warnings"
Por lo general, los avisos de esta categoría indican estados en la instalación, p. ej. "Motor
encendido". Los avisos de esta categoría no deben acusarse.
● "Errors"
Los avisos de esta categoría siempre deben ser acusados. Por lo general, las alarmas
indican estados críticos en la instalación, p. ej. " Temperatura del motor demasiado
elevada".
● "Sistema"
Los avisos de sistema indican estados o eventos del panel de operador.
Los avisos del sistema informan p. ej. acerca de operaciones erróneas o de averías en la
comunicación.
● Categorías personalizadas
Las propiedades de esta categoría se definen durante la configuración.

Búfer de avisos
Los eventos de avisos se guardan en un búfer interno. El tamaño de este búfer de avisos
depende del tipo de panel de operador.
Con el ajuste "Búfer de avisos persistente" se activa y desactiva el búfer de avisos en runtime.
Por motivos de capacidad de memoria puede ser necesario desactivar el búfer de avisos.
El ajuste "Búfer de avisos persistente" está activado de forma estándar en "Configuración de
runtime > Avisos". Con este ajuste, el visor de avisos mostrará tanto los avisos actuales como
los avisos del búfer de avisos.
Si desactiva el búfer de avisos, deberá reiniciar el runtime para que el visor de avisos deje de
mostrar los avisos del búfer de avisos.

Visor de avisos
En el visor de avisos se visualizan los avisos o eventos de avisos seleccionados del búfer de
avisos. En la configuración se define si es necesario acusar los avisos que van apareciendo.

Ventana de avisos
La ventana de avisos no está asignada a ninguna imagen. Dependiendo de la configuración,
la ventana de avisos se abre cuando hay un aviso pendiente que pertenece a una determinada
categoría.
El orden de los avisos visualizados puede configurarse. Se puede elegir entre visualizar
primero el aviso actual o el más antiguo. Asimismo, en la ventana de avisos puede visualizarse
el lugar exacto del fallo con fecha y hora del evento de aviso. La visualización se puede

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

949

Trabajar con avisos
3.4 Manejo de avisos en runtime
configurar de manera que aparezcan sólo los avisos que contengan una cadena de caracteres
determinada en el texto.

Indicador de avisos
El indicador de avisos es un símbolo gráfico que se visualiza en la pantalla cuando aparece un
aviso de la categoría determinada.
El indicador de avisos puede tener dos estados:
● Intermitente: Hay como mínimo un aviso pendiente de acuse.
● Estático: Los avisos se han acusado, pero al menos uno de ellos no ha desaparecido
todavía. El número que aparece indica la cantidad de avisos que todavía están pendientes.

3.4.2

Avisos en runtime

Avisos
Los avisos indican en el panel de operador eventos y estados que se presentan en la
instalación, en el proceso, o bien en el panel de operador. Los estados se notifican cuando
aparecen.
En el caso de los avisos pueden ocurrir los siguientes eventos:
● Aparecido
● Desaparecido
● Acusar
El ingeniero determina qué avisos deben ser acusados por el usuario.
Un aviso puede contener las informaciones siguientes:
● Fecha
● Hora
● Texto de aviso
● Ubicación del fallo
● Estado
● Categoría
● Número de aviso
● Grupo de avisos

950

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime

Categorías
Los avisos están asignados a distintas categorías.
● "Warnings"
Por lo general, los avisos de esta categoría indican estados en la instalación, p. ej. "Motor
encendido". Los avisos de esta categoría no deben acusarse.
● "Errors"
Los avisos de esta categoría siempre deben ser acusados. Por lo general, las alarmas
indican estados críticos en la instalación, p. ej. " Temperatura del motor demasiado
elevada".
● "System"
Los avisos de sistema indican estados o eventos del panel de operador.
Los avisos del sistema informan p. ej. acerca de operaciones erróneas o de averías en la
comunicación.
● "Diagnosis Events"
Los avisos de diagnóstico SIMATIC muestran los estados y eventos del controlador
SIMATIC S7.
● "Safety Warnings"
La categoría "Safety Warnings" muestra avisos relacionados con el modo de seguridad
positiva. El usuario no acusa los avisos de esta categoría.
● Categorías en STEP 7
Las categorías configuradas en STEP 7 están disponibles también en el panel de operador.
● Categorías personalizadas
Las propiedades de esta categoría se definen durante la configuración.

Búfer de avisos
Los eventos de avisos se guardan en un búfer interno. El tamaño de este búfer de avisos
depende del tipo de panel de operador.
Nota
Aplicable a Panels y RT Advanced
Con el ajuste "Búfer de avisos persistente" se activa y desactiva el búfer de avisos en runtime.
Por motivos de capacidad de memoria puede ser necesario desactivar el búfer de avisos.
El ajuste "Búfer de avisos persistente" está activado de forma estándar en "Configuración de
runtime > Avisos". Con este ajuste, el visor de avisos mostrará tanto los avisos actuales como
los avisos del búfer de avisos.
Si desactiva el búfer de avisos, deberá reiniciar el runtime para que el visor de avisos deje de
mostrar los avisos del búfer de avisos.

Informe de avisos
Si está activado el registro de avisos en el proyecto, los avisos se imprimirán directamente en
la impresora conectada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

951

Trabajar con avisos
3.4 Manejo de avisos en runtime
Para cada aviso se puede configurar por separado si debe imprimirse o no. La impresión de un
aviso de este tipo se inicia cuando ocurren los eventos "Aparecido" y "Desaparecido".
En caso de que se deban imprimir avisos de la categoría "Sistema", habrá que hacerlo desde
el búfer de avisos correspondiente. En este caso se imprimirá todo el contenido del búfer de
avisos. Para ello se tiene que haber configurado en el proyecto un objeto de control que inicie
la impresión.
Nota
Aplicable a Panels y RT Advanced
Si está activada la generación de informes de avisos, los eventos de aviso se imprimirán en
cuanto finalice el runtime.

Fichero de avisos
En caso de haber configurado un fichero de avisos, los eventos de aviso también se guardarán
en este fichero. La capacidad del fichero está limitada por el soporte de memoria y por los
límites del sistema.

Visor de avisos
En el visor de avisos se visualizan los avisos o eventos de avisos seleccionados del búfer o del
fichero de avisos. En la configuración se define si es necesario acusar los avisos que van
apareciendo. La visualización se puede configurar de manera que aparezcan sólo los avisos
que contengan una cadena de caracteres determinada en el texto.

Ventana de avisos
La ventana de avisos no está asignada a ninguna imagen. Dependiendo de la configuración,
la ventana de avisos se abre cuando hay un aviso pendiente que pertenece a una determinada
categoría. Según la configuración, no volverá a cerrarse hasta que se haya acusado el aviso.
El orden de los avisos visualizados puede configurarse. Se puede elegir entre visualizar
primero el aviso actual o el más antiguo. Asimismo, en la ventana de avisos puede visualizarse
el lugar exacto del fallo con fecha y hora del evento de aviso. La visualización se puede
configurar de manera que aparezcan sólo los avisos que contengan una cadena de caracteres
determinada en el texto.

Indicador de avisos
El indicador de avisos es un símbolo gráfico que se visualiza en la pantalla cuando aparece un
aviso de la categoría determinada.
El indicador de avisos puede tener dos estados:
● Intermitente: Hay como mínimo un aviso pendiente de acuse.
● Estático: Los avisos se han acusado, pero al menos uno de ellos no ha desaparecido
todavía. El número que aparece indica la cantidad de avisos que todavía están pendientes.

952

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime

3.4.3

Manejo de la ventana de avisos, visor de avisos

3.4.3.1

Ventana de avisos, visor de avisos en runtime

Utilización
Los avisos se visualizan en el panel de operador en el visor, o bien en la ventana de avisos. La
apariencia y el manejo de la ventana de avisos son similares a los del visor de avisos.
La ventana de avisos no está asignada a ninguna imagen. Dependiendo de la configuración,
la ventana de avisos se abre cuando hay un aviso pendiente que pertenece a una determinada
categoría. Según la configuración, no volverá a cerrarse hasta que se haya acusado el aviso.

Representación
Dependiendo de la configuración, en el visor de avisos se visualizan diversas columnas con
información sobre un aviso o un evento de aviso. Si se ha configurado un filtro, se visualizarán
solo los avisos que contengan una determinada cadena de caracteres en el texto del aviso.
Con objeto de distinguir las diferentes categorías, la primera columna del visor de avisos
contiene un símbolo:
Símbolo

Categoría

!

"Errors"

Vacío

"Warnings"

en función de la configuración

Categorías personalizadas

$

"System"

S7

"Diagnosis Event"

!!

"Safety Warnings"

Manejo
Según sea la configuración, el visor de avisos se maneja del modo siguiente:
● Modificar el orden de las columnas.
● Modificar el orden de los avisos visualizados.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

953

Trabajar con avisos
3.4 Manejo de avisos en runtime
● Acusar avisos
● Editar avisos

Elementos de manejo
Los botones tienen las funciones siguientes:
Botón

Función
Mostrar el tooltip de un aviso
Loop-In-Alarm
Ejecuta la función configurada cada vez que se pulsa la tecla (p. ej., "ActivarI‐
magen"). Esto permite abrir una imagen que contenga información introducida
para el aviso seleccionado.
Además sirve para acusar recibo de un aviso de acuse obligatorio. 1)
Acusar un aviso

1)

Solo si hay una función configurada en el evento "Loop-In-Alarm" para el aviso seleccionado.

Comportamiento en caso de manejo
Ventanas de avisos modales en los paneles con teclado
Al configurar la ventana de avisos para paneles con teclado, active la propiedad "Modal" en
"Propiedades > Modo". Así queda garantizado que la ventana de avisos permanezca resaltada
al cambiar de imagen. La conmutación entre la imagen y las diversas ventanas mediante <Ctrl
+Tab> no es asistida. Si está destacada la ventana de avisos modal, no será posible pulsar los
botones en la imagen que se encuentre detrás de ella. Las funciones asociadas a una tecla de
función sí se ejecutan.

Modificar el orden de los avisos visualizados
Haciendo clic en la columna, los avisos que se deben acusar aparecen en primer lugar
ordenados según la fecha y la hora. Luego aparecen los avisos no requieren acuse, ordenados
asimismo según la fecha y la hora.

3.4.3.2

Manejar la ventana de avisos, visor de avisos

Introducción
Como alternativa al manejo con el ratón, el visor de avisos y la ventana de avisos pueden
manejarse con la tabla <TAB> del panel de operador. Con dicha tecla se seleccionan los
botones y el último aviso seleccionado del visor. Dependiendo de la configuración, el visor de
avisos también se maneja mediante las teclas de función.

954

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime

Manejo con el ratón
1. Seleccione el aviso que desea editar.
2. Haga clic en el botón cuya función desea ejecutar.

Manejo con el teclado
1. Pulse la tecla <Tab> hasta que la lista de los avisos visualizados aparezca seleccionada en
el visor de avisos.
2. Seleccione el aviso que desea editar. Utilice para ello las teclas <Arriba> y <Abajo>.
3. Pulse la tecla <Tab> hasta que aparezca seleccionado el botón cuya función desea
ejecutar.
4. Pulse la tecla <Intro>.

Modificar el orden de las columnas
1. Seleccione el título de una columna, p. ej. "Fecha".
2. Manteniendo oprimido el botón izquierdo del ratón, arrastre dicho título hasta el de la
columna "Hora".
La columna "Fecha" está situada delante de la columna "Hora".

Cambiar la clasificación
La lista se puede clasificar según la fecha o la hora.
1. Haga clic en el título de la columna correspondiente.
La lista se clasifica en orden ascendente o bien descendente en función de este criterio.
2. Para invertir el orden existente, vuelva a hacer clic en el título de la misma columna.

Acusar un aviso
1. Seleccione el aviso que desea acusar.
2. Haga clic en el botón

.

Disparar Loop-In-Alarm
1. Seleccione el aviso que desea editar.
2. Haga clic en el botón
.
Aparecerá la imagen que contiene información sobre el aviso.
Nota
Si se dispara el Loop-In-Alarm en un aviso no acusado, se acusará automáticamente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

955

Trabajar con avisos
3.4 Manejo de avisos en runtime

Visualizar el tooltip configurado
1. Seleccione el aviso en cuestión.
2. Haga clic en el botón
.
Se muestra el tooltip configurado para el aviso.

3.4.4

Manejo de la ventana de avisos simple, visor de avisos

3.4.4.1

Visor de avisos simple, ventana de avisos en runtime

Utilización
En el visor de avisos simple se visualizan los avisos o eventos de avisos seleccionados del
búfer de avisos. La apariencia y el manejo de la ventana de avisos simple son similares a los
del visor de avisos simple.
Nota
El objeto "Visor de avisos simple" no se dinamiza mediante un script.
En la ficha "Animaciones" de la ventana de inspección del sistema de ingeniería se dinamiza
la visibilidad de un objeto, p. ej. El objeto "Visor de avisos simple" no soporta ninguna
animación en runtime. Si se ha configurado una animación y se comprueba la coherencia del
proyecto, p. ej., en la ventana de resultados aparece un aviso de error.

Representación
Dependiendo de la configuración, en el visor de avisos se visualizan diversas columnas con
información sobre un aviso o un evento de aviso.

956

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime
Con objeto de distinguir las diferentes categorías, la primera columna del visor de avisos
contiene un símbolo:
Símbolo

Categoría

!

"Errors"

vacío

"Warnings"

en función de la configuración

Categorías personalizadas

$

"Sistema"

Manejo
Según sea la configuración, el visor de avisos se maneja del modo siguiente:
● Acusar avisos
● Editar avisos

Elementos de manejo
Los botones tienen las funciones siguientes:
Botón

Función
Acusar un aviso
Loop-In-Alarm
Ejecuta la función configurada cada vez que se pulsa la tecla (p. ej., "ActivarImagen").
Esto permite abrir una imagen que contenga información introducida para el aviso
seleccionado.
Además sirve para acusar recibo de un aviso de acuse obligatorio. 1)
Mostrar el tooltip de un aviso
Muestra el texto completo del aviso seleccionado en una ventana independiente (es
decir, en la ventana de textos de aviso)
En la ventana de textos de aviso se visualizan los textos de aviso que exceden el
espacio disponible en el visor de avisos. Cierre la ventana del texto de aviso con el
botón
.
Retrocede un aviso hacia arriba.
Retrocede una página hacia arriba en el visor de avisos.
Avanza una página hacia abajo en el visor de avisos.
Avanza un aviso hacia abajo.

1)

Solo si hay una función configurada en el evento "Loop-In-Alarm" para el aviso seleccionado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

957

Trabajar con avisos
3.4 Manejo de avisos en runtime

Representación de los elementos de control
La visualización de los botones de control en el visor de avisos simple depende del tamaño
configurado. Por tanto, compruebe en el panel de operador si están disponibles todos los
botones necesarios.

3.4.4.2

Manejar el visor de avisos simple, la ventana de avisos

Introducción
Como alternativa al manejo con el ratón, el visor de avisos simple puede manejarse con la tabla
<Tab> del panel de operador. Con dicha tecla se seleccionan los botones y el último aviso
seleccionado del visor. Dependiendo de la configuración, el visor de avisos también se maneja
mediante las teclas de función.

Manejo con el ratón
1. Seleccione el aviso que desea editar.
2. Haga clic en el botón cuya función desea ejecutar.

Manejo con el teclado
1. Pulse la tecla <Tab> hasta que la lista de los avisos visualizados aparezca seleccionada en
el visor de avisos.
2. Seleccione el aviso que desea editar. Utilice para ello las teclas <Arriba> y <Abajo>.
3. Pulse la tecla <Tab> hasta que aparezca seleccionado el botón cuya función desea
ejecutar.
4. Pulse la tecla <Intro>.

Acusar un aviso
1. Seleccione el aviso que desea acusar.
2. Haga clic en el botón

.

Disparar Loop-In-Alarm
1. Seleccione el aviso que desea editar.
2. Haga clic en el botón
.
Aparecerá la imagen que contiene información sobre el aviso.

958

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime

Acceder al texto de ayuda
1. Seleccione el aviso que desea editar.
2. Haga clic en el botón

.

3. Pulse el botón
o la combinación de teclas <Alt+F4> para cerrar la ventana en la que se
visualiza el texto de ayuda.

3.4.5

Manejo del indicador de avisos

3.4.5.1

Indicador de avisos en runtime

Utilización
Si hay avisos de la categoría definida que estén pendientes o deban acusarse, se mostrará el
indicador de avisos.

Representación
El indicador de avisos puede tener dos estados:
● Intermitente: Hay como mínimo un aviso pendiente de acuse.
● Estático: Los avisos se han acusado, pero al menos uno de ellos no ha desaparecido
todavía. El número que aparece indica la cantidad de avisos que todavía están pendientes.

Manejo
Dependiendo de la configuración, al accionar el indicador de avisos se abre una ventana de
avisos. El indicador de avisos sólo se puede manejar con el ratón o con la pantalla táctil.
Nota
Dependencia del equipo
El manejo con el ratón no es posible en todos los paneles de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

959

Trabajar con avisos
3.4 Manejo de avisos en runtime

3.4.5.2

Manejar el indicador de avisos con el ratón

Manejo con el ratón
1. Haga clic en el indicador de avisos con el puntero del ratón. Dependiendo de la
configuración se abrirá la ventana de avisos.
2. Para cerrar la ventana de avisos, haga clic en el símbolo
de avisos vuelve a abrirse la ventana de avisos.

3.4.6

. Haciendo clic en el indicador

Acusar avisos

Introducción
Los avisos se acusan en runtime según la configuración del proyecto. Acuse los avisos del
modo siguiente:
● Con los botones de los objetos de manejo y visualización
● Con la tecla "ACK" del panel de operador
● Con teclas de función o botones configurados individualmente
Si se ha configurado una autorización de uso para los elementos de control, sólo los usuarios
autorizados podrán acusar los avisos.
Para acusar los avisos en runtime automáticamente, utilice funciones de sistema y scripts así
como la opción "Acuse por parte del controlador".
Nota
Dependencia del equipo
Los scripts no están disponibles para todos los paneles de operador.

Variantes del acuse
En runtime los avisos se acusan uno por uno o varios a la vez. Se distinguen las opciones
siguientes:
● Acuse individual
Acuse de un aviso con un botón o una tecla de función.
● Acusar grupos de avisos
Acuse de todos los aviso de un grupo con un botón o una tecla de función.

Requisitos
● Se visualiza un aviso en el panel de operador.

960

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.4 Manejo de avisos en runtime

Procedimiento
Para acusar un aviso, proceda del siguiente modo:
1. Seleccione el aviso.
2. Si se utiliza un visor de avisos o una ventana de avisos, haga clic en el botón

.

3. Si se utiliza un visor de avisos simple o una ventana de avisos simple, haga clic en el
botón
.
4. Para acusar un aviso en una línea, pulse la tecla "ACK" del panel de operador.
Nota
Dependencia del equipo
El visor de recetas avanzado, la ventana de avisos avanzada y la línea de avisos no están
disponibles para todos los paneles de operador.

Resultado
El aviso recibe el estado "acusado". Cuando la condición para que se lance un aviso ya no se
cumple, el aviso recibe además el estado "desaparecido" y ya no se muestra en el panel de
operador.

3.4.7

Filtrar avisos

Introducción
En el visor de avisos no se incluye ningún elemento de control en runtime para la entrada de
criterios de filtrado. Para ello, configure un campo E/S en el editor "Imágenes".

Requisitos
● Se ha configurado un filtro para el visor de avisos.
● Se visualiza un campo E/S para introducir el criterio.
● En runtime se visualizan avisos.

Activar el filtro
1. Introduzca la cadena de caracteres en el campo E/S como criterio.
2. Confirme la entrada.
En el visor de avisos sólo se muestran los avisos que contienen la cadena de caracteres
introducida. A este efecto se distingue entre mayúsculas y minúsculas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

961

Trabajar con avisos
3.5 Manejo de avisos en runtime

Desactivar el filtro
1. Borre la cadena de caracteres en el campo E/S que está previsto para filtrar el visor de
avisos.
2. Confirme la entrada.
En el visor de avisos se muestran de nuevo todos los avisos.

3.5

Manejo de avisos en runtime

3.5.1

Avisos en runtime

Avisos
Los avisos indican en el panel de operador eventos y estados que se presentan en la
instalación, en el proceso, o bien en el panel de operador. Los estados se notifican cuando
aparecen.
En el caso de los avisos pueden ocurrir los siguientes eventos:
● Aparecido
● Desaparecido
● Acusar
El ingeniero determina qué avisos deben ser acusados por el usuario.
Un aviso puede contener las informaciones siguientes:
● Fecha
● Hora
● Texto de aviso
● Ubicación del fallo
● Estado
● Categoría
● Número de aviso
● Grupo de avisos

962

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

Categorías
Los avisos están asignados a distintas categorías.
● "Warnings"
Por lo general, los avisos de esta categoría indican estados en la instalación, p. ej. "Motor
encendido". Los avisos de esta categoría no deben acusarse.
● "Errors"
Los avisos de esta categoría siempre deben ser acusados. Por lo general, las alarmas
indican estados críticos en la instalación, p. ej. " Temperatura del motor demasiado
elevada".
● "System"
Los avisos de sistema indican estados o eventos del panel de operador.
Los avisos del sistema informan p. ej. acerca de operaciones erróneas o de averías en la
comunicación.
● "Diagnosis Events"
Los avisos de diagnóstico SIMATIC muestran los estados y eventos del controlador
SIMATIC S7.
● "Safety Warnings"
La categoría "Safety Warnings" muestra avisos relacionados con el modo de seguridad
positiva. El usuario no acusa los avisos de esta categoría.
● Categorías en STEP 7
Las categorías configuradas en STEP 7 están disponibles también en el panel de operador.
● Categorías personalizadas
Las propiedades de esta categoría se definen durante la configuración.

Búfer de avisos
Los eventos de avisos se guardan en un búfer interno. El tamaño de este búfer de avisos
depende del tipo de panel de operador.
Nota
Aplicable a Panels y RT Advanced
Con el ajuste "Búfer de avisos persistente" se activa y desactiva el búfer de avisos en runtime.
Por motivos de capacidad de memoria puede ser necesario desactivar el búfer de avisos.
El ajuste "Búfer de avisos persistente" está activado de forma estándar en "Configuración de
runtime > Avisos". Con este ajuste, el visor de avisos mostrará tanto los avisos actuales como
los avisos del búfer de avisos.
Si desactiva el búfer de avisos, deberá reiniciar el runtime para que el visor de avisos deje de
mostrar los avisos del búfer de avisos.

Informe de avisos
Si está activado el registro de avisos en el proyecto, los avisos se imprimirán directamente en
la impresora conectada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

963

Trabajar con avisos
3.5 Manejo de avisos en runtime
Para cada aviso se puede configurar por separado si debe imprimirse o no. La impresión de un
aviso de este tipo se inicia cuando ocurren los eventos "Aparecido" y "Desaparecido".
En caso de que se deban imprimir avisos de la categoría "Sistema", habrá que hacerlo desde
el búfer de avisos correspondiente. En este caso se imprimirá todo el contenido del búfer de
avisos. Para ello se tiene que haber configurado en el proyecto un objeto de control que inicie
la impresión.
Nota
Aplicable a Panels y RT Advanced
Si está activada la generación de informes de avisos, los eventos de aviso se imprimirán en
cuanto finalice el runtime.

Fichero de avisos
En caso de haber configurado un fichero de avisos, los eventos de aviso también se guardarán
en este fichero. La capacidad del fichero está limitada por el soporte de memoria y por los
límites del sistema.

Visor de avisos
En el visor de avisos se visualizan los avisos o eventos de avisos seleccionados del búfer o del
fichero de avisos. En la configuración se define si es necesario acusar los avisos que van
apareciendo. La visualización se puede configurar de manera que aparezcan sólo los avisos
que contengan una cadena de caracteres determinada en el texto.

Ventana de avisos
La ventana de avisos no está asignada a ninguna imagen. Dependiendo de la configuración,
la ventana de avisos se abre cuando hay un aviso pendiente que pertenece a una determinada
categoría. Según la configuración, no volverá a cerrarse hasta que se haya acusado el aviso.
El orden de los avisos visualizados puede configurarse. Se puede elegir entre visualizar
primero el aviso actual o el más antiguo. Asimismo, en la ventana de avisos puede visualizarse
el lugar exacto del fallo con fecha y hora del evento de aviso. La visualización se puede
configurar de manera que aparezcan sólo los avisos que contengan una cadena de caracteres
determinada en el texto.

Indicador de avisos
El indicador de avisos es un símbolo gráfico que se visualiza en la pantalla cuando aparece un
aviso de la categoría determinada.
El indicador de avisos puede tener dos estados:
● Intermitente: Hay como mínimo un aviso pendiente de acuse.
● Estático: Los avisos se han acusado, pero al menos uno de ellos no ha desaparecido
todavía. El número que aparece indica la cantidad de avisos que todavía están pendientes.

964

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

3.5.2

Visor de avisos

Introducción
El objeto "Visor de avisos" muestra los avisos que aparecen durante el proceso en una
instalación. El visor de avisos también se utiliza para mostrar avisos en listas. WinCC ofrece
diferentes visores, p. ej. el de "Avisos actuales" o "Fichero de corto plazo".

En runtime se puede saltar de un objeto al siguiente con la tecla <TAB>, a fin de introducir
valores o hacer clic en botones. Otra posibilidad de manejar el visor de avisos es con el ratón.
Nota
En el visor de avisos se asigna a un aviso un sello de tiempo tachado con una línea cuando se
presenta uno de los siguientes casos:
● Un aviso bloqueado que es autorizado otra vez.
● Un aviso se recarga en caso de que falle la red. Esto vale sólo para la notificación
cronológica.
● PLC se reinicia. Esto vale sólo para la notificación cronológica.

Requisitos
● El botón "Loop-In-Alarm" está configurado en el visor de avisos.
● El modo de cursor está ajustado para la imagen en "Cursor de conmutación".
● Los objetos están habilitados para su manejo.
● La autorización de uso está asignada.

Manejo con el ratón
1. Haga clic en el aviso que desee editar.
2. Haga clic en el elemento de control cuya función desee ejecutar.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

965

Trabajar con avisos
3.5 Manejo de avisos en runtime

Manejo con el teclado
1. Pulse la tecla <Tab> hasta que la lista de los avisos visualizados aparezca seleccionada en
el visor de avisos.
2. Seleccione el aviso que desea editar. Utilice para ello las teclas <Arriba> y <Abajo>.
3. Pulse la tecla <Tab> hasta que aparezca seleccionado el elemento de control cuya función
desee ejecutar.
4. Pulse la tecla <Intro>.

Manejo alternativo
Dependiendo de la configuración, el visor de avisos también se maneja mediante las teclas de
función.

Ejemplo: Modificar el orden de las columnas
Esta opción es configurable. Sólo está disponible en runtime si se ha activado "Fuente de tabla
> Título de columnas > Clasificar" en la ventana de inspección del visor de avisos.
1. Seleccione el título de una columna, p. ej. "Fecha".
2. Manteniendo oprimido el botón izquierdo del ratón, arrastre dicho título hasta el de la
columna "Hora".

Ejemplo: Modificar el orden de los avisos en una columna
Esta opción es configurable. Sólo está disponible en runtime si se ha activado "Fuente de tabla
> Título de columnas > Ordenar por títulos de columna" en la ventana de inspección del visor
de avisos.
1. Haga clic en el título de la columna.
2. Para invertir el orden existente, vuelva a hacer clic en el título de esa columna.

Ejemplo: Loop-In-Alarm
Loop-In-Alarm inicia el cambio configurado a la imagen que contiene la información sobre el
aviso.
1. Seleccione el aviso que desea editar.
2. Haga clic en el botón "Loop-In-Alarm".

Comportamiento en caso de manejo
Al lanzar Loop-In-Alarm de un aviso no acusado, éste se acusa automáticamente.

Consulte también
Visor de avisos (Página 431)

966

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

3.5.3

Botones del visor de avisos

Introducción
Para proporcionar al usuario una mejor panorámica de los avisos en curso, el visor de avisos
muestra listas de avisos específicas. La listas filtran y clasifican los avisos según determinadas
propiedades. Estas propiedades y la representación de las listas se definen individualmente
cuando se configura el visor de avisos.

Listas en el visor de avisos
Existe la posibilidad de visualizar seis listas diferentes en la ventana de avisos. Para visualizar
las listas de avisos en el visor, haga clic en el botón correspondiente de la barra de
herramientas del visor de avisos.
Lista

Descripción

Lista de avisos

Muestra los avisos pendientes.

Lista de ficheros circulantes

Muestra los avisos archivados.
Cuando entran nuevos avisos se actualiza inmediatamente
la visualización.

Lista de ficheros históricos

Muestra los avisos archivados.
Cuando entran nuevos avisos no se actualiza inmediatamen‐
te la visualización.

Lista de bloqueos

Muestra los avisos bloqueados.

Estadística de avisos

Muestra la información estadística.

Lista de los avisos ocultos

Muestra los avisos ocultos. Los avisos ocultos también se
archivan.

Nota
Avisos de diagnóstico del sistema ocultos
Para los avisos de diagnóstico del sistema ocultos, los textos de los avisos no se muestran en
la lista de avisos ocultos.
La lista de los avisos ocultos representa únicamente los datos de configuración del aviso, no
es una vista en tiempo real.
Para mostrar los avisos de diagnóstico del sistema ocultos activos deberá adaptar el filtro para
la lista de avisos online.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

967

Trabajar con avisos
3.5 Manejo de avisos en runtime

Lista de avisos filtrada
Con el filtro del visor de avisos se configuran los visores en los que se visualizan las listas de
avisos individuales. Es posible configurar un filtro para cada lista de avisos. Configure un visor
de avisos propio para cada lista de avisos filtrada.
Nota
En las listas de avisos se le asigna a un aviso un sello de fecha y un sello de tiempo tachados
con una línea cuando se presenta uno de los siguientes casos:
● Un aviso bloqueado vuelve a habilitarse.
● Un aviso se retransfiere en caso de fallo de red; sólo para la notificación cronológica.
● El PLC se reinicia; sólo para la notificación cronológica.

Consulte también
Filtrar avisos en runtime (Página 968)

3.5.4

Filtrar avisos en runtime

Introducción
Utilice criterios para definir en runtime qué avisos se deben representar en el visor de avisos.
En el siguiente ejemplo se visualizan sólo los avisos que contienen el texto "Motor encendido".

Requisitos
El botón

"Filtrar avisos" está configurado en el visor de avisos.

Procedimiento
Para filtrar avisos en el visor, proceda del siguiente modo:
1. Haga clic en runtime en el botón "Filtrar avisos".
Se abre el cuadro de diálogo "Definir selección".
2. Haga doble clic en la vista de árbol de la carpeta "Bloques de texto" y haga clic en "Texto
de aviso". Active en la ventana derecha la opción "Texto de búsqueda" y haga doble clic en
"Texto de búsqueda".
3. Se abre el cuadro de diálogo "Entrada de texto". Introduzca el texto de búsqueda "Motor
encendido" y confirme con "Aceptar".
4. Confirme sus entradas con "Aceptar" en el cuadro de diálogo "Definir selección".
El visor muestra sólo los avisos seleccionados.
En algunos bloques de aviso, p. ej. los bloques de sistema "Fecha" y "Hora", determine
instantes iniciales y finales o textos de búsqueda en el cuadro de diálogo "Definir selección".
La entrada debe corresponder al formato requerido en el cuadro de diálogo.

968

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime
En el cuadro de diálogo "Definir selección" existen los ajustes siguientes:
Campo

Descripción

Filtro de texto
con paridad
exacta

Si la opción "Filtro de texto con paridad exacta" no está activada, se seleccionan
todos los bloques de texto que contienen la cadena de caracteres indicada.

Persistencia en
RT

Si la opción "Persistencia en RT" está activada, los cambios en los criterios se man‐
tienen incluso después de cambiar de imagen.

Persistencia en
CS y RT

Si la opción "Persistencia en RT y CS" está activada, se aplican los ajustes modifi‐
cados también en el sistema de ingeniería. Para ello es necesario abrir y guardar de
nuevo la imagen en el editor "Imágenes". Los ajustes modificados se utilizan también
cuando se activa nuevamente el proyecto.

Borrar filtros

Este botón permite borrar todos los criterios configurados.

Si la opción "Filtro de texto con paridad exacta" está activada, se seleccionan todos
los bloques de texto que corresponden a la cadena de caracteres indicada.

Filtrar por valores de proceso
No es posible introducir texto como criterio para un valor de proceso.
Para filtrar según el texto de un bloque de parámetros o según las variables de proceso
representadas, proceda del siguiente modo:
1. Inserte este valor de proceso en un aviso como texto de aviso de un bloque de texto de
usuario.
2. Filtre en runtime los avisos según el texto en el bloque de aviso "Texto de aviso".
Nota
En los sistemas multipuesto, recuerde que en un cliente los contenidos que se muestran en
el cuadro de diálogo "Definir selección" se llaman igual en todos los servidores.
Si se modifica la base de tiempo del visor de avisos, el valor inicial y el valor final no se
adaptan automáticamente cuando se filtra por hora.
Ejemplo: En la ubicación del equipo con la zona horaria "UTC + 1h", se ha seleccionado
"Zona horaria local" en el visor de avisos. Se filtra según la hora 10:00 h hasta 11:00 h.
Modifique la base de tiempo de "Zona horaria local" a "UTC". Si desea visualizar los mismos
avisos, modifique el filtro a 9:00 h hasta 10:00 h

Consulte también
Visor de avisos (Página 431)

3.5.5

Clasificar avisos en runtime

Introducción
Los avisos del visor se pueden clasificar en runtime por títulos de columnas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

969

Trabajar con avisos
3.5 Manejo de avisos en runtime
Ejemplos para clasificar avisos:
● Descendente según fecha, hora, número de aviso. El aviso más reciente aparece arriba.
● Según su prioridad
Para ello hay que definir las prioridades de los avisos en el editor "Avisos HMI" y configurar
el bloque de aviso "Prioridad" en el visor de avisos. Así en el visor de una línea aparece sólo
el aviso con prioridad alta en la ventana de avisos. Un aviso con prioridad más baja no se
representa aunque tenga una fecha más reciente. Los avisos se visualizan por orden
cronológico.
● El bloque de aviso "Estado de aviso" se clasifica según el tipo del estado y no según los
textos de estado configurados. Si la clasificación es ascendente, se clasifica siguiendo esta
secuencia:
– Aparecido
– Desaparecido
– Acusado
– Bloqueado
– Habilitado
– Acuse automático
– Acuse de emergencia
– Aparecido/Desaparecido
Nota
Determinar criterios de clasificación en ES para el visor de avisos
Dado el caso, se determinan los criterios de clasificación durante la configuración del
visor de avisos. Haga clic en "Propiedades > Propiedades > Visualización > Columnas"
de la ventana de inspección del visor de avisos.

Clasificar avisos
Al clasificar el visor de avisos por columnas, determine la clasificación en un máximo de cuatro
columnas. Se visualizan una flecha y un número a la derecha del título de la columna. La flecha
muestra la clasificación ascendente o descendente. El número junto a la flecha indica el orden
por títulos de columna.

Requisitos
● En el visor de avisos se ha seleccionado "Clasificar por clic del ratón" o "Clasificar por doble
clic del ratón".
Haga clic en "Propiedades > Propiedades > Tabla > Tabla - Clasificación > Configuración".
● En el visor de avisos se activa el botón "Autoscroll".
Haga clic en "Propiedades > Propiedades > Barra de herramientas > Barra de herramientas
- Botones".

970

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

Procedimiento
Para clasificar avisos en el visor por columnas, proceda del siguiente modo:
1. Haga clic o doble clic en el título de la columna que deba ser el primer criterio de
clasificación para los avisos.
El número "1" se visualiza con la flecha hacia arriba para la clasificación ascendente.
– Si el orden de clasificación "Arriba y abajo" está activado en el visor de avisos, la
visualización cambia de ascendente a descendente con cada clic o doble clic en el título
de columna.
– Si está activado el orden de clasificación "Arriba, abajo, ninguno", la clasificación se
suprime al tercer clic.
2. Si se quiere clasificar por varias columnas, haga clic en el correspondiente título de
columna en el orden deseado.
Nota
La clasificación no reacciona a los eventos o a un cambio en la configuración de los bloques
de aviso.
Un bloque de aviso corresponde a un campo de un aviso. Si se determina un bloque de
aviso como criterio de clasificación en el cuadro de diálogo de clasificación y después se
elimina el bloque de aviso de la línea de avisos en "Propiedades > Propiedades >
Columnas", la clasificación se mantiene con la secuencia establecida. En el cuadro de
diálogo de clasificación se visualiza un campo vacío en lugar del bloque de aviso eliminado.
Si no se determina otra clasificación y el bloque de aviso eliminado se incorpora de nuevo
a la configuración de los bloques, los avisos se clasifican otra vez del modo original.

3.5.6

Conmutar visor de avisos en runtime

Introducción
En el visor de avisos se filtran los avisos que deben visualizarse mediante botones
preconfigurados.

Requisitos
● En el visor de avisos se han configurado los seis botones correspondientes para visualizar
una selección determinada de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

971

Trabajar con avisos
3.5 Manejo de avisos en runtime

Procedimiento
Para visualizar una selección determinada de avisos en el visor, proceda del siguiente modo:
● Haga clic en uno de los siguientes botones del visor de avisos:
Lista de avisos para visualizar los avisos pendientes actualmente
Lista de ficheros de corto plazo para visualizar avisos archivados
Cuando entran nuevos avisos se actualiza inmediatamente la visualización.
Lista de ficheros de largo plazo para visualizar avisos archivados
Lista de bloqueos para visualizar los avisos bloqueados actualmente
Estadística de avisos para visualizar informaciones estadísticas
Lista de los avisos ocultos para visualizar los avisos que se archivan pero que no son
visibles

3.5.7

Visualizar avisos archivados en runtime

Introducción
El visor de avisos no sólo muestra en runtime los avisos actuales, sino también los avisos del
fichero.

Requisitos
● Todos los datos archivados que se deban visualizar en Runtime, han de encontrarse
localmente en el servidor de ficheros. El servidor SQL no permite ningún acceso a archivos
de copia de seguridad que, por ejemplo, se encuentran en otro PC de la red.
● Los botones "Lista de ficheros de corto plazo" y "Lista de ficheros de largo plazo" están
configurados en el visor de avisos.

Procedimiento
Para visualizar avisos archivados en runtime, proceda del siguiente modo:
1. En el visor de avisos, haga clic en el botón "Lista de ficheros de corto plazo" para ver los
avisos archivados y actuales. En la lista de ficheros de corto plazo se actualizan de
inmediato los nuevos avisos entrantes.
-O1. En el visor de avisos, haga clic en el botón "Lista de ficheros de largo plazo" para ver
solamente los avisos archivados. La lista de ficheros de largo plazo muestra sólo avisos
archivados. En la lista de ficheros de largo plazo es posible introducir o visualizar un
comentario.

972

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

3.5.8

Imprimir avisos en runtime

Introducción
De acuerdo con su configuración en el editor "Avisos HMI" y en el editor "Informes", el usuario
tiene las posibilidades siguientes de imprimir avisos en runtime:
Imprimir informe secuencial de avisos
Si el informe secuencial de avisos está activado, cada cambio de estado de un aviso se
imprime de forma continua en una impresora en runtime. En runtime no se requieren
operaciones para tal fin.
Imprimir un informe
La operación en runtime depende de la configuración del usuario. Existen las siguientes
posibilidades para imprimir un informe de avisos en runtime:
● Impresión controlada por tiempo
– Impresión única controlada por tiempo, p. ej. al empezar un turno
– Impresión repetitiva a intervalos, p. ej. cada dos horas
● Impresión controlada por eventos
– Modificación del valor de una variable
– Haga clic en un botón configurado de una imagen
– Haga clic en el botón

del visor de avisos.

– Desbordamiento de un fichero
– Script
Nota
Tenga en cuenta que para la impresión directa de los avisos en runtime se soportan solo
caracteres ASCII.

Requisitos
● Se visualizan varios avisos en el panel de operador.

Procedimiento
Para imprimir la vista actual de la ventana de avisos en runtime, proceda del siguiente modo:
1. Filtre en caso necesario el visor de avisos con ayuda de los elementos de control del visor.
2. Haga clic en el botón

del visor de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

973

Trabajar con avisos
3.5 Manejo de avisos en runtime

Resultado
En la impresora configurada se imprimen los avisos visualizados en la ventana de avisos
conforme a los ajustes del editor "Informes".

Ajustar impresora
Configure la impresora en el Control Panel del correspondiente panel de operador. Los ajustes
dependen del sistema operativo del panel de operador. Encontrará más información al
respecto en las instrucciones de servicio de su panel de operador y en el capítulo "Registrar
avisos (Página 908)".

Consulte también
Trabajar con informes (Página 1277)

3.5.9

Bloqueo de avisos en runtime

3.5.9.1

Bloquear avisos individuales

Introducción
Si se bloquea un aviso, éste no se visualiza y no se archiva. En caso necesario se pueden
bloquear avisos, categorías o grupos de avisos individuales.
Nota
Aviso bloqueado:
Los avisos bloqueados ya no lo están tras el rearranque completo de WinCC Runtime. Se
mantienen bloqueados sólo los avisos que se bloquean directamente en el PLC mediante
bloques de datos (bloqueo con origen).
Categorías / grupos de avisos bloqueados:
El bloqueo de categorías y grupos de avisos se mantiene también después de un rearranque
completo de WinCC Runtime.

Requisitos
● El visor de avisos está configurado.
● El visor de avisos se muestra en runtime.

974

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime
● Los botones "Bloquear/desbloquear aviso"
configurados.

/

y "Avisos bloqueados" están

● El usuario cuenta con la autorización para bloquear y desbloquear avisos.
Nota
Las autorizaciones "Bloquear avisos" y "Desbloquear avisos" deben estar configuradas
directamente una debajo de la otra. Esto es necesario porque para la autorización
"Desbloquear avisos" se utiliza automáticamente el nivel de autorización que figura en las
autorizaciones justo debajo de la autorización "Bloquear avisos".

Procedimiento
Para bloquear la visualización de avisos con el botón, proceda del siguiente modo:
1. En el visor de avisos, seleccione el aviso que desea bloquear.
2. Haga clic en el botón "Bloquear aviso".
El aviso se elimina de la lista.
3. Para visualizar todos los avisos bloqueados, haga clic en el botón "Avisos bloqueados".
Se visualiza la lista de bloqueo
4. Seleccione el aviso que desee desbloquear.
5. Haga clic en el botón "Desbloquear aviso".
El aviso se muestra de nuevo y se elimina de la lista de bloqueo.
Nota
El bloqueo o desbloqueo de un aviso de Alarm_8(P) mediante S7PMC hace que los 8
avisos de este bloque se bloqueen o desbloqueen.

Consulte también
Visor de avisos (Página 431)

3.5.9.2

Bloquear avisos con el número de aviso

Requisitos
● El botón "Cuadro de diálogo de bloqueo"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

está configurado en el visor de avisos.

975

Trabajar con avisos
3.5 Manejo de avisos en runtime

Procedimiento
Para bloquear la visualización de avisos con el número de aviso, proceda del siguiente modo:
1. Haga clic en el botón
.
Se abre el cuadro de diálogo "Parametrizar lista de bloqueo".

2. Haga clic en un servidor de la lista de servidores o en el PC local en caso de proyectos
monopuesto.
3. Haga clic en el botón "Agregar" y, en el siguiente cuadro de diálogo, introduzca el número
de aviso que desea bloquear.
4. Dado el caso se pueden bloquear varios avisos a la vez. Introduzca para ello el número de
aviso separado por una coma. Para un rango de números, introduzca el rango con formato
"5-10". Sólo se bloquean rangos de números continuos. Si hay espacios en el rango
indicado, se visualiza la indicación "Rango no válido".
5. Un aviso bloqueado se introduce seleccionándolo en la lista de avisos bloqueados y
haciendo clic en el botón "Borrar".
Nota
No se pueden bloquear y desbloquear simultáneamente más de 50 avisos.

3.5.9.3

Bloquear avisos con la categoría o el grupo de avisos

Introducción
También es posible bloquear la visualización de avisos bloqueando conjuntamente la
categoría o el grupo al que pertenece el aviso. No se visualiza ninguno de los avisos
pertenecientes a estos grupos y categorías bloqueados.

Requisitos
● El botón "Cuadro de diálogo de bloqueo"

976

está configurado en el visor de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

Procedimiento
Para bloquear y desbloquear avisos con la categoría o el grupo, proceda del siguiente modo:
1. Haga clic en el botón
del visor de avisos.
Se abre el cuadro de diálogo "Parametrizar lista de bloqueo".

2. Haga clic en un servidor de la lista de servidores o en el PC local en caso de proyectos
monopuesto.
3. Seleccione en la vista de árbol la categoría o el grupo de avisos definido por el usuario que
desee bloquear.
4. Haga clic en el botón "Bloquear".
Se bloquean todos los avisos de esta categoría o del grupo de avisos definido por el usuario.
Los avisos bloqueados se desbloquean seleccionando la categoría o el grupo de avisos
definido por el usuario y haciendo clic en el botón "Habilitar".

Aviso de operador cuando se bloquea un aviso
Dado el caso, se determina en el visor de avisos si se genera un aviso de operador al
bloquearse o desbloquearse un aviso. Si es necesario, configure por sí mismo el aviso de
operador. El aviso de operador contiene por defecto estos objetos:
● Un sello de tiempo
● El usuario que ha iniciado la sesión
El sello de tiempo para el aviso aparece en los siguientes casos:
● Cuando se bloquea activamente el origen del aviso (p. ej. PLC).
Los avisos bloqueados activamente se pueden visualizar y manejar en todos los paneles de
operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

977

Trabajar con avisos
3.5 Manejo de avisos en runtime

3.5.10

Acuse de avisos

3.5.10.1

Acusar avisos

Introducción
Los avisos se acusan en runtime según la configuración del proyecto. Acuse los avisos del
modo siguiente:
● Con los botones de los objetos de indicación y control
● Con botones configurados individualmente
Si se ha configurado una autorización de uso para los elementos de control, sólo los usuarios
autorizados podrán acusar los avisos.
Para evitar el acuse en runtime, el usuario dispone en WinCC de funciones de sistema y scripts
para acusar automáticamente los avisos.

Variantes del acuse
En runtime los avisos se acusan uno por uno o varios a la vez. Cabe distinguir entre estas
posibilidades:
● Acuse individual
Acuse de un aviso con un botón o una tecla de función.
● Acusar grupos de avisos
Acuse de todos los avisos de un grupo con un botón o una tecla de función
● Acuse de grupo
Acuse de todos los avisos presentes y de acuse obligado en el visor de avisos con el botón
"Acuse de grupo" del visor de avisos.
● Acuse doble
Cuando un aviso se debe acusar por partida doble, se acusa cuando aparece y cuando
desaparece.

Requisitos
● Se visualiza un aviso en el panel de operador.
● Los botones "Acuse de grupo" y "Acuse individual" están configurados en el visor de avisos.

Procedimiento
Para acusar un aviso, proceda del siguiente modo:
● Seleccione el aviso.
● Haga clic en el botón "Acuse individual" del visor de avisos.

978

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.5 Manejo de avisos en runtime

Resultado
El aviso recibe el estado "Acusado". Cuando la condición para que se lance un aviso ya no se
cumple, el aviso recibe además el estado "Desaparecido" y ya no se muestra en el panel de
operador.

Consulte también
Visor de avisos (Página 431)

3.5.10.2

Acuse general de avisos

Introducción
Se denomina acuse de grupo al acuse de todos los avisos pendientes, visibles y de acuse
obligado que hay en la ventana de avisos. Siempre que la opción "Acuse individual" no esté
activada para un aviso, éste se puede acusar en grupo.

Requisitos
Hay varios avisos de acuse obligado pendientes en el visor.

Procedimiento
Para acusar avisos en grupo, proceda del siguiente modo:
1. Lea los textos de los avisos pendientes y, dado el caso, ordene las medidas de solución.
2. Haga clic en el botón

del visor de avisos.

Resultado
Se han acusado todos los avisos pendientes con las siguientes propiedades:
● De acuse obligado
● No obligado a acuse individual
● Visible

3.5.10.3

Acuse de emergencia de avisos

Introducción
En casos excepcionales, el usuario acusa un aviso con su número de aviso. Para ello se envía
el bit de acuse también al AS si el aviso no está actualmente pendiente. Esta función sólo está
prevista para el caso de emergencia más extraordinario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

979

Trabajar con avisos
3.5 Manejo de avisos en runtime

Requisitos
El botón

está configurado en el visor de avisos.

Procedimiento
Para acusar un aviso en runtime con un acuse de emergencia, proceda del siguiente modo:
1. Haga clic en el botón
del visor de avisos
Se abrirá el cuadro de diálogo "Acuse de emergencia de avisos".

2. Seleccione un servidor.
3. Introduzca el número de aviso en "Número de aviso".
4. Haga clic en el botón "Orden de acuse Enviar".
En el visor aparece ahora el aviso con el color asignado que se ha definido para un aviso
acusado.
Nota
En el cuadro de diálogo para seleccionar los servidores se ofrecen sólo los proyectos de
servidor cuyos "Packages" hayan sido cargados en el PC.

3.5.10.4

Acusar el avisador central

Introducción
El modo en que se acusa un avisador central en runtime depende de cómo se ha configurado
su acuse.

980

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.6 Mostrar eventos de seguridad

Requisitos
● El avisador central y su acuse están configurados.
● El avisador central se ha lanzado.
● Los botones "Acuse de avisador central" y "Acuse individual" están configurados en el visor
de avisos.

Acusar con una clave separada
● Para acusar el avisador central, haga clic en el botón "Acuse de avisador central" del visor
de avisos.
Se acusa sólo el avisador central. El aviso que ha lanzado el avisador central está todavía
en el estado "Aparecido".

Acuse individual
● Para acusar el avisador central, seleccione el aviso actual y haga clic en el botón "Acuse
individual" del visor de avisos.
Así se acusa el avisador central y al aviso que ha lanzado el avisador central.

Variable de acuse
Si el avisador central se acusa con una variable, entonces se acusa el avisador central, por
ejemplo, con un botón o una tecla de función configurados individualmente.

Resultado
El bit de acuse del avisador central está activado.

Consulte también
Visor de avisos (Página 431)

3.6

Mostrar eventos de seguridad

3.6.1

Mostrar eventos de seguridad en el panel de operador

Introducción
Además de los avisos de WinCC existentes, también puede visualizar eventos de seguridad
en el panel de operador.
Los eventos de seguridad son eventos relevantes para la seguridad, como, p. ej., un ataque a
un panel a través de la red o una modificación del nivel de protección para la comunicación
entre el controlador y el panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

981

Trabajar con avisos
3.6 Mostrar eventos de seguridad
Los eventos de seguridad son detectados por el controlador y reenviados a los paneles de
operador. En los paneles de operador se muestran los eventos de seguridad en el fichero de
avisos.
Dentro del controlador, no es necesaria una configuración o activación de la funcionalidad de
eventos de seguridad. El controlador detecta los eventos de seguridad de forma automática.

Restricciones
Puede visualizar en el panel de operador los eventos de seguridad de los siguientes
controladores:
● SIMATIC S7-1200
● SIMATIC S7-1500
Nota
Dependencia del panel
Los eventos de seguridad de los controladores no se muestran en los Basic Panels ni en los
Basic Panels 2nd Generation.

Configuración de la visualización de eventos de seguridad
Para visualizar los eventos de seguridad en el panel de operador es preciso realizar los
siguientes pasos:
● Activar los avisos de controladores
● Crear un fichero de avisos para los avisos de controladores
Encontrará información más detallada sobre la configuración en: Configuración de la
visualización de eventos de seguridad (Página 982)

Consulte también
Configuración de la visualización de eventos de seguridad (Página 982)

3.6.2

Configuración de la visualización de eventos de seguridad

Requisitos
Entre el panel de operador y el controlador existe una conexión HMI.

982

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.7 Enviar aviso completo del controlador al panel de operador

Procedimiento
1. Abra la "Configuración de runtime" del panel de operador.
2. Active en "Avisos" la función "Eventos de seguridad".
Nota
La función "Eventos de seguridad" está desactivada de modo predeterminado y debe
activarse para cada conexión HMI.
3. Cree un nuevo fichero de avisos en "Ficheros de avisos", en el editor "Ficheros".
4. Abra una imagen HMI.
5. Cree un visor de avisos.

Resultado
Los eventos de seguridad se muestran en el fichero de avisos.

3.7

Enviar aviso completo del controlador al panel de operador

3.7.1

Enviar aviso completo del controlador al panel de operador y actualizar
automáticamente

Principios básicos
Además de los avisos de WinCC puede configurar también avisos del controlador en STEP 7
y visualizarlos en el panel de operador.
Si hay avisos de controlador configurados en STEP 7, existe una conexión con un controlador
S7-1500 y hay avisos del controlador presentes, los avisos del controlador se envían
automáticamente a los paneles de operador y se actualizan en caso de haberse modificado (p.
ej., modificación del texto del aviso). Esto permite ahorrar tiempo, ya que no es necesario
cargar expresamente los cambios de configuración de los avisos en el panel de operador. El
panel de operador no debe abandonar necesariamente el modo Runtime si se modifican
avisos.
Pueden enviarse al panel de operador los siguientes avisos de controlador:
● Diagnóstico del sistema
● Avisos ProDiag
● Avisos de programa
Los avisos de controlador pueden enviarse íntegramente a los paneles de operador de la
versión V14 si se han configurado los ajustes correspondientes en el controlador y en el panel
de operador. En el panel de operador debe estar activada la opción "Actualización automática"
para la conexión correspondiente en "Configuración de runtime > Avisos > Avisos del

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

983

Trabajar con avisos
3.7 Enviar aviso completo del controlador al panel de operador
controlador". Encontrará más información sobre los ajustes en Configuración de la
actualización automática de avisos del controlador en el panel de operador (Página 987).

Dependencia del panel
Los avisos del controlador indicado a continuación se envían automática e íntegramente al
panel de operador cuando se producen:
● SIMATIC S7-1500 (a partir de la versión de firmware 2.0)
Los Basic Panels y Basic Panels 2nd Generation no soportan avisos de controlador. Para
Basic Panels, Basic Panels 2nd Generation y paneles de operador con versión de producto
anterior a V14, deben cargarse los cambios de configuración de los avisos en el controlador y
en el panel de operador.
Si está desactivada la opción "Actualización automática" en el panel de operadorlos cambios
de configuración de los avisos deberán cargarse en el controlador y en el panel de operador.
Nota
Al actualizar un proyecto a la versión del TIA Portal V14, la transferencia de los avisos de
controlador al panel de operador está desactivada en la "Configuración de runtime" del panel
de operador, ya que la conexión entre el panel de operador y el controlador correspondiente
se ha creado en una versión anterior del TIA Portal.

Configuración de idioma
Para que los avisos aparezcan en el panel de operador en el idioma correcto, deben estar
configurados los mismos tres idiomas (o menos) para los avisos en el controlador y en el panel.
Es posible que deba acordarse la elección de idiomas con el ingeniero de configuración del
controlador.
Si hay configurados diferentes idiomas en el panel de operador y en el controlador, el panel de
operador mostrará durante el funcionamiento el texto "###Text missing###" en lugar de los
avisos de controlador.
Nota
Si desea utilizar más de tres idiomas al mismo tiempo en el panel de operador, deberá
desactivar la opción de actualización automática de los avisos de controlador. De lo contrario,
a partir del cuarto idioma aparecerá "###Text missing###" en lugar de los avisos del
controlador.
Particularidades de las fuentes asiáticas
Al trabajar con idiomas asiáticos, al transferir al panel de operador solo se cargan los
caracteres asiáticos que se utilizan en la configuración del panel de operador. Si los textos se
envían directamente del controlador al panel de operador, pueden presentarse problemas de
visualización. En estos casos, puede cargarse la fuente asiática completa en el panel de
operador. Encontrará más información en Carga de fuentes asiáticas en el panel de operador
(Página 2408).

984

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.7 Enviar aviso completo del controlador al panel de operador

Notas y reglas
● Los textos modificados que se cargan en el controlador se muestran de inmediato en el
panel de operador si ya se ha disparado el aviso de controlador.
● Si se ha activado la propiedad "Aviso > Configuración básica > Solo información" de un
aviso del controlador, este aviso no aparecerá en el visor de avisos en WinCC.
● Para los avisos visualizados en el fichero de avisos, se aplica lo siguiente:
– El fichero de avisos contiene avisos en el idioma ajustado. Este idioma se ajusta al
configurar el panel de operador en "Configuración de runtime > General > Ficheros >
Idioma de archivado". Independientemente de si se especifica un idioma determinado
para el archivado de los avisos de controlador en el fichero de avisos o se selecciona el
idioma de arranque, el idioma correspondiente también debe estar activado en el
controlador. Si define el idioma de arranque, en combinación con la opción
"Actualización automática" se pueden producir mezclas de idiomas en el fichero de
avisos. Encontrará más información sobre el cambio de idioma del fichero en runtime
en Controlar el comportamiento del fichero al cambiar de idioma en runtime
(Página 932).
– Para el correspondiente fichero de avisos, debe estar activada la casilla de verificación
"Archivar texto de aviso y ubicación del error" en "Propiedades > Propiedades > Método
de archivado" para que los avisos de controlador archivados puedan mostrarse en el
visor de avisos o la ventana de avisos.
– Los textos informativos de los avisos no se archivan y, al visualizar un fichero de avisos
en runtime, muestran "###Text missing###".
– Si un texto de aviso tiene más de 6 valores, después de archivar solo aparecen listados
los 6 primeros valores en el archivo comprimido. Un visor de avisos configurado para
visualizar los ficheros muestra todos los valores contenidos en el texto de aviso.

Consulte también
Carga de fuentes asiáticas en el panel de operador (Página 2408)
Configuración de la actualización automática de avisos del controlador en el panel de operador
(Página 987)
Controlar el comportamiento del fichero al cambiar de idioma en runtime (Página 932)

3.7.2

Enviar aviso completo del controlador al panel de operador y actualizar
automáticamente

Principios básicos
Además de los avisos de WinCC puede configurar también avisos del controlador en STEP 7
y visualizarlos en el panel de operador.
Si hay avisos de controlador configurados en STEP 7, existe una conexión con un controlador
S7-1500 y hay avisos del controlador presentes, los avisos del controlador se envían
automáticamente a los paneles de operador y se actualizan en caso de haberse modificado (p.
ej., modificación del texto del aviso). Esto permite ahorrar tiempo, ya que no es necesario

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

985

Trabajar con avisos
3.7 Enviar aviso completo del controlador al panel de operador
cargar expresamente los cambios de configuración de los avisos en el panel de operador. El
panel de operador no debe abandonar necesariamente el modo Runtime si se modifican
avisos.
Pueden enviarse al panel de operador los siguientes avisos de controlador:
● Diagnóstico del sistema
● Diagnóstico del proceso
● Avisos de programa
Los avisos de controlador pueden enviarse íntegramente a los paneles de operador de la
versión V14 si se han configurado los ajustes correspondientes en el controlador y en el panel
de operador. En el panel de operador debe estar activada la opción "Actualización automática"
para la conexión correspondiente en "Configuración de runtime > Avisos > Avisos del
controlador". Encontrará más información sobre los ajustes en Configuración de la
actualización automática de avisos del controlador en el panel de operador (Página 987).

Dependencia del panel
Los avisos del controlador indicado a continuación se envían automática e íntegramente al
panel de operador cuando se producen:
● SIMATIC S7-1500 (a partir de la versión de firmware 2.0)
Los Basic Panels y Basic Panels 2nd Generation no soportan avisos de controlador. Para
Basic Panels, Basic Panels 2nd Generation y paneles de operador con versión de producto
anterior a V14, deben cargarse los cambios de configuración de los avisos en el controlador y
en el panel de operador.
Si está desactivada la opción "Actualización automática" en el panel de operadorlos cambios
de configuración de los avisos deberán cargarse en el controlador y en el panel de operador.
Nota
Al actualizar un proyecto a la versión del TIA Portal V14, la transferencia de los avisos de
controlador al panel de operador está desactivada en la "Configuración de runtime" del panel
de operador, ya que la conexión entre el panel de operador y el controlador correspondiente
se ha creado en una versión anterior del TIA Portal.

Configuración de idioma
Para que los avisos aparezcan en el panel de operador en el idioma correcto, deben estar
configurados los mismos tres idiomas (o menos) para los avisos en el controlador y en el panel.
Es posible que deba acordarse la elección de idiomas con el ingeniero de configuración del
controlador.

986

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.7 Enviar aviso completo del controlador al panel de operador
Si hay configurados diferentes idiomas en el panel de operador y en el controlador, el panel de
operador mostrará durante el funcionamiento el texto "###Text missing###" en lugar de los
avisos de controlador.
Nota
Si desea utilizar más de tres idiomas al mismo tiempo en el panel de operador, deberá
desactivar la opción de actualización automática de los avisos de controlador. De lo contrario,
a partir del cuarto idioma aparecerá "###Text missing###" en lugar de los avisos del
controlador.

Consulte también
Editar avisos de controlador (Página 859)
Avisos de controlador (Página 791)
Configuración de la actualización automática de avisos del controlador en el panel de operador
(Página 987)

3.7.3

Configuración de la actualización automática de avisos del controlador en el
panel de operador

Introducción
La opción "Actualización automática" está activada por defecto para todas las conexiones
entre los controladores S7-1500 (versión de firmware 2.0) y los paneles de operador con la
versión V14.
Si la conexión entre un panel de operador y un controlador S7-1500 se ha establecido en una
versión del TIA Portal anterior a V14, la opción "Actualización automática" estará desactivada,
incluso tras actualizar el proyecto a la versión V14. La actualización automática de los avisos
de controlador para esta conexión puede configurarse posteriormente.

Requisitos
● Entre el panel de operador y un controlador S7-1500 (a partir de la versión de firmware 2.0)
o un dispositivo compatible (p. ej., WinAC 1500) existe una conexión HMI.
● El controlador y el panel de operador tienen la versión V14 o posterior.
● En el controlador está activada la "Administración de avisos centralizada" (la actualización
automática se ha activado en el controlador).
● Se han configurado avisos de controlador en STEP 7.
● Se ha configurado un visor de avisos o una ventana de avisos en el panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

987

Trabajar con avisos
3.7 Enviar aviso completo del controlador al panel de operador
● Las categorías correspondientes a los avisos de controlador están seleccionadas en el
visor de avisos o la ventana de avisos.
● Para los avisos se han configurado los mismos tres idiomas (o menos) en el controlador y
en el panel de operador.

Procedimiento
1. Abra la "Configuración de runtime" del panel de operador.
En "Avisos > Avisos de controlador" se muestran una o varias conexiones con
controladores.
2. Active la opción "Actualización automática" correspondiente a la conexión para la que
desea visualizar los avisos de controlador.
La función "Actualización automática" debe activarse por separado para cada conexión.
Nota
Si en el controlador se han configurado idiomas diferentes a los del panel de operador, no se
podrán mostrar los avisos en runtime. En su lugar, se mostrará el aviso "##Text missing##".
Nota
Si desea utilizar más de tres idiomas al mismo tiempo en el panel de operador, debe desactivar
la opción "Actualización automática". De lo contrario, a partir del cuarto idioma aparecerá el
aviso "##Text missing##" en lugar de los avisos del controlador.

Resultado
En runtime, los avisos de controlador se muestran en el visor de avisos.

Consulte también
Enviar aviso completo del controlador al panel de operador y actualizar automáticamente
(Página 985)
Enviar aviso completo del controlador al panel de operador y actualizar automáticamente
(Página 983)

988

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8

Referencia

3.8.1

Funciones de sistema para avisos

Funciones de sistema
Las funciones de sistema son funciones predefinidas que permiten realizar numerosas tareas
en runtime incluso sin tener conocimientos de programación. Las funciones de sistema se
utilizan en una lista de funciones o en un script.
Nota
Dependencia del panel
Los scripts no están disponibles para todos los paneles de operador.
La tabla muestra todas las funciones de sistema para representar y editar avisos.
Función de sistema

Efecto

EditarAviso

Dispara el evento "Loop-In-Alarm" para el aviso seleccionado o, en
caso de selección múltiple, para el aviso seleccionado en último
lugar. Si el aviso que se desea editar aún no se ha acusado, tam‐
bién se efectúa el acuse del aviso seleccionado.

BorrarBuferDeAvisos

Borra avisos del búfer de avisos del panel de operador.

BorrarAutorizacionBuferDeAvi‐
sosProTool

La misma función que "BorrarBúferDeAvisos". Esta función de sis‐
tema está incluida por motivos de compatibilidad y utiliza la nume‐
ración de ProTool.

ActualizarVisorDeAvisos

Actualiza el visor de avisos.

VisorDeAvisosLoopInAlarm

Dispara el evento "Loop-In-Alarm" para el aviso seleccionado o, en
caso de selección múltiple, para el aviso seleccionado en último
lugar. Si el aviso que se desea editar aún no se ha acusado, tam‐
bién se efectúa el acuse del aviso seleccionado.

VistaDeAvisosAcusarAviso

Acusa los avisos seleccionados en el visor de avisos indicado.

VistaDeAvisosMostrarTextoAyu‐
da

Muestra el tooltip configurado para el aviso seleccionado en el visor
de avisos indicado.

AcusarAviso

Acusa todos los avisos seleccionados.

AjustarModoDeInformeAvisos

Activa o desactiva la generación automática de informes para avi‐
sos en la impresora.

MostrarVentanaDeAvisos

Muestra u oculta la ventana de avisos en el panel de operador.

MostrarAvisoDeSistema

Muestra el valor del parámetro transferido como aviso de sistema
en el panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

989

Trabajar con avisos
3.8 Referencia

Nota
Dependencia del panel
Las siguientes funciones del sistema no están disponibles para todos los paneles de operador:
● AjustarModoDeInformeAvisos
● ActualizarVisorDeAvisos
● MostrarAvisoDeSistema

3.8.2

Eventos para avisos

Eventos para avisos y sus objetos de manejo y visualización
En runtime se producen los eventos siguientes con los avisos y sus objetos de manejo y
visualización. En caso necesario, para cada evento se configura una lista de funciones.
Objeto

Eventos configurables

Avisos

Aparecido
Desaparecido
Acusar
Loop-In-Alarm

Visor de avisos

Activar
Desactivar
Selección modificada

Indicador de avisos

Hacer clic
Hacer clic al parpadear

Nota
Dependencia del dispositivo
Los siguientes eventos del visor de avisos no están disponibles para todos los paneles de
operador.
● Activar
● Desactivar
● Selección modificada
● Hacer clic
● Hacer clic al parpadear

990

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.3

Eventos para avisos

Eventos de avisos y sus objetos de indicación y control
En runtime se producen los eventos siguientes con los avisos y sus objetos de indicación y
control. En caso necesario, para cada evento se configura una lista de funciones.
Objeto

Eventos configurables

Avisos

Aparecido
Desaparecido
Acusar
Loop-In-Alarm
Estado modificado

Visor de avisos

Activar
Creada
Botón Barra de herramientas Hacer clic
Propiedad modificada
Propiedad Barra de herramientas Modificar Botón
Propiedad Modificar elemento de la barra de esta‐
do
Propiedad Bloque modificada
Propiedad Columna modificada
Propiedad Columna Estadística de avisos modifi‐
cada
Propiedad Aviso de operador modificada

3.8.4

Funciones de sistema para ficheros

Funciones de sistema
Para archivar podrá utilizar las funciones de sistema indicadas a continuación:
Nombre de la función

Funcionamiento

ArchivarFichero

Esta función desplaza o copia un fichero para archivarlo a largo plazo en
una ubicación diferente. Utilice esta función de sistema p. ej. si desea
desplazar el Audit Trail del medio de almacenamiento local al servidor.
Utilice en el caso de los Audit Trails siempre el modo "Desplazar fichero
(hmiMove)", puesto que de lo contrario se infringiría la directiva FDA de‐
bido a la gestión de datos doble.

ArchivarVariable

Guarda el valor de la variable indicada en el fichero de variables deseado.
Si desea archivar un valor de proceso en un instante determinado, utilice
la función de sistema.

IniciarArchivar

Inicia el proceso de archivar en el fichero indicado. La archivación en run‐
time se cancela utilizando la función de sistema "PararArchivación".

PararArchivar

Detiene el proceso de archivar en el fichero indicado. La archivación en
runtime se continúa con la función de sistema "IniciarArchivación".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

991

Trabajar con avisos
3.8 Referencia

3.8.5

Nombre de la función

Funcionamiento

BorrarFichero

Borra todos los registros del fichero indicado.

IniciarSiguienteFichero

Detiene el proceso de archivar en el fichero indicado. La archivación con‐
tinúa en el segmento de fichero configurado para el fichero indicado.

CerrarTodosLosFicheros

Cierra todos los ficheros. La conexión entre WinCC y los archivos de fi‐
chero o la base de datos de ficheros se interrumpe. Utilice esta función de
sistema p. ej. si desea cambiar el medio de almacenamiento del panel de
operador sin tener que cerrar el runtime.

AbrirTodosLosFicheros

Abre todos los ficheros para continuar el proceso de archivar. Se resta‐
blece la conexión entre WinCC y los archivos de fichero o la base de datos
de ficheros.

CopiarFichero

Copia el contenido del fichero indicado en un fichero diferente.

Estructura de un archivo *.CSV con avisos

Introducción
En caso necesario, guarde el fichero de avisos en forma de archivo en formato "*.csv". CSV
significa Comma Separated Value. En este formato, las columnas de la tabla que contienen el
nombre y el valor de la entrada aparecen separadas por un punto y coma. Cada fila de la tabla
se finaliza con un salto de línea.

Ejemplo de un archivo en formato "*.csv"
El ejemplo siguiente muestra un archivo con avisos archivados:
"Time_ms";"MsgProc";"StateAfter";"MsgClass";"MsgNumber";"Var1";...;"Var8";"TimeString";"
MsgText";"PLC"37986550590,27;1;1;3;110001;"";...;"";"30.06.99 13:12:51";"Cambio a modo
'online'";37986550682,87;1;1;3;140010;"";...;"";"30.06.99 13:12:59";"Conexión establecida:
controlador_1, estación 2, bastidor 0, slot 2";

Estructura de un archivo histórico en formato *.csv
En las distintas columnas de un archivo de fichero se han introducido los valores siguientes:

992

Parámetros

Descripción

Time_ms

Indicación de fecha y hora en formato decimal (la conversión se indica más abajo)

Msg_Proc

Sistema de avisos:
0 = sistema de avisos desconocido
1 = aviso del sistema
2 = sistema de avisos de bit (avisos de servicio)
3 = sistema de numeración de avisos ALARM_S
4 = evento de diagnóstico
7 = sistema de avisos analógicos
100 = sistema de avisos de bit (alarmas)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Parámetros

Descripción

StateAfter

Evento de aviso:
0 = aparecido/desaparecido
1 = aparecido
2 = aparecido/acusado/desaparecido
3 = aparecido/acusado
4 = todos los avisos han sido borrados en el PLC con SFC106 o queda un aviso
pendiente después de PLC STOP/RUN
6 = aparecido/desaparecido/acusado

Msg_Class

Categoría:
0 = ninguna categoría
1 = "Errors"
2 = "Warnings"
3 = "System"
4 = "Diagnosis Events"
64 ... = categorías configuradas por el usuario

MsgNumber

Número de aviso

Var1 ... Var8

Valor de la variable de disparo en formato STRING

TimeString

Sello de tiempo como STRING en un formato de datos legible

MsgText

Aviso en un STRING legible

PLC

Localización del aviso (controlador afectado)

Conversión del valor decimal del sello de tiempo
Para procesar el valor de un sello de tiempo en un programa diferente, proceda del siguiente
modo:
1. Divida Time_ms por 1.000.000.
Ejemplo: 37986476928 : 1.000.000 = 37986,476928
2. La parte entera (37986) expresa la fecha contada a partir del 31 de diciembre de 1899.
En Excel se convierte el sello de tiempo en días. Para ello, asigne a la celda que contiene
la indicación de fecha y hora un formato adecuado del grupo "Fecha".
Resultado: 37986 equivale al 31.12.2003.
3. El valor que aparece después de la coma (0,476928) expresa la hora.
– Multiplicando el valor (0,476928) por 24 se obtienen las horas (11,446272).
– Multiplicando el resto (0,446272) por 60 se obtienen los minutos (26,77632).
– Multiplicando el resto (0,77632) por 60 se obtienen los segundos (46,5792).
Resultado 11:26:46,579
Por ejemplo, Microsoft Excel asiste esta conversión.

3.8.6

Descripción de los bloques de sistema

Introducción
Los bloques de sistema permiten especificar información que ya está predefinida y que no
puede manipularse libremente, por ejemplo: fecha, hora, duración.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

993

Trabajar con avisos
3.8 Referencia
En el aviso se visualiza el valor del bloque de aviso, p. ej. la hora. La descripción de los bloques
de sistema le brinda informaciones de cada uno de los bloques del sistema.

Sinopsis
Bloque de sistema

Descripción

Longitud es‐
tándar

Fecha

Fecha de los estados de aviso "entrante", "desaparecido"
y "acusado".

8

Hora

Hora de los estados de aviso "entrante", "desaparecido" y
"acusado".

9

Precisión de un sello de tiempo estampado en WinCC: 1
s.
Precisión de visualización: 10 ms.
Duración

Período entre los estados "entrante", "desaparecido" y
"acusado".

8

Existe sólo una columna para esta duración:
● Con los avisos aparecidos esta columna está vacía.
● En los avisos desaparecidos consta el tiempo
transcurrido entre "aparecido" y "aparecido".
● En los avisos acusados consta el tiempo transcurrido
entre "aparecido" y "acusado".
Horario verano / invierno

Indica si está ajustado el horario de verano.

Estado

Muestra el estado del aviso, p. ej. "aparecido" o "desapa‐ 1
recido".

1

Los textos de estado indicados en este bloque de sistema
se configuran en la categoría y dependen de la lista se‐
leccionada en el visor de avisos.
Estado de acuse

Indica si se ha acusado un aviso.

1

Los textos de estado indicados en este bloque de sistema
se configuran en la categoría y dependen de la lista se‐
leccionada en el visor de avisos.
ID

Número de aviso

3

Categoría

Categoría
El texto se puede elegir libremente.

8

Número PLC/CPU

Muestra el número de la CPU y del PLC en el que se ha
lanzado el aviso.

2

En runtime el valor de este bloque de sistema no se acep‐
ta desde el PLC, sino desde los datos configurados del
aviso. El valor no tiene ninguna función en la comunica‐
ción con el PLC.

994

Variable

Nombre de variable para el aviso de operador del campo
E/S (y objetos comparables que pueden visualizar avisos
de operador)

1

Archivar

Identificación de si un aviso está archivado.

1

Comentario

Indica si existe un comentario para este aviso. Un comen‐ 1
tario es la entrada que hace un usuario sobre un aviso, p.
ej. "Este aviso ha aparecido hoy, porque...".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Bloque de sistema

Descripción

Longitud es‐
tándar

Texto informativo

Indica si existe un texto informativo (información sobre
1
herramientas) para este aviso. Los tooltips contienen in‐
formación referente a un aviso con un máximo de 255
caracteres, por ejemplo "Este aviso se puede presentar
cuando ...". Los tooltips no pueden ser editados en runti‐
me.

Loop-In-Alarm

Indica si la función "Loop-In-Alarm" está activada.

1

Nombre del equipo

Indica el nombre del PC:

10

● Si el usuario introduce un comentario en el visor
"Fichero de largo plazo" y cambia de ventana,
aparece el nombre del PC utilizado en los visores
"Fichero de corto plazo" y "Fichero de largo plazo".
● Si se ha acusado un aviso en un PC, el nombre del PC
se visualiza en el aviso de operador de los visores
"Fichero de corto plazo y de largo plazo". El aviso de
operador debe estar activado en "Aviso de operador"
de la ventana de inspección del visor de avisos.
Nombre de usuario

Indica el nombre del usuario (nombre de Login):

10

● Si el usuario ha introducido un comentario en el visor
"Fichero de largo plazo" y sale del visor, se visualiza el
nombre de usuario en los visores "Fichero de corto
plazo" y "Fichero de largo plazo".
● Si se ha acusado un aviso de un usuario conectado en
WinCC, se visualiza el nombre de usuario en el aviso
de operador, en los visores "Fichero de corto plazo" y
"Fichero de largo plazo". El aviso de operador debe
estar activado en "Aviso de operador" de la ventana
de inspección del visor de avisos.
Prioridad

Establece la prioridad de un aviso. Por medio de la prio‐ 3
ridad se ordenan los avisos en el visor de avisos. La cla‐
sificación por prioridad permite conseguir que el aviso
más importante (máxima prioridad) aparezca en el área
de visualización del visor de avisos de una línea. Un aviso
con prioridad más baja no se representa aunque tenga
una fecha más actual.
Rango de valores: 0 - 16
En WinCC no se ha establecido qué valor corresponde a
la máxima prioridad.

Nota
Si se ha activado la opción "Modificar formato ISO8601 en todos los componentes" en
"Propiedades > Configuración horaria > Formato centralizado de fecha y hora" del menú
contextual de WinCC RT Professional, la fecha y hora también se visualizan en los bloques de
sistema de los avisos en formato ISO8601.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

995

Trabajar con avisos
3.8 Referencia

Símbolos posibles en las listas del visor de avisos
En algunos bloques de sistema pueden mostrarse símbolos en las listas del visor de avisos. A
continuación se explica brevemente el significado de los símbolos.
Símbolos de la lista de avisos en los bloques de sistema "Estado" y "Estado de acuse":
Símbolo

Significado
Aviso aparecido en el bloque de sistema "Estado"
Aviso aparecido/desaparecido en el bloque de sistema "Estado"
Aviso aparecido/acusado en el bloque de sistema "Estado"
Aviso acusado en el bloque de sistema "Estado de acuse"

Símbolos de la lista de ficheros de corto plazo y de la lista de ficheros históricos en el bloque
de sistema "Estado":
Símbolo

Significado
Aviso aparecido
Aviso desaparecido
Aviso acusado
Aviso acusado por el sistema
Aviso oculto
Aviso oculto aparecido
Aviso oculto desaparecido
Aviso oculto acusado
El aviso vuelve a mostrarse
Acuse de emergencia del aviso
Aviso bloqueado

Símbolos de la lista de avisos, de ficheros de corto plazo y de ficheros históricos en algunos
bloques de sistema:
Símbolo

Significado
Indica si está activada la propiedad de un bloque de sistema
Indica si hay un comentario del aviso en el bloque de sistema "Comentario".
Indica si hay un texto informativo en el bloque de sistema "Texto informativo".
Indica si hay una Loop-In-Alarm activada en el bloque de sistema "Loop-In-Alarm".

Consulte también
Configuración de los textos de estado de una categoría (Página 817)
Configurar el visor de avisos (Página 885)

996

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.7

Statements SQL para filtrar el visor de avisos

Introducción
En el visor de avisos se permiten sólo statements SQL que pueden generarse también con el
cuadro de diálogo "Definir selección" del visor de avisos. Para WinCC las siguientes
condiciones son válidas:
● La estructura: "Campo", "Operando" y "Valor"
Separar parámetros individuales con espacios en blanco.
Ejemplo:
DATETIME >= '2006-12-21 00:00:00.000' AND MSGNR >= 100
Todos los avisos desde 21.12.2006 con un número de aviso mayor o igual a 100
● Las siguientes indicaciones se ponen entre comillas:
– Cadenas de caracteres
– Fecha
– Hora
● En el argumento"DATETIME" la fecha y la hora están divididas por espacios.
Independientemente del ajuste de la base de tiempo en las propiedades de objeto se basa
la salida de la"DATETIME" en la base de tiempo "Local Time". Una excepción a esta regla
la constituye la definición de la base de tiempo "UTC", en cuyo caso la salida se basa en la
base de tiempo "UTC".

Argumentos admitidos
Nombre

Nombre
SQL

Tipo

Datos

Ejemplo

Filtro

MsgFil‐
terSQL:

Número en‐
tero

Número máximo de avisos que
pueden emitirse

MsgFilterSQL: 10000
Se emiten hasta 10 000 avisos.
MsgFilterSQL: 10000\MSGNR >= 1
Se emiten hasta 10 000 avisos empe‐
zando por el número de aviso 1.

Fecha/hora

DATETIME

Fecha

'YYYY-MM-DD
hh:mm:ss.msmsms'

DATETIME >= '2007-05-03
16:00:00.000'
Emite los avisos a partir del 03.05.2007,
16:00.

Número

Clase

MSGNR

CLASS IN

Número en‐
tero

Número de aviso

Número en‐
tero

Categoría ID 1-256 y categorías
"Sistema" 17 + 18

MSGNR >= 10 AND MSGNR <= 12
Emite los avisos con números de aviso
10 - 12.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

CLASS IN ( 1 )
Emite los avisos de la categoría 1.

997

Trabajar con avisos
3.8 Referencia
Nombre

Nombre
SQL

Tipo

Datos

Ejemplo

Estado

STATE

Número en‐
tero

Valor de "ALARM_STATE_xx"

STATE IN(1, 2, 3)

Se admiten sólo los operandos "=" Emite todos los avisos aparecidos, de‐
e "IN(...)".
saparecidos y acusados.
ALARM_STATE_1
ALARM_STATE_2
ALARM_STATE_3
ALARM_STATE_4
ALARM_STATE_10
ALARM_STATE_11
ALARM_STATE_16
ALARM_STATE_17

Prioridad

Número de PLC

PRIORITY

AG_NR

Número de CPU CPU_NR

Valores posibles::
1 = avisos aparecidos
2 = avisos desaparecidos
3 = avisos acusados
4 = avisos bloqueados
10 = avisos ocultos
11 = avisos visualizados
16 = avisos acusados por el sistema
17 = avisos con acuse de emergencia

Número en‐
tero

Prioridad de los avisos 0 - 16

PRIORITY >= 1 AND PRIORITY =< 5

Número en‐
tero

Número de PLC

AG_NR >= 2 AND AG_NR <= 2

Número en‐
tero

Subnúmero PLC

CPU_NR >= 5 AND CPU_NR <= 5

Emite los avisos que tienen una priori‐
dad entre 1 y 5.
Emite avisos con el número de PLC 2.
Emite avisos con el subnúmero de PLC
5.

Instancia

INSTANCE

Texto

Instancia

-

Bloque: 1
...
Bloque: 10

TEXTxx

Texto

Texto de búsqueda de Text1 Text10

TEXT2 = 'Avería'
Emite los avisos cuyo Text2 correspon‐
de a "Avería".
TEXT2 IN ('Avería','Error')
Emite los avisos cuyo Text2 correspon‐
de a "Avería" o "Error".
TEXT2 LIKE 'Avería'
Emite los avisos cuyo Text2 contiene
"Avería".

Valor de proce‐
so: 1
...
Valor de proce‐
so: 10

PVALUExx

Double

Valor de búsqueda para PVA‐
LUE1 - PVALUE10

PVALUE1 >= 0 AND PVALUE1 <= 50
Emite el valor de proceso 1 con valor
inicial 0 y valor final 50.

Se pueden utilizar los siguientes operandos
● >= , <= , = , > , <
● IN(...) : Varios valores como matriz separados por coma, por ejemplo: CLASS IN( 1 ,2 ,3 ).
● LIKE : El texto debe contener sólo string, por ejemplo: TEXT1 LIKE 'Avería' emite el avisos
cuyo Text1 contiene el texto de búsqueda "Avería". El operando LIKE puede usarse sólo
para argumentos del tipo "Texto".

Argumentos y operandos no permitidos
Se admiten sólo los argumentos indicados en la tabla y los operandos mencionados en la lista.

998

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
No se admite la agrupación de argumentos, p. ej. por corchetes.

3.8.8

Avisos de sistema

3.8.8.1

Principios básicos de los avisos de sistema

Avisos de sistema
En el panel de operador los avisos de sistema ofrecen información sobre los estados internos
del panel de operador y del controlador.
A continuación encontrará un sinóptico en el que se indica cuándo se presenta un aviso de
sistema y cómo se corrige la causa del error.
Nota
Dependencia del panel de operador
Dependiendo de la funcionalidad del panel de operador, serán aplicables sólo algunos de los
avisos de sistema descritos.

Nota
Los avisos de sistema se visualizan en un visor de avisos. Los avisos de sistema se visualizan
en el idioma configurado en ese momento en el panel de operador.
Se adopta el formato de hora (AM/PM o de 24 horas) del idioma seleccionado. Si no hay
ninguna traducción de los textos de aviso en este idioma, se elige inglés o ruso como idioma
sustitutivo y se muestra el formato de hora correspondiente.

Parámetros de los avisos de sistema
Los avisos de sistema pueden contener parámetros encriptados. Los parámetros son
relevantes para el seguimiento de un error, ya que ofrecen indicios sobre el código fuente del
software runtime. Los parámetros aparecen después del texto "Código de error:".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

999

Trabajar con avisos
3.8 Referencia

3.8.8.2

9999 - Aviso global

Significado del aviso de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-1

9999 - Aviso global

Número

Efecto/causa

Solución

9999

El arranque del sistema se ha cancelado.

Compruebe la tensión de alimentación y las conexiones
por cable.

Compruebe lo siguiente:
● Tensión de red
● Conexiones por cable
● Ajustes del sistema
● Configuraciones

Compruebe los ajustes del sistema.
Compruebe la configuración y las conversiones.
Si el error persiste, póngase en contacto con la línea
directa.

● Conversiones

3.8.8.3

10000 – Avisos de la impresora

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes.
Tabla 3-2

10000 – Avisos de la impresora

Número

Efecto/causa

Solución

10000

El trabajo de impresión no se ha podido iniciar por
razones desconocidas o se ha interrumpido. La im‐
presora no está configurada correctamente. O bien:
No se dispone de la autorización necesaria para una
impresora de red.
Durante la transferencia de datos se ha interrumpi‐
do la alimentación eléctrica.

Compruebe la configuración de la impresora, las cone‐
xiones de los cables y la alimentación eléctrica.
Vuelva a configurar la impresora. Procúrese una autori‐
zación para la impresora de red.
Si persiste el error, póngase en contacto con la hotline.

10001

No se ha instalado ninguna impresora o no se ha
configurado ninguna impresora estándar.

Instale una impresora y/o actívela como impresora pre‐
determinada.

10002

El búfer intermedio para la impresión de gráficos es‐ No inicie una impresión rápidamente después de la an‐
tá lleno. Hasta dos gráficos pueden guardarse en
terior.
búfer.

10003

Los gráficos se pueden guardar de nuevo en el búfer -intermedio.

10004

El búfer intermedio para la impresión de líneas en el
modo de texto (p. ej., avisos) está lleno. Hasta 1000
líneas pueden guardarse en búfer.

1000

No inicie una impresión rápidamente después de la an‐
terior.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causa

Solución

10005

Las líneas de texto pueden guardarse otra vez en el
búfer intermedio.

--

10006

En caso necesario, repita la acción.
El sistema de impresión de Windows notifica un
error. Lea las causas posibles en el texto visualizado
y, dado el caso, en el número de error. No se impri‐
me o se imprime mal.

3.8.8.4

20000 - Avisos de scripts globales

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes. Los avisos de sistema están
divididos en diversas áreas.
Tabla 3-3

20000 - Avisos de scripts globales

Número

Efecto/causas

Solución

20010

En la línea de script indicada se ha presentado un
error. Por ello se ha cancelado la ejecución del
script. Si fuese aplicable, considere en este caso
también el aviso de sistema anterior.

En la configuración, seleccione la fila indicada en el
script. En el caso de las variables, compruebe si los
tipos utilizados son admisibles. En el caso de las fun‐
ciones de sistema, compruebe si son correctos el nú‐
mero y los tipos de parámetros.

20011

Se ha presentado un error en un script que fue eje‐
cutado por el script indicado.
Por tanto, se ha cancelado la ejecución del script en
el script ejecutado.
Si fuese aplicable, considere en este caso también
el aviso de sistema anterior.

En la configuración, seleccione los scripts que son eje‐
cutados directa o indirectamente por el script indicado.
En el caso de las variables, compruebe si los tipos utili‐
zados son admisibles.
En el caso de las funciones de sistema, compruebe si
son correctos el número y los tipos de parámetros.

20012

Hay datos de configuración incoherentes. Por tanto,
no se ha podido generar el script.

Vuelva a compilar la configuración.

20013

El componente de script de WinCC Runtime no se
inicializó al iniciar.

Compile su proyecto de nuevo con el comando "Com‐
pilar > Software (compilar por completo)" del menú con‐
textual y cargue el proyecto en el panel de operador.

20014

La función de sistema devuelve un valor que no se En la configuración, seleccione el script indicado.
escribe en ninguna variable de retorno configurada. Compruebe si al nombre del script se le asigna un valor.

20015

Se han activado demasiados scripts consecutiva‐
mente. Si hay más de 20 scripts pendientes de ser
procesados, se rechazarán los scripts posteriores.
En este caso no se ejecutará el script indicado en el
aviso.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Compruebe por qué se disparan los scripts. Incremente
los tiempos, p. ej. el ciclo de adquisición de la variable
que activa el script.

1001

Trabajar con avisos
3.8 Referencia

3.8.8.5

30000 - Avisos de error al utilizar funciones de sistema

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes. Los avisos de
sistema están divididos en diversas áreas.
Tabla 3-4

30000 - Avisos de error al utilizar funciones de sistema

Número

Efecto/causas

Solución

30010

La variable no ha podido acoger el resultado de la
función de sistema, p. ej. al excederse el rango de
valores.

Compruebe los tipos de variable de los parámetros de la
función de sistema.

30011

No se ha podido ejecutar una función de sistema,
puesto que en el parámetro de la función de sistema
se ha transferido un valor o tipo inadmisible.

Compruebe el valor del parámetro y el tipo de variable
del parámetro inadmisible. Si se utiliza una variable co‐
mo parámetro, compruebe su valor.

30012

No se ha podido ejecutar una función de sistema,
puesto que en el parámetro de la función de sistema
se ha transferido un valor o tipo inadmisible.

Compruebe el valor del parámetro y el tipo de variable
del parámetro inadmisible. Si se utiliza una variable co‐
mo parámetro, compruebe su valor.

3.8.8.6

40000 - Avisos de escala lineal

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes. Los avisos de
sistema están divididos en diversas áreas.
Tabla 3-5

40000 - Avisos de escala lineal

Número

Efecto/causas

40010

No se ha podido ejecutar la función de sistema, de‐ Compruebe los tipos de parámetros en la configuración.
bido a que no es posible convertir los parámetros a
un tipo de variable común.

40011

No se ha podido ejecutar la función de sistema, de‐ Compruebe los tipos de parámetros en la configuración.
bido a que no es posible convertir los parámetros a
un tipo de variable común.

1002

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.8.7

50000 – Avisos del servidor de datos

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes. Los avisos de
sistema están divididos en diversas áreas.
Tabla 3-6

50000 – Avisos del servidor de datos

Número

Efecto/causas

50000

El panel de operador recibe datos más rápido de lo -que los puede procesar. Por tanto, no se aceptarán
nuevos datos hasta que no se hayan procesado los
datos existentes. Luego se reanudará el intercambio
de datos.

50001

El intercambio de datos ha sido reanudado.

3.8.8.8

Solución

--

60000 – Avisos de información del sistema

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes.
Tabla 3-7

60000 - Avisos de funciones de Win32

Número

Efecto/causas

Solución

60000

Este aviso es generado por la función de sistema
"MostrarAvisoDeSistema". El texto a visualizar se
transfiere como parámetro a la función de sistema.

--

60010

El archivo no se ha podido copiar en el sentido indi‐
cado debido a que uno de los dos archivos estaba
abierto en ese momento o no existe la ruta fuente/
destino.
Es probable que el usuario de Windows no tenga
derechos de acceso a uno de los dos archivos.

Reinicie la función de sistema o compruebe la ruta del
archivo fuente/destino. En Windows: el usuario que eje‐
cuta WinCC Runtime debe obtener la autorización para
acceder a los archivos.

60011

Se ha intentado copiar un archivo en sí mismo.
Es probable que el usuario de Windows no tenga
derechos de acceso a uno de los dos archivos.

Compruebe la ruta del archivo de origen/destino.
En Windows con NTFS: el usuario que ejecuta
WinCC Runtime debe obtener la autorización para ac‐
ceder a los archivos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1003

Trabajar con avisos
3.8 Referencia

3.8.8.9

70000 – Avisos de información del sistema

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-8

70000 - Avisos de funciones de Win32

Número

Efecto/causas

Solución

70010

No se ha podido iniciar el programa debido a que no
se encuentra en la ruta indicada, o bien, porque no
hay suficiente espacio de memoria libre.

Compruebe si el programa existe en la ruta o en la ruta
de búsqueda indicada o cierre otros programas.

70011

No se ha podido cambiar la fecha y hora del sistema.
El mensaje de error aparece únicamente en combi‐
nación con el puntero de área "Fecha/hora del autó‐
mata". Causas posibles:

Compruebe la hora que se debe ajustar.
En Windows: El usuario que ejecuta WinCC Runtime
debe obtener la autorización para cambiar la fecha y
hora del sistema operativo.

● En la tarea de control se ha transferido una
fecha / hora inadmisible.
● El usuario de Windows no está autorizado para
cambiar la fecha y hora del sistema.
Si en el aviso de sistema se indica como primer pa‐
rámetro el valor 13, entonces el segundo parámetro
indica el byte que tiene el valor incorrecto.
70012

Ha ocurrido un error al ejecutar la función de sistema Cierre todos los programas que se están ejecutando.
"PararRuntime" con la opción "Runtime y sistema
Luego cierre Windows.
operativo".
No se cierran Windows ni WinCC Runtime.
Una causa posible es que otros programas no se
puedan cerrar.

70013

No se ha podido cambiar la fecha y hora del sistema Compruebe la fecha y hora que se deben ajustar.
debido a que el valor introducido no es admisible. Es
probable que se hayan usado separadores incorrec‐
tos.

70014

No se ha podido cambiar la fecha y hora del sistema.
Causas posibles:
● Se ha transferido una fecha u hora inadmisible.
● El usuario de Windows no está autorizado para
cambiar la fecha y hora del sistema.

Compruebe la hora que se debe ajustar.
En Windows: El usuario que ejecuta WinCC Runtime
debe obtener la autorización para cambiar la fecha y
hora del sistema operativo.

Windows rechaza el ajuste.
70015

No se ha podido leer la fecha y hora del sistema
debido a que Windows rechaza la lectura.

--

70016

Se ha intentado seleccionar una imagen a través de
una función de sistema o de una tarea. Ello no es
posible, puesto que no existe el número de imagen
configurado.
O: Debido a la falta de memoria del sistema, no se
ha podido crear una imagen.

En la función de sistema o en la tarea, compare los nú‐
meros de imágenes con los números de imágenes con‐
figurados.
En caso necesario, asigne el número a una imagen.

O: La imagen está bloqueada.

Compruebe los datos de llamada de la imagen y si ésta
ha sido bloqueada para determinados usuarios.

O: La imagen no se puede abrir correctamente.

1004

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

70017

La fecha/hora no se puede leer desde el puntero de Modifique la dirección o configure la dirección en el con‐
área porque la dirección configurada en el controla‐ trolador.
dor no existe o no ha sido configurada.

70018

Confirmación de importación correcta de la lista de
contraseñas.

--

70019

Confirmación de exportación correcta de la lista de
contraseñas.

--

70020

Confirmación de activación del informe de avisos.

--

70021

Confirmación de desactivación del informe de avi‐
sos.

--

70022

Confirmación de inicio de la acción de importación
de lista de contraseñas.

--

70023

Confirmación de inicio de la acción de exportación
de lista de contraseñas.

--

70024

El rango de valores de la variable se ha excedido al
ejecutar la función de sistema.
No se realizará el cálculo de la función de sistema.

Compruebe el cálculo deseado y corríjalo en caso ne‐
cesario.

70025

El rango de valores de la variable se ha excedido al
ejecutar la función de sistema.
No se realizará el cálculo de la función de sistema.

Compruebe el cálculo deseado y corríjalo en caso ne‐
cesario.

70026

En la memoria de imágenes interna ya no hay más
imágenes guardadas.
No se puede seleccionar ninguna imagen más.

--

70027

Se ha iniciado la copia de seguridad del sistema de
archivos RAM.

--

70028

Se ha creado la copia de seguridad del sistema de
archivos RAM.
Los archivos de la RAM se copian, a prueba de fa‐
llos, en la memoria flash. En un nuevo arranque,
estos archivos con copia de seguridad se vuelven a
copiar el sistema de archivos RAM.

--

70029

La copia de seguridad del sistema de archivos RAM
ha fallado.
No se ha hecho la copia de seguridad del sistema de
archivos RAM.

Compruebe la configuración en el diálogo "Control Pa‐
nel > OP" y realice la copia de seguridad del sistema de
archivos RAM mediante del botón "Save Files" en la
ficha "Persistent Storage".

70030

Los parámetros configurados de la función de siste‐ Compare los parámetros configurados de la función de
ma son incorrectos.
sistema con los parámetros configurados de los contro‐
No se ha establecido la conexión con el nuevo con‐ ladores y corríjalos en caso necesario.
trolador.

70031

El controlador configurado en la función de sistema
no es un controlador S7.
No se ha establecido la conexión con el nuevo con‐
trolador.

70032

En la imagen seleccionada no existe el objeto con‐ Compruebe el número en el orden de tabulación y co‐
figurado con este número en el orden de tabulación. rríjalo en caso necesario.
Se ejecuta el cambio de imagen. No obstante, se
resalta el primer objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

Compare el parámetro configurado "Nombre de autó‐
mata S7" de la función de sistema con los parámetros
configurados de los controladores y corríjalo en caso
necesario.

1005

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

70033

No se ha podido enviar un e-mail porque ya no hay Compruebe la conexión de red con el servidor SMTP y,
de ser necesario, restablezca la conexión.
conexión TCP/IP con el servidor SMTP.
Este aviso de sistema se genera solo en el primer
intento fallido. Los demás intentos fallidos para en‐
viar un e-mail ya no generan ningún otro aviso de
sistema. El aviso tan solo se genera nuevamente
cuando se consigue enviar un correo electrónico.
El componente central del correo electrónico en
WinCC Runtime intenta establecer, en intervalos re‐
gulares (1 min.), la conexión con el servidor SMTP y
enviar los correos electrónicos pendientes.

Solución

70034

Después de interrumpirse la conexión se ha podido
restablecer la conexión TCP/IP con el servidor
SMTP.
Los e-mails pendientes en la cola de espera se en‐
vían.

--

70036

No se ha configurado ningún servidor SMTP para el
envío de e-mails. Por ello no se puede establecer
una conexión con un servidor SMTP y no se pueden
enviar correos electrónicos.
El aviso de sistema es generado por WinCC Runti‐
me cuando se intenta enviar un correo electrónico
por primera vez.

Configure un servidor SMTP:
En WinCC Engineering System
mediante "Configuración del panel > Configuración del
panel"
En el sistema operativo Windows CE
a través de "Control Panel > Internet Settings > Email >
SMTP Server"

70037

Por razones desconocidas no se ha podido enviar
un e-mail.
El contenido del e-mail se rechaza.

Compruebe los parámetros del e-mail (p. ej. destinata‐
rio, etc.).

70038

El servidor SMTP ha rechazado transmitir o enviar el
e-mail porque el dominio del destinatario no se co‐
noce en el servidor, o bien porque el servidor SMTP
necesita una autenticación.
El contenido del e-mail se rechaza.

Compruebe el dominio de la dirección del destinatario o,
de ser posible, desactive la autenticación en el servidor
SMTP. Una autenticación SMTP no está siendo proce‐
sada actualmente por WinCC Runtime.

70039

La sintaxis de la dirección de e-mail es incorrecta o
contiene caracteres no válidos.
El contenido del e-mail se rechaza.

Comprobar la dirección de e-mail del destinatario.

70040

La sintaxis de la dirección de e-mail es incorrecta o
contiene caracteres no válidos.

--

70041

La importación de la administración de usuarios se
ha cancelado debido a un error.
La importación no se ha realizado.

Compruebe la administración de usuarios o cárguela de
nuevo en el panel de operador.

70042

El rango de valores de la variable se ha excedido al
ejecutar la función de sistema.

Compruebe el cálculo deseado y corríjalo en caso ne‐
cesario.

No se calcula la función de sistema.
70043

El rango de valores de la variable se ha excedido al
ejecutar la función de sistema.

Compruebe el cálculo deseado y corríjalo en caso ne‐
cesario.

No se calcula la función de sistema.
70044

Ha ocurrido un error al enviar los correos electróni‐
cos. No se han enviado los correos electrónicos.

Compruebe la configuración SMTP y tenga en cuenta el
mensaje de error del aviso de sistema.

70045

No se ha podido cargar un archivo necesario para la
encriptación del e-mail.

Actualice el sistema operativo y el software runtime.

1006

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

70046

El servidor no soporta la encriptación.

Seleccione un servidor SMTP que soporte la encripta‐
ción.

70047

Es probable que no concuerden las versiones SSL
del panel de operador y el servidor SMTP.

Contacte con el administrador de la red o el proveedor
del servidor SMTP.

3.8.8.10

80000 – Avisos de ficheros

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-9

80000 – Avisos de ficheros

Número

Efecto/causas

Solución

80001

El fichero indicado se ha llenado hasta el tamaño
indicado (en porcentaje) y debe ser trasvasado.

Trasvase el archivo o la tabla desplazándolo o copián‐
dolo a una ubicación diferente.

80002

Falta una entrada en el fichero indicado.

--

80003

Ha fallado el proceso de copia en ficheros.
Si procede, tenga en cuenta también el siguiente
aviso de sistema.

--

80006

Puesto que no se puede archivar, ello ocasiona una
pérdida constante de funcionalidad.

Tratándose de bases de datos, compruebe si existe el
origen de los datos correspondiente y reinicie el sistema.

80009

El proceso de copia ha finalizado correctamente.

--

80010

Como la ubicación en WinCC se ha indicado inco‐
rrectamente, ello ocasiona una pérdida constante
de funcionalidad.

Si se exige toda la funcionalidad, reconfigure la ubica‐
ción del fichero correspondiente y reinicie el sistema.

80012

Las entradas del fichero se guardan en un búfer. Si
los valores se deben escribir en el búfer más rápido
de lo que se pueden grabar físicamente (p. ej. en
disco duro), el sistema se puede sobrecargar, lo que
detendrá la grabación.

Archive menos valores.
O bien:
Incremente el ciclo de archivación.

80013

Ha finalizado el estado de sobrecarga. La archiva‐
ción registra de nuevo todos los valores.

--

80014

Una misma acción se ha disparado dos veces con‐
secutivas. Puesto que el proceso de copia se está
ejecutando, la acción no se realiza de nuevo.

--

80015

Este aviso de sistema se utiliza para indicar al usua‐ -rio que han ocurrido errores en el DOS o en la base
de datos.

80016

Los ficheros están separados por la función de sis‐
tema "CerrarTodosLosFicheros" y las entradas que
llegan sobrepasan el tamaño de la memoria inter‐
media.
Se borran todas las entradas de la memoria inter‐
media.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Vuelva a conectar los ficheros.

1007

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

80017

Las entradas que llegan sobrepasan el tamaño de la Finalice el proceso de copia.
memoria intermedia. Ello puede deberse p. ej. a va‐
rios procesos de copia simultáneos.
En la memoria intermedia se borrarán todas las pe‐
ticiones de copia.

80019

Se ha interrumpido la conexión entre todos los fi‐
cheros y WinCC, p. ej. tras ejecutarse la función de
sistema "CerrarTodosLosFicheros".
Las entradas se guardan en la memoria intermedia
y se escriben en los ficheros cuando se establece la
nueva conexión.
No existe conexión con la ubicación, por lo que p. ej.
es posible sustituir el soporte de datos.

--

80020

Se ha sobrepasado el número máximo de procesos
de copia simultáneos. La copia no se ejecuta.

Espere hasta que finalicen los procesos de copia actua‐
les y reinicie la última copia.

80021

Se ha intentado borrar un fichero que aún está ocu‐ Espere hasta que finalice el proceso de copia actual y
pado con un proceso de copia. El borrado no se eje‐ reinicie la última acción
cuta.

80022

Mediante la función de sistema "IniciarSiguienteFi‐
chero" se ha intentado comenzar el fichero siguiente
en un fichero que no ha sido configurado como tal.
No se crea ningún fichero siguiente.

80023

Se ha intentado copiar un fichero en sí mismo.
El fichero no se copia.

Solución

Compruebe en su proyecto si
● la función de sistema "IniciarSiguienteFichero" está
configurada correctamente
● los parámetros de las variables en el panel de
operador han recibido los valores correctos.
Compruebe en su proyecto si
● la función de sistema "CopiarFichero" está
configurada correctamente
● los parámetros de las variables en el panel de
operador han recibido los valores correctos.

80024

En la configuración se ha predeterminado que la
función de sistema "CopiarFichero" no admita nin‐
guna copia si el fichero de destino ya contiene datos
(parámetro "Modo"). El fichero no se copia.

Dado el caso, modifique en la configuración la función
de sistema "CopiarFichero". Borre el fichero de destino
antes de iniciar la función de sistema.

80025

Ha cancelado la acción de copia.
Las entradas escritas hasta este momento no se
perderán. No se borra el fichero de destino (en caso
de haberse configurado).
La cancelación se documenta con una entrada de
error $RT_ERR$ al final del fichero de destino.

--

80026

El aviso se visualizará una vez que todos los fiche‐ -ros se hayan inicializado correctamente. A partir de
este momento se escribirán entradas en los fiche‐
ros. Previamente no se escriben entradas en los fi‐
cheros aunque WinCC Runtime se esté ejecutando.

80027

Como ubicación para un fichero se ha indicado la
memoria flash interna. Esto no es admisible.
Para este fichero no se archiva ninguna entrada y el
fichero no se crea.

80028

El aviso sirve para notificar el estado de que se están -inicializando los ficheros. Hasta que se visualice el
aviso 80026 no se archivará ninguna entrada.

1008

Como ubicación, configure "Storage Card" o una ruta de
red.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

80029

No se ha podido inicializar el número de ficheros
indicada en el aviso. Se ha finalizado la inicialización
de ficheros.
Los ficheros incorrectos no están disponibles para
las tareas de archivación.

Evalúe los avisos de sistema adicionales visualizados
en relación con este aviso. Compruebe la configuración,
la ODBC (Open Database Connectivity) y la unidad de
disco indicada.

80030

La estructura del fichero existente no concuerda con
la estructura esperada.
Este fichero no será archivado.

Borre primero manualmente los datos existentes del fi‐
chero.

80031

El fichero en formato csv está dañado.
El fichero no se puede seguir utilizando.

Borre el archivo dañado.

80032

Los ficheros se pueden configurar con eventos. És‐
tos se disparan en cuanto el fichero está lleno. Si se
inicia WinCC Runtime y el fichero ya está lleno, el
evento no se dispara nunca.
El fichero mencionado ya no archiva porque está
lleno.

Cierre WinCC Runtime, borre el fichero y reinicie
WinCC Runtime.
O bien:
Configure un botón que contenga las mismas acciones
que el evento y púlselo.

80033

En el fichero Data se ha seleccionado "System De‐ Volver a instalar SQL Server 2005 Express.
fined" como Data Source Name. Esto ha causado un
error. En los ficheros de la base de datos no se ar‐
chiva nada mientras se está archivando en los fiche‐
ros csv.

80034

Error en la inicialización de los ficheros. Se ha inten‐ No se necesita ninguna solución. No obstante, se reco‐
tado crear las tablas como copias de seguridad y ha mienda guardar o borrar las copias de seguridad para
funcionado. Se han creado copias de seguridad de liberar la memoria.
las tablas del fichero incorrecto y se ha comenzado
de nuevo el fichero (vacío).

80035

Error en la inicialización de los ficheros. Se ha inten‐ Se recomienda guardar o borrar las copias de seguridad
tado crear las tablas como copias de seguridad pero para liberar la memoria.
no ha dado resultado. No se ha archivado ni tampo‐
co se ha creado una copia de seguridad.

80044

La exportación de un fichero se ha cancelado debido La exportación continua automáticamente.
a la finalización de runtime o a un corte de alimen‐
tación. Al reiniciar runtime se ha comprobado que es
preciso continuar con la exportación.

80045

La exportación de un fichero se ha cancelado debido La exportación se repite automáticamente. Compruebe
a un error en el servidor o en la conexión con éste. ● la conexión con el servidor.
● si el servidor funciona
● si el servidor dispone de suficiente memoria.

80046

En el servidor no se ha podido crear el fichero de
destino o el directorio correspondiente.

Compruebe si en el servidor hay suficiente memoria
disponible y si está autorizado para depositar allí el ar‐
chivo del fichero.

80047

Imposible leer el archivo del fichero.

Compruebe si el medio de almacenamiento está inser‐
tado correctamente.

80049

Al preparar la exportación de un fichero no se pudo
cambiar su nombre.
La tarea no se ha ejecutado."

Compruebe si el medio de almacenamiento está inser‐
tado correctamente y si hay suficiente espacio de me‐
moria disponible.

80050

El fichero que se debe exportar no está cerrado.
La tarea no se ha ejecutado.

Asegúrese de que la función de sistema "CerrarTodos‐
LosFicheros" se llame antes de utilizar la función de sis‐
tema "ExportarFichero". Modifique la configuración en
caso necesario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1009

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

80051

El fichero que debe copiarse contiene una suma de
verificación no válida.
El fichero no se ha copiado.

Seleccione un fichero con una suma de verificación vá‐
lida. Es posible que se haya manipulado el fichero se‐
leccionado.

80052

No es posible leer el fichero.

Compruebe el fichero y la ruta indicada.

80053

No es posible leer el fichero cerrado.

Abra el fichero.

80054

El medio de almacenamiento no está disponible.

Compruebe si el medio de almacenamiento está inser‐
tado correctamente.

3.8.8.11

90000 – Avisos FDA

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes.
Tabla 3-10

90000 – Avisos FDA

Número

Efecto/causas

Solución

90024

Puesto que no hay espacio disponible en el soporte
de memoria del fichero, no es posible protocolizar
las acciones de control. Por tanto, no es posible
realizar la acción.

Amplíe la memoria disponible insertando un medio de
almacenamiento vacío, o bien almacenando los archivos
de fichero en el servidor mediante "ExportarFichero".

90025

Las acciones de usuario no se pueden archivar de‐ Compruebe si el soporte de memoria está insertado co‐
bido a un error en el fichero. Por tanto, no es posible rrectamente.
realizar la acción de usuario.

90026

Las acciones de manejo no se pueden protocolizar
porque que el fichero está cerrado. Por tanto, no es
posible realizar la acción.

Los ficheros deben abrirse mediante la función de siste‐
ma "AbrirTodosLosFicheros" antes de realizar otras ac‐
ciones de manejo. Modifique la configuración si fuese
necesario.

90028

La contraseña indicada es incorrecta.

Introduzca la contraseña correcta.

90029

El software runtime se ha finalizado de forma anor‐ Asegúrese de que se utilice el soporte de memoria co‐
rrecto.
mal (posiblemente debido a un corte de alimenta‐
ción) o se está utilizando un soporte de memoria
con un Audit Trail inadecuado. Un Audit Trail se
considera inadecuado si pertenece a un proyecto
diferente, o bien si ya ha sido archivado.
O la archivación no ha sido detenida antes de ini‐
ciarse la función "CerrarTodosLosFicheros" que se
ha ejecutado automáticamente (p. ej. por el planifi‐
cador de tareas).

90030

El software runtime se ha finalizado de forma anor‐ -mal (posiblemente debido a un corte de alimenta‐
ción).

90031

El software runtime se ha finalizado de forma anor‐ -mal (posiblemente debido a un corte de alimenta‐
ción).

90032

Queda poca memoria disponible en el soporte de
memoria del fichero.

1010

Amplíe la memoria disponible insertando un medio de
almacenamiento vacío, o bien almacenando los archivos
de fichero en el servidor mediante "ExportarFichero".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

90033

En el soporte de memoria no hay espacio disponible Amplíe la memoria disponible insertando un medio de
para el fichero. No es posible seguir realizando ac‐ almacenamiento vacío, o bien almacenando los archivos
de fichero en el servidor mediante "ExportarFichero".
ciones de manejo que deban protocolizarse.

Solución

90039

No dispone de la autorización necesaria para reali‐ Las autorizaciones se deben adaptar o ampliar.
zar esta acción.

90040

El fichero de auditoría se ha desactivado porque se
ha forzado una acción de usuario.

Reactive el "Audit Trail" con la función de sistema "Ini‐
ciarArchivación".

90041

Se ha realizado una acción de usuario que debe
protocolizarse, aunque no hay ningún usuario dado
de alta.

Las acciones que deben protocolizarse no se pueden
realizar sin autorización. Modifique la configuración, de‐
terminando una autorización necesaria en el elemento
de entrada.

90044

Se ha bloqueado una acción de usuario de acuse
obligatorio, puesto que hay otra acción pendiente.

Repita la acción de control bloqueada.

90048

El Audit Trail no se puede imprimir mientras se es‐
tán archivando datos relevantes para el Audit.

Finalice la archivación utilizando la función de sistema
"PararArchivación".

90049

No es posible acceder a un archivo necesario.

Compruebe la conexión de red o el soporte de memoria.

90056

La receta no se ha importado porque el archivo no
contiene ninguna suma de verificación.

Seleccione un archivo con suma de verificación.

90057

3.8.8.12

Alternativamente, desactive la comprobación de la suma
de verificación, utilizando la función de sistema "Impor‐
tarRegistros".

La receta no se ha importado porque el archivo con‐ Seleccione un archivo con una suma de verificación vá‐
tiene una suma de verificación no válida. Es posible lida.
que se haya manipulado el archivo seleccionado.

110000 - Avisos de funciones offline

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-11

110000 - Avisos de funciones offline

Número

Efecto/causas

Solución

110000

Se ha ejecutado un cambio del modo de operación.
El modo de operación actual es "Offline".

--

110001

Se ha ejecutado un cambio del modo de operación.
El modo de operación actual es "Online".

--

110002

No se ha cambiado el modo de operación.

Compruebe la conexión con los controladores.
Compruebe si en el controlador existe el área de direc‐
ciones para el puntero de área 88 "Coordinación".

110003

El modo de operación del controlador indicado ha
sido cambiado por la función de sistema "Estable‐
cerModoDeConexión".
El modo de operación actual es "Offline".

--

110004

El modo de operación del controlador indicado ha
sido cambiado por la función de sistema "Estable‐
cerModoDeConexión".
El modo de operación actual es "Online".

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1011

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

110005

Se ha intentado conmutar el controlador indicado al Conmute todo el sistema al modo de operación "Online"
modo de operación "Online" con la función de sis‐ y ejecute otra vez la función de sistema.
tema "EstablecerModoDeConexión", a pesar de
que todo el sistema está en el modo de operación
"Offline". Esta conmutación es inadmisible. El modo
de operación del controlador sigue siendo "Offline".

110006

El contenido del puntero de área "Identificación del
proyecto" no coincide con la identificación de pro‐
yecto configurada en WinCC. Por ello se cierra
WinCC Runtime.

3.8.8.13

Solución

Compruebe:
● la identificación de proyecto registrada en el
controlador.
● la identificación de proyecto registrada en WinCC.

120000 – Avisos de la representación de curvas

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-12

120000 – Avisos de la representación de curvas

Número

Efecto/causas

Solución

120000

La curva no se visualiza porque se ha configurado
un eje incorrecto para la curva, o bien una curva
incorrecta.

Modifique la configuración.

120001

La curva no se visualiza porque se ha configurado
un eje incorrecto para la curva, o bien una curva
incorrecta.

Modifique la configuración.

120002

La curva no se representa porque la variable asig‐ Compruebe si en el controlador existe el rango de datos
nada accede a una dirección no válida en el contro‐ para la variable, si la dirección configurada es correcta o
lador.
si el rango de valores de la variable concuerda.

3.8.8.14

130000 – Avisos de informaciones del sistema

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes.
Tabla 3-13

130000 – Avisos de información del sistema

Número

Efecto/causas

Solución

130000

La acción no ha sido ejecutada.

Cierre otros programas.

130001

La acción no ha sido ejecutada.

Borre del disco duro los archivos que ya no se necesiten.

130002

La acción no ha sido ejecutada.

Cierre otros programas.

Borre del disco duro los archivos que ya no se necesiten.

Borre del disco duro los archivos que ya no se necesiten.

1012

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

130003

No se ha insertado ningún soporte de datos. Se
cancela la operación.

Compruebe p. ej. lo siguiente:
● si se accede al soporte de datos correcto.
● si se ha insertado un soporte de datos.

130004

El soporte de datos está protegido contra escritura.
Se cancela la operación.

Compruebe si se accede al soporte de datos correcto.
Dado el caso, elimine la protección contra escritura.

130005

El archivo está protegido contra escritura. Se can‐
cela la operación.

Compruebe si se accede al archivo correcto. De ser ne‐
cesario modifique los atributos del archivo.

130006

No se puede acceder al archivo. Se cancela la ope‐ Compruebe p. ej. lo siguiente:
ración.
● si se accede al archivo correcto.
● si existe el archivo.
● si otra acción está impidiendo el acceso simultáneo
al archivo.

130007

La conexión de red se ha interrumpido.

Compruebe la conexión de red y corrija el fallo.

No es posible guardar ni leer registros mediante la
conexión de red.
130008

La Storage Card no existe.

Inserte la Storage Card.

No es posible guardar ni leer los registros mencio‐
nados de la Storage Card.
130009

El directorio indicado no se encuentra en la Storage
Card.

Inserte la Storage Card.

Los archivos guardados en este directorio no se al‐
macenan después de desconectarse el panel de
operador.
130010

Se puede alcanzar el nivel máximo de anidamiento Compruebe la configuración.
cuando, p. ej., en un script se llama otro script por
modificación de un valor y en este script, a su vez,
se llama otro script por modificación de un valor, etc.

130013

La Storage Card no existe.

No se ofrece la funcionalidad configurada.
Inserte la Storage Card.

No es posible guardar ni leer los registros mencio‐
nados de la Storage Card.

3.8.8.15

140000 – Avisos de la conexión: conexión + panel de operador

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-14

140000 – Avisos de la conexión: conexión + panel de operador

Número

Efecto/causas

Solución

140000

Se ha establecido correctamente la conexión online
con el controlador.

--

140001

Se ha deshecho la conexión online con el controla‐ -dor.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1013

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

140003

No se actualiza ni se escribe ninguna variable.

Compruebe la conexión y verifique si está conectado el
controlador.
En el Panel de control, compruebe con "Ajustar interface
PG/PC" los parámetros configurados.
Ejecute un rearranque.

140004

No se actualiza ni se escribe ninguna variable por‐
que el punto de acceso o la parametrización del
módulo es incorrecto.

Compruebe la conexión y verifique si el controlador está
conectado.
En el Panel de control, compruebe con "Ajustar interface
PG/PC" el punto de acceso o la parametrización del mó‐
dulo (MPI, PPI, PROFIBUS).
Ejecute un rearranque.

140005

No se actualiza ni se escribe ninguna variable por‐
que la dirección del panel de operador es incorrecta
(probablemente es demasiado grande).

Utilice una dirección diferente para el panel de operador.
Compruebe la conexión y verifique si está conectado el
controlador.
En el Panel de control, compruebe con "Ajustar interface
PG/PC" los parámetros configurados.
Ejecute un rearranque.

140006

No se actualiza ni se escribe ninguna variable por‐
que la velocidad de transferencia es incorrecta.

En WinCC, seleccione una velocidad de transferencia
diferente (dependiente del módulo, perfil, interlocutor,
etc.).

140007

No se actualiza ni se escribe ninguna variable por‐
que el perfil del bus es incorrecto (v. %1).
Los siguientes parámetros no pueden ser anotados
en la base de datos de registro:
1: Tslot
2: Tqui
3: Tset
4: MinTsdr
5: MaxTsdr
6: Trdy
7: Tid1
8: Tid2
9: Gap Faktor
10: Retry Limit

Compruebe el perfil de bus definido por el usuario.
Compruebe la conexión y verifique si está conectado el
controlador.
En el Panel de control, compruebe con "Ajustar interface
PG/PC" los parámetros configurados.
Ejecute un rearranque.

140008

No se actualiza ni se escribe ninguna variable por‐
que los datos de configuración son incorrectos: Los
siguientes parámetros no pueden ser anotados en
la base de datos de registro:
0: Error general
1: Versión incorrecta
2: El perfil no puede ser anotado en la base de
datos de registro:
3: El tipo de subred no puede ser anotado en la
base de datos de registro:
4: Target Rotation Time no puede ser anotado en la
base de datos de registro:
5: La dirección más alta (HSA) es incorrecta.

Compruebe la conexión y verifique si está conectado el
controlador.
En el Panel de control, compruebe con "Ajustar interface
PG/PC" los parámetros configurados.
Ejecute un rearranque.

140009

No se actualiza ni se escribe ninguna variable por‐ Con "Ajustar interface PG/PC", vuelva a instalar el mó‐
que no se ha encontrado el módulo para la comuni‐ dulo en el Panel de control.
cación S7.

1014

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

140010

No se ha encontrado ningún interlocutor S7 porque
el controlador está desconectado.
DP/T:
En "Ajustar interface PG/PC" del Panel de control
no está ajustada la opción "PG/PC es el único
maestro del bus".

Conecte el controlador.
DP/T:
Si en la red hay solo un maestro, en "Ajustar interface
PG/PC" active la opción "PG/PC es el único maestro del
bus".
Si hay más de un maestro en la red, conéctelos. No mo‐
difique la configuración, pues de hacerlo se presentarán
fallos en el bus.

140011

No se actualiza ni se escribe ninguna variable por‐
que se ha interrumpido la comunicación.

Compruebe la conexión y verifique si está conectado el
interlocutor.

140012

Existe un problema de inicialización (p. ej. si se ha
finalizado WinCC Runtime en el Administrador de
tareas).
O bien:
Otro programa (p. ej. STEP 7) está activo con otros
parámetros de bus y los drivers no pueden ser ini‐
ciados con los nuevos parámetros de bus (p. ej. ve‐
locidad de transferencia).

Reinicie el panel de operador.
O bien:
Inicie primero WinCC Runtime y, después, el resto de
programas.

140013

El cable MPI no está enchufado y, por consiguiente,
no hay suministro de corriente.

Compruebe las conexiones.

140014

La dirección configurada en el bus ya está ocupada. Durante la configuración modifique en el controlador la
dirección del panel de operador.

140015

Corrija los parámetros incorrectos.
Velocidad de transferencia incorrecta
O bien:
Parámetros de bus incorrectos (p. ej. HSA)
O bien:
Dirección OP > HSA o: Vector de interrupción inco‐
rrecto (la interrupción no llega hasta el driver)

140016

La interrupción configurada no es asistida por el
hardware.

Modifique el número de interrupción.

140017

La interrupción configurada está siendo usada por
otro driver.

Modifique el número de interrupción.

140018

La comprobación de coherencia ha sido desactiva‐ Active de nuevo la comprobación de coherencia con SI‐
da por SIMOTION Scout. Aparece únicamente un MOTION Scout y cargue otra vez el proyecto en el con‐
aviso correspondiente.
trolador.

140019

SIMOTION Scout carga un nuevo proyecto en el
controlador. Se cancela la conexión con el contro‐
lador.

140020

La versión en el controlador no coincide con la ver‐ Existen las siguientes soluciones posibles:
sión en la configuración (archivo FWX).
Con SIMOTION Scout cargue en el controlador la ver‐
Se cancela la conexión con el controlador.
sión actual.

Espere a que se termine el cambio de configuración.

Con WinCC ES vuelva a compilar el proyecto, cierre
WinCC Runtime y comience con una nueva configura‐
ción.
140021

No se ha establecido la conexión con el controlador.
La "Contraseña de acceso" para la conexión con el
controlador se ha configurado erróneamente.

Compruebe en el editor "Conexiones", en el área "Con‐
traseña de acceso", la contraseña introducida para la
conexión con el controlador.
Asigne la contraseña correcta.
La "Contraseña" para la conexión con el controlador se
asigna en las propiedades del controlador en "Protec‐
ción".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1015

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

140022

No se ha establecido la conexión con el controlador.

Solución

Introduzca en el editor "Conexiones", en el área "Con‐
No se ha configurado ninguna contraseña de acce‐ traseña de acceso", la contraseña para la conexión con
el controlador.
so para la conexión con el controlador.
La "Contraseña" se asigna en las propiedades del con‐
trolador en "Protección".

140023

140025

3.8.8.16

Error en la sincronización horaria: No se ha podido
leer la hora del sistema del PLC %1.

Asegúrese de que el controlador esté conectado.
Compruebe en el editor "Conexiones", en el área "Con‐
traseña de acceso", la contraseña introducida para la
conexión con el controlador.

No se ha establecido la conexión con el controlador.

Desbloquee la contraseña de acceso en la pantalla del
Se ha bloqueado la contraseña de acceso del con‐ controlador.
trolador en la pantalla del controlador.

160000 – Avisos de la conexión: OPC: Conexión

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes.
Tabla 3-15

160000 – Avisos de la conexión: OPC: Conexión

Número

Efecto/causas

Solución

160000

Ya no se escribe ni se lee ningún dato más. Causas
posibles:

Compruebe si el cable está enchufado, si el controlador
funciona correctamente y si se utiliza el puerto correcto.

● El cable está interrumpido.

Reinicie el sistema si el aviso de sistema persiste.

● El controlador no reacciona, está defectuoso,
etc.
● La conexión se realiza a través del puerto
incorrecto.
● El sistema está sobrecargado.
160001

Se ha restablecido la conexión, ya que se ha podido
eliminar la causa de la interrupción.

--

160010

No existe conexión con el servidor debido a que no
se puede determinar la identificación (CLS-ID) del
servidor.

Compruebe los derechos de acceso.

No se pueden leer/escribir valores.
160011

No existe conexión con el servidor debido a que no
se puede determinar la identificación (CLS-ID) del
servidor.
No se pueden leer/escribir valores.

1016

Compruebe p. ej. lo siguiente:
● si el nombre del servidor coincide.
● si el nombre del equipo coincide.
● si el servidor está registrado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

160012

No existe conexión con el servidor debido a que no
se puede determinar la identificación (CLS-ID) del
servidor.

Compruebe p. ej. lo siguiente:

No se pueden leer/escribir valores.

● si el nombre del servidor coincide.
● si el nombre del equipo coincide.
● si el servidor está registrado.
Nota para usuarios con experiencia:
Interprete el valor de HRESULT.

160013

El servidor indicado ha sido iniciado como servidor Configure el servidor como servidor OutProc o como
InProc. Esto no ha sido autorizado y probablemente servidor local.
puede ocasionar un comportamiento indefinido, ya
que el servidor se ejecuta en la misma área de pro‐
cesos que WinCC Runtime.

160014

En un PC se puede iniciar únicamente un proyecto No inicie en el equipo dos proyectos con funcionalidad
de servidor OPC. Al intentar iniciar un segundo pro‐ de servidor OPC.
yecto aparece un mensaje de error.
El segundo proyecto no tiene funcionalidad de ser‐
vidor OPC y desde el exterior no puede ser identifi‐
cado como servidor OPC.

3.8.8.17

170000 - Avisos del cuadro de diálogo S7

Significado de los avisos de sistema
A continuación, la lista de los avisos de sistema más importantes.
Tabla 3-16

170000 - Avisos del cuadro de diálogo S7

Número

Efecto/causas

Solución

170000

Los avisos de diagnóstico S7 no se visualizan por‐
que en este equipo no es posible iniciar una sesión
en el diagnóstico S7. El servicio no se soporta.

--

170001

No se puede visualizar el búfer de diagnóstico S7
porque se ha desconectado la comunicación con el
controlador.

Conmute el controlador al modo online.

170002

No se puede visualizar el búfer de diagnóstico S7
porque la lectura del búfer de diagnóstico (SZL) se
ha cancelado con un error.

--

170003

No se puede visualizar un aviso de diagnóstico S7.
Se ha indicado el error interno %2.

--

170004

No se puede visualizar un aviso de diagnóstico S7.
Se ha indicado el error interno con la clase de error
%2 y el número de error %3.

--

170007

No se puede leer el búfer de diagnóstico S7 (SZL) -porque se ha cancelado con la clase de error interno
%2 y el código de error %3.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1017

Trabajar con avisos
3.8 Referencia

3.8.8.18

180000 - Avisos generales

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-17

180000 - Avisos generales

Número

Efecto/causas

Solución

180000

Un componente/OCX ha recibido datos de configu‐ Instale un nuevo componente.
ración con una identificación de versión no compa‐
tible.

180001

El sistema está sobrecargado debido a que se han Existen diversas posibilidades de ayuda:
activado demasiadas acciones simultáneamente.
● Genere los avisos más despacio (sondeo).
No todas las acciones pueden ser ejecutadas, algu‐
● Active los scripts y funciones de sistema en
nas serán rechazadas.
intervalos de tiempo más distantes.
En caso de que el aviso aparezca con frecuencia:
Reinicie el panel de operador.

180002

No se ha podido activar el teclado de pantalla. Cau‐ Vuelva a instalar WinCC Runtime.
sa posible:
El archivo "TouchInputPC.exe" no ha sido registra‐
do porque la instalación se ha realizado incorrecta‐
mente.

Nota
Avisos sin información adicional
El aviso 180003 no se describe porque el texto de aviso contiene toda la información necesaria.

3.8.8.19

190000 – Avisos de variables

Significado de los avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Tabla 3-18

190000 – Avisos de variables

Número

Efecto/causas

Solución
--

190000

Probablemente la variable no se actualiza.

190001

La variable se actualiza otra vez después de un es‐ -tado incorrecto una vez que se elimina el último es‐
tado de error (retorno al funcionamiento normal).

190002

La variable no se actualiza porque se ha interrum‐
pido la comunicación con el controlador.

Conecte la comunicación mediante la función de siste‐
ma "SetOnline".

190004

La variable no se actualiza porque no existe la di‐
rección configurada para esta variable.

Compruebe la configuración.

1018

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

190005

La variable no se actualiza porque no existe el tipo
de controlador configurado para esta variable.

Compruebe la configuración.

190006

La variable no se actualiza porque no se puede re‐ Compruebe la configuración.
producir el tipo de controlador en el tipo de datos de
la variable.

190007

El valor de la variable no se modifica porque se ha Cambie al modo online o restablezca la conexión con el
interrumpido la conexión con el controlador o la va‐ controlador.
riable está offline.

190008

Los valores límite configurados de la variable han
sido infringidos por uno de estos eventos:

Tenga en cuenta los valores límite configurados o ac‐
tuales de la variable.

● Entrada de valores
● Función de sistema
● Script
190009

Se ha intentado asignar a la variable un valor que
está fuera del rango de valores admisible para este
tipo de datos.

Tenga en cuenta el rango de valores del tipo de datos de
la variable.

P..ej. entrada del valor 260 para una variable de
byte o entrada del valor -3 para una variable de pa‐
labra sin signo.
190010

190011

Se escriben valores en la variable con demasiada
frecuencia (p. ej. en un bucle desde un script).
Se pierden valores porque sólo se guardan como
máximo 100 procesos en caché.

Existen las siguientes soluciones posibles:
● Incremente el tiempo entre varias escrituras.
● No utilice variables de matriz de una longitud
superior a 6 palabras en acuses para "Variable de
acuse HMI" configurados en el panel de operador.

Causa posible 1:
El valor introducido no se ha podido escribir en la
variable de controlador configurada porque el rango
de valores se ha rebasado por exceso o defecto.

Tenga en cuenta que el valor introducido debe estar
dentro del rango de valores de la variable de controlador.

La entrada se ha rechazado y se ha restablecido el
valor original.
Causa posible 2:
Se ha interrumpido la conexión con el controlador.
190012

Compruebe la conexión con el controlador.

No se puede convertir el valor de un formato de ori‐ Compruebe el rango de valores o el tipo de datos de la
variable.
gen a un formato de destino, p. ej.:
Para un contador se debe escribir un valor que está
fuera del rango de valores válido dependiente del
controlador.
A una variable del tipo Integer se le debe asignar un
valor del tipo String.

190013

El usuario ha introducido un string de una longitud Introduzca sólo strings que no excedan la longitud de la
mayor que la variable. El string se acorta automáti‐ variable.
camente a la longitud permitida.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1019

Trabajar con avisos
3.8 Referencia

3.8.8.20

190100 - Avisos del puntero de área

190100 - Avisos del puntero de área
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

190100

El puntero de área no se actualiza porque no existe
la dirección configurada para el mismo.
Tipo:
1 Advertencias
2 Errores
3 Acuse de controlador
4 Acuse de panel de operador
5 Imagen LED
6 Solicitud de curva
7 Transferencia de curva 1
8 Transferencia de curva 2
N.º:
número correlativo indicado en WinCC ES.

Compruebe la configuración.

190101

El puntero de área no se actualiza porque no se
puede reproducir el tipo de controlador en el tipo del
puntero de área.
Parámetro Tipo y N.º:
véase el aviso 190100

--

190102

El puntero de área se actualiza otra vez después de -un estado incorrecto porque se ha eliminado el últi‐
mo estado de error (retorno al funcionamiento nor‐
mal).Parámetro Tipo y Nº: véase el aviso 190100

3.8.8.21

200000 – Avisos de coordinación con el PLC

200000 – Avisos de coordinación con el PLC
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

200000

La coordinación no se ejecuta porque la dirección
ajustada no existe/no se ha configurado en el con‐
trolador.

Modifique la dirección o configure la dirección en el con‐
trolador.

200001

La coordinación no se ejecuta porque no se puede
escribir en la dirección configurada en el controla‐
dor.

Modifique la dirección o configúrela en el controlador en
un área en la que se pueda escribir.

200002

La coordinación no se ejecuta en este momento
porque el formato de dirección del puntero de área
no coincide con el formato interno de almacena‐
miento.

Error interno

200003

La coordinación se ejecuta otra vez porque se ha
eliminado el último estado de error (retorno al ser‐
vicio normal).

--

1020

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

200004

Probablemente no se ejecutará la coordinación.

--

200005

Ya no se escribe ni se lee ningún dato más. Causas
posibles:

Compruebe si el cable está enchufado o si el controlador
funciona correctamente.
Reinicie el sistema en caso de que el aviso de sistema
persista por tiempo prolongado.

● El cable está interrumpido.
● El controlador no reacciona, está defectuoso,
etc.
● El sistema está sobrecargado.

3.8.8.22

200100 - Avisos del puntero de área Identificación del proyecto

200100 - Avisos del puntero de área Identificación del proyecto
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

200101

La identificación del proyecto del puntero de
área no se puede editar.

Compruebe la configuración.

No es posible realizar ninguna entrada.
200102

Error en la conversión de tipo.

Compruebe la conversión de tipo.

200103

La identificación del proyecto del área del pun‐ -tero vuelve a actualizarse después de un estado
incorrecto, ya que se ha eliminado el último es‐
tado de error (retorno al funcionamiento normal).

200104

Error desconocido

Compruebe lo siguiente:
● Configuración
● Variables HMI
● Avisos HMI
● Eventos de sistema
● Avisos de controlador
Si el error persiste, póngase en contacto con la línea
directa.

200105

Se ha interrumpido la conexión en línea con el
controlador.

Compruebe, p. ej., lo siguiente:

La conexión es defectuosa.

● ¿El nombre del servidor es correcto?

● ¿Los derechos de acceso son correctos?
● ¿El nombre del equipo es correcto?
● ¿El servidor está registrado?
● ¿La configuración es correcta?

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1021

Trabajar con avisos
3.8 Referencia

3.8.8.23

210000 – Avisos de PLC-Job

210000 - Avisos de PLC-Job
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

210000

Las peticiones no se procesan porque la direc‐
ción ajustada no existe/no se ha configurado en
el controlador.

Modifique la dirección o configure la dirección en el
controlador.

210001

Las peticiones no se procesan porque la direc‐
ción configurada no se puede leer/escribir en el
controlador.

Modifique la dirección o configure la dirección en el
controlador en una zona en la que se pueda leer/
escribir.

210002

Las peticiones no se ejecutan porque el formato
de dirección del puntero de área no coincide con
el formato interno de almacenamiento.

Error interno

210003

El buzón de tareas se procesa otra vez porque -se ha eliminado el último estado de error (retor‐
no al funcionamiento normal).

210004

Probablemente no se procesa el buzón de ta‐
reas.

--

210005

Se ha activado una petición de control con un
número inadmisible.

Compruebe el programa de control.

210006

Se ha presentado un error durante la ejecución Compruebe los parámetros de la petición de control.
de la petición de control. Por esta razón la peti‐ Vuelva a compilar la configuración.
ción de control no se ejecuta. En caso necesario,
considere también el aviso de sistema siguiente/
anterior.

3.8.8.24

220000 - Avisos del driver de comunicación de WinCC

220000 - Avisos del driver de comunicación de WinCC
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

220001

La variable no se transfiere porque el driver de
comunicación subordinado/panel de operador
no soporta el tipo de datos Bool/Bit al escribir.

Modifique la configuración.

220002

La variable no se transfiere porque el driver de
comunicación subordinado/panel de operador
no soporta el tipo de datos Byte al escribir.

Modifique la configuración.

220003

No se ha podido cargar el driver de comunica‐
ción. Probablemente no está instalado.

Instale el driver reinstalando WinCC Runtime.

220004

La comunicación se ha interrumpido; no se rea‐ Compruebe la conexión.
liza ninguna actualización porque el cable no es‐
tá enchufado o está defectuoso, etc.

220005

Se está ejecutando la comunicación.

1022

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

220006

En el puerto indicado se ha establecido la cone‐ -xión con el controlador indicado.

Solución

220007

Se ha interrumpido la conexión con el controla‐
dor indicado en el puerto indicado.

Compruebe lo siguiente:
● si el cable está enchufado
● si el controlador funciona correctamente
● si se utiliza el puerto correcto
● si la configuración es correcta (parámetros del
puerto, configuración del informe, dirección del
controlador)
Reinicie el sistema en caso de que el aviso de sistema
permanezca invariable por tiempo prolongado.

220008

El driver de comunicación no puede acceder o Cierre todos los programas que acceden al puerto y
abrir el puerto indicado. Posiblemente otro pro‐ reinicie el equipo.
grama esté utilizando ya este puerto o se está
Utilice otro puerto disponible en el sistema.
utilizando un puerto no existente en el dispositi‐
vo de destino.
No hay comunicación con el controlador.

220009

3.8.8.25

La ruta de comunicación está vacía, incompleta
o tiene un formato no válido.

Introduzca la ruta de comunicación en el formato co‐
rrecto.

230000 - Avisos de objetos de imagen

230000 - Avisos de objetos de imagen
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

230000

No se ha podido aceptar el valor introducido. La
entrada se rechaza y el valor anterior se resta‐
blece.

Introduzca un valor apropiado o borre un usuario que
ya no se necesite.

Causa posible:
● El rango de valores se ha rebasado por
exceso
● Se han introducido caracteres no válidos
● Se ha excedido el número máximo admisible
de usuarios.
230002

Como el usuario que ha iniciado la sesión no tie‐ Inicie la sesión como usuario con la autorización
ne la autorización requerida, se rechaza la entra‐ adecuada.
da y se restablece el valor anterior.

230003

No se realiza el cambio a la imagen indicada por‐ Configure la imagen y compruebe la función de se‐
que la imagen no existe/no se ha configurado. La lección.
imagen seleccionada hasta ahora permanece
activa.

230005

Se ha excedido el rango de valores de la variable
en el campo E/S.
Se conserva el valor original de la variable.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Tenga en cuenta el rango de valores de la variable al
introducirla.

1023

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

230100

Después de la navegación con el navegador web Navegue a un sitio diferente.
se ha devuelto un aviso que podría ser de interés
para el usuario.
El navegador web sigue ejecutándose, pero es
posible que no se visualice el nuevo sitio (de for‐
ma completa).

Solución

230200

La conexión del canal HTTP se ha interrumpido
porque se ha presentado un error. Este error se
explicará más detalladamente con otro aviso de
sistema.
Ya no se intercambian más datos.

Compruebe la conexión de red.
Compruebe la configuración del servidor.

230201

Se ha establecido la conexión del canal HTTP.
Se intercambian datos.

--

230202

WININET.DLL ha detectado un error. Este error
se presenta casi siempre cuando no se puede
establecer una conexión con el servidor, o cuan‐
do el servidor rechaza una conexión porque el
cliente no tiene la autorización correcta.
En el caso de una conexión encriptada vía SSL la
causa puede ser un certificado de servidor no
aceptado.
En el texto de error del aviso encontrará explica‐
ciones más detalladas.
Este texto aparece siempre en el idioma de la
instalación de Windows, ya que es suministrado
por Windows.
No se intercambia ningún valor de proceso.
Posiblemente no se visualiza la parte del aviso
que se transfiere desde el sistema operativo Win‐
dows, p. ej. "Ha ocurrido un error. WININET.DLL
proporciona estos errores: número: 12055
Text:HTTP: <no error text available>."

En función de la causa:
Si la conexión no puede ser establecida o si ocurre
un timeout:
● Compruebe la conexión de la red y la red.
● Compruebe la dirección del servidor.
● Compruebe si el WebServer se ejecuta
realmente en el equipo de destino.
Si la autorización es incorrecta:
● El nombre de usuario configurado o la
contraseña no coinciden con los del servidor.
Haga que los datos coincidan.
Si no se acepta el certificado del servidor:
El certificado ha sido firmado por un CA desconocido
( ):
● Ignore este punto o instale un certificado que
haya sido firmado por un certificado Root
conocido por el equipo cliente.
Si la fecha del certificado no es válida:
● Ignore este punto o instale un certificado con
fecha válida en el servidor.
Si CN (Common Name o Computer Name) no es vá‐
lido:
● Ignore este punto o instale un certificado con un
nombre correspondiente a la dirección del
servidor.

230203

A pesar de que se puede establecer una cone‐
xión con el servidor, el servidor HTTP ha recha‐
zado la conexión. Causas posibles:
● WinCC Runtime no se ejecuta en el servidor

Si ocurre el error 503 Service unavailable:
Compruebe si WinCC Runtime se está ejecutando
en el servidor y si se soporta el canal HTTP.

● No se asiste el canal HTTP (503 Service
unavailable).
Sólo pueden aparecer otros errores si el Web‐
server no soporta el canal HTTP. El idioma del
texto de error depende del Webserver.
No se intercambian datos.

1024

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

230301

Ha ocurrido un error interno. Un texto en inglés
explica más detalladamente el error del aviso.
Una posible causa puede ser p. ej. que no hay
suficiente memoria.
El OCX no funciona.

--

230302

El nombre del servidor remoto no puede identifi‐ Compruebe la dirección de servidor configurada.
carse.
Compruebe si el servicio DNS de la red está activo.
No se puede establecer ninguna conexión.

230303

El servidor remoto no está activo en el equipo
direccionado.
La dirección del servidor es incorrecta.
No se puede establecer ninguna conexión.

Compruebe la dirección de servidor configurada.
Vigile si está funcionando el servidor remoto del equi‐
po de destino.

230304

El servidor remoto del equipo direccionado no es
compatible con VNCOCX.
No se puede establecer ninguna conexión.

Utilice un servidor remoto compatible.

230305

La autenticación ha fallado porque la contraseña
es incorrecta.
No se puede establecer ninguna conexión.

Configure la contraseña correcta.

230306

Falla la conexión con el servidor remoto. Esto se
puede presentar cuando existen problemas con
la red.
No se puede establecer ninguna conexión.

Compruebe si el cable de red está enchufado o si hay
problemas con la red.

230307

El servidor remoto ha terminado la conexión.
Causas posibles:

--

● Se ha cerrado el servidor remoto
● El usuario ha indicado al servidor que cierre
todas las conexiones.
La conexión se cancela.
230308

Este aviso le informa sobre el establecimiento de
la conexión.
En estos momentos se está estableciendo una
conexión.

--

Nota
Avisos sin información adicional
Los avisos 230400-230409 y 230500-230501 no se describen porque el texto del aviso
contiene toda la información necesaria.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1025

Trabajar con avisos
3.8 Referencia

3.8.8.26

240000 – Avisos de autorización

240000 - Avisos de autorización
A continuación, la lista de los avisos de sistema más importantes.
Número

Efecto/causas

Solución

240000

WinCC Runtime se ejecuta en modo de demos‐ Instale la autorización.
tración.
No tiene autorización o su autorización es de‐
fectuosa.

240001

WinCC Runtime se ejecuta en modo demostra‐
ción.
Se han configurado demasiadas variables para
la versión instalada.

Instale una autorización/un Powerpack adecuado.

240002

WinCC Runtime se ejecuta con una autorización
de emergencia de tiempo limitado.

Restablezca la autorización completa.

240004

Error al leer la autorización de emergencia.
Reinicie WinCC Runtime, instale la autorización o re‐
WinCC Runtime se ejecuta en modo de demos‐ párela (véanse las instrucciones de puesta en servi‐
tración.
cio de la protección de software).

240005

El Automation License Manager ha detectado
un fallo interno del sistema.
Causas posibles:

Reinicie el panel de operador / el PC. Si el problema
persiste, desinstale el Automation License Manager e
instálelo de nuevo.

● un archivo dañado
● instalación defectuosa
● memoria insuficiente para el Automation
License Manager

3.8.8.27

250000 - Avisos de Estado/Control S7

250000 Avisos - Estado/Control S7
A continuación, la lista de los avisos de sistema más importantes.
Número

Efecto/causas

Solución

250000

La variable configurada en la línea indicada en
"Estado/Control" no será actualizada porque no
existe la dirección configurada para esta varia‐
ble.

Compruebe la dirección configurada y verifique si se
ha configurado la dirección en el controlador.

250001

La variable configurada en la línea indicada en Compruebe la dirección configurada.
"Estado/Control" no se actualiza porque no exis‐
te la dirección configurada para esta variable.

250002

La variable configurada en la línea indicada en
"Estado/Control" no se actualiza porque no se
puede representar el tipo de controlador en el
tipo de variable.

Compruebe la dirección configurada.

250003

No se ha podido establecer ninguna conexión
con el controlador. Las variables no se actuali‐
zan.

Compruebe la conexión con el controlador. Comprue‐
be si el controlador está conectado y online.

1026

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.8.28

260000 – Avisos de sistema de contraseñas

260000 – Avisos del sistema de contraseñas
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

260000

En el sistema se ha introducido un usuario des‐ Inicie la sesión en el sistema como usuario con una
conocido o una contraseña desconocida.
contraseña válida.
El sistema cierra la sesión del usuario actual.

260001

El usuario que ha iniciado la sesión no tiene una
autorización adecuada para ejecutar la funcio‐
nalidad protegida.

Inicie la sesión en el sistema como usuario que dis‐
pone de la autorización adecuada.

260002

Este aviso se emite cuando se activa la función
de sistema "IdentificarCambioDeUsuario".

--

260003

El usuario ha cerrado la sesión en el sistema.

--

260004

El nuevo nombre de usuario introducido en el
visor de usuarios ya existe en la administración
de usuarios.

Seleccione un nombre de usuario diferente, ya que
los nombres de usuarios deben ser unívocos en la
administración de usuarios.

260005

La entrada se rechaza.

Introducir un nombre de usuario más corto.

260006

La entrada se rechaza.

Introduzca una contraseña más corta o más larga.

260007

Introduzca un valor entre 0 y 60 minutos para el tiem‐
El tiempo de cierre de sesión introducido está
po de cierre de sesión.
fuera del rango válido de 0 a 60 minutos.
El valor introducido será rechazado y se conser‐
vará el valor original.

260008

Se ha intentado leer en WinCC un archivo
PTProRun.pwl creado con ProTool V 6.0.
Se ha cancelado la lectura del archivo por in‐
compatibilidad de formato.

260009

Ha intentado borrar el usuario "Administrador" o Si fuese necesario borrar un usuario (p. ej. al alcan‐
"PLC User". Estos dos usuarios son componen‐ zarse la cantidad máxima de usuarios), borre un usua‐
tes fijos de la administración de usuarios, por lo rio diferente.
que no pueden borrarse.

260012

La contraseña introducida en el cuadro de diálo‐ Inicie de nuevo la sesión en el sistema. A continua‐
go "Cambiar contraseña" y su confirmación no ción, introduzca dos contraseñas idénticas para cam‐
biar la contraseña antigua.
coinciden.
La contraseña no se cambiará. Se cierra la se‐
sión del usuario actual.

260013

La contraseña introducida en el cuadro de diálo‐ Inicie de nuevo la sesión en el sistema. A continua‐
go "Cambiar contraseña" ya se ha utilizado, por ción, introduzca una nueva contraseña que no se ha‐
lo que no es válida.
ya utilizado todavía.
La contraseña no se cambiará. Se cierra la se‐
sión del usuario actual.

260014

Ha intentado iniciar sesión tres veces consecu‐ Puede iniciar la sesión en el sistema introduciendo la
tivas con una contraseña errónea.
contraseña correcta. No obstante, el administrador es
Se bloqueará su acceso al sistema y se le asig‐ el único que puede modificar la asignación a grupos.
nará al grupo 0.

260024

La contraseña introducida no cumple con las di‐ Introduzca una contraseña que contenga al menos un
rectivas de seguridad necesarias.
número.

260025

La contraseña introducida no cumple con las di‐ Introduzca una contraseña que contenga al menos
rectivas de seguridad necesarias.
tres caracteres.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

--

1027

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

260026

La contraseña introducida no cumple con las di‐ Introduzca una contraseña que contenga por lo me‐
rectivas de seguridad necesarias.
nos un carácter especial.

Solución

260028

Se ha intentado acceder al SIMATIC Logon Ser‐ Compruebe la conexión con el SIMATIC Logon Ser‐
ver durante el arranque del sistema, al intentar ver y la configuración de éste, por ejemplo:
iniciar la sesión, o bien al intentar cambiar la
1. Número de puerto
contraseña de un usuario de SIMATIC Logon.
2. Dirección IP
Al intentar iniciar la sesión, el nuevo usuario no
3. Nombre de servidor
se da de alta. Si un usuario diferente se había
dado de alta anteriormente, se cierra la sesión 4. Cable de transferencia operativo
de éste.
Como alternativa, utilice un usuario local.

260030

El usuario de SIMATIC Logon no ha podido cam‐ Vuelva a iniciar la sesión con una contraseña diferen‐
biar su contraseña en el SIMATIC Logon Server. te. Compruebe las convenciones de contraseñas del
Es posible que la nueva contraseña no cumpla SIMATIC Logon Server.
las convenciones de contraseñas del servidor o
que el usuario no esté autorizado a cambiar su
contraseña.
Se conserva la contraseña antigua y se cierra la
sesión del usuario.

260033

No se ha podido cambiar la contraseña o iniciar
la sesión del usuario.

Compruebe la conexión con el SIMATIC Logon Ser‐
ver y la configuración de éste, por ejemplo:
1. Número de puerto
2. Dirección IP
3. Nombre de servidor
4. Cable de transferencia operativo
Como alternativa, utilice un usuario local.

260034

El último inicio de sesión no ha concluido toda‐
vía. Por tanto, el usuario no puede realizar nin‐
guna acción ni tampoco abrir un cuadro de diá‐
logo de inicio de sesión.

Espere hasta que haya concluido el inicio de sesión.

El cuadro de diálogo de inicio de sesión no se
abre. La acción del usuario no se ejecuta.
260035

Todavía no ha finalizado el último intento de
cambiar la contraseña. Por tanto, el usuario no
puede realizar ninguna acción ni tampoco abrir
un cuadro de diálogo de inicio de sesión.

Espere hasta que haya concluido el proceso.

El cuadro de diálogo de inicio de sesión no se
abre. La acción del usuario no se ejecuta.
260036

Faltan licencias en el SIMATIC Logon Server. La
sesión se puede iniciar todavía.

Compruebe las licencias en el SIMATIC Logon Ser‐
ver.

260037

No hay licencias disponibles en el SIMATIC Lo‐ Compruebe las licencias en el SIMATIC Logon Ser‐
ver.
gon Server. La sesión no se puede iniciar.
La sesión no se puede iniciar a través del SIMA‐
TIC Logon Server, sino sólo como usuario local.

1028

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

260040

Se ha intentado acceder al SIMATIC Logon Ser‐
ver al intentar iniciar la sesión o al intentar cam‐
biar la contraseña de un usuario de SIMATIC
Logon.

Compruebe la conexión con el dominio y su configu‐
ración en el editor Configuración de seguridad de run‐
time.

Al intentar iniciar la sesión, el nuevo usuario no
se da de alta. Si un usuario diferente se había
dado de alta anteriormente, se cierra la sesión
de éste.
260043

No se ha podido iniciar la sesión del usuario en
el SIMATIC Logon Server. Es posible que el
nombre de usuario o la contraseña sean inco‐
rrectos, o bien que el usuario no esté autorizado
para iniciar la sesión.

Como alternativa, utilice un usuario local.

Vuelva a intentarlo. Dado el caso, compruebe los da‐
tos de usuario en el SIMATIC Logon Server.

No se inicia la sesión del nuevo usuario. Si un
usuario diferente se había dado de alta anterior‐
mente, se cierra la sesión de éste.
260044

No se ha podido iniciar la sesión del usuario en
el SIMATIC Logon Server porque su cuenta está
bloqueada.

Compruebe los datos de usuario en el SIMATIC Lo‐
gon Server.

No se inicia la sesión del nuevo usuario. Si un
usuario diferente se había dado de alta anterior‐
mente, se cierra la sesión de éste.
260045

Compruebe los datos de usuario en el SIMATIC Lo‐
gon Server y la configuración en el proyecto de
WinCC. Un usuario sólo puede estar asignado a un
No se inicia la sesión del nuevo usuario. Si un
usuario diferente se había dado de alta anterior‐ grupo.
mente, se cierra la sesión de éste.
El usuario de SIMATIC Logon pertenece a va‐
rios grupos, o bien a ningún grupo.

Nota
Avisos sin información adicional
Los avisos 260010, 260011, 260015-260023, 260029, 260031, 260032, 260038, 260039,
260041, 260042 y 260048 no se describen porque el texto del aviso contiene toda la
información necesaria.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1029

Trabajar con avisos
3.8 Referencia

3.8.8.29

270000 – Avisos de sistema

270000 - Avisos de sistema
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

270000

Una variable no se visualiza en el aviso porque Compruebe si en el controlador existe el rango de
accede a una dirección no válida en el controla‐ datos para la variable, si la dirección configurada es
dor.
correcta o si el rango de valores de la variable con‐
cuerda.

270001

-Existe un número máximo de avisos (que de‐
pende del dispositivo) que pueden estar pen‐
dientes de visualización al mismo tiempo (véan‐
se las instrucciones de servicio). Este número se
ha excedido.
La visualización ya no contiene todos los avisos.
Sin embargo, en el búfer de avisos se anotan
todos los avisos.

270002

Se visualizan avisos de un fichero para los que
no existen datos en el proyecto actual.
Se visualizan comodines para los avisos.

270003

Imposible configurar el servicio porque demasia‐ Conecte menos paneles de operador que deban usar
dos dispositivos desean inicializar este servicio. el servicio.
Cuatro dispositivos como máximo pueden eje‐
cutar esta acción.

270004

Imposible acceder al búfer de avisos permanen‐ Si el problema persiste en el próximo reinicio, diríjase
te. Los avisos no se pueden restablecer ni alma‐ al Customer Support (servicio de atención al cliente)
cenar.
(borrar flash).

270005

El búfer de avisos permanente está dañado: no
es posible restablecer los avisos.

270006

El proyecto se ha compilado y se ha cargado de nue‐
El proyecto se ha modificado: los avisos no se
pueden restablecer desde el búfer de aviso per‐ vo en el panel de operador. El error ya no debe ocurrir
manente.
en el siguiente arranque del panel de operador.

270007

Un problema de configuración impide restable‐
cer los datos (p. ej. se ha borrado un archivo
DLL, se ha cambiado el nombre de un directorio,
etc.).

1030

Solución

En caso necesario, borre datos antiguos de ficheros.

Si el problema persiste en el próximo reinicio, diríjase
al Customer Support (servicio de atención al cliente)
(borrar flash).

Actualice el sistema operativo y vuelva a cargar el
proyecto en el panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.8.30

280000 - Avisos SIMATIC 505 DP Communication Driver (CSP)

Avisos SIMATIC 505 DP Communication Driver (CSP)
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

280000

La conexión entre el controlador y el puerto está
activa.

--

280001

Se ha interrumpido la conexión con el controla‐
dor en el puerto.

Compruebe lo siguiente:
● ¿El cable está enchufado?
● ¿El controlador está activo?
● ¿Se usa el puerto correcto?
● ¿La configuración es correcta?

280002

Los parámetros del controlador son correctos,
los archivos XSUB y .REC están presentes.

--

280003

● Los parámetros del controlador son
correctos, los archivos XSUB y .REC no
están presentes.

● Cargue los archivos XSUB y .REC en el
controlador.

● El controlador está en modo STOP.
280004

3.8.8.31

● Compruebe que el controlador se encuentre en
modo STOP.

● El cable de comunicación entre el panel de
operador y el controlador está
desenchufado.

Compruebe lo siguiente:

● El controlador está en modo STOP.

● El modo del controlador (Run/STOP)

● El cable de comunicación entre el panel de
operador y el controlador

290000 – Avisos del sistema de recetas

290000 - Avisos del sistema de recetas
A continuación encontrará una lista con los avisos del sistema más importantes.
Número

Efecto/causas

Solución

290000

No se ha podido leer ni escribir la variable de
receta. Recibirá el valor inicial.
El aviso se registrará, dado el caso, para otras
cuatro variables incorrectas como máximo en el
búfer de avisos. Después se visualiza el aviso
n.º 290003.

Compruebe en la configuración si se ha configurado
la dirección en el controlador.

290001

Se ha intentado asignar a la variable de receta Tenga en cuenta el rango de valores del tipo de va‐
un valor que está fuera del rango de valores ad‐ riables.
misible para este tipo.
El aviso se registra, en caso necesario, en otras
cuatro variables incorrectas como máximo en el
búfer de avisos. Después se visualiza el aviso
n.º 290004.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1031

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

290002

No se puede convertir el valor de un formato de Compruebe el rango de valores o el tipo de las varia‐
bles.
origen a un formato de destino.
El aviso se registra, en caso necesario, en otras
cuatro variables de receta incorrectas como má‐
ximo en el búfer de avisos. Después se visualiza
el aviso n.º 290005.

Solución

290003

Compruebe en la configuración si se han ajustado las
Este aviso se visualiza cuando el aviso n.º
direcciones de las variables en el controlador.
290000 se ha activado más de cinco veces.
En este caso ya no se generan avisos individua‐
les.

290004

Tenga en cuenta el rango de valores del tipo de va‐
Este aviso se visualiza cuando el aviso n.º
riables.
290001 se ha activado más de cinco veces.
En este caso ya no se generan avisos individua‐
les.

290005

Compruebe el rango de valores o el tipo de las varia‐
Este aviso se visualiza cuando el aviso n.º
bles.
290002 se ha activado más de cinco veces.
En este caso ya no se generan avisos individua‐
les.

290006

Los valores límite configurados de las variables Tenga en cuenta los valores límite configurados o ac‐
se han infringido debido a la entrada de valores. tuales de la variable.

290007

Existe una diferencia entre la estructura de ori‐
gen y la estructura de destino en la receta que se
procesa actualmente. La estructura de origen
contiene una variable de receta adicional que no
existe en la estructura de destino y por eso no
puede asignarse.
El valor se rechaza.

En la configuración elimine la variable de receta indi‐
cada de la receta indicada.

290008

Existe una diferencia entre la estructura de ori‐
gen y la estructura de destino en la receta que se
procesa actualmente. La estructura de destino
contiene una variable de receta adicional que no
existe en la estructura de origen.
La variable de receta indicada recibe su valor
inicial.

Incluya la variable de receta indicada en la estructura
de origen.

290010

La ubicación configurada para la receta no es
admisible.
Causas posibles:
Caracteres inadmisibles, sólo lectura, soporte
de datos lleno o no existente.

Compruebe la ubicación configurada.

290011

El registro con el número indicado no existe.

Compruebe el origen del número (valor constante o
variable).

290012

La receta con el número indicado no existe.

Compruebe el origen del número (valor constante o
variable).

290013

Se ha intentado guardar un registro con un nú‐
mero de registro ya existente.
La operación no se ejecuta.

Existen las siguientes soluciones posibles:
● Compruebe el origen del número (valor constante
o variable).
● Borre previamente el registro.
● Modifique el parámetro de función "Sobrescribir".

1032

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

290014

No se ha encontrado el archivo indicado que de‐ Compruebe lo siguiente:
be importarse.
● Compruebe el nombre del archivo.

Solución

● Asegúrese de que el archivo está en el directorio
indicado.
290020

Confirmación de que se ha iniciado la transfe‐
rencia de registros desde el panel de operador al
controlador.

--

290021

Confirmación de que la transferencia de regis‐
tros desde el panel de operador al controlador
ha finalizado sin errores.

--

290022

En la configuración compruebe lo siguiente:
Confirmación de que la transferencia de regis‐
tros desde el panel de operador al controlador se ● si se han configurado las direcciones de las
ha cancelado con errores.
variables en el controlador.
● si existe el número de receta.
● si existe el número de registro.
● si se ha configurado el parámetro de función
"Sobrescribir".

290023

Confirmación de que se ha iniciado la transfe‐
rencia de registros desde el controlador al panel
de operador.

--

290024

Confirmación de que la transferencia de regis‐
tros desde el controlador al panel de operador
ha finalizado sin errores.

---

290025

En la configuración compruebe lo siguiente:
Confirmación de que la transferencia de regis‐
tros desde el controlador al panel de operador se ● si se han configurado las direcciones de las
ha cancelado con errores.
variables en el controlador.
● si existe el número de receta.
● si existe el número de registro.
● si se ha configurado el parámetro de función
"Sobrescribir".

290026

Se ha intentado leer/escribir un registro aunque Ponga el estado a cero en el buzón de datos.
el buzón de datos no está libre en estos momen‐
tos.
Este error se puede presentar en recetas para
las que se ha configurado una transferencia con
sincronización.

290027

Actualmente no se puede establecer ninguna
conexión con el controlador. Por esta razón no
se puede leer ni escribir el registro.
Causas posibles:
No hay conexión física con el controlador (cable
no enchufado, cable defectuoso) o el controla‐
dor está desconectado.

Compruebe la conexión con el controlador.

290030

Este aviso se visualiza tras volver a seleccionar
una imagen que contiene un visor de recetas en
el que ya se ha seleccionado un registro.

Cargue otra vez el registro existente en la ubicación o
conserve los valores actuales.

290031

Al guardar se ha detectado que ya existe un re‐ Sobrescriba el registro o cancele la operación.
gistro con el número indicado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1033

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

290032

Al exportar registros se ha detectado que ya
existe un archivo con el nombre indicado.

Sobrescriba el archivo o cancele la operación.

290033

Consulta de seguridad antes de borrar registros. --

290040

Se ha presentado un error de registro, que no
tiene que especificarse más detalladamente,
con el código de error %1.
La acción se cancela.
Probablemente en el controlador no se ha confi‐
gurado correctamente el buzón de datos.

Compruebe la ubicación, el registro, el puntero de
área "Registro" y, de ser necesario, la conexión con el
controlador.
Espere unos instantes y lance la acción de nuevo.
Si persiste el error, póngase en contacto con el Cus‐
tomer Support (servicio de atención al cliente). Al ha‐
cerlo indique el código de error que se ha presentado.

290041

No se puede guardar un registro o archivo por‐
que la ubicación está llena.

Borre los archivos que ya no se necesitan.

290042

Se ha tratado de ejecutar al mismo tiempo varias Después de un breve tiempo de espera active otra
acciones de recetas. No se ejecuta la última ac‐ vez la acción.
ción.

290043

Consulta de seguridad antes de guardar regis‐
tros.

--

290044

La ubicación para la receta está destruida y será
borrada.

--

290050

Confirmación de que se ha iniciado la exporta‐
ción de registros.

--

290051

Confirmación de que la exportación de registros
ha finalizado sin errores.

--

290052

Confirmación de que la exportación de registros
se ha cancelado con errores.

Asegúrese de que la estructura de los registros en la
ubicación y la estructura actual de la receta en el pa‐
nel de operador son idénticas.

290053

Confirmación de que se ha iniciado la importa‐
ción de registros.

--

290054

Confirmación de que la importación de registros
ha finalizado sin errores.

--

290055

Confirmación de que la importación de registros
se ha cancelado con errores.

Asegúrese de que la estructura de los registros en la
ubicación y la estructura actual de la receta en el pa‐
nel de operador son idénticas.

290056

No se ha podido leer/escribir sin errores el valor
indicado en la fila/columna.
La acción se cancela.

Compruebe la fila/columna indicada.

290057

Las variables de la receta indicada se han con‐ -mutado del modo de operación "Offline" al modo
"Online".
Cualquier modificación de una variable de esta
receta se transfiere inmediatamente al controla‐
dor.

290058

Las variables de la receta indicada se han con‐ -mutado del modo de operación "Online" al modo
"Offline".
Las modificaciones de variables de esta receta
ya no se transfieren inmediatamente al controla‐
dor sino, dado el caso, se transfieren explícita‐
mente al controlador mediante una transferencia
de registros.

1034

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

290059

Confirmación de que el registro indicado se ha
guardado correctamente.

--

290060

Confirmación de que la memoria de registros se
ha borrado correctamente.

--

290061

Confirmación de que el borrado de la memoria
de registros se ha cancelado con errores.

--

290062

El número máximo de registros es de más de
65536.
Este registro no puede crearse.

Seleccione un número diferente.

290063

Se presenta con la función de sistema "Exporta‐ Compruebe los parámetros de la función de sistema
"ExportarRegistros".
rRegistros" con el parámetro "Sobrescribir"
puesto en "No".
Se ha intentado guardar una receta con un nom‐
bre de archivo que ya existe.
La exportación se cancela.

290064

Confirmación de que se han comenzado a borrar -los registros.

290065

Confirmación de que los registros se han borra‐ -do correctamente.

290066

Consulta de seguridad antes de borrar registros. --

290068

Consulta de seguridad de si realmente se deben
borrar los registros seleccionados de la receta.

290069

Consulta de seguridad de si se deben borrar to‐ -dos los registros de la receta.

290070

El registro especificado no existe en el archivo
de importación.

290071

Al editar los valores de registros se ha introduci‐ Introduzca un valor dentro de los valores límite de la
do un valor inferior al valor límite inferior de la
variable de receta.
variable de receta.
La entrada se rechaza.

290072

Al editar los valores de registros se ha introduci‐ Introduzca un valor dentro de los valores límite de la
do un valor mayor que el valor límite superior de variable de receta.
la variable de receta.
La entrada se rechaza.

290073

Por razones desconocidas no se ha podido eje‐ -cutar una acción (p. ej. guardar un registro).
El error corresponde al aviso de estado
IDS_OUT_CMD_EXE_ERR del visor de recetas
grande.

290074

Al guardar se ha detectado que ya existe un re‐ Sobrescriba el registro, modifique el número de regis‐
gistro con el número indicado pero con otro nom‐ tro o cancele la operación.
bre.

290075

Ya existe un registro con este nombre.
Se cancelará el almacenamiento del registro.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

--

Compruebe el origen del número o nombre del regis‐
tro (valor constante o variable)

Seleccione otro nombre de registro.

1035

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

290110

La activación de los valores estándar se ha can‐ -celado debido a un error.

Solución

290111

No es posible utilizar el subsistema de recetas. Cargue de nuevo el proyecto junto con las recetas en
Los visores de recetas están vacíos y las funcio‐ el panel de operador (la correspondiente casilla de
nes relativas a las recetas no se ejecutan.
verificación debe estar activada en el cuadro de diá‐
logo de carga).
Causas posibles:
● Ha ocurrido un error al cargar las recetas.
● La estructura de las recetas se ha
modificado en el ES. El proyecto se ha
descargado de nuevo, pero las recetas no se
han transferido junto con el proyecto. Por
tanto, los nuevos datos de configuración ya
no concuerdan con las recetas antiguas en el
panel de operador.

Nota
Avisos sin información adicional
Los avisos 290067 y 290076-290109 no se describen porque el texto del aviso contiene toda
la información necesaria.

3.8.8.32

300000 – Avisos Alarm_S

300000 – Avisos Alarm_S
A continuación, la lista de los avisos de sistema más importantes.
Número

Efecto/causas

Solución

300000

La supervisión del proceso (p. ej., con PDiag o
S7-Graph) está mal programada: Hay más avi‐
sos presentes simultáneamente que los indica‐
dos en los datos técnicos de la CPU. El contro‐
lador ya no puede administrar ni notificar avisos
ALARM_S al panel de operador.

Modifique la configuración del controlador.

300001

En este controlador no se da el alta para
ALARM_S.

Seleccione un controlador que asista el servicio
ALARM_S.

Nota
Avisos sin información adicional
Los avisos 300100-300102 no se describen porque el texto del aviso contiene toda la
información necesaria.

1036

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.8.33

310000 - Avisos del informe

310000 - Avisos del informe
A continuación, la lista de los avisos de sistema más importantes.
Número

Efecto/causas

310000

Se deben imprimir demasiados informes a la vez. Espere hasta que se termine la impresión del último
Como sólo se admite la impresión de un informe, informe activo.
se rechaza el trabajo de impresión.
De ser necesario, repita el trabajo de impresión.

310001

Se ha producido un error al direccionar la impre‐ Evalúe los avisos de sistema adicionales emitidos en
sora. El informe no se imprime o se imprime in‐ relación con este aviso.
correctamente.
De ser necesario, repita el trabajo de impresión.

3.8.8.34

Solución

330000 - Avisos de interacción

330000 - Avisos de interacción
A continuación, la lista de los avisos de sistema más importantes.
Número

Efecto/causas

Solución

330022

Hay demasiados cuadros de diálogo abiertos en
el panel de operador.

Cierre los cuadros de diálogo que no necesite en el
panel de operador.

Nota
Avisos sin información adicional
Los avisos 330001-330021, 330023-330070 no se describen porque el texto del aviso contiene
toda la información necesaria.

3.8.8.35

340000 - Avisos de texto informativo

340000 - Avisos de texto informativo
Nota
Avisos sin información adicional
Los avisos 340001-340005 no se describen porque el texto del aviso contiene toda la
información necesaria.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1037

Trabajar con avisos
3.8 Referencia

3.8.8.36

350000 – Avisos PROFIsafe

350000 – Avisos PROFIsafe
A continuación, la lista de los avisos de sistema más importantes.
Número

Efecto/causas

Solución

350000

Compruebe la conexión WLAN.
Los paquetes PROFIsafe no se han recibido
dentro del tiempo previsto.
Existe un problema de comunicación con la CPU
F.
RT se finalizará.

350001

Compruebe la conexión WLAN.
Los paquetes PROFIsafe no se han recibido
dentro del tiempo previsto.
Existe un problema de comunicación con la CPU
F.
La conexión PROFIsafe se restablecerá.

350002

Ha ocurrido un error interno.

Error interno

Runtime se finalizará.
350003

Confirmación para establecer la conexión con la
CPU F.

--

Los pulsadores de parada de emergencia se ac‐
tivarán de inmediato.
350004

La comunicación PROFIsafe se ha detenido y la
conexión se ha interrumpido.
Runtime se puede finalizar.

--

Los pulsadores de parada de emergencia se de‐
sactivarán de inmediato.
350005

La dirección configurada para el dispositivo F no
es correcta.
No se puede establecer una conexión PROFI‐
safe.

Revise y modifique la dirección del dispositivo F en
WinCC ES.

350006

Se ha iniciado el proyecto. Al iniciarse el proyec‐ Accione ambas teclas de confirmación sucesivamen‐
to es preciso comprobar si funcionan bien las
te en las posiciones "Confirmación" y "Pánico".
teclas de confirmación.

350008

Se ha configurado un número erróneo de teclas
failsafe.

Modifique el número de teclas failsafe en el proyecto.

No es posible establecer una conexión PROFI‐
safe.
350009

El dispositivo se encuentra en modo Override.

Salga del modo Override.

Es posible que no se pueda detectar el trans‐
pondedor y, por tanto, tampoco determinar la
posición.
350010

1038

Error interno: el dispositivo no dispone de teclas
failsafe.

Envíe el dispositivo.
Personas de contacto en el mundo entero

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.8.37

380000 - Avisos Sm@rtServer

380000 - Avisos Sm@rtServer
Nota
Avisos sin información adicional
Los avisos 380000-380100 no se describen porque el texto del aviso contiene toda la
información necesaria.

3.8.8.38

Avisos 390000: cifrado de contraseñas y certificados

Avisos 390000: cifrado de contraseñas y certificados

Número

Efecto/causas

Solución

390000

El proyecto runtime ha sido cargado por
un usuario de Windows diferente del
que ha creado el certificado para el ci‐
frado de contraseñas.

Se debe cargar un proyecto runtime con co‐
nexiones de comunicación cifradas a con‐
troladores S7 para cada usuario de Win‐
dows que quiera utilizar estas conexiones
en runtime.

Nota
Avisos sin información adicional
Los avisos 390001-390003 no se describen porque el texto del aviso contiene toda la
información necesaria.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1039

Trabajar con avisos
3.8 Referencia

3.8.9

Avisos de sistema

3.8.9.1

Avisos de sistema

Introducción
A continuación se explican los avisos de sistema que son generados por los diversos módulos
de WinCC. Con el comando de menú "WinCC - Avisos de sistema" usted puede integrar estos
avisos en su sistema de avisos.
Nota
Encontrará más información referente a los avisos de sistema en el bloque de aviso
"Comentario" del aviso que se ha presentado.
Nota
Los avisos de sistema se visualizan en un visor de avisos. Los avisos de sistema se visualizan
en el idioma configurado en ese momento en el panel de operador.
Se adopta el formato de hora (AM/PM o de 24 horas) del idioma seleccionado. Si no hay
disponible una traducción de los textos de aviso en el idioma en cuestión, se seleccionará el
inglés como idioma alternativo y se mostrará el correspondiente formato de hora.

3.8.9.2

1000000 - Avisos Runtime

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-19

1000000 - Avisos WinCC Runtime

Número

Efecto/causas

1000000

Error

1000001

Error al cargar el Object Engine

1000002

No se ha podido cargar el canal

1000003

Variable - violación del límite inferior

1000004

Variable - violación del límite superior

1000005

Error al formatear una variable

1000006

Error al modificar escala de una variable

1000100

Error de driver

1000200

Estado

1000201

Se ha cargado Object Engine

1000202

Se ha activado Runtime

1000203

Se ha desactivado Runtime

1000204

Conexión no establecida

1040

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1000205

Conexión establecida

1000206

Conexión cliente establecida

1000207

Conexión cliente anulada

1000208

Conexión cliente interrumpida

1000209

Conexión eliminada

1000210

Conexión modificada

1000211

Conexión creada nuevamente

1000300

Estado de driver

1000301

Ha fallado la legitimación de la conexión @1%s@.
La contraseña es incorrecta.

1000302

El PLC está protegido. Para la conexión @1%s@
debe configurarse una contraseña.

1000303

Ha fallado la legitimación de la conexión @1%s@.
La contraseña está bloqueada. Desbloquéela local‐
mente (p. ej., en el display).

3.8.9.3

Solución

1000800 - Avisos cliente WinCC

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-20

1000800 - Avisos cliente WinCC

Número

Efecto/causas

1000800

Importar

1000801

Exportar

1000802

Borrar

1000803

Nuevo

1000804

Volver a cargar

1000805

DefaultServer

1000806

Update implícito

1000807

Update

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1041

Trabajar con avisos
3.8 Referencia

3.8.9.4

1000900 - Avisos Performance Monitor

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-21

1000900 - Avisos Performance Monitor

Número

Efecto/causas

1000900

@1%s@:@7%s@ es bajo

1000901

@1%s@:@7%s@ es correcto

1000902

@1%s@:@7%s@ es alto

1000903

@1%s@:@7%s@ es correcto

1000904

@1%s@:@7%s@ es bajo

1000905

@1%s@:@7%s@ es correcto

1000906

@1%s@:@7%s@ es alto

1000907

@1%s@:@7%s@ es correcto

1000908

@1%s@:@7%s@ es bajo

1000909

@1%s@:@7%s@ es correcto

1000910

@1%s@:@7%s@ es alto

1000911

@1%s@:@7%s@ es correcto

1000912

@1%s@:Pérdida de redundancia del
adaptador de terminal @2%s@

1000913

@1%s@:Redundancia del adaptador de
terminal @2%s@ restablecida

1000914

@1%s@:Adaptador de terminal @2%s@
conectado

1000915

@1%s@:Adaptador de terminal @2%s@
desconectado

3.8.9.5

Solución

1001000 - Avisos imágenes en runtime

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-22

1001000 - Avisos imágenes en runtime

Número

Efecto/causas

1001000

Error general

1001001

Acción de manejo no activa

1001002

Formato de imagen erróneo

1001003

No se ha encontrado la imagen

1001004

Ninguna dinámica activa en la imagen

1042

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1001005

Imposible escribir la variable

1001006

Acciones dinámicas en la imagen no activas

3.8.9.6

Solución

1002000 - Avisos archivado de variables

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-23

1002000 - Avisos archivado de variables

Número

Efecto/causas

1002000

Error general

1002001

Error al inicializar

1002002

Error al cargar datos de Runtime

1002003

Error en el cambio de idioma

1002004

Error al acceder a la base de datos

1002005

Error al generar objetos de Runtime

1002006

Error en la configuración Online

1002007

Error en entorno cliente/servidor

1002008

Error en administración de memoria

1002009

Error en el registro de valores medidos

1002010

Error en el procesamiento de valores medidos

1002011

Error al archivar valores medidos

1002012

Error en DLL de norma

1002013

Error en la opción Fichero de usuario

1002014

Error en archivado controlado por proceso

1002015

Error en API

1002016

Error en una ventana de aplicación

1002017

Error de sistema

1002018

Error de desbordamiento de cola de base de datos

1002019

Error de desbordamiento de cola de notificación

1002020

¡Error de desbordamiento de cola de DLL de norma - Pérdida de
datos!

1002021

Problemas con la conexión con el servidor central de ficheros

1002022

El problema de la conexión con el servidor central de ficheros se
ha resuelto

1002023

Valor de fichero procesado - Variable de fichero=@10%s@ Sello
de tiempo=@1%s@ Nuevo valor=@2%s@ Antiguo va‐
lor=@3%s@

1002024

Valor de fichero creado - Variable de fichero=@10%s@ Sello de
tiempo=@1%s@ Valor=@2%s@

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1043

Trabajar con avisos
3.8 Referencia

3.8.9.7

1003018 - Avisos sistema de avisos

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-24

1003018 - Avisos sistema de avisos

Número

Efecto/causas

1003018

Aviso no sujeto a obligación de acuse

1003019

Aviso ya confirmado

Solución

Se ha tratado de acusar un aviso sin obligación de acuse.
Se ha tratado de confirmar un aviso ya confirmado.
1003020

No se ha encontrado la categoría del aviso
La categoría correspondiente al aviso no existe.

1003021

Imposible procesar estado del aviso
No se pudo interpretar el estado del aviso (aparecido, desa‐
parecido, acusado, ...).

1003022

Aviso bloqueado
El aviso se presenta cuando a través de API usted trata de
activar un aviso bloqueado.

1003023

Aviso sello de fecha y hora no válido
El sello de fecha/hora procedente de PLC no pudo ser inter‐
pretado.

1003032

Ventana de avisos nombre de plantilla desconocido
El error se presenta cuando una ventana de avisos ya confi‐
gurada en el editor de imágenes se borra posteriormente.
En proyectos cliente-servidor, la causa del aviso también po‐
dría ser un problema de comunicación en la red.

1003033
1003034

No se ha podido crear la ventana de avisos.
Ventana de avisos - Datos no válidos
Los datos del proyecto son defectuosos.

1003048

El bit está fuera del rango de la variable
Se ha intentado, p. ej., acceder al bit 18 de una variable de 16
bits.

1003049

Ninguna modificación de variables

1003050

Variable de evento (bit) ya ocupada por aviso
El Bit de las variables de avisos ya está conectado con un
aviso.

1003051

Variable de acuse (bit) ya ocupada por aviso
El Bit de las variables de acuse ya está conectado con un aviso.

1003052

Variable de estado ya ocupada por aviso
El Bit de las variables de estado ya está conectado con un
aviso.

1003053

Error al convertir el tipo de datos Variant

1003054

Variable de evento (bit) ya ocupada-->Otro tipo

1044

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1003055

Variable de evento o tipo de variable no válidos

Solución

El tipo de datos de las variables de aviso no es válido. Se ha
utilizado, p. ej., una variable con signo.
1003056
1003057

Variable de acuse o tipo de variable no válidos
Variable de estado o tipo de variable no válidos
El tipo de datos de las variables de estado no es válido. Se ha
utilizado por ejemplo una variable con signo previo.

1003058

Handle no válido
El mensaje de error se puede presentar cuando se accede a
través de API.

1003059

Criterios de selección no válidos
El mensaje de error se puede presentar cuando se accede a
través de API.

1003060

DLL de recursos para idioma no encontrado
Falta uno de los archivos dependientes del idioma.

1003061

Error al crear archivos asignados en memoria
Este error interno indica un problema de memoria.

1003062

Error al crear el mecanismo de sincronización.
El error se presenta cuando el sistema operativo está sobre‐
cargado.

1003063

Parámetro erróneo
El mensaje de error se puede presentar cuando se accede a
través de API.

1003064

Búfer de transferencia demasiado pequeño
El mensaje de error se puede presentar cuando se accede a
través de API.

1003065

Función no disponible en estos momentos
El mensaje de error se puede presentar cuando se accede a
través de API.

1003066

DLL de norma, datos enviados no evaluables

1003067

DLL de norma. No ejecutar función

1003068

No hay bloques de aviso en el informe

1003069

Identificación de informe no válida

1003070

Impresión de informe ya activa

Verificar el informe secuencial de avisos.

Se ha tratado de reiniciar un informe activo.
1003071

Runtime sistema de avisos <Servidor> no inicializado
El servidor informa que el proyecto ha sido activado sin el
componente Runtime del archivado de avisos.

1003072

Impresión de informe secuencial de avisos no iniciada.

1003073

Impresión de informe de fichero circulante no iniciada.

1003074

Impresión de informe de fichero de secuencia no iniciada.

1003075

Número máximo de avisos configurables online
Se ha sobrepasado la cantidad de avisos que se pueden con‐
figurar online (estándar: 600 avisos).

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1045

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1003076

Error de parámetro de telegrama S7

Solución

En el interfaz de S7 se ha presentado un error de parámetro.
1003077

Error de parámetro de ALGGRT
En el interfaz de ALGRT se ha presentado un error de pará‐
metro.

1003078

Error de parámetro de TLGRT
En el interfaz de TLGRT se ha presentado un error de pará‐
metro.

1003079

Error de parámetro en datos adicionales
Los datos adicionales de los avisos son defectuosos.

1003080

Error de parámetro al establecer AR_SEND
El establecimiento de los datos útiles de AR-SEND es defec‐
tuoso.

1003081

Error general
Se ha presentado un error interno cuya causa no puede ser
especificada con exactitud.

1003082

Pérdida de aviso en el sistema de automatización

1003083

Acoplamiento y sincronización de datos activos del sistema de
automatización

1003084

Han finalizado el acoplamiento y la sincronización de datos del
sistema de automatización

1003085

Modificación de la instalación durante el funcionamiento (CiR)
activa

1003086

Ha finalizado la modificación de la instalación durante el fun‐
cionamiento (CiR)

1003087

Error durante identificación para recepción de aviso

1003098

Desbordamiento de los avisos archivados - se perderán avisos

1003099

[Nombre de equipo]:Aviso [Número de aviso] bloqueado [Tex‐
to de aviso del aviso bloqueado]
El aviso se presenta cuando se bloquea un aviso.

1003100

[Nombre de equipo]:Aviso [Número de aviso] autorizado [Tex‐
to de aviso del aviso autorizado]
El aviso se presenta cuando se autoriza un aviso.

1003101

Requerimiento de acuse para aviso [Número de aviso] ha sido
emitido
El aviso se presenta cuando se emite el acuse de un aviso.

1003102

[Nombre de equipo]:Grupo de aviso [Número de grupo de avi‐
so] bloqueado
El aviso se presenta cuando se bloquea un grupo de aviso.

1003103

[Nombre de equipo]:Grupo de aviso [Número de grupo de avi‐
so] autorizado
El aviso se presenta cuando se autoriza un grupo de aviso.

1003104

[Nombre de equipo]:Ha finalizado el desbordamiento de los
avisos archivados - ya no se perderán avisos

1003105

[Nombre de equipo]:Cola de entrada de avisos alcanza valor
crítico

1046

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1003106

[Nombre de equipo]:Cola de entrada de avisos alcanza el valor
normal

1003107

[Nombre de equipo]:Aviso [Número de aviso] oculto:@1%s@

1003108

[Nombre de equipo]:Aviso [Número de aviso] visualiza‐
do:@1%s@

1003109

La conexión con el maestro se ha interrumpido.

1003110

Datos de configuración incompletos para aviso [Nombre de
equipo]: detectado. Estado: @1%d@.

1003300

Se han detectado datos de configuración modificados para
aviso.

1003301

Error durante identificación para recepción de aviso

1003302

Debido a una escasez temporal de recursos, no se ha podido
confirmar todos los avisos. Vuelva a confirmar.

3.8.9.8

Solución

1004000 - Avisos trabajos de impresión

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-25

100400 - Avisos trabajos de impresión

Número

Efecto/causas

1004000

Error general

1004001

Se desborda el directorio PRT_OUT

1004002

Se desborda el directorio Spool

1004003

No se ha imprimido el informe. Directorio PRT_OUT lleno

1004004

No se ha imprimido el informe. Directorio Spool lleno

1004005

Se imprime nuevamente el informe secuencial de avisos.

1004006

Se desborda el directorio Spool

1004007

No se ha imprimido la copia escrita. Directorio Spool lleno

3.8.9.9

Solución

1005000 - Avisos librería de textos

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-26

100500 - Avisos librería de textos

Número

Efecto/causas

1005000

Error general

1005001

Error al salir de las aplicaciones Runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1047

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1005002

Error al conectar aplicaciones Runtime

1005003

Error al inicializar el MMF.

Solución

Existe un error de memoria.
1005004

Error al cargar el MMF.
Error al acceder a la base de datos

1005005

Error al abrir el MMF.
Existe un error de memoria.

1005006

Error al crear la ventana de Servicio.

1005007

No se ha encontrado ningún idioma.

1005008

No se ha encontrado ningún ID de texto.
El ID texto exigido no pudo ser encontrado en la
Text Library.

1005009
1005010

Acceso de lectura a MMF denegado.
Idioma no encontrado.
El idioma exigido no ha sido configurado en la Text
Library.

1005011

No se ha podido abrir la tabla de idiomas.
Puede ser que los datos tienen errores o bien la
tabla está bloqueada en la base de datos.

1005012

No se ha podido abrir la tabla de textos.
Puede ser que los datos tienen errores o bien la
tabla está bloqueada en la base de datos.

1005013

El idioma indicado no es válido.
El ID de idioma indicado no es válido.

1005014

Error de DBConnect
No se pudo establecer conexión con la base de da‐
tos.

3.8.9.10

1006000 - Avisos de scripts globales

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-27

100600 - Avisos de scripts globales

Número

Efecto/causas

1006000

Error

1007000

Rebase por exceso

Solución

Sobrecarga: Puede ser que muchas acciones se
realizan en un ciclo muy corto, o bien una acción se
ha colgado (circuito infinito, salida de un diálogo).
Todas las demás acciones están en la cola de es‐
pera y no pueden ser procesadas.

1048

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

Solución

1007001

Error de acción

Puede integrar la función OnErrorExecute en su script
para el análisis preciso del error.

Se ha presentado uno de los siguientes errores:
● Excepción en la acción (causa concreta
desconocida)
● Excepción al acceder al resultado de retorno
(char* de la memoria correspondiente no válido)
● Desbordamiento de pila al ejecutar la acción
● División entre 0 en la acción
● Acceso a un símbolo existente en la acción
● Violación de acceso en la acción
1007002

Rebase por exceso
Listas internas desbordadas.

1007003

Error de conexión
Conexión con servidor ha sido cancelada.

1007004

Error de acción 1
Función iniciada es desconocida.

1007005

Error de acción 2
El error puede tener varias causas:

Verifique el formato de escritura de la llamada de función
y la implementación de la función.
Puede integrar la función OnErrorExecute en su script
para el análisis preciso del error.

● La acción no contiene código P. Compile otra
vez la acción.
● No se ha podido cargar la función porque, por
ejemplo, el nombre de la función es incorrecto.
● El tipo del valor de retorno de la función no es
válido.
1007006

Error de variable
Una variable exigida no ha sido suministrada por
WinCC Explorer en 10 seg.

1007007

Verifique el formato de escritura del nombre de la varia‐
ble En el caso de variables externas también podría
existir un problema de comunicación entre el WinCC Ex‐
plorer y el control. Puede integrar la función OnErrorE‐
xecute en su script para el análisis preciso del error.

Acerca de
En "Diagnóstico de WinCC / Verificación de tiempo
de ejecución para acciones" se explican otras notas.

1007009

Error en Thread
En "Diagnóstico de WinCC / Verificación de tiempo
de ejecución para acciones" se explican otras notas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1049

Trabajar con avisos
3.8 Referencia

3.8.9.11

1008000 - Avisos administración de usuarios

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-28

100800 - Avisos administración de usuarios

Número

Efecto/causas

1008000

Conexión con lector de tarjeta de chip interrumpida

1008001

Nombre de usuario o contraseña incorrectos

1008002

Nombre de usuario o contraseña incorrectos a tra‐
vés de tarjeta de chip

1008003

Inicio de sesión manual

1008004

Inicio de sesión a través de tarjeta de chip

1008005

Cierre de sesión manual

1008006

Cierre de sesión a través de tarjeta de chip

1008007

Cierre de sesión automática mediante control de
tiempo

1008008

Autorizaciones de usuario/grupo de servicio
'@102%s@' efectivas

3.8.9.12

Solución

1009000 - Avisos Lifebeat Monitoring

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-29

100900 - Avisos Lifebeat Monitoring

Número

Efecto/causas

1009000

Error

1009999

La variable @2%s@ no existe

3.8.9.13

Solución

1010000 - Avisos STRRT

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-30

101000 - Avisos STRRT

Número

Efecto/causas

1010000

Error

1050

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.9.14

1011000 - Avisos indicador de grupo

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-31

1011000 - Avisos indicador de grupo

Número

Efecto/causas

1011000

Error de indicador de grupo en el arranque

1011001

Jerarquía de indicador de grupo no actualizada

1011002

Indicador de grupo: fallo de conexión

1011003

Indicador de grupo: la variable no existe

3.8.9.15

Solución

1011101 - Avisos Picture Tree Manager

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-32

1011101 - Avisos Picture Tree Manager

Número

Efecto/causas

1011101

Error durante arranque

3.8.9.16

Solución

1011201 - Avisos Split Screen Manager

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-33

1011201 - Avisos Split Screen Manager

Número

Efecto/causas

1011201

Error durante arranque

1011202

La unidad del proyecto tiene un nivel de más del
80%

1011203

El proyecto ha sido creado con una versión inco‐
rrecta de WinCC

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1051

Trabajar con avisos
3.8 Referencia

3.8.9.17

1012001 - Avisos sincronización horaria

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-34

1012001 - Avisos sincronización horaria

Número

Efecto/causas

1012001

ha cambiado a modo maestro

1012002

no puede emitir trama de hora

1012003

Servicio de recepción de hora: la señal no es buena
o ha fallado

1012004

No puede recibir trama de hora

1012005

No puede recibir trama de hora en bus redundante

1012006

Ninguna trama de hora. Conmutar a dispositivo re‐
dundante

1012007

Puede emitir trama de hora correctamente

1012008

Servicio de recepción de hora funciona correcta‐
mente

1012009

Puede recibir trama de hora correctamente

1012010

Puede recibir trama de hora en bus redundante co‐
rrectamente

1012011

Se ha cambiado a modo esclavo

1012012

Sincronización horaria desactivada

1012013

Sincronización horaria activada

1012014

El servicio de cliente DCF77 ha fallado

1012015

El servicio de cliente DCF77 funciona correctamen‐
te

1012016

@2%s@ ha cambiado a modo maestro @3%s@

1012017

@2%s@ ha cambiado a modo esclavo @3%s@

1012018

@2%s@ no puede emitir trama de hora

1012019

@2%s@ puede emitir trama de hora correctamente

1012020

@2%s@ ajusta la hora local

1012021

LAN - fallo en sincronización horaria con PC
@2%s@

1012022

LAN - sincronización horaria en PC @2%s@ ajus‐
tada

1012023

LAN - sincronización horaria con PC @2%s@ esta‐
blecida

1012024

Los nombres de dispositivo configurados de la sin‐
cronización horaria no coinciden con la instalación
del PC

1012025

LAN - no es posible aplicar la hora del servidor
WinCC conectado

1012026

Salto de hora detectado - se ha cambiado a modo
de esclavo permanente

1052

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1012027

Salto de hora detectado - sincronización horaria de‐
sactivada permanentemente

1012028

Servicio de recepción de hora no iniciado

1012029

Servicio de recepción de hora en marcha

1012030

Sincronización horaria desactivada

3.8.9.18

Solución

1012200 - Avisos redundancia

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-35

1012200 - Avisos redundancia

Número

Efecto/causas

1012200

Falla la estación partner

1012201

La estación partner ha rearrancado

1012202

Los proyectos no tienen las mismas funciones

1012203

Sincronización de ficheros errónea

1012204

Error interno en redundancia

1012205

Falla la conexión con el partner

1012206

Se ha reestablecido conexión con el partner

1012207

Servidor partner - WinCC no se ha iniciado

1012208

Se inicia la sincronización de ficheros

1012209

Ha terminado la sincronización de ficheros

1012210

Sincronizando Tag Logging

1012211

Sincronización de Tag Logging ha terminado

1012212

Sincronizando Alarm Logging

1012213

Sincronización de Alarm Logging ha terminado

1012214

Sincronizando User Archive

1012215

Sincronización de User Archive finalizada

1012216

Sincronización interrumpida

1012217

Proyecto en servidor partner no activado

1012218

Cliente cambiado automáticamente

1012219

Cliente cambiado manualmente

1012220

La sincronización no está lista para todos los User
Archive

1012221

Sincronización lista para todos los User Archive

1012222

Conexión principal interrumpida

1012223

Conexión principal operativa

1012224

Conexión de reserva interrumpida

1012225

Conexión de reserva operativa

1012226

Proyecto en servidor partner activado

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1053

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1012227

Error: el equipo vinculado no es servidor

1012228

Comienza la sincronización de fichero '@2%s@'

1012229

Finaliza la sincronización de fichero '@2%s@'

1012240

Error de RedundancyControl activa cambio

1012241

RedundancyControl: conmutación a Estado

1012242

Se ha iniciado carga Delta

1012243

Carga Delta ha finalizado

1012244

Sobrecarga en sincronización online de Alarm Log‐
ging

1012245

RedundancyControl: pérdida de conexión en serie

1012246

RedundancyControl: se ha restablecido la conexión
en serie

1012247

Servidor OS (Standby), error de redundancia

1012248

Servidor OS (Standby), redundancia restablecida

1012250

Probable inconsistencia de bases de datos de fi‐
cheros

1012251

Error interno

1012252

Backup:Error al escribir en ruta de backup

1012253

Backup:Espacio de memoria insuficiente en unidad
de destino

1012254

No hay conexión con WriteArchiveServer

1012255

No hay conexión con Microsoft Message Queue

1012256

No hay conexión con proyecto de WinCC

1012257

No hay conexión con base de datos

1012258

No hay conexión con librería de textos

1012259

Error al crear datos de TagLogging

1012260

Error al crear datos de AlarmLogging

1012261

Atención: la copia de seguridad se retarda hasta el
reinicio del servidor del interlocutor.

1012265

Ha fallado la verificación de la base de datos

1012301

No se puede acceder al servidor SQL (es posible
que se pierdan datos)

1012348

Espacio de memoria insuficiente en la unidad del
proyecto

1012349

Pérdida de la conexión a través de la tarjeta de red
dirección (MAC)

1012350

Conexión a través de la tarjeta de red dirección
(MAC) restablecida

1012351

RedundancyControl:

Solución

Detectado bloqueo del sistema. Conmutación a es‐
tado Fault.
1012352

RedundancyControl:
Detectado bloqueo del sistema. Reinicie el equipo
lo antes posible.

1054

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1012354

[Nombre de equipo]:RedundancyControl:

Solución

Ha cambiado el estado a FAULT. Sin embargo, el
aislamiento del servidor no está activado.
1012355

[Nombre de equipo]:RedundancyControl:
Ha cambiado el estado a FAULT. Sin embargo el
aislamiento del servidor está bloqueado por
@1%s@. Motivo: @2%s@

1012356

RedundancyControl: Estado cambiado a FAULT =>
el servidor está aislado

1012357

[Nombre de equipo]:RedundancyControl:
Ha cambiado el estado a FAULT. Sin embargo, el
reinicio automático no está activado.

1012358

[Nombre de equipo]:RedundancyControl:
Ha cambiado el estado a FAULT. Sin embargo, el
reinicio automático está bloqueado. El adaptador de
red está desconectado y DHCP está habilitado.

1012359

[Nombre de equipo]:RedundancyControl:
Reinicio del equipo bloqueado por @1%s@. Moti‐
vo: @2%s@

1012360

[Nombre de equipo]:RedundancyControl:
Se ha cancelado el reinicio del equipo. El último rei‐
nicio tuvo lugar hace menos de @1%s@ s.

1012361

[Nombre de equipo]:RedundancyControl: Se ha
cancelado el reinicio del equipo. Tras @1%s@ rei‐
nicios no se permiten más reinicios durante
@2%s@ s.

1012362

[Nombre de equipo]:RedundancyControl:

1012363

[Nombre de equipo]:RedundancyControl:

El equipo se reiniciará en @1%s@ s
Estado FAULT restablecido hasta que el interlocu‐
tor alcance un estado estable.

3.8.9.19

1012400 - Avisos WebNavigatorClient

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-36

1012400 - Avisos WebNavigatorClient

Número

Efecto/causas

1012400

WebClient @1%s@ Conexión establecida (usua‐
rio=@2%s@)

1012401

WebClient @1%s@ Conexión desconectada (usua‐
rio=@2%s@)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1055

Trabajar con avisos
3.8 Referencia

3.8.9.20

1012500 - Avisos Process Historian

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-37

1012500 - Avisos Process Historian

Número

Efecto/causas

1012500

[Nombre de equipo]:Iniciar Recovery para Pro‐
cess Historian

1012501

[Nombre de equipo]:Recovery para Process
Historian finalizada

1012502

[Nombre de equipo]:No es posible la comuni‐
cación con el Process Historian

1012503

[Nombre de equipo]:Falla la comunicación con
el Process Historian

1012504

[Nombre de equipo]:Comunicación con el Pro‐
cess Historian recuperada

1012505

[Nombre de equipo]:Servidor Process Histo‐
rian offline desde @1%s@

1012506

[Nombre de equipo]:Límite de búfer de canal
@1%s@ sobrepasado

1012507

[Nombre de equipo]:Límite de búfer de canal
@1%s@ normal

1012508

[Nombre de equipo]:Menos de @1%d@ GB de
espacio disponible en la unidad '@2%s@' para
la comunicación con el Process Historian.

1012509

[Nombre de equipo]:Comunicación con Pro‐
cess Historian finalizada. Menos de @1%d@
GB de espacio disponible en la unidad
'@2%s@'.

1012510

[Nombre de equipo]:No es posible conectarse a
Process Historian (compruebe la configura‐
ción).

1012600

[Nombre de equipo]:Memoria de datos de
@1%d@% ocupada

1012601

[Nombre de equipo]:Sistema sobrecargado

1012602

[Nombre de equipo]:Fallo de redundancia

1012603

[Nombre de equipo]:Redundancia restablecida

1012604

[Nombre de equipo]:Volumen de licencia exce‐
dido. Desconexión en @1%d@ días

1012605

[Nombre de equipo]:Fallo de PH-Ready
@1%s@

1012606

[Nombre de equipo]:Se ha producido una con‐
mutación de redundancia automática de los
servidores Process Historian.

1012607

[Nombre de equipo]:Menos de @1%d@ GB de
espacio disponible para la base de datos de
Process Historian.

1056

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1012608

[Nombre de equipo]:Menos de @1%d@ GB de
espacio disponible para la base de datos
"tempdb".

1012609

[Nombre de equipo]:Menos de @1%d@ GB de
espacio disponible para restablecimiento de
emergencia.

1012610

[Nombre de equipo]:Error al intentar crear una
nueva copia de seguridad para el restableci‐
miento de emergencia. Memoria disponible in‐
suficiente.

1012611

[Nombre de equipo]:Error desconocido al crear
una copia de seguridad para el restablecimien‐
to de emergencia.

1012612

[Nombre de equipo]:Ruta de memoria @1%s@
no accesible para restablecimiento de emer‐
gencia.

1012613

[Nombre de equipo]:Se ha alcanzado el umbral
de emergencia para la unidad @1%s@. En
consecuencia se ha bloqueado Process Histo‐
rian.

1012614

[Nombre de equipo]:No existe ninguno de los
segmentos preparados. Compruebe el motivo.

1012615

[Nombre de equipo]:No se han creado todos los
segmentos preparados.

3.8.9.21

Solución

1012700 - Avisos redundancia autodiagnóstico

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-38

1012700 - Avisos redundancia autodiagnóstico

Número

Efecto/causas

1012700

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ no es válido.

1012701

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ ha rebasado por exceso el límite de
error HIGH.

1012702

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ ha rebasado por defecto el límite de
error LOW.

1012703

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ ha rebasado por exceso el límite de
advertencia HIGH.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Solución

1057

Trabajar con avisos
3.8 Referencia
Número

Efecto/causas

1012704

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ ha rebasado por defecto el límite de
advertencia LOW.

1012705

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ ya no sobrepasa el límite de error.

1012706

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ es correcto.

1012707

[Nombre del equipo]: El dispositivo @10%s@ pro‐
voca @2%s@.

1012708

[Nombre del equipo]: El valor @7%s@ del dispositi‐
vo @10%s@ no es válido.

3.8.9.22

Solución

1016000 - Avisos IndustrialDataBridge

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-39

1016000 - Avisos IndustrialDataBridge

Número

Efecto/causas

1016000

@1%s@ Error en la inicialización de Provider para
la conexión: @2%s@.

1016001

@1%s@ Error en la inicialización de Consumer pa‐
ra la conexión: @2%s@.

1016002

@1%s@ Error en la transmisión de datos de Provi‐
der para la conexión: @2%s@.

1016003

@1%s@ Error en la transmisión de datos de Con‐
sumer para la conexión: @2%s@.

1016004

Error en la inicialización de Provider de base de da‐
tos para la conexión: @2%s@.

1016005

Error en la inicialización de Consumer de base de
datos para la conexión: @2%s@.

1016006

Error en la transmisión de datos de Provider de ba‐
se de datos para la conexión: @2%s@.

1016007

Error en la transmisión de datos de Consumer de
base de datos para la conexión: @2%s@.

1016008

Error en la inicialización de Provider de base de da‐
tos dinámica para la conexión: @2%s@.

1016009

Error en la inicialización de Consumer de base de
datos dinámica para la conexión: @2%s@.

1016010

Error en la transmisión de datos de Provider de ba‐
se de datos dinámica para la conexión: @2%s@.

1016011

Error en la transmisión de datos de Consumer de
base de datos dinámica para la conexión: @2%s@.

1058

Solución

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

3.8.9.23

12508141 - Avisos

Significado de los avisos de sistema
A continuación se muestra una relación de los principales avisos de sistema.
Tabla 3-40

12508141 - Avisos

Número

Efecto/causas

12508141

@10%s@: @7%s@ @102%s@ nuevo=@3%g@
@8%s@ antiguo=@2%g@ @8%s@

3.8.10

Asignaciones de bits a variables

3.8.10.1

Variables para grupos y avisos

Solución

Asignación de bits a variable de estado
Introducción
En caso necesario, defina en WinCC una variable de estado para un aviso o un grupo de
avisos. La variable de estado de un grupo de avisos representa los estados de los avisos
contenidos y los grupos de avisos subordinados.

Descripción
En una variable de estado se guardan los siguientes estados de un aviso o grupo de avisos:
● Aviso aparecido / desaparecido (bit de estado)
● Aviso pendiente de acuse / acusado (bit de acuse)

Tipo de datos de una variable de estado
La variable de estado es una variable interna o externa de WinCC. Se utilizan los siguientes
tipos de datos para la variable de estado:
● Valor de 8 bits sin signo
El tipo de datos representa los estados de cuatro avisos como máximo.
● Valor de 16 bits sin signo
El tipo de datos representa los estados de 8 avisos como máximo.
● Valor de 32 bits sin signo
El tipo de datos representa los estados de 16 avisos como máximo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1059

Trabajar con avisos
3.8 Referencia
Cada aviso o grupo de avisos ocupa dos bits en la variable de estado.
Nota
Un bit de estado de una variable de estado sólo puede estar asignado a un aviso.

Bit de acuse de la variable de estado de un aviso
Si ha aparecido un aviso y no se ha acusado, el bit de acuse tiene el estado "1".
Cuando el aviso se ha acusado, el bit de acuse cambia al estado "0".
Evento de aviso

Bit de acuse

Aviso aparecido y no acusado

1

Aviso acusado

0

Bit de acuse de la variable de estado de un aviso
Si ha aparecido al menos un aviso y éste no se ha acusado, el bit de acuse cambia en un grupo
de avisos al estado "1".
Cuando todos los avisos de un grupo se han acusado, el bit de acuse se pone nuevamente a
"0".

Bit de estado de la variable de estado de un aviso o grupo de avisos
Si ha aparecido un aviso o grupos de avisos y todavía no ha desaparecido, el bit de estado
tiene el estado "1". Cuando el aviso ha desaparecido, el bit de estado cambia al estado "0".
Evento de aviso

Bit de estado

Aviso o grupo de avisos aparecido

1

Aviso desaparecido

0

Nota
Los avisos cuya categoría posee la propiedad "Avisos sin estado" no se pueden representar
en una variable de estado.

1060

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

Variable de estado de un aviso bloqueado
Si se bloquea un aviso en runtime, los bits de la variable de estado se desactivan o no se
activan independientemente del estado del aviso. En la variable de estado no se representa el
estado "bloqueado" de un aviso.
Nota
Para visualizar el estado bloqueado de un grupo de avisos, utilice la variable de bloqueo del
grupo de avisos.

Variable de estado en caso de notificación cronológica
Para representar el estado de un aviso cronológico, utilice una variable de estructura. En la
variable de estructura, el elemento "EventState" representa p. ej. el estado de un aviso
cronológico.

Posición de bit de estado y acuse
La posición del bit de estado se determina dentro de una variable de estado. El bit de acuse
debe mantener cierta distancia con este bit. Para el tipo de datos correspondiente se aplican
las especificaciones siguientes:
Tipo de datos

Posición del bit de es‐ Distancia
tado

Posición del bit de acuse

Valor de 8 bits sin signo

0-3

4

4-7

Valor de 16 bits sin signo

0-7

8

8 - 15

Valor de 32 bits sin signo

0 - 15

16

16 - 31

Ejemplos
Variable de estado del tipo de datos "32 Bit unsigned"
Bit de estado = Posición 9
Distancia = 16 posiciones
Bit de acuse = Posición 25

Variable de estado del tipo de datos "16 Bit unsigned"
Bit de estado = 6
Distancia = 8 posiciones
Bit de acuse = Posición 14

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1061

Trabajar con avisos
3.8 Referencia

Variable de estado del tipo de datos "8 Bit unsigned"
Bit de estado = 2
Distancia = 4 posiciones
Bit de acuse = Posición 6

Asociar listas de funciones a un cambio de valor
En caso necesario, asocie una lista de funciones al evento "Cambio de valor" de la variable.
Para reducir el número de estados lógicos posibles de la variable, oculte los bits no relevantes
de la variable. La ocultación de los bits no relevantes se configura mediante un C Script o un
VB Script.
La ocultación de los bits no relevantes no es necesaria cuando se da el siguiente requisito:
● Se utiliza para cada aviso una variable de estado propia.
● Los bits no relevantes de esta variable de estado tienen siempre el valor "0".

Consulte también
Variables de un grupo de avisos (Página 808)

Asignación de bits a variable de acuse
Introducción
En caso necesario, defina en WinCC una variable de acuse para un aviso o un grupo de avisos.

Descripción
La variable de acuse se utiliza del siguiente modo:
● Acusar un aviso
● Acusar un grupo de avisos
La variable de acuse de un grupo de avisos acusa todos los avisos contenidos y grupos de
avisos subordinados.

1062

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia
● Visualizar el estado de acuse de un grupo de avisos
● Vincular el acuse a otros componentes de WinCC
En caso necesario se conectan otros componentes de WinCC con el acuse mediante la
variable de acuse.
Si el usuario acusa un aviso o grupo de avisos en runtime, el bit de acuse correspondiente se
activa.

Utilización de variables de acuse
Para configurar las variables de acuse existen las siguientes posibilidades:
● Se configura una variable de acuse propia para cada aviso o grupo de avisos.
● Se agrupan varios avisos o grupos de avisos en una variable de acuse. El bit de acuse
permite diferenciar entre avisos o grupos de avisos.
Cada aviso ocupa un bit en la variable de acuse.

Tipo de datos de una variable de acuse
La composición de las variables de acuse no está definida. El tipo de datos depende de
cuántos avisos se quieren representar en la variable de acuse.

Desactivar el bit de acuse de la variable de acuse
La activación o desactivación del bit de acuse se configura en WinCC, p. ej. con un botón o con
el controlador.
Nota
Si el usuario acusa un grupo de avisos en runtime, el bit de acuse no muestra el acuse en el
visor de avisos.
● Véase también "Desactivar el bit de acuse"
● Véase también "Variables de un grupo de avisos"

Consulte también
Variables de un grupo de avisos (Página 808)

3.8.10.2

Variables para grupos de avisos

Asignación de bits a variable de bloqueo
Introducción
En WinCC se define en caso necesario una variable de bloqueo para un grupo de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1063

Trabajar con avisos
3.8 Referencia

Descripción
La variable de bloqueo de un grupo de avisos sirve para evaluar el estado bloqueado del grupo.
Para ello, en las variables de bloqueo se define un bit de bloqueo.

Utilización de variables de bloqueo
Para configurar las variables de bloqueo existen las siguientes posibilidades:
● Se configura para cada grupo de avisos una variable de bloqueo propia.
● En una variable de bloqueo se agrupan varios grupos de avisos. Se distingue entre los
grupos de avisos con el bit de bloqueo.
Si el usuario bloquea un grupo de avisos en runtime, el bit de bloqueo correspondiente se
activa en la variable configurada.

Tipo de datos de una variable de bloqueo
La composición de las variables de bloqueo no está definida. El tipo de datos depende de
cuántos avisos se quieran representar en la variable de bloqueo.

Consulte también
Variables de un grupo de avisos (Página 808)

Asignación de bits a variable para inhibir la visualización
Introducción
En WinCC se define en caso necesario una variable para inhibir la visualización para un grupo
de avisos definido por el usuario. La variable para inhibir la visualización guarda los estados
posibles de la instalación. Sólo puede estar activo un estado de la instalación. Por ello siempre
hay activado sólo un bit en la variable para inhibir la visualización.

Descripción
La máscara de inhibición de visualización permite determinar en qué estados de la instalación
no se visualiza un aviso de un grupo en runtime.

Tipo de datos de la variable para inhibir la visualización
La variable para inhibir la visualización es una variable externa de WinCC que guarda el estado
de la instalación. Utilice los siguientes tipos de datos para la variable para inhibir la
visualización:
● Valor de 8 bits sin signo
● Valor de 16 bits sin signo
● Valor de 32 bits sin signo

1064

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con avisos
3.8 Referencia

Máscara de inhibición de visualización
En la ventana de inspección de un aviso, determine con la máscara de inhibición de
visualización los estados de la instalación en los que no se visualiza el aviso. El ingeniero de
programación de una instalación determina qué bits corresponden a qué estados de la
instalación. Puede haber un máximo de 32 estados en una instalación.
Los estados de la instalación seleccionados se introducen como valor hexadecimal en la
ventana de inspección del aviso, en "Inhibición de la visualización > Máscara".
La variable para inhibir la visualización guarda el estado de la instalación. Cuando se produce
un estado de la instalación que está incluido en la máscara, el aviso ya no se visualiza. Para
determinar qué avisos no se visualizan en un momento a causa del estado de la instalación,
el usuario cambia el visor de avisos en runtime a la vista "Avisos con inhibición de
visualización".

Ejemplo
A continuación se presentan cinco ejemplos para una máscara de inhibición de visualización:
● Máscara de inhibición de visualización 0x0. Se visualiza el aviso.

● Máscara de inhibición de visualización 0x1. Si el bit "1" está activado en la variable para
inhibir la visualización, el aviso no se visualiza.

● Máscara de inhibición de visualización 0xD. Si el bit "1", "3" ó "4" está activado en la variable
para inhibir la visualización, el aviso no se visualiza.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1065

Trabajar con avisos
3.8 Referencia
● Máscara de inhibición de visualización 0x80000008. Si el bit "4" ó "32" está activado en la
variable para inhibir la visualización, el aviso no se visualiza.

● Máscara de inhibición de visualización 0xFFFFFFFF. Si hay un bit cualquiera activado en
la variable para inhibir la visualización, el aviso no se visualiza.

Consulte también
Variables de un grupo de avisos (Página 808)

1066

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con ficheros
4.1

Trabajar con ficheros

4.1.1

Principios básicos de los ficheros

4

Introducción
WinCC dispone de los siguientes tipos de fichero para archivar datos de proceso para HMI
Runtime:
● Ficheros de variables
● Ficheros de avisos
Un fichero de variables sirve para archivar los datos de proceso de una instalación industrial.
Un fichero de avisos sirve para archivar los avisos que aparecen en el proceso supervisado.

Principio
La estructura y el funcionamiento de ambos tipos de fichero son básicamente los mismos. De
este modo, la configuración resulta más fácil y clara. En ambos tipos de fichero se definen las
mismas propiedades del fichero. Además, ambos tipos de fichero disponen de los mismos
métodos de archivación.
Están disponibles los métodos de archivación siguientes:
● Fichero cíclico
Cuando un fichero cíclico está completamente lleno, las entradas más antiguas se
sobrescriben.
● Fichero circular segmentado
En un fichero circular segmentado se crean varios segmentos de fichero de igual tamaño
que se llenan uno tras otro. Cuando todos los segmentos de fichero estén completamente
llenos, se sobrescribe el segmento más antiguo.
● Fichero con aviso del sistema dependiente del nivel de llenado
Cuando se alcanza un nivel de llenado predefinido se dispara un aviso del sistema.
● Fichero con lanzamiento de un evento en función del nivel de llenado
Cuando el fichero está completamente lleno se lanza el evento "Desbordamiento". Con el
evento "Desbordamiento" se lanza una función de sistema.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1067

Trabajar con ficheros
4.1 Trabajar con ficheros

4.1.2

Propiedades de los ficheros

Introducción
Las propiedades de un fichero de variables se define en el editor "Ficheros de variables".
Las propiedades de un fichero de avisos se define en el editor "Ficheros de avisos".
La configuración de las propiedades del fichero de variables y del de avisos es idéntica. Las
propiedades se configuran bien directamente en la tabla del editor correspondiente, bien en la
ventana de inspección de las propiedades del fichero.

Propiedades generales
● Nombre
El nombre del fichero puede elegirse libremente y debe contener como mínimo una letra o
un número.
● Ubicación
La ubicación determina dónde se guarda el fichero. Las ubicaciones disponibles dependen
del panel de operador.
● Tamaño
El tamaño de un fichero depende del tipo de fichero y de la configuración elegida.
– Tamaño de un fichero de variables
El tamaño de un fichero de variables se calcula del modo siguiente:
número de entradas * longitud de un solo valor de variable a archivar.
Debajo del campo de entrada "Número de registros" de la ventana de propiedades se
indican los tamaños que adoptaría el fichero si se conservara la cantidad de registros
seleccionada. El tamaño máximo del fichero está limitado por el volumen del soporte de
memoria.
– Tamaño de un fichero de avisos
El tamaño de un fichero de avisos se calcula a partir de la cantidad de registros que se
indique y del tamaño aproximado de sus entradas. El tamaño de una entrada depende
de si se archivan también el texto del aviso y los valores de las variables
correspondientes.
● Comportamiento de arranque
En este campo se puede determinar que la archivación empiece al iniciar el runtime. Para
ello, active la casilla de verificación "Activar fichero al iniciar runtime".
También es posible controlar el comportamiento al iniciar el runtime. Active para ello
"Restaurar" si los datos que ya están archivados deben sobrescribirse con los datos
nuevos. Si desea conservar los datos ya archivados seleccione la opción "Continuar
fichero". Con este ajuste se añaden a un fichero existente los datos que deben archivarse.
Nota
El reinicio de un fichero en runtime se controla con las funciones de sistema.

1068

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con ficheros
4.1 Trabajar con ficheros

Entradas de fichero automáticas
En runtime se crean por defecto las entradas de fichero siguientes:
Entrada

Formato de ar‐ Tipo de fichero
chivo

Significado

$RT_DIS$

Todos

Indica que la conexión con el fichero se ha in‐
terrumpido en este momento.

Fichero de varia‐
bles

(En el visor de curvas se muestra una línea en
negrita para el intervalo en cuestión.)
$RT_OFF$

Todos

Fichero de varia‐
bles

Indica que runtime se apagará en este mo‐
mento.
(En el visor de curvas no se muestra ninguna
línea para el intervalo en cuestión.)

$RT_ERR$

Todos

Fichero de varia‐
bles
Fichero de avisos

$RT_COUNT

*.CSV
*. TXT

Indica en el fichero de destino que un proceso
de copia no se ha terminado correctamente o
que se ha interrumpido.

AuditTrail1

(La copia del fichero no se ha creado por com‐
pleto.)

Fichero de varia‐
bles

Esta entrada se crea al final del fichero y sirve
para aumentar el rendimiento del sistema al
inicio de runtime.

Fichero de avisos
AuditTrail1

1

El tipo de fichero "AuditTrail" no está disponible para todos los paneles de operador.

Consulte también
Principios básicos de los ficheros (Página 1067)
Conceptos básicos para archivar variables (Página 634)
Principios básicos de la archivación de avisos (Página 920)

4.1.3

Ubicaciones de los ficheros

Ubicación de un fichero
Cuando se configura un fichero en WinCC, las ubicaciones disponibles dependen del panel de
operador utilizado.
Paneles de ope‐
rador
Avisos
Basic Panels1
Basic Panels 2.
generación2

a

Ficheros soportados
Variables

Audit Trail

Ubicaciones sopor‐ Ubicaciones so‐
tadas
portadas

No

No

No

-

-

Sí

Sí

No

Archivo TXT (Uni‐
code)

Memoria USB (en
interfaz USB)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1069

Trabajar con ficheros
4.1 Trabajar con ficheros
Paneles de ope‐
rador
Avisos

Ficheros soportados

Comfort Panels3 Sí

Variables

Audit Trail

Sí

Sí

Ubicaciones sopor‐ Ubicaciones so‐
tadas
portadas
Archivo CSV (AS‐
CII)
Archivo RDB

Mobile Panels4

Sí

Sí

Sí

Sistemas PC
con Runtime
Advanced

Sí

Sí

Sí

Unidad de red

Archivo CSV (AS‐
CII)

Storage Card
(MMC)

Archivo RDB

Storage Card
(USB)

Archivo CSV (AS‐
CII)
Archivo RDB

Sí

Sí

Sí

Storage Card
(USB)

Archivo TXT (Uni‐
code)

Archivo TXT (Uni‐
code)
● Mobile
Panels 2nd
Generation5

Storage Card (SD)

Unidad de red
Storage Card (SD)
Memoria USB (en
interfaz USB)

Archivo TXT (Uni‐
code)

Unidad de red

Archivo CSV (AS‐
CII)

Sistema de archi‐
vos local

Base de datos

Unidad de red

Archivo RDB
Archivo TXT (Uni‐
code)
1

KP 300, KP 400, KTP 1000, TP 1500

2

KTP 400, KTP 700, KTP 900, KTP 1200

3

Todos los paneles de operador de la lista de paneles

4

Solo Mobile Panel 277

5

KTP 400F Mobile, KTP 700 Mobile, KTP 900 Mobile, incluidas las variantes de seguridad

Nota
Archivar en unidades de red
No archive los avisos, las variables ni el AuditTrail directamente en una unidad de red. Las
interrupciones de una línea de red no son previsibles. Por ello no está asegurado el
funcionamiento fiable de ficheros y del AuditTrail.
Guarde los ficheros en el disco duro local o en la Storage Card local. Para hacer una copia de
seguridad de los ficheros en una unidad de red con el fin de archivarlos a largo plazo, utilice la
función de sistema "ArchivarArchivoDeInforme". De este modo queda garantizado un
funcionamiento fiable.

Ejemplos de sintaxis para ubicaciones
Ubicación en Storage Card:
● <\Storage Card MMC\My_Archives\TagLogs>: Guarda el fichero en el subdirectorio
"My_Archives\TagLogs" de la Storage Card MMC.

1070

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con ficheros
4.1 Trabajar con ficheros
Ubicación en sistema de archivos local:
● <C:\My_File_Folder\My_Archives\Machine_1>: guarda el fichero en el disco duro local C:
en el subdirectorio "My_File_Folder\My_Archives\Machine_1".
Ubicación en unidad de red:
● <\\ArchiveServer\My_File_Folder\My_Archives\Machine_1>: Guarda el fichero en el
subdirectorio "My_File_Folder\My_Archives\Machine_1" del servidor "ArchiveServer".

Convenciones de nombre
Los nombres de los ficheros deben ser unívocos en un proyecto. Aunque se seleccionen
distintas ubicaciones para diferentes ficheros, el nombre de un fichero debe ser unívoco.
Nota
Los caracteres que se pueden utilizar en el nombre del origen de datos dependen de su
ubicación.
Los caracteres \ / * ? : " < > | no se permiten en las siguientes ubicaciones:
● Archivo - RDB
● Archivo - CSV (ASCII)
● Archivo - TXT (Unicode)
La ubicación "Base de datos" admite los caracteres siguientes: a-z A-Z 0-9 _ @ # $
Los caracteres _ @ # $ no deben usarse en el primer carácter del nombre.
Nota
Solo válido para Basic Panels 2nd Generation
Los nombres y las rutas de ficheros no soportan caracteres Unicode.

Archivo - CSV (ASCII)
Los datos se guardan en un archivo CSV en formato ASCII estándar.
Si desea leer o evaluar los datos archivados sin WinCC Runtime, utilice la ubicación "Archivo
CSV".
Nota
En la ubicación "Archivo CSV" no se admiten comillas dobles o varios caracteres como
separador de listas. El ajuste para el separador de listas se encuentra bajo "Inicio >
Configuración > Panel de operador > Configuración regional y de idioma".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1071

Trabajar con ficheros
4.1 Trabajar con ficheros
Nota
Archivado de variables del tipo de datos "BOOL"
Los valores booleanos se archivan como cifras:
● 0 (False) corresponde a la entrada de fichero 0
● 1 (True) corresponde a la entrada de fichero -1

Archivo - TXT (Unicode)
Los datos se guardan en Unicode.
Este formato de archivo soporta todos los caracteres que se pueden utilizar en WinCC y
WinCC Runtime. Para la edición se requiere una aplicación que permita guardar en formato
Unicode (p. ej. Bloc de notas).
Nota
Para archivar idiomas asiáticos, utilice la ubicación "Archivo - TXT (Unicode)".

Archivo - RDB
Los datos se guardan con acceso rápido en una base de datos propietaria.
Si requiere el máximo rendimiento de lectura en runtime, utilice la ubicación "Archivo RDB".

Base de datos
Los datos se guardan en una base de datos para la que el administrador del PC ha configurado
un acceso ODBC.

Fichero con suma de verificación (Audit Trail)
En casos particulares se generan los siguientes archivos:
*.keep
1. Cuando un fichero empieza sin suma de verificación y se prosigue con suma de verificación.
2. Si se actualiza WinCC con un Service Pack o una nueva versión y se prosigue el Audit Trail
o el fichero con suma de verificación.
El contenido del archivo keep no cambia con respecto al archivo csv o txt original.
*.bak
Si WinCC Runtime detecta un problema grave e irregular en el archivo.

Consulte también
Principios básicos de la archivación de avisos (Página 920)
Principios básicos de los ficheros (Página 1067)

1072

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con ficheros
4.2 Trabajar con ficheros

4.2

Trabajar con ficheros

4.2.1

Principios básicos de los ficheros

Introducción
WinCC dispone de los siguientes tipos de fichero para archivar datos de proceso en Runtime
Professional:
● Fichero de variables Fast
● Fichero de variables Slow
● Ficheros de avisos
Los ficheros de variables sirven para archivar los datos de proceso de una instalación
industrial.
Los ficheros de avisos sirven para archivar los avisos que aparecen en el proceso
supervisado.

Principio
La estructura y el funcionamiento de los tipos de fichero son básicamente los mismos. De este
modo, la configuración resulta más fácil y clara. Para todos los tres tipos de fichero se definen
las mismas propiedades.
Todos los tres tipos de fichero se subdividen en caso necesario en diferentes segmentos. La
segmentación se puede lograr sobre la base del tamaño o del tiempo.
Para los ficheros de variables están disponibles dos tipos de fichero:
● Fichero de variables Fast
Este tipo de fichero sirve para archivar datos de proceso que cambian rápidamente con un
tiempo de ciclo <= 1 min.
● Fichero de variables Slow
Este tipo de fichero sirve para archivar todos los datos de proceso no incluidos en el tipo de
fichero "Fichero de variables Fast". En la configuración es posible determinar con varios
parámetros, qué valores de variable se archivan en qué tipo de fichero.
Los ajustes para los ficheros de avisos se aplican de manera independiente de los ajustes de
los ficheros de variables.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1073

Trabajar con ficheros
4.2 Trabajar con ficheros

4.2.2

Propiedades de los ficheros

Introducción
Las propiedades básicas de ficheros en Runtime Professional se configuran en el cuadro de
diálogo "Configuración de runtime > Archivación", como p. ej. el tamaño de un segmento. Los
ajustes configurados en este cuadro de diálogo son válidos para todos los ficheros contenidos
en el proyecto.
Las propiedades especiales de los diferentes tipos de fichero se configuran bien directamente
en la tabla del editor correspondiente bien en las propiedades del fichero de la ventana de
inspección.
La estructuración lógica de los ficheros de variables y los ficheros comprimidos se configuran
en el editor "Ficheros". Encontrará más información al respecto en "Archivación de variables
(Página 653)".
Para los ficheros de avisos no existe ninguna estructuración lógica comparable dentro del
fichero. Es por ello que en Runtime Professional no existe ningún editor separado "Ficheros de
avisos". Sólo es posible determinar si un aviso se archivará o no. La archivación de avisos se
configura en la ficha "Categorías" del editor "Avisos HMI". Encontrará más información al
respecto en "Principios básicos de la archivación de avisos (Página 936) ".

Propiedades
Para la segmentación existen las siguientes propiedades:
● Período de todos los segmentos
● Tamaño máximo de todos los segmentos
● Período que abarca un segmento individual
● Tamaño máximo de un segmento individual
● Momento del primer cambio de segmento
Adicionalmente es posible definir cómo y cuándo se crean copias de seguridad.
Para el tipo de fichero "Fichero de variables Fast" existen propiedades adicionales que
permiten dividir los datos de proceso en el tipo de fichero "Fast" o "Slow".
Encontrará más información al respecto en "Ajustes para la archivación (Página 682)".

Consulte también
Archivación de variables (Página 653)
Principios básicos de la archivación de avisos (Página 936)
Ajustes para la archivación (Página 682)
Principios básicos de los ficheros (Página 1073)
Archivación de variables (Página 653)
Configurar la archivación de avisos (Página 936)

1074

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB
Provider
5.1

WinCC Archive Connector

5.1.1

WinCC Archive Connector

5

Modo de funcionamiento
WinCC "Archive Connector" sirve para configurar el acceso a la base de datos de ficheros.
La herramienta forma parte de WinCC DataMonitor.
Los ficheros WinCC ya trasvasados pueden conectarse de nuevo con un servidor SQL por
medio del Archive Connector.
Después, DataMonitor Client o WinCC OLE DB Provider pueden acceder a los ficheros.
Funciones de WinCC Archive Connector:
● Conexión manual: se pueden seleccionar bases de datos locales y conectarse con el
servidor SQL local.
● Desconexión manual de la conexión: se pueden seleccionar bases de datos conectadas y
deshacer la conexión con el servidor SQL.
● Conexión automática: se pueden seleccionar directorios locales a los que se trasvasen
ficheros WinCC. Se conectan automáticamente con el servidor SQL todos los ficheros que
se agreguen a los directorios seleccionados a partir del momento en que se active el control
de cambios.
El Archive Connector solo funciona con un servidor SQL local y una licencia de WinCC
DataMonitor.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1075

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.1 WinCC Archive Connector
Tras finalizar la configuración, el Archive Connector puede cerrarse.
Nota
Los ficheros WinCC RT del directorio "<Directorio de proyecto> \ ArchiveManager" y sus
subdirectorios no pueden conectarse con el Archive Connector ni desconectarse del mismo
porque su conexión con el servidor SQL se gestiona a través del panel de operador con
WinCC RT Professional.
La ruta de los ficheros WinCC trasvasados se configura en WinCC con el Archive Configurator,
p. ej. del Tag Logging, y no con el WinCC Archive Connector.
Para acceder a ficheros trasvasados que se encuentran en medios de almacenamiento
extraíbles, como pueden ser unidades de cinta o discos magneto-ópticos, estando el medio
extraíble dentro de la unidad, primero es necesario deshacer la conexión con los ficheros
contenidos en este medio con ayuda del Archive Connector. Después de cambiar de medio, el
usuario deberá comprobar en el Archive Connector si los ficheros están conectados en el
nuevo medio.
La configuración con el WinCC Archive Connector únicamente debe estar permitida a un grupo
limitado de personas. Por tanto, el acceso a la herramienta deberá protegerse mediante los
derechos de usuario de Windows "Administradores" o cualquier otro mecanismo de protección
de Windows como, por ejemplo, el almacenamiento en un directorio protegido.
Nota
Utilice el Archive Connector o DataMonitor para acceder a los ficheros conectados.
Con los siguientes objetos no tiene acceso a los ficheros conectados con el Archive Connector:
●
●
●
●

1076

Visor de avisos
Visor de tablas
Visor de curvas f(t)
Visor de curvas f(x)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.1 WinCC Archive Connector

5.1.2

Ficha Configuración

Ficha Configuración

En la ficha Configuración se muestran y se administran los directorios de archivación a cuyo
acceso debe ser posible vía web o a través de WinCC OLE DB-Provider.
Se pueden agregar o eliminar directorios de archivación con los respectivos botones. A cada
directorio de archivación se le debe asignar un nombre simbólico e inequívoco durante la
configuración.
DataMonitor Client o WinCC OLE DB-Provider utilizan el nombre simbólico para acceder al
fichero.
El nombre también es utilizado por varios equipos o proyectos en la administración y conexión
de datos trasvasados.
El nombre simbólico solo puede contener caracteres permitidos en la sintaxis SQL.
Activando la respectiva casilla de verificación se conectan automáticamente con el servidor
SQL todos los ficheros que se agreguen al directorio seleccionado a partir del momento de la
activación.
Al activar o desactivar la supervisión, el cambio no es efectivo hasta que no se cierra el Archive
Connector.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1077

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.1 WinCC Archive Connector

5.1.3

Ficha Conectar/desconectar ficheros

Ficha Conectar/desconectar ficheros

En la ficha Conectar/desconectar ficheros se muestran todos los ficheros que están incluidos
en los directorios de archivación.
En cada archivo se indica el estado de la conexión. La conexión con los ficheros se puede
establecer o deshacer mediante los respectivos botones.
El tipo de fichero se representa en el campo "Tipo".
● "A" = Alarm Logging;
● "TF" = Tag Logging (Fast);
● "TS"= Tag Logging (Slow).

1078

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.2 Acceso a datos de fichero a través de OLE DB Provider
En las columnas "De" y "Hasta" se indica la zona horaria local.
Nota
La conexión de varios ficheros trasvasados con el servidor SQL puede requerir unos segundos.
No es posible conectar dos veces un archivo de la base de datos con el mismo nombre.
WinCC Archive Connector conecta ficheros cerrados o ficheros trasvasados por Backup con
el servidor SQL. No se soportan los ficheros que no estén cerrados.
El idioma de la interfaz del Archive Connector depende de los ajustes efectuados en la
Configuración regional y de idioma de Windows.
Nota
Con SQL Server 2000, los ficheros creados solo pueden conectarse si se elimina la protección
contra escritura del fichero. Los ficheros que ya estén conectados no pueden conectarse con
el Archive Connector en SQL Server 2000.
Para conectar ficheros trasvasados a CD o DVD, copie los ficheros en un medio de
almacenamiento en el que se pueda eliminar la protección contra escritura.

5.2

Acceso a datos de fichero a través de OLE DB Provider

5.2.1

Opciones de acceso a los datos de fichero

Introducción
OLE DB ofrece las siguientes opciones para acceder a los datos de fichero WinCC y
visualizarlos a través de una interfaz externa.

Acceso con WinCC OLE DB Provider
Con WinCC OLE DB se puede acceder a cualquier dato de fichero WinCC.
Dependiendo de la configuración, los datos de proceso de WinCC se guardan comprimidos.
WinCC OLE DB Provider posibilita también un acceso transparente a estos datos.
Para sacar el máximo provecho de las consultas SQL estándar, utilice el asistente "SQL Server
Import / Export Wizard". Con ayuda del asistente, los datos descomprimidos pueden

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1079

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.2 Acceso a datos de fichero a través de OLE DB Provider
depositarse en una base de datos intermedia a la que luego se podrá acceder mediante
consultas SQL estándar.
Nota
Cuando WinCC cierra un fichero completo y abre uno nuevo, durante un tiempo breve no es
posible leer ningún dato de los ficheros de avisos y ficheros de valores de procesos a través
de OLE DB Provider.

Acceso con Microsoft OLE DB
Con Microsoft OLE DB se puede acceder a WinCC User Archives.
Nota
Con Microsoft OLE DB únicamente está comprobado y autorizado el acceso a WinCC User
Archives, no a ficheros de avisos ni ficheros de valores de procesos.
Para acceder a ficheros de avisos y ficheros de valores de procesos, utilice WinCC OLE DB
Provider.

5.2.2

Configuración del acceso a datos de fichero

Opciones de configuración
Puede escribir sus propias aplicaciones para acceder a las bases de datos con WinCC OLE
DB.
Para la comunicación con el WinCC OLE DB-Provider se utiliza ADO DB en aplicaciones que
se han creado, p. ej, con Visual Basic, VBScript o VBA.
Nota
Caracteres especiales en nombres de variable
Tenga en cuenta que los lenguajes de programación como Visual Basic, VBScript o VBA tan
solo permiten los siguientes caracteres en los nombres de variable: "A...Z", "a...z", "0...9" y "_".
Si en WinCC se utilizan caracteres especiales como "," o ";" en nombres de variable, el script
se cancela con un mensaje de error. En tal caso utilice la "ID de variable" para acceder en el
script a una variable cuyo nombre contenga caracteres especiales.

1080

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.2 Acceso a datos de fichero a través de OLE DB Provider

Requisitos
● Para acceder a datos de fichero, en el equipo al que debe accederse debe estar instalado
WinCC RT Professional o WinCC V12.
● En el caso de ficheros trasvasados, establezca la conexión entre la base de datos SQL y
los ficheros trasvasados con el WinCC Archive Connector.
Nota
Los ficheros WinCC Runtime del directorio "<Directorio de proyecto> \ ArchiveManager" y
sus subdirectorios no pueden conectarse con el Archive Connector ni desconectarse del
mismo porque su conexión con el servidor SQL se gestiona a través de
WinCC RT Professional.

Procedimiento
1. Establezca la conexión con la base de datos, por ejemplo, a través de MS Excel o una
aplicación propia.
2. Defina los criterios de selección deseados.
3. Consulte los datos de fichero.
El resultado de la consulta puede representarse en MS Excel, por ejemplo, o exportarse
como archivo Csv.

5.2.3

Creación de una conexión a la base de datos de ficheros

Introducción
En el caso de los objetos de datos ActiveX (ADO), la conexión entre la aplicación y la base de
datos de ficheros se crea por medio del objeto Connection. Un parámetro importante para ello
es el ConnectionString. El ConnectionString contiene todos los datos necesarios para acceder
a la base de datos a través del OLE DB Provider.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1081

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.2 Acceso a datos de fichero a través de OLE DB Provider
Estructura del ConnectionString
"Provider = nombre del OLE DB Provider; Catalog = nombre de la base
de datos; Data Source = nombre del servidor;"
Parámetros Descripción
Provider

Nombre del OLE DB-Provider:
p.ej. WinCCOLEDBProvider

Catalog

Nombre de la base de datos WinCC
Para las bases de datos WinCC RT se utilizan los nombres terminados en "R". <Nom‐
bre_R>.
También puede utilizarse la base de datos "CC_ExternalBrowsing".
Si por medio de WinCC Archive Connector ha conectado con el servidor SQL ficheros
WinCC ya trasvasados, utilice el nombre simbólico.
Nota
Para un acceso transparente, introduzca como "Catalog" el nombre del proyecto WinCC,
p. ej.: "Catalog=WinCC_Project_Name".
Nota
Si se accede con "CC_ExternalBrowsing" a ficheros de avisos o ficheros trasvasados, el
acceso puede requerir varios minutos.

Data Sour‐
ce

Nombre del servidor
Local: ".\WinCC" o "<Nombre del equipo>\WinCC"
Remote: "<Nombre del equipo>\WinCC"
Nota
Para un acceso transparente al Central Archive Server o en caso de servidores redun‐
dantes a través de OLE DB Provider, introduzca lo siguiente como "Data Source":
<Nombre simbólico del equipo>::\WinCC.
Nota
Si accede directamente al Central Archive Server "CAS", utilice el nombre de las varia‐
bles de fichero. El Central Archive Server "CAS" devuelve como ID la CAS-ID, no la ID de
las variables de fichero:
<NOMBRE SIMBÓLICO DEL EQUIPO>\\<Achive_Var_Name>

Ejemplo de fichero de valores de proceso o fichero de avisos:
En el ejemplo siguiente se crea un objeto Connection y a continuación se abre la conexión con
la base de datos WinCC (fichero de valores de proceso o fichero de avisos).
Set conn = CreateObject("ADODB.Connection")
conn.open
"Provider=WinCCOLEDBProvider.1;Catalog=CC_OpenArch_03_05_27_14_11_46
R;Data Source=.\WinCC"

Ejemplo de fichero de usuario:
En el ejemplo siguiente se crea un objeto Connection y a continuación se abre la conexión con
el fichero de usuario WinCC.
Set conn = CreateObject("ADODB.Connection")

1082

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.3 Casos de aplicación
conn.open "Provider=SQLOLEDB.1; Integrated Security=SSPI; Persist
Security Info=false; Initial Catalog=CC_OpenArch_03_05_27_14_11_46R;
Data Source=.\WinCC"
Nota
A fin de mejorar el rendimiento en caso de acceso local, en el campo Data Source introduzca
"<Nombre del equipo>\WinCC" en lugar de ".\WinCC".

5.3

Casos de aplicación

5.3.1

Caso de aplicación 1: acceso local a la base de datos WinCC RT

Requisitos
En el panel de operador deben estar instaladas las siguientes licencias:
● WinCC RT Professional

Principio
Una aplicación accede a la base de datos WinCC Runtime a través de WinCC OLE DBProvider.
Es posible evaluar localmente los datos de fichero y, p. ej., calcular la desviación estándar de
un valor de proceso.
:LQ&&573URIHVVLRQDO
$FFHVRORFDODWUDY«V
GH:LQ&&2/('%
3URYLGHU
%DVHGHGDWRV
ORFDO:LQ&&

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1083

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.3 Casos de aplicación

5.3.2

Caso de aplicación 2: acceso remoto a la base de datos WinCC RT

Requisitos
En el panel de operador deben estar instaladas las siguientes licencias:
● WinCC RT Professional
El acceso puede llevarse a cabo bajo diferentes combinaciones del cliente Connectivity Pack.
● En el equipo cliente hay un software WinCC como p. ej. WinCC V12, el servidor Web
Navigator o el servidor DataMonitor.
No es necesario instalar el cliente de manera explicita. Los derechos de licencia se
conceden a través de licencias WinCC.

Principio
El cliente accede remotamente a la base de datos WinCC Runtime de un panel de operador
con WinCC RT Professional. A través de WinCC OLE DB Provider, el cliente lee los datos de
los ficheros de valores de proceso y los ficheros de avisos.
Como en este caso de aplicación no se accede a ficheros WinCC trasvasados, no es necesario
conectar ficheros WinCC con un servidor SQL por medio del Archive Connector.
Los datos pueden mostrarse, evaluarse o continuar siendo procesados en el cliente, p. ej.
mediante exportación a un fichero CSV.
&OLHQW

$FFHVRUHPRWRD
WUDY«VGH:LQ&&2/(
'%3URYLGHU

:LQ&&573URIHVVLRQDO

%DVHGH
GDWRV:LQ&&

1084

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.3 Casos de aplicación

5.3.3

Caso de aplicación 3: acceso local a bases de datos de ficheros WinCC

Requisitos
En el panel de operador debe estar instalado lo siguiente:
● WinCC V12
● WinCC RT Professional

Principio
Una aplicación accede a la base de datos de ficheros local a través de WinCC OLE DB
Provider. Los datos de ficheros más antiguos se copian de la base de datos WinCC RT a un
directorio aparte del mismo equipo.
Los ficheros WinCC trasvasados se conectan de nuevo con un servidor SQL por medio del
Archive Connector. De este modo los ficheros pasan a ser accesibles mediante el WinCC OLE
DB Provider.
Los datos de ficheros locales se pueden mostrar, examinar o evaluar, p. ej., para buscar
errores de procesos u optimizar procesos.
:LQ&&573URIHVVLRQDO
$FFHVRORFDODWUDY«V
GH:LQ&&2/('%
3URYLGHU
%DVHGHGDWRV
GHILFKHURVORFDO

5.3.4

Caso de aplicación 4: acceso remoto a bases de datos de ficheros WinCC

Requisitos de software
En el servidor de ficheros de largo plazo debe estar instalado lo siguiente:
● Servidor Connectivity Pack
El acceso puede llevarse a cabo bajo diferentes combinaciones del cliente.
● En el equipo cliente hay un software WinCC como p. ej. WinCC V12 RT Professional,
WinCC V12, el servidor Web Navigator o el servidor DataMonitor.
No es necesario instalar el cliente de manera explicita.
Los derechos de licencia se conceden a través de licencias WinCC.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1085

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.3 Casos de aplicación

Principio
Se utiliza un servidor de ficheros de largo plazo para hacer una copia de seguridad, p. ej. con
periodicidad mensual, de las bases de datos de ficheros de valores de proceso y ficheros de
avisos.
Los ficheros WinCC trasvasados se conectan de nuevo con un servidor SQL por medio del
Archive Connector. De este modo los ficheros pasan a ser accesibles mediante el WinCC OLE
DB Provider.
El cliente accede a los ficheros a través de WinCC OLE DB-Provider . Con una aplicación VB,
por ejemplo, es posible evaluar los ficheros y mostrar los valores de proceso de un
determinado día.
Nota
Si se accede con "CC_ExternalBrowsing" a ficheros de avisos o ficheros trasvasados, el
acceso puede requerir varios minutos.

&OLHQW

$FFHVRUHPRWRD
WUDY«VGHO:LQ&&
2/('%3URYLGHU
6HUYLGRUGHILFKHURVDODUJRSOD]R

:LQ&&573URIHVVLRQDO

1086

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.3 Casos de aplicación

5.3.5

Caso de aplicación 5: acceso local a ficheros de usuario WinCC

Requisitos
En el panel de operador debe estar instalado lo siguiente:
● WinCC RT Professional

Principio
Una aplicación accede a los ficheros de usuario WinCC locales a través del Microsoft OLE DB
Provider.
Con una aplicación VB, por ejemplo, es posible mostrar y examinar los datos de fichero locales
y restaurar valores modificados.
:LQ&&573URIHVVLRQDO
$FFHVRORFDODWUDY«V
GH:LQ&&2/('%
3URYLGHU
:LQ&&ORFDO
)LFKHURGHXVXDULR

5.3.6

Caso de aplicación 6: acceso remoto a ficheros de usuario WinCC

Requisitos
En el panel de operador debe estar instalado lo siguiente:
● WinCC RT Professional
El acceso puede llevarse a cabo bajo diferentes combinaciones del cliente Connectivity Pack.
● En el equipo cliente hay un software WinCC como p. ej. WinCC RT Professional, el servidor
Web Navigator o el servidor DataMonitor.
No es necesario instalar el cliente de manera explicita. Los derechos de licencia se
conceden a través de licencias WinCC.

Principio
El cliente accede a los ficheros de usuario WinCC a través de MS OLE DB Provider.
Con una aplicación VB, por ejemplo, es posible mostrar y examinar los datos de fichero y
restaurar valores modificados.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1087

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
&OLHQW

$FFHVRUHPRWRD
WUDY«VGH:LQ&&2/(
'%3URYLGHU

:LQ&&573URIHVVLRQDO

:LQ&&
)LFKHURGHXVXDULR

5.4

Consulta de los datos de fichero

5.4.1

Representación de los ficheros de valores de proceso

Introducción
El resultado de la consulta se devuelve como Recordset. En este capítulo se describe la
estructura del Recordset para ficheros de valores de proceso.

Estructura Recordset

1088

Nombre de cam‐ Tipo
po

Comentario

ValueID

Integer 4 bytes o
Integer 8 bytes

Identificación unívoca del valor.
La longitud depende del tipo de consulta.

TimeStamp

Datetime

Sello de tiempo

RealValue

Real 8 bytes

Valor de variable

Quality (Cali‐
dad)

Integer 4 bytes

QualityCode del valor (p. ej. "bueno" o "malo")

Flags

Integer 4 bytes

Parámetro de control interno

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

5.4.2

Consulta para ficheros de valores de proceso

Principio
Con la siguiente consulta se puede acceder a un fichero de valores de proceso. Aplicando
criterios de filtro se pueden seleccionar los datos. Las consultas se transfieren a la base de
datos con el objeto Command.
Nota
La longitud de ValueID es variable.
● Para las bases de datos que se han procesado en un servidor central de ficheros (CAS),
ValueID tiene una longitud de 8 bytes; en el rango HI-DWORD contiene una identificación
de servidor y en el rango LO-DWORD contiene el ValueID asignado por el servidor en
cuestión.
● Para el resto de bases de datos, ValueID tiene una longitud de 4 bytes y contiene
únicamente el ValueID unívoco asignado por WinCC Server.
En cualquier caso, a fin de garantizar la compatibilidad continúa siendo posible la consulta de
4 bytes a través de TAG:R. Entonces, no obstante, el ValueID de 4 bytes devuelto ya no es
unívoco en el caso de las bases de datos CAS.
Las consultas de ficheros de valores de proceso están limitadas a 20 variables con un máximo
de 128 caracteres por variable.

Sintaxis
Tenga en cuenta que la consulta no puede contener espacios en blanco.
Consulta de ValueID con una longitud de 8 bytes:
TAG_LLVID:R,<ValueID oder
ValueName>,<TimeBegin>,<TimeEnd>[,<SQL_clause>][,<TimeStep>]
Consulta de ValueID con una longitud de 4 bytes:
TAG:R,<ValueID oder ValueName>,<TimeBegin>,<TimeEnd>[,<SQL_clause>]
[,<TimeStep>]

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1089

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

Parámetros
Parámetros

Descripción

ValueID

ValueID de la tabla de la base de datos
Se admiten varias menciones, p. ej.
"TAG:R,(ValueID_1;ValueID_2;ValueID_x),<TimeBegin>,<TimeEnd>"

ValueName

ValueName en el formato 'ArchiveName\Value_Name'. El parámetro <ValueName> debe indicarse entre
comillas simples.
Se admiten varias menciones, p. ej.
"TAG:R,('ValueName_1';'ValueName_2';'ValueName_x'), <TimeBegin>,<TimeEnd>"
Nota
Tenga en cuenta que los lenguajes de programación como Visual Basic, VBScript o VBA tan solo permiten
los siguientes caracteres en los nombres de variable: "A...Z", "a...z", "0...9" y "_".
Si en WinCC se utilizan caracteres especiales como "," o ";" en nombres de variable, el script se cancela
con un mensaje de error. En tal caso utilice la "ID de variable" para acceder en el script a una variable cuyo
nombre contenga caracteres especiales.

TimeBegin

Instante de inicio en el formato
'YYYY-MM-DD hh:mm:ss.msc'
Cuando se utiliza <TimeStep> debe indicarse <TimeBegin> como tiempo absoluto. No se admiten indica‐
ciones relativas ni tampoco "0000-00-00 00:00:00.000".

TimeEnd

Instante final en el formato
'YYYY-MM-DD hh:mm:ss.msc'

SQL_Clause

Criterio de filtro en sintaxis SQL:
[WHERE search_condition]
[ORDER BY {order_expression [ASC|DESC] } ]
El criterio "ORDER BY" tan solo puede utilizarse con la secuencia de clasificación "{order_expression [ASC|
DESC] }" indicada.
Ejemplo: La siguiente consulta devuelve todos los valores de las variables "ValueName_1" y "ValueNa‐
me_2" que sean menores que 50 o mayores que 100.
"TAG:R,('ValueName_1';'ValueName_2'),<TimeBegin>,<TimeEnd>, 'WHERE RealValue > 100 OR Real‐
Value < 50'"

1090

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
Parámetros

Descripción

TimeStep

Se agrupan los valores del intervalo de tiempo indicado, empezando en el instante de inicio <TimeBegin>
Formato: 'TIMESTEP=x,y'
x = intervalo en segundos
y = tipo de agregación, define el resultado del intervalo
Para el tipo de agregación son posibles los siguientes valores:
Sin interpolación

Con interpolación

Significado

1 (FIRST)
2 (LAST)
3 (MIN)
4 (MAX)
5 (AVG)
6 (SUM)
7 (COUNT)

257 (FIRST_INTERPOLATED)
258 (LAST_INTERPOLATED)
259 (MIN_INTERPOLATED)
260 (MAX_INTERPOLATED)
261 (AVG_INTERPOLATED)
262 (SUM_INTERPOLATED)
263 (COUNT_INTERPOLATED)

Primer valor
Último valor
Valor mínimo
Valor máximo
Valor medio
Suma
Cantidad de valores

"Sin interpolación" significa lo siguiente: si en el intervalo no hay ningún valor, no se devuelve ningún
resultado de intervalo.
"Con interpolación" significa lo siguiente: si en el intervalo no hay ningún valor, el valor se forma mediante
interpolación a partir de los resultados de los siguientes intervalos adyacentes no vacíos. No se realiza
extrapolación.
Ejemplo: con TIMESTEP=60,257, para cada intervalo de 60 segundos se devuelve el primer valor de ese
intervalo o bien (si en el intervalo no hay ningún valor) el valor interpolado de forma lineal a partir de los
primeros valores de los intervalos adyacentes.
"TAG:R,1,'2013-07-09 09:03:00.000','0000-00-00 00:10:00.000','TIMESTEP=60,257'"

Nota
<TimeBegin> y <TimeEnd> no pueden ser "ZERO" = '0000-00-00 00:00:00.000' los dos a la
vez.
A fin de mejorar el rendimiento, utilice en la consulta el parámetro "ValueID" en lugar de
"ValueName". "ValueID" puede consultarse en la tabla "Ficheros".
Algunas aplicaciones no pueden dividir el tiempo en pasos de 1 ms en el caso de valores de
proceso, lo cual puede dar lugar a imprecisiones.
Encontrará un ejemplo de división en milisegundos a partir del sello de tiempo de valores de
proceso en el script VB "SplitDateTimeAndMs" dentro del capítulo "Ejemplo: Lectura de un
fichero de valores de proceso con WinCC OLE DB Provider". El script también está
implementado en el proyecto de demostración "OpConPack".

Selección de un periodo absoluto
Lectura desde el instante de inicio <TimeBegin> hasta el instante final <TimeEnd>.
Ejemplo A1:
Lectura de valores de ValueID 1 desde el tiempo de inicio 9:03 h hasta el tiempo final 9:10 h.
"TAG:R,1,'2013-07-09 09:03:00.000','2013-07-09 09:10:00.000'"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1091

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

Selección de un periodo relativo
Lectura desde el comienzo del registro:
<TimeBegin> = '0000-00-00 00:00:00.000'
Lectura hasta el fin del registro:
<TimeEnd> = '0000-00-00 00:00:00.000'
<TimeBegin> y <TimeEnd> no pueden ser "ZERO" = '0000-00-00 00:00:00.000' los dos a la
vez.
Nota
Introduzca un período relativo que desee consultar en una base de datos de ficheros
conectada, en el formato siguiente:
● 0000-00-DD hh:mm:ss.msc
Si se indica un período en meses, los contenidos pueden ser erróneos, ya que un mes tiene
entre 28 y 31 días.
Ejemplo B1:
Lectura desde el instante absoluto "TimeBegin" hasta el final del registro, es decir, hasta el
último valor archivado.
<TimeBegin> = '2013-02-02 12:00:00.000', <TimeEnd> = '0000-00-00
00:00:00.000'
Ejemplo B2:
Lectura desde el instante absoluto "TimeBegin", 10 segundos hacia delante.
<TimeBegin> = '2013-02-02 12:00:00.000', <TimeEnd> = '0000-00-00
00:00:10.000'
Ejemplo B3:
Lectura desde el instante absoluto "TimeEnd", 10 segundos hacia atrás.
<TimeBegin> = '0000-00-00 00:00:10.000', <TimeEnd> = '2013-02-02
12:00:00.000'
Ejemplo B4:
Lectura de los valores de la última hora para varios ValueID (1;3;5;6), desde el instante del
último valor archivado.
"TAG:R,(1;3;5;6),'0000-00-00 01:00:00.000','0000-00-00
00:00:00.000'"
Ejemplo B5:
Lectura de los valores de los últimos cinco minutos para la variable "TAG_2" del fichero
"ArTags", desde el instante del último valor archivado.
"TAG:R,'ArTags\TAG_2','0000-00-00 00:05:00.000','0000-00-00
00:00:00.000'"

1092

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
La figura siguiente muestra un posible resultado de este ejemplo. La consulta se lleva a cabo
en el proyecto de demostración Connectivity Pack.

Varios valores de retorno para una consulta ajustando el filtro al valor de variable.
Ejemplo C1:
La siguiente consulta utiliza además el parámetro <SQL_Clause> y devuelve todos los valores
de las variables con ValueID "3" y "6" que sean menores que 50 o mayores que 100.
"TAG:R,(3;6),<TimeBegin>,<TimeEnd>,'WHERE RealValue > 100 OR
RealValue < 50'"

Consulta con el parámetro <TimeStep>
Ejemplo C2:
La siguiente consulta utiliza el parámetro <TimeStep> y devuelve todos los valores de ValueID
"1", desde el tiempo de inicio "TimeBegin" hasta 5 minutos después, en intervalos de "60"
segundos con el tipo de agregación "5" = "Valor medio sin interpolación".
"TAG:R,1,'2004-10-13 17:00:00.000','0000-00-00 00:05:00.000',
'TIMESTEP=60,5'"
El gráfico siguiente muestra el resultado de la consulta. La tabla de la izquierda muestra los
datos de fichero que se han archivado con un ciclo de 30 segundos. La tabla de la derecha
muestra el resultado de la consulta. El valor medio se calcula a partir de dos valores de fichero
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1093

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
del segundo "0" y otros dos del segundo "30" y se muestra con el primer sello de tiempo del
período de cálculo, el segundo "0".

Ejemplo C3:
La siguiente consulta utiliza el parámetro <TimeStep> y devuelve todos los valores de los
ValueID "1" y "2", desde el tiempo de inicio "TimeBegin" hasta 2 minutos después, en intervalos
de "15" segundos con el tipo de agregación "261" = "Valor medio con interpolación lineal".
"TAG:R,(1;2),'2004-10-13 17:00:00.000','0000-00-00 00:02:00.000',
'TIMESTEP=15,261'"
El gráfico siguiente muestra el resultado de la consulta. La tabla de la izquierda muestra los
datos de fichero que se han archivado con un ciclo de 30 segundos. La tabla de la derecha
muestra el resultado de la consulta. Los valores de fichero de los segundos "0" y "30" se
muestran sin ningún cambio en el resultado de la consulta, con su sello de tiempo. Para el
segundo "15", el valor interpolado linealmente se calcula a partir de los valores de fichero de
los segundos "0" y "30". Para el segundo "45", el valor interpolado linealmente se calcula a
partir de los valores de fichero del segundo "30" del mismo minuto y el segundo "0" del minuto
siguiente.

1094

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

5.4.3

Consulta para ficheros de avisos

Introducción
Con la siguiente consulta se puede acceder al fichero de avisos. Aplicando criterios de filtro se
pueden seleccionar los datos. La consulta se transfiere a la base de datos con el objeto
Command.
En el WinCC Information System, concretamente en el apartado "Trabajar con WinCC > ANSIC para crear funciones y acciones > ANSI-C Function Descriptions > Appendix > Structure
Definitions > Structure Definitions MSG_RTDATA_STRUCT", encontrará más información
sobre el estado de avisos.
En las consultas a los ficheros de avisos el resultado se agrupa por ficheros, pero no se realiza
una clasificación por todos los segmentos de fichero consultados. Si desea una clasificación,
deberá ampliar la condición de filtro según corresponda, p. ej. para una clasificación
cronológica con "ORDER BY DateTime ASC, MS ASC".

Sintaxis
ALARMVIEW:SELECT * FROM <ViewName>[WHERE <Condition>...., optional]

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1095

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

Parámetros
Parámetros

Descripción

ViewName

Nombre de la tabla de la base de datos. La tabla debe indicarse en el
idioma deseado. Así, p. ej., el parámetro "ViewName" para los cinco
idiomas europeos es como sigue:
ALGVIEWDEU: datos de fichero de avisos en alemán
ALGVIEWENU: datos de fichero de avisos en inglés
ALGVIEWESP: datos de fichero de avisos en español
ALGVIEWFRA: datos de fichero de avisos en francés
ALGVIEWITA: datos de fichero de avisos en italiano
El parámetro "ViewName" para los idiomas asiáticos es como sigue:
ALGVIEWCHT: datos de fichero de avisos en chino (simplificado)
ALGVIEWCHT: datos de fichero de avisos en chino (tradicional)
ALGVIEWJPN: datos de fichero de avisos en japonés
ALGVIEWKOR: datos de fichero de avisos en coreano
Nota
Se soportan los idiomas que estén instalados en el sistema básico
WinCC o que estén configurados en WinCC Text Library. Para más
información sobre los idiomas de consulta posibles o sobre los pará‐
metros "ViewName" correspondientes, vea los ficheros de avisos co‐
nectados en el servidor SQL, dentro de "Views". Allí se indican todos los
idiomas soportados en cada fichero junto con sus identificadores, p. ej.
"ALGVIEWENU".

Condition

Criterio de filtro, p. ej:
DateTime>'2003-06-01' AND DateTime<'2003-07-01'
DateTime>'2003-06-01 17:30:00'
MsgNr = 5
MsgNr in (4, 5)
State = 2
Con DateTime únicamente pueden utilizarse indicaciones de hora ab‐
solutas.

Ejemplo 1:
Lectura de todas las entradas del aviso número 5 que se hayan registrado después del
05.07.2003.
"ALARMVIEW:SELECT * FROM ALGVIEWENU WHERE MsgNr = 5 AND
DateTime>'2003-07-05'"
Ejemplo 2:
Lectura de todos los avisos con sello de tiempo comprendido entre el 03.07.2003 y el
05.07.2003.
"ALARMVIEW:SELECT * FROM ALGVIEWENU WHERE DateTime>'2003-07-03' AND
DateTime<'2003-07-05'"
La figura siguiente muestra un posible resultado de este ejemplo. La consulta se lleva a cabo
en el proyecto de demostración Connectivity Pack.

1096

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

5.4.4

Representación de los ficheros de avisos

Introducción
El resultado de la consulta se devuelve como Recordset. En este capítulo se describe la
estructura del Recordset para ficheros de avisos.
En el WinCC Information System, concretamente en el apartado "Trabajar con WinCC > ANSIC para crear funciones y acciones > ANSI-C Function Descriptions > Appendix > Structure
Definitions > Structure Definitions MSG_RTDATA_STRUCT", encontrará más información
sobre el estado de avisos.

Estructura Recordset
Posición

Nombre de campo

Tipo

Comentario

1

MsgNr

Integer 4 bytes

Número de aviso

2

State

Small Integer 2
bytes

Estado del aviso

3

DateTime

DateTime 8 bytes

Sello de tiempo del aviso (fecha/hora sin milise‐
gundos)

4

Ms

Small Integer 2
bytes

Sello de tiempos del aviso (milisegundos)

5

Instance

VarChar(255)

Nombre de la instancia del aviso

6

Flags1

Integer 4 bytes

(sólo uso interno)

7

PValueUsed

Integer 4 bytes

Valores de proceso utilizados

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1097

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
Posición

1098

Tipo

Comentario

de 8 a 17 de PValue1 a PVa‐
lue10

Nombre de campo

Real 8 bytes

Valor de proceso numérico 1 a 10

de 18 a
27

de PText1 a
PText10

VarChar(255)

Texto del valor del proceso 1 a 10

28

Nombre de equipo

VarChar(255)

Nombre del equipo

29

Application

VarChar(255)

Nombre de aplicación

30

Comment

VarChar(255)

Comentario

31

Username

VarChar(255)

Nombre de usuario

32

Counter

Integer 4 bytes

Contador de avisos progresivo

33

TimeDiff

Integer 4 bytes

Distancia temporal del estado "Aparecido"

34

Classname

VarChar(255)

Nombre de la categoría

35

TypeName

VarChar(255)

Nombre del tipo de aviso

36

Class

Small Integer 2
bytes

ID de la categoría

37

Tipo

Small Integer 2
bytes

ID del tipo de aviso

de 38 a
47

de Text1 a Text10

VarChar(255)

Texto del aviso 1 a 10

48

AG_NR

Small Integer 2
bytes

Número del PLC

49

CPU_NR

Small Integer 2
bytes

Número de la CPU

50

CrComeFore

Integer 4 bytes

Color de primer plano para estado "Aparecido"

51

CrComeBack

Integer 4 bytes

Color de fondo para estado "Aparecido"

52

CrGoFore

Integer 4 bytes

Color de primer plano para estado "Desapareci‐
do"

53

CrGoBack

Integer 4 bytes

Color de fondo para estado "Desaparecido"

54

CrAckFore

Integer 4 bytes

Color de primer plano para estado "Acusado"

55

CrAckBack

Integer 4 bytes

Color de fondo para estado "Acusado"

56

LocaleID

Integer 4 bytes

Ubicación de la alarma

57

Priority

Integer 4 bytes

Prioridad

58

AP_type

Integer 4 bytes

Loop in Alarm

59

AP_name

VarChar(255)

Nombre de función Loop in Alarm

60

AP_PAR

VarChar(255)

Imagen Loop in Alarm

61

InfoText

VarChar(255)

Texto informativo

62

TxtCame

VarChar(255)

Texto aparecido

63

TxtWent

VarChar(255)

Texto desaparecido

64

TxtCameNWent

VarChar(255)

Texto aparecido y desaparecido

65

TxtAck

VarChar(255)

Texto acusado

66

AlarmTag

Integer 4 bytes

Variable de aviso

67

AckType

Small Integer 2
bytes

Tipo de acuse

68

Params

Integer 4 bytes

Parámetros

69

Servername

VarChar(255)

Nombre del servidor

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

5.4.5

Consulta para ficheros de usuario

Introducción
Con la siguiente consulta se puede acceder a ficheros de usuario WinCC a través de MS OLE
DB Provider. El acceso puede ser de lectura y de escritura, para evaluar los datos registrados
o también para modificarlos y guardarlos.
Aplicando criterios de filtro se pueden seleccionar los datos. La consulta se transfiere a la base
de datos con el objeto Command.
Nota
Cuando acceda a ficheros de usuario WinCC a través de MS OLE DB Provider, tenga en
cuenta lo siguiente:
● Asegúrese de que no es posible un acceso de escritura simultáneo a través de MS OLE DB
Provider y de WinCC. De este modo evitará incoherencias en los ficheros.
● Las modificaciones realizadas a través de MS OLE DB Provider no se muestran en WinCC
Runtime hasta después de haber seleccionado otra vez el User Archive Table Control
mediante un cambio de imagen. Al hacer esto los datos actuales de los ficheros de usuario
se leen de nuevo.
● Los ficheros de usuario modificados a través de MS OLE DB Provider no se sincronizan en
un sistema redundante.
● Tenga en cuenta que las actualizaciones WinCC pueden provocar cambios en el esquema
de la base de datos. Estos cambios también pueden ocurrir al instalar hotfixes y service
packs. En tal caso deberá adaptar según corresponda el acceso de lectura y el de escritura.

Sintaxis
Lectura de valores
SELECT * FROM UA#<ArchiveName>[WHERE <Condition>...., optional]
Escritura de valores
UPDATE UA#<ArchiveName> SET UA#<ArchiveName>.<Column_n> = <Value>
[WHERE <Condition>...., optional]
Inserción de un registro
INSERT INTO UA#<ArchiveName> (ID,<Column_1>,<Column_2>,<Column_n>)
VALUES (<ID_Value>, Value_1,Value_2,Value_n)
Borrado de un registro
DELETE FROM UA#<ArchiveName> WHERE ID = <ID_Number>

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1099

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

Parámetros
Parámetros

Descripción

ArchiveName

Nombre del fichero de usuario

Condition

Criterio de filtro, p. ej.:
LastAccess>'2004-06-01' AND LastAccess<'2004-07-01'
DateTime>'2004-06-01 17:30:00'
ID = 5
ID > 3

Ejemplo 1:
Lectura de todos los datos del fichero de usuario "Test".
SELECT * FROM UA#Test
Ejemplo 2:
Lectura de todos los datos del fichero de usuario "Test" que se hayan modificado entre el
01.06.2004 y el 01.07.2004.
SELECT * FROM UA#Test WHERE LastAccess>'2004-06-01' AND
LastAccess<'2004-07-01'
Ejemplo 3:
Escritura del valor 'New_String' en el campo F_STRING de la ID 3.
UPDATE UA#TEST SET F_STRING = 'New_String' WHERE ID = 3
Ejemplo 4:
Inserción de un registro con la ID 100.
INSERT INTO UA#Test (ID,F_Integer,F_Float,F_Double,F_String) VALUES
(100,10,'10.0','AAAA')
Ejemplo 5:
Borrado de un registro con la ID 100.
DELETE FROM UA#Test WHERE ID = 100

1100

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

5.4.6

Configuración de acceso con el asistente "SQL Server Import/Export"

Introducción
WinCC OLE DB Provider permite acceder a bases de datos WinCC utilizando el asistente
"SQL Server Import/Export". Con ayuda del asistente, los datos descomprimidos pueden
depositarse en una base de datos intermedia a la que luego se podrá acceder mediante
consultas SQL estándar.
● En los equipos WinCC es posible acceder de forma local o remota a las bases de datos
Runtime y a las bases de datos de ficheros.
● En el caso de los servidores de ficheros de largo plazo, tan solo es posible acceder de forma
local o remota a las bases de datos de ficheros, ya que dichos servidores no poseen una
base de datos Runtime.

Procedimiento
1. Arranque "SQL Server Management Studio" y seleccione la base de datos que desee.
2. En el menú contextual, elija la base de datos "Tasks > Export Date...".
Se abre el asistente SQL Server Import/Export.
3. Configure el origen de los datos.
Haga clic en "Next". En el campo "Data source", seleccione la entrada "WinCC OLE DBProvider for Archives". Haga clic en el botón "Properties...". Se abrirá el cuadro de diálogo
"Data Link Properties".
4. Configure correctamente el proveedor.
En el campo "Data Source" introduzca el texto siguiente como origen de los datos:
".\WinCC". La entrada para "Location" queda libre.
En el campo "Enter the initial catalog to use" introduzca la base de datos Runtime que
desee o el nombre simbólico que se haya configurado en "Archive Connector Tool". La
notación correcta del nombre se encuentra en "SQL Server Management Studio", en el
directorio "Databases". También existe la posibilidad de introducir la base de datos
"CC_ExternalBrowsing" para datos Runtime y datos de fichero.
Haga clic en la pestaña "Advanced". Para la propiedad "Connect timeout", elija el tiempo
que desee en segundos. En la propiedad "Access permissions", marque únicamente la
casilla de verificación "ReadWrite".
Pulse el botón "Aceptar" para cerrar el cuadro de diálogo.
Nota
A fin de mejorar el rendimiento en caso de acceso local, en el campo "Data Source"
introduzca "<Nombre del equipo>\WinCC" en lugar de ".\WinCC".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1101

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
5. Configure el destino de los datos.
Haga clic en "Next". En el campo "Destination", seleccione, p. ej., la entrada "SQL Native
Client". Como nombre de servidor puede utilizarse cualquier instancia de servidor SQL. En
el campo "Database" puede introducirse cualquier base de datos de destino creada por el
usuario.
Nota
El campo "Database" también puede dejarse vacío. En ese caso no se crean tablas de
destino.
6. Configure las condiciones de consulta.
Haga clic en "Next". Seleccione la opción "Write a query to specify the data to transfer".
Haga clic en "Next". Introduzca la condición de consulta que desee. Por ejemplo, la consulta
"Tag:R,1,'0000-00-00 00:10:00.000','0000-00-00 00:00:00.000'" sirve para leer en el
ValueID "1" los valores de los últimos 10 minutos de archivación. Para más información
sobre sintaxis, consulte el capítulo "Consulta para ficheros de valores de proceso".
7. Cierre el asistente y exporte los datos.
Haga clic en "Next" y luego en "Finish", en la última página del asistente. El asistente
exporta los datos a la base de datos de destino. Si la exportación de datos se lleva a cabo
con éxito, los datos no comprimidos se depositan en la base de datos de destino en una
tabla nueva llamada "dbo.Query". Es posible cambiar el nombre de la tabla. Aunque no
cambie el nombre de la tabla, al realizar una nueva exportación los datos no se
sobrescriben. El asistente crea nuevas tablas con los nombres "Query1", "Query2", etc.

5.4.7

Creación de las condiciones para utilizar los Reporting Services

Introducción
Con WinCC se pueden utilizar los Reporting Services de SQL Server. Así, los informes
creados con Microsoft Visual Studio y que contienen datos de fichero pueden compartirse en
la red.

Requisitos
Para utilizar los Reporting Services con WinCC deben cumplirse los siguientes requisitos de
software:
● Internet Information Services
● Reporting Services de MS SQL Server 2016 SP2
Nota
Siga los pasos de instalación en el orden indicado.

1102

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

Instalación de Internet Information Services
1. Elija "Configuración > Panel de control > Software".
2. En el lado izquierdo, haga clic en el botón "Agregar o quitar componentes de Windows".
3. En el cuadro de diálogo "Asistente para componentes de Windows", marque la casilla de
verificación "Servicios de Información de Internet (IIS)".

Instalación de Reporting Services de MS SQL Server 2014
Los Reporting Services se instalan desde el DVD de WinCC o desde el directorio donde se
encuentren, dentro del sistema de archivos.
1. Elija "Configuración > Panel de control > Programas y características".
2. Seleccione "Microsoft SQL Server 2014" y haga clic en "Desinstalar/Cambiar".
3. Seleccione "Agregar" y la ruta "InstData > SQL > SQL2016STD > setup" en el programa de
instalación de WinCC.
Se abre el asistente de instalación de Microsoft SQL Server. Siga las instrucciones.
4. En "Tipo de instalación", seleccione la opción "Agregar características a una instancia de
SQL Server 2016 existente" y la instancia "WINCC".
Las herramientas de administración y, con ello, las SQL Server Data Tools ya están
instaladas.
5. Active "Reporting Services - Nativo" y siga las instrucciones.
Los Reporting Services se instalan.
6. Inicie el Administrador de configuración de Reporting Services y configure los Reporting
Services.

Configuración de Internet Information Services
1. Abra la administración de equipos.
2. En "Servicios y Aplicaciones", seleccione el "Administrador de Internet Information
Services (IIS)".
3. Abra la característica "Autenticación" y seleccione la entrada "Editar" en el menú contextual
de "Autenticación anónima".
4. Elija la opción "Usuario específico" e introduzca el nombre de usuario y la contraseña.
El nombre de usuario tiene el formato siguiente: <dominio o nombre del equipo>\<usuario>
Nota
Recomendamos que reinicie el equipo una vez concluidas las instalaciones.

Resultado
Con esto se han creado las condiciones para utilizar los Reporting Services. Ahora puede
elaborar informes y compartirlos vía Internet.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1103

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero

5.4.8

Consulta de los datos de fichero

Introducción
Las consultas se transfieren a la base de datos con el objeto Command. Un parámetro
importante a este respecto, además del ConnectionString, es el CommandText. El
CommandText transfiere la consulta. El resultado se devuelve como Recordset.
Nota
Rango de tiempo al consultar los ficheros para avisos y valores de proceso
Si al consultar los ficheros para avisos o valores de proceso se selecciona un rango de tiempo
en el que no hay ningún aviso o ningún valor, no se muestra ninguna advertencia ni se indica
de ningún modo este estado. Si quiere que este estado se indique de algún modo, el usuario
debe realizar un tratamiento de errores.
Una versión simple de este tratamiento de errores se muestra en el script de ejemplo del tema
"Ejemplo: Lectura de datos de fichero de avisos con WinCC OLE DB Provider".
En los ejemplos siguientes se crean distintos objetos Command y se transfiere la consulta
como CommandText.
Entre los siguientes ejemplos de estructura para CommandText se encuentra también el
ConnectionString, cuya estructura se describe en "Creación de una conexión a la base de
datos de ficheros".

Estructura del CommandText
Ficheros de valores de proceso:
Set oRs = CreateObject("ADODB.Recordset")
Set oCom = CreateObject("ADODB.Command")
oCom.CommandType = 1
Set oCom.ActiveConnection = conn
oCom.CommandText = "TAG:R,'PVArchive\Tag1','0000-00-00
00:10:00.000','0000-00-00 00:00:00.000'"
Ficheros de avisos
Set oRs = CreateObject("ADODB.Recordset")
Set oCom = CreateObject("ADODB.Command")
oCom.CommandType = 1
Set oCom.ActiveConnection = conn
oCom.CommandText = "ALARMVIEW:Select * FROM AlgViewEnu"
Fichero de usuario
Set oRs = CreateObject("ADODB.Recordset")

1104

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.4 Consulta de los datos de fichero
Set oCom = CreateObject("ADODB.Command")
oCom.CommandType = 1
Set oCom.ActiveConnection = conn
oCom.CommandText = "SELECT * FROM UA#Test"

Especificación de la ubicación del RecordSet
A fin de especificar la ubicación del RecordSet para la consulta de datos de fichero, es
necesario utilizar el valor "3" para la propiedad "CursorLocation", p. ej."conn.CursorLocation =
3". El RecordSet se crea en el cliente.

5.4.9

Representación de los ficheros de usuario

Introducción
Cada fichero de usuario se compone de campos de datos con propiedades editables. Cada
campo de datos posee propiedades como nombre, alias, tipo, longitud, valor, etc. Los campos
de datos y las propiedades se representan en Editor User Archives en filas y columnas. Por esa
razón se habla también de filas en lugar de campos de datos, y de columnas en lugar de
propiedades.
A continuación se describe a modo de ejemplo la estructura del fichero de usuario "Test". Este
fichero de usuario se encuentra en el proyecto de demostración Connectivity Pack
"OPConPack" en el directorio "\Samples\Connectivity Pack\DemoProject".

Estructura del fichero de usuario "Test"
Nombre de campo

Tipo

Comentario

ID

Integer

Identificación unívoca del valor

F_Integer

Integer

Ejemplo para valor

F_Float

Float

Ejemplo para valor

F_Double

Double

Ejemplo para valor

F_String

String

Ejemplo de cadena de caracteres

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1105

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.5 Funciones de análisis para avisos y valores de proceso

5.5

Funciones de análisis para avisos y valores de proceso

5.5.1

Funciones de análisis para avisos y valores de proceso

Introducción
WinCC dispone de varias funciones de análisis para la consulta de avisos y valores de proceso
archivados.
Para el análisis, una consulta comienza con parámetros para varias funciones de agregación.
Las funciones de agregación se calculan en el Connectivity Pack Server y al cliente tan solo se
transfiere el resultado.
En "Creación de una conexión a la base de datos de ficheros" y "Consulta de los datos de
fichero" encontrará más información sobre los parámetros CommandText y ConnectionString,
utilizados en los ejemplos siguientes.

Funciones de análisis para avisos
La consulta de análisis para ficheros de avisos devuelve un Recordset específico que contiene
para cada aviso los datos de configuración y Runtime junto con los resultados de las funciones
de agregación.
El Recordset devuelto para las consultas de análisis de ficheros de avisos no es idéntico al
Recordset para consultas normales de ficheros de avisos. Para más información, consulte el
capítulo "Representación de ficheros de avisos para consultas de análisis".
Para cada aviso se calculan las siguientes funciones de agregación. Los nombres de columna
en la lista de resultados están entre paréntesis.
● Suma frecuencia de aviso ("FreqOfAlarm")
● Duración acumulada desde "Aviso aparecido" hasta "Aviso desaparecido"
("CumDurationComeGo")
● Duración media desde "Aviso aparecido" hasta "Aviso desaparecido"
("AvDurationComeGo")
● Duración acumulada desde "Aviso aparecido" hasta primer acuse
("CumDurationComeAckn1")
● Duración media desde "Aviso aparecido" hasta primer acuse ("AvDurationComeAckn1")
● Duración acumulada desde "Aviso aparecido" hasta segundo acuse
("CumDurationComeAckn2")
● Duración media desde "Aviso aparecido" hasta segundo acuse ("AvDurationComeAckn2")
● Duración acumulada desde "Aviso aparecido" hasta "Aviso aparecido"
("CumDurationComeCome")
● Duración media desde "Aviso aparecido" hasta "Aviso aparecido"
("AvDurationComeCome")

1106

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.5 Funciones de análisis para avisos y valores de proceso

Nota
Tipo de datos "String" no soportado
Si utiliza estas funciones con el tipo de datos "String", la función de análisis devuelve "0" como
resultado.
Sintaxis
Para calcular las funciones de agregación para avisos se transfiere el siguiente comando a
WinCC OLE DB Provider.
"AlarmHitView: SELECT * FROM <ViewName>[WHERE <Condition>]"
Donde:
<ViewName> = nombre de la tabla de la base de datos en el idioma deseado; p. ej.,
ALGVIEWENU para el inglés.
[WHERE <Condition>] = criterio de filtro opcional como condición WHERE en sintaxis SQL.
Para más información sobre la sintaxis de los parámetros, consulte el capítulo "Consulta para
ficheros de avisos".
Ejemplo
El ejemplo extrae de la base de datos "ALGVIEWENU" los resultados de las funciones de
agregación para todos los avisos que hay en el rango de tiempo 15.07.2004 12:00 h hasta
12:15 h.
ConnectionString:
"Provider=WinCCOLEDBProvider.1;Catalog=CC_OpenArch_03_05_27_14_11_46
R;Data Source=.\WinCC"
CommandText:
"AlarmHitView: SELECT * FROM ALGVIEWENU WHERE DateTime>'2004-07-15
12:00:00' AND DateTime<'2004-07-15 12:15:00'"

Funciones de análisis para valores de proceso
El análisis para valores de proceso devuelve el resultado de una función de agregación. En una
consulta tan solo se puede calcular una función de agregación.
Para los valores de proceso están disponibles las siguientes funciones de agregación.
● MIN (mínimo)
● MAX (máximo)
● AVG (promedio)
● SUM (suma de todos los valores)
● COUNT (cantidad de valores de proceso)
● COUNTER (cantidad de entradas con el valor "1", p. ej. consulta de variables binarias)
● STDEV (desviación estándar estadística)
● VAR (varianza estadística)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1107

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.5 Funciones de análisis para avisos y valores de proceso

Nota
Variables de texto no soportadas
En una consulta de variables de texto (juego de caracteres de 8 bits/16 bits) con TAG_EX:R la
función de análisis devuelve "0" como resultado.
Sintaxis
Para calcular una función de agregación para valores de proceso se transfiere una consulta a
MS SQL OLE DB Provider y se ejecuta el procedimiento "cp_TagStatistic" de la base de datos
"SQL Server Master".
Nota
En caso de acceso transparente, las funciones de análisis para valores de proceso tan solo
funcionan con la Connectivity Station en un cliente con proyecto propio.
Con el procedimiento "cp_TagStatistic" se transfieren los siguientes parámetros.
cp_TagStatistic @P1,@P2,@P3[,@P4]
Donde:
"@P1" = nombre de la base de datos (p. ej. base de datos WinCC Runtime o el nombre
simbólico del directorio donde se encuentren los ficheros trasvasados). En caso de acceso
transparente, en lugar del nombre de la base de datos debe utilizarse el nombre del proyecto
WinCC.
"@P2" = string de WinCC OLE DB Provider para valores de proceso.
"@P3" = función de agregado deseada.
"@P4" = <Nombre simbólico del equipo>::\WinCC (solo es necesario en caso de acceso
transparente).
Para más información sobre la sintaxis de los parámetros "@P1" y "@P2", consulte el capítulo
"Consulta para ficheros de valores de proceso".
Nota
Funciones de análisis para valores de proceso con nombres de variables de fichero asiáticos
Si los nombres de variables de fichero utilizados para el cálculo de una función de análisis
contienen juegos de caracteres asiáticos, es necesario adaptar la llamada para el juego de
caracteres Unicode.
Anteponga el prefijo "N'" a los dos primeros parámetros.
Ejemplo: cp_TagStatistic N'TestDB',N'TAG:R,17,''2004-05-17 12:00:00'',''2004-05-17
13:00:00''','AVG'
Ejemplo
Esta consulta extrae del ValueID "17" de la base de datos "TestDB" el valor medio de los
valores de proceso en el rango de tiempo 17.05.2004 12:00 h hasta 13:00 h.
ConnectionString:

1108

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.5 Funciones de análisis para avisos y valores de proceso
"Provider=SQLNCLI11;Integrated Security=SSPI;Persist Security
Info=False;Initial Catalog=master ;Data Source=.\WinCC"
CommandText:
"cp_TagStatistic 'TestDB','TAG:R,17,''2004-05-17
12:00:00'',''2004-05-17 13:00:00''','AVG'"
Ejemplo para acceso transparente
Esta consulta extrae del ValueID "7" del proyecto"WinCCProj" el valor medio de los valores de
proceso en el rango de tiempo 14.09.2006 10:00 h hasta 11:00 h.
ConnectionString:
"Provider=SQLNCLI11;Integrated Security=SSPI;Persist Security
Info=False;Initial Catalog=master ;Data Source=.\WinCC"
CommandText:
"cp_TagStatistic 'WinCCProj','TAG:R,7,''2006-09-14
10:00:00'',''2006-09-14 11:00:00''','AVG','Symb_WinCCProj::\WinCC'"

5.5.2

Representación de ficheros de avisos con consultas de análisis

Introducción
La consulta de análisis para ficheros de avisos devuelve un Recordset específico que contiene
para cada aviso los datos de configuración y Runtime junto con los resultados de las funciones
de agregación.
Este Recordset no es idéntico al Recordset de las consultas normales de ficheros de avisos.

Estructura del Recordset para el análisis de ficheros de avisos
Si se realiza una consulta de ficheros de avisos con la función de análisis "AlarmHitView", el
resultado se devuelve como Recordset con la siguiente estructura.
Posición

Nombre de campo

Tipo

Comentario

1

MsgNr

Integer 4 bytes

Número de aviso

2

State

Small Integer 2
bytes

Estado del aviso

3

DateTime

DateTime 8
bytes

Sello de tiempo del aviso (fecha/hora sin mili‐
segundos)

4

Ms

Small Integer 2
bytes

Sello de tiempos del aviso (milisegundos)

5

Instance

VarChar(255)

Nombre de la instancia del aviso

6

Flags1

Integer 4 bytes

(sólo uso interno)

7

Counter

Integer 4 bytes

Contador de avisos progresivo

8

TimeDiff

Integer 4 bytes

Distancia temporal del estado "Aparecido"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1109

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.5 Funciones de análisis para avisos y valores de proceso

1110

Posición

Nombre de campo

Tipo

Comentario

9

Classname

VarChar(255)

Nombre de la categoría

10

TypeName

VarChar(255)

Nombre del tipo de aviso

11

Class

Small Integer 2
bytes

ID de la categoría

12

Tipo

Small Integer 2
bytes

ID del tipo de aviso

de 13 a
22

de Text1 a Text10

VarChar(255)

Texto del aviso 1 a 10

23

AG_NR

Small Integer 2
bytes

Número del PLC

24

CPU_NR

Small Integer 2
bytes

Número de la CPU

25

CrComeFore

Integer 4 bytes

Color de primer plano para estado "Apareci‐
do"

26

CrComeBack

Integer 4 bytes

Color de fondo para estado "Aparecido"

27

CrGoFore

Integer 4 bytes

Color de primer plano para estado "Desapa‐
recido"

28

CrGoBack

Integer 4 bytes

Color de fondo para estado "Desaparecido"

29

CrAckFore

Integer 4 bytes

Color de primer plano para estado "Acusado"

30

CrAckBack

Integer 4 bytes

Color de fondo para estado "Acusado"

31

Priority

Integer 4 bytes

Prioridad

32

AP_type

Integer 4 bytes

Loop in Alarm

33

AP_name

VarChar(255)

Nombre de función Loop in Alarm

34

AP_PAR

VarChar(255)

Imagen Loop in Alarm

35

InfoText

VarChar(255)

Texto informativo

36

TxtCame

VarChar(255)

Texto aparecido

37

TxtWent

VarChar(255)

Texto desaparecido

38

TxtCameNWent

VarChar(255)

Texto aparecido y desaparecido

39

TxtAck

VarChar(255)

Texto acusado

40

AckType

Small Integer 2
bytes

Tipo de acuse

41

FreqOfAlarm

Integer 4 bytes

Suma frecuencia de aviso

42

CumDurationComeGo

Integer 4 bytes

Duración acumulada desde "Aviso apareci‐
do" hasta "Aviso desaparecido"

43

AvDurationComeGo

Real 8 bytes

Duración media desde "Aviso aparecido" has‐
ta "Aviso desaparecido"

44

CumDurationCo‐
meAckn1

Integer 4 bytes

Duración acumulada desde "Aviso apareci‐
do" hasta primer acuse

45

AvDurationComeAckn1

Real 8 bytes

Duración media desde "Aviso aparecido" has‐
ta primer acuse

46

CumDurationCo‐
meAckn2

Integer 4 bytes

Duración acumulada desde "Aviso apareci‐
do" hasta segundo acuse

47

AvDurationComeAckn2

Real 8 bytes

Duración media desde "Aviso aparecido" has‐
ta segundo acuse

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.6 Principios básicos de OLE DB

5.6

Posición

Nombre de campo

Tipo

Comentario

48

CumDuration ComeCo‐
me

Integer 4 bytes

Duración acumulada desde "Aviso apareci‐
do" hasta "Aviso aparecido"

49

AvDurationComeCome

Real 8 bytes

Duración media desde "Aviso aparecido" has‐
ta "Aviso aparecido"

Principios básicos de OLE DB

Introducción
La interfaz de OLE DB proporcionada por WinCC y el proveedor de bases de datos le ofrecen
la posibilidad de acceder a ficheros de valores de proceso y ficheros de avisos.

OLE DB
OLE DB es un estándar abierto que permite acceder rápidamente a distintas bases de datos.
Aquí no importa si la base de datos es relacional o no.
La conexión entre el nivel de OLE DB y la base de datos se establece mediante un proveedor
de bases de datos.
Existen diversos fabricantes que ofrecen interfaces y proveedores de OLE DB.

WinCC OLE DB Provider
WinCC OLE DB Provider permite acceder directamente a los datos de fichero WinCC que
están almacenados en la base de datos del servidor MS SQL. Dependiendo de la
configuración, los datos de proceso de WinCC se guardan comprimidos. WinCC OLE DB
Provider posibilita también un acceso transparente a estos datos.
&OLHQW

$FFHVRUHPRWRD
WUDY«VGH:LQ&&2/(
'%3URYLGHU

:LQ&&573URIHVVLRQDO

%DVHGH
GDWRV:LQ&&

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1111

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.7 WinCC OLE DB Provider

Microsoft OLE DB
Con Microsoft OLE DB solo se puede acceder a WinCC User Archives.
Para acceder a WinCC User Archives a través de Microsoft OLE DB se necesita una licencia
Connectivity Pack en el equipo WinCC a cuyos User Archives se vaya a acceder. Para el
acceso remoto a la base de datos del servidor MS SQL se necesita la licencia WinCC Client
Access Licence.
Para impedir accesos no autorizados a través de MS OLE DB, el administrador de las bases
de datos puede adoptar las medidas que considere apropiadas. Encontrará más información
al respecto en el capítulo "Ajustes de seguridad para el acceso a bases de datos SQL a través
de MS OLE DB".
Nota
Con Microsoft OLE DB únicamente está comprobado y autorizado el acceso a WinCC User
Archives, no a ficheros de avisos ni ficheros de valores de procesos.
Para acceder a ficheros de avisos y ficheros de valores de procesos, utilice WinCC OLE DB
Provider.

5.7

WinCC OLE DB Provider

Introducción
Con WinCC OLE DB Provider se puede acceder a los ficheros de valores de proceso y los
ficheros de avisos.
Asimismo, WinCC OLE DB Provider ofrece funciones de análisis como mínimo y máximo de
variables de fichero.

Acceso a datos de fichero
El acceso a datos de fichero puede llevarse a cabo con diferentes combinaciones:

Acceso simultáneo a bases de datos de ficheros y bases de datos Runtime
La función "ArchiveMonitor" agrupa los datos de las bases de datos Runtime y de las bases de
datos de ficheros del proyecto WinCC activo en una base de datos SQL.
La base de datos SQL se llama "CC_ExternalBrowsing" y crea las vistas "AMT" y "ARCHIVE".
Las vistas comprenden toda la información necesaria para WinCC OLE DB Provider
Dado que estas vistas proporcionan cualquier información necesaria para WinCC OLE DB
Provider, el proveedor puede utilizar la base de datos "CC_ExternalBrowsing" como origen de
los datos.
Al desactivar WinCC Runtime se borran las vistas que se han creado adicionalmente en
"CC_ExternalBrowsing".

1112

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.8 Instalación
Debido a que en un servidor de ficheros no existe ninguna base de datos Runtime no es posible
acceder a las bases de datos de ficheros a través de la base de datos "CC_ExternalBrowsing".

WinCC OLE DB Provider como "Linked Server"
Nota
En la configuración de WinCC OLE DB Provider como "Linked Server" se debe seleccionar en
el cuadro de diálogo "Linked Server Properties" la entrada "WinCC OLE DB-Provider for
Archives" del campo "Provider Name".
En el cuadro de diálogo "Provider Options" se debe activar la casilla de verificación
"AllowInProcess".
Encontrará más información al respecto aquí: "SQL Server Books Online" en "Configuring OLE
DB Providers for Distributed Queries".
WinCC OLE DB Provider puede agregarse a la lista de los "Linked Servers" del servidor SQL.
Esto es posible, independientemente de si la base de datos está guardada de modo local o
remote .
Ejemplo:
WINCC OLE DB Provider como Linked Server con el nombre de servidor "WinCC":
select min(realvalue) from openquery(WINCC,'Tag:R,1,''0000-00-00
00:01:00.000'',''0000-00-00 00:00:00.000''')
select * from openquery(WINCC,'Tag:R,1,''0000-00-00
00:01:00.000'',''0000-00-00 00:00:00.000''')

5.8

Instalación

Instalación de WinCC OLE DB-Provider
WinCC OLE DB-Provider Se instala automáticamente durante la instalación de WinCC.
Una vez instalado WinCC, WinCC OLE DB Provider se encuentra disponible para los
siguientes sistemas:
● Estación de ingeniería con WinCC
● Panel con WinCC Runtime Professional

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1113

Acceso a datos de fichero a través de WinCC OLE DB Provider
5.8 Instalación

1114

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1

Trabajar con recetas

6.1.1

Principios básicos

6.1.1.1

Definición y campos de aplicación

6

Introducción
En las recetas se recogen los datos afines, p. ej. las parametrizaciones de la máquina, o bien
los datos de producción.
Ejemplos:
● Parametrizaciones de máquinas necesarias para conmutar a la fabricación de una variante
de producto diferente.
● Ingredientes que se combinan en diferentes proporciones para crear distintos productos
finales.
Una receta se caracteriza por una estructura de datos fija. Durante la configuración se define
la estructura de una receta. Una receta contiene registros que se distinguen por sus valores,
pero no por su estructura.
Las recetas se almacenan en el panel de operador o en un medio de almacenamiento externo.
Básicamente, un registro de receta se transfiere por completo en un paso de trabajo entre el
panel de operador y el controlador. Además, se puede importar datos de producción en
runtime a través de un archivo CSV.
Nota
Restricciones de importación/exportación
No es posible exportar ni importar recetas en los siguientes paneles de operador:
● Basic Panels
Los datos de receta completos, pero no registros de receta individuales, se pueden exportar e
importar en formato CSV con ProSave y transferir al panel de operador. Además, se mantiene
el runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1115

Trabajar con recetas
6.1 Trabajar con recetas

Utilización de recetas
Para el uso de recetas se distinguen p. ej. los siguientes casos:
● Producción manual
El usuario selecciona los datos de receta deseados y los visualiza en el panel de operador.
En caso necesario, modifica los datos de receta y los guarda en el panel de operador.
Luego transfiere los datos de receta al controlador.
● Producción automática
El programa de control inicia la transferencia de los datos de receta entre el controlador y
el panel de operador. El usuario también puede iniciar la transferencia realizando una
acción en el panel de operador. La producción cambia entonces de forma automática. No
es imprescindible visualizar ni modificar los datos.
● Modo "Teach-In"
El usuario optimiza manualmente los datos de producción en la instalación, p. ej. las
posiciones de los ejes o los niveles de llenado. Los valores calculados se transfieren al
panel de operador y se guardan en un registro de receta. Posteriormente, el usuario
retransfiere al controlador los datos de receta almacenados.

Introducir y modificar los datos de receta
El usuario introduce los datos en los registros de receta y los modifica en caso necesario. Para
ello dispone de varias posibilidades, a saber:
● Introducir los datos durante la configuración
Si los datos de producción ya están definidos, introdúzcalos ya durante la configuración de
la receta en el editor "Recetas".
● Introducir los datos en runtime
Si los datos de producción se deben modificar con frecuencia, modifíquelos directamente
en runtime:
– El usuario introduce los datos directamente en el panel de operador.
– El usuario configura los parámetros directamente en la máquina. Posteriormente,
transfiere los datos del controlador al panel de operador y los guarda en la receta.

1116

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

6.1.1.2

Ejemplos de utilización de recetas
Las recetas se utilizan p. ej. en la industria manufacturera y en la ingeniería mecánica. En los
ejemplos siguientes se describen casos de aplicación típicos que se pueden realizar con
ayuda de las funciones de recetas de WinCC:
● Parametrización de máquinas
La parametrización de máquinas en la industria de procesos es uno de los campos de
aplicación de las recetas. Una máquina corta tableros de madera a un tamaño determinado
y realiza una serie de taladros. Dependiendo del tamaño del tablero, las guías y los taladros
se desplazan a nuevas posiciones. Los datos de posición necesarios están guardados en
forma de registros de receta. En modo "Teach-In", reparametrice la máquina p. ej. cuando
se deba mecanizar un nuevo tamaño de plancha de madera. Transfiera los nuevos datos
de posición directamente del controlador al panel de operador y guárdelos en un registro
nuevo.
● Producción por lotes
Un ejemplo adicional de aplicación de recetas lo constituye la producción por lotes en la
industria alimentaria: En una planta embotelladora de zumos de fruta se fabrican zumos,
néctares y bebidas de distintos sabores. Los ingredientes utilizados son siempre idénticos,
diferenciándose sólo por la proporción de la mezcla. Cada sabor equivale a una receta.
Cada proporción de mezcla equivale a un registro. Todos los datos necesarios para una
proporción de mezcla se pueden transferir al control de la máquina pulsando un botón.

6.1.1.3

Estructura de las recetas

Introducción
La estructura básica de una receta se representa tomando como ejemplo una planta
embotelladora de zumos de fruta.
En un panel de operador pueden existir varias recetas diferentes. Una receta se puede
comparar p. ej. con un fichero que contiene varias fichas. El fichero comprende diversas
variantes de fabricación de una familia de productos. Los datos de una variante de fabricación
se recogen íntegramente en una ficha.
Ejemplo:
En una planta embotelladora de bebidas se requiere una receta para las distintas variantes de
bebidas. Las variantes de bebidas son p. ej. "Refresco", "Zumo" y "Néctar".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1117

Trabajar con recetas
6.1 Trabajar con recetas

Receta
La receta contiene todos los registros de receta, p. ej. para las distintas variantes de refrescos:


=XPR
$JXD
$]¼FDU
$URPD
&RQFHQWUDGR

5
30
23
80

5HJLVWURGHUHFHWD

1«FWDU
$JXD
$]¼FDU
$URPD
&RQFHQWUDGR

15
35
20
70

(OHPHQWRGHUHFHWD

5HFHWD

Registros de receta
Cada ficha representa un registro de receta necesario para la fabricación de una variante del
producto.

Elementos de las recetas
Todas las fichas de un cajón tienen la misma estructura. Todas las fichas contienen campos
para los diversos ingredientes. Cada campo equivale a un elemento de la receta. Por tanto,
todos los registros de una receta contienen elementos idénticos. No obstante, los registros se
diferencian en el valor de los elementos individuales.
Ejemplo:
Todos los refrescos contienen los ingredientes siguientes:
● Agua
● Concentrado
● Azúcar
● Aroma
No obstante, los registros correspondientes a las variantes "Refresco", "Zumo" y "Néctar"
difieren p. ej. en la cantidad de azúcar utilizada para su fabricación.

1118

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

6.1.1.4

Visualización de las recetas

Introducción
Las recetas se pueden visualizar de las maneras siguientes:
● Visor de recetas
● Imagen de receta

Entradas en el visor de recetas y en la imagen de receta
Los valores de una receta se modifican en la imagen de receta o en el visor de recetas p. ej.
para influir en el proceso de fabricación, o bien en una máquina.
El visor de recetas y la imagen de receta pueden tener la misma funcionalidad para el manejo
de recetas. Se distinguen en lo siguiente:
● Posibilidades de representación
● Manejo
● Posibilidades de transferencia de los datos entre el controlador y el panel de operador

Visor de recetas
El visor de recetas es apropiado para representar recetas simples.
El visor de recetas es un objeto de manejo y visualización de WinCC que se utiliza para
gestionar los registros de receta. El visor de recetas siempre forma parte de una imagen. El
visor de recetas muestra registros de receta en forma de tabla. La representación y las
posibilidades de manejo se adaptan a las necesidades individuales.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1119

Trabajar con recetas
6.1 Trabajar con recetas
Si las recetas del proyecto se editan en un visor de recetas, los valores se guardan en registros
de receta. Los valores se transfieren del panel de operador al controlador tan solo cuando se
acciona el objeto de manejo correspondiente.

Imagen de receta
La imagen de receta es una imagen personalizada que contiene lo siguiente:
● Campos de entrada para variables de receta
● Objetos para manejar las recetas, p. ej. "GuardarRegistro"
$JXD



O

&RQFHQWUDGR



O

$]¼FDU



NJ

$URPD



O

1RPEUHGHUHFHWD
1DUDQMD

1|


1RPEUHGHUHJLVWUR
1«FWDU

1|


*XDUGDU

'DWRVGH3/&

&DUJDU

'DWRVHQ3/&

La imagen de receta resulta apropiada en los casos siguientes:
● Recetas extensas
● Asignación de los campos de la receta a la representación gráfica de la respectiva área de
la instalación
● Distribución de los datos de la receta en varias imágenes
Nota
Dependiendo de la configuración, los valores de las variables de la receta se transfieren
entre el controlador y la imagen de receta en los momentos siguientes:
● En cuanto se producen cambios
● Cuando se accione el objeto de manejo correspondiente

Sincronizar el visor de recetas y la imagen de receta
Si las recetas se editan tanto en un visor de recetas como en una imagen de receta, en runtime
podrían surgir diferencias entre los valores visualizados en el visor de recetas y los valores
guardados en las variables correspondientes. Para evitarlo es necesario sincronizar los
valores de los registros de receta con los valores de las variables de receta.
En todo caso se guarda o se sincroniza un registro de receta completo.
Nota
Las variables de receta sólo pueden sincronizarse con el visor de recetas avanzado. Si la
sincronización se realiza o no, depende de si "Sincronizar el visor de recetas y las variables de
receta" se ha activado para la receta.

1120

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

6.1.1.5

Transferir registros de receta

Flujo de datos en las recetas
La figura siguiente representa el flujo de datos en las recetas:
3DQHOGHRSHUDGRU
9LVRUGH
UHFHWDV

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
9DULDEOHGH
UHFHWD

,PDJHQGH
UHFHWD

0RGR7HDFK,Q
&RQWURODGRU
PHGLRGH

DOPDFHQDPLHQWR
H[WHUQR

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1121

Trabajar con recetas
6.1 Trabajar con recetas

Interacción de los componentes
Los siguientes componentes interactúan en runtime:
● Visor de recetas / imagen de receta
En el panel de operador, las recetas de visualizan y se editan en el visor de recetas o en una
imagen de receta:
– Los registros de recetas se visualizan y se editan en el visor de recetas desde la
memoria interna del panel de operador.
– Los valores de las variables de una receta se visualizan y se editan en la imagen de
receta.
Dependiendo de la configuración se sincronizan los valores visualizados en el visor de
recetas con los valores de las variables de la receta.
● Memoria de recetas del panel de operador
Las recetas se almacenan en forma de registros en la memoria de recetas del panel de
operador.
● Variables de receta
Las variables de receta contienen datos de recetas. Al editar una receta en una imagen de
receta, los valores de la receta se almacenan en variables de receta. La configuración
determina cuándo se deben intercambiar los valores de las variables de receta con el
controlador.
Nota
Las variables de receta se pueden sincronizar con los registros de receta de manera que
en ambos se almacenen los mismos valores.

Cargar y guardar los datos de receta
En el visor de recetas se cargan registros de receta completos desde la memoria de recetas
del panel de operador, o bien almacenan en dicha memoria.
3DQHOGHRSHUDGRU
9LVRUGH
UHFHWDV

5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
,PDJHQGH
UHFHWD

0HPRULDGHUHFHWDV

9DULDEOHGH
UHFHWD

En la imagen de receta se cargan los valores del registro de receta desde la memoria de receta
en las variables de receta. Los valores de las variables de receta se guardan en un registro de
receta en la memoria de recetas.

1122

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Transferir los valores de recetas entre el panel de operador y el controlador
Entre el visor de recetas y el controlador se transfieren registros de receta completos.
3DQHOGHRSHUDGRU
9LVRUGH
UHFHWDV

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
9DULDEOHGH
UHFHWD

,PDJHQGH
UHFHWD

0RGR7HDFK,Q
&RQWURODGRU



Dependiendo de la configuración, entre la imagen de receta y el controlador se pueden realizar
las transferencias siguientes:
● Transferencia de registros de receta entre el visor de recetas y las variables de receta
● Transferencia inmediata de valores individuales modificados entre las variables de receta
y el controlador. Para ello se requieren los ajustes siguientes en la receta:
– "Sincronizar el visor de recetas y las variables de receta" está activado.
– "Transferencia manual de valores individuales modificados (modo "Teach-In")" está
desactivado.
Los registros de receta se pueden transferir directamente entre el panel de operador y el
controlador. En estos casos no es imprescindible la visualización en el panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1123

Trabajar con recetas
6.1 Trabajar con recetas

Exportar e importar registros de receta
Los registros de receta se exportan desde la memoria de recetas del panel de operador y se
guardan en un archivo CSV en el soporte de memoria externo. Los registros se pueden volver
a importar a la memoria de recetas desde el soporte de memoria.

3DQHOGHRSHUDGRU

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

PHGLRGH
DOPDFHQDPLHQWR
H[WHUQR



Los siguientes soportes de memoria externos están disponibles en función del panel de
operador:
● Ningún medio de almacenamiento, p. ej. en Basic Panels
● Tarjeta de memoria
● Stick USB
● Disco duro

6.1.1.6

Configuración de recetas

Introducción
Las recetas se configuran de distintas maneras, dependiendo del fin de aplicación:
● Si las recetas del proyecto se editan en un visor de recetas, los valores se guardan sólo en
registros de receta.
● Si las recetas del proyecto se editan en una imagen de receta, los valores se guardan en
variables de receta.
Las siguientes posibilidades de configuración determinan la interacción entre los registros de
receta, las variables de receta y el controlador.

1124

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

"Sincronizar el visor de recetas y las variables de receta" está desactivado
Los datos de un registro de receta se pueden visualizar y modificar sólo en el visor de recetas.
Si utiliza estos datos fuera del visor de recetas, los datos no se sincronizan con el visor de
recetas.

"Sincronizar el visor de recetas y las variables de receta" está activado
Si las recetas se editan tanto en un visor de recetas como en una imagen de receta, en runtime
podrían surgir diferencias entre los valores visualizados en el visor de recetas y los valores
guardados en las variables correspondientes. Para evitarlo es necesario sincronizar los
valores de los registros de receta con los valores de las variables de receta.
3DQHOGHRSHUDGRU
9LVRUGH
UHFHWDV

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
9DULDEOHGH
UHFHWD

,PDJHQGH
UHFHWD

0RGR7HDFK,Q



&RQWURODGRU

Nota
Las variables de receta solo pueden sincronizarse con el visor de recetas avanzado.
Los valores del visor de recetas no se sincronizan automáticamente con las correspondientes
variables de receta. Las variables de receta se sincronizan con el visor de recetas tan sólo
cuando se acciona el objeto de mando con la función
"VisorDeRecetasSincronizarRegistroConVariables".

"Sincronizar el visor de recetas y las variables de receta" está activado y "Transferencia manual de
valores individuales modificados (modo "Teach-In")" está activado
Los valores de recetas modificados no se sincronizan inmediatamente entre las variables de
receta en la imagen de receta del panel de operador y el controlador.
Para sincronizar los valores debe existir un objeto de mando con las funciones
"EscribirRegistroEnAutomata" y "CargarRegistroDelAutomata".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1125

Trabajar con recetas
6.1 Trabajar con recetas
Si los valores de recetas se modifican en el controlador, las modificaciones se visualizan de
inmediato en la imagen de receta cuando se accione el objeto de mando con la función
"CargarRegistroDelcontrolador".

"Sincronizar el visor de recetas y las variables de receta" está activado y "Transferencia manual de
valores individuales modificados (modo "Teach-In")" está desactivado
Los valores de recetas modificados se sincronizan inmediatamente entre las variables de
receta en el panel de operador y el controlador.
Si modifica valores de recetas en la imagen de receta, dichas modificaciones se aplicarán de
inmediato en el controlador e influirán directamente en el proceso.
Si los valores de recetas se modifican en el controlador, las modificaciones se visualizan de
inmediato en la imagen de receta.

6.1.1.7

Particularidades de algunos equipos
3DQHOGHRSHUDGRU
9LVRUGH
UHFHWDV

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
9DULDEOHGH
UHFHWD

0RGR7HDFK,Q
&RQWURODGRU



1126

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
El comportamiento de los Basic Panels se diferencia de los demás paneles en los siguientes
puntos:
● Sólo se soporta el visor de recetas simple.
● Las variables de receta siempre están sincronizadas con el visor de recetas (ver figura que
aparece más arriba): Cuando el usuario modifica un valor de un elemento de receta en el
visor de recetas se modifica también el valor de las variables de receta correspondientes.
● Si se producen modificaciones, las variables de receta no se transfieren de forma
automática entre el controlador y el panel de operador. Las variables de receta deben
transferirse siempre manualmente en modo "Teach-In".
Para sincronizar los valores con el controlador debe existir un objeto de manejo con las
funciones "EscribirRegistroEnControlador" y "LeerRegistroDelControlador".
Nota
Restricciones de variables de receta
Por lo general, en Basic Panels no se pueden emplear variables de receta fuera de una
receta.
Nota
Restricciones de importación/exportación
No es posible exportar ni importar recetas en los siguientes paneles de operador:
● Basic Panels
Los datos de receta completos, pero no registros de receta individuales, se pueden exportar
e importar en formato CSV con ProSave y transferir al panel de operador. Además, se
mantiene el runtime.
ATENCIÓN
Pérdida de datos en caso de varios visores de recetas en la imagen
Aplicable solo a los Basic Panels: Si dos o más visores de recetas muestran la misma
receta en una imagen, al acceder a los datos se crea un conflicto.
Esto genera un estado impredecible de los datos de receta o bien la pérdida de los mismos.
Asegúrese de que el operador no pueda seleccionar ni modificar la misma receta en
diferentes visores de recetas.
● Muestre en cada visor de recetas sólo una receta, respectivamente.
● Muestre en cada visor de recetas una receta distinta, respectivamente.
Nota
Guardar recetas en Comfort Panels
Siempre que sea posible, las recetas deben guardarse en la tarjeta SD y no en la memoria
flash integrada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1127

Trabajar con recetas
6.1 Trabajar con recetas

Interacción de los componentes
Los siguientes componentes interactúan en runtime:
● Visor de recetas
En el panel de operador, las recetas de visualizan y se editan en el visor de recetas.
Los registros de receta se visualizan y se editan en el visor de recetas desde la memoria
interna del panel de operador.
● Memoria de recetas del panel de operador
Las recetas se almacenan en forma de registros en la memoria de recetas del panel de
operador.
● Variables de receta
Las variables de receta contienen los valores de los elementos de receta.

6.1.1.8

Sincronizar registros de receta con el controlador

Sinopsis
Al transferir registros de receta entre el panel de operador y el controlador, ambos
interlocutores acceden alternativamente a las áreas de comunicación conjuntas.
Los registros de receta se transfieren siempre directamente. Los valores de las variables se
escriben o se leen directamente en/de las direcciones configuradas, sin necesidad de utilizar
el portapapeles.

Tipos de transferencia
Los registros de receta se pueden transferir de dos maneras entre el panel de operador y el
controlador, a saber:
● Transferencia sin coordinación
● Transferencia coordinada mediante el puntero de área "Registro".
Nota
Transferencia coordinada
En la transferencia coordinada se impide que los datos se sobrescriban unos a otros de
forma incontrolada en el programa de control.
Nota
Sincronización automática/manual
Con la opción "Transferencia manual de valores individuales modificados (modo "TeachIn")" puede decidir cómo sincronizar recetas. Si activa la opción, puede realizar
modificaciones manuales y, a continuación, transferirlas al controlador. Si desactiva la
opción, las recetas se sincronizarán automáticamente y las modificaciones manuales
lanzarán un mensaje de error.

1128

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Requisitos para la transferencia coordinada
Los requisitos siguientes rigen para la transferencia coordinada:
● En el editor "Comunicación > Conexiones" debe estar configurado el puntero de área
"Registro" para la conexión deseada.
● En las propiedades de la receta debe estar activada la "Transferencia coordinada de los
registros".
● En las propiedades de la receta se debe haber indicado la conexión con el controlador con
el que el panel de operador coordinará la transferencia.

Transferencia coordinada
Durante la transferencia coordinada, tanto el controlador como el panel de operador activan
bits de estado en el buzón de datos común.
La transferencia coordinada de registros de receta resulta útil en los casos siguientes:
● El controlador es el "interlocutor activo" al transferir registros de recetas.
● El controlador evalúa las informaciones mediante el número y el nombre de la receta así
como mediante el número y el nombre del registro de la receta.
● Las siguientes tareas de control inician la transferencia de registros de receta:
– "Escribir_registro_en_controlador"
– "Leer_registro_de_controlador"

6.1.1.9

Editor "Recetas"

Introducción
En el editor "Recetas" se crean, configuran y editan las recetas, los elementos de receta y los
registros de receta. Además, se pueden introducir valores en los registros de las recetas ya
existentes.

Estructura del editor "Recetas"
Las recetas se crean en la parte superior del editor de tablas y se configuran allí mismo o bien
en la ventana de inspección.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1129

Trabajar con recetas
6.1 Trabajar con recetas
La parte inferior del editor de tablas contiene las fichas siguientes:
● Elementos
Aquí se definen los elementos de la receta seleccionada con las filas de la tabla. Dentro de
la tabla los elementos de receta se desplazan con los comandos del menú contextual
"Arriba" y "Abajo".
● Registros
Aquí se definen los valores de los registros de la receta seleccionada con las filas de la tabla.

En la ventana de inspección se configura la receta seleccionada en cada caso, el elemento de
receta o el registro de receta. Encontrará más información sobre la configuración de los
ingredientes de una receta en "Configurar recetas".

Ajustes de recetas
Para las recetas son posibles los ajustes siguientes:
Ajuste

Descripción

Nombre de la receta

Identifica la receta unívocamente en el panel de operador.

Nombre de visualiza‐
ción

Aparece en runtime en el visor de recetas, p. ej. El nombre de visualización se
puede configurar en varios idiomas. Ponga nombres descriptivos o designa‐
ciones que el operador pueda asignar directamente a una receta, p. ej., "Be‐
bida de zumo de fruta".

Número de receta

Identifica la receta unívocamente en el panel de operador.

Versión

Información sobre la receta. De forma predeterminada se muestran la fecha
y la hora de la última modificación de la receta.

Ruta

Define la ubicación de las recetas. Las recetas se guardan como archivo.

Tipo de tamaño [inalte‐ El número máximo disponible de registros de receta está predeterminado de
rable]
manera estándar.

1130

Número de registros
[inalterable]

Número máximo de registros de una receta en runtime. Este número está
limitado por la memoria de recetas del panel de operador.

Tipo de comunicación
[inalterable]

Los registros de receta se escriben directamente en las direcciones de las
variables de receta y se leen desde allí.

Tooltip

Tooltip relativo a la receta que se muestra al operador en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Nota
Ruta
La ubicación depende de los medios de almacenamiento con que esté equipado el panel de
operador.
Basic Panels
Estos paneles de operador no disponen de memoria externa. Las recetas se guardan siempre
en la memoria flash interna. De tal modo, el ajuste "Ruta" no está disponible.

Ajustes de los elementos de receta
En la ficha "Elementos" se admiten los ajustes siguientes:
Ajuste

Descripción

Nombre del elemento de re‐
ceta

Identifica el elemento de receta unívocamente en la receta. Ponga los
nombres o las designaciones descriptivas que pueda asignar unívoca‐
mente, p. ej. denominaciones de los ejes de una máquina o ingredien‐
tes como "Aroma".

Nombre de visualización

Aparece en runtime en el visor de recetas, p. ej. El nombre de visuali‐
zación se puede configurar en varios idiomas. Ponga nombres des‐
criptivos o designaciones que el operador pueda asignar directamente,
p. ej., "Aroma de zumo de fruta".

Variable de receta

Una variable asignada guarda en runtime el valor actual del elemento
en el registro de receta.

Tipo de datos

Tipo de datos de la variable de receta.

Longitud de los datos [inalte‐
rable]

El tipo de datos determina la longitud de los datos de una variable de
receta.

Lista de textos

En una lista de textos se asigna texto a un valor o rango de valores.
Dicho texto se puede visualizar en un campo de salida, p. ej.
La variable de receta asignada debe ser de un tipo de datos numérico.
El valor de la variable debe estar dentro del rango de valores de la lista
de textos.

Valor estándar

Se utiliza como entrada estándar cuando se crea un registro de receta
nuevo.

Valor mínimo [inalterable]

Valor más pequeño representable de una variable de receta basada en
números, depende del tipo de datos.

Valor máximo [inalterable]

Valor más grande representable de una variable de receta basada en
números, depende del tipo de datos.

Decimales

Determina con cuántos decimales se redondea exactamente un valor
decimal (p. ej., 3 decimales) y, a la inversa, por qué potencia de diez se
multiplica un valor entero (p. ej., 1000).

Tooltip

Tooltip del elemento de receta que se muestra al operador en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1131

Trabajar con recetas
6.1 Trabajar con recetas

Ajustes de los registros de receta
En la ficha "Registros" se admiten los ajustes siguientes:
Ajuste

Descripción

Nombre del registro de receta Identifica el registro de receta unívocamente dentro de una receta.
Nombre de visualización

Aparece en runtime en el visor de recetas, p. ej. El nombre de visuali‐
zación se puede configurar en varios idiomas. Ponga nombres des‐
criptivos o números de producto que el operador pueda asignar direc‐
tamente a un producto, p. ej., "Zumo de fruta amarillo E231".

Número de registro de receta Identifica el registro de receta unívocamente dentro de una receta.
Elementos de receta 1 a n

Incluso durante la configuración ya se pueden guardar diferentes va‐
lores para cada elemento de receta. Un registro de receta está formado
conjuntamente por un valor y los valores de los demás elementos de
receta. Es posible guardar varios registros de receta.
Si ha activado la opción respectiva en los ajustes de transferencia, al
cargar el proyecto en el panel de operador también se cargarán los
registros de receta y en el panel de operador se sobrescribirán los
registros existentes.

Comentario

Comentario sobre el registro de receta

6.1.2

Recetas en runtime

6.1.2.1

Imagen de receta y visor de recetas

Principios básicos de la imagen de receta
Introducción
La imagen de receta es una imagen que incorpora una máscara de entrada individual para las
recetas. La máscara de entrada comprende campos E/S y otros objetos de manejo y
visualización. La funcionalidad de la receta se realiza mediante funciones de sistema, p. ej. el
almacenamiento de registros de receta.
La figura siguiente muestra un ejemplo de una imagen de receta:

1132

$JXD



O

&RQFHQWUDGR



O

$]¼FDU



NJ

$URPD



O

1RPEUHGHUHFHWD
1DUDQMD

1|


1RPEUHGHUHJLVWUR
1«FWDU

1|


*XDUGDU

'DWRVGH3/&

&DUJDU

'DWRVHQ3/&

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Nota
Disponibilidad
En los Basic Panels no se soportan imágenes de receta.

Diseñar imágenes de receta
La configuración de una imagen de receta se puede personalizar conforme a las propias
exigencias. Las recetas extensas se pueden repartir por temas en varias imágenes y visualizar
allí p. ej. en objetos gráficos de manejo y visualización:
● Distribución temática en varias imágenes
– Los registros de receta que contengan muchas entradas se pueden repartir en varias
imágenes. Por ejemplo, configure para cada área de la instalación una imagen con las
correspondientes máscaras de entrada para los registros de receta.
En los paneles de operador con display pequeño resulta conveniente distribuir los registros
entre varias imágenes, p. ej. para no tener que desplazarse en runtime por una tabla.
● Reproducir la máquina visualmente
Se reproduce la máquina visualmente en una imagen con objetos de imagen gráficos. Así
se visualiza más claramente la parametrización, emplazando campos E/S directamente
junto a elementos de la máquina tales como ejes o guías. Gracias a ello se crea una relación
directa entre los valores y la máquina.

Sincronización de valores de receta
Para poder modificar los valores de los registros de receta fuera del visor de recetas avanzado
en los campos E/S configurados, active la opción "Sincronizar el visor de recetas y las
variables de receta" en "Propiedades > Sincronización" de las propiedades de la receta.
La opción "Sincronizar el visor de recetas y las variables de receta" no está disponible para el
visor de recetas simple.

Figura 6-1

Rezepturen_Synchronisation_Advanced

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1133

Trabajar con recetas
6.1 Trabajar con recetas

Transferencia automática de valores de receta
Si los valores de receta introducidos se deben transferir inmediatamente en runtime al
controlador conectado, desactive la opción "Transferencia manual de valores individuales
modificados (modo "Teach-In")" en "Propiedades > Herramientas".
Si desea activar o desactivar en runtime la transferencia inmediata de los valores de receta
introducidos configure la función de sistema "ActivarVariablesDeReceta".

Funciones de sistema
Las funciones de sistema para cargar, guardar y transferir registros de receta y recetas se
encuentran en el grupo "Recetas".
Para manejar una imagen de receta podrá utilizar las funciones de sistema indicadas a
continuación:
● ImportarRegistros
● ExportarRegistro
● CargarRegistro
● LeerRegistroDelControlador
● BorrarRegistro
● GuardarRegistro
● EscribirRegistroEnControlador
● EscribirVariableDeRegistroEnControlador
● DefinirEstadoVariableDeReceta
● LeerVariablesDeRegistroDelControlador
Si desea utilizar un visor de recetas en una imagen de recetas, podrá utilizar las funciones de
sistema indicadas a continuación:
● VisorDeRecetasGuardarRegistro
● VisorDeRecetasGuardarRegistroComo
● VisorDeRecetasSincronizarRegistroConVariables
● VisorDeRecetasBorrarRegistro
● VisorDeRecetasRegistroNuevo
● VisorDeRecetasLeerRegistroDelControlador
● VisorDeRecetasEscribirRegistroEnControlador
● VisorDeRecetasCambiarNombreDeRegistro
● VisorDeRecetasMostrarTextoInformacion
● VisorDeRecetasMenu (sólo en el visor de recetas simple)
● VisorDeRecetasAbrir (sólo en el visor de recetas simple)
● VisorDeRecetasAtras (sólo en el visor de recetas simple)

1134

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Consulte también
Principios básicos del visor de recetas (Página 1135)

Principios básicos del visor de recetas
Introducción
El visor de recetas es un objeto de manejo y visualización de WinCC. En el visor de recetas es
posible visualizar, modificar y gestionar registros.
La representación de los visores de recetas depende del panel y de su versión.
Paneles de operador con visor de recetas simple
Panel de operador

Tipo

Basic Panels

KP300 Basic mono PN
KP400 Basic color PN
KTP400 Basic mono PN
KTP400 Basic color PN
KTP400 Basic mono PN Portrait
KTP400 Basic color PN Portrait
KTP600 Basic
KTP1000 Basic
TP1500 Basic

1)

La representación del visor de recetas simple puede cambiarse a visor de recetas avanzado.

Paneles de operador con visor de recetas avanzado anterior a la versión de panel V13
Panel de operador

Tipo

Mobile Panels

Panel 177
Panel 277
Panel 277 IWLAN V2
Panel 277F IWLAN V2
Panel 277F IWLAN (RFID Tag)

1)

La representación del visor de recetas avanzado puede cambiarse a visor de recetas simple.

Paneles de operador con visor de recetas avanzado a partir de la versión de panel V13
Panel de operador

Tipo

Basic Panels

KTP400 Basic PN
KTP400 Basic PN Portrait
KTP700 Basic
KTP900 Basic
KTP1200 Basic

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1135

Trabajar con recetas
6.1 Trabajar con recetas
Panel de operador

Tipo

Comfort Panels

KP400 Comfort
KTP400 Comfort
KP700 Comfort
TP700 Comfort
KP900 Comfort
TP900 Comfort
KP1200 Comfort
TP1200 Comfort
KP1500 Comfort
TP1500 Comfort
TP1900 Comfort
TP2200 Comfort

Mobile Panels

KTP400F Mobile
KTP700 Mobile
KTP700F Mobile
KTP900 Mobile
KTP900F Mobile

Consulte también
Principios básicos de la imagen de receta (Página 1132)
Ejemplo de creación de una receta (Página 1192)

6.1.2.2

Visor de recetas simple

Descripción del visor de recetas simple
Visor de recetas
El visor de recetas simple es un objeto de manejo y visualización que se utiliza para gestionar
los registros de recetas. El visor de recetas muestra registros de receta en forma de tabla.
Los botones mostrados y la información de las columnas pueden configurarse.
Los valores visualizados o introducidos en el visor de recetas se guardan en registros de
receta. Los botones permiten escribir el registro de receta visualizado en el controlador o leer
valores del controlador.

1136

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Estructura del visor
El visor de recetas simple comprende las áreas de representación siguientes:
● Lista de recetas
● Lista de registros
● Lista de elementos
La figura siguiente muestra una lista de registros:




=XPR
5HIUHVFR
1«FWDU

El visor de recetas simple representa cada una de estas áreas por separado en el panel de
operador. Todas estas áreas de visualización se manejan mediante un menú contextual.
Por defecto se visualiza primero el visor de recetas simple con la lista de recetas.

Manejo
Para manejar el visor de recetas simple existen las posibilidades siguientes, dependiendo de
la configuración:
● Crear, modificar, copiar o borrar registros de recetas
● Leer un registro de recetas del controlador o transferirlo al controlador

Manejar el área de visualización y el menú contextual
Para manejar el visor de recetas simple, conmute entre las áreas de visualización y los menús
contextuales.
Tabla 6-1
Botón

Manejo del área de visualización
Tecla

Función

<Intro>

Abre la siguiente área de visualización subordinada, es decir,
la lista de registros o la lista de elementos.

<Esc>

Abre el área de visualización anterior.

<INS>

Crea un nuevo registro de la receta seleccionada cuando se
muestra la lista de recetas o de registros de receta. A conti‐
nuación, pasa a la lista de elementos de receta.
Requisitos: "Propiedades > General > Modo de edición" está
activado.
El botón puede simularse con la función "Tecla SimulateSys‐
temKey" (también en equipos sin teclas).

<Supr>

Borra el registro de receta seleccionado en la lista de regis‐
tros de receta.
Requisitos: "Propiedades > General > Modo de edición" está
activado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1137

Trabajar con recetas
6.1 Trabajar con recetas
Botón

Tabla 6-2

Tecla

Función

<Arriba>/<Abajo>

Selecciona la entrada anterior/siguiente.

<Re Pág>/<Av Pág>

Avanza una página de visualización hacia arriba o hacia
abajo.

<Inicio>/<Fin>

Selecciona la primera/última entrada. La primera/última en‐
trada aparece destacada.

Manejo del menú contextual

Botón

Tecla

Función

<Derecha>

Abre el menú contextual del área de visualización.

<Esc>

Cierra el menú.
Abre el área de visualización.

Introducir el número del
comando de menú

Ejecuta el comando de menú.

Menús contextuales de el visor de recetas simple
En cada área de visualización puede llamarse una selección de comandos con el botón
.
Dicha selección contiene los comandos disponibles para el área de visualización en cuestión.
Cada comando tiene un número asignado. El comando se ejecuta cuando se introduce el
número correspondiente. También se puede seleccionar el comando y pulsar la tecla
<Enter>.

Menús contextuales de la lista de recetas
Comando

Función

Nuevo

Permite crear un nuevo registro para la receta seleccionada.
Si se ha configurado un valor inicial, éste se visualizará en el campo de
entrada.

Mostrar tooltip

Se muestra el tooltip configurado para la receta.

Abrir

Abre la lista de registros de la receta seleccionada.

Menús contextuales de la lista de registros de receta

1138

Comando

Función

Nuevo

Se crea un nuevo registro de receta.
Si se ha configurado un valor inicial, éste se visualizará en el campo de
entrada.

Borrar

Borra el registro seleccionado.

Guardar como

Guarda el registro seleccionado con un nombre diferente. El nombre se in‐
troduce en un cuadro de diálogo.

Cambiar nombre

Permite cambiar el nombre del registro seleccionado. El nombre se introduce
en un cuadro de diálogo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
Comando

Función

Abrir

Abre la lista de elementos del registro seleccionado.

Atrás

Abre la lista de recetas.

Menús contextuales de la lista de elementos de receta
Comando

Función

Guardar

Se guarda el registro marcado con el elemento de receta.

Al controlador

Los valores visualizados del registro de seleccionado se transfieren del panel
de operador al controlador.

Del controlador

Los valores de receta del controlador se visualizan en el visor de recetas del
panel de operador.

Guardar como

Guarda el registro seleccionado con un nombre diferente. El nombre se in‐
troduce en un cuadro de diálogo.

Mostrar tooltip

Se muestra el tooltip configurado para el elemento de receta.

Cambiar nombre

Se cambia el nombre del elemento de receta marcado. El nombre se intro‐
duce en un cuadro de diálogo.

Atrás

Se abre la lista de registros.

Menús contextuales de la lista de registros
Nota
Dependencia del panel de operador
En los Basic Panels también están configurados los siguientes comandos de menú.

Comando

Función

Al controlador

Los valores visualizados del registro de seleccionado se transfieren del panel
de operador al controlador.

Del controlador

Los valores de receta del controlador se visualizan en el visor de recetas del
panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1139

Trabajar con recetas
6.1 Trabajar con recetas

Actualizar y visualizar valores
Nota
El registro de receta editado se modifica en segundo plano
Aplicable solo a los Basic Panels: si un operador ha modificado un registro de receta y una
petición del controlador solicita leer o escribir un registro cualquiera de esta receta, la petición
del controlador se detiene y se emite un aviso de sistema. En cambio, si la modificación de los
datos de receta se debe únicamente a la petición del controlador y no a la acción de un
operador, el valor modificado se mostrará de inmediato.
No vale para Basic Panels: si un operador ha modificado un registro de receta y una petición
del controlador modifica valores del registro de receta en cuestión, el visor de recetas no se
actualizará automáticamente. Para actualizar el visor de recetas se debe volver a seleccionar
el registro de recetas correspondiente.

Consulte también
Principios básicos del visor de recetas (Página 1135)
Posibilidades de configuración del visor de recetas simple (Página 1140)

Posibilidades de configuración del visor de recetas simple
Se puede determinar el comportamiento del visor de recetas simple en la ventana de
inspección del mismo. Algunos dispositivos, p. ej. Basic Panels, sólo soportan el visor de
recetas simple.
En paneles con visor de recetas simple tenga en cuenta lo siguiente:
1. Seleccione "Vista simple" como "Tipo de visualización" en "Propiedades > Representación
> Modo" de la ventana de inspección.
2. El área "Propiedades > Vista simple" contiene propiedades adicionales que sólo se aplican
al visor de recetas simple.
3. Todas las demás propiedades se aplican también al visor de recetas avanzado.

1140

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Sólo mostrar los registros de receta
Para visualizar los datos de receta en un visor de recetas sólo para fines de control, proceda
del siguiente modo:
1. En el grupo "General", desactive "Modo de edición".

No es posible crear, cambiar de nombre, editar o borrar datos de receta.

Escribir el número o nombre de un registro de receta en una variable
En el visor de recetas avanzado se puede asociar una variable a cada registro de receta.
Dependiendo del tipo de datos "String" o "Int" de las variables, se guardará en las mismas el
nombre o el número del registro de receta. Asimismo, puede utilizar la variable para
seleccionar el registro de receta, introduciendo para ello el valor correspondiente. Las
variables se pueden transferir, p. ej., como parámetro para una función de sistema.
Proceda del siguiente modo:
1. En "Propiedades > General > Registro de receta", introduzca una variable del tipo "Int" en
el campo "Variable".
El número del registro de receta se guarda siempre en una variable.

Asociar un evento al visor de recetas
Nota
Eventos y botones
Cuando se activa al menos un botón se oculta el registro "Eventos".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1141

Trabajar con recetas
6.1 Trabajar con recetas
Para configurar un evento para el visor de recetas, proceda del siguiente modo:
1. Seleccione el visor de recetas insertado en la imagen en el editor "Imágenes".
Las propiedades del visor de recetas se visualizarán en la ventana de inspección.
2. Desactive todos los botones en "Propiedades > Barra de herramientas" y "Propiedades >
Vista simple".
3. En "Propiedades > Eventos" de la ventana de inspección, haga clic en el evento que desea
configurar, p. ej. "Activar".
4. Asocie una lista de funciones al evento.
Cuando el usuario activa el visor de recetas se procesa la lista de funciones.

Animación de propiedades del visor de recetas
Para configurar una animación de un visor de recetas, proceda del siguiente modo:
1. Seleccione el visor de recetas insertado en la imagen en el editor "Imágenes".
Las propiedades del visor de recetas se visualizarán en la ventana de inspección.
2. Haga clic en "Propiedades > Animaciones" de la ventana de inspección.

3. Vincule una variable a una o varias de las siguientes propiedades:
– Posición X y posición Y
– Apariencia: Colores, parpadeo
– Operación habilitada
– Visibilidad
En el área "Animaciones > Vista general" se recogen todas las animaciones en una
tabla. En "Animaciones > Conexiones de variables > Conexión de variables" puede
conectar una variable a la altura y anchura, además de a la visibilidad y posición.
Nota
Animaciones y botones
Al compilar el proyecto para paneles de operador Windows-CE aparece un mensaje de
error si no están desactivados todos los botones.

1142

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Limitaciones en el visor de recetas simple
Las siguientes funciones no se pueden realizar en el visor de recetas simple:
● Sincronizar el visor de recetas y las variables de receta
● Escribir el número o nombre de receta en una variable
● Mostrar barra de estado
● Mostrar número de registro
● Mostrar título
● Mostrar tabla

Consulte también
Principios básicos del visor de recetas (Página 1135)
Descripción del visor de recetas simple (Página 1136)
Configuración de recetas (Página 1124)

Manejar el visor de recetas simple
Manejar el visor de recetas simple con el ratón o la pantalla táctil
Para manejar el visor de recetas simple con el ratón o la pantalla táctil, proceda del siguiente
modo:
1. Seleccione la receta deseada en el visor de recetas.
2. Haga clic en el botón
.
Se abrirá el menú contextual.
3. Elija el comando de menú deseado.
Se ejecutará el comando de menú deseado.

Manejar el visor de recetas simple con el teclado
Para manejar el visor de recetas simple con el teclado, proceda del siguiente modo:
1. Pulse la tecla <Tab> hasta que aparezca destacado el visor de recetas simple.
2. Seleccione la receta deseada utilizando las teclas con flecha.
3. Pulse la tecla <Derecha>.
Se abrirá el menú contextual.
4. Pulse la tecla con flecha <Abajo> hasta que aparezca seleccionado el comando de menú
deseado.
5. Confirme el comando de menú pulsando la tecla <Intro>.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1143

Trabajar con recetas
6.1 Trabajar con recetas

Combinaciones de teclas para el visor de recetas simple
En runtime están activadas las combinaciones de teclas siguientes para el visor de recetas
simple si en ES está activado "Permitir utilizar teclado online".
Combinación de teclas Efecto

Comando

<Ins>

Genera un registro de receta nuevo

Nuevo

<Supr>

Borra el registro de receta visualizado.

Borrar

Manejar el visor de recetas con teclas de función
El visor de recetas se puede manejar mediante teclas de función, p. ej., si el panel de operador
no dispone de pantalla táctil. A las teclas de función del panel de operador se les pueden
asociar funciones, p. ej., "GuardarRegistro".

Consulte también
Principios básicos del visor de recetas (Página 1135)

Administrar registros de receta
Administrar registros de receta
Para administrar el visor de recetas simple existen las posibilidades siguientes, dependiendo
de la configuración:
● Crear nuevos registros de recetas
● Copiar registros de recetas
● Modificar registros de recetas
● Borrar registros de recetas

Crear un nuevo registro de receta
Para crear un registro de receta nuevo, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desee crear un nuevo registro de
receta.
2. Seleccione el comando "Nuevo" del menú contextual de la lista de recetas.
Se creará un nuevo registro de datos con el siguiente número libre.
Se abrirá la lista de elementos del nuevo registro de receta.
3. Introduzca los valores para los elementos del registro de receta.
Dependiendo de la configuración, los valores del registro de la receta ya tienen asignados
valores predeterminados.
4. Seleccione el comando "Guardar" del menú contextual de la lista de elementos.
Se abrirá el cuadro de diálogo "Guardar como".

1144

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
5. Introduzca el nombre y el número del registro de receta.
6. Haga clic en el botón "Aceptar".
El registro se guardará con el nuevo nombre.
Si ya existe el registro, se abrirá un cuadro de diálogo. En dicho cuadro debe indicar si el
registro existente debe sobrescribirse o no.

Copiar un registro de receta
Para copiar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desea copiar un registro de receta
existente.
2. En el panel de operador, seleccione el registro de receta del que desea guardar una copia.
3. Seleccione el comando "Guardar como" del menú contextual de la lista de registros.
Se abrirá el cuadro de diálogo "Guardar como". El registro de receta obtendrá
automáticamente el siguiente número libre.
4. En caso necesario, introduzca el nombre y el número del registro de receta.
5. Haga clic en el botón "Aceptar".

Modificar un registro de receta
Para modificar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desee modificar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desea modificar.
3. Elija el registro de receta deseado.
Se visualizará la lista de elementos del nuevo registro de receta.
4. Sustituya los valores existentes por los nuevos valores.
5. Seleccione el comando "Guardar" del menú contextual de la lista de elementos.

Borrar un registro de receta
Para borrar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desea borrar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desea borrar.
3. Seleccione el comando "Borrar" del menú contextual de la lista de registros.
4. Confirme la consulta de seguridad para borrar el registro.

Consulte también
Principios básicos del visor de recetas (Página 1135)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1145

Trabajar con recetas
6.1 Trabajar con recetas

Leer registro de receta del controlador
Introducción
En runtime se pueden modificar directamente en la instalación los valores que también están
almacenados en las recetas del panel de operador. Esto sucede, p. ej. cuando una válvula se
ha abierto en la instalación más de lo que está almacenado en la receta. En este caso, es
posible que los valores de los registros de receta guardados en el panel de operador ya no
concuerden con los valores del controlador.
Los valores de las variables de receta se pueden leer del controlador y escribir en un registro
de receta.
Los valores leídos se escriben en el registro de receta que se visualiza en ese momento en el
panel de operador.

Procedimiento
Para leer un registro de receta del controlador, proceda del siguiente modo:
1. Abra la receta en el panel de operador.
Se abre la lista de registros.
2. Abra la lista de elementos del registro de receta en el que desea aplicar los valores del
controlador.
3. Seleccione el comando "desde el controlador" del menú contextual de la lista de elementos.
Los valores se leerán del controlador y se visualizarán en el registro de receta actual.
4. Si desea guardar los valores, elija el comando "Guardar" o "Guardar como".

Resultado
Los valores se leen del controlador, se representarán en el panel de operador y se almacenan
en el registro de la receta.

Nota
Basic Panels
En los Basic Panels, el comando de menú "desde el controlador" también puede estar
configurado para la lista de registros. En este caso también puede seleccionar el comando de
menú "desde el controlador" en la lista de registros.

Consulte también
Principios básicos del visor de recetas (Página 1135)

1146

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Transferir un registro de receta al controlador
Introducción
Para que los valores de un registro modificado en el visor de recetas sean válidos en el
controlador, es preciso transferirlos a éste último.
Los valores visualizados en el visor de recetas son los que se transfieren al controlador.

Procedimiento
Para transferir un registro de receta al controlador, proceda del siguiente modo:
1. Abra la receta deseada.
Se abre la lista de registros.
2. Abra la lista de elementos del registro de receta cuyos valores desea transferir al
controlador.
3. Seleccione el comando "hacia el controlador" del menú contextual de la lista de elementos.

Resultado
Los valores del registro de receta se transfieren al controlador.

Nota
Basic Panels
En los Basic Panels, el comando de menú "desde el controlador" también puede estar
configurado para la lista de registros. En este caso también puede seleccionar el comando de
menú "desde el controlador" en la lista de registros.

Consulte también
Principios básicos del visor de recetas (Página 1135)
Sincronizar registros de receta con el controlador (Página 1128)
Transferir registros de receta (Página 1121)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1147

Trabajar con recetas
6.1 Trabajar con recetas

6.1.2.3

Visor de recetas avanzado (antes de V13)

Descripción del visor de recetas avanzado (antes de V13)
Visor de recetas
El visor de recetas avanzado es un objeto de manejo y visualización que se utiliza para
gestionar los registros de receta. El visor de recetas muestra registros de receta en forma de
tabla.
Los botones, títulos e informaciones mostrados en las columnas se pueden ajustar.
Los valores visualizados o introducidos en el visor de recetas se guardan en registros de
receta.
La representación de los visores de recetas depende del panel y de su versión.

Utilización
En el visor de recetas es posible visualizar, modificar y gestionar registros.

Estructura del visor
La figura siguiente muestra un ejemplo del visor de recetas avanzado en un panel de operador
antes de la versión de panel V13.

1148

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Manejo
Dependiendo de la configuración, existen las posibilidades siguientes:
● Crear, modificar, copiar o borrar registros de recetas
● Leer registros de receta del controlador o transferirlos al controlador
● Sincronizar registros de receta con las correspondientes variables de receta

Objetos de manejo
En el visor de recetas pueden estar configurados los siguientes objetos de manejo:
Objeto de
manejo

Combinación de
teclas

Función
Muestra el tooltip configurado.

<Ctrl+barra espa‐ Se crea un nuevo registro de receta.
ciadora>
Si se ha configurado un valor inicial, éste se visualizará en el campo
de entrada.
<Ctrl+Intro>

Se guardan los valores visualizados del registro de receta.
La ubicación de los archivos está predeterminada en el proyecto.

<Ctrl+*>

Independientemente del visor de recetas, el registro de receta se
guarda con un nombre diferente. El nombre se introduce en un
cuadro de diálogo.

<Ctrl+Supr>

Borra el registro de receta visualizado.

<Ctrl+=>

Si una variable de receta posee un valor más actual que el visor de
recetas, se adoptará dicho valor en el visor de recetas.
Si el valor visualizado en el visor de recetas es más reciente que el
valor de la variable, la variable de la receta adoptará dicho valor.
Para poder utilizar esta función, "Sincronizar visor de recetas y va‐
riables de recetas" deberá estar activada en las propiedades de la
receta.

<Ctrl+Abajo>

Los valores del registro de receta ajustado visualizados en el visor
de recetas se transfieren del panel de operador al controlador.

<Ctrl+Arriba>

Los valores de receta del controlador se visualizan en el visor de
recetas.

Actualizar y visualizar valores
Si, debido a una petición de control, se han modificado datos del registro de receta en cuestión,
el visor de recetas no se actualizará automáticamente. Los valores se modifican en segundo
plano. Para actualizar el visor de recetas se debe volver a seleccionar el registro de recetas
correspondiente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1149

Trabajar con recetas
6.1 Trabajar con recetas

Consulte también
Principios básicos del visor de recetas (Página 1135)
Manejar el visor de recetas avanzado (Página 1153)
Administrar registros de receta (Página 1155)
Sincronizar un registro de receta (Página 1156)
Leer registro de receta del controlador (Página 1157)
Transferir un registro de receta al controlador (Página 1158)
Posibilidades de configuración del visor de recetas avanzado (Página 1150)

Posibilidades de configuración del visor de recetas avanzado
Se puede determinar el comportamiento del visor de recetas avanzado en la ventana de
inspección del mismo.
La representación de los visores de recetas depende del panel y de su versión.
En paneles con visor de recetas avanzado, tenga en cuenta lo siguiente:
1. Seleccione "Vista avanzada" como "Tipo de visualización" en "Propiedades >
Representación > Modo" de la ventana de inspección.
2. El área "Propiedades > Vista simple" contiene propiedades que solo son válidas para el
visor de recetas simple.
3. Las demás propiedades son válidas para el visor de recetas avanzado.

1150

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Mostrar una receta
Para permitir acceder a los registros de una receta concreta en una imagen, proceda del
siguiente modo:
1. En el campo "Receta" de "Propiedades > General", indique la receta deseada o seleccione
una receta existente.
2. Cuando en el campo "Receta" haya una receta, active "Mostrar lista de selección" si el
nombre de la receta debe visualizarse en runtime.

La receta deseada se mostrará en el visor de recetas.

Escribir el número o nombre de una receta o de un registro de receta en una variable
En el visor de recetas puede asociar una variable tanto a la receta como al registro de receta
en particular. Dependiendo del tipo de datos "String" o "Int" de las variables, se guardará en
ellas el nombre o el número de la receta o del registro de receta. Asimismo, puede utilizar la
variable para seleccionar la receta o el registro de receta, introduciendo para ello el valor
correspondiente. Las variables se pueden transferir, p. ej., como parámetro para una función
de sistema.
Proceda del siguiente modo:
1. En "Propiedades > General > Receta", introduzca una variable del tipo "String" en el campo
"Variable de receta".
2. En "Propiedades > General > Registro de receta", introduzca una variable del tipo "Int" en
el campo "Variable".
El nombre y el número de registro de la receta se guardan en cada caso en una variable.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1151

Trabajar con recetas
6.1 Trabajar con recetas

Utilizar el visor de recetas como campo de selección
Para utilizar el visor de recetas como campo de selección de recetas y registros de receta en
una imagen, proceda del siguiente modo:
1. Elija la variable del nombre de receta en "General > Receta > Variable de receta".
2. Elija la variable del nombre del registro de receta en "General > Registro de receta >
Variable".
3. Desactive "Modo de edición". No es posible crear, cambiar de nombre, editar o borrar datos
de receta.
4. Para seleccionar recetas, active "Mostrar lista de selección" y asegúrese de que no está
seleccionada ninguna receta en "Propiedades > General > Receta".
5. Desactive todos los botones en "Propiedades > Barra de herramientas".

Asociar un evento al visor de recetas
Para configurar un evento para el visor de recetas, proceda del siguiente modo:
1. Seleccione el visor de recetas insertado en la imagen en el editor "Imágenes".
Las propiedades del visor de recetas se visualizarán en la ventana de inspección.
2. En "Propiedades > Eventos" de la ventana de inspección, haga clic en el evento que desea
configurar.
3. Asocie una lista de funciones al evento seleccionado.
Cuando se produce el evento configurado, se procesa la lista de funciones.

1152

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Consulte también
Principios básicos del visor de recetas (Página 1135)
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Configuración de recetas (Página 1124)

Manejar el visor de recetas avanzado
Introducción
El visor de recetas puede manejarse tanto con el ratón o la pantalla táctil como con el teclado.
La representación de los visores de recetas depende del panel y de su versión.

Manejar el visor de recetas con el ratón o la pantalla táctil
Para manejar el visor de recetas con el ratón o la pantalla táctil, proceda del siguiente modo:
1. Seleccione la receta deseada.
Se visualizarán los registros de la receta.
2. Seleccione el registro que desea editar.
3. Haga clic en el botón cuya función desea ejecutar.

Manejar el visor de recetas con el teclado
Para manejar el visor de recetas con el teclado, proceda del siguiente modo:
1. Pulse la tecla <Tab> hasta que el cursor esté en el campo para seleccionar la receta.
2. Pulse la tecla <Intro>.
Se abrirá la lista de selección de recetas.
3. Seleccione una receta. Las teclas con flecha <Izquierda>, <Derecha>, <Arriba> y <Abajo>
permiten desplazarse a la entrada siguiente o anterior de la lista.
4. Seleccione un registro.
5. Pulse la tecla <Tab> hasta que aparezca seleccionado el objeto de manejo cuya función
desea ejecutar.
El visor de recetas también se puede manejar utilizando las combinaciones de teclas
correspondientes.

Manejar el visor de recetas con teclas de función
El visor de recetas se puede manejar mediante teclas de función, p. ej., si el panel de operador
no dispone de pantalla táctil. A las teclas de función del panel de operador se les pueden
asociar funciones, p. ej., "GuardarRegistro".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1153

Trabajar con recetas
6.1 Trabajar con recetas

Combinaciones de teclas para el visor de recetas avanzado
En runtime están activadas las combinaciones de teclas siguientes para el visor de recetas
avanzado si en ES está activado "Permitir utilizar teclado online".
Teclas

Efecto

Comando de menú

Llama al tooltip configurado para la receta
seleccionada.

Tooltip

Botón

Combinación
<HELP>

<Ctrl+Barra
Genera un registro de receta nuevo
espaciadora> Si se ha configurado un valor inicial, se
mostrará en el campo de entrada.

Añadir registro

<Ctrl+Intro>

Guarda el registro modificado con el nom‐ Guardar
bre actual.

<Ctrl+*>

Guarda el registro modificado con un nom‐ Guardar como
bre nuevo.

<Ctrl+Supr>

Borra el registro de receta visualizado.

<Ctrl+=>

Compara los valores del registro seleccio‐ Sincronizar variables de re‐
nado con los valores del controlador.
ceta

Borrar registro

Si el valor visualizado en el visor de rece‐
tas es más reciente que el valor actual de
la variable, dicho valor se escribirá en la
variable de la receta.
<Ctrl+Abajo>

Transfiere el valor actual al controlador.

<Ctrl+Arriba> Lee el valor actual del controlador.

Escribir en controlador

Leer del controlador

Cambio de imagen
Si cambia a una imagen diferente sin haber guardado todavía los datos modificados en el visor
de recetas, se le solicitará que almacene los datos de la receta. Para poder determinar qué
datos de receta no se han guardado todavía, se visualizan el nombre de la receta y el nombre
del registro de receta.

Consulte también
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Ejemplo de creación de una receta (Página 1192)

1154

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Administrar registros de receta
Administrar registros de receta
Para administrar los registros de recetas existen las posibilidades siguientes, dependiendo de
la configuración:
● Crear nuevos registros de recetas
● Copiar registros de recetas
● Modificar registros de recetas
● Borrar registros de recetas

Crear un nuevo registro de receta
Para crear un registro de receta nuevo, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desee crear un nuevo registro de
receta.
2. Haga clic en el botón
o pulse la combinación de teclas <Ctrl+Barra espaciadora>.
Se creará un nuevo registro de receta con el siguiente número libre.
Si cambia el nuevo número de registro por uno ya existente, se sobrescribirá el registro
existente.
3. Introduzca los valores para los elementos del registro.
Dependiendo de la configuración, los elementos del registro pueden tener valores
predeterminados.
4. Haga clic en el botón
o pulse la combinación de teclas <Ctrl+*>.
Se abrirá el cuadro de diálogo "Guardar como".
5. Introduzca un nombre para el registro.
6. Confirme su introducción con "Aceptar".
El registro se guardará con el nuevo nombre.
Si ya existe el registro, se abrirá un cuadro de diálogo. En dicho cuadro debe indicar si el
registro existente debe sobrescribirse o no.

Copiar un registro de receta
Para copiar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desea copiar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desee copiar.
3. Haga clic en el botón
del visor de recetas o pulse la combinación de teclas <Ctrl+*>.
Se abrirá el cuadro de diálogo "Guardar como".
4. Introduzca un nombre para el registro.
5. Confirme su introducción con "Aceptar".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1155

Trabajar con recetas
6.1 Trabajar con recetas

Modificar un registro de receta
Para modificar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desee modificar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desea modificar.
3. Sustituya los valores existentes por los nuevos valores.
4. Haga clic en el botón

del visor de recetas o pulse la combinación de teclas <Ctrl+Intro>.

Borrar un registro de receta
Para borrar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta de la que desee borrar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desea borrar.
3. Haga clic en el botón

del visor de recetas o pulse la combinación de teclas <Ctrl+Supr>.

Consulte también
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Ejemplo de creación de una receta (Página 1192)

Sincronizar un registro de receta
Introducción
En runtime se pueden presentar diferencias entre los valores siguientes:
● Los valores visualizados en el visor de recetas
● Los valores reales de la variables de receta
Dependiendo de la configuración es posible sincronizar los valores visualizados en el visor de
recetas con las variables de la receta. La sincronización incluye siempre todas las variables
pertenecientes a un registro de receta.
Nota
Nombre de la variable modificado
Si se ha modificado el nombre de la variable que se va a sincronizar, la variable no se podrá
asignar al valor del elemento de receta en cuestión. Las variables en cuestión no se
sincronizan.
Nota
Las variables de receta sólo pueden sincronizarse con el visor de recetas avanzado.

1156

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Requisitos
● En el visor de recetas se muestra un registro de recetas.
● Las variables de receta se han modificado p. ej. en el modo Teach-In.

Procedimiento
Para sincronizar un registro de receta, proceda de la manera siguiente:
● Haga clic en el botón

del visor de recetas o pulse la combinación de teclas <Ctrl+=>.

Si una variable de receta posee un valor más actual que el visor de recetas, se adoptará dicho
valor en el visor de recetas.
Si el valor visualizado en el visor de recetas es más reciente que el valor de la variable, la
variable de la receta adoptará dicho valor.

Consulte también
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Ejemplo de creación de una receta (Página 1192)
Sincronizar registros de receta con el controlador (Página 1128)

Leer registro de receta del controlador
Introducción
En runtime se pueden modificar directamente en la instalación los valores que también están
almacenados en las recetas del panel de operador. Esto sucede, p. ej., cuando una válvula se
ha abierto directamente en la instalación más de lo que está almacenado en la receta. En este
caso, es posible que los valores de los registros de receta guardados en el panel de operador
ya no concuerden con los valores del controlador.
Los valores de las variables de receta se pueden leer del controlador y escribir en un registro
de receta.
Los valores leídos se escriben en el registro de receta que se visualiza en ese momento en el
panel de operador.

Procedimiento
Para leer un registro de receta del controlador, proceda del siguiente modo:
1. Seleccione la receta en el panel de operador.
2. En el panel de operador, seleccione el registro de receta cuyos valores desee leer del
controlador.
3. Haga clic en el botón
+Arriba>.

del visor de recetas o pulse la combinación de teclas <Ctrl

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1157

Trabajar con recetas
6.1 Trabajar con recetas

Consulte también
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Ejemplo de creación de una receta (Página 1192)

Transferir un registro de receta al controlador
Introducción
Para que los valores de un registro modificado en el visor de recetas sean válidos en el
controlador, es preciso transferirlos a este.
Los valores visualizados en el visor de recetas son los que se transfieren al controlador.

Procedimiento
Para transferir un registro de receta al controlador, proceda del siguiente modo:
1. Seleccione la receta en el panel de operador.
2. En el panel de operador, seleccione el registro de receta cuyos valores desee transferir al
controlador.
3. Haga clic en el botón
+Abajo>.

del visor de recetas o pulse la combinación de teclas <Ctrl

Consulte también
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Ejemplo de creación de una receta (Página 1192)
Sincronizar registros de receta con el controlador (Página 1128)
Transferir registros de receta (Página 1121)

6.1.2.4

Visor de recetas avanzado (a partir de V13)

Descripción del visor de recetas avanzado (a partir de V13)
Introducción
El visor de recetas avanzado es un objeto de manejo y visualización que se utiliza para
gestionar los registros de receta. El visor de recetas muestra registros de receta en forma de
tabla.
Los botones, títulos e informaciones mostrados en las columnas se pueden ajustar.
Los valores visualizados o introducidos en el visor de recetas se guardan en registros de
receta.
La representación de los visores de recetas depende del panel y de su versión.

1158

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Utilización
En el visor de recetas es posible visualizar, modificar y gestionar registros.

Estructura del visor
La siguiente figura muestra un ejemplo del visor de recetas avanzado en un panel de operador
a partir de la versión de panel V13.

Manejo
Dependiendo de la configuración, existen las posibilidades siguientes:
● Crear, modificar, copiar o borrar registros de recetas
● Leer registros de receta del controlador o transferirlos al controlador
● Sincronizar registros de receta con las correspondientes variables de receta

Elementos de manejo
En el visor de recetas pueden estar configurados los siguientes objetos de manejo:
Elementos
de manejo

Combinación de
teclas

Función

<HELP>

Muestra el tooltip configurado.

<Ctrl+barra espa‐
ciadora>

Se crea un nuevo registro de receta.
Si se ha configurado un valor inicial, éste se visualizará en el
campo de entrada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1159

Trabajar con recetas
6.1 Trabajar con recetas
Elementos
de manejo

Combinación de
teclas

Función

<Ctrl+Intro>

Se guardan los valores visualizados del registro de receta.
La ubicación de los archivos está predeterminada en el proyecto.

<Ctrl+*>

Independientemente del visor de recetas, el registro de receta se
guarda con un nombre diferente. El nombre se introduce en un
cuadro de diálogo.

<Ctrl+Supr>

Borra el registro de receta visualizado.

<Ctrl+Mayús+T>

Se cambia el nombre del registro de receta seleccionado. El nom‐
bre se introduce en un cuadro de diálogo.

<Ctrl+=>

Si en el panel de operador se utilizan variables en una receta y en
otro punto de la configuración (p. ej., como variables de proceso
en un campo ES) y la opción de receta "Transmisión manual de
valores modificados (modo Teach-In)" está activada, se aplica lo
siguiente:
● Si el valor de una variable es más actual que el mostrado en el
visor de recetas, se adoptará este valor en el visor de recetas.
● Si el valor visualizado en el visor de recetas es más actual que
el valor de la variable, la variable adoptará dicho valor. La
sincronización solo se lleva a cabo en el panel del operador.
En este caso, la variable de proceso del campo ES mencionada
anteriormente como ejemplo no se leerá automáticamente desde
el controlador. 1)
Si en el panel de operador se utilizan variables en una receta y en
otro punto de la configuración (p. ej., como variables de proceso
en un campo ES) y la opción de receta "Transmisión manual de
valores modificados (modo Teach-In)" está desactivada, se aplica
lo siguiente:
● Si el valor de una variable es más actual que el mostrado en el
visor de recetas, se adoptará este valor en el visor de recetas.
● Si el valor visualizado en el visor de recetas es más actual que
el valor de la variable, la variable adoptará dicho valor.
La sincronización también se lleva a cabo con el controlador. 2)

1160

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
Elementos
de manejo

Combinación de
teclas

Función

<Ctrl+Abajo>

Los valores del registro de receta ajustado visualizados en el visor
de recetas se transfieren del panel de operador al controlador.

<Ctrl+Arriba>

Los valores de receta del controlador se visualizan en el visor de
recetas.

1) Las opciones "Sincronizar variables de receta" y "Transmisión manual de valores
modificados (modo Teach-In)" están activadas para la receta en "General > Sincronización >
Configuración".
2) La opción "Sincronizar variables de receta" está activada y la opción "Transmisión manual
de valores modificados (modo Teach-In)" está desactivada para la receta en "General
> Sincronización > Configuración".

Actualizar y visualizar valores
Si, debido a una petición de control, se han modificado datos del registro de receta en cuestión,
el visor de recetas no se actualizará automáticamente. Los valores se modifican en segundo
plano. Para actualizar el visor de recetas se debe volver a seleccionar el registro de recetas
correspondiente.

Consulte también
Ejemplo de creación de una receta (Página 1192)
Manejar el visor de recetas avanzado (Página 1164)
Administrar registros de receta (Página 1167)
Sincronizar un registro de receta (Página 1169)
Leer un registro de receta del controlador (Página 1171)
Transferir un registro de receta al controlador (Página 1171)
Principios básicos del visor de recetas (Página 1135)
Posibilidades de configuración del visor de recetas avanzado (a partir de V13) (Página 1161)

Posibilidades de configuración del visor de recetas avanzado (a partir de V13)
Se puede determinar el comportamiento del visor de recetas avanzado en la ventana de
inspección del mismo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1161

Trabajar con recetas
6.1 Trabajar con recetas

Mostrar una receta
Para permitir acceder a los registros de una receta concreta en una imagen, proceda del
siguiente modo:
1. En el campo "Receta" de "Propiedades > General", indique la receta deseada o seleccione
una receta existente.
2. Cuando en el campo "Receta" haya una receta, active "Mostrar lista de selección" si el
nombre de la receta debe visualizarse en runtime.

La receta deseada se mostrará en el visor de recetas.

Escribir el número o nombre de una receta o de un registro de receta en una variable
En el visor de recetas puede asociar una variable tanto a la receta como al registro de receta
en particular. Dependiendo del tipo de datos "String" o "Int" de las variables, se guardará en
ellas el nombre o el número de la receta o del registro de receta. Asimismo, puede utilizar la
variable para seleccionar la receta o el registro de receta, introduciendo para ello el valor
correspondiente. Las variables se pueden transferir, p. ej., como parámetro para una función
de sistema.
Proceda del siguiente modo:
1. En "Propiedades > General > Receta", introduzca una variable del tipo "String" en el campo
"Variable de receta".
2. En "Propiedades > General > Registro de receta", introduzca una variable del tipo "Int" en
el campo "Variable".
El nombre y el número de registro de la receta se guardan en cada caso en una variable.

1162

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Utilizar el visor de recetas como campo de selección
Para utilizar el visor de recetas como campo de selección de recetas y registros de receta en
una imagen, proceda del siguiente modo:
1. Elija la variable del nombre de receta en "General > Receta > Variable de receta".
2. Elija la variable del nombre del registro de receta en "General > Registro de receta >
Variable".
3. Desactive "Modo de edición". No es posible crear, cambiar de nombre, editar o borrar datos
de receta.
4. Para seleccionar recetas, active "Mostrar lista de selección" y asegúrese de que no está
seleccionada ninguna receta en "Propiedades > General > Receta".
5. Desactive todos los botones en "Propiedades > Barra de herramientas".

Asociar un evento al visor de recetas
Para configurar un evento para el visor de recetas, proceda del siguiente modo:
1. Seleccione el visor de recetas insertado en la imagen en el editor "Imágenes".
Las propiedades del visor de recetas se visualizarán en la ventana de inspección.
2. En "Propiedades > Eventos" de la ventana de inspección, haga clic en el evento que desea
configurar.
3. Asocie una lista de funciones al evento seleccionado.
Cuando se produce el evento configurado, se procesa la lista de funciones.

Consulte también
Ejemplo de creación de una receta (Página 1192)
Principios básicos del visor de recetas (Página 1135)
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1163

Trabajar con recetas
6.1 Trabajar con recetas
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)
Configuración de recetas (Página 1124)

Manejar el visor de recetas avanzado
Introducción
El visor de recetas puede manejarse tanto con el ratón o la pantalla táctil como con el teclado.

Manejar el visor de recetas con el ratón o la pantalla táctil
Para manejar el visor de recetas con el ratón o la pantalla táctil, proceda del siguiente modo:
1. Seleccione la receta deseada.
Se visualizarán los registros de la receta.
2. Seleccione el registro que desea editar.
3. Haga clic en el botón cuya función desea ejecutar.

Manejar el visor de recetas con el teclado
Para manejar el visor de recetas con el teclado, proceda del siguiente modo:
1. Pulse la tecla <Tab> hasta que el cursor esté en el campo para seleccionar la receta.
2. Pulse la tecla <Intro>.
Se abrirá la lista de selección de recetas.
3. Seleccione una receta. Las teclas con flecha <Izquierda>, <Derecha>, <Arriba> y <Abajo>
permiten desplazarse a la entrada siguiente o anterior de la lista.
4. Seleccione un registro.
5. Pulse la tecla <Tab> hasta que aparezca seleccionado el objeto de manejo cuya función
desea ejecutar.
El visor de recetas también se puede manejar utilizando las combinaciones de teclas
correspondientes.

Manejar el visor de recetas con teclas de función
El visor de recetas se puede manejar mediante teclas de función, p. ej., si el panel de operador
no dispone de pantalla táctil. A las teclas de función del panel de operador se les pueden
asociar funciones, p. ej., "GuardarRegistro".

1164

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Combinaciones de teclas para el visor de recetas avanzado
En runtime están activadas las combinaciones de teclas siguientes para el visor de recetas
avanzado si en ES está activado "Permitir utilizar teclado online".
Teclas

Efecto

Comando de menú

Llama al tooltip configurado para la receta
seleccionada.

Tooltip

Botón

Combinación
<HELP>

<Ctrl+Barra
Genera un registro de receta nuevo
espaciadora> Si se ha configurado un valor inicial, se
mostrará en el campo de entrada.

Añadir registro

<Ctrl+Intro>

Guarda el registro modificado con el nom‐ Guardar
bre actual.

<Ctrl+*>

Guarda el registro modificado con un nom‐ Guardar como
bre nuevo.

<Ctrl+Supr>

Borra el registro de receta visualizado.

Borrar registro

<Ctrl+Mayús
+T>

Cambia el nombre del registro marcado.

Cambiar nombre del registro

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1165

Trabajar con recetas
6.1 Trabajar con recetas
Teclas

Efecto

Comando de menú

Botón

Combinación
<Ctrl+=>

Si en el panel de operador se utilizan va‐ Sincronizar el visor de rece‐
riables en una receta y en otro punto de la tas y las variables de receta
configuración (p. ej., como variables de
proceso en un campo ES) y la opción de
receta "Transmisión manual de valores
modificados (modo Teach-In)" está activa‐
da, se aplica lo siguiente:
● Si el valor de una variable es más
actual que el mostrado en el visor de
recetas, se adoptará este valor en el
visor de recetas.
● Si el valor visualizado en el visor de
recetas es más actual que el valor de la
variable, la variable adoptará dicho
valor. La sincronización solo se lleva a
cabo en el panel del operador.
En este caso, la variable de proceso del
campo ES mencionada anteriormente co‐
mo ejemplo no se leerá automáticamente
desde el controlador. 1)
Si en el panel de operador se utilizan va‐
riables en una receta y en otro punto de la
configuración (p. ej., como variables de
proceso en un campo ES) y la opción de
receta "Transmisión manual de valores
modificados (modo Teach-In)" está desac‐
tivada, se aplica lo siguiente:
● Si el valor de una variable es más
actual que el mostrado en el visor de
recetas, se adoptará este valor en el
visor de recetas.
● Si el valor visualizado en el visor de
recetas es más actual que el valor de la
variable, la variable adoptará dicho
valor.
La sincronización también se lleva a cabo
con el controlador. 2)

<Ctrl+Abajo>

Transfiere el valor actual al controlador.

<Ctrl+Arriba> Lee el valor actual del controlador.

Escribir en el controlador
Leer del controlador

1) Las opciones "Sincronizar variables de receta" y "Transmisión manual de valores
modificados (modo Teach-In)" están activadas para la receta en "General > Sincronización >
Configuración".

1166

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
2) La opción "Sincronizar variables de receta" está activada y la opción "Transmisión manual
de valores modificados (modo Teach-In)" está desactivada para la receta en "General
> Sincronización > Configuración".

Cambio de imagen
Si cambia a una imagen diferente sin haber guardado todavía los datos modificados en el visor
de recetas, se le solicitará que almacene los datos de la receta. Para poder determinar qué
datos de receta no se han guardado todavía, se visualizan el nombre de la receta y el nombre
del registro de receta.

Consulte también
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)

Administrar registros de receta
Administrar registros de receta
Para administrar los registros de recetas existen las posibilidades siguientes, dependiendo de
la configuración:
● Crear nuevos registros de recetas
● Copiar registros de recetas
● Modificar registros de recetas
● Borrar registros de recetas
● Cambiar el nombre de los registros de receta

Crear un nuevo registro de receta
Para crear un registro de receta nuevo, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desee crear un nuevo registro de
receta.
2. Haga clic en el botón
o pulse la combinación de teclas <Ctrl+Barra espaciadora>.
Se creará un nuevo registro de receta con el siguiente número libre.
Si cambia el nuevo número de registro por uno ya existente, se sobrescribirá el registro
existente.
3. Introduzca los valores para los elementos del registro.
Dependiendo de la configuración, los elementos del registro pueden tener valores
predeterminados.
4. Introduzca un nombre para el registro.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1167

Trabajar con recetas
6.1 Trabajar con recetas
5. Haga clic en el botón
o pulse la combinación de teclas <Ctrl+Intro>.
Otra posibilidad consiste en hacer clic en el botón
para guardar el registro o pulsar la
combinación de teclas <Ctrl+*>.
Se abrirá el cuadro de diálogo "Guardar como". Introduzca el nombre del registro y confirme
las entradas con "Aceptar".
6. El registro se guardará con el nuevo nombre.
Si ya existe el registro, se abrirá un cuadro de diálogo. En dicho cuadro debe indicar si el
registro existente debe sobrescribirse o no.

Copiar un registro de receta
Para copiar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desea copiar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desee copiar.
3. Haga clic en el botón
del visor de recetas o pulse la combinación de teclas <Ctrl+*>.
Se abrirá el cuadro de diálogo "Guardar como".
4. Introduzca un nombre para el registro.
5. Confirme su introducción con "Aceptar".

Modificar un registro de receta
Para modificar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta en la que desee modificar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desea modificar.
3. Sustituya los valores existentes por los nuevos valores.
4. Haga clic en el botón
+Intro>.

del visor de recetas o pulse la combinación de teclas <Ctrl

Borrar un registro de receta
Para borrar un registro de receta, proceda del siguiente modo:
1. Seleccione en el panel de operador la receta de la que desee borrar un registro de receta
existente.
2. Seleccione en el panel de operador el registro de receta que desea borrar.
3. Haga clic en el botón
+Supr>.

1168

del visor de recetas o pulse la combinación de teclas <Ctrl

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Cambiar el nombre del registro de receta
Para cambiar el nombre de un registro de receta, proceda del siguiente modo:
1. En el panel de operador, seleccione la receta en la que desee cambiar el nombre de un
registro de receta existente.
2. En el panel de operador, seleccione el registro de receta cuyo nombre desee cambiar.
3. Haga clic en el botón
+Mayús+T>.

del visor de recetas o pulse la combinación de teclas <Ctrl

4. Introduzca un nuevo nombre en la ventana de diálogo.

Consulte también
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)

Sincronizar un registro de receta
Introducción
En runtime se pueden presentar diferencias entre los valores siguientes:
● Los valores visualizados en el visor de recetas
● Los valores reales de la variables de receta
Dependiendo de la configuración es posible sincronizar los valores visualizados en el visor de
recetas con las variables de la receta. La sincronización incluye siempre todas las variables
pertenecientes a un registro de receta.
Nota
Nombre de la variable modificado
Si se ha modificado el nombre de la variable que se va a sincronizar, la variable no se podrá
asignar al valor del elemento de receta en cuestión. Las variables en cuestión no se
sincronizan.
Nota
Las variables de receta sólo pueden sincronizarse con el visor de recetas avanzado.

Requisitos
● En el visor de recetas se muestra un registro de recetas.
● Las variables de receta se han modificado p. ej. en el modo Teach-In.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1169

Trabajar con recetas
6.1 Trabajar con recetas

Procedimiento
Para sincronizar un registro de receta, proceda de la manera siguiente:
● Haga clic en el botón

del visor de recetas o pulse la combinación de teclas <Ctrl+=>.

Resultado
El resultado depende de la configuración:
● Las opciones "Sincronizar variables de receta" y "Transmisión manual de valores
modificados (modo Teach-In)" están activadas para la receta en "General > Sincronización
> Configuración".
Si en el panel de operador se utilizan variables en una receta y en otro punto de la
configuración (p. ej., como variables de proceso en un campo ES) y la opción de receta
"Transmisión manual de valores modificados (modo Teach-In)" está activada, se aplica lo
siguiente:
– Si el valor de una variable es más actual que el mostrado en el visor de recetas, se
adoptará este valor en el visor de recetas.
– Si el valor visualizado en el visor de recetas es más actual que el valor de la variable, la
variable adoptará dicho valor. La sincronización solo se lleva a cabo en el panel del
operador.
En este caso, la variable de proceso del campo ES mencionada anteriormente como
ejemplo no se leerá automáticamente desde el controlador.
● La opción "Sincronizar variables de receta" está activada y la opción "Transmisión manual
de valores modificados (modo Teach-In)" está desactivada para la receta en "General
> Sincronización > Configuración".
Si en el panel de operador se utilizan variables en una receta y en otro punto de la
configuración (p. ej., como variables de proceso en un campo ES) y la opción de receta
"Transmisión manual de valores modificados (modo Teach-In)" está desactivada, se aplica
lo siguiente:
– Si el valor de una variable es más actual que el mostrado en el visor de recetas, se
adoptará este valor en el visor de recetas.
– Si el valor visualizado en el visor de recetas es más actual que el valor de la variable, la
variable adoptará dicho valor.
La sincronización también se lleva a cabo con el controlador.

Consulte también
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)
Sincronizar registros de receta con el controlador (Página 1128)

1170

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Leer un registro de receta del controlador
Introducción
En runtime se pueden modificar directamente en la instalación los valores que también están
almacenados en las recetas del panel de operador. Esto sucede, p. ej., cuando una válvula se
ha abierto directamente en la instalación más de lo que está almacenado en la receta. En este
caso, es posible que los valores de los registros de receta guardados en el panel de operador
ya no concuerden con los valores del controlador.
Los valores de las variables de receta se pueden leer del controlador y escribir en un registro
de receta.
Los valores leídos se escriben en el registro de receta que se visualiza en ese momento en el
panel de operador.

Procedimiento
Para leer un registro de receta del controlador, proceda del siguiente modo:
1. Seleccione la receta en el panel de operador.
2. En el panel de operador, seleccione el registro de receta cuyos valores desee leer del
controlador.
3. Haga clic en el botón
+Arriba>.

del visor de recetas o pulse la combinación de teclas <Ctrl

Consulte también
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)

Transferir un registro de receta al controlador
Introducción
Para que los valores de un registro modificado en el visor de recetas sean válidos en el
controlador, es preciso transferirlos a este.
Los valores visualizados en el visor de recetas son los que se transfieren al controlador.

Procedimiento
Para transferir un registro de receta al controlador, proceda del siguiente modo:
1. Seleccione la receta en el panel de operador.
2. En el panel de operador, seleccione el registro de receta cuyos valores desee transferir al
controlador.
3. Haga clic en el botón
+Abajo>.

del visor de recetas o pulse la combinación de teclas <Ctrl

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1171

Trabajar con recetas
6.1 Trabajar con recetas

Consulte también
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)
Sincronizar registros de receta con el controlador (Página 1128)
Transferir registros de receta (Página 1121)

6.1.2.5

Exportar e importar datos de receta

Exportar e importar registros de receta
Introducción
Puede exportar registros de recetas a un archivo CSV o TXT para editarlos, p. ej., en MS Excel
o bien importarlos desde un archivo.
La exportación e importación de recetas depende de la configuración del panel y su versión.

Separador de listas
Para separar los registros se utiliza un carácter separador en la importación y exportación. El
carácter separador utilizado de forma estándar depende de la configuración de los formatos y
números en el sistema operativo.
Estos ajustes se encuentran bajo "Inicio > Configuración > Panel de operador > Configuración
regional".
Si desea importar o exportar registros de recetas, no utilice este carácter separador en el
nombre de visualización de los registros de la receta.
Para el manejo de la función de exportación-importación pueden estar configurados, p. ej., los
siguientes objetos de manejo:
● Campo para seleccionar la receta
● Campo para seleccionar el registro de receta
● Objeto de mando con la función "ExportarRegistros"
● Objeto de mando con la función "ImportarRegistros"

Exportar un registro de receta
Para exportar un registro de receta a un archivo CSV, proceda de la manera siguiente:
1. En los campos de selección, seleccione la receta y el registro de receta deseados.
2. Haga clic en el objeto de manejo con la funcionalidad "ExportarRegistros".

1172

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Importar un registro de receta
Para importar un registro de receta, proceda de la manera siguiente:
1. En los campos de selección, seleccione la receta y el registro de receta deseados.
2. Haga clic en el objeto de manejo con la funcionalidad "ImportarRegistros".
Vista tras importar recetas
Si abre el visor de recetas mientras importa datos de receta, se mostrarán sólo los datos de
receta que se acaben de importar por completo. El visor de recetas no se actualiza
automáticamente durante la importación de datos. Para visualizar todos los datos de receta,
no abra el visor de recetas hasta que no aparezca el aviso de sistema indicando que se han
importado correctamente los datos de receta.
Como alternativa, actualice el visor de recetas tras finalizar correctamente la importación.

Restricciones de importación/exportación
En los Basic Panels las recetas se pueden exportar a un archivo TXT o importar desde un
archivo TXT con las funciones de sistema "ExportarRegistros" e "ImportarRegistros".
Nota
Exportación e importación con ProSave a formato CSV
Los registros de receta no pueden exportarse ni importarse con ProSave a formato CSV.
Solo los datos de receta completos pueden exportarse e importarse con ProSave a formato
CSV y transferirse al panel de operador.
Runtime se detiene durante el proceso.

Consulte también
Comportamiento del visor de recetas en runtime (Página 1174)

Comportamiento al cambiar la estructura de receta
Introducción
En los casos siguientes pueden divergir las estructuras de las recetas:
● Cuando se producen cambios durante la puesta en marcha
● Cuando un ingeniero mecánico perfecciona una máquina (Retro-Fit)
● Cuando se importan archivos CSV durante la importación, la estructura del archivo CSV
puede diferir de la estructura de la receta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1173

Trabajar con recetas
6.1 Trabajar con recetas
Sin embargo, es posible seguir utilizando los registros de recetas ya creados.
ATENCIÓN
Cuando se cambia el nombre de la variable se pierde la asignación.

Efectos
Las divergencias en la estructura se tratan como se indica a continuación:
● Si el antiguo registro de receta o el archivo CSV contienen valores adicionales, se rechazan
estos valores.
● Si el antiguo registro de receta o el archivo CSV contienen valores de un tipo de datos
incorrecto, en el registro de receta se utilizará el valor estándar configurado.
Ejemplo: El registro de receta contiene valores que indican el contenido del tanque y fueron
introducidos como números de coma flotante. No obstante, la variable de receta
correspondiente espera un valor entero. En este caso se rechazará el valor transferido y se
utilizará el valor estándar configurado.
● Si el antiguo registro de receta o el archivo CSV no contienen suficientes valores, en el
registro de receta se utilizará asimismo el valor estándar configurado.

Consulte también
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)
Principios básicos del visor de recetas (Página 1135)

Comportamiento del visor de recetas en runtime
Cambio de imagen
Si cambia a una imagen diferente sin haber guardado todavía los datos modificados en el visor
de recetas, se le solicitará que almacene los datos de la receta. Para poder determinar qué
datos de receta no se han guardado todavía, se visualizarán el nombre de la receta y del
registro de receta.

Crear, modificar, copiar o borrar registros de recetas
Si desea crear de nuevo un registro de receta y ya existe uno se visualizará un aviso de sistema
en la pantalla.

Manejo del visor de recetas con teclas de función
El visor de recetas se puede manejar mediante teclas de función, p. ej. si el panel de operador
no dispone de pantalla táctil. A las teclas de función del panel de operador se les pueden
asociar funciones, p. ej. "GuardarRegistro".

1174

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Vista tras importar datos de receta
Nota
Disponibilidad
La importación y exportación de datos de receta no está disponible para Basic Panels.
Si abre el visor de recetas mientras importa datos de receta, se mostrarán sólo los datos de
receta que se acaben de importar por completo. El visor de recetas no se actualiza
automáticamente durante la importación de datos. Para visualizar de forma completa de todos
los datos de receta, no abra el visor de recetas hasta que no aparezca el aviso de sistema
indicando que se han importado correctamente los datos de receta. Como alternativa el visor
de recetas se actualiza tras finalizar correctamente la importación.

Actualizar la variable para recetas y registros de recetas
Nota
Disponibilidad
Las variables para recetas y registros de recetas no están disponibles para Basic Panels.
Dependiendo de la configuración, el registro de receta actual y/o su número se pueden
almacenar en una variable. La variable se actualiza cuando se cumplen las siguientes
condiciones:
● Ha finalizado la carga del registro de receta.
● No se ha salido de la imagen que contiene el visor de recetas durante la carga.
Este proceso puede tardar varios minutos.

Consulte también
Exportar e importar registros de receta (Página 1172)
Descripción del visor de recetas avanzado (antes de V13) (Página 1148)
Descripción del visor de recetas avanzado (a partir de V13) (Página 1158)
Principios básicos del visor de recetas (Página 1135)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1175

Trabajar con recetas
6.1 Trabajar con recetas

6.1.3

Configurar recetas

6.1.3.1

Crear y editar recetas

Procedimiento general de configuración
Si desea crear una nueva receta, siga los pasos de configuración siguientes:
Paso

Descripción

1

Defina la estructura de la receta.

2

Cree las variables conforme a la estructura de la receta.
Asigne nombres tecnológicos a las variables.

3

Cree la receta.

4

Introduzca las propiedades deseadas para la receta.
● Nombre de visualización de la receta dependiente del idioma
● Opción "Transferencia coordinada de los registros"
No válido para Basic Panels:
● Ubicación de las recetas
● Opción "Sincronizar el visor de recetas y las variables de receta"
● Opción "Transferencia manual de valores individuales modificados (modo "TeachIn")".

5

Cree los elementos de receta e indique las propiedades deseadas:
● Nombres de visualización de los elementos de receta dependientes del idioma
● Enlace de variables de los elementos de receta
● Valores estándar y decimales (potencia de diez) de los elementos de receta

6

Cree los registros de receta.
Introduzca los nombres de visualización dependientes del idioma para los registros de
receta.

7

Configure una imagen con un visor de recetas o una imagen de receta.

Nota
Basic Panels
La selección de la ubicación no está disponible para estos equipos. Las recetas se guardan
siempre en la memoria flash interna.
Las variables de receta no se pueden utilizar fuera de una receta, p. ej., no en campos E/S, no
como variables de disparo en avisos, no como parámetros en funciones de sistema, etc.
Nota
Limitaciones en el visor de recetas y la imagen de receta
En los Basic Panels solo está disponible el visor de recetas simple. Las imágenes de receta no
están disponibles en los Basic Panels.

1176

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Crear una receta nueva
Introducción
Para crear una receta completa primero debe crearse una receta nueva, asignar elementos a
la receta y definir los valores correspondientes en un registro de receta.
Nota
Cadenas de caracteres importables
Los datos de receta que contienen un punto y coma o una coma no son importables.
Para recetas y registros de receta, utilice solo cadenas de caracteres sin punto y coma ni coma.

Requisitos
● Las variables de la receta deben existir.
● El editor "Recetas" está abierto.

Crear una receta
Para crear una receta, proceda del siguiente modo:
1. En el editor "Recetas", haga clic en "Agregar" en la primera fila libre de la tabla.
La receta nueva se crea y se muestra en una fila.

2. En el área "General", introduzca un nombre que describa la receta en "Nombre".
El nombre identifica de forma unívoca la receta dentro de un panel de operador.
3. En "Nombre de visualización" introduzca el nombre dependiente del idioma que deba
aparecer en el visor de recetas.
4. Seleccione un número de receta bajo "Número".
El número identifica de forma unívoca la receta dentro del panel de operador.
La receta recibe automáticamente una versión que muestra la fecha y hora de la última
modificación. Aquí también se puede introducir información relacionada con la receta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1177

Trabajar con recetas
6.1 Trabajar con recetas
5. Bajo "Archivo de datos", determine la ubicación de los registros de receta. Las posibilidades
ofrecidas dependen del panel de operador utilizado.
Nota
Basic Panels
La selección de la ubicación no está disponible para estos equipos. Las recetas se guardan
siempre en la memoria flash interna.
Las variables de receta no se pueden utilizar fuera de una receta, p. ej., no en campos E/S,
no como variables de disparo en avisos, no como parámetros en funciones de sistema, etc.
6. Introduzca un tooltip que se mostrará al operador en runtime.
7. Para sincronizar en runtime las variables de receta configuradas en campos E/S con el
visor de recetas, active "Sincronizar el visor de recetas y las variables de receta" en
"Propiedades > Sincronización" de la ventana de inspección.

Nota
Basic Panels
Puesto que en los Basic Panels las variables de receta no pueden utilizarse adicionalmente
en los campos E/S de imágenes, la opción "Sincronizar el visor de recetas y las variables
de receta" no está disponible, y en lo sucesivo tampoco la opción "Transferencia manual de
valores individuales modificados (modo "Teach-In")".
8. Para determinar que las variables de receta se transfieran automáticamente al controlador
cuando se editen en los campos E/S, desactive "Transferencia manual de valores
individuales modificados (modo "Teach-In")".
9. Para poder supervisar en runtime la transferencia de datos de receta mediante punteros de
área, active "Transferencia coordinada de los registros".
10.Para la transferencia coordinada seleccione la conexión correspondiente con el controlador
en "Sincronizar con".

Crear un elemento de receta
Para crear elementos de receta, proceda del siguiente modo:
1. Haga clic en la ficha "Elementos".
2. En la primera fila libre del editor de tablas haga clic en "Añadir".
Se crea un elemento de receta nuevo.

1178

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
3. En "Nombre" introduzca un nombre que describa el elemento.
El nombre identifica de forma unívoca el elemento en la receta.
4. En "Nombre de visualización" introduzca un nombre dependiente del idioma para el
elemento.
El nombre de visualización aparece en runtime en el visor de recetas, p. ej.
5. En "Variable", seleccione la variable que desea asociar al elemento de receta.
En esta variable se guarda en runtime el valor del elemento de receta que está guardado
en un registro de receta.

6. Introduzca un tooltip.
El tooltip se muestra al operador en runtime.
7. En "Valor estándar" introduzca el valor que desea utilizar como entrada estándar al crear un
registro de receta nuevo.
8. Si desea asignar texto a un valor o a un rango de valores, seleccione aquí la lista de textos
correspondiente. La variable de receta asignada debe ser de un tipo de datos numérico. El
valor de la variable debe estar dentro del rango de valores de la lista de textos.
El texto almacenado en la lista de textos se mostrará en runtime en un campo de salida,
por ejemplo.
9. Especifique en la columna "Decimales" con cuántos decimales se redondea exactamente
un valor decimal (p. ej., 3 decimales) y, a la inversa, por qué potencia de diez se multiplica
un valor entero (p. ej., 1000).
Ejemplo con 3 decimales: la entrada "5" en un elemento de receta con el tipo de datos
"Integer" devuelve el valor "5000". La entrada "5,6789" en un elemento de receta con el tipo
de datos "Real" devuelve el valor "5,679".
10.Cree todos los elementos que necesite para la receta. La cantidad máxima admisible de
elementos de receta depende del panel de operador utilizado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1179

Trabajar con recetas
6.1 Trabajar con recetas

Crear un registro de receta con valores de receta conocidos
Para crear elementos de receta, proceda del siguiente modo:
1. Haga clic en la ficha "Registros".
2. En la primera fila libre del editor de tablas haga clic en "Añadir".
Se crea un registro de receta nuevo. El registro de recetas contiene una columna propia
para cada elemento creado en la receta.

3. En "Nombre" introduzca un nombre que describa el registro de receta.
El nombre identifica de forma unívoca el registro en la receta.
4. En "Nombre de visualización" introduzca un nombre dependiente del idioma.
El nombre de visualización aparece en runtime en el visor de recetas, p. ej.
5. En "Número" introduzca un número para el registro de receta.
El número del registro de receta identifica de forma unívoca el registro en la receta.
6. Si ya conoce los valores de la receta durante la configuración, introduzca el valor
correspondiente a cada elemento de receta.

7. Cree todos los registros que necesite para la receta.

1180

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Entrada de valores en runtime
Existen las posibilidades siguientes para introducir valores en los registros de receta en
runtime:
● Transferir datos directamente del controlador (modo "Teach-In")
● Importar valores de un archivo CSV
● Introducir valores en el panel de operador.
Nota
Basic Panels
La importación de valores no está disponible para estos equipos.

Resultado
La receta completa está configurada.

Registros de receta con fecha y hora
Si utiliza indicaciones de fecha y hora, asegúrese de que la fecha y hora del sistema en el
equipo de configuración coincida con la del sistema de destino. Ejemplo: a las 13:55 se carga
un registro de receta en el sistema de destino en el que está guardado el tiempo de ejecución
14:00. Si en el equipo de destino ya son las 14:05, la receta ya no se procesa. Si un operador
edita la receta, los datos de modificación no se reescribirán correctamente en la base de datos.
Después de cargar en el sistema de destino, es necesario comprobar las recetas con
indicación de fecha y hora en el sistema de destino.

Editar recetas
Finalidad
Desea modificar o ampliar una receta, o bien borrar partes de la misma.

Requisitos
● Se ha creado una receta como mínimo.
● El editor "Recetas" está abierto.

Modificar la configuración de una receta
Para modificar la configuración de una receta, proceda del siguiente modo:
1. En el editor "Recetas" seleccione la receta que desea modificar.
Se abre la ventana de inspección.
2. Modifique la configuración de la receta en la ventana de inspección.
Los elementos y registros de receta se modifican del mismo modo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1181

Trabajar con recetas
6.1 Trabajar con recetas

Modificar los valores de una receta
Para modificar los valores de una receta, proceda del siguiente modo:
1. Seleccione la receta cuyos valores desea modificar.
2. Haga clic en la ficha "Registros".
3. Introduzca los valores nuevos en las columnas correspondientes.

Añadir un elemento de receta
Para añadir elementos adicionales a una receta, proceda del siguiente modo:
1. En el editor "Recetas" seleccione la receta a la que desea añadir elementos.
2. Haga clic en la ficha "Elementos".
3. En la primera fila libre haga clic en "Añadir".
Se crea el elemento de receta.
4. Configure el elemento de receta.
Los registros de receta se añaden del mismo modo.

Administrar recetas
Requisitos
● Se ha creado una receta con elementos y registro de receta.
● El editor "Recetas" está abierto.

Cambiar el nombre de las recetas
En las recetas, en los elementos de receta y en los registros de receta se distingue entre el
nombre interno y el nombre de visualización.
Para cambiar el nombre de las recetas, proceda del siguiente modo:
1. Seleccione la receta cuyo nombre desea modificar.
Se abre la ventana de inspección.
2. En el menú contextual, seleccione el comando "Cambiar nombre".
3. Introduzca el nuevo nombre.
Los nombres de los elementos y registros de receta se cambian del mismo modo en la ficha
correspondiente.
Nota
Los nombres de visualización que aparecen en el editor "Recetas" también se pueden
cambiar en "Idiomas y recursos > Textos del proyecto". Ello resulta útil si ha realizado la
configuración en varios idiomas, por ejemplo.

1182

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Copiar y pegar recetas
Para copiar y pegar recetas, proceda del siguiente modo:
1. Seleccione la receta que desee copiar.
2. En el menú contextual, elija el comando "Copiar".
3. En la primera fila libre de la tabla elija el comando "Pegar" del menú contextual.
La receta copiada se insertará en la tabla. Junto con la receta también se copian los elementos
y registros de receta en la ficha correspondiente.
Los elementos y registros de receta se copian además del mismo modo en la ficha
correspondiente.
Si ya existe un registro de receta con el mismo nombre, se le añadirá un número al nombre del
registro de receta copiado. Así se garantiza que el nombre sea unívoco. Los registros de receta
sólo se pueden copiar e insertar en una misma receta.

Borrar una receta
Para borrar una receta, proceda del siguiente modo:
1. Seleccione la receta que desea borrar.
2. En el menú contextual, elija el comando "Borrar".
La receta se borrará.
Los elementos y registros de receta se borran del mismo modo en la ficha correspondiente.
Nota
Al borrar una receta se borran los registros contenidos en ella.
Nota
Al borrar un elemento de receta se borrarán también los valores correspondientes en los
registros de la receta. Las variables asociadas se conservan.

Importar recetas a la configuración y exportarlas nuevamente
Introducción
Es posible exportar recetas como archivos CSV y volverlas a importar a la configuración.

Caso de aplicación
Exporta datos de receta para guardarlos y asegurarlos a largo plazo en un equipo.
Para unificar y distribuir datos de receta, exporte los datos de receta a un panel de operador.
Modifica los archivos CSV en Microsoft Excel y los importa a todos los paneles de operador que
necesiten los mismos datos de receta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1183

Trabajar con recetas
6.1 Trabajar con recetas
Se intercambian datos de receta entre distintos proyectos. Se modifican datos de receta en
runtime. Para transferir al WinCC ES los datos de receta modificados, exporte los registros de
receta en runtime y copie el archivo CSV al equipo de configuración. Desde allí, importe a la
receta el archivo CSV con los registros de receta. Y en sentido inverso: los registros de receta
modificados en el WinCC ES se transfieren en runtime al panel de operador.

Requisitos
● La receta está creada.
● La estructura del archivo CSV exportado coincide con la estructura de la receta en el
WinCC ES: el nombre, número y tipo de datos de los elementos de receta coinciden,
respectivamente.
● El editor "Recetas" está abierto.
● En el archivo de importación, el punto y coma y la coma solo tienen la función de
separadores.

Importar un archivo CSV
Para importar registros de receta a una receta, proceda del siguiente modo:
1. Marque la fila que contiene la receta deseada en la ficha "Recetas".
2. En el menú contextual, seleccione el comando "Importar datos de receta".
Se abre el cuadro de diálogo "Importación".

1184

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
3. Elija el archivo CSV deseado en "Nombre de archivo".
4. Defina en "Estrategia" si un registro de receta existente en el WinCC ES debe
sobrescribirse en caso de que tenga el mismo número de receta.
5. Elija el separador de decimales y de listas en "Separación de datos". El separador de listas
separa los distintos elementos de receta en el archivo CSV. El separador de decimales
separa el número entero y los decimales.
Nota
Al importar utilice el mismo separador de listas utilizado en el archivo CSV durante la
exportación.
6. Inicie el proceso pulsando el botón "Importación".

Resultado
La receta se amplía con registros que aún no existen del archivo CSV. Si ha elegido la opción
correspondiente, se sobrescriben los registros de receta existentes.
Si la estructura de la receta no coincide con la estructura del archivo CSV, en la ventana de
inspección se visualizará un mensaje de error en "Información".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1185

Trabajar con recetas
6.1 Trabajar con recetas

Exportar un archivo CSV
1. Marque en la ficha "Recetas" la fila que contiene la receta que desea exportar.
2. En el menú contextual, seleccione el comando "Exportar datos de receta".
Se abre el cuadro de diálogo "Exportación".

3. Introduzca en "Nombre de archivo" la ruta del archivo CSV.
4. Seleccione en "Selección de contenido" todos los registros de receta o limite la selección a
determinados números de registro.
5. Elija el separador de decimales y de listas en "Separación de datos". El separador de listas
separa los distintos elementos de receta en el archivo CSV. El separador de decimales
separa el número entero y los decimales.
6. Inicie el proceso pulsando el botón "Exportación".

Resultado
La receta se exporta como archivo CSV.

1186

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

6.1.3.2

Configurar la visualización de la receta

Configurar el visor de recetas simple
Requisitos
● La receta se ha creado.
● El editor "Imágenes" está abierto.
● La imagen está creada y abierta.
ATENCIÓN
Pérdida de datos en caso de varios visores de recetas en la imagen
Sólo rige para Basic Panels, OP73, OP77A, TP177A y TP177A (Portrait): Si dos o más
visores de recetas muestran la misma receta en una imagen, al acceder a los datos se
crea un conflicto.
Esto genera un estado impredecible de los datos de receta o bien la pérdida de los mismos.
Asegúrese de que el operador no pueda seleccionar ni modificar la misma receta en
diferentes visores de recetas.
● Muestre en cada visor de recetas sólo una receta, respectivamente.
● Muestre en cada visor de recetas una receta distinta, respectivamente.

Procedimiento
Para configurar un visor de recetas simple, proceda del siguiente modo:
1. Inserte el visor de recetas en la imagen. El visor de recetas se encuentra en "Controles" de
la Task Card "Herramientas".
2. Solo con equipos que también soporten el visor de recetas avanzado: Active "Vista simple"
en "Propiedades > Representación > Modo".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1187

Trabajar con recetas
6.1 Trabajar con recetas
3. Si desea visualizar sólo los registros de una determinada receta en el visor de recetas,
seleccione la receta deseada bajo "Propiedades > General > Receta".

4. Si en el visor de recetas desea ver únicamente los datos de receta, desactive "Modo de
edición" en el área "Registro de receta".
5. En "Propiedades > Apariencia" y "Propiedades > Representación" defina opciones de
visualización adicionales del visor de recetas.
6. En "Propiedades > Barra de herramientas", determine qué comandos de menú deben estar
disponibles en runtime en el visor de recetas.

Resultado
El visor de recetas simple quedará configurado. En runtime podrá utilizar el visor de recetas
para visualizar o editar los datos de las recetas.

1188

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
Desactivar el modo de edición en "Propiedades > Propiedades > General" no tiene efecto
sobre los botones de la barra de herramientas. Los botones activados en "Propiedades > Barra
de herramientas" también se pueden manejar con el modo de edición desactivado.

Configurar el visor de recetas avanzado
Requisitos
● La receta se ha creado.
● El editor "Imágenes" está abierto.
● La imagen está creada y abierta.

Procedimiento
Para configurar un visor de recetas avanzado, proceda de la manera siguiente:
1. Inserte el visor de recetas en la imagen. El visor de recetas se encuentra en la Task Card
"Herramientas > Controles".
2. En la ventana de inspección, seleccione "Propiedades > Representación > Modo > Vista
avanzada".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1189

Trabajar con recetas
6.1 Trabajar con recetas
3. Introduzca los ajustes deseados en el grupo "General" de la ventana de inspección.
– Si desea visualizar sólo los registros de una determinada receta en el visor de recetas,
seleccione la receta deseada bajo "Receta" en el área "Receta".
– Si desea guardar el nombre o el número de la receta en una variable, seleccione la
variable deseada bajo "Variable de receta" en el área "Receta".
– Si desea guardar el nombre o el número del registro de receta en una variable,
seleccione la variable deseada bajo "Variable" en el área "Registro de receta".
– Si sólo desea visualizar los datos de la receta en el visor de recetas, desactive "Modo de
edición".
– Si desea utilizar el visor de recetas sólo para seleccionar recetas, desactive
"Propiedades > Tabla > Mostrar tabla".
4. En "Propiedades > Apariencia" y "Propiedades > Representación" defina opciones de
visualización adicionales del visor de recetas.
5. Si desea modificar la rotulación en el visor de recetas, introduzca textos personalizados en
"Propiedades > Títulos".
6. En "Propiedades > Barra de herramientas", determine qué botones deben estar disponibles
en runtime en el visor de recetas.

Nota
Si selecciona el comando "Edición" del menú contextual del visor de recetas, ésta se
activará. Para poder activar el visor de recetas, el factor de zoom se deberá ajustar a 100
%.
En el modo activo puede modificar el ancho y la posición de las columnas "Nombre de
entrada" y "Valor".

1190

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Resultado
El visor de recetas quedará configurada. En runtime podrá utilizar el visor de recetas para
visualizar o editar los datos de las recetas.
Desactivar el modo de edición en "Propiedades > Propiedades > General" no tiene efecto
sobre los botones de la barra de herramientas. Los botones activados en "Propiedades > Barra
de herramientas" también se pueden manejar con el modo de edición desactivado.

Configurar una imagen de receta
Introducción
Una imagen de receta es una imagen para la que se configura una máscara de entrada
personalizada en el editor "Imágenes". La máscara de entrada se crea utilizando campos de
entrada y salida y otros objetos de manejo y visualización. La funcionalidad de la receta se
configura utilizando funciones de sistema p. ej. para guardar registros de receta.
Nota
Disponibilidad
No se pueden crear imágenes de receta para Basic Panels.

Utilización
Los registros de receta que contengan numerosas entradas se pueden distribuir en varias
imágenes. Por ejemplo, para cada área de la instalación se puede configurar una imagen con
las correspondientes máscaras de entrada para los registros de receta.
Si lo desea, puede reproducir su máquina visualmente en una imagen con objetos de imagen
gráficos. Así se puede visualizar más claramente la parametrización, emplazando campos E/
S directamente junto a elementos de la máquina tales como ejes o guías. Gracias a ello podrá
crear una relación directa entre los valores y la máquina.

Requisitos
● La receta está creada.
● El editor "Imágenes" está abierto.

Procedimiento
Para configurar una imagen de receta, proceda del siguiente modo:
1. Configure la imagen y cree allí los campos E/S necesarios para la máscara de entrada de
la receta.
Dependiendo del tamaño y de la complejidad de la receta, podrá crear también varias
imágenes.
2. Configure los campos E/S con las variables que ha asociado a los elementos de la receta.
3. Configure campos E/S para seleccionar las recetas y los registros de receta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1191

Trabajar con recetas
6.1 Trabajar con recetas
Procedimiento alternativo:
1. Configure un visor de recetas como lista de selección de recetas y registros de receta.
2. Oculte en el visor de recetas los botones que no necesite.
3. Configure en los elementos de mando las funciones de sistema necesarias para editar los
registros de receta.
Los elementos de mando son botones configurados en la imagen, o bien teclas de función
en el panel de operador.
Las funciones de sistema para editar registros de receta figuran en "Recetas" y "Manejo del
teclado para objetos de imagen".

Resultado
Se habrá creado la imagen imagen de proceso.

6.1.4

Ejemplos

6.1.4.1

Ejemplo de creación de una receta

Tarea
En este ejemplo se crean tres recetas para una planta de producción de zumos de frutas. En
la planta de producción de zumos se fabrican los sabores "naranja", "manzana" y "tropical".
Para cada uno de los sabores se crea una receta correspondiente.
Cada receta contiene un registro de receta para cada una de las siguientes proporciones de
mezcla:
● Refresco
● Néctar
● Zumo

Configuración
Los ajustes se refieren a un panel de operador acoplado a un controlador SIMATIC S7-300 o
SIMATIC S7-400.
Para el ejemplo necesitará las siguientes variables, recetas, elementos de receta y registros
de receta:
Variables:

1192

Nombre

Conexión al controlador Dirección

Tipo

LitreWater

Sí

DB 120, DBW 0

Integer

LitreConcentrate

Sí

DB 120, DBW 4

Integer

KiloSugar

Sí

DB 120, DBW 8

Integer

GramAroma

Sí

DB 120, DBW 12

Integer

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
Recetas:
● Naranja
● Manzana
● Tropical
Elementos de receta:
Elemento de receta

Variable asociada

Litro de agua

LitreWater

Litro de concentrado

LitreConcentrate

Kilo de azúcar

KiloSugar

Gramo de aroma

GramAroma

Registros de receta "Refresco", "Néctar" y "Zumo":
Nombre de regis‐
tro

Litro de agua

Litro de concentra‐ Kilo de azúcar
do

Gramo de aroma

Refresco

30

70

45

600

Néctar

50

50

10

300

Zumo

5

95

3

100

Procedimiento
Para crear la receta, proceda de la manera siguiente:
1. Cree las variables "LitreWater", "LitreConcentrate", "KiloSugar" y "GramAroma" con los
ajustes indicados más arriba.
2. Cree las recetas "Naranja", "Manzana" y "Tropical" con los ajustes indicados más arriba.
Cree los elementos de receta en cada una de las recetas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1193

Trabajar con recetas
6.1 Trabajar con recetas
3. No en los Basic Panels: Configure cada receta de modo que los registros de receta se
sincronicen entre la imagen de receta y el visor de recetas. Los valores de las variables de
receta no se deben transferir automáticamente al controlador.
Para ello es preciso realizar los siguientes ajustes en la ventana de propiedades de la
receta en cuestión:
En "Propiedades > Herramientas":
– Active "Sincronizar el visor de recetas y las variables de receta".
– Active "Transferencia manual de valores individuales modificados (modo "Teach-In")".
4. Cree en cada receta los registros de datos mencionados. Introduzca en cada registro los
valores indicados.

Resultado
Se crearán las tres recetas "Naranja", "Manzana" y "Tropical".

Consulte también
Posibilidades de configuración del visor de recetas avanzado (a partir de V13) (Página 1161)

6.1.4.2

Ejemplo de configuración de una imagen de receta

Tarea
En este ejemplo se crea una imagen de receta en la que se representen los valores de la planta
de producción de zumos de frutas. Para seleccionar las recetas y los registros de receta
correspondientes, utilice un visor de recetas.
Las siguientes funciones se deben poder manejar con botones:
● Botón "Cargar"
El registro de receta seleccionado se carga de la memoria de recetas del panel de operador
y se visualiza en la imagen de receta.
● Botón "Guardar"
Las variables de receta visualizadas se cargan en la memoria de recetas del panel de
operador.

1194

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas
● Botón "Datos al PLC"
Las variables de receta se transfieren al controlador.
● Botón "Datos del PLC"
El registro de receta actual en el controlador se transfiere a las variables de receta y se
visualiza en el panel de operador.

Requisitos
● El ejemplo "Crear receta" está creado.
● La imagen "Planta de producción de zumos" está creada y abierta.

Configuración
Para el ejemplo se necesitan las siguientes variables y botones configurados como se indica
a continuación:
Variables:
Nombre

Conexión al controlador

Tipo

RecipeNumber

No

Integer

DataRecordNumber

No

Integer

Rotulación

Evento configurado

Función de sistema

Cargar

Hacer clic

CargarRegistro

Guardar

Hacer clic

GuardarRegistro

Datos al PLC

Hacer clic

EscribirVariablesDeRegistroEnControlador

Datos del PLC

Hacer clic

LeerVariablesDeRegistroDelControlador

Botones:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1195

Trabajar con recetas
6.1 Trabajar con recetas

Procedimiento
Para configurar una imagen de receta, proceda del siguiente modo:
1. Arrastre las variables "LitreWater", "LitreConcentrate", "KiloSugar" y "GramAroma" desde
la ventana de objetos hasta la imagen de proceso "Mezcladora de zumos".
Se crearán cuatro campos ES vinculados a las variables indicadas.
2. Inserte un visor de recetas que sólo contenga los campos de selección para los nombres
de la receta y del registro.
En la ventana de inspección del visor de recetas, efectúe los ajustes indicados a
continuación:
– Seleccione el tipo "Visor avanzado" en "General".
– Desactive "Modo de edición" en "Propiedades > General" y "Mostrar tabla" en
"Propiedades > Tabla".
– Asocie el campo "Variable de receta" con la variable "RecipeNumber".
– Asocie el campo "Variable" con la variable "DataRecordNumber".
– Desactive todos los botones en "Propiedades > Botones".
3. Configure cuatro botones con los ajustes anteriormente mencionados. Transfiera como
parámetros para el número de receta y el número de registro de receta las variables
"RecipeNumber" y "DataRecordNumber", respectivamente.

Resultado
En runtime podrá seleccionar en el visor de recetas la receta y el registro de receta
correspondiente, así como modificar los valores de la receta. Con ayuda de los botones podrá
cargar, guardar y transferir los registros de receta.

6.1.4.3

Escenario para la entrada de registros de receta en runtime

Objetivo
Se pretende introducir datos de producción en el panel de operador sin que el proceso activo
se vea afectado. Por este motivo, los datos de producción no se deben transferir al controlador.

Requisitos
● La receta se ha creado.
● La receta está configurada como se indica a continuación:
– "Sincronizar el visor de recetas y las variables de receta" está activado o desactivado.
– Si "Sincronizar el visor de recetas y las variables de receta" está activado, debe estar
activado "Transferencia manual de valores individuales modificados (modo "Teach-In")".
Ello impide que las variables de receta se transfieran automáticamente entre el panel de
operador y el controlador.
● Existe una imagen de receta o una imagen con un visor de recetas.
● Existe un objeto de mando para guardar los registros de receta.

1196

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

Ejecución
3DQHOGHRSHUDGRU
9LVRUGH
UHFHWDV

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
9DULDEOHGH
UHFHWD

,PDJHQGH
UHFHWD

0RGR7HDFK,Q
&RQWURODGRU

1. Introduzca los datos de producción en el visor de recetas o en la imagen de receta.
2. Guarde el registro de receta modificado.

Transferir los datos de receta al controlador
Dependiendo de la configuración, pueden existir objetos de mando para transferir los datos de
receta al controlador.

6.1.4.4

Contexto para un proceso de producción manual

Objetivo
Un lector conectado al controlador lee un código de barras de la pieza que se va a mecanizar.
Los nombres de los registros de recetas corresponden a las denominaciones de los códigos de
barras. De esta forma, el control puede cargar el registro necesario del soporte de memoria del
panel de operador. El registro de receta se visualiza en la pantalla para comprobarlo.
Los datos de producción transferidos deben poder corregirse en línea.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1197

Trabajar con recetas
6.1 Trabajar con recetas

Requisitos
● La receta se ha creado.
● La receta está configurada como se indica a continuación:
– "Sincronizar el visor de recetas y las variables de receta" está activado.
– "Transferencia manual de valores individuales modificados (modo "Teach-In")" está
desactivado.
Nota
Las modificaciones se transfieren de inmediato al controlador.
● Debe existir una imagen de receta.
Puede existir un objeto de mando para guardar los registros de receta en la imagen de
receta.

Ejecución
3DQHOGHRSHUDGRU

,PDJHQGH
UHFHWD

0HPRULDGHUHFHWDV
5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

6LQFURQL]DU
9DULDEOHGH
UHFHWD

0RGR7HDFK,Q
&RQWURODGRU

Utilización del visor de recetas
Si se utiliza el visor de recetas no es posible transferir los cambios de inmediato. En este caso
es preciso utilizar el objeto de mando para transferir el registro de receta al controlador.

1198

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.1 Trabajar con recetas

6.1.4.5

Contexto para un proceso de producción automático

Objetivo
Desea que la producción se lleve a cabo de forma automatizada. Los datos de producción se
deben transferir desde la memoria de recetas del panel de operador o desde un medio de
almacenamiento externo directamente al controlador. La visualización en pantalla no es
necesaria.

Requisitos
● La receta está creada.
● La receta está configurada como se indica a continuación:
– "Transferencia coordinada de los registros" está activado.
Puesto que los datos de producción se transfieren al controlador, la transferencia
coordinada con el controlador es necesaria para evitar que los datos se sobrescriban
unos a otros de forma incontrolada.

Ejecución
3DQHOGHRSHUDGRU

0HPRULDGHUHFHWDV

5HFHWD
5HFHWD
5HFHWD
5HFHWDQ

7UDQVIHUHQFLDFRRUGLQDGD



&RQWURODGRU
0HGLRGH
DOPDFHQDPLHQWR
H[WHUQR

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1199

Trabajar con recetas
6.2 Trabajar con recetas

Implementación
El flujo de datos se puede controlar de las maneras siguientes:
● El programa de control controla la transferencia automática mediante tareas de control o,
en caso necesario, mediante funciones de sistema de WinCC.
La ejecución se controla mediante la información de estado que contiene el buzón de datos,
así como mediante los valores de respuesta de las funciones utilizadas.
● Uno o varios scripts controlan la transferencia automática con funciones de sistema de
WinCC.
La ejecución se controla mediante los valores de respuesta de las funciones utilizadas.
El proceso de producción automatizado se puede llevar a cabo con las funciones de sistema
disponibles:
● "ImportarRegistros"
Esta función carga registros de un archivo *.CSV en la memoria de recetas del panel de
operador.
● "EscribirRegistroEnControlador"
Esta función transfiere un registro desde la memoria de recetas del panel de operador al
controlador.

6.2

Trabajar con recetas

6.2.1

Principios básicos

6.2.1.1

Definición y campos de aplicación

Introducción
En las recetas se recogen los datos afines, p. ej. la parametrización de la máquina, o bien los
datos de producción.
Ejemplos:
● Parametrizaciones de máquinas necesarias para conmutar a la fabricación de una variante
de producto diferente.
● Ingredientes que se combinan en diferentes proporciones para crear distintos productos
finales.
● Datos de procesos técnicos que se guardan continuamente en intervalos de tiempo
prolongados.
Una receta se caracteriza por una estructura de datos fija. Durante la configuración se define
la estructura de la receta una única vez. Una receta contiene registros que se distinguen por
sus valores, pero no por su estructura.
Las recetas se depositan en una base de datos SQL. Básicamente, un registro de receta se
transfiere por completo en un paso de trabajo entre el panel de operador y el controlador.

1200

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
Adicionalmente se pueden importar datos de producción en runtime a través de un archivo
CSV.

Utilización de recetas
Para el uso de recetas se distinguen p. ej. los siguientes casos:
● Producción manual
El usuario selecciona los datos de receta deseados y los visualiza en el panel de operador.
En caso necesario, modifica los datos de receta y los guarda en el panel de operador.
Luego transfiere los datos de receta al controlador.
● Producción automática
El programa de control inicia la transferencia de los datos de receta entre el controlador y
el panel de operador. El usuario también puede iniciar la transferencia realizando una
acción en el panel de operador. La producción cambia entonces de forma automática. No
es imprescindible visualizar ni modificar los datos.
● Almacenamiento de datos de proyecto
Se utiliza una receta sin conexión al controlador para guardar datos del proyecto. En
runtime se puede acceder mediante scripts a los datos del proyecto guardados en la receta.

Vistas
Las vistas obtienen datos de aquellas recetas existentes que tienen al menos un aspecto en
común. Sirven para agrupar datos y recetas.

Visualizar recetas y vistas
Las recetas y las vistas se pueden visualizar y editar en el panel de operador de las maneras
siguientes:
● Un visor de recetas en un sinóptico del proceso
● Una imagen de receta

Introducir y modificar los datos de receta
El usuario introduce los datos en los registros de receta y los modifica en caso necesario. Para
ello dispone de varias posibilidades, a saber:
● Introducir los datos durante la configuración
Si los datos de producción ya están definidos, introdúzcalos ya durante la configuración de
la receta en el editor "Recetas".
● Introducir los datos en runtime
Si los datos de producción se modifican con frecuencia, modifíquelos directamente en
runtime.
– El usuario introduce los datos directamente en el panel de operador.
– El usuario configura los parámetros directamente en la máquina. Posteriormente,
transfiere los datos del controlador al panel de operador y los guarda en la receta.
– El usuario importa los datos de receta de archivos CSV previamente trasvasados.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1201

Trabajar con recetas
6.2 Trabajar con recetas

Consulte también
Visor de recetas en los informes (Página 1350)
Informe de receta (Página 1351)

6.2.1.2

Estructura de las recetas

Introducción
La estructura básica de una receta se representa tomando como ejemplo una planta
embotelladora de zumos de fruta.
En un panel de operador pueden existir varias recetas diferentes. Una receta se puede
comparar p. ej. con un fichero que contiene varias fichas. El fichero comprende diversas
variantes de fabricación de una familia de productos. Los datos sobre una variante de
producción están incluidos al completo en una ficha.
Ejemplo:
En una planta embotelladora de bebidas se requiere una receta para las distintas variantes de
bebidas. Las variantes de bebidas son p. ej. "Refresco", "Zumo" y "Néctar".

Receta


=XPR
$JXD
$]¼FDU
$URPD
&RQFHQWUDGR

5
30
23
80

5HJLVWURGHUHFHWD

1«FWDU
$JXD
$]¼FDU
$URPD
&RQFHQWUDGR

15
35
20
70

(OHPHQWRGHUHFHWD

5HFHWD

Registros de receta
Cada ficha representa un registro de receta necesario para la fabricación de una variante del
producto.

1202

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Elementos de las recetas
Todas las fichas de un mismo cajón están rotuladas del mismo modo. Todas las fichas
contienen campos para los diversos ingredientes. Cada campo equivale a un elemento de la
receta. De este modo, cada registro de receta contiene los mismos elementos. No obstante,
los registros se distinguen en el valor de los elementos individuales.
Ejemplo:
Todas las bebidas contienen idénticos elementos, a saber:
● Agua
● Concentrado
● Azúcar
● Aroma
No obstante, los registros correspondientes a las variantes "Refresco", "Zumo" y "Néctar"
difieren p. ej. en la cantidad de azúcar utilizada para su fabricación.
Receta

Registro de receta

Bebidas

1

Elementos de las recetas

Valor

Artículo

Zumo

Agua

5

Azúcar

30

Aroma

23

Concentrado
Colorante
2

Artículo

80
F30
Néctar

Agua

15

Azúcar

35

Aroma

20

Concentrado

70

Colorante

F35

Recopilaciones de recetas
Una recopilación de recetas es una receta cuyos elementos proceden de diferentes recetas.
Ejemplo:
Elemento de recopilación de recetas1 = receta1_elemento de receta3
Elemento de recopilación de recetas2 = receta3_elemento de receta7
Elemento de recopilación de recetas3 = receta2_elemento de receta10
Las recetas utilizadas deben existir previamente.
Una recopilación de recetas se muestra en un visor de recetas. Una recopilación de recetas no
tiene ningún registro propio, sino que comprende una combinación de todos los registros de
receta de las recetas utilizadas. Ejemplo: Si en el ejemplo arriba indicado hay 10 registros de
receta para cada receta, la recopilación de recetas comprende 10*10*10 = 1000 registros.
Para limitar estos registros, en la recopilación de recetas se puede definir una relación.
Ejemplo:
Elemento de recopilación de recetas2 = Elemento de recopilación de
recetas3

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1203

Trabajar con recetas
6.2 Trabajar con recetas
La relación funciona como un filtro para la recopilación de recetas (véase también el ejemplo
siguiente).

Ejemplo
Para imprimir una etiqueta se crea una recopilación de recetas "Etiqueta" a partir de las recetas
"Bebidas" y "Pedido".

Receta

Elementos de datos

Receta

Bebidas

Artículo

Pedido

Elementos de datos

Cliente

Agua

Número

Azúcar

Artículo

Aroma

Cantidad

Concentrado

Volumen de llenado

Colorante
Caducidad

Vista
Etiqueta

Elementos de datos

Artículo
Volumen de llenado

Azúcar
Colorante
Caducidad
La figura muestra abajo la recopilación de recetas "Etiqueta". La información necesaria para la
etiqueta está incluida en las recetas "Bebidas" y "Pedido". De la receta "Bebidas" se obtienen
los elementos de receta "Artículo", "Azúcar", "Colorante" y "Duración" para la recopilación de
recetas "Etiqueta"; de la receta "Pedido", los elementos de receta "Artículo" y "Cantidad para
envasar".
El elemento de receta "Artículo'" está disponible por doble:
Bebidas.Artículo, Pedido.Artículo, Bebidas.Agua, Pedido.Cantidad
para envasar...
Al principio, el visor de recetas muestra muestra todas las combinaciones de estos datos en
una línea propia. Pero en la etiqueta deben mostrarse los datos de receta del artículo
encargado y no de otro artículo, lo que asegura la siguiente condición:
Bebidas.Artículo = Pedido.Artículo
Se le pasa un filtro al visor de recetas y línea a línea se muestran únicamente los artículos
encargados con sus datos de receta.

1204

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

6.2.1.3

Representación de recetas en runtime
Existen las siguientes posibilidades para representar datos de receta en runtime:
● En los sinópticos de la instalación en cualquier posición de campos E/S
● En un visor de recetas en forma de tabla
Durante la configuración se asocia un visor de recetas a una receta o a una recopilación de
recetas seleccionada. El visor de recetas sólo puede acceder a esa receta o recopilación de
recetas.
Para acceder a la receta o a la vista pueden asignarse diversos permisos.

6.2.1.4

Comunicación con el controlador

Introducción
Entre las recetas y el controlador se transmiten datos sobre dos tipos:
● sobre variables de receta con ayuda de variables de control
● sobre telegramas con ayuda de variables de datos sin formato

Tipo de comunicación "Variables de control"
Mediante las variables de control se transmite un registro de receta completo hacia las
variables de receta y viceversa. Las variables de receta tienen una conexión de comunicación
hacia el controlador.

Tipo de comunicación "Variable de datos sin formato"
El controlador y el panel de operador intercambian recíprocamente variables de datos brutos
como telegramas con estructura fija.
Las variables de datos brutos ofrecen las siguientes ventajas:
● transmitir diversos registros de datos entre el controlador y el panel de operador.
● transmitir partes de un registro de receta.
● en el caso de varias recetas, utilizar las mismas variables de datos brutos.

Consulte también
Vista general (Página 1231)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1205

Trabajar con recetas
6.2 Trabajar con recetas

6.2.1.5

Editor "Recetas"

Introducción
En el editor "Recetas" se pueden crear, configurar y editar:
● Recetas (con sus correspondientes elementos) y registros de receta
● Recopilaciones de recetas y los correspondientes elementos y relaciones
Además, se pueden introducir valores en los registros de las recetas ya existentes.

Estructura del editor "Recetas"
El editor "Recetas" contiene las fichas "Recetas" y "Recopilaciones de recetas" ubicadas en la
parte superior del área de trabajo.
En las fichas "Recetas" y "Recopilaciones de recetas" se crean recetas o recopilaciones de
recetas, que a su vez se configuran en la ventana de inspección.
Dependiendo de qué ficha se abra en la parte superior del área de trabajo se visualizarán las
fichas correspondientes en la parte inferior del área de trabajo:
Ficha "Recetas"
● Elementos de las recetas
Aquí se definen los elementos de la receta seleccionada con las filas de la tabla. Dentro de
la tabla los elementos de receta se desplazan con los comandos del menú contextual
"Arriba" y "Abajo".
● Registros de receta
Aquí se definen los valores de los registros de la receta seleccionada con las filas de la tabla.
Ficha "Recopilaciones de recetas"
● Elementos de recopilaciones de recetas
Aquí se definen los elementos de recopilación de recetas de la recopilación seleccionada
mediante las celdas de la tabla. Las recopilaciones de recetas y los elementos
correspondientes se pueden mover por la tabla con los comandos del menú contextual
"Arriba" y "Abajo".
En el campo "Condiciones" se definen las relaciones entre los elementos de recopilación de
recetas.

Ventana de inspección
En la ventana de inspección se configura el elemento que esté seleccionado en una de las
tablas, p. ej. una recopilación de recetas o un registro de receta.

1206

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Ajustes de recetas
Para las recetas son posibles los ajustes siguientes:
Ajuste

Descripción

Nombre de receta

Identifica la receta unívocamente en el panel de operador.

Nombre de visualiza‐
ción

Aparece en runtime en el visor de recetas, p. ej. El nombre de visualización se
puede configurar en varios idiomas. Ponga los nombres o las designaciones
que pueda asignar directamente a un producto, p. ej. "Zumo_de_fruta_Na‐
ranja".

Número de receta

Identifica la receta unívocamente en el panel de operador.
En el tipo de comunicación "Variable de datos sin formato" el campo "PLC" del
telegrama debe coincidir con un número de receta válido.

Versión

Información sobre la receta. De forma predeterminada se muestran aquí la
fecha y la hora de la última modificación de la receta.

Ruta

Define la ubicación de las recetas. Las recetas no se depositan en un archivo,
sino en una base de datos.

Tipo

Los registros de receta se pueden limitar a un número máximo predetermi‐
nable.

Número máximo de re‐ Número máximo de registros de una receta. De esta manera se limita la
gistros
memoria de recetas requerida en el panel de operador. Con el tipo de tamaño
"ilimitado" aparece "0" como valor.
Tipo de comunicación

El usuario define el intercambio estándar de datos de receta entre el panel de
operador y el controlador.
● No hay comunicación
● Variables de datos sin formato
● Variables

Variable de datos sin
formato

Variable que en el tipo de comunicación "Variables de datos brutos" transmite
los datos de receta entre el controlador y el panel de operador como telegra‐
ma.

Variables de control
encargo, ID, campo,
valor

Cuatro variables que en el tipo de comunicación "Variables" que regulan que
regulan la transmisión de datos entre la receta y las variables de receta y con
ello, el controlador.

Para leer

Nombre de la autorización, que en runtime tiene acceso de lectura y de es‐
critura a la receta.

Para escribir
Último acceso
Último usuario

La información sobre las modificaciones de una receta o accesos a la misma
se visualiza en runtime.

Tooltip

Texto de ayuda de la receta para el ingeniero

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1207

Trabajar con recetas
6.2 Trabajar con recetas

Ajustes de los elementos de receta
Para los elementos de receta son posibles los ajustes siguientes:
Ajuste

Descripción

Nombre del elemento
de receta

Identifica el elemento de receta unívocamente en la receta. Ponga los nom‐
bres o las designaciones que pueda asignar unívocamente, p ej. denomina‐
ciones de los ejes de una máquina o ingredientes como "Aroma".

Nombre de visualiza‐
ción

Aparece en runtime en el visor de recetas, p. ej. El nombre de visualización
se puede configurar en varios idiomas. Ponga los nombres o las designa‐
ciones que pueda asignar directamente a un producto, p. ej. "Zumo_de_fru‐
ta_Naranja".

Variable de receta

Una variable asignada guarda en runtime el valor actual del elemento en el
registro de receta. No se pueden utilizar variables del tipo de datos "DateTi‐
me".

Tipo de datos

Tipo de datos de la variable de receta.

Longitud de datos

El tipo de datos determina la longitud de los datos de una variable de receta.

Valor estándar

Se utiliza como entrada estándar cuando se crea un registro de receta nuevo.

Valor mínimo

Valor más pequeño representable de una variable de receta basada en nú‐
meros, depende del tipo de datos.

Valor máximo

Valor más grande representable de una variable de receta basada en nú‐
meros, depende del tipo de datos.

Para leer
Para escribir

Nombre de la autorización, que en runtime tiene acceso de lectura y de
escritura a la receta.

Valor requerido

El elemento de receta tiene un valor diferente de cero.

Valores unívocos

El valor del elemento de receta sólo puede aparecer una vez en todos los
registros de receta. Un ejemplo de ello lo constituye el elemento de receta
"Referencia".

Búsqueda rápida

El valor del elemento de receta está indexado, lo cual acelera la búsqueda.

Tooltip

Texto de ayuda del elemento de receta para el ingeniero

Ajustes de los registros de receta
Para los registros de receta son posibles los ajustes siguientes:

1208

Ajuste

Descripción

Nombre del registro de
receta

Identifica el registro de receta unívocamente dentro de una receta.

Nombre de visualiza‐
ción

Aparece en runtime en el visor de recetas, p. ej. El nombre de visualización
se puede configurar en varios idiomas. Ponga los nombres o las designa‐
ciones que pueda asignar directamente a un producto, p. ej. números de
producto.

Número de registro de
receta

Identifica el registro de receta unívocamente dentro de una receta.

Nombre del elemento
de receta

Nombre del elemento de receta aplicado Con este nombre se guardan los
valores que el elemento de receta tiene en los diferentes registros de receta
(líneas). Un valor forma un registro de receta junto con los valores de otros
elementos de receta en una línea forma un registro de receta. Los valores se
pueden incluir ya durante la configuración.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

6.2.1.6

Ajuste

Descripción

Último acceso
Último usuario

La información sobre las modificaciones de un registro de receta o accesos
al mismo se visualiza en runtime.

Comentario

Comentario sobre el registro de receta

Lenguaje SQL
SQL (Structured Query Language) es un lenguaje de base de datos muy común y de alto
rendimiento. En las funciones de lenguaje de script de WinCC se utiliza el lenguaje SQL para
la base de datos. Encontrará más información al respecto en publicaciones técnicas
especializadas.
Para algunas funciones estándar así como para algunas funciones del editor "Recetas" se
debe indicar condiciones en el lenguaje de base de datos SQL para especificar los registros
que deben editarse. A continuación aparecen algunos ejemplos sobre cómo transferir una
instrucción SQL:
Nota
Forma de escribir los nombres
Los anexos, suplementos y los nombres de una receta, recopilación de recetas o de un
elemento de receta solo pueden estar formados por letras, cifras y guiones bajos "_" y su
longitud máxima es de 20 caracteres. El primer carácter debe ser siempre una letra.
● FieldA > '1992-12-31 23:45:12.12'
La instrucción selecciona los registros cuyo valor en la columna "FieldA" es mayor que el
indicado. FieldA es del tipo de datos DB_TYP_TIME.
● FieldB like 'tank%'
Así se seleccionan, p. ej., los registros que en la columna "FieldB" tienen el valor "tank1" o
"tank4" o "tank12". FieldB es del tipo de datos DB_TYP_CHAR.
● FieldC > 100
Mediante una condición de este tipo se seleccionan todos los registros que tienen un valor
superior a 100 en la columna "FieldC". FieldC es del tipo de datos DB_TYP_INTEGER.
● BETWEEN FieldC = 20 AND FieldC = 200
El Statement selecciona todos los registros cuyo valor en la columna "FieldC" está entre 20
y 200. FieldC es del tipo de datos DB_TYP_INTEGER.
● FieldD
Con esto se ordena según la columna "FieldD".
● FieldE desc
Con esto se ordena según la columna "FieldE" en orden alfabético inverso (descending
order).

Consulte también
Palabras clave SQL (Página 1210)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1209

Trabajar con recetas
6.2 Trabajar con recetas

6.2.1.7

Palabras clave SQL

Palabras clave SQL
Nota
No utilice los siguientes conceptos y palabras clave del lenguaje SQL como nombre de una
receta, recopilación de recetas o elemento de receta:
● "Archive"
● "View"
● "Field"
● "ViewCol"

Palabras clave del lenguaje SQL

1210

add

all

alter

and

any

as

asc

begin

between

binary

break

by

call

cascade

cast

char

char_convert

character

check

checkpoint

close

comment

commit

connect

constraint

continue

convert

create

cross

current

cursor

date

dba

dbspace

deallocate

dec

decimal

declare

default

delete

desc

distinct

do

double

drop

else

elseif

encrypted

end

endif

escape

exception

exec

execute

exists

fetch

first

float

for

foreign

from

full

goto

grant

group

having

holdlock

identified

if

in

index

inner

inout

insert

instead

int

integer

into

is

isolation

join

key

left

like

lock

long

match

membership

message

mode

modify

named

natural

noholdlock

not

null

numeric

of

off

on

open

option

options

or

order

others

out

outer

passthrough

precision

prepare

primary

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
Palabras clave del lenguaje SQL
print

privileges

proc

procedure

raiserror

readtext

real

reference

references

release

remote

rename

resource

restrict

return

revoke

right

rollback

save

savepoint

schedule

select

set

share

smallint

some

sqlcode

sqlstate

start

stop

subtrans

subtransaction

synchronize

syntax_error

table

temporary

then

time

tinyint

to

tran

trigger

truncate

tsequal

union

unique

unknown

update

user

using

validate

values

varbinary

varchar

variable

varying

view

when

where

while

with

work

writetext

Consulte también
Lenguaje SQL (Página 1209)

6.2.2

Configuración de recetas

6.2.2.1

Procedimiento general de configuración

Pasos de configuración
Para crear una receta se requieren los siguientes pasos de configuración:
Paso

Tarea

1

Defina la estructura de la receta.

2

Defina el tipo de comunicación de la receta.

3

Cree las variables de control o la variable de datos sin formato independien‐
temente del tipo de comunicación.

4

Cree la receta y defina las propiedades de la misma.

5

Cree los elementos de la receta de acuerdo con la estructura planificada.

6

Cree los registros de receta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1211

Trabajar con recetas
6.2 Trabajar con recetas
Paso

Tarea

7

En caso necesario, configure vistas en varias recetas.

8

Configure una imagen con un visor de recetas y asocie el visor de recetas a
la receta o a la vista.
O bien:
Configure una imagen con campos E/S y botones. Configure en los botones
las funciones de lectura y escritura de valores de registros de receta.

Nota
Runtime API
En la Runtime API se dispone de funciones de fichero ua completas para editar recetas y
consultas de receta (ver capítulo "Interfaces > Runtime API", apartado "AUTOHOTSPOT").

6.2.2.2

Crear una receta nueva

Introducción
Las recetas nuevas se crean en la ficha "Recetas" del editor "Recetas".

Determinación del nombre de la receta
No utilice en los nombres de recetas palabras clave o palabras reservadas al lenguaje de base
de datos SQL (ver apartado "Palabras clave SQL (Página 1210)").

Recetas con indicación de fecha y hora
Si se utilizan indicaciones de fecha y hora, fíjese en que el ajuste del sistema para la fecha y
la hora del equipo de configuración coincide con el del sistema de destino. Ejemplo: Usted
carga a las 13:55 un registro de receta en el sistema de destino en el que el tiempo de ejecución
se guarda a las 14 horas. Cuando en el ordenador de destino sean 14:05, la receta ya no se
podrá editar. Si un operador edita la receta, los cambios de información no se reescribirán
correctamente en la base de datos.
Después de cargar en el sistema de destino, es necesario comprobar las recetas con
indicación de fecha y hora en el sistema de destino.

Requisitos
● La variable de datos sin formato o las variables de control deben existir.
● El editor "Recetas" está abierto.

1212

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Procedimiento
Para crear una receta, proceda del siguiente modo:
1. En el editor "Recetas", haga doble clic en la ficha "Recetas" en la primera fila libre de la
tabla.
2. En la ventana de inspección, introduzca bajo "Propiedades > General > Ajustes > Nombre"
un nombre que describa la receta.
El nombre identifica de forma unívoca cada receta del proyecto.

3. En "Nombre de visualización" introduzca el nombre específico del idioma que deba
aparecer en runtime.
4. Determine en el área "Tamaño", en "Tipo", si los registros de receta están limitados a una
cantidad máxima especificada o no.
5. Si el tipo de tamaño está limitado, defina en "Número de registros" el número máximo de
registros de una receta.
6. Determine el "Tipo de comunicación" en "Propiedades > Comunicación":
– Si ha elegido "Variable de datos sin formato", cree adicionalmente una variable de datos
sin formato y selecciónela en "Variable de datos sin formato".
– Si solamente desea utilizar la receta para guardar datos del proyecto, elija "No hay
comunicación"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1213

Trabajar con recetas
6.2 Trabajar con recetas
7. Si ha elegido "Variables" como tipo de comunicación, defina en "Propiedades > Variables
de control" las variables de control para acceder a la receta.

8. Especifique en "Propiedades > Seguridad" qué permisos de uso tienen acceso de lectura
y escritura a la receta en runtime.

9. Defina en "Campos de sistema" si las entradas "Último acceso" y "Último usuario" deben
mostrarse en runtime.

Resultado
La receta está creada.

Consulte también
Palabras clave SQL (Página 1210)

6.2.2.3

Crear elementos de receta y registros

Introducción
En la ficha "Elementos de receta" ubicada en la parte inferior del editor "Recetas" se crean los
elementos para la receta seleccionada. En la ficha "Registros de receta" se pueden introducir
valores para los elementos de la receta.

1214

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Requisitos
● Las variables de la receta deben existir.
● La receta está creada.
● Se ha seleccionado la receta en el editor "Recetas".

Procedimiento
Para crear un elemento de receta, proceda del siguiente modo:
1. En la ficha "Elementos de receta", haga doble clic en la primera fila libre de la tabla.
2. En la ventana de inspección, introduzca bajo "Propiedades > General > Ajustes > Nombre"
un nombre que describa el elemento de la receta. Este nombre debe ser unívoco en una
receta.
3. En "Nombre de visualización" introduzca el nombre específico del idioma que aparece en
runtime.

4. Si la receta tiene el tipo de comunicación "Variables":
Para asociar el elemento de receta a una variable, seleccione una variable en "Propiedades
> Configuración básica > Ajustes". Allí se visualiza el tipo de datos.
Nota
Los elementos de recetas no se pueden conectar con variables del tipo de datos
"DateTime".
5. Si el tipo de datos es "Cadena de caracteres" se debe indicar en "Longitud de los datos"
adicionalmente la longitud máxima de la cadena de caracteres. El área "Ajustes" ubicada
a la derecha muestra el rango de valores de los tipos de datos basados en números para
los que se puede definir adicionalmente un valor estándar.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1215

Trabajar con recetas
6.2 Trabajar con recetas
6. Si la receta tiene el tipo de comunicación "Variable de datos sin formato" o bien "No hay
comunicación": Elija el "Tipo de datos" y si se trata del tipo de datos "Cadena de
caracteres", elija adicionalmente la "Longitud de los datos" del elemento de receta.
7. Especifique en "Propiedades > Seguridad" qué permisos tienen acceso de lectura y
escritura al elemento de receta en runtime.
8. Determine en "Propiedades > Opciones" qué condiciones deben cumplir los valores del
elemento de receta. Para acelerar la búsqueda se pueden indexar los valores:

9. Para crear un registro de receta, haga doble clic en la ficha "Registros de receta" en la
primera fila libre de la tabla.
10.Introduzca el valor deseado para el elemento de receta en el editor de tablas.

Resultado
Están creados el elemento de receta y un registro de receta correspondiente con un valor.

6.2.2.4

Importar recetas a la configuración y exportarlas nuevamente

Introducción
Es posible exportar recetas como archivos CSV y volverlas a importar a la configuración.
Nota
Los registros de recopilaciones de recetas no se pueden importar ni exportar.

Caso de aplicación
Exporte los datos de receta para archivarlos y asegurarlos a largo plazo en un ordenador.
Para unificar y distribuir los datos de recetas, expórtelos a un panel de operador. Modifique el
archivo CSV en Microsoft Excel e impórtelo a todos los paneles de operador que necesiten los
mismos datos de recetas.
Se intercambian datos de receta entre distintos proyectos. Se modifican datos de receta en
runtime. Para transferir los datos de receta modificados a WinCC ES, exporte los registros de
receta a runtime y copie el archivo CSV en al equipo de configuración. Desde allí, importe a la

1216

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
receta el archivo CSV con los registros de receta. Y en sentido inverso: los registros de receta
modificados en el WinCC ES se transfieren en runtime al panel de operador.

Requisitos
● La receta está creada.
● La estructura del archivo CSV exportado coincide con la estructura de la receta en el
WinCC ES: el nombre, número y tipo de datos de los elementos de receta coinciden,
respectivamente.
● El editor "Recetas" está abierto.

Importar un archivo CSV
Para importar registros de receta a una receta, proceda del siguiente modo:
1. Marque la fila que contiene la receta deseada en la ficha "Recetas".
2. En el menú contextual, seleccione el comando "Importar datos de receta".
Se abre el cuadro de diálogo "Importación".

3. Elija el archivo CSV con los datos de receta que desee en "Nombre de archivo".
4. Determine en "Estrategia" si un registro de receta ya existente en el archivo CSV
sobrescribe un registro de receta con el mismo número en WinCC.
5. Inicie el proceso pulsando el botón "Importación".

Resultado
La receta se amplía con registros que aún no existen del archivo CSV. Si ha elegido la opción
correspondiente, se sobrescriben los registros de receta existentes.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1217

Trabajar con recetas
6.2 Trabajar con recetas
Si la estructura de la receta no coincide con la estructura del archivo CSV, en la ventana de
inspección se visualizará un mensaje de error en "Información".

Exportar un archivo CSV
1. Marque en la ficha "Recetas" la fila que contiene la receta que desea exportar.
2. En el menú contextual, seleccione el comando "Exportar datos de receta".
Se abre el cuadro de diálogo "Exportación".

3. Elija una ruta para el archivo CSV en "Nombre de archivo".
4. Elija la receta que desee en "Nombre de receta".
5. Elija todos los registros de receta en "Selección de contenido" o limite la selección a un
número determinado de registros de receta.
6. Inicie el proceso pulsando el botón "Exportación".

Resultado
La receta se exporta como archivo CSV. El separador de listas es el punto y coma "Elemento
de receta_1;Elemento de receta_2". El separador de decimales es el punto, p. ej. "3.14".

1218

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

6.2.2.5

Procedimiento en caso de modificar la estructura de la receta

Introducción
En los casos siguientes pueden diferir las estructuras de las recetas:
● En caso de modificaciones durante la puesta en marcha
● Cuando un ingeniero mecánico ajusta una máquina (Retro-Fit)
● Cuando se importan archivos CSV durante la importación, la estructura del archivo CSV
puede diferir de la estructura de la receta.
Sin embargo, es posible seguir utilizando los registros de receta ya creados.
ATENCIÓN
Cuando se cambia el nombre de la variable se pierde la asignación.

Efectos
Si la estructura del archivo CSV difiere de la estructura de la receta, las diferencias se tratarán
de la manera siguiente:
● Si el antiguo registro de receta o el archivo CSV contienen valores adicionales, estos se
rechazan.
● Si el antiguo registro de receta o el archivo CSV contienen valores de un tipo de datos
incorrecto, en el registro de receta se utilizará el valor estándar configurado.
Ejemplo: El registro de receta contiene valores que indican el contenido del tanque y fueron
introducidos como números en coma flotante. No obstante, la variable de receta
correspondiente espera un valor entero. En ese caso se rechaza el valor transferido y se
utiliza el valor estándar configurado.
● Si el antiguo registro de receta o el archivo CSV no contienen suficientes valores, en el
registro de receta se utilizará asimismo el valor estándar configurado.

6.2.2.6

Crear una recopilación de recetas

Introducción
Una recopilación de recetas es un registro de elementos de receta procedentes de diferentes
recetas. Ejemplo: Recopilación de recetas "Consumo de agua":
● Agua de la receta "Refresco"
● Agua de la receta "Zumo"
● Agua de la receta "Néctar"
Los elementos de recetas se pueden asociar para conformar relaciones, p. ej. "Néctar.Agua >
Refresco.Agua". En la recopilación de recetas se visualizan en runtime sólo aquellos registros
que cumplen la relación, en el ejemplo se trata de los registros en que el consumo de agua de
la receta "Néctar" es mayor que en "Refresco".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1219

Trabajar con recetas
6.2 Trabajar con recetas
En la ficha "Recopilaciones de recetas" del editor "Recetas" se confeccionan las
recopilaciones de recetas a partir de elementos de recetas. En las recetas se eligen los
elementos de receta que se transfieren a la recopilación de recetas y luego se definen
relaciones para los mismos. La relación expresa una condición. En el visor de recetas se
visualizan solamente algunas combinaciones de los elementos de receta suficientes para la
condición (real).
Los datos de una recopilación de recetas también se pueden editar en runtime. Los datos
modificados se adoptan en runtime en la receta original.
Las siguientes acciones no son posibles en una recopilación de recetas:
● Crear nuevos datos de receta
● Borrar datos de receta

Requisitos
● Se han creado dos recetas como mínimo.
● Las recetas se encuentran en la misma base de datos del mismo panel de operador.
● Las recetas tienen al menos un elemento común que a su vez tiene el mismo tipo de datos.

Crear una recopilación de recetas
Para crear una recopilación de recetas, proceda del siguiente modo:
1. En el editor "Recetas", haga doble clic en la ficha "Recopilaciones de recetas" en la primera
fila libre de la tabla.
Se crea una nueva recopilación de recetas.
2. En "Propiedades > General > Nombre" de la ventana de inspección introduzca un nombre
que describa la recopilación de recetas.

3. En "Nombre de visualización" introduzca el nombre específico del idioma que aparece en
runtime.

1220

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Crear elementos de recopilación de recetas y relaciones
Para crear un nuevo elemento para la recopilación de recetas y la relación, proceda del
siguiente modo:
1. Haga doble clic en la ficha "Elementos de la recopilación de recetas" en la primera fila libre
de la tabla.
2. Seleccione en "Propiedades > General > Elemento de receta" el elemento de receta que
desea insertar en la recopilación.
3. En caso necesario, cree otros elementos de la recopilación de recetas.
4. Seleccione la recopilación de recetas en la ficha "Recopilaciones de recetas".
5. En "Propiedades > Relación > Relación" de la ventana de inspección elija un elemento de
la recopilación de recetas y el operador que desee como operando izquierdo y derecho.

6. Haga clic en el botón "Agregar".
La relación aparece en "Condición". Si allí ya se ha definido una condición, se añadirá una
nueva relación con el operador lógico "Y". La condición se puede editar.
7. En caso necesario, modifique el orden de los elementos de la recopilación de recetas
utilizando Drag&Drop.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1221

Trabajar con recetas
6.2 Trabajar con recetas

Resultado
La recopilación de recetas está creada y hay una condición definida. Solamente se
visualizarán algunas combinaciones de elementos de receta que satisfagan la condición.

6.2.3

Configurar la visualización de las recetas

6.2.3.1

Visualización de las recetas

Introducción
Las recetas o recopilaciones de recetas se representan en el panel de operador del siguiente
modo:
● En un visor de recetas
● En distintos campos E/S

Visor de recetas
El visor de recetas sirve para representar recetas y recopilaciones en forma de tabla. Cada
registro ocupa una fila.
La figura siguiente muestra un ejemplo de un visor de recetas.

1222

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

El operador maneja el visor de recetas en runtime y crea p. ej. nuevos registros o importa
recetas. Con dos botones del visor de recetas, transfiera un registro de receta a las variables
de receta y a la inversa.
Nota
Al configurar un visor de recetas, seleccione una receta o recopilación de recetas. La selección
puede cambiar el operador y otras propiedades en runtime.
Nota
Origen de los datos
El visor de recetas solo accede a una receta o recopilación de recetas.
Recopilación de recetas
Un operador puede cambiar exclusivamente los datos de receta visualizados en runtime. No
es posible crear o borrar registros ni transferir datos hacia/desde el controlador.

Receta en la imagen
Como alternativa, en lugar de un visor de recetas prediseñado se pueden mostrar los
elementos de receta en campos E/A. La siguiente imagen muestra un ejemplo de una imagen
con campos E/A configurados en el tipo de comunicación "Variables".
Los campos azules de arriba señalan los valores de las variables de receta que poseen una
conexión de comunicación hacia autómata. Los campos amarillos de abajo señalan el
contenido de cuatro variables de control. En el ejemplo, los valores de receta azules se han
escrito en el registro de receta número 3 (petición= 6) y se ha devuelto la cantidad de errores
= 0.

Consulte también
Variables de control (Página 1232)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1223

Trabajar con recetas
6.2 Trabajar con recetas

6.2.3.2

Propiedades del visor de recetas

Introducción
El visor de recetas muestra elementos de receta en forma de tabla en una imagen. El operador
puede editar en runtime datos de la receta en el visor de recetas.

Configuración del visor de recetas
Para configurar el visor de recetas se dispone de las posibilidades siguientes:
● General > Visualización: Elija una receta o recopilación de recetas como origen de los datos
y determine si los registros de receta se pueden editar, introducir o borrar.
● General > Trabajo de impresión
El visor de recetas está asociado automáticamente al trabajo de impresión del sistema para
visores de receta. Si desea utilizar un trabajo de impresión propio o un trabajo de impresión
del sistema que ha sido adaptado, asócielo al visor de recetas.
● General > Tiempo
El usuario define la base de tiempo que rige al visualizar "Último acceso", p. ej. el tiempo
universal coordinado. También es posible visualizar en runtime la base de tiempo
seleccionada.
● Apariencia, representación, formato de texto
Determine los colores y el diseño, tamaño y posición del visor de receta, fuente y tamaño
de fuente.
● Ventana
Determine el tamaño de fuente, título de la ventana del visor de recetas y otras propiedades
de ventana.
● Tabla
Determine el aspecto de los títulos de columnas, tabla y líneas de borde y el
comportamiento al seleccionar y clasificar los registros.
● Tabla > Selección
Determine si se pueden seleccionar las filas o sólo las celdas con el ratón.
Configure las propiedades del cuadro de selección que puede representar las celdas o filas
de la tabla seleccionadas.
En caso necesario, configure los colores de la selección para las celdas y/o filas
seleccionables. Con la propiedad "Colorear automáticamente" se utiliza el color
establecido por el sistema para la selección.

1224

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
● Tabla > Clasificación
Determine si se clasifica y en caso afirmativo, haga clic o doble clic en el encabezado de la
columna. Determine el orden de clasificación que se sigue con cada clic o doble clic en el
encabezado columna cíclicamente: clasificación hacia arriba - hacia abajo o hacia adelante
- hacia atrás - o ninguna clasificación.
Configurar el símbolo y el índice de clasificación que se representa justificado a la derecha
en el encabezado de la columna. Se muestra la secuencia de clasificación y el orden de
clasificación de las columnas.
Si se activa la opción "Utilizar tecla de clasificación", sobre la barra de desplazamiento
vertical se muestra el símbolo de clasificación como tecla de clasificación. Con un clic del
ratón sobre la tecla de clasificación, la columna seleccionada se clasifica en el orden de
clasificación configurado. Si en la tabla no existe ninguna barra de desplazamiento, no se
mostrará la tecla de clasificación.
● Columnas
Determine qué elementos de receta se muestran en runtime y en qué orden. Proteja
determinados elementos contra escritura y defina el formato y la anchura.
Algunas columnas pueden representar el contenido y los títulos también en forma de
símbolos. Determine en el campo "Representación", cómo se representan esas columnas.
Textos y símbolos pueden representarse conjuntamente.
● Filtro
Como criterio de filtro, determine una condición para un elemento de receta y enlace varias
condiciones. Sólo si se cumplen todos los criterios de filtro se visualizará el registro.
● Barra de herramientas
Además del aspecto de la barra de herramientas, determine qué botones se pueden utilizar
en runtime, en qué orden aparecen y con qué autorización de uso operan.
En la lista active los botones que necesita para la operación del control WinCC en runtime.
Encontrará más información acerca de la función de botones individuales en el apartado
"Operación en runtime".
En caso necesario, determine un acceso directo para un botón.
Si asigna permisos de uso a los botones individuales, en runtime el botón solamente se
habilita para el usuario que tiene el debido permiso de uso.
Si desactiva la opción "Activo" para un botón, el botón activado se visualiza en runtime pero
no se puede operar.
● Barra de estado
Además del aspecto de la barra de estado, determine qué información se visualizará en la
barra de estado de runtime p. ej. el número de registro de receta.
● Exportación de datos
Ya se ha introducido un nombre de archivo y de fichero estándar mediante las variables de
conmutación. Sin embargo, puede otorgarle un nombre de archivo y de directorio propio.
Puede utilizar las siguientes variables:
@OBJECTNAME: nombre del objeto del visor de recetas, véase en "Propiedades >
Misceláneo"
@PROJECTPATH: directorio del proyecto
@CURRENTDATE: fecha actual
@CURRENTTIME: hora actual

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1225

Trabajar con recetas
6.2 Trabajar con recetas
● Seguridad
Determine si los cambios en las propiedades del visor de receta se han guardado en
runtime después de modificar una imagen y cómo lo ha hecho. Determine también qué
autorización se necesita para poder modificar.
● Misceláneo
Determine la visibilidad y el nivel para el visor de recetas.

6.2.3.3

Configurar el visor de recetas

Requisitos
● Se ha creado una receta o una recopilación de recetas.
● Se ha creado una imagen y está abierta en el editor "Imágenes".

Procedimiento
Para configurar un visor de recetas, proceda del siguiente modo:
1. Arrastre el objeto "Visor de recetas" desde la paleta "Controles" de la Task Card
"Herramientas" hasta la imagen.
2. Elija la receta o recopilación que desee en "General > Visualización" de la ventana de
inspección.

3. En "General > Autorizar en runtime" determine los derechos de lectura y escritura para el
visor de recetas en runtime.
4. En "Apariencia", "Representación" y "Formato de texto" defina opciones de visualización
adicionales del visor de recetas.

1226

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
5. Defina en "Propiedades > Columnas" qué elementos de receta están protegidos contra
escritura y son visibles en runtime.

Nota
Algunas columnas pueden representar el contenido también en forma de símbolos.
Especifique cómo se visualizarán las columnas en "Contenido como". El texto y el símbolo
también pueden mostrarse conjuntamente.
6. Defina en "Barra de herramientas" qué botones deben estar disponibles en runtime en el
visor de recetas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1227

Trabajar con recetas
6.2 Trabajar con recetas
7. Defina en "Barra de estado" qué información debe visualizarse en runtime en la barra de
estado.

8. En caso necesario, introduzca en "Filtro" condiciones según las cuales deben filtrase los
elementos de receta en runtime.
9. En caso necesario, introduzca en "Ordenar" criterios según los cuales deban filtrase los
elementos de receta en runtime.

Resultado
El visor de recetas está configurado.

6.2.3.4

Exportar datos de receta en runtime

Introducción
En runtime, exporte los datos de recetas mediante un botón del visor de recetas. Configure la
operación de exportación de datos en runtime.

Cómo configurar el manejo de la exportación de datos
1. En "Propiedades > Exportación de datos" determine un nombre de archivo y un directorio
para los datos de exportación.
El nombre del archivo puede componerse del mismo nombre elegido y de las siguientes
variables de conmutación:
@OBJECTNAME: nombre de objeto del visor de recetas
@PROJECTPATH: directorio del proyecto
@CURRENTDATE: fecha actual
@CURRENTTIME: hora actual

1228

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
1. Determine la extensión del archivo p. ej. "CSV".
2. Determine el volumen de la exportación de datos:
– Se exportan todos los datos de runtime.
– Se exportan los datos de runtime seleccionados.
3. Configure el manejo de la exportación de datos en Runtime. Establezca:
– En runtime se visualiza el cuadro de diálogo "Preajustes de exportación de datos".
– El usuario puede modificar el nombre del archivo o el directorio.
4. Si se desactiva "Mostrar cuadro de diálogo", los datos se exportarán inmediatamente al
archivo de exportación cuando se opere el botón "Exportar fichero".
5. Guarde el proyecto.
6. En "Propiedades > barra de herramientas" active el botón "Exportar fichero".

Resultado
En runtime puede exportar todos los datos o los seleccionados mediante el botón
archivo determinado.

6.2.3.5

a un

Configurar persistencia

Introducción
Un usuario puede configurar los controles WinCC en runtime. Determine el efecto de la
configuración online en runtime.
Las modificaciones configuradas en runtime se guardarán clasificadas en el sistema de
ingeniería en la imagen. De esta manera la imagen conserva su configuración original.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1229

Trabajar con recetas
6.2 Trabajar con recetas

Procedimiento
1. Seleccione las "Propiedades > Seguridad > Persistencia > Configuración online", que
pueden operar solamente en el sistema de ingeniería. A continuación, se determina en
runtime de manera no modificable la configuración online:
– "Ninguna persistencia". No se conservarán las configuraciones online en runtime. La
preconfiguración no le permite al usuario seleccionar ninguna opción en runtime. Las
configuraciones online se perderán en el siguiente cambio de imagen y al desactivar/
activar el proyecto.
– "Persistencia". La preconfiguración permite al usuario en runtime las opciones de
"rechazar", "conservar" o "restablecer". Con la opción "conservar", las configuraciones
online se conservarán en el siguiente cambio de imagen y también al desactivar/activar
el proyecto.
– "Persistencia en runtime". La preconfiguración permite al usuario en runtime las
opciones de "rechazar", "conservar" o "restablecer". Con la opción "conservar" se
conservan las configuraciones online en el siguiente cambio de imagen, sin embargo se
perderán al desactivar/activar el proyecto.
Nota
Al cambiar un usuario, las diferentes configuraciones se trasmitirán una vez se haya
realizado un cambio de imagen.
2. Determine qué autorización de uso debe tener el usuario para poder configurar online.
3. "Comportamiento en el cambio de imagen" puede operar en el sistema de ingeniería y en
runtime en las preconfiguraciones "Persistencia" y "Persistencia durante el runtime". La
opción "Restaurar" solamente se puede activar en runtime, ya que en el sistema de
ingeniería se encuentra la configuración original.
Seleccione uno de los tres efectos de la configuración online en el siguiente cambio de
imagen:
– Active "Rechazar cambio" para que solamente exista la configuración online mientras se
selecciona la imagen. En el siguiente cambio de imagen se cancelarán las
modificaciones. Si vuelve a elegir la imagen, aparecerá como configurado el visor de
recetas.
– Active "Conservar modificaciones" para que no se pierda la configuración online en el
siguiente cambio de imagen.
– Active "Restablecer", para que se vuelva a transferir la imagen configurada en runtime.
Se perderán todas las modificaciones configuradas online.
Nota
También se reemplazará la imagen en runtime al guardarla o en la traducción Delta
(modificación de carga). Se perderán todas las modificaciones configuradas online.
4. Guarde la configuración.

1230

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

6.2.4

Transferencia de datos hacia autómata

6.2.4.1

Principios básicos de la transmisión de datos

Vista general
Existen las siguientes posibilidades para transferir valores de receta entre el controlador y el
panel de operador, a saber:
● Ninguna transferencia de datos
● Tipo de comunicación "Variables"
● Tipo de comunicación "Variable de datos sin formato"

Ninguna transferencia de datos
La receta no sirve para transferir los datos de receta hacia autómata, si no como memoria de
datos y fichero de usuario: Archive los valores afines en registros en los que tenga acceso
múltiple. En el caso más fácil, un operador conmuta a un visor de recetas entre las recetas. Los
datos de recetas en cuestión se cargan en las variables de receta y allí se sigue editando.

Tipo de comunicación "Variables"
Las variables de receta transfieren los valores de receta al control. A la inversa, los valores se
escriben en un registro de receta desde el control mediante variables de receta. Las variables
de control controlan la transferencia de datos. Al introducir los valores que se deseen en las
variables de control correspondientes se inicia automáticamente las siguientes peticiones:
● Escribir registros en las variables de receta y de la misma manera, en el control
● Leer registros de las variables de receta y de la misma manera, del control
● Borrar registros
● Crear registros
Nota
En el tipo de comunicación "Variables" siempre se transfiere un registro completo. No es
posible transferir datos de receta desde una recopilación.

Tipo de comunicación "Variable de datos sin formato"
El sistema de automatización envía como interlocutor activo la variable de datos sin formato
como telegrama al panel de operador. El telegrama contiene lo siguiente:
● destino-receta que desee
● destino-registros de receta que desee
● Petición p. ej. "Leer", "Escribir" o "Borrar"
● Nuevos valores de receta p. ej. en la petición "Escribir"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1231

Trabajar con recetas
6.2 Trabajar con recetas
El panel de operador devuelve los datos de receta y los datos de acuse como telegrama.
Para este intercambio de datos se utiliza la función "BSEND/BRCV" de la comunicación S7. El
número correlativo de receta sirve para identificar la receta de manera unívoca en el control
(PLC).
El control necesita un programa de usuario que ejecute en runtime lo siguiente:
● En caso necesario, recopilar datos mediante los campos E/A del panel de operador.
● Comprobar datos.
● Crear variable de datos sin formato como telegrama.
● Enviar telegrama.
Si desea iniciar la generación de telegramas desde el panel de operador, en la imagen
configure funciones que inicien el programa de usuario.
Nota
En el tipo de comunicación "Variable de datos sin formato" es posible lo siguiente:
● Transferir un solo elemento de receta
● Transferir un registro de receta completo
● Transferir varios registros de receta
No es posible la transferencia de datos desde el visor de recetas o mediante las variables de
control.

Variables de control
Introducción
Si utiliza el tipo de comunicación "Variables" en la receta, transfiera los datos de receta entre
el controlador y el panel de operador mediante variables de receta. La transferencia de datos
controla cuatro variables de control que están asignadas completamente a una receta. Se
pueden asignar otras variables de control a otras recetas.
Al introducir los valores deseados en las variables de control correspondientes se inicia
automáticamente la transferencia de datos.
Nota
Para garantizar el funcionamiento correcto de la función deben indicarse siempre las cuatro
variables de control de una receta. No modifique el tipo de datos de las variables de control.
Nota
Si la receta está protegida, la protección de acceso de las variables de control debe realizarse
por medio de las propiedades del objeto, p. ej. de la imagen, del campo E/S o del botón.

1232

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Variables de control
Variable de con‐ Tipo de datos requerido
trol

Significado

ID

Long

Número del registro de receta dentro de la receta asignada

Petición (orden)

Long

Lectura de variables de receta, escri‐
tura en la memoria de receta:

6

Lectura de la memoria de receta, es‐
critura en las variables de receta:

7

Borrar en la memoria de receta:

8

Una vez se ejecuta la petición (orden) aparece una identificación de error en
la variable de control "Petición":
Sin error

0

Errores

-1

Campo

String

El nombre del elemento de receta
Asegúrese de no utilizar el nombre de visualización.

Valor

String

El valor del elemento de receta

Requisitos
● En la receta está ajustado el tipo de comunicación "Variables".
● Hay configurado un sinóptico del proceso con los campos E/S requeridos para las variables
de proceso y de control de la receta.
Ejemplo:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1233

Trabajar con recetas
6.2 Trabajar con recetas

Aplicación de las variables de control
Para las variables de control existen las siguientes combinaciones:
● Variables de control "ID" y "Petición"
La variable de control "ID" indica el número de registro de receta que se transfiere.
La variable de control "Petición" indica si el registro de receta seleccionado se escribe, se
lee o se borra en la memoria de receta del panel de operador (6, 7, 8).
● Variables de control "Petición", "Campo" y "Valor"
Para la transferencia se selecciona aquel registro de receta cuyo elemento de receta
"Campo" posea el valor de receta "Valor". Ejemplo campo = "agua", valor = "5 litros".
La variable de control "Petición" indica si el registro de receta seleccionado se escribe, se
lee o se borra en la memoria de receta del panel de operador (6, 7, 8).
Nota
En el elemento de receta "Campo" no puede haber registros de datos diferentes con el
mismo valor de receta Para el elemento de receta debe estar activada la casilla de
verificación "Valores unívocos" en "Propiedades > Herramientas". En el caso contrario, no
es posible una asignación del registro de receta a través del valor y se utiliza el primer
registro en el que se accede a la condición "Valor en Campo".

Otras combinaciones de valores de las variables de control "ID" y "Petición"
ID

Petición = 6

Petición = 7

Petición = 8

-1

Se lee el registro de las variables de
receta y se cuelga en la receta trase‐
ro .

-

Se borra el registro con la ID más pe‐
queña de la memoria de receta.

-6

Se lee el registro de variables de re‐
ceta y se escribe en el registro de re‐
ceta con el ID más pequeño de la re‐
ceta.

Se escribe el registro con la ID
más pequeña de la receta en las
variables de receta.

Se borra el registro con la ID más pe‐
queña de la memoria de receta.

-9

Se lee el registro de las variables de
receta y se escribe en el registro de
receta con la ID más grande de la re‐
ceta.

Se escribe el registro con la ID
más grande de la receta en las va‐
riables de receta.

Se borra el registro con la ID
más grande de la memoria de receta.

Consulte también
Visualización de las recetas (Página 1222)
Manejar una imagen de receta (Página 1246)

Diferencias de los formatos de datos
Introducción
En WinCC se cumplen los formatos de datos de Intel y Microsoft. Generalmente se guarda
primero el byte menos significativo y por último el byte más significativo. Este formato de datos
es muy común y se conoce en general como "Formato Intel".

1234

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
Los formatos de datos en WinCC se distinguen básicamente de los formatos de datos en los
controladores.

Formato Intel
En el formato Intel el número decimal 300 se guarda del siguiente modo:
Bit

15

14

13

12

11

10

9

8

7

6

5

4

3

2

1

0

Binario

0

0

0

0

0

0

0

1

0

0

1

0

1

1

0

0

Hex

0

1

2

C

El número decimal 300 equivale según el formato Intel al número hexadecimal 12C ( 1*256 +
2*16 + 12*1).

Formato SIMATIC
En el formato SIMATIC, el byte menos significativo se guarda en posiciones más significativas.
El número decimal 300 se guarda en el formato SIMATIC del siguiente modo:
Bit

15

14

13

12

11

10

9

8

7

6

5

4

3

2

1

0

Binario

0

0

1

0

1

1

0

0

0

0

0

0

0

0

0

1

Hex

2

C

0

1

El número decimal 300 equivale según el formato SIMATIC al número hexadecimal 2C01.
Si el número hexadecimal 2C01 se interpreta según el formato Intel, corresponde al número
decimal 11265.
Para los controladores de la serie SIMATIC S7 hay disponibles bloques de función que
convierten los datos. Los bloques deben llamarse siempre antes y después de transferir datos
entre el controlador y WinCC. Los bloques de función se pueden descargar de la página de
Internet del Siemens Customer Support. Entonces se carga el archivo comprimido
ANSI_S5.EXE. En ANSI_S5.EXE se encuentra el bloque de función "IEEE:GP".
La transmisión activa se describe en los manuales de referencia de los controladores o bien de
los CP´s (Communication Processors).

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1235

Trabajar con recetas
6.2 Trabajar con recetas

6.2.4.2

Variable de datos sin formato

Principios básicos de la transmisión de datos mediante variable de datos sin formato
Transferencia de datos a través de una variable de datos sin formato
Los apartados siguientes describen la transferencia de datos de receta entre el panel de
operador y el controlador a través de variables de datos sin formato. En el controlador se utiliza
la función BSEND/BRCV. El telegrama que contiene la variable de datos sin formato se envía
activamente desde el controlador.
Los telegramas pueden contener una o varias peticiones de escritura o lectura.

Desarrollo de la transferencia de datos
1. El control envía el telegrama al panel de operador.
2. El panel de operador devuelve lo siguiente:
– Datos, si han sido solicitados
– Un acuse de procesamiento
El panel de operador devuelve por cada petición un acuse individual.
Nota
Dado que el controlador es el interlocutor activo en esta transferencia de datos, debe iniciar la
función deseada. En el panel de operador se puede iniciar la función deseada, p. ej.
modificando el valor de una variable externa con la correspondiente evaluación en el
controlador.
No utilice el parámetro "Tipo de petición" para iniciar la transferencia de datos. El parámetro
"Tipo de petición" que se utiliza en el encabezado de la petición o del acuse sólo posee una
funcionalidad en lo que respecta a las recetas.

Tipos de petición y códigos de error
Descripción de los tipos de petición
Tipo

1236

Descripción

4

Se comprueba la existencia de la receta.

5

Todos los registros se borran de la receta.

6

El registro es solicitado por parte del panel de operador y se escribe en el controlador.

7

El registro del controlador se escribe en el registro deseado.

8

El registro se borra de la receta.

9

El elemento del registro deseado es solicitado por parte del panel de operador y se escribe
en el controlador.

10

El elemento del registro deseado se escribe en el registro deseado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Descripción de los códigos de error
Grupo

Nº

Descripción

Causas de error posibles

General

0

La función ha sido ejecutada.

Receta

2

Datos no existentes

No se ha configurado ninguna receta
con esta PLCID.

Registro

101

Datos no admisibles

La estructura de la receta no coincide,
p. ej. el número o el tipo de campos.

--

No es posible insertar o actualizar el
registro.
Causas posibles:
● La receta es del tipo "limitado".
● Para un campo se ha configurado
un valor mínimo o máximo.
Criterio erróneo
Registro

102

Datos no existentes

Sólo con el tipo de petición 6:
● No existen datos
● El criterio es erróneo.

Campo

201

Datos no admisibles

Sólo con el tipo de petición 10:
El criterio es erróneo.
Causas posibles:
● El campo no existe.
● Para un campo se ha configurado
un valor mínimo o máximo.

Campo

202

Datos no existentes

Sólo con el tipo de petición 9:
● El criterio es erróneo.
● No se ha encontrado ningún campo
que cumpla con el criterio.

General

254

La función no existe

--

General

255

Error indefinido

--

Estructura del telegrama para peticiones
Estructura general del telegrama
Estructura del telegrama para enviar peticiones:
Longitud
Encabezado del telegrama

16 bytes

Encabezado de la petición = 1

12 bytes

Datos de la petición 1

n bytes

Encabezado de la petición = 2

12 bytes

Datos de la petición 2

n bytes

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1237

Trabajar con recetas
6.2 Trabajar con recetas
Longitud

Encabezado de la petición n

12 bytes

Datos de la petición n

n bytes

Ejemplo
Un telegrama con una petición y datos de petición de 10 bytes de longitud tiene una longitud
total de 38 bytes.
16 bytes+12 bytes +10 bytes = 38 bytes

Estructura del encabezado del telegrama
La estructura del encabezado de un telegrama requiere 16 bytes.
Función del campo

Comentario

Longitud del telegrama en bytes
LSB 1)

Longitud máx. 4091 bytes

Byte
1

Longitud del telegrama en bytes

2

Longitud del telegrama en bytes

3

Longitud del telegrama en bytes
MSB 2)

4

Tipo de transferencia

"1" del panel de operador,

5

"2" del controlador
Reservada

6

Número de peticiones en el telegrama
LSB 1)

7

Número de peticiones en el telegrama
MSB2)

8

Número de la receta (PLCID)

1. carácter, en ASCII

9

Número de la receta (PLCID)

2. carácter, en ASCII

10

Número de la receta (PLCID)

3. carácter, en ASCII

11

Número de la receta (PLCID)

4. carácter, en ASCII

12

Número de la receta (PLCID)

5. carácter, en ASCII

13

Número de la receta (PLCID)

6. carácter, en ASCII

14

Número de la receta (PLCID)

7. carácter, en ASCII

15

Número de la receta (PLCID)

8. carácter, en ASCII

16

①
②

1238

Byte menos significativo
Byte más significativo

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Nota
El número de la receta se asigna automáticamente durante la configuración en el editor
"Recetas", pero se puede modificar en caso necesario. Indique en el telegrama el número en
ASCII.

Estructura del encabezado de una petición
La estructura del encabezado de una petición requiere 12 bytes.
Función del campo

Comentario

Byte

Longitud de la petición en
bytes LSB 1)

1

Longitud de la petición en
bytes MSB2)

2

Tipo de petición

Consulte

3

"Descripción de los tipos de petición y códigos de error"
Reservada

4

Número del campo LSB1)

5

Número del campo MSB2)

6

Número de registro LSB )

7

Número de registro

8

1

Número de registro

9

Número de registro MSB2)

10

Criterio de selección LSB1)

Valor de entrada del elemento o número de elemento se‐
gún el cual se selecciona.

11

Criterio de selección MSB2)

no con 0

12

①
②

Byte menos significativo
Byte más significativo

El número del campo corresponde al número correlativo del elemento de receta.

Estructura del telegrama para acuses
Estructura general de un telegrama de acuse
Estructura del telegrama de acuse para el controlador:
Longitud
Encabezado del acuse

24 bytes

Datos de acuse

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1239

Trabajar con recetas
6.2 Trabajar con recetas

Estructura del encabezado de un acuse
La estructura del encabezado del acuse requiere 24 bytes.
Función del campo

Comentario

Longitud del telegrama en bytes
LSB 1)

Longitud máx. 4091 bytes

Byte
1

Longitud del telegrama en bytes

2

Longitud del telegrama en bytes

3

Longitud del telegrama en bytes
MSB 2)

4

Tipo de transferencia

"1" del panel de operador,
"2" del controlador

Reservada

5
6

Tipo de petición

Consulte
Descripción "Tipos de petición y códigos de error"

7

Código de error

Consulte
Descripción "Tipos de petición y códigos de error"

8

Reservada

9

Reservada

10

Número del campo LSB1)

11

2

Número del campo MSB )

12

Número de registro LSB1)

13

Número de registro

14

Número de registro

15

Número de registro MSB2)

16

Número de la receta (PLCID)

1. carácter, en ASCII

17

Número de la receta (PLCID)

2. carácter, en ASCII

18

Número de la receta (PLCID)

3. carácter, en ASCII

19

Número de la receta (PLCID)

4. carácter, en ASCII

20

Número de la receta (PLCID)

5. carácter, en ASCII

21

Número de la receta (PLCID)

6. carácter, en ASCII

22

Número de la receta (PLCID)

7. carácter, en ASCII

23

Número de la receta (PLCID)

8. carácter, en ASCII

24

①
②

Byte menos significativo
Byte más significativo

Datos de acuse
El acuse puede contener lo siguiente:
● El registro de receta solicitado
● El contenido solicitado del elemento
● Ningún dato

1240

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Configurar variable de datos sin formato
Variables de datos sin formato del canal "SIMATIC S7"
Introducción
Una variable del tipo "Tipo de datos sin formato" corresponde un telegrama de datos a nivel de
transferencia. El contenido de la variable de datos sin formato no está definido, por lo tanto sólo
el emisor y el receptor pueden interpretar los datos a transferir. Para este tipo de datos no se
efectúa en WinCC ningún ajuste de formato. La longitud es de máx. 65535 Bytes.
En WinCC se diferencia entre dos tipos de variables de datos sin formato: variable de datos sin
formato para la libre utilización del usuario y variable de datos sin formato para la ejecución de
las funciones S7.

Variable de datos sin formato para la libre utilización del usuario
Variables de datos sin formato para la libre utilización del usuario sirven para la transferencia
de datos de bloques del usuario entre WinCC y PLC y sólo manejan los datos útiles. Se
diferencia entre:
● Variable de datos sin formato como Bytes-ARRAY
● Variable de datos sin formato para las funciones BSEND/BRCV

Variable de datos sin formato para la ejecución de las funciones S7
Estas variables de datos sin formato tiene un encabezado específico del canal y son
generalmente utilizadas del sistemas de aviso y el registro de los datos de proceso en WinCC.
No se efectúa una descripción más detallada, ya que se trata de variables y funciones internas
del canal.

Crear variable de datos sin formato
Procedimiento
1. Cree una conexión nueva, p. ej. "SIMATICS7".
2. En la ficha "Parámetros" active "Conexión WinCC RT Prof > Transmitir/recibir bloque de
datos sin formato".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1241

Trabajar con recetas
6.2 Trabajar con recetas
3. En "Conexión" especifique el valor hexadecimal de la ID de conexión del recurso de
conexión que se ha asignado en la configuración del controlador.
4. Cree una variable nueva "Variable de datos sin formato_1".

5. Elija "SIMATICS7" como "Conexión".
6. Seleccione "Raw" como "Tipo de datos" y defina una "Longitud" suficiente en bytes.
7. En "Datos sin formato" active "BSEND / BRCV"

8. Indique el parámetro "R_ID" que se ha asignado al configurar el controlador.
9. Cree una receta nueva.
10.En el grupo "Propiedades > Comunicación" de la ventana de inspección elija "Variable de
datos sin formato" como tipo de comunicación y "Variable de datos sin formato_1" como
variable de datos sin formato.
11.Cree los elementos y los registros de receta. Asegúrese de que el número de receta
corresponda al campo "PLC" en el telegrama.

1242

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Variable de datos sin formato para las funciones BSEND/BRCV de la comunicación S7
Introducción
Variable de datos sin formato para las funciones "BSEND/BRCV" sirven para la transferencia
de bloques de datos del usuario entre WinCC y PLC y sólo manejan los datos útiles.
A través de estos tipos de datos sin formato se pueden utilizar las funciones "BSEND/BRCV"
de la comunicación S7. Las funciones sólo están disponibles en una S7-400 o en un S7-300
con CP343. La iniciativa de la transmisión de datos siempre la tiene el interlocutor que envía,
así también se puede mediante las funciones "BSEND/BRCV" realizar una transmisión de
bloques de datos controlada por eventos o esporádica.
Por motivos de recursos la cantidad de las variables de datos sin formato BSEND/BRCV debe
ser pequeña.
Recursos limitados al utilizar las funciones S7 "AR_SEND" y "BSEND/BRCV" para la
comunicación con el S7-400
La cantidad de datos máxima de las funciones AR_SEND- y/o BSEND/BRCV que se pueden
enviar en un momento a la vez del PLC al WinCC, está limitada a 16 Kbytes.
Ejemplos:
● 1x BSEND con máx. 16 Kbytes
● 1x AR_SEND con 8 kByte + 1x BSEND con 8 kByte
● 1x AR_SEND con 10 Kbytes + 1x AR_SEND con 2 Kbytes + 1x BSEND con 4 Kbytes
Nota
Si se ha transferido un bloque datos de una orden de escritura al PLC, pero ha sido
eliminado todavía o completamente del buffer de recepción, se rechaza una siguiente
orden de escritura con una indicación de error. Órdenes de escritura con una R_ID >
0x8000 0000 se anotan con este tipo de indicación de error en una cola específica de la
conexión y se intenta aprox. 6 segundos de repetir la orden de escritura.
La coordinación temporal de la transmisión depende del usuario y se debe de tener en
cuenta en órdenes de escritura con intervalos temporales más cortos.

Configuración de una conexión PBK para la utilización de las funciones" BSEND/BRCV"
La utilización de las funciones "BSEND/BRCV" sólo es posible a través de una "conexión fija
proyectada ", llamada una conexión PBK (Módulo programado de comunicación). Para la
configuración de una conexión fija proyectada se debe indicar en los parámetros de conexión
un recurso de conexión (hex: 10 ... DF). STEP 7 asigna el recurso de conexión en la
configuración de la conexión en el PLC. La conexión se debe configurar en el PLC como punto
final de conexión pasivo.
Mediante una conexión fija proyectada también se pueden efectuar órdenes de lectura y de
escritura "normales". Si se transfieren mediante la conexión grandes áreas de datos, entonces
los bloques de datos se transfieren en varios PDUs. Por motivos de rendimiento puede ser
aconsejable de crear una propia conexión para las funciones "BSEND/BRCV".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1243

Trabajar con recetas
6.2 Trabajar con recetas

Variable de datos sin formato para las funciones "BSEND/BRCV" con el parámetro "R_ID"
Las variables de datos sin formato se proyectan para la transferencia de bloques de datos
"BSEND/BRCV" como datos sin formato del tipo "BSEND/BRCV" con una "R_ID". La longitud
de los datos resulta implícitamente de la cantidad de datos enviados o recibidos.

Como "R_ID" debe especificarse un valor decimal de 1 a 999999. La R_ID se asigna en la
configuración en el PLC y sirve para diferenciar varias transmisiones de bloques de datos
mediante una conexión. En el subsistema de comunicación subordinado (SIMATIC Device
Drivers) se indican las llamadas de emisión y de recepción siempre haciendo referencia a esta
R_ID. Una variable de datos sin formato está siempre asignada a una R_ID inequívoca.

Enviar una variable de datos sin formato "BSEND/BRCV"
El envío de una variable de datos sin formato "BSEND/BRCV" se efectúa como la escritura de
una variable de proceso "normal". Tras enviar el bloque de datos y recibir una confirmación
positiva de AS, se acepta el bloque de datos en la imagen del administrador de datos.

Recepción de una variable de datos sin formato "BSEND/BRCV"
"Datos sin formato BSEND/BRCV" se envían esporádicamente debido a la iniciativa del PLC
al canal. Una lectura explícita de variables de datos sin formato S7 no es posible.
Los mecanismos de BSEND/BRCV no contienen funciones para la sincronización. Si en la
fase de inicio no se ha conectado todavía ningún usuario para la recepción de los datos, la
parte receptora rechaza los bloques de datos que envía el PLC. Por tanto, el usuario se debe
de ocupar él mismo de la sincronización y p.ej. validar la dirección de transmisión en el PLC
activando una marca en una palabra de datos.

1244

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

6.2.5

Manejo en runtime

6.2.5.1

Visor de recetas

Funcionalidad
El visor de recetas ofrece acceso a ficheros de usuario, a las recetas y a las recopilaciones de
recetas.
En Runtime puede:
● Configurar visor de recetas online
Las modificaciones configuradas en runtime se guardarán en el sistema de configuración
separadas de la imagen, según el usuario. De esta manera, la imagen conserva su
configuración original en el sistema de configuración.
● Crear, borrar o modificar registros de datos
● Pasar hojas en las recetas
● Leer y escribir variables en conexión de variable directa
● Importar y exportar recetas
● Definir criterios de selección para mostrar solamente una parte determinada de la receta
● Definir condiciones de clasificación para los elementos de receta visualizados

Propiedades
Durante la configuración, asocie un visor de receta a una receta o recopilación de recetas. La
configuración y modificación online de los valores de receta seleccionados en runtime se
puede proteger frente a accesos no autorizados mediante permisos de uso propios. Si elimina
la protección de acceso deberá asociar nuevamente el visor de receta en el diálogo de
configuración a la receta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1245

Trabajar con recetas
6.2 Trabajar con recetas
La protección de acceso se consulta al abrir la imagen del visor de recetas:
● Si el usuario no tiene ninguna autorización para leer un elemento de receta, la
correspondiente columna no aparecerá en la tabla.
● Si el usuario no tiene autorización para escribir un elemento de receta, el usuario no podrá
editar los datos de la columna correspondiente de la tabla.
Debe configurar por separado una protección de acceso para variables de control mediante las
propiedades de objeto p. ej. de la imagen, campo E/S o botón de comando.

6.2.5.2

Manejar una imagen de receta

Introducción
La imagen de receta se maneja con los objetos de manejo configurados por el usuario. El
apartado describe el manejo de la imagen de receta con variables de control del apartado
"Variables de control (Página 1232)".
Nota
Runtime API
En el runtime API hay disponibles numerosas funciones uaArchive para editar recetas y
recopilaciones de recetas en runtime (véase Capítulo "Interfaces > Runtime API", apartado
"Variables de control").

Requisitos
● En la receta está ajustado el tipo de comunicación "Variables".
● En las propiedades del elemento de receta "Coloring 7" está activada en "Opciones" la
casilla de verificación "Valores unívocos".
● Las variables de receta y las variables de control están configuradas.
● Se ha configurado una memoria imagen de proceso con los campos E/S necesarios.
● Los campos E/S están conectados con las variables de receta y de control.
Ejemplo:

1246

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Procedimiento
Para transferir datos de receta a la memoria de recetas del panel de operador, proceda del
siguiente modo:
1. En los campos azules "Water", "Sugar", "Aroma", "Coloring 7", "Concentrate" especifique
los valores de receta representados. Los valores de receta conforman el registro de receta
que se va a transferir.
2. Especifique como "ID" del registro de recetas de destino el número "3".
3. Especifique en el campo "Instruction" como petición de lectura el número "6".
Los datos de receta especificados se transfieren como registro completo. El registro de receta
número 3 se sobrescribe en la memoria de recetas. La petición de control devuelve el valor "0"
(sin error) en la variable de control "Petición".

Procedimiento alternativo
1. En los campos azules " Water", "Sugar", "Aroma", "Coloring 7", "Concentrate" especifique
valores de receta nuevos.
2. Especifique como "Field" el elemento de receta "Coloring 7".
3. Especifique "020" en el campo "Value" como valor del elemento de receta.
4. Especifique en el campo "Instruction" como petición de lectura el número "6".
Los datos de receta especificados se transfieren como registro completo. El registro de receta
cuyo elemento de receta " Coloring 7" posee el valor de receta "020" se sobrescribe (en el
ejemplo el registro número 3 en la memoria de recetas). La petición de control devuelve el valor
"0" (sin error) en la variable de control "Petición".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1247

Trabajar con recetas
6.2 Trabajar con recetas

Consulte también
Visualización de las recetas (Página 1222)
Variables de control (Página 1232)

6.2.5.3

Operación del ratón y el teclado

Introducción
Opere el visor de recetas en runtime mediante los botones de la barra de herramientas. Si no
desea manejar mediante la barra de herramientas, puede escribir la "ID" del botón deseado
mediante cualquier tipo de dinámica en la propiedad de objeto "ToolbarButtonClick"

Sinopsis
Símbolo

Descripción

ID

"Tooltip"

1

Accede al visor de recetas con la ayuda.
"Cuadro de diálogo de configuración"

2

Abre el cuadro de diálogo de configuración, en el que se modifican las
propiedades del visor de recetas.
"Seleccionar conexión de datos"

3

Abre un cuadro de diálogo para seleccionar una receta o recopilación de
recetas. Los datos de receta se representan en la tabla del visor de recetas.
"Primera fila"

4

El primer registro se representa en la tabla mediante el botón.
"Fila anterior"

5

El registro previo se representa en la tabla mediante el botón.
"Fila siguiente"

6

El registro posterior se representa en la tabla mediante el botón.
"Última fila"

7

El último registro se representa en la tabla mediante el botón.
"Borrar fila"

8

Se borra el contenido de las filas marcadas.
"Cortar fila"

9

Se corta el contenido de las filas marcadas.
"Copiar fila"

10

Se copia el contenido de las filas marcadas.
"Pegar fila"

11

Se inserta el contenido de las filas copiadas o cortadas a partir de la fila
seleccionada.

1248

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
"Leer variables"

12

El contenido de las variables WinCC enlazadas se lee mediante el botón y
se escribe en los elementos de receta. Para poder utilizar el botón, debe
estar activado el tipo de comunicación "variables" en la receta mostrada.
Los elementos de receta deben estar asociados a variables.
"Escribir variables"

13

El contenido de los elementos de receta se escribe en las variables WinCC
enlazadas mediante el botón. Para poder utilizar el botón, debe estar acti‐
vado el tipo de comunicación "variables" en la receta mostrada. Los ele‐
mentos de receta deben estar asociados a variables.
"Importar fichero"

14

Un archivo CSV se importa desde el directorio "ua" de la carpeta del pro‐
yecto a la tabla del visor de recetas mediante el botón.
"Exportar fichero"

15

El contenido original de la tabla en el momento de cargar se exporta con
títulos de tablas mediante el botón. La receta se almacena como archivo
CSV en el directorio "ua" de la carpeta del proyecto.
"Clasificar"

16

Abra un cuadro de diálogo para ajustar una clasificación personalizada de
las columnas mostradas.
"Diálogo de selección"

17

Determine los criterios de selección para las columnas del visor de recetas
que se representarán en la tabla.
"Imprimir"

18

Inicia la impresión de los valores visualizados. El trabajo de impresión uti‐
lizado para la impresión se puede especificar en la ficha "General" del
cuadro de diálogo de configuración.
"Ajustar base de tiempo"

19

Abre un diálogo para ajustar la base de tiempo para los tiempos utilizados.
"Exportar datos"

20

Con este botón se exportan los datos de runtime actuales de una receta o
consulta de receta a un archivo CSV.
Si la opción "Mostrar cuadro de diálogo" está activada, se abrirá un cuadro
de diálogo en el que se pueden ver los ajustes de exportación e iniciar la
exportación. Con la autorización de uso correspondiente también puede
seleccionar para la exportación el archivo y el directorio.
Si no se muestra ningún cuadro de diálogo, se inicia de inmediato la ex‐
portación de los datos al archivo preconfigurado.
"Definido por el usuario 1"

1001

Muestra el primer botón creado por el usuario. La función del botón está
definida por el usuario.

Posibles elementos de la barra de estado
En la barra de estado del visor de recetas pueden aparecer los siguientes elementos:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1249

Trabajar con recetas
6.2 Trabajar con recetas

Símbolo

Nombre

Descripción

Nombre de fichero

Muestra los nombres de la receta o recopilación de recetas
seleccionada.

Fila

Muestra el número de filas seleccionadas.

Columna

Muestra el número de columnas seleccionadas.

Fecha

Muestra la fecha del sistema.

Hora

Muestra la hora del sistema.

Base de tiempo

Muestra la base temporal que se usa para mostrar las horas.

Navegación en la tabla
En la tabla puede navegar de la siguiente manera:
● Para ir a la siguiente celda pulse la tecla "ENTER" o la tecla "Derecha" del cursor.
● Para ir a la celda anterior pulse la tecla "SHIFT+ENTER" o la tecla "Izquierda" del cursor.
● Para ir a la siguiente fila pulse con el ratón sobre la fila o mediante la tecla del cursor "Abajo".
● Para ir a la fila anterior pulse con el ratón sobre la fila o mediante la tecla del cursor "Arriba".
Nota
Si al iniciar el runtime se visualiza el mensaje de error "Error while connecting the data!",
indica que el visor de recetas no tiene conexión a una receta o recopilación de recetas.
Compruebe lo siguiente:
● que se ha introducido el nombre correctamente.
● que no se ha modificado la configuración.
● que la receta o recopilación de recetas conectada existe todavía.

6.2.5.4

Editar recetas

Introducción
Puede editar los datos en el visor de recetas. Las siguiente posibilidades están a disposición:
● Introducir nuevos datos
● Modificar datos existentes
● Borrar filas
● Cortar la fila, copiar y volver a pegar

1250

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Requisito
● En el diálogo de configuración en la ficha "General" ha permitido la edición.
● Para la columna a editar, en el diálogo de configuración en la ficha "Columnas" ha
desactivado la propiedad "Sólo lectura".
● La columna "ID" no se puede editar.
● Si la recopilación de recetas está asociada a un visor, no es posible borrar ni cortar una fila.

Introducir nuevos datos en la tabla
1. Haga clic en

para ir a la última fila. La fila está seleccionada.

2. Haga doble clic en la primera celda de la fila seleccionada. También puede pulsar "F2", "ALT
+ENTER" o "CTRL+ENTER" en la celda.
3. Introduzca los valores de las celdas uno tras otro y confirme cada vez con la tecla Enter.
Después de haber introducido todos los valores en la fila y haya seleccionado otra, se
volverá a escribir el nuevo registro en la receta. Para ir a otra fila pulse con el ratón, con la
tecla "ENTER" o con las teclas del cursor "Arriba" y "Abajo".
4. Puede copiar en el portapapeles los datos de una celda seleccionada con "CTRL+C" o
"CTRL+X". Con "CTRL+V" podrá introducir los datos copiados en una celda seleccionada.

Modificar los datos existentes en la tabla
1. Haga clic en
o
para ir a la fila deseada. Puede ir a la fila deseada también
mediante la barra de desplazamiento.
2. Haga doble clic en la celda deseada de la fila seleccionada. También puede pulsar "F2",
"ALT+ENTER" o "CTRL+ENTER" en la celda.
3. Introduzca los valores de las celdas uno tras otro y confirme cada vez con la tecla Enter.
Después de que hay introducido todos los valores en la fila y haya seleccionado otra, se
escribirá un registro modificado en la receta.

Borrar una fila de la tabla
1. Haga clic en
o
para ir a la fila deseada. Puede ir a la fila deseada también
mediante la barra de desplazamiento.
2. Haga clic en

para borrar la fila seleccionada.

Cortar, copiar y pegar filas
1. Haga clic en
o
para ir a la fila deseada. Puede ir a la fila deseada también
mediante la barra de desplazamiento.
2. Haga clic en
o
para cortar o copiar los datos de la fila. Adicionalmente puede
utilizar también la combinación de teclas "CTLR+ALT+X" o "CTLR+ALT+C".
3. Diríjase a la fila donde desee copiar los datos. Haga clic en
, para pegar los datos
cortados o copiados. Si no desea sobrescribir los datos de la fila seleccionada, vaya a la
última fila para pegar los datos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1251

Trabajar con recetas
6.2 Trabajar con recetas

6.2.5.5

Seleccionar y configurar datos

Introducción
El visor de recetas muestra los datos de la receta conectada en una tabla. El contenido
indicado de la tabla se determina por las columnas seleccionadas y la selección del contenido
de las mismas.

Requisitos
● Ha creado una o más recetas o recopilaciones de recetas.
● Ha asociado el visor de recetas a una receta o recopilación de recetas.

1252

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Configurar las columnas
1. Pasar a la ficha "Columnas".

2. En la lista "Columnas" se ven los campos de la receta o recopilación de recetas conectadas.
Si la casilla de verificación que precede al nombre de la columna está marcada, la columna
se mostrará en la tabla. Desactivar la casillo de opciones con el ratón, cuando no aparezca
la columna.
3. Determinar el orden de las columnas en la tabla con los botones "Arriba" y "Abajo".
4. Seleccione una columna, para configurar las propiedades y el formato.
5. Modifique según necesidad el ancho de columna en la tabla. Introducir un valor en el campo
"Longitud en caracteres".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1253

Trabajar con recetas
6.2 Trabajar con recetas
6. Algunas columnas pueden representar el contenido y los títulos también en forma de
símbolos. Determine en el campo "Representación", como se representan esas columnas.
Textos y símbolos pueden representarse conjuntamente.
7. Guarde la configuración.

Selección de contenidos de la columna a representar en la tabla
En el área "Selección" configurar los criterios, a considerar en las columnas durante la
representación de contenidos.

Procedimiento
1. Hacer clic en "Editar...". Se abrirá el diálogo de selección.

2. Fije los criterios para la visualización. Encontrará más información acerca de la selección
de columnas en Seleccionar datos (Página 1255).
3. Cierre el cuadro de diálogo "Selección" con "OK". La selección se tiene en cuenta al
arrancar el runtime en la tabla del visor de recetas.

1254

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Configuración de la clasificación de columnas
En el área "Clasificación" configure la clasificación de las columnas de la tabla. En Runtime
también se pueden definir los criterios de selección mediante funciones de teclas.
1. Haga clic sobre el botón de comando "Editar...". Se abre el diálogo de clasificación.

2. Fijar la secuencia de clasificación.
3. Cierre el cuadro de diálogo de clasificación con "OK".
4. Guarde la configuración del contenido.

Consulte también
Seleccionar datos (Página 1255)

6.2.5.6

Seleccionar datos

Introducción
El contenido de la receta que desea representar o exportar, puede establecerlo en el runtime
mediante el diálogo de selección. En el diálogo de selección defina los criterios de selección
con respecto a las columnas de la receta mostradas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1255

Trabajar con recetas
6.2 Trabajar con recetas

Requisitos
● El cuadro de diálogo de selección está abierto (ver apartado "Seleccionar y configurar datos
(Página 1252)").

Procedimiento
Proceda de la manera siguiente:
1. En la columna "Criterio" haga doble clic en la primera línea vacía. Se muestra la lista con las
columnas del visor de recetas. Seleccione la columna deseada, p.ej. "campo1".
2. En la columna "Operando" haga doble clic para seleccionar un operando.
3. En la columna "Ajuste" haga doble clic para indicar un para seleccionar un valor de
comparación.
4. Haga doble clic en la columna "Combinación", para seleccionar un vínculo "AND" o "OR".

1256

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
5. Repita el proceso si desea establecer criterios adicionales.
6. Cierre el cuadro de diálogo de selección con "Aceptar". La selección se muestra en la tabla
del visor de recetas.
Nota
Asegurar la visualización de los contenidos de las columnas
Asegúrese de usar la utilización correcta de los ajustes y vínculos de criterios.
Si se usa un enlace incorrecto puede ocurrir que en el visor de recetas no se muestren datos
de la receta enlazada.
Por ello, antes de enlazar criterios, verifique cada criterio por separado y luego cada criterio
enlazado. Verifique también que se visualicen en combinación los contenidos esperados.
De este modo se asegurará de que la selección se visualice íntegramente en el visor de
recetas.

Consulte también
Seleccionar y configurar datos (Página 1252)

6.2.5.7

Clasificar datos

Introducción
Los datos del visor de recetas pueden clasificarse en runtime según las columnas. Las
columnas se pueden clasificar ya sea por medio de la función de teclas "Diálogo de
ordenación" o directamente a través del título de la columna.
Nota
Durante la configuración del visor de recetas usted puede definir los criterios de clasificación
haciendo clic en el botón "Editar..." de la ficha "Columnas" dentro de "Clasificación".

Cómo clasificar por medio del cuadro de diálogo Orden
Requisitos
● Se ha activado el botón de comando "Diálogo de clasificación" en la ficha "Barra de
herramientas" de UserArchiveControl.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1257

Trabajar con recetas
6.2 Trabajar con recetas

Procedimiento
1. Haga clic sobre el botón de comando "Diálogo de ordenación"

.

2. En la lista "Ordenar por" seleccione la columna de la receta enlazada que se quiera
clasificar primero. Haga clic en la casilla de opción para definir un orden ascendente o
descendente. Si desea hacer una clasificación según varias columnas, en las listas de
"Clasificar después por" seleccione las columnas en la secuencia deseada.

De esta manera clasifica el contenido de las columnas por el título de la columna
Al hacer la clasificación a través del encabezado columna tiene la posibilidad de establecer la
secuencia de la clasificación para más de cuatro columnas. Se mostrará un símbolo de
clasificación y el índice de clasificación justificados a la derecha que muestran la secuencia de
ordenación de los contenidos de las columnas.

Requisitos
● Haciendo clic o doble clic, ha autorizado en la ficha "Parámetros" del visor de recetas, la
ordenación en el campo de lista "Clasificación por encabezado de columna".
● Ha activado las casillas de opción "Mostrar símbolo de clasificación" y "Mostrar índice de
clasificación".

Procedimiento
1. Haga clic en el encabezado columna cuya columna desea clasificar como primera columna.
El índice de clasificación "1" se visualiza con el símbolo de clasificación hacia arriba para
la clasificación ascendente.
2. Si desea hacer una clasificación descendente haga otra vez clic en el encabezado columna.

1258

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
3. Si ha establecido la secuencia de ordenación con "arriba/abajo/ninguno", podrá deshacer
la ordenación de las columnas haciendo clic por tercera vez.
4. Si desea hacer una clasificación según varias columnas haga clic en el encabezado
columna de cada columna.

6.2.6

Ejemplos

6.2.6.1

Ejemplo: Crear recetas

Tarea
En el presente ejemplo deben crearse dos recetas.
● Una receta "Beverage" para bebidas. En la planta de mezcla de bebidas se elaboran
diferentes bebidas. Para cada artículo se crea un registro de receta correspondiente.
● Una receta "Orders" para pedidos. En los pedidos están depositados los datos de pedido
actuales.

Configuración
Los ajustes se refieren a un panel de operador acoplado a un controlador SIMATIC S7-300 o
SIMATIC S7-400.
Para el ejemplo necesitará las siguientes variables, recetas, elementos de receta y registros
de receta:
Variables:
Nombre

Conexión al controlador Dirección

Tipo

article

Sí

DB 120, DBW 0

String

litrewater

Sí

DB 120, DBW 4

Integer

kilosugar

Sí

DB 120, DBW 8

Integer

gramaroma

Sí

DB 120, DBW 12

Integer

litreconcentrate

Sí

DB 120, DBW 16

Integer

coloring

Sí

DB 120, DBW 20

Integer

customer

Sí

DB 120, DBW 24

String

numbercustomer

Sí

DB 120, DBW 28

String

numberorder

Sí

DB 120, DBW 32

Integer

quantitiy

Sí

DB 120, DBW 36

Integer

filling

Sí

DB 120, DBW 40

Integer

dateorder

Sí

DB 120, DBW 44

Date

status

Sí

DB 120, DBW 48

Integer

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1259

Trabajar con recetas
6.2 Trabajar con recetas
Receta "Beverage":
Elemento de receta

Variable asociada

Article

article

Water

litrewater

Sugar

kilosugar

Aroma

gramaroma

Concentrate

litreconcentrate

Coloring

coloring

ID de registro
Article

1

2

3

Juice

Nectar

Cola Light

Water

5

50

72

Sugar

5

10

35

Aroma

100

300

240

Concentrate

95

50

35

Coloring

FS 0063

FS 0063

FS 1007

Receta "Orders":
Elemento de receta

Variable asociada

Customer

customer

Number

numbercustomer

Order

numberorder

Article

article

Quantitiy

quantitiy

Filling

filling

Status

status

Date

dateorder

Procedimiento
1. Cree las variables listadas arriba con los ajustes anteriormente mencionados.
2. Cree las recetas "Beverage" y "Orders" con los ajustes indicados más arriba.
3. Para las recetas elija las siguientes propiedades:
– En "General > Tamaño" el tipo "Ilimitado"
– En "Comunicación > Tipo de comunicación" el tipo de comunicación "Variables"

1260

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas
4. Cree los elementos de receta en cada una de las recetas.

5. Para los siguientes elementos active en "Herramientas" de la ventana de propiedades la
casilla de verificación "Valores unívocos":
– En la receta "Beverage" para el elemento de receta "Article"
– En la receta "Orders" para el elemento de receta "Order"
6. Cree en la receta "Beverage" los registros arriba mencionados. Introduzca en cada registro
los valores indicados.

Resultado
Las recetas "Beverage" y "Orders" están creadas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1261

Trabajar con recetas
6.2 Trabajar con recetas

Consulte también
Ejemplo: Configurar el visor de recetas (Página 1263)

6.2.6.2

Ejemplo: Crear una recopilación de recetas

Tarea
En este ejemplo se crea la recopilación de recetas "Label". En la recopilación de recetas se
visualizan los siguiente elementos de receta:
Elemento de receta

Receta

Article

Beverage, Orders

Customer

Orders

Status

Orders

Order

Orders

Filling

Orders

Sugar

Beverage

Coloring

Beverage

El elemento de receta "Article" está contenido en ambas recetas como elemento común.

Requisitos
Las recetas "Beverage" y "Orders" están creadas.

1262

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Procedimiento
1. Cree la recopilación de recetas "Label". Cree los elementos arriba indicados.

2. Introduzca en "Propiedades > Relaciones" las siguientes condiciones:
Beverage.Article = Orders.Article

Resultado
La recopilación "Label" está creada.

6.2.6.3

Ejemplo: Configurar el visor de recetas

Tarea
En el presente ejemplo se inserta un sinóptico de la instalación con visor de recetas en la vista
"Etiqueta".

Requisitos
Los ejemplos "Crear recetas" y "Crear recopilación de recetas" están creados.
El sinóptico del proceso "Planta de producción de bebidas" debe estar creado y abierto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1263

Trabajar con recetas
6.2 Trabajar con recetas

Procedimiento
1. Inserte el visor de recetas en el sinóptico del proceso. El visor de recetas lo encuentra en
"Controles" de la ventana de herramienta .
2. En la ventana de inspección, dentro del grupo "General > Visualización", seleccione el tipo
"Recopilación de recetas" en el campo de entrada "Origen de los datos" mediante la flecha.
3. Seleccione la recopilación de recetas "Etiqueta".
4. En el grupo "Propiedades" > "Apariencia" de la ventana de inspección defina opciones de
visualización adicionales para el visor de recetas.
5. Pase a la ventana de inspección dentro del grupo "Propiedades" > "Columnas".
– Para todos los elementos de receta active las casillas de verificación en las columnas
"Visible" y "Protegido".
6. Cambie al grupo "Propiedades" > "Barra de herramientas" de la ventana de inspección. En
"Barra de herramientas - Botones de comando" active para los siguientes botones las
casillas de verificación de la columna "Visible".
– "Primera fila"
– "Fila anterior"
– "Fila siguiente"
– "Última fila"
– "Diálogo de ordenación"
– "Diálogo de selección"
7. Pase a la ventana de inspección dentro del grupo "Propiedades" > "Columnas". Introduzca
en la columna "Clasificación" la siguiente clasificación:
– Según el número de orden
– Ascendente

Resultado
En runtime se abre el visor de recetas con la recopilación de recetas "Etiqueta" en el sinóptico
del proceso "Planta de producción de bebidas". Los registros se visualizan ordenados según
el número de orden. Con los botones se puede seleccionar entre los diferentes registros.
A través del campo de datos "Estado" se puede visualizar la petición actual o bien peticiones
ya procesadas.
Con los botones "Diálogo de ordenación" y "Diálogo de selección" puede adaptar el visor de
recetas de los registros según sus necesidades.

Consulte también
Ejemplo: Crear recetas (Página 1259)

1264

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

6.2.6.4

Uso de variables de control

Ejemplo de utilización de variables de control:
Para poder trabajar con variables de control en este ejemplo, deben ejecutarse los pasos
siguientes:

Requisitos
La receta "Bebidas" está creada.
Propiedades de la receta "Cola"
Tipo de fichero

"Ilimitado"

Comunicación

"Variables"

Tipo de datos de la variable de control "ID"

Long

Tipo de datos de la variable de control "Orden"

Long

Tipo de datos de la variable de control "Campo" String (1 carácter)
Tipo de datos de la variable de control "Valor"

String (1 carácter)

Procedimiento
1. Cree las variables de control con las propiedades siguientes:
Variable de control

Formato de datos

Formato de salida

ID

Decimal

0999

Petición

Decimal

s9

Campo

String

*

Valor

String

*

1. Elija para cada variable de control la propiedad del objeto "Actualizar en caso de
modificación".
2. Asocie las variables de control a la receta "Bebidas".
3. Cree una nueva imagen e inserte un visor de recetas.
– Seleccione la receta "Bebidas".
– Active en "General" y en "Edición" las casillas de verificación "Insertar", "Modificar" y
"Borrar".
4. Cree para cada elemento de receta configurado un campo E/S.
5. Asocie los campos E/S a las variables respectivas.
P. ej. el campo E/S para "Colorante" a la variable de proceso "Coloring".
– Cree para cada campo E/S configurado un campo de texto para la rotulación.
Con ello se le asignan a los distintos elementos de receta los campos E/S en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1265

Trabajar con recetas
6.2 Trabajar con recetas
6. Cree para cada variable de control un campo E/S.
– Cree para cada campo E/S configurado un campo de texto para la rotulación.
Con ello se le asignan a las distintas variables de control los campos E/S en runtime.
7. Active runtime o bien cargue el proyecto en el panel de operador e inicie el proyecto.

Resultado
La configuración de la receta está completa.

Acceso a la receta
A la receta se accede del siguiente modo:
● Dentro de la vista de tabla del visor de recetas

● A través de los campos E/S configurados

1266

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con recetas
6.2 Trabajar con recetas

Escribir registro mediante su ID en las variables de proceso
● Introduzca en el campo E/S "ID" la ID "3" y en el campo E/S "Petición" introduzca un "7".
Los valores del registro "3" se escriben en las variables de proceso de los campos E/S y se
visualizan en los campos E/S.
Si los valores del registro se han leído correctamente de la receta, se muestra el número de
error "0" en el campo "petición".
En caso de error se emite el número de error "-1".
Las variables de control "Campo" y "Valor" no se necesitan.
Nota
Al introducir la ID "-1" y la orden "6" se lee en la tabla el contenido actual de las variables de
proceso del controlador. Los nuevos valores se adjuntan al final de la tabla. Las IDs de los
registros se incrementan continuamente.

Lectura de las variables de proceso mediante la ID
● Modifique los valores en los campos E/S de las variables de proceso e introduzca en el
campo "ID" un "5". En el campo E/S "Petición" introduzca un "6".
Los valores modificados de las variables de proceso se escriben ahora en el registro "5" de
la receta. Los valores contenidos previamente en este registro se sobrescriben.
Las variables de control "Campo" y "Valor" no se necesitan.

Escribir registro en las variables de proceso mediante las variables de control "Campo" y "Valor"
Nota
En el caso del elemento referenciado con la variable de control "Valor" debe activarse la casilla
de verificación "El campo debe tener un valor unívoco" en "Propiedades > Opciones de
memoria". De lo contrario, no es posible asignar unívocamente el registro de receta al valor del
elemento.
● Introduzca en el campo E/S "Campo" la palabra "Artículo" y en el campo E/S "Valor" escriba
"Cola Light". En el campo E/S "Orden" introduzca un "7".
Los valores del registro "Cola Light" se escriben en las variables de proceso de los campos
E/S y se visualizan en los campos E/S.
La variable de control "ID" no se necesita y por lo tanto debe ponerse a 0.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1267

Trabajar con recetas
6.2 Trabajar con recetas

1268

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.1

Principios básicos

7.1.1

Informes

7

Introducción
Los informes se utilizan para documentar datos de proceso y ciclos de producción ya
procesados. Existe la posibilidad de elaborar periódicamente informes de turnos, imprimir
datos de lotes o documentar el proceso de fabricación para el control de calidad.

Elaboración de informes
Los informes se elaboran y editan en el editor "Informes". En dicho editor se configura lo
siguiente para los informes:
● Apariencia formal
En la ventana de inspección se define la apariencia formal del informe. Por ejemplo, se
define el formato de página y los márgenes, y si el informe tiene primera y última página,
encabezado o pie de página.
Además, en los informes de Runtime Professional se define para las diferentes páginas si
se emiten con o sin una marca de agua.
● Contenido
En el área de trabajo se especifica qué datos contiene el informe, p. ej. los avisos de un
turno. Para ello, inserte los objetos correspondientes en la(s) página(s) de detalles.
Diseñe también primera y última página, encabezado y pie de página como lo desee. Para
las páginas con marca de agua diseñe otras páginas que se visualicen como "imagen de
fondo".
La estructura modular permite configurar el informe adecuado para cada caso de aplicación.
Nota
En los paneles de operador que no soportan la generación de informes no está disponible el
editor "Informes".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1269

Trabajar con informes
7.1 Principios básicos

Impresión de informes
Un informe se imprime en runtime de forma controlada por tiempo o por evento.
● Controlada por tiempo: impresión automática en una fecha determinada, a una hora
determinada o en intervalos.
● Controlada por evento: la impresión se inicia al producirse un evento determinado, p. ej. al
hacer clic en un botón o al rebasar un valor límite.
En función del runtime para el que se configura la impresión de un informe, el procedimiento
es distinto.
En Runtime Advanced, los informes se imprimen en la impresora estándar del panel de
operador.
En Runtime Professional se especifica lo siguiente mediante un trabajo de impresión:
● Si se imprimen sólo algunas o todas las páginas del informe
● Si se imprimen todos los datos o sólo los datos de un período determinado
● Si el informe se imprime en una impresora o se visualiza en un archivo
● Si el operador puede seleccionar una impresora antes de imprimir o modificar los ajustes
como el número de páginas
● Si el informe que se va a imprimir debe aparecer en la lista de trabajos de impresión de una
ventana de aplicación configurada de manera correspondiente

Función de impresión de objetos de imagen
En algunos objetos de imagen de Runtime Professional, p. ej. en el visor de avisos, se incluye
de forma estándar la impresión de informes a través de un botón (símbolo de impresora).
WinCC utiliza para la impresión informes de sistema predefinidos, los cuales se pueden
adaptar a sus necesidades o reemplazar por un informe personalizado.

Consulte también
Estructura de los informes (Página 1271)
Crear un informe (Página 1284)
Estructura de los informes (Página 1274)
Principios básicos de la elaboración de informes (Página 1280)
Principios básicos de la impresión de informes (Página 1299)
Principios básicos de los informes de sistema y trabajos de impresión del sistema
(Página 1306)

1270

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.1 Principios básicos

7.1.2

Estructura de los informes

Introducción
Un informe de WinCC consta de varias secciones que se activan o desactivan según sea
necesario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1271

Trabajar con informes
7.1 Principios básicos

Secciones de un informe
La siguiente figura muestra las diferentes secciones posibles de un informe en el editor
"Informes":

1272

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.1 Principios básicos

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1273

Trabajar con informes
7.1 Principios básicos

Portada y última página
Introduzca en la primera página informaciones que describan el contenido del informe. Utilice
la última página, por ejemplo, como pie de imprenta para introducir información de contacto de
supervisores de turno o de técnicos de servicio. La primera y última página se imprimen en una
página cada una. Cada una ocupa exactamente una página y no hay saltos de página.

Página de detalles
En las páginas de detalles del informe se configura la visualización de los datos de runtime, p.
ej. un informe de receta o aviso.
Para insertar más páginas de detalles o modificar su orden, utilice el menú contextual de la
página de detalles.

Encabezado y pie de página
El encabezado y el pie de página se visualizan en la página de detalles del informe. En el
encabezado o pie de página se insertan por lo general números de página o la fecha.

Consulte también
Crear un informe (Página 1284)
Informes (Página 1269)
Principios básicos sobre la elaboración de informes (Página 1277)

7.1.3

Estructura de los informes

Introducción
Un informe de WinCC consta de varias secciones que se activan o desactivan según sea
necesario.

1274

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.1 Principios básicos

Secciones de un informe
La siguiente figura muestra las diferentes secciones posibles de un informe en el editor
"Informes":

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1275

Trabajar con informes
7.1 Principios básicos

Portada y última página
Introduzca en la primera página informaciones que describan el contenido del informe. Utilice
la última página, por ejemplo, como pie de imprenta para introducir información de contacto de
supervisores de turno o de técnicos de servicio. La primera y última página se imprimen en una
página cada uno. Cada uno ocupa exactamente una página y no hay saltos de página, incluso
si se configura un objeto con una longitud dinámica en la página.

Página de detalles
En las páginas de detalles del informe se configura la visualización de los datos de runtime, p.
ej. un informe de receta o aviso.
Para insertar más páginas de detalles o modificar su orden, utilice el menú contextual de la
página de detalles.

Encabezado y pie de página
El encabezado y el pie de página se visualizan en la página de detalles del informe. En el
encabezado y pie de página se insertan por lo general el nombre del proyecto, el nombre del
informe, los números de página y la fecha.

Marca de agua
La primera página, la página de detalles y la última página pueden imprimirse con una marca
de agua. La página y la marca de agua correspondiente se imprimen una sobre otra.
Mediante una marca de agua se visualiza un objeto "A" al lado de un objeto de la longitud
variable "B", sin desplazar el objeto "A". Ejemplo: un campo de salida (A) debe imprimirse en
cada página al lado de una tabla (B).
La primera y última página y las páginas de detalles tienen respectivamente una marca de
agua independiente.

Consulte también
Informes (Página 1269)
Principios básicos de la elaboración de informes (Página 1280)
Crear un informe (Página 1284)

1276

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

7.2

Trabajar con informes

7.2.1

Elaborar informes

7.2.1.1

Principios básicos sobre la elaboración de informes

Introducción
Un informe de WinCC consta de varias secciones que se activan o desactivan según sea
necesario.
● Primera página
● Última página
● Páginas de detalles
● Encabezado y pie de las páginas de detalles
Nota
Se dispone de 35 páginas de detalles por informe.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1277

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
La siguiente figura muestra el procedimiento general para elaborar un informe:
&UHDULQIRUPH

$VLJQDUQRPEUHV

3ULPHUDS£JLQD
RSFLRQDO

RSFLRQDO

(QFDEH]DGR3LHGH
S£JLQD

&RQILJXUDU¼OWLPD
S£JLQD

,QVHUWDUS£JLQDV
GHGHWDOOHV
DGLFLRQDOHV

,QVHUWDUREMHWRGH
LQIRUPHHQS£JLQD
GHGHWDOOHV

QS£JLQDV
GHGHWDOOHV

&RQILJXUDUREMHWR
GHLQIRUPH

&RQILJXUDUIXQFLµQ
GHVLVWHPD
,PSULPLU,QIRUPH

1)

Ajustes en función del objeto de informe utilizado.

Herramientas para diseñar informes
Las herramientas para diseñar informes se encuentran en la Task Card "Herramientas".
● Para la apariencia gráfica inserte en las diferentes secciones del informe "objetos básicos",
"elementos" y "gráficos", por ejemplo, para un logotipo en el encabezado, separadores y un
número de página en el pie de página.
● La visualización de los datos de runtime se configura en las páginas de detalles mediante
los "Controles".
Nota
Para diseñar un informe hay muchos objetos disponibles en el editor "Imágenes" - aunque
sólo con una funcionalidad limitada. Las propiedades para el manejo no están disponibles.
Los campos E/S de los informes muestran únicamente datos, por ejemplo.

1278

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Posición y tamaño de los objetos
Coloque los objetos en la posición en la que se deben visualizar en el informe. Los objetos se
muestran en el tamaño configurado - con la siguiente particularidad:
En las páginas de detalles se tienen que configurar los "informes de receta" o "informes de
aviso", los cuales emiten los datos de runtime en forma de tabla.
● El ancho de la tabla se adapta automáticamente al ancho de la página de detalles. El ancho
no se puede modificar.
● Al imprimir el informe, WinCC adapta automáticamente la altura de la tabla a la cantidad de
datos que deben imprimirse. Dado el caso, la tabla continúa en la página siguiente.
En la página de detalles, WinCC prolonga automáticamente las tablas con una longitud
dinámica hasta el margen inferior de la página de detalles.
La siguiente figura muestra un ejemplo de una página de detalles en el informe y la
visualización en runtime:
Página de detalles en el informe

Visualización de informes en runtime

Páginas de detalles adicionales
Para insertar más páginas de detalles o modificar su orden, utilice el menú contextual de la
página de detalles.

Consulte también
Configurar el registro de avisos (Página 908)
Estructura de los informes (Página 1271)
Crear un informe (Página 1284)
Administrar páginas de detalles (Página 1296)
Objetos en los informes (Página 1326)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1279

Trabajar con informes
7.2 Trabajar con informes

7.2.1.2

Principios básicos de la elaboración de informes

Introducción
Un informe de WinCC consta de varias secciones que se activan o desactivan según sea
necesario.
● Primera página
● Última página
● Páginas de detalles
● Encabezado y pie de las páginas de detalles
● Marca de agua para primera página, última página y página de detalles
Nota
Se dispone de 35 páginas de detalles por informe.

1280

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
La siguiente figura muestra el procedimiento general para elaborar un informe:
&UHDULQIRUPH

$VLJQDUQRPEUHV

3ULPHUDS£JLQD
RSFLRQDO

(QFDEH]DGR3LHGH
S£JLQD

,QVHUWDUPDUFDGH
DJXD
&RQILJXUDU¼OWLPD
S£JLQD

RSFLRQDO

,QVHUWDUS£JLQDV
GHGHWDOOHV
DGLFLRQDOHV

,QVHUWDUREMHWRHQ
S£JLQDGHGHWDOOHV

QS£JLQDV
GHGHWDOOHV

&RQILJXUDUREMHWR

&UHDUWUDEDMRGH
LPSUHVLµQ

RSFLRQDO

1)

&UHDUWDUHDGHOWLSR
WUDEDMRGH
LPSUHVLµQ

Ajustes en función del objeto de informe utilizado.

Herramientas para diseñar informes
Los objetos para diseñar informes se encuentran en la Task Card "Herramientas".
Nota
Para diseñar un informe hay muchos objetos disponibles en el editor "Imágenes" - aunque sólo
con una funcionalidad limitada. Las propiedades para el manejo no están disponibles. Los
campos E/S de los informes muestran únicamente datos, por ejemplo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1281

Trabajar con informes
7.2 Trabajar con informes

Posicionamiento de objetos
Coloque los objetos en la posición en la que se deben visualizar en el informe. Sin embargo,
tenga en cuenta que WinCC ignora los espacios en blanco al inicio de la página de detalles al
imprimir el informe. El objeto superior marca el inicio de la página de detalles en la impresión.
La siguiente figura muestra un ejemplo de una página de detalles en el informe y la
visualización en runtime:
Página de detalles en el informe

Visualización de informes en runtime

Si quiere imprimir un espacio en blanco, aumente el tamaño del encabezado en
correspondencia. También es posible posicionar en la página de detalles un objeto "invisible"
en el inicio deseado. Por ejemplo, una línea blanca que no es visible en papel blanco.

Tamaño de los objetos
Los objetos se muestran en el tamaño configurado.
Configure los "Controles" y "Objetos de informe" en las páginas de detalles para la
visualización de los datos de runtime. WinCC acomoda los datos de runtime en el borde del
objeto - con una particularidad: Si se configura un objeto de longitud dinámica, p. ej. una tabla,
WinCC adapta automáticamente la altura de la tabla a la cantidad de los datos que deben
imprimirse. Dado el caso, la tabla continúa en la página siguiente. WinCC adapta sólo la altura
del objeto y posiciona todos los objetos siguientes debajo del objeto - tal como se ha
configurado en la página de detalles.
La siguiente figura muestra un ejemplo de una página de detalles en el informe y la
visualización en runtime:
Página de detalles en el informe

1282

Visualización de informes en runtime

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Por lo general, los "Controles" y "Objetos de informe" tienen una longitud dinámica que los
datos de runtime visualizan en forma de tabla. Entre ellos se incluyen los siguientes objetos:
● Informe de receta
● Informe de avisos
● Visor de tablas
● Tabla de la base de datos ODBC
● Informe secuencial de avisos
● Tablas del CSV Provider
● Control Copia impresa
● Control Datos
● Control Información

Objetos al lado de objetos dinámicos
No coloque otros objetos al lado de objetos de longitud dinámica en una página de detalles.
Puesto que la posición de los objetos no se puede determinar de manera unívoca, es posible
que WinCC no visualice los objetos de forma correcta. En lugar de eso, configure los objetos
como marcas de agua.
La siguiente figura muestra un ejemplo de una marca de agua y una página de detalles en el
informe, así como la visualización en runtime:
Marcas de agua y página de detalles en el in‐
forme

Visualización de informes en runtime



Portada y última página
La primera y última página se imprimen en una página cada uno. Si se configura un objeto de
longitud dinámica en la primera o última página, WinCC no continúa con la impresión en la
página siguiente. Si el objeto contiene más datos en runtime de los que caben en una página,
no se imprimirán todos los datos en el informe.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1283

Trabajar con informes
7.2 Trabajar con informes

Páginas de detalles adicionales
Para insertar más páginas de detalles o modificar su orden, utilice el menú contextual de la
página de detalles.

Consulte también
Herramientas para diseñar informes (Página 1286)
Archivo CSV para la impresión de curvas (Página 1291)
Archivo CSV para la impresión de una tabla (Página 1293)
Registro continuo de avisos (Página 1290)
Informes (Página 1269)
Estructura de los informes (Página 1274)
Crear un informe (Página 1284)
Administrar páginas de detalles (Página 1296)
Principios básicos de la impresión de informes (Página 1299)
Objetos en los informes (Página 1326)

7.2.1.3

Crear un informe

Requisitos
Hay un proyecto abierto con un panel de operador.

Procedimiento
Para crear un informe, proceda del siguiente modo:
1. En el árbol del proyecto, haga doble clic en "Agregar informe nuevo" de "Informes".
Se muestra un nuevo informe vacío en el editor "Informes".
2. Elija el comando "Propiedades del informe" del menú contextual del informe.

1284

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
3. Defina la estructura del informe en la ventana de inspección en "Propiedades >
Propiedades > General", p. ej. si quiere configurar en el informe "Primera página", "Última
página", "encabezado" y "pie de página".
Las secciones del informe se actualizan en correspondencia.

4. Configure el formato, la orientación y los márgenes de la página del informe en
"Propiedades > Propiedades > Representación".

5. Introduzca un "nombre" que describa el informe en "Propiedades > Propiedades >
Misceláneo".
6. Diseñe cada una de las secciones del informe como prefiera.
Para ello, arrastre los objetos básicos, elementos, gráficos y controles necesarios con la
función Drag&Drop de la Task Card "Herramientas" a la posición deseada.
Como alternativa, puede copiar o mover objetos ya configurados de una imagen al informe.
7. Configure los objetos en la ventana de inspección.

Consulte también
Herramientas para diseñar informes (Página 1286)
Archivo CSV para la impresión de curvas (Página 1291)
Archivo CSV para la impresión de una tabla (Página 1293)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1285

Trabajar con informes
7.2 Trabajar con informes
Registro continuo de avisos (Página 1290)
Configurar el registro de avisos (Página 908)
Informes (Página 1269)
Estructura de los informes (Página 1271)
Estructura de los informes (Página 1274)
Principios básicos de la elaboración de informes (Página 1280)
Trabajar con objetos (Página 1310)
Objetos en los informes (Página 1326)

7.2.1.4

Herramientas para diseñar informes

Herramientas para diseñar informes
En el editor "Informes" se utilizan los objetos de la Task Card "Herramientas" para diseñar
informes.
● Para la apariencia gráfica inserte en las diferentes secciones del informe "objetos básicos",
"elementos" y "gráficos", por ejemplo, para un logotipo en el encabezado, separadores y un
número de página en el pie de página.
● La impresión de los datos de runtime se configura en las páginas de detalles mediante los
"Controles".
● Si desea utilizar informes propios en vez de utilizar un informe de sistema para la función
de impresión de un objeto de imagen, configure la impresión de los datos de runtime
mediante los "Objetos de informe".
Nota
Para diseñar un informe hay muchos objetos disponibles en el editor "Imágenes" - aunque
sólo con una funcionalidad limitada. Las propiedades para el manejo no están disponibles.
Los campos E/S de los informes muestran únicamente datos, por ejemplo.

Elementos
La siguiente tabla proporciona una vista general de los objetos del panel "Elementos":
Objeto

Utilización

Campo de fecha y hora

Para imprimir la fecha y hora actual
El formato de impresión se define de forma individual.

Campo E/S

Para imprimir valores de proceso

Nombre del proyecto

Para imprimir el nombre del proyecto

Se dispone de diferentes formatos de impresión.
El nombre puede imprimirse con o sin una ruta.

1286

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Objeto

Utilización

Nombre del informe

Para imprimir el nombre del informe

Número de página

Para imprimir el número de página y el número total de páginas
El formato de impresión se define de forma individual.

Impresión de datos en forma de tabla
Para que la impresión de datos en forma de tabla sea controlada por tiempo o bien por eventos,
configure en los informes los controles siguientes:
Control

Utilización en el informe

Visor de tablas

Para imprimir los valores de una o varias variables de fichero en función del
tiempo
Cada fila de la tabla representa los valores de las variables de fichero en un
momento determinado.

Tabla de la base de da‐
tos ODBC

Para imprimir datos que no provienen de WinCC
Los datos se impriimen en forma de tabla a través de una interfaz ODBC.

Tablas del CSV Provider Para imprimir datos de un archivo CSV
Los datos del archivo CSV tienen que corresponderse con una estructura
determinada. Es posible seleccionar un archivo CSV o dinamizar la selec‐
ción del archivo CSV con una variable.

En el editor "Imágenes" ya hay integrada una función de impresión en el control "Visor de
tablas" (botón en runtime). El "Visor de tablas" utiliza informes de sistema preconfigurados
para la impresión. En los informes de sistema se imprimen todos los datos o bien únicamente
los datos incluidos actualmente en el objeto (instantánea). Los informes de sistema se adaptan
a las necesidades del usuario o bien se utilizan informes diseñados individualmente en lugar
de los informes de sistema.

Impresión de datos en forma de curvas
Para que la impresión de datos en forma de curvas sea controlada por tiempo o bien por
eventos, configure en los informes los controles siguientes:
Controles

Utilización en el informe

Visor de curvas f(t) en
los informes

Para imprimir variables de fichero como función de tiempo

Visor de curvas f(x) en
los informes

Para imprimir variables de fichero como función de otras variables de fichero,
p. ej. la curva de temperatura en función de la presión
Además se puede comparar la curva con una curva de consigna.

Curvas del CSV Provi‐
der

Para imprimir datos de un archivo CSV
Los datos del archivo CSV tienen que corresponderse con una estructura
determinada. Es posible seleccionar un archivo CSV o dinamizar la selec‐
ción del archivo CSV con una variable.

En el editor "Imágenes" ya está integrada una función de impresión en los controles "Visor de
curvas f(t)" y "Visor de curvas f(x)" (botón en runtime). Para imprimir, estos controles utilizan
informes de sistema predefinidos que pueden adaptarse a sus necesidades.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1287

Trabajar con informes
7.2 Trabajar con informes

Impresión de recetas
Para que la impresión de datos de receta sea controlada por tiempo o bien por eventos,
configure en los informes el siguiente control:
Control

Utilización en el informe

Visor de recetas

Para imprimir elementos de receta

En el editor "Imágenes" ya hay integrada una función de impresión en el control "Visor de
recetas" (botón en runtime). Este control utiliza informes de sistema preconfigurados para la
impresión. En los informes de sistema se imprimen todos los datos o bien únicamente los datos
incluidos actualmente en el objeto (instantánea). Los informes de sistema se adaptan a las
necesidades del usuario o bien se utilizan informes diseñados individualmente en lugar de los
informes de sistema.

Impresión de avisos
WinCC ofrece distintas posibilidades para registrar los avisos:
Para que la impresión de avisos sea controlada por tiempo o bien por eventos, configure en los
informes el siguiente control:
Control

Utilización en el informe

Visor de avisos

Para imprimir avisos que surgen durante el proceso en una instalación
Según la configuración, WinCC imprime p. ej. avisos actuales, avisos inhi‐
bidos o avisos del fichero de corto plazo.

En el editor "Imágenes" ya hay integrada una función de impresión en el control "Visor de
avisos" (botón en runtime). Este control utiliza informes de sistema preconfigurados para la
impresión. En los informes de sistema se imprimen todos los avisos o bien únicamente los
avisos incluidos actualmente en el objeto (instantánea). Los informes de sistema se adaptan
a las necesidades del usuario o bien se utilizan informes diseñados individualmente en lugar
de los informes de sistema.
WinCC también ofrece la posibilidad de imprimir continuamente los avisos tras iniciar runtime,
p. ej. en una impresora de líneas. La impresión sólo tiene que activarse. WinCC ofrece dos
informes de sistema preconfigurados que pueden adaptarse según las necesidades: uno para
la impresión en el diseño de fila y otro para la visualización en el diseño de página.

Impresión de una instantánea de runtime
Para imprimir una instantánea de runtime en un informe, configure para los informes el
siguiente control:
Control

Utilización en el informe

Copia impresa

Para imprimir una instantánea de runtime
Según la configuración, WinCC muestra el contenido de toda la pantalla, de
la ventana activa o de un área de la pantalla personalizada.

1288

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Impresión de datos a través de una interfaz ODBC
Para leer datos de fuentes externas a través de la interfaz ODBC e imprimirlos en un informe,
configure los controles siguientes en los informes:
Control

Utilización en el informe

Campo de la base de
datos ODBC

Para imprimir datos de un campo de una tabla externa de la base de datos

Tabla de la base de da‐
tos ODBC

Para imprimir tablas externas de la base de datos

Objetos de informe
En algunos objetos de imagen se incluye de forma estándar la impresión de informes a través
de un botón (símbolo de impresora), p. ej. en el visor de avisos.
Configure la impresión de los datos de runtime mediante los "Objetos de informe" en los
informes que se quieren utilizar en lugar de un informe de sistema preconfigurado para
imprimir un objeto de imagen.
La siguiente tabla muestra qué objetos de informe pueden utilizarse en los informes:
Objeto

Utilización en el informe

Control Copia impresa

Para imprimir un objeto de imagen como se representa en runtime (instan‐
tánea)

Control Datos

Para imprimir los datos que están incluidos en el objeto de imagen
Los datos se imprimen en forma de tabla.

Control Información

Para imprimir el origen de los datos, p. ej. título de la ventana, nombre del
objeto o nombre de la imagen

Consulte también
Crear un informe (Página 1284)
Principios básicos de la elaboración de informes (Página 1280)
Control Datos (Página 1327)
Control Copia impresa (Página 1328)
Control Información (Página 1329)
Curvas del proveedor CSV (Página 1330)
Tablas del proveedor CSV (Página 1331)
Campo de fecha y hora (Página 1333)
Visor de curvas f(t) en los informes (Página 1336)
Visor de curvas f(x) en los informes (Página 1337)
Copia impresa (Página 1340)
Visor de avisos en los informes (Página 1341)
Campo de base de datos ODBC (Página 1344)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1289

Trabajar con informes
7.2 Trabajar con informes
Tabla de base de datos ODBC (Página 1345)
Nombre del proyecto (Página 1348)
Nombre de informe (Página 1349)
Visor de recetas en los informes (Página 1350)
Número de página (Página 1353)
Visor de tablas en los informes (Página 1355)
Registro continuo de avisos (Página 1290)

7.2.1.5

Registro continuo de avisos

Informe secuencial de avisos
Un informe secuencial de avisos emite continuamente avisos que se producen en el panel de
operador, en una secuencia cronológica, p. ej, en una impresora de líneas.
La utilización del informe secuencial de avisos preconfigurado sólo tiene que activarse.
Si desea imprimir, p. ej., únicamente determinados avisos, adapte el informe a sus
necesidades.

Activación y configuración
La visualización del informe secuencial de avisos preconfigurado está configurado en el
trabajo de impresión del sistema "Alarm sequence report".
Para iniciar también automáticamente el trabajo de impresión del sistema al iniciar runtime:
● Active en la configuración de runtime del panel de operador "Servicios > Secuencia de inicio
de WinCC Runtime > Informe secuencial de avisos".
El informe secuencial de avisos se imprime de forma estándar en una impresora de líneas en
el diseño de fila.
Para visualizar el informe de avisos en el diseño de página:
● Abra el trabajo de impresión del sistema "Alarm sequence report" y desactive la opción
"Utilizar informe de líneas" en "Propiedades > Propiedades > General".
WinCC asigna el informe de sistema correspondiente al trabajo de impresión del sistema.
Si es necesario adapte los informes de sistema a sus necesidades:
● "@AlarmSequenceReportForPagePrinter" para una impresión en el diseño de página
● "@AlarmSequenceReportForLinePrinter" para una impresión en el diseño de fila

Consulte también
Principios básicos de la elaboración de informes (Página 1280)
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

1290

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Informe secuencial de avisos (Página 1342)
Principios básicos de los informes de sistema y trabajos de impresión del sistema
(Página 1306)
Visor de avisos en los informes (Página 1341)

7.2.1.6

Archivo CSV para la impresión de curvas

Requisitos de un archivo CSV para imprimir curvas
Para visualizar una tabla, los datos del archivo CSV tienen que hallarse en una estructura
definida.
El objeto "Curvas del CSV Provider" representa los datos de un archivo CSV en el informe en
forma de curvas. Los datos del archivo CSV tienen que corresponderse con la estructura
descrita a continuación.
El archivo CSV tiene que incluir un párrafo para las diferentes partes del grafo. A su vez, un
párrafo debe tener varias líneas. Los siguientes párrafos están prescritos:
● "Grafo": Contiene el número de las curvas y las indicaciones de representación del grafo
● "Curvas": Contiene indicaciones para la representación de las curvas
● "Valores de la curva": contiene los valores de las curvas
Todos los párrafos están estructurados de la misma forma. La primera línea marca el inicio de
un párrafo y describe cómo se interpretan los datos del párrafo. Las demás líneas de un párrafo
contienen los valores propiamente dichos del grafo o de las curvas.
Separe los valores con un punto y coma. Para marcar el final de una línea, inserte saltos de
línea.

Párrafo "Grafo"
La primera línea del párrafo "Grafo" tiene que decir lo siguiente:
#Trend_T; Name; Curves; DateFrom; DateTo; Common Y-Axis; Font; Fontsize
La segunda línea tiene que contener los valores del grafo.
Nombre

Significado

Name

Nombre del visor de curvas o del
archivo

Observación

Curves

Número de curvas

DateFrom

Inicio del rango de tiempo

Notación: 2000-10-30
10:15:00.000

DateTo

Fin del rango de tiempo

Notación: 2000-10-30
10:15:00.000

Common Y-Axis

Eje Y compartido

Font

Fuente

Fontsize

Tamaño de fuente

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1291

Trabajar con informes
7.2 Trabajar con informes
Ejemplo:
Línea

Contenido

1

#Trend_T; Name; Curves; DateFrom; DateTo; Common Y-Axis; Font; Fontsize

2

"TrendControl1";3;"2001-10-10 16:30:00.000";"2001-10-10 16:40:00.000";0;"Arial";10

Párrafo "Curvas"
La primera línea del párrafo "Curvas" tiene que decir lo siguiente:
#Curve; Num; Name; Count; dMin; dMax; Color; Width; CurveType; Filling
Para cada curva que se represente en el grafo, el párrafo tiene que contener una línea aparte
con los valores de la curva en cuestión.
Nombre

Significado

Observación

Num

Número de la curva

comenzando por 0

Name

Nombre de la curva

Count

Número de valores

dMin

Límite inferior de la curva (para
la escala)

dMax

Límite superior de la curva (para
la escala)

Color

Color del eje Y

en notación hexadecimal

Width

Grosor de línea en puntos

p. ej. 1.5

CurveType

Tipo de curva

LINE, DOTS, STEP

Filling

Color de relleno para superficies 0=no, 1=sí

Ejemplo:
Línea

Contenido

1

#Curve; Num; Name; Count; dMin; dMax; Color; Width; CurveType; Filling

2

0;"Temperatura";3;10;30;0x00ff0000;1;STEP;0

3

1;"Presión";5;0;50;0x0000ff00;2;DOTS;0

...

Estructura de registro "Valores de la curva"
La primera línea del párrafo "Valores de la curva" tiene que decir lo siguiente:
#Data; Num; Date; Value; Flags; Color
Para cada valor que se represente en las curvas, el párrafo tiene que contener una línea aparte
con las correspondientes coordenadas.
Nombre

1292

Significado

Observación

Num

Número de la curva

comenzando por 0

Date

Valor en el eje X de la curva

Notación: 2000-10-30
10:15:00.000

Value

Valor en el eje Y de la curva

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Nombre

Significado

Flags

Valores límite/superposición de
tiempos

Observación

Color

Color de la sección de las curvas En notación hexadecimal
Si no se define un color para la
curva, el color se toma del eje Y
correspondiente.

Ejemplo:
Línea

Contenido

1

#Data; Num; Date; Value; Flags; Color

2

0;"2001-10-10 16:30:00.000";22;0;0x000000FF

3

0;"2001-10-10 16:31:00.000";24;0;

...

Consulte también
Crear un informe (Página 1284)
Principios básicos de la elaboración de informes (Página 1280)
Curvas del proveedor CSV (Página 1330)

7.2.1.7

Archivo CSV para la impresión de una tabla

Requisitos de un archivo CSV para imprimir una tabla
El objeto "Tabla del CSV Provider" representa los datos de un archivo CSV en el informe en
forma de tabla. Los datos del archivo CSV tienen que corresponderse con la estructura
descrita a continuación.
El archivo CSV tiene que incluir un párrafo para las diferentes partes de la tabla. A su vez, un
párrafo debe tener varias líneas. Los siguientes párrafos están prescritos:
● "Tabla": contiene el número de columnas, la fuente y el tamaño de fuente
● "Columnas": contiene los títulos de columna, los anchos de columna y las alineaciones
● "Datos": contiene los datos
Todos los párrafos están estructurados de la misma forma. La primera línea marca el inicio de
un párrafo. La primera línea describe cómo se interpretan los datos del párrafo. Las demás
líneas de un párrafo contienen los valores propiamente dichos del grafo o de las curvas.
Separe los valores con un punto y coma. Para marcar el final de una línea, inserte saltos de
línea.

Párrafo "Tabla"
La primera línea del párrafo "Tabla" tiene que decir lo siguiente:
#Table; Name; Columns; Font; Fontsize

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1293

Trabajar con informes
7.2 Trabajar con informes
La segunda línea tiene que contener los valores de la tabla.
Nombre

Significado

Observación

Name

Nombre del visor de tablas

Columns

Número de columnas

Font

Fuente

Fontsize

Tamaño de fuente

Ejemplo:
Línea

Contenido

1

#Table; Name; Columns; Font; Fontsize

2

"Tab_9";4;"Arial";14

Párrafo "Columnas"
La primera línea del párrafo "Columnas" tiene que decir lo siguiente:
#Column; Num; Header; Width; Alignment
Para cada columna de la tabla, el párrafo tiene que contener una línea aparte con los valores
de la columna en cuestión.
Nombre

Significado

Observación

Num

Número de la columna

comenzando por 0

Header

Título de columna

Width

Ancho de la columna en rela‐
ción con las otras columnas

Ejemplo: defina los siguientes anchos para una tabla de 3
columnas: 2, 4 y 8.
Como resultado, la tercera columna se visualiza dos ve‐
ces más ancha que la segunda columna y tres veces más
ancha que la primera.
Ancho de columna en caracteres = [ancho de tabla en
número de caracteres] x [Width] / [suma de los valores
Width de todas las columnas]

Alignment

Alineación

Left/Central/Right

Ejemplo:
Línea

Contenido

1

#Column; Num; Header; Width; Alignment

2

1;"Número";6;L

3

…

4

…

Párrafo "Valores"
La primera línea del párrafo "Valores" tiene que decir lo siguiente:
#Data; Color; Col1; Col2; Col3; ...

1294

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Para cada línea de la tabla, el párrafo tiene que contener una línea aparte con los valores de
las columnas en cuestión.
Nombre

Significado

Observación

Color

Color de la línea

Notación como en HTML como número Hex
de seis cifras: 0xbbggrr
(hex blue blue green green red red)

Col1

Datos de la columna 1

Col2

Datos de la columna 2

Col3

Datos de la columna 3

Ejemplo:
Línea

Contenido

1

#Data; Color; Col1; Col2; Col3; Col4

2

0xFF00FF;"05/06/02";"15.55.53";86;"+/-"

3

0x32b400;"05/06/02";"15.55.54";87;"+/-"

4

0x32b400;"05/06/02";"16.00.00";82;"+/-"

Preparar los datos en el programa de hoja de cálculo
Tal como demuestran los ejemplos de la sección superior, la primera línea de un párrafo
contiene como primer valor un código que identifica el párrafo, p. ej. "#Data" para identificar el
párrafo "Valores". Las líneas siguientes de un párrafo no contienen este código.
Si se procesan las líneas de un párrafo (de un archivo CSV) con un programa de hoja de
cálculo como Microsoft Excel, los títulos de columna y los valores no concuerdan entre sí.
Para evitar esto, inserte un punto y coma ";" como comodín al inicio de las líneas que contienen
valores propiamente dichos:
● Los títulos de columna y los valores se ubican correctamente en Excel unos debajo de otros.
● WinCC ignora el punto y coma ";" al inicio de la línea y muestra los datos correctamente en
forma de curva/tabla.
Ejemplo:
Línea

Contenido

1

#Data; Color; Col1; Col2; Col3; Col4

2

;0xFF00FF;"05/06/02";"15.55.53";86;"+/-"

3

;0x32b400;"05/06/02";"15.55.54";87;"+/-"

Caracteres de control para formatear valores
Con los caracteres de control se definen p. ej. el color, estilo o alineación de los valores. Los
caracteres de control están siempre por delante de un valor. Se pueden combinar varios
caracteres de control: "<B><U>Texto de salida" hace p. ej. que la palabra "Texto de salida" se
vea en negrita y subrayada. No se distingue entre mayúsculas y minúsculas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1295

Trabajar con informes
7.2 Trabajar con informes
La siguiente tabla proporciona una vista general de los caracteres de control:
<END>

Finaliza una secuencia de caracteres de control. El resto del texto se
adoptará con está indicado.

<COLOR=#rrggbb>

Color de fuente; notación como número Hex de seis cifras con la siguiente
secuencia de bytes: #rrggbb
(red red green green blue blue)

<BGCOLOR=#rrggbb>

Color de fondo en notación hexadecimal

<B>

Estilo negrita

<U>

Estilo subrayado

<I>

Estilo cursiva

<STRIKE>

Estilo tachado

<ALIGN=left>

Alineación de texto a la izquierda

<ALIGN=center>

Alineación de texto centrada

<ALIGN=right>

Alineación de texto a la derecha

Nota
Notaciones diferentes en las indicaciones de color
Los colores se anotan como número Hex de seis cifras.
En el párrafo "Valores" se anota el color de una línea como en HTML, con la siguiente
secuencia de bytes:
0xbbggrr (blue blue green green red red).
Para formatear un valor individual se anotan los valores de color en el carácter de control
<Color> en una secuencia invertida:
#rrggbb (red red green green blue blue).

Consulte también
Crear un informe (Página 1284)
Principios básicos de la elaboración de informes (Página 1280)
Tablas del proveedor CSV (Página 1331)

7.2.1.8

Administrar páginas de detalles

Agregar página de detalles
1. Abra el menú contextual de una página de detalles.
2. Seleccione el comando "Páginas > Insertar página delante" o "Páginas > Insertar página
detrás".
Dependiendo del comando elegido, la nueva página de detalles se inserta delante o detrás
de la página de detalles existente.

1296

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Borrar la página de detalles
1. Abra el menú contextual de la página de detalles que quiere borrar.
2. Elija el comando "Páginas > 